<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2118560">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2118615">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2118669">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2118720">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2118755">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="2118815">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2118876">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2118944">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="2119002">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2119042">package</span>&nbsp;<span class="ident" id="2119050">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2119059">type</span>&nbsp;<span class="ident" id="2119064">decimal</span>&nbsp;<span class="keyword" id="2119072">struct</span>&nbsp;<span class="op" id="2119079">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119082">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2119088">[</span><span class="num" id="2119089">800</span><span class="op" id="2119092">]</span><span class="builtintype" id="2119093">byte</span>&nbsp;<span class="comment" id="2119098">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119109">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2119115">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119125">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119151">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2119157">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119167">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119185">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2119191">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119197">trunc</span>&nbsp;<span class="builtintype" id="2119203">bool</span>&nbsp;<span class="comment" id="2119208">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="2119250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2119253">func</span>&nbsp;<span class="op" id="2119258">(</span><span class="ident" id="2119259">a</span>&nbsp;<span class="op" id="2119261">*</span><span class="ident" id="2119262">decimal</span><span class="op" id="2119269">)</span>&nbsp;<span class="ident" id="2119271">String</span><span class="op" id="2119277">(</span><span class="op" id="2119278">)</span>&nbsp;<span class="builtintype" id="2119280">string</span>&nbsp;<span class="op" id="2119287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119290">n</span>&nbsp;<span class="op" id="2119292">:=</span>&nbsp;<span class="num" id="2119295">10</span>&nbsp;<span class="op" id="2119298">+</span>&nbsp;<span class="ident" id="2119300">a</span><span class="op" id="2119301">.</span><span class="ident" id="2119302">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119306">if</span>&nbsp;<span class="ident" id="2119309">a</span><span class="op" id="2119310">.</span><span class="ident" id="2119311">dp</span>&nbsp;<span class="op" id="2119314">&gt;</span>&nbsp;<span class="num" id="2119316">0</span>&nbsp;<span class="op" id="2119318">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119322">n</span>&nbsp;<span class="op" id="2119324">+=</span>&nbsp;<span class="ident" id="2119327">a</span><span class="op" id="2119328">.</span><span class="ident" id="2119329">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2119333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119336">if</span>&nbsp;<span class="ident" id="2119339">a</span><span class="op" id="2119340">.</span><span class="ident" id="2119341">dp</span>&nbsp;<span class="op" id="2119344">&lt;</span>&nbsp;<span class="num" id="2119346">0</span>&nbsp;<span class="op" id="2119348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119352">n</span>&nbsp;<span class="op" id="2119354">+=</span>&nbsp;<span class="op" id="2119357">-</span><span class="ident" id="2119358">a</span><span class="op" id="2119359">.</span><span class="ident" id="2119360">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2119364">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119368">buf</span>&nbsp;<span class="op" id="2119372">:=</span>&nbsp;<span class="builtinfunc" id="2119375">make</span><span class="op" id="2119379">(</span><span class="op" id="2119380">[</span><span class="op" id="2119381">]</span><span class="builtintype" id="2119382">byte</span><span class="op" id="2119386">,</span>&nbsp;<span class="ident" id="2119388">n</span><span class="op" id="2119389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119392">w</span>&nbsp;<span class="op" id="2119394">:=</span>&nbsp;<span class="num" id="2119397">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119400">switch</span>&nbsp;<span class="op" id="2119407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119410">case</span>&nbsp;<span class="ident" id="2119415">a</span><span class="op" id="2119416">.</span><span class="ident" id="2119417">nd</span>&nbsp;<span class="op" id="2119420">==</span>&nbsp;<span class="num" id="2119423">0</span><span class="op" id="2119424">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119428">return</span>&nbsp;<span class="string" id="2119435">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119441">case</span>&nbsp;<span class="ident" id="2119446">a</span><span class="op" id="2119447">.</span><span class="ident" id="2119448">dp</span>&nbsp;<span class="op" id="2119451">&lt;=</span>&nbsp;<span class="num" id="2119454">0</span><span class="op" id="2119455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2119459">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119514">buf</span><span class="op" id="2119517">[</span><span class="ident" id="2119518">w</span><span class="op" id="2119519">]</span>&nbsp;<span class="op" id="2119521">=</span>&nbsp;<span class="string" id="2119523">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119529">w</span><span class="op" id="2119530">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119535">buf</span><span class="op" id="2119538">[</span><span class="ident" id="2119539">w</span><span class="op" id="2119540">]</span>&nbsp;<span class="op" id="2119542">=</span>&nbsp;<span class="string" id="2119544">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119550">w</span><span class="op" id="2119551">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119556">w</span>&nbsp;<span class="op" id="2119558">+=</span>&nbsp;<span class="ident" id="2119561">digitZero</span><span class="op" id="2119570">(</span><span class="ident" id="2119571">buf</span><span class="op" id="2119574">[</span><span class="ident" id="2119575">w</span>&nbsp;<span class="op" id="2119577">:</span>&nbsp;<span class="ident" id="2119579">w</span><span class="op" id="2119580">+</span><span class="op" id="2119581">-</span><span class="ident" id="2119582">a</span><span class="op" id="2119583">.</span><span class="ident" id="2119584">dp</span><span class="op" id="2119586">]</span><span class="op" id="2119587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119591">w</span>&nbsp;<span class="op" id="2119593">+=</span>&nbsp;<span class="builtinfunc" id="2119596">copy</span><span class="op" id="2119600">(</span><span class="ident" id="2119601">buf</span><span class="op" id="2119604">[</span><span class="ident" id="2119605">w</span><span class="op" id="2119606">:</span><span class="op" id="2119607">]</span><span class="op" id="2119608">,</span>&nbsp;<span class="ident" id="2119610">a</span><span class="op" id="2119611">.</span><span class="ident" id="2119612">d</span><span class="op" id="2119613">[</span><span class="num" id="2119614">0</span><span class="op" id="2119615">:</span><span class="ident" id="2119616">a</span><span class="op" id="2119617">.</span><span class="ident" id="2119618">nd</span><span class="op" id="2119620">]</span><span class="op" id="2119621">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119625">case</span>&nbsp;<span class="ident" id="2119630">a</span><span class="op" id="2119631">.</span><span class="ident" id="2119632">dp</span>&nbsp;<span class="op" id="2119635">&lt;</span>&nbsp;<span class="ident" id="2119637">a</span><span class="op" id="2119638">.</span><span class="ident" id="2119639">nd</span><span class="op" id="2119641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2119645">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119684">w</span>&nbsp;<span class="op" id="2119686">+=</span>&nbsp;<span class="builtinfunc" id="2119689">copy</span><span class="op" id="2119693">(</span><span class="ident" id="2119694">buf</span><span class="op" id="2119697">[</span><span class="ident" id="2119698">w</span><span class="op" id="2119699">:</span><span class="op" id="2119700">]</span><span class="op" id="2119701">,</span>&nbsp;<span class="ident" id="2119703">a</span><span class="op" id="2119704">.</span><span class="ident" id="2119705">d</span><span class="op" id="2119706">[</span><span class="num" id="2119707">0</span><span class="op" id="2119708">:</span><span class="ident" id="2119709">a</span><span class="op" id="2119710">.</span><span class="ident" id="2119711">dp</span><span class="op" id="2119713">]</span><span class="op" id="2119714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119718">buf</span><span class="op" id="2119721">[</span><span class="ident" id="2119722">w</span><span class="op" id="2119723">]</span>&nbsp;<span class="op" id="2119725">=</span>&nbsp;<span class="string" id="2119727">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119733">w</span><span class="op" id="2119734">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119739">w</span>&nbsp;<span class="op" id="2119741">+=</span>&nbsp;<span class="builtinfunc" id="2119744">copy</span><span class="op" id="2119748">(</span><span class="ident" id="2119749">buf</span><span class="op" id="2119752">[</span><span class="ident" id="2119753">w</span><span class="op" id="2119754">:</span><span class="op" id="2119755">]</span><span class="op" id="2119756">,</span>&nbsp;<span class="ident" id="2119758">a</span><span class="op" id="2119759">.</span><span class="ident" id="2119760">d</span><span class="op" id="2119761">[</span><span class="ident" id="2119762">a</span><span class="op" id="2119763">.</span><span class="ident" id="2119764">dp</span><span class="op" id="2119766">:</span><span class="ident" id="2119767">a</span><span class="op" id="2119768">.</span><span class="ident" id="2119769">nd</span><span class="op" id="2119771">]</span><span class="op" id="2119772">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119776">default</span><span class="op" id="2119783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2119787">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119842">w</span>&nbsp;<span class="op" id="2119844">+=</span>&nbsp;<span class="builtinfunc" id="2119847">copy</span><span class="op" id="2119851">(</span><span class="ident" id="2119852">buf</span><span class="op" id="2119855">[</span><span class="ident" id="2119856">w</span><span class="op" id="2119857">:</span><span class="op" id="2119858">]</span><span class="op" id="2119859">,</span>&nbsp;<span class="ident" id="2119861">a</span><span class="op" id="2119862">.</span><span class="ident" id="2119863">d</span><span class="op" id="2119864">[</span><span class="num" id="2119865">0</span><span class="op" id="2119866">:</span><span class="ident" id="2119867">a</span><span class="op" id="2119868">.</span><span class="ident" id="2119869">nd</span><span class="op" id="2119871">]</span><span class="op" id="2119872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2119876">w</span>&nbsp;<span class="op" id="2119878">+=</span>&nbsp;<span class="ident" id="2119881">digitZero</span><span class="op" id="2119890">(</span><span class="ident" id="2119891">buf</span><span class="op" id="2119894">[</span><span class="ident" id="2119895">w</span>&nbsp;<span class="op" id="2119897">:</span>&nbsp;<span class="ident" id="2119899">w</span><span class="op" id="2119900">+</span><span class="ident" id="2119901">a</span><span class="op" id="2119902">.</span><span class="ident" id="2119903">dp</span><span class="op" id="2119905">-</span><span class="ident" id="2119906">a</span><span class="op" id="2119907">.</span><span class="ident" id="2119908">nd</span><span class="op" id="2119910">]</span><span class="op" id="2119911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2119914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119917">return</span>&nbsp;<span class="builtintype" id="2119924">string</span><span class="op" id="2119930">(</span><span class="ident" id="2119931">buf</span><span class="op" id="2119934">[</span><span class="num" id="2119935">0</span><span class="op" id="2119936">:</span><span class="ident" id="2119937">w</span><span class="op" id="2119938">]</span><span class="op" id="2119939">)</span><br>
<span class="lineno"></span><span class="op" id="2119941">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2119944">func</span>&nbsp;<span class="ident" id="2119949">digitZero</span><span class="op" id="2119958">(</span><span class="ident" id="2119959">dst</span>&nbsp;<span class="op" id="2119963">[</span><span class="op" id="2119964">]</span><span class="builtintype" id="2119965">byte</span><span class="op" id="2119969">)</span>&nbsp;<span class="builtintype" id="2119971">int</span>&nbsp;<span class="op" id="2119975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2119978">for</span>&nbsp;<span class="ident" id="2119982">i</span>&nbsp;<span class="op" id="2119984">:=</span>&nbsp;<span class="keyword" id="2119987">range</span>&nbsp;<span class="ident" id="2119993">dst</span>&nbsp;<span class="op" id="2119997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120001">dst</span><span class="op" id="2120004">[</span><span class="ident" id="2120005">i</span><span class="op" id="2120006">]</span>&nbsp;<span class="op" id="2120008">=</span>&nbsp;<span class="string" id="2120010">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2120015">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2120018">return</span>&nbsp;<span class="builtinfunc" id="2120025">len</span><span class="op" id="2120028">(</span><span class="ident" id="2120029">dst</span><span class="op" id="2120032">)</span><br>
<span class="lineno"></span><span class="op" id="2120034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2120037">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="2120073">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="2120128">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="2120169">func</span>&nbsp;<span class="ident" id="2120174">trim</span><span class="op" id="2120178">(</span><span class="ident" id="2120179">a</span>&nbsp;<span class="op" id="2120181">*</span><span class="ident" id="2120182">decimal</span><span class="op" id="2120189">)</span>&nbsp;<span class="op" id="2120191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2120194">for</span>&nbsp;<span class="ident" id="2120198">a</span><span class="op" id="2120199">.</span><span class="ident" id="2120200">nd</span>&nbsp;<span class="op" id="2120203">&gt;</span>&nbsp;<span class="num" id="2120205">0</span>&nbsp;<span class="op" id="2120207">&amp;&amp;</span>&nbsp;<span class="ident" id="2120210">a</span><span class="op" id="2120211">.</span><span class="ident" id="2120212">d</span><span class="op" id="2120213">[</span><span class="ident" id="2120214">a</span><span class="op" id="2120215">.</span><span class="ident" id="2120216">nd</span><span class="op" id="2120218">-</span><span class="num" id="2120219">1</span><span class="op" id="2120220">]</span>&nbsp;<span class="op" id="2120222">==</span>&nbsp;<span class="string" id="2120225">&#39;0&#39;</span>&nbsp;<span class="op" id="2120229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120233">a</span><span class="op" id="2120234">.</span><span class="ident" id="2120235">nd</span><span class="op" id="2120237">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2120241">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2120244">if</span>&nbsp;<span class="ident" id="2120247">a</span><span class="op" id="2120248">.</span><span class="ident" id="2120249">nd</span>&nbsp;<span class="op" id="2120252">==</span>&nbsp;<span class="num" id="2120255">0</span>&nbsp;<span class="op" id="2120257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120261">a</span><span class="op" id="2120262">.</span><span class="ident" id="2120263">dp</span>&nbsp;<span class="op" id="2120266">=</span>&nbsp;<span class="num" id="2120268">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2120271">}</span><br>
<span class="lineno"></span><span class="op" id="2120273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2120276">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="2120294">func</span>&nbsp;<span class="op" id="2120299">(</span><span class="ident" id="2120300">a</span>&nbsp;<span class="op" id="2120302">*</span><span class="ident" id="2120303">decimal</span><span class="op" id="2120310">)</span>&nbsp;<span class="ident" id="2120312">Assign</span><span class="op" id="2120318">(</span><span class="ident" id="2120319">v</span>&nbsp;<span class="ident" id="2120321">uint64</span><span class="op" id="2120327">)</span>&nbsp;<span class="op" id="2120329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2120332">var</span>&nbsp;<span class="ident" id="2120336">buf</span>&nbsp;<span class="op" id="2120340">[</span><span class="num" id="2120341">24</span><span class="op" id="2120343">]</span><span class="builtintype" id="2120344">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2120351">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120386">n</span>&nbsp;<span class="op" id="2120388">:=</span>&nbsp;<span class="num" id="2120391">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2120394">for</span>&nbsp;<span class="ident" id="2120398">v</span>&nbsp;<span class="op" id="2120400">&gt;</span>&nbsp;<span class="num" id="2120402">0</span>&nbsp;<span class="op" id="2120404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120408">v1</span>&nbsp;<span class="op" id="2120411">:=</span>&nbsp;<span class="ident" id="2120414">v</span>&nbsp;<span class="op" id="2120416">/</span>&nbsp;<span class="num" id="2120418">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120423">v</span>&nbsp;<span class="op" id="2120425">-=</span>&nbsp;<span class="num" id="2120428">10</span>&nbsp;<span class="op" id="2120431">*</span>&nbsp;<span class="ident" id="2120433">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120438">buf</span><span class="op" id="2120441">[</span><span class="ident" id="2120442">n</span><span class="op" id="2120443">]</span>&nbsp;<span class="op" id="2120445">=</span>&nbsp;<span class="builtintype" id="2120447">byte</span><span class="op" id="2120451">(</span><span class="ident" id="2120452">v</span>&nbsp;<span class="op" id="2120454">+</span>&nbsp;<span class="string" id="2120456">&#39;0&#39;</span><span class="op" id="2120459">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120463">n</span><span class="op" id="2120464">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120469">v</span>&nbsp;<span class="op" id="2120471">=</span>&nbsp;<span class="ident" id="2120473">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2120477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2120481">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120534">a</span><span class="op" id="2120535">.</span><span class="ident" id="2120536">nd</span>&nbsp;<span class="op" id="2120539">=</span>&nbsp;<span class="num" id="2120541">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2120544">for</span>&nbsp;<span class="ident" id="2120548">n</span><span class="op" id="2120549">--</span><span class="op" id="2120551">;</span>&nbsp;<span class="ident" id="2120553">n</span>&nbsp;<span class="op" id="2120555">&gt;=</span>&nbsp;<span class="num" id="2120558">0</span><span class="op" id="2120559">;</span>&nbsp;<span class="ident" id="2120561">n</span><span class="op" id="2120562">--</span>&nbsp;<span class="op" id="2120565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120569">a</span><span class="op" id="2120570">.</span><span class="ident" id="2120571">d</span><span class="op" id="2120572">[</span><span class="ident" id="2120573">a</span><span class="op" id="2120574">.</span><span class="ident" id="2120575">nd</span><span class="op" id="2120577">]</span>&nbsp;<span class="op" id="2120579">=</span>&nbsp;<span class="ident" id="2120581">buf</span><span class="op" id="2120584">[</span><span class="ident" id="2120585">n</span><span class="op" id="2120586">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120590">a</span><span class="op" id="2120591">.</span><span class="ident" id="2120592">nd</span><span class="op" id="2120594">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2120598">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120601">a</span><span class="op" id="2120602">.</span><span class="ident" id="2120603">dp</span>&nbsp;<span class="op" id="2120606">=</span>&nbsp;<span class="ident" id="2120608">a</span><span class="op" id="2120609">.</span><span class="ident" id="2120610">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120614">trim</span><span class="op" id="2120618">(</span><span class="ident" id="2120619">a</span><span class="op" id="2120620">)</span><br>
<span class="lineno"></span><span class="op" id="2120622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2120625">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="2120687">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="2120758">const</span>&nbsp;<span class="ident" id="2120764">maxShift</span>&nbsp;<span class="op" id="2120773">=</span>&nbsp;<span class="num" id="2120775">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2120779">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2120852">func</span>&nbsp;<span class="ident" id="2120857">rightShift</span><span class="op" id="2120867">(</span><span class="ident" id="2120868">a</span>&nbsp;<span class="op" id="2120870">*</span><span class="ident" id="2120871">decimal</span><span class="op" id="2120878">,</span>&nbsp;<span class="ident" id="2120880">k</span>&nbsp;<span class="builtintype" id="2120882">uint</span><span class="op" id="2120886">)</span>&nbsp;<span class="op" id="2120888">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120891">r</span>&nbsp;<span class="op" id="2120893">:=</span>&nbsp;<span class="num" id="2120896">0</span>&nbsp;<span class="comment" id="2120898">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120915">w</span>&nbsp;<span class="op" id="2120917">:=</span>&nbsp;<span class="num" id="2120920">0</span>&nbsp;<span class="comment" id="2120922">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2120941">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2120997">n</span>&nbsp;<span class="op" id="2120999">:=</span>&nbsp;<span class="num" id="2121002">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121005">for</span>&nbsp;<span class="op" id="2121009">;</span>&nbsp;<span class="ident" id="2121011">n</span><span class="op" id="2121012">&gt;&gt;</span><span class="ident" id="2121014">k</span>&nbsp;<span class="op" id="2121016">==</span>&nbsp;<span class="num" id="2121019">0</span><span class="op" id="2121020">;</span>&nbsp;<span class="ident" id="2121022">r</span><span class="op" id="2121023">++</span>&nbsp;<span class="op" id="2121026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121030">if</span>&nbsp;<span class="ident" id="2121033">r</span>&nbsp;<span class="op" id="2121035">&gt;=</span>&nbsp;<span class="ident" id="2121038">a</span><span class="op" id="2121039">.</span><span class="ident" id="2121040">nd</span>&nbsp;<span class="op" id="2121043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121048">if</span>&nbsp;<span class="ident" id="2121051">n</span>&nbsp;<span class="op" id="2121053">==</span>&nbsp;<span class="num" id="2121056">0</span>&nbsp;<span class="op" id="2121058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2121064">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121118">a</span><span class="op" id="2121119">.</span><span class="ident" id="2121120">nd</span>&nbsp;<span class="op" id="2121123">=</span>&nbsp;<span class="num" id="2121125">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121131">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121146">for</span>&nbsp;<span class="ident" id="2121150">n</span><span class="op" id="2121151">&gt;&gt;</span><span class="ident" id="2121153">k</span>&nbsp;<span class="op" id="2121155">==</span>&nbsp;<span class="num" id="2121158">0</span>&nbsp;<span class="op" id="2121160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121166">n</span>&nbsp;<span class="op" id="2121168">=</span>&nbsp;<span class="ident" id="2121170">n</span>&nbsp;<span class="op" id="2121172">*</span>&nbsp;<span class="num" id="2121174">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121181">r</span><span class="op" id="2121182">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121193">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121205">c</span>&nbsp;<span class="op" id="2121207">:=</span>&nbsp;<span class="builtintype" id="2121210">int</span><span class="op" id="2121213">(</span><span class="ident" id="2121214">a</span><span class="op" id="2121215">.</span><span class="ident" id="2121216">d</span><span class="op" id="2121217">[</span><span class="ident" id="2121218">r</span><span class="op" id="2121219">]</span><span class="op" id="2121220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121224">n</span>&nbsp;<span class="op" id="2121226">=</span>&nbsp;<span class="ident" id="2121228">n</span><span class="op" id="2121229">*</span><span class="num" id="2121230">10</span>&nbsp;<span class="op" id="2121233">+</span>&nbsp;<span class="ident" id="2121235">c</span>&nbsp;<span class="op" id="2121237">-</span>&nbsp;<span class="string" id="2121239">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121247">a</span><span class="op" id="2121248">.</span><span class="ident" id="2121249">dp</span>&nbsp;<span class="op" id="2121252">-=</span>&nbsp;<span class="ident" id="2121255">r</span>&nbsp;<span class="op" id="2121257">-</span>&nbsp;<span class="num" id="2121259">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2121263">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121302">for</span>&nbsp;<span class="op" id="2121306">;</span>&nbsp;<span class="ident" id="2121308">r</span>&nbsp;<span class="op" id="2121310">&lt;</span>&nbsp;<span class="ident" id="2121312">a</span><span class="op" id="2121313">.</span><span class="ident" id="2121314">nd</span><span class="op" id="2121316">;</span>&nbsp;<span class="ident" id="2121318">r</span><span class="op" id="2121319">++</span>&nbsp;<span class="op" id="2121322">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121326">c</span>&nbsp;<span class="op" id="2121328">:=</span>&nbsp;<span class="builtintype" id="2121331">int</span><span class="op" id="2121334">(</span><span class="ident" id="2121335">a</span><span class="op" id="2121336">.</span><span class="ident" id="2121337">d</span><span class="op" id="2121338">[</span><span class="ident" id="2121339">r</span><span class="op" id="2121340">]</span><span class="op" id="2121341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121345">dig</span>&nbsp;<span class="op" id="2121349">:=</span>&nbsp;<span class="ident" id="2121352">n</span>&nbsp;<span class="op" id="2121354">&gt;&gt;</span>&nbsp;<span class="ident" id="2121357">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121361">n</span>&nbsp;<span class="op" id="2121363">-=</span>&nbsp;<span class="ident" id="2121366">dig</span>&nbsp;<span class="op" id="2121370">&lt;&lt;</span>&nbsp;<span class="ident" id="2121373">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121377">a</span><span class="op" id="2121378">.</span><span class="ident" id="2121379">d</span><span class="op" id="2121380">[</span><span class="ident" id="2121381">w</span><span class="op" id="2121382">]</span>&nbsp;<span class="op" id="2121384">=</span>&nbsp;<span class="builtintype" id="2121386">byte</span><span class="op" id="2121390">(</span><span class="ident" id="2121391">dig</span>&nbsp;<span class="op" id="2121395">+</span>&nbsp;<span class="string" id="2121397">&#39;0&#39;</span><span class="op" id="2121400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121404">w</span><span class="op" id="2121405">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121410">n</span>&nbsp;<span class="op" id="2121412">=</span>&nbsp;<span class="ident" id="2121414">n</span><span class="op" id="2121415">*</span><span class="num" id="2121416">10</span>&nbsp;<span class="op" id="2121419">+</span>&nbsp;<span class="ident" id="2121421">c</span>&nbsp;<span class="op" id="2121423">-</span>&nbsp;<span class="string" id="2121425">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2121434">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121461">for</span>&nbsp;<span class="ident" id="2121465">n</span>&nbsp;<span class="op" id="2121467">&gt;</span>&nbsp;<span class="num" id="2121469">0</span>&nbsp;<span class="op" id="2121471">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121475">dig</span>&nbsp;<span class="op" id="2121479">:=</span>&nbsp;<span class="ident" id="2121482">n</span>&nbsp;<span class="op" id="2121484">&gt;&gt;</span>&nbsp;<span class="ident" id="2121487">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121491">n</span>&nbsp;<span class="op" id="2121493">-=</span>&nbsp;<span class="ident" id="2121496">dig</span>&nbsp;<span class="op" id="2121500">&lt;&lt;</span>&nbsp;<span class="ident" id="2121503">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2121507">if</span>&nbsp;<span class="ident" id="2121510">w</span>&nbsp;<span class="op" id="2121512">&lt;</span>&nbsp;<span class="builtinfunc" id="2121514">len</span><span class="op" id="2121517">(</span><span class="ident" id="2121518">a</span><span class="op" id="2121519">.</span><span class="ident" id="2121520">d</span><span class="op" id="2121521">)</span>&nbsp;<span class="op" id="2121523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121528">a</span><span class="op" id="2121529">.</span><span class="ident" id="2121530">d</span><span class="op" id="2121531">[</span><span class="ident" id="2121532">w</span><span class="op" id="2121533">]</span>&nbsp;<span class="op" id="2121535">=</span>&nbsp;<span class="builtintype" id="2121537">byte</span><span class="op" id="2121541">(</span><span class="ident" id="2121542">dig</span>&nbsp;<span class="op" id="2121546">+</span>&nbsp;<span class="string" id="2121548">&#39;0&#39;</span><span class="op" id="2121551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121556">w</span><span class="op" id="2121557">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121562">}</span>&nbsp;<span class="keyword" id="2121564">else</span>&nbsp;<span class="keyword" id="2121569">if</span>&nbsp;<span class="ident" id="2121572">dig</span>&nbsp;<span class="op" id="2121576">&gt;</span>&nbsp;<span class="num" id="2121578">0</span>&nbsp;<span class="op" id="2121580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121585">a</span><span class="op" id="2121586">.</span><span class="ident" id="2121587">trunc</span>&nbsp;<span class="op" id="2121593">=</span>&nbsp;<span class="ident" id="2121595">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121606">n</span>&nbsp;<span class="op" id="2121608">=</span>&nbsp;<span class="ident" id="2121610">n</span>&nbsp;<span class="op" id="2121612">*</span>&nbsp;<span class="num" id="2121614">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2121618">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121622">a</span><span class="op" id="2121623">.</span><span class="ident" id="2121624">nd</span>&nbsp;<span class="op" id="2121627">=</span>&nbsp;<span class="ident" id="2121629">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2121632">trim</span><span class="op" id="2121636">(</span><span class="ident" id="2121637">a</span><span class="op" id="2121638">)</span><br>
<span class="lineno"></span><span class="op" id="2121640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="2121643">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="2121710">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2121773">//</span><br>
<span class="lineno"></span><span class="comment" id="2121776">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2121837">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="2121906">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="2121976">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2122024">//</span><br>
<span class="lineno"></span><span class="comment" id="2122027">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="2122066">type</span>&nbsp;<span class="ident" id="2122071">leftCheat</span>&nbsp;<span class="keyword" id="2122081">struct</span>&nbsp;<span class="op" id="2122088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2122091">delta</span>&nbsp;&nbsp;<span class="builtintype" id="2122098">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122105">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2122130">cutoff</span>&nbsp;<span class="builtintype" id="2122137">string</span>&nbsp;<span class="comment" id="2122144">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="2122182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2122185">var</span>&nbsp;<span class="ident" id="2122189">leftcheats</span>&nbsp;<span class="op" id="2122200">=</span>&nbsp;<span class="op" id="2122202">[</span><span class="op" id="2122203">]</span><span class="ident" id="2122204">leftCheat</span><span class="op" id="2122213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2122216">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2122251">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2122306">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2122342">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspseq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspawk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspprintf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspint(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122546">{</span><span class="num" id="2122547">0</span><span class="op" id="2122548">,</span>&nbsp;<span class="string" id="2122550">&#34;&#34;</span><span class="op" id="2122552">}</span><span class="op" id="2122553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122556">{</span><span class="num" id="2122557">1</span><span class="op" id="2122558">,</span>&nbsp;<span class="string" id="2122560">&#34;5&#34;</span><span class="op" id="2122563">}</span><span class="op" id="2122564">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122584">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122592">{</span><span class="num" id="2122593">1</span><span class="op" id="2122594">,</span>&nbsp;<span class="string" id="2122596">&#34;25&#34;</span><span class="op" id="2122600">}</span><span class="op" id="2122601">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122620">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122628">{</span><span class="num" id="2122629">1</span><span class="op" id="2122630">,</span>&nbsp;<span class="string" id="2122632">&#34;125&#34;</span><span class="op" id="2122637">}</span><span class="op" id="2122638">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122656">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122664">{</span><span class="num" id="2122665">2</span><span class="op" id="2122666">,</span>&nbsp;<span class="string" id="2122668">&#34;625&#34;</span><span class="op" id="2122673">}</span><span class="op" id="2122674">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122692">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122701">{</span><span class="num" id="2122702">2</span><span class="op" id="2122703">,</span>&nbsp;<span class="string" id="2122705">&#34;3125&#34;</span><span class="op" id="2122711">}</span><span class="op" id="2122712">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122729">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122738">{</span><span class="num" id="2122739">2</span><span class="op" id="2122740">,</span>&nbsp;<span class="string" id="2122742">&#34;15625&#34;</span><span class="op" id="2122749">}</span><span class="op" id="2122750">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122766">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122775">{</span><span class="num" id="2122776">3</span><span class="op" id="2122777">,</span>&nbsp;<span class="string" id="2122779">&#34;78125&#34;</span><span class="op" id="2122786">}</span><span class="op" id="2122787">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122803">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122813">{</span><span class="num" id="2122814">3</span><span class="op" id="2122815">,</span>&nbsp;<span class="string" id="2122817">&#34;390625&#34;</span><span class="op" id="2122825">}</span><span class="op" id="2122826">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122841">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122851">{</span><span class="num" id="2122852">3</span><span class="op" id="2122853">,</span>&nbsp;<span class="string" id="2122855">&#34;1953125&#34;</span><span class="op" id="2122864">}</span><span class="op" id="2122865">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122879">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122889">{</span><span class="num" id="2122890">4</span><span class="op" id="2122891">,</span>&nbsp;<span class="string" id="2122893">&#34;9765625&#34;</span><span class="op" id="2122902">}</span><span class="op" id="2122903">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122917">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122928">{</span><span class="num" id="2122929">4</span><span class="op" id="2122930">,</span>&nbsp;<span class="string" id="2122932">&#34;48828125&#34;</span><span class="op" id="2122942">}</span><span class="op" id="2122943">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122956">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2122967">{</span><span class="num" id="2122968">4</span><span class="op" id="2122969">,</span>&nbsp;<span class="string" id="2122971">&#34;244140625&#34;</span><span class="op" id="2122982">}</span><span class="op" id="2122983">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122995">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123006">{</span><span class="num" id="2123007">4</span><span class="op" id="2123008">,</span>&nbsp;<span class="string" id="2123010">&#34;1220703125&#34;</span><span class="op" id="2123022">}</span><span class="op" id="2123023">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123034">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123045">{</span><span class="num" id="2123046">5</span><span class="op" id="2123047">,</span>&nbsp;<span class="string" id="2123049">&#34;6103515625&#34;</span><span class="op" id="2123061">}</span><span class="op" id="2123062">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123073">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123085">{</span><span class="num" id="2123086">5</span><span class="op" id="2123087">,</span>&nbsp;<span class="string" id="2123089">&#34;30517578125&#34;</span><span class="op" id="2123102">}</span><span class="op" id="2123103">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123113">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123125">{</span><span class="num" id="2123126">5</span><span class="op" id="2123127">,</span>&nbsp;<span class="string" id="2123129">&#34;152587890625&#34;</span><span class="op" id="2123143">}</span><span class="op" id="2123144">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123153">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123165">{</span><span class="num" id="2123166">6</span><span class="op" id="2123167">,</span>&nbsp;<span class="string" id="2123169">&#34;762939453125&#34;</span><span class="op" id="2123183">}</span><span class="op" id="2123184">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123193">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123206">{</span><span class="num" id="2123207">6</span><span class="op" id="2123208">,</span>&nbsp;<span class="string" id="2123210">&#34;3814697265625&#34;</span><span class="op" id="2123225">}</span><span class="op" id="2123226">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123234">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123247">{</span><span class="num" id="2123248">6</span><span class="op" id="2123249">,</span>&nbsp;<span class="string" id="2123251">&#34;19073486328125&#34;</span><span class="op" id="2123267">}</span><span class="op" id="2123268">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123275">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123288">{</span><span class="num" id="2123289">7</span><span class="op" id="2123290">,</span>&nbsp;<span class="string" id="2123292">&#34;95367431640625&#34;</span><span class="op" id="2123308">}</span><span class="op" id="2123309">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123316">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123330">{</span><span class="num" id="2123331">7</span><span class="op" id="2123332">,</span>&nbsp;<span class="string" id="2123334">&#34;476837158203125&#34;</span><span class="op" id="2123351">}</span><span class="op" id="2123352">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123358">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123372">{</span><span class="num" id="2123373">7</span><span class="op" id="2123374">,</span>&nbsp;<span class="string" id="2123376">&#34;2384185791015625&#34;</span><span class="op" id="2123394">}</span><span class="op" id="2123395">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123400">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123414">{</span><span class="num" id="2123415">7</span><span class="op" id="2123416">,</span>&nbsp;<span class="string" id="2123418">&#34;11920928955078125&#34;</span><span class="op" id="2123437">}</span><span class="op" id="2123438">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2123442">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123456">{</span><span class="num" id="2123457">8</span><span class="op" id="2123458">,</span>&nbsp;<span class="string" id="2123460">&#34;59604644775390625&#34;</span><span class="op" id="2123479">}</span><span class="op" id="2123480">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2123484">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123499">{</span><span class="num" id="2123500">8</span><span class="op" id="2123501">,</span>&nbsp;<span class="string" id="2123503">&#34;298023223876953125&#34;</span><span class="op" id="2123523">}</span><span class="op" id="2123524">,</span>&nbsp;&nbsp;<span class="comment" id="2123527">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123542">{</span><span class="num" id="2123543">8</span><span class="op" id="2123544">,</span>&nbsp;<span class="string" id="2123546">&#34;1490116119384765625&#34;</span><span class="op" id="2123567">}</span><span class="op" id="2123568">,</span>&nbsp;<span class="comment" id="2123570">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123585">{</span><span class="num" id="2123586">9</span><span class="op" id="2123587">,</span>&nbsp;<span class="string" id="2123589">&#34;7450580596923828125&#34;</span><span class="op" id="2123610">}</span><span class="op" id="2123611">,</span>&nbsp;<span class="comment" id="2123613">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="2123628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2123631">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="2123692">func</span>&nbsp;<span class="ident" id="2123697">prefixIsLessThan</span><span class="op" id="2123713">(</span><span class="ident" id="2123714">b</span>&nbsp;<span class="op" id="2123716">[</span><span class="op" id="2123717">]</span><span class="builtintype" id="2123718">byte</span><span class="op" id="2123722">,</span>&nbsp;<span class="ident" id="2123724">s</span>&nbsp;<span class="builtintype" id="2123726">string</span><span class="op" id="2123732">)</span>&nbsp;<span class="builtintype" id="2123734">bool</span>&nbsp;<span class="op" id="2123739">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2123742">for</span>&nbsp;<span class="ident" id="2123746">i</span>&nbsp;<span class="op" id="2123748">:=</span>&nbsp;<span class="num" id="2123751">0</span><span class="op" id="2123752">;</span>&nbsp;<span class="ident" id="2123754">i</span>&nbsp;<span class="op" id="2123756">&lt;</span>&nbsp;<span class="builtinfunc" id="2123758">len</span><span class="op" id="2123761">(</span><span class="ident" id="2123762">s</span><span class="op" id="2123763">)</span><span class="op" id="2123764">;</span>&nbsp;<span class="ident" id="2123766">i</span><span class="op" id="2123767">++</span>&nbsp;<span class="op" id="2123770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2123774">if</span>&nbsp;<span class="ident" id="2123777">i</span>&nbsp;<span class="op" id="2123779">&gt;=</span>&nbsp;<span class="builtinfunc" id="2123782">len</span><span class="op" id="2123785">(</span><span class="ident" id="2123786">b</span><span class="op" id="2123787">)</span>&nbsp;<span class="op" id="2123789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2123794">return</span>&nbsp;<span class="ident" id="2123801">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2123812">if</span>&nbsp;<span class="ident" id="2123815">b</span><span class="op" id="2123816">[</span><span class="ident" id="2123817">i</span><span class="op" id="2123818">]</span>&nbsp;<span class="op" id="2123820">!=</span>&nbsp;<span class="ident" id="2123823">s</span><span class="op" id="2123824">[</span><span class="ident" id="2123825">i</span><span class="op" id="2123826">]</span>&nbsp;<span class="op" id="2123828">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2123833">return</span>&nbsp;<span class="ident" id="2123840">b</span><span class="op" id="2123841">[</span><span class="ident" id="2123842">i</span><span class="op" id="2123843">]</span>&nbsp;<span class="op" id="2123845">&lt;</span>&nbsp;<span class="ident" id="2123847">s</span><span class="op" id="2123848">[</span><span class="ident" id="2123849">i</span><span class="op" id="2123850">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2123857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2123860">return</span>&nbsp;<span class="ident" id="2123867">false</span><br>
<span class="lineno"></span><span class="op" id="2123873">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2123876">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2123948">func</span>&nbsp;<span class="ident" id="2123953">leftShift</span><span class="op" id="2123962">(</span><span class="ident" id="2123963">a</span>&nbsp;<span class="op" id="2123965">*</span><span class="ident" id="2123966">decimal</span><span class="op" id="2123973">,</span>&nbsp;<span class="ident" id="2123975">k</span>&nbsp;<span class="builtintype" id="2123977">uint</span><span class="op" id="2123981">)</span>&nbsp;<span class="op" id="2123983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2123986">delta</span>&nbsp;<span class="op" id="2123992">:=</span>&nbsp;<span class="ident" id="2123995">leftcheats</span><span class="op" id="2124005">[</span><span class="ident" id="2124006">k</span><span class="op" id="2124007">]</span><span class="op" id="2124008">.</span><span class="ident" id="2124009">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124016">if</span>&nbsp;<span class="ident" id="2124019">prefixIsLessThan</span><span class="op" id="2124035">(</span><span class="ident" id="2124036">a</span><span class="op" id="2124037">.</span><span class="ident" id="2124038">d</span><span class="op" id="2124039">[</span><span class="num" id="2124040">0</span><span class="op" id="2124041">:</span><span class="ident" id="2124042">a</span><span class="op" id="2124043">.</span><span class="ident" id="2124044">nd</span><span class="op" id="2124046">]</span><span class="op" id="2124047">,</span>&nbsp;<span class="ident" id="2124049">leftcheats</span><span class="op" id="2124059">[</span><span class="ident" id="2124060">k</span><span class="op" id="2124061">]</span><span class="op" id="2124062">.</span><span class="ident" id="2124063">cutoff</span><span class="op" id="2124069">)</span>&nbsp;<span class="op" id="2124071">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124075">delta</span><span class="op" id="2124080">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124088">r</span>&nbsp;<span class="op" id="2124090">:=</span>&nbsp;<span class="ident" id="2124093">a</span><span class="op" id="2124094">.</span><span class="ident" id="2124095">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124106">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124121">w</span>&nbsp;<span class="op" id="2124123">:=</span>&nbsp;<span class="ident" id="2124126">a</span><span class="op" id="2124127">.</span><span class="ident" id="2124128">nd</span>&nbsp;<span class="op" id="2124131">+</span>&nbsp;<span class="ident" id="2124133">delta</span>&nbsp;<span class="comment" id="2124139">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124155">n</span>&nbsp;<span class="op" id="2124157">:=</span>&nbsp;<span class="num" id="2124160">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2124164">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124203">for</span>&nbsp;<span class="ident" id="2124207">r</span><span class="op" id="2124208">--</span><span class="op" id="2124210">;</span>&nbsp;<span class="ident" id="2124212">r</span>&nbsp;<span class="op" id="2124214">&gt;=</span>&nbsp;<span class="num" id="2124217">0</span><span class="op" id="2124218">;</span>&nbsp;<span class="ident" id="2124220">r</span><span class="op" id="2124221">--</span>&nbsp;<span class="op" id="2124224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124228">n</span>&nbsp;<span class="op" id="2124230">+=</span>&nbsp;<span class="op" id="2124233">(</span><span class="builtintype" id="2124234">int</span><span class="op" id="2124237">(</span><span class="ident" id="2124238">a</span><span class="op" id="2124239">.</span><span class="ident" id="2124240">d</span><span class="op" id="2124241">[</span><span class="ident" id="2124242">r</span><span class="op" id="2124243">]</span><span class="op" id="2124244">)</span>&nbsp;<span class="op" id="2124246">-</span>&nbsp;<span class="string" id="2124248">&#39;0&#39;</span><span class="op" id="2124251">)</span>&nbsp;<span class="op" id="2124253">&lt;&lt;</span>&nbsp;<span class="ident" id="2124256">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124260">quo</span>&nbsp;<span class="op" id="2124264">:=</span>&nbsp;<span class="ident" id="2124267">n</span>&nbsp;<span class="op" id="2124269">/</span>&nbsp;<span class="num" id="2124271">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124276">rem</span>&nbsp;<span class="op" id="2124280">:=</span>&nbsp;<span class="ident" id="2124283">n</span>&nbsp;<span class="op" id="2124285">-</span>&nbsp;<span class="num" id="2124287">10</span><span class="op" id="2124289">*</span><span class="ident" id="2124290">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124296">w</span><span class="op" id="2124297">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124302">if</span>&nbsp;<span class="ident" id="2124305">w</span>&nbsp;<span class="op" id="2124307">&lt;</span>&nbsp;<span class="builtinfunc" id="2124309">len</span><span class="op" id="2124312">(</span><span class="ident" id="2124313">a</span><span class="op" id="2124314">.</span><span class="ident" id="2124315">d</span><span class="op" id="2124316">)</span>&nbsp;<span class="op" id="2124318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124323">a</span><span class="op" id="2124324">.</span><span class="ident" id="2124325">d</span><span class="op" id="2124326">[</span><span class="ident" id="2124327">w</span><span class="op" id="2124328">]</span>&nbsp;<span class="op" id="2124330">=</span>&nbsp;<span class="builtintype" id="2124332">byte</span><span class="op" id="2124336">(</span><span class="ident" id="2124337">rem</span>&nbsp;<span class="op" id="2124341">+</span>&nbsp;<span class="string" id="2124343">&#39;0&#39;</span><span class="op" id="2124346">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124350">}</span>&nbsp;<span class="keyword" id="2124352">else</span>&nbsp;<span class="keyword" id="2124357">if</span>&nbsp;<span class="ident" id="2124360">rem</span>&nbsp;<span class="op" id="2124364">!=</span>&nbsp;<span class="num" id="2124367">0</span>&nbsp;<span class="op" id="2124369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124374">a</span><span class="op" id="2124375">.</span><span class="ident" id="2124376">trunc</span>&nbsp;<span class="op" id="2124382">=</span>&nbsp;<span class="ident" id="2124384">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124395">n</span>&nbsp;<span class="op" id="2124397">=</span>&nbsp;<span class="ident" id="2124399">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124404">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2124408">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124435">for</span>&nbsp;<span class="ident" id="2124439">n</span>&nbsp;<span class="op" id="2124441">&gt;</span>&nbsp;<span class="num" id="2124443">0</span>&nbsp;<span class="op" id="2124445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124449">quo</span>&nbsp;<span class="op" id="2124453">:=</span>&nbsp;<span class="ident" id="2124456">n</span>&nbsp;<span class="op" id="2124458">/</span>&nbsp;<span class="num" id="2124460">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124465">rem</span>&nbsp;<span class="op" id="2124469">:=</span>&nbsp;<span class="ident" id="2124472">n</span>&nbsp;<span class="op" id="2124474">-</span>&nbsp;<span class="num" id="2124476">10</span><span class="op" id="2124478">*</span><span class="ident" id="2124479">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124485">w</span><span class="op" id="2124486">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124491">if</span>&nbsp;<span class="ident" id="2124494">w</span>&nbsp;<span class="op" id="2124496">&lt;</span>&nbsp;<span class="builtinfunc" id="2124498">len</span><span class="op" id="2124501">(</span><span class="ident" id="2124502">a</span><span class="op" id="2124503">.</span><span class="ident" id="2124504">d</span><span class="op" id="2124505">)</span>&nbsp;<span class="op" id="2124507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124512">a</span><span class="op" id="2124513">.</span><span class="ident" id="2124514">d</span><span class="op" id="2124515">[</span><span class="ident" id="2124516">w</span><span class="op" id="2124517">]</span>&nbsp;<span class="op" id="2124519">=</span>&nbsp;<span class="builtintype" id="2124521">byte</span><span class="op" id="2124525">(</span><span class="ident" id="2124526">rem</span>&nbsp;<span class="op" id="2124530">+</span>&nbsp;<span class="string" id="2124532">&#39;0&#39;</span><span class="op" id="2124535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124539">}</span>&nbsp;<span class="keyword" id="2124541">else</span>&nbsp;<span class="keyword" id="2124546">if</span>&nbsp;<span class="ident" id="2124549">rem</span>&nbsp;<span class="op" id="2124553">!=</span>&nbsp;<span class="num" id="2124556">0</span>&nbsp;<span class="op" id="2124558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124563">a</span><span class="op" id="2124564">.</span><span class="ident" id="2124565">trunc</span>&nbsp;<span class="op" id="2124571">=</span>&nbsp;<span class="ident" id="2124573">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124584">n</span>&nbsp;<span class="op" id="2124586">=</span>&nbsp;<span class="ident" id="2124588">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124597">a</span><span class="op" id="2124598">.</span><span class="ident" id="2124599">nd</span>&nbsp;<span class="op" id="2124602">+=</span>&nbsp;<span class="ident" id="2124605">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124612">if</span>&nbsp;<span class="ident" id="2124615">a</span><span class="op" id="2124616">.</span><span class="ident" id="2124617">nd</span>&nbsp;<span class="op" id="2124620">&gt;=</span>&nbsp;<span class="builtinfunc" id="2124623">len</span><span class="op" id="2124626">(</span><span class="ident" id="2124627">a</span><span class="op" id="2124628">.</span><span class="ident" id="2124629">d</span><span class="op" id="2124630">)</span>&nbsp;<span class="op" id="2124632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124636">a</span><span class="op" id="2124637">.</span><span class="ident" id="2124638">nd</span>&nbsp;<span class="op" id="2124641">=</span>&nbsp;<span class="builtinfunc" id="2124643">len</span><span class="op" id="2124646">(</span><span class="ident" id="2124647">a</span><span class="op" id="2124648">.</span><span class="ident" id="2124649">d</span><span class="op" id="2124650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124656">a</span><span class="op" id="2124657">.</span><span class="ident" id="2124658">dp</span>&nbsp;<span class="op" id="2124661">+=</span>&nbsp;<span class="ident" id="2124664">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124671">trim</span><span class="op" id="2124675">(</span><span class="ident" id="2124676">a</span><span class="op" id="2124677">)</span><br>
<span class="lineno">275</span><span class="op" id="2124679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2124682">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="2124729">func</span>&nbsp;<span class="op" id="2124734">(</span><span class="ident" id="2124735">a</span>&nbsp;<span class="op" id="2124737">*</span><span class="ident" id="2124738">decimal</span><span class="op" id="2124745">)</span>&nbsp;<span class="ident" id="2124747">Shift</span><span class="op" id="2124752">(</span><span class="ident" id="2124753">k</span>&nbsp;<span class="builtintype" id="2124755">int</span><span class="op" id="2124758">)</span>&nbsp;<span class="op" id="2124760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124763">switch</span>&nbsp;<span class="op" id="2124770">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124773">case</span>&nbsp;<span class="ident" id="2124778">a</span><span class="op" id="2124779">.</span><span class="ident" id="2124780">nd</span>&nbsp;<span class="op" id="2124783">==</span>&nbsp;<span class="num" id="2124786">0</span><span class="op" id="2124787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2124791">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124817">case</span>&nbsp;<span class="ident" id="2124822">k</span>&nbsp;<span class="op" id="2124824">&gt;</span>&nbsp;<span class="num" id="2124826">0</span><span class="op" id="2124827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124831">for</span>&nbsp;<span class="ident" id="2124835">k</span>&nbsp;<span class="op" id="2124837">&gt;</span>&nbsp;<span class="ident" id="2124839">maxShift</span>&nbsp;<span class="op" id="2124848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124853">leftShift</span><span class="op" id="2124862">(</span><span class="ident" id="2124863">a</span><span class="op" id="2124864">,</span>&nbsp;<span class="ident" id="2124866">maxShift</span><span class="op" id="2124874">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124879">k</span>&nbsp;<span class="op" id="2124881">-=</span>&nbsp;<span class="ident" id="2124884">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2124895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124899">leftShift</span><span class="op" id="2124908">(</span><span class="ident" id="2124909">a</span><span class="op" id="2124910">,</span>&nbsp;<span class="builtintype" id="2124912">uint</span><span class="op" id="2124916">(</span><span class="ident" id="2124917">k</span><span class="op" id="2124918">)</span><span class="op" id="2124919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124922">case</span>&nbsp;<span class="ident" id="2124927">k</span>&nbsp;<span class="op" id="2124929">&lt;</span>&nbsp;<span class="num" id="2124931">0</span><span class="op" id="2124932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2124936">for</span>&nbsp;<span class="ident" id="2124940">k</span>&nbsp;<span class="op" id="2124942">&lt;</span>&nbsp;<span class="op" id="2124944">-</span><span class="ident" id="2124945">maxShift</span>&nbsp;<span class="op" id="2124954">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124959">rightShift</span><span class="op" id="2124969">(</span><span class="ident" id="2124970">a</span><span class="op" id="2124971">,</span>&nbsp;<span class="ident" id="2124973">maxShift</span><span class="op" id="2124981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2124986">k</span>&nbsp;<span class="op" id="2124988">+=</span>&nbsp;<span class="ident" id="2124991">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2125006">rightShift</span><span class="op" id="2125016">(</span><span class="ident" id="2125017">a</span><span class="op" id="2125018">,</span>&nbsp;<span class="builtintype" id="2125020">uint</span><span class="op" id="2125024">(</span><span class="op" id="2125025">-</span><span class="ident" id="2125026">k</span><span class="op" id="2125027">)</span><span class="op" id="2125028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125031">}</span><br>
<span class="lineno">295</span><span class="op" id="2125033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2125036">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="2125086">func</span>&nbsp;<span class="ident" id="2125091">shouldRoundUp</span><span class="op" id="2125104">(</span><span class="ident" id="2125105">a</span>&nbsp;<span class="op" id="2125107">*</span><span class="ident" id="2125108">decimal</span><span class="op" id="2125115">,</span>&nbsp;<span class="ident" id="2125117">nd</span>&nbsp;<span class="builtintype" id="2125120">int</span><span class="op" id="2125123">)</span>&nbsp;<span class="builtintype" id="2125125">bool</span>&nbsp;<span class="op" id="2125130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125133">if</span>&nbsp;<span class="ident" id="2125136">nd</span>&nbsp;<span class="op" id="2125139">&lt;</span>&nbsp;<span class="num" id="2125141">0</span>&nbsp;<span class="op" id="2125143">||</span>&nbsp;<span class="ident" id="2125146">nd</span>&nbsp;<span class="op" id="2125149">&gt;=</span>&nbsp;<span class="ident" id="2125152">a</span><span class="op" id="2125153">.</span><span class="ident" id="2125154">nd</span>&nbsp;<span class="op" id="2125157">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125161">return</span>&nbsp;<span class="ident" id="2125168">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125178">if</span>&nbsp;<span class="ident" id="2125181">a</span><span class="op" id="2125182">.</span><span class="ident" id="2125183">d</span><span class="op" id="2125184">[</span><span class="ident" id="2125185">nd</span><span class="op" id="2125187">]</span>&nbsp;<span class="op" id="2125189">==</span>&nbsp;<span class="string" id="2125192">&#39;5&#39;</span>&nbsp;<span class="op" id="2125196">&amp;&amp;</span>&nbsp;<span class="ident" id="2125199">nd</span><span class="op" id="2125201">+</span><span class="num" id="2125202">1</span>&nbsp;<span class="op" id="2125204">==</span>&nbsp;<span class="ident" id="2125207">a</span><span class="op" id="2125208">.</span><span class="ident" id="2125209">nd</span>&nbsp;<span class="op" id="2125212">{</span>&nbsp;<span class="comment" id="2125214">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2125251">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125328">if</span>&nbsp;<span class="ident" id="2125331">a</span><span class="op" id="2125332">.</span><span class="ident" id="2125333">trunc</span>&nbsp;<span class="op" id="2125339">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125344">return</span>&nbsp;<span class="ident" id="2125351">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125362">return</span>&nbsp;<span class="ident" id="2125369">nd</span>&nbsp;<span class="op" id="2125372">&gt;</span>&nbsp;<span class="num" id="2125374">0</span>&nbsp;<span class="op" id="2125376">&amp;&amp;</span>&nbsp;<span class="op" id="2125379">(</span><span class="ident" id="2125380">a</span><span class="op" id="2125381">.</span><span class="ident" id="2125382">d</span><span class="op" id="2125383">[</span><span class="ident" id="2125384">nd</span><span class="op" id="2125386">-</span><span class="num" id="2125387">1</span><span class="op" id="2125388">]</span><span class="op" id="2125389">-</span><span class="string" id="2125390">&#39;0&#39;</span><span class="op" id="2125393">)</span><span class="op" id="2125394">%</span><span class="num" id="2125395">2</span>&nbsp;<span class="op" id="2125397">!=</span>&nbsp;<span class="num" id="2125400">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2125406">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125440">return</span>&nbsp;<span class="ident" id="2125447">a</span><span class="op" id="2125448">.</span><span class="ident" id="2125449">d</span><span class="op" id="2125450">[</span><span class="ident" id="2125451">nd</span><span class="op" id="2125453">]</span>&nbsp;<span class="op" id="2125455">&gt;=</span>&nbsp;<span class="string" id="2125458">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="2125462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2125465">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="2125501">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="2125543">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2125584">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="2125600">func</span>&nbsp;<span class="op" id="2125605">(</span><span class="ident" id="2125606">a</span>&nbsp;<span class="op" id="2125608">*</span><span class="ident" id="2125609">decimal</span><span class="op" id="2125616">)</span>&nbsp;<span class="ident" id="2125618">Round</span><span class="op" id="2125623">(</span><span class="ident" id="2125624">nd</span>&nbsp;<span class="builtintype" id="2125627">int</span><span class="op" id="2125630">)</span>&nbsp;<span class="op" id="2125632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125635">if</span>&nbsp;<span class="ident" id="2125638">nd</span>&nbsp;<span class="op" id="2125641">&lt;</span>&nbsp;<span class="num" id="2125643">0</span>&nbsp;<span class="op" id="2125645">||</span>&nbsp;<span class="ident" id="2125648">nd</span>&nbsp;<span class="op" id="2125651">&gt;=</span>&nbsp;<span class="ident" id="2125654">a</span><span class="op" id="2125655">.</span><span class="ident" id="2125656">nd</span>&nbsp;<span class="op" id="2125659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125663">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125674">if</span>&nbsp;<span class="ident" id="2125677">shouldRoundUp</span><span class="op" id="2125690">(</span><span class="ident" id="2125691">a</span><span class="op" id="2125692">,</span>&nbsp;<span class="ident" id="2125694">nd</span><span class="op" id="2125696">)</span>&nbsp;<span class="op" id="2125698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2125702">a</span><span class="op" id="2125703">.</span><span class="ident" id="2125704">RoundUp</span><span class="op" id="2125711">(</span><span class="ident" id="2125712">nd</span><span class="op" id="2125714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125717">}</span>&nbsp;<span class="keyword" id="2125719">else</span>&nbsp;<span class="op" id="2125724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2125728">a</span><span class="op" id="2125729">.</span><span class="ident" id="2125730">RoundDown</span><span class="op" id="2125739">(</span><span class="ident" id="2125740">nd</span><span class="op" id="2125742">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125745">}</span><br>
<span class="lineno"></span><span class="op" id="2125747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2125750">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2125791">func</span>&nbsp;<span class="op" id="2125796">(</span><span class="ident" id="2125797">a</span>&nbsp;<span class="op" id="2125799">*</span><span class="ident" id="2125800">decimal</span><span class="op" id="2125807">)</span>&nbsp;<span class="ident" id="2125809">RoundDown</span><span class="op" id="2125818">(</span><span class="ident" id="2125819">nd</span>&nbsp;<span class="builtintype" id="2125822">int</span><span class="op" id="2125825">)</span>&nbsp;<span class="op" id="2125827">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125830">if</span>&nbsp;<span class="ident" id="2125833">nd</span>&nbsp;<span class="op" id="2125836">&lt;</span>&nbsp;<span class="num" id="2125838">0</span>&nbsp;<span class="op" id="2125840">||</span>&nbsp;<span class="ident" id="2125843">nd</span>&nbsp;<span class="op" id="2125846">&gt;=</span>&nbsp;<span class="ident" id="2125849">a</span><span class="op" id="2125850">.</span><span class="ident" id="2125851">nd</span>&nbsp;<span class="op" id="2125854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125858">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2125866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2125869">a</span><span class="op" id="2125870">.</span><span class="ident" id="2125871">nd</span>&nbsp;<span class="op" id="2125874">=</span>&nbsp;<span class="ident" id="2125876">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2125880">trim</span><span class="op" id="2125884">(</span><span class="ident" id="2125885">a</span><span class="op" id="2125886">)</span><br>
<span class="lineno">335</span><span class="op" id="2125888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2125891">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2125930">func</span>&nbsp;<span class="op" id="2125935">(</span><span class="ident" id="2125936">a</span>&nbsp;<span class="op" id="2125938">*</span><span class="ident" id="2125939">decimal</span><span class="op" id="2125946">)</span>&nbsp;<span class="ident" id="2125948">RoundUp</span><span class="op" id="2125955">(</span><span class="ident" id="2125956">nd</span>&nbsp;<span class="builtintype" id="2125959">int</span><span class="op" id="2125962">)</span>&nbsp;<span class="op" id="2125964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125967">if</span>&nbsp;<span class="ident" id="2125970">nd</span>&nbsp;<span class="op" id="2125973">&lt;</span>&nbsp;<span class="num" id="2125975">0</span>&nbsp;<span class="op" id="2125977">||</span>&nbsp;<span class="ident" id="2125980">nd</span>&nbsp;<span class="op" id="2125983">&gt;=</span>&nbsp;<span class="ident" id="2125986">a</span><span class="op" id="2125987">.</span><span class="ident" id="2125988">nd</span>&nbsp;<span class="op" id="2125991">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2125995">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2126007">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126020">for</span>&nbsp;<span class="ident" id="2126024">i</span>&nbsp;<span class="op" id="2126026">:=</span>&nbsp;<span class="ident" id="2126029">nd</span>&nbsp;<span class="op" id="2126032">-</span>&nbsp;<span class="num" id="2126034">1</span><span class="op" id="2126035">;</span>&nbsp;<span class="ident" id="2126037">i</span>&nbsp;<span class="op" id="2126039">&gt;=</span>&nbsp;<span class="num" id="2126042">0</span><span class="op" id="2126043">;</span>&nbsp;<span class="ident" id="2126045">i</span><span class="op" id="2126046">--</span>&nbsp;<span class="op" id="2126049">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126053">c</span>&nbsp;<span class="op" id="2126055">:=</span>&nbsp;<span class="ident" id="2126058">a</span><span class="op" id="2126059">.</span><span class="ident" id="2126060">d</span><span class="op" id="2126061">[</span><span class="ident" id="2126062">i</span><span class="op" id="2126063">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126067">if</span>&nbsp;<span class="ident" id="2126070">c</span>&nbsp;<span class="op" id="2126072">&lt;</span>&nbsp;<span class="string" id="2126074">&#39;9&#39;</span>&nbsp;<span class="op" id="2126078">{</span>&nbsp;<span class="comment" id="2126080">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126112">a</span><span class="op" id="2126113">.</span><span class="ident" id="2126114">d</span><span class="op" id="2126115">[</span><span class="ident" id="2126116">i</span><span class="op" id="2126117">]</span><span class="op" id="2126118">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126124">a</span><span class="op" id="2126125">.</span><span class="ident" id="2126126">nd</span>&nbsp;<span class="op" id="2126129">=</span>&nbsp;<span class="ident" id="2126131">i</span>&nbsp;<span class="op" id="2126133">+</span>&nbsp;<span class="num" id="2126135">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126140">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2126156">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2126178">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126230">a</span><span class="op" id="2126231">.</span><span class="ident" id="2126232">d</span><span class="op" id="2126233">[</span><span class="num" id="2126234">0</span><span class="op" id="2126235">]</span>&nbsp;<span class="op" id="2126237">=</span>&nbsp;<span class="string" id="2126239">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126244">a</span><span class="op" id="2126245">.</span><span class="ident" id="2126246">nd</span>&nbsp;<span class="op" id="2126249">=</span>&nbsp;<span class="num" id="2126251">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126254">a</span><span class="op" id="2126255">.</span><span class="ident" id="2126256">dp</span><span class="op" id="2126258">++</span><br>
<span class="lineno"></span><span class="op" id="2126261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="2126264">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="2126312">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2126345">func</span>&nbsp;<span class="op" id="2126350">(</span><span class="ident" id="2126351">a</span>&nbsp;<span class="op" id="2126353">*</span><span class="ident" id="2126354">decimal</span><span class="op" id="2126361">)</span>&nbsp;<span class="ident" id="2126363">RoundedInteger</span><span class="op" id="2126377">(</span><span class="op" id="2126378">)</span>&nbsp;<span class="ident" id="2126380">uint64</span>&nbsp;<span class="op" id="2126387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126390">if</span>&nbsp;<span class="ident" id="2126393">a</span><span class="op" id="2126394">.</span><span class="ident" id="2126395">dp</span>&nbsp;<span class="op" id="2126398">&gt;</span>&nbsp;<span class="num" id="2126400">20</span>&nbsp;<span class="op" id="2126403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126407">return</span>&nbsp;<span class="num" id="2126414">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126437">var</span>&nbsp;<span class="ident" id="2126441">i</span>&nbsp;<span class="builtintype" id="2126443">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126448">n</span>&nbsp;<span class="op" id="2126450">:=</span>&nbsp;<span class="ident" id="2126453">uint64</span><span class="op" id="2126459">(</span><span class="num" id="2126460">0</span><span class="op" id="2126461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126464">for</span>&nbsp;<span class="ident" id="2126468">i</span>&nbsp;<span class="op" id="2126470">=</span>&nbsp;<span class="num" id="2126472">0</span><span class="op" id="2126473">;</span>&nbsp;<span class="ident" id="2126475">i</span>&nbsp;<span class="op" id="2126477">&lt;</span>&nbsp;<span class="ident" id="2126479">a</span><span class="op" id="2126480">.</span><span class="ident" id="2126481">dp</span>&nbsp;<span class="op" id="2126484">&amp;&amp;</span>&nbsp;<span class="ident" id="2126487">i</span>&nbsp;<span class="op" id="2126489">&lt;</span>&nbsp;<span class="ident" id="2126491">a</span><span class="op" id="2126492">.</span><span class="ident" id="2126493">nd</span><span class="op" id="2126495">;</span>&nbsp;<span class="ident" id="2126497">i</span><span class="op" id="2126498">++</span>&nbsp;<span class="op" id="2126501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126505">n</span>&nbsp;<span class="op" id="2126507">=</span>&nbsp;<span class="ident" id="2126509">n</span><span class="op" id="2126510">*</span><span class="num" id="2126511">10</span>&nbsp;<span class="op" id="2126514">+</span>&nbsp;<span class="ident" id="2126516">uint64</span><span class="op" id="2126522">(</span><span class="ident" id="2126523">a</span><span class="op" id="2126524">.</span><span class="ident" id="2126525">d</span><span class="op" id="2126526">[</span><span class="ident" id="2126527">i</span><span class="op" id="2126528">]</span><span class="op" id="2126529">-</span><span class="string" id="2126530">&#39;0&#39;</span><span class="op" id="2126533">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126539">for</span>&nbsp;<span class="op" id="2126543">;</span>&nbsp;<span class="ident" id="2126545">i</span>&nbsp;<span class="op" id="2126547">&lt;</span>&nbsp;<span class="ident" id="2126549">a</span><span class="op" id="2126550">.</span><span class="ident" id="2126551">dp</span><span class="op" id="2126553">;</span>&nbsp;<span class="ident" id="2126555">i</span><span class="op" id="2126556">++</span>&nbsp;<span class="op" id="2126559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126563">n</span>&nbsp;<span class="op" id="2126565">*=</span>&nbsp;<span class="num" id="2126568">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126575">if</span>&nbsp;<span class="ident" id="2126578">shouldRoundUp</span><span class="op" id="2126591">(</span><span class="ident" id="2126592">a</span><span class="op" id="2126593">,</span>&nbsp;<span class="ident" id="2126595">a</span><span class="op" id="2126596">.</span><span class="ident" id="2126597">dp</span><span class="op" id="2126599">)</span>&nbsp;<span class="op" id="2126601">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2126605">n</span><span class="op" id="2126606">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2126610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2126613">return</span>&nbsp;<span class="ident" id="2126620">n</span><br>
<span class="lineno"></span><span class="op" id="2126622">}</span>
</div>
</body>
</html>
