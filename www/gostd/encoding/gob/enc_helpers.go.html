<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4802544">//&nbsp;Created&nbsp;by&nbsp;encgen&nbsp;--output&nbsp;enc_helpers.go;&nbsp;DO&nbsp;NOT&nbsp;EDIT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4802603">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4802658">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno">5</span><span class="comment" id="4802712">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4802763">package</span>&nbsp;<span class="ident" id="4802771">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4802776">import</span>&nbsp;<span class="op" id="4802783">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4802786">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="4802796">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4802799">var</span>&nbsp;<span class="ident" id="4802803">encArrayHelper</span>&nbsp;<span class="op" id="4802818">=</span>&nbsp;<span class="keyword" id="4802820">map</span><span class="op" id="4802823">[</span><span class="ident" id="4802824">reflect</span><span class="op" id="4802831">.</span><span class="ident" id="4802832">Kind</span><span class="op" id="4802836">]</span><span class="ident" id="4802837">encHelper</span><span class="op" id="4802846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4802849">reflect</span><span class="op" id="4802856">.</span><span class="ident" id="4802857">Bool</span><span class="op" id="4802861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4802869">encBoolArray</span><span class="op" id="4802881">,</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4802884">reflect</span><span class="op" id="4802891">.</span><span class="ident" id="4802892">Complex64</span><span class="op" id="4802901">:</span>&nbsp;&nbsp;<span class="ident" id="4802904">encComplex64Array</span><span class="op" id="4802921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4802924">reflect</span><span class="op" id="4802931">.</span><span class="ident" id="4802932">Complex128</span><span class="op" id="4802942">:</span>&nbsp;<span class="ident" id="4802944">encComplex128Array</span><span class="op" id="4802962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4802965">reflect</span><span class="op" id="4802972">.</span><span class="ident" id="4802973">Float32</span><span class="op" id="4802980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4802985">encFloat32Array</span><span class="op" id="4803000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803003">reflect</span><span class="op" id="4803010">.</span><span class="ident" id="4803011">Float64</span><span class="op" id="4803018">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803023">encFloat64Array</span><span class="op" id="4803038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803041">reflect</span><span class="op" id="4803048">.</span><span class="ident" id="4803049">Int</span><span class="op" id="4803052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803061">encIntArray</span><span class="op" id="4803072">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803075">reflect</span><span class="op" id="4803082">.</span><span class="ident" id="4803083">Int16</span><span class="op" id="4803088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803095">encInt16Array</span><span class="op" id="4803108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803111">reflect</span><span class="op" id="4803118">.</span><span class="ident" id="4803119">Int32</span><span class="op" id="4803124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803131">encInt32Array</span><span class="op" id="4803144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803147">reflect</span><span class="op" id="4803154">.</span><span class="ident" id="4803155">Int64</span><span class="op" id="4803160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803167">encInt64Array</span><span class="op" id="4803180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803183">reflect</span><span class="op" id="4803190">.</span><span class="ident" id="4803191">Int8</span><span class="op" id="4803195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803203">encInt8Array</span><span class="op" id="4803215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803218">reflect</span><span class="op" id="4803225">.</span><span class="ident" id="4803226">String</span><span class="op" id="4803232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803238">encStringArray</span><span class="op" id="4803252">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803255">reflect</span><span class="op" id="4803262">.</span><span class="ident" id="4803263">Uint</span><span class="op" id="4803267">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803275">encUintArray</span><span class="op" id="4803287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803290">reflect</span><span class="op" id="4803297">.</span><span class="ident" id="4803298">Uint16</span><span class="op" id="4803304">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803310">encUint16Array</span><span class="op" id="4803324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803327">reflect</span><span class="op" id="4803334">.</span><span class="ident" id="4803335">Uint32</span><span class="op" id="4803341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803347">encUint32Array</span><span class="op" id="4803361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803364">reflect</span><span class="op" id="4803371">.</span><span class="ident" id="4803372">Uint64</span><span class="op" id="4803378">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803384">encUint64Array</span><span class="op" id="4803398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803401">reflect</span><span class="op" id="4803408">.</span><span class="ident" id="4803409">Uintptr</span><span class="op" id="4803416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803421">encUintptrArray</span><span class="op" id="4803436">,</span><br>
<span class="lineno">30</span><span class="op" id="4803438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4803441">var</span>&nbsp;<span class="ident" id="4803445">encSliceHelper</span>&nbsp;<span class="op" id="4803460">=</span>&nbsp;<span class="keyword" id="4803462">map</span><span class="op" id="4803465">[</span><span class="ident" id="4803466">reflect</span><span class="op" id="4803473">.</span><span class="ident" id="4803474">Kind</span><span class="op" id="4803478">]</span><span class="ident" id="4803479">encHelper</span><span class="op" id="4803488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803491">reflect</span><span class="op" id="4803498">.</span><span class="ident" id="4803499">Bool</span><span class="op" id="4803503">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803511">encBoolSlice</span><span class="op" id="4803523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803526">reflect</span><span class="op" id="4803533">.</span><span class="ident" id="4803534">Complex64</span><span class="op" id="4803543">:</span>&nbsp;&nbsp;<span class="ident" id="4803546">encComplex64Slice</span><span class="op" id="4803563">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803566">reflect</span><span class="op" id="4803573">.</span><span class="ident" id="4803574">Complex128</span><span class="op" id="4803584">:</span>&nbsp;<span class="ident" id="4803586">encComplex128Slice</span><span class="op" id="4803604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803607">reflect</span><span class="op" id="4803614">.</span><span class="ident" id="4803615">Float32</span><span class="op" id="4803622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803627">encFloat32Slice</span><span class="op" id="4803642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803645">reflect</span><span class="op" id="4803652">.</span><span class="ident" id="4803653">Float64</span><span class="op" id="4803660">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803665">encFloat64Slice</span><span class="op" id="4803680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803683">reflect</span><span class="op" id="4803690">.</span><span class="ident" id="4803691">Int</span><span class="op" id="4803694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803703">encIntSlice</span><span class="op" id="4803714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803717">reflect</span><span class="op" id="4803724">.</span><span class="ident" id="4803725">Int16</span><span class="op" id="4803730">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803737">encInt16Slice</span><span class="op" id="4803750">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803753">reflect</span><span class="op" id="4803760">.</span><span class="ident" id="4803761">Int32</span><span class="op" id="4803766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803773">encInt32Slice</span><span class="op" id="4803786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803789">reflect</span><span class="op" id="4803796">.</span><span class="ident" id="4803797">Int64</span><span class="op" id="4803802">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803809">encInt64Slice</span><span class="op" id="4803822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803825">reflect</span><span class="op" id="4803832">.</span><span class="ident" id="4803833">Int8</span><span class="op" id="4803837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803845">encInt8Slice</span><span class="op" id="4803857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803860">reflect</span><span class="op" id="4803867">.</span><span class="ident" id="4803868">String</span><span class="op" id="4803874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803880">encStringSlice</span><span class="op" id="4803894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803897">reflect</span><span class="op" id="4803904">.</span><span class="ident" id="4803905">Uint</span><span class="op" id="4803909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803917">encUintSlice</span><span class="op" id="4803929">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803932">reflect</span><span class="op" id="4803939">.</span><span class="ident" id="4803940">Uint16</span><span class="op" id="4803946">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803952">encUint16Slice</span><span class="op" id="4803966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4803969">reflect</span><span class="op" id="4803976">.</span><span class="ident" id="4803977">Uint32</span><span class="op" id="4803983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4803989">encUint32Slice</span><span class="op" id="4804003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4804006">reflect</span><span class="op" id="4804013">.</span><span class="ident" id="4804014">Uint64</span><span class="op" id="4804020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4804026">encUint64Slice</span><span class="op" id="4804040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4804043">reflect</span><span class="op" id="4804050">.</span><span class="ident" id="4804051">Uintptr</span><span class="op" id="4804058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4804063">encUintptrSlice</span><span class="op" id="4804078">,</span><br>
<span class="lineno"></span><span class="op" id="4804080">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4804083">func</span>&nbsp;<span class="ident" id="4804088">encBoolArray</span><span class="op" id="4804100">(</span><span class="ident" id="4804101">state</span>&nbsp;<span class="op" id="4804107">*</span><span class="ident" id="4804108">encoderState</span><span class="op" id="4804120">,</span>&nbsp;<span class="ident" id="4804122">v</span>&nbsp;<span class="ident" id="4804124">reflect</span><span class="op" id="4804131">.</span><span class="ident" id="4804132">Value</span><span class="op" id="4804137">)</span>&nbsp;<span class="builtintype" id="4804139">bool</span>&nbsp;<span class="op" id="4804144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4804147">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804188">if</span>&nbsp;<span class="op" id="4804191">!</span><span class="ident" id="4804192">v</span><span class="op" id="4804193">.</span><span class="ident" id="4804194">CanAddr</span><span class="op" id="4804201">(</span><span class="op" id="4804202">)</span>&nbsp;<span class="op" id="4804204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804208">return</span>&nbsp;<span class="builtintype" id="4804215">false</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804225">return</span>&nbsp;<span class="ident" id="4804232">encBoolSlice</span><span class="op" id="4804244">(</span><span class="ident" id="4804245">state</span><span class="op" id="4804250">,</span>&nbsp;<span class="ident" id="4804252">v</span><span class="op" id="4804253">.</span><span class="ident" id="4804254">Slice</span><span class="op" id="4804259">(</span><span class="num" id="4804260">0</span><span class="op" id="4804261">,</span>&nbsp;<span class="ident" id="4804263">v</span><span class="op" id="4804264">.</span><span class="ident" id="4804265">Len</span><span class="op" id="4804268">(</span><span class="op" id="4804269">)</span><span class="op" id="4804270">)</span><span class="op" id="4804271">)</span><br>
<span class="lineno"></span><span class="op" id="4804273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4804276">func</span>&nbsp;<span class="ident" id="4804281">encBoolSlice</span><span class="op" id="4804293">(</span><span class="ident" id="4804294">state</span>&nbsp;<span class="op" id="4804300">*</span><span class="ident" id="4804301">encoderState</span><span class="op" id="4804313">,</span>&nbsp;<span class="ident" id="4804315">v</span>&nbsp;<span class="ident" id="4804317">reflect</span><span class="op" id="4804324">.</span><span class="ident" id="4804325">Value</span><span class="op" id="4804330">)</span>&nbsp;<span class="builtintype" id="4804332">bool</span>&nbsp;<span class="op" id="4804337">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4804340">slice</span><span class="op" id="4804345">,</span>&nbsp;<span class="ident" id="4804347">ok</span>&nbsp;<span class="op" id="4804350">:=</span>&nbsp;<span class="ident" id="4804353">v</span><span class="op" id="4804354">.</span><span class="ident" id="4804355">Interface</span><span class="op" id="4804364">(</span><span class="op" id="4804365">)</span><span class="op" id="4804366">.</span><span class="op" id="4804367">(</span><span class="op" id="4804368">[</span><span class="op" id="4804369">]</span><span class="builtintype" id="4804370">bool</span><span class="op" id="4804374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804377">if</span>&nbsp;<span class="op" id="4804380">!</span><span class="ident" id="4804381">ok</span>&nbsp;<span class="op" id="4804384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4804388">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;bool&nbsp;but&nbsp;not&nbsp;type&nbsp;bool.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804463">return</span>&nbsp;<span class="builtintype" id="4804470">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804477">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804480">for</span>&nbsp;<span class="ident" id="4804484">_</span><span class="op" id="4804485">,</span>&nbsp;<span class="ident" id="4804487">x</span>&nbsp;<span class="op" id="4804489">:=</span>&nbsp;<span class="keyword" id="4804492">range</span>&nbsp;<span class="ident" id="4804498">slice</span>&nbsp;<span class="op" id="4804504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804508">if</span>&nbsp;<span class="ident" id="4804511">x</span>&nbsp;<span class="op" id="4804513">!=</span>&nbsp;<span class="builtintype" id="4804516">false</span>&nbsp;<span class="op" id="4804522">||</span>&nbsp;<span class="ident" id="4804525">state</span><span class="op" id="4804530">.</span><span class="ident" id="4804531">sendZero</span>&nbsp;<span class="op" id="4804540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804545">if</span>&nbsp;<span class="ident" id="4804548">x</span>&nbsp;<span class="op" id="4804550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4804556">state</span><span class="op" id="4804561">.</span><span class="ident" id="4804562">encodeUint</span><span class="op" id="4804572">(</span><span class="num" id="4804573">1</span><span class="op" id="4804574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804579">}</span>&nbsp;<span class="keyword" id="4804581">else</span>&nbsp;<span class="op" id="4804586">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4804592">state</span><span class="op" id="4804597">.</span><span class="ident" id="4804598">encodeUint</span><span class="op" id="4804608">(</span><span class="num" id="4804609">0</span><span class="op" id="4804610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804625">return</span>&nbsp;<span class="builtintype" id="4804632">true</span><br>
<span class="lineno">75</span><span class="op" id="4804637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4804640">func</span>&nbsp;<span class="ident" id="4804645">encComplex64Array</span><span class="op" id="4804662">(</span><span class="ident" id="4804663">state</span>&nbsp;<span class="op" id="4804669">*</span><span class="ident" id="4804670">encoderState</span><span class="op" id="4804682">,</span>&nbsp;<span class="ident" id="4804684">v</span>&nbsp;<span class="ident" id="4804686">reflect</span><span class="op" id="4804693">.</span><span class="ident" id="4804694">Value</span><span class="op" id="4804699">)</span>&nbsp;<span class="builtintype" id="4804701">bool</span>&nbsp;<span class="op" id="4804706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4804709">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804750">if</span>&nbsp;<span class="op" id="4804753">!</span><span class="ident" id="4804754">v</span><span class="op" id="4804755">.</span><span class="ident" id="4804756">CanAddr</span><span class="op" id="4804763">(</span><span class="op" id="4804764">)</span>&nbsp;<span class="op" id="4804766">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804770">return</span>&nbsp;<span class="builtintype" id="4804777">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4804784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804787">return</span>&nbsp;<span class="ident" id="4804794">encComplex64Slice</span><span class="op" id="4804811">(</span><span class="ident" id="4804812">state</span><span class="op" id="4804817">,</span>&nbsp;<span class="ident" id="4804819">v</span><span class="op" id="4804820">.</span><span class="ident" id="4804821">Slice</span><span class="op" id="4804826">(</span><span class="num" id="4804827">0</span><span class="op" id="4804828">,</span>&nbsp;<span class="ident" id="4804830">v</span><span class="op" id="4804831">.</span><span class="ident" id="4804832">Len</span><span class="op" id="4804835">(</span><span class="op" id="4804836">)</span><span class="op" id="4804837">)</span><span class="op" id="4804838">)</span><br>
<span class="lineno"></span><span class="op" id="4804840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="4804843">func</span>&nbsp;<span class="ident" id="4804848">encComplex64Slice</span><span class="op" id="4804865">(</span><span class="ident" id="4804866">state</span>&nbsp;<span class="op" id="4804872">*</span><span class="ident" id="4804873">encoderState</span><span class="op" id="4804885">,</span>&nbsp;<span class="ident" id="4804887">v</span>&nbsp;<span class="ident" id="4804889">reflect</span><span class="op" id="4804896">.</span><span class="ident" id="4804897">Value</span><span class="op" id="4804902">)</span>&nbsp;<span class="builtintype" id="4804904">bool</span>&nbsp;<span class="op" id="4804909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4804912">slice</span><span class="op" id="4804917">,</span>&nbsp;<span class="ident" id="4804919">ok</span>&nbsp;<span class="op" id="4804922">:=</span>&nbsp;<span class="ident" id="4804925">v</span><span class="op" id="4804926">.</span><span class="ident" id="4804927">Interface</span><span class="op" id="4804936">(</span><span class="op" id="4804937">)</span><span class="op" id="4804938">.</span><span class="op" id="4804939">(</span><span class="op" id="4804940">[</span><span class="op" id="4804941">]</span><span class="builtintype" id="4804942">complex64</span><span class="op" id="4804951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4804954">if</span>&nbsp;<span class="op" id="4804957">!</span><span class="ident" id="4804958">ok</span>&nbsp;<span class="op" id="4804961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4804965">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex64&nbsp;but&nbsp;not&nbsp;type&nbsp;complex64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805050">return</span>&nbsp;<span class="builtintype" id="4805057">false</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805067">for</span>&nbsp;<span class="ident" id="4805071">_</span><span class="op" id="4805072">,</span>&nbsp;<span class="ident" id="4805074">x</span>&nbsp;<span class="op" id="4805076">:=</span>&nbsp;<span class="keyword" id="4805079">range</span>&nbsp;<span class="ident" id="4805085">slice</span>&nbsp;<span class="op" id="4805091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805095">if</span>&nbsp;<span class="ident" id="4805098">x</span>&nbsp;<span class="op" id="4805100">!=</span>&nbsp;<span class="num" id="4805103">0</span><span class="op" id="4805104">+</span><span class="num" id="4805105">0i</span>&nbsp;<span class="op" id="4805108">||</span>&nbsp;<span class="ident" id="4805111">state</span><span class="op" id="4805116">.</span><span class="ident" id="4805117">sendZero</span>&nbsp;<span class="op" id="4805126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805131">rpart</span>&nbsp;<span class="op" id="4805137">:=</span>&nbsp;<span class="ident" id="4805140">floatBits</span><span class="op" id="4805149">(</span><span class="builtintype" id="4805150">float64</span><span class="op" id="4805157">(</span><span class="builtinfunc" id="4805158">real</span><span class="op" id="4805162">(</span><span class="ident" id="4805163">x</span><span class="op" id="4805164">)</span><span class="op" id="4805165">)</span><span class="op" id="4805166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805171">ipart</span>&nbsp;<span class="op" id="4805177">:=</span>&nbsp;<span class="ident" id="4805180">floatBits</span><span class="op" id="4805189">(</span><span class="builtintype" id="4805190">float64</span><span class="op" id="4805197">(</span><span class="builtinfunc" id="4805198">imag</span><span class="op" id="4805202">(</span><span class="ident" id="4805203">x</span><span class="op" id="4805204">)</span><span class="op" id="4805205">)</span><span class="op" id="4805206">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805211">state</span><span class="op" id="4805216">.</span><span class="ident" id="4805217">encodeUint</span><span class="op" id="4805227">(</span><span class="ident" id="4805228">rpart</span><span class="op" id="4805233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805238">state</span><span class="op" id="4805243">.</span><span class="ident" id="4805244">encodeUint</span><span class="op" id="4805254">(</span><span class="ident" id="4805255">ipart</span><span class="op" id="4805260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805270">return</span>&nbsp;<span class="builtintype" id="4805277">true</span><br>
<span class="lineno">100</span><span class="op" id="4805282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4805285">func</span>&nbsp;<span class="ident" id="4805290">encComplex128Array</span><span class="op" id="4805308">(</span><span class="ident" id="4805309">state</span>&nbsp;<span class="op" id="4805315">*</span><span class="ident" id="4805316">encoderState</span><span class="op" id="4805328">,</span>&nbsp;<span class="ident" id="4805330">v</span>&nbsp;<span class="ident" id="4805332">reflect</span><span class="op" id="4805339">.</span><span class="ident" id="4805340">Value</span><span class="op" id="4805345">)</span>&nbsp;<span class="builtintype" id="4805347">bool</span>&nbsp;<span class="op" id="4805352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4805355">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805396">if</span>&nbsp;<span class="op" id="4805399">!</span><span class="ident" id="4805400">v</span><span class="op" id="4805401">.</span><span class="ident" id="4805402">CanAddr</span><span class="op" id="4805409">(</span><span class="op" id="4805410">)</span>&nbsp;<span class="op" id="4805412">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805416">return</span>&nbsp;<span class="builtintype" id="4805423">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805433">return</span>&nbsp;<span class="ident" id="4805440">encComplex128Slice</span><span class="op" id="4805458">(</span><span class="ident" id="4805459">state</span><span class="op" id="4805464">,</span>&nbsp;<span class="ident" id="4805466">v</span><span class="op" id="4805467">.</span><span class="ident" id="4805468">Slice</span><span class="op" id="4805473">(</span><span class="num" id="4805474">0</span><span class="op" id="4805475">,</span>&nbsp;<span class="ident" id="4805477">v</span><span class="op" id="4805478">.</span><span class="ident" id="4805479">Len</span><span class="op" id="4805482">(</span><span class="op" id="4805483">)</span><span class="op" id="4805484">)</span><span class="op" id="4805485">)</span><br>
<span class="lineno"></span><span class="op" id="4805487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="4805490">func</span>&nbsp;<span class="ident" id="4805495">encComplex128Slice</span><span class="op" id="4805513">(</span><span class="ident" id="4805514">state</span>&nbsp;<span class="op" id="4805520">*</span><span class="ident" id="4805521">encoderState</span><span class="op" id="4805533">,</span>&nbsp;<span class="ident" id="4805535">v</span>&nbsp;<span class="ident" id="4805537">reflect</span><span class="op" id="4805544">.</span><span class="ident" id="4805545">Value</span><span class="op" id="4805550">)</span>&nbsp;<span class="builtintype" id="4805552">bool</span>&nbsp;<span class="op" id="4805557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805560">slice</span><span class="op" id="4805565">,</span>&nbsp;<span class="ident" id="4805567">ok</span>&nbsp;<span class="op" id="4805570">:=</span>&nbsp;<span class="ident" id="4805573">v</span><span class="op" id="4805574">.</span><span class="ident" id="4805575">Interface</span><span class="op" id="4805584">(</span><span class="op" id="4805585">)</span><span class="op" id="4805586">.</span><span class="op" id="4805587">(</span><span class="op" id="4805588">[</span><span class="op" id="4805589">]</span><span class="builtintype" id="4805590">complex128</span><span class="op" id="4805600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805603">if</span>&nbsp;<span class="op" id="4805606">!</span><span class="ident" id="4805607">ok</span>&nbsp;<span class="op" id="4805610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4805614">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;complex128&nbsp;but&nbsp;not&nbsp;type&nbsp;complex128.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805701">return</span>&nbsp;<span class="builtintype" id="4805708">false</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805718">for</span>&nbsp;<span class="ident" id="4805722">_</span><span class="op" id="4805723">,</span>&nbsp;<span class="ident" id="4805725">x</span>&nbsp;<span class="op" id="4805727">:=</span>&nbsp;<span class="keyword" id="4805730">range</span>&nbsp;<span class="ident" id="4805736">slice</span>&nbsp;<span class="op" id="4805742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805746">if</span>&nbsp;<span class="ident" id="4805749">x</span>&nbsp;<span class="op" id="4805751">!=</span>&nbsp;<span class="num" id="4805754">0</span><span class="op" id="4805755">+</span><span class="num" id="4805756">0i</span>&nbsp;<span class="op" id="4805759">||</span>&nbsp;<span class="ident" id="4805762">state</span><span class="op" id="4805767">.</span><span class="ident" id="4805768">sendZero</span>&nbsp;<span class="op" id="4805777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805782">rpart</span>&nbsp;<span class="op" id="4805788">:=</span>&nbsp;<span class="ident" id="4805791">floatBits</span><span class="op" id="4805800">(</span><span class="builtinfunc" id="4805801">real</span><span class="op" id="4805805">(</span><span class="ident" id="4805806">x</span><span class="op" id="4805807">)</span><span class="op" id="4805808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805813">ipart</span>&nbsp;<span class="op" id="4805819">:=</span>&nbsp;<span class="ident" id="4805822">floatBits</span><span class="op" id="4805831">(</span><span class="builtinfunc" id="4805832">imag</span><span class="op" id="4805836">(</span><span class="ident" id="4805837">x</span><span class="op" id="4805838">)</span><span class="op" id="4805839">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805844">state</span><span class="op" id="4805849">.</span><span class="ident" id="4805850">encodeUint</span><span class="op" id="4805860">(</span><span class="ident" id="4805861">rpart</span><span class="op" id="4805866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4805871">state</span><span class="op" id="4805876">.</span><span class="ident" id="4805877">encodeUint</span><span class="op" id="4805887">(</span><span class="ident" id="4805888">ipart</span><span class="op" id="4805893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4805903">return</span>&nbsp;<span class="builtintype" id="4805910">true</span><br>
<span class="lineno">125</span><span class="op" id="4805915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4805918">func</span>&nbsp;<span class="ident" id="4805923">encFloat32Array</span><span class="op" id="4805938">(</span><span class="ident" id="4805939">state</span>&nbsp;<span class="op" id="4805945">*</span><span class="ident" id="4805946">encoderState</span><span class="op" id="4805958">,</span>&nbsp;<span class="ident" id="4805960">v</span>&nbsp;<span class="ident" id="4805962">reflect</span><span class="op" id="4805969">.</span><span class="ident" id="4805970">Value</span><span class="op" id="4805975">)</span>&nbsp;<span class="builtintype" id="4805977">bool</span>&nbsp;<span class="op" id="4805982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4805985">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806026">if</span>&nbsp;<span class="op" id="4806029">!</span><span class="ident" id="4806030">v</span><span class="op" id="4806031">.</span><span class="ident" id="4806032">CanAddr</span><span class="op" id="4806039">(</span><span class="op" id="4806040">)</span>&nbsp;<span class="op" id="4806042">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806046">return</span>&nbsp;<span class="builtintype" id="4806053">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806063">return</span>&nbsp;<span class="ident" id="4806070">encFloat32Slice</span><span class="op" id="4806085">(</span><span class="ident" id="4806086">state</span><span class="op" id="4806091">,</span>&nbsp;<span class="ident" id="4806093">v</span><span class="op" id="4806094">.</span><span class="ident" id="4806095">Slice</span><span class="op" id="4806100">(</span><span class="num" id="4806101">0</span><span class="op" id="4806102">,</span>&nbsp;<span class="ident" id="4806104">v</span><span class="op" id="4806105">.</span><span class="ident" id="4806106">Len</span><span class="op" id="4806109">(</span><span class="op" id="4806110">)</span><span class="op" id="4806111">)</span><span class="op" id="4806112">)</span><br>
<span class="lineno"></span><span class="op" id="4806114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="4806117">func</span>&nbsp;<span class="ident" id="4806122">encFloat32Slice</span><span class="op" id="4806137">(</span><span class="ident" id="4806138">state</span>&nbsp;<span class="op" id="4806144">*</span><span class="ident" id="4806145">encoderState</span><span class="op" id="4806157">,</span>&nbsp;<span class="ident" id="4806159">v</span>&nbsp;<span class="ident" id="4806161">reflect</span><span class="op" id="4806168">.</span><span class="ident" id="4806169">Value</span><span class="op" id="4806174">)</span>&nbsp;<span class="builtintype" id="4806176">bool</span>&nbsp;<span class="op" id="4806181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4806184">slice</span><span class="op" id="4806189">,</span>&nbsp;<span class="ident" id="4806191">ok</span>&nbsp;<span class="op" id="4806194">:=</span>&nbsp;<span class="ident" id="4806197">v</span><span class="op" id="4806198">.</span><span class="ident" id="4806199">Interface</span><span class="op" id="4806208">(</span><span class="op" id="4806209">)</span><span class="op" id="4806210">.</span><span class="op" id="4806211">(</span><span class="op" id="4806212">[</span><span class="op" id="4806213">]</span><span class="builtintype" id="4806214">float32</span><span class="op" id="4806221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806224">if</span>&nbsp;<span class="op" id="4806227">!</span><span class="ident" id="4806228">ok</span>&nbsp;<span class="op" id="4806231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4806235">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float32&nbsp;but&nbsp;not&nbsp;type&nbsp;float32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806316">return</span>&nbsp;<span class="builtintype" id="4806323">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806333">for</span>&nbsp;<span class="ident" id="4806337">_</span><span class="op" id="4806338">,</span>&nbsp;<span class="ident" id="4806340">x</span>&nbsp;<span class="op" id="4806342">:=</span>&nbsp;<span class="keyword" id="4806345">range</span>&nbsp;<span class="ident" id="4806351">slice</span>&nbsp;<span class="op" id="4806357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806361">if</span>&nbsp;<span class="ident" id="4806364">x</span>&nbsp;<span class="op" id="4806366">!=</span>&nbsp;<span class="num" id="4806369">0</span>&nbsp;<span class="op" id="4806371">||</span>&nbsp;<span class="ident" id="4806374">state</span><span class="op" id="4806379">.</span><span class="ident" id="4806380">sendZero</span>&nbsp;<span class="op" id="4806389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4806394">bits</span>&nbsp;<span class="op" id="4806399">:=</span>&nbsp;<span class="ident" id="4806402">floatBits</span><span class="op" id="4806411">(</span><span class="builtintype" id="4806412">float64</span><span class="op" id="4806419">(</span><span class="ident" id="4806420">x</span><span class="op" id="4806421">)</span><span class="op" id="4806422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4806427">state</span><span class="op" id="4806432">.</span><span class="ident" id="4806433">encodeUint</span><span class="op" id="4806443">(</span><span class="ident" id="4806444">bits</span><span class="op" id="4806448">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806458">return</span>&nbsp;<span class="builtintype" id="4806465">true</span><br>
<span class="lineno"></span><span class="op" id="4806470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="4806473">func</span>&nbsp;<span class="ident" id="4806478">encFloat64Array</span><span class="op" id="4806493">(</span><span class="ident" id="4806494">state</span>&nbsp;<span class="op" id="4806500">*</span><span class="ident" id="4806501">encoderState</span><span class="op" id="4806513">,</span>&nbsp;<span class="ident" id="4806515">v</span>&nbsp;<span class="ident" id="4806517">reflect</span><span class="op" id="4806524">.</span><span class="ident" id="4806525">Value</span><span class="op" id="4806530">)</span>&nbsp;<span class="builtintype" id="4806532">bool</span>&nbsp;<span class="op" id="4806537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4806540">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806581">if</span>&nbsp;<span class="op" id="4806584">!</span><span class="ident" id="4806585">v</span><span class="op" id="4806586">.</span><span class="ident" id="4806587">CanAddr</span><span class="op" id="4806594">(</span><span class="op" id="4806595">)</span>&nbsp;<span class="op" id="4806597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806601">return</span>&nbsp;<span class="builtintype" id="4806608">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806615">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806618">return</span>&nbsp;<span class="ident" id="4806625">encFloat64Slice</span><span class="op" id="4806640">(</span><span class="ident" id="4806641">state</span><span class="op" id="4806646">,</span>&nbsp;<span class="ident" id="4806648">v</span><span class="op" id="4806649">.</span><span class="ident" id="4806650">Slice</span><span class="op" id="4806655">(</span><span class="num" id="4806656">0</span><span class="op" id="4806657">,</span>&nbsp;<span class="ident" id="4806659">v</span><span class="op" id="4806660">.</span><span class="ident" id="4806661">Len</span><span class="op" id="4806664">(</span><span class="op" id="4806665">)</span><span class="op" id="4806666">)</span><span class="op" id="4806667">)</span><br>
<span class="lineno"></span><span class="op" id="4806669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4806672">func</span>&nbsp;<span class="ident" id="4806677">encFloat64Slice</span><span class="op" id="4806692">(</span><span class="ident" id="4806693">state</span>&nbsp;<span class="op" id="4806699">*</span><span class="ident" id="4806700">encoderState</span><span class="op" id="4806712">,</span>&nbsp;<span class="ident" id="4806714">v</span>&nbsp;<span class="ident" id="4806716">reflect</span><span class="op" id="4806723">.</span><span class="ident" id="4806724">Value</span><span class="op" id="4806729">)</span>&nbsp;<span class="builtintype" id="4806731">bool</span>&nbsp;<span class="op" id="4806736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4806739">slice</span><span class="op" id="4806744">,</span>&nbsp;<span class="ident" id="4806746">ok</span>&nbsp;<span class="op" id="4806749">:=</span>&nbsp;<span class="ident" id="4806752">v</span><span class="op" id="4806753">.</span><span class="ident" id="4806754">Interface</span><span class="op" id="4806763">(</span><span class="op" id="4806764">)</span><span class="op" id="4806765">.</span><span class="op" id="4806766">(</span><span class="op" id="4806767">[</span><span class="op" id="4806768">]</span><span class="builtintype" id="4806769">float64</span><span class="op" id="4806776">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806779">if</span>&nbsp;<span class="op" id="4806782">!</span><span class="ident" id="4806783">ok</span>&nbsp;<span class="op" id="4806786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4806790">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;float64&nbsp;but&nbsp;not&nbsp;type&nbsp;float64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806871">return</span>&nbsp;<span class="builtintype" id="4806878">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806888">for</span>&nbsp;<span class="ident" id="4806892">_</span><span class="op" id="4806893">,</span>&nbsp;<span class="ident" id="4806895">x</span>&nbsp;<span class="op" id="4806897">:=</span>&nbsp;<span class="keyword" id="4806900">range</span>&nbsp;<span class="ident" id="4806906">slice</span>&nbsp;<span class="op" id="4806912">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4806916">if</span>&nbsp;<span class="ident" id="4806919">x</span>&nbsp;<span class="op" id="4806921">!=</span>&nbsp;<span class="num" id="4806924">0</span>&nbsp;<span class="op" id="4806926">||</span>&nbsp;<span class="ident" id="4806929">state</span><span class="op" id="4806934">.</span><span class="ident" id="4806935">sendZero</span>&nbsp;<span class="op" id="4806944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4806949">bits</span>&nbsp;<span class="op" id="4806954">:=</span>&nbsp;<span class="ident" id="4806957">floatBits</span><span class="op" id="4806966">(</span><span class="ident" id="4806967">x</span><span class="op" id="4806968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4806973">state</span><span class="op" id="4806978">.</span><span class="ident" id="4806979">encodeUint</span><span class="op" id="4806989">(</span><span class="ident" id="4806990">bits</span><span class="op" id="4806994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4806998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807001">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807004">return</span>&nbsp;<span class="builtintype" id="4807011">true</span><br>
<span class="lineno"></span><span class="op" id="4807016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4807019">func</span>&nbsp;<span class="ident" id="4807024">encIntArray</span><span class="op" id="4807035">(</span><span class="ident" id="4807036">state</span>&nbsp;<span class="op" id="4807042">*</span><span class="ident" id="4807043">encoderState</span><span class="op" id="4807055">,</span>&nbsp;<span class="ident" id="4807057">v</span>&nbsp;<span class="ident" id="4807059">reflect</span><span class="op" id="4807066">.</span><span class="ident" id="4807067">Value</span><span class="op" id="4807072">)</span>&nbsp;<span class="builtintype" id="4807074">bool</span>&nbsp;<span class="op" id="4807079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4807082">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807123">if</span>&nbsp;<span class="op" id="4807126">!</span><span class="ident" id="4807127">v</span><span class="op" id="4807128">.</span><span class="ident" id="4807129">CanAddr</span><span class="op" id="4807136">(</span><span class="op" id="4807137">)</span>&nbsp;<span class="op" id="4807139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807143">return</span>&nbsp;<span class="builtintype" id="4807150">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807160">return</span>&nbsp;<span class="ident" id="4807167">encIntSlice</span><span class="op" id="4807178">(</span><span class="ident" id="4807179">state</span><span class="op" id="4807184">,</span>&nbsp;<span class="ident" id="4807186">v</span><span class="op" id="4807187">.</span><span class="ident" id="4807188">Slice</span><span class="op" id="4807193">(</span><span class="num" id="4807194">0</span><span class="op" id="4807195">,</span>&nbsp;<span class="ident" id="4807197">v</span><span class="op" id="4807198">.</span><span class="ident" id="4807199">Len</span><span class="op" id="4807202">(</span><span class="op" id="4807203">)</span><span class="op" id="4807204">)</span><span class="op" id="4807205">)</span><br>
<span class="lineno"></span><span class="op" id="4807207">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="4807210">func</span>&nbsp;<span class="ident" id="4807215">encIntSlice</span><span class="op" id="4807226">(</span><span class="ident" id="4807227">state</span>&nbsp;<span class="op" id="4807233">*</span><span class="ident" id="4807234">encoderState</span><span class="op" id="4807246">,</span>&nbsp;<span class="ident" id="4807248">v</span>&nbsp;<span class="ident" id="4807250">reflect</span><span class="op" id="4807257">.</span><span class="ident" id="4807258">Value</span><span class="op" id="4807263">)</span>&nbsp;<span class="builtintype" id="4807265">bool</span>&nbsp;<span class="op" id="4807270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4807273">slice</span><span class="op" id="4807278">,</span>&nbsp;<span class="ident" id="4807280">ok</span>&nbsp;<span class="op" id="4807283">:=</span>&nbsp;<span class="ident" id="4807286">v</span><span class="op" id="4807287">.</span><span class="ident" id="4807288">Interface</span><span class="op" id="4807297">(</span><span class="op" id="4807298">)</span><span class="op" id="4807299">.</span><span class="op" id="4807300">(</span><span class="op" id="4807301">[</span><span class="op" id="4807302">]</span><span class="builtintype" id="4807303">int</span><span class="op" id="4807306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807309">if</span>&nbsp;<span class="op" id="4807312">!</span><span class="ident" id="4807313">ok</span>&nbsp;<span class="op" id="4807316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4807320">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int&nbsp;but&nbsp;not&nbsp;type&nbsp;int.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807393">return</span>&nbsp;<span class="builtintype" id="4807400">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807410">for</span>&nbsp;<span class="ident" id="4807414">_</span><span class="op" id="4807415">,</span>&nbsp;<span class="ident" id="4807417">x</span>&nbsp;<span class="op" id="4807419">:=</span>&nbsp;<span class="keyword" id="4807422">range</span>&nbsp;<span class="ident" id="4807428">slice</span>&nbsp;<span class="op" id="4807434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807438">if</span>&nbsp;<span class="ident" id="4807441">x</span>&nbsp;<span class="op" id="4807443">!=</span>&nbsp;<span class="num" id="4807446">0</span>&nbsp;<span class="op" id="4807448">||</span>&nbsp;<span class="ident" id="4807451">state</span><span class="op" id="4807456">.</span><span class="ident" id="4807457">sendZero</span>&nbsp;<span class="op" id="4807466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4807471">state</span><span class="op" id="4807476">.</span><span class="ident" id="4807477">encodeInt</span><span class="op" id="4807486">(</span><span class="ident" id="4807487">int64</span><span class="op" id="4807492">(</span><span class="ident" id="4807493">x</span><span class="op" id="4807494">)</span><span class="op" id="4807495">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807505">return</span>&nbsp;<span class="builtintype" id="4807512">true</span><br>
<span class="lineno"></span><span class="op" id="4807517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="4807520">func</span>&nbsp;<span class="ident" id="4807525">encInt16Array</span><span class="op" id="4807538">(</span><span class="ident" id="4807539">state</span>&nbsp;<span class="op" id="4807545">*</span><span class="ident" id="4807546">encoderState</span><span class="op" id="4807558">,</span>&nbsp;<span class="ident" id="4807560">v</span>&nbsp;<span class="ident" id="4807562">reflect</span><span class="op" id="4807569">.</span><span class="ident" id="4807570">Value</span><span class="op" id="4807575">)</span>&nbsp;<span class="builtintype" id="4807577">bool</span>&nbsp;<span class="op" id="4807582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4807585">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807626">if</span>&nbsp;<span class="op" id="4807629">!</span><span class="ident" id="4807630">v</span><span class="op" id="4807631">.</span><span class="ident" id="4807632">CanAddr</span><span class="op" id="4807639">(</span><span class="op" id="4807640">)</span>&nbsp;<span class="op" id="4807642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807646">return</span>&nbsp;<span class="builtintype" id="4807653">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807660">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807663">return</span>&nbsp;<span class="ident" id="4807670">encInt16Slice</span><span class="op" id="4807683">(</span><span class="ident" id="4807684">state</span><span class="op" id="4807689">,</span>&nbsp;<span class="ident" id="4807691">v</span><span class="op" id="4807692">.</span><span class="ident" id="4807693">Slice</span><span class="op" id="4807698">(</span><span class="num" id="4807699">0</span><span class="op" id="4807700">,</span>&nbsp;<span class="ident" id="4807702">v</span><span class="op" id="4807703">.</span><span class="ident" id="4807704">Len</span><span class="op" id="4807707">(</span><span class="op" id="4807708">)</span><span class="op" id="4807709">)</span><span class="op" id="4807710">)</span><br>
<span class="lineno"></span><span class="op" id="4807712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4807715">func</span>&nbsp;<span class="ident" id="4807720">encInt16Slice</span><span class="op" id="4807733">(</span><span class="ident" id="4807734">state</span>&nbsp;<span class="op" id="4807740">*</span><span class="ident" id="4807741">encoderState</span><span class="op" id="4807753">,</span>&nbsp;<span class="ident" id="4807755">v</span>&nbsp;<span class="ident" id="4807757">reflect</span><span class="op" id="4807764">.</span><span class="ident" id="4807765">Value</span><span class="op" id="4807770">)</span>&nbsp;<span class="builtintype" id="4807772">bool</span>&nbsp;<span class="op" id="4807777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4807780">slice</span><span class="op" id="4807785">,</span>&nbsp;<span class="ident" id="4807787">ok</span>&nbsp;<span class="op" id="4807790">:=</span>&nbsp;<span class="ident" id="4807793">v</span><span class="op" id="4807794">.</span><span class="ident" id="4807795">Interface</span><span class="op" id="4807804">(</span><span class="op" id="4807805">)</span><span class="op" id="4807806">.</span><span class="op" id="4807807">(</span><span class="op" id="4807808">[</span><span class="op" id="4807809">]</span><span class="builtintype" id="4807810">int16</span><span class="op" id="4807815">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807818">if</span>&nbsp;<span class="op" id="4807821">!</span><span class="ident" id="4807822">ok</span>&nbsp;<span class="op" id="4807825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4807829">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int16&nbsp;but&nbsp;not&nbsp;type&nbsp;int16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807906">return</span>&nbsp;<span class="builtintype" id="4807913">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4807920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807923">for</span>&nbsp;<span class="ident" id="4807927">_</span><span class="op" id="4807928">,</span>&nbsp;<span class="ident" id="4807930">x</span>&nbsp;<span class="op" id="4807932">:=</span>&nbsp;<span class="keyword" id="4807935">range</span>&nbsp;<span class="ident" id="4807941">slice</span>&nbsp;<span class="op" id="4807947">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4807951">if</span>&nbsp;<span class="ident" id="4807954">x</span>&nbsp;<span class="op" id="4807956">!=</span>&nbsp;<span class="num" id="4807959">0</span>&nbsp;<span class="op" id="4807961">||</span>&nbsp;<span class="ident" id="4807964">state</span><span class="op" id="4807969">.</span><span class="ident" id="4807970">sendZero</span>&nbsp;<span class="op" id="4807979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4807984">state</span><span class="op" id="4807989">.</span><span class="ident" id="4807990">encodeInt</span><span class="op" id="4807999">(</span><span class="ident" id="4808000">int64</span><span class="op" id="4808005">(</span><span class="ident" id="4808006">x</span><span class="op" id="4808007">)</span><span class="op" id="4808008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808018">return</span>&nbsp;<span class="builtintype" id="4808025">true</span><br>
<span class="lineno">215</span><span class="op" id="4808030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4808033">func</span>&nbsp;<span class="ident" id="4808038">encInt32Array</span><span class="op" id="4808051">(</span><span class="ident" id="4808052">state</span>&nbsp;<span class="op" id="4808058">*</span><span class="ident" id="4808059">encoderState</span><span class="op" id="4808071">,</span>&nbsp;<span class="ident" id="4808073">v</span>&nbsp;<span class="ident" id="4808075">reflect</span><span class="op" id="4808082">.</span><span class="ident" id="4808083">Value</span><span class="op" id="4808088">)</span>&nbsp;<span class="builtintype" id="4808090">bool</span>&nbsp;<span class="op" id="4808095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4808098">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808139">if</span>&nbsp;<span class="op" id="4808142">!</span><span class="ident" id="4808143">v</span><span class="op" id="4808144">.</span><span class="ident" id="4808145">CanAddr</span><span class="op" id="4808152">(</span><span class="op" id="4808153">)</span>&nbsp;<span class="op" id="4808155">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808159">return</span>&nbsp;<span class="builtintype" id="4808166">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808176">return</span>&nbsp;<span class="ident" id="4808183">encInt32Slice</span><span class="op" id="4808196">(</span><span class="ident" id="4808197">state</span><span class="op" id="4808202">,</span>&nbsp;<span class="ident" id="4808204">v</span><span class="op" id="4808205">.</span><span class="ident" id="4808206">Slice</span><span class="op" id="4808211">(</span><span class="num" id="4808212">0</span><span class="op" id="4808213">,</span>&nbsp;<span class="ident" id="4808215">v</span><span class="op" id="4808216">.</span><span class="ident" id="4808217">Len</span><span class="op" id="4808220">(</span><span class="op" id="4808221">)</span><span class="op" id="4808222">)</span><span class="op" id="4808223">)</span><br>
<span class="lineno"></span><span class="op" id="4808225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="4808228">func</span>&nbsp;<span class="ident" id="4808233">encInt32Slice</span><span class="op" id="4808246">(</span><span class="ident" id="4808247">state</span>&nbsp;<span class="op" id="4808253">*</span><span class="ident" id="4808254">encoderState</span><span class="op" id="4808266">,</span>&nbsp;<span class="ident" id="4808268">v</span>&nbsp;<span class="ident" id="4808270">reflect</span><span class="op" id="4808277">.</span><span class="ident" id="4808278">Value</span><span class="op" id="4808283">)</span>&nbsp;<span class="builtintype" id="4808285">bool</span>&nbsp;<span class="op" id="4808290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808293">slice</span><span class="op" id="4808298">,</span>&nbsp;<span class="ident" id="4808300">ok</span>&nbsp;<span class="op" id="4808303">:=</span>&nbsp;<span class="ident" id="4808306">v</span><span class="op" id="4808307">.</span><span class="ident" id="4808308">Interface</span><span class="op" id="4808317">(</span><span class="op" id="4808318">)</span><span class="op" id="4808319">.</span><span class="op" id="4808320">(</span><span class="op" id="4808321">[</span><span class="op" id="4808322">]</span><span class="builtintype" id="4808323">int32</span><span class="op" id="4808328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808331">if</span>&nbsp;<span class="op" id="4808334">!</span><span class="ident" id="4808335">ok</span>&nbsp;<span class="op" id="4808338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4808342">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int32&nbsp;but&nbsp;not&nbsp;type&nbsp;int32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808419">return</span>&nbsp;<span class="builtintype" id="4808426">false</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808436">for</span>&nbsp;<span class="ident" id="4808440">_</span><span class="op" id="4808441">,</span>&nbsp;<span class="ident" id="4808443">x</span>&nbsp;<span class="op" id="4808445">:=</span>&nbsp;<span class="keyword" id="4808448">range</span>&nbsp;<span class="ident" id="4808454">slice</span>&nbsp;<span class="op" id="4808460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808464">if</span>&nbsp;<span class="ident" id="4808467">x</span>&nbsp;<span class="op" id="4808469">!=</span>&nbsp;<span class="num" id="4808472">0</span>&nbsp;<span class="op" id="4808474">||</span>&nbsp;<span class="ident" id="4808477">state</span><span class="op" id="4808482">.</span><span class="ident" id="4808483">sendZero</span>&nbsp;<span class="op" id="4808492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808497">state</span><span class="op" id="4808502">.</span><span class="ident" id="4808503">encodeInt</span><span class="op" id="4808512">(</span><span class="ident" id="4808513">int64</span><span class="op" id="4808518">(</span><span class="ident" id="4808519">x</span><span class="op" id="4808520">)</span><span class="op" id="4808521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808525">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808531">return</span>&nbsp;<span class="builtintype" id="4808538">true</span><br>
<span class="lineno"></span><span class="op" id="4808543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4808546">func</span>&nbsp;<span class="ident" id="4808551">encInt64Array</span><span class="op" id="4808564">(</span><span class="ident" id="4808565">state</span>&nbsp;<span class="op" id="4808571">*</span><span class="ident" id="4808572">encoderState</span><span class="op" id="4808584">,</span>&nbsp;<span class="ident" id="4808586">v</span>&nbsp;<span class="ident" id="4808588">reflect</span><span class="op" id="4808595">.</span><span class="ident" id="4808596">Value</span><span class="op" id="4808601">)</span>&nbsp;<span class="builtintype" id="4808603">bool</span>&nbsp;<span class="op" id="4808608">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4808611">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808652">if</span>&nbsp;<span class="op" id="4808655">!</span><span class="ident" id="4808656">v</span><span class="op" id="4808657">.</span><span class="ident" id="4808658">CanAddr</span><span class="op" id="4808665">(</span><span class="op" id="4808666">)</span>&nbsp;<span class="op" id="4808668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808672">return</span>&nbsp;<span class="builtintype" id="4808679">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808689">return</span>&nbsp;<span class="ident" id="4808696">encInt64Slice</span><span class="op" id="4808709">(</span><span class="ident" id="4808710">state</span><span class="op" id="4808715">,</span>&nbsp;<span class="ident" id="4808717">v</span><span class="op" id="4808718">.</span><span class="ident" id="4808719">Slice</span><span class="op" id="4808724">(</span><span class="num" id="4808725">0</span><span class="op" id="4808726">,</span>&nbsp;<span class="ident" id="4808728">v</span><span class="op" id="4808729">.</span><span class="ident" id="4808730">Len</span><span class="op" id="4808733">(</span><span class="op" id="4808734">)</span><span class="op" id="4808735">)</span><span class="op" id="4808736">)</span><br>
<span class="lineno">245</span><span class="op" id="4808738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4808741">func</span>&nbsp;<span class="ident" id="4808746">encInt64Slice</span><span class="op" id="4808759">(</span><span class="ident" id="4808760">state</span>&nbsp;<span class="op" id="4808766">*</span><span class="ident" id="4808767">encoderState</span><span class="op" id="4808779">,</span>&nbsp;<span class="ident" id="4808781">v</span>&nbsp;<span class="ident" id="4808783">reflect</span><span class="op" id="4808790">.</span><span class="ident" id="4808791">Value</span><span class="op" id="4808796">)</span>&nbsp;<span class="builtintype" id="4808798">bool</span>&nbsp;<span class="op" id="4808803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4808806">slice</span><span class="op" id="4808811">,</span>&nbsp;<span class="ident" id="4808813">ok</span>&nbsp;<span class="op" id="4808816">:=</span>&nbsp;<span class="ident" id="4808819">v</span><span class="op" id="4808820">.</span><span class="ident" id="4808821">Interface</span><span class="op" id="4808830">(</span><span class="op" id="4808831">)</span><span class="op" id="4808832">.</span><span class="op" id="4808833">(</span><span class="op" id="4808834">[</span><span class="op" id="4808835">]</span><span class="ident" id="4808836">int64</span><span class="op" id="4808841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808844">if</span>&nbsp;<span class="op" id="4808847">!</span><span class="ident" id="4808848">ok</span>&nbsp;<span class="op" id="4808851">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4808855">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int64&nbsp;but&nbsp;not&nbsp;type&nbsp;int64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808932">return</span>&nbsp;<span class="builtintype" id="4808939">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4808946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808949">for</span>&nbsp;<span class="ident" id="4808953">_</span><span class="op" id="4808954">,</span>&nbsp;<span class="ident" id="4808956">x</span>&nbsp;<span class="op" id="4808958">:=</span>&nbsp;<span class="keyword" id="4808961">range</span>&nbsp;<span class="ident" id="4808967">slice</span>&nbsp;<span class="op" id="4808973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4808977">if</span>&nbsp;<span class="ident" id="4808980">x</span>&nbsp;<span class="op" id="4808982">!=</span>&nbsp;<span class="num" id="4808985">0</span>&nbsp;<span class="op" id="4808987">||</span>&nbsp;<span class="ident" id="4808990">state</span><span class="op" id="4808995">.</span><span class="ident" id="4808996">sendZero</span>&nbsp;<span class="op" id="4809005">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4809010">state</span><span class="op" id="4809015">.</span><span class="ident" id="4809016">encodeInt</span><span class="op" id="4809025">(</span><span class="ident" id="4809026">x</span><span class="op" id="4809027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809037">return</span>&nbsp;<span class="builtintype" id="4809044">true</span><br>
<span class="lineno"></span><span class="op" id="4809049">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4809052">func</span>&nbsp;<span class="ident" id="4809057">encInt8Array</span><span class="op" id="4809069">(</span><span class="ident" id="4809070">state</span>&nbsp;<span class="op" id="4809076">*</span><span class="ident" id="4809077">encoderState</span><span class="op" id="4809089">,</span>&nbsp;<span class="ident" id="4809091">v</span>&nbsp;<span class="ident" id="4809093">reflect</span><span class="op" id="4809100">.</span><span class="ident" id="4809101">Value</span><span class="op" id="4809106">)</span>&nbsp;<span class="builtintype" id="4809108">bool</span>&nbsp;<span class="op" id="4809113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4809116">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809157">if</span>&nbsp;<span class="op" id="4809160">!</span><span class="ident" id="4809161">v</span><span class="op" id="4809162">.</span><span class="ident" id="4809163">CanAddr</span><span class="op" id="4809170">(</span><span class="op" id="4809171">)</span>&nbsp;<span class="op" id="4809173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809177">return</span>&nbsp;<span class="builtintype" id="4809184">false</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809194">return</span>&nbsp;<span class="ident" id="4809201">encInt8Slice</span><span class="op" id="4809213">(</span><span class="ident" id="4809214">state</span><span class="op" id="4809219">,</span>&nbsp;<span class="ident" id="4809221">v</span><span class="op" id="4809222">.</span><span class="ident" id="4809223">Slice</span><span class="op" id="4809228">(</span><span class="num" id="4809229">0</span><span class="op" id="4809230">,</span>&nbsp;<span class="ident" id="4809232">v</span><span class="op" id="4809233">.</span><span class="ident" id="4809234">Len</span><span class="op" id="4809237">(</span><span class="op" id="4809238">)</span><span class="op" id="4809239">)</span><span class="op" id="4809240">)</span><br>
<span class="lineno"></span><span class="op" id="4809242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4809245">func</span>&nbsp;<span class="ident" id="4809250">encInt8Slice</span><span class="op" id="4809262">(</span><span class="ident" id="4809263">state</span>&nbsp;<span class="op" id="4809269">*</span><span class="ident" id="4809270">encoderState</span><span class="op" id="4809282">,</span>&nbsp;<span class="ident" id="4809284">v</span>&nbsp;<span class="ident" id="4809286">reflect</span><span class="op" id="4809293">.</span><span class="ident" id="4809294">Value</span><span class="op" id="4809299">)</span>&nbsp;<span class="builtintype" id="4809301">bool</span>&nbsp;<span class="op" id="4809306">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4809309">slice</span><span class="op" id="4809314">,</span>&nbsp;<span class="ident" id="4809316">ok</span>&nbsp;<span class="op" id="4809319">:=</span>&nbsp;<span class="ident" id="4809322">v</span><span class="op" id="4809323">.</span><span class="ident" id="4809324">Interface</span><span class="op" id="4809333">(</span><span class="op" id="4809334">)</span><span class="op" id="4809335">.</span><span class="op" id="4809336">(</span><span class="op" id="4809337">[</span><span class="op" id="4809338">]</span><span class="builtintype" id="4809339">int8</span><span class="op" id="4809343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809346">if</span>&nbsp;<span class="op" id="4809349">!</span><span class="ident" id="4809350">ok</span>&nbsp;<span class="op" id="4809353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4809357">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;int8&nbsp;but&nbsp;not&nbsp;type&nbsp;int8.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809432">return</span>&nbsp;<span class="builtintype" id="4809439">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809446">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809449">for</span>&nbsp;<span class="ident" id="4809453">_</span><span class="op" id="4809454">,</span>&nbsp;<span class="ident" id="4809456">x</span>&nbsp;<span class="op" id="4809458">:=</span>&nbsp;<span class="keyword" id="4809461">range</span>&nbsp;<span class="ident" id="4809467">slice</span>&nbsp;<span class="op" id="4809473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809477">if</span>&nbsp;<span class="ident" id="4809480">x</span>&nbsp;<span class="op" id="4809482">!=</span>&nbsp;<span class="num" id="4809485">0</span>&nbsp;<span class="op" id="4809487">||</span>&nbsp;<span class="ident" id="4809490">state</span><span class="op" id="4809495">.</span><span class="ident" id="4809496">sendZero</span>&nbsp;<span class="op" id="4809505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4809510">state</span><span class="op" id="4809515">.</span><span class="ident" id="4809516">encodeInt</span><span class="op" id="4809525">(</span><span class="ident" id="4809526">int64</span><span class="op" id="4809531">(</span><span class="ident" id="4809532">x</span><span class="op" id="4809533">)</span><span class="op" id="4809534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809541">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809544">return</span>&nbsp;<span class="builtintype" id="4809551">true</span><br>
<span class="lineno"></span><span class="op" id="4809556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4809559">func</span>&nbsp;<span class="ident" id="4809564">encStringArray</span><span class="op" id="4809578">(</span><span class="ident" id="4809579">state</span>&nbsp;<span class="op" id="4809585">*</span><span class="ident" id="4809586">encoderState</span><span class="op" id="4809598">,</span>&nbsp;<span class="ident" id="4809600">v</span>&nbsp;<span class="ident" id="4809602">reflect</span><span class="op" id="4809609">.</span><span class="ident" id="4809610">Value</span><span class="op" id="4809615">)</span>&nbsp;<span class="builtintype" id="4809617">bool</span>&nbsp;<span class="op" id="4809622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4809625">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809666">if</span>&nbsp;<span class="op" id="4809669">!</span><span class="ident" id="4809670">v</span><span class="op" id="4809671">.</span><span class="ident" id="4809672">CanAddr</span><span class="op" id="4809679">(</span><span class="op" id="4809680">)</span>&nbsp;<span class="op" id="4809682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809686">return</span>&nbsp;<span class="builtintype" id="4809693">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809703">return</span>&nbsp;<span class="ident" id="4809710">encStringSlice</span><span class="op" id="4809724">(</span><span class="ident" id="4809725">state</span><span class="op" id="4809730">,</span>&nbsp;<span class="ident" id="4809732">v</span><span class="op" id="4809733">.</span><span class="ident" id="4809734">Slice</span><span class="op" id="4809739">(</span><span class="num" id="4809740">0</span><span class="op" id="4809741">,</span>&nbsp;<span class="ident" id="4809743">v</span><span class="op" id="4809744">.</span><span class="ident" id="4809745">Len</span><span class="op" id="4809748">(</span><span class="op" id="4809749">)</span><span class="op" id="4809750">)</span><span class="op" id="4809751">)</span><br>
<span class="lineno"></span><span class="op" id="4809753">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="4809756">func</span>&nbsp;<span class="ident" id="4809761">encStringSlice</span><span class="op" id="4809775">(</span><span class="ident" id="4809776">state</span>&nbsp;<span class="op" id="4809782">*</span><span class="ident" id="4809783">encoderState</span><span class="op" id="4809795">,</span>&nbsp;<span class="ident" id="4809797">v</span>&nbsp;<span class="ident" id="4809799">reflect</span><span class="op" id="4809806">.</span><span class="ident" id="4809807">Value</span><span class="op" id="4809812">)</span>&nbsp;<span class="builtintype" id="4809814">bool</span>&nbsp;<span class="op" id="4809819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4809822">slice</span><span class="op" id="4809827">,</span>&nbsp;<span class="ident" id="4809829">ok</span>&nbsp;<span class="op" id="4809832">:=</span>&nbsp;<span class="ident" id="4809835">v</span><span class="op" id="4809836">.</span><span class="ident" id="4809837">Interface</span><span class="op" id="4809846">(</span><span class="op" id="4809847">)</span><span class="op" id="4809848">.</span><span class="op" id="4809849">(</span><span class="op" id="4809850">[</span><span class="op" id="4809851">]</span><span class="builtintype" id="4809852">string</span><span class="op" id="4809858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809861">if</span>&nbsp;<span class="op" id="4809864">!</span><span class="ident" id="4809865">ok</span>&nbsp;<span class="op" id="4809868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4809872">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;string&nbsp;but&nbsp;not&nbsp;type&nbsp;string.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809951">return</span>&nbsp;<span class="builtintype" id="4809958">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4809965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809968">for</span>&nbsp;<span class="ident" id="4809972">_</span><span class="op" id="4809973">,</span>&nbsp;<span class="ident" id="4809975">x</span>&nbsp;<span class="op" id="4809977">:=</span>&nbsp;<span class="keyword" id="4809980">range</span>&nbsp;<span class="ident" id="4809986">slice</span>&nbsp;<span class="op" id="4809992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4809996">if</span>&nbsp;<span class="ident" id="4809999">x</span>&nbsp;<span class="op" id="4810001">!=</span>&nbsp;<span class="string" id="4810004">&#34;&#34;</span>&nbsp;<span class="op" id="4810007">||</span>&nbsp;<span class="ident" id="4810010">state</span><span class="op" id="4810015">.</span><span class="ident" id="4810016">sendZero</span>&nbsp;<span class="op" id="4810025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810030">state</span><span class="op" id="4810035">.</span><span class="ident" id="4810036">encodeUint</span><span class="op" id="4810046">(</span><span class="ident" id="4810047">uint64</span><span class="op" id="4810053">(</span><span class="builtinfunc" id="4810054">len</span><span class="op" id="4810057">(</span><span class="ident" id="4810058">x</span><span class="op" id="4810059">)</span><span class="op" id="4810060">)</span><span class="op" id="4810061">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810066">state</span><span class="op" id="4810071">.</span><span class="ident" id="4810072">b</span><span class="op" id="4810073">.</span><span class="ident" id="4810074">WriteString</span><span class="op" id="4810085">(</span><span class="ident" id="4810086">x</span><span class="op" id="4810087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810097">return</span>&nbsp;<span class="builtintype" id="4810104">true</span><br>
<span class="lineno"></span><span class="op" id="4810109">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="4810112">func</span>&nbsp;<span class="ident" id="4810117">encUintArray</span><span class="op" id="4810129">(</span><span class="ident" id="4810130">state</span>&nbsp;<span class="op" id="4810136">*</span><span class="ident" id="4810137">encoderState</span><span class="op" id="4810149">,</span>&nbsp;<span class="ident" id="4810151">v</span>&nbsp;<span class="ident" id="4810153">reflect</span><span class="op" id="4810160">.</span><span class="ident" id="4810161">Value</span><span class="op" id="4810166">)</span>&nbsp;<span class="builtintype" id="4810168">bool</span>&nbsp;<span class="op" id="4810173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810176">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810217">if</span>&nbsp;<span class="op" id="4810220">!</span><span class="ident" id="4810221">v</span><span class="op" id="4810222">.</span><span class="ident" id="4810223">CanAddr</span><span class="op" id="4810230">(</span><span class="op" id="4810231">)</span>&nbsp;<span class="op" id="4810233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810237">return</span>&nbsp;<span class="builtintype" id="4810244">false</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810254">return</span>&nbsp;<span class="ident" id="4810261">encUintSlice</span><span class="op" id="4810273">(</span><span class="ident" id="4810274">state</span><span class="op" id="4810279">,</span>&nbsp;<span class="ident" id="4810281">v</span><span class="op" id="4810282">.</span><span class="ident" id="4810283">Slice</span><span class="op" id="4810288">(</span><span class="num" id="4810289">0</span><span class="op" id="4810290">,</span>&nbsp;<span class="ident" id="4810292">v</span><span class="op" id="4810293">.</span><span class="ident" id="4810294">Len</span><span class="op" id="4810297">(</span><span class="op" id="4810298">)</span><span class="op" id="4810299">)</span><span class="op" id="4810300">)</span><br>
<span class="lineno"></span><span class="op" id="4810302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4810305">func</span>&nbsp;<span class="ident" id="4810310">encUintSlice</span><span class="op" id="4810322">(</span><span class="ident" id="4810323">state</span>&nbsp;<span class="op" id="4810329">*</span><span class="ident" id="4810330">encoderState</span><span class="op" id="4810342">,</span>&nbsp;<span class="ident" id="4810344">v</span>&nbsp;<span class="ident" id="4810346">reflect</span><span class="op" id="4810353">.</span><span class="ident" id="4810354">Value</span><span class="op" id="4810359">)</span>&nbsp;<span class="builtintype" id="4810361">bool</span>&nbsp;<span class="op" id="4810366">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810369">slice</span><span class="op" id="4810374">,</span>&nbsp;<span class="ident" id="4810376">ok</span>&nbsp;<span class="op" id="4810379">:=</span>&nbsp;<span class="ident" id="4810382">v</span><span class="op" id="4810383">.</span><span class="ident" id="4810384">Interface</span><span class="op" id="4810393">(</span><span class="op" id="4810394">)</span><span class="op" id="4810395">.</span><span class="op" id="4810396">(</span><span class="op" id="4810397">[</span><span class="op" id="4810398">]</span><span class="builtintype" id="4810399">uint</span><span class="op" id="4810403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810406">if</span>&nbsp;<span class="op" id="4810409">!</span><span class="ident" id="4810410">ok</span>&nbsp;<span class="op" id="4810413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810417">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint&nbsp;but&nbsp;not&nbsp;type&nbsp;uint.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810492">return</span>&nbsp;<span class="builtintype" id="4810499">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810506">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810509">for</span>&nbsp;<span class="ident" id="4810513">_</span><span class="op" id="4810514">,</span>&nbsp;<span class="ident" id="4810516">x</span>&nbsp;<span class="op" id="4810518">:=</span>&nbsp;<span class="keyword" id="4810521">range</span>&nbsp;<span class="ident" id="4810527">slice</span>&nbsp;<span class="op" id="4810533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810537">if</span>&nbsp;<span class="ident" id="4810540">x</span>&nbsp;<span class="op" id="4810542">!=</span>&nbsp;<span class="num" id="4810545">0</span>&nbsp;<span class="op" id="4810547">||</span>&nbsp;<span class="ident" id="4810550">state</span><span class="op" id="4810555">.</span><span class="ident" id="4810556">sendZero</span>&nbsp;<span class="op" id="4810565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810570">state</span><span class="op" id="4810575">.</span><span class="ident" id="4810576">encodeUint</span><span class="op" id="4810586">(</span><span class="ident" id="4810587">uint64</span><span class="op" id="4810593">(</span><span class="ident" id="4810594">x</span><span class="op" id="4810595">)</span><span class="op" id="4810596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810603">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810606">return</span>&nbsp;<span class="builtintype" id="4810613">true</span><br>
<span class="lineno"></span><span class="op" id="4810618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4810621">func</span>&nbsp;<span class="ident" id="4810626">encUint16Array</span><span class="op" id="4810640">(</span><span class="ident" id="4810641">state</span>&nbsp;<span class="op" id="4810647">*</span><span class="ident" id="4810648">encoderState</span><span class="op" id="4810660">,</span>&nbsp;<span class="ident" id="4810662">v</span>&nbsp;<span class="ident" id="4810664">reflect</span><span class="op" id="4810671">.</span><span class="ident" id="4810672">Value</span><span class="op" id="4810677">)</span>&nbsp;<span class="builtintype" id="4810679">bool</span>&nbsp;<span class="op" id="4810684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810687">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810728">if</span>&nbsp;<span class="op" id="4810731">!</span><span class="ident" id="4810732">v</span><span class="op" id="4810733">.</span><span class="ident" id="4810734">CanAddr</span><span class="op" id="4810741">(</span><span class="op" id="4810742">)</span>&nbsp;<span class="op" id="4810744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810748">return</span>&nbsp;<span class="builtintype" id="4810755">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4810762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810765">return</span>&nbsp;<span class="ident" id="4810772">encUint16Slice</span><span class="op" id="4810786">(</span><span class="ident" id="4810787">state</span><span class="op" id="4810792">,</span>&nbsp;<span class="ident" id="4810794">v</span><span class="op" id="4810795">.</span><span class="ident" id="4810796">Slice</span><span class="op" id="4810801">(</span><span class="num" id="4810802">0</span><span class="op" id="4810803">,</span>&nbsp;<span class="ident" id="4810805">v</span><span class="op" id="4810806">.</span><span class="ident" id="4810807">Len</span><span class="op" id="4810810">(</span><span class="op" id="4810811">)</span><span class="op" id="4810812">)</span><span class="op" id="4810813">)</span><br>
<span class="lineno"></span><span class="op" id="4810815">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="keyword" id="4810818">func</span>&nbsp;<span class="ident" id="4810823">encUint16Slice</span><span class="op" id="4810837">(</span><span class="ident" id="4810838">state</span>&nbsp;<span class="op" id="4810844">*</span><span class="ident" id="4810845">encoderState</span><span class="op" id="4810857">,</span>&nbsp;<span class="ident" id="4810859">v</span>&nbsp;<span class="ident" id="4810861">reflect</span><span class="op" id="4810868">.</span><span class="ident" id="4810869">Value</span><span class="op" id="4810874">)</span>&nbsp;<span class="builtintype" id="4810876">bool</span>&nbsp;<span class="op" id="4810881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4810884">slice</span><span class="op" id="4810889">,</span>&nbsp;<span class="ident" id="4810891">ok</span>&nbsp;<span class="op" id="4810894">:=</span>&nbsp;<span class="ident" id="4810897">v</span><span class="op" id="4810898">.</span><span class="ident" id="4810899">Interface</span><span class="op" id="4810908">(</span><span class="op" id="4810909">)</span><span class="op" id="4810910">.</span><span class="op" id="4810911">(</span><span class="op" id="4810912">[</span><span class="op" id="4810913">]</span><span class="builtintype" id="4810914">uint16</span><span class="op" id="4810920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4810923">if</span>&nbsp;<span class="op" id="4810926">!</span><span class="ident" id="4810927">ok</span>&nbsp;<span class="op" id="4810930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4810934">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint16&nbsp;but&nbsp;not&nbsp;type&nbsp;uint16.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811013">return</span>&nbsp;<span class="builtintype" id="4811020">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811030">for</span>&nbsp;<span class="ident" id="4811034">_</span><span class="op" id="4811035">,</span>&nbsp;<span class="ident" id="4811037">x</span>&nbsp;<span class="op" id="4811039">:=</span>&nbsp;<span class="keyword" id="4811042">range</span>&nbsp;<span class="ident" id="4811048">slice</span>&nbsp;<span class="op" id="4811054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811058">if</span>&nbsp;<span class="ident" id="4811061">x</span>&nbsp;<span class="op" id="4811063">!=</span>&nbsp;<span class="num" id="4811066">0</span>&nbsp;<span class="op" id="4811068">||</span>&nbsp;<span class="ident" id="4811071">state</span><span class="op" id="4811076">.</span><span class="ident" id="4811077">sendZero</span>&nbsp;<span class="op" id="4811086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4811091">state</span><span class="op" id="4811096">.</span><span class="ident" id="4811097">encodeUint</span><span class="op" id="4811107">(</span><span class="ident" id="4811108">uint64</span><span class="op" id="4811114">(</span><span class="ident" id="4811115">x</span><span class="op" id="4811116">)</span><span class="op" id="4811117">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811127">return</span>&nbsp;<span class="builtintype" id="4811134">true</span><br>
<span class="lineno"></span><span class="op" id="4811139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="4811142">func</span>&nbsp;<span class="ident" id="4811147">encUint32Array</span><span class="op" id="4811161">(</span><span class="ident" id="4811162">state</span>&nbsp;<span class="op" id="4811168">*</span><span class="ident" id="4811169">encoderState</span><span class="op" id="4811181">,</span>&nbsp;<span class="ident" id="4811183">v</span>&nbsp;<span class="ident" id="4811185">reflect</span><span class="op" id="4811192">.</span><span class="ident" id="4811193">Value</span><span class="op" id="4811198">)</span>&nbsp;<span class="builtintype" id="4811200">bool</span>&nbsp;<span class="op" id="4811205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4811208">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811249">if</span>&nbsp;<span class="op" id="4811252">!</span><span class="ident" id="4811253">v</span><span class="op" id="4811254">.</span><span class="ident" id="4811255">CanAddr</span><span class="op" id="4811262">(</span><span class="op" id="4811263">)</span>&nbsp;<span class="op" id="4811265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811269">return</span>&nbsp;<span class="builtintype" id="4811276">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811283">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811286">return</span>&nbsp;<span class="ident" id="4811293">encUint32Slice</span><span class="op" id="4811307">(</span><span class="ident" id="4811308">state</span><span class="op" id="4811313">,</span>&nbsp;<span class="ident" id="4811315">v</span><span class="op" id="4811316">.</span><span class="ident" id="4811317">Slice</span><span class="op" id="4811322">(</span><span class="num" id="4811323">0</span><span class="op" id="4811324">,</span>&nbsp;<span class="ident" id="4811326">v</span><span class="op" id="4811327">.</span><span class="ident" id="4811328">Len</span><span class="op" id="4811331">(</span><span class="op" id="4811332">)</span><span class="op" id="4811333">)</span><span class="op" id="4811334">)</span><br>
<span class="lineno"></span><span class="op" id="4811336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4811339">func</span>&nbsp;<span class="ident" id="4811344">encUint32Slice</span><span class="op" id="4811358">(</span><span class="ident" id="4811359">state</span>&nbsp;<span class="op" id="4811365">*</span><span class="ident" id="4811366">encoderState</span><span class="op" id="4811378">,</span>&nbsp;<span class="ident" id="4811380">v</span>&nbsp;<span class="ident" id="4811382">reflect</span><span class="op" id="4811389">.</span><span class="ident" id="4811390">Value</span><span class="op" id="4811395">)</span>&nbsp;<span class="builtintype" id="4811397">bool</span>&nbsp;<span class="op" id="4811402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4811405">slice</span><span class="op" id="4811410">,</span>&nbsp;<span class="ident" id="4811412">ok</span>&nbsp;<span class="op" id="4811415">:=</span>&nbsp;<span class="ident" id="4811418">v</span><span class="op" id="4811419">.</span><span class="ident" id="4811420">Interface</span><span class="op" id="4811429">(</span><span class="op" id="4811430">)</span><span class="op" id="4811431">.</span><span class="op" id="4811432">(</span><span class="op" id="4811433">[</span><span class="op" id="4811434">]</span><span class="builtintype" id="4811435">uint32</span><span class="op" id="4811441">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811444">if</span>&nbsp;<span class="op" id="4811447">!</span><span class="ident" id="4811448">ok</span>&nbsp;<span class="op" id="4811451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4811455">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint32&nbsp;but&nbsp;not&nbsp;type&nbsp;uint32.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811534">return</span>&nbsp;<span class="builtintype" id="4811541">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811551">for</span>&nbsp;<span class="ident" id="4811555">_</span><span class="op" id="4811556">,</span>&nbsp;<span class="ident" id="4811558">x</span>&nbsp;<span class="op" id="4811560">:=</span>&nbsp;<span class="keyword" id="4811563">range</span>&nbsp;<span class="ident" id="4811569">slice</span>&nbsp;<span class="op" id="4811575">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811579">if</span>&nbsp;<span class="ident" id="4811582">x</span>&nbsp;<span class="op" id="4811584">!=</span>&nbsp;<span class="num" id="4811587">0</span>&nbsp;<span class="op" id="4811589">||</span>&nbsp;<span class="ident" id="4811592">state</span><span class="op" id="4811597">.</span><span class="ident" id="4811598">sendZero</span>&nbsp;<span class="op" id="4811607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4811612">state</span><span class="op" id="4811617">.</span><span class="ident" id="4811618">encodeUint</span><span class="op" id="4811628">(</span><span class="ident" id="4811629">uint64</span><span class="op" id="4811635">(</span><span class="ident" id="4811636">x</span><span class="op" id="4811637">)</span><span class="op" id="4811638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811648">return</span>&nbsp;<span class="builtintype" id="4811655">true</span><br>
<span class="lineno">370</span><span class="op" id="4811660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4811663">func</span>&nbsp;<span class="ident" id="4811668">encUint64Array</span><span class="op" id="4811682">(</span><span class="ident" id="4811683">state</span>&nbsp;<span class="op" id="4811689">*</span><span class="ident" id="4811690">encoderState</span><span class="op" id="4811702">,</span>&nbsp;<span class="ident" id="4811704">v</span>&nbsp;<span class="ident" id="4811706">reflect</span><span class="op" id="4811713">.</span><span class="ident" id="4811714">Value</span><span class="op" id="4811719">)</span>&nbsp;<span class="builtintype" id="4811721">bool</span>&nbsp;<span class="op" id="4811726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4811729">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811770">if</span>&nbsp;<span class="op" id="4811773">!</span><span class="ident" id="4811774">v</span><span class="op" id="4811775">.</span><span class="ident" id="4811776">CanAddr</span><span class="op" id="4811783">(</span><span class="op" id="4811784">)</span>&nbsp;<span class="op" id="4811786">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811790">return</span>&nbsp;<span class="builtintype" id="4811797">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4811804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811807">return</span>&nbsp;<span class="ident" id="4811814">encUint64Slice</span><span class="op" id="4811828">(</span><span class="ident" id="4811829">state</span><span class="op" id="4811834">,</span>&nbsp;<span class="ident" id="4811836">v</span><span class="op" id="4811837">.</span><span class="ident" id="4811838">Slice</span><span class="op" id="4811843">(</span><span class="num" id="4811844">0</span><span class="op" id="4811845">,</span>&nbsp;<span class="ident" id="4811847">v</span><span class="op" id="4811848">.</span><span class="ident" id="4811849">Len</span><span class="op" id="4811852">(</span><span class="op" id="4811853">)</span><span class="op" id="4811854">)</span><span class="op" id="4811855">)</span><br>
<span class="lineno"></span><span class="op" id="4811857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="4811860">func</span>&nbsp;<span class="ident" id="4811865">encUint64Slice</span><span class="op" id="4811879">(</span><span class="ident" id="4811880">state</span>&nbsp;<span class="op" id="4811886">*</span><span class="ident" id="4811887">encoderState</span><span class="op" id="4811899">,</span>&nbsp;<span class="ident" id="4811901">v</span>&nbsp;<span class="ident" id="4811903">reflect</span><span class="op" id="4811910">.</span><span class="ident" id="4811911">Value</span><span class="op" id="4811916">)</span>&nbsp;<span class="builtintype" id="4811918">bool</span>&nbsp;<span class="op" id="4811923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4811926">slice</span><span class="op" id="4811931">,</span>&nbsp;<span class="ident" id="4811933">ok</span>&nbsp;<span class="op" id="4811936">:=</span>&nbsp;<span class="ident" id="4811939">v</span><span class="op" id="4811940">.</span><span class="ident" id="4811941">Interface</span><span class="op" id="4811950">(</span><span class="op" id="4811951">)</span><span class="op" id="4811952">.</span><span class="op" id="4811953">(</span><span class="op" id="4811954">[</span><span class="op" id="4811955">]</span><span class="ident" id="4811956">uint64</span><span class="op" id="4811962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4811965">if</span>&nbsp;<span class="op" id="4811968">!</span><span class="ident" id="4811969">ok</span>&nbsp;<span class="op" id="4811972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4811976">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uint64&nbsp;but&nbsp;not&nbsp;type&nbsp;uint64.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812055">return</span>&nbsp;<span class="builtintype" id="4812062">false</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812072">for</span>&nbsp;<span class="ident" id="4812076">_</span><span class="op" id="4812077">,</span>&nbsp;<span class="ident" id="4812079">x</span>&nbsp;<span class="op" id="4812081">:=</span>&nbsp;<span class="keyword" id="4812084">range</span>&nbsp;<span class="ident" id="4812090">slice</span>&nbsp;<span class="op" id="4812096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812100">if</span>&nbsp;<span class="ident" id="4812103">x</span>&nbsp;<span class="op" id="4812105">!=</span>&nbsp;<span class="num" id="4812108">0</span>&nbsp;<span class="op" id="4812110">||</span>&nbsp;<span class="ident" id="4812113">state</span><span class="op" id="4812118">.</span><span class="ident" id="4812119">sendZero</span>&nbsp;<span class="op" id="4812128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812133">state</span><span class="op" id="4812138">.</span><span class="ident" id="4812139">encodeUint</span><span class="op" id="4812149">(</span><span class="ident" id="4812150">x</span><span class="op" id="4812151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812155">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812161">return</span>&nbsp;<span class="builtintype" id="4812168">true</span><br>
<span class="lineno"></span><span class="op" id="4812173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4812176">func</span>&nbsp;<span class="ident" id="4812181">encUintptrArray</span><span class="op" id="4812196">(</span><span class="ident" id="4812197">state</span>&nbsp;<span class="op" id="4812203">*</span><span class="ident" id="4812204">encoderState</span><span class="op" id="4812216">,</span>&nbsp;<span class="ident" id="4812218">v</span>&nbsp;<span class="ident" id="4812220">reflect</span><span class="op" id="4812227">.</span><span class="ident" id="4812228">Value</span><span class="op" id="4812233">)</span>&nbsp;<span class="builtintype" id="4812235">bool</span>&nbsp;<span class="op" id="4812240">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4812243">//&nbsp;Can&nbsp;only&nbsp;slice&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812284">if</span>&nbsp;<span class="op" id="4812287">!</span><span class="ident" id="4812288">v</span><span class="op" id="4812289">.</span><span class="ident" id="4812290">CanAddr</span><span class="op" id="4812297">(</span><span class="op" id="4812298">)</span>&nbsp;<span class="op" id="4812300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812304">return</span>&nbsp;<span class="builtintype" id="4812311">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812321">return</span>&nbsp;<span class="ident" id="4812328">encUintptrSlice</span><span class="op" id="4812343">(</span><span class="ident" id="4812344">state</span><span class="op" id="4812349">,</span>&nbsp;<span class="ident" id="4812351">v</span><span class="op" id="4812352">.</span><span class="ident" id="4812353">Slice</span><span class="op" id="4812358">(</span><span class="num" id="4812359">0</span><span class="op" id="4812360">,</span>&nbsp;<span class="ident" id="4812362">v</span><span class="op" id="4812363">.</span><span class="ident" id="4812364">Len</span><span class="op" id="4812367">(</span><span class="op" id="4812368">)</span><span class="op" id="4812369">)</span><span class="op" id="4812370">)</span><br>
<span class="lineno">400</span><span class="op" id="4812372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4812375">func</span>&nbsp;<span class="ident" id="4812380">encUintptrSlice</span><span class="op" id="4812395">(</span><span class="ident" id="4812396">state</span>&nbsp;<span class="op" id="4812402">*</span><span class="ident" id="4812403">encoderState</span><span class="op" id="4812415">,</span>&nbsp;<span class="ident" id="4812417">v</span>&nbsp;<span class="ident" id="4812419">reflect</span><span class="op" id="4812426">.</span><span class="ident" id="4812427">Value</span><span class="op" id="4812432">)</span>&nbsp;<span class="builtintype" id="4812434">bool</span>&nbsp;<span class="op" id="4812439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812442">slice</span><span class="op" id="4812447">,</span>&nbsp;<span class="ident" id="4812449">ok</span>&nbsp;<span class="op" id="4812452">:=</span>&nbsp;<span class="ident" id="4812455">v</span><span class="op" id="4812456">.</span><span class="ident" id="4812457">Interface</span><span class="op" id="4812466">(</span><span class="op" id="4812467">)</span><span class="op" id="4812468">.</span><span class="op" id="4812469">(</span><span class="op" id="4812470">[</span><span class="op" id="4812471">]</span><span class="builtintype" id="4812472">uintptr</span><span class="op" id="4812479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812482">if</span>&nbsp;<span class="op" id="4812485">!</span><span class="ident" id="4812486">ok</span>&nbsp;<span class="op" id="4812489">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4812493">//&nbsp;It&nbsp;is&nbsp;kind&nbsp;uintptr&nbsp;but&nbsp;not&nbsp;type&nbsp;uintptr.&nbsp;TODO:&nbsp;We&nbsp;can&nbsp;handle&nbsp;this&nbsp;unsafely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812574">return</span>&nbsp;<span class="builtintype" id="4812581">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812591">for</span>&nbsp;<span class="ident" id="4812595">_</span><span class="op" id="4812596">,</span>&nbsp;<span class="ident" id="4812598">x</span>&nbsp;<span class="op" id="4812600">:=</span>&nbsp;<span class="keyword" id="4812603">range</span>&nbsp;<span class="ident" id="4812609">slice</span>&nbsp;<span class="op" id="4812615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812619">if</span>&nbsp;<span class="ident" id="4812622">x</span>&nbsp;<span class="op" id="4812624">!=</span>&nbsp;<span class="num" id="4812627">0</span>&nbsp;<span class="op" id="4812629">||</span>&nbsp;<span class="ident" id="4812632">state</span><span class="op" id="4812637">.</span><span class="ident" id="4812638">sendZero</span>&nbsp;<span class="op" id="4812647">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4812652">state</span><span class="op" id="4812657">.</span><span class="ident" id="4812658">encodeUint</span><span class="op" id="4812668">(</span><span class="ident" id="4812669">uint64</span><span class="op" id="4812675">(</span><span class="ident" id="4812676">x</span><span class="op" id="4812677">)</span><span class="op" id="4812678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4812685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4812688">return</span>&nbsp;<span class="builtintype" id="4812695">true</span><br>
<span class="lineno"></span><span class="op" id="4812700">}</span>
</div>
</body>
</html>
