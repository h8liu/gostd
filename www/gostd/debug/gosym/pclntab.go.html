<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5455284">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5455340">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5455394">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5455445">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5455468">package</span>&nbsp;<span class="ident" id="5455476">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5455483">import</span>&nbsp;<span class="op" id="5455490">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5455493">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5455512">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5455519">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5455522">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="5455599">//</span><br>
<span class="lineno"></span><span class="comment" id="5455602">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="5455689">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="5455767">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5455845">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5455917">//</span><br>
<span class="lineno"></span><span class="comment" id="5455920">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="5456001">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="5456080">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5456133">//</span><br>
<span class="lineno"></span><span class="comment" id="5456136">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="5456211">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5456286">type</span>&nbsp;<span class="ident" id="5456291">LineTable</span>&nbsp;<span class="keyword" id="5456301">struct</span>&nbsp;<span class="op" id="5456308">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456311">Data</span>&nbsp;<span class="op" id="5456316">[</span><span class="op" id="5456317">]</span><span class="builtintype" id="5456318">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456324">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5456329">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456337">Line</span>&nbsp;<span class="builtintype" id="5456342">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5456348">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456365">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5456374">sync</span><span class="op" id="5456378">.</span><span class="ident" id="5456379">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456386">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5456395">int</span>&nbsp;<span class="comment" id="5456399">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456453">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5456462">binary</span><span class="op" id="5456468">.</span><span class="ident" id="5456469">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456480">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="5456489">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456497">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="5456506">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456514">functab</span>&nbsp;&nbsp;<span class="op" id="5456523">[</span><span class="op" id="5456524">]</span><span class="builtintype" id="5456525">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456531">nfunctab</span>&nbsp;<span class="builtintype" id="5456540">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456548">filetab</span>&nbsp;&nbsp;<span class="op" id="5456557">[</span><span class="op" id="5456558">]</span><span class="builtintype" id="5456559">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456565">nfiletab</span>&nbsp;<span class="builtintype" id="5456574">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5456582">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="5456591">map</span><span class="op" id="5456594">[</span><span class="builtintype" id="5456595">string</span><span class="op" id="5456601">]</span><span class="builtintype" id="5456602">uint32</span><br>
<span class="lineno">45</span><span class="op" id="5456609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5456612">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="5456683">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="5456748">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="5456822">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="5456833">const</span>&nbsp;<span class="ident" id="5456839">oldQuantum</span>&nbsp;<span class="op" id="5456850">=</span>&nbsp;<span class="num" id="5456852">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5456855">func</span>&nbsp;<span class="op" id="5456860">(</span><span class="ident" id="5456861">t</span>&nbsp;<span class="op" id="5456863">*</span><span class="ident" id="5456864">LineTable</span><span class="op" id="5456873">)</span>&nbsp;<span class="ident" id="5456875">parse</span><span class="op" id="5456880">(</span><span class="ident" id="5456881">targetPC</span>&nbsp;<span class="ident" id="5456890">uint64</span><span class="op" id="5456896">,</span>&nbsp;<span class="ident" id="5456898">targetLine</span>&nbsp;<span class="builtintype" id="5456909">int</span><span class="op" id="5456912">)</span>&nbsp;<span class="op" id="5456914">(</span><span class="ident" id="5456915">b</span>&nbsp;<span class="op" id="5456917">[</span><span class="op" id="5456918">]</span><span class="builtintype" id="5456919">byte</span><span class="op" id="5456923">,</span>&nbsp;<span class="ident" id="5456925">pc</span>&nbsp;<span class="ident" id="5456928">uint64</span><span class="op" id="5456934">,</span>&nbsp;<span class="ident" id="5456936">line</span>&nbsp;<span class="builtintype" id="5456941">int</span><span class="op" id="5456944">)</span>&nbsp;<span class="op" id="5456946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5456949">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457006">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457038">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457100">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457157">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457196">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457200">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457263">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457320">b</span><span class="op" id="5457321">,</span>&nbsp;<span class="ident" id="5457323">pc</span><span class="op" id="5457325">,</span>&nbsp;<span class="ident" id="5457327">line</span>&nbsp;<span class="op" id="5457332">=</span>&nbsp;<span class="ident" id="5457334">t</span><span class="op" id="5457335">.</span><span class="ident" id="5457336">Data</span><span class="op" id="5457340">,</span>&nbsp;<span class="ident" id="5457342">t</span><span class="op" id="5457343">.</span><span class="ident" id="5457344">PC</span><span class="op" id="5457346">,</span>&nbsp;<span class="ident" id="5457348">t</span><span class="op" id="5457349">.</span><span class="ident" id="5457350">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457356">for</span>&nbsp;<span class="ident" id="5457360">pc</span>&nbsp;<span class="op" id="5457363">&lt;=</span>&nbsp;<span class="ident" id="5457366">targetPC</span>&nbsp;<span class="op" id="5457375">&amp;&amp;</span>&nbsp;<span class="ident" id="5457378">line</span>&nbsp;<span class="op" id="5457383">!=</span>&nbsp;<span class="ident" id="5457386">targetLine</span>&nbsp;<span class="op" id="5457397">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5457400">len</span><span class="op" id="5457403">(</span><span class="ident" id="5457404">b</span><span class="op" id="5457405">)</span>&nbsp;<span class="op" id="5457407">&gt;</span>&nbsp;<span class="num" id="5457409">0</span>&nbsp;<span class="op" id="5457411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457415">code</span>&nbsp;<span class="op" id="5457420">:=</span>&nbsp;<span class="ident" id="5457423">b</span><span class="op" id="5457424">[</span><span class="num" id="5457425">0</span><span class="op" id="5457426">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457430">b</span>&nbsp;<span class="op" id="5457432">=</span>&nbsp;<span class="ident" id="5457434">b</span><span class="op" id="5457435">[</span><span class="num" id="5457436">1</span><span class="op" id="5457437">:</span><span class="op" id="5457438">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457442">switch</span>&nbsp;<span class="op" id="5457449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457453">case</span>&nbsp;<span class="ident" id="5457458">code</span>&nbsp;<span class="op" id="5457463">==</span>&nbsp;<span class="num" id="5457466">0</span><span class="op" id="5457467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457472">if</span>&nbsp;<span class="builtinfunc" id="5457475">len</span><span class="op" id="5457478">(</span><span class="ident" id="5457479">b</span><span class="op" id="5457480">)</span>&nbsp;<span class="op" id="5457482">&lt;</span>&nbsp;<span class="num" id="5457484">4</span>&nbsp;<span class="op" id="5457486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457492">b</span>&nbsp;<span class="op" id="5457494">=</span>&nbsp;<span class="ident" id="5457496">b</span><span class="op" id="5457497">[</span><span class="num" id="5457498">0</span><span class="op" id="5457499">:</span><span class="num" id="5457500">0</span><span class="op" id="5457501">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457507">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5457516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457521">val</span>&nbsp;<span class="op" id="5457525">:=</span>&nbsp;<span class="ident" id="5457528">binary</span><span class="op" id="5457534">.</span><span class="ident" id="5457535">BigEndian</span><span class="op" id="5457544">.</span><span class="ident" id="5457545">Uint32</span><span class="op" id="5457551">(</span><span class="ident" id="5457552">b</span><span class="op" id="5457553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457558">b</span>&nbsp;<span class="op" id="5457560">=</span>&nbsp;<span class="ident" id="5457562">b</span><span class="op" id="5457563">[</span><span class="num" id="5457564">4</span><span class="op" id="5457565">:</span><span class="op" id="5457566">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457571">line</span>&nbsp;<span class="op" id="5457576">+=</span>&nbsp;<span class="builtintype" id="5457579">int</span><span class="op" id="5457582">(</span><span class="ident" id="5457583">val</span><span class="op" id="5457586">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457590">case</span>&nbsp;<span class="ident" id="5457595">code</span>&nbsp;<span class="op" id="5457600">&lt;=</span>&nbsp;<span class="num" id="5457603">64</span><span class="op" id="5457605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457610">line</span>&nbsp;<span class="op" id="5457615">+=</span>&nbsp;<span class="builtintype" id="5457618">int</span><span class="op" id="5457621">(</span><span class="ident" id="5457622">code</span><span class="op" id="5457626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457630">case</span>&nbsp;<span class="ident" id="5457635">code</span>&nbsp;<span class="op" id="5457640">&lt;=</span>&nbsp;<span class="num" id="5457643">128</span><span class="op" id="5457646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457651">line</span>&nbsp;<span class="op" id="5457656">-=</span>&nbsp;<span class="builtintype" id="5457659">int</span><span class="op" id="5457662">(</span><span class="ident" id="5457663">code</span>&nbsp;<span class="op" id="5457668">-</span>&nbsp;<span class="num" id="5457670">64</span><span class="op" id="5457672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457676">default</span><span class="op" id="5457683">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457688">pc</span>&nbsp;<span class="op" id="5457691">+=</span>&nbsp;<span class="ident" id="5457694">oldQuantum</span>&nbsp;<span class="op" id="5457705">*</span>&nbsp;<span class="ident" id="5457707">uint64</span><span class="op" id="5457713">(</span><span class="ident" id="5457714">code</span><span class="op" id="5457718">-</span><span class="num" id="5457719">128</span><span class="op" id="5457722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457727">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5457738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457742">pc</span>&nbsp;<span class="op" id="5457745">+=</span>&nbsp;<span class="ident" id="5457748">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5457760">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457763">return</span>&nbsp;<span class="ident" id="5457770">b</span><span class="op" id="5457771">,</span>&nbsp;<span class="ident" id="5457773">pc</span><span class="op" id="5457775">,</span>&nbsp;<span class="ident" id="5457777">line</span><br>
<span class="lineno"></span><span class="op" id="5457782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5457785">func</span>&nbsp;<span class="op" id="5457790">(</span><span class="ident" id="5457791">t</span>&nbsp;<span class="op" id="5457793">*</span><span class="ident" id="5457794">LineTable</span><span class="op" id="5457803">)</span>&nbsp;<span class="ident" id="5457805">slice</span><span class="op" id="5457810">(</span><span class="ident" id="5457811">pc</span>&nbsp;<span class="ident" id="5457814">uint64</span><span class="op" id="5457820">)</span>&nbsp;<span class="op" id="5457822">*</span><span class="ident" id="5457823">LineTable</span>&nbsp;<span class="op" id="5457833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457836">data</span><span class="op" id="5457840">,</span>&nbsp;<span class="ident" id="5457842">pc</span><span class="op" id="5457844">,</span>&nbsp;<span class="ident" id="5457846">line</span>&nbsp;<span class="op" id="5457851">:=</span>&nbsp;<span class="ident" id="5457854">t</span><span class="op" id="5457855">.</span><span class="ident" id="5457856">parse</span><span class="op" id="5457861">(</span><span class="ident" id="5457862">pc</span><span class="op" id="5457864">,</span>&nbsp;<span class="op" id="5457866">-</span><span class="num" id="5457867">1</span><span class="op" id="5457868">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5457871">return</span>&nbsp;<span class="op" id="5457878">&amp;</span><span class="ident" id="5457879">LineTable</span><span class="op" id="5457888">{</span><span class="ident" id="5457889">Data</span><span class="op" id="5457893">:</span>&nbsp;<span class="ident" id="5457895">data</span><span class="op" id="5457899">,</span>&nbsp;<span class="ident" id="5457901">PC</span><span class="op" id="5457903">:</span>&nbsp;<span class="ident" id="5457905">pc</span><span class="op" id="5457907">,</span>&nbsp;<span class="ident" id="5457909">Line</span><span class="op" id="5457913">:</span>&nbsp;<span class="ident" id="5457915">line</span><span class="op" id="5457919">}</span><br>
<span class="lineno"></span><span class="op" id="5457921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5457924">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="5457991">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="5458046">func</span>&nbsp;<span class="op" id="5458051">(</span><span class="ident" id="5458052">t</span>&nbsp;<span class="op" id="5458054">*</span><span class="ident" id="5458055">LineTable</span><span class="op" id="5458064">)</span>&nbsp;<span class="ident" id="5458066">PCToLine</span><span class="op" id="5458074">(</span><span class="ident" id="5458075">pc</span>&nbsp;<span class="ident" id="5458078">uint64</span><span class="op" id="5458084">)</span>&nbsp;<span class="builtintype" id="5458086">int</span>&nbsp;<span class="op" id="5458090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458093">if</span>&nbsp;<span class="ident" id="5458096">t</span><span class="op" id="5458097">.</span><span class="ident" id="5458098">isGo12</span><span class="op" id="5458104">(</span><span class="op" id="5458105">)</span>&nbsp;<span class="op" id="5458107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458111">return</span>&nbsp;<span class="ident" id="5458118">t</span><span class="op" id="5458119">.</span><span class="ident" id="5458120">go12PCToLine</span><span class="op" id="5458132">(</span><span class="ident" id="5458133">pc</span><span class="op" id="5458135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5458138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458141">_</span><span class="op" id="5458142">,</span>&nbsp;<span class="ident" id="5458144">_</span><span class="op" id="5458145">,</span>&nbsp;<span class="ident" id="5458147">line</span>&nbsp;<span class="op" id="5458152">:=</span>&nbsp;<span class="ident" id="5458155">t</span><span class="op" id="5458156">.</span><span class="ident" id="5458157">parse</span><span class="op" id="5458162">(</span><span class="ident" id="5458163">pc</span><span class="op" id="5458165">,</span>&nbsp;<span class="op" id="5458167">-</span><span class="num" id="5458168">1</span><span class="op" id="5458169">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458172">return</span>&nbsp;<span class="ident" id="5458179">line</span><br>
<span class="lineno"></span><span class="op" id="5458184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5458187">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="5458254">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="5458305">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5458360">func</span>&nbsp;<span class="op" id="5458365">(</span><span class="ident" id="5458366">t</span>&nbsp;<span class="op" id="5458368">*</span><span class="ident" id="5458369">LineTable</span><span class="op" id="5458378">)</span>&nbsp;<span class="ident" id="5458380">LineToPC</span><span class="op" id="5458388">(</span><span class="ident" id="5458389">line</span>&nbsp;<span class="builtintype" id="5458394">int</span><span class="op" id="5458397">,</span>&nbsp;<span class="ident" id="5458399">maxpc</span>&nbsp;<span class="ident" id="5458405">uint64</span><span class="op" id="5458411">)</span>&nbsp;<span class="ident" id="5458413">uint64</span>&nbsp;<span class="op" id="5458420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458423">if</span>&nbsp;<span class="ident" id="5458426">t</span><span class="op" id="5458427">.</span><span class="ident" id="5458428">isGo12</span><span class="op" id="5458434">(</span><span class="op" id="5458435">)</span>&nbsp;<span class="op" id="5458437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458441">return</span>&nbsp;<span class="num" id="5458448">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5458451">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458454">_</span><span class="op" id="5458455">,</span>&nbsp;<span class="ident" id="5458457">pc</span><span class="op" id="5458459">,</span>&nbsp;<span class="ident" id="5458461">line1</span>&nbsp;<span class="op" id="5458467">:=</span>&nbsp;<span class="ident" id="5458470">t</span><span class="op" id="5458471">.</span><span class="ident" id="5458472">parse</span><span class="op" id="5458477">(</span><span class="ident" id="5458478">maxpc</span><span class="op" id="5458483">,</span>&nbsp;<span class="ident" id="5458485">line</span><span class="op" id="5458489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458492">if</span>&nbsp;<span class="ident" id="5458495">line1</span>&nbsp;<span class="op" id="5458501">!=</span>&nbsp;<span class="ident" id="5458504">line</span>&nbsp;<span class="op" id="5458509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458513">return</span>&nbsp;<span class="num" id="5458520">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5458523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5458526">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458590">return</span>&nbsp;<span class="ident" id="5458597">pc</span>&nbsp;<span class="op" id="5458600">-</span>&nbsp;<span class="ident" id="5458602">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="5458613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5458616">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="5458660">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="5458698">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5458739">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5458770">func</span>&nbsp;<span class="ident" id="5458775">NewLineTable</span><span class="op" id="5458787">(</span><span class="ident" id="5458788">data</span>&nbsp;<span class="op" id="5458793">[</span><span class="op" id="5458794">]</span><span class="builtintype" id="5458795">byte</span><span class="op" id="5458799">,</span>&nbsp;<span class="ident" id="5458801">text</span>&nbsp;<span class="ident" id="5458806">uint64</span><span class="op" id="5458812">)</span>&nbsp;<span class="op" id="5458814">*</span><span class="ident" id="5458815">LineTable</span>&nbsp;<span class="op" id="5458825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458828">return</span>&nbsp;<span class="op" id="5458835">&amp;</span><span class="ident" id="5458836">LineTable</span><span class="op" id="5458845">{</span><span class="ident" id="5458846">Data</span><span class="op" id="5458850">:</span>&nbsp;<span class="ident" id="5458852">data</span><span class="op" id="5458856">,</span>&nbsp;<span class="ident" id="5458858">PC</span><span class="op" id="5458860">:</span>&nbsp;<span class="ident" id="5458862">text</span><span class="op" id="5458866">,</span>&nbsp;<span class="ident" id="5458868">Line</span><span class="op" id="5458872">:</span>&nbsp;<span class="num" id="5458874">0</span><span class="op" id="5458875">}</span><br>
<span class="lineno"></span><span class="op" id="5458877">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5458880">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5458911">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="5458943">//</span><br>
<span class="lineno"></span><span class="comment" id="5458946">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="5459013">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5459081">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="5459155">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5459179">//</span><br>
<span class="lineno"></span><span class="comment" id="5459182">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="5459252">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5459298">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5459366">func</span>&nbsp;<span class="op" id="5459371">(</span><span class="ident" id="5459372">t</span>&nbsp;<span class="op" id="5459374">*</span><span class="ident" id="5459375">LineTable</span><span class="op" id="5459384">)</span>&nbsp;<span class="ident" id="5459386">isGo12</span><span class="op" id="5459392">(</span><span class="op" id="5459393">)</span>&nbsp;<span class="builtintype" id="5459395">bool</span>&nbsp;<span class="op" id="5459400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459403">t</span><span class="op" id="5459404">.</span><span class="ident" id="5459405">go12Init</span><span class="op" id="5459413">(</span><span class="op" id="5459414">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459417">return</span>&nbsp;<span class="ident" id="5459424">t</span><span class="op" id="5459425">.</span><span class="ident" id="5459426">go12</span>&nbsp;<span class="op" id="5459431">==</span>&nbsp;<span class="num" id="5459434">1</span><br>
<span class="lineno"></span><span class="op" id="5459436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5459439">const</span>&nbsp;<span class="ident" id="5459445">go12magic</span>&nbsp;<span class="op" id="5459455">=</span>&nbsp;<span class="num" id="5459457">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="5459469">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="5459526">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="5459583">func</span>&nbsp;<span class="op" id="5459588">(</span><span class="ident" id="5459589">t</span>&nbsp;<span class="op" id="5459591">*</span><span class="ident" id="5459592">LineTable</span><span class="op" id="5459601">)</span>&nbsp;<span class="builtintype" id="5459603">uintptr</span><span class="op" id="5459610">(</span><span class="ident" id="5459611">b</span>&nbsp;<span class="op" id="5459613">[</span><span class="op" id="5459614">]</span><span class="builtintype" id="5459615">byte</span><span class="op" id="5459619">)</span>&nbsp;<span class="ident" id="5459621">uint64</span>&nbsp;<span class="op" id="5459628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459631">if</span>&nbsp;<span class="ident" id="5459634">t</span><span class="op" id="5459635">.</span><span class="ident" id="5459636">ptrsize</span>&nbsp;<span class="op" id="5459644">==</span>&nbsp;<span class="num" id="5459647">4</span>&nbsp;<span class="op" id="5459649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459653">return</span>&nbsp;<span class="ident" id="5459660">uint64</span><span class="op" id="5459666">(</span><span class="ident" id="5459667">t</span><span class="op" id="5459668">.</span><span class="ident" id="5459669">binary</span><span class="op" id="5459675">.</span><span class="ident" id="5459676">Uint32</span><span class="op" id="5459682">(</span><span class="ident" id="5459683">b</span><span class="op" id="5459684">)</span><span class="op" id="5459685">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5459688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459691">return</span>&nbsp;<span class="ident" id="5459698">t</span><span class="op" id="5459699">.</span><span class="ident" id="5459700">binary</span><span class="op" id="5459706">.</span><span class="ident" id="5459707">Uint64</span><span class="op" id="5459713">(</span><span class="ident" id="5459714">b</span><span class="op" id="5459715">)</span><br>
<span class="lineno"></span><span class="op" id="5459717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5459720">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="5459795">func</span>&nbsp;<span class="op" id="5459800">(</span><span class="ident" id="5459801">t</span>&nbsp;<span class="op" id="5459803">*</span><span class="ident" id="5459804">LineTable</span><span class="op" id="5459813">)</span>&nbsp;<span class="ident" id="5459815">go12Init</span><span class="op" id="5459823">(</span><span class="op" id="5459824">)</span>&nbsp;<span class="op" id="5459826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459829">t</span><span class="op" id="5459830">.</span><span class="ident" id="5459831">mu</span><span class="op" id="5459833">.</span><span class="ident" id="5459834">Lock</span><span class="op" id="5459838">(</span><span class="op" id="5459839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459842">defer</span>&nbsp;<span class="ident" id="5459848">t</span><span class="op" id="5459849">.</span><span class="ident" id="5459850">mu</span><span class="op" id="5459852">.</span><span class="ident" id="5459853">Unlock</span><span class="op" id="5459859">(</span><span class="op" id="5459860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459863">if</span>&nbsp;<span class="ident" id="5459866">t</span><span class="op" id="5459867">.</span><span class="ident" id="5459868">go12</span>&nbsp;<span class="op" id="5459873">!=</span>&nbsp;<span class="num" id="5459876">0</span>&nbsp;<span class="op" id="5459878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459882">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5459890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459894">defer</span>&nbsp;<span class="keyword" id="5459900">func</span><span class="op" id="5459904">(</span><span class="op" id="5459905">)</span>&nbsp;<span class="op" id="5459907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5459911">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5459976">recover</span><span class="op" id="5459983">(</span><span class="op" id="5459984">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5459987">}</span><span class="op" id="5459988">(</span><span class="op" id="5459989">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5459993">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460062">t</span><span class="op" id="5460063">.</span><span class="ident" id="5460064">go12</span>&nbsp;<span class="op" id="5460069">=</span>&nbsp;<span class="op" id="5460071">-</span><span class="num" id="5460072">1</span>&nbsp;<span class="comment" id="5460074">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460112">if</span>&nbsp;<span class="builtinfunc" id="5460115">len</span><span class="op" id="5460118">(</span><span class="ident" id="5460119">t</span><span class="op" id="5460120">.</span><span class="ident" id="5460121">Data</span><span class="op" id="5460125">)</span>&nbsp;<span class="op" id="5460127">&lt;</span>&nbsp;<span class="num" id="5460129">16</span>&nbsp;<span class="op" id="5460132">||</span>&nbsp;<span class="ident" id="5460135">t</span><span class="op" id="5460136">.</span><span class="ident" id="5460137">Data</span><span class="op" id="5460141">[</span><span class="num" id="5460142">4</span><span class="op" id="5460143">]</span>&nbsp;<span class="op" id="5460145">!=</span>&nbsp;<span class="num" id="5460148">0</span>&nbsp;<span class="op" id="5460150">||</span>&nbsp;<span class="ident" id="5460153">t</span><span class="op" id="5460154">.</span><span class="ident" id="5460155">Data</span><span class="op" id="5460159">[</span><span class="num" id="5460160">5</span><span class="op" id="5460161">]</span>&nbsp;<span class="op" id="5460163">!=</span>&nbsp;<span class="num" id="5460166">0</span>&nbsp;<span class="op" id="5460168">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460173">(</span><span class="ident" id="5460174">t</span><span class="op" id="5460175">.</span><span class="ident" id="5460176">Data</span><span class="op" id="5460180">[</span><span class="num" id="5460181">6</span><span class="op" id="5460182">]</span>&nbsp;<span class="op" id="5460184">!=</span>&nbsp;<span class="num" id="5460187">1</span>&nbsp;<span class="op" id="5460189">&amp;&amp;</span>&nbsp;<span class="ident" id="5460192">t</span><span class="op" id="5460193">.</span><span class="ident" id="5460194">Data</span><span class="op" id="5460198">[</span><span class="num" id="5460199">6</span><span class="op" id="5460200">]</span>&nbsp;<span class="op" id="5460202">!=</span>&nbsp;<span class="num" id="5460205">4</span><span class="op" id="5460206">)</span>&nbsp;<span class="op" id="5460208">||</span>&nbsp;<span class="comment" id="5460211">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460227">(</span><span class="ident" id="5460228">t</span><span class="op" id="5460229">.</span><span class="ident" id="5460230">Data</span><span class="op" id="5460234">[</span><span class="num" id="5460235">7</span><span class="op" id="5460236">]</span>&nbsp;<span class="op" id="5460238">!=</span>&nbsp;<span class="num" id="5460241">4</span>&nbsp;<span class="op" id="5460243">&amp;&amp;</span>&nbsp;<span class="ident" id="5460246">t</span><span class="op" id="5460247">.</span><span class="ident" id="5460248">Data</span><span class="op" id="5460252">[</span><span class="num" id="5460253">7</span><span class="op" id="5460254">]</span>&nbsp;<span class="op" id="5460256">!=</span>&nbsp;<span class="num" id="5460259">8</span><span class="op" id="5460260">)</span>&nbsp;<span class="op" id="5460262">{</span>&nbsp;<span class="comment" id="5460264">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460282">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460294">switch</span>&nbsp;<span class="builtintype" id="5460301">uint32</span><span class="op" id="5460307">(</span><span class="ident" id="5460308">go12magic</span><span class="op" id="5460317">)</span>&nbsp;<span class="op" id="5460319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460322">case</span>&nbsp;<span class="ident" id="5460327">binary</span><span class="op" id="5460333">.</span><span class="ident" id="5460334">LittleEndian</span><span class="op" id="5460346">.</span><span class="ident" id="5460347">Uint32</span><span class="op" id="5460353">(</span><span class="ident" id="5460354">t</span><span class="op" id="5460355">.</span><span class="ident" id="5460356">Data</span><span class="op" id="5460360">)</span><span class="op" id="5460361">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460365">t</span><span class="op" id="5460366">.</span><span class="ident" id="5460367">binary</span>&nbsp;<span class="op" id="5460374">=</span>&nbsp;<span class="ident" id="5460376">binary</span><span class="op" id="5460382">.</span><span class="ident" id="5460383">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460397">case</span>&nbsp;<span class="ident" id="5460402">binary</span><span class="op" id="5460408">.</span><span class="ident" id="5460409">BigEndian</span><span class="op" id="5460418">.</span><span class="ident" id="5460419">Uint32</span><span class="op" id="5460425">(</span><span class="ident" id="5460426">t</span><span class="op" id="5460427">.</span><span class="ident" id="5460428">Data</span><span class="op" id="5460432">)</span><span class="op" id="5460433">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460437">t</span><span class="op" id="5460438">.</span><span class="ident" id="5460439">binary</span>&nbsp;<span class="op" id="5460446">=</span>&nbsp;<span class="ident" id="5460448">binary</span><span class="op" id="5460454">.</span><span class="ident" id="5460455">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460466">default</span><span class="op" id="5460473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460477">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460489">t</span><span class="op" id="5460490">.</span><span class="ident" id="5460491">quantum</span>&nbsp;<span class="op" id="5460499">=</span>&nbsp;<span class="builtintype" id="5460501">uint32</span><span class="op" id="5460507">(</span><span class="ident" id="5460508">t</span><span class="op" id="5460509">.</span><span class="ident" id="5460510">Data</span><span class="op" id="5460514">[</span><span class="num" id="5460515">6</span><span class="op" id="5460516">]</span><span class="op" id="5460517">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460520">t</span><span class="op" id="5460521">.</span><span class="ident" id="5460522">ptrsize</span>&nbsp;<span class="op" id="5460530">=</span>&nbsp;<span class="builtintype" id="5460532">uint32</span><span class="op" id="5460538">(</span><span class="ident" id="5460539">t</span><span class="op" id="5460540">.</span><span class="ident" id="5460541">Data</span><span class="op" id="5460545">[</span><span class="num" id="5460546">7</span><span class="op" id="5460547">]</span><span class="op" id="5460548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460552">t</span><span class="op" id="5460553">.</span><span class="ident" id="5460554">nfunctab</span>&nbsp;<span class="op" id="5460563">=</span>&nbsp;<span class="builtintype" id="5460565">uint32</span><span class="op" id="5460571">(</span><span class="ident" id="5460572">t</span><span class="op" id="5460573">.</span><span class="builtintype" id="5460574">uintptr</span><span class="op" id="5460581">(</span><span class="ident" id="5460582">t</span><span class="op" id="5460583">.</span><span class="ident" id="5460584">Data</span><span class="op" id="5460588">[</span><span class="num" id="5460589">8</span><span class="op" id="5460590">:</span><span class="op" id="5460591">]</span><span class="op" id="5460592">)</span><span class="op" id="5460593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460596">t</span><span class="op" id="5460597">.</span><span class="ident" id="5460598">functab</span>&nbsp;<span class="op" id="5460606">=</span>&nbsp;<span class="ident" id="5460608">t</span><span class="op" id="5460609">.</span><span class="ident" id="5460610">Data</span><span class="op" id="5460614">[</span><span class="num" id="5460615">8</span><span class="op" id="5460616">+</span><span class="ident" id="5460617">t</span><span class="op" id="5460618">.</span><span class="ident" id="5460619">ptrsize</span><span class="op" id="5460626">:</span><span class="op" id="5460627">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460630">functabsize</span>&nbsp;<span class="op" id="5460642">:=</span>&nbsp;<span class="ident" id="5460645">t</span><span class="op" id="5460646">.</span><span class="ident" id="5460647">nfunctab</span><span class="op" id="5460655">*</span><span class="num" id="5460656">2</span><span class="op" id="5460657">*</span><span class="ident" id="5460658">t</span><span class="op" id="5460659">.</span><span class="ident" id="5460660">ptrsize</span>&nbsp;<span class="op" id="5460668">+</span>&nbsp;<span class="ident" id="5460670">t</span><span class="op" id="5460671">.</span><span class="ident" id="5460672">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460681">fileoff</span>&nbsp;<span class="op" id="5460689">:=</span>&nbsp;<span class="ident" id="5460692">t</span><span class="op" id="5460693">.</span><span class="ident" id="5460694">binary</span><span class="op" id="5460700">.</span><span class="ident" id="5460701">Uint32</span><span class="op" id="5460707">(</span><span class="ident" id="5460708">t</span><span class="op" id="5460709">.</span><span class="ident" id="5460710">functab</span><span class="op" id="5460717">[</span><span class="ident" id="5460718">functabsize</span><span class="op" id="5460729">:</span><span class="op" id="5460730">]</span><span class="op" id="5460731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460734">t</span><span class="op" id="5460735">.</span><span class="ident" id="5460736">functab</span>&nbsp;<span class="op" id="5460744">=</span>&nbsp;<span class="ident" id="5460746">t</span><span class="op" id="5460747">.</span><span class="ident" id="5460748">functab</span><span class="op" id="5460755">[</span><span class="op" id="5460756">:</span><span class="ident" id="5460757">functabsize</span><span class="op" id="5460768">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460771">t</span><span class="op" id="5460772">.</span><span class="ident" id="5460773">filetab</span>&nbsp;<span class="op" id="5460781">=</span>&nbsp;<span class="ident" id="5460783">t</span><span class="op" id="5460784">.</span><span class="ident" id="5460785">Data</span><span class="op" id="5460789">[</span><span class="ident" id="5460790">fileoff</span><span class="op" id="5460797">:</span><span class="op" id="5460798">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460801">t</span><span class="op" id="5460802">.</span><span class="ident" id="5460803">nfiletab</span>&nbsp;<span class="op" id="5460812">=</span>&nbsp;<span class="ident" id="5460814">t</span><span class="op" id="5460815">.</span><span class="ident" id="5460816">binary</span><span class="op" id="5460822">.</span><span class="ident" id="5460823">Uint32</span><span class="op" id="5460829">(</span><span class="ident" id="5460830">t</span><span class="op" id="5460831">.</span><span class="ident" id="5460832">filetab</span><span class="op" id="5460839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460842">t</span><span class="op" id="5460843">.</span><span class="ident" id="5460844">filetab</span>&nbsp;<span class="op" id="5460852">=</span>&nbsp;<span class="ident" id="5460854">t</span><span class="op" id="5460855">.</span><span class="ident" id="5460856">filetab</span><span class="op" id="5460863">[</span><span class="op" id="5460864">:</span><span class="ident" id="5460865">t</span><span class="op" id="5460866">.</span><span class="ident" id="5460867">nfiletab</span><span class="op" id="5460875">*</span><span class="num" id="5460876">4</span><span class="op" id="5460877">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460881">t</span><span class="op" id="5460882">.</span><span class="ident" id="5460883">go12</span>&nbsp;<span class="op" id="5460888">=</span>&nbsp;<span class="num" id="5460890">1</span>&nbsp;<span class="comment" id="5460892">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="5460910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5460913">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="5460987">func</span>&nbsp;<span class="op" id="5460992">(</span><span class="ident" id="5460993">t</span>&nbsp;<span class="op" id="5460995">*</span><span class="ident" id="5460996">LineTable</span><span class="op" id="5461005">)</span>&nbsp;<span class="ident" id="5461007">go12Funcs</span><span class="op" id="5461016">(</span><span class="op" id="5461017">)</span>&nbsp;<span class="op" id="5461019">[</span><span class="op" id="5461020">]</span><span class="ident" id="5461021">Func</span>&nbsp;<span class="op" id="5461026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5461029">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461081">defer</span>&nbsp;<span class="keyword" id="5461087">func</span><span class="op" id="5461091">(</span><span class="op" id="5461092">)</span>&nbsp;<span class="op" id="5461094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5461098">recover</span><span class="op" id="5461105">(</span><span class="op" id="5461106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461109">}</span><span class="op" id="5461110">(</span><span class="op" id="5461111">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461115">n</span>&nbsp;<span class="op" id="5461117">:=</span>&nbsp;<span class="builtinfunc" id="5461120">len</span><span class="op" id="5461123">(</span><span class="ident" id="5461124">t</span><span class="op" id="5461125">.</span><span class="ident" id="5461126">functab</span><span class="op" id="5461133">)</span>&nbsp;<span class="op" id="5461135">/</span>&nbsp;<span class="builtintype" id="5461137">int</span><span class="op" id="5461140">(</span><span class="ident" id="5461141">t</span><span class="op" id="5461142">.</span><span class="ident" id="5461143">ptrsize</span><span class="op" id="5461150">)</span>&nbsp;<span class="op" id="5461152">/</span>&nbsp;<span class="num" id="5461154">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461157">funcs</span>&nbsp;<span class="op" id="5461163">:=</span>&nbsp;<span class="builtinfunc" id="5461166">make</span><span class="op" id="5461170">(</span><span class="op" id="5461171">[</span><span class="op" id="5461172">]</span><span class="ident" id="5461173">Func</span><span class="op" id="5461177">,</span>&nbsp;<span class="ident" id="5461179">n</span><span class="op" id="5461180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461183">for</span>&nbsp;<span class="ident" id="5461187">i</span>&nbsp;<span class="op" id="5461189">:=</span>&nbsp;<span class="keyword" id="5461192">range</span>&nbsp;<span class="ident" id="5461198">funcs</span>&nbsp;<span class="op" id="5461204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461208">f</span>&nbsp;<span class="op" id="5461210">:=</span>&nbsp;<span class="op" id="5461213">&amp;</span><span class="ident" id="5461214">funcs</span><span class="op" id="5461219">[</span><span class="ident" id="5461220">i</span><span class="op" id="5461221">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461225">f</span><span class="op" id="5461226">.</span><span class="ident" id="5461227">Entry</span>&nbsp;<span class="op" id="5461233">=</span>&nbsp;<span class="ident" id="5461235">uint64</span><span class="op" id="5461241">(</span><span class="ident" id="5461242">t</span><span class="op" id="5461243">.</span><span class="builtintype" id="5461244">uintptr</span><span class="op" id="5461251">(</span><span class="ident" id="5461252">t</span><span class="op" id="5461253">.</span><span class="ident" id="5461254">functab</span><span class="op" id="5461261">[</span><span class="num" id="5461262">2</span><span class="op" id="5461263">*</span><span class="ident" id="5461264">i</span><span class="op" id="5461265">*</span><span class="builtintype" id="5461266">int</span><span class="op" id="5461269">(</span><span class="ident" id="5461270">t</span><span class="op" id="5461271">.</span><span class="ident" id="5461272">ptrsize</span><span class="op" id="5461279">)</span><span class="op" id="5461280">:</span><span class="op" id="5461281">]</span><span class="op" id="5461282">)</span><span class="op" id="5461283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461287">f</span><span class="op" id="5461288">.</span><span class="ident" id="5461289">End</span>&nbsp;<span class="op" id="5461293">=</span>&nbsp;<span class="ident" id="5461295">uint64</span><span class="op" id="5461301">(</span><span class="ident" id="5461302">t</span><span class="op" id="5461303">.</span><span class="builtintype" id="5461304">uintptr</span><span class="op" id="5461311">(</span><span class="ident" id="5461312">t</span><span class="op" id="5461313">.</span><span class="ident" id="5461314">functab</span><span class="op" id="5461321">[</span><span class="op" id="5461322">(</span><span class="num" id="5461323">2</span><span class="op" id="5461324">*</span><span class="ident" id="5461325">i</span><span class="op" id="5461326">+</span><span class="num" id="5461327">2</span><span class="op" id="5461328">)</span><span class="op" id="5461329">*</span><span class="builtintype" id="5461330">int</span><span class="op" id="5461333">(</span><span class="ident" id="5461334">t</span><span class="op" id="5461335">.</span><span class="ident" id="5461336">ptrsize</span><span class="op" id="5461343">)</span><span class="op" id="5461344">:</span><span class="op" id="5461345">]</span><span class="op" id="5461346">)</span><span class="op" id="5461347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461351">info</span>&nbsp;<span class="op" id="5461356">:=</span>&nbsp;<span class="ident" id="5461359">t</span><span class="op" id="5461360">.</span><span class="ident" id="5461361">Data</span><span class="op" id="5461365">[</span><span class="ident" id="5461366">t</span><span class="op" id="5461367">.</span><span class="builtintype" id="5461368">uintptr</span><span class="op" id="5461375">(</span><span class="ident" id="5461376">t</span><span class="op" id="5461377">.</span><span class="ident" id="5461378">functab</span><span class="op" id="5461385">[</span><span class="op" id="5461386">(</span><span class="num" id="5461387">2</span><span class="op" id="5461388">*</span><span class="ident" id="5461389">i</span><span class="op" id="5461390">+</span><span class="num" id="5461391">1</span><span class="op" id="5461392">)</span><span class="op" id="5461393">*</span><span class="builtintype" id="5461394">int</span><span class="op" id="5461397">(</span><span class="ident" id="5461398">t</span><span class="op" id="5461399">.</span><span class="ident" id="5461400">ptrsize</span><span class="op" id="5461407">)</span><span class="op" id="5461408">:</span><span class="op" id="5461409">]</span><span class="op" id="5461410">)</span><span class="op" id="5461411">:</span><span class="op" id="5461412">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461416">f</span><span class="op" id="5461417">.</span><span class="ident" id="5461418">LineTable</span>&nbsp;<span class="op" id="5461428">=</span>&nbsp;<span class="ident" id="5461430">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461434">f</span><span class="op" id="5461435">.</span><span class="ident" id="5461436">FrameSize</span>&nbsp;<span class="op" id="5461446">=</span>&nbsp;<span class="builtintype" id="5461448">int</span><span class="op" id="5461451">(</span><span class="ident" id="5461452">t</span><span class="op" id="5461453">.</span><span class="ident" id="5461454">binary</span><span class="op" id="5461460">.</span><span class="ident" id="5461461">Uint32</span><span class="op" id="5461467">(</span><span class="ident" id="5461468">info</span><span class="op" id="5461472">[</span><span class="ident" id="5461473">t</span><span class="op" id="5461474">.</span><span class="ident" id="5461475">ptrsize</span><span class="op" id="5461482">+</span><span class="num" id="5461483">2</span><span class="op" id="5461484">*</span><span class="num" id="5461485">4</span><span class="op" id="5461486">:</span><span class="op" id="5461487">]</span><span class="op" id="5461488">)</span><span class="op" id="5461489">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461493">f</span><span class="op" id="5461494">.</span><span class="ident" id="5461495">Sym</span>&nbsp;<span class="op" id="5461499">=</span>&nbsp;<span class="op" id="5461501">&amp;</span><span class="ident" id="5461502">Sym</span><span class="op" id="5461505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461510">Value</span><span class="op" id="5461515">:</span>&nbsp;&nbsp;<span class="ident" id="5461518">f</span><span class="op" id="5461519">.</span><span class="ident" id="5461520">Entry</span><span class="op" id="5461525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461530">Type</span><span class="op" id="5461534">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5461538">&#39;T&#39;</span><span class="op" id="5461541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461546">Name</span><span class="op" id="5461550">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5461554">t</span><span class="op" id="5461555">.</span><span class="builtintype" id="5461556">string</span><span class="op" id="5461562">(</span><span class="ident" id="5461563">t</span><span class="op" id="5461564">.</span><span class="ident" id="5461565">binary</span><span class="op" id="5461571">.</span><span class="ident" id="5461572">Uint32</span><span class="op" id="5461578">(</span><span class="ident" id="5461579">info</span><span class="op" id="5461583">[</span><span class="ident" id="5461584">t</span><span class="op" id="5461585">.</span><span class="ident" id="5461586">ptrsize</span><span class="op" id="5461593">:</span><span class="op" id="5461594">]</span><span class="op" id="5461595">)</span><span class="op" id="5461596">)</span><span class="op" id="5461597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461602">GoType</span><span class="op" id="5461608">:</span>&nbsp;<span class="num" id="5461610">0</span><span class="op" id="5461611">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461616">Func</span><span class="op" id="5461620">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5461624">f</span><span class="op" id="5461625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461635">return</span>&nbsp;<span class="ident" id="5461642">funcs</span><br>
<span class="lineno"></span><span class="op" id="5461648">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5461651">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="5461724">func</span>&nbsp;<span class="op" id="5461729">(</span><span class="ident" id="5461730">t</span>&nbsp;<span class="op" id="5461732">*</span><span class="ident" id="5461733">LineTable</span><span class="op" id="5461742">)</span>&nbsp;<span class="ident" id="5461744">findFunc</span><span class="op" id="5461752">(</span><span class="ident" id="5461753">pc</span>&nbsp;<span class="ident" id="5461756">uint64</span><span class="op" id="5461762">)</span>&nbsp;<span class="op" id="5461764">[</span><span class="op" id="5461765">]</span><span class="builtintype" id="5461766">byte</span>&nbsp;<span class="op" id="5461771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461774">if</span>&nbsp;<span class="ident" id="5461777">pc</span>&nbsp;<span class="op" id="5461780">&lt;</span>&nbsp;<span class="ident" id="5461782">t</span><span class="op" id="5461783">.</span><span class="builtintype" id="5461784">uintptr</span><span class="op" id="5461791">(</span><span class="ident" id="5461792">t</span><span class="op" id="5461793">.</span><span class="ident" id="5461794">functab</span><span class="op" id="5461801">)</span>&nbsp;<span class="op" id="5461803">||</span>&nbsp;<span class="ident" id="5461806">pc</span>&nbsp;<span class="op" id="5461809">&gt;=</span>&nbsp;<span class="ident" id="5461812">t</span><span class="op" id="5461813">.</span><span class="builtintype" id="5461814">uintptr</span><span class="op" id="5461821">(</span><span class="ident" id="5461822">t</span><span class="op" id="5461823">.</span><span class="ident" id="5461824">functab</span><span class="op" id="5461831">[</span><span class="builtinfunc" id="5461832">len</span><span class="op" id="5461835">(</span><span class="ident" id="5461836">t</span><span class="op" id="5461837">.</span><span class="ident" id="5461838">functab</span><span class="op" id="5461845">)</span><span class="op" id="5461846">-</span><span class="builtintype" id="5461847">int</span><span class="op" id="5461850">(</span><span class="ident" id="5461851">t</span><span class="op" id="5461852">.</span><span class="ident" id="5461853">ptrsize</span><span class="op" id="5461860">)</span><span class="op" id="5461861">:</span><span class="op" id="5461862">]</span><span class="op" id="5461863">)</span>&nbsp;<span class="op" id="5461865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461869">return</span>&nbsp;<span class="ident" id="5461876">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5461885">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5461944">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462009">f</span>&nbsp;<span class="op" id="5462011">:=</span>&nbsp;<span class="ident" id="5462014">t</span><span class="op" id="5462015">.</span><span class="ident" id="5462016">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462025">nf</span>&nbsp;<span class="op" id="5462028">:=</span>&nbsp;<span class="ident" id="5462031">t</span><span class="op" id="5462032">.</span><span class="ident" id="5462033">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462043">for</span>&nbsp;<span class="ident" id="5462047">nf</span>&nbsp;<span class="op" id="5462050">&gt;</span>&nbsp;<span class="num" id="5462052">0</span>&nbsp;<span class="op" id="5462054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462058">m</span>&nbsp;<span class="op" id="5462060">:=</span>&nbsp;<span class="ident" id="5462063">nf</span>&nbsp;<span class="op" id="5462066">/</span>&nbsp;<span class="num" id="5462068">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462072">fm</span>&nbsp;<span class="op" id="5462075">:=</span>&nbsp;<span class="ident" id="5462078">f</span><span class="op" id="5462079">[</span><span class="num" id="5462080">2</span><span class="op" id="5462081">*</span><span class="ident" id="5462082">t</span><span class="op" id="5462083">.</span><span class="ident" id="5462084">ptrsize</span><span class="op" id="5462091">*</span><span class="ident" id="5462092">m</span><span class="op" id="5462093">:</span><span class="op" id="5462094">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462098">if</span>&nbsp;<span class="ident" id="5462101">t</span><span class="op" id="5462102">.</span><span class="builtintype" id="5462103">uintptr</span><span class="op" id="5462110">(</span><span class="ident" id="5462111">fm</span><span class="op" id="5462113">)</span>&nbsp;<span class="op" id="5462115">&lt;=</span>&nbsp;<span class="ident" id="5462118">pc</span>&nbsp;<span class="op" id="5462121">&amp;&amp;</span>&nbsp;<span class="ident" id="5462124">pc</span>&nbsp;<span class="op" id="5462127">&lt;</span>&nbsp;<span class="ident" id="5462129">t</span><span class="op" id="5462130">.</span><span class="builtintype" id="5462131">uintptr</span><span class="op" id="5462138">(</span><span class="ident" id="5462139">fm</span><span class="op" id="5462141">[</span><span class="num" id="5462142">2</span><span class="op" id="5462143">*</span><span class="ident" id="5462144">t</span><span class="op" id="5462145">.</span><span class="ident" id="5462146">ptrsize</span><span class="op" id="5462153">:</span><span class="op" id="5462154">]</span><span class="op" id="5462155">)</span>&nbsp;<span class="op" id="5462157">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462162">return</span>&nbsp;<span class="ident" id="5462169">t</span><span class="op" id="5462170">.</span><span class="ident" id="5462171">Data</span><span class="op" id="5462175">[</span><span class="ident" id="5462176">t</span><span class="op" id="5462177">.</span><span class="builtintype" id="5462178">uintptr</span><span class="op" id="5462185">(</span><span class="ident" id="5462186">fm</span><span class="op" id="5462188">[</span><span class="ident" id="5462189">t</span><span class="op" id="5462190">.</span><span class="ident" id="5462191">ptrsize</span><span class="op" id="5462198">:</span><span class="op" id="5462199">]</span><span class="op" id="5462200">)</span><span class="op" id="5462201">:</span><span class="op" id="5462202">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462206">}</span>&nbsp;<span class="keyword" id="5462208">else</span>&nbsp;<span class="keyword" id="5462213">if</span>&nbsp;<span class="ident" id="5462216">pc</span>&nbsp;<span class="op" id="5462219">&lt;</span>&nbsp;<span class="ident" id="5462221">t</span><span class="op" id="5462222">.</span><span class="builtintype" id="5462223">uintptr</span><span class="op" id="5462230">(</span><span class="ident" id="5462231">fm</span><span class="op" id="5462233">)</span>&nbsp;<span class="op" id="5462235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462240">nf</span>&nbsp;<span class="op" id="5462243">=</span>&nbsp;<span class="ident" id="5462245">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462249">}</span>&nbsp;<span class="keyword" id="5462251">else</span>&nbsp;<span class="op" id="5462256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462261">f</span>&nbsp;<span class="op" id="5462263">=</span>&nbsp;<span class="ident" id="5462265">f</span><span class="op" id="5462266">[</span><span class="op" id="5462267">(</span><span class="ident" id="5462268">m</span><span class="op" id="5462269">+</span><span class="num" id="5462270">1</span><span class="op" id="5462271">)</span><span class="op" id="5462272">*</span><span class="num" id="5462273">2</span><span class="op" id="5462274">*</span><span class="ident" id="5462275">t</span><span class="op" id="5462276">.</span><span class="ident" id="5462277">ptrsize</span><span class="op" id="5462284">:</span><span class="op" id="5462285">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462290">nf</span>&nbsp;<span class="op" id="5462293">-=</span>&nbsp;<span class="ident" id="5462296">m</span>&nbsp;<span class="op" id="5462298">+</span>&nbsp;<span class="num" id="5462300">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462310">return</span>&nbsp;<span class="ident" id="5462317">nil</span><br>
<span class="lineno"></span><span class="op" id="5462321">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5462324">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="5462385">func</span>&nbsp;<span class="op" id="5462390">(</span><span class="ident" id="5462391">t</span>&nbsp;<span class="op" id="5462393">*</span><span class="ident" id="5462394">LineTable</span><span class="op" id="5462403">)</span>&nbsp;<span class="ident" id="5462405">readvarint</span><span class="op" id="5462415">(</span><span class="ident" id="5462416">pp</span>&nbsp;<span class="op" id="5462419">*</span><span class="op" id="5462420">[</span><span class="op" id="5462421">]</span><span class="builtintype" id="5462422">byte</span><span class="op" id="5462426">)</span>&nbsp;<span class="builtintype" id="5462428">uint32</span>&nbsp;<span class="op" id="5462435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462438">var</span>&nbsp;<span class="ident" id="5462442">v</span><span class="op" id="5462443">,</span>&nbsp;<span class="ident" id="5462445">shift</span>&nbsp;<span class="builtintype" id="5462451">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462459">p</span>&nbsp;<span class="op" id="5462461">:=</span>&nbsp;<span class="op" id="5462464">*</span><span class="ident" id="5462465">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462469">for</span>&nbsp;<span class="ident" id="5462473">shift</span>&nbsp;<span class="op" id="5462479">=</span>&nbsp;<span class="num" id="5462481">0</span><span class="op" id="5462482">;</span>&nbsp;<span class="op" id="5462484">;</span>&nbsp;<span class="ident" id="5462486">shift</span>&nbsp;<span class="op" id="5462492">+=</span>&nbsp;<span class="num" id="5462495">7</span>&nbsp;<span class="op" id="5462497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462501">b</span>&nbsp;<span class="op" id="5462503">:=</span>&nbsp;<span class="ident" id="5462506">p</span><span class="op" id="5462507">[</span><span class="num" id="5462508">0</span><span class="op" id="5462509">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462513">p</span>&nbsp;<span class="op" id="5462515">=</span>&nbsp;<span class="ident" id="5462517">p</span><span class="op" id="5462518">[</span><span class="num" id="5462519">1</span><span class="op" id="5462520">:</span><span class="op" id="5462521">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462525">v</span>&nbsp;<span class="op" id="5462527">|=</span>&nbsp;<span class="op" id="5462530">(</span><span class="builtintype" id="5462531">uint32</span><span class="op" id="5462537">(</span><span class="ident" id="5462538">b</span><span class="op" id="5462539">)</span>&nbsp;<span class="op" id="5462541">&amp;</span>&nbsp;<span class="num" id="5462543">0x7F</span><span class="op" id="5462547">)</span>&nbsp;<span class="op" id="5462549">&lt;&lt;</span>&nbsp;<span class="ident" id="5462552">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462560">if</span>&nbsp;<span class="ident" id="5462563">b</span><span class="op" id="5462564">&amp;</span><span class="num" id="5462565">0x80</span>&nbsp;<span class="op" id="5462570">==</span>&nbsp;<span class="num" id="5462573">0</span>&nbsp;<span class="op" id="5462575">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462580">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462594">*</span><span class="ident" id="5462595">pp</span>&nbsp;<span class="op" id="5462598">=</span>&nbsp;<span class="ident" id="5462600">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462603">return</span>&nbsp;<span class="ident" id="5462610">v</span><br>
<span class="lineno">265</span><span class="op" id="5462612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5462615">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="5462659">func</span>&nbsp;<span class="op" id="5462664">(</span><span class="ident" id="5462665">t</span>&nbsp;<span class="op" id="5462667">*</span><span class="ident" id="5462668">LineTable</span><span class="op" id="5462677">)</span>&nbsp;<span class="builtintype" id="5462679">string</span><span class="op" id="5462685">(</span><span class="ident" id="5462686">off</span>&nbsp;<span class="builtintype" id="5462690">uint32</span><span class="op" id="5462696">)</span>&nbsp;<span class="builtintype" id="5462698">string</span>&nbsp;<span class="op" id="5462705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462708">for</span>&nbsp;<span class="ident" id="5462712">i</span>&nbsp;<span class="op" id="5462714">:=</span>&nbsp;<span class="ident" id="5462717">off</span><span class="op" id="5462720">;</span>&nbsp;<span class="op" id="5462722">;</span>&nbsp;<span class="ident" id="5462724">i</span><span class="op" id="5462725">++</span>&nbsp;<span class="op" id="5462728">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462732">if</span>&nbsp;<span class="ident" id="5462735">t</span><span class="op" id="5462736">.</span><span class="ident" id="5462737">Data</span><span class="op" id="5462741">[</span><span class="ident" id="5462742">i</span><span class="op" id="5462743">]</span>&nbsp;<span class="op" id="5462745">==</span>&nbsp;<span class="num" id="5462748">0</span>&nbsp;<span class="op" id="5462750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462755">return</span>&nbsp;<span class="builtintype" id="5462762">string</span><span class="op" id="5462768">(</span><span class="ident" id="5462769">t</span><span class="op" id="5462770">.</span><span class="ident" id="5462771">Data</span><span class="op" id="5462775">[</span><span class="ident" id="5462776">off</span><span class="op" id="5462779">:</span><span class="ident" id="5462780">i</span><span class="op" id="5462781">]</span><span class="op" id="5462782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462789">}</span><br>
<span class="lineno"></span><span class="op" id="5462791">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5462794">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5462860">func</span>&nbsp;<span class="op" id="5462865">(</span><span class="ident" id="5462866">t</span>&nbsp;<span class="op" id="5462868">*</span><span class="ident" id="5462869">LineTable</span><span class="op" id="5462878">)</span>&nbsp;<span class="ident" id="5462880">step</span><span class="op" id="5462884">(</span><span class="ident" id="5462885">p</span>&nbsp;<span class="op" id="5462887">*</span><span class="op" id="5462888">[</span><span class="op" id="5462889">]</span><span class="builtintype" id="5462890">byte</span><span class="op" id="5462894">,</span>&nbsp;<span class="ident" id="5462896">pc</span>&nbsp;<span class="op" id="5462899">*</span><span class="ident" id="5462900">uint64</span><span class="op" id="5462906">,</span>&nbsp;<span class="ident" id="5462908">val</span>&nbsp;<span class="op" id="5462912">*</span><span class="builtintype" id="5462913">int32</span><span class="op" id="5462918">,</span>&nbsp;<span class="ident" id="5462920">first</span>&nbsp;<span class="builtintype" id="5462926">bool</span><span class="op" id="5462930">)</span>&nbsp;<span class="builtintype" id="5462932">bool</span>&nbsp;<span class="op" id="5462937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462940">uvdelta</span>&nbsp;<span class="op" id="5462948">:=</span>&nbsp;<span class="ident" id="5462951">t</span><span class="op" id="5462952">.</span><span class="ident" id="5462953">readvarint</span><span class="op" id="5462963">(</span><span class="ident" id="5462964">p</span><span class="op" id="5462965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462968">if</span>&nbsp;<span class="ident" id="5462971">uvdelta</span>&nbsp;<span class="op" id="5462979">==</span>&nbsp;<span class="num" id="5462982">0</span>&nbsp;<span class="op" id="5462984">&amp;&amp;</span>&nbsp;<span class="op" id="5462987">!</span><span class="ident" id="5462988">first</span>&nbsp;<span class="op" id="5462994">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462998">return</span>&nbsp;<span class="builtintype" id="5463005">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463015">if</span>&nbsp;<span class="ident" id="5463018">uvdelta</span><span class="op" id="5463025">&amp;</span><span class="num" id="5463026">1</span>&nbsp;<span class="op" id="5463028">!=</span>&nbsp;<span class="num" id="5463031">0</span>&nbsp;<span class="op" id="5463033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463037">uvdelta</span>&nbsp;<span class="op" id="5463045">=</span>&nbsp;<span class="op" id="5463047">^</span><span class="op" id="5463048">(</span><span class="ident" id="5463049">uvdelta</span>&nbsp;<span class="op" id="5463057">&gt;&gt;</span>&nbsp;<span class="num" id="5463060">1</span><span class="op" id="5463061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463064">}</span>&nbsp;<span class="keyword" id="5463066">else</span>&nbsp;<span class="op" id="5463071">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463075">uvdelta</span>&nbsp;<span class="op" id="5463083">&gt;&gt;=</span>&nbsp;<span class="num" id="5463087">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463093">vdelta</span>&nbsp;<span class="op" id="5463100">:=</span>&nbsp;<span class="builtintype" id="5463103">int32</span><span class="op" id="5463108">(</span><span class="ident" id="5463109">uvdelta</span><span class="op" id="5463116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463119">pcdelta</span>&nbsp;<span class="op" id="5463127">:=</span>&nbsp;<span class="ident" id="5463130">t</span><span class="op" id="5463131">.</span><span class="ident" id="5463132">readvarint</span><span class="op" id="5463142">(</span><span class="ident" id="5463143">p</span><span class="op" id="5463144">)</span>&nbsp;<span class="op" id="5463146">*</span>&nbsp;<span class="ident" id="5463148">t</span><span class="op" id="5463149">.</span><span class="ident" id="5463150">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463159">*</span><span class="ident" id="5463160">pc</span>&nbsp;<span class="op" id="5463163">+=</span>&nbsp;<span class="ident" id="5463166">uint64</span><span class="op" id="5463172">(</span><span class="ident" id="5463173">pcdelta</span><span class="op" id="5463180">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463183">*</span><span class="ident" id="5463184">val</span>&nbsp;<span class="op" id="5463188">+=</span>&nbsp;<span class="ident" id="5463191">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463199">return</span>&nbsp;<span class="builtintype" id="5463206">true</span><br>
<span class="lineno"></span><span class="op" id="5463211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5463214">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="5463274">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="5463335">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5463396">func</span>&nbsp;<span class="op" id="5463401">(</span><span class="ident" id="5463402">t</span>&nbsp;<span class="op" id="5463404">*</span><span class="ident" id="5463405">LineTable</span><span class="op" id="5463414">)</span>&nbsp;<span class="ident" id="5463416">pcvalue</span><span class="op" id="5463423">(</span><span class="ident" id="5463424">off</span>&nbsp;<span class="builtintype" id="5463428">uint32</span><span class="op" id="5463434">,</span>&nbsp;<span class="ident" id="5463436">entry</span><span class="op" id="5463441">,</span>&nbsp;<span class="ident" id="5463443">targetpc</span>&nbsp;<span class="ident" id="5463452">uint64</span><span class="op" id="5463458">)</span>&nbsp;<span class="builtintype" id="5463460">int32</span>&nbsp;<span class="op" id="5463466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463469">if</span>&nbsp;<span class="ident" id="5463472">off</span>&nbsp;<span class="op" id="5463476">==</span>&nbsp;<span class="num" id="5463479">0</span>&nbsp;<span class="op" id="5463481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463485">return</span>&nbsp;<span class="op" id="5463492">-</span><span class="num" id="5463493">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463499">p</span>&nbsp;<span class="op" id="5463501">:=</span>&nbsp;<span class="ident" id="5463504">t</span><span class="op" id="5463505">.</span><span class="ident" id="5463506">Data</span><span class="op" id="5463510">[</span><span class="ident" id="5463511">off</span><span class="op" id="5463514">:</span><span class="op" id="5463515">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463519">val</span>&nbsp;<span class="op" id="5463523">:=</span>&nbsp;<span class="builtintype" id="5463526">int32</span><span class="op" id="5463531">(</span><span class="op" id="5463532">-</span><span class="num" id="5463533">1</span><span class="op" id="5463534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463537">pc</span>&nbsp;<span class="op" id="5463540">:=</span>&nbsp;<span class="ident" id="5463543">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463550">for</span>&nbsp;<span class="ident" id="5463554">t</span><span class="op" id="5463555">.</span><span class="ident" id="5463556">step</span><span class="op" id="5463560">(</span><span class="op" id="5463561">&amp;</span><span class="ident" id="5463562">p</span><span class="op" id="5463563">,</span>&nbsp;<span class="op" id="5463565">&amp;</span><span class="ident" id="5463566">pc</span><span class="op" id="5463568">,</span>&nbsp;<span class="op" id="5463570">&amp;</span><span class="ident" id="5463571">val</span><span class="op" id="5463574">,</span>&nbsp;<span class="ident" id="5463576">pc</span>&nbsp;<span class="op" id="5463579">==</span>&nbsp;<span class="ident" id="5463582">entry</span><span class="op" id="5463587">)</span>&nbsp;<span class="op" id="5463589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463593">if</span>&nbsp;<span class="ident" id="5463596">targetpc</span>&nbsp;<span class="op" id="5463605">&lt;</span>&nbsp;<span class="ident" id="5463607">pc</span>&nbsp;<span class="op" id="5463610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463615">return</span>&nbsp;<span class="ident" id="5463622">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463631">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463634">return</span>&nbsp;<span class="op" id="5463641">-</span><span class="num" id="5463642">1</span><br>
<span class="lineno"></span><span class="op" id="5463644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5463647">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5463710">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="5463766">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="5463835">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5463906">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5463981">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5464058">func</span>&nbsp;<span class="op" id="5464063">(</span><span class="ident" id="5464064">t</span>&nbsp;<span class="op" id="5464066">*</span><span class="ident" id="5464067">LineTable</span><span class="op" id="5464076">)</span>&nbsp;<span class="ident" id="5464078">findFileLine</span><span class="op" id="5464090">(</span><span class="ident" id="5464091">entry</span>&nbsp;<span class="ident" id="5464097">uint64</span><span class="op" id="5464103">,</span>&nbsp;<span class="ident" id="5464105">filetab</span><span class="op" id="5464112">,</span>&nbsp;<span class="ident" id="5464114">linetab</span>&nbsp;<span class="builtintype" id="5464122">uint32</span><span class="op" id="5464128">,</span>&nbsp;<span class="ident" id="5464130">filenum</span><span class="op" id="5464137">,</span>&nbsp;<span class="ident" id="5464139">line</span>&nbsp;<span class="builtintype" id="5464144">int32</span><span class="op" id="5464149">)</span>&nbsp;<span class="ident" id="5464151">uint64</span>&nbsp;<span class="op" id="5464158">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464161">if</span>&nbsp;<span class="ident" id="5464164">filetab</span>&nbsp;<span class="op" id="5464172">==</span>&nbsp;<span class="num" id="5464175">0</span>&nbsp;<span class="op" id="5464177">||</span>&nbsp;<span class="ident" id="5464180">linetab</span>&nbsp;<span class="op" id="5464188">==</span>&nbsp;<span class="num" id="5464191">0</span>&nbsp;<span class="op" id="5464193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464197">return</span>&nbsp;<span class="num" id="5464204">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5464207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464211">fp</span>&nbsp;<span class="op" id="5464214">:=</span>&nbsp;<span class="ident" id="5464217">t</span><span class="op" id="5464218">.</span><span class="ident" id="5464219">Data</span><span class="op" id="5464223">[</span><span class="ident" id="5464224">filetab</span><span class="op" id="5464231">:</span><span class="op" id="5464232">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464235">fl</span>&nbsp;<span class="op" id="5464238">:=</span>&nbsp;<span class="ident" id="5464241">t</span><span class="op" id="5464242">.</span><span class="ident" id="5464243">Data</span><span class="op" id="5464247">[</span><span class="ident" id="5464248">linetab</span><span class="op" id="5464255">:</span><span class="op" id="5464256">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464259">fileVal</span>&nbsp;<span class="op" id="5464267">:=</span>&nbsp;<span class="builtintype" id="5464270">int32</span><span class="op" id="5464275">(</span><span class="op" id="5464276">-</span><span class="num" id="5464277">1</span><span class="op" id="5464278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464281">filePC</span>&nbsp;<span class="op" id="5464288">:=</span>&nbsp;<span class="ident" id="5464291">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464298">lineVal</span>&nbsp;<span class="op" id="5464306">:=</span>&nbsp;<span class="builtintype" id="5464309">int32</span><span class="op" id="5464314">(</span><span class="op" id="5464315">-</span><span class="num" id="5464316">1</span><span class="op" id="5464317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464320">linePC</span>&nbsp;<span class="op" id="5464327">:=</span>&nbsp;<span class="ident" id="5464330">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464337">fileStartPC</span>&nbsp;<span class="op" id="5464349">:=</span>&nbsp;<span class="ident" id="5464352">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464360">for</span>&nbsp;<span class="ident" id="5464364">t</span><span class="op" id="5464365">.</span><span class="ident" id="5464366">step</span><span class="op" id="5464370">(</span><span class="op" id="5464371">&amp;</span><span class="ident" id="5464372">fp</span><span class="op" id="5464374">,</span>&nbsp;<span class="op" id="5464376">&amp;</span><span class="ident" id="5464377">filePC</span><span class="op" id="5464383">,</span>&nbsp;<span class="op" id="5464385">&amp;</span><span class="ident" id="5464386">fileVal</span><span class="op" id="5464393">,</span>&nbsp;<span class="ident" id="5464395">filePC</span>&nbsp;<span class="op" id="5464402">==</span>&nbsp;<span class="ident" id="5464405">entry</span><span class="op" id="5464410">)</span>&nbsp;<span class="op" id="5464412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464416">if</span>&nbsp;<span class="ident" id="5464419">fileVal</span>&nbsp;<span class="op" id="5464427">==</span>&nbsp;<span class="ident" id="5464430">filenum</span>&nbsp;<span class="op" id="5464438">&amp;&amp;</span>&nbsp;<span class="ident" id="5464441">fileStartPC</span>&nbsp;<span class="op" id="5464453">&lt;</span>&nbsp;<span class="ident" id="5464455">filePC</span>&nbsp;<span class="op" id="5464462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5464467">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5464524">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5464583">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5464641">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464673">lineStartPC</span>&nbsp;<span class="op" id="5464685">:=</span>&nbsp;<span class="ident" id="5464688">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464698">for</span>&nbsp;<span class="ident" id="5464702">linePC</span>&nbsp;<span class="op" id="5464709">&lt;</span>&nbsp;<span class="ident" id="5464711">filePC</span>&nbsp;<span class="op" id="5464718">&amp;&amp;</span>&nbsp;<span class="ident" id="5464721">t</span><span class="op" id="5464722">.</span><span class="ident" id="5464723">step</span><span class="op" id="5464727">(</span><span class="op" id="5464728">&amp;</span><span class="ident" id="5464729">fl</span><span class="op" id="5464731">,</span>&nbsp;<span class="op" id="5464733">&amp;</span><span class="ident" id="5464734">linePC</span><span class="op" id="5464740">,</span>&nbsp;<span class="op" id="5464742">&amp;</span><span class="ident" id="5464743">lineVal</span><span class="op" id="5464750">,</span>&nbsp;<span class="ident" id="5464752">linePC</span>&nbsp;<span class="op" id="5464759">==</span>&nbsp;<span class="ident" id="5464762">entry</span><span class="op" id="5464767">)</span>&nbsp;<span class="op" id="5464769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5464775">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464843">if</span>&nbsp;<span class="ident" id="5464846">lineVal</span>&nbsp;<span class="op" id="5464854">==</span>&nbsp;<span class="ident" id="5464857">line</span>&nbsp;<span class="op" id="5464862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464869">if</span>&nbsp;<span class="ident" id="5464872">fileStartPC</span>&nbsp;<span class="op" id="5464884">&lt;=</span>&nbsp;<span class="ident" id="5464887">lineStartPC</span>&nbsp;<span class="op" id="5464899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464907">return</span>&nbsp;<span class="ident" id="5464914">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5464931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464938">if</span>&nbsp;<span class="ident" id="5464941">fileStartPC</span>&nbsp;<span class="op" id="5464953">&lt;</span>&nbsp;<span class="ident" id="5464955">linePC</span>&nbsp;<span class="op" id="5464962">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464970">return</span>&nbsp;<span class="ident" id="5464977">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5464994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465006">lineStartPC</span>&nbsp;<span class="op" id="5465018">=</span>&nbsp;<span class="ident" id="5465020">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465030">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465038">fileStartPC</span>&nbsp;<span class="op" id="5465050">=</span>&nbsp;<span class="ident" id="5465052">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465063">return</span>&nbsp;<span class="num" id="5465070">0</span><br>
<span class="lineno"></span><span class="op" id="5465072">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="5465075">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5465154">func</span>&nbsp;<span class="op" id="5465159">(</span><span class="ident" id="5465160">t</span>&nbsp;<span class="op" id="5465162">*</span><span class="ident" id="5465163">LineTable</span><span class="op" id="5465172">)</span>&nbsp;<span class="ident" id="5465174">go12PCToLine</span><span class="op" id="5465186">(</span><span class="ident" id="5465187">pc</span>&nbsp;<span class="ident" id="5465190">uint64</span><span class="op" id="5465196">)</span>&nbsp;<span class="op" id="5465198">(</span><span class="ident" id="5465199">line</span>&nbsp;<span class="builtintype" id="5465204">int</span><span class="op" id="5465207">)</span>&nbsp;<span class="op" id="5465209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465212">defer</span>&nbsp;<span class="keyword" id="5465218">func</span><span class="op" id="5465222">(</span><span class="op" id="5465223">)</span>&nbsp;<span class="op" id="5465225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465229">if</span>&nbsp;<span class="builtinfunc" id="5465232">recover</span><span class="op" id="5465239">(</span><span class="op" id="5465240">)</span>&nbsp;<span class="op" id="5465242">!=</span>&nbsp;<span class="ident" id="5465245">nil</span>&nbsp;<span class="op" id="5465249">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465254">line</span>&nbsp;<span class="op" id="5465259">=</span>&nbsp;<span class="op" id="5465261">-</span><span class="num" id="5465262">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465269">}</span><span class="op" id="5465270">(</span><span class="op" id="5465271">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465275">f</span>&nbsp;<span class="op" id="5465277">:=</span>&nbsp;<span class="ident" id="5465280">t</span><span class="op" id="5465281">.</span><span class="ident" id="5465282">findFunc</span><span class="op" id="5465290">(</span><span class="ident" id="5465291">pc</span><span class="op" id="5465293">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465296">if</span>&nbsp;<span class="ident" id="5465299">f</span>&nbsp;<span class="op" id="5465301">==</span>&nbsp;<span class="ident" id="5465304">nil</span>&nbsp;<span class="op" id="5465308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465312">return</span>&nbsp;<span class="op" id="5465319">-</span><span class="num" id="5465320">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465326">entry</span>&nbsp;<span class="op" id="5465332">:=</span>&nbsp;<span class="ident" id="5465335">t</span><span class="op" id="5465336">.</span><span class="builtintype" id="5465337">uintptr</span><span class="op" id="5465344">(</span><span class="ident" id="5465345">f</span><span class="op" id="5465346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465349">linetab</span>&nbsp;<span class="op" id="5465357">:=</span>&nbsp;<span class="ident" id="5465360">t</span><span class="op" id="5465361">.</span><span class="ident" id="5465362">binary</span><span class="op" id="5465368">.</span><span class="ident" id="5465369">Uint32</span><span class="op" id="5465375">(</span><span class="ident" id="5465376">f</span><span class="op" id="5465377">[</span><span class="ident" id="5465378">t</span><span class="op" id="5465379">.</span><span class="ident" id="5465380">ptrsize</span><span class="op" id="5465387">+</span><span class="num" id="5465388">5</span><span class="op" id="5465389">*</span><span class="num" id="5465390">4</span><span class="op" id="5465391">:</span><span class="op" id="5465392">]</span><span class="op" id="5465393">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465396">return</span>&nbsp;<span class="builtintype" id="5465403">int</span><span class="op" id="5465406">(</span><span class="ident" id="5465407">t</span><span class="op" id="5465408">.</span><span class="ident" id="5465409">pcvalue</span><span class="op" id="5465416">(</span><span class="ident" id="5465417">linetab</span><span class="op" id="5465424">,</span>&nbsp;<span class="ident" id="5465426">entry</span><span class="op" id="5465431">,</span>&nbsp;<span class="ident" id="5465433">pc</span><span class="op" id="5465435">)</span><span class="op" id="5465436">)</span><br>
<span class="lineno"></span><span class="op" id="5465438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5465441">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5465518">func</span>&nbsp;<span class="op" id="5465523">(</span><span class="ident" id="5465524">t</span>&nbsp;<span class="op" id="5465526">*</span><span class="ident" id="5465527">LineTable</span><span class="op" id="5465536">)</span>&nbsp;<span class="ident" id="5465538">go12PCToFile</span><span class="op" id="5465550">(</span><span class="ident" id="5465551">pc</span>&nbsp;<span class="ident" id="5465554">uint64</span><span class="op" id="5465560">)</span>&nbsp;<span class="op" id="5465562">(</span><span class="ident" id="5465563">file</span>&nbsp;<span class="builtintype" id="5465568">string</span><span class="op" id="5465574">)</span>&nbsp;<span class="op" id="5465576">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465579">defer</span>&nbsp;<span class="keyword" id="5465585">func</span><span class="op" id="5465589">(</span><span class="op" id="5465590">)</span>&nbsp;<span class="op" id="5465592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465596">if</span>&nbsp;<span class="builtinfunc" id="5465599">recover</span><span class="op" id="5465606">(</span><span class="op" id="5465607">)</span>&nbsp;<span class="op" id="5465609">!=</span>&nbsp;<span class="ident" id="5465612">nil</span>&nbsp;<span class="op" id="5465616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465621">file</span>&nbsp;<span class="op" id="5465626">=</span>&nbsp;<span class="string" id="5465628">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465636">}</span><span class="op" id="5465637">(</span><span class="op" id="5465638">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465642">f</span>&nbsp;<span class="op" id="5465644">:=</span>&nbsp;<span class="ident" id="5465647">t</span><span class="op" id="5465648">.</span><span class="ident" id="5465649">findFunc</span><span class="op" id="5465657">(</span><span class="ident" id="5465658">pc</span><span class="op" id="5465660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465663">if</span>&nbsp;<span class="ident" id="5465666">f</span>&nbsp;<span class="op" id="5465668">==</span>&nbsp;<span class="ident" id="5465671">nil</span>&nbsp;<span class="op" id="5465675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465679">return</span>&nbsp;<span class="string" id="5465686">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465690">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465693">entry</span>&nbsp;<span class="op" id="5465699">:=</span>&nbsp;<span class="ident" id="5465702">t</span><span class="op" id="5465703">.</span><span class="builtintype" id="5465704">uintptr</span><span class="op" id="5465711">(</span><span class="ident" id="5465712">f</span><span class="op" id="5465713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465716">filetab</span>&nbsp;<span class="op" id="5465724">:=</span>&nbsp;<span class="ident" id="5465727">t</span><span class="op" id="5465728">.</span><span class="ident" id="5465729">binary</span><span class="op" id="5465735">.</span><span class="ident" id="5465736">Uint32</span><span class="op" id="5465742">(</span><span class="ident" id="5465743">f</span><span class="op" id="5465744">[</span><span class="ident" id="5465745">t</span><span class="op" id="5465746">.</span><span class="ident" id="5465747">ptrsize</span><span class="op" id="5465754">+</span><span class="num" id="5465755">4</span><span class="op" id="5465756">*</span><span class="num" id="5465757">4</span><span class="op" id="5465758">:</span><span class="op" id="5465759">]</span><span class="op" id="5465760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465763">fno</span>&nbsp;<span class="op" id="5465767">:=</span>&nbsp;<span class="ident" id="5465770">t</span><span class="op" id="5465771">.</span><span class="ident" id="5465772">pcvalue</span><span class="op" id="5465779">(</span><span class="ident" id="5465780">filetab</span><span class="op" id="5465787">,</span>&nbsp;<span class="ident" id="5465789">entry</span><span class="op" id="5465794">,</span>&nbsp;<span class="ident" id="5465796">pc</span><span class="op" id="5465798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465801">if</span>&nbsp;<span class="ident" id="5465804">fno</span>&nbsp;<span class="op" id="5465808">&lt;=</span>&nbsp;<span class="num" id="5465811">0</span>&nbsp;<span class="op" id="5465813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465817">return</span>&nbsp;<span class="string" id="5465824">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465831">return</span>&nbsp;<span class="ident" id="5465838">t</span><span class="op" id="5465839">.</span><span class="builtintype" id="5465840">string</span><span class="op" id="5465846">(</span><span class="ident" id="5465847">t</span><span class="op" id="5465848">.</span><span class="ident" id="5465849">binary</span><span class="op" id="5465855">.</span><span class="ident" id="5465856">Uint32</span><span class="op" id="5465862">(</span><span class="ident" id="5465863">t</span><span class="op" id="5465864">.</span><span class="ident" id="5465865">filetab</span><span class="op" id="5465872">[</span><span class="num" id="5465873">4</span><span class="op" id="5465874">*</span><span class="ident" id="5465875">fno</span><span class="op" id="5465878">:</span><span class="op" id="5465879">]</span><span class="op" id="5465880">)</span><span class="op" id="5465881">)</span><br>
<span class="lineno"></span><span class="op" id="5465883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5465886">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="5465975">func</span>&nbsp;<span class="op" id="5465980">(</span><span class="ident" id="5465981">t</span>&nbsp;<span class="op" id="5465983">*</span><span class="ident" id="5465984">LineTable</span><span class="op" id="5465993">)</span>&nbsp;<span class="ident" id="5465995">go12LineToPC</span><span class="op" id="5466007">(</span><span class="ident" id="5466008">file</span>&nbsp;<span class="builtintype" id="5466013">string</span><span class="op" id="5466019">,</span>&nbsp;<span class="ident" id="5466021">line</span>&nbsp;<span class="builtintype" id="5466026">int</span><span class="op" id="5466029">)</span>&nbsp;<span class="op" id="5466031">(</span><span class="ident" id="5466032">pc</span>&nbsp;<span class="ident" id="5466035">uint64</span><span class="op" id="5466041">)</span>&nbsp;<span class="op" id="5466043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466046">defer</span>&nbsp;<span class="keyword" id="5466052">func</span><span class="op" id="5466056">(</span><span class="op" id="5466057">)</span>&nbsp;<span class="op" id="5466059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466063">if</span>&nbsp;<span class="builtinfunc" id="5466066">recover</span><span class="op" id="5466073">(</span><span class="op" id="5466074">)</span>&nbsp;<span class="op" id="5466076">!=</span>&nbsp;<span class="ident" id="5466079">nil</span>&nbsp;<span class="op" id="5466083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466088">pc</span>&nbsp;<span class="op" id="5466091">=</span>&nbsp;<span class="num" id="5466093">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466097">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466100">}</span><span class="op" id="5466101">(</span><span class="op" id="5466102">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466106">t</span><span class="op" id="5466107">.</span><span class="ident" id="5466108">initFileMap</span><span class="op" id="5466119">(</span><span class="op" id="5466120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466123">filenum</span>&nbsp;<span class="op" id="5466131">:=</span>&nbsp;<span class="ident" id="5466134">t</span><span class="op" id="5466135">.</span><span class="ident" id="5466136">fileMap</span><span class="op" id="5466143">[</span><span class="ident" id="5466144">file</span><span class="op" id="5466148">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466151">if</span>&nbsp;<span class="ident" id="5466154">filenum</span>&nbsp;<span class="op" id="5466162">==</span>&nbsp;<span class="num" id="5466165">0</span>&nbsp;<span class="op" id="5466167">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466171">return</span>&nbsp;<span class="num" id="5466178">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466185">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466209">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466286">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466359">for</span>&nbsp;<span class="ident" id="5466363">i</span>&nbsp;<span class="op" id="5466365">:=</span>&nbsp;<span class="builtintype" id="5466368">uint32</span><span class="op" id="5466374">(</span><span class="num" id="5466375">0</span><span class="op" id="5466376">)</span><span class="op" id="5466377">;</span>&nbsp;<span class="ident" id="5466379">i</span>&nbsp;<span class="op" id="5466381">&lt;</span>&nbsp;<span class="ident" id="5466383">t</span><span class="op" id="5466384">.</span><span class="ident" id="5466385">nfunctab</span><span class="op" id="5466393">;</span>&nbsp;<span class="ident" id="5466395">i</span><span class="op" id="5466396">++</span>&nbsp;<span class="op" id="5466399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466403">f</span>&nbsp;<span class="op" id="5466405">:=</span>&nbsp;<span class="ident" id="5466408">t</span><span class="op" id="5466409">.</span><span class="ident" id="5466410">Data</span><span class="op" id="5466414">[</span><span class="ident" id="5466415">t</span><span class="op" id="5466416">.</span><span class="builtintype" id="5466417">uintptr</span><span class="op" id="5466424">(</span><span class="ident" id="5466425">t</span><span class="op" id="5466426">.</span><span class="ident" id="5466427">functab</span><span class="op" id="5466434">[</span><span class="num" id="5466435">2</span><span class="op" id="5466436">*</span><span class="ident" id="5466437">t</span><span class="op" id="5466438">.</span><span class="ident" id="5466439">ptrsize</span><span class="op" id="5466446">*</span><span class="ident" id="5466447">i</span><span class="op" id="5466448">+</span><span class="ident" id="5466449">t</span><span class="op" id="5466450">.</span><span class="ident" id="5466451">ptrsize</span><span class="op" id="5466458">:</span><span class="op" id="5466459">]</span><span class="op" id="5466460">)</span><span class="op" id="5466461">:</span><span class="op" id="5466462">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466466">entry</span>&nbsp;<span class="op" id="5466472">:=</span>&nbsp;<span class="ident" id="5466475">t</span><span class="op" id="5466476">.</span><span class="builtintype" id="5466477">uintptr</span><span class="op" id="5466484">(</span><span class="ident" id="5466485">f</span><span class="op" id="5466486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466490">filetab</span>&nbsp;<span class="op" id="5466498">:=</span>&nbsp;<span class="ident" id="5466501">t</span><span class="op" id="5466502">.</span><span class="ident" id="5466503">binary</span><span class="op" id="5466509">.</span><span class="ident" id="5466510">Uint32</span><span class="op" id="5466516">(</span><span class="ident" id="5466517">f</span><span class="op" id="5466518">[</span><span class="ident" id="5466519">t</span><span class="op" id="5466520">.</span><span class="ident" id="5466521">ptrsize</span><span class="op" id="5466528">+</span><span class="num" id="5466529">4</span><span class="op" id="5466530">*</span><span class="num" id="5466531">4</span><span class="op" id="5466532">:</span><span class="op" id="5466533">]</span><span class="op" id="5466534">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466538">linetab</span>&nbsp;<span class="op" id="5466546">:=</span>&nbsp;<span class="ident" id="5466549">t</span><span class="op" id="5466550">.</span><span class="ident" id="5466551">binary</span><span class="op" id="5466557">.</span><span class="ident" id="5466558">Uint32</span><span class="op" id="5466564">(</span><span class="ident" id="5466565">f</span><span class="op" id="5466566">[</span><span class="ident" id="5466567">t</span><span class="op" id="5466568">.</span><span class="ident" id="5466569">ptrsize</span><span class="op" id="5466576">+</span><span class="num" id="5466577">5</span><span class="op" id="5466578">*</span><span class="num" id="5466579">4</span><span class="op" id="5466580">:</span><span class="op" id="5466581">]</span><span class="op" id="5466582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466586">pc</span>&nbsp;<span class="op" id="5466589">:=</span>&nbsp;<span class="ident" id="5466592">t</span><span class="op" id="5466593">.</span><span class="ident" id="5466594">findFileLine</span><span class="op" id="5466606">(</span><span class="ident" id="5466607">entry</span><span class="op" id="5466612">,</span>&nbsp;<span class="ident" id="5466614">filetab</span><span class="op" id="5466621">,</span>&nbsp;<span class="ident" id="5466623">linetab</span><span class="op" id="5466630">,</span>&nbsp;<span class="builtintype" id="5466632">int32</span><span class="op" id="5466637">(</span><span class="ident" id="5466638">filenum</span><span class="op" id="5466645">)</span><span class="op" id="5466646">,</span>&nbsp;<span class="builtintype" id="5466648">int32</span><span class="op" id="5466653">(</span><span class="ident" id="5466654">line</span><span class="op" id="5466658">)</span><span class="op" id="5466659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466663">if</span>&nbsp;<span class="ident" id="5466666">pc</span>&nbsp;<span class="op" id="5466669">!=</span>&nbsp;<span class="num" id="5466672">0</span>&nbsp;<span class="op" id="5466674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466679">return</span>&nbsp;<span class="ident" id="5466686">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466691">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466697">return</span>&nbsp;<span class="num" id="5466704">0</span><br>
<span class="lineno"></span><span class="op" id="5466706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5466709">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="5466775">func</span>&nbsp;<span class="op" id="5466780">(</span><span class="ident" id="5466781">t</span>&nbsp;<span class="op" id="5466783">*</span><span class="ident" id="5466784">LineTable</span><span class="op" id="5466793">)</span>&nbsp;<span class="ident" id="5466795">initFileMap</span><span class="op" id="5466806">(</span><span class="op" id="5466807">)</span>&nbsp;<span class="op" id="5466809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466812">t</span><span class="op" id="5466813">.</span><span class="ident" id="5466814">mu</span><span class="op" id="5466816">.</span><span class="ident" id="5466817">Lock</span><span class="op" id="5466821">(</span><span class="op" id="5466822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466825">defer</span>&nbsp;<span class="ident" id="5466831">t</span><span class="op" id="5466832">.</span><span class="ident" id="5466833">mu</span><span class="op" id="5466835">.</span><span class="ident" id="5466836">Unlock</span><span class="op" id="5466842">(</span><span class="op" id="5466843">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466847">if</span>&nbsp;<span class="ident" id="5466850">t</span><span class="op" id="5466851">.</span><span class="ident" id="5466852">fileMap</span>&nbsp;<span class="op" id="5466860">!=</span>&nbsp;<span class="ident" id="5466863">nil</span>&nbsp;<span class="op" id="5466867">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466871">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466882">m</span>&nbsp;<span class="op" id="5466884">:=</span>&nbsp;<span class="builtinfunc" id="5466887">make</span><span class="op" id="5466891">(</span><span class="keyword" id="5466892">map</span><span class="op" id="5466895">[</span><span class="builtintype" id="5466896">string</span><span class="op" id="5466902">]</span><span class="builtintype" id="5466903">uint32</span><span class="op" id="5466909">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466913">for</span>&nbsp;<span class="ident" id="5466917">i</span>&nbsp;<span class="op" id="5466919">:=</span>&nbsp;<span class="builtintype" id="5466922">uint32</span><span class="op" id="5466928">(</span><span class="num" id="5466929">1</span><span class="op" id="5466930">)</span><span class="op" id="5466931">;</span>&nbsp;<span class="ident" id="5466933">i</span>&nbsp;<span class="op" id="5466935">&lt;</span>&nbsp;<span class="ident" id="5466937">t</span><span class="op" id="5466938">.</span><span class="ident" id="5466939">nfiletab</span><span class="op" id="5466947">;</span>&nbsp;<span class="ident" id="5466949">i</span><span class="op" id="5466950">++</span>&nbsp;<span class="op" id="5466953">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466957">s</span>&nbsp;<span class="op" id="5466959">:=</span>&nbsp;<span class="ident" id="5466962">t</span><span class="op" id="5466963">.</span><span class="builtintype" id="5466964">string</span><span class="op" id="5466970">(</span><span class="ident" id="5466971">t</span><span class="op" id="5466972">.</span><span class="ident" id="5466973">binary</span><span class="op" id="5466979">.</span><span class="ident" id="5466980">Uint32</span><span class="op" id="5466986">(</span><span class="ident" id="5466987">t</span><span class="op" id="5466988">.</span><span class="ident" id="5466989">filetab</span><span class="op" id="5466996">[</span><span class="num" id="5466997">4</span><span class="op" id="5466998">*</span><span class="ident" id="5466999">i</span><span class="op" id="5467000">:</span><span class="op" id="5467001">]</span><span class="op" id="5467002">)</span><span class="op" id="5467003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467007">m</span><span class="op" id="5467008">[</span><span class="ident" id="5467009">s</span><span class="op" id="5467010">]</span>&nbsp;<span class="op" id="5467012">=</span>&nbsp;<span class="ident" id="5467014">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5467017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467020">t</span><span class="op" id="5467021">.</span><span class="ident" id="5467022">fileMap</span>&nbsp;<span class="op" id="5467030">=</span>&nbsp;<span class="ident" id="5467032">m</span><br>
<span class="lineno"></span><span class="op" id="5467034">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5467037">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="5467109">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5467186">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="5467251">func</span>&nbsp;<span class="op" id="5467256">(</span><span class="ident" id="5467257">t</span>&nbsp;<span class="op" id="5467259">*</span><span class="ident" id="5467260">LineTable</span><span class="op" id="5467269">)</span>&nbsp;<span class="ident" id="5467271">go12MapFiles</span><span class="op" id="5467283">(</span><span class="ident" id="5467284">m</span>&nbsp;<span class="keyword" id="5467286">map</span><span class="op" id="5467289">[</span><span class="builtintype" id="5467290">string</span><span class="op" id="5467296">]</span><span class="op" id="5467297">*</span><span class="ident" id="5467298">Obj</span><span class="op" id="5467301">,</span>&nbsp;<span class="ident" id="5467303">obj</span>&nbsp;<span class="op" id="5467307">*</span><span class="ident" id="5467308">Obj</span><span class="op" id="5467311">)</span>&nbsp;<span class="op" id="5467313">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467316">defer</span>&nbsp;<span class="keyword" id="5467322">func</span><span class="op" id="5467326">(</span><span class="op" id="5467327">)</span>&nbsp;<span class="op" id="5467329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5467333">recover</span><span class="op" id="5467340">(</span><span class="op" id="5467341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5467344">}</span><span class="op" id="5467345">(</span><span class="op" id="5467346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467350">t</span><span class="op" id="5467351">.</span><span class="ident" id="5467352">initFileMap</span><span class="op" id="5467363">(</span><span class="op" id="5467364">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467367">for</span>&nbsp;<span class="ident" id="5467371">file</span>&nbsp;<span class="op" id="5467376">:=</span>&nbsp;<span class="keyword" id="5467379">range</span>&nbsp;<span class="ident" id="5467385">t</span><span class="op" id="5467386">.</span><span class="ident" id="5467387">fileMap</span>&nbsp;<span class="op" id="5467395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467399">m</span><span class="op" id="5467400">[</span><span class="ident" id="5467401">file</span><span class="op" id="5467405">]</span>&nbsp;<span class="op" id="5467407">=</span>&nbsp;<span class="ident" id="5467409">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5467414">}</span><br>
<span class="lineno"></span><span class="op" id="5467416">}</span>
</div>
</body>
</html>
