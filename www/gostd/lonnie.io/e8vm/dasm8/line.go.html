<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/dasm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/dasm.go.html">dasm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/line.go.html">line.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/dasm8/reg.go.html">reg.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="5540335">package</span>&nbsp;<span class="ident" id="5540343">dasm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5540350">import</span>&nbsp;<span class="op" id="5540357">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5540360">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5540369">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5540388">&#34;fmt&#34;</span><br>
<span class="lineno"></span><span class="op" id="5540394">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5540397">//&nbsp;Line&nbsp;is&nbsp;a&nbsp;disassembled&nbsp;line</span><br>
<span class="lineno">10</span><span class="keyword" id="5540428">type</span>&nbsp;<span class="ident" id="5540433">Line</span>&nbsp;<span class="keyword" id="5540438">struct</span>&nbsp;<span class="op" id="5540445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540448">Addr</span>&nbsp;<span class="builtintype" id="5540453">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540462">Inst</span>&nbsp;<span class="builtintype" id="5540467">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540475">Str</span>&nbsp;&nbsp;<span class="builtintype" id="5540480">string</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540489">IsJump</span>&nbsp;<span class="builtintype" id="5540496">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540502">To</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5540509">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540517">ToLine</span>&nbsp;<span class="op" id="5540524">*</span><span class="ident" id="5540525">Line</span><br>
<span class="lineno"></span><span class="op" id="5540530">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5540533">func</span>&nbsp;<span class="ident" id="5540538">printables</span><span class="op" id="5540548">(</span><span class="ident" id="5540549">bs</span>&nbsp;<span class="op" id="5540552">[</span><span class="op" id="5540553">]</span><span class="builtintype" id="5540554">byte</span><span class="op" id="5540558">)</span>&nbsp;<span class="builtintype" id="5540560">string</span>&nbsp;<span class="op" id="5540567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540570">ret</span>&nbsp;<span class="op" id="5540574">:=</span>&nbsp;<span class="string" id="5540577">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5540581">for</span>&nbsp;<span class="ident" id="5540585">_</span><span class="op" id="5540586">,</span>&nbsp;<span class="ident" id="5540588">b</span>&nbsp;<span class="op" id="5540590">:=</span>&nbsp;<span class="keyword" id="5540593">range</span>&nbsp;<span class="ident" id="5540599">bs</span>&nbsp;<span class="op" id="5540602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540606">r</span>&nbsp;<span class="op" id="5540608">:=</span>&nbsp;<span class="builtintype" id="5540611">rune</span><span class="op" id="5540615">(</span><span class="ident" id="5540616">b</span><span class="op" id="5540617">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5540621">if</span>&nbsp;<span class="ident" id="5540624">r</span>&nbsp;<span class="op" id="5540626">&gt;=</span>&nbsp;<span class="string" id="5540629">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5540633">&amp;&amp;</span>&nbsp;<span class="ident" id="5540636">r</span>&nbsp;<span class="op" id="5540638">&lt;=</span>&nbsp;<span class="string" id="5540641">&#39;~&#39;</span>&nbsp;<span class="op" id="5540645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540650">ret</span>&nbsp;<span class="op" id="5540654">+=</span>&nbsp;<span class="builtintype" id="5540657">string</span><span class="op" id="5540663">(</span><span class="ident" id="5540664">r</span><span class="op" id="5540665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5540669">}</span>&nbsp;<span class="keyword" id="5540671">else</span>&nbsp;<span class="op" id="5540676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540681">ret</span>&nbsp;<span class="op" id="5540685">+=</span>&nbsp;<span class="string" id="5540688">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5540694">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5540697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5540700">return</span>&nbsp;<span class="ident" id="5540707">ret</span><br>
<span class="lineno"></span><span class="op" id="5540711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5540714">var</span>&nbsp;<span class="ident" id="5540718">enc</span>&nbsp;<span class="op" id="5540722">=</span>&nbsp;<span class="ident" id="5540724">binary</span><span class="op" id="5540730">.</span><span class="ident" id="5540731">LittleEndian</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5540745">func</span>&nbsp;<span class="op" id="5540750">(</span><span class="ident" id="5540751">line</span>&nbsp;<span class="op" id="5540756">*</span><span class="ident" id="5540757">Line</span><span class="op" id="5540761">)</span>&nbsp;<span class="ident" id="5540763">String</span><span class="op" id="5540769">(</span><span class="op" id="5540770">)</span>&nbsp;<span class="builtintype" id="5540772">string</span>&nbsp;<span class="op" id="5540779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540782">ret</span>&nbsp;<span class="op" id="5540786">:=</span>&nbsp;<span class="builtinfunc" id="5540789">new</span><span class="op" id="5540792">(</span><span class="ident" id="5540793">bytes</span><span class="op" id="5540798">.</span><span class="ident" id="5540799">Buffer</span><span class="op" id="5540805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5540808">var</span>&nbsp;<span class="ident" id="5540812">buf</span>&nbsp;<span class="op" id="5540816">[</span><span class="num" id="5540817">4</span><span class="op" id="5540818">]</span><span class="builtintype" id="5540819">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540825">enc</span><span class="op" id="5540828">.</span><span class="ident" id="5540829">PutUint32</span><span class="op" id="5540838">(</span><span class="ident" id="5540839">buf</span><span class="op" id="5540842">[</span><span class="op" id="5540843">:</span><span class="op" id="5540844">]</span><span class="op" id="5540845">,</span>&nbsp;<span class="ident" id="5540847">line</span><span class="op" id="5540851">.</span><span class="ident" id="5540852">Inst</span><span class="op" id="5540856">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540860">fmt</span><span class="op" id="5540863">.</span><span class="ident" id="5540864">Fprintf</span><span class="op" id="5540871">(</span><span class="ident" id="5540872">ret</span><span class="op" id="5540875">,</span>&nbsp;<span class="string" id="5540877">&#34;%08x:&nbsp;&nbsp;%&nbsp;02x&#34;</span><span class="op" id="5540891">,</span>&nbsp;<span class="ident" id="5540893">line</span><span class="op" id="5540897">.</span><span class="ident" id="5540898">Addr</span><span class="op" id="5540902">,</span>&nbsp;<span class="ident" id="5540904">buf</span><span class="op" id="5540907">[</span><span class="op" id="5540908">:</span><span class="op" id="5540909">]</span><span class="op" id="5540910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540913">fmt</span><span class="op" id="5540916">.</span><span class="ident" id="5540917">Fprintf</span><span class="op" id="5540924">(</span><span class="ident" id="5540925">ret</span><span class="op" id="5540928">,</span>&nbsp;<span class="string" id="5540930">&#34;&nbsp;&nbsp;&nbsp;%s&#34;</span><span class="op" id="5540937">,</span>&nbsp;<span class="ident" id="5540939">printables</span><span class="op" id="5540949">(</span><span class="ident" id="5540950">buf</span><span class="op" id="5540953">[</span><span class="op" id="5540954">:</span><span class="op" id="5540955">]</span><span class="op" id="5540956">)</span><span class="op" id="5540957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5540960">fmt</span><span class="op" id="5540963">.</span><span class="ident" id="5540964">Fprintf</span><span class="op" id="5540971">(</span><span class="ident" id="5540972">ret</span><span class="op" id="5540975">,</span>&nbsp;<span class="string" id="5540977">&#34;&nbsp;&nbsp;&nbsp;&nbsp;%s&#34;</span><span class="op" id="5540985">,</span>&nbsp;<span class="ident" id="5540987">line</span><span class="op" id="5540991">.</span><span class="ident" id="5540992">Str</span><span class="op" id="5540995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5540998">if</span>&nbsp;<span class="ident" id="5541001">line</span><span class="op" id="5541005">.</span><span class="ident" id="5541006">IsJump</span>&nbsp;<span class="op" id="5541013">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5541017">fmt</span><span class="op" id="5541020">.</span><span class="ident" id="5541021">Fprintf</span><span class="op" id="5541028">(</span><span class="ident" id="5541029">ret</span><span class="op" id="5541032">,</span>&nbsp;<span class="string" id="5541034">&#34;&nbsp;&nbsp;&nbsp;//&nbsp;%08x&#34;</span><span class="op" id="5541046">,</span>&nbsp;<span class="ident" id="5541048">line</span><span class="op" id="5541052">.</span><span class="ident" id="5541053">To</span><span class="op" id="5541055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5541058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5541062">return</span>&nbsp;<span class="ident" id="5541069">ret</span><span class="op" id="5541072">.</span><span class="ident" id="5541073">String</span><span class="op" id="5541079">(</span><span class="op" id="5541080">)</span><br>
<span class="lineno"></span><span class="op" id="5541082">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5541085">func</span>&nbsp;<span class="ident" id="5541090">newLine</span><span class="op" id="5541097">(</span><span class="ident" id="5541098">addr</span>&nbsp;<span class="builtintype" id="5541103">uint32</span><span class="op" id="5541109">,</span>&nbsp;<span class="ident" id="5541111">in</span>&nbsp;<span class="builtintype" id="5541114">uint32</span><span class="op" id="5541120">)</span>&nbsp;<span class="op" id="5541122">*</span><span class="ident" id="5541123">Line</span>&nbsp;<span class="op" id="5541128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5541131">ret</span>&nbsp;<span class="op" id="5541135">:=</span>&nbsp;<span class="builtinfunc" id="5541138">new</span><span class="op" id="5541141">(</span><span class="ident" id="5541142">Line</span><span class="op" id="5541146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5541149">ret</span><span class="op" id="5541152">.</span><span class="ident" id="5541153">Addr</span>&nbsp;<span class="op" id="5541158">=</span>&nbsp;<span class="ident" id="5541160">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5541166">ret</span><span class="op" id="5541169">.</span><span class="ident" id="5541170">Inst</span>&nbsp;<span class="op" id="5541175">=</span>&nbsp;<span class="ident" id="5541177">in</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5541181">return</span>&nbsp;<span class="ident" id="5541188">ret</span><br>
<span class="lineno"></span><span class="op" id="5541192">}</span>
</div>
</body>
</html>
