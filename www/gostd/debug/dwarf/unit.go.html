<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html" class="current">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4758144">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4758200">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4758254">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4758305">package</span>&nbsp;<span class="ident" id="4758313">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4758320">import</span>&nbsp;<span class="string" id="4758327">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758338">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="4758405">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4758468">type</span>&nbsp;<span class="ident" id="4758473">unit</span>&nbsp;<span class="keyword" id="4758478">struct</span>&nbsp;<span class="op" id="4758485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758488">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4758495">Offset</span>&nbsp;<span class="comment" id="4758502">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758554">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758561">Offset</span>&nbsp;<span class="comment" id="4758568">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758618">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4758625">[</span><span class="op" id="4758626">]</span><span class="builtintype" id="4758627">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758633">atable</span>&nbsp;<span class="ident" id="4758640">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758653">asize</span>&nbsp;&nbsp;<span class="builtintype" id="4758660">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758665">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4758672">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758677">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4758684">bool</span>&nbsp;<span class="comment" id="4758689">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="4758721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4758724">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4758764">func</span>&nbsp;<span class="op" id="4758769">(</span><span class="ident" id="4758770">u</span>&nbsp;<span class="op" id="4758772">*</span><span class="ident" id="4758773">unit</span><span class="op" id="4758777">)</span>&nbsp;<span class="ident" id="4758779">version</span><span class="op" id="4758786">(</span><span class="op" id="4758787">)</span>&nbsp;<span class="builtintype" id="4758789">int</span>&nbsp;<span class="op" id="4758793">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4758796">return</span>&nbsp;<span class="ident" id="4758803">u</span><span class="op" id="4758804">.</span><span class="ident" id="4758805">vers</span><br>
<span class="lineno"></span><span class="op" id="4758810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4758813">func</span>&nbsp;<span class="op" id="4758818">(</span><span class="ident" id="4758819">u</span>&nbsp;<span class="op" id="4758821">*</span><span class="ident" id="4758822">unit</span><span class="op" id="4758826">)</span>&nbsp;<span class="ident" id="4758828">dwarf64</span><span class="op" id="4758835">(</span><span class="op" id="4758836">)</span>&nbsp;<span class="op" id="4758838">(</span><span class="builtintype" id="4758839">bool</span><span class="op" id="4758843">,</span>&nbsp;<span class="builtintype" id="4758845">bool</span><span class="op" id="4758849">)</span>&nbsp;<span class="op" id="4758851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4758854">return</span>&nbsp;<span class="ident" id="4758861">u</span><span class="op" id="4758862">.</span><span class="ident" id="4758863">is64</span><span class="op" id="4758867">,</span>&nbsp;<span class="builtintype" id="4758869">true</span><br>
<span class="lineno">30</span><span class="op" id="4758874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4758877">func</span>&nbsp;<span class="op" id="4758882">(</span><span class="ident" id="4758883">u</span>&nbsp;<span class="op" id="4758885">*</span><span class="ident" id="4758886">unit</span><span class="op" id="4758890">)</span>&nbsp;<span class="ident" id="4758892">addrsize</span><span class="op" id="4758900">(</span><span class="op" id="4758901">)</span>&nbsp;<span class="builtintype" id="4758903">int</span>&nbsp;<span class="op" id="4758907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4758910">return</span>&nbsp;<span class="ident" id="4758917">u</span><span class="op" id="4758918">.</span><span class="ident" id="4758919">asize</span><br>
<span class="lineno"></span><span class="op" id="4758925">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="4758928">func</span>&nbsp;<span class="op" id="4758933">(</span><span class="ident" id="4758934">d</span>&nbsp;<span class="op" id="4758936">*</span><span class="ident" id="4758937">Data</span><span class="op" id="4758941">)</span>&nbsp;<span class="ident" id="4758943">parseUnits</span><span class="op" id="4758953">(</span><span class="op" id="4758954">)</span>&nbsp;<span class="op" id="4758956">(</span><span class="op" id="4758957">[</span><span class="op" id="4758958">]</span><span class="ident" id="4758959">unit</span><span class="op" id="4758963">,</span>&nbsp;<span class="builtintype" id="4758965">error</span><span class="op" id="4758970">)</span>&nbsp;<span class="op" id="4758972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4758975">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4758992">nunit</span>&nbsp;<span class="op" id="4758998">:=</span>&nbsp;<span class="num" id="4759001">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759004">b</span>&nbsp;<span class="op" id="4759006">:=</span>&nbsp;<span class="ident" id="4759009">makeBuf</span><span class="op" id="4759016">(</span><span class="ident" id="4759017">d</span><span class="op" id="4759018">,</span>&nbsp;<span class="ident" id="4759020">unknownFormat</span><span class="op" id="4759033">{</span><span class="op" id="4759034">}</span><span class="op" id="4759035">,</span>&nbsp;<span class="string" id="4759037">&#34;info&#34;</span><span class="op" id="4759043">,</span>&nbsp;<span class="num" id="4759045">0</span><span class="op" id="4759046">,</span>&nbsp;<span class="ident" id="4759048">d</span><span class="op" id="4759049">.</span><span class="ident" id="4759050">info</span><span class="op" id="4759054">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759057">for</span>&nbsp;<span class="builtinfunc" id="4759061">len</span><span class="op" id="4759064">(</span><span class="ident" id="4759065">b</span><span class="op" id="4759066">.</span><span class="ident" id="4759067">data</span><span class="op" id="4759071">)</span>&nbsp;<span class="op" id="4759073">&gt;</span>&nbsp;<span class="num" id="4759075">0</span>&nbsp;<span class="op" id="4759077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4759081">len</span>&nbsp;<span class="op" id="4759085">:=</span>&nbsp;<span class="ident" id="4759088">b</span><span class="op" id="4759089">.</span><span class="builtintype" id="4759090">uint32</span><span class="op" id="4759096">(</span><span class="op" id="4759097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759101">if</span>&nbsp;<span class="builtinfunc" id="4759104">len</span>&nbsp;<span class="op" id="4759108">==</span>&nbsp;<span class="num" id="4759111">0xffffffff</span>&nbsp;<span class="op" id="4759122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759127">len64</span>&nbsp;<span class="op" id="4759133">:=</span>&nbsp;<span class="ident" id="4759136">b</span><span class="op" id="4759137">.</span><span class="ident" id="4759138">uint64</span><span class="op" id="4759144">(</span><span class="op" id="4759145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759150">if</span>&nbsp;<span class="ident" id="4759153">len64</span>&nbsp;<span class="op" id="4759159">!=</span>&nbsp;<span class="ident" id="4759162">uint64</span><span class="op" id="4759168">(</span><span class="builtintype" id="4759169">uint32</span><span class="op" id="4759175">(</span><span class="ident" id="4759176">len64</span><span class="op" id="4759181">)</span><span class="op" id="4759182">)</span>&nbsp;<span class="op" id="4759184">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759190">b</span><span class="op" id="4759191">.</span><span class="builtintype" id="4759192">error</span><span class="op" id="4759197">(</span><span class="string" id="4759198">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="4759220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759226">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4759240">len</span>&nbsp;<span class="op" id="4759244">=</span>&nbsp;<span class="builtintype" id="4759246">uint32</span><span class="op" id="4759252">(</span><span class="ident" id="4759253">len64</span><span class="op" id="4759258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759262">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759266">b</span><span class="op" id="4759267">.</span><span class="ident" id="4759268">skip</span><span class="op" id="4759272">(</span><span class="builtintype" id="4759273">int</span><span class="op" id="4759276">(</span><span class="builtinfunc" id="4759277">len</span><span class="op" id="4759280">)</span><span class="op" id="4759281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759285">nunit</span><span class="op" id="4759290">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759297">if</span>&nbsp;<span class="ident" id="4759300">b</span><span class="op" id="4759301">.</span><span class="ident" id="4759302">err</span>&nbsp;<span class="op" id="4759306">!=</span>&nbsp;<span class="builtintype" id="4759309">nil</span>&nbsp;<span class="op" id="4759313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759317">return</span>&nbsp;<span class="builtintype" id="4759324">nil</span><span class="op" id="4759327">,</span>&nbsp;<span class="ident" id="4759329">b</span><span class="op" id="4759330">.</span><span class="ident" id="4759331">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4759340">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759380">b</span>&nbsp;<span class="op" id="4759382">=</span>&nbsp;<span class="ident" id="4759384">makeBuf</span><span class="op" id="4759391">(</span><span class="ident" id="4759392">d</span><span class="op" id="4759393">,</span>&nbsp;<span class="ident" id="4759395">unknownFormat</span><span class="op" id="4759408">{</span><span class="op" id="4759409">}</span><span class="op" id="4759410">,</span>&nbsp;<span class="string" id="4759412">&#34;info&#34;</span><span class="op" id="4759418">,</span>&nbsp;<span class="num" id="4759420">0</span><span class="op" id="4759421">,</span>&nbsp;<span class="ident" id="4759423">d</span><span class="op" id="4759424">.</span><span class="ident" id="4759425">info</span><span class="op" id="4759429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759432">units</span>&nbsp;<span class="op" id="4759438">:=</span>&nbsp;<span class="builtinfunc" id="4759441">make</span><span class="op" id="4759445">(</span><span class="op" id="4759446">[</span><span class="op" id="4759447">]</span><span class="ident" id="4759448">unit</span><span class="op" id="4759452">,</span>&nbsp;<span class="ident" id="4759454">nunit</span><span class="op" id="4759459">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759462">for</span>&nbsp;<span class="ident" id="4759466">i</span>&nbsp;<span class="op" id="4759468">:=</span>&nbsp;<span class="keyword" id="4759471">range</span>&nbsp;<span class="ident" id="4759477">units</span>&nbsp;<span class="op" id="4759483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759487">u</span>&nbsp;<span class="op" id="4759489">:=</span>&nbsp;<span class="op" id="4759492">&amp;</span><span class="ident" id="4759493">units</span><span class="op" id="4759498">[</span><span class="ident" id="4759499">i</span><span class="op" id="4759500">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759504">u</span><span class="op" id="4759505">.</span><span class="ident" id="4759506">base</span>&nbsp;<span class="op" id="4759511">=</span>&nbsp;<span class="ident" id="4759513">b</span><span class="op" id="4759514">.</span><span class="ident" id="4759515">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759521">n</span>&nbsp;<span class="op" id="4759523">:=</span>&nbsp;<span class="ident" id="4759526">b</span><span class="op" id="4759527">.</span><span class="builtintype" id="4759528">uint32</span><span class="op" id="4759534">(</span><span class="op" id="4759535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759539">if</span>&nbsp;<span class="ident" id="4759542">n</span>&nbsp;<span class="op" id="4759544">==</span>&nbsp;<span class="num" id="4759547">0xffffffff</span>&nbsp;<span class="op" id="4759558">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759563">u</span><span class="op" id="4759564">.</span><span class="ident" id="4759565">is64</span>&nbsp;<span class="op" id="4759570">=</span>&nbsp;<span class="builtintype" id="4759572">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759580">n</span>&nbsp;<span class="op" id="4759582">=</span>&nbsp;<span class="builtintype" id="4759584">uint32</span><span class="op" id="4759590">(</span><span class="ident" id="4759591">b</span><span class="op" id="4759592">.</span><span class="ident" id="4759593">uint64</span><span class="op" id="4759599">(</span><span class="op" id="4759600">)</span><span class="op" id="4759601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759609">vers</span>&nbsp;<span class="op" id="4759614">:=</span>&nbsp;<span class="ident" id="4759617">b</span><span class="op" id="4759618">.</span><span class="builtintype" id="4759619">uint16</span><span class="op" id="4759625">(</span><span class="op" id="4759626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759630">if</span>&nbsp;<span class="ident" id="4759633">vers</span>&nbsp;<span class="op" id="4759638">!=</span>&nbsp;<span class="num" id="4759641">2</span>&nbsp;<span class="op" id="4759643">&amp;&amp;</span>&nbsp;<span class="ident" id="4759646">vers</span>&nbsp;<span class="op" id="4759651">!=</span>&nbsp;<span class="num" id="4759654">3</span>&nbsp;<span class="op" id="4759656">&amp;&amp;</span>&nbsp;<span class="ident" id="4759659">vers</span>&nbsp;<span class="op" id="4759664">!=</span>&nbsp;<span class="num" id="4759667">4</span>&nbsp;<span class="op" id="4759669">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759674">b</span><span class="op" id="4759675">.</span><span class="builtintype" id="4759676">error</span><span class="op" id="4759681">(</span><span class="string" id="4759682">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="4759711">+</span>&nbsp;<span class="ident" id="4759713">strconv</span><span class="op" id="4759720">.</span><span class="ident" id="4759721">Itoa</span><span class="op" id="4759725">(</span><span class="builtintype" id="4759726">int</span><span class="op" id="4759729">(</span><span class="ident" id="4759730">vers</span><span class="op" id="4759734">)</span><span class="op" id="4759735">)</span><span class="op" id="4759736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759741">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759753">u</span><span class="op" id="4759754">.</span><span class="ident" id="4759755">vers</span>&nbsp;<span class="op" id="4759760">=</span>&nbsp;<span class="builtintype" id="4759762">int</span><span class="op" id="4759765">(</span><span class="ident" id="4759766">vers</span><span class="op" id="4759770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759774">atable</span><span class="op" id="4759780">,</span>&nbsp;<span class="ident" id="4759782">err</span>&nbsp;<span class="op" id="4759786">:=</span>&nbsp;<span class="ident" id="4759789">d</span><span class="op" id="4759790">.</span><span class="ident" id="4759791">parseAbbrev</span><span class="op" id="4759802">(</span><span class="ident" id="4759803">b</span><span class="op" id="4759804">.</span><span class="builtintype" id="4759805">uint32</span><span class="op" id="4759811">(</span><span class="op" id="4759812">)</span><span class="op" id="4759813">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759817">if</span>&nbsp;<span class="ident" id="4759820">err</span>&nbsp;<span class="op" id="4759824">!=</span>&nbsp;<span class="builtintype" id="4759827">nil</span>&nbsp;<span class="op" id="4759831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759836">if</span>&nbsp;<span class="ident" id="4759839">b</span><span class="op" id="4759840">.</span><span class="ident" id="4759841">err</span>&nbsp;<span class="op" id="4759845">==</span>&nbsp;<span class="builtintype" id="4759848">nil</span>&nbsp;<span class="op" id="4759852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759858">b</span><span class="op" id="4759859">.</span><span class="ident" id="4759860">err</span>&nbsp;<span class="op" id="4759864">=</span>&nbsp;<span class="ident" id="4759866">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759878">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759890">u</span><span class="op" id="4759891">.</span><span class="ident" id="4759892">atable</span>&nbsp;<span class="op" id="4759899">=</span>&nbsp;<span class="ident" id="4759901">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759910">u</span><span class="op" id="4759911">.</span><span class="ident" id="4759912">asize</span>&nbsp;<span class="op" id="4759918">=</span>&nbsp;<span class="builtintype" id="4759920">int</span><span class="op" id="4759923">(</span><span class="ident" id="4759924">b</span><span class="op" id="4759925">.</span><span class="builtintype" id="4759926">uint8</span><span class="op" id="4759931">(</span><span class="op" id="4759932">)</span><span class="op" id="4759933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759937">u</span><span class="op" id="4759938">.</span><span class="ident" id="4759939">off</span>&nbsp;<span class="op" id="4759943">=</span>&nbsp;<span class="ident" id="4759945">b</span><span class="op" id="4759946">.</span><span class="ident" id="4759947">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4759953">u</span><span class="op" id="4759954">.</span><span class="ident" id="4759955">data</span>&nbsp;<span class="op" id="4759960">=</span>&nbsp;<span class="ident" id="4759962">b</span><span class="op" id="4759963">.</span><span class="ident" id="4759964">bytes</span><span class="op" id="4759969">(</span><span class="builtintype" id="4759970">int</span><span class="op" id="4759973">(</span><span class="ident" id="4759974">n</span>&nbsp;<span class="op" id="4759976">-</span>&nbsp;<span class="op" id="4759978">(</span><span class="num" id="4759979">2</span>&nbsp;<span class="op" id="4759981">+</span>&nbsp;<span class="num" id="4759983">4</span>&nbsp;<span class="op" id="4759985">+</span>&nbsp;<span class="num" id="4759987">1</span><span class="op" id="4759988">)</span><span class="op" id="4759989">)</span><span class="op" id="4759990">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4759993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4759996">if</span>&nbsp;<span class="ident" id="4759999">b</span><span class="op" id="4760000">.</span><span class="ident" id="4760001">err</span>&nbsp;<span class="op" id="4760005">!=</span>&nbsp;<span class="builtintype" id="4760008">nil</span>&nbsp;<span class="op" id="4760012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4760016">return</span>&nbsp;<span class="builtintype" id="4760023">nil</span><span class="op" id="4760026">,</span>&nbsp;<span class="ident" id="4760028">b</span><span class="op" id="4760029">.</span><span class="ident" id="4760030">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4760035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4760038">return</span>&nbsp;<span class="ident" id="4760045">units</span><span class="op" id="4760050">,</span>&nbsp;<span class="builtintype" id="4760052">nil</span><br>
<span class="lineno">90</span><span class="op" id="4760056">}</span>
</div>
</body>
</html>
