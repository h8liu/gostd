<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html" class="current">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5424027">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5424083">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5424137">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5424188">package</span>&nbsp;<span class="ident" id="5424196">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5424203">import</span>&nbsp;<span class="string" id="5424210">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5424221">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="5424288">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5424351">type</span>&nbsp;<span class="ident" id="5424356">unit</span>&nbsp;<span class="keyword" id="5424361">struct</span>&nbsp;<span class="op" id="5424368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424371">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5424378">Offset</span>&nbsp;<span class="comment" id="5424385">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424437">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5424444">Offset</span>&nbsp;<span class="comment" id="5424451">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424501">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5424508">[</span><span class="op" id="5424509">]</span><span class="builtintype" id="5424510">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424516">atable</span>&nbsp;<span class="ident" id="5424523">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424536">asize</span>&nbsp;&nbsp;<span class="builtintype" id="5424543">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424548">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5424555">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424560">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5424567">bool</span>&nbsp;<span class="comment" id="5424572">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="5424604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5424607">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5424647">func</span>&nbsp;<span class="op" id="5424652">(</span><span class="ident" id="5424653">u</span>&nbsp;<span class="op" id="5424655">*</span><span class="ident" id="5424656">unit</span><span class="op" id="5424660">)</span>&nbsp;<span class="ident" id="5424662">version</span><span class="op" id="5424669">(</span><span class="op" id="5424670">)</span>&nbsp;<span class="builtintype" id="5424672">int</span>&nbsp;<span class="op" id="5424676">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424679">return</span>&nbsp;<span class="ident" id="5424686">u</span><span class="op" id="5424687">.</span><span class="ident" id="5424688">vers</span><br>
<span class="lineno"></span><span class="op" id="5424693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5424696">func</span>&nbsp;<span class="op" id="5424701">(</span><span class="ident" id="5424702">u</span>&nbsp;<span class="op" id="5424704">*</span><span class="ident" id="5424705">unit</span><span class="op" id="5424709">)</span>&nbsp;<span class="ident" id="5424711">dwarf64</span><span class="op" id="5424718">(</span><span class="op" id="5424719">)</span>&nbsp;<span class="op" id="5424721">(</span><span class="builtintype" id="5424722">bool</span><span class="op" id="5424726">,</span>&nbsp;<span class="builtintype" id="5424728">bool</span><span class="op" id="5424732">)</span>&nbsp;<span class="op" id="5424734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424737">return</span>&nbsp;<span class="ident" id="5424744">u</span><span class="op" id="5424745">.</span><span class="ident" id="5424746">is64</span><span class="op" id="5424750">,</span>&nbsp;<span class="builtintype" id="5424752">true</span><br>
<span class="lineno">30</span><span class="op" id="5424757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5424760">func</span>&nbsp;<span class="op" id="5424765">(</span><span class="ident" id="5424766">u</span>&nbsp;<span class="op" id="5424768">*</span><span class="ident" id="5424769">unit</span><span class="op" id="5424773">)</span>&nbsp;<span class="ident" id="5424775">addrsize</span><span class="op" id="5424783">(</span><span class="op" id="5424784">)</span>&nbsp;<span class="builtintype" id="5424786">int</span>&nbsp;<span class="op" id="5424790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424793">return</span>&nbsp;<span class="ident" id="5424800">u</span><span class="op" id="5424801">.</span><span class="ident" id="5424802">asize</span><br>
<span class="lineno"></span><span class="op" id="5424808">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5424811">func</span>&nbsp;<span class="op" id="5424816">(</span><span class="ident" id="5424817">d</span>&nbsp;<span class="op" id="5424819">*</span><span class="ident" id="5424820">Data</span><span class="op" id="5424824">)</span>&nbsp;<span class="ident" id="5424826">parseUnits</span><span class="op" id="5424836">(</span><span class="op" id="5424837">)</span>&nbsp;<span class="op" id="5424839">(</span><span class="op" id="5424840">[</span><span class="op" id="5424841">]</span><span class="ident" id="5424842">unit</span><span class="op" id="5424846">,</span>&nbsp;<span class="builtintype" id="5424848">error</span><span class="op" id="5424853">)</span>&nbsp;<span class="op" id="5424855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5424858">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424875">nunit</span>&nbsp;<span class="op" id="5424881">:=</span>&nbsp;<span class="num" id="5424884">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5424887">b</span>&nbsp;<span class="op" id="5424889">:=</span>&nbsp;<span class="ident" id="5424892">makeBuf</span><span class="op" id="5424899">(</span><span class="ident" id="5424900">d</span><span class="op" id="5424901">,</span>&nbsp;<span class="ident" id="5424903">unknownFormat</span><span class="op" id="5424916">{</span><span class="op" id="5424917">}</span><span class="op" id="5424918">,</span>&nbsp;<span class="string" id="5424920">&#34;info&#34;</span><span class="op" id="5424926">,</span>&nbsp;<span class="num" id="5424928">0</span><span class="op" id="5424929">,</span>&nbsp;<span class="ident" id="5424931">d</span><span class="op" id="5424932">.</span><span class="ident" id="5424933">info</span><span class="op" id="5424937">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424940">for</span>&nbsp;<span class="builtinfunc" id="5424944">len</span><span class="op" id="5424947">(</span><span class="ident" id="5424948">b</span><span class="op" id="5424949">.</span><span class="ident" id="5424950">data</span><span class="op" id="5424954">)</span>&nbsp;<span class="op" id="5424956">&gt;</span>&nbsp;<span class="num" id="5424958">0</span>&nbsp;<span class="op" id="5424960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5424964">len</span>&nbsp;<span class="op" id="5424968">:=</span>&nbsp;<span class="ident" id="5424971">b</span><span class="op" id="5424972">.</span><span class="builtintype" id="5424973">uint32</span><span class="op" id="5424979">(</span><span class="op" id="5424980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5424984">if</span>&nbsp;<span class="builtinfunc" id="5424987">len</span>&nbsp;<span class="op" id="5424991">==</span>&nbsp;<span class="num" id="5424994">0xffffffff</span>&nbsp;<span class="op" id="5425005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425010">len64</span>&nbsp;<span class="op" id="5425016">:=</span>&nbsp;<span class="ident" id="5425019">b</span><span class="op" id="5425020">.</span><span class="ident" id="5425021">uint64</span><span class="op" id="5425027">(</span><span class="op" id="5425028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425033">if</span>&nbsp;<span class="ident" id="5425036">len64</span>&nbsp;<span class="op" id="5425042">!=</span>&nbsp;<span class="ident" id="5425045">uint64</span><span class="op" id="5425051">(</span><span class="builtintype" id="5425052">uint32</span><span class="op" id="5425058">(</span><span class="ident" id="5425059">len64</span><span class="op" id="5425064">)</span><span class="op" id="5425065">)</span>&nbsp;<span class="op" id="5425067">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425073">b</span><span class="op" id="5425074">.</span><span class="builtintype" id="5425075">error</span><span class="op" id="5425080">(</span><span class="string" id="5425081">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5425103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425109">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5425123">len</span>&nbsp;<span class="op" id="5425127">=</span>&nbsp;<span class="builtintype" id="5425129">uint32</span><span class="op" id="5425135">(</span><span class="ident" id="5425136">len64</span><span class="op" id="5425141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425145">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425149">b</span><span class="op" id="5425150">.</span><span class="ident" id="5425151">skip</span><span class="op" id="5425155">(</span><span class="builtintype" id="5425156">int</span><span class="op" id="5425159">(</span><span class="builtinfunc" id="5425160">len</span><span class="op" id="5425163">)</span><span class="op" id="5425164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425168">nunit</span><span class="op" id="5425173">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425180">if</span>&nbsp;<span class="ident" id="5425183">b</span><span class="op" id="5425184">.</span><span class="ident" id="5425185">err</span>&nbsp;<span class="op" id="5425189">!=</span>&nbsp;<span class="ident" id="5425192">nil</span>&nbsp;<span class="op" id="5425196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425200">return</span>&nbsp;<span class="ident" id="5425207">nil</span><span class="op" id="5425210">,</span>&nbsp;<span class="ident" id="5425212">b</span><span class="op" id="5425213">.</span><span class="ident" id="5425214">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5425223">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425263">b</span>&nbsp;<span class="op" id="5425265">=</span>&nbsp;<span class="ident" id="5425267">makeBuf</span><span class="op" id="5425274">(</span><span class="ident" id="5425275">d</span><span class="op" id="5425276">,</span>&nbsp;<span class="ident" id="5425278">unknownFormat</span><span class="op" id="5425291">{</span><span class="op" id="5425292">}</span><span class="op" id="5425293">,</span>&nbsp;<span class="string" id="5425295">&#34;info&#34;</span><span class="op" id="5425301">,</span>&nbsp;<span class="num" id="5425303">0</span><span class="op" id="5425304">,</span>&nbsp;<span class="ident" id="5425306">d</span><span class="op" id="5425307">.</span><span class="ident" id="5425308">info</span><span class="op" id="5425312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425315">units</span>&nbsp;<span class="op" id="5425321">:=</span>&nbsp;<span class="builtinfunc" id="5425324">make</span><span class="op" id="5425328">(</span><span class="op" id="5425329">[</span><span class="op" id="5425330">]</span><span class="ident" id="5425331">unit</span><span class="op" id="5425335">,</span>&nbsp;<span class="ident" id="5425337">nunit</span><span class="op" id="5425342">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425345">for</span>&nbsp;<span class="ident" id="5425349">i</span>&nbsp;<span class="op" id="5425351">:=</span>&nbsp;<span class="keyword" id="5425354">range</span>&nbsp;<span class="ident" id="5425360">units</span>&nbsp;<span class="op" id="5425366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425370">u</span>&nbsp;<span class="op" id="5425372">:=</span>&nbsp;<span class="op" id="5425375">&amp;</span><span class="ident" id="5425376">units</span><span class="op" id="5425381">[</span><span class="ident" id="5425382">i</span><span class="op" id="5425383">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425387">u</span><span class="op" id="5425388">.</span><span class="ident" id="5425389">base</span>&nbsp;<span class="op" id="5425394">=</span>&nbsp;<span class="ident" id="5425396">b</span><span class="op" id="5425397">.</span><span class="ident" id="5425398">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425404">n</span>&nbsp;<span class="op" id="5425406">:=</span>&nbsp;<span class="ident" id="5425409">b</span><span class="op" id="5425410">.</span><span class="builtintype" id="5425411">uint32</span><span class="op" id="5425417">(</span><span class="op" id="5425418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425422">if</span>&nbsp;<span class="ident" id="5425425">n</span>&nbsp;<span class="op" id="5425427">==</span>&nbsp;<span class="num" id="5425430">0xffffffff</span>&nbsp;<span class="op" id="5425441">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425446">u</span><span class="op" id="5425447">.</span><span class="ident" id="5425448">is64</span>&nbsp;<span class="op" id="5425453">=</span>&nbsp;<span class="builtintype" id="5425455">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425463">n</span>&nbsp;<span class="op" id="5425465">=</span>&nbsp;<span class="builtintype" id="5425467">uint32</span><span class="op" id="5425473">(</span><span class="ident" id="5425474">b</span><span class="op" id="5425475">.</span><span class="ident" id="5425476">uint64</span><span class="op" id="5425482">(</span><span class="op" id="5425483">)</span><span class="op" id="5425484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425492">vers</span>&nbsp;<span class="op" id="5425497">:=</span>&nbsp;<span class="ident" id="5425500">b</span><span class="op" id="5425501">.</span><span class="builtintype" id="5425502">uint16</span><span class="op" id="5425508">(</span><span class="op" id="5425509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425513">if</span>&nbsp;<span class="ident" id="5425516">vers</span>&nbsp;<span class="op" id="5425521">!=</span>&nbsp;<span class="num" id="5425524">2</span>&nbsp;<span class="op" id="5425526">&amp;&amp;</span>&nbsp;<span class="ident" id="5425529">vers</span>&nbsp;<span class="op" id="5425534">!=</span>&nbsp;<span class="num" id="5425537">3</span>&nbsp;<span class="op" id="5425539">&amp;&amp;</span>&nbsp;<span class="ident" id="5425542">vers</span>&nbsp;<span class="op" id="5425547">!=</span>&nbsp;<span class="num" id="5425550">4</span>&nbsp;<span class="op" id="5425552">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425557">b</span><span class="op" id="5425558">.</span><span class="builtintype" id="5425559">error</span><span class="op" id="5425564">(</span><span class="string" id="5425565">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5425594">+</span>&nbsp;<span class="ident" id="5425596">strconv</span><span class="op" id="5425603">.</span><span class="ident" id="5425604">Itoa</span><span class="op" id="5425608">(</span><span class="builtintype" id="5425609">int</span><span class="op" id="5425612">(</span><span class="ident" id="5425613">vers</span><span class="op" id="5425617">)</span><span class="op" id="5425618">)</span><span class="op" id="5425619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425624">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425636">u</span><span class="op" id="5425637">.</span><span class="ident" id="5425638">vers</span>&nbsp;<span class="op" id="5425643">=</span>&nbsp;<span class="builtintype" id="5425645">int</span><span class="op" id="5425648">(</span><span class="ident" id="5425649">vers</span><span class="op" id="5425653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425657">atable</span><span class="op" id="5425663">,</span>&nbsp;<span class="ident" id="5425665">err</span>&nbsp;<span class="op" id="5425669">:=</span>&nbsp;<span class="ident" id="5425672">d</span><span class="op" id="5425673">.</span><span class="ident" id="5425674">parseAbbrev</span><span class="op" id="5425685">(</span><span class="ident" id="5425686">b</span><span class="op" id="5425687">.</span><span class="builtintype" id="5425688">uint32</span><span class="op" id="5425694">(</span><span class="op" id="5425695">)</span><span class="op" id="5425696">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425700">if</span>&nbsp;<span class="ident" id="5425703">err</span>&nbsp;<span class="op" id="5425707">!=</span>&nbsp;<span class="ident" id="5425710">nil</span>&nbsp;<span class="op" id="5425714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425719">if</span>&nbsp;<span class="ident" id="5425722">b</span><span class="op" id="5425723">.</span><span class="ident" id="5425724">err</span>&nbsp;<span class="op" id="5425728">==</span>&nbsp;<span class="ident" id="5425731">nil</span>&nbsp;<span class="op" id="5425735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425741">b</span><span class="op" id="5425742">.</span><span class="ident" id="5425743">err</span>&nbsp;<span class="op" id="5425747">=</span>&nbsp;<span class="ident" id="5425749">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425761">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425773">u</span><span class="op" id="5425774">.</span><span class="ident" id="5425775">atable</span>&nbsp;<span class="op" id="5425782">=</span>&nbsp;<span class="ident" id="5425784">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425793">u</span><span class="op" id="5425794">.</span><span class="ident" id="5425795">asize</span>&nbsp;<span class="op" id="5425801">=</span>&nbsp;<span class="builtintype" id="5425803">int</span><span class="op" id="5425806">(</span><span class="ident" id="5425807">b</span><span class="op" id="5425808">.</span><span class="builtintype" id="5425809">uint8</span><span class="op" id="5425814">(</span><span class="op" id="5425815">)</span><span class="op" id="5425816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425820">u</span><span class="op" id="5425821">.</span><span class="ident" id="5425822">off</span>&nbsp;<span class="op" id="5425826">=</span>&nbsp;<span class="ident" id="5425828">b</span><span class="op" id="5425829">.</span><span class="ident" id="5425830">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5425836">u</span><span class="op" id="5425837">.</span><span class="ident" id="5425838">data</span>&nbsp;<span class="op" id="5425843">=</span>&nbsp;<span class="ident" id="5425845">b</span><span class="op" id="5425846">.</span><span class="ident" id="5425847">bytes</span><span class="op" id="5425852">(</span><span class="builtintype" id="5425853">int</span><span class="op" id="5425856">(</span><span class="ident" id="5425857">n</span>&nbsp;<span class="op" id="5425859">-</span>&nbsp;<span class="op" id="5425861">(</span><span class="num" id="5425862">2</span>&nbsp;<span class="op" id="5425864">+</span>&nbsp;<span class="num" id="5425866">4</span>&nbsp;<span class="op" id="5425868">+</span>&nbsp;<span class="num" id="5425870">1</span><span class="op" id="5425871">)</span><span class="op" id="5425872">)</span><span class="op" id="5425873">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425879">if</span>&nbsp;<span class="ident" id="5425882">b</span><span class="op" id="5425883">.</span><span class="ident" id="5425884">err</span>&nbsp;<span class="op" id="5425888">!=</span>&nbsp;<span class="ident" id="5425891">nil</span>&nbsp;<span class="op" id="5425895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425899">return</span>&nbsp;<span class="ident" id="5425906">nil</span><span class="op" id="5425909">,</span>&nbsp;<span class="ident" id="5425911">b</span><span class="op" id="5425912">.</span><span class="ident" id="5425913">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5425918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5425921">return</span>&nbsp;<span class="ident" id="5425928">units</span><span class="op" id="5425933">,</span>&nbsp;<span class="ident" id="5425935">nil</span><br>
<span class="lineno">90</span><span class="op" id="5425939">}</span>
</div>
</body>
</html>
