<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6716410">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6716465">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6716519">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6716570">package</span>&nbsp;<span class="ident" id="6716578">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6716583">import</span>&nbsp;<span class="op" id="6716590">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716593">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716602">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716618">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716635">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716651">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716658">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716666">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716677">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6716688">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6716698">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6716701">func</span>&nbsp;<span class="ident" id="6716706">TestZeroRat</span><span class="op" id="6716717">(</span><span class="ident" id="6716718">t</span>&nbsp;<span class="op" id="6716720">*</span><span class="ident" id="6716721">testing</span><span class="op" id="6716728">.</span><span class="ident" id="6716729">T</span><span class="op" id="6716730">)</span>&nbsp;<span class="op" id="6716732">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6716735">var</span>&nbsp;<span class="ident" id="6716739">x</span><span class="op" id="6716740">,</span>&nbsp;<span class="ident" id="6716742">y</span><span class="op" id="6716743">,</span>&nbsp;<span class="ident" id="6716745">z</span>&nbsp;<span class="ident" id="6716747">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6716752">y</span><span class="op" id="6716753">.</span><span class="ident" id="6716754">SetFrac64</span><span class="op" id="6716763">(</span><span class="num" id="6716764">0</span><span class="op" id="6716765">,</span>&nbsp;<span class="num" id="6716767">42</span><span class="op" id="6716769">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6716773">if</span>&nbsp;<span class="ident" id="6716776">x</span><span class="op" id="6716777">.</span><span class="ident" id="6716778">Cmp</span><span class="op" id="6716781">(</span><span class="op" id="6716782">&amp;</span><span class="ident" id="6716783">y</span><span class="op" id="6716784">)</span>&nbsp;<span class="op" id="6716786">!=</span>&nbsp;<span class="num" id="6716789">0</span>&nbsp;<span class="op" id="6716791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6716795">t</span><span class="op" id="6716796">.</span><span class="ident" id="6716797">Errorf</span><span class="op" id="6716803">(</span><span class="string" id="6716804">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="6716843">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6716846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6716850">if</span>&nbsp;<span class="ident" id="6716853">s</span>&nbsp;<span class="op" id="6716855">:=</span>&nbsp;<span class="ident" id="6716858">x</span><span class="op" id="6716859">.</span><span class="ident" id="6716860">String</span><span class="op" id="6716866">(</span><span class="op" id="6716867">)</span><span class="op" id="6716868">;</span>&nbsp;<span class="ident" id="6716870">s</span>&nbsp;<span class="op" id="6716872">!=</span>&nbsp;<span class="string" id="6716875">&#34;0/1&#34;</span>&nbsp;<span class="op" id="6716881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6716885">t</span><span class="op" id="6716886">.</span><span class="ident" id="6716887">Errorf</span><span class="op" id="6716893">(</span><span class="string" id="6716894">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="6716916">,</span>&nbsp;<span class="ident" id="6716918">s</span><span class="op" id="6716919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6716922">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6716926">if</span>&nbsp;<span class="ident" id="6716929">s</span>&nbsp;<span class="op" id="6716931">:=</span>&nbsp;<span class="ident" id="6716934">x</span><span class="op" id="6716935">.</span><span class="ident" id="6716936">RatString</span><span class="op" id="6716945">(</span><span class="op" id="6716946">)</span><span class="op" id="6716947">;</span>&nbsp;<span class="ident" id="6716949">s</span>&nbsp;<span class="op" id="6716951">!=</span>&nbsp;<span class="string" id="6716954">&#34;0&#34;</span>&nbsp;<span class="op" id="6716958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6716962">t</span><span class="op" id="6716963">.</span><span class="ident" id="6716964">Errorf</span><span class="op" id="6716970">(</span><span class="string" id="6716971">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6716991">,</span>&nbsp;<span class="ident" id="6716993">s</span><span class="op" id="6716994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6716997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717001">z</span><span class="op" id="6717002">.</span><span class="ident" id="6717003">Add</span><span class="op" id="6717006">(</span><span class="op" id="6717007">&amp;</span><span class="ident" id="6717008">x</span><span class="op" id="6717009">,</span>&nbsp;<span class="op" id="6717011">&amp;</span><span class="ident" id="6717012">y</span><span class="op" id="6717013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6717016">if</span>&nbsp;<span class="ident" id="6717019">s</span>&nbsp;<span class="op" id="6717021">:=</span>&nbsp;<span class="ident" id="6717024">z</span><span class="op" id="6717025">.</span><span class="ident" id="6717026">RatString</span><span class="op" id="6717035">(</span><span class="op" id="6717036">)</span><span class="op" id="6717037">;</span>&nbsp;<span class="ident" id="6717039">s</span>&nbsp;<span class="op" id="6717041">!=</span>&nbsp;<span class="string" id="6717044">&#34;0&#34;</span>&nbsp;<span class="op" id="6717048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717052">t</span><span class="op" id="6717053">.</span><span class="ident" id="6717054">Errorf</span><span class="op" id="6717060">(</span><span class="string" id="6717061">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6717083">,</span>&nbsp;<span class="ident" id="6717085">s</span><span class="op" id="6717086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717093">z</span><span class="op" id="6717094">.</span><span class="ident" id="6717095">Sub</span><span class="op" id="6717098">(</span><span class="op" id="6717099">&amp;</span><span class="ident" id="6717100">x</span><span class="op" id="6717101">,</span>&nbsp;<span class="op" id="6717103">&amp;</span><span class="ident" id="6717104">y</span><span class="op" id="6717105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6717108">if</span>&nbsp;<span class="ident" id="6717111">s</span>&nbsp;<span class="op" id="6717113">:=</span>&nbsp;<span class="ident" id="6717116">z</span><span class="op" id="6717117">.</span><span class="ident" id="6717118">RatString</span><span class="op" id="6717127">(</span><span class="op" id="6717128">)</span><span class="op" id="6717129">;</span>&nbsp;<span class="ident" id="6717131">s</span>&nbsp;<span class="op" id="6717133">!=</span>&nbsp;<span class="string" id="6717136">&#34;0&#34;</span>&nbsp;<span class="op" id="6717140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717144">t</span><span class="op" id="6717145">.</span><span class="ident" id="6717146">Errorf</span><span class="op" id="6717152">(</span><span class="string" id="6717153">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6717175">,</span>&nbsp;<span class="ident" id="6717177">s</span><span class="op" id="6717178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717185">z</span><span class="op" id="6717186">.</span><span class="ident" id="6717187">Mul</span><span class="op" id="6717190">(</span><span class="op" id="6717191">&amp;</span><span class="ident" id="6717192">x</span><span class="op" id="6717193">,</span>&nbsp;<span class="op" id="6717195">&amp;</span><span class="ident" id="6717196">y</span><span class="op" id="6717197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6717200">if</span>&nbsp;<span class="ident" id="6717203">s</span>&nbsp;<span class="op" id="6717205">:=</span>&nbsp;<span class="ident" id="6717208">z</span><span class="op" id="6717209">.</span><span class="ident" id="6717210">RatString</span><span class="op" id="6717219">(</span><span class="op" id="6717220">)</span><span class="op" id="6717221">;</span>&nbsp;<span class="ident" id="6717223">s</span>&nbsp;<span class="op" id="6717225">!=</span>&nbsp;<span class="string" id="6717228">&#34;0&#34;</span>&nbsp;<span class="op" id="6717232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717236">t</span><span class="op" id="6717237">.</span><span class="ident" id="6717238">Errorf</span><span class="op" id="6717244">(</span><span class="string" id="6717245">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6717267">,</span>&nbsp;<span class="ident" id="6717269">s</span><span class="op" id="6717270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6717277">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6717308">defer</span>&nbsp;<span class="keyword" id="6717314">func</span><span class="op" id="6717318">(</span><span class="op" id="6717319">)</span>&nbsp;<span class="op" id="6717321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6717325">if</span>&nbsp;<span class="ident" id="6717328">s</span>&nbsp;<span class="op" id="6717330">:=</span>&nbsp;<span class="builtinfunc" id="6717333">recover</span><span class="op" id="6717340">(</span><span class="op" id="6717341">)</span><span class="op" id="6717342">;</span>&nbsp;<span class="ident" id="6717344">s</span>&nbsp;<span class="op" id="6717346">==</span>&nbsp;<span class="ident" id="6717349">nil</span>&nbsp;<span class="op" id="6717353">||</span>&nbsp;<span class="ident" id="6717356">s</span><span class="op" id="6717357">.</span><span class="op" id="6717358">(</span><span class="builtintype" id="6717359">string</span><span class="op" id="6717365">)</span>&nbsp;<span class="op" id="6717367">!=</span>&nbsp;<span class="string" id="6717370">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="6717389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6717394">panic</span><span class="op" id="6717399">(</span><span class="ident" id="6717400">s</span><span class="op" id="6717401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717405">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717408">}</span><span class="op" id="6717409">(</span><span class="op" id="6717410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717413">z</span><span class="op" id="6717414">.</span><span class="ident" id="6717415">Quo</span><span class="op" id="6717418">(</span><span class="op" id="6717419">&amp;</span><span class="ident" id="6717420">x</span><span class="op" id="6717421">,</span>&nbsp;<span class="op" id="6717423">&amp;</span><span class="ident" id="6717424">y</span><span class="op" id="6717425">)</span><br>
<span class="lineno"></span><span class="op" id="6717427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6717430">var</span>&nbsp;<span class="ident" id="6717434">setStringTests</span>&nbsp;<span class="op" id="6717449">=</span>&nbsp;<span class="op" id="6717451">[</span><span class="op" id="6717452">]</span><span class="keyword" id="6717453">struct</span>&nbsp;<span class="op" id="6717460">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717463">in</span><span class="op" id="6717465">,</span>&nbsp;<span class="ident" id="6717467">out</span>&nbsp;<span class="builtintype" id="6717471">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6717479">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6717487">bool</span><br>
<span class="lineno"></span><span class="op" id="6717492">}</span><span class="op" id="6717493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717496">{</span><span class="string" id="6717497">&#34;0&#34;</span><span class="op" id="6717500">,</span>&nbsp;<span class="string" id="6717502">&#34;0&#34;</span><span class="op" id="6717505">,</span>&nbsp;<span class="builtintype" id="6717507">true</span><span class="op" id="6717511">}</span><span class="op" id="6717512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717515">{</span><span class="string" id="6717516">&#34;-0&#34;</span><span class="op" id="6717520">,</span>&nbsp;<span class="string" id="6717522">&#34;0&#34;</span><span class="op" id="6717525">,</span>&nbsp;<span class="builtintype" id="6717527">true</span><span class="op" id="6717531">}</span><span class="op" id="6717532">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717535">{</span><span class="string" id="6717536">&#34;1&#34;</span><span class="op" id="6717539">,</span>&nbsp;<span class="string" id="6717541">&#34;1&#34;</span><span class="op" id="6717544">,</span>&nbsp;<span class="builtintype" id="6717546">true</span><span class="op" id="6717550">}</span><span class="op" id="6717551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717554">{</span><span class="string" id="6717555">&#34;-1&#34;</span><span class="op" id="6717559">,</span>&nbsp;<span class="string" id="6717561">&#34;-1&#34;</span><span class="op" id="6717565">,</span>&nbsp;<span class="builtintype" id="6717567">true</span><span class="op" id="6717571">}</span><span class="op" id="6717572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717575">{</span><span class="string" id="6717576">&#34;1.&#34;</span><span class="op" id="6717580">,</span>&nbsp;<span class="string" id="6717582">&#34;1&#34;</span><span class="op" id="6717585">,</span>&nbsp;<span class="builtintype" id="6717587">true</span><span class="op" id="6717591">}</span><span class="op" id="6717592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717595">{</span><span class="string" id="6717596">&#34;1e0&#34;</span><span class="op" id="6717601">,</span>&nbsp;<span class="string" id="6717603">&#34;1&#34;</span><span class="op" id="6717606">,</span>&nbsp;<span class="builtintype" id="6717608">true</span><span class="op" id="6717612">}</span><span class="op" id="6717613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717616">{</span><span class="string" id="6717617">&#34;1.e1&#34;</span><span class="op" id="6717623">,</span>&nbsp;<span class="string" id="6717625">&#34;10&#34;</span><span class="op" id="6717629">,</span>&nbsp;<span class="builtintype" id="6717631">true</span><span class="op" id="6717635">}</span><span class="op" id="6717636">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717639">{</span><span class="ident" id="6717640">in</span><span class="op" id="6717642">:</span>&nbsp;<span class="string" id="6717644">&#34;1e&#34;</span><span class="op" id="6717648">,</span>&nbsp;<span class="ident" id="6717650">ok</span><span class="op" id="6717652">:</span>&nbsp;<span class="builtintype" id="6717654">false</span><span class="op" id="6717659">}</span><span class="op" id="6717660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717663">{</span><span class="ident" id="6717664">in</span><span class="op" id="6717666">:</span>&nbsp;<span class="string" id="6717668">&#34;1.e&#34;</span><span class="op" id="6717673">,</span>&nbsp;<span class="ident" id="6717675">ok</span><span class="op" id="6717677">:</span>&nbsp;<span class="builtintype" id="6717679">false</span><span class="op" id="6717684">}</span><span class="op" id="6717685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717688">{</span><span class="ident" id="6717689">in</span><span class="op" id="6717691">:</span>&nbsp;<span class="string" id="6717693">&#34;1e+14e-5&#34;</span><span class="op" id="6717703">,</span>&nbsp;<span class="ident" id="6717705">ok</span><span class="op" id="6717707">:</span>&nbsp;<span class="builtintype" id="6717709">false</span><span class="op" id="6717714">}</span><span class="op" id="6717715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717718">{</span><span class="ident" id="6717719">in</span><span class="op" id="6717721">:</span>&nbsp;<span class="string" id="6717723">&#34;1e4.5&#34;</span><span class="op" id="6717730">,</span>&nbsp;<span class="ident" id="6717732">ok</span><span class="op" id="6717734">:</span>&nbsp;<span class="builtintype" id="6717736">false</span><span class="op" id="6717741">}</span><span class="op" id="6717742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717745">{</span><span class="ident" id="6717746">in</span><span class="op" id="6717748">:</span>&nbsp;<span class="string" id="6717750">&#34;r&#34;</span><span class="op" id="6717753">,</span>&nbsp;<span class="ident" id="6717755">ok</span><span class="op" id="6717757">:</span>&nbsp;<span class="builtintype" id="6717759">false</span><span class="op" id="6717764">}</span><span class="op" id="6717765">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717768">{</span><span class="ident" id="6717769">in</span><span class="op" id="6717771">:</span>&nbsp;<span class="string" id="6717773">&#34;a/b&#34;</span><span class="op" id="6717778">,</span>&nbsp;<span class="ident" id="6717780">ok</span><span class="op" id="6717782">:</span>&nbsp;<span class="builtintype" id="6717784">false</span><span class="op" id="6717789">}</span><span class="op" id="6717790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717793">{</span><span class="ident" id="6717794">in</span><span class="op" id="6717796">:</span>&nbsp;<span class="string" id="6717798">&#34;a.b&#34;</span><span class="op" id="6717803">,</span>&nbsp;<span class="ident" id="6717805">ok</span><span class="op" id="6717807">:</span>&nbsp;<span class="builtintype" id="6717809">false</span><span class="op" id="6717814">}</span><span class="op" id="6717815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717818">{</span><span class="string" id="6717819">&#34;-0.1&#34;</span><span class="op" id="6717825">,</span>&nbsp;<span class="string" id="6717827">&#34;-1/10&#34;</span><span class="op" id="6717834">,</span>&nbsp;<span class="builtintype" id="6717836">true</span><span class="op" id="6717840">}</span><span class="op" id="6717841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717844">{</span><span class="string" id="6717845">&#34;-.1&#34;</span><span class="op" id="6717850">,</span>&nbsp;<span class="string" id="6717852">&#34;-1/10&#34;</span><span class="op" id="6717859">,</span>&nbsp;<span class="builtintype" id="6717861">true</span><span class="op" id="6717865">}</span><span class="op" id="6717866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717869">{</span><span class="string" id="6717870">&#34;2/4&#34;</span><span class="op" id="6717875">,</span>&nbsp;<span class="string" id="6717877">&#34;1/2&#34;</span><span class="op" id="6717882">,</span>&nbsp;<span class="builtintype" id="6717884">true</span><span class="op" id="6717888">}</span><span class="op" id="6717889">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717892">{</span><span class="string" id="6717893">&#34;.25&#34;</span><span class="op" id="6717898">,</span>&nbsp;<span class="string" id="6717900">&#34;1/4&#34;</span><span class="op" id="6717905">,</span>&nbsp;<span class="builtintype" id="6717907">true</span><span class="op" id="6717911">}</span><span class="op" id="6717912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717915">{</span><span class="string" id="6717916">&#34;-1/5&#34;</span><span class="op" id="6717922">,</span>&nbsp;<span class="string" id="6717924">&#34;-1/5&#34;</span><span class="op" id="6717930">,</span>&nbsp;<span class="builtintype" id="6717932">true</span><span class="op" id="6717936">}</span><span class="op" id="6717937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717940">{</span><span class="string" id="6717941">&#34;8129567.7690E14&#34;</span><span class="op" id="6717958">,</span>&nbsp;<span class="string" id="6717960">&#34;812956776900000000000&#34;</span><span class="op" id="6717983">,</span>&nbsp;<span class="builtintype" id="6717985">true</span><span class="op" id="6717989">}</span><span class="op" id="6717990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6717993">{</span><span class="string" id="6717994">&#34;78189e+4&#34;</span><span class="op" id="6718004">,</span>&nbsp;<span class="string" id="6718006">&#34;781890000&#34;</span><span class="op" id="6718017">,</span>&nbsp;<span class="builtintype" id="6718019">true</span><span class="op" id="6718023">}</span><span class="op" id="6718024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718027">{</span><span class="string" id="6718028">&#34;553019.8935e+8&#34;</span><span class="op" id="6718044">,</span>&nbsp;<span class="string" id="6718046">&#34;55301989350000&#34;</span><span class="op" id="6718062">,</span>&nbsp;<span class="builtintype" id="6718064">true</span><span class="op" id="6718068">}</span><span class="op" id="6718069">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718072">{</span><span class="string" id="6718073">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="6718108">,</span>&nbsp;<span class="string" id="6718110">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="6718153">,</span>&nbsp;<span class="builtintype" id="6718155">true</span><span class="op" id="6718159">}</span><span class="op" id="6718160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718163">{</span><span class="string" id="6718164">&#34;9877861857500000E-7&#34;</span><span class="op" id="6718185">,</span>&nbsp;<span class="string" id="6718187">&#34;3951144743/4&#34;</span><span class="op" id="6718201">,</span>&nbsp;<span class="builtintype" id="6718203">true</span><span class="op" id="6718207">}</span><span class="op" id="6718208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718211">{</span><span class="string" id="6718212">&#34;2169378.417e-3&#34;</span><span class="op" id="6718228">,</span>&nbsp;<span class="string" id="6718230">&#34;2169378417/1000000&#34;</span><span class="op" id="6718250">,</span>&nbsp;<span class="builtintype" id="6718252">true</span><span class="op" id="6718256">}</span><span class="op" id="6718257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718260">{</span><span class="string" id="6718261">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="6718299">,</span>&nbsp;<span class="string" id="6718301">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="6718339">,</span>&nbsp;<span class="builtintype" id="6718341">true</span><span class="op" id="6718345">}</span><span class="op" id="6718346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718349">{</span><span class="string" id="6718350">&#34;53/70893980658822810696&#34;</span><span class="op" id="6718375">,</span>&nbsp;<span class="string" id="6718377">&#34;53/70893980658822810696&#34;</span><span class="op" id="6718402">,</span>&nbsp;<span class="builtintype" id="6718404">true</span><span class="op" id="6718408">}</span><span class="op" id="6718409">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718412">{</span><span class="string" id="6718413">&#34;106/141787961317645621392&#34;</span><span class="op" id="6718440">,</span>&nbsp;<span class="string" id="6718442">&#34;53/70893980658822810696&#34;</span><span class="op" id="6718467">,</span>&nbsp;<span class="builtintype" id="6718469">true</span><span class="op" id="6718473">}</span><span class="op" id="6718474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718477">{</span><span class="string" id="6718478">&#34;204211327800791583.81095&#34;</span><span class="op" id="6718504">,</span>&nbsp;<span class="string" id="6718506">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="6718536">,</span>&nbsp;<span class="builtintype" id="6718538">true</span><span class="op" id="6718542">}</span><span class="op" id="6718543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718546">{</span><span class="ident" id="6718547">in</span><span class="op" id="6718549">:</span>&nbsp;<span class="string" id="6718551">&#34;1/0&#34;</span><span class="op" id="6718556">,</span>&nbsp;<span class="ident" id="6718558">ok</span><span class="op" id="6718560">:</span>&nbsp;<span class="builtintype" id="6718562">false</span><span class="op" id="6718567">}</span><span class="op" id="6718568">,</span><br>
<span class="lineno"></span><span class="op" id="6718570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="6718573">func</span>&nbsp;<span class="ident" id="6718578">TestRatSetString</span><span class="op" id="6718594">(</span><span class="ident" id="6718595">t</span>&nbsp;<span class="op" id="6718597">*</span><span class="ident" id="6718598">testing</span><span class="op" id="6718605">.</span><span class="ident" id="6718606">T</span><span class="op" id="6718607">)</span>&nbsp;<span class="op" id="6718609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6718612">for</span>&nbsp;<span class="ident" id="6718616">i</span><span class="op" id="6718617">,</span>&nbsp;<span class="ident" id="6718619">test</span>&nbsp;<span class="op" id="6718624">:=</span>&nbsp;<span class="keyword" id="6718627">range</span>&nbsp;<span class="ident" id="6718633">setStringTests</span>&nbsp;<span class="op" id="6718648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6718652">x</span><span class="op" id="6718653">,</span>&nbsp;<span class="ident" id="6718655">ok</span>&nbsp;<span class="op" id="6718658">:=</span>&nbsp;<span class="builtinfunc" id="6718661">new</span><span class="op" id="6718664">(</span><span class="ident" id="6718665">Rat</span><span class="op" id="6718668">)</span><span class="op" id="6718669">.</span><span class="ident" id="6718670">SetString</span><span class="op" id="6718679">(</span><span class="ident" id="6718680">test</span><span class="op" id="6718684">.</span><span class="ident" id="6718685">in</span><span class="op" id="6718687">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6718692">if</span>&nbsp;<span class="ident" id="6718695">ok</span>&nbsp;<span class="op" id="6718698">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6718703">if</span>&nbsp;<span class="op" id="6718706">!</span><span class="ident" id="6718707">test</span><span class="op" id="6718711">.</span><span class="ident" id="6718712">ok</span>&nbsp;<span class="op" id="6718715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6718721">t</span><span class="op" id="6718722">.</span><span class="ident" id="6718723">Errorf</span><span class="op" id="6718729">(</span><span class="string" id="6718730">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="6718766">,</span>&nbsp;<span class="ident" id="6718768">i</span><span class="op" id="6718769">,</span>&nbsp;<span class="ident" id="6718771">test</span><span class="op" id="6718775">.</span><span class="ident" id="6718776">in</span><span class="op" id="6718778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718783">}</span>&nbsp;<span class="keyword" id="6718785">else</span>&nbsp;<span class="keyword" id="6718790">if</span>&nbsp;<span class="ident" id="6718793">x</span><span class="op" id="6718794">.</span><span class="ident" id="6718795">RatString</span><span class="op" id="6718804">(</span><span class="op" id="6718805">)</span>&nbsp;<span class="op" id="6718807">!=</span>&nbsp;<span class="ident" id="6718810">test</span><span class="op" id="6718814">.</span><span class="ident" id="6718815">out</span>&nbsp;<span class="op" id="6718819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6718825">t</span><span class="op" id="6718826">.</span><span class="ident" id="6718827">Errorf</span><span class="op" id="6718833">(</span><span class="string" id="6718834">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6718868">,</span>&nbsp;<span class="ident" id="6718870">i</span><span class="op" id="6718871">,</span>&nbsp;<span class="ident" id="6718873">test</span><span class="op" id="6718877">.</span><span class="ident" id="6718878">in</span><span class="op" id="6718880">,</span>&nbsp;<span class="ident" id="6718882">x</span><span class="op" id="6718883">.</span><span class="ident" id="6718884">RatString</span><span class="op" id="6718893">(</span><span class="op" id="6718894">)</span><span class="op" id="6718895">,</span>&nbsp;<span class="ident" id="6718897">test</span><span class="op" id="6718901">.</span><span class="ident" id="6718902">out</span><span class="op" id="6718905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718910">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6718914">}</span>&nbsp;<span class="keyword" id="6718916">else</span>&nbsp;<span class="keyword" id="6718921">if</span>&nbsp;<span class="ident" id="6718924">x</span>&nbsp;<span class="op" id="6718926">!=</span>&nbsp;<span class="ident" id="6718929">nil</span>&nbsp;<span class="op" id="6718933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6718938">t</span><span class="op" id="6718939">.</span><span class="ident" id="6718940">Errorf</span><span class="op" id="6718946">(</span><span class="string" id="6718947">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="6718982">,</span>&nbsp;<span class="ident" id="6718984">i</span><span class="op" id="6718985">,</span>&nbsp;<span class="ident" id="6718987">test</span><span class="op" id="6718991">.</span><span class="ident" id="6718992">in</span><span class="op" id="6718994">,</span>&nbsp;<span class="ident" id="6718996">x</span><span class="op" id="6718997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719004">}</span><br>
<span class="lineno"></span><span class="op" id="6719006">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="6719009">func</span>&nbsp;<span class="ident" id="6719014">TestRatScan</span><span class="op" id="6719025">(</span><span class="ident" id="6719026">t</span>&nbsp;<span class="op" id="6719028">*</span><span class="ident" id="6719029">testing</span><span class="op" id="6719036">.</span><span class="ident" id="6719037">T</span><span class="op" id="6719038">)</span>&nbsp;<span class="op" id="6719040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719043">var</span>&nbsp;<span class="ident" id="6719047">buf</span>&nbsp;<span class="ident" id="6719051">bytes</span><span class="op" id="6719056">.</span><span class="ident" id="6719057">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719065">for</span>&nbsp;<span class="ident" id="6719069">i</span><span class="op" id="6719070">,</span>&nbsp;<span class="ident" id="6719072">test</span>&nbsp;<span class="op" id="6719077">:=</span>&nbsp;<span class="keyword" id="6719080">range</span>&nbsp;<span class="ident" id="6719086">setStringTests</span>&nbsp;<span class="op" id="6719101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719105">x</span>&nbsp;<span class="op" id="6719107">:=</span>&nbsp;<span class="builtinfunc" id="6719110">new</span><span class="op" id="6719113">(</span><span class="ident" id="6719114">Rat</span><span class="op" id="6719117">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719121">buf</span><span class="op" id="6719124">.</span><span class="ident" id="6719125">Reset</span><span class="op" id="6719130">(</span><span class="op" id="6719131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719135">buf</span><span class="op" id="6719138">.</span><span class="ident" id="6719139">WriteString</span><span class="op" id="6719150">(</span><span class="ident" id="6719151">test</span><span class="op" id="6719155">.</span><span class="ident" id="6719156">in</span><span class="op" id="6719158">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719163">_</span><span class="op" id="6719164">,</span>&nbsp;<span class="ident" id="6719166">err</span>&nbsp;<span class="op" id="6719170">:=</span>&nbsp;<span class="ident" id="6719173">fmt</span><span class="op" id="6719176">.</span><span class="ident" id="6719177">Fscanf</span><span class="op" id="6719183">(</span><span class="op" id="6719184">&amp;</span><span class="ident" id="6719185">buf</span><span class="op" id="6719188">,</span>&nbsp;<span class="string" id="6719190">&#34;%v&#34;</span><span class="op" id="6719194">,</span>&nbsp;<span class="ident" id="6719196">x</span><span class="op" id="6719197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719201">if</span>&nbsp;<span class="ident" id="6719204">err</span>&nbsp;<span class="op" id="6719208">==</span>&nbsp;<span class="ident" id="6719211">nil</span>&nbsp;<span class="op" id="6719215">!=</span>&nbsp;<span class="ident" id="6719218">test</span><span class="op" id="6719222">.</span><span class="ident" id="6719223">ok</span>&nbsp;<span class="op" id="6719226">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719231">if</span>&nbsp;<span class="ident" id="6719234">test</span><span class="op" id="6719238">.</span><span class="ident" id="6719239">ok</span>&nbsp;<span class="op" id="6719242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719248">t</span><span class="op" id="6719249">.</span><span class="ident" id="6719250">Errorf</span><span class="op" id="6719256">(</span><span class="string" id="6719257">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6719272">,</span>&nbsp;<span class="ident" id="6719274">i</span><span class="op" id="6719275">,</span>&nbsp;<span class="ident" id="6719277">err</span><span class="op" id="6719280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719285">}</span>&nbsp;<span class="keyword" id="6719287">else</span>&nbsp;<span class="op" id="6719292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719298">t</span><span class="op" id="6719299">.</span><span class="ident" id="6719300">Errorf</span><span class="op" id="6719306">(</span><span class="string" id="6719307">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="6719327">,</span>&nbsp;<span class="ident" id="6719329">i</span><span class="op" id="6719330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719335">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719340">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719355">if</span>&nbsp;<span class="ident" id="6719358">err</span>&nbsp;<span class="op" id="6719362">==</span>&nbsp;<span class="ident" id="6719365">nil</span>&nbsp;<span class="op" id="6719369">&amp;&amp;</span>&nbsp;<span class="ident" id="6719372">x</span><span class="op" id="6719373">.</span><span class="ident" id="6719374">RatString</span><span class="op" id="6719383">(</span><span class="op" id="6719384">)</span>&nbsp;<span class="op" id="6719386">!=</span>&nbsp;<span class="ident" id="6719389">test</span><span class="op" id="6719393">.</span><span class="ident" id="6719394">out</span>&nbsp;<span class="op" id="6719398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719403">t</span><span class="op" id="6719404">.</span><span class="ident" id="6719405">Errorf</span><span class="op" id="6719411">(</span><span class="string" id="6719412">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6719432">,</span>&nbsp;<span class="ident" id="6719434">i</span><span class="op" id="6719435">,</span>&nbsp;<span class="ident" id="6719437">x</span><span class="op" id="6719438">.</span><span class="ident" id="6719439">RatString</span><span class="op" id="6719448">(</span><span class="op" id="6719449">)</span><span class="op" id="6719450">,</span>&nbsp;<span class="ident" id="6719452">test</span><span class="op" id="6719456">.</span><span class="ident" id="6719457">out</span><span class="op" id="6719460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719464">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719467">}</span><br>
<span class="lineno"></span><span class="op" id="6719469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6719472">var</span>&nbsp;<span class="ident" id="6719476">floatStringTests</span>&nbsp;<span class="op" id="6719493">=</span>&nbsp;<span class="op" id="6719495">[</span><span class="op" id="6719496">]</span><span class="keyword" id="6719497">struct</span>&nbsp;<span class="op" id="6719504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719507">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6719512">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719520">prec</span>&nbsp;<span class="builtintype" id="6719525">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719530">out</span>&nbsp;&nbsp;<span class="builtintype" id="6719535">string</span><br>
<span class="lineno"></span><span class="op" id="6719542">}</span><span class="op" id="6719543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719546">{</span><span class="string" id="6719547">&#34;0&#34;</span><span class="op" id="6719550">,</span>&nbsp;<span class="num" id="6719552">0</span><span class="op" id="6719553">,</span>&nbsp;<span class="string" id="6719555">&#34;0&#34;</span><span class="op" id="6719558">}</span><span class="op" id="6719559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719562">{</span><span class="string" id="6719563">&#34;0&#34;</span><span class="op" id="6719566">,</span>&nbsp;<span class="num" id="6719568">4</span><span class="op" id="6719569">,</span>&nbsp;<span class="string" id="6719571">&#34;0.0000&#34;</span><span class="op" id="6719579">}</span><span class="op" id="6719580">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719583">{</span><span class="string" id="6719584">&#34;1&#34;</span><span class="op" id="6719587">,</span>&nbsp;<span class="num" id="6719589">0</span><span class="op" id="6719590">,</span>&nbsp;<span class="string" id="6719592">&#34;1&#34;</span><span class="op" id="6719595">}</span><span class="op" id="6719596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719599">{</span><span class="string" id="6719600">&#34;1&#34;</span><span class="op" id="6719603">,</span>&nbsp;<span class="num" id="6719605">2</span><span class="op" id="6719606">,</span>&nbsp;<span class="string" id="6719608">&#34;1.00&#34;</span><span class="op" id="6719614">}</span><span class="op" id="6719615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719618">{</span><span class="string" id="6719619">&#34;-1&#34;</span><span class="op" id="6719623">,</span>&nbsp;<span class="num" id="6719625">0</span><span class="op" id="6719626">,</span>&nbsp;<span class="string" id="6719628">&#34;-1&#34;</span><span class="op" id="6719632">}</span><span class="op" id="6719633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719636">{</span><span class="string" id="6719637">&#34;.25&#34;</span><span class="op" id="6719642">,</span>&nbsp;<span class="num" id="6719644">2</span><span class="op" id="6719645">,</span>&nbsp;<span class="string" id="6719647">&#34;0.25&#34;</span><span class="op" id="6719653">}</span><span class="op" id="6719654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719657">{</span><span class="string" id="6719658">&#34;.25&#34;</span><span class="op" id="6719663">,</span>&nbsp;<span class="num" id="6719665">1</span><span class="op" id="6719666">,</span>&nbsp;<span class="string" id="6719668">&#34;0.3&#34;</span><span class="op" id="6719673">}</span><span class="op" id="6719674">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719677">{</span><span class="string" id="6719678">&#34;.25&#34;</span><span class="op" id="6719683">,</span>&nbsp;<span class="num" id="6719685">3</span><span class="op" id="6719686">,</span>&nbsp;<span class="string" id="6719688">&#34;0.250&#34;</span><span class="op" id="6719695">}</span><span class="op" id="6719696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719699">{</span><span class="string" id="6719700">&#34;-1/3&#34;</span><span class="op" id="6719706">,</span>&nbsp;<span class="num" id="6719708">3</span><span class="op" id="6719709">,</span>&nbsp;<span class="string" id="6719711">&#34;-0.333&#34;</span><span class="op" id="6719719">}</span><span class="op" id="6719720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719723">{</span><span class="string" id="6719724">&#34;-2/3&#34;</span><span class="op" id="6719730">,</span>&nbsp;<span class="num" id="6719732">4</span><span class="op" id="6719733">,</span>&nbsp;<span class="string" id="6719735">&#34;-0.6667&#34;</span><span class="op" id="6719744">}</span><span class="op" id="6719745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719748">{</span><span class="string" id="6719749">&#34;0.96&#34;</span><span class="op" id="6719755">,</span>&nbsp;<span class="num" id="6719757">1</span><span class="op" id="6719758">,</span>&nbsp;<span class="string" id="6719760">&#34;1.0&#34;</span><span class="op" id="6719765">}</span><span class="op" id="6719766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719769">{</span><span class="string" id="6719770">&#34;0.999&#34;</span><span class="op" id="6719777">,</span>&nbsp;<span class="num" id="6719779">2</span><span class="op" id="6719780">,</span>&nbsp;<span class="string" id="6719782">&#34;1.00&#34;</span><span class="op" id="6719788">}</span><span class="op" id="6719789">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719792">{</span><span class="string" id="6719793">&#34;0.9&#34;</span><span class="op" id="6719798">,</span>&nbsp;<span class="num" id="6719800">0</span><span class="op" id="6719801">,</span>&nbsp;<span class="string" id="6719803">&#34;1&#34;</span><span class="op" id="6719806">}</span><span class="op" id="6719807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719810">{</span><span class="string" id="6719811">&#34;.25&#34;</span><span class="op" id="6719816">,</span>&nbsp;<span class="op" id="6719818">-</span><span class="num" id="6719819">1</span><span class="op" id="6719820">,</span>&nbsp;<span class="string" id="6719822">&#34;0&#34;</span><span class="op" id="6719825">}</span><span class="op" id="6719826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6719829">{</span><span class="string" id="6719830">&#34;.55&#34;</span><span class="op" id="6719835">,</span>&nbsp;<span class="op" id="6719837">-</span><span class="num" id="6719838">1</span><span class="op" id="6719839">,</span>&nbsp;<span class="string" id="6719841">&#34;1&#34;</span><span class="op" id="6719844">}</span><span class="op" id="6719845">,</span><br>
<span class="lineno"></span><span class="op" id="6719847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="6719850">func</span>&nbsp;<span class="ident" id="6719855">TestFloatString</span><span class="op" id="6719870">(</span><span class="ident" id="6719871">t</span>&nbsp;<span class="op" id="6719873">*</span><span class="ident" id="6719874">testing</span><span class="op" id="6719881">.</span><span class="ident" id="6719882">T</span><span class="op" id="6719883">)</span>&nbsp;<span class="op" id="6719885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719888">for</span>&nbsp;<span class="ident" id="6719892">i</span><span class="op" id="6719893">,</span>&nbsp;<span class="ident" id="6719895">test</span>&nbsp;<span class="op" id="6719900">:=</span>&nbsp;<span class="keyword" id="6719903">range</span>&nbsp;<span class="ident" id="6719909">floatStringTests</span>&nbsp;<span class="op" id="6719926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719930">x</span><span class="op" id="6719931">,</span>&nbsp;<span class="ident" id="6719933">_</span>&nbsp;<span class="op" id="6719935">:=</span>&nbsp;<span class="builtinfunc" id="6719938">new</span><span class="op" id="6719941">(</span><span class="ident" id="6719942">Rat</span><span class="op" id="6719945">)</span><span class="op" id="6719946">.</span><span class="ident" id="6719947">SetString</span><span class="op" id="6719956">(</span><span class="ident" id="6719957">test</span><span class="op" id="6719961">.</span><span class="ident" id="6719962">in</span><span class="op" id="6719964">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6719969">if</span>&nbsp;<span class="ident" id="6719972">x</span><span class="op" id="6719973">.</span><span class="ident" id="6719974">FloatString</span><span class="op" id="6719985">(</span><span class="ident" id="6719986">test</span><span class="op" id="6719990">.</span><span class="ident" id="6719991">prec</span><span class="op" id="6719995">)</span>&nbsp;<span class="op" id="6719997">!=</span>&nbsp;<span class="ident" id="6720000">test</span><span class="op" id="6720004">.</span><span class="ident" id="6720005">out</span>&nbsp;<span class="op" id="6720009">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720014">t</span><span class="op" id="6720015">.</span><span class="ident" id="6720016">Errorf</span><span class="op" id="6720022">(</span><span class="string" id="6720023">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6720043">,</span>&nbsp;<span class="ident" id="6720045">i</span><span class="op" id="6720046">,</span>&nbsp;<span class="ident" id="6720048">x</span><span class="op" id="6720049">.</span><span class="ident" id="6720050">FloatString</span><span class="op" id="6720061">(</span><span class="ident" id="6720062">test</span><span class="op" id="6720066">.</span><span class="ident" id="6720067">prec</span><span class="op" id="6720071">)</span><span class="op" id="6720072">,</span>&nbsp;<span class="ident" id="6720074">test</span><span class="op" id="6720078">.</span><span class="ident" id="6720079">out</span><span class="op" id="6720082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720089">}</span><br>
<span class="lineno"></span><span class="op" id="6720091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6720094">func</span>&nbsp;<span class="ident" id="6720099">TestRatSign</span><span class="op" id="6720110">(</span><span class="ident" id="6720111">t</span>&nbsp;<span class="op" id="6720113">*</span><span class="ident" id="6720114">testing</span><span class="op" id="6720121">.</span><span class="ident" id="6720122">T</span><span class="op" id="6720123">)</span>&nbsp;<span class="op" id="6720125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720128">zero</span>&nbsp;<span class="op" id="6720133">:=</span>&nbsp;<span class="ident" id="6720136">NewRat</span><span class="op" id="6720142">(</span><span class="num" id="6720143">0</span><span class="op" id="6720144">,</span>&nbsp;<span class="num" id="6720146">1</span><span class="op" id="6720147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6720150">for</span>&nbsp;<span class="ident" id="6720154">_</span><span class="op" id="6720155">,</span>&nbsp;<span class="ident" id="6720157">a</span>&nbsp;<span class="op" id="6720159">:=</span>&nbsp;<span class="keyword" id="6720162">range</span>&nbsp;<span class="ident" id="6720168">setStringTests</span>&nbsp;<span class="op" id="6720183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720187">x</span><span class="op" id="6720188">,</span>&nbsp;<span class="ident" id="6720190">ok</span>&nbsp;<span class="op" id="6720193">:=</span>&nbsp;<span class="builtinfunc" id="6720196">new</span><span class="op" id="6720199">(</span><span class="ident" id="6720200">Rat</span><span class="op" id="6720203">)</span><span class="op" id="6720204">.</span><span class="ident" id="6720205">SetString</span><span class="op" id="6720214">(</span><span class="ident" id="6720215">a</span><span class="op" id="6720216">.</span><span class="ident" id="6720217">in</span><span class="op" id="6720219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6720223">if</span>&nbsp;<span class="op" id="6720226">!</span><span class="ident" id="6720227">ok</span>&nbsp;<span class="op" id="6720230">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6720235">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720250">s</span>&nbsp;<span class="op" id="6720252">:=</span>&nbsp;<span class="ident" id="6720255">x</span><span class="op" id="6720256">.</span><span class="ident" id="6720257">Sign</span><span class="op" id="6720261">(</span><span class="op" id="6720262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720266">e</span>&nbsp;<span class="op" id="6720268">:=</span>&nbsp;<span class="ident" id="6720271">x</span><span class="op" id="6720272">.</span><span class="ident" id="6720273">Cmp</span><span class="op" id="6720276">(</span><span class="ident" id="6720277">zero</span><span class="op" id="6720281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6720285">if</span>&nbsp;<span class="ident" id="6720288">s</span>&nbsp;<span class="op" id="6720290">!=</span>&nbsp;<span class="ident" id="6720293">e</span>&nbsp;<span class="op" id="6720295">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720300">t</span><span class="op" id="6720301">.</span><span class="ident" id="6720302">Errorf</span><span class="op" id="6720308">(</span><span class="string" id="6720309">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="6720337">,</span>&nbsp;<span class="ident" id="6720339">s</span><span class="op" id="6720340">,</span>&nbsp;<span class="ident" id="6720342">e</span><span class="op" id="6720343">,</span>&nbsp;<span class="op" id="6720345">&amp;</span><span class="ident" id="6720346">x</span><span class="op" id="6720347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720354">}</span><br>
<span class="lineno"></span><span class="op" id="6720356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="6720359">var</span>&nbsp;<span class="ident" id="6720363">ratCmpTests</span>&nbsp;<span class="op" id="6720375">=</span>&nbsp;<span class="op" id="6720377">[</span><span class="op" id="6720378">]</span><span class="keyword" id="6720379">struct</span>&nbsp;<span class="op" id="6720386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720389">rat1</span><span class="op" id="6720393">,</span>&nbsp;<span class="ident" id="6720395">rat2</span>&nbsp;<span class="builtintype" id="6720400">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720408">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6720419">int</span><br>
<span class="lineno"></span><span class="op" id="6720423">}</span><span class="op" id="6720424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720427">{</span><span class="string" id="6720428">&#34;0&#34;</span><span class="op" id="6720431">,</span>&nbsp;<span class="string" id="6720433">&#34;0/1&#34;</span><span class="op" id="6720438">,</span>&nbsp;<span class="num" id="6720440">0</span><span class="op" id="6720441">}</span><span class="op" id="6720442">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720445">{</span><span class="string" id="6720446">&#34;1/1&#34;</span><span class="op" id="6720451">,</span>&nbsp;<span class="string" id="6720453">&#34;1&#34;</span><span class="op" id="6720456">,</span>&nbsp;<span class="num" id="6720458">0</span><span class="op" id="6720459">}</span><span class="op" id="6720460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720463">{</span><span class="string" id="6720464">&#34;-1&#34;</span><span class="op" id="6720468">,</span>&nbsp;<span class="string" id="6720470">&#34;-2/2&#34;</span><span class="op" id="6720476">,</span>&nbsp;<span class="num" id="6720478">0</span><span class="op" id="6720479">}</span><span class="op" id="6720480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720483">{</span><span class="string" id="6720484">&#34;1&#34;</span><span class="op" id="6720487">,</span>&nbsp;<span class="string" id="6720489">&#34;0&#34;</span><span class="op" id="6720492">,</span>&nbsp;<span class="num" id="6720494">1</span><span class="op" id="6720495">}</span><span class="op" id="6720496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720499">{</span><span class="string" id="6720500">&#34;0/1&#34;</span><span class="op" id="6720505">,</span>&nbsp;<span class="string" id="6720507">&#34;1/1&#34;</span><span class="op" id="6720512">,</span>&nbsp;<span class="op" id="6720514">-</span><span class="num" id="6720515">1</span><span class="op" id="6720516">}</span><span class="op" id="6720517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720520">{</span><span class="string" id="6720521">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="6720548">,</span>&nbsp;<span class="string" id="6720550">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="6720577">,</span>&nbsp;<span class="op" id="6720579">-</span><span class="num" id="6720580">1</span><span class="op" id="6720581">}</span><span class="op" id="6720582">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720585">{</span><span class="string" id="6720586">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="6720619">,</span>&nbsp;<span class="string" id="6720621">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="6720654">,</span>&nbsp;<span class="op" id="6720656">-</span><span class="num" id="6720657">1</span><span class="op" id="6720658">}</span><span class="op" id="6720659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720662">{</span><span class="string" id="6720663">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="6720700">,</span>&nbsp;<span class="string" id="6720702">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="6720738">,</span>&nbsp;<span class="op" id="6720740">-</span><span class="num" id="6720741">1</span><span class="op" id="6720742">}</span><span class="op" id="6720743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6720746">{</span><span class="string" id="6720747">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="6720783">,</span>&nbsp;<span class="string" id="6720785">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="6720822">,</span>&nbsp;<span class="num" id="6720824">0</span><span class="op" id="6720825">}</span><span class="op" id="6720826">,</span><br>
<span class="lineno"></span><span class="op" id="6720828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="6720831">func</span>&nbsp;<span class="ident" id="6720836">TestRatCmp</span><span class="op" id="6720846">(</span><span class="ident" id="6720847">t</span>&nbsp;<span class="op" id="6720849">*</span><span class="ident" id="6720850">testing</span><span class="op" id="6720857">.</span><span class="ident" id="6720858">T</span><span class="op" id="6720859">)</span>&nbsp;<span class="op" id="6720861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6720864">for</span>&nbsp;<span class="ident" id="6720868">i</span><span class="op" id="6720869">,</span>&nbsp;<span class="ident" id="6720871">test</span>&nbsp;<span class="op" id="6720876">:=</span>&nbsp;<span class="keyword" id="6720879">range</span>&nbsp;<span class="ident" id="6720885">ratCmpTests</span>&nbsp;<span class="op" id="6720897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720901">x</span><span class="op" id="6720902">,</span>&nbsp;<span class="ident" id="6720904">_</span>&nbsp;<span class="op" id="6720906">:=</span>&nbsp;<span class="builtinfunc" id="6720909">new</span><span class="op" id="6720912">(</span><span class="ident" id="6720913">Rat</span><span class="op" id="6720916">)</span><span class="op" id="6720917">.</span><span class="ident" id="6720918">SetString</span><span class="op" id="6720927">(</span><span class="ident" id="6720928">test</span><span class="op" id="6720932">.</span><span class="ident" id="6720933">rat1</span><span class="op" id="6720937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720941">y</span><span class="op" id="6720942">,</span>&nbsp;<span class="ident" id="6720944">_</span>&nbsp;<span class="op" id="6720946">:=</span>&nbsp;<span class="builtinfunc" id="6720949">new</span><span class="op" id="6720952">(</span><span class="ident" id="6720953">Rat</span><span class="op" id="6720956">)</span><span class="op" id="6720957">.</span><span class="ident" id="6720958">SetString</span><span class="op" id="6720967">(</span><span class="ident" id="6720968">test</span><span class="op" id="6720972">.</span><span class="ident" id="6720973">rat2</span><span class="op" id="6720977">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6720982">out</span>&nbsp;<span class="op" id="6720986">:=</span>&nbsp;<span class="ident" id="6720989">x</span><span class="op" id="6720990">.</span><span class="ident" id="6720991">Cmp</span><span class="op" id="6720994">(</span><span class="ident" id="6720995">y</span><span class="op" id="6720996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721000">if</span>&nbsp;<span class="ident" id="6721003">out</span>&nbsp;<span class="op" id="6721007">!=</span>&nbsp;<span class="ident" id="6721010">test</span><span class="op" id="6721014">.</span><span class="ident" id="6721015">out</span>&nbsp;<span class="op" id="6721019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721024">t</span><span class="op" id="6721025">.</span><span class="ident" id="6721026">Errorf</span><span class="op" id="6721032">(</span><span class="string" id="6721033">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6721060">,</span>&nbsp;<span class="ident" id="6721062">i</span><span class="op" id="6721063">,</span>&nbsp;<span class="ident" id="6721065">out</span><span class="op" id="6721068">,</span>&nbsp;<span class="ident" id="6721070">test</span><span class="op" id="6721074">.</span><span class="ident" id="6721075">out</span><span class="op" id="6721078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721085">}</span><br>
<span class="lineno">205</span><span class="op" id="6721087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6721090">func</span>&nbsp;<span class="ident" id="6721095">TestIsInt</span><span class="op" id="6721104">(</span><span class="ident" id="6721105">t</span>&nbsp;<span class="op" id="6721107">*</span><span class="ident" id="6721108">testing</span><span class="op" id="6721115">.</span><span class="ident" id="6721116">T</span><span class="op" id="6721117">)</span>&nbsp;<span class="op" id="6721119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721122">one</span>&nbsp;<span class="op" id="6721126">:=</span>&nbsp;<span class="ident" id="6721129">NewInt</span><span class="op" id="6721135">(</span><span class="num" id="6721136">1</span><span class="op" id="6721137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721140">for</span>&nbsp;<span class="ident" id="6721144">_</span><span class="op" id="6721145">,</span>&nbsp;<span class="ident" id="6721147">a</span>&nbsp;<span class="op" id="6721149">:=</span>&nbsp;<span class="keyword" id="6721152">range</span>&nbsp;<span class="ident" id="6721158">setStringTests</span>&nbsp;<span class="op" id="6721173">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721177">x</span><span class="op" id="6721178">,</span>&nbsp;<span class="ident" id="6721180">ok</span>&nbsp;<span class="op" id="6721183">:=</span>&nbsp;<span class="builtinfunc" id="6721186">new</span><span class="op" id="6721189">(</span><span class="ident" id="6721190">Rat</span><span class="op" id="6721193">)</span><span class="op" id="6721194">.</span><span class="ident" id="6721195">SetString</span><span class="op" id="6721204">(</span><span class="ident" id="6721205">a</span><span class="op" id="6721206">.</span><span class="ident" id="6721207">in</span><span class="op" id="6721209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721213">if</span>&nbsp;<span class="op" id="6721216">!</span><span class="ident" id="6721217">ok</span>&nbsp;<span class="op" id="6721220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721225">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721240">i</span>&nbsp;<span class="op" id="6721242">:=</span>&nbsp;<span class="ident" id="6721245">x</span><span class="op" id="6721246">.</span><span class="ident" id="6721247">IsInt</span><span class="op" id="6721252">(</span><span class="op" id="6721253">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721257">e</span>&nbsp;<span class="op" id="6721259">:=</span>&nbsp;<span class="ident" id="6721262">x</span><span class="op" id="6721263">.</span><span class="ident" id="6721264">Denom</span><span class="op" id="6721269">(</span><span class="op" id="6721270">)</span><span class="op" id="6721271">.</span><span class="ident" id="6721272">Cmp</span><span class="op" id="6721275">(</span><span class="ident" id="6721276">one</span><span class="op" id="6721279">)</span>&nbsp;<span class="op" id="6721281">==</span>&nbsp;<span class="num" id="6721284">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721288">if</span>&nbsp;<span class="ident" id="6721291">i</span>&nbsp;<span class="op" id="6721293">!=</span>&nbsp;<span class="ident" id="6721296">e</span>&nbsp;<span class="op" id="6721298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721303">t</span><span class="op" id="6721304">.</span><span class="ident" id="6721305">Errorf</span><span class="op" id="6721311">(</span><span class="string" id="6721312">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6721342">,</span>&nbsp;<span class="ident" id="6721344">x</span><span class="op" id="6721345">,</span>&nbsp;<span class="ident" id="6721347">i</span><span class="op" id="6721348">,</span>&nbsp;<span class="ident" id="6721350">e</span><span class="op" id="6721351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721358">}</span><br>
<span class="lineno">220</span><span class="op" id="6721360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6721363">func</span>&nbsp;<span class="ident" id="6721368">TestRatAbs</span><span class="op" id="6721378">(</span><span class="ident" id="6721379">t</span>&nbsp;<span class="op" id="6721381">*</span><span class="ident" id="6721382">testing</span><span class="op" id="6721389">.</span><span class="ident" id="6721390">T</span><span class="op" id="6721391">)</span>&nbsp;<span class="op" id="6721393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721396">zero</span>&nbsp;<span class="op" id="6721401">:=</span>&nbsp;<span class="builtinfunc" id="6721404">new</span><span class="op" id="6721407">(</span><span class="ident" id="6721408">Rat</span><span class="op" id="6721411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721414">for</span>&nbsp;<span class="ident" id="6721418">_</span><span class="op" id="6721419">,</span>&nbsp;<span class="ident" id="6721421">a</span>&nbsp;<span class="op" id="6721423">:=</span>&nbsp;<span class="keyword" id="6721426">range</span>&nbsp;<span class="ident" id="6721432">setStringTests</span>&nbsp;<span class="op" id="6721447">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721451">x</span><span class="op" id="6721452">,</span>&nbsp;<span class="ident" id="6721454">ok</span>&nbsp;<span class="op" id="6721457">:=</span>&nbsp;<span class="builtinfunc" id="6721460">new</span><span class="op" id="6721463">(</span><span class="ident" id="6721464">Rat</span><span class="op" id="6721467">)</span><span class="op" id="6721468">.</span><span class="ident" id="6721469">SetString</span><span class="op" id="6721478">(</span><span class="ident" id="6721479">a</span><span class="op" id="6721480">.</span><span class="ident" id="6721481">in</span><span class="op" id="6721483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721487">if</span>&nbsp;<span class="op" id="6721490">!</span><span class="ident" id="6721491">ok</span>&nbsp;<span class="op" id="6721494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721499">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721514">e</span>&nbsp;<span class="op" id="6721516">:=</span>&nbsp;<span class="builtinfunc" id="6721519">new</span><span class="op" id="6721522">(</span><span class="ident" id="6721523">Rat</span><span class="op" id="6721526">)</span><span class="op" id="6721527">.</span><span class="ident" id="6721528">Set</span><span class="op" id="6721531">(</span><span class="ident" id="6721532">x</span><span class="op" id="6721533">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721537">if</span>&nbsp;<span class="ident" id="6721540">e</span><span class="op" id="6721541">.</span><span class="ident" id="6721542">Cmp</span><span class="op" id="6721545">(</span><span class="ident" id="6721546">zero</span><span class="op" id="6721550">)</span>&nbsp;<span class="op" id="6721552">&lt;</span>&nbsp;<span class="num" id="6721554">0</span>&nbsp;<span class="op" id="6721556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721561">e</span><span class="op" id="6721562">.</span><span class="ident" id="6721563">Sub</span><span class="op" id="6721566">(</span><span class="ident" id="6721567">zero</span><span class="op" id="6721571">,</span>&nbsp;<span class="ident" id="6721573">e</span><span class="op" id="6721574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721582">z</span>&nbsp;<span class="op" id="6721584">:=</span>&nbsp;<span class="builtinfunc" id="6721587">new</span><span class="op" id="6721590">(</span><span class="ident" id="6721591">Rat</span><span class="op" id="6721594">)</span><span class="op" id="6721595">.</span><span class="ident" id="6721596">Abs</span><span class="op" id="6721599">(</span><span class="ident" id="6721600">x</span><span class="op" id="6721601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721605">if</span>&nbsp;<span class="ident" id="6721608">z</span><span class="op" id="6721609">.</span><span class="ident" id="6721610">Cmp</span><span class="op" id="6721613">(</span><span class="ident" id="6721614">e</span><span class="op" id="6721615">)</span>&nbsp;<span class="op" id="6721617">!=</span>&nbsp;<span class="num" id="6721620">0</span>&nbsp;<span class="op" id="6721622">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721627">t</span><span class="op" id="6721628">.</span><span class="ident" id="6721629">Errorf</span><span class="op" id="6721635">(</span><span class="string" id="6721636">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6721663">,</span>&nbsp;<span class="ident" id="6721665">x</span><span class="op" id="6721666">,</span>&nbsp;<span class="ident" id="6721668">z</span><span class="op" id="6721669">,</span>&nbsp;<span class="ident" id="6721671">e</span><span class="op" id="6721672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721679">}</span><br>
<span class="lineno"></span><span class="op" id="6721681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6721684">func</span>&nbsp;<span class="ident" id="6721689">TestRatNeg</span><span class="op" id="6721699">(</span><span class="ident" id="6721700">t</span>&nbsp;<span class="op" id="6721702">*</span><span class="ident" id="6721703">testing</span><span class="op" id="6721710">.</span><span class="ident" id="6721711">T</span><span class="op" id="6721712">)</span>&nbsp;<span class="op" id="6721714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721717">zero</span>&nbsp;<span class="op" id="6721722">:=</span>&nbsp;<span class="builtinfunc" id="6721725">new</span><span class="op" id="6721728">(</span><span class="ident" id="6721729">Rat</span><span class="op" id="6721732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721735">for</span>&nbsp;<span class="ident" id="6721739">_</span><span class="op" id="6721740">,</span>&nbsp;<span class="ident" id="6721742">a</span>&nbsp;<span class="op" id="6721744">:=</span>&nbsp;<span class="keyword" id="6721747">range</span>&nbsp;<span class="ident" id="6721753">setStringTests</span>&nbsp;<span class="op" id="6721768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721772">x</span><span class="op" id="6721773">,</span>&nbsp;<span class="ident" id="6721775">ok</span>&nbsp;<span class="op" id="6721778">:=</span>&nbsp;<span class="builtinfunc" id="6721781">new</span><span class="op" id="6721784">(</span><span class="ident" id="6721785">Rat</span><span class="op" id="6721788">)</span><span class="op" id="6721789">.</span><span class="ident" id="6721790">SetString</span><span class="op" id="6721799">(</span><span class="ident" id="6721800">a</span><span class="op" id="6721801">.</span><span class="ident" id="6721802">in</span><span class="op" id="6721804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721808">if</span>&nbsp;<span class="op" id="6721811">!</span><span class="ident" id="6721812">ok</span>&nbsp;<span class="op" id="6721815">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721820">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721835">e</span>&nbsp;<span class="op" id="6721837">:=</span>&nbsp;<span class="builtinfunc" id="6721840">new</span><span class="op" id="6721843">(</span><span class="ident" id="6721844">Rat</span><span class="op" id="6721847">)</span><span class="op" id="6721848">.</span><span class="ident" id="6721849">Sub</span><span class="op" id="6721852">(</span><span class="ident" id="6721853">zero</span><span class="op" id="6721857">,</span>&nbsp;<span class="ident" id="6721859">x</span><span class="op" id="6721860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721864">z</span>&nbsp;<span class="op" id="6721866">:=</span>&nbsp;<span class="builtinfunc" id="6721869">new</span><span class="op" id="6721872">(</span><span class="ident" id="6721873">Rat</span><span class="op" id="6721876">)</span><span class="op" id="6721877">.</span><span class="ident" id="6721878">Neg</span><span class="op" id="6721881">(</span><span class="ident" id="6721882">x</span><span class="op" id="6721883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6721887">if</span>&nbsp;<span class="ident" id="6721890">z</span><span class="op" id="6721891">.</span><span class="ident" id="6721892">Cmp</span><span class="op" id="6721895">(</span><span class="ident" id="6721896">e</span><span class="op" id="6721897">)</span>&nbsp;<span class="op" id="6721899">!=</span>&nbsp;<span class="num" id="6721902">0</span>&nbsp;<span class="op" id="6721904">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721909">t</span><span class="op" id="6721910">.</span><span class="ident" id="6721911">Errorf</span><span class="op" id="6721917">(</span><span class="string" id="6721918">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6721945">,</span>&nbsp;<span class="ident" id="6721947">x</span><span class="op" id="6721948">,</span>&nbsp;<span class="ident" id="6721950">z</span><span class="op" id="6721951">,</span>&nbsp;<span class="ident" id="6721953">e</span><span class="op" id="6721954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6721961">}</span><br>
<span class="lineno"></span><span class="op" id="6721963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="6721966">func</span>&nbsp;<span class="ident" id="6721971">TestRatInv</span><span class="op" id="6721981">(</span><span class="ident" id="6721982">t</span>&nbsp;<span class="op" id="6721984">*</span><span class="ident" id="6721985">testing</span><span class="op" id="6721992">.</span><span class="ident" id="6721993">T</span><span class="op" id="6721994">)</span>&nbsp;<span class="op" id="6721996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6721999">zero</span>&nbsp;<span class="op" id="6722004">:=</span>&nbsp;<span class="builtinfunc" id="6722007">new</span><span class="op" id="6722010">(</span><span class="ident" id="6722011">Rat</span><span class="op" id="6722014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722017">for</span>&nbsp;<span class="ident" id="6722021">_</span><span class="op" id="6722022">,</span>&nbsp;<span class="ident" id="6722024">a</span>&nbsp;<span class="op" id="6722026">:=</span>&nbsp;<span class="keyword" id="6722029">range</span>&nbsp;<span class="ident" id="6722035">setStringTests</span>&nbsp;<span class="op" id="6722050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722054">x</span><span class="op" id="6722055">,</span>&nbsp;<span class="ident" id="6722057">ok</span>&nbsp;<span class="op" id="6722060">:=</span>&nbsp;<span class="builtinfunc" id="6722063">new</span><span class="op" id="6722066">(</span><span class="ident" id="6722067">Rat</span><span class="op" id="6722070">)</span><span class="op" id="6722071">.</span><span class="ident" id="6722072">SetString</span><span class="op" id="6722081">(</span><span class="ident" id="6722082">a</span><span class="op" id="6722083">.</span><span class="ident" id="6722084">in</span><span class="op" id="6722086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722090">if</span>&nbsp;<span class="op" id="6722093">!</span><span class="ident" id="6722094">ok</span>&nbsp;<span class="op" id="6722097">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722102">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722117">if</span>&nbsp;<span class="ident" id="6722120">x</span><span class="op" id="6722121">.</span><span class="ident" id="6722122">Cmp</span><span class="op" id="6722125">(</span><span class="ident" id="6722126">zero</span><span class="op" id="6722130">)</span>&nbsp;<span class="op" id="6722132">==</span>&nbsp;<span class="num" id="6722135">0</span>&nbsp;<span class="op" id="6722137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722142">continue</span>&nbsp;<span class="comment" id="6722151">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722179">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722183">e</span>&nbsp;<span class="op" id="6722185">:=</span>&nbsp;<span class="builtinfunc" id="6722188">new</span><span class="op" id="6722191">(</span><span class="ident" id="6722192">Rat</span><span class="op" id="6722195">)</span><span class="op" id="6722196">.</span><span class="ident" id="6722197">SetFrac</span><span class="op" id="6722204">(</span><span class="ident" id="6722205">x</span><span class="op" id="6722206">.</span><span class="ident" id="6722207">Denom</span><span class="op" id="6722212">(</span><span class="op" id="6722213">)</span><span class="op" id="6722214">,</span>&nbsp;<span class="ident" id="6722216">x</span><span class="op" id="6722217">.</span><span class="ident" id="6722218">Num</span><span class="op" id="6722221">(</span><span class="op" id="6722222">)</span><span class="op" id="6722223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722227">z</span>&nbsp;<span class="op" id="6722229">:=</span>&nbsp;<span class="builtinfunc" id="6722232">new</span><span class="op" id="6722235">(</span><span class="ident" id="6722236">Rat</span><span class="op" id="6722239">)</span><span class="op" id="6722240">.</span><span class="ident" id="6722241">Inv</span><span class="op" id="6722244">(</span><span class="ident" id="6722245">x</span><span class="op" id="6722246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722250">if</span>&nbsp;<span class="ident" id="6722253">z</span><span class="op" id="6722254">.</span><span class="ident" id="6722255">Cmp</span><span class="op" id="6722258">(</span><span class="ident" id="6722259">e</span><span class="op" id="6722260">)</span>&nbsp;<span class="op" id="6722262">!=</span>&nbsp;<span class="num" id="6722265">0</span>&nbsp;<span class="op" id="6722267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722272">t</span><span class="op" id="6722273">.</span><span class="ident" id="6722274">Errorf</span><span class="op" id="6722280">(</span><span class="string" id="6722281">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6722308">,</span>&nbsp;<span class="ident" id="6722310">x</span><span class="op" id="6722311">,</span>&nbsp;<span class="ident" id="6722313">z</span><span class="op" id="6722314">,</span>&nbsp;<span class="ident" id="6722316">e</span><span class="op" id="6722317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722321">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722324">}</span><br>
<span class="lineno"></span><span class="op" id="6722326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722329">type</span>&nbsp;<span class="ident" id="6722334">ratBinFun</span>&nbsp;<span class="keyword" id="6722344">func</span><span class="op" id="6722348">(</span><span class="ident" id="6722349">z</span><span class="op" id="6722350">,</span>&nbsp;<span class="ident" id="6722352">x</span><span class="op" id="6722353">,</span>&nbsp;<span class="ident" id="6722355">y</span>&nbsp;<span class="op" id="6722357">*</span><span class="ident" id="6722358">Rat</span><span class="op" id="6722361">)</span>&nbsp;<span class="op" id="6722363">*</span><span class="ident" id="6722364">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="6722368">type</span>&nbsp;<span class="ident" id="6722373">ratBinArg</span>&nbsp;<span class="keyword" id="6722383">struct</span>&nbsp;<span class="op" id="6722390">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722393">x</span><span class="op" id="6722394">,</span>&nbsp;<span class="ident" id="6722396">y</span><span class="op" id="6722397">,</span>&nbsp;<span class="ident" id="6722399">z</span>&nbsp;<span class="builtintype" id="6722401">string</span><br>
<span class="lineno"></span><span class="op" id="6722408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722411">func</span>&nbsp;<span class="ident" id="6722416">testRatBin</span><span class="op" id="6722426">(</span><span class="ident" id="6722427">t</span>&nbsp;<span class="op" id="6722429">*</span><span class="ident" id="6722430">testing</span><span class="op" id="6722437">.</span><span class="ident" id="6722438">T</span><span class="op" id="6722439">,</span>&nbsp;<span class="ident" id="6722441">i</span>&nbsp;<span class="builtintype" id="6722443">int</span><span class="op" id="6722446">,</span>&nbsp;<span class="ident" id="6722448">name</span>&nbsp;<span class="builtintype" id="6722453">string</span><span class="op" id="6722459">,</span>&nbsp;<span class="ident" id="6722461">f</span>&nbsp;<span class="ident" id="6722463">ratBinFun</span><span class="op" id="6722472">,</span>&nbsp;<span class="ident" id="6722474">a</span>&nbsp;<span class="ident" id="6722476">ratBinArg</span><span class="op" id="6722485">)</span>&nbsp;<span class="op" id="6722487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722490">x</span><span class="op" id="6722491">,</span>&nbsp;<span class="ident" id="6722493">_</span>&nbsp;<span class="op" id="6722495">:=</span>&nbsp;<span class="builtinfunc" id="6722498">new</span><span class="op" id="6722501">(</span><span class="ident" id="6722502">Rat</span><span class="op" id="6722505">)</span><span class="op" id="6722506">.</span><span class="ident" id="6722507">SetString</span><span class="op" id="6722516">(</span><span class="ident" id="6722517">a</span><span class="op" id="6722518">.</span><span class="ident" id="6722519">x</span><span class="op" id="6722520">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722523">y</span><span class="op" id="6722524">,</span>&nbsp;<span class="ident" id="6722526">_</span>&nbsp;<span class="op" id="6722528">:=</span>&nbsp;<span class="builtinfunc" id="6722531">new</span><span class="op" id="6722534">(</span><span class="ident" id="6722535">Rat</span><span class="op" id="6722538">)</span><span class="op" id="6722539">.</span><span class="ident" id="6722540">SetString</span><span class="op" id="6722549">(</span><span class="ident" id="6722550">a</span><span class="op" id="6722551">.</span><span class="ident" id="6722552">y</span><span class="op" id="6722553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722556">z</span><span class="op" id="6722557">,</span>&nbsp;<span class="ident" id="6722559">_</span>&nbsp;<span class="op" id="6722561">:=</span>&nbsp;<span class="builtinfunc" id="6722564">new</span><span class="op" id="6722567">(</span><span class="ident" id="6722568">Rat</span><span class="op" id="6722571">)</span><span class="op" id="6722572">.</span><span class="ident" id="6722573">SetString</span><span class="op" id="6722582">(</span><span class="ident" id="6722583">a</span><span class="op" id="6722584">.</span><span class="ident" id="6722585">z</span><span class="op" id="6722586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722589">out</span>&nbsp;<span class="op" id="6722593">:=</span>&nbsp;<span class="ident" id="6722596">f</span><span class="op" id="6722597">(</span><span class="builtinfunc" id="6722598">new</span><span class="op" id="6722601">(</span><span class="ident" id="6722602">Rat</span><span class="op" id="6722605">)</span><span class="op" id="6722606">,</span>&nbsp;<span class="ident" id="6722608">x</span><span class="op" id="6722609">,</span>&nbsp;<span class="ident" id="6722611">y</span><span class="op" id="6722612">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6722616">if</span>&nbsp;<span class="ident" id="6722619">out</span><span class="op" id="6722622">.</span><span class="ident" id="6722623">Cmp</span><span class="op" id="6722626">(</span><span class="ident" id="6722627">z</span><span class="op" id="6722628">)</span>&nbsp;<span class="op" id="6722630">!=</span>&nbsp;<span class="num" id="6722633">0</span>&nbsp;<span class="op" id="6722635">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722639">t</span><span class="op" id="6722640">.</span><span class="ident" id="6722641">Errorf</span><span class="op" id="6722647">(</span><span class="string" id="6722648">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6722671">,</span>&nbsp;<span class="ident" id="6722673">name</span><span class="op" id="6722677">,</span>&nbsp;<span class="ident" id="6722679">i</span><span class="op" id="6722680">,</span>&nbsp;<span class="ident" id="6722682">out</span><span class="op" id="6722685">,</span>&nbsp;<span class="ident" id="6722687">z</span><span class="op" id="6722688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722691">}</span><br>
<span class="lineno"></span><span class="op" id="6722693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6722696">var</span>&nbsp;<span class="ident" id="6722700">ratBinTests</span>&nbsp;<span class="op" id="6722712">=</span>&nbsp;<span class="op" id="6722714">[</span><span class="op" id="6722715">]</span><span class="keyword" id="6722716">struct</span>&nbsp;<span class="op" id="6722723">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722726">x</span><span class="op" id="6722727">,</span>&nbsp;<span class="ident" id="6722729">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6722736">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6722744">sum</span><span class="op" id="6722747">,</span>&nbsp;<span class="ident" id="6722749">prod</span>&nbsp;<span class="builtintype" id="6722754">string</span><br>
<span class="lineno"></span><span class="op" id="6722761">}</span><span class="op" id="6722762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722765">{</span><span class="string" id="6722766">&#34;0&#34;</span><span class="op" id="6722769">,</span>&nbsp;<span class="string" id="6722771">&#34;0&#34;</span><span class="op" id="6722774">,</span>&nbsp;<span class="string" id="6722776">&#34;0&#34;</span><span class="op" id="6722779">,</span>&nbsp;<span class="string" id="6722781">&#34;0&#34;</span><span class="op" id="6722784">}</span><span class="op" id="6722785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722788">{</span><span class="string" id="6722789">&#34;0&#34;</span><span class="op" id="6722792">,</span>&nbsp;<span class="string" id="6722794">&#34;1&#34;</span><span class="op" id="6722797">,</span>&nbsp;<span class="string" id="6722799">&#34;1&#34;</span><span class="op" id="6722802">,</span>&nbsp;<span class="string" id="6722804">&#34;0&#34;</span><span class="op" id="6722807">}</span><span class="op" id="6722808">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722811">{</span><span class="string" id="6722812">&#34;-1&#34;</span><span class="op" id="6722816">,</span>&nbsp;<span class="string" id="6722818">&#34;0&#34;</span><span class="op" id="6722821">,</span>&nbsp;<span class="string" id="6722823">&#34;-1&#34;</span><span class="op" id="6722827">,</span>&nbsp;<span class="string" id="6722829">&#34;0&#34;</span><span class="op" id="6722832">}</span><span class="op" id="6722833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722836">{</span><span class="string" id="6722837">&#34;-1&#34;</span><span class="op" id="6722841">,</span>&nbsp;<span class="string" id="6722843">&#34;1&#34;</span><span class="op" id="6722846">,</span>&nbsp;<span class="string" id="6722848">&#34;0&#34;</span><span class="op" id="6722851">,</span>&nbsp;<span class="string" id="6722853">&#34;-1&#34;</span><span class="op" id="6722857">}</span><span class="op" id="6722858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722861">{</span><span class="string" id="6722862">&#34;1&#34;</span><span class="op" id="6722865">,</span>&nbsp;<span class="string" id="6722867">&#34;1&#34;</span><span class="op" id="6722870">,</span>&nbsp;<span class="string" id="6722872">&#34;2&#34;</span><span class="op" id="6722875">,</span>&nbsp;<span class="string" id="6722877">&#34;1&#34;</span><span class="op" id="6722880">}</span><span class="op" id="6722881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722884">{</span><span class="string" id="6722885">&#34;1/2&#34;</span><span class="op" id="6722890">,</span>&nbsp;<span class="string" id="6722892">&#34;1/2&#34;</span><span class="op" id="6722897">,</span>&nbsp;<span class="string" id="6722899">&#34;1&#34;</span><span class="op" id="6722902">,</span>&nbsp;<span class="string" id="6722904">&#34;1/4&#34;</span><span class="op" id="6722909">}</span><span class="op" id="6722910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722913">{</span><span class="string" id="6722914">&#34;1/4&#34;</span><span class="op" id="6722919">,</span>&nbsp;<span class="string" id="6722921">&#34;1/3&#34;</span><span class="op" id="6722926">,</span>&nbsp;<span class="string" id="6722928">&#34;7/12&#34;</span><span class="op" id="6722934">,</span>&nbsp;<span class="string" id="6722936">&#34;1/12&#34;</span><span class="op" id="6722942">}</span><span class="op" id="6722943">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722946">{</span><span class="string" id="6722947">&#34;2/5&#34;</span><span class="op" id="6722952">,</span>&nbsp;<span class="string" id="6722954">&#34;-14/3&#34;</span><span class="op" id="6722961">,</span>&nbsp;<span class="string" id="6722963">&#34;-64/15&#34;</span><span class="op" id="6722971">,</span>&nbsp;<span class="string" id="6722973">&#34;-28/15&#34;</span><span class="op" id="6722981">}</span><span class="op" id="6722982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6722985">{</span><span class="string" id="6722986">&#34;4707/49292519774798173060&#34;</span><span class="op" id="6723013">,</span>&nbsp;<span class="string" id="6723015">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="6723043">,</span>&nbsp;<span class="string" id="6723045">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="6723111">,</span>&nbsp;<span class="string" id="6723113">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="6723163">}</span><span class="op" id="6723164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723167">{</span><span class="string" id="6723168">&#34;-61204110018146728334/3&#34;</span><span class="op" id="6723193">,</span>&nbsp;<span class="string" id="6723195">&#34;-31052192278051565633/2&#34;</span><span class="op" id="6723220">,</span>&nbsp;<span class="string" id="6723222">&#34;-215564796870448153567/6&#34;</span><span class="op" id="6723248">,</span>&nbsp;<span class="string" id="6723250">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="6723293">}</span><span class="op" id="6723294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723297">{</span><span class="string" id="6723298">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="6723360">,</span>&nbsp;<span class="string" id="6723362">&#34;-18/31750379913563777419&#34;</span><span class="op" id="6723388">,</span>&nbsp;<span class="string" id="6723390">&#34;-27/133467566250814981&#34;</span><span class="op" id="6723414">,</span>&nbsp;<span class="string" id="6723416">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="6723499">}</span><span class="op" id="6723500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723503">{</span><span class="string" id="6723504">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="6723563">,</span>&nbsp;<span class="string" id="6723565">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="6723598">,</span>&nbsp;<span class="string" id="6723600">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="6723634">,</span>&nbsp;<span class="string" id="6723636">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="6723723">}</span><span class="op" id="6723724">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723727">{</span><span class="string" id="6723728">&#34;-3/26206484091896184128&#34;</span><span class="op" id="6723753">,</span>&nbsp;<span class="string" id="6723755">&#34;5/2848423294177090248&#34;</span><span class="op" id="6723778">,</span>&nbsp;<span class="string" id="6723780">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="6723840">,</span>&nbsp;<span class="string" id="6723842">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="6723885">}</span><span class="op" id="6723886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6723889">{</span><span class="string" id="6723890">&#34;26946729/330400702820&#34;</span><span class="op" id="6723913">,</span>&nbsp;<span class="string" id="6723915">&#34;41563965/225583428284&#34;</span><span class="op" id="6723938">,</span>&nbsp;<span class="string" id="6723940">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="6723984">,</span>&nbsp;<span class="string" id="6723986">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="6724027">}</span><span class="op" id="6724028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724031">{</span><span class="string" id="6724032">&#34;-8259900599013409474/7&#34;</span><span class="op" id="6724056">,</span>&nbsp;<span class="string" id="6724058">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="6724102">,</span>&nbsp;<span class="string" id="6724104">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="6724168">,</span>&nbsp;<span class="string" id="6724170">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="6724233">}</span><span class="op" id="6724234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724237">{</span><span class="string" id="6724238">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="6724278">,</span>&nbsp;<span class="string" id="6724280">&#34;29/712593081308&#34;</span><span class="op" id="6724297">,</span>&nbsp;<span class="string" id="6724299">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="6724362">,</span>&nbsp;<span class="string" id="6724364">&#34;808/45524274987585732633&#34;</span><span class="op" id="6724390">}</span><span class="op" id="6724391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724394">{</span><span class="string" id="6724395">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="6724436">,</span>&nbsp;<span class="string" id="6724438">&#34;6269770/1992362624741777&#34;</span><span class="op" id="6724464">,</span>&nbsp;<span class="string" id="6724466">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="6724537">,</span>&nbsp;<span class="string" id="6724539">&#34;8967230/3296219033&#34;</span><span class="op" id="6724559">}</span><span class="op" id="6724560">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6724563">{</span><span class="string" id="6724564">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="6724611">,</span>&nbsp;<span class="string" id="6724613">&#34;9381566963714/9633539&#34;</span><span class="op" id="6724636">,</span>&nbsp;<span class="string" id="6724638">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="6724707">,</span>&nbsp;<span class="string" id="6724709">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="6724736">}</span><span class="op" id="6724737">,</span><br>
<span class="lineno"></span><span class="op" id="6724739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6724742">func</span>&nbsp;<span class="ident" id="6724747">TestRatBin</span><span class="op" id="6724757">(</span><span class="ident" id="6724758">t</span>&nbsp;<span class="op" id="6724760">*</span><span class="ident" id="6724761">testing</span><span class="op" id="6724768">.</span><span class="ident" id="6724769">T</span><span class="op" id="6724770">)</span>&nbsp;<span class="op" id="6724772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6724775">for</span>&nbsp;<span class="ident" id="6724779">i</span><span class="op" id="6724780">,</span>&nbsp;<span class="ident" id="6724782">test</span>&nbsp;<span class="op" id="6724787">:=</span>&nbsp;<span class="keyword" id="6724790">range</span>&nbsp;<span class="ident" id="6724796">ratBinTests</span>&nbsp;<span class="op" id="6724808">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724812">arg</span>&nbsp;<span class="op" id="6724816">:=</span>&nbsp;<span class="ident" id="6724819">ratBinArg</span><span class="op" id="6724828">{</span><span class="ident" id="6724829">test</span><span class="op" id="6724833">.</span><span class="ident" id="6724834">x</span><span class="op" id="6724835">,</span>&nbsp;<span class="ident" id="6724837">test</span><span class="op" id="6724841">.</span><span class="ident" id="6724842">y</span><span class="op" id="6724843">,</span>&nbsp;<span class="ident" id="6724845">test</span><span class="op" id="6724849">.</span><span class="ident" id="6724850">sum</span><span class="op" id="6724853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724857">testRatBin</span><span class="op" id="6724867">(</span><span class="ident" id="6724868">t</span><span class="op" id="6724869">,</span>&nbsp;<span class="ident" id="6724871">i</span><span class="op" id="6724872">,</span>&nbsp;<span class="string" id="6724874">&#34;Add&#34;</span><span class="op" id="6724879">,</span>&nbsp;<span class="op" id="6724881">(</span><span class="op" id="6724882">*</span><span class="ident" id="6724883">Rat</span><span class="op" id="6724886">)</span><span class="op" id="6724887">.</span><span class="ident" id="6724888">Add</span><span class="op" id="6724891">,</span>&nbsp;<span class="ident" id="6724893">arg</span><span class="op" id="6724896">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724901">arg</span>&nbsp;<span class="op" id="6724905">=</span>&nbsp;<span class="ident" id="6724907">ratBinArg</span><span class="op" id="6724916">{</span><span class="ident" id="6724917">test</span><span class="op" id="6724921">.</span><span class="ident" id="6724922">y</span><span class="op" id="6724923">,</span>&nbsp;<span class="ident" id="6724925">test</span><span class="op" id="6724929">.</span><span class="ident" id="6724930">x</span><span class="op" id="6724931">,</span>&nbsp;<span class="ident" id="6724933">test</span><span class="op" id="6724937">.</span><span class="ident" id="6724938">sum</span><span class="op" id="6724941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724945">testRatBin</span><span class="op" id="6724955">(</span><span class="ident" id="6724956">t</span><span class="op" id="6724957">,</span>&nbsp;<span class="ident" id="6724959">i</span><span class="op" id="6724960">,</span>&nbsp;<span class="string" id="6724962">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="6724977">,</span>&nbsp;<span class="op" id="6724979">(</span><span class="op" id="6724980">*</span><span class="ident" id="6724981">Rat</span><span class="op" id="6724984">)</span><span class="op" id="6724985">.</span><span class="ident" id="6724986">Add</span><span class="op" id="6724989">,</span>&nbsp;<span class="ident" id="6724991">arg</span><span class="op" id="6724994">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6724999">arg</span>&nbsp;<span class="op" id="6725003">=</span>&nbsp;<span class="ident" id="6725005">ratBinArg</span><span class="op" id="6725014">{</span><span class="ident" id="6725015">test</span><span class="op" id="6725019">.</span><span class="ident" id="6725020">sum</span><span class="op" id="6725023">,</span>&nbsp;<span class="ident" id="6725025">test</span><span class="op" id="6725029">.</span><span class="ident" id="6725030">x</span><span class="op" id="6725031">,</span>&nbsp;<span class="ident" id="6725033">test</span><span class="op" id="6725037">.</span><span class="ident" id="6725038">y</span><span class="op" id="6725039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725043">testRatBin</span><span class="op" id="6725053">(</span><span class="ident" id="6725054">t</span><span class="op" id="6725055">,</span>&nbsp;<span class="ident" id="6725057">i</span><span class="op" id="6725058">,</span>&nbsp;<span class="string" id="6725060">&#34;Sub&#34;</span><span class="op" id="6725065">,</span>&nbsp;<span class="op" id="6725067">(</span><span class="op" id="6725068">*</span><span class="ident" id="6725069">Rat</span><span class="op" id="6725072">)</span><span class="op" id="6725073">.</span><span class="ident" id="6725074">Sub</span><span class="op" id="6725077">,</span>&nbsp;<span class="ident" id="6725079">arg</span><span class="op" id="6725082">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725087">arg</span>&nbsp;<span class="op" id="6725091">=</span>&nbsp;<span class="ident" id="6725093">ratBinArg</span><span class="op" id="6725102">{</span><span class="ident" id="6725103">test</span><span class="op" id="6725107">.</span><span class="ident" id="6725108">sum</span><span class="op" id="6725111">,</span>&nbsp;<span class="ident" id="6725113">test</span><span class="op" id="6725117">.</span><span class="ident" id="6725118">y</span><span class="op" id="6725119">,</span>&nbsp;<span class="ident" id="6725121">test</span><span class="op" id="6725125">.</span><span class="ident" id="6725126">x</span><span class="op" id="6725127">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725131">testRatBin</span><span class="op" id="6725141">(</span><span class="ident" id="6725142">t</span><span class="op" id="6725143">,</span>&nbsp;<span class="ident" id="6725145">i</span><span class="op" id="6725146">,</span>&nbsp;<span class="string" id="6725148">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="6725163">,</span>&nbsp;<span class="op" id="6725165">(</span><span class="op" id="6725166">*</span><span class="ident" id="6725167">Rat</span><span class="op" id="6725170">)</span><span class="op" id="6725171">.</span><span class="ident" id="6725172">Sub</span><span class="op" id="6725175">,</span>&nbsp;<span class="ident" id="6725177">arg</span><span class="op" id="6725180">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725185">arg</span>&nbsp;<span class="op" id="6725189">=</span>&nbsp;<span class="ident" id="6725191">ratBinArg</span><span class="op" id="6725200">{</span><span class="ident" id="6725201">test</span><span class="op" id="6725205">.</span><span class="ident" id="6725206">x</span><span class="op" id="6725207">,</span>&nbsp;<span class="ident" id="6725209">test</span><span class="op" id="6725213">.</span><span class="ident" id="6725214">y</span><span class="op" id="6725215">,</span>&nbsp;<span class="ident" id="6725217">test</span><span class="op" id="6725221">.</span><span class="ident" id="6725222">prod</span><span class="op" id="6725226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725230">testRatBin</span><span class="op" id="6725240">(</span><span class="ident" id="6725241">t</span><span class="op" id="6725242">,</span>&nbsp;<span class="ident" id="6725244">i</span><span class="op" id="6725245">,</span>&nbsp;<span class="string" id="6725247">&#34;Mul&#34;</span><span class="op" id="6725252">,</span>&nbsp;<span class="op" id="6725254">(</span><span class="op" id="6725255">*</span><span class="ident" id="6725256">Rat</span><span class="op" id="6725259">)</span><span class="op" id="6725260">.</span><span class="ident" id="6725261">Mul</span><span class="op" id="6725264">,</span>&nbsp;<span class="ident" id="6725266">arg</span><span class="op" id="6725269">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725274">arg</span>&nbsp;<span class="op" id="6725278">=</span>&nbsp;<span class="ident" id="6725280">ratBinArg</span><span class="op" id="6725289">{</span><span class="ident" id="6725290">test</span><span class="op" id="6725294">.</span><span class="ident" id="6725295">y</span><span class="op" id="6725296">,</span>&nbsp;<span class="ident" id="6725298">test</span><span class="op" id="6725302">.</span><span class="ident" id="6725303">x</span><span class="op" id="6725304">,</span>&nbsp;<span class="ident" id="6725306">test</span><span class="op" id="6725310">.</span><span class="ident" id="6725311">prod</span><span class="op" id="6725315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725319">testRatBin</span><span class="op" id="6725329">(</span><span class="ident" id="6725330">t</span><span class="op" id="6725331">,</span>&nbsp;<span class="ident" id="6725333">i</span><span class="op" id="6725334">,</span>&nbsp;<span class="string" id="6725336">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="6725351">,</span>&nbsp;<span class="op" id="6725353">(</span><span class="op" id="6725354">*</span><span class="ident" id="6725355">Rat</span><span class="op" id="6725358">)</span><span class="op" id="6725359">.</span><span class="ident" id="6725360">Mul</span><span class="op" id="6725363">,</span>&nbsp;<span class="ident" id="6725365">arg</span><span class="op" id="6725368">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725373">if</span>&nbsp;<span class="ident" id="6725376">test</span><span class="op" id="6725380">.</span><span class="ident" id="6725381">x</span>&nbsp;<span class="op" id="6725383">!=</span>&nbsp;<span class="string" id="6725386">&#34;0&#34;</span>&nbsp;<span class="op" id="6725390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725395">arg</span>&nbsp;<span class="op" id="6725399">=</span>&nbsp;<span class="ident" id="6725401">ratBinArg</span><span class="op" id="6725410">{</span><span class="ident" id="6725411">test</span><span class="op" id="6725415">.</span><span class="ident" id="6725416">prod</span><span class="op" id="6725420">,</span>&nbsp;<span class="ident" id="6725422">test</span><span class="op" id="6725426">.</span><span class="ident" id="6725427">x</span><span class="op" id="6725428">,</span>&nbsp;<span class="ident" id="6725430">test</span><span class="op" id="6725434">.</span><span class="ident" id="6725435">y</span><span class="op" id="6725436">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725441">testRatBin</span><span class="op" id="6725451">(</span><span class="ident" id="6725452">t</span><span class="op" id="6725453">,</span>&nbsp;<span class="ident" id="6725455">i</span><span class="op" id="6725456">,</span>&nbsp;<span class="string" id="6725458">&#34;Quo&#34;</span><span class="op" id="6725463">,</span>&nbsp;<span class="op" id="6725465">(</span><span class="op" id="6725466">*</span><span class="ident" id="6725467">Rat</span><span class="op" id="6725470">)</span><span class="op" id="6725471">.</span><span class="ident" id="6725472">Quo</span><span class="op" id="6725475">,</span>&nbsp;<span class="ident" id="6725477">arg</span><span class="op" id="6725480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725489">if</span>&nbsp;<span class="ident" id="6725492">test</span><span class="op" id="6725496">.</span><span class="ident" id="6725497">y</span>&nbsp;<span class="op" id="6725499">!=</span>&nbsp;<span class="string" id="6725502">&#34;0&#34;</span>&nbsp;<span class="op" id="6725506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725511">arg</span>&nbsp;<span class="op" id="6725515">=</span>&nbsp;<span class="ident" id="6725517">ratBinArg</span><span class="op" id="6725526">{</span><span class="ident" id="6725527">test</span><span class="op" id="6725531">.</span><span class="ident" id="6725532">prod</span><span class="op" id="6725536">,</span>&nbsp;<span class="ident" id="6725538">test</span><span class="op" id="6725542">.</span><span class="ident" id="6725543">y</span><span class="op" id="6725544">,</span>&nbsp;<span class="ident" id="6725546">test</span><span class="op" id="6725550">.</span><span class="ident" id="6725551">x</span><span class="op" id="6725552">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725557">testRatBin</span><span class="op" id="6725567">(</span><span class="ident" id="6725568">t</span><span class="op" id="6725569">,</span>&nbsp;<span class="ident" id="6725571">i</span><span class="op" id="6725572">,</span>&nbsp;<span class="string" id="6725574">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="6725589">,</span>&nbsp;<span class="op" id="6725591">(</span><span class="op" id="6725592">*</span><span class="ident" id="6725593">Rat</span><span class="op" id="6725596">)</span><span class="op" id="6725597">.</span><span class="ident" id="6725598">Quo</span><span class="op" id="6725601">,</span>&nbsp;<span class="ident" id="6725603">arg</span><span class="op" id="6725606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725613">}</span><br>
<span class="lineno"></span><span class="op" id="6725615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="6725618">func</span>&nbsp;<span class="ident" id="6725623">TestIssue820</span><span class="op" id="6725635">(</span><span class="ident" id="6725636">t</span>&nbsp;<span class="op" id="6725638">*</span><span class="ident" id="6725639">testing</span><span class="op" id="6725646">.</span><span class="ident" id="6725647">T</span><span class="op" id="6725648">)</span>&nbsp;<span class="op" id="6725650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725653">x</span>&nbsp;<span class="op" id="6725655">:=</span>&nbsp;<span class="ident" id="6725658">NewRat</span><span class="op" id="6725664">(</span><span class="num" id="6725665">3</span><span class="op" id="6725666">,</span>&nbsp;<span class="num" id="6725668">1</span><span class="op" id="6725669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725672">y</span>&nbsp;<span class="op" id="6725674">:=</span>&nbsp;<span class="ident" id="6725677">NewRat</span><span class="op" id="6725683">(</span><span class="num" id="6725684">2</span><span class="op" id="6725685">,</span>&nbsp;<span class="num" id="6725687">1</span><span class="op" id="6725688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725691">z</span>&nbsp;<span class="op" id="6725693">:=</span>&nbsp;<span class="ident" id="6725696">y</span><span class="op" id="6725697">.</span><span class="ident" id="6725698">Quo</span><span class="op" id="6725701">(</span><span class="ident" id="6725702">x</span><span class="op" id="6725703">,</span>&nbsp;<span class="ident" id="6725705">y</span><span class="op" id="6725706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725709">q</span>&nbsp;<span class="op" id="6725711">:=</span>&nbsp;<span class="ident" id="6725714">NewRat</span><span class="op" id="6725720">(</span><span class="num" id="6725721">3</span><span class="op" id="6725722">,</span>&nbsp;<span class="num" id="6725724">2</span><span class="op" id="6725725">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725728">if</span>&nbsp;<span class="ident" id="6725731">z</span><span class="op" id="6725732">.</span><span class="ident" id="6725733">Cmp</span><span class="op" id="6725736">(</span><span class="ident" id="6725737">q</span><span class="op" id="6725738">)</span>&nbsp;<span class="op" id="6725740">!=</span>&nbsp;<span class="num" id="6725743">0</span>&nbsp;<span class="op" id="6725745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725749">t</span><span class="op" id="6725750">.</span><span class="ident" id="6725751">Errorf</span><span class="op" id="6725757">(</span><span class="string" id="6725758">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6725774">,</span>&nbsp;<span class="ident" id="6725776">z</span><span class="op" id="6725777">,</span>&nbsp;<span class="ident" id="6725779">q</span><span class="op" id="6725780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725787">y</span>&nbsp;<span class="op" id="6725789">=</span>&nbsp;<span class="ident" id="6725791">NewRat</span><span class="op" id="6725797">(</span><span class="num" id="6725798">3</span><span class="op" id="6725799">,</span>&nbsp;<span class="num" id="6725801">1</span><span class="op" id="6725802">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725805">x</span>&nbsp;<span class="op" id="6725807">=</span>&nbsp;<span class="ident" id="6725809">NewRat</span><span class="op" id="6725815">(</span><span class="num" id="6725816">2</span><span class="op" id="6725817">,</span>&nbsp;<span class="num" id="6725819">1</span><span class="op" id="6725820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725823">z</span>&nbsp;<span class="op" id="6725825">=</span>&nbsp;<span class="ident" id="6725827">y</span><span class="op" id="6725828">.</span><span class="ident" id="6725829">Quo</span><span class="op" id="6725832">(</span><span class="ident" id="6725833">x</span><span class="op" id="6725834">,</span>&nbsp;<span class="ident" id="6725836">y</span><span class="op" id="6725837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725840">q</span>&nbsp;<span class="op" id="6725842">=</span>&nbsp;<span class="ident" id="6725844">NewRat</span><span class="op" id="6725850">(</span><span class="num" id="6725851">2</span><span class="op" id="6725852">,</span>&nbsp;<span class="num" id="6725854">3</span><span class="op" id="6725855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725858">if</span>&nbsp;<span class="ident" id="6725861">z</span><span class="op" id="6725862">.</span><span class="ident" id="6725863">Cmp</span><span class="op" id="6725866">(</span><span class="ident" id="6725867">q</span><span class="op" id="6725868">)</span>&nbsp;<span class="op" id="6725870">!=</span>&nbsp;<span class="num" id="6725873">0</span>&nbsp;<span class="op" id="6725875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725879">t</span><span class="op" id="6725880">.</span><span class="ident" id="6725881">Errorf</span><span class="op" id="6725887">(</span><span class="string" id="6725888">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6725904">,</span>&nbsp;<span class="ident" id="6725906">z</span><span class="op" id="6725907">,</span>&nbsp;<span class="ident" id="6725909">q</span><span class="op" id="6725910">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6725913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725917">x</span>&nbsp;<span class="op" id="6725919">=</span>&nbsp;<span class="ident" id="6725921">NewRat</span><span class="op" id="6725927">(</span><span class="num" id="6725928">3</span><span class="op" id="6725929">,</span>&nbsp;<span class="num" id="6725931">1</span><span class="op" id="6725932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725935">z</span>&nbsp;<span class="op" id="6725937">=</span>&nbsp;<span class="ident" id="6725939">x</span><span class="op" id="6725940">.</span><span class="ident" id="6725941">Quo</span><span class="op" id="6725944">(</span><span class="ident" id="6725945">x</span><span class="op" id="6725946">,</span>&nbsp;<span class="ident" id="6725948">x</span><span class="op" id="6725949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725952">q</span>&nbsp;<span class="op" id="6725954">=</span>&nbsp;<span class="ident" id="6725956">NewRat</span><span class="op" id="6725962">(</span><span class="num" id="6725963">3</span><span class="op" id="6725964">,</span>&nbsp;<span class="num" id="6725966">3</span><span class="op" id="6725967">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6725970">if</span>&nbsp;<span class="ident" id="6725973">z</span><span class="op" id="6725974">.</span><span class="ident" id="6725975">Cmp</span><span class="op" id="6725978">(</span><span class="ident" id="6725979">q</span><span class="op" id="6725980">)</span>&nbsp;<span class="op" id="6725982">!=</span>&nbsp;<span class="num" id="6725985">0</span>&nbsp;<span class="op" id="6725987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6725991">t</span><span class="op" id="6725992">.</span><span class="ident" id="6725993">Errorf</span><span class="op" id="6725999">(</span><span class="string" id="6726000">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6726016">,</span>&nbsp;<span class="ident" id="6726018">z</span><span class="op" id="6726019">,</span>&nbsp;<span class="ident" id="6726021">q</span><span class="op" id="6726022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726025">}</span><br>
<span class="lineno"></span><span class="op" id="6726027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="6726030">var</span>&nbsp;<span class="ident" id="6726034">setFrac64Tests</span>&nbsp;<span class="op" id="6726049">=</span>&nbsp;<span class="op" id="6726051">[</span><span class="op" id="6726052">]</span><span class="keyword" id="6726053">struct</span>&nbsp;<span class="op" id="6726060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726063">a</span><span class="op" id="6726064">,</span>&nbsp;<span class="ident" id="6726066">b</span>&nbsp;<span class="ident" id="6726068">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726075">out</span>&nbsp;&nbsp;<span class="builtintype" id="6726080">string</span><br>
<span class="lineno"></span><span class="op" id="6726087">}</span><span class="op" id="6726088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726091">{</span><span class="num" id="6726092">0</span><span class="op" id="6726093">,</span>&nbsp;<span class="num" id="6726095">1</span><span class="op" id="6726096">,</span>&nbsp;<span class="string" id="6726098">&#34;0&#34;</span><span class="op" id="6726101">}</span><span class="op" id="6726102">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726105">{</span><span class="num" id="6726106">0</span><span class="op" id="6726107">,</span>&nbsp;<span class="op" id="6726109">-</span><span class="num" id="6726110">1</span><span class="op" id="6726111">,</span>&nbsp;<span class="string" id="6726113">&#34;0&#34;</span><span class="op" id="6726116">}</span><span class="op" id="6726117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726120">{</span><span class="num" id="6726121">1</span><span class="op" id="6726122">,</span>&nbsp;<span class="num" id="6726124">1</span><span class="op" id="6726125">,</span>&nbsp;<span class="string" id="6726127">&#34;1&#34;</span><span class="op" id="6726130">}</span><span class="op" id="6726131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726134">{</span><span class="op" id="6726135">-</span><span class="num" id="6726136">1</span><span class="op" id="6726137">,</span>&nbsp;<span class="num" id="6726139">1</span><span class="op" id="6726140">,</span>&nbsp;<span class="string" id="6726142">&#34;-1&#34;</span><span class="op" id="6726146">}</span><span class="op" id="6726147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726150">{</span><span class="num" id="6726151">1</span><span class="op" id="6726152">,</span>&nbsp;<span class="op" id="6726154">-</span><span class="num" id="6726155">1</span><span class="op" id="6726156">,</span>&nbsp;<span class="string" id="6726158">&#34;-1&#34;</span><span class="op" id="6726162">}</span><span class="op" id="6726163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726166">{</span><span class="op" id="6726167">-</span><span class="num" id="6726168">1</span><span class="op" id="6726169">,</span>&nbsp;<span class="op" id="6726171">-</span><span class="num" id="6726172">1</span><span class="op" id="6726173">,</span>&nbsp;<span class="string" id="6726175">&#34;1&#34;</span><span class="op" id="6726178">}</span><span class="op" id="6726179">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726182">{</span><span class="op" id="6726183">-</span><span class="num" id="6726184">9223372036854775808</span><span class="op" id="6726203">,</span>&nbsp;<span class="op" id="6726205">-</span><span class="num" id="6726206">9223372036854775808</span><span class="op" id="6726225">,</span>&nbsp;<span class="string" id="6726227">&#34;1&#34;</span><span class="op" id="6726230">}</span><span class="op" id="6726231">,</span><br>
<span class="lineno"></span><span class="op" id="6726233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6726236">func</span>&nbsp;<span class="ident" id="6726241">TestRatSetFrac64Rat</span><span class="op" id="6726260">(</span><span class="ident" id="6726261">t</span>&nbsp;<span class="op" id="6726263">*</span><span class="ident" id="6726264">testing</span><span class="op" id="6726271">.</span><span class="ident" id="6726272">T</span><span class="op" id="6726273">)</span>&nbsp;<span class="op" id="6726275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726278">for</span>&nbsp;<span class="ident" id="6726282">i</span><span class="op" id="6726283">,</span>&nbsp;<span class="ident" id="6726285">test</span>&nbsp;<span class="op" id="6726290">:=</span>&nbsp;<span class="keyword" id="6726293">range</span>&nbsp;<span class="ident" id="6726299">setFrac64Tests</span>&nbsp;<span class="op" id="6726314">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726318">x</span>&nbsp;<span class="op" id="6726320">:=</span>&nbsp;<span class="builtinfunc" id="6726323">new</span><span class="op" id="6726326">(</span><span class="ident" id="6726327">Rat</span><span class="op" id="6726330">)</span><span class="op" id="6726331">.</span><span class="ident" id="6726332">SetFrac64</span><span class="op" id="6726341">(</span><span class="ident" id="6726342">test</span><span class="op" id="6726346">.</span><span class="ident" id="6726347">a</span><span class="op" id="6726348">,</span>&nbsp;<span class="ident" id="6726350">test</span><span class="op" id="6726354">.</span><span class="ident" id="6726355">b</span><span class="op" id="6726356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726360">if</span>&nbsp;<span class="ident" id="6726363">x</span><span class="op" id="6726364">.</span><span class="ident" id="6726365">RatString</span><span class="op" id="6726374">(</span><span class="op" id="6726375">)</span>&nbsp;<span class="op" id="6726377">!=</span>&nbsp;<span class="ident" id="6726380">test</span><span class="op" id="6726384">.</span><span class="ident" id="6726385">out</span>&nbsp;<span class="op" id="6726389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726394">t</span><span class="op" id="6726395">.</span><span class="ident" id="6726396">Errorf</span><span class="op" id="6726402">(</span><span class="string" id="6726403">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6726423">,</span>&nbsp;<span class="ident" id="6726425">i</span><span class="op" id="6726426">,</span>&nbsp;<span class="ident" id="6726428">x</span><span class="op" id="6726429">.</span><span class="ident" id="6726430">RatString</span><span class="op" id="6726439">(</span><span class="op" id="6726440">)</span><span class="op" id="6726441">,</span>&nbsp;<span class="ident" id="6726443">test</span><span class="op" id="6726447">.</span><span class="ident" id="6726448">out</span><span class="op" id="6726451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726458">}</span><br>
<span class="lineno">390</span><span class="op" id="6726460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6726463">func</span>&nbsp;<span class="ident" id="6726468">TestRatGobEncoding</span><span class="op" id="6726486">(</span><span class="ident" id="6726487">t</span>&nbsp;<span class="op" id="6726489">*</span><span class="ident" id="6726490">testing</span><span class="op" id="6726497">.</span><span class="ident" id="6726498">T</span><span class="op" id="6726499">)</span>&nbsp;<span class="op" id="6726501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726504">var</span>&nbsp;<span class="ident" id="6726508">medium</span>&nbsp;<span class="ident" id="6726515">bytes</span><span class="op" id="6726520">.</span><span class="ident" id="6726521">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726529">enc</span>&nbsp;<span class="op" id="6726533">:=</span>&nbsp;<span class="ident" id="6726536">gob</span><span class="op" id="6726539">.</span><span class="ident" id="6726540">NewEncoder</span><span class="op" id="6726550">(</span><span class="op" id="6726551">&amp;</span><span class="ident" id="6726552">medium</span><span class="op" id="6726558">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726561">dec</span>&nbsp;<span class="op" id="6726565">:=</span>&nbsp;<span class="ident" id="6726568">gob</span><span class="op" id="6726571">.</span><span class="ident" id="6726572">NewDecoder</span><span class="op" id="6726582">(</span><span class="op" id="6726583">&amp;</span><span class="ident" id="6726584">medium</span><span class="op" id="6726590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726593">for</span>&nbsp;<span class="ident" id="6726597">_</span><span class="op" id="6726598">,</span>&nbsp;<span class="ident" id="6726600">test</span>&nbsp;<span class="op" id="6726605">:=</span>&nbsp;<span class="keyword" id="6726608">range</span>&nbsp;<span class="ident" id="6726614">encodingTests</span>&nbsp;<span class="op" id="6726628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726632">medium</span><span class="op" id="6726638">.</span><span class="ident" id="6726639">Reset</span><span class="op" id="6726644">(</span><span class="op" id="6726645">)</span>&nbsp;<span class="comment" id="6726647">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726706">var</span>&nbsp;<span class="ident" id="6726710">tx</span>&nbsp;<span class="ident" id="6726713">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726719">tx</span><span class="op" id="6726721">.</span><span class="ident" id="6726722">SetString</span><span class="op" id="6726731">(</span><span class="ident" id="6726732">test</span>&nbsp;<span class="op" id="6726737">+</span>&nbsp;<span class="string" id="6726739">&#34;.14159265&#34;</span><span class="op" id="6726750">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726754">if</span>&nbsp;<span class="ident" id="6726757">err</span>&nbsp;<span class="op" id="6726761">:=</span>&nbsp;<span class="ident" id="6726764">enc</span><span class="op" id="6726767">.</span><span class="ident" id="6726768">Encode</span><span class="op" id="6726774">(</span><span class="op" id="6726775">&amp;</span><span class="ident" id="6726776">tx</span><span class="op" id="6726778">)</span><span class="op" id="6726779">;</span>&nbsp;<span class="ident" id="6726781">err</span>&nbsp;<span class="op" id="6726785">!=</span>&nbsp;<span class="ident" id="6726788">nil</span>&nbsp;<span class="op" id="6726792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726797">t</span><span class="op" id="6726798">.</span><span class="ident" id="6726799">Errorf</span><span class="op" id="6726805">(</span><span class="string" id="6726806">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6726833">,</span>&nbsp;<span class="op" id="6726835">&amp;</span><span class="ident" id="6726836">tx</span><span class="op" id="6726838">,</span>&nbsp;<span class="ident" id="6726840">err</span><span class="op" id="6726843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726851">var</span>&nbsp;<span class="ident" id="6726855">rx</span>&nbsp;<span class="ident" id="6726858">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726864">if</span>&nbsp;<span class="ident" id="6726867">err</span>&nbsp;<span class="op" id="6726871">:=</span>&nbsp;<span class="ident" id="6726874">dec</span><span class="op" id="6726877">.</span><span class="ident" id="6726878">Decode</span><span class="op" id="6726884">(</span><span class="op" id="6726885">&amp;</span><span class="ident" id="6726886">rx</span><span class="op" id="6726888">)</span><span class="op" id="6726889">;</span>&nbsp;<span class="ident" id="6726891">err</span>&nbsp;<span class="op" id="6726895">!=</span>&nbsp;<span class="ident" id="6726898">nil</span>&nbsp;<span class="op" id="6726902">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726907">t</span><span class="op" id="6726908">.</span><span class="ident" id="6726909">Errorf</span><span class="op" id="6726915">(</span><span class="string" id="6726916">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6726943">,</span>&nbsp;<span class="op" id="6726945">&amp;</span><span class="ident" id="6726946">tx</span><span class="op" id="6726948">,</span>&nbsp;<span class="ident" id="6726950">err</span><span class="op" id="6726953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6726957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6726961">if</span>&nbsp;<span class="ident" id="6726964">rx</span><span class="op" id="6726966">.</span><span class="ident" id="6726967">Cmp</span><span class="op" id="6726970">(</span><span class="op" id="6726971">&amp;</span><span class="ident" id="6726972">tx</span><span class="op" id="6726974">)</span>&nbsp;<span class="op" id="6726976">!=</span>&nbsp;<span class="num" id="6726979">0</span>&nbsp;<span class="op" id="6726981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6726986">t</span><span class="op" id="6726987">.</span><span class="ident" id="6726988">Errorf</span><span class="op" id="6726994">(</span><span class="string" id="6726995">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6727038">,</span>&nbsp;<span class="op" id="6727040">&amp;</span><span class="ident" id="6727041">tx</span><span class="op" id="6727043">,</span>&nbsp;<span class="op" id="6727045">&amp;</span><span class="ident" id="6727046">rx</span><span class="op" id="6727048">,</span>&nbsp;<span class="op" id="6727050">&amp;</span><span class="ident" id="6727051">tx</span><span class="op" id="6727053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6727057">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6727060">}</span><br>
<span class="lineno"></span><span class="op" id="6727062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6727065">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="6727160">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="6727185">func</span>&nbsp;<span class="ident" id="6727190">TestGobEncodingNilRatInSlice</span><span class="op" id="6727218">(</span><span class="ident" id="6727219">t</span>&nbsp;<span class="op" id="6727221">*</span><span class="ident" id="6727222">testing</span><span class="op" id="6727229">.</span><span class="ident" id="6727230">T</span><span class="op" id="6727231">)</span>&nbsp;<span class="op" id="6727233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727236">buf</span>&nbsp;<span class="op" id="6727240">:=</span>&nbsp;<span class="builtinfunc" id="6727243">new</span><span class="op" id="6727246">(</span><span class="ident" id="6727247">bytes</span><span class="op" id="6727252">.</span><span class="ident" id="6727253">Buffer</span><span class="op" id="6727259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727262">enc</span>&nbsp;<span class="op" id="6727266">:=</span>&nbsp;<span class="ident" id="6727269">gob</span><span class="op" id="6727272">.</span><span class="ident" id="6727273">NewEncoder</span><span class="op" id="6727283">(</span><span class="ident" id="6727284">buf</span><span class="op" id="6727287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727290">dec</span>&nbsp;<span class="op" id="6727294">:=</span>&nbsp;<span class="ident" id="6727297">gob</span><span class="op" id="6727300">.</span><span class="ident" id="6727301">NewDecoder</span><span class="op" id="6727311">(</span><span class="ident" id="6727312">buf</span><span class="op" id="6727315">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727319">var</span>&nbsp;<span class="ident" id="6727323">in</span>&nbsp;<span class="op" id="6727326">=</span>&nbsp;<span class="builtinfunc" id="6727328">make</span><span class="op" id="6727332">(</span><span class="op" id="6727333">[</span><span class="op" id="6727334">]</span><span class="op" id="6727335">*</span><span class="ident" id="6727336">Rat</span><span class="op" id="6727339">,</span>&nbsp;<span class="num" id="6727341">1</span><span class="op" id="6727342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727345">err</span>&nbsp;<span class="op" id="6727349">:=</span>&nbsp;<span class="ident" id="6727352">enc</span><span class="op" id="6727355">.</span><span class="ident" id="6727356">Encode</span><span class="op" id="6727362">(</span><span class="op" id="6727363">&amp;</span><span class="ident" id="6727364">in</span><span class="op" id="6727366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727369">if</span>&nbsp;<span class="ident" id="6727372">err</span>&nbsp;<span class="op" id="6727376">!=</span>&nbsp;<span class="ident" id="6727379">nil</span>&nbsp;<span class="op" id="6727383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727387">t</span><span class="op" id="6727388">.</span><span class="ident" id="6727389">Errorf</span><span class="op" id="6727395">(</span><span class="string" id="6727396">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="6727419">,</span>&nbsp;<span class="ident" id="6727421">err</span><span class="op" id="6727424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6727427">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727430">var</span>&nbsp;<span class="ident" id="6727434">out</span>&nbsp;<span class="op" id="6727438">[</span><span class="op" id="6727439">]</span><span class="op" id="6727440">*</span><span class="ident" id="6727441">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727446">err</span>&nbsp;<span class="op" id="6727450">=</span>&nbsp;<span class="ident" id="6727452">dec</span><span class="op" id="6727455">.</span><span class="ident" id="6727456">Decode</span><span class="op" id="6727462">(</span><span class="op" id="6727463">&amp;</span><span class="ident" id="6727464">out</span><span class="op" id="6727467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727470">if</span>&nbsp;<span class="ident" id="6727473">err</span>&nbsp;<span class="op" id="6727477">!=</span>&nbsp;<span class="ident" id="6727480">nil</span>&nbsp;<span class="op" id="6727484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727488">t</span><span class="op" id="6727489">.</span><span class="ident" id="6727490">Fatalf</span><span class="op" id="6727496">(</span><span class="string" id="6727497">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="6727520">,</span>&nbsp;<span class="ident" id="6727522">err</span><span class="op" id="6727525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6727528">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727531">if</span>&nbsp;<span class="builtinfunc" id="6727534">len</span><span class="op" id="6727537">(</span><span class="ident" id="6727538">out</span><span class="op" id="6727541">)</span>&nbsp;<span class="op" id="6727543">!=</span>&nbsp;<span class="num" id="6727546">1</span>&nbsp;<span class="op" id="6727548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727552">t</span><span class="op" id="6727553">.</span><span class="ident" id="6727554">Fatalf</span><span class="op" id="6727560">(</span><span class="string" id="6727561">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6727587">,</span>&nbsp;<span class="builtinfunc" id="6727589">len</span><span class="op" id="6727592">(</span><span class="ident" id="6727593">out</span><span class="op" id="6727596">)</span><span class="op" id="6727597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6727600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727603">var</span>&nbsp;<span class="ident" id="6727607">zero</span>&nbsp;<span class="ident" id="6727612">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6727617">if</span>&nbsp;<span class="ident" id="6727620">out</span><span class="op" id="6727623">[</span><span class="num" id="6727624">0</span><span class="op" id="6727625">]</span><span class="op" id="6727626">.</span><span class="ident" id="6727627">Cmp</span><span class="op" id="6727630">(</span><span class="op" id="6727631">&amp;</span><span class="ident" id="6727632">zero</span><span class="op" id="6727636">)</span>&nbsp;<span class="op" id="6727638">!=</span>&nbsp;<span class="num" id="6727641">0</span>&nbsp;<span class="op" id="6727643">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6727647">t</span><span class="op" id="6727648">.</span><span class="ident" id="6727649">Errorf</span><span class="op" id="6727655">(</span><span class="string" id="6727656">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="6727708">,</span>&nbsp;<span class="ident" id="6727710">out</span><span class="op" id="6727713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6727716">}</span><br>
<span class="lineno"></span><span class="op" id="6727718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6727721">var</span>&nbsp;<span class="ident" id="6727725">ratNums</span>&nbsp;<span class="op" id="6727733">=</span>&nbsp;<span class="op" id="6727735">[</span><span class="op" id="6727736">]</span><span class="builtintype" id="6727737">string</span><span class="op" id="6727743">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727746">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="6727824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727827">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="6727870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727873">&#34;-141592653589793&#34;</span><span class="op" id="6727891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727894">&#34;-1&#34;</span><span class="op" id="6727898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727901">&#34;0&#34;</span><span class="op" id="6727904">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727907">&#34;1&#34;</span><span class="op" id="6727910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727913">&#34;141592653589793&#34;</span><span class="op" id="6727930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727933">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="6727975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6727978">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="6728055">,</span><br>
<span class="lineno"></span><span class="op" id="6728057">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="6728060">var</span>&nbsp;<span class="ident" id="6728064">ratDenoms</span>&nbsp;<span class="op" id="6728074">=</span>&nbsp;<span class="op" id="6728076">[</span><span class="op" id="6728077">]</span><span class="builtintype" id="6728078">string</span><span class="op" id="6728084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728087">&#34;1&#34;</span><span class="op" id="6728090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728093">&#34;718281828459045&#34;</span><span class="op" id="6728110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728113">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="6728155">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728158">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="6728235">,</span><br>
<span class="lineno"></span><span class="op" id="6728237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728240">func</span>&nbsp;<span class="ident" id="6728245">TestRatJSONEncoding</span><span class="op" id="6728264">(</span><span class="ident" id="6728265">t</span>&nbsp;<span class="op" id="6728267">*</span><span class="ident" id="6728268">testing</span><span class="op" id="6728275">.</span><span class="ident" id="6728276">T</span><span class="op" id="6728277">)</span>&nbsp;<span class="op" id="6728279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728282">for</span>&nbsp;<span class="ident" id="6728286">_</span><span class="op" id="6728287">,</span>&nbsp;<span class="ident" id="6728289">num</span>&nbsp;<span class="op" id="6728293">:=</span>&nbsp;<span class="keyword" id="6728296">range</span>&nbsp;<span class="ident" id="6728302">ratNums</span>&nbsp;<span class="op" id="6728310">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728314">for</span>&nbsp;<span class="ident" id="6728318">_</span><span class="op" id="6728319">,</span>&nbsp;<span class="ident" id="6728321">denom</span>&nbsp;<span class="op" id="6728327">:=</span>&nbsp;<span class="keyword" id="6728330">range</span>&nbsp;<span class="ident" id="6728336">ratDenoms</span>&nbsp;<span class="op" id="6728346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728351">var</span>&nbsp;<span class="ident" id="6728355">tx</span>&nbsp;<span class="ident" id="6728358">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728365">tx</span><span class="op" id="6728367">.</span><span class="ident" id="6728368">SetString</span><span class="op" id="6728377">(</span><span class="ident" id="6728378">num</span>&nbsp;<span class="op" id="6728382">+</span>&nbsp;<span class="string" id="6728384">&#34;/&#34;</span>&nbsp;<span class="op" id="6728388">+</span>&nbsp;<span class="ident" id="6728390">denom</span><span class="op" id="6728395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728400">b</span><span class="op" id="6728401">,</span>&nbsp;<span class="ident" id="6728403">err</span>&nbsp;<span class="op" id="6728407">:=</span>&nbsp;<span class="ident" id="6728410">json</span><span class="op" id="6728414">.</span><span class="ident" id="6728415">Marshal</span><span class="op" id="6728422">(</span><span class="op" id="6728423">&amp;</span><span class="ident" id="6728424">tx</span><span class="op" id="6728426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728431">if</span>&nbsp;<span class="ident" id="6728434">err</span>&nbsp;<span class="op" id="6728438">!=</span>&nbsp;<span class="ident" id="6728441">nil</span>&nbsp;<span class="op" id="6728445">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728451">t</span><span class="op" id="6728452">.</span><span class="ident" id="6728453">Errorf</span><span class="op" id="6728459">(</span><span class="string" id="6728460">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6728489">,</span>&nbsp;<span class="op" id="6728491">&amp;</span><span class="ident" id="6728492">tx</span><span class="op" id="6728494">,</span>&nbsp;<span class="ident" id="6728496">err</span><span class="op" id="6728499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728505">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6728517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728522">var</span>&nbsp;<span class="ident" id="6728526">rx</span>&nbsp;<span class="ident" id="6728529">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728536">if</span>&nbsp;<span class="ident" id="6728539">err</span>&nbsp;<span class="op" id="6728543">:=</span>&nbsp;<span class="ident" id="6728546">json</span><span class="op" id="6728550">.</span><span class="ident" id="6728551">Unmarshal</span><span class="op" id="6728560">(</span><span class="ident" id="6728561">b</span><span class="op" id="6728562">,</span>&nbsp;<span class="op" id="6728564">&amp;</span><span class="ident" id="6728565">rx</span><span class="op" id="6728567">)</span><span class="op" id="6728568">;</span>&nbsp;<span class="ident" id="6728570">err</span>&nbsp;<span class="op" id="6728574">!=</span>&nbsp;<span class="ident" id="6728577">nil</span>&nbsp;<span class="op" id="6728581">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728587">t</span><span class="op" id="6728588">.</span><span class="ident" id="6728589">Errorf</span><span class="op" id="6728595">(</span><span class="string" id="6728596">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6728627">,</span>&nbsp;<span class="op" id="6728629">&amp;</span><span class="ident" id="6728630">tx</span><span class="op" id="6728632">,</span>&nbsp;<span class="ident" id="6728634">err</span><span class="op" id="6728637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728643">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6728655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728660">if</span>&nbsp;<span class="ident" id="6728663">rx</span><span class="op" id="6728665">.</span><span class="ident" id="6728666">Cmp</span><span class="op" id="6728669">(</span><span class="op" id="6728670">&amp;</span><span class="ident" id="6728671">tx</span><span class="op" id="6728673">)</span>&nbsp;<span class="op" id="6728675">!=</span>&nbsp;<span class="num" id="6728678">0</span>&nbsp;<span class="op" id="6728680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728686">t</span><span class="op" id="6728687">.</span><span class="ident" id="6728688">Errorf</span><span class="op" id="6728694">(</span><span class="string" id="6728695">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6728739">,</span>&nbsp;<span class="op" id="6728741">&amp;</span><span class="ident" id="6728742">tx</span><span class="op" id="6728744">,</span>&nbsp;<span class="op" id="6728746">&amp;</span><span class="ident" id="6728747">rx</span><span class="op" id="6728749">,</span>&nbsp;<span class="op" id="6728751">&amp;</span><span class="ident" id="6728752">tx</span><span class="op" id="6728754">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6728759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6728763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6728766">}</span><br>
<span class="lineno"></span><span class="op" id="6728768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="6728771">func</span>&nbsp;<span class="ident" id="6728776">TestRatXMLEncoding</span><span class="op" id="6728794">(</span><span class="ident" id="6728795">t</span>&nbsp;<span class="op" id="6728797">*</span><span class="ident" id="6728798">testing</span><span class="op" id="6728805">.</span><span class="ident" id="6728806">T</span><span class="op" id="6728807">)</span>&nbsp;<span class="op" id="6728809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728812">for</span>&nbsp;<span class="ident" id="6728816">_</span><span class="op" id="6728817">,</span>&nbsp;<span class="ident" id="6728819">num</span>&nbsp;<span class="op" id="6728823">:=</span>&nbsp;<span class="keyword" id="6728826">range</span>&nbsp;<span class="ident" id="6728832">ratNums</span>&nbsp;<span class="op" id="6728840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728844">for</span>&nbsp;<span class="ident" id="6728848">_</span><span class="op" id="6728849">,</span>&nbsp;<span class="ident" id="6728851">denom</span>&nbsp;<span class="op" id="6728857">:=</span>&nbsp;<span class="keyword" id="6728860">range</span>&nbsp;<span class="ident" id="6728866">ratDenoms</span>&nbsp;<span class="op" id="6728876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728881">var</span>&nbsp;<span class="ident" id="6728885">tx</span>&nbsp;<span class="ident" id="6728888">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728895">tx</span><span class="op" id="6728897">.</span><span class="ident" id="6728898">SetString</span><span class="op" id="6728907">(</span><span class="ident" id="6728908">num</span>&nbsp;<span class="op" id="6728912">+</span>&nbsp;<span class="string" id="6728914">&#34;/&#34;</span>&nbsp;<span class="op" id="6728918">+</span>&nbsp;<span class="ident" id="6728920">denom</span><span class="op" id="6728925">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728930">b</span><span class="op" id="6728931">,</span>&nbsp;<span class="ident" id="6728933">err</span>&nbsp;<span class="op" id="6728937">:=</span>&nbsp;<span class="ident" id="6728940">xml</span><span class="op" id="6728943">.</span><span class="ident" id="6728944">Marshal</span><span class="op" id="6728951">(</span><span class="op" id="6728952">&amp;</span><span class="ident" id="6728953">tx</span><span class="op" id="6728955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6728960">if</span>&nbsp;<span class="ident" id="6728963">err</span>&nbsp;<span class="op" id="6728967">!=</span>&nbsp;<span class="ident" id="6728970">nil</span>&nbsp;<span class="op" id="6728974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728980">t</span><span class="op" id="6728981">.</span><span class="ident" id="6728982">Errorf</span><span class="op" id="6728988">(</span><span class="string" id="6728989">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6729018">,</span>&nbsp;<span class="op" id="6729020">&amp;</span><span class="ident" id="6729021">tx</span><span class="op" id="6729023">,</span>&nbsp;<span class="ident" id="6729025">err</span><span class="op" id="6729028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729034">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729046">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729051">var</span>&nbsp;<span class="ident" id="6729055">rx</span>&nbsp;<span class="ident" id="6729058">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729065">if</span>&nbsp;<span class="ident" id="6729068">err</span>&nbsp;<span class="op" id="6729072">:=</span>&nbsp;<span class="ident" id="6729075">xml</span><span class="op" id="6729078">.</span><span class="ident" id="6729079">Unmarshal</span><span class="op" id="6729088">(</span><span class="ident" id="6729089">b</span><span class="op" id="6729090">,</span>&nbsp;<span class="op" id="6729092">&amp;</span><span class="ident" id="6729093">rx</span><span class="op" id="6729095">)</span><span class="op" id="6729096">;</span>&nbsp;<span class="ident" id="6729098">err</span>&nbsp;<span class="op" id="6729102">!=</span>&nbsp;<span class="ident" id="6729105">nil</span>&nbsp;<span class="op" id="6729109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729115">t</span><span class="op" id="6729116">.</span><span class="ident" id="6729117">Errorf</span><span class="op" id="6729123">(</span><span class="string" id="6729124">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="6729155">,</span>&nbsp;<span class="op" id="6729157">&amp;</span><span class="ident" id="6729158">tx</span><span class="op" id="6729160">,</span>&nbsp;<span class="ident" id="6729162">err</span><span class="op" id="6729165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729171">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729183">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729188">if</span>&nbsp;<span class="ident" id="6729191">rx</span><span class="op" id="6729193">.</span><span class="ident" id="6729194">Cmp</span><span class="op" id="6729197">(</span><span class="op" id="6729198">&amp;</span><span class="ident" id="6729199">tx</span><span class="op" id="6729201">)</span>&nbsp;<span class="op" id="6729203">!=</span>&nbsp;<span class="num" id="6729206">0</span>&nbsp;<span class="op" id="6729208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729214">t</span><span class="op" id="6729215">.</span><span class="ident" id="6729216">Errorf</span><span class="op" id="6729222">(</span><span class="string" id="6729223">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6729266">,</span>&nbsp;<span class="op" id="6729268">&amp;</span><span class="ident" id="6729269">tx</span><span class="op" id="6729271">,</span>&nbsp;<span class="op" id="6729273">&amp;</span><span class="ident" id="6729274">rx</span><span class="op" id="6729276">,</span>&nbsp;<span class="op" id="6729278">&amp;</span><span class="ident" id="6729279">tx</span><span class="op" id="6729281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729293">}</span><br>
<span class="lineno">500</span><span class="op" id="6729295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729298">func</span>&nbsp;<span class="ident" id="6729303">TestIssue2379</span><span class="op" id="6729316">(</span><span class="ident" id="6729317">t</span>&nbsp;<span class="op" id="6729319">*</span><span class="ident" id="6729320">testing</span><span class="op" id="6729327">.</span><span class="ident" id="6729328">T</span><span class="op" id="6729329">)</span>&nbsp;<span class="op" id="6729331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729334">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729353">q</span>&nbsp;<span class="op" id="6729355">:=</span>&nbsp;<span class="ident" id="6729358">NewRat</span><span class="op" id="6729364">(</span><span class="num" id="6729365">3</span><span class="op" id="6729366">,</span>&nbsp;<span class="num" id="6729368">2</span><span class="op" id="6729369">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729372">x</span>&nbsp;<span class="op" id="6729374">:=</span>&nbsp;<span class="builtinfunc" id="6729377">new</span><span class="op" id="6729380">(</span><span class="ident" id="6729381">Rat</span><span class="op" id="6729384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729387">x</span><span class="op" id="6729388">.</span><span class="ident" id="6729389">SetFrac</span><span class="op" id="6729396">(</span><span class="ident" id="6729397">NewInt</span><span class="op" id="6729403">(</span><span class="num" id="6729404">3</span><span class="op" id="6729405">)</span><span class="op" id="6729406">,</span>&nbsp;<span class="ident" id="6729408">NewInt</span><span class="op" id="6729414">(</span><span class="num" id="6729415">2</span><span class="op" id="6729416">)</span><span class="op" id="6729417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729420">if</span>&nbsp;<span class="ident" id="6729423">x</span><span class="op" id="6729424">.</span><span class="ident" id="6729425">Cmp</span><span class="op" id="6729428">(</span><span class="ident" id="6729429">q</span><span class="op" id="6729430">)</span>&nbsp;<span class="op" id="6729432">!=</span>&nbsp;<span class="num" id="6729435">0</span>&nbsp;<span class="op" id="6729437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729441">t</span><span class="op" id="6729442">.</span><span class="ident" id="6729443">Errorf</span><span class="op" id="6729449">(</span><span class="string" id="6729450">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6729469">,</span>&nbsp;<span class="ident" id="6729471">x</span><span class="op" id="6729472">,</span>&nbsp;<span class="ident" id="6729474">q</span><span class="op" id="6729475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729478">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729482">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729511">x</span>&nbsp;<span class="op" id="6729513">=</span>&nbsp;<span class="ident" id="6729515">NewRat</span><span class="op" id="6729521">(</span><span class="num" id="6729522">2</span><span class="op" id="6729523">,</span>&nbsp;<span class="num" id="6729525">3</span><span class="op" id="6729526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729529">x</span><span class="op" id="6729530">.</span><span class="ident" id="6729531">SetFrac</span><span class="op" id="6729538">(</span><span class="ident" id="6729539">NewInt</span><span class="op" id="6729545">(</span><span class="num" id="6729546">3</span><span class="op" id="6729547">)</span><span class="op" id="6729548">,</span>&nbsp;<span class="ident" id="6729550">x</span><span class="op" id="6729551">.</span><span class="ident" id="6729552">Num</span><span class="op" id="6729555">(</span><span class="op" id="6729556">)</span><span class="op" id="6729557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729560">if</span>&nbsp;<span class="ident" id="6729563">x</span><span class="op" id="6729564">.</span><span class="ident" id="6729565">Cmp</span><span class="op" id="6729568">(</span><span class="ident" id="6729569">q</span><span class="op" id="6729570">)</span>&nbsp;<span class="op" id="6729572">!=</span>&nbsp;<span class="num" id="6729575">0</span>&nbsp;<span class="op" id="6729577">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729581">t</span><span class="op" id="6729582">.</span><span class="ident" id="6729583">Errorf</span><span class="op" id="6729589">(</span><span class="string" id="6729590">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6729609">,</span>&nbsp;<span class="ident" id="6729611">x</span><span class="op" id="6729612">,</span>&nbsp;<span class="ident" id="6729614">q</span><span class="op" id="6729615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729622">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729653">x</span>&nbsp;<span class="op" id="6729655">=</span>&nbsp;<span class="ident" id="6729657">NewRat</span><span class="op" id="6729663">(</span><span class="num" id="6729664">2</span><span class="op" id="6729665">,</span>&nbsp;<span class="num" id="6729667">3</span><span class="op" id="6729668">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729671">x</span><span class="op" id="6729672">.</span><span class="ident" id="6729673">SetFrac</span><span class="op" id="6729680">(</span><span class="ident" id="6729681">x</span><span class="op" id="6729682">.</span><span class="ident" id="6729683">Denom</span><span class="op" id="6729688">(</span><span class="op" id="6729689">)</span><span class="op" id="6729690">,</span>&nbsp;<span class="ident" id="6729692">NewInt</span><span class="op" id="6729698">(</span><span class="num" id="6729699">2</span><span class="op" id="6729700">)</span><span class="op" id="6729701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729704">if</span>&nbsp;<span class="ident" id="6729707">x</span><span class="op" id="6729708">.</span><span class="ident" id="6729709">Cmp</span><span class="op" id="6729712">(</span><span class="ident" id="6729713">q</span><span class="op" id="6729714">)</span>&nbsp;<span class="op" id="6729716">!=</span>&nbsp;<span class="num" id="6729719">0</span>&nbsp;<span class="op" id="6729721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729725">t</span><span class="op" id="6729726">.</span><span class="ident" id="6729727">Errorf</span><span class="op" id="6729733">(</span><span class="string" id="6729734">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6729753">,</span>&nbsp;<span class="ident" id="6729755">x</span><span class="op" id="6729756">,</span>&nbsp;<span class="ident" id="6729758">q</span><span class="op" id="6729759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729766">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729811">x</span>&nbsp;<span class="op" id="6729813">=</span>&nbsp;<span class="ident" id="6729815">NewRat</span><span class="op" id="6729821">(</span><span class="num" id="6729822">2</span><span class="op" id="6729823">,</span>&nbsp;<span class="num" id="6729825">3</span><span class="op" id="6729826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729829">x</span><span class="op" id="6729830">.</span><span class="ident" id="6729831">SetFrac</span><span class="op" id="6729838">(</span><span class="ident" id="6729839">x</span><span class="op" id="6729840">.</span><span class="ident" id="6729841">Denom</span><span class="op" id="6729846">(</span><span class="op" id="6729847">)</span><span class="op" id="6729848">,</span>&nbsp;<span class="ident" id="6729850">x</span><span class="op" id="6729851">.</span><span class="ident" id="6729852">Num</span><span class="op" id="6729855">(</span><span class="op" id="6729856">)</span><span class="op" id="6729857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729860">if</span>&nbsp;<span class="ident" id="6729863">x</span><span class="op" id="6729864">.</span><span class="ident" id="6729865">Cmp</span><span class="op" id="6729868">(</span><span class="ident" id="6729869">q</span><span class="op" id="6729870">)</span>&nbsp;<span class="op" id="6729872">!=</span>&nbsp;<span class="num" id="6729875">0</span>&nbsp;<span class="op" id="6729877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729881">t</span><span class="op" id="6729882">.</span><span class="ident" id="6729883">Errorf</span><span class="op" id="6729889">(</span><span class="string" id="6729890">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6729909">,</span>&nbsp;<span class="ident" id="6729911">x</span><span class="op" id="6729912">,</span>&nbsp;<span class="ident" id="6729914">q</span><span class="op" id="6729915">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729922">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729968">q</span>&nbsp;<span class="op" id="6729970">=</span>&nbsp;<span class="ident" id="6729972">NewRat</span><span class="op" id="6729978">(</span><span class="num" id="6729979">1</span><span class="op" id="6729980">,</span>&nbsp;<span class="num" id="6729982">1</span><span class="op" id="6729983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729986">x</span>&nbsp;<span class="op" id="6729988">=</span>&nbsp;<span class="builtinfunc" id="6729990">new</span><span class="op" id="6729993">(</span><span class="ident" id="6729994">Rat</span><span class="op" id="6729997">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730000">n</span>&nbsp;<span class="op" id="6730002">:=</span>&nbsp;<span class="ident" id="6730005">NewInt</span><span class="op" id="6730011">(</span><span class="num" id="6730012">7</span><span class="op" id="6730013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730016">x</span><span class="op" id="6730017">.</span><span class="ident" id="6730018">SetFrac</span><span class="op" id="6730025">(</span><span class="ident" id="6730026">n</span><span class="op" id="6730027">,</span>&nbsp;<span class="ident" id="6730029">n</span><span class="op" id="6730030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730033">if</span>&nbsp;<span class="ident" id="6730036">x</span><span class="op" id="6730037">.</span><span class="ident" id="6730038">Cmp</span><span class="op" id="6730041">(</span><span class="ident" id="6730042">q</span><span class="op" id="6730043">)</span>&nbsp;<span class="op" id="6730045">!=</span>&nbsp;<span class="num" id="6730048">0</span>&nbsp;<span class="op" id="6730050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730054">t</span><span class="op" id="6730055">.</span><span class="ident" id="6730056">Errorf</span><span class="op" id="6730062">(</span><span class="string" id="6730063">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6730082">,</span>&nbsp;<span class="ident" id="6730084">x</span><span class="op" id="6730085">,</span>&nbsp;<span class="ident" id="6730087">q</span><span class="op" id="6730088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730091">}</span><br>
<span class="lineno">540</span><span class="op" id="6730093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730096">func</span>&nbsp;<span class="ident" id="6730101">TestIssue3521</span><span class="op" id="6730114">(</span><span class="ident" id="6730115">t</span>&nbsp;<span class="op" id="6730117">*</span><span class="ident" id="6730118">testing</span><span class="op" id="6730125">.</span><span class="ident" id="6730126">T</span><span class="op" id="6730127">)</span>&nbsp;<span class="op" id="6730129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730132">a</span>&nbsp;<span class="op" id="6730134">:=</span>&nbsp;<span class="builtinfunc" id="6730137">new</span><span class="op" id="6730140">(</span><span class="ident" id="6730141">Int</span><span class="op" id="6730144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730147">b</span>&nbsp;<span class="op" id="6730149">:=</span>&nbsp;<span class="builtinfunc" id="6730152">new</span><span class="op" id="6730155">(</span><span class="ident" id="6730156">Int</span><span class="op" id="6730159">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730162">a</span><span class="op" id="6730163">.</span><span class="ident" id="6730164">SetString</span><span class="op" id="6730173">(</span><span class="string" id="6730174">&#34;64375784358435883458348587&#34;</span><span class="op" id="6730202">,</span>&nbsp;<span class="num" id="6730204">0</span><span class="op" id="6730205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730208">b</span><span class="op" id="6730209">.</span><span class="ident" id="6730210">SetString</span><span class="op" id="6730219">(</span><span class="string" id="6730220">&#34;4789759874531&#34;</span><span class="op" id="6730235">,</span>&nbsp;<span class="num" id="6730237">0</span><span class="op" id="6730238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730242">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730287">zero</span>&nbsp;<span class="op" id="6730292">:=</span>&nbsp;<span class="builtinfunc" id="6730295">new</span><span class="op" id="6730298">(</span><span class="ident" id="6730299">Rat</span><span class="op" id="6730302">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730305">one</span>&nbsp;<span class="op" id="6730309">:=</span>&nbsp;<span class="ident" id="6730312">NewInt</span><span class="op" id="6730318">(</span><span class="num" id="6730319">1</span><span class="op" id="6730320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730323">if</span>&nbsp;<span class="ident" id="6730326">zero</span><span class="op" id="6730330">.</span><span class="ident" id="6730331">Denom</span><span class="op" id="6730336">(</span><span class="op" id="6730337">)</span><span class="op" id="6730338">.</span><span class="ident" id="6730339">Cmp</span><span class="op" id="6730342">(</span><span class="ident" id="6730343">one</span><span class="op" id="6730346">)</span>&nbsp;<span class="op" id="6730348">!=</span>&nbsp;<span class="num" id="6730351">0</span>&nbsp;<span class="op" id="6730353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730357">t</span><span class="op" id="6730358">.</span><span class="ident" id="6730359">Errorf</span><span class="op" id="6730365">(</span><span class="string" id="6730366">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6730385">,</span>&nbsp;<span class="ident" id="6730387">zero</span><span class="op" id="6730391">.</span><span class="ident" id="6730392">Denom</span><span class="op" id="6730397">(</span><span class="op" id="6730398">)</span><span class="op" id="6730399">,</span>&nbsp;<span class="ident" id="6730401">one</span><span class="op" id="6730404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730411">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730472">x</span>&nbsp;<span class="op" id="6730474">:=</span>&nbsp;<span class="builtinfunc" id="6730477">new</span><span class="op" id="6730480">(</span><span class="ident" id="6730481">Rat</span><span class="op" id="6730484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730487">x</span><span class="op" id="6730488">.</span><span class="ident" id="6730489">Denom</span><span class="op" id="6730494">(</span><span class="op" id="6730495">)</span><span class="op" id="6730496">.</span><span class="ident" id="6730497">Set</span><span class="op" id="6730500">(</span><span class="builtinfunc" id="6730501">new</span><span class="op" id="6730504">(</span><span class="ident" id="6730505">Int</span><span class="op" id="6730508">)</span><span class="op" id="6730509">.</span><span class="ident" id="6730510">Neg</span><span class="op" id="6730513">(</span><span class="ident" id="6730514">b</span><span class="op" id="6730515">)</span><span class="op" id="6730516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730519">if</span>&nbsp;<span class="ident" id="6730522">x</span><span class="op" id="6730523">.</span><span class="ident" id="6730524">Cmp</span><span class="op" id="6730527">(</span><span class="ident" id="6730528">zero</span><span class="op" id="6730532">)</span>&nbsp;<span class="op" id="6730534">!=</span>&nbsp;<span class="num" id="6730537">0</span>&nbsp;<span class="op" id="6730539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730543">t</span><span class="op" id="6730544">.</span><span class="ident" id="6730545">Errorf</span><span class="op" id="6730551">(</span><span class="string" id="6730552">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6730572">,</span>&nbsp;<span class="ident" id="6730574">x</span><span class="op" id="6730575">,</span>&nbsp;<span class="ident" id="6730577">zero</span><span class="op" id="6730581">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730588">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730646">x</span><span class="op" id="6730647">.</span><span class="ident" id="6730648">Num</span><span class="op" id="6730651">(</span><span class="op" id="6730652">)</span><span class="op" id="6730653">.</span><span class="ident" id="6730654">Set</span><span class="op" id="6730657">(</span><span class="ident" id="6730658">a</span><span class="op" id="6730659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730662">qab</span>&nbsp;<span class="op" id="6730666">:=</span>&nbsp;<span class="builtinfunc" id="6730669">new</span><span class="op" id="6730672">(</span><span class="ident" id="6730673">Rat</span><span class="op" id="6730676">)</span><span class="op" id="6730677">.</span><span class="ident" id="6730678">SetFrac</span><span class="op" id="6730685">(</span><span class="ident" id="6730686">a</span><span class="op" id="6730687">,</span>&nbsp;<span class="ident" id="6730689">b</span><span class="op" id="6730690">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730693">if</span>&nbsp;<span class="ident" id="6730696">x</span><span class="op" id="6730697">.</span><span class="ident" id="6730698">Cmp</span><span class="op" id="6730701">(</span><span class="ident" id="6730702">qab</span><span class="op" id="6730705">)</span>&nbsp;<span class="op" id="6730707">!=</span>&nbsp;<span class="num" id="6730710">0</span>&nbsp;<span class="op" id="6730712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730716">t</span><span class="op" id="6730717">.</span><span class="ident" id="6730718">Errorf</span><span class="op" id="6730724">(</span><span class="string" id="6730725">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6730745">,</span>&nbsp;<span class="ident" id="6730747">x</span><span class="op" id="6730748">,</span>&nbsp;<span class="ident" id="6730750">qab</span><span class="op" id="6730753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730760">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730830">x</span><span class="op" id="6730831">.</span><span class="ident" id="6730832">SetFrac64</span><span class="op" id="6730841">(</span><span class="num" id="6730842">10</span><span class="op" id="6730844">,</span>&nbsp;<span class="num" id="6730846">2</span><span class="op" id="6730847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730850">x</span><span class="op" id="6730851">.</span><span class="ident" id="6730852">Denom</span><span class="op" id="6730857">(</span><span class="op" id="6730858">)</span><span class="op" id="6730859">.</span><span class="ident" id="6730860">SetInt64</span><span class="op" id="6730868">(</span><span class="num" id="6730869">3</span><span class="op" id="6730870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730873">q53</span>&nbsp;<span class="op" id="6730877">:=</span>&nbsp;<span class="ident" id="6730880">NewRat</span><span class="op" id="6730886">(</span><span class="num" id="6730887">5</span><span class="op" id="6730888">,</span>&nbsp;<span class="num" id="6730890">3</span><span class="op" id="6730891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730894">if</span>&nbsp;<span class="ident" id="6730897">x</span><span class="op" id="6730898">.</span><span class="ident" id="6730899">Cmp</span><span class="op" id="6730902">(</span><span class="ident" id="6730903">q53</span><span class="op" id="6730906">)</span>&nbsp;<span class="op" id="6730908">!=</span>&nbsp;<span class="num" id="6730911">0</span>&nbsp;<span class="op" id="6730913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730917">t</span><span class="op" id="6730918">.</span><span class="ident" id="6730919">Errorf</span><span class="op" id="6730925">(</span><span class="string" id="6730926">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6730946">,</span>&nbsp;<span class="ident" id="6730948">x</span><span class="op" id="6730949">,</span>&nbsp;<span class="ident" id="6730951">q53</span><span class="op" id="6730954">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730961">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731031">x</span>&nbsp;<span class="op" id="6731033">=</span>&nbsp;<span class="ident" id="6731035">NewRat</span><span class="op" id="6731041">(</span><span class="num" id="6731042">10</span><span class="op" id="6731044">,</span>&nbsp;<span class="num" id="6731046">2</span><span class="op" id="6731047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731050">x</span><span class="op" id="6731051">.</span><span class="ident" id="6731052">Denom</span><span class="op" id="6731057">(</span><span class="op" id="6731058">)</span><span class="op" id="6731059">.</span><span class="ident" id="6731060">SetInt64</span><span class="op" id="6731068">(</span><span class="num" id="6731069">3</span><span class="op" id="6731070">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731073">if</span>&nbsp;<span class="ident" id="6731076">x</span><span class="op" id="6731077">.</span><span class="ident" id="6731078">Cmp</span><span class="op" id="6731081">(</span><span class="ident" id="6731082">q53</span><span class="op" id="6731085">)</span>&nbsp;<span class="op" id="6731087">!=</span>&nbsp;<span class="num" id="6731090">0</span>&nbsp;<span class="op" id="6731092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731096">t</span><span class="op" id="6731097">.</span><span class="ident" id="6731098">Errorf</span><span class="op" id="6731104">(</span><span class="string" id="6731105">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6731125">,</span>&nbsp;<span class="ident" id="6731127">x</span><span class="op" id="6731128">,</span>&nbsp;<span class="ident" id="6731130">q53</span><span class="op" id="6731133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6731140">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731207">x</span><span class="op" id="6731208">.</span><span class="ident" id="6731209">SetFrac</span><span class="op" id="6731216">(</span><span class="ident" id="6731217">a</span><span class="op" id="6731218">,</span>&nbsp;<span class="ident" id="6731220">b</span><span class="op" id="6731221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731224">a</span>&nbsp;<span class="op" id="6731226">=</span>&nbsp;<span class="ident" id="6731228">x</span><span class="op" id="6731229">.</span><span class="ident" id="6731230">Num</span><span class="op" id="6731233">(</span><span class="op" id="6731234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731237">b</span>&nbsp;<span class="op" id="6731239">=</span>&nbsp;<span class="ident" id="6731241">x</span><span class="op" id="6731242">.</span><span class="ident" id="6731243">Denom</span><span class="op" id="6731248">(</span><span class="op" id="6731249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731252">a</span><span class="op" id="6731253">.</span><span class="ident" id="6731254">SetInt64</span><span class="op" id="6731262">(</span><span class="num" id="6731263">5</span><span class="op" id="6731264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731267">b</span><span class="op" id="6731268">.</span><span class="ident" id="6731269">SetInt64</span><span class="op" id="6731277">(</span><span class="num" id="6731278">3</span><span class="op" id="6731279">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731282">if</span>&nbsp;<span class="ident" id="6731285">x</span><span class="op" id="6731286">.</span><span class="ident" id="6731287">Cmp</span><span class="op" id="6731290">(</span><span class="ident" id="6731291">q53</span><span class="op" id="6731294">)</span>&nbsp;<span class="op" id="6731296">!=</span>&nbsp;<span class="num" id="6731299">0</span>&nbsp;<span class="op" id="6731301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731305">t</span><span class="op" id="6731306">.</span><span class="ident" id="6731307">Errorf</span><span class="op" id="6731313">(</span><span class="string" id="6731314">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="6731333">,</span>&nbsp;<span class="ident" id="6731335">x</span><span class="op" id="6731336">,</span>&nbsp;<span class="ident" id="6731338">q53</span><span class="op" id="6731341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731344">}</span><br>
<span class="lineno"></span><span class="op" id="6731346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="6731349">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="6731418">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="6731490">var</span>&nbsp;<span class="ident" id="6731494">float64inputs</span>&nbsp;<span class="op" id="6731508">=</span>&nbsp;<span class="op" id="6731510">[</span><span class="op" id="6731511">]</span><span class="builtintype" id="6731512">string</span><span class="op" id="6731518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6731521">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6731571">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731641">&#34;5e+125&#34;</span><span class="op" id="6731649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731652">&#34;69e+267&#34;</span><span class="op" id="6731661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731664">&#34;999e-026&#34;</span><span class="op" id="6731674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731677">&#34;7861e-034&#34;</span><span class="op" id="6731688">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731691">&#34;75569e-254&#34;</span><span class="op" id="6731703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731706">&#34;928609e-261&#34;</span><span class="op" id="6731719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731722">&#34;9210917e+080&#34;</span><span class="op" id="6731736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731739">&#34;84863171e+114&#34;</span><span class="op" id="6731754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731757">&#34;653777767e+273&#34;</span><span class="op" id="6731773">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731776">&#34;5232604057e-298&#34;</span><span class="op" id="6731793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731796">&#34;27235667517e-109&#34;</span><span class="op" id="6731814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731817">&#34;653532977297e-123&#34;</span><span class="op" id="6731836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731839">&#34;3142213164987e-294&#34;</span><span class="op" id="6731859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731862">&#34;46202199371337e-072&#34;</span><span class="op" id="6731883">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731886">&#34;231010996856685e-073&#34;</span><span class="op" id="6731908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731911">&#34;9324754620109615e+212&#34;</span><span class="op" id="6731934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731937">&#34;78459735791271921e+049&#34;</span><span class="op" id="6731961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731964">&#34;272104041512242479e+200&#34;</span><span class="op" id="6731989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6731992">&#34;6802601037806061975e+198&#34;</span><span class="op" id="6732018">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732021">&#34;20505426358836677347e-221&#34;</span><span class="op" id="6732048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732051">&#34;836168422905420598437e-234&#34;</span><span class="op" id="6732079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732082">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="6732111">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6732115">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732185">&#34;9e-265&#34;</span><span class="op" id="6732193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732196">&#34;85e-037&#34;</span><span class="op" id="6732205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732208">&#34;623e+100&#34;</span><span class="op" id="6732218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732221">&#34;3571e+263&#34;</span><span class="op" id="6732232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732235">&#34;81661e+153&#34;</span><span class="op" id="6732247">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732250">&#34;920657e-023&#34;</span><span class="op" id="6732263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732266">&#34;4603285e-024&#34;</span><span class="op" id="6732280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732283">&#34;87575437e-309&#34;</span><span class="op" id="6732298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732301">&#34;245540327e+122&#34;</span><span class="op" id="6732317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732320">&#34;6138508175e+120&#34;</span><span class="op" id="6732337">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732340">&#34;83356057653e+193&#34;</span><span class="op" id="6732358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732361">&#34;619534293513e+124&#34;</span><span class="op" id="6732380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732383">&#34;2335141086879e+218&#34;</span><span class="op" id="6732403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732406">&#34;36167929443327e-159&#34;</span><span class="op" id="6732427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732430">&#34;609610927149051e-255&#34;</span><span class="op" id="6732452">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732455">&#34;3743626360493413e-165&#34;</span><span class="op" id="6732478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732481">&#34;94080055902682397e-242&#34;</span><span class="op" id="6732505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732508">&#34;899810892172646163e+283&#34;</span><span class="op" id="6732533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732536">&#34;7120190517612959703e+120&#34;</span><span class="op" id="6732562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732565">&#34;25188282901709339043e-252&#34;</span><span class="op" id="6732592">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732595">&#34;308984926168550152811e-052&#34;</span><span class="op" id="6732623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732626">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="6732655">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6732659">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732729">&#34;5e-20&#34;</span><span class="op" id="6732736">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732739">&#34;67e+14&#34;</span><span class="op" id="6732747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732750">&#34;985e+15&#34;</span><span class="op" id="6732759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732762">&#34;7693e-42&#34;</span><span class="op" id="6732772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732775">&#34;55895e-16&#34;</span><span class="op" id="6732786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732789">&#34;996622e-44&#34;</span><span class="op" id="6732801">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732804">&#34;7038531e-32&#34;</span><span class="op" id="6732817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732820">&#34;60419369e-46&#34;</span><span class="op" id="6732834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732837">&#34;702990899e-20&#34;</span><span class="op" id="6732852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732855">&#34;6930161142e-48&#34;</span><span class="op" id="6732871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732874">&#34;25933168707e+13&#34;</span><span class="op" id="6732891">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732894">&#34;596428896559e+20&#34;</span><span class="op" id="6732912">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6732916">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732986">&#34;3e-23&#34;</span><span class="op" id="6732993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6732996">&#34;57e+18&#34;</span><span class="op" id="6733004">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733007">&#34;789e-35&#34;</span><span class="op" id="6733016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733019">&#34;2539e-18&#34;</span><span class="op" id="6733029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733032">&#34;76173e+28&#34;</span><span class="op" id="6733043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733046">&#34;887745e-11&#34;</span><span class="op" id="6733058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733061">&#34;5382571e-37&#34;</span><span class="op" id="6733074">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733077">&#34;82381273e-35&#34;</span><span class="op" id="6733091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733094">&#34;750486563e-38&#34;</span><span class="op" id="6733109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733112">&#34;3752432815e-39&#34;</span><span class="op" id="6733128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733131">&#34;75224575729e-45&#34;</span><span class="op" id="6733148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733151">&#34;459926601011e+15&#34;</span><span class="op" id="6733169">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733173">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733225">&#34;0&#34;</span><span class="op" id="6733228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733231">&#34;1&#34;</span><span class="op" id="6733234">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733237">&#34;+1&#34;</span><span class="op" id="6733241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733244">&#34;1e23&#34;</span><span class="op" id="6733250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733253">&#34;1E23&#34;</span><span class="op" id="6733259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733262">&#34;100000000000000000000000&#34;</span><span class="op" id="6733288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733291">&#34;1e-100&#34;</span><span class="op" id="6733299">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733302">&#34;123456700&#34;</span><span class="op" id="6733313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733316">&#34;99999999999999974834176&#34;</span><span class="op" id="6733341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733344">&#34;100000000000000000000001&#34;</span><span class="op" id="6733370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733373">&#34;100000000000000008388608&#34;</span><span class="op" id="6733399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733402">&#34;100000000000000016777215&#34;</span><span class="op" id="6733428">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733431">&#34;100000000000000016777216&#34;</span><span class="op" id="6733457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733460">&#34;-1&#34;</span><span class="op" id="6733464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733467">&#34;-0.1&#34;</span><span class="op" id="6733473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733476">&#34;-0&#34;</span><span class="op" id="6733480">,</span>&nbsp;<span class="comment" id="6733482">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733520">&#34;1e-20&#34;</span><span class="op" id="6733527">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733530">&#34;625e-3&#34;</span><span class="op" id="6733538">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733542">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733562">&#34;1.7976931348623157e308&#34;</span><span class="op" id="6733586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733589">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="6733614">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733617">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733646">&#34;1.7976931348623159e308&#34;</span><span class="op" id="6733670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733673">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="6733698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733701">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733729">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733751">&#34;1.7976931348623158e308&#34;</span><span class="op" id="6733775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733778">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="6733803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733806">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733833">&#34;1.797693134862315808e308&#34;</span><span class="op" id="6733859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733862">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="6733889">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733893">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733916">&#34;1e308&#34;</span><span class="op" id="6733923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733926">&#34;2e308&#34;</span><span class="op" id="6733933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733936">&#34;1e309&#34;</span><span class="op" id="6733943">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733947">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733965">&#34;1e310&#34;</span><span class="op" id="6733972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733975">&#34;-1e310&#34;</span><span class="op" id="6733983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733986">&#34;1e400&#34;</span><span class="op" id="6733993">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733996">&#34;-1e400&#34;</span><span class="op" id="6734004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734007">&#34;long:1e400000&#34;</span><span class="op" id="6734022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734025">&#34;long:-1e400000&#34;</span><span class="op" id="6734041">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734045">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734062">&#34;1e-305&#34;</span><span class="op" id="6734070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734073">&#34;1e-306&#34;</span><span class="op" id="6734081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734084">&#34;1e-307&#34;</span><span class="op" id="6734092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734095">&#34;1e-308&#34;</span><span class="op" id="6734103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734106">&#34;1e-309&#34;</span><span class="op" id="6734114">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734117">&#34;1e-310&#34;</span><span class="op" id="6734125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734128">&#34;1e-322&#34;</span><span class="op" id="6734136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734139">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734161">&#34;5e-324&#34;</span><span class="op" id="6734169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734172">&#34;4e-324&#34;</span><span class="op" id="6734180">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734183">&#34;3e-324&#34;</span><span class="op" id="6734191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734194">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734208">&#34;2e-324&#34;</span><span class="op" id="6734216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734219">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734237">&#34;1e-350&#34;</span><span class="op" id="6734245">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734248">&#34;long:1e-400000&#34;</span><span class="op" id="6734264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734267">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734295">&#34;-1e-350&#34;</span><span class="op" id="6734304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734307">&#34;long:-1e-400000&#34;</span><span class="op" id="6734324">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734328">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734357">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734416">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734437">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734458">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734489">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734521">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734608">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="6734633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734636">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734723">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="6734748">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734752">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734826">&#34;4.630813248087435e+307&#34;</span><span class="op" id="6734850">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734854">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734897">&#34;22.222222222222222&#34;</span><span class="op" id="6734917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6734920">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="6734930">+</span>&nbsp;<span class="ident" id="6734932">strings</span><span class="op" id="6734939">.</span><span class="ident" id="6734940">Repeat</span><span class="op" id="6734946">(</span><span class="string" id="6734947">&#34;2&#34;</span><span class="op" id="6734950">,</span>&nbsp;<span class="num" id="6734952">4000</span><span class="op" id="6734956">)</span>&nbsp;<span class="op" id="6734958">+</span>&nbsp;<span class="string" id="6734960">&#34;e+1&#34;</span><span class="op" id="6734965">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734969">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735025">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735051">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="6735108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735111">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735149">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="6735206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735209">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735240">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="6735297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735300">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735366">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="6735429">+</span>&nbsp;<span class="ident" id="6735431">strings</span><span class="op" id="6735438">.</span><span class="ident" id="6735439">Repeat</span><span class="op" id="6735445">(</span><span class="string" id="6735446">&#34;0&#34;</span><span class="op" id="6735449">,</span>&nbsp;<span class="num" id="6735451">10000</span><span class="op" id="6735456">)</span>&nbsp;<span class="op" id="6735458">+</span>&nbsp;<span class="string" id="6735460">&#34;1&#34;</span><span class="op" id="6735463">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735467">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735503">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="6735551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735554">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735598">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="6735646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735649">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735708">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735753">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="6735801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735804">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735872">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735917">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="6735965">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6735969">&#34;1152921504606846975&#34;</span><span class="op" id="6735990">,</span>&nbsp;&nbsp;<span class="comment" id="6735993">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736009">&#34;-1152921504606846975&#34;</span><span class="op" id="6736031">,</span>&nbsp;<span class="comment" id="6736033">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736050">&#34;1152921504606846977&#34;</span><span class="op" id="6736071">,</span>&nbsp;&nbsp;<span class="comment" id="6736074">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736090">&#34;-1152921504606846977&#34;</span><span class="op" id="6736112">,</span>&nbsp;<span class="comment" id="6736114">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736132">&#34;1/3&#34;</span><span class="op" id="6736137">,</span><br>
<span class="lineno"></span><span class="op" id="6736139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6736142">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6736208">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="6736268">func</span>&nbsp;<span class="ident" id="6736273">isFinite</span><span class="op" id="6736281">(</span><span class="ident" id="6736282">f</span>&nbsp;<span class="builtintype" id="6736284">float64</span><span class="op" id="6736291">)</span>&nbsp;<span class="builtintype" id="6736293">bool</span>&nbsp;<span class="op" id="6736298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736301">return</span>&nbsp;<span class="ident" id="6736308">math</span><span class="op" id="6736312">.</span><span class="ident" id="6736313">Abs</span><span class="op" id="6736316">(</span><span class="ident" id="6736317">f</span><span class="op" id="6736318">)</span>&nbsp;<span class="op" id="6736320">&lt;=</span>&nbsp;<span class="ident" id="6736323">math</span><span class="op" id="6736327">.</span><span class="ident" id="6736328">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="6736339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736342">func</span>&nbsp;<span class="ident" id="6736347">TestFloat32SpecialCases</span><span class="op" id="6736370">(</span><span class="ident" id="6736371">t</span>&nbsp;<span class="op" id="6736373">*</span><span class="ident" id="6736374">testing</span><span class="op" id="6736381">.</span><span class="ident" id="6736382">T</span><span class="op" id="6736383">)</span>&nbsp;<span class="op" id="6736385">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736388">for</span>&nbsp;<span class="ident" id="6736392">_</span><span class="op" id="6736393">,</span>&nbsp;<span class="ident" id="6736395">input</span>&nbsp;<span class="op" id="6736401">:=</span>&nbsp;<span class="keyword" id="6736404">range</span>&nbsp;<span class="ident" id="6736410">float64inputs</span>&nbsp;<span class="op" id="6736424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736428">if</span>&nbsp;<span class="ident" id="6736431">strings</span><span class="op" id="6736438">.</span><span class="ident" id="6736439">HasPrefix</span><span class="op" id="6736448">(</span><span class="ident" id="6736449">input</span><span class="op" id="6736454">,</span>&nbsp;<span class="string" id="6736456">&#34;long:&#34;</span><span class="op" id="6736463">)</span>&nbsp;<span class="op" id="6736465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736470">if</span>&nbsp;<span class="ident" id="6736473">testing</span><span class="op" id="6736480">.</span><span class="ident" id="6736481">Short</span><span class="op" id="6736486">(</span><span class="op" id="6736487">)</span>&nbsp;<span class="op" id="6736489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736495">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736507">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736512">input</span>&nbsp;<span class="op" id="6736518">=</span>&nbsp;<span class="ident" id="6736520">input</span><span class="op" id="6736525">[</span><span class="builtinfunc" id="6736526">len</span><span class="op" id="6736529">(</span><span class="string" id="6736530">&#34;long:&#34;</span><span class="op" id="6736537">)</span><span class="op" id="6736538">:</span><span class="op" id="6736539">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736548">r</span><span class="op" id="6736549">,</span>&nbsp;<span class="ident" id="6736551">ok</span>&nbsp;<span class="op" id="6736554">:=</span>&nbsp;<span class="builtinfunc" id="6736557">new</span><span class="op" id="6736560">(</span><span class="ident" id="6736561">Rat</span><span class="op" id="6736564">)</span><span class="op" id="6736565">.</span><span class="ident" id="6736566">SetString</span><span class="op" id="6736575">(</span><span class="ident" id="6736576">input</span><span class="op" id="6736581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736585">if</span>&nbsp;<span class="op" id="6736588">!</span><span class="ident" id="6736589">ok</span>&nbsp;<span class="op" id="6736592">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736597">t</span><span class="op" id="6736598">.</span><span class="ident" id="6736599">Errorf</span><span class="op" id="6736605">(</span><span class="string" id="6736606">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="6736632">,</span>&nbsp;<span class="ident" id="6736634">input</span><span class="op" id="6736639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736644">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736659">f</span><span class="op" id="6736660">,</span>&nbsp;<span class="ident" id="6736662">exact</span>&nbsp;<span class="op" id="6736668">:=</span>&nbsp;<span class="ident" id="6736671">r</span><span class="op" id="6736672">.</span><span class="ident" id="6736673">Float32</span><span class="op" id="6736680">(</span><span class="op" id="6736681">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6736686">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6736741">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6736782">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736844">if</span>&nbsp;<span class="op" id="6736847">!</span><span class="ident" id="6736848">strings</span><span class="op" id="6736855">.</span><span class="ident" id="6736856">Contains</span><span class="op" id="6736864">(</span><span class="ident" id="6736865">input</span><span class="op" id="6736870">,</span>&nbsp;<span class="string" id="6736872">&#34;/&#34;</span><span class="op" id="6736875">)</span>&nbsp;<span class="op" id="6736877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736882">e64</span><span class="op" id="6736885">,</span>&nbsp;<span class="ident" id="6736887">_</span>&nbsp;<span class="op" id="6736889">:=</span>&nbsp;<span class="ident" id="6736892">strconv</span><span class="op" id="6736899">.</span><span class="ident" id="6736900">ParseFloat</span><span class="op" id="6736910">(</span><span class="ident" id="6736911">input</span><span class="op" id="6736916">,</span>&nbsp;<span class="num" id="6736918">32</span><span class="op" id="6736920">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736925">e</span>&nbsp;<span class="op" id="6736927">:=</span>&nbsp;<span class="builtintype" id="6736930">float32</span><span class="op" id="6736937">(</span><span class="ident" id="6736938">e64</span><span class="op" id="6736941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6736947">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6736990">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737040">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737086">switch</span>&nbsp;<span class="op" id="6737093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737098">case</span>&nbsp;<span class="ident" id="6737103">math</span><span class="op" id="6737107">.</span><span class="ident" id="6737108">Float32bits</span><span class="op" id="6737119">(</span><span class="ident" id="6737120">e</span><span class="op" id="6737121">)</span>&nbsp;<span class="op" id="6737123">==</span>&nbsp;<span class="ident" id="6737126">math</span><span class="op" id="6737130">.</span><span class="ident" id="6737131">Float32bits</span><span class="op" id="6737142">(</span><span class="ident" id="6737143">f</span><span class="op" id="6737144">)</span><span class="op" id="6737145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737151">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737176">case</span>&nbsp;<span class="ident" id="6737181">f</span>&nbsp;<span class="op" id="6737183">==</span>&nbsp;<span class="num" id="6737186">0</span>&nbsp;<span class="op" id="6737188">&amp;&amp;</span>&nbsp;<span class="ident" id="6737191">r</span><span class="op" id="6737192">.</span><span class="ident" id="6737193">Num</span><span class="op" id="6737196">(</span><span class="op" id="6737197">)</span><span class="op" id="6737198">.</span><span class="ident" id="6737199">BitLen</span><span class="op" id="6737205">(</span><span class="op" id="6737206">)</span>&nbsp;<span class="op" id="6737208">==</span>&nbsp;<span class="num" id="6737211">0</span><span class="op" id="6737212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737218">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737273">default</span><span class="op" id="6737280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737286">t</span><span class="op" id="6737287">.</span><span class="ident" id="6737288">Errorf</span><span class="op" id="6737294">(</span><span class="string" id="6737295">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="6737355">,</span>&nbsp;<span class="ident" id="6737357">input</span><span class="op" id="6737362">,</span>&nbsp;<span class="ident" id="6737364">e</span><span class="op" id="6737365">,</span>&nbsp;<span class="ident" id="6737367">e</span><span class="op" id="6737368">,</span>&nbsp;<span class="ident" id="6737370">f</span><span class="op" id="6737371">,</span>&nbsp;<span class="ident" id="6737373">f</span><span class="op" id="6737374">,</span>&nbsp;<span class="ident" id="6737376">f</span><span class="op" id="6737377">-</span><span class="ident" id="6737378">e</span><span class="op" id="6737379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737393">if</span>&nbsp;<span class="op" id="6737396">!</span><span class="ident" id="6737397">isFinite</span><span class="op" id="6737405">(</span><span class="builtintype" id="6737406">float64</span><span class="op" id="6737413">(</span><span class="ident" id="6737414">f</span><span class="op" id="6737415">)</span><span class="op" id="6737416">)</span>&nbsp;<span class="op" id="6737418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737423">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737439">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737483">if</span>&nbsp;<span class="op" id="6737486">!</span><span class="ident" id="6737487">checkIsBestApprox32</span><span class="op" id="6737506">(</span><span class="ident" id="6737507">t</span><span class="op" id="6737508">,</span>&nbsp;<span class="ident" id="6737510">f</span><span class="op" id="6737511">,</span>&nbsp;<span class="ident" id="6737513">r</span><span class="op" id="6737514">)</span>&nbsp;<span class="op" id="6737516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737521">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737555">t</span><span class="op" id="6737556">.</span><span class="ident" id="6737557">Errorf</span><span class="op" id="6737563">(</span><span class="string" id="6737564">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="6737580">,</span>&nbsp;<span class="ident" id="6737582">input</span><span class="op" id="6737587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737596">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737642">checkNonLossyRoundtrip32</span><span class="op" id="6737666">(</span><span class="ident" id="6737667">t</span><span class="op" id="6737668">,</span>&nbsp;<span class="ident" id="6737670">f</span><span class="op" id="6737671">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737676">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737722">if</span>&nbsp;<span class="ident" id="6737725">wasExact</span>&nbsp;<span class="op" id="6737734">:=</span>&nbsp;<span class="builtinfunc" id="6737737">new</span><span class="op" id="6737740">(</span><span class="ident" id="6737741">Rat</span><span class="op" id="6737744">)</span><span class="op" id="6737745">.</span><span class="ident" id="6737746">SetFloat64</span><span class="op" id="6737756">(</span><span class="builtintype" id="6737757">float64</span><span class="op" id="6737764">(</span><span class="ident" id="6737765">f</span><span class="op" id="6737766">)</span><span class="op" id="6737767">)</span><span class="op" id="6737768">.</span><span class="ident" id="6737769">Cmp</span><span class="op" id="6737772">(</span><span class="ident" id="6737773">r</span><span class="op" id="6737774">)</span>&nbsp;<span class="op" id="6737776">==</span>&nbsp;<span class="num" id="6737779">0</span><span class="op" id="6737780">;</span>&nbsp;<span class="ident" id="6737782">wasExact</span>&nbsp;<span class="op" id="6737791">!=</span>&nbsp;<span class="ident" id="6737794">exact</span>&nbsp;<span class="op" id="6737800">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737805">t</span><span class="op" id="6737806">.</span><span class="ident" id="6737807">Errorf</span><span class="op" id="6737813">(</span><span class="string" id="6737814">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="6737863">,</span>&nbsp;<span class="ident" id="6737865">input</span><span class="op" id="6737870">,</span>&nbsp;<span class="ident" id="6737872">exact</span><span class="op" id="6737877">,</span>&nbsp;<span class="ident" id="6737879">wasExact</span><span class="op" id="6737887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737894">}</span><br>
<span class="lineno"></span><span class="op" id="6737896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="6737899">func</span>&nbsp;<span class="ident" id="6737904">TestFloat64SpecialCases</span><span class="op" id="6737927">(</span><span class="ident" id="6737928">t</span>&nbsp;<span class="op" id="6737930">*</span><span class="ident" id="6737931">testing</span><span class="op" id="6737938">.</span><span class="ident" id="6737939">T</span><span class="op" id="6737940">)</span>&nbsp;<span class="op" id="6737942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737945">for</span>&nbsp;<span class="ident" id="6737949">_</span><span class="op" id="6737950">,</span>&nbsp;<span class="ident" id="6737952">input</span>&nbsp;<span class="op" id="6737958">:=</span>&nbsp;<span class="keyword" id="6737961">range</span>&nbsp;<span class="ident" id="6737967">float64inputs</span>&nbsp;<span class="op" id="6737981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737985">if</span>&nbsp;<span class="ident" id="6737988">strings</span><span class="op" id="6737995">.</span><span class="ident" id="6737996">HasPrefix</span><span class="op" id="6738005">(</span><span class="ident" id="6738006">input</span><span class="op" id="6738011">,</span>&nbsp;<span class="string" id="6738013">&#34;long:&#34;</span><span class="op" id="6738020">)</span>&nbsp;<span class="op" id="6738022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738027">if</span>&nbsp;<span class="ident" id="6738030">testing</span><span class="op" id="6738037">.</span><span class="ident" id="6738038">Short</span><span class="op" id="6738043">(</span><span class="op" id="6738044">)</span>&nbsp;<span class="op" id="6738046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738052">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738069">input</span>&nbsp;<span class="op" id="6738075">=</span>&nbsp;<span class="ident" id="6738077">input</span><span class="op" id="6738082">[</span><span class="builtinfunc" id="6738083">len</span><span class="op" id="6738086">(</span><span class="string" id="6738087">&#34;long:&#34;</span><span class="op" id="6738094">)</span><span class="op" id="6738095">:</span><span class="op" id="6738096">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738105">r</span><span class="op" id="6738106">,</span>&nbsp;<span class="ident" id="6738108">ok</span>&nbsp;<span class="op" id="6738111">:=</span>&nbsp;<span class="builtinfunc" id="6738114">new</span><span class="op" id="6738117">(</span><span class="ident" id="6738118">Rat</span><span class="op" id="6738121">)</span><span class="op" id="6738122">.</span><span class="ident" id="6738123">SetString</span><span class="op" id="6738132">(</span><span class="ident" id="6738133">input</span><span class="op" id="6738138">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738142">if</span>&nbsp;<span class="op" id="6738145">!</span><span class="ident" id="6738146">ok</span>&nbsp;<span class="op" id="6738149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738154">t</span><span class="op" id="6738155">.</span><span class="ident" id="6738156">Errorf</span><span class="op" id="6738162">(</span><span class="string" id="6738163">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="6738189">,</span>&nbsp;<span class="ident" id="6738191">input</span><span class="op" id="6738196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738201">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738216">f</span><span class="op" id="6738217">,</span>&nbsp;<span class="ident" id="6738219">exact</span>&nbsp;<span class="op" id="6738225">:=</span>&nbsp;<span class="ident" id="6738228">r</span><span class="op" id="6738229">.</span><span class="ident" id="6738230">Float64</span><span class="op" id="6738237">(</span><span class="op" id="6738238">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738243">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738298">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738339">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738401">if</span>&nbsp;<span class="op" id="6738404">!</span><span class="ident" id="6738405">strings</span><span class="op" id="6738412">.</span><span class="ident" id="6738413">Contains</span><span class="op" id="6738421">(</span><span class="ident" id="6738422">input</span><span class="op" id="6738427">,</span>&nbsp;<span class="string" id="6738429">&#34;/&#34;</span><span class="op" id="6738432">)</span>&nbsp;<span class="op" id="6738434">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738439">e</span><span class="op" id="6738440">,</span>&nbsp;<span class="ident" id="6738442">_</span>&nbsp;<span class="op" id="6738444">:=</span>&nbsp;<span class="ident" id="6738447">strconv</span><span class="op" id="6738454">.</span><span class="ident" id="6738455">ParseFloat</span><span class="op" id="6738465">(</span><span class="ident" id="6738466">input</span><span class="op" id="6738471">,</span>&nbsp;<span class="num" id="6738473">64</span><span class="op" id="6738475">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738481">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738524">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738574">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738620">switch</span>&nbsp;<span class="op" id="6738627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738632">case</span>&nbsp;<span class="ident" id="6738637">math</span><span class="op" id="6738641">.</span><span class="ident" id="6738642">Float64bits</span><span class="op" id="6738653">(</span><span class="ident" id="6738654">e</span><span class="op" id="6738655">)</span>&nbsp;<span class="op" id="6738657">==</span>&nbsp;<span class="ident" id="6738660">math</span><span class="op" id="6738664">.</span><span class="ident" id="6738665">Float64bits</span><span class="op" id="6738676">(</span><span class="ident" id="6738677">f</span><span class="op" id="6738678">)</span><span class="op" id="6738679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738685">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738710">case</span>&nbsp;<span class="ident" id="6738715">f</span>&nbsp;<span class="op" id="6738717">==</span>&nbsp;<span class="num" id="6738720">0</span>&nbsp;<span class="op" id="6738722">&amp;&amp;</span>&nbsp;<span class="ident" id="6738725">r</span><span class="op" id="6738726">.</span><span class="ident" id="6738727">Num</span><span class="op" id="6738730">(</span><span class="op" id="6738731">)</span><span class="op" id="6738732">.</span><span class="ident" id="6738733">BitLen</span><span class="op" id="6738739">(</span><span class="op" id="6738740">)</span>&nbsp;<span class="op" id="6738742">==</span>&nbsp;<span class="num" id="6738745">0</span><span class="op" id="6738746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738752">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738807">default</span><span class="op" id="6738814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738820">t</span><span class="op" id="6738821">.</span><span class="ident" id="6738822">Errorf</span><span class="op" id="6738828">(</span><span class="string" id="6738829">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="6738889">,</span>&nbsp;<span class="ident" id="6738891">input</span><span class="op" id="6738896">,</span>&nbsp;<span class="ident" id="6738898">e</span><span class="op" id="6738899">,</span>&nbsp;<span class="ident" id="6738901">e</span><span class="op" id="6738902">,</span>&nbsp;<span class="ident" id="6738904">f</span><span class="op" id="6738905">,</span>&nbsp;<span class="ident" id="6738907">f</span><span class="op" id="6738908">,</span>&nbsp;<span class="ident" id="6738910">f</span><span class="op" id="6738911">-</span><span class="ident" id="6738912">e</span><span class="op" id="6738913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738927">if</span>&nbsp;<span class="op" id="6738930">!</span><span class="ident" id="6738931">isFinite</span><span class="op" id="6738939">(</span><span class="ident" id="6738940">f</span><span class="op" id="6738941">)</span>&nbsp;<span class="op" id="6738943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738948">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738964">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739008">if</span>&nbsp;<span class="op" id="6739011">!</span><span class="ident" id="6739012">checkIsBestApprox64</span><span class="op" id="6739031">(</span><span class="ident" id="6739032">t</span><span class="op" id="6739033">,</span>&nbsp;<span class="ident" id="6739035">f</span><span class="op" id="6739036">,</span>&nbsp;<span class="ident" id="6739038">r</span><span class="op" id="6739039">)</span>&nbsp;<span class="op" id="6739041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6739046">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739080">t</span><span class="op" id="6739081">.</span><span class="ident" id="6739082">Errorf</span><span class="op" id="6739088">(</span><span class="string" id="6739089">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="6739105">,</span>&nbsp;<span class="ident" id="6739107">input</span><span class="op" id="6739112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6739121">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739167">checkNonLossyRoundtrip64</span><span class="op" id="6739191">(</span><span class="ident" id="6739192">t</span><span class="op" id="6739193">,</span>&nbsp;<span class="ident" id="6739195">f</span><span class="op" id="6739196">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6739201">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739247">if</span>&nbsp;<span class="ident" id="6739250">wasExact</span>&nbsp;<span class="op" id="6739259">:=</span>&nbsp;<span class="builtinfunc" id="6739262">new</span><span class="op" id="6739265">(</span><span class="ident" id="6739266">Rat</span><span class="op" id="6739269">)</span><span class="op" id="6739270">.</span><span class="ident" id="6739271">SetFloat64</span><span class="op" id="6739281">(</span><span class="ident" id="6739282">f</span><span class="op" id="6739283">)</span><span class="op" id="6739284">.</span><span class="ident" id="6739285">Cmp</span><span class="op" id="6739288">(</span><span class="ident" id="6739289">r</span><span class="op" id="6739290">)</span>&nbsp;<span class="op" id="6739292">==</span>&nbsp;<span class="num" id="6739295">0</span><span class="op" id="6739296">;</span>&nbsp;<span class="ident" id="6739298">wasExact</span>&nbsp;<span class="op" id="6739307">!=</span>&nbsp;<span class="ident" id="6739310">exact</span>&nbsp;<span class="op" id="6739316">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739321">t</span><span class="op" id="6739322">.</span><span class="ident" id="6739323">Errorf</span><span class="op" id="6739329">(</span><span class="string" id="6739330">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="6739379">,</span>&nbsp;<span class="ident" id="6739381">input</span><span class="op" id="6739386">,</span>&nbsp;<span class="ident" id="6739388">exact</span><span class="op" id="6739393">,</span>&nbsp;<span class="ident" id="6739395">wasExact</span><span class="op" id="6739403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739410">}</span><br>
<span class="lineno"></span><span class="op" id="6739412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="6739415">func</span>&nbsp;<span class="ident" id="6739420">TestFloat32Distribution</span><span class="op" id="6739443">(</span><span class="ident" id="6739444">t</span>&nbsp;<span class="op" id="6739446">*</span><span class="ident" id="6739447">testing</span><span class="op" id="6739454">.</span><span class="ident" id="6739455">T</span><span class="op" id="6739456">)</span>&nbsp;<span class="op" id="6739458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6739461">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6739521">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6739581">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739633">var</span>&nbsp;<span class="ident" id="6739637">add</span>&nbsp;<span class="op" id="6739641">=</span>&nbsp;<span class="op" id="6739643">[</span><span class="op" id="6739644">]</span><span class="ident" id="6739645">int64</span><span class="op" id="6739650">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739654">0</span><span class="op" id="6739655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739659">1</span><span class="op" id="6739660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739664">3</span><span class="op" id="6739665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739669">5</span><span class="op" id="6739670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739674">7</span><span class="op" id="6739675">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739679">9</span><span class="op" id="6739680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6739684">11</span><span class="op" id="6739686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739692">var</span>&nbsp;<span class="ident" id="6739696">winc</span><span class="op" id="6739700">,</span>&nbsp;<span class="ident" id="6739702">einc</span>&nbsp;<span class="op" id="6739707">=</span>&nbsp;<span class="ident" id="6739709">uint64</span><span class="op" id="6739715">(</span><span class="num" id="6739716">1</span><span class="op" id="6739717">)</span><span class="op" id="6739718">,</span>&nbsp;<span class="num" id="6739720">1</span>&nbsp;<span class="comment" id="6739722">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739754">if</span>&nbsp;<span class="ident" id="6739757">testing</span><span class="op" id="6739764">.</span><span class="ident" id="6739765">Short</span><span class="op" id="6739770">(</span><span class="op" id="6739771">)</span>&nbsp;<span class="op" id="6739773">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739777">winc</span><span class="op" id="6739781">,</span>&nbsp;<span class="ident" id="6739783">einc</span>&nbsp;<span class="op" id="6739788">=</span>&nbsp;<span class="num" id="6739790">5</span><span class="op" id="6739791">,</span>&nbsp;<span class="num" id="6739793">15</span>&nbsp;<span class="comment" id="6739796">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739833">for</span>&nbsp;<span class="ident" id="6739837">_</span><span class="op" id="6739838">,</span>&nbsp;<span class="ident" id="6739840">sign</span>&nbsp;<span class="op" id="6739845">:=</span>&nbsp;<span class="keyword" id="6739848">range</span>&nbsp;<span class="string" id="6739854">&#34;+-&#34;</span>&nbsp;<span class="op" id="6739859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739863">for</span>&nbsp;<span class="ident" id="6739867">_</span><span class="op" id="6739868">,</span>&nbsp;<span class="ident" id="6739870">a</span>&nbsp;<span class="op" id="6739872">:=</span>&nbsp;<span class="keyword" id="6739875">range</span>&nbsp;<span class="ident" id="6739881">add</span>&nbsp;<span class="op" id="6739885">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739890">for</span>&nbsp;<span class="ident" id="6739894">wid</span>&nbsp;<span class="op" id="6739898">:=</span>&nbsp;<span class="ident" id="6739901">uint64</span><span class="op" id="6739907">(</span><span class="num" id="6739908">0</span><span class="op" id="6739909">)</span><span class="op" id="6739910">;</span>&nbsp;<span class="ident" id="6739912">wid</span>&nbsp;<span class="op" id="6739916">&lt;</span>&nbsp;<span class="num" id="6739918">30</span><span class="op" id="6739920">;</span>&nbsp;<span class="ident" id="6739922">wid</span>&nbsp;<span class="op" id="6739926">+=</span>&nbsp;<span class="ident" id="6739929">winc</span>&nbsp;<span class="op" id="6739934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739940">b</span>&nbsp;<span class="op" id="6739942">:=</span>&nbsp;<span class="num" id="6739945">1</span><span class="op" id="6739946">&lt;&lt;</span><span class="ident" id="6739948">wid</span>&nbsp;<span class="op" id="6739952">+</span>&nbsp;<span class="ident" id="6739954">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739960">if</span>&nbsp;<span class="ident" id="6739963">sign</span>&nbsp;<span class="op" id="6739968">==</span>&nbsp;<span class="string" id="6739971">&#39;-&#39;</span>&nbsp;<span class="op" id="6739975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739982">b</span>&nbsp;<span class="op" id="6739984">=</span>&nbsp;<span class="op" id="6739986">-</span><span class="ident" id="6739987">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739993">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739999">for</span>&nbsp;<span class="ident" id="6740003">exp</span>&nbsp;<span class="op" id="6740007">:=</span>&nbsp;<span class="op" id="6740010">-</span><span class="num" id="6740011">150</span><span class="op" id="6740014">;</span>&nbsp;<span class="ident" id="6740016">exp</span>&nbsp;<span class="op" id="6740020">&lt;</span>&nbsp;<span class="num" id="6740022">150</span><span class="op" id="6740025">;</span>&nbsp;<span class="ident" id="6740027">exp</span>&nbsp;<span class="op" id="6740031">+=</span>&nbsp;<span class="ident" id="6740034">einc</span>&nbsp;<span class="op" id="6740039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740046">num</span><span class="op" id="6740049">,</span>&nbsp;<span class="ident" id="6740051">den</span>&nbsp;<span class="op" id="6740055">:=</span>&nbsp;<span class="ident" id="6740058">NewInt</span><span class="op" id="6740064">(</span><span class="ident" id="6740065">b</span><span class="op" id="6740066">)</span><span class="op" id="6740067">,</span>&nbsp;<span class="ident" id="6740069">NewInt</span><span class="op" id="6740075">(</span><span class="num" id="6740076">1</span><span class="op" id="6740077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740084">if</span>&nbsp;<span class="ident" id="6740087">exp</span>&nbsp;<span class="op" id="6740091">&gt;</span>&nbsp;<span class="num" id="6740093">0</span>&nbsp;<span class="op" id="6740095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740103">num</span><span class="op" id="6740106">.</span><span class="ident" id="6740107">Lsh</span><span class="op" id="6740110">(</span><span class="ident" id="6740111">num</span><span class="op" id="6740114">,</span>&nbsp;<span class="builtintype" id="6740116">uint</span><span class="op" id="6740120">(</span><span class="ident" id="6740121">exp</span><span class="op" id="6740124">)</span><span class="op" id="6740125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740132">}</span>&nbsp;<span class="keyword" id="6740134">else</span>&nbsp;<span class="op" id="6740139">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740147">den</span><span class="op" id="6740150">.</span><span class="ident" id="6740151">Lsh</span><span class="op" id="6740154">(</span><span class="ident" id="6740155">den</span><span class="op" id="6740158">,</span>&nbsp;<span class="builtintype" id="6740160">uint</span><span class="op" id="6740164">(</span><span class="op" id="6740165">-</span><span class="ident" id="6740166">exp</span><span class="op" id="6740169">)</span><span class="op" id="6740170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740184">r</span>&nbsp;<span class="op" id="6740186">:=</span>&nbsp;<span class="builtinfunc" id="6740189">new</span><span class="op" id="6740192">(</span><span class="ident" id="6740193">Rat</span><span class="op" id="6740196">)</span><span class="op" id="6740197">.</span><span class="ident" id="6740198">SetFrac</span><span class="op" id="6740205">(</span><span class="ident" id="6740206">num</span><span class="op" id="6740209">,</span>&nbsp;<span class="ident" id="6740211">den</span><span class="op" id="6740214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740221">f</span><span class="op" id="6740222">,</span>&nbsp;<span class="ident" id="6740224">_</span>&nbsp;<span class="op" id="6740226">:=</span>&nbsp;<span class="ident" id="6740229">r</span><span class="op" id="6740230">.</span><span class="ident" id="6740231">Float32</span><span class="op" id="6740238">(</span><span class="op" id="6740239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740247">if</span>&nbsp;<span class="op" id="6740250">!</span><span class="ident" id="6740251">checkIsBestApprox32</span><span class="op" id="6740270">(</span><span class="ident" id="6740271">t</span><span class="op" id="6740272">,</span>&nbsp;<span class="ident" id="6740274">f</span><span class="op" id="6740275">,</span>&nbsp;<span class="ident" id="6740277">r</span><span class="op" id="6740278">)</span>&nbsp;<span class="op" id="6740280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6740288">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740325">t</span><span class="op" id="6740326">.</span><span class="ident" id="6740327">Errorf</span><span class="op" id="6740333">(</span><span class="string" id="6740334">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="6740397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740406">b</span><span class="op" id="6740407">,</span>&nbsp;<span class="ident" id="6740409">exp</span><span class="op" id="6740412">,</span>&nbsp;<span class="ident" id="6740414">f</span><span class="op" id="6740415">,</span>&nbsp;<span class="ident" id="6740417">f</span><span class="op" id="6740418">,</span>&nbsp;<span class="ident" id="6740420">math</span><span class="op" id="6740424">.</span><span class="ident" id="6740425">Ldexp</span><span class="op" id="6740430">(</span><span class="builtintype" id="6740431">float64</span><span class="op" id="6740438">(</span><span class="ident" id="6740439">b</span><span class="op" id="6740440">)</span><span class="op" id="6740441">,</span>&nbsp;<span class="ident" id="6740443">exp</span><span class="op" id="6740446">)</span><span class="op" id="6740447">,</span>&nbsp;<span class="ident" id="6740449">r</span><span class="op" id="6740450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740457">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740465">checkNonLossyRoundtrip32</span><span class="op" id="6740489">(</span><span class="ident" id="6740490">t</span><span class="op" id="6740491">,</span>&nbsp;<span class="ident" id="6740493">f</span><span class="op" id="6740494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740509">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740512">}</span><br>
<span class="lineno"></span><span class="op" id="6740514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6740517">func</span>&nbsp;<span class="ident" id="6740522">TestFloat64Distribution</span><span class="op" id="6740545">(</span><span class="ident" id="6740546">t</span>&nbsp;<span class="op" id="6740548">*</span><span class="ident" id="6740549">testing</span><span class="op" id="6740556">.</span><span class="ident" id="6740557">T</span><span class="op" id="6740558">)</span>&nbsp;<span class="op" id="6740560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6740563">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6740623">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6740683">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740735">var</span>&nbsp;<span class="ident" id="6740739">add</span>&nbsp;<span class="op" id="6740743">=</span>&nbsp;<span class="op" id="6740745">[</span><span class="op" id="6740746">]</span><span class="ident" id="6740747">int64</span><span class="op" id="6740752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740756">0</span><span class="op" id="6740757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740761">1</span><span class="op" id="6740762">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740766">3</span><span class="op" id="6740767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740771">5</span><span class="op" id="6740772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740776">7</span><span class="op" id="6740777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740781">9</span><span class="op" id="6740782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740786">11</span><span class="op" id="6740788">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740794">var</span>&nbsp;<span class="ident" id="6740798">winc</span><span class="op" id="6740802">,</span>&nbsp;<span class="ident" id="6740804">einc</span>&nbsp;<span class="op" id="6740809">=</span>&nbsp;<span class="ident" id="6740811">uint64</span><span class="op" id="6740817">(</span><span class="num" id="6740818">1</span><span class="op" id="6740819">)</span><span class="op" id="6740820">,</span>&nbsp;<span class="num" id="6740822">1</span>&nbsp;<span class="comment" id="6740824">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740855">if</span>&nbsp;<span class="ident" id="6740858">testing</span><span class="op" id="6740865">.</span><span class="ident" id="6740866">Short</span><span class="op" id="6740871">(</span><span class="op" id="6740872">)</span>&nbsp;<span class="op" id="6740874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740878">winc</span><span class="op" id="6740882">,</span>&nbsp;<span class="ident" id="6740884">einc</span>&nbsp;<span class="op" id="6740889">=</span>&nbsp;<span class="num" id="6740891">10</span><span class="op" id="6740893">,</span>&nbsp;<span class="num" id="6740895">500</span>&nbsp;<span class="comment" id="6740899">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740932">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740936">for</span>&nbsp;<span class="ident" id="6740940">_</span><span class="op" id="6740941">,</span>&nbsp;<span class="ident" id="6740943">sign</span>&nbsp;<span class="op" id="6740948">:=</span>&nbsp;<span class="keyword" id="6740951">range</span>&nbsp;<span class="string" id="6740957">&#34;+-&#34;</span>&nbsp;<span class="op" id="6740962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740966">for</span>&nbsp;<span class="ident" id="6740970">_</span><span class="op" id="6740971">,</span>&nbsp;<span class="ident" id="6740973">a</span>&nbsp;<span class="op" id="6740975">:=</span>&nbsp;<span class="keyword" id="6740978">range</span>&nbsp;<span class="ident" id="6740984">add</span>&nbsp;<span class="op" id="6740988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740993">for</span>&nbsp;<span class="ident" id="6740997">wid</span>&nbsp;<span class="op" id="6741001">:=</span>&nbsp;<span class="ident" id="6741004">uint64</span><span class="op" id="6741010">(</span><span class="num" id="6741011">0</span><span class="op" id="6741012">)</span><span class="op" id="6741013">;</span>&nbsp;<span class="ident" id="6741015">wid</span>&nbsp;<span class="op" id="6741019">&lt;</span>&nbsp;<span class="num" id="6741021">60</span><span class="op" id="6741023">;</span>&nbsp;<span class="ident" id="6741025">wid</span>&nbsp;<span class="op" id="6741029">+=</span>&nbsp;<span class="ident" id="6741032">winc</span>&nbsp;<span class="op" id="6741037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741043">b</span>&nbsp;<span class="op" id="6741045">:=</span>&nbsp;<span class="num" id="6741048">1</span><span class="op" id="6741049">&lt;&lt;</span><span class="ident" id="6741051">wid</span>&nbsp;<span class="op" id="6741055">+</span>&nbsp;<span class="ident" id="6741057">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741063">if</span>&nbsp;<span class="ident" id="6741066">sign</span>&nbsp;<span class="op" id="6741071">==</span>&nbsp;<span class="string" id="6741074">&#39;-&#39;</span>&nbsp;<span class="op" id="6741078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741085">b</span>&nbsp;<span class="op" id="6741087">=</span>&nbsp;<span class="op" id="6741089">-</span><span class="ident" id="6741090">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741102">for</span>&nbsp;<span class="ident" id="6741106">exp</span>&nbsp;<span class="op" id="6741110">:=</span>&nbsp;<span class="op" id="6741113">-</span><span class="num" id="6741114">1100</span><span class="op" id="6741118">;</span>&nbsp;<span class="ident" id="6741120">exp</span>&nbsp;<span class="op" id="6741124">&lt;</span>&nbsp;<span class="num" id="6741126">1100</span><span class="op" id="6741130">;</span>&nbsp;<span class="ident" id="6741132">exp</span>&nbsp;<span class="op" id="6741136">+=</span>&nbsp;<span class="ident" id="6741139">einc</span>&nbsp;<span class="op" id="6741144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741151">num</span><span class="op" id="6741154">,</span>&nbsp;<span class="ident" id="6741156">den</span>&nbsp;<span class="op" id="6741160">:=</span>&nbsp;<span class="ident" id="6741163">NewInt</span><span class="op" id="6741169">(</span><span class="ident" id="6741170">b</span><span class="op" id="6741171">)</span><span class="op" id="6741172">,</span>&nbsp;<span class="ident" id="6741174">NewInt</span><span class="op" id="6741180">(</span><span class="num" id="6741181">1</span><span class="op" id="6741182">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741189">if</span>&nbsp;<span class="ident" id="6741192">exp</span>&nbsp;<span class="op" id="6741196">&gt;</span>&nbsp;<span class="num" id="6741198">0</span>&nbsp;<span class="op" id="6741200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741208">num</span><span class="op" id="6741211">.</span><span class="ident" id="6741212">Lsh</span><span class="op" id="6741215">(</span><span class="ident" id="6741216">num</span><span class="op" id="6741219">,</span>&nbsp;<span class="builtintype" id="6741221">uint</span><span class="op" id="6741225">(</span><span class="ident" id="6741226">exp</span><span class="op" id="6741229">)</span><span class="op" id="6741230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741237">}</span>&nbsp;<span class="keyword" id="6741239">else</span>&nbsp;<span class="op" id="6741244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741252">den</span><span class="op" id="6741255">.</span><span class="ident" id="6741256">Lsh</span><span class="op" id="6741259">(</span><span class="ident" id="6741260">den</span><span class="op" id="6741263">,</span>&nbsp;<span class="builtintype" id="6741265">uint</span><span class="op" id="6741269">(</span><span class="op" id="6741270">-</span><span class="ident" id="6741271">exp</span><span class="op" id="6741274">)</span><span class="op" id="6741275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741282">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741289">r</span>&nbsp;<span class="op" id="6741291">:=</span>&nbsp;<span class="builtinfunc" id="6741294">new</span><span class="op" id="6741297">(</span><span class="ident" id="6741298">Rat</span><span class="op" id="6741301">)</span><span class="op" id="6741302">.</span><span class="ident" id="6741303">SetFrac</span><span class="op" id="6741310">(</span><span class="ident" id="6741311">num</span><span class="op" id="6741314">,</span>&nbsp;<span class="ident" id="6741316">den</span><span class="op" id="6741319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741326">f</span><span class="op" id="6741327">,</span>&nbsp;<span class="ident" id="6741329">_</span>&nbsp;<span class="op" id="6741331">:=</span>&nbsp;<span class="ident" id="6741334">r</span><span class="op" id="6741335">.</span><span class="ident" id="6741336">Float64</span><span class="op" id="6741343">(</span><span class="op" id="6741344">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741352">if</span>&nbsp;<span class="op" id="6741355">!</span><span class="ident" id="6741356">checkIsBestApprox64</span><span class="op" id="6741375">(</span><span class="ident" id="6741376">t</span><span class="op" id="6741377">,</span>&nbsp;<span class="ident" id="6741379">f</span><span class="op" id="6741380">,</span>&nbsp;<span class="ident" id="6741382">r</span><span class="op" id="6741383">)</span>&nbsp;<span class="op" id="6741385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6741393">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741430">t</span><span class="op" id="6741431">.</span><span class="ident" id="6741432">Errorf</span><span class="op" id="6741438">(</span><span class="string" id="6741439">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="6741502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741511">b</span><span class="op" id="6741512">,</span>&nbsp;<span class="ident" id="6741514">exp</span><span class="op" id="6741517">,</span>&nbsp;<span class="ident" id="6741519">f</span><span class="op" id="6741520">,</span>&nbsp;<span class="ident" id="6741522">f</span><span class="op" id="6741523">,</span>&nbsp;<span class="ident" id="6741525">math</span><span class="op" id="6741529">.</span><span class="ident" id="6741530">Ldexp</span><span class="op" id="6741535">(</span><span class="builtintype" id="6741536">float64</span><span class="op" id="6741543">(</span><span class="ident" id="6741544">b</span><span class="op" id="6741545">)</span><span class="op" id="6741546">,</span>&nbsp;<span class="ident" id="6741548">exp</span><span class="op" id="6741551">)</span><span class="op" id="6741552">,</span>&nbsp;<span class="ident" id="6741554">r</span><span class="op" id="6741555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741570">checkNonLossyRoundtrip64</span><span class="op" id="6741594">(</span><span class="ident" id="6741595">t</span><span class="op" id="6741596">,</span>&nbsp;<span class="ident" id="6741598">f</span><span class="op" id="6741599">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741617">}</span><br>
<span class="lineno"></span><span class="op" id="6741619">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="6741622">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="6741694">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="6741710">func</span>&nbsp;<span class="ident" id="6741715">TestSetFloat64NonFinite</span><span class="op" id="6741738">(</span><span class="ident" id="6741739">t</span>&nbsp;<span class="op" id="6741741">*</span><span class="ident" id="6741742">testing</span><span class="op" id="6741749">.</span><span class="ident" id="6741750">T</span><span class="op" id="6741751">)</span>&nbsp;<span class="op" id="6741753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741756">for</span>&nbsp;<span class="ident" id="6741760">_</span><span class="op" id="6741761">,</span>&nbsp;<span class="ident" id="6741763">f</span>&nbsp;<span class="op" id="6741765">:=</span>&nbsp;<span class="keyword" id="6741768">range</span>&nbsp;<span class="op" id="6741774">[</span><span class="op" id="6741775">]</span><span class="builtintype" id="6741776">float64</span><span class="op" id="6741783">{</span><span class="ident" id="6741784">math</span><span class="op" id="6741788">.</span><span class="ident" id="6741789">NaN</span><span class="op" id="6741792">(</span><span class="op" id="6741793">)</span><span class="op" id="6741794">,</span>&nbsp;<span class="ident" id="6741796">math</span><span class="op" id="6741800">.</span><span class="ident" id="6741801">Inf</span><span class="op" id="6741804">(</span><span class="op" id="6741805">+</span><span class="num" id="6741806">1</span><span class="op" id="6741807">)</span><span class="op" id="6741808">,</span>&nbsp;<span class="ident" id="6741810">math</span><span class="op" id="6741814">.</span><span class="ident" id="6741815">Inf</span><span class="op" id="6741818">(</span><span class="op" id="6741819">-</span><span class="num" id="6741820">1</span><span class="op" id="6741821">)</span><span class="op" id="6741822">}</span>&nbsp;<span class="op" id="6741824">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741828">var</span>&nbsp;<span class="ident" id="6741832">r</span>&nbsp;<span class="ident" id="6741834">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741840">if</span>&nbsp;<span class="ident" id="6741843">r2</span>&nbsp;<span class="op" id="6741846">:=</span>&nbsp;<span class="ident" id="6741849">r</span><span class="op" id="6741850">.</span><span class="ident" id="6741851">SetFloat64</span><span class="op" id="6741861">(</span><span class="ident" id="6741862">f</span><span class="op" id="6741863">)</span><span class="op" id="6741864">;</span>&nbsp;<span class="ident" id="6741866">r2</span>&nbsp;<span class="op" id="6741869">!=</span>&nbsp;<span class="ident" id="6741872">nil</span>&nbsp;<span class="op" id="6741876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741881">t</span><span class="op" id="6741882">.</span><span class="ident" id="6741883">Errorf</span><span class="op" id="6741889">(</span><span class="string" id="6741890">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="6741923">,</span>&nbsp;<span class="ident" id="6741925">f</span><span class="op" id="6741926">,</span>&nbsp;<span class="ident" id="6741928">r2</span><span class="op" id="6741930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741937">}</span><br>
<span class="lineno">1015</span><span class="op" id="6741939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6741942">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6742015">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="6742042">func</span>&nbsp;<span class="ident" id="6742047">checkNonLossyRoundtrip32</span><span class="op" id="6742071">(</span><span class="ident" id="6742072">t</span>&nbsp;<span class="op" id="6742074">*</span><span class="ident" id="6742075">testing</span><span class="op" id="6742082">.</span><span class="ident" id="6742083">T</span><span class="op" id="6742084">,</span>&nbsp;<span class="ident" id="6742086">f</span>&nbsp;<span class="builtintype" id="6742088">float32</span><span class="op" id="6742095">)</span>&nbsp;<span class="op" id="6742097">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742100">if</span>&nbsp;<span class="op" id="6742103">!</span><span class="ident" id="6742104">isFinite</span><span class="op" id="6742112">(</span><span class="builtintype" id="6742113">float64</span><span class="op" id="6742120">(</span><span class="ident" id="6742121">f</span><span class="op" id="6742122">)</span><span class="op" id="6742123">)</span>&nbsp;<span class="op" id="6742125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742129">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742140">r</span>&nbsp;<span class="op" id="6742142">:=</span>&nbsp;<span class="builtinfunc" id="6742145">new</span><span class="op" id="6742148">(</span><span class="ident" id="6742149">Rat</span><span class="op" id="6742152">)</span><span class="op" id="6742153">.</span><span class="ident" id="6742154">SetFloat64</span><span class="op" id="6742164">(</span><span class="builtintype" id="6742165">float64</span><span class="op" id="6742172">(</span><span class="ident" id="6742173">f</span><span class="op" id="6742174">)</span><span class="op" id="6742175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742178">if</span>&nbsp;<span class="ident" id="6742181">r</span>&nbsp;<span class="op" id="6742183">==</span>&nbsp;<span class="ident" id="6742186">nil</span>&nbsp;<span class="op" id="6742190">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742194">t</span><span class="op" id="6742195">.</span><span class="ident" id="6742196">Errorf</span><span class="op" id="6742202">(</span><span class="string" id="6742203">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="6742244">,</span>&nbsp;<span class="ident" id="6742246">f</span><span class="op" id="6742247">,</span>&nbsp;<span class="ident" id="6742249">f</span><span class="op" id="6742250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742254">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742265">f2</span><span class="op" id="6742267">,</span>&nbsp;<span class="ident" id="6742269">exact</span>&nbsp;<span class="op" id="6742275">:=</span>&nbsp;<span class="ident" id="6742278">r</span><span class="op" id="6742279">.</span><span class="ident" id="6742280">Float32</span><span class="op" id="6742287">(</span><span class="op" id="6742288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742291">if</span>&nbsp;<span class="ident" id="6742294">f</span>&nbsp;<span class="op" id="6742296">!=</span>&nbsp;<span class="ident" id="6742299">f2</span>&nbsp;<span class="op" id="6742302">||</span>&nbsp;<span class="op" id="6742305">!</span><span class="ident" id="6742306">exact</span>&nbsp;<span class="op" id="6742312">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742316">t</span><span class="op" id="6742317">.</span><span class="ident" id="6742318">Errorf</span><span class="op" id="6742324">(</span><span class="string" id="6742325">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="6742408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742413">f</span><span class="op" id="6742414">,</span>&nbsp;<span class="ident" id="6742416">f2</span><span class="op" id="6742418">,</span>&nbsp;<span class="ident" id="6742420">f2</span><span class="op" id="6742422">,</span>&nbsp;<span class="ident" id="6742424">exact</span><span class="op" id="6742429">,</span>&nbsp;<span class="ident" id="6742431">f</span><span class="op" id="6742432">,</span>&nbsp;<span class="ident" id="6742434">f</span><span class="op" id="6742435">,</span>&nbsp;<span class="builtintype" id="6742437">true</span><span class="op" id="6742441">,</span>&nbsp;<span class="ident" id="6742443">f2</span><span class="op" id="6742445">-</span><span class="ident" id="6742446">f</span><span class="op" id="6742447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742450">}</span><br>
<span class="lineno"></span><span class="op" id="6742452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="6742455">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6742528">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="6742555">func</span>&nbsp;<span class="ident" id="6742560">checkNonLossyRoundtrip64</span><span class="op" id="6742584">(</span><span class="ident" id="6742585">t</span>&nbsp;<span class="op" id="6742587">*</span><span class="ident" id="6742588">testing</span><span class="op" id="6742595">.</span><span class="ident" id="6742596">T</span><span class="op" id="6742597">,</span>&nbsp;<span class="ident" id="6742599">f</span>&nbsp;<span class="builtintype" id="6742601">float64</span><span class="op" id="6742608">)</span>&nbsp;<span class="op" id="6742610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742613">if</span>&nbsp;<span class="op" id="6742616">!</span><span class="ident" id="6742617">isFinite</span><span class="op" id="6742625">(</span><span class="ident" id="6742626">f</span><span class="op" id="6742627">)</span>&nbsp;<span class="op" id="6742629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742633">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742644">r</span>&nbsp;<span class="op" id="6742646">:=</span>&nbsp;<span class="builtinfunc" id="6742649">new</span><span class="op" id="6742652">(</span><span class="ident" id="6742653">Rat</span><span class="op" id="6742656">)</span><span class="op" id="6742657">.</span><span class="ident" id="6742658">SetFloat64</span><span class="op" id="6742668">(</span><span class="ident" id="6742669">f</span><span class="op" id="6742670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742673">if</span>&nbsp;<span class="ident" id="6742676">r</span>&nbsp;<span class="op" id="6742678">==</span>&nbsp;<span class="ident" id="6742681">nil</span>&nbsp;<span class="op" id="6742685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742689">t</span><span class="op" id="6742690">.</span><span class="ident" id="6742691">Errorf</span><span class="op" id="6742697">(</span><span class="string" id="6742698">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="6742730">,</span>&nbsp;<span class="ident" id="6742732">f</span><span class="op" id="6742733">,</span>&nbsp;<span class="ident" id="6742735">f</span><span class="op" id="6742736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742740">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742751">f2</span><span class="op" id="6742753">,</span>&nbsp;<span class="ident" id="6742755">exact</span>&nbsp;<span class="op" id="6742761">:=</span>&nbsp;<span class="ident" id="6742764">r</span><span class="op" id="6742765">.</span><span class="ident" id="6742766">Float64</span><span class="op" id="6742773">(</span><span class="op" id="6742774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742777">if</span>&nbsp;<span class="ident" id="6742780">f</span>&nbsp;<span class="op" id="6742782">!=</span>&nbsp;<span class="ident" id="6742785">f2</span>&nbsp;<span class="op" id="6742788">||</span>&nbsp;<span class="op" id="6742791">!</span><span class="ident" id="6742792">exact</span>&nbsp;<span class="op" id="6742798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742802">t</span><span class="op" id="6742803">.</span><span class="ident" id="6742804">Errorf</span><span class="op" id="6742810">(</span><span class="string" id="6742811">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="6742885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742890">f</span><span class="op" id="6742891">,</span>&nbsp;<span class="ident" id="6742893">f2</span><span class="op" id="6742895">,</span>&nbsp;<span class="ident" id="6742897">f2</span><span class="op" id="6742899">,</span>&nbsp;<span class="ident" id="6742901">exact</span><span class="op" id="6742906">,</span>&nbsp;<span class="ident" id="6742908">f</span><span class="op" id="6742909">,</span>&nbsp;<span class="ident" id="6742911">f</span><span class="op" id="6742912">,</span>&nbsp;<span class="builtintype" id="6742914">true</span><span class="op" id="6742918">,</span>&nbsp;<span class="ident" id="6742920">f2</span><span class="op" id="6742922">-</span><span class="ident" id="6742923">f</span><span class="op" id="6742924">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742927">}</span><br>
<span class="lineno"></span><span class="op" id="6742929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6742932">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="6742990">func</span>&nbsp;<span class="ident" id="6742995">delta</span><span class="op" id="6743000">(</span><span class="ident" id="6743001">r</span>&nbsp;<span class="op" id="6743003">*</span><span class="ident" id="6743004">Rat</span><span class="op" id="6743007">,</span>&nbsp;<span class="ident" id="6743009">f</span>&nbsp;<span class="builtintype" id="6743011">float64</span><span class="op" id="6743018">)</span>&nbsp;<span class="op" id="6743020">*</span><span class="ident" id="6743021">Rat</span>&nbsp;<span class="op" id="6743025">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743028">d</span>&nbsp;<span class="op" id="6743030">:=</span>&nbsp;<span class="builtinfunc" id="6743033">new</span><span class="op" id="6743036">(</span><span class="ident" id="6743037">Rat</span><span class="op" id="6743040">)</span><span class="op" id="6743041">.</span><span class="ident" id="6743042">Sub</span><span class="op" id="6743045">(</span><span class="ident" id="6743046">r</span><span class="op" id="6743047">,</span>&nbsp;<span class="builtinfunc" id="6743049">new</span><span class="op" id="6743052">(</span><span class="ident" id="6743053">Rat</span><span class="op" id="6743056">)</span><span class="op" id="6743057">.</span><span class="ident" id="6743058">SetFloat64</span><span class="op" id="6743068">(</span><span class="ident" id="6743069">f</span><span class="op" id="6743070">)</span><span class="op" id="6743071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743074">return</span>&nbsp;<span class="ident" id="6743081">d</span><span class="op" id="6743082">.</span><span class="ident" id="6743083">Abs</span><span class="op" id="6743086">(</span><span class="ident" id="6743087">d</span><span class="op" id="6743088">)</span><br>
<span class="lineno"></span><span class="op" id="6743090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6743093">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="6743159">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6743182">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="6743210">func</span>&nbsp;<span class="ident" id="6743215">checkIsBestApprox32</span><span class="op" id="6743234">(</span><span class="ident" id="6743235">t</span>&nbsp;<span class="op" id="6743237">*</span><span class="ident" id="6743238">testing</span><span class="op" id="6743245">.</span><span class="ident" id="6743246">T</span><span class="op" id="6743247">,</span>&nbsp;<span class="ident" id="6743249">f</span>&nbsp;<span class="builtintype" id="6743251">float32</span><span class="op" id="6743258">,</span>&nbsp;<span class="ident" id="6743260">r</span>&nbsp;<span class="op" id="6743262">*</span><span class="ident" id="6743263">Rat</span><span class="op" id="6743266">)</span>&nbsp;<span class="builtintype" id="6743268">bool</span>&nbsp;<span class="op" id="6743273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743276">if</span>&nbsp;<span class="ident" id="6743279">math</span><span class="op" id="6743283">.</span><span class="ident" id="6743284">Abs</span><span class="op" id="6743287">(</span><span class="builtintype" id="6743288">float64</span><span class="op" id="6743295">(</span><span class="ident" id="6743296">f</span><span class="op" id="6743297">)</span><span class="op" id="6743298">)</span>&nbsp;<span class="op" id="6743300">&gt;=</span>&nbsp;<span class="ident" id="6743303">math</span><span class="op" id="6743307">.</span><span class="ident" id="6743308">MaxFloat32</span>&nbsp;<span class="op" id="6743319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6743323">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6743394">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743442">return</span>&nbsp;<span class="builtintype" id="6743449">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6743459">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743526">f0</span>&nbsp;<span class="op" id="6743529">:=</span>&nbsp;<span class="ident" id="6743532">math</span><span class="op" id="6743536">.</span><span class="ident" id="6743537">Nextafter32</span><span class="op" id="6743548">(</span><span class="ident" id="6743549">f</span><span class="op" id="6743550">,</span>&nbsp;<span class="builtintype" id="6743552">float32</span><span class="op" id="6743559">(</span><span class="ident" id="6743560">math</span><span class="op" id="6743564">.</span><span class="ident" id="6743565">Inf</span><span class="op" id="6743568">(</span><span class="op" id="6743569">-</span><span class="num" id="6743570">1</span><span class="op" id="6743571">)</span><span class="op" id="6743572">)</span><span class="op" id="6743573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743576">f1</span>&nbsp;<span class="op" id="6743579">:=</span>&nbsp;<span class="ident" id="6743582">math</span><span class="op" id="6743586">.</span><span class="ident" id="6743587">Nextafter32</span><span class="op" id="6743598">(</span><span class="ident" id="6743599">f</span><span class="op" id="6743600">,</span>&nbsp;<span class="builtintype" id="6743602">float32</span><span class="op" id="6743609">(</span><span class="ident" id="6743610">math</span><span class="op" id="6743614">.</span><span class="ident" id="6743615">Inf</span><span class="op" id="6743618">(</span><span class="op" id="6743619">+</span><span class="num" id="6743620">1</span><span class="op" id="6743621">)</span><span class="op" id="6743622">)</span><span class="op" id="6743623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6743627">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743692">df</span>&nbsp;<span class="op" id="6743695">:=</span>&nbsp;<span class="ident" id="6743698">delta</span><span class="op" id="6743703">(</span><span class="ident" id="6743704">r</span><span class="op" id="6743705">,</span>&nbsp;<span class="builtintype" id="6743707">float64</span><span class="op" id="6743714">(</span><span class="ident" id="6743715">f</span><span class="op" id="6743716">)</span><span class="op" id="6743717">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743720">df0</span>&nbsp;<span class="op" id="6743724">:=</span>&nbsp;<span class="ident" id="6743727">delta</span><span class="op" id="6743732">(</span><span class="ident" id="6743733">r</span><span class="op" id="6743734">,</span>&nbsp;<span class="builtintype" id="6743736">float64</span><span class="op" id="6743743">(</span><span class="ident" id="6743744">f0</span><span class="op" id="6743746">)</span><span class="op" id="6743747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743750">df1</span>&nbsp;<span class="op" id="6743754">:=</span>&nbsp;<span class="ident" id="6743757">delta</span><span class="op" id="6743762">(</span><span class="ident" id="6743763">r</span><span class="op" id="6743764">,</span>&nbsp;<span class="builtintype" id="6743766">float64</span><span class="op" id="6743773">(</span><span class="ident" id="6743774">f1</span><span class="op" id="6743776">)</span><span class="op" id="6743777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743780">if</span>&nbsp;<span class="ident" id="6743783">df</span><span class="op" id="6743785">.</span><span class="ident" id="6743786">Cmp</span><span class="op" id="6743789">(</span><span class="ident" id="6743790">df0</span><span class="op" id="6743793">)</span>&nbsp;<span class="op" id="6743795">&gt;</span>&nbsp;<span class="num" id="6743797">0</span>&nbsp;<span class="op" id="6743799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743803">t</span><span class="op" id="6743804">.</span><span class="ident" id="6743805">Errorf</span><span class="op" id="6743811">(</span><span class="string" id="6743812">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="6743881">,</span>&nbsp;<span class="ident" id="6743883">r</span><span class="op" id="6743884">,</span>&nbsp;<span class="ident" id="6743886">f</span><span class="op" id="6743887">,</span>&nbsp;<span class="ident" id="6743889">f</span><span class="op" id="6743890">,</span>&nbsp;<span class="ident" id="6743892">f0</span><span class="op" id="6743894">,</span>&nbsp;<span class="ident" id="6743896">f0</span><span class="op" id="6743898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743902">return</span>&nbsp;<span class="builtintype" id="6743909">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743919">if</span>&nbsp;<span class="ident" id="6743922">df</span><span class="op" id="6743924">.</span><span class="ident" id="6743925">Cmp</span><span class="op" id="6743928">(</span><span class="ident" id="6743929">df1</span><span class="op" id="6743932">)</span>&nbsp;<span class="op" id="6743934">&gt;</span>&nbsp;<span class="num" id="6743936">0</span>&nbsp;<span class="op" id="6743938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743942">t</span><span class="op" id="6743943">.</span><span class="ident" id="6743944">Errorf</span><span class="op" id="6743950">(</span><span class="string" id="6743951">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="6744016">,</span>&nbsp;<span class="ident" id="6744018">r</span><span class="op" id="6744019">,</span>&nbsp;<span class="ident" id="6744021">f</span><span class="op" id="6744022">,</span>&nbsp;<span class="ident" id="6744024">f</span><span class="op" id="6744025">,</span>&nbsp;<span class="ident" id="6744027">f1</span><span class="op" id="6744029">,</span>&nbsp;<span class="ident" id="6744031">f1</span><span class="op" id="6744033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744037">return</span>&nbsp;<span class="builtintype" id="6744044">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744051">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744054">if</span>&nbsp;<span class="ident" id="6744057">df</span><span class="op" id="6744059">.</span><span class="ident" id="6744060">Cmp</span><span class="op" id="6744063">(</span><span class="ident" id="6744064">df0</span><span class="op" id="6744067">)</span>&nbsp;<span class="op" id="6744069">==</span>&nbsp;<span class="num" id="6744072">0</span>&nbsp;<span class="op" id="6744074">&amp;&amp;</span>&nbsp;<span class="op" id="6744077">!</span><span class="ident" id="6744078">isEven32</span><span class="op" id="6744086">(</span><span class="ident" id="6744087">f</span><span class="op" id="6744088">)</span>&nbsp;<span class="op" id="6744090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744094">t</span><span class="op" id="6744095">.</span><span class="ident" id="6744096">Errorf</span><span class="op" id="6744102">(</span><span class="string" id="6744103">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="6744180">,</span>&nbsp;<span class="ident" id="6744182">r</span><span class="op" id="6744183">,</span>&nbsp;<span class="ident" id="6744185">f</span><span class="op" id="6744186">,</span>&nbsp;<span class="ident" id="6744188">f</span><span class="op" id="6744189">,</span>&nbsp;<span class="ident" id="6744191">f0</span><span class="op" id="6744193">,</span>&nbsp;<span class="ident" id="6744195">f0</span><span class="op" id="6744197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744201">return</span>&nbsp;<span class="builtintype" id="6744208">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744218">if</span>&nbsp;<span class="ident" id="6744221">df</span><span class="op" id="6744223">.</span><span class="ident" id="6744224">Cmp</span><span class="op" id="6744227">(</span><span class="ident" id="6744228">df1</span><span class="op" id="6744231">)</span>&nbsp;<span class="op" id="6744233">==</span>&nbsp;<span class="num" id="6744236">0</span>&nbsp;<span class="op" id="6744238">&amp;&amp;</span>&nbsp;<span class="op" id="6744241">!</span><span class="ident" id="6744242">isEven32</span><span class="op" id="6744250">(</span><span class="ident" id="6744251">f</span><span class="op" id="6744252">)</span>&nbsp;<span class="op" id="6744254">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744258">t</span><span class="op" id="6744259">.</span><span class="ident" id="6744260">Errorf</span><span class="op" id="6744266">(</span><span class="string" id="6744267">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="6744344">,</span>&nbsp;<span class="ident" id="6744346">r</span><span class="op" id="6744347">,</span>&nbsp;<span class="ident" id="6744349">f</span><span class="op" id="6744350">,</span>&nbsp;<span class="ident" id="6744352">f</span><span class="op" id="6744353">,</span>&nbsp;<span class="ident" id="6744355">f1</span><span class="op" id="6744357">,</span>&nbsp;<span class="ident" id="6744359">f1</span><span class="op" id="6744361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744365">return</span>&nbsp;<span class="builtintype" id="6744372">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744382">return</span>&nbsp;<span class="builtintype" id="6744389">true</span><br>
<span class="lineno"></span><span class="op" id="6744394">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="6744397">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="6744463">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6744486">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="6744514">func</span>&nbsp;<span class="ident" id="6744519">checkIsBestApprox64</span><span class="op" id="6744538">(</span><span class="ident" id="6744539">t</span>&nbsp;<span class="op" id="6744541">*</span><span class="ident" id="6744542">testing</span><span class="op" id="6744549">.</span><span class="ident" id="6744550">T</span><span class="op" id="6744551">,</span>&nbsp;<span class="ident" id="6744553">f</span>&nbsp;<span class="builtintype" id="6744555">float64</span><span class="op" id="6744562">,</span>&nbsp;<span class="ident" id="6744564">r</span>&nbsp;<span class="op" id="6744566">*</span><span class="ident" id="6744567">Rat</span><span class="op" id="6744570">)</span>&nbsp;<span class="builtintype" id="6744572">bool</span>&nbsp;<span class="op" id="6744577">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744580">if</span>&nbsp;<span class="ident" id="6744583">math</span><span class="op" id="6744587">.</span><span class="ident" id="6744588">Abs</span><span class="op" id="6744591">(</span><span class="ident" id="6744592">f</span><span class="op" id="6744593">)</span>&nbsp;<span class="op" id="6744595">&gt;=</span>&nbsp;<span class="ident" id="6744598">math</span><span class="op" id="6744602">.</span><span class="ident" id="6744603">MaxFloat64</span>&nbsp;<span class="op" id="6744614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6744618">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6744689">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744737">return</span>&nbsp;<span class="builtintype" id="6744744">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744750">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6744754">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744821">f0</span>&nbsp;<span class="op" id="6744824">:=</span>&nbsp;<span class="ident" id="6744827">math</span><span class="op" id="6744831">.</span><span class="ident" id="6744832">Nextafter</span><span class="op" id="6744841">(</span><span class="ident" id="6744842">f</span><span class="op" id="6744843">,</span>&nbsp;<span class="ident" id="6744845">math</span><span class="op" id="6744849">.</span><span class="ident" id="6744850">Inf</span><span class="op" id="6744853">(</span><span class="op" id="6744854">-</span><span class="num" id="6744855">1</span><span class="op" id="6744856">)</span><span class="op" id="6744857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744860">f1</span>&nbsp;<span class="op" id="6744863">:=</span>&nbsp;<span class="ident" id="6744866">math</span><span class="op" id="6744870">.</span><span class="ident" id="6744871">Nextafter</span><span class="op" id="6744880">(</span><span class="ident" id="6744881">f</span><span class="op" id="6744882">,</span>&nbsp;<span class="ident" id="6744884">math</span><span class="op" id="6744888">.</span><span class="ident" id="6744889">Inf</span><span class="op" id="6744892">(</span><span class="op" id="6744893">+</span><span class="num" id="6744894">1</span><span class="op" id="6744895">)</span><span class="op" id="6744896">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6744900">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744965">df</span>&nbsp;<span class="op" id="6744968">:=</span>&nbsp;<span class="ident" id="6744971">delta</span><span class="op" id="6744976">(</span><span class="ident" id="6744977">r</span><span class="op" id="6744978">,</span>&nbsp;<span class="ident" id="6744980">f</span><span class="op" id="6744981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744984">df0</span>&nbsp;<span class="op" id="6744988">:=</span>&nbsp;<span class="ident" id="6744991">delta</span><span class="op" id="6744996">(</span><span class="ident" id="6744997">r</span><span class="op" id="6744998">,</span>&nbsp;<span class="ident" id="6745000">f0</span><span class="op" id="6745002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745005">df1</span>&nbsp;<span class="op" id="6745009">:=</span>&nbsp;<span class="ident" id="6745012">delta</span><span class="op" id="6745017">(</span><span class="ident" id="6745018">r</span><span class="op" id="6745019">,</span>&nbsp;<span class="ident" id="6745021">f1</span><span class="op" id="6745023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745026">if</span>&nbsp;<span class="ident" id="6745029">df</span><span class="op" id="6745031">.</span><span class="ident" id="6745032">Cmp</span><span class="op" id="6745035">(</span><span class="ident" id="6745036">df0</span><span class="op" id="6745039">)</span>&nbsp;<span class="op" id="6745041">&gt;</span>&nbsp;<span class="num" id="6745043">0</span>&nbsp;<span class="op" id="6745045">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745049">t</span><span class="op" id="6745050">.</span><span class="ident" id="6745051">Errorf</span><span class="op" id="6745057">(</span><span class="string" id="6745058">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="6745127">,</span>&nbsp;<span class="ident" id="6745129">r</span><span class="op" id="6745130">,</span>&nbsp;<span class="ident" id="6745132">f</span><span class="op" id="6745133">,</span>&nbsp;<span class="ident" id="6745135">f</span><span class="op" id="6745136">,</span>&nbsp;<span class="ident" id="6745138">f0</span><span class="op" id="6745140">,</span>&nbsp;<span class="ident" id="6745142">f0</span><span class="op" id="6745144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745148">return</span>&nbsp;<span class="builtintype" id="6745155">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745165">if</span>&nbsp;<span class="ident" id="6745168">df</span><span class="op" id="6745170">.</span><span class="ident" id="6745171">Cmp</span><span class="op" id="6745174">(</span><span class="ident" id="6745175">df1</span><span class="op" id="6745178">)</span>&nbsp;<span class="op" id="6745180">&gt;</span>&nbsp;<span class="num" id="6745182">0</span>&nbsp;<span class="op" id="6745184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745188">t</span><span class="op" id="6745189">.</span><span class="ident" id="6745190">Errorf</span><span class="op" id="6745196">(</span><span class="string" id="6745197">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="6745262">,</span>&nbsp;<span class="ident" id="6745264">r</span><span class="op" id="6745265">,</span>&nbsp;<span class="ident" id="6745267">f</span><span class="op" id="6745268">,</span>&nbsp;<span class="ident" id="6745270">f</span><span class="op" id="6745271">,</span>&nbsp;<span class="ident" id="6745273">f1</span><span class="op" id="6745275">,</span>&nbsp;<span class="ident" id="6745277">f1</span><span class="op" id="6745279">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745283">return</span>&nbsp;<span class="builtintype" id="6745290">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745300">if</span>&nbsp;<span class="ident" id="6745303">df</span><span class="op" id="6745305">.</span><span class="ident" id="6745306">Cmp</span><span class="op" id="6745309">(</span><span class="ident" id="6745310">df0</span><span class="op" id="6745313">)</span>&nbsp;<span class="op" id="6745315">==</span>&nbsp;<span class="num" id="6745318">0</span>&nbsp;<span class="op" id="6745320">&amp;&amp;</span>&nbsp;<span class="op" id="6745323">!</span><span class="ident" id="6745324">isEven64</span><span class="op" id="6745332">(</span><span class="ident" id="6745333">f</span><span class="op" id="6745334">)</span>&nbsp;<span class="op" id="6745336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745340">t</span><span class="op" id="6745341">.</span><span class="ident" id="6745342">Errorf</span><span class="op" id="6745348">(</span><span class="string" id="6745349">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="6745426">,</span>&nbsp;<span class="ident" id="6745428">r</span><span class="op" id="6745429">,</span>&nbsp;<span class="ident" id="6745431">f</span><span class="op" id="6745432">,</span>&nbsp;<span class="ident" id="6745434">f</span><span class="op" id="6745435">,</span>&nbsp;<span class="ident" id="6745437">f0</span><span class="op" id="6745439">,</span>&nbsp;<span class="ident" id="6745441">f0</span><span class="op" id="6745443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745447">return</span>&nbsp;<span class="builtintype" id="6745454">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745464">if</span>&nbsp;<span class="ident" id="6745467">df</span><span class="op" id="6745469">.</span><span class="ident" id="6745470">Cmp</span><span class="op" id="6745473">(</span><span class="ident" id="6745474">df1</span><span class="op" id="6745477">)</span>&nbsp;<span class="op" id="6745479">==</span>&nbsp;<span class="num" id="6745482">0</span>&nbsp;<span class="op" id="6745484">&amp;&amp;</span>&nbsp;<span class="op" id="6745487">!</span><span class="ident" id="6745488">isEven64</span><span class="op" id="6745496">(</span><span class="ident" id="6745497">f</span><span class="op" id="6745498">)</span>&nbsp;<span class="op" id="6745500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745504">t</span><span class="op" id="6745505">.</span><span class="ident" id="6745506">Errorf</span><span class="op" id="6745512">(</span><span class="string" id="6745513">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="6745590">,</span>&nbsp;<span class="ident" id="6745592">r</span><span class="op" id="6745593">,</span>&nbsp;<span class="ident" id="6745595">f</span><span class="op" id="6745596">,</span>&nbsp;<span class="ident" id="6745598">f</span><span class="op" id="6745599">,</span>&nbsp;<span class="ident" id="6745601">f1</span><span class="op" id="6745603">,</span>&nbsp;<span class="ident" id="6745605">f1</span><span class="op" id="6745607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745611">return</span>&nbsp;<span class="builtintype" id="6745618">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745625">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745628">return</span>&nbsp;<span class="builtintype" id="6745635">true</span><br>
<span class="lineno"></span><span class="op" id="6745640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6745643">func</span>&nbsp;<span class="ident" id="6745648">isEven32</span><span class="op" id="6745656">(</span><span class="ident" id="6745657">f</span>&nbsp;<span class="builtintype" id="6745659">float32</span><span class="op" id="6745666">)</span>&nbsp;<span class="builtintype" id="6745668">bool</span>&nbsp;<span class="op" id="6745673">{</span>&nbsp;<span class="keyword" id="6745675">return</span>&nbsp;<span class="ident" id="6745682">math</span><span class="op" id="6745686">.</span><span class="ident" id="6745687">Float32bits</span><span class="op" id="6745698">(</span><span class="ident" id="6745699">f</span><span class="op" id="6745700">)</span><span class="op" id="6745701">&amp;</span><span class="num" id="6745702">1</span>&nbsp;<span class="op" id="6745704">==</span>&nbsp;<span class="num" id="6745707">0</span>&nbsp;<span class="op" id="6745709">}</span><br>
<span class="lineno"></span><span class="keyword" id="6745711">func</span>&nbsp;<span class="ident" id="6745716">isEven64</span><span class="op" id="6745724">(</span><span class="ident" id="6745725">f</span>&nbsp;<span class="builtintype" id="6745727">float64</span><span class="op" id="6745734">)</span>&nbsp;<span class="builtintype" id="6745736">bool</span>&nbsp;<span class="op" id="6745741">{</span>&nbsp;<span class="keyword" id="6745743">return</span>&nbsp;<span class="ident" id="6745750">math</span><span class="op" id="6745754">.</span><span class="ident" id="6745755">Float64bits</span><span class="op" id="6745766">(</span><span class="ident" id="6745767">f</span><span class="op" id="6745768">)</span><span class="op" id="6745769">&amp;</span><span class="num" id="6745770">1</span>&nbsp;<span class="op" id="6745772">==</span>&nbsp;<span class="num" id="6745775">0</span>&nbsp;<span class="op" id="6745777">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="6745780">func</span>&nbsp;<span class="ident" id="6745785">TestIsFinite</span><span class="op" id="6745797">(</span><span class="ident" id="6745798">t</span>&nbsp;<span class="op" id="6745800">*</span><span class="ident" id="6745801">testing</span><span class="op" id="6745808">.</span><span class="ident" id="6745809">T</span><span class="op" id="6745810">)</span>&nbsp;<span class="op" id="6745812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745815">finites</span>&nbsp;<span class="op" id="6745823">:=</span>&nbsp;<span class="op" id="6745826">[</span><span class="op" id="6745827">]</span><span class="builtintype" id="6745828">float64</span><span class="op" id="6745835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6745839">1.0</span>&nbsp;<span class="op" id="6745843">/</span>&nbsp;<span class="num" id="6745845">3</span><span class="op" id="6745846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6745850">4891559871276714924261e+222</span><span class="op" id="6745877">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745881">math</span><span class="op" id="6745885">.</span><span class="ident" id="6745886">MaxFloat64</span><span class="op" id="6745896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745900">math</span><span class="op" id="6745904">.</span><span class="ident" id="6745905">SmallestNonzeroFloat64</span><span class="op" id="6745927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745931">-</span><span class="ident" id="6745932">math</span><span class="op" id="6745936">.</span><span class="ident" id="6745937">MaxFloat64</span><span class="op" id="6745947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745951">-</span><span class="ident" id="6745952">math</span><span class="op" id="6745956">.</span><span class="ident" id="6745957">SmallestNonzeroFloat64</span><span class="op" id="6745979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745982">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745985">for</span>&nbsp;<span class="ident" id="6745989">_</span><span class="op" id="6745990">,</span>&nbsp;<span class="ident" id="6745992">f</span>&nbsp;<span class="op" id="6745994">:=</span>&nbsp;<span class="keyword" id="6745997">range</span>&nbsp;<span class="ident" id="6746003">finites</span>&nbsp;<span class="op" id="6746011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746015">if</span>&nbsp;<span class="op" id="6746018">!</span><span class="ident" id="6746019">isFinite</span><span class="op" id="6746027">(</span><span class="ident" id="6746028">f</span><span class="op" id="6746029">)</span>&nbsp;<span class="op" id="6746031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746036">t</span><span class="op" id="6746037">.</span><span class="ident" id="6746038">Errorf</span><span class="op" id="6746044">(</span><span class="string" id="6746045">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="6746065">,</span>&nbsp;<span class="ident" id="6746067">f</span><span class="op" id="6746068">,</span>&nbsp;<span class="ident" id="6746070">f</span><span class="op" id="6746071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746078">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746081">nonfinites</span>&nbsp;<span class="op" id="6746092">:=</span>&nbsp;<span class="op" id="6746095">[</span><span class="op" id="6746096">]</span><span class="builtintype" id="6746097">float64</span><span class="op" id="6746104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746108">math</span><span class="op" id="6746112">.</span><span class="ident" id="6746113">NaN</span><span class="op" id="6746116">(</span><span class="op" id="6746117">)</span><span class="op" id="6746118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746122">math</span><span class="op" id="6746126">.</span><span class="ident" id="6746127">Inf</span><span class="op" id="6746130">(</span><span class="op" id="6746131">-</span><span class="num" id="6746132">1</span><span class="op" id="6746133">)</span><span class="op" id="6746134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746138">math</span><span class="op" id="6746142">.</span><span class="ident" id="6746143">Inf</span><span class="op" id="6746146">(</span><span class="op" id="6746147">+</span><span class="num" id="6746148">1</span><span class="op" id="6746149">)</span><span class="op" id="6746150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746153">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746156">for</span>&nbsp;<span class="ident" id="6746160">_</span><span class="op" id="6746161">,</span>&nbsp;<span class="ident" id="6746163">f</span>&nbsp;<span class="op" id="6746165">:=</span>&nbsp;<span class="keyword" id="6746168">range</span>&nbsp;<span class="ident" id="6746174">nonfinites</span>&nbsp;<span class="op" id="6746185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746189">if</span>&nbsp;<span class="ident" id="6746192">isFinite</span><span class="op" id="6746200">(</span><span class="ident" id="6746201">f</span><span class="op" id="6746202">)</span>&nbsp;<span class="op" id="6746204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746209">t</span><span class="op" id="6746210">.</span><span class="ident" id="6746211">Errorf</span><span class="op" id="6746217">(</span><span class="string" id="6746218">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="6746238">,</span>&nbsp;<span class="ident" id="6746240">f</span><span class="op" id="6746241">,</span>&nbsp;<span class="ident" id="6746243">f</span><span class="op" id="6746244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746251">}</span><br>
<span class="lineno">1160</span><span class="op" id="6746253">}</span>
</div>
</body>
</html>
