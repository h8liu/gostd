<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html" class="current">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5604133">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5604188">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5604242">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5604293">package</span>&nbsp;<span class="ident" id="5604301">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5604306">import</span>&nbsp;<span class="op" id="5604313">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5604316">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5604325">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5604335">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5604341">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5604352">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5604359">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5604362">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="5604431">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5604503">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="5604534">const</span>&nbsp;<span class="ident" id="5604540">tooBig</span>&nbsp;<span class="op" id="5604547">=</span>&nbsp;<span class="num" id="5604549">1</span>&nbsp;<span class="op" id="5604551">&lt;&lt;</span>&nbsp;<span class="num" id="5604554">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5604558">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5604634">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="5604666">type</span>&nbsp;<span class="ident" id="5604671">Decoder</span>&nbsp;<span class="keyword" id="5604679">struct</span>&nbsp;<span class="op" id="5604686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604689">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604702">sync</span><span class="op" id="5604706">.</span><span class="ident" id="5604707">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5604742">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604784">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604797">io</span><span class="op" id="5604799">.</span><span class="ident" id="5604800">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5604837">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604860">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604873">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5604913">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5604954">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5604967">map</span><span class="op" id="5604970">[</span><span class="ident" id="5604971">typeId</span><span class="op" id="5604977">]</span><span class="op" id="5604978">*</span><span class="ident" id="5604979">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5605007">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605051">decoderCache</span>&nbsp;<span class="keyword" id="5605064">map</span><span class="op" id="5605067">[</span><span class="ident" id="5605068">reflect</span><span class="op" id="5605075">.</span><span class="ident" id="5605076">Type</span><span class="op" id="5605080">]</span><span class="keyword" id="5605081">map</span><span class="op" id="5605084">[</span><span class="ident" id="5605085">typeId</span><span class="op" id="5605091">]</span><span class="op" id="5605092">*</span><span class="op" id="5605093">*</span><span class="ident" id="5605094">decEngine</span>&nbsp;<span class="comment" id="5605104">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605134">ignorerCache</span>&nbsp;<span class="keyword" id="5605147">map</span><span class="op" id="5605150">[</span><span class="ident" id="5605151">typeId</span><span class="op" id="5605157">]</span><span class="op" id="5605158">*</span><span class="op" id="5605159">*</span><span class="ident" id="5605160">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5605187">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605217">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5605230">*</span><span class="ident" id="5605231">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5605270">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605322">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5605335">[</span><span class="op" id="5605336">]</span><span class="builtintype" id="5605337">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5605375">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605429">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5605442">error</span><br>
<span class="lineno"></span><span class="op" id="5605448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5605451">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="5605518">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5605589">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5605606">func</span>&nbsp;<span class="ident" id="5605611">NewDecoder</span><span class="op" id="5605621">(</span><span class="ident" id="5605622">r</span>&nbsp;<span class="ident" id="5605624">io</span><span class="op" id="5605626">.</span><span class="ident" id="5605627">Reader</span><span class="op" id="5605633">)</span>&nbsp;<span class="op" id="5605635">*</span><span class="ident" id="5605636">Decoder</span>&nbsp;<span class="op" id="5605644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605647">dec</span>&nbsp;<span class="op" id="5605651">:=</span>&nbsp;<span class="builtinfunc" id="5605654">new</span><span class="op" id="5605657">(</span><span class="ident" id="5605658">Decoder</span><span class="op" id="5605665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5605668">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5605745">if</span>&nbsp;<span class="ident" id="5605748">_</span><span class="op" id="5605749">,</span>&nbsp;<span class="ident" id="5605751">ok</span>&nbsp;<span class="op" id="5605754">:=</span>&nbsp;<span class="ident" id="5605757">r</span><span class="op" id="5605758">.</span><span class="op" id="5605759">(</span><span class="ident" id="5605760">io</span><span class="op" id="5605762">.</span><span class="ident" id="5605763">ByteReader</span><span class="op" id="5605773">)</span><span class="op" id="5605774">;</span>&nbsp;<span class="op" id="5605776">!</span><span class="ident" id="5605777">ok</span>&nbsp;<span class="op" id="5605780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605784">r</span>&nbsp;<span class="op" id="5605786">=</span>&nbsp;<span class="ident" id="5605788">bufio</span><span class="op" id="5605793">.</span><span class="ident" id="5605794">NewReader</span><span class="op" id="5605803">(</span><span class="ident" id="5605804">r</span><span class="op" id="5605805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5605808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605811">dec</span><span class="op" id="5605814">.</span><span class="ident" id="5605815">r</span>&nbsp;<span class="op" id="5605817">=</span>&nbsp;<span class="ident" id="5605819">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605822">dec</span><span class="op" id="5605825">.</span><span class="ident" id="5605826">wireType</span>&nbsp;<span class="op" id="5605835">=</span>&nbsp;<span class="builtinfunc" id="5605837">make</span><span class="op" id="5605841">(</span><span class="keyword" id="5605842">map</span><span class="op" id="5605845">[</span><span class="ident" id="5605846">typeId</span><span class="op" id="5605852">]</span><span class="op" id="5605853">*</span><span class="ident" id="5605854">wireType</span><span class="op" id="5605862">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605865">dec</span><span class="op" id="5605868">.</span><span class="ident" id="5605869">decoderCache</span>&nbsp;<span class="op" id="5605882">=</span>&nbsp;<span class="builtinfunc" id="5605884">make</span><span class="op" id="5605888">(</span><span class="keyword" id="5605889">map</span><span class="op" id="5605892">[</span><span class="ident" id="5605893">reflect</span><span class="op" id="5605900">.</span><span class="ident" id="5605901">Type</span><span class="op" id="5605905">]</span><span class="keyword" id="5605906">map</span><span class="op" id="5605909">[</span><span class="ident" id="5605910">typeId</span><span class="op" id="5605916">]</span><span class="op" id="5605917">*</span><span class="op" id="5605918">*</span><span class="ident" id="5605919">decEngine</span><span class="op" id="5605928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605931">dec</span><span class="op" id="5605934">.</span><span class="ident" id="5605935">ignorerCache</span>&nbsp;<span class="op" id="5605948">=</span>&nbsp;<span class="builtinfunc" id="5605950">make</span><span class="op" id="5605954">(</span><span class="keyword" id="5605955">map</span><span class="op" id="5605958">[</span><span class="ident" id="5605959">typeId</span><span class="op" id="5605965">]</span><span class="op" id="5605966">*</span><span class="op" id="5605967">*</span><span class="ident" id="5605968">decEngine</span><span class="op" id="5605977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5605980">dec</span><span class="op" id="5605983">.</span><span class="ident" id="5605984">countBuf</span>&nbsp;<span class="op" id="5605993">=</span>&nbsp;<span class="builtinfunc" id="5605995">make</span><span class="op" id="5605999">(</span><span class="op" id="5606000">[</span><span class="op" id="5606001">]</span><span class="builtintype" id="5606002">byte</span><span class="op" id="5606006">,</span>&nbsp;<span class="num" id="5606008">9</span><span class="op" id="5606009">)</span>&nbsp;<span class="comment" id="5606011">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606067">return</span>&nbsp;<span class="ident" id="5606074">dec</span><br>
<span class="lineno">50</span><span class="op" id="5606078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5606081">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5606125">func</span>&nbsp;<span class="op" id="5606130">(</span><span class="ident" id="5606131">dec</span>&nbsp;<span class="op" id="5606135">*</span><span class="ident" id="5606136">Decoder</span><span class="op" id="5606143">)</span>&nbsp;<span class="ident" id="5606145">recvType</span><span class="op" id="5606153">(</span><span class="ident" id="5606154">id</span>&nbsp;<span class="ident" id="5606157">typeId</span><span class="op" id="5606163">)</span>&nbsp;<span class="op" id="5606165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5606168">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606221">if</span>&nbsp;<span class="ident" id="5606224">id</span>&nbsp;<span class="op" id="5606227">&lt;</span>&nbsp;<span class="ident" id="5606229">firstUserId</span>&nbsp;<span class="op" id="5606241">||</span>&nbsp;<span class="ident" id="5606244">dec</span><span class="op" id="5606247">.</span><span class="ident" id="5606248">wireType</span><span class="op" id="5606256">[</span><span class="ident" id="5606257">id</span><span class="op" id="5606259">]</span>&nbsp;<span class="op" id="5606261">!=</span>&nbsp;<span class="builtintype" id="5606264">nil</span>&nbsp;<span class="op" id="5606268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606272">dec</span><span class="op" id="5606275">.</span><span class="ident" id="5606276">err</span>&nbsp;<span class="op" id="5606280">=</span>&nbsp;<span class="ident" id="5606282">errors</span><span class="op" id="5606288">.</span><span class="ident" id="5606289">New</span><span class="op" id="5606292">(</span><span class="string" id="5606293">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="5606323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606327">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5606335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5606339">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606349">wire</span>&nbsp;<span class="op" id="5606354">:=</span>&nbsp;<span class="builtinfunc" id="5606357">new</span><span class="op" id="5606360">(</span><span class="ident" id="5606361">wireType</span><span class="op" id="5606369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606372">dec</span><span class="op" id="5606375">.</span><span class="ident" id="5606376">decodeValue</span><span class="op" id="5606387">(</span><span class="ident" id="5606388">tWireType</span><span class="op" id="5606397">,</span>&nbsp;<span class="ident" id="5606399">reflect</span><span class="op" id="5606406">.</span><span class="ident" id="5606407">ValueOf</span><span class="op" id="5606414">(</span><span class="ident" id="5606415">wire</span><span class="op" id="5606419">)</span><span class="op" id="5606420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606423">if</span>&nbsp;<span class="ident" id="5606426">dec</span><span class="op" id="5606429">.</span><span class="ident" id="5606430">err</span>&nbsp;<span class="op" id="5606434">!=</span>&nbsp;<span class="builtintype" id="5606437">nil</span>&nbsp;<span class="op" id="5606441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606445">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5606453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5606456">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606491">dec</span><span class="op" id="5606494">.</span><span class="ident" id="5606495">wireType</span><span class="op" id="5606503">[</span><span class="ident" id="5606504">id</span><span class="op" id="5606506">]</span>&nbsp;<span class="op" id="5606508">=</span>&nbsp;<span class="ident" id="5606510">wire</span><br>
<span class="lineno"></span><span class="op" id="5606515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="5606518">var</span>&nbsp;<span class="ident" id="5606522">errBadCount</span>&nbsp;<span class="op" id="5606534">=</span>&nbsp;<span class="ident" id="5606536">errors</span><span class="op" id="5606542">.</span><span class="ident" id="5606543">New</span><span class="op" id="5606546">(</span><span class="string" id="5606547">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="5606571">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5606574">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="5606660">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="5606748">func</span>&nbsp;<span class="op" id="5606753">(</span><span class="ident" id="5606754">dec</span>&nbsp;<span class="op" id="5606758">*</span><span class="ident" id="5606759">Decoder</span><span class="op" id="5606766">)</span>&nbsp;<span class="ident" id="5606768">recvMessage</span><span class="op" id="5606779">(</span><span class="op" id="5606780">)</span>&nbsp;<span class="builtintype" id="5606782">bool</span>&nbsp;<span class="op" id="5606787">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5606790">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606808">nbytes</span><span class="op" id="5606814">,</span>&nbsp;<span class="ident" id="5606816">_</span><span class="op" id="5606817">,</span>&nbsp;<span class="ident" id="5606819">err</span>&nbsp;<span class="op" id="5606823">:=</span>&nbsp;<span class="ident" id="5606826">decodeUintReader</span><span class="op" id="5606842">(</span><span class="ident" id="5606843">dec</span><span class="op" id="5606846">.</span><span class="ident" id="5606847">r</span><span class="op" id="5606848">,</span>&nbsp;<span class="ident" id="5606850">dec</span><span class="op" id="5606853">.</span><span class="ident" id="5606854">countBuf</span><span class="op" id="5606862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606865">if</span>&nbsp;<span class="ident" id="5606868">err</span>&nbsp;<span class="op" id="5606872">!=</span>&nbsp;<span class="builtintype" id="5606875">nil</span>&nbsp;<span class="op" id="5606879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606883">dec</span><span class="op" id="5606886">.</span><span class="ident" id="5606887">err</span>&nbsp;<span class="op" id="5606891">=</span>&nbsp;<span class="ident" id="5606893">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606899">return</span>&nbsp;<span class="builtintype" id="5606906">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5606913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606916">if</span>&nbsp;<span class="ident" id="5606919">nbytes</span>&nbsp;<span class="op" id="5606926">&gt;=</span>&nbsp;<span class="ident" id="5606929">tooBig</span>&nbsp;<span class="op" id="5606936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606940">dec</span><span class="op" id="5606943">.</span><span class="ident" id="5606944">err</span>&nbsp;<span class="op" id="5606948">=</span>&nbsp;<span class="ident" id="5606950">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5606964">return</span>&nbsp;<span class="builtintype" id="5606971">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5606978">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5606981">dec</span><span class="op" id="5606984">.</span><span class="ident" id="5606985">readMessage</span><span class="op" id="5606996">(</span><span class="builtintype" id="5606997">int</span><span class="op" id="5607000">(</span><span class="ident" id="5607001">nbytes</span><span class="op" id="5607007">)</span><span class="op" id="5607008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607011">return</span>&nbsp;<span class="ident" id="5607018">dec</span><span class="op" id="5607021">.</span><span class="ident" id="5607022">err</span>&nbsp;<span class="op" id="5607026">==</span>&nbsp;<span class="builtintype" id="5607029">nil</span><br>
<span class="lineno"></span><span class="op" id="5607033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5607036">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="5607095">func</span>&nbsp;<span class="op" id="5607100">(</span><span class="ident" id="5607101">dec</span>&nbsp;<span class="op" id="5607105">*</span><span class="ident" id="5607106">Decoder</span><span class="op" id="5607113">)</span>&nbsp;<span class="ident" id="5607115">readMessage</span><span class="op" id="5607126">(</span><span class="ident" id="5607127">nbytes</span>&nbsp;<span class="builtintype" id="5607134">int</span><span class="op" id="5607137">)</span>&nbsp;<span class="op" id="5607139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607142">if</span>&nbsp;<span class="ident" id="5607145">dec</span><span class="op" id="5607148">.</span><span class="ident" id="5607149">buf</span><span class="op" id="5607152">.</span><span class="ident" id="5607153">Len</span><span class="op" id="5607156">(</span><span class="op" id="5607157">)</span>&nbsp;<span class="op" id="5607159">!=</span>&nbsp;<span class="num" id="5607162">0</span>&nbsp;<span class="op" id="5607164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5607168">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5607212">panic</span><span class="op" id="5607217">(</span><span class="string" id="5607218">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="5607244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5607247">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5607250">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607268">dec</span><span class="op" id="5607271">.</span><span class="ident" id="5607272">buf</span><span class="op" id="5607275">.</span><span class="ident" id="5607276">Size</span><span class="op" id="5607280">(</span><span class="ident" id="5607281">nbytes</span><span class="op" id="5607287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607290">_</span><span class="op" id="5607291">,</span>&nbsp;<span class="ident" id="5607293">dec</span><span class="op" id="5607296">.</span><span class="ident" id="5607297">err</span>&nbsp;<span class="op" id="5607301">=</span>&nbsp;<span class="ident" id="5607303">io</span><span class="op" id="5607305">.</span><span class="ident" id="5607306">ReadFull</span><span class="op" id="5607314">(</span><span class="ident" id="5607315">dec</span><span class="op" id="5607318">.</span><span class="ident" id="5607319">r</span><span class="op" id="5607320">,</span>&nbsp;<span class="ident" id="5607322">dec</span><span class="op" id="5607325">.</span><span class="ident" id="5607326">buf</span><span class="op" id="5607329">.</span><span class="ident" id="5607330">Bytes</span><span class="op" id="5607335">(</span><span class="op" id="5607336">)</span><span class="op" id="5607337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607340">if</span>&nbsp;<span class="ident" id="5607343">dec</span><span class="op" id="5607346">.</span><span class="ident" id="5607347">err</span>&nbsp;<span class="op" id="5607351">!=</span>&nbsp;<span class="builtintype" id="5607354">nil</span>&nbsp;<span class="op" id="5607358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607362">if</span>&nbsp;<span class="ident" id="5607365">dec</span><span class="op" id="5607368">.</span><span class="ident" id="5607369">err</span>&nbsp;<span class="op" id="5607373">==</span>&nbsp;<span class="ident" id="5607376">io</span><span class="op" id="5607378">.</span><span class="ident" id="5607379">EOF</span>&nbsp;<span class="op" id="5607383">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607388">dec</span><span class="op" id="5607391">.</span><span class="ident" id="5607392">err</span>&nbsp;<span class="op" id="5607396">=</span>&nbsp;<span class="ident" id="5607398">io</span><span class="op" id="5607400">.</span><span class="ident" id="5607401">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5607420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5607423">}</span><br>
<span class="lineno"></span><span class="op" id="5607425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5607428">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="5607509">func</span>&nbsp;<span class="ident" id="5607514">toInt</span><span class="op" id="5607519">(</span><span class="ident" id="5607520">x</span>&nbsp;<span class="builtintype" id="5607522">uint64</span><span class="op" id="5607528">)</span>&nbsp;<span class="builtintype" id="5607530">int64</span>&nbsp;<span class="op" id="5607536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607539">i</span>&nbsp;<span class="op" id="5607541">:=</span>&nbsp;<span class="builtintype" id="5607544">int64</span><span class="op" id="5607549">(</span><span class="ident" id="5607550">x</span>&nbsp;<span class="op" id="5607552">&gt;&gt;</span>&nbsp;<span class="num" id="5607555">1</span><span class="op" id="5607556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607559">if</span>&nbsp;<span class="ident" id="5607562">x</span><span class="op" id="5607563">&amp;</span><span class="num" id="5607564">1</span>&nbsp;<span class="op" id="5607566">!=</span>&nbsp;<span class="num" id="5607569">0</span>&nbsp;<span class="op" id="5607571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607575">i</span>&nbsp;<span class="op" id="5607577">=</span>&nbsp;<span class="op" id="5607579">^</span><span class="ident" id="5607580">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5607583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607586">return</span>&nbsp;<span class="ident" id="5607593">i</span><br>
<span class="lineno"></span><span class="op" id="5607595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5607598">func</span>&nbsp;<span class="op" id="5607603">(</span><span class="ident" id="5607604">dec</span>&nbsp;<span class="op" id="5607608">*</span><span class="ident" id="5607609">Decoder</span><span class="op" id="5607616">)</span>&nbsp;<span class="ident" id="5607618">nextInt</span><span class="op" id="5607625">(</span><span class="op" id="5607626">)</span>&nbsp;<span class="builtintype" id="5607628">int64</span>&nbsp;<span class="op" id="5607634">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607637">n</span><span class="op" id="5607638">,</span>&nbsp;<span class="ident" id="5607640">_</span><span class="op" id="5607641">,</span>&nbsp;<span class="ident" id="5607643">err</span>&nbsp;<span class="op" id="5607647">:=</span>&nbsp;<span class="ident" id="5607650">decodeUintReader</span><span class="op" id="5607666">(</span><span class="op" id="5607667">&amp;</span><span class="ident" id="5607668">dec</span><span class="op" id="5607671">.</span><span class="ident" id="5607672">buf</span><span class="op" id="5607675">,</span>&nbsp;<span class="ident" id="5607677">dec</span><span class="op" id="5607680">.</span><span class="ident" id="5607681">countBuf</span><span class="op" id="5607689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607692">if</span>&nbsp;<span class="ident" id="5607695">err</span>&nbsp;<span class="op" id="5607699">!=</span>&nbsp;<span class="builtintype" id="5607702">nil</span>&nbsp;<span class="op" id="5607706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607710">dec</span><span class="op" id="5607713">.</span><span class="ident" id="5607714">err</span>&nbsp;<span class="op" id="5607718">=</span>&nbsp;<span class="ident" id="5607720">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5607725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607728">return</span>&nbsp;<span class="ident" id="5607735">toInt</span><span class="op" id="5607740">(</span><span class="ident" id="5607741">n</span><span class="op" id="5607742">)</span><br>
<span class="lineno">120</span><span class="op" id="5607744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5607747">func</span>&nbsp;<span class="op" id="5607752">(</span><span class="ident" id="5607753">dec</span>&nbsp;<span class="op" id="5607757">*</span><span class="ident" id="5607758">Decoder</span><span class="op" id="5607765">)</span>&nbsp;<span class="ident" id="5607767">nextUint</span><span class="op" id="5607775">(</span><span class="op" id="5607776">)</span>&nbsp;<span class="builtintype" id="5607778">uint64</span>&nbsp;<span class="op" id="5607785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607788">n</span><span class="op" id="5607789">,</span>&nbsp;<span class="ident" id="5607791">_</span><span class="op" id="5607792">,</span>&nbsp;<span class="ident" id="5607794">err</span>&nbsp;<span class="op" id="5607798">:=</span>&nbsp;<span class="ident" id="5607801">decodeUintReader</span><span class="op" id="5607817">(</span><span class="op" id="5607818">&amp;</span><span class="ident" id="5607819">dec</span><span class="op" id="5607822">.</span><span class="ident" id="5607823">buf</span><span class="op" id="5607826">,</span>&nbsp;<span class="ident" id="5607828">dec</span><span class="op" id="5607831">.</span><span class="ident" id="5607832">countBuf</span><span class="op" id="5607840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607843">if</span>&nbsp;<span class="ident" id="5607846">err</span>&nbsp;<span class="op" id="5607850">!=</span>&nbsp;<span class="builtintype" id="5607853">nil</span>&nbsp;<span class="op" id="5607857">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5607861">dec</span><span class="op" id="5607864">.</span><span class="ident" id="5607865">err</span>&nbsp;<span class="op" id="5607869">=</span>&nbsp;<span class="ident" id="5607871">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5607876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5607879">return</span>&nbsp;<span class="ident" id="5607886">n</span><br>
<span class="lineno"></span><span class="op" id="5607888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5607891">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="5607921">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="5607937">//&nbsp;&nbsp;&nbsp;&nbsp;(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="5607983">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="5608047">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="5608113">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5608178">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="5608204">func</span>&nbsp;<span class="op" id="5608209">(</span><span class="ident" id="5608210">dec</span>&nbsp;<span class="op" id="5608214">*</span><span class="ident" id="5608215">Decoder</span><span class="op" id="5608222">)</span>&nbsp;<span class="ident" id="5608224">decodeTypeSequence</span><span class="op" id="5608242">(</span><span class="ident" id="5608243">isInterface</span>&nbsp;<span class="builtintype" id="5608255">bool</span><span class="op" id="5608259">)</span>&nbsp;<span class="ident" id="5608261">typeId</span>&nbsp;<span class="op" id="5608268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608271">for</span>&nbsp;<span class="ident" id="5608275">dec</span><span class="op" id="5608278">.</span><span class="ident" id="5608279">err</span>&nbsp;<span class="op" id="5608283">==</span>&nbsp;<span class="builtintype" id="5608286">nil</span>&nbsp;<span class="op" id="5608290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608294">if</span>&nbsp;<span class="ident" id="5608297">dec</span><span class="op" id="5608300">.</span><span class="ident" id="5608301">buf</span><span class="op" id="5608304">.</span><span class="ident" id="5608305">Len</span><span class="op" id="5608308">(</span><span class="op" id="5608309">)</span>&nbsp;<span class="op" id="5608311">==</span>&nbsp;<span class="num" id="5608314">0</span>&nbsp;<span class="op" id="5608316">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608321">if</span>&nbsp;<span class="op" id="5608324">!</span><span class="ident" id="5608325">dec</span><span class="op" id="5608328">.</span><span class="ident" id="5608329">recvMessage</span><span class="op" id="5608340">(</span><span class="op" id="5608341">)</span>&nbsp;<span class="op" id="5608343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608349">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5608358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5608362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608366">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5608390">id</span>&nbsp;<span class="op" id="5608393">:=</span>&nbsp;<span class="ident" id="5608396">typeId</span><span class="op" id="5608402">(</span><span class="ident" id="5608403">dec</span><span class="op" id="5608406">.</span><span class="ident" id="5608407">nextInt</span><span class="op" id="5608414">(</span><span class="op" id="5608415">)</span><span class="op" id="5608416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608420">if</span>&nbsp;<span class="ident" id="5608423">id</span>&nbsp;<span class="op" id="5608426">&gt;=</span>&nbsp;<span class="num" id="5608429">0</span>&nbsp;<span class="op" id="5608431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608436">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608457">return</span>&nbsp;<span class="ident" id="5608464">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5608469">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608473">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5608513">dec</span><span class="op" id="5608516">.</span><span class="ident" id="5608517">recvType</span><span class="op" id="5608525">(</span><span class="op" id="5608526">-</span><span class="ident" id="5608527">id</span><span class="op" id="5608529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608533">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608594">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608652">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5608712">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608751">if</span>&nbsp;<span class="ident" id="5608754">dec</span><span class="op" id="5608757">.</span><span class="ident" id="5608758">buf</span><span class="op" id="5608761">.</span><span class="ident" id="5608762">Len</span><span class="op" id="5608765">(</span><span class="op" id="5608766">)</span>&nbsp;<span class="op" id="5608768">&gt;</span>&nbsp;<span class="num" id="5608770">0</span>&nbsp;<span class="op" id="5608772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608777">if</span>&nbsp;<span class="op" id="5608780">!</span><span class="ident" id="5608781">isInterface</span>&nbsp;<span class="op" id="5608793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5608799">dec</span><span class="op" id="5608802">.</span><span class="ident" id="5608803">err</span>&nbsp;<span class="op" id="5608807">=</span>&nbsp;<span class="ident" id="5608809">errors</span><span class="op" id="5608815">.</span><span class="ident" id="5608816">New</span><span class="op" id="5608819">(</span><span class="string" id="5608820">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="5608842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608848">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5608857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5608862">dec</span><span class="op" id="5608865">.</span><span class="ident" id="5608866">nextUint</span><span class="op" id="5608874">(</span><span class="op" id="5608875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5608879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5608882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5608885">return</span>&nbsp;<span class="op" id="5608892">-</span><span class="num" id="5608893">1</span><br>
<span class="lineno">165</span><span class="op" id="5608895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5608898">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="5608962">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5609022">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="5609078">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5609129">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="5609178">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5609231">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="5609253">func</span>&nbsp;<span class="op" id="5609258">(</span><span class="ident" id="5609259">dec</span>&nbsp;<span class="op" id="5609263">*</span><span class="ident" id="5609264">Decoder</span><span class="op" id="5609271">)</span>&nbsp;<span class="ident" id="5609273">Decode</span><span class="op" id="5609279">(</span><span class="ident" id="5609280">e</span>&nbsp;<span class="keyword" id="5609282">interface</span><span class="op" id="5609291">{</span><span class="op" id="5609292">}</span><span class="op" id="5609293">)</span>&nbsp;<span class="builtintype" id="5609295">error</span>&nbsp;<span class="op" id="5609301">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5609304">if</span>&nbsp;<span class="ident" id="5609307">e</span>&nbsp;<span class="op" id="5609309">==</span>&nbsp;<span class="builtintype" id="5609312">nil</span>&nbsp;<span class="op" id="5609316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5609320">return</span>&nbsp;<span class="ident" id="5609327">dec</span><span class="op" id="5609330">.</span><span class="ident" id="5609331">DecodeValue</span><span class="op" id="5609342">(</span><span class="ident" id="5609343">reflect</span><span class="op" id="5609350">.</span><span class="ident" id="5609351">Value</span><span class="op" id="5609356">{</span><span class="op" id="5609357">}</span><span class="op" id="5609358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5609361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5609364">value</span>&nbsp;<span class="op" id="5609370">:=</span>&nbsp;<span class="ident" id="5609373">reflect</span><span class="op" id="5609380">.</span><span class="ident" id="5609381">ValueOf</span><span class="op" id="5609388">(</span><span class="ident" id="5609389">e</span><span class="op" id="5609390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5609393">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5609463">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5609518">if</span>&nbsp;<span class="ident" id="5609521">value</span><span class="op" id="5609526">.</span><span class="ident" id="5609527">Type</span><span class="op" id="5609531">(</span><span class="op" id="5609532">)</span><span class="op" id="5609533">.</span><span class="ident" id="5609534">Kind</span><span class="op" id="5609538">(</span><span class="op" id="5609539">)</span>&nbsp;<span class="op" id="5609541">!=</span>&nbsp;<span class="ident" id="5609544">reflect</span><span class="op" id="5609551">.</span><span class="ident" id="5609552">Ptr</span>&nbsp;<span class="op" id="5609556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5609560">dec</span><span class="op" id="5609563">.</span><span class="ident" id="5609564">err</span>&nbsp;<span class="op" id="5609568">=</span>&nbsp;<span class="ident" id="5609570">errors</span><span class="op" id="5609576">.</span><span class="ident" id="5609577">New</span><span class="op" id="5609580">(</span><span class="string" id="5609581">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="5609624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5609628">return</span>&nbsp;<span class="ident" id="5609635">dec</span><span class="op" id="5609638">.</span><span class="ident" id="5609639">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5609644">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5609647">return</span>&nbsp;<span class="ident" id="5609654">dec</span><span class="op" id="5609657">.</span><span class="ident" id="5609658">DecodeValue</span><span class="op" id="5609669">(</span><span class="ident" id="5609670">value</span><span class="op" id="5609675">)</span><br>
<span class="lineno"></span><span class="op" id="5609677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5609680">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5609739">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="5609828">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="5609902">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="5609978">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5610036">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5610058">func</span>&nbsp;<span class="op" id="5610063">(</span><span class="ident" id="5610064">dec</span>&nbsp;<span class="op" id="5610068">*</span><span class="ident" id="5610069">Decoder</span><span class="op" id="5610076">)</span>&nbsp;<span class="ident" id="5610078">DecodeValue</span><span class="op" id="5610089">(</span><span class="ident" id="5610090">v</span>&nbsp;<span class="ident" id="5610092">reflect</span><span class="op" id="5610099">.</span><span class="ident" id="5610100">Value</span><span class="op" id="5610105">)</span>&nbsp;<span class="builtintype" id="5610107">error</span>&nbsp;<span class="op" id="5610113">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5610116">if</span>&nbsp;<span class="ident" id="5610119">v</span><span class="op" id="5610120">.</span><span class="ident" id="5610121">IsValid</span><span class="op" id="5610128">(</span><span class="op" id="5610129">)</span>&nbsp;<span class="op" id="5610131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5610135">if</span>&nbsp;<span class="ident" id="5610138">v</span><span class="op" id="5610139">.</span><span class="ident" id="5610140">Kind</span><span class="op" id="5610144">(</span><span class="op" id="5610145">)</span>&nbsp;<span class="op" id="5610147">==</span>&nbsp;<span class="ident" id="5610150">reflect</span><span class="op" id="5610157">.</span><span class="ident" id="5610158">Ptr</span>&nbsp;<span class="op" id="5610162">&amp;&amp;</span>&nbsp;<span class="op" id="5610165">!</span><span class="ident" id="5610166">v</span><span class="op" id="5610167">.</span><span class="ident" id="5610168">IsNil</span><span class="op" id="5610173">(</span><span class="op" id="5610174">)</span>&nbsp;<span class="op" id="5610176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610181">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610232">}</span>&nbsp;<span class="keyword" id="5610234">else</span>&nbsp;<span class="keyword" id="5610239">if</span>&nbsp;<span class="op" id="5610242">!</span><span class="ident" id="5610243">v</span><span class="op" id="5610244">.</span><span class="ident" id="5610245">CanSet</span><span class="op" id="5610251">(</span><span class="op" id="5610252">)</span>&nbsp;<span class="op" id="5610254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5610259">return</span>&nbsp;<span class="ident" id="5610266">errors</span><span class="op" id="5610272">.</span><span class="ident" id="5610273">New</span><span class="op" id="5610276">(</span><span class="string" id="5610277">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="5610317">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610327">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610377">dec</span><span class="op" id="5610380">.</span><span class="ident" id="5610381">mutex</span><span class="op" id="5610386">.</span><span class="ident" id="5610387">Lock</span><span class="op" id="5610391">(</span><span class="op" id="5610392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5610395">defer</span>&nbsp;<span class="ident" id="5610401">dec</span><span class="op" id="5610404">.</span><span class="ident" id="5610405">mutex</span><span class="op" id="5610410">.</span><span class="ident" id="5610411">Unlock</span><span class="op" id="5610417">(</span><span class="op" id="5610418">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610422">dec</span><span class="op" id="5610425">.</span><span class="ident" id="5610426">buf</span><span class="op" id="5610429">.</span><span class="ident" id="5610430">Reset</span><span class="op" id="5610435">(</span><span class="op" id="5610436">)</span>&nbsp;<span class="comment" id="5610438">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610489">dec</span><span class="op" id="5610492">.</span><span class="ident" id="5610493">err</span>&nbsp;<span class="op" id="5610497">=</span>&nbsp;<span class="builtintype" id="5610499">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610504">id</span>&nbsp;<span class="op" id="5610507">:=</span>&nbsp;<span class="ident" id="5610510">dec</span><span class="op" id="5610513">.</span><span class="ident" id="5610514">decodeTypeSequence</span><span class="op" id="5610532">(</span><span class="builtintype" id="5610533">false</span><span class="op" id="5610538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5610541">if</span>&nbsp;<span class="ident" id="5610544">dec</span><span class="op" id="5610547">.</span><span class="ident" id="5610548">err</span>&nbsp;<span class="op" id="5610552">==</span>&nbsp;<span class="builtintype" id="5610555">nil</span>&nbsp;<span class="op" id="5610559">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610563">dec</span><span class="op" id="5610566">.</span><span class="ident" id="5610567">decodeValue</span><span class="op" id="5610578">(</span><span class="ident" id="5610579">id</span><span class="op" id="5610581">,</span>&nbsp;<span class="ident" id="5610583">v</span><span class="op" id="5610584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5610590">return</span>&nbsp;<span class="ident" id="5610597">dec</span><span class="op" id="5610600">.</span><span class="ident" id="5610601">err</span><br>
<span class="lineno"></span><span class="op" id="5610605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="5610608">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="5610688">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5610773">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="5610797">var</span>&nbsp;<span class="ident" id="5610801">debugFunc</span>&nbsp;<span class="keyword" id="5610811">func</span><span class="op" id="5610815">(</span><span class="ident" id="5610816">io</span><span class="op" id="5610818">.</span><span class="ident" id="5610819">Reader</span><span class="op" id="5610825">)</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
