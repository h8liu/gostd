<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword">package</span>&nbsp;<span class="ident">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">import</span>&nbsp;<span class="op">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">T</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">X</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Y</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Z</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;-&#34;`</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">U</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Alphabet</span>&nbsp;<span class="builtintype">string</span>&nbsp;<span class="string">`json:&#34;alpha&#34;`</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">V</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">F1</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">F2</span>&nbsp;<span class="builtintype">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">F3</span>&nbsp;<span class="ident">Number</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;ifaceNumAsFloat64/ifaceNumAsNumber&nbsp;are&nbsp;used&nbsp;to&nbsp;test&nbsp;unmarshaling&nbsp;with&nbsp;and</span><br>
<span class="lineno">35</span><span class="comment">//&nbsp;without&nbsp;UseNumber</span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">ifaceNumAsFloat64</span>&nbsp;<span class="op">=</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k1&#34;</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k2&#34;</span><span class="op">:</span>&nbsp;<span class="string">&#34;s&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k3&#34;</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="builtintype">float64</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">2.0</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">3e-3</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k4&#34;</span><span class="op">:</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="string">&#34;kk1&#34;</span><span class="op">:</span>&nbsp;<span class="string">&#34;s&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;kk2&#34;</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">ifaceNumAsNumber</span>&nbsp;<span class="op">=</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k1&#34;</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;1&#34;</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k2&#34;</span><span class="op">:</span>&nbsp;<span class="string">&#34;s&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k3&#34;</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="ident">Number</span><span class="op">(</span><span class="string">&#34;1&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;2.0&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;3e-3&#34;</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;k4&#34;</span><span class="op">:</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="string">&#34;kk1&#34;</span><span class="op">:</span>&nbsp;<span class="string">&#34;s&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;kk2&#34;</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;2&#34;</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword">type</span>&nbsp;<span class="ident">tx</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">x</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;A&nbsp;type&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;itself.</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">unmarshaler</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">T</span>&nbsp;<span class="builtintype">bool</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword">func</span>&nbsp;<span class="op">(</span><span class="ident">u</span>&nbsp;<span class="op">*</span><span class="ident">unmarshaler</span><span class="op">)</span>&nbsp;<span class="ident">UnmarshalJSON</span><span class="op">(</span><span class="ident">b</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">)</span>&nbsp;<span class="builtintype">error</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">u</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">unmarshaler</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span>&nbsp;<span class="comment">//&nbsp;All&nbsp;we&nbsp;need&nbsp;to&nbsp;see&nbsp;that&nbsp;UnmarshalJSON&nbsp;is&nbsp;called.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">nil</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword">type</span>&nbsp;<span class="ident">ustruct</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">M</span>&nbsp;<span class="ident">unmarshaler</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">unmarshalerText</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">T</span>&nbsp;<span class="builtintype">bool</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;needed&nbsp;for&nbsp;re-marshaling&nbsp;tests</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="op">(</span><span class="ident">u</span>&nbsp;<span class="op">*</span><span class="ident">unmarshalerText</span><span class="op">)</span>&nbsp;<span class="ident">MarshalText</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">,</span>&nbsp;<span class="builtintype">error</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">&#34;&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="op">(</span><span class="ident">u</span>&nbsp;<span class="op">*</span><span class="ident">unmarshalerText</span><span class="op">)</span>&nbsp;<span class="ident">UnmarshalText</span><span class="op">(</span><span class="ident">b</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">)</span>&nbsp;<span class="builtintype">error</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">u</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">unmarshalerText</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span>&nbsp;<span class="comment">//&nbsp;All&nbsp;we&nbsp;need&nbsp;to&nbsp;see&nbsp;that&nbsp;UnmarshalText&nbsp;is&nbsp;called.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">nil</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="ident">encoding</span><span class="op">.</span><span class="ident">TextUnmarshaler</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">(</span><span class="op">*</span><span class="ident">unmarshalerText</span><span class="op">)</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword">type</span>&nbsp;<span class="ident">ustructText</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">M</span>&nbsp;<span class="ident">unmarshalerText</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="op">(</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">um0</span><span class="op">,</span>&nbsp;<span class="ident">um1</span>&nbsp;<span class="ident">unmarshaler</span>&nbsp;<span class="comment">//&nbsp;target2&nbsp;of&nbsp;unmarshaling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ump</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="op">&amp;</span><span class="ident">um1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umtrue</span>&nbsp;&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="ident">unmarshaler</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umslice</span>&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">unmarshaler</span><span class="op">{</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umslicep</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="ident">unmarshaler</span><span class="op">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umstruct</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">ustruct</span><span class="op">{</span><span class="ident">unmarshaler</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">um0T</span><span class="op">,</span>&nbsp;<span class="ident">um1T</span>&nbsp;<span class="ident">unmarshalerText</span>&nbsp;<span class="comment">//&nbsp;target2&nbsp;of&nbsp;unmarshaling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umpT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="op">&amp;</span><span class="ident">um1T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umtrueT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="ident">unmarshalerText</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umsliceT</span>&nbsp;&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">unmarshalerText</span><span class="op">{</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umslicepT</span>&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="ident">unmarshalerText</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">umstructT</span>&nbsp;&nbsp;<span class="op">=</span>&nbsp;<span class="ident">ustructText</span><span class="op">{</span><span class="ident">unmarshalerText</span><span class="op">{</span><span class="ident">true</span><span class="op">}</span><span class="op">}</span><br>
<span class="lineno"></span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment">//&nbsp;Test&nbsp;data&nbsp;structures&nbsp;for&nbsp;anonymous&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Point</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Z</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Top</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level0</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">Embed0a</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">Embed0b</span>&nbsp;<span class="string">`json:&#34;e,omitempty&#34;`</span>&nbsp;<span class="comment">//&nbsp;treated&nbsp;as&nbsp;named</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0c</span>&nbsp;&nbsp;<span class="string">`json:&#34;-&#34;`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0p</span>&nbsp;<span class="comment">//&nbsp;has&nbsp;Point&nbsp;with&nbsp;X,&nbsp;Y,&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0q</span>&nbsp;<span class="comment">//&nbsp;has&nbsp;Point&nbsp;with&nbsp;Z,&nbsp;used</span><br>
<span class="lineno">120</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Embed0</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1a</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="comment">//&nbsp;overridden&nbsp;by&nbsp;Embed0a&#39;s&nbsp;Level1a&nbsp;with&nbsp;json&nbsp;tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="comment">//&nbsp;used&nbsp;because&nbsp;Embed0a&#39;s&nbsp;Level1b&nbsp;is&nbsp;renamed</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1c</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="comment">//&nbsp;used&nbsp;because&nbsp;Embed0a&#39;s&nbsp;Level1c&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1d</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="comment">//&nbsp;annihilated&nbsp;by&nbsp;Embed0a&#39;s&nbsp;Level1d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1e</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;x&#34;`</span>&nbsp;<span class="comment">//&nbsp;annihilated&nbsp;by&nbsp;Embed0a.Level1e</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword">type</span>&nbsp;<span class="ident">Embed0a</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1a</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;Level1a,omitempty&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;LEVEL1B,omitempty&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1c</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;-&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1d</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="comment">//&nbsp;annihilated&nbsp;by&nbsp;Embed0&#39;s&nbsp;Level1d</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1f</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;x&#34;`</span>&nbsp;<span class="comment">//&nbsp;annihilated&nbsp;by&nbsp;Embed0&#39;s&nbsp;Level1e</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Embed0b</span>&nbsp;<span class="ident">Embed0</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword">type</span>&nbsp;<span class="ident">Embed0c</span>&nbsp;<span class="ident">Embed0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Embed0p</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">image</span><span class="op">.</span><span class="ident">Point</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Embed0q</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Point</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword">type</span>&nbsp;<span class="ident">Loop</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop1</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;,omitempty&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop2</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;,omitempty&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">Loop</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;From&nbsp;reflect&nbsp;test:</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;The&nbsp;X&nbsp;in&nbsp;S6&nbsp;and&nbsp;S7&nbsp;annihilate,&nbsp;but&nbsp;they&nbsp;also&nbsp;block&nbsp;the&nbsp;X&nbsp;in&nbsp;S8.S9.</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S5</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S6</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S8</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S6</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">X</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S7</span>&nbsp;<span class="ident">S6</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword">type</span>&nbsp;<span class="ident">S8</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S9</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S9</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">X</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Y</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;From&nbsp;reflect&nbsp;test:</span><br>
<span class="lineno">180</span><span class="comment">//&nbsp;The&nbsp;X&nbsp;in&nbsp;S11.S6&nbsp;and&nbsp;S12.S6&nbsp;annihilate,&nbsp;but&nbsp;they&nbsp;also&nbsp;block&nbsp;the&nbsp;X&nbsp;in&nbsp;S13.S8.S9.</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S10</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S13</span><br>
<span class="lineno">185</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S11</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S6</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">S12</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S6</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword">type</span>&nbsp;<span class="ident">S13</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S8</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">unmarshalTest</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">useNumber</span>&nbsp;<span class="builtintype">bool</span><br>
<span class="lineno">205</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Ambig</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Given&nbsp;&#34;hello&#34;,&nbsp;the&nbsp;first&nbsp;match&nbsp;should&nbsp;win.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">First</span>&nbsp;&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;HELLO&#34;`</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Second</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;Hello&#34;`</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">XYZ</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">X</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Y</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Z</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">unmarshalTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">unmarshalTest</span><span class="op">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;basic&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`true`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">bool</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`1`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`1.2`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">float64</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="num">1.2</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`-5`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int16</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="builtintype">int16</span><span class="op">(</span><span class="op">-</span><span class="num">5</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`2`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">Number</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;2&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">useNumber</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`2`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">Number</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;2&#34;</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`2`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">2.0</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`2`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;2&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">useNumber</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`&#34;a\u1234&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;a\u1234&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`&#34;http:\/\/&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;http://&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`&#34;g-clef:&nbsp;\uD834\uDD1E&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;g-clef:&nbsp;\U0001D11E&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`&#34;invalid:&nbsp;\uD834x\uDD1E&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;invalid:&nbsp;\uFFFDx\uFFFD&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;null&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;X&#34;:&nbsp;[1,2,3],&nbsp;&#34;Y&#34;:&nbsp;4}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">T</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">T</span><span class="op">{</span><span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="num">4</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">UnmarshalTypeError</span><span class="op">{</span><span class="string">&#34;array&#34;</span><span class="op">,</span>&nbsp;<span class="ident">reflect</span><span class="op">.</span><span class="ident">TypeOf</span><span class="op">(</span><span class="string">&#34;&#34;</span><span class="op">)</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;x&#34;:&nbsp;1}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">tx</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">tx</span><span class="op">{</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;F1&#34;:1,&#34;F2&#34;:2,&#34;F3&#34;:3}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">V</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">V</span><span class="op">{</span><span class="ident">F1</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">F2</span><span class="op">:</span>&nbsp;<span class="builtintype">int32</span><span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">F3</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;3&#34;</span><span class="op">)</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;F1&#34;:1,&#34;F2&#34;:2,&#34;F3&#34;:3}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">V</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">V</span><span class="op">{</span><span class="ident">F1</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;1&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">F2</span><span class="op">:</span>&nbsp;<span class="builtintype">int32</span><span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">F3</span><span class="op">:</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="string">&#34;3&#34;</span><span class="op">)</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="ident">useNumber</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;k1&#34;:1,&#34;k2&#34;:&#34;s&#34;,&#34;k3&#34;:[1,2.0,3e-3],&#34;k4&#34;:{&#34;kk1&#34;:&#34;s&#34;,&#34;kk2&#34;:2}}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">ifaceNumAsFloat64</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;k1&#34;:1,&#34;k2&#34;:&#34;s&#34;,&#34;k3&#34;:[1,2.0,3e-3],&#34;k4&#34;:{&#34;kk1&#34;:&#34;s&#34;,&#34;kk2&#34;:2}}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">ifaceNumAsNumber</span><span class="op">,</span>&nbsp;<span class="ident">useNumber</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;raw&nbsp;values&nbsp;with&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\n&nbsp;true&nbsp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">bool</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\t&nbsp;1&nbsp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\r&nbsp;1.2&nbsp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">float64</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="num">1.2</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\t&nbsp;-5&nbsp;\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int16</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="builtintype">int16</span><span class="op">(</span><span class="op">-</span><span class="num">5</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\t&nbsp;\&#34;a\\u1234\&#34;&nbsp;\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;a\u1234&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Z&nbsp;has&nbsp;a&nbsp;&#34;-&#34;&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;Y&#34;:&nbsp;1,&nbsp;&#34;Z&#34;:&nbsp;2}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">T</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">T</span><span class="op">{</span><span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;alpha&#34;:&nbsp;&#34;abc&#34;,&nbsp;&#34;alphabet&#34;:&nbsp;&#34;xyz&#34;}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">U</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">U</span><span class="op">{</span><span class="ident">Alphabet</span><span class="op">:</span>&nbsp;<span class="string">&#34;abc&#34;</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;alpha&#34;:&nbsp;&#34;abc&#34;}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">U</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">U</span><span class="op">{</span><span class="ident">Alphabet</span><span class="op">:</span>&nbsp;<span class="string">&#34;abc&#34;</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;alphabet&#34;:&nbsp;&#34;xyz&#34;}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">U</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">U</span><span class="op">{</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;syntax&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op">,</span>&nbsp;<span class="num">17</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[1,&nbsp;2,&nbsp;3+]`</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;+&#39;&nbsp;after&nbsp;array&nbsp;element&#34;</span><span class="op">,</span>&nbsp;<span class="num">9</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;X&#34;:12x}`</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;x&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op">,</span>&nbsp;<span class="num">8</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="ident">useNumber</span><span class="op">:</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;raw&nbsp;value&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\x01&nbsp;42&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;&nbsp;42&nbsp;\x01&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;after&nbsp;top-level&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">5</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\x01&nbsp;true&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;&nbsp;false&nbsp;\x01&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;after&nbsp;top-level&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">8</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\x01&nbsp;1.2&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;&nbsp;3.4&nbsp;\x01&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;after&nbsp;top-level&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">6</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;\x01&nbsp;\&#34;string\&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;&nbsp;\&#34;string\&#34;&nbsp;\x01&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">SyntaxError</span><span class="op">{</span><span class="string">&#34;invalid&nbsp;character&nbsp;&#39;\\x01&#39;&nbsp;after&nbsp;top-level&nbsp;value&#34;</span><span class="op">,</span>&nbsp;<span class="num">11</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;array&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[1,&nbsp;2,&nbsp;3]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="num">3</span><span class="op">]</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="num">3</span><span class="op">]</span><span class="builtintype">int</span><span class="op">{</span><span class="num">1</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[1,&nbsp;2,&nbsp;3]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="builtintype">int</span><span class="op">{</span><span class="num">1</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[1,&nbsp;2,&nbsp;3]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="num">5</span><span class="op">]</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="num">5</span><span class="op">]</span><span class="builtintype">int</span><span class="op">{</span><span class="num">1</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;empty&nbsp;array&nbsp;to&nbsp;interface&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;T&#34;:[]}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="string">&#34;T&#34;</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="op">}</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;T&#34;:null}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="string">&#34;T&#34;</span><span class="op">:</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;composite&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">allValueIndent</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">allValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">allValueCompact</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">allValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">allValueIndent</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">allValueCompact</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">pallValueIndent</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">pallValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">pallValueCompact</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">pallValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">pallValueIndent</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">pallValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="ident">pallValueCompact</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="ident">All</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">pallValue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;unmarshal&nbsp;interface&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;T&#34;:false}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">um0</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">umtrue</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;use&nbsp;&#34;false&#34;&nbsp;so&nbsp;test&nbsp;will&nbsp;fail&nbsp;if&nbsp;custom&nbsp;unmarshaler&nbsp;is&nbsp;not&nbsp;called</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;T&#34;:false}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">ump</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umtrue</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[{&#34;T&#34;:false}]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umslice</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">umslice</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[{&#34;T&#34;:false}]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umslicep</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umslice</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;M&#34;:{&#34;T&#34;:false}}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umstruct</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">umstruct</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;UnmarshalText&nbsp;interface&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`&#34;X&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">um0T</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">umtrueT</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;use&nbsp;&#34;false&#34;&nbsp;so&nbsp;test&nbsp;will&nbsp;fail&nbsp;if&nbsp;custom&nbsp;unmarshaler&nbsp;is&nbsp;not&nbsp;called</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`&#34;X&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umpT</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umtrueT</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[&#34;X&#34;]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umsliceT</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">umsliceT</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`[&#34;X&#34;]`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umslicepT</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umsliceT</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{&#34;M&#34;:&#34;X&#34;}`</span><span class="op">,</span>&nbsp;<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">umstructT</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">umstructT</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">`{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level0&#34;:&nbsp;1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1b&#34;:&nbsp;2,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1c&#34;:&nbsp;3,<br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;:&nbsp;4,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1a&#34;:&nbsp;5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;LEVEL1B&#34;:&nbsp;6,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;e&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1a&#34;:&nbsp;8,<br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1b&#34;:&nbsp;9,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1c&#34;:&nbsp;10,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Level1d&#34;:&nbsp;11,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;:&nbsp;12<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Loop1&#34;:&nbsp;13,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Loop2&#34;:&nbsp;14,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;X&#34;:&nbsp;15,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Y&#34;:&nbsp;16,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Z&#34;:&nbsp;17<br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">Top</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">Top</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level0</span><span class="op">:</span>&nbsp;<span class="num">1</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0</span><span class="op">:</span>&nbsp;<span class="ident">Embed0</span><span class="op">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span><span class="op">:</span>&nbsp;<span class="num">2</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1c</span><span class="op">:</span>&nbsp;<span class="num">3</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0a</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">Embed0a</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1a</span><span class="op">:</span>&nbsp;<span class="num">5</span><span class="op">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span><span class="op">:</span>&nbsp;<span class="num">6</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0b</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">Embed0b</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1a</span><span class="op">:</span>&nbsp;<span class="num">8</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span><span class="op">:</span>&nbsp;<span class="num">9</span><span class="op">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1c</span><span class="op">:</span>&nbsp;<span class="num">10</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1d</span><span class="op">:</span>&nbsp;<span class="num">11</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1e</span><span class="op">:</span>&nbsp;<span class="num">12</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop</span><span class="op">:</span>&nbsp;<span class="ident">Loop</span><span class="op">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop1</span><span class="op">:</span>&nbsp;<span class="num">13</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop2</span><span class="op">:</span>&nbsp;<span class="num">14</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0p</span><span class="op">:</span>&nbsp;<span class="ident">Embed0p</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Point</span><span class="op">:</span>&nbsp;<span class="ident">image</span><span class="op">.</span><span class="ident">Point</span><span class="op">{</span><span class="ident">X</span><span class="op">:</span>&nbsp;<span class="num">15</span><span class="op">,</span>&nbsp;<span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="num">16</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0q</span><span class="op">:</span>&nbsp;<span class="ident">Embed0q</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Point</span><span class="op">:</span>&nbsp;<span class="ident">Point</span><span class="op">{</span><span class="ident">Z</span><span class="op">:</span>&nbsp;<span class="num">17</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">`{&#34;hello&#34;:&nbsp;1}`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">Ambig</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">Ambig</span><span class="op">{</span><span class="ident">First</span><span class="op">:</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">`{&#34;X&#34;:&nbsp;1,&#34;Y&#34;:2}`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">S5</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">S5</span><span class="op">{</span><span class="ident">S8</span><span class="op">:</span>&nbsp;<span class="ident">S8</span><span class="op">{</span><span class="ident">S9</span><span class="op">:</span>&nbsp;<span class="ident">S9</span><span class="op">{</span><span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="num">2</span><span class="op">}</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">`{&#34;X&#34;:&nbsp;1,&#34;Y&#34;:2}`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">S10</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">S10</span><span class="op">{</span><span class="ident">S13</span><span class="op">:</span>&nbsp;<span class="ident">S13</span><span class="op">{</span><span class="ident">S8</span><span class="op">:</span>&nbsp;<span class="ident">S8</span><span class="op">{</span><span class="ident">S9</span><span class="op">:</span>&nbsp;<span class="ident">S9</span><span class="op">{</span><span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="num">2</span><span class="op">}</span><span class="op">}</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;invalid&nbsp;UTF-8&nbsp;is&nbsp;coerced&nbsp;to&nbsp;valid&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\xffworld\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\xc2\xc2world\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffd\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\xc2\xffworld\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffd\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\\ud800world\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\\ud800\\ud800world\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffd\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\\ud800\\ud800world\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffd\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;\&#34;hello\xed\xa0\x80\xed\xb0\x80world\&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="string">&#34;hello\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdworld&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;issue&nbsp;8305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">`{&#34;2009-11-10T23:00:00Z&#34;:&nbsp;&#34;hello&nbsp;world&#34;}`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="keyword">map</span><span class="op">[</span><span class="ident">time</span><span class="op">.</span><span class="ident">Time</span><span class="op">]</span><span class="builtintype">string</span><span class="op">{</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">UnmarshalTypeError</span><span class="op">{</span><span class="string">&#34;object&#34;</span><span class="op">,</span>&nbsp;<span class="ident">reflect</span><span class="op">.</span><span class="ident">TypeOf</span><span class="op">(</span><span class="keyword">map</span><span class="op">[</span><span class="ident">time</span><span class="op">.</span><span class="ident">Time</span><span class="op">]</span><span class="builtintype">string</span><span class="op">{</span><span class="op">}</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestMarshal</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">allValue</span><span class="op">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;allValue:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">allValueCompact</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;allValueCompact&#34;</span><span class="op">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">diff</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">allValueCompact</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">pallValue</span><span class="op">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;pallValue:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">pallValueCompact</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;pallValueCompact&#34;</span><span class="op">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">diff</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">pallValueCompact</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword">var</span>&nbsp;<span class="ident">badUTF8</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">out</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;hello\xffworld&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;hello\ufffdworld&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\xff&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;\ufffd&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\xff\xff&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;\ufffd\ufffd&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;a\xffb&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;a\ufffdb&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\xe6\x97\xa5\xe6\x9c\xac\xff\xaa\x9e&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;日本\ufffd\ufffd\ufffd&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestMarshalBadUTF8</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">badUTF8</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">out</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Marshal(%q)&nbsp;=&nbsp;%#q,&nbsp;%v,&nbsp;want&nbsp;%#q,&nbsp;nil&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">out</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span><span class="keyword">func</span>&nbsp;<span class="ident">TestMarshalNumberZeroVal</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">n</span>&nbsp;<span class="ident">Number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">n</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatal</span><span class="op">(</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">outStr</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">out</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">outStr</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#34;0&#34;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Invalid&nbsp;zero&nbsp;val&nbsp;for&nbsp;Number:&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">outStr</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">470</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestMarshalEmbeds</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">top</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">Top</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level0</span><span class="op">:</span>&nbsp;<span class="num">1</span><span class="op">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0</span><span class="op">:</span>&nbsp;<span class="ident">Embed0</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span><span class="op">:</span>&nbsp;<span class="num">2</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1c</span><span class="op">:</span>&nbsp;<span class="num">3</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0a</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">Embed0a</span><span class="op">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1a</span><span class="op">:</span>&nbsp;<span class="num">5</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span><span class="op">:</span>&nbsp;<span class="num">6</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0b</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">Embed0b</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1a</span><span class="op">:</span>&nbsp;<span class="num">8</span><span class="op">,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1b</span><span class="op">:</span>&nbsp;<span class="num">9</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1c</span><span class="op">:</span>&nbsp;<span class="num">10</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1d</span><span class="op">:</span>&nbsp;<span class="num">11</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Level1e</span><span class="op">:</span>&nbsp;<span class="num">12</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop</span><span class="op">:</span>&nbsp;<span class="ident">Loop</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop1</span><span class="op">:</span>&nbsp;<span class="num">13</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Loop2</span><span class="op">:</span>&nbsp;<span class="num">14</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0p</span><span class="op">:</span>&nbsp;<span class="ident">Embed0p</span><span class="op">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Point</span><span class="op">:</span>&nbsp;<span class="ident">image</span><span class="op">.</span><span class="ident">Point</span><span class="op">{</span><span class="ident">X</span><span class="op">:</span>&nbsp;<span class="num">15</span><span class="op">,</span>&nbsp;<span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="num">16</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Embed0q</span><span class="op">:</span>&nbsp;<span class="ident">Embed0q</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Point</span><span class="op">:</span>&nbsp;<span class="ident">Point</span><span class="op">{</span><span class="ident">Z</span><span class="op">:</span>&nbsp;<span class="num">17</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">top</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatal</span><span class="op">(</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">want</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;{\&#34;Level0\&#34;:1,\&#34;Level1b\&#34;:2,\&#34;Level1c\&#34;:3,\&#34;Level1a\&#34;:5,\&#34;LEVEL1B\&#34;:6,\&#34;e\&#34;:{\&#34;Level1a\&#34;:8,\&#34;Level1b\&#34;:9,\&#34;Level1c\&#34;:10,\&#34;Level1d\&#34;:11,\&#34;x\&#34;:12},\&#34;Loop1\&#34;:13,\&#34;Loop2\&#34;:14,\&#34;X\&#34;:15,\&#34;Y\&#34;:16,\&#34;Z\&#34;:17}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">want</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Wrong&nbsp;marshal&nbsp;result.\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshal</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">unmarshalTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">scan</span>&nbsp;<span class="ident">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">checkValid</span><span class="op">(</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">scan</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">err</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">err</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;#%d:&nbsp;checkValid:&nbsp;%#v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;v&nbsp;=&nbsp;new(right-type)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">v</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">reflect</span><span class="op">.</span><span class="ident">New</span><span class="op">(</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">TypeOf</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span><span class="op">)</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">dec</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">NewDecoder</span><span class="op">(</span><span class="ident">bytes</span><span class="op">.</span><span class="ident">NewReader</span><span class="op">(</span><span class="ident">in</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">useNumber</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">dec</span><span class="op">.</span><span class="ident">UseNumber</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">dec</span><span class="op">.</span><span class="ident">Decode</span><span class="op">(</span><span class="ident">v</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">err</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">err</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;#%d:&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">v</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">out</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;#%d:&nbsp;mismatch\nhave:&nbsp;%#+v\nwant:&nbsp;%#+v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">v</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">out</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">data</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">v</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc">println</span><span class="op">(</span><span class="builtintype">string</span><span class="op">(</span><span class="ident">data</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">data</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">out</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc">println</span><span class="op">(</span><span class="builtintype">string</span><span class="op">(</span><span class="ident">data</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Check&nbsp;round&nbsp;trip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">enc</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">v</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;#%d:&nbsp;error&nbsp;re-marshaling:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">vv</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">reflect</span><span class="op">.</span><span class="ident">New</span><span class="op">(</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">TypeOf</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span><span class="op">)</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">dec</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">NewDecoder</span><span class="op">(</span><span class="ident">bytes</span><span class="op">.</span><span class="ident">NewReader</span><span class="op">(</span><span class="ident">enc</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">useNumber</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">dec</span><span class="op">.</span><span class="ident">UseNumber</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">dec</span><span class="op">.</span><span class="ident">Decode</span><span class="op">(</span><span class="ident">vv</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;#%d:&nbsp;error&nbsp;re-unmarshaling&nbsp;%#q:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">enc</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">v</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">vv</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;#%d:&nbsp;mismatch\nhave:&nbsp;%#+v\nwant:&nbsp;%#+v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">v</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">vv</span><span class="op">.</span><span class="ident">Elem</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="ident">Interface</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In:&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">strings</span><span class="op">.</span><span class="ident">Map</span><span class="op">(</span><span class="ident">noSpace</span><span class="op">,</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">in</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Marshal:&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">strings</span><span class="op">.</span><span class="ident">Map</span><span class="op">(</span><span class="ident">noSpace</span><span class="op">,</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">enc</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">570</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalMarshal</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">initBig</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">v</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="ident">jsonBig</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">v</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">v</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Marshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">bytes</span><span class="op">.</span><span class="ident">Equal</span><span class="op">(</span><span class="ident">jsonBig</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;jsonBig&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">diff</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">jsonBig</span><span class="op">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">numberTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">intErr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">f</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">floatErr</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">595</span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;-1.23e1&#34;</span><span class="op">,</span>&nbsp;<span class="ident">intErr</span><span class="op">:</span>&nbsp;<span class="string">&#34;strconv.ParseInt:&nbsp;parsing&nbsp;\&#34;-1.23e1\&#34;:&nbsp;invalid&nbsp;syntax&#34;</span><span class="op">,</span>&nbsp;<span class="ident">f</span><span class="op">:</span>&nbsp;<span class="op">-</span><span class="num">1.23e1</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;-12&#34;</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">:</span>&nbsp;<span class="op">-</span><span class="num">12</span><span class="op">,</span>&nbsp;<span class="ident">f</span><span class="op">:</span>&nbsp;<span class="op">-</span><span class="num">12.0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">in</span><span class="op">:</span>&nbsp;<span class="string">&#34;1e1000&#34;</span><span class="op">,</span>&nbsp;<span class="ident">intErr</span><span class="op">:</span>&nbsp;<span class="string">&#34;strconv.ParseInt:&nbsp;parsing&nbsp;\&#34;1e1000\&#34;:&nbsp;invalid&nbsp;syntax&#34;</span><span class="op">,</span>&nbsp;<span class="ident">floatErr</span><span class="op">:</span>&nbsp;<span class="string">&#34;strconv.ParseFloat:&nbsp;parsing&nbsp;\&#34;1e1000\&#34;:&nbsp;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">600</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Independent&nbsp;of&nbsp;Decode,&nbsp;basic&nbsp;coverage&nbsp;of&nbsp;the&nbsp;accessors&nbsp;in&nbsp;Number</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestNumberAccessors</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">numberTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">n</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Number</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">n</span><span class="op">.</span><span class="ident">String</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Number(%q).String()&nbsp;is&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">i</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">n</span><span class="op">.</span><span class="ident">Int64</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">intErr</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#34;&#34;</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">i</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Number(%q).Int64()&nbsp;is&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">i</span><span class="op">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;<span class="op">(</span><span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">intErr</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">)</span>&nbsp;<span class="op">||</span>&nbsp;<span class="op">(</span><span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">err</span><span class="op">.</span><span class="ident">Error</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">intErr</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Number(%q).Int64()&nbsp;wanted&nbsp;error&nbsp;%q&nbsp;but&nbsp;got:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">intErr</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">f</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">n</span><span class="op">.</span><span class="ident">Float64</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">floatErr</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#34;&#34;</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">f</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">f</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Number(%q).Float64()&nbsp;is&nbsp;%g&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">f</span><span class="op">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;<span class="op">(</span><span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">floatErr</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">)</span>&nbsp;<span class="op">||</span>&nbsp;<span class="op">(</span><span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">err</span><span class="op">.</span><span class="ident">Error</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">floatErr</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Number(%q).Float64()&nbsp;wanted&nbsp;error&nbsp;%q&nbsp;but&nbsp;got:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">floatErr</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestLargeByteSlice</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s0</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtinfunc">make</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">,</span>&nbsp;<span class="num">2000</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">s0</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s0</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtintype">byte</span><span class="op">(</span><span class="ident">i</span><span class="op">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">s0</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Marshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s1</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="ident">b</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">s1</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">bytes</span><span class="op">.</span><span class="ident">Equal</span><span class="op">(</span><span class="ident">s0</span><span class="op">,</span>&nbsp;<span class="ident">s1</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;large&nbsp;byte&nbsp;slice&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">diff</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">s0</span><span class="op">,</span>&nbsp;<span class="ident">s1</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">640</span><span class="keyword">type</span>&nbsp;<span class="ident">Xint</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">X</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalInterface</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">xint</span>&nbsp;<span class="ident">Xint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">&amp;</span><span class="ident">xint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`{&#34;X&#34;:1}`</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">i</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">xint</span><span class="op">.</span><span class="ident">X</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">1</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Did&nbsp;not&nbsp;write&nbsp;to&nbsp;xint&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">655</span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalPtrPtr</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">xint</span>&nbsp;<span class="ident">Xint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pxint</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">xint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`{&#34;X&#34;:1}`</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">pxint</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">xint</span><span class="op">.</span><span class="ident">X</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">1</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Did&nbsp;not&nbsp;write&nbsp;to&nbsp;xint&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">665</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestEscape</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">const</span>&nbsp;<span class="ident">input</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">`&#34;foobar&#34;&lt;html&gt;`</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">&#34;&nbsp;[\u2028&nbsp;\u2029]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">const</span>&nbsp;<span class="ident">expected</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">`&#34;\&#34;foobar\&#34;\u003chtml\u003e&nbsp;[\u2028&nbsp;\u2029]&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">input</span><span class="op">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Marshal&nbsp;error:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">expected</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Encoding&nbsp;of&nbsp;[%s]:\n&nbsp;got&nbsp;[%s]\nwant&nbsp;[%s]&#34;</span><span class="op">,</span>&nbsp;<span class="ident">input</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">,</span>&nbsp;<span class="ident">expected</span><span class="op">)</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;WrongString&nbsp;is&nbsp;a&nbsp;struct&nbsp;that&#39;s&nbsp;misusing&nbsp;the&nbsp;,string&nbsp;modifier.</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">WrongString</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Message</span>&nbsp;<span class="builtintype">string</span>&nbsp;<span class="string">`json:&#34;result,string&#34;`</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">wrongStringTest</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">685</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">wrongStringTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">wrongStringTest</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`{&#34;result&#34;:&#34;x&#34;}`</span><span class="op">,</span>&nbsp;<span class="string">`json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;&#34;x&#34;&nbsp;into&nbsp;string`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`{&#34;result&#34;:&#34;foo&#34;}`</span><span class="op">,</span>&nbsp;<span class="string">`json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;&#34;foo&#34;&nbsp;into&nbsp;string`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`{&#34;result&#34;:&#34;123&#34;}`</span><span class="op">,</span>&nbsp;<span class="string">`json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;&#34;123&#34;&nbsp;into&nbsp;string`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;If&nbsp;people&nbsp;misuse&nbsp;the&nbsp;,string&nbsp;modifier,&nbsp;the&nbsp;error&nbsp;message&nbsp;should&nbsp;be</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;helpful,&nbsp;telling&nbsp;the&nbsp;user&nbsp;that&nbsp;they&#39;re&nbsp;doing&nbsp;it&nbsp;wrong.</span><br>
<span class="lineno">695</span><span class="keyword">func</span>&nbsp;<span class="ident">TestErrorMessageFromMisusedString</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">n</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">wrongStringTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">r</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">strings</span><span class="op">.</span><span class="ident">NewReader</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">WrongString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">NewDecoder</span><span class="op">(</span><span class="ident">r</span><span class="op">)</span><span class="op">.</span><span class="ident">Decode</span><span class="op">(</span><span class="op">&amp;</span><span class="ident">s</span><span class="op">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">got</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fmt</span><span class="op">.</span><span class="ident">Sprintf</span><span class="op">(</span><span class="string">&#34;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">got</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">err</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;%d.&nbsp;got&nbsp;err&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">n</span><span class="op">,</span>&nbsp;<span class="ident">got</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">705</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">noSpace</span><span class="op">(</span><span class="ident">c</span>&nbsp;<span class="builtintype">rune</span><span class="op">)</span>&nbsp;<span class="builtintype">rune</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">isSpace</span><span class="op">(</span><span class="ident">c</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="op">-</span><span class="num">1</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">c</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">All</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Bool</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int16</span>&nbsp;&nbsp;&nbsp;<span class="builtintype">int16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int32</span>&nbsp;&nbsp;&nbsp;<span class="builtintype">int32</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int64</span>&nbsp;&nbsp;&nbsp;<span class="ident">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint8</span>&nbsp;&nbsp;&nbsp;<span class="builtintype">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint16</span>&nbsp;&nbsp;<span class="builtintype">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint32</span>&nbsp;&nbsp;<span class="builtintype">uint32</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint64</span>&nbsp;&nbsp;<span class="ident">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uintptr</span>&nbsp;<span class="builtintype">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Float32</span>&nbsp;<span class="builtintype">float32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Float64</span>&nbsp;<span class="builtintype">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Foo</span>&nbsp;&nbsp;<span class="builtintype">string</span>&nbsp;<span class="string">`json:&#34;bar&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Foo2</span>&nbsp;<span class="builtintype">string</span>&nbsp;<span class="string">`json:&#34;bar2,dummyopt&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">IntStr</span>&nbsp;<span class="ident">int64</span>&nbsp;<span class="string">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PBool</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt8</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt16</span>&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">int16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt32</span>&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">int32</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt64</span>&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="ident">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint8</span>&nbsp;&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint16</span>&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint32</span>&nbsp;&nbsp;<span class="op">*</span><span class="builtintype">uint32</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint64</span>&nbsp;&nbsp;<span class="op">*</span><span class="ident">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUintptr</span>&nbsp;<span class="op">*</span><span class="builtintype">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PFloat32</span>&nbsp;<span class="op">*</span><span class="builtintype">float32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PFloat64</span>&nbsp;<span class="op">*</span><span class="builtintype">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">String</span>&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PString</span>&nbsp;<span class="op">*</span><span class="builtintype">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Map</span>&nbsp;&nbsp;&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">MapP</span>&nbsp;&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="op">*</span><span class="ident">Small</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PMap</span>&nbsp;&nbsp;<span class="op">*</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PMapP</span>&nbsp;<span class="op">*</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="op">*</span><span class="ident">Small</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">EmptyMap</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">NilMap</span>&nbsp;&nbsp;&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno">760</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Slice</span>&nbsp;&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">SliceP</span>&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PSlice</span>&nbsp;&nbsp;<span class="op">*</span><span class="op">[</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PSliceP</span>&nbsp;<span class="op">*</span><span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">Small</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">EmptySlice</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">NilSlice</span>&nbsp;&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">Small</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">StringSlice</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">string</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ByteSlice</span>&nbsp;&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Small</span>&nbsp;&nbsp;&nbsp;<span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PSmall</span>&nbsp;&nbsp;<span class="op">*</span><span class="ident">Small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PPSmall</span>&nbsp;<span class="op">*</span><span class="op">*</span><span class="ident">Small</span><br>
<span class="lineno">775</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Interface</span>&nbsp;&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInterface</span>&nbsp;<span class="op">*</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">unexported</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno">780</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Small</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Tag</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">allValue</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">All</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Bool</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident">true</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">2</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int8</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">3</span><span class="op">,</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int16</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">4</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int32</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">5</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int64</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">6</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">7</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint8</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">8</span><span class="op">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint16</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">9</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint32</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">10</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint64</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">11</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uintptr</span><span class="op">:</span>&nbsp;<span class="num">12</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Float32</span><span class="op">:</span>&nbsp;<span class="num">14.1</span><span class="op">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Float64</span><span class="op">:</span>&nbsp;<span class="num">15.1</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Foo</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">&#34;foo&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Foo2</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">&#34;foo2&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">IntStr</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">42</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">String</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;16&#34;</span><span class="op">,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Map</span><span class="op">:</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="ident">Small</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;17&#34;</span><span class="op">:</span>&nbsp;<span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag17&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;18&#34;</span><span class="op">:</span>&nbsp;<span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag18&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">MapP</span><span class="op">:</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="op">*</span><span class="ident">Small</span><span class="op">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;19&#34;</span><span class="op">:</span>&nbsp;<span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag19&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;20&#34;</span><span class="op">:</span>&nbsp;<span class="ident">nil</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">EmptyMap</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="ident">Small</span><span class="op">{</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Slice</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">Small</span><span class="op">{</span><span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag20&#34;</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag21&#34;</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">SliceP</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="op">*</span><span class="ident">Small</span><span class="op">{</span><span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag22&#34;</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag23&#34;</span><span class="op">}</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">EmptySlice</span><span class="op">:</span>&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">Small</span><span class="op">{</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">StringSlice</span><span class="op">:</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">string</span><span class="op">{</span><span class="string">&#34;str24&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;str25&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;str26&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ByteSlice</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">{</span><span class="num">27</span><span class="op">,</span>&nbsp;<span class="num">28</span><span class="op">,</span>&nbsp;<span class="num">29</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Small</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident">Small</span><span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag30&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PSmall</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">Small</span><span class="op">{</span><span class="ident">Tag</span><span class="op">:</span>&nbsp;<span class="string">&#34;tag31&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Interface</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">5.2</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">pallValue</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">All</span><span class="op">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PBool</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Bool</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Int</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt8</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Int8</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt16</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Int16</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt32</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Int32</span><span class="op">,</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInt64</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Int64</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Uint</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint8</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Uint8</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint16</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Uint16</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint32</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Uint32</span><span class="op">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUint64</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Uint64</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PUintptr</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Uintptr</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PFloat32</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Float32</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PFloat64</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Float64</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PString</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">String</span><span class="op">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PMap</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Map</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PMapP</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">MapP</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PSlice</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Slice</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PSliceP</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">SliceP</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PPSmall</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">PSmall</span><span class="op">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PInterface</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">allValue</span><span class="op">.</span><span class="ident">Interface</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">allValueIndent</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">`{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Bool&#34;:&nbsp;true,<br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int&#34;:&nbsp;2,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int8&#34;:&nbsp;3,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int16&#34;:&nbsp;4,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int32&#34;:&nbsp;5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int64&#34;:&nbsp;6,<br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint&#34;:&nbsp;7,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint8&#34;:&nbsp;8,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint16&#34;:&nbsp;9,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint32&#34;:&nbsp;10,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint64&#34;:&nbsp;11,<br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uintptr&#34;:&nbsp;12,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Float32&#34;:&nbsp;14.1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Float64&#34;:&nbsp;15.1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;bar&#34;:&nbsp;&#34;foo&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;bar2&#34;:&nbsp;&#34;foo2&#34;,<br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;IntStr&#34;:&nbsp;&#34;42&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PBool&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt8&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt16&#34;:&nbsp;null,<br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt32&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt64&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint8&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint16&#34;:&nbsp;null,<br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint32&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint64&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUintptr&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PFloat32&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PFloat64&#34;:&nbsp;null,<br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;String&#34;:&nbsp;&#34;16&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PString&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Map&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;17&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag17&#34;<br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;18&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag18&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;MapP&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;19&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag19&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;20&#34;:&nbsp;null<br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PMap&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PMapP&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;EmptyMap&#34;:&nbsp;{},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;NilMap&#34;:&nbsp;null,<br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Slice&#34;:&nbsp;[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag20&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag21&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp],<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;SliceP&#34;:&nbsp;[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag22&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag23&#34;<br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp],<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PSlice&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PSliceP&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;EmptySlice&#34;:&nbsp;[],<br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;NilSlice&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;StringSlice&#34;:&nbsp;[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;str24&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;str25&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;str26&#34;<br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp],<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;ByteSlice&#34;:&nbsp;&#34;Gxwd&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Small&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag30&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PSmall&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag31&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PPSmall&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Interface&#34;:&nbsp;5.2,<br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInterface&#34;:&nbsp;null<br>
<span class="lineno"></span>}`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">allValueCompact</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">strings</span><span class="op">.</span><span class="ident">Map</span><span class="op">(</span><span class="ident">noSpace</span><span class="op">,</span>&nbsp;<span class="ident">allValueIndent</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">940</span><span class="keyword">var</span>&nbsp;<span class="ident">pallValueIndent</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">`{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Bool&#34;:&nbsp;false,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int8&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int16&#34;:&nbsp;0,<br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int32&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Int64&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint8&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint16&#34;:&nbsp;0,<br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint32&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint64&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Uintptr&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Float32&#34;:&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Float64&#34;:&nbsp;0,<br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;bar&#34;:&nbsp;&#34;&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;bar2&#34;:&nbsp;&#34;&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;IntStr&#34;:&nbsp;&#34;0&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PBool&#34;:&nbsp;true,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt&#34;:&nbsp;2,<br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt8&#34;:&nbsp;3,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt16&#34;:&nbsp;4,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt32&#34;:&nbsp;5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInt64&#34;:&nbsp;6,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint&#34;:&nbsp;7,<br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint8&#34;:&nbsp;8,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint16&#34;:&nbsp;9,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint32&#34;:&nbsp;10,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUint64&#34;:&nbsp;11,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PUintptr&#34;:&nbsp;12,<br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PFloat32&#34;:&nbsp;14.1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PFloat64&#34;:&nbsp;15.1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;String&#34;:&nbsp;&#34;&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PString&#34;:&nbsp;&#34;16&#34;,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Map&#34;:&nbsp;null,<br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;MapP&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PMap&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;17&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag17&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;18&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag18&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PMapP&#34;:&nbsp;{<br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;19&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag19&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;20&#34;:&nbsp;null<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;EmptyMap&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;NilMap&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Slice&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;SliceP&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PSlice&#34;:&nbsp;[<br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag20&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag21&#34;<br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp],<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PSliceP&#34;:&nbsp;[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag22&#34;<br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag23&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp],<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;EmptySlice&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;NilSlice&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;StringSlice&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;ByteSlice&#34;:&nbsp;null,<br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Small&#34;:&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PSmall&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PPSmall&#34;:&nbsp;{<br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Tag&#34;:&nbsp;&#34;tag31&#34;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp},<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;Interface&#34;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;PInterface&#34;:&nbsp;5.2<br>
<span class="lineno"></span>}`</span><br>
<span class="lineno">1025</span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">pallValueCompact</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">strings</span><span class="op">.</span><span class="ident">Map</span><span class="op">(</span><span class="ident">noSpace</span><span class="op">,</span>&nbsp;<span class="ident">pallValueIndent</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestRefUnmarshal</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">type</span>&nbsp;<span class="ident">S</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Ref&nbsp;is&nbsp;defined&nbsp;in&nbsp;encode_test.go.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R0</span>&nbsp;<span class="ident">Ref</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R1</span>&nbsp;<span class="op">*</span><span class="ident">Ref</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R2</span>&nbsp;<span class="ident">RefText</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R3</span>&nbsp;<span class="op">*</span><span class="ident">RefText</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">want</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">S</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R0</span><span class="op">:</span>&nbsp;<span class="num">12</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R1</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">Ref</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R2</span><span class="op">:</span>&nbsp;<span class="num">13</span><span class="op">,</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">R3</span><span class="op">:</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="ident">RefText</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">want</span><span class="op">.</span><span class="ident">R1</span>&nbsp;<span class="op">=</span>&nbsp;<span class="num">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">want</span><span class="op">.</span><span class="ident">R3</span>&nbsp;<span class="op">=</span>&nbsp;<span class="num">13</span><br>
<span class="lineno"></span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">got</span>&nbsp;<span class="ident">S</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`{&#34;R0&#34;:&#34;ref&#34;,&#34;R1&#34;:&#34;ref&#34;,&#34;R2&#34;:&#34;ref&#34;,&#34;R3&#34;:&#34;ref&#34;}`</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">got</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">got</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">got</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;empty&nbsp;string&nbsp;doesn&#39;t&nbsp;panic&nbsp;decoding&nbsp;when&nbsp;,string&nbsp;is&nbsp;specified</span><br>
<span class="lineno">1055</span><span class="comment">//&nbsp;Issue&nbsp;3450</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestEmptyString</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">type</span>&nbsp;<span class="ident">T2</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Number1</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Number2</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;,string&#34;`</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">data</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">`{&#34;Number1&#34;:&#34;1&#34;,&nbsp;&#34;Number2&#34;:&#34;&#34;}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">dec</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">NewDecoder</span><span class="op">(</span><span class="ident">strings</span><span class="op">.</span><span class="ident">NewReader</span><span class="op">(</span><span class="ident">data</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">t2</span>&nbsp;<span class="ident">T2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">dec</span><span class="op">.</span><span class="ident">Decode</span><span class="op">(</span><span class="op">&amp;</span><span class="ident">t2</span><span class="op">)</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatal</span><span class="op">(</span><span class="string">&#34;Decode:&nbsp;did&nbsp;not&nbsp;return&nbsp;error&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">t2</span><span class="op">.</span><span class="ident">Number1</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">1</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatal</span><span class="op">(</span><span class="string">&#34;Decode:&nbsp;did&nbsp;not&nbsp;set&nbsp;Number1&#34;</span><span class="op">)</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;null&nbsp;for&nbsp;,string&nbsp;is&nbsp;not&nbsp;replaced&nbsp;with&nbsp;the&nbsp;previous&nbsp;quoted&nbsp;string&nbsp;(issue&nbsp;7046).</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;It&nbsp;should&nbsp;also&nbsp;not&nbsp;be&nbsp;an&nbsp;error&nbsp;(issue&nbsp;2540,&nbsp;issue&nbsp;8587).</span><br>
<span class="lineno">1075</span><span class="keyword">func</span>&nbsp;<span class="ident">TestNullString</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">type</span>&nbsp;<span class="ident">T</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">A</span>&nbsp;<span class="builtintype">int</span>&nbsp;&nbsp;<span class="string">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">B</span>&nbsp;<span class="builtintype">int</span>&nbsp;&nbsp;<span class="string">`json:&#34;,string&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">C</span>&nbsp;<span class="op">*</span><span class="builtintype">int</span>&nbsp;<span class="string">`json:&#34;,string&#34;`</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">data</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`{&#34;A&#34;:&nbsp;&#34;1&#34;,&nbsp;&#34;B&#34;:&nbsp;null,&nbsp;&#34;C&#34;:&nbsp;null}`</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">B</span>&nbsp;<span class="op">=</span>&nbsp;<span class="num">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">C</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int</span><span class="op">)</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">s</span><span class="op">.</span><span class="ident">C</span>&nbsp;<span class="op">=</span>&nbsp;<span class="num">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="ident">data</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">s</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">B</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">1</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">C</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;after&nbsp;Unmarshal,&nbsp;s.B=%d,&nbsp;s.C=%p,&nbsp;want&nbsp;1,&nbsp;nil&#34;</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">B</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">C</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="keyword">func</span>&nbsp;<span class="ident">intp</span><span class="op">(</span><span class="ident">x</span>&nbsp;<span class="builtintype">int</span><span class="op">)</span>&nbsp;<span class="op">*</span><span class="builtintype">int</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">p</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">p</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">p</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">intpp</span><span class="op">(</span><span class="ident">x</span>&nbsp;<span class="op">*</span><span class="builtintype">int</span><span class="op">)</span>&nbsp;<span class="op">*</span><span class="op">*</span><span class="builtintype">int</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pp</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="builtintype">int</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">pp</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">pp</span><br>
<span class="lineno">1105</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">interfaceSetTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pre</span>&nbsp;&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">json</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">post</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;foo&#34;</span><span class="op">,</span>&nbsp;<span class="string">`&#34;bar&#34;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;bar&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;foo&#34;</span><span class="op">,</span>&nbsp;<span class="string">`2`</span><span class="op">,</span>&nbsp;<span class="num">2.0</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;foo&#34;</span><span class="op">,</span>&nbsp;<span class="string">`true`</span><span class="op">,</span>&nbsp;<span class="ident">true</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;foo&#34;</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="op">(</span><span class="op">*</span><span class="builtintype">int</span><span class="op">)</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="builtintype">int</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="builtinfunc">new</span><span class="op">(</span><span class="op">*</span><span class="builtintype">int</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="op">(</span><span class="op">*</span><span class="op">*</span><span class="builtintype">int</span><span class="op">)</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">intp</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">intpp</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">intpp</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">intpp</span><span class="op">(</span><span class="ident">intp</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`null`</span><span class="op">,</span>&nbsp;<span class="ident">intpp</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">1125</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestInterfaceSet</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">interfaceSetTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">struct</span><span class="op">{</span>&nbsp;<span class="ident">X</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span>&nbsp;<span class="op">}</span><span class="op">{</span><span class="ident">tt</span><span class="op">.</span><span class="ident">pre</span><span class="op">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">blob</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">`{&#34;X&#34;:`</span>&nbsp;<span class="op">+</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">json</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">`}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">blob</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">b</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal&nbsp;%#q:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">blob</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">b</span><span class="op">.</span><span class="ident">X</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">post</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal&nbsp;%#q&nbsp;into&nbsp;%#v:&nbsp;X=%#v,&nbsp;want&nbsp;%#v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">blob</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">pre</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">.</span><span class="ident">X</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">post</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">1140</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;JSON&nbsp;null&nbsp;values&nbsp;should&nbsp;be&nbsp;ignored&nbsp;for&nbsp;primitives&nbsp;and&nbsp;string&nbsp;values&nbsp;instead&nbsp;of&nbsp;resulting&nbsp;in&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Issue&nbsp;2540</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalNulls</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">jsonData</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`{<br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Bool&#34;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Int&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Int8&#34;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Int16&#34;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Int32&#34;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Int64&#34;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint&#34;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint8&#34;&nbsp;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint16&#34;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint32&#34;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Uint64&#34;&nbsp;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Float32&#34;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;Float64&#34;&nbsp;:&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;String&#34;&nbsp;&nbsp;:&nbsp;null}`</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nulls</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">All</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Bool</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident">true</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">2</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int8</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">3</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int16</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">4</span><span class="op">,</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int32</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">5</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Int64</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">6</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">7</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint8</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">8</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint16</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">9</span><span class="op">,</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint32</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">10</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Uint64</span><span class="op">:</span>&nbsp;&nbsp;<span class="num">11</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Float32</span><span class="op">:</span>&nbsp;<span class="num">12.1</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Float64</span><span class="op">:</span>&nbsp;<span class="num">13.1</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">String</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">&#34;14&#34;</span><span class="op">}</span><br>
<span class="lineno">1175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="ident">jsonData</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">nulls</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal&nbsp;of&nbsp;null&nbsp;values&nbsp;failed:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">nulls</span><span class="op">.</span><span class="ident">Bool</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Int</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">2</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Int8</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">3</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Int16</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">4</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Int32</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">5</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Int64</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">6</span>&nbsp;<span class="op">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nulls</span><span class="op">.</span><span class="ident">Uint</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">7</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Uint8</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">8</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Uint16</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">9</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Uint32</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">10</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Uint64</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">11</span>&nbsp;<span class="op">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">nulls</span><span class="op">.</span><span class="ident">Float32</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">12.1</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">Float64</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">13.1</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">nulls</span><span class="op">.</span><span class="ident">String</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#34;14&#34;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal&nbsp;of&nbsp;null&nbsp;values&nbsp;affected&nbsp;primitives&#34;</span><span class="op">)</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestStringKind</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">type</span>&nbsp;<span class="ident">stringKind</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">1190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">m1</span><span class="op">,</span>&nbsp;<span class="ident">m2</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="ident">stringKind</span><span class="op">]</span><span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">m1</span>&nbsp;<span class="op">=</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="ident">stringKind</span><span class="op">]</span><span class="builtintype">int</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&#34;</span><span class="op">:</span>&nbsp;<span class="num">42</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">data</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Marshal</span><span class="op">(</span><span class="ident">m1</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unexpected&nbsp;error&nbsp;marshalling:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="ident">data</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">m2</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unexpected&nbsp;error&nbsp;unmarshalling:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">m1</span><span class="op">,</span>&nbsp;<span class="ident">m2</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Error</span><span class="op">(</span><span class="string">&#34;Items&nbsp;should&nbsp;be&nbsp;equal&nbsp;after&nbsp;encoding&nbsp;and&nbsp;then&nbsp;decoding&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1210</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">decodeTypeErrorTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">dest</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src</span>&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">1215</span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">string</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`{&#34;user&#34;:&nbsp;&#34;name&#34;}`</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;issue&nbsp;4628.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">error</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`{}`</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;issue&nbsp;4222</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">error</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`[]`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">error</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`&#34;&#34;`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">error</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`123`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="builtinfunc">new</span><span class="op">(</span><span class="builtintype">error</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">`true`</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalTypeError</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">item</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">decodeTypeErrorTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">item</span><span class="op">.</span><span class="ident">src</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">item</span><span class="op">.</span><span class="ident">dest</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">ok</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">err</span><span class="op">.</span><span class="op">(</span><span class="op">*</span><span class="ident">UnmarshalTypeError</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="op">!</span><span class="ident">ok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;expected&nbsp;type&nbsp;error&nbsp;for&nbsp;Unmarshal(%q,&nbsp;type&nbsp;%T):&nbsp;got&nbsp;%T&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">item</span><span class="op">.</span><span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">item</span><span class="op">.</span><span class="ident">dest</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">unmarshalSyntaxTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">string</span><span class="op">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;tru&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;fals&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;nul&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;123e&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">`&#34;hello`</span><span class="op">,</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">`[1,2,3`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">`{&#34;key&#34;:1`</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">`{&#34;key&#34;:1,`</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1245</span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalSyntax</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">x</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">src</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">unmarshalSyntaxTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">x</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">ok</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">err</span><span class="op">.</span><span class="op">(</span><span class="op">*</span><span class="ident">SyntaxError</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="op">!</span><span class="ident">ok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;expected&nbsp;syntax&nbsp;error&nbsp;for&nbsp;Unmarshal(%q):&nbsp;got&nbsp;%T&#34;</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1255</span><span class="comment">//&nbsp;Test&nbsp;handling&nbsp;of&nbsp;unexported&nbsp;fields&nbsp;that&nbsp;should&nbsp;be&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Issue&nbsp;4660</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">unexportedFields</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Name</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">m</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span>&nbsp;<span class="string">`json:&#34;-&#34;`</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">m2</span>&nbsp;&nbsp;&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span>&nbsp;<span class="string">`json:&#34;abcd&#34;`</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalUnexported</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">input</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">`{&#34;Name&#34;:&nbsp;&#34;Bob&#34;,&nbsp;&#34;m&#34;:&nbsp;{&#34;x&#34;:&nbsp;123},&nbsp;&#34;m2&#34;:&nbsp;{&#34;y&#34;:&nbsp;456},&nbsp;&#34;abcd&#34;:&nbsp;{&#34;z&#34;:&nbsp;789}}`</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">want</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">unexportedFields</span><span class="op">{</span><span class="ident">Name</span><span class="op">:</span>&nbsp;<span class="string">&#34;Bob&#34;</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">&amp;</span><span class="ident">unexportedFields</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">input</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;got&nbsp;error&nbsp;%v,&nbsp;expected&nbsp;nil&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">out</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">out</span><span class="op">,</span>&nbsp;<span class="ident">want</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1275</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Time3339&nbsp;is&nbsp;a&nbsp;time.Time&nbsp;which&nbsp;encodes&nbsp;to&nbsp;and&nbsp;from&nbsp;JSON</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;as&nbsp;an&nbsp;RFC&nbsp;3339&nbsp;time&nbsp;in&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">Time3339</span>&nbsp;<span class="ident">time</span><span class="op">.</span><span class="ident">Time</span><br>
<span class="lineno">1280</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">Time3339</span><span class="op">)</span>&nbsp;<span class="ident">UnmarshalJSON</span><span class="op">(</span><span class="ident">b</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">)</span>&nbsp;<span class="builtintype">error</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span>&nbsp;<span class="op">&lt;</span>&nbsp;<span class="num">2</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">b</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#39;&#34;&#39;</span>&nbsp;<span class="op">||</span>&nbsp;<span class="ident">b</span><span class="op">[</span><span class="builtinfunc">len</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span><span class="op">-</span><span class="num">1</span><span class="op">]</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#39;&#34;&#39;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">fmt</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;types:&nbsp;failed&nbsp;to&nbsp;unmarshal&nbsp;non-string&nbsp;value&nbsp;%q&nbsp;as&nbsp;an&nbsp;RFC&nbsp;3339&nbsp;time&#34;</span><span class="op">,</span>&nbsp;<span class="ident">b</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">tm</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">time</span><span class="op">.</span><span class="ident">Parse</span><span class="op">(</span><span class="ident">time</span><span class="op">.</span><span class="ident">RFC3339</span><span class="op">,</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">b</span><span class="op">[</span><span class="num">1</span><span class="op">:</span><span class="builtinfunc">len</span><span class="op">(</span><span class="ident">b</span><span class="op">)</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">*</span><span class="ident">t</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">Time3339</span><span class="op">(</span><span class="ident">tm</span><span class="op">)</span><br>
<span class="lineno">1290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">nil</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestUnmarshalJSONLiteralError</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">t3</span>&nbsp;<span class="ident">Time3339</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`&#34;0000-00-00T00:00:00Z&#34;`</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">t3</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Fatalf</span><span class="op">(</span><span class="string">&#34;expected&nbsp;error;&nbsp;got&nbsp;time&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">time</span><span class="op">.</span><span class="ident">Time</span><span class="op">(</span><span class="ident">t3</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">strings</span><span class="op">.</span><span class="ident">Contains</span><span class="op">(</span><span class="ident">err</span><span class="op">.</span><span class="ident">Error</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">&#34;range&#34;</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;got&nbsp;err&nbsp;=&nbsp;%v;&nbsp;want&nbsp;out&nbsp;of&nbsp;range&nbsp;error&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Test&nbsp;that&nbsp;extra&nbsp;object&nbsp;elements&nbsp;in&nbsp;an&nbsp;array&nbsp;do&nbsp;not&nbsp;result&nbsp;in&nbsp;a</span><br>
<span class="lineno">1305</span><span class="comment">//&nbsp;&#34;data&nbsp;changing&nbsp;underfoot&#34;&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Issue&nbsp;3717</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestSkipArrayObjects</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">json</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">`[{}]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">dest</span>&nbsp;<span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno">1310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">json</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">&amp;</span><span class="ident">dest</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;got&nbsp;error&nbsp;%q,&nbsp;want&nbsp;nil&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1315</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Test&nbsp;semantics&nbsp;of&nbsp;pre-filled&nbsp;struct&nbsp;fields&nbsp;and&nbsp;pre-filled&nbsp;map&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Issue&nbsp;4900.</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestPrefilled</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptrToMap</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">func</span><span class="op">(</span><span class="ident">m</span>&nbsp;<span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">)</span>&nbsp;<span class="op">*</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span>&nbsp;<span class="op">{</span>&nbsp;<span class="keyword">return</span>&nbsp;<span class="op">&amp;</span><span class="ident">m</span>&nbsp;<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Values&nbsp;here&nbsp;change,&nbsp;cannot&nbsp;reuse&nbsp;table&nbsp;across&nbsp;runs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">prefillTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span>&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span>&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">`{&#34;X&#34;:&nbsp;1,&nbsp;&#34;Y&#34;:&nbsp;2}`</span><span class="op">,</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">XYZ</span><span class="op">{</span><span class="ident">X</span><span class="op">:</span>&nbsp;<span class="builtintype">float32</span><span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="builtintype">int16</span><span class="op">(</span><span class="num">4</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">Z</span><span class="op">:</span>&nbsp;<span class="num">1.5</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="op">&amp;</span><span class="ident">XYZ</span><span class="op">{</span><span class="ident">X</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">Y</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">Z</span><span class="op">:</span>&nbsp;<span class="num">1.5</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">in</span><span class="op">:</span>&nbsp;&nbsp;<span class="string">`{&#34;X&#34;:&nbsp;1,&nbsp;&#34;Y&#34;:&nbsp;2}`</span><span class="op">,</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptr</span><span class="op">:</span>&nbsp;<span class="ident">ptrToMap</span><span class="op">(</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="string">&#34;X&#34;</span><span class="op">:</span>&nbsp;<span class="builtintype">float32</span><span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">&#34;Y&#34;</span><span class="op">:</span>&nbsp;<span class="builtintype">int16</span><span class="op">(</span><span class="num">4</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">&#34;Z&#34;</span><span class="op">:</span>&nbsp;<span class="num">1.5</span><span class="op">}</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">out</span><span class="op">:</span>&nbsp;<span class="ident">ptrToMap</span><span class="op">(</span><span class="keyword">map</span><span class="op">[</span><span class="builtintype">string</span><span class="op">]</span><span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="string">&#34;X&#34;</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">1</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">&#34;Y&#34;</span><span class="op">:</span>&nbsp;<span class="builtintype">float64</span><span class="op">(</span><span class="num">2</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">&#34;Z&#34;</span><span class="op">:</span>&nbsp;<span class="num">1.5</span><span class="op">}</span><span class="op">)</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">prefillTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">ptrstr</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fmt</span><span class="op">.</span><span class="ident">Sprintf</span><span class="op">(</span><span class="string">&#34;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span><span class="op">)</span>&nbsp;<span class="comment">//&nbsp;tt.ptr&nbsp;edited&nbsp;here</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal:&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="op">!</span><span class="ident">reflect</span><span class="op">.</span><span class="ident">DeepEqual</span><span class="op">(</span><span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">out</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal(%#q,&nbsp;%s):&nbsp;have&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">in</span><span class="op">,</span>&nbsp;<span class="ident">ptrstr</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">ptr</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">out</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">1350</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">invalidUnmarshalTests</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">v</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">interface</span><span class="op">{</span><span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">want</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">1355</span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="string">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="keyword">struct</span><span class="op">{</span><span class="op">}</span><span class="op">{</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="string">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;struct&nbsp;{})&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="op">(</span><span class="op">*</span><span class="builtintype">int</span><span class="op">)</span><span class="op">(</span><span class="ident">nil</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="string">&#34;json:&nbsp;Unmarshal(nil&nbsp;*int)&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">1360</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestInvalidUnmarshal</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">buf</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="string">`{&#34;a&#34;:&#34;1&#34;}`</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">invalidUnmarshalTests</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">Unmarshal</span><span class="op">(</span><span class="ident">buf</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">v</span><span class="op">)</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal&nbsp;expecting&nbsp;error,&nbsp;got&nbsp;nil&#34;</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">got</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">err</span><span class="op">.</span><span class="ident">Error</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">got</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">want</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;Unmarshal&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">got</span><span class="op">,</span>&nbsp;<span class="ident">tt</span><span class="op">.</span><span class="ident">want</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span>
</div>
</body>
</html>
