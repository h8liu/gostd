<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io</h2>
<ul>
<li><a href="/gostd/io/io.go.html">io.go</a></li>
<li><a href="/gostd/io/io_test.go.html">io_test.go</a></li>
<li><a href="/gostd/io/multi.go.html">multi.go</a></li>
<li><a href="/gostd/io/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/io/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/io/pipe_test.go.html">pipe_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1588639">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1588694">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1588748">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1588799">//&nbsp;Package&nbsp;io&nbsp;provides&nbsp;basic&nbsp;interfaces&nbsp;to&nbsp;I/O&nbsp;primitives.</span><br>
<span class="lineno"></span><span class="comment" id="1588858">//&nbsp;Its&nbsp;primary&nbsp;job&nbsp;is&nbsp;to&nbsp;wrap&nbsp;existing&nbsp;implementations&nbsp;of&nbsp;such&nbsp;primitives,</span><br>
<span class="lineno"></span><span class="comment" id="1588933">//&nbsp;such&nbsp;as&nbsp;those&nbsp;in&nbsp;package&nbsp;os,&nbsp;into&nbsp;shared&nbsp;public&nbsp;interfaces&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1589000">//&nbsp;abstract&nbsp;the&nbsp;functionality,&nbsp;plus&nbsp;some&nbsp;other&nbsp;related&nbsp;primitives.</span><br>
<span class="lineno"></span><span class="comment" id="1589067">//</span><br>
<span class="lineno">10</span><span class="comment" id="1589070">//&nbsp;Because&nbsp;these&nbsp;interfaces&nbsp;and&nbsp;primitives&nbsp;wrap&nbsp;lower-level&nbsp;operations&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1589146">//&nbsp;various&nbsp;implementations,&nbsp;unless&nbsp;otherwise&nbsp;informed&nbsp;clients&nbsp;should&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1589219">//&nbsp;assume&nbsp;they&nbsp;are&nbsp;safe&nbsp;for&nbsp;parallel&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="1589267">package</span>&nbsp;<span class="ident" id="1589275">io</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1589279">import</span>&nbsp;<span class="op" id="1589286">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1589289">&#34;errors&#34;</span><br>
<span class="lineno"></span><span class="op" id="1589298">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1589301">//&nbsp;ErrShortWrite&nbsp;means&nbsp;that&nbsp;a&nbsp;write&nbsp;accepted&nbsp;fewer&nbsp;bytes&nbsp;than&nbsp;requested</span><br>
<span class="lineno">20</span><span class="comment" id="1589373">//&nbsp;but&nbsp;failed&nbsp;to&nbsp;return&nbsp;an&nbsp;explicit&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="1589416">var</span>&nbsp;<span class="ident" id="1589420">ErrShortWrite</span>&nbsp;<span class="op" id="1589434">=</span>&nbsp;<span class="ident" id="1589436">errors</span><span class="op" id="1589442">.</span><span class="ident" id="1589443">New</span><span class="op" id="1589446">(</span><span class="string" id="1589447">&#34;short&nbsp;write&#34;</span><span class="op" id="1589460">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1589463">//&nbsp;ErrShortBuffer&nbsp;means&nbsp;that&nbsp;a&nbsp;read&nbsp;required&nbsp;a&nbsp;longer&nbsp;buffer&nbsp;than&nbsp;was&nbsp;provided.</span><br>
<span class="lineno"></span><span class="keyword" id="1589543">var</span>&nbsp;<span class="ident" id="1589547">ErrShortBuffer</span>&nbsp;<span class="op" id="1589562">=</span>&nbsp;<span class="ident" id="1589564">errors</span><span class="op" id="1589570">.</span><span class="ident" id="1589571">New</span><span class="op" id="1589574">(</span><span class="string" id="1589575">&#34;short&nbsp;buffer&#34;</span><span class="op" id="1589589">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1589592">//&nbsp;EOF&nbsp;is&nbsp;the&nbsp;error&nbsp;returned&nbsp;by&nbsp;Read&nbsp;when&nbsp;no&nbsp;more&nbsp;input&nbsp;is&nbsp;available.</span><br>
<span class="lineno"></span><span class="comment" id="1589662">//&nbsp;Functions&nbsp;should&nbsp;return&nbsp;EOF&nbsp;only&nbsp;to&nbsp;signal&nbsp;a&nbsp;graceful&nbsp;end&nbsp;of&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1589733">//&nbsp;If&nbsp;the&nbsp;EOF&nbsp;occurs&nbsp;unexpectedly&nbsp;in&nbsp;a&nbsp;structured&nbsp;data&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="1589796">//&nbsp;the&nbsp;appropriate&nbsp;error&nbsp;is&nbsp;either&nbsp;ErrUnexpectedEOF&nbsp;or&nbsp;some&nbsp;other&nbsp;error</span><br>
<span class="lineno">30</span><span class="comment" id="1589868">//&nbsp;giving&nbsp;more&nbsp;detail.</span><br>
<span class="lineno"></span><span class="keyword" id="1589891">var</span>&nbsp;<span class="ident" id="1589895">EOF</span>&nbsp;<span class="op" id="1589899">=</span>&nbsp;<span class="ident" id="1589901">errors</span><span class="op" id="1589907">.</span><span class="ident" id="1589908">New</span><span class="op" id="1589911">(</span><span class="string" id="1589912">&#34;EOF&#34;</span><span class="op" id="1589917">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1589920">//&nbsp;ErrUnexpectedEOF&nbsp;means&nbsp;that&nbsp;EOF&nbsp;was&nbsp;encountered&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1589978">//&nbsp;middle&nbsp;of&nbsp;reading&nbsp;a&nbsp;fixed-size&nbsp;block&nbsp;or&nbsp;data&nbsp;structure.</span><br>
<span class="lineno">35</span><span class="keyword" id="1590037">var</span>&nbsp;<span class="ident" id="1590041">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="1590058">=</span>&nbsp;<span class="ident" id="1590060">errors</span><span class="op" id="1590066">.</span><span class="ident" id="1590067">New</span><span class="op" id="1590070">(</span><span class="string" id="1590071">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="1590087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1590090">//&nbsp;ErrNoProgress&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;clients&nbsp;of&nbsp;an&nbsp;io.Reader&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="1590156">//&nbsp;many&nbsp;calls&nbsp;to&nbsp;Read&nbsp;have&nbsp;failed&nbsp;to&nbsp;return&nbsp;any&nbsp;data&nbsp;or&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="1590219">//&nbsp;usually&nbsp;the&nbsp;sign&nbsp;of&nbsp;a&nbsp;broken&nbsp;io.Reader&nbsp;implementation.</span><br>
<span class="lineno">40</span><span class="keyword" id="1590277">var</span>&nbsp;<span class="ident" id="1590281">ErrNoProgress</span>&nbsp;<span class="op" id="1590295">=</span>&nbsp;<span class="ident" id="1590297">errors</span><span class="op" id="1590303">.</span><span class="ident" id="1590304">New</span><span class="op" id="1590307">(</span><span class="string" id="1590308">&#34;multiple&nbsp;Read&nbsp;calls&nbsp;return&nbsp;no&nbsp;data&nbsp;or&nbsp;error&#34;</span><span class="op" id="1590353">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1590356">//&nbsp;Reader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1590417">//</span><br>
<span class="lineno"></span><span class="comment" id="1590420">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(p)&nbsp;bytes&nbsp;into&nbsp;p.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">45</span><span class="comment" id="1590493">//&nbsp;read&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered.&nbsp;&nbsp;Even&nbsp;if&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="1590561">//&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;may&nbsp;use&nbsp;all&nbsp;of&nbsp;p&nbsp;as&nbsp;scratch&nbsp;space&nbsp;during&nbsp;the&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1590638">//&nbsp;If&nbsp;some&nbsp;data&nbsp;is&nbsp;available&nbsp;but&nbsp;not&nbsp;len(p)&nbsp;bytes,&nbsp;Read&nbsp;conventionally</span><br>
<span class="lineno"></span><span class="comment" id="1590709">//&nbsp;returns&nbsp;what&nbsp;is&nbsp;available&nbsp;instead&nbsp;of&nbsp;waiting&nbsp;for&nbsp;more.</span><br>
<span class="lineno"></span><span class="comment" id="1590767">//</span><br>
<span class="lineno">50</span><span class="comment" id="1590770">//&nbsp;When&nbsp;Read&nbsp;encounters&nbsp;an&nbsp;error&nbsp;or&nbsp;end-of-file&nbsp;condition&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="1590834">//&nbsp;successfully&nbsp;reading&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;bytes,&nbsp;it&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1590896">//&nbsp;bytes&nbsp;read.&nbsp;&nbsp;It&nbsp;may&nbsp;return&nbsp;the&nbsp;(non-nil)&nbsp;error&nbsp;from&nbsp;the&nbsp;same&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="1590965">//&nbsp;or&nbsp;return&nbsp;the&nbsp;error&nbsp;(and&nbsp;n&nbsp;==&nbsp;0)&nbsp;from&nbsp;a&nbsp;subsequent&nbsp;call.</span><br>
<span class="lineno"></span><span class="comment" id="1591025">//&nbsp;An&nbsp;instance&nbsp;of&nbsp;this&nbsp;general&nbsp;case&nbsp;is&nbsp;that&nbsp;a&nbsp;Reader&nbsp;returning</span><br>
<span class="lineno">55</span><span class="comment" id="1591088">//&nbsp;a&nbsp;non-zero&nbsp;number&nbsp;of&nbsp;bytes&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input&nbsp;stream&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="1591153">//&nbsp;return&nbsp;either&nbsp;err&nbsp;==&nbsp;EOF&nbsp;or&nbsp;err&nbsp;==&nbsp;nil.&nbsp;&nbsp;The&nbsp;next&nbsp;Read&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="1591218">//&nbsp;return&nbsp;0,&nbsp;EOF&nbsp;regardless.</span><br>
<span class="lineno"></span><span class="comment" id="1591247">//</span><br>
<span class="lineno"></span><span class="comment" id="1591250">//&nbsp;Callers&nbsp;should&nbsp;always&nbsp;process&nbsp;the&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;bytes&nbsp;returned&nbsp;before</span><br>
<span class="lineno">60</span><span class="comment" id="1591315">//&nbsp;considering&nbsp;the&nbsp;error&nbsp;err.&nbsp;&nbsp;Doing&nbsp;so&nbsp;correctly&nbsp;handles&nbsp;I/O&nbsp;errors</span><br>
<span class="lineno"></span><span class="comment" id="1591384">//&nbsp;that&nbsp;happen&nbsp;after&nbsp;reading&nbsp;some&nbsp;bytes&nbsp;and&nbsp;also&nbsp;both&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1591445">//&nbsp;allowed&nbsp;EOF&nbsp;behaviors.</span><br>
<span class="lineno"></span><span class="comment" id="1591471">//</span><br>
<span class="lineno"></span><span class="comment" id="1591474">//&nbsp;Implementations&nbsp;of&nbsp;Read&nbsp;are&nbsp;discouraged&nbsp;from&nbsp;returning&nbsp;a</span><br>
<span class="lineno">65</span><span class="comment" id="1591534">//&nbsp;zero&nbsp;byte&nbsp;count&nbsp;with&nbsp;a&nbsp;nil&nbsp;error,&nbsp;except&nbsp;when&nbsp;len(p)&nbsp;==&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="1591596">//&nbsp;Callers&nbsp;should&nbsp;treat&nbsp;a&nbsp;return&nbsp;of&nbsp;0&nbsp;and&nbsp;nil&nbsp;as&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1591661">//&nbsp;nothing&nbsp;happened;&nbsp;in&nbsp;particular&nbsp;it&nbsp;does&nbsp;not&nbsp;indicate&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="1591722">//</span><br>
<span class="lineno"></span><span class="comment" id="1591725">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno">70</span><span class="keyword" id="1591763">type</span>&nbsp;<span class="ident" id="1591768">Reader</span>&nbsp;<span class="keyword" id="1591775">interface</span>&nbsp;<span class="op" id="1591785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591788">Read</span><span class="op" id="1591792">(</span><span class="ident" id="1591793">p</span>&nbsp;<span class="op" id="1591795">[</span><span class="op" id="1591796">]</span><span class="builtintype" id="1591797">byte</span><span class="op" id="1591801">)</span>&nbsp;<span class="op" id="1591803">(</span><span class="ident" id="1591804">n</span>&nbsp;<span class="builtintype" id="1591806">int</span><span class="op" id="1591809">,</span>&nbsp;<span class="ident" id="1591811">err</span>&nbsp;<span class="builtintype" id="1591815">error</span><span class="op" id="1591820">)</span><br>
<span class="lineno"></span><span class="op" id="1591822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1591825">//&nbsp;Writer&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">75</span><span class="comment" id="1591887">//</span><br>
<span class="lineno"></span><span class="comment" id="1591890">//&nbsp;Write&nbsp;writes&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="1591957">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;from&nbsp;p&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))</span><br>
<span class="lineno"></span><span class="comment" id="1592025">//&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered&nbsp;that&nbsp;caused&nbsp;the&nbsp;write&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span><span class="comment" id="1592091">//&nbsp;Write&nbsp;must&nbsp;return&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;if&nbsp;it&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p).</span><br>
<span class="lineno">80</span><span class="comment" id="1592154">//&nbsp;Write&nbsp;must&nbsp;not&nbsp;modify&nbsp;the&nbsp;slice&nbsp;data,&nbsp;even&nbsp;temporarily.</span><br>
<span class="lineno"></span><span class="comment" id="1592213">//</span><br>
<span class="lineno"></span><span class="comment" id="1592216">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1592254">type</span>&nbsp;<span class="ident" id="1592259">Writer</span>&nbsp;<span class="keyword" id="1592266">interface</span>&nbsp;<span class="op" id="1592276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592279">Write</span><span class="op" id="1592284">(</span><span class="ident" id="1592285">p</span>&nbsp;<span class="op" id="1592287">[</span><span class="op" id="1592288">]</span><span class="builtintype" id="1592289">byte</span><span class="op" id="1592293">)</span>&nbsp;<span class="op" id="1592295">(</span><span class="ident" id="1592296">n</span>&nbsp;<span class="builtintype" id="1592298">int</span><span class="op" id="1592301">,</span>&nbsp;<span class="ident" id="1592303">err</span>&nbsp;<span class="builtintype" id="1592307">error</span><span class="op" id="1592312">)</span><br>
<span class="lineno">85</span><span class="op" id="1592314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1592317">//&nbsp;Closer&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Close&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1592379">//</span><br>
<span class="lineno"></span><span class="comment" id="1592382">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Close&nbsp;after&nbsp;the&nbsp;first&nbsp;call&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">90</span><span class="comment" id="1592442">//&nbsp;Specific&nbsp;implementations&nbsp;may&nbsp;document&nbsp;their&nbsp;own&nbsp;behavior.</span><br>
<span class="lineno"></span><span class="keyword" id="1592503">type</span>&nbsp;<span class="ident" id="1592508">Closer</span>&nbsp;<span class="keyword" id="1592515">interface</span>&nbsp;<span class="op" id="1592525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592528">Close</span><span class="op" id="1592533">(</span><span class="op" id="1592534">)</span>&nbsp;<span class="builtintype" id="1592536">error</span><br>
<span class="lineno"></span><span class="op" id="1592542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="1592545">//&nbsp;Seeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;Seek&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1592606">//</span><br>
<span class="lineno"></span><span class="comment" id="1592609">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;to&nbsp;offset,</span><br>
<span class="lineno"></span><span class="comment" id="1592671">//&nbsp;interpreted&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1592741">//&nbsp;the&nbsp;file,&nbsp;1&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means</span><br>
<span class="lineno">100</span><span class="comment" id="1592806">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.&nbsp;&nbsp;Seek&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1592876">//&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="1592884">//</span><br>
<span class="lineno"></span><span class="comment" id="1592887">//&nbsp;Seeking&nbsp;to&nbsp;a&nbsp;negative&nbsp;offset&nbsp;is&nbsp;an&nbsp;error.&nbsp;Seeking&nbsp;to&nbsp;any&nbsp;positive</span><br>
<span class="lineno"></span><span class="comment" id="1592956">//&nbsp;offset&nbsp;is&nbsp;legal,&nbsp;but&nbsp;the&nbsp;behavior&nbsp;of&nbsp;subsequent&nbsp;I/O&nbsp;operations&nbsp;on</span><br>
<span class="lineno">105</span><span class="comment" id="1593025">//&nbsp;the&nbsp;underlying&nbsp;object&nbsp;is&nbsp;implementation-dependent.</span><br>
<span class="lineno"></span><span class="keyword" id="1593079">type</span>&nbsp;<span class="ident" id="1593084">Seeker</span>&nbsp;<span class="keyword" id="1593091">interface</span>&nbsp;<span class="op" id="1593101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593104">Seek</span><span class="op" id="1593108">(</span><span class="ident" id="1593109">offset</span>&nbsp;<span class="ident" id="1593116">int64</span><span class="op" id="1593121">,</span>&nbsp;<span class="ident" id="1593123">whence</span>&nbsp;<span class="builtintype" id="1593130">int</span><span class="op" id="1593133">)</span>&nbsp;<span class="op" id="1593135">(</span><span class="ident" id="1593136">int64</span><span class="op" id="1593141">,</span>&nbsp;<span class="builtintype" id="1593143">error</span><span class="op" id="1593148">)</span><br>
<span class="lineno"></span><span class="op" id="1593150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="1593153">//&nbsp;ReadWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Write&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1593230">type</span>&nbsp;<span class="ident" id="1593235">ReadWriter</span>&nbsp;<span class="keyword" id="1593246">interface</span>&nbsp;<span class="op" id="1593256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593259">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593267">Writer</span><br>
<span class="lineno"></span><span class="op" id="1593274">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="1593277">//&nbsp;ReadCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1593354">type</span>&nbsp;<span class="ident" id="1593359">ReadCloser</span>&nbsp;<span class="keyword" id="1593370">interface</span>&nbsp;<span class="op" id="1593380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593383">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593391">Closer</span><br>
<span class="lineno">120</span><span class="op" id="1593398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1593401">//&nbsp;WriteCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Write&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1593480">type</span>&nbsp;<span class="ident" id="1593485">WriteCloser</span>&nbsp;<span class="keyword" id="1593497">interface</span>&nbsp;<span class="op" id="1593507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593510">Writer</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593518">Closer</span><br>
<span class="lineno"></span><span class="op" id="1593525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1593528">//&nbsp;ReadWriteCloser&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read,&nbsp;Write&nbsp;and&nbsp;Close&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1593617">type</span>&nbsp;<span class="ident" id="1593622">ReadWriteCloser</span>&nbsp;<span class="keyword" id="1593638">interface</span>&nbsp;<span class="op" id="1593648">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593651">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593659">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593667">Closer</span><br>
<span class="lineno"></span><span class="op" id="1593674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="1593677">//&nbsp;ReadSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1593753">type</span>&nbsp;<span class="ident" id="1593758">ReadSeeker</span>&nbsp;<span class="keyword" id="1593769">interface</span>&nbsp;<span class="op" id="1593779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593782">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593790">Seeker</span><br>
<span class="lineno"></span><span class="op" id="1593797">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1593800">//&nbsp;WriteSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Write&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1593878">type</span>&nbsp;<span class="ident" id="1593883">WriteSeeker</span>&nbsp;<span class="keyword" id="1593895">interface</span>&nbsp;<span class="op" id="1593905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593908">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593916">Seeker</span><br>
<span class="lineno">145</span><span class="op" id="1593923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1593926">//&nbsp;ReadWriteSeeker&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;groups&nbsp;the&nbsp;basic&nbsp;Read,&nbsp;Write&nbsp;and&nbsp;Seek&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="1594014">type</span>&nbsp;<span class="ident" id="1594019">ReadWriteSeeker</span>&nbsp;<span class="keyword" id="1594035">interface</span>&nbsp;<span class="op" id="1594045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594048">Reader</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594056">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594064">Seeker</span><br>
<span class="lineno"></span><span class="op" id="1594071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1594074">//&nbsp;ReaderFrom&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno">155</span><span class="comment" id="1594137">//</span><br>
<span class="lineno"></span><span class="comment" id="1594140">//&nbsp;ReadFrom&nbsp;reads&nbsp;data&nbsp;from&nbsp;r&nbsp;until&nbsp;EOF&nbsp;or&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1594190">//&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1594241">//&nbsp;Any&nbsp;error&nbsp;except&nbsp;io.EOF&nbsp;encountered&nbsp;during&nbsp;the&nbsp;read&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="1594314">//</span><br>
<span class="lineno">160</span><span class="comment" id="1594317">//&nbsp;The&nbsp;Copy&nbsp;function&nbsp;uses&nbsp;ReaderFrom&nbsp;if&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="1594368">type</span>&nbsp;<span class="ident" id="1594373">ReaderFrom</span>&nbsp;<span class="keyword" id="1594384">interface</span>&nbsp;<span class="op" id="1594394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594397">ReadFrom</span><span class="op" id="1594405">(</span><span class="ident" id="1594406">r</span>&nbsp;<span class="ident" id="1594408">Reader</span><span class="op" id="1594414">)</span>&nbsp;<span class="op" id="1594416">(</span><span class="ident" id="1594417">n</span>&nbsp;<span class="ident" id="1594419">int64</span><span class="op" id="1594424">,</span>&nbsp;<span class="ident" id="1594426">err</span>&nbsp;<span class="builtintype" id="1594430">error</span><span class="op" id="1594435">)</span><br>
<span class="lineno"></span><span class="op" id="1594437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="1594440">//&nbsp;WriterTo&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1594500">//</span><br>
<span class="lineno"></span><span class="comment" id="1594503">//&nbsp;WriteTo&nbsp;writes&nbsp;data&nbsp;to&nbsp;w&nbsp;until&nbsp;there&#39;s&nbsp;no&nbsp;more&nbsp;data&nbsp;to&nbsp;write&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1594570">//&nbsp;when&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;The&nbsp;return&nbsp;value&nbsp;n&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="1594637">//&nbsp;written.&nbsp;Any&nbsp;error&nbsp;encountered&nbsp;during&nbsp;the&nbsp;write&nbsp;is&nbsp;also&nbsp;returned.</span><br>
<span class="lineno">170</span><span class="comment" id="1594706">//</span><br>
<span class="lineno"></span><span class="comment" id="1594709">//&nbsp;The&nbsp;Copy&nbsp;function&nbsp;uses&nbsp;WriterTo&nbsp;if&nbsp;available.</span><br>
<span class="lineno"></span><span class="keyword" id="1594758">type</span>&nbsp;<span class="ident" id="1594763">WriterTo</span>&nbsp;<span class="keyword" id="1594772">interface</span>&nbsp;<span class="op" id="1594782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594785">WriteTo</span><span class="op" id="1594792">(</span><span class="ident" id="1594793">w</span>&nbsp;<span class="ident" id="1594795">Writer</span><span class="op" id="1594801">)</span>&nbsp;<span class="op" id="1594803">(</span><span class="ident" id="1594804">n</span>&nbsp;<span class="ident" id="1594806">int64</span><span class="op" id="1594811">,</span>&nbsp;<span class="ident" id="1594813">err</span>&nbsp;<span class="builtintype" id="1594817">error</span><span class="op" id="1594822">)</span><br>
<span class="lineno"></span><span class="op" id="1594824">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="1594827">//&nbsp;ReaderAt&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1594892">//</span><br>
<span class="lineno"></span><span class="comment" id="1594895">//&nbsp;ReadAt&nbsp;reads&nbsp;len(p)&nbsp;bytes&nbsp;into&nbsp;p&nbsp;starting&nbsp;at&nbsp;offset&nbsp;off&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1594961">//&nbsp;underlying&nbsp;input&nbsp;source.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">180</span><span class="comment" id="1595021">//&nbsp;read&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span><span class="comment" id="1595075">//</span><br>
<span class="lineno"></span><span class="comment" id="1595078">//&nbsp;When&nbsp;ReadAt&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="1595140">//&nbsp;explaining&nbsp;why&nbsp;more&nbsp;bytes&nbsp;were&nbsp;not&nbsp;returned.&nbsp;&nbsp;In&nbsp;this&nbsp;respect,</span><br>
<span class="lineno"></span><span class="comment" id="1595206">//&nbsp;ReadAt&nbsp;is&nbsp;stricter&nbsp;than&nbsp;Read.</span><br>
<span class="lineno">185</span><span class="comment" id="1595239">//</span><br>
<span class="lineno"></span><span class="comment" id="1595242">//&nbsp;Even&nbsp;if&nbsp;ReadAt&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;may&nbsp;use&nbsp;all&nbsp;of&nbsp;p&nbsp;as&nbsp;scratch</span><br>
<span class="lineno"></span><span class="comment" id="1595311">//&nbsp;space&nbsp;during&nbsp;the&nbsp;call.&nbsp;&nbsp;If&nbsp;some&nbsp;data&nbsp;is&nbsp;available&nbsp;but&nbsp;not&nbsp;len(p)&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1595386">//&nbsp;ReadAt&nbsp;blocks&nbsp;until&nbsp;either&nbsp;all&nbsp;the&nbsp;data&nbsp;is&nbsp;available&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="1595462">//&nbsp;In&nbsp;this&nbsp;respect&nbsp;ReadAt&nbsp;is&nbsp;different&nbsp;from&nbsp;Read.</span><br>
<span class="lineno">190</span><span class="comment" id="1595512">//</span><br>
<span class="lineno"></span><span class="comment" id="1595515">//&nbsp;If&nbsp;the&nbsp;n&nbsp;=&nbsp;len(p)&nbsp;bytes&nbsp;returned&nbsp;by&nbsp;ReadAt&nbsp;are&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1595583">//&nbsp;input&nbsp;source,&nbsp;ReadAt&nbsp;may&nbsp;return&nbsp;either&nbsp;err&nbsp;==&nbsp;EOF&nbsp;or&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1595651">//</span><br>
<span class="lineno"></span><span class="comment" id="1595654">//&nbsp;If&nbsp;ReadAt&nbsp;is&nbsp;reading&nbsp;from&nbsp;an&nbsp;input&nbsp;source&nbsp;with&nbsp;a&nbsp;seek&nbsp;offset,</span><br>
<span class="lineno">195</span><span class="comment" id="1595719">//&nbsp;ReadAt&nbsp;should&nbsp;not&nbsp;affect&nbsp;nor&nbsp;be&nbsp;affected&nbsp;by&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="1595781">//&nbsp;seek&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="1595797">//</span><br>
<span class="lineno"></span><span class="comment" id="1595800">//&nbsp;Clients&nbsp;of&nbsp;ReadAt&nbsp;can&nbsp;execute&nbsp;parallel&nbsp;ReadAt&nbsp;calls&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1595862">//&nbsp;same&nbsp;input&nbsp;source.</span><br>
<span class="lineno">200</span><span class="comment" id="1595884">//</span><br>
<span class="lineno"></span><span class="comment" id="1595887">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1595925">type</span>&nbsp;<span class="ident" id="1595930">ReaderAt</span>&nbsp;<span class="keyword" id="1595939">interface</span>&nbsp;<span class="op" id="1595949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595952">ReadAt</span><span class="op" id="1595958">(</span><span class="ident" id="1595959">p</span>&nbsp;<span class="op" id="1595961">[</span><span class="op" id="1595962">]</span><span class="builtintype" id="1595963">byte</span><span class="op" id="1595967">,</span>&nbsp;<span class="ident" id="1595969">off</span>&nbsp;<span class="ident" id="1595973">int64</span><span class="op" id="1595978">)</span>&nbsp;<span class="op" id="1595980">(</span><span class="ident" id="1595981">n</span>&nbsp;<span class="builtintype" id="1595983">int</span><span class="op" id="1595986">,</span>&nbsp;<span class="ident" id="1595988">err</span>&nbsp;<span class="builtintype" id="1595992">error</span><span class="op" id="1595997">)</span><br>
<span class="lineno"></span><span class="op" id="1595999">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="1596002">//&nbsp;WriterAt&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;basic&nbsp;WriteAt&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1596068">//</span><br>
<span class="lineno"></span><span class="comment" id="1596071">//&nbsp;WriteAt&nbsp;writes&nbsp;len(p)&nbsp;bytes&nbsp;from&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data&nbsp;stream</span><br>
<span class="lineno"></span><span class="comment" id="1596139">//&nbsp;at&nbsp;offset&nbsp;off.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;from&nbsp;p&nbsp;(0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(p))</span><br>
<span class="lineno">210</span><span class="comment" id="1596223">//&nbsp;and&nbsp;any&nbsp;error&nbsp;encountered&nbsp;that&nbsp;caused&nbsp;the&nbsp;write&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span><span class="comment" id="1596289">//&nbsp;WriteAt&nbsp;must&nbsp;return&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;if&nbsp;it&nbsp;returns&nbsp;n&nbsp;&lt;&nbsp;len(p).</span><br>
<span class="lineno"></span><span class="comment" id="1596354">//</span><br>
<span class="lineno"></span><span class="comment" id="1596357">//&nbsp;If&nbsp;WriteAt&nbsp;is&nbsp;writing&nbsp;to&nbsp;a&nbsp;destination&nbsp;with&nbsp;a&nbsp;seek&nbsp;offset,</span><br>
<span class="lineno"></span><span class="comment" id="1596419">//&nbsp;WriteAt&nbsp;should&nbsp;not&nbsp;affect&nbsp;nor&nbsp;be&nbsp;affected&nbsp;by&nbsp;the&nbsp;underlying</span><br>
<span class="lineno">215</span><span class="comment" id="1596482">//&nbsp;seek&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="1596498">//</span><br>
<span class="lineno"></span><span class="comment" id="1596501">//&nbsp;Clients&nbsp;of&nbsp;WriteAt&nbsp;can&nbsp;execute&nbsp;parallel&nbsp;WriteAt&nbsp;calls&nbsp;on&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="1596570">//&nbsp;destination&nbsp;if&nbsp;the&nbsp;ranges&nbsp;do&nbsp;not&nbsp;overlap.</span><br>
<span class="lineno"></span><span class="comment" id="1596615">//</span><br>
<span class="lineno">220</span><span class="comment" id="1596618">//&nbsp;Implementations&nbsp;must&nbsp;not&nbsp;retain&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1596656">type</span>&nbsp;<span class="ident" id="1596661">WriterAt</span>&nbsp;<span class="keyword" id="1596670">interface</span>&nbsp;<span class="op" id="1596680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1596683">WriteAt</span><span class="op" id="1596690">(</span><span class="ident" id="1596691">p</span>&nbsp;<span class="op" id="1596693">[</span><span class="op" id="1596694">]</span><span class="builtintype" id="1596695">byte</span><span class="op" id="1596699">,</span>&nbsp;<span class="ident" id="1596701">off</span>&nbsp;<span class="ident" id="1596705">int64</span><span class="op" id="1596710">)</span>&nbsp;<span class="op" id="1596712">(</span><span class="ident" id="1596713">n</span>&nbsp;<span class="builtintype" id="1596715">int</span><span class="op" id="1596718">,</span>&nbsp;<span class="ident" id="1596720">err</span>&nbsp;<span class="builtintype" id="1596724">error</span><span class="op" id="1596729">)</span><br>
<span class="lineno"></span><span class="op" id="1596731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="comment" id="1596734">//&nbsp;ByteReader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadByte&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1596797">//</span><br>
<span class="lineno"></span><span class="comment" id="1596800">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1596860">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;err&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="1596905">type</span>&nbsp;<span class="ident" id="1596910">ByteReader</span>&nbsp;<span class="keyword" id="1596921">interface</span>&nbsp;<span class="op" id="1596931">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1596934">ReadByte</span><span class="op" id="1596942">(</span><span class="op" id="1596943">)</span>&nbsp;<span class="op" id="1596945">(</span><span class="ident" id="1596946">c</span>&nbsp;<span class="builtintype" id="1596948">byte</span><span class="op" id="1596952">,</span>&nbsp;<span class="ident" id="1596954">err</span>&nbsp;<span class="builtintype" id="1596958">error</span><span class="op" id="1596963">)</span><br>
<span class="lineno"></span><span class="op" id="1596965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1596968">//&nbsp;ByteScanner&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;adds&nbsp;the&nbsp;UnreadByte&nbsp;method&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1597039">//&nbsp;basic&nbsp;ReadByte&nbsp;method.</span><br>
<span class="lineno">235</span><span class="comment" id="1597065">//</span><br>
<span class="lineno"></span><span class="comment" id="1597068">//&nbsp;UnreadByte&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadByte&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="1597139">//&nbsp;as&nbsp;the&nbsp;previous&nbsp;call&nbsp;to&nbsp;ReadByte.</span><br>
<span class="lineno"></span><span class="comment" id="1597176">//&nbsp;It&nbsp;may&nbsp;be&nbsp;an&nbsp;error&nbsp;to&nbsp;call&nbsp;UnreadByte&nbsp;twice&nbsp;without&nbsp;an&nbsp;intervening</span><br>
<span class="lineno"></span><span class="comment" id="1597246">//&nbsp;call&nbsp;to&nbsp;ReadByte.</span><br>
<span class="lineno">240</span><span class="keyword" id="1597267">type</span>&nbsp;<span class="ident" id="1597272">ByteScanner</span>&nbsp;<span class="keyword" id="1597284">interface</span>&nbsp;<span class="op" id="1597294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597297">ByteReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597309">UnreadByte</span><span class="op" id="1597319">(</span><span class="op" id="1597320">)</span>&nbsp;<span class="builtintype" id="1597322">error</span><br>
<span class="lineno"></span><span class="op" id="1597328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="1597331">//&nbsp;ByteWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteByte&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1597395">type</span>&nbsp;<span class="ident" id="1597400">ByteWriter</span>&nbsp;<span class="keyword" id="1597411">interface</span>&nbsp;<span class="op" id="1597421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597424">WriteByte</span><span class="op" id="1597433">(</span><span class="ident" id="1597434">c</span>&nbsp;<span class="builtintype" id="1597436">byte</span><span class="op" id="1597440">)</span>&nbsp;<span class="builtintype" id="1597442">error</span><br>
<span class="lineno"></span><span class="op" id="1597448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="comment" id="1597451">//&nbsp;RuneReader&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;ReadRune&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1597514">//</span><br>
<span class="lineno"></span><span class="comment" id="1597517">//&nbsp;ReadRune&nbsp;reads&nbsp;a&nbsp;single&nbsp;UTF-8&nbsp;encoded&nbsp;Unicode&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="1597576">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;rune&nbsp;and&nbsp;its&nbsp;size&nbsp;in&nbsp;bytes.&nbsp;If&nbsp;no&nbsp;character&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1597642">//&nbsp;available,&nbsp;err&nbsp;will&nbsp;be&nbsp;set.</span><br>
<span class="lineno">255</span><span class="keyword" id="1597673">type</span>&nbsp;<span class="ident" id="1597678">RuneReader</span>&nbsp;<span class="keyword" id="1597689">interface</span>&nbsp;<span class="op" id="1597699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597702">ReadRune</span><span class="op" id="1597710">(</span><span class="op" id="1597711">)</span>&nbsp;<span class="op" id="1597713">(</span><span class="ident" id="1597714">r</span>&nbsp;<span class="builtintype" id="1597716">rune</span><span class="op" id="1597720">,</span>&nbsp;<span class="ident" id="1597722">size</span>&nbsp;<span class="builtintype" id="1597727">int</span><span class="op" id="1597730">,</span>&nbsp;<span class="ident" id="1597732">err</span>&nbsp;<span class="builtintype" id="1597736">error</span><span class="op" id="1597741">)</span><br>
<span class="lineno"></span><span class="op" id="1597743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1597746">//&nbsp;RuneScanner&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;adds&nbsp;the&nbsp;UnreadRune&nbsp;method&nbsp;to&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="1597817">//&nbsp;basic&nbsp;ReadRune&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="1597843">//</span><br>
<span class="lineno"></span><span class="comment" id="1597846">//&nbsp;UnreadRune&nbsp;causes&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadRune&nbsp;to&nbsp;return&nbsp;the&nbsp;same&nbsp;rune</span><br>
<span class="lineno"></span><span class="comment" id="1597917">//&nbsp;as&nbsp;the&nbsp;previous&nbsp;call&nbsp;to&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="comment" id="1597954">//&nbsp;It&nbsp;may&nbsp;be&nbsp;an&nbsp;error&nbsp;to&nbsp;call&nbsp;UnreadRune&nbsp;twice&nbsp;without&nbsp;an&nbsp;intervening</span><br>
<span class="lineno">265</span><span class="comment" id="1598024">//&nbsp;call&nbsp;to&nbsp;ReadRune.</span><br>
<span class="lineno"></span><span class="keyword" id="1598045">type</span>&nbsp;<span class="ident" id="1598050">RuneScanner</span>&nbsp;<span class="keyword" id="1598062">interface</span>&nbsp;<span class="op" id="1598072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598075">RuneReader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598087">UnreadRune</span><span class="op" id="1598097">(</span><span class="op" id="1598098">)</span>&nbsp;<span class="builtintype" id="1598100">error</span><br>
<span class="lineno"></span><span class="op" id="1598106">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="1598109">//&nbsp;stringWriter&nbsp;is&nbsp;the&nbsp;interface&nbsp;that&nbsp;wraps&nbsp;the&nbsp;WriteString&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1598177">type</span>&nbsp;<span class="ident" id="1598182">stringWriter</span>&nbsp;<span class="keyword" id="1598195">interface</span>&nbsp;<span class="op" id="1598205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598208">WriteString</span><span class="op" id="1598219">(</span><span class="ident" id="1598220">s</span>&nbsp;<span class="builtintype" id="1598222">string</span><span class="op" id="1598228">)</span>&nbsp;<span class="op" id="1598230">(</span><span class="ident" id="1598231">n</span>&nbsp;<span class="builtintype" id="1598233">int</span><span class="op" id="1598236">,</span>&nbsp;<span class="ident" id="1598238">err</span>&nbsp;<span class="builtintype" id="1598242">error</span><span class="op" id="1598247">)</span><br>
<span class="lineno"></span><span class="op" id="1598249">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="1598252">//&nbsp;WriteString&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;w,&nbsp;which&nbsp;accepts&nbsp;an&nbsp;array&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1598342">//&nbsp;If&nbsp;w&nbsp;already&nbsp;implements&nbsp;a&nbsp;WriteString&nbsp;method,&nbsp;it&nbsp;is&nbsp;invoked&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="1598415">func</span>&nbsp;<span class="ident" id="1598420">WriteString</span><span class="op" id="1598431">(</span><span class="ident" id="1598432">w</span>&nbsp;<span class="ident" id="1598434">Writer</span><span class="op" id="1598440">,</span>&nbsp;<span class="ident" id="1598442">s</span>&nbsp;<span class="builtintype" id="1598444">string</span><span class="op" id="1598450">)</span>&nbsp;<span class="op" id="1598452">(</span><span class="ident" id="1598453">n</span>&nbsp;<span class="builtintype" id="1598455">int</span><span class="op" id="1598458">,</span>&nbsp;<span class="ident" id="1598460">err</span>&nbsp;<span class="builtintype" id="1598464">error</span><span class="op" id="1598469">)</span>&nbsp;<span class="op" id="1598471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598474">if</span>&nbsp;<span class="ident" id="1598477">sw</span><span class="op" id="1598479">,</span>&nbsp;<span class="ident" id="1598481">ok</span>&nbsp;<span class="op" id="1598484">:=</span>&nbsp;<span class="ident" id="1598487">w</span><span class="op" id="1598488">.</span><span class="op" id="1598489">(</span><span class="ident" id="1598490">stringWriter</span><span class="op" id="1598502">)</span><span class="op" id="1598503">;</span>&nbsp;<span class="ident" id="1598505">ok</span>&nbsp;<span class="op" id="1598508">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598512">return</span>&nbsp;<span class="ident" id="1598519">sw</span><span class="op" id="1598521">.</span><span class="ident" id="1598522">WriteString</span><span class="op" id="1598533">(</span><span class="ident" id="1598534">s</span><span class="op" id="1598535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598541">return</span>&nbsp;<span class="ident" id="1598548">w</span><span class="op" id="1598549">.</span><span class="ident" id="1598550">Write</span><span class="op" id="1598555">(</span><span class="op" id="1598556">[</span><span class="op" id="1598557">]</span><span class="builtintype" id="1598558">byte</span><span class="op" id="1598562">(</span><span class="ident" id="1598563">s</span><span class="op" id="1598564">)</span><span class="op" id="1598565">)</span><br>
<span class="lineno"></span><span class="op" id="1598567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="1598570">//&nbsp;ReadAtLeast&nbsp;reads&nbsp;from&nbsp;r&nbsp;into&nbsp;buf&nbsp;until&nbsp;it&nbsp;has&nbsp;read&nbsp;at&nbsp;least&nbsp;min&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1598645">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;an&nbsp;error&nbsp;if&nbsp;fewer&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1598725">//&nbsp;The&nbsp;error&nbsp;is&nbsp;EOF&nbsp;only&nbsp;if&nbsp;no&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1598773">//&nbsp;If&nbsp;an&nbsp;EOF&nbsp;happens&nbsp;after&nbsp;reading&nbsp;fewer&nbsp;than&nbsp;min&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1598830">//&nbsp;ReadAtLeast&nbsp;returns&nbsp;ErrUnexpectedEOF.</span><br>
<span class="lineno">290</span><span class="comment" id="1598871">//&nbsp;If&nbsp;min&nbsp;is&nbsp;greater&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;buf,&nbsp;ReadAtLeast&nbsp;returns&nbsp;ErrShortBuffer.</span><br>
<span class="lineno"></span><span class="comment" id="1598952">//&nbsp;On&nbsp;return,&nbsp;n&nbsp;&gt;=&nbsp;min&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1599002">func</span>&nbsp;<span class="ident" id="1599007">ReadAtLeast</span><span class="op" id="1599018">(</span><span class="ident" id="1599019">r</span>&nbsp;<span class="ident" id="1599021">Reader</span><span class="op" id="1599027">,</span>&nbsp;<span class="ident" id="1599029">buf</span>&nbsp;<span class="op" id="1599033">[</span><span class="op" id="1599034">]</span><span class="builtintype" id="1599035">byte</span><span class="op" id="1599039">,</span>&nbsp;<span class="ident" id="1599041">min</span>&nbsp;<span class="builtintype" id="1599045">int</span><span class="op" id="1599048">)</span>&nbsp;<span class="op" id="1599050">(</span><span class="ident" id="1599051">n</span>&nbsp;<span class="builtintype" id="1599053">int</span><span class="op" id="1599056">,</span>&nbsp;<span class="ident" id="1599058">err</span>&nbsp;<span class="builtintype" id="1599062">error</span><span class="op" id="1599067">)</span>&nbsp;<span class="op" id="1599069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599072">if</span>&nbsp;<span class="builtinfunc" id="1599075">len</span><span class="op" id="1599078">(</span><span class="ident" id="1599079">buf</span><span class="op" id="1599082">)</span>&nbsp;<span class="op" id="1599084">&lt;</span>&nbsp;<span class="ident" id="1599086">min</span>&nbsp;<span class="op" id="1599090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599094">return</span>&nbsp;<span class="num" id="1599101">0</span><span class="op" id="1599102">,</span>&nbsp;<span class="ident" id="1599104">ErrShortBuffer</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599123">for</span>&nbsp;<span class="ident" id="1599127">n</span>&nbsp;<span class="op" id="1599129">&lt;</span>&nbsp;<span class="ident" id="1599131">min</span>&nbsp;<span class="op" id="1599135">&amp;&amp;</span>&nbsp;<span class="ident" id="1599138">err</span>&nbsp;<span class="op" id="1599142">==</span>&nbsp;<span class="ident" id="1599145">nil</span>&nbsp;<span class="op" id="1599149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599153">var</span>&nbsp;<span class="ident" id="1599157">nn</span>&nbsp;<span class="builtintype" id="1599160">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599166">nn</span><span class="op" id="1599168">,</span>&nbsp;<span class="ident" id="1599170">err</span>&nbsp;<span class="op" id="1599174">=</span>&nbsp;<span class="ident" id="1599176">r</span><span class="op" id="1599177">.</span><span class="ident" id="1599178">Read</span><span class="op" id="1599182">(</span><span class="ident" id="1599183">buf</span><span class="op" id="1599186">[</span><span class="ident" id="1599187">n</span><span class="op" id="1599188">:</span><span class="op" id="1599189">]</span><span class="op" id="1599190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599194">n</span>&nbsp;<span class="op" id="1599196">+=</span>&nbsp;<span class="ident" id="1599199">nn</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599206">if</span>&nbsp;<span class="ident" id="1599209">n</span>&nbsp;<span class="op" id="1599211">&gt;=</span>&nbsp;<span class="ident" id="1599214">min</span>&nbsp;<span class="op" id="1599218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599222">err</span>&nbsp;<span class="op" id="1599226">=</span>&nbsp;<span class="ident" id="1599228">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599233">}</span>&nbsp;<span class="keyword" id="1599235">else</span>&nbsp;<span class="keyword" id="1599240">if</span>&nbsp;<span class="ident" id="1599243">n</span>&nbsp;<span class="op" id="1599245">&gt;</span>&nbsp;<span class="num" id="1599247">0</span>&nbsp;<span class="op" id="1599249">&amp;&amp;</span>&nbsp;<span class="ident" id="1599252">err</span>&nbsp;<span class="op" id="1599256">==</span>&nbsp;<span class="ident" id="1599259">EOF</span>&nbsp;<span class="op" id="1599263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599267">err</span>&nbsp;<span class="op" id="1599271">=</span>&nbsp;<span class="ident" id="1599273">ErrUnexpectedEOF</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599294">return</span><br>
<span class="lineno"></span><span class="op" id="1599301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1599304">//&nbsp;ReadFull&nbsp;reads&nbsp;exactly&nbsp;len(buf)&nbsp;bytes&nbsp;from&nbsp;r&nbsp;into&nbsp;buf.</span><br>
<span class="lineno">310</span><span class="comment" id="1599362">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;an&nbsp;error&nbsp;if&nbsp;fewer&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1599442">//&nbsp;The&nbsp;error&nbsp;is&nbsp;EOF&nbsp;only&nbsp;if&nbsp;no&nbsp;bytes&nbsp;were&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1599490">//&nbsp;If&nbsp;an&nbsp;EOF&nbsp;happens&nbsp;after&nbsp;reading&nbsp;some&nbsp;but&nbsp;not&nbsp;all&nbsp;the&nbsp;bytes,</span><br>
<span class="lineno"></span><span class="comment" id="1599553">//&nbsp;ReadFull&nbsp;returns&nbsp;ErrUnexpectedEOF.</span><br>
<span class="lineno"></span><span class="comment" id="1599591">//&nbsp;On&nbsp;return,&nbsp;n&nbsp;==&nbsp;len(buf)&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno">315</span><span class="keyword" id="1599646">func</span>&nbsp;<span class="ident" id="1599651">ReadFull</span><span class="op" id="1599659">(</span><span class="ident" id="1599660">r</span>&nbsp;<span class="ident" id="1599662">Reader</span><span class="op" id="1599668">,</span>&nbsp;<span class="ident" id="1599670">buf</span>&nbsp;<span class="op" id="1599674">[</span><span class="op" id="1599675">]</span><span class="builtintype" id="1599676">byte</span><span class="op" id="1599680">)</span>&nbsp;<span class="op" id="1599682">(</span><span class="ident" id="1599683">n</span>&nbsp;<span class="builtintype" id="1599685">int</span><span class="op" id="1599688">,</span>&nbsp;<span class="ident" id="1599690">err</span>&nbsp;<span class="builtintype" id="1599694">error</span><span class="op" id="1599699">)</span>&nbsp;<span class="op" id="1599701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599704">return</span>&nbsp;<span class="ident" id="1599711">ReadAtLeast</span><span class="op" id="1599722">(</span><span class="ident" id="1599723">r</span><span class="op" id="1599724">,</span>&nbsp;<span class="ident" id="1599726">buf</span><span class="op" id="1599729">,</span>&nbsp;<span class="builtinfunc" id="1599731">len</span><span class="op" id="1599734">(</span><span class="ident" id="1599735">buf</span><span class="op" id="1599738">)</span><span class="op" id="1599739">)</span><br>
<span class="lineno"></span><span class="op" id="1599741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1599744">//&nbsp;CopyN&nbsp;copies&nbsp;n&nbsp;bytes&nbsp;(or&nbsp;until&nbsp;an&nbsp;error)&nbsp;from&nbsp;src&nbsp;to&nbsp;dst.</span><br>
<span class="lineno">320</span><span class="comment" id="1599805">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;the&nbsp;earliest</span><br>
<span class="lineno"></span><span class="comment" id="1599863">//&nbsp;error&nbsp;encountered&nbsp;while&nbsp;copying.</span><br>
<span class="lineno"></span><span class="comment" id="1599899">//&nbsp;On&nbsp;return,&nbsp;written&nbsp;==&nbsp;n&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;err&nbsp;==&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1599953">//</span><br>
<span class="lineno"></span><span class="comment" id="1599956">//&nbsp;If&nbsp;dst&nbsp;implements&nbsp;the&nbsp;ReaderFrom&nbsp;interface,</span><br>
<span class="lineno">325</span><span class="comment" id="1600003">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;using&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="1600040">func</span>&nbsp;<span class="ident" id="1600045">CopyN</span><span class="op" id="1600050">(</span><span class="ident" id="1600051">dst</span>&nbsp;<span class="ident" id="1600055">Writer</span><span class="op" id="1600061">,</span>&nbsp;<span class="ident" id="1600063">src</span>&nbsp;<span class="ident" id="1600067">Reader</span><span class="op" id="1600073">,</span>&nbsp;<span class="ident" id="1600075">n</span>&nbsp;<span class="ident" id="1600077">int64</span><span class="op" id="1600082">)</span>&nbsp;<span class="op" id="1600084">(</span><span class="ident" id="1600085">written</span>&nbsp;<span class="ident" id="1600093">int64</span><span class="op" id="1600098">,</span>&nbsp;<span class="ident" id="1600100">err</span>&nbsp;<span class="builtintype" id="1600104">error</span><span class="op" id="1600109">)</span>&nbsp;<span class="op" id="1600111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600114">written</span><span class="op" id="1600121">,</span>&nbsp;<span class="ident" id="1600123">err</span>&nbsp;<span class="op" id="1600127">=</span>&nbsp;<span class="ident" id="1600129">Copy</span><span class="op" id="1600133">(</span><span class="ident" id="1600134">dst</span><span class="op" id="1600137">,</span>&nbsp;<span class="ident" id="1600139">LimitReader</span><span class="op" id="1600150">(</span><span class="ident" id="1600151">src</span><span class="op" id="1600154">,</span>&nbsp;<span class="ident" id="1600156">n</span><span class="op" id="1600157">)</span><span class="op" id="1600158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600161">if</span>&nbsp;<span class="ident" id="1600164">written</span>&nbsp;<span class="op" id="1600172">==</span>&nbsp;<span class="ident" id="1600175">n</span>&nbsp;<span class="op" id="1600177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600181">return</span>&nbsp;<span class="ident" id="1600188">n</span><span class="op" id="1600189">,</span>&nbsp;<span class="ident" id="1600191">nil</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1600196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600199">if</span>&nbsp;<span class="ident" id="1600202">written</span>&nbsp;<span class="op" id="1600210">&lt;</span>&nbsp;<span class="ident" id="1600212">n</span>&nbsp;<span class="op" id="1600214">&amp;&amp;</span>&nbsp;<span class="ident" id="1600217">err</span>&nbsp;<span class="op" id="1600221">==</span>&nbsp;<span class="ident" id="1600224">nil</span>&nbsp;<span class="op" id="1600228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1600232">//&nbsp;src&nbsp;stopped&nbsp;early;&nbsp;must&nbsp;have&nbsp;been&nbsp;EOF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600276">err</span>&nbsp;<span class="op" id="1600280">=</span>&nbsp;<span class="ident" id="1600282">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1600287">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600290">return</span><br>
<span class="lineno"></span><span class="op" id="1600297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1600300">//&nbsp;Copy&nbsp;copies&nbsp;from&nbsp;src&nbsp;to&nbsp;dst&nbsp;until&nbsp;either&nbsp;EOF&nbsp;is&nbsp;reached</span><br>
<span class="lineno"></span><span class="comment" id="1600359">//&nbsp;on&nbsp;src&nbsp;or&nbsp;an&nbsp;error&nbsp;occurs.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno">340</span><span class="comment" id="1600421">//&nbsp;copied&nbsp;and&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered&nbsp;while&nbsp;copying,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="1600486">//</span><br>
<span class="lineno"></span><span class="comment" id="1600489">//&nbsp;A&nbsp;successful&nbsp;Copy&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="1600546">//&nbsp;Because&nbsp;Copy&nbsp;is&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="1600609">//&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno">345</span><span class="comment" id="1600667">//</span><br>
<span class="lineno"></span><span class="comment" id="1600670">//&nbsp;If&nbsp;src&nbsp;implements&nbsp;the&nbsp;WriterTo&nbsp;interface,</span><br>
<span class="lineno"></span><span class="comment" id="1600715">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;by&nbsp;calling&nbsp;src.WriteTo(dst).</span><br>
<span class="lineno"></span><span class="comment" id="1600771">//&nbsp;Otherwise,&nbsp;if&nbsp;dst&nbsp;implements&nbsp;the&nbsp;ReaderFrom&nbsp;interface,</span><br>
<span class="lineno"></span><span class="comment" id="1600829">//&nbsp;the&nbsp;copy&nbsp;is&nbsp;implemented&nbsp;by&nbsp;calling&nbsp;dst.ReadFrom(src).</span><br>
<span class="lineno">350</span><span class="keyword" id="1600886">func</span>&nbsp;<span class="ident" id="1600891">Copy</span><span class="op" id="1600895">(</span><span class="ident" id="1600896">dst</span>&nbsp;<span class="ident" id="1600900">Writer</span><span class="op" id="1600906">,</span>&nbsp;<span class="ident" id="1600908">src</span>&nbsp;<span class="ident" id="1600912">Reader</span><span class="op" id="1600918">)</span>&nbsp;<span class="op" id="1600920">(</span><span class="ident" id="1600921">written</span>&nbsp;<span class="ident" id="1600929">int64</span><span class="op" id="1600934">,</span>&nbsp;<span class="ident" id="1600936">err</span>&nbsp;<span class="builtintype" id="1600940">error</span><span class="op" id="1600945">)</span>&nbsp;<span class="op" id="1600947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1600950">//&nbsp;If&nbsp;the&nbsp;reader&nbsp;has&nbsp;a&nbsp;WriteTo&nbsp;method,&nbsp;use&nbsp;it&nbsp;to&nbsp;do&nbsp;the&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1601013">//&nbsp;Avoids&nbsp;an&nbsp;allocation&nbsp;and&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601050">if</span>&nbsp;<span class="ident" id="1601053">wt</span><span class="op" id="1601055">,</span>&nbsp;<span class="ident" id="1601057">ok</span>&nbsp;<span class="op" id="1601060">:=</span>&nbsp;<span class="ident" id="1601063">src</span><span class="op" id="1601066">.</span><span class="op" id="1601067">(</span><span class="ident" id="1601068">WriterTo</span><span class="op" id="1601076">)</span><span class="op" id="1601077">;</span>&nbsp;<span class="ident" id="1601079">ok</span>&nbsp;<span class="op" id="1601082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601086">return</span>&nbsp;<span class="ident" id="1601093">wt</span><span class="op" id="1601095">.</span><span class="ident" id="1601096">WriteTo</span><span class="op" id="1601103">(</span><span class="ident" id="1601104">dst</span><span class="op" id="1601107">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1601113">//&nbsp;Similarly,&nbsp;if&nbsp;the&nbsp;writer&nbsp;has&nbsp;a&nbsp;ReadFrom&nbsp;method,&nbsp;use&nbsp;it&nbsp;to&nbsp;do&nbsp;the&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601188">if</span>&nbsp;<span class="ident" id="1601191">rt</span><span class="op" id="1601193">,</span>&nbsp;<span class="ident" id="1601195">ok</span>&nbsp;<span class="op" id="1601198">:=</span>&nbsp;<span class="ident" id="1601201">dst</span><span class="op" id="1601204">.</span><span class="op" id="1601205">(</span><span class="ident" id="1601206">ReaderFrom</span><span class="op" id="1601216">)</span><span class="op" id="1601217">;</span>&nbsp;<span class="ident" id="1601219">ok</span>&nbsp;<span class="op" id="1601222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601226">return</span>&nbsp;<span class="ident" id="1601233">rt</span><span class="op" id="1601235">.</span><span class="ident" id="1601236">ReadFrom</span><span class="op" id="1601244">(</span><span class="ident" id="1601245">src</span><span class="op" id="1601248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601251">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601254">buf</span>&nbsp;<span class="op" id="1601258">:=</span>&nbsp;<span class="builtinfunc" id="1601261">make</span><span class="op" id="1601265">(</span><span class="op" id="1601266">[</span><span class="op" id="1601267">]</span><span class="builtintype" id="1601268">byte</span><span class="op" id="1601272">,</span>&nbsp;<span class="num" id="1601274">32</span><span class="op" id="1601276">*</span><span class="num" id="1601277">1024</span><span class="op" id="1601281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601284">for</span>&nbsp;<span class="op" id="1601288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601292">nr</span><span class="op" id="1601294">,</span>&nbsp;<span class="ident" id="1601296">er</span>&nbsp;<span class="op" id="1601299">:=</span>&nbsp;<span class="ident" id="1601302">src</span><span class="op" id="1601305">.</span><span class="ident" id="1601306">Read</span><span class="op" id="1601310">(</span><span class="ident" id="1601311">buf</span><span class="op" id="1601314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601318">if</span>&nbsp;<span class="ident" id="1601321">nr</span>&nbsp;<span class="op" id="1601324">&gt;</span>&nbsp;<span class="num" id="1601326">0</span>&nbsp;<span class="op" id="1601328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601333">nw</span><span class="op" id="1601335">,</span>&nbsp;<span class="ident" id="1601337">ew</span>&nbsp;<span class="op" id="1601340">:=</span>&nbsp;<span class="ident" id="1601343">dst</span><span class="op" id="1601346">.</span><span class="ident" id="1601347">Write</span><span class="op" id="1601352">(</span><span class="ident" id="1601353">buf</span><span class="op" id="1601356">[</span><span class="num" id="1601357">0</span><span class="op" id="1601358">:</span><span class="ident" id="1601359">nr</span><span class="op" id="1601361">]</span><span class="op" id="1601362">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601367">if</span>&nbsp;<span class="ident" id="1601370">nw</span>&nbsp;<span class="op" id="1601373">&gt;</span>&nbsp;<span class="num" id="1601375">0</span>&nbsp;<span class="op" id="1601377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601383">written</span>&nbsp;<span class="op" id="1601391">+=</span>&nbsp;<span class="ident" id="1601394">int64</span><span class="op" id="1601399">(</span><span class="ident" id="1601400">nw</span><span class="op" id="1601402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601412">if</span>&nbsp;<span class="ident" id="1601415">ew</span>&nbsp;<span class="op" id="1601418">!=</span>&nbsp;<span class="ident" id="1601421">nil</span>&nbsp;<span class="op" id="1601425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601431">err</span>&nbsp;<span class="op" id="1601435">=</span>&nbsp;<span class="ident" id="1601437">ew</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601444">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601458">if</span>&nbsp;<span class="ident" id="1601461">nr</span>&nbsp;<span class="op" id="1601464">!=</span>&nbsp;<span class="ident" id="1601467">nw</span>&nbsp;<span class="op" id="1601470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601476">err</span>&nbsp;<span class="op" id="1601480">=</span>&nbsp;<span class="ident" id="1601482">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601500">break</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601517">if</span>&nbsp;<span class="ident" id="1601520">er</span>&nbsp;<span class="op" id="1601523">==</span>&nbsp;<span class="ident" id="1601526">EOF</span>&nbsp;<span class="op" id="1601530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601535">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601543">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601547">if</span>&nbsp;<span class="ident" id="1601550">er</span>&nbsp;<span class="op" id="1601553">!=</span>&nbsp;<span class="ident" id="1601556">nil</span>&nbsp;<span class="op" id="1601560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601565">err</span>&nbsp;<span class="op" id="1601569">=</span>&nbsp;<span class="ident" id="1601571">er</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601577">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601588">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601591">return</span>&nbsp;<span class="ident" id="1601598">written</span><span class="op" id="1601605">,</span>&nbsp;<span class="ident" id="1601607">err</span><br>
<span class="lineno"></span><span class="op" id="1601611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1601614">//&nbsp;LimitReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="1601664">//&nbsp;but&nbsp;stops&nbsp;with&nbsp;EOF&nbsp;after&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno">390</span><span class="comment" id="1601701">//&nbsp;The&nbsp;underlying&nbsp;implementation&nbsp;is&nbsp;a&nbsp;*LimitedReader.</span><br>
<span class="lineno"></span><span class="keyword" id="1601755">func</span>&nbsp;<span class="ident" id="1601760">LimitReader</span><span class="op" id="1601771">(</span><span class="ident" id="1601772">r</span>&nbsp;<span class="ident" id="1601774">Reader</span><span class="op" id="1601780">,</span>&nbsp;<span class="ident" id="1601782">n</span>&nbsp;<span class="ident" id="1601784">int64</span><span class="op" id="1601789">)</span>&nbsp;<span class="ident" id="1601791">Reader</span>&nbsp;<span class="op" id="1601798">{</span>&nbsp;<span class="keyword" id="1601800">return</span>&nbsp;<span class="op" id="1601807">&amp;</span><span class="ident" id="1601808">LimitedReader</span><span class="op" id="1601821">{</span><span class="ident" id="1601822">r</span><span class="op" id="1601823">,</span>&nbsp;<span class="ident" id="1601825">n</span><span class="op" id="1601826">}</span>&nbsp;<span class="op" id="1601828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1601831">//&nbsp;A&nbsp;LimitedReader&nbsp;reads&nbsp;from&nbsp;R&nbsp;but&nbsp;limits&nbsp;the&nbsp;amount&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1601888">//&nbsp;data&nbsp;returned&nbsp;to&nbsp;just&nbsp;N&nbsp;bytes.&nbsp;Each&nbsp;call&nbsp;to&nbsp;Read</span><br>
<span class="lineno">395</span><span class="comment" id="1601940">//&nbsp;updates&nbsp;N&nbsp;to&nbsp;reflect&nbsp;the&nbsp;new&nbsp;amount&nbsp;remaining.</span><br>
<span class="lineno"></span><span class="keyword" id="1601990">type</span>&nbsp;<span class="ident" id="1601995">LimitedReader</span>&nbsp;<span class="keyword" id="1602009">struct</span>&nbsp;<span class="op" id="1602016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602019">R</span>&nbsp;<span class="ident" id="1602021">Reader</span>&nbsp;<span class="comment" id="1602028">//&nbsp;underlying&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602050">N</span>&nbsp;<span class="ident" id="1602052">int64</span>&nbsp;&nbsp;<span class="comment" id="1602059">//&nbsp;max&nbsp;bytes&nbsp;remaining</span><br>
<span class="lineno"></span><span class="op" id="1602082">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="1602085">func</span>&nbsp;<span class="op" id="1602090">(</span><span class="ident" id="1602091">l</span>&nbsp;<span class="op" id="1602093">*</span><span class="ident" id="1602094">LimitedReader</span><span class="op" id="1602107">)</span>&nbsp;<span class="ident" id="1602109">Read</span><span class="op" id="1602113">(</span><span class="ident" id="1602114">p</span>&nbsp;<span class="op" id="1602116">[</span><span class="op" id="1602117">]</span><span class="builtintype" id="1602118">byte</span><span class="op" id="1602122">)</span>&nbsp;<span class="op" id="1602124">(</span><span class="ident" id="1602125">n</span>&nbsp;<span class="builtintype" id="1602127">int</span><span class="op" id="1602130">,</span>&nbsp;<span class="ident" id="1602132">err</span>&nbsp;<span class="builtintype" id="1602136">error</span><span class="op" id="1602141">)</span>&nbsp;<span class="op" id="1602143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602146">if</span>&nbsp;<span class="ident" id="1602149">l</span><span class="op" id="1602150">.</span><span class="ident" id="1602151">N</span>&nbsp;<span class="op" id="1602153">&lt;=</span>&nbsp;<span class="num" id="1602156">0</span>&nbsp;<span class="op" id="1602158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602162">return</span>&nbsp;<span class="num" id="1602169">0</span><span class="op" id="1602170">,</span>&nbsp;<span class="ident" id="1602172">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1602177">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602180">if</span>&nbsp;<span class="ident" id="1602183">int64</span><span class="op" id="1602188">(</span><span class="builtinfunc" id="1602189">len</span><span class="op" id="1602192">(</span><span class="ident" id="1602193">p</span><span class="op" id="1602194">)</span><span class="op" id="1602195">)</span>&nbsp;<span class="op" id="1602197">&gt;</span>&nbsp;<span class="ident" id="1602199">l</span><span class="op" id="1602200">.</span><span class="ident" id="1602201">N</span>&nbsp;<span class="op" id="1602203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602207">p</span>&nbsp;<span class="op" id="1602209">=</span>&nbsp;<span class="ident" id="1602211">p</span><span class="op" id="1602212">[</span><span class="num" id="1602213">0</span><span class="op" id="1602214">:</span><span class="ident" id="1602215">l</span><span class="op" id="1602216">.</span><span class="ident" id="1602217">N</span><span class="op" id="1602218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1602221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602224">n</span><span class="op" id="1602225">,</span>&nbsp;<span class="ident" id="1602227">err</span>&nbsp;<span class="op" id="1602231">=</span>&nbsp;<span class="ident" id="1602233">l</span><span class="op" id="1602234">.</span><span class="ident" id="1602235">R</span><span class="op" id="1602236">.</span><span class="ident" id="1602237">Read</span><span class="op" id="1602241">(</span><span class="ident" id="1602242">p</span><span class="op" id="1602243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602246">l</span><span class="op" id="1602247">.</span><span class="ident" id="1602248">N</span>&nbsp;<span class="op" id="1602250">-=</span>&nbsp;<span class="ident" id="1602253">int64</span><span class="op" id="1602258">(</span><span class="ident" id="1602259">n</span><span class="op" id="1602260">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602263">return</span><br>
<span class="lineno"></span><span class="op" id="1602270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1602273">//&nbsp;NewSectionReader&nbsp;returns&nbsp;a&nbsp;SectionReader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span><span class="comment" id="1602335">//&nbsp;starting&nbsp;at&nbsp;offset&nbsp;off&nbsp;and&nbsp;stops&nbsp;with&nbsp;EOF&nbsp;after&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno">415</span><span class="keyword" id="1602395">func</span>&nbsp;<span class="ident" id="1602400">NewSectionReader</span><span class="op" id="1602416">(</span><span class="ident" id="1602417">r</span>&nbsp;<span class="ident" id="1602419">ReaderAt</span><span class="op" id="1602427">,</span>&nbsp;<span class="ident" id="1602429">off</span>&nbsp;<span class="ident" id="1602433">int64</span><span class="op" id="1602438">,</span>&nbsp;<span class="ident" id="1602440">n</span>&nbsp;<span class="ident" id="1602442">int64</span><span class="op" id="1602447">)</span>&nbsp;<span class="op" id="1602449">*</span><span class="ident" id="1602450">SectionReader</span>&nbsp;<span class="op" id="1602464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602467">return</span>&nbsp;<span class="op" id="1602474">&amp;</span><span class="ident" id="1602475">SectionReader</span><span class="op" id="1602488">{</span><span class="ident" id="1602489">r</span><span class="op" id="1602490">,</span>&nbsp;<span class="ident" id="1602492">off</span><span class="op" id="1602495">,</span>&nbsp;<span class="ident" id="1602497">off</span><span class="op" id="1602500">,</span>&nbsp;<span class="ident" id="1602502">off</span>&nbsp;<span class="op" id="1602506">+</span>&nbsp;<span class="ident" id="1602508">n</span><span class="op" id="1602509">}</span><br>
<span class="lineno"></span><span class="op" id="1602511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1602514">//&nbsp;SectionReader&nbsp;implements&nbsp;Read,&nbsp;Seek,&nbsp;and&nbsp;ReadAt&nbsp;on&nbsp;a&nbsp;section</span><br>
<span class="lineno">420</span><span class="comment" id="1602578">//&nbsp;of&nbsp;an&nbsp;underlying&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="1602608">type</span>&nbsp;<span class="ident" id="1602613">SectionReader</span>&nbsp;<span class="keyword" id="1602627">struct</span>&nbsp;<span class="op" id="1602634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602637">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1602643">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602653">base</span>&nbsp;&nbsp;<span class="ident" id="1602659">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602666">off</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1602672">int64</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602679">limit</span>&nbsp;<span class="ident" id="1602685">int64</span><br>
<span class="lineno"></span><span class="op" id="1602691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1602694">func</span>&nbsp;<span class="op" id="1602699">(</span><span class="ident" id="1602700">s</span>&nbsp;<span class="op" id="1602702">*</span><span class="ident" id="1602703">SectionReader</span><span class="op" id="1602716">)</span>&nbsp;<span class="ident" id="1602718">Read</span><span class="op" id="1602722">(</span><span class="ident" id="1602723">p</span>&nbsp;<span class="op" id="1602725">[</span><span class="op" id="1602726">]</span><span class="builtintype" id="1602727">byte</span><span class="op" id="1602731">)</span>&nbsp;<span class="op" id="1602733">(</span><span class="ident" id="1602734">n</span>&nbsp;<span class="builtintype" id="1602736">int</span><span class="op" id="1602739">,</span>&nbsp;<span class="ident" id="1602741">err</span>&nbsp;<span class="builtintype" id="1602745">error</span><span class="op" id="1602750">)</span>&nbsp;<span class="op" id="1602752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602755">if</span>&nbsp;<span class="ident" id="1602758">s</span><span class="op" id="1602759">.</span><span class="ident" id="1602760">off</span>&nbsp;<span class="op" id="1602764">&gt;=</span>&nbsp;<span class="ident" id="1602767">s</span><span class="op" id="1602768">.</span><span class="ident" id="1602769">limit</span>&nbsp;<span class="op" id="1602775">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602779">return</span>&nbsp;<span class="num" id="1602786">0</span><span class="op" id="1602787">,</span>&nbsp;<span class="ident" id="1602789">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1602794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602797">if</span>&nbsp;<span class="ident" id="1602800">max</span>&nbsp;<span class="op" id="1602804">:=</span>&nbsp;<span class="ident" id="1602807">s</span><span class="op" id="1602808">.</span><span class="ident" id="1602809">limit</span>&nbsp;<span class="op" id="1602815">-</span>&nbsp;<span class="ident" id="1602817">s</span><span class="op" id="1602818">.</span><span class="ident" id="1602819">off</span><span class="op" id="1602822">;</span>&nbsp;<span class="ident" id="1602824">int64</span><span class="op" id="1602829">(</span><span class="builtinfunc" id="1602830">len</span><span class="op" id="1602833">(</span><span class="ident" id="1602834">p</span><span class="op" id="1602835">)</span><span class="op" id="1602836">)</span>&nbsp;<span class="op" id="1602838">&gt;</span>&nbsp;<span class="ident" id="1602840">max</span>&nbsp;<span class="op" id="1602844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602848">p</span>&nbsp;<span class="op" id="1602850">=</span>&nbsp;<span class="ident" id="1602852">p</span><span class="op" id="1602853">[</span><span class="num" id="1602854">0</span><span class="op" id="1602855">:</span><span class="ident" id="1602856">max</span><span class="op" id="1602859">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1602862">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602865">n</span><span class="op" id="1602866">,</span>&nbsp;<span class="ident" id="1602868">err</span>&nbsp;<span class="op" id="1602872">=</span>&nbsp;<span class="ident" id="1602874">s</span><span class="op" id="1602875">.</span><span class="ident" id="1602876">r</span><span class="op" id="1602877">.</span><span class="ident" id="1602878">ReadAt</span><span class="op" id="1602884">(</span><span class="ident" id="1602885">p</span><span class="op" id="1602886">,</span>&nbsp;<span class="ident" id="1602888">s</span><span class="op" id="1602889">.</span><span class="ident" id="1602890">off</span><span class="op" id="1602893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1602896">s</span><span class="op" id="1602897">.</span><span class="ident" id="1602898">off</span>&nbsp;<span class="op" id="1602902">+=</span>&nbsp;<span class="ident" id="1602905">int64</span><span class="op" id="1602910">(</span><span class="ident" id="1602911">n</span><span class="op" id="1602912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1602915">return</span><br>
<span class="lineno"></span><span class="op" id="1602922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword" id="1602925">var</span>&nbsp;<span class="ident" id="1602929">errWhence</span>&nbsp;<span class="op" id="1602939">=</span>&nbsp;<span class="ident" id="1602941">errors</span><span class="op" id="1602947">.</span><span class="ident" id="1602948">New</span><span class="op" id="1602951">(</span><span class="string" id="1602952">&#34;Seek:&nbsp;invalid&nbsp;whence&#34;</span><span class="op" id="1602974">)</span><br>
<span class="lineno"></span><span class="keyword" id="1602976">var</span>&nbsp;<span class="ident" id="1602980">errOffset</span>&nbsp;<span class="op" id="1602990">=</span>&nbsp;<span class="ident" id="1602992">errors</span><span class="op" id="1602998">.</span><span class="ident" id="1602999">New</span><span class="op" id="1603002">(</span><span class="string" id="1603003">&#34;Seek:&nbsp;invalid&nbsp;offset&#34;</span><span class="op" id="1603025">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1603028">func</span>&nbsp;<span class="op" id="1603033">(</span><span class="ident" id="1603034">s</span>&nbsp;<span class="op" id="1603036">*</span><span class="ident" id="1603037">SectionReader</span><span class="op" id="1603050">)</span>&nbsp;<span class="ident" id="1603052">Seek</span><span class="op" id="1603056">(</span><span class="ident" id="1603057">offset</span>&nbsp;<span class="ident" id="1603064">int64</span><span class="op" id="1603069">,</span>&nbsp;<span class="ident" id="1603071">whence</span>&nbsp;<span class="builtintype" id="1603078">int</span><span class="op" id="1603081">)</span>&nbsp;<span class="op" id="1603083">(</span><span class="ident" id="1603084">int64</span><span class="op" id="1603089">,</span>&nbsp;<span class="builtintype" id="1603091">error</span><span class="op" id="1603096">)</span>&nbsp;<span class="op" id="1603098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603101">switch</span>&nbsp;<span class="ident" id="1603108">whence</span>&nbsp;<span class="op" id="1603115">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603118">default</span><span class="op" id="1603125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603129">return</span>&nbsp;<span class="num" id="1603136">0</span><span class="op" id="1603137">,</span>&nbsp;<span class="ident" id="1603139">errWhence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603150">case</span>&nbsp;<span class="num" id="1603155">0</span><span class="op" id="1603156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603160">offset</span>&nbsp;<span class="op" id="1603167">+=</span>&nbsp;<span class="ident" id="1603170">s</span><span class="op" id="1603171">.</span><span class="ident" id="1603172">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603178">case</span>&nbsp;<span class="num" id="1603183">1</span><span class="op" id="1603184">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603188">offset</span>&nbsp;<span class="op" id="1603195">+=</span>&nbsp;<span class="ident" id="1603198">s</span><span class="op" id="1603199">.</span><span class="ident" id="1603200">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603205">case</span>&nbsp;<span class="num" id="1603210">2</span><span class="op" id="1603211">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603215">offset</span>&nbsp;<span class="op" id="1603222">+=</span>&nbsp;<span class="ident" id="1603225">s</span><span class="op" id="1603226">.</span><span class="ident" id="1603227">limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1603234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603237">if</span>&nbsp;<span class="ident" id="1603240">offset</span>&nbsp;<span class="op" id="1603247">&lt;</span>&nbsp;<span class="ident" id="1603249">s</span><span class="op" id="1603250">.</span><span class="ident" id="1603251">base</span>&nbsp;<span class="op" id="1603256">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603260">return</span>&nbsp;<span class="num" id="1603267">0</span><span class="op" id="1603268">,</span>&nbsp;<span class="ident" id="1603270">errOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1603281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603284">s</span><span class="op" id="1603285">.</span><span class="ident" id="1603286">off</span>&nbsp;<span class="op" id="1603290">=</span>&nbsp;<span class="ident" id="1603292">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603300">return</span>&nbsp;<span class="ident" id="1603307">offset</span>&nbsp;<span class="op" id="1603314">-</span>&nbsp;<span class="ident" id="1603316">s</span><span class="op" id="1603317">.</span><span class="ident" id="1603318">base</span><span class="op" id="1603322">,</span>&nbsp;<span class="ident" id="1603324">nil</span><br>
<span class="lineno"></span><span class="op" id="1603328">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="keyword" id="1603331">func</span>&nbsp;<span class="op" id="1603336">(</span><span class="ident" id="1603337">s</span>&nbsp;<span class="op" id="1603339">*</span><span class="ident" id="1603340">SectionReader</span><span class="op" id="1603353">)</span>&nbsp;<span class="ident" id="1603355">ReadAt</span><span class="op" id="1603361">(</span><span class="ident" id="1603362">p</span>&nbsp;<span class="op" id="1603364">[</span><span class="op" id="1603365">]</span><span class="builtintype" id="1603366">byte</span><span class="op" id="1603370">,</span>&nbsp;<span class="ident" id="1603372">off</span>&nbsp;<span class="ident" id="1603376">int64</span><span class="op" id="1603381">)</span>&nbsp;<span class="op" id="1603383">(</span><span class="ident" id="1603384">n</span>&nbsp;<span class="builtintype" id="1603386">int</span><span class="op" id="1603389">,</span>&nbsp;<span class="ident" id="1603391">err</span>&nbsp;<span class="builtintype" id="1603395">error</span><span class="op" id="1603400">)</span>&nbsp;<span class="op" id="1603402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603405">if</span>&nbsp;<span class="ident" id="1603408">off</span>&nbsp;<span class="op" id="1603412">&lt;</span>&nbsp;<span class="num" id="1603414">0</span>&nbsp;<span class="op" id="1603416">||</span>&nbsp;<span class="ident" id="1603419">off</span>&nbsp;<span class="op" id="1603423">&gt;=</span>&nbsp;<span class="ident" id="1603426">s</span><span class="op" id="1603427">.</span><span class="ident" id="1603428">limit</span><span class="op" id="1603433">-</span><span class="ident" id="1603434">s</span><span class="op" id="1603435">.</span><span class="ident" id="1603436">base</span>&nbsp;<span class="op" id="1603441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603445">return</span>&nbsp;<span class="num" id="1603452">0</span><span class="op" id="1603453">,</span>&nbsp;<span class="ident" id="1603455">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1603460">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603463">off</span>&nbsp;<span class="op" id="1603467">+=</span>&nbsp;<span class="ident" id="1603470">s</span><span class="op" id="1603471">.</span><span class="ident" id="1603472">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603478">if</span>&nbsp;<span class="ident" id="1603481">max</span>&nbsp;<span class="op" id="1603485">:=</span>&nbsp;<span class="ident" id="1603488">s</span><span class="op" id="1603489">.</span><span class="ident" id="1603490">limit</span>&nbsp;<span class="op" id="1603496">-</span>&nbsp;<span class="ident" id="1603498">off</span><span class="op" id="1603501">;</span>&nbsp;<span class="ident" id="1603503">int64</span><span class="op" id="1603508">(</span><span class="builtinfunc" id="1603509">len</span><span class="op" id="1603512">(</span><span class="ident" id="1603513">p</span><span class="op" id="1603514">)</span><span class="op" id="1603515">)</span>&nbsp;<span class="op" id="1603517">&gt;</span>&nbsp;<span class="ident" id="1603519">max</span>&nbsp;<span class="op" id="1603523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603527">p</span>&nbsp;<span class="op" id="1603529">=</span>&nbsp;<span class="ident" id="1603531">p</span><span class="op" id="1603532">[</span><span class="num" id="1603533">0</span><span class="op" id="1603534">:</span><span class="ident" id="1603535">max</span><span class="op" id="1603538">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603542">n</span><span class="op" id="1603543">,</span>&nbsp;<span class="ident" id="1603545">err</span>&nbsp;<span class="op" id="1603549">=</span>&nbsp;<span class="ident" id="1603551">s</span><span class="op" id="1603552">.</span><span class="ident" id="1603553">r</span><span class="op" id="1603554">.</span><span class="ident" id="1603555">ReadAt</span><span class="op" id="1603561">(</span><span class="ident" id="1603562">p</span><span class="op" id="1603563">,</span>&nbsp;<span class="ident" id="1603565">off</span><span class="op" id="1603568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603572">if</span>&nbsp;<span class="ident" id="1603575">err</span>&nbsp;<span class="op" id="1603579">==</span>&nbsp;<span class="ident" id="1603582">nil</span>&nbsp;<span class="op" id="1603586">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1603591">err</span>&nbsp;<span class="op" id="1603595">=</span>&nbsp;<span class="ident" id="1603597">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1603603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603607">return</span>&nbsp;<span class="ident" id="1603614">n</span><span class="op" id="1603615">,</span>&nbsp;<span class="ident" id="1603617">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1603622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1603625">return</span>&nbsp;<span class="ident" id="1603632">s</span><span class="op" id="1603633">.</span><span class="ident" id="1603634">r</span><span class="op" id="1603635">.</span><span class="ident" id="1603636">ReadAt</span><span class="op" id="1603642">(</span><span class="ident" id="1603643">p</span><span class="op" id="1603644">,</span>&nbsp;<span class="ident" id="1603646">off</span><span class="op" id="1603649">)</span><br>
<span class="lineno">475</span><span class="op" id="1603651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1603654">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;section&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="1603704">func</span>&nbsp;<span class="op" id="1603709">(</span><span class="ident" id="1603710">s</span>&nbsp;<span class="op" id="1603712">*</span><span class="ident" id="1603713">SectionReader</span><span class="op" id="1603726">)</span>&nbsp;<span class="ident" id="1603728">Size</span><span class="op" id="1603732">(</span><span class="op" id="1603733">)</span>&nbsp;<span class="ident" id="1603735">int64</span>&nbsp;<span class="op" id="1603741">{</span>&nbsp;<span class="keyword" id="1603743">return</span>&nbsp;<span class="ident" id="1603750">s</span><span class="op" id="1603751">.</span><span class="ident" id="1603752">limit</span>&nbsp;<span class="op" id="1603758">-</span>&nbsp;<span class="ident" id="1603760">s</span><span class="op" id="1603761">.</span><span class="ident" id="1603762">base</span>&nbsp;<span class="op" id="1603767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="comment" id="1603770">//&nbsp;TeeReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;writes&nbsp;to&nbsp;w&nbsp;what&nbsp;it&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="1603839">//&nbsp;All&nbsp;reads&nbsp;from&nbsp;r&nbsp;performed&nbsp;through&nbsp;it&nbsp;are&nbsp;matched&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1603897">//&nbsp;corresponding&nbsp;writes&nbsp;to&nbsp;w.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;internal&nbsp;buffering&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="1603961">//&nbsp;the&nbsp;write&nbsp;must&nbsp;complete&nbsp;before&nbsp;the&nbsp;read&nbsp;completes.</span><br>
<span class="lineno"></span><span class="comment" id="1604015">//&nbsp;Any&nbsp;error&nbsp;encountered&nbsp;while&nbsp;writing&nbsp;is&nbsp;reported&nbsp;as&nbsp;a&nbsp;read&nbsp;error.</span><br>
<span class="lineno">485</span><span class="keyword" id="1604083">func</span>&nbsp;<span class="ident" id="1604088">TeeReader</span><span class="op" id="1604097">(</span><span class="ident" id="1604098">r</span>&nbsp;<span class="ident" id="1604100">Reader</span><span class="op" id="1604106">,</span>&nbsp;<span class="ident" id="1604108">w</span>&nbsp;<span class="ident" id="1604110">Writer</span><span class="op" id="1604116">)</span>&nbsp;<span class="ident" id="1604118">Reader</span>&nbsp;<span class="op" id="1604125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1604128">return</span>&nbsp;<span class="op" id="1604135">&amp;</span><span class="ident" id="1604136">teeReader</span><span class="op" id="1604145">{</span><span class="ident" id="1604146">r</span><span class="op" id="1604147">,</span>&nbsp;<span class="ident" id="1604149">w</span><span class="op" id="1604150">}</span><br>
<span class="lineno"></span><span class="op" id="1604152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1604155">type</span>&nbsp;<span class="ident" id="1604160">teeReader</span>&nbsp;<span class="keyword" id="1604170">struct</span>&nbsp;<span class="op" id="1604177">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1604180">r</span>&nbsp;<span class="ident" id="1604182">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1604190">w</span>&nbsp;<span class="ident" id="1604192">Writer</span><br>
<span class="lineno"></span><span class="op" id="1604199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1604202">func</span>&nbsp;<span class="op" id="1604207">(</span><span class="ident" id="1604208">t</span>&nbsp;<span class="op" id="1604210">*</span><span class="ident" id="1604211">teeReader</span><span class="op" id="1604220">)</span>&nbsp;<span class="ident" id="1604222">Read</span><span class="op" id="1604226">(</span><span class="ident" id="1604227">p</span>&nbsp;<span class="op" id="1604229">[</span><span class="op" id="1604230">]</span><span class="builtintype" id="1604231">byte</span><span class="op" id="1604235">)</span>&nbsp;<span class="op" id="1604237">(</span><span class="ident" id="1604238">n</span>&nbsp;<span class="builtintype" id="1604240">int</span><span class="op" id="1604243">,</span>&nbsp;<span class="ident" id="1604245">err</span>&nbsp;<span class="builtintype" id="1604249">error</span><span class="op" id="1604254">)</span>&nbsp;<span class="op" id="1604256">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1604259">n</span><span class="op" id="1604260">,</span>&nbsp;<span class="ident" id="1604262">err</span>&nbsp;<span class="op" id="1604266">=</span>&nbsp;<span class="ident" id="1604268">t</span><span class="op" id="1604269">.</span><span class="ident" id="1604270">r</span><span class="op" id="1604271">.</span><span class="ident" id="1604272">Read</span><span class="op" id="1604276">(</span><span class="ident" id="1604277">p</span><span class="op" id="1604278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1604281">if</span>&nbsp;<span class="ident" id="1604284">n</span>&nbsp;<span class="op" id="1604286">&gt;</span>&nbsp;<span class="num" id="1604288">0</span>&nbsp;<span class="op" id="1604290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1604294">if</span>&nbsp;<span class="ident" id="1604297">n</span><span class="op" id="1604298">,</span>&nbsp;<span class="ident" id="1604300">err</span>&nbsp;<span class="op" id="1604304">:=</span>&nbsp;<span class="ident" id="1604307">t</span><span class="op" id="1604308">.</span><span class="ident" id="1604309">w</span><span class="op" id="1604310">.</span><span class="ident" id="1604311">Write</span><span class="op" id="1604316">(</span><span class="ident" id="1604317">p</span><span class="op" id="1604318">[</span><span class="op" id="1604319">:</span><span class="ident" id="1604320">n</span><span class="op" id="1604321">]</span><span class="op" id="1604322">)</span><span class="op" id="1604323">;</span>&nbsp;<span class="ident" id="1604325">err</span>&nbsp;<span class="op" id="1604329">!=</span>&nbsp;<span class="ident" id="1604332">nil</span>&nbsp;<span class="op" id="1604336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1604341">return</span>&nbsp;<span class="ident" id="1604348">n</span><span class="op" id="1604349">,</span>&nbsp;<span class="ident" id="1604351">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1604357">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1604360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1604363">return</span><br>
<span class="lineno"></span><span class="op" id="1604370">}</span>
</div>
</body>
</html>
