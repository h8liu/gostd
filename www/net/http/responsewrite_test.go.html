<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8036991">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8037047">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8037101">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8037152">package</span>&nbsp;<span class="ident" id="8037160">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8037166">import</span>&nbsp;<span class="op" id="8037173">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037176">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037185">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037198">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037209">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8037219">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8037222">type</span>&nbsp;<span class="ident" id="8037227">respWriteTest</span>&nbsp;<span class="keyword" id="8037241">struct</span>&nbsp;<span class="op" id="8037248">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037251">Resp</span>&nbsp;<span class="ident" id="8037256">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037266">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="8037271">string</span><br>
<span class="lineno"></span><span class="op" id="8037278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8037281">func</span>&nbsp;<span class="ident" id="8037286">TestResponseWrite</span><span class="op" id="8037303">(</span><span class="ident" id="8037304">t</span>&nbsp;<span class="op" id="8037306">*</span><span class="ident" id="8037307">testing</span><span class="op" id="8037314">.</span><span class="ident" id="8037315">T</span><span class="op" id="8037316">)</span>&nbsp;<span class="op" id="8037318">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037321">respWriteTests</span>&nbsp;<span class="op" id="8037336">:=</span>&nbsp;<span class="op" id="8037339">[</span><span class="op" id="8037340">]</span><span class="ident" id="8037341">respWriteTest</span><span class="op" id="8037354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8037358">//&nbsp;HTTP/1.0,&nbsp;identity&nbsp;coding;&nbsp;no&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8037401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037406">Response</span><span class="op" id="8037414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037420">StatusCode</span><span class="op" id="8037430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8037435">503</span><span class="op" id="8037438">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037444">ProtoMajor</span><span class="op" id="8037454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8037459">1</span><span class="op" id="8037460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037466">ProtoMinor</span><span class="op" id="8037476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8037481">0</span><span class="op" id="8037482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037488">Request</span><span class="op" id="8037495">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037503">dummyReq</span><span class="op" id="8037511">(</span><span class="string" id="8037512">&#34;GET&#34;</span><span class="op" id="8037517">)</span><span class="op" id="8037518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037524">Header</span><span class="op" id="8037530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037539">Header</span><span class="op" id="8037545">{</span><span class="op" id="8037546">}</span><span class="op" id="8037547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037553">Body</span><span class="op" id="8037557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037568">ioutil</span><span class="op" id="8037574">.</span><span class="ident" id="8037575">NopCloser</span><span class="op" id="8037584">(</span><span class="ident" id="8037585">strings</span><span class="op" id="8037592">.</span><span class="ident" id="8037593">NewReader</span><span class="op" id="8037602">(</span><span class="string" id="8037603">&#34;abcdef&#34;</span><span class="op" id="8037611">)</span><span class="op" id="8037612">)</span><span class="op" id="8037613">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037619">ContentLength</span><span class="op" id="8037632">:</span>&nbsp;<span class="num" id="8037634">6</span><span class="op" id="8037635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8037640">}</span><span class="op" id="8037641">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037647">&#34;HTTP/1.0&nbsp;503&nbsp;Service&nbsp;Unavailable\r\n&#34;</span>&nbsp;<span class="op" id="8037686">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037692">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8037720">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8037726">&#34;abcdef&#34;</span><span class="op" id="8037734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8037738">}</span><span class="op" id="8037739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8037743">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8037791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037796">Response</span><span class="op" id="8037804">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037810">StatusCode</span><span class="op" id="8037820">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8037825">200</span><span class="op" id="8037828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037834">ProtoMajor</span><span class="op" id="8037844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8037849">1</span><span class="op" id="8037850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037856">ProtoMinor</span><span class="op" id="8037866">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8037871">0</span><span class="op" id="8037872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037878">Request</span><span class="op" id="8037885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037893">dummyReq</span><span class="op" id="8037901">(</span><span class="string" id="8037902">&#34;GET&#34;</span><span class="op" id="8037907">)</span><span class="op" id="8037908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037914">Header</span><span class="op" id="8037920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037929">Header</span><span class="op" id="8037935">{</span><span class="op" id="8037936">}</span><span class="op" id="8037937">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8037943">Body</span><span class="op" id="8037947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8037958">ioutil</span><span class="op" id="8037964">.</span><span class="ident" id="8037965">NopCloser</span><span class="op" id="8037974">(</span><span class="ident" id="8037975">strings</span><span class="op" id="8037982">.</span><span class="ident" id="8037983">NewReader</span><span class="op" id="8037992">(</span><span class="string" id="8037993">&#34;abcdef&#34;</span><span class="op" id="8038001">)</span><span class="op" id="8038002">)</span><span class="op" id="8038003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038009">ContentLength</span><span class="op" id="8038022">:</span>&nbsp;<span class="op" id="8038024">-</span><span class="num" id="8038025">1</span><span class="op" id="8038026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038031">}</span><span class="op" id="8038032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038037">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8038059">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038065">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8038072">+</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038078">&#34;abcdef&#34;</span><span class="op" id="8038086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038090">}</span><span class="op" id="8038091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8038095">//&nbsp;HTTP/1.1&nbsp;response&nbsp;with&nbsp;unknown&nbsp;length&nbsp;and&nbsp;Connection:&nbsp;close</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038165">Response</span><span class="op" id="8038173">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038179">StatusCode</span><span class="op" id="8038189">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8038194">200</span><span class="op" id="8038197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038203">ProtoMajor</span><span class="op" id="8038213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8038218">1</span><span class="op" id="8038219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038225">ProtoMinor</span><span class="op" id="8038235">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8038240">1</span><span class="op" id="8038241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038247">Request</span><span class="op" id="8038254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038262">dummyReq</span><span class="op" id="8038270">(</span><span class="string" id="8038271">&#34;GET&#34;</span><span class="op" id="8038276">)</span><span class="op" id="8038277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038283">Header</span><span class="op" id="8038289">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038298">Header</span><span class="op" id="8038304">{</span><span class="op" id="8038305">}</span><span class="op" id="8038306">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038312">Body</span><span class="op" id="8038316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038327">ioutil</span><span class="op" id="8038333">.</span><span class="ident" id="8038334">NopCloser</span><span class="op" id="8038343">(</span><span class="ident" id="8038344">strings</span><span class="op" id="8038351">.</span><span class="ident" id="8038352">NewReader</span><span class="op" id="8038361">(</span><span class="string" id="8038362">&#34;abcdef&#34;</span><span class="op" id="8038370">)</span><span class="op" id="8038371">)</span><span class="op" id="8038372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038378">ContentLength</span><span class="op" id="8038391">:</span>&nbsp;<span class="op" id="8038393">-</span><span class="num" id="8038394">1</span><span class="op" id="8038395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038401">Close</span><span class="op" id="8038406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038416">true</span><span class="op" id="8038420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038425">}</span><span class="op" id="8038426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038431">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8038453">+</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038459">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8038483">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038489">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8038496">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038502">&#34;abcdef&#34;</span><span class="op" id="8038510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038514">}</span><span class="op" id="8038515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8038519">//&nbsp;HTTP/1.1&nbsp;response&nbsp;with&nbsp;unknown&nbsp;length&nbsp;and&nbsp;not&nbsp;setting&nbsp;connection:&nbsp;close</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038601">Response</span><span class="op" id="8038609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038615">StatusCode</span><span class="op" id="8038625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8038630">200</span><span class="op" id="8038633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038639">ProtoMajor</span><span class="op" id="8038649">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8038654">1</span><span class="op" id="8038655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038661">ProtoMinor</span><span class="op" id="8038671">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8038676">1</span><span class="op" id="8038677">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038683">Request</span><span class="op" id="8038690">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038698">dummyReq11</span><span class="op" id="8038708">(</span><span class="string" id="8038709">&#34;GET&#34;</span><span class="op" id="8038714">)</span><span class="op" id="8038715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038721">Header</span><span class="op" id="8038727">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038736">Header</span><span class="op" id="8038742">{</span><span class="op" id="8038743">}</span><span class="op" id="8038744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038750">Body</span><span class="op" id="8038754">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038765">ioutil</span><span class="op" id="8038771">.</span><span class="ident" id="8038772">NopCloser</span><span class="op" id="8038781">(</span><span class="ident" id="8038782">strings</span><span class="op" id="8038789">.</span><span class="ident" id="8038790">NewReader</span><span class="op" id="8038799">(</span><span class="string" id="8038800">&#34;abcdef&#34;</span><span class="op" id="8038808">)</span><span class="op" id="8038809">)</span><span class="op" id="8038810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038816">ContentLength</span><span class="op" id="8038829">:</span>&nbsp;<span class="op" id="8038831">-</span><span class="num" id="8038832">1</span><span class="op" id="8038833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8038839">Close</span><span class="op" id="8038844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8038854">false</span><span class="op" id="8038859">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038864">}</span><span class="op" id="8038865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038870">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8038892">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038898">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8038922">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038928">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8038935">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8038941">&#34;abcdef&#34;</span><span class="op" id="8038949">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8038953">}</span><span class="op" id="8038954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8038958">//&nbsp;HTTP/1.1&nbsp;response&nbsp;with&nbsp;unknown&nbsp;length&nbsp;and&nbsp;not&nbsp;setting&nbsp;connection:&nbsp;close,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8039040">//&nbsp;setting&nbsp;chunked.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039067">Response</span><span class="op" id="8039075">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039081">StatusCode</span><span class="op" id="8039091">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039099">200</span><span class="op" id="8039102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039108">ProtoMajor</span><span class="op" id="8039118">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039126">1</span><span class="op" id="8039127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039133">ProtoMinor</span><span class="op" id="8039143">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039151">1</span><span class="op" id="8039152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039158">Request</span><span class="op" id="8039165">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039176">dummyReq11</span><span class="op" id="8039186">(</span><span class="string" id="8039187">&#34;GET&#34;</span><span class="op" id="8039192">)</span><span class="op" id="8039193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039199">Header</span><span class="op" id="8039205">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039217">Header</span><span class="op" id="8039223">{</span><span class="op" id="8039224">}</span><span class="op" id="8039225">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039231">Body</span><span class="op" id="8039235">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039249">ioutil</span><span class="op" id="8039255">.</span><span class="ident" id="8039256">NopCloser</span><span class="op" id="8039265">(</span><span class="ident" id="8039266">strings</span><span class="op" id="8039273">.</span><span class="ident" id="8039274">NewReader</span><span class="op" id="8039283">(</span><span class="string" id="8039284">&#34;abcdef&#34;</span><span class="op" id="8039292">)</span><span class="op" id="8039293">)</span><span class="op" id="8039294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039300">ContentLength</span><span class="op" id="8039313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8039318">-</span><span class="num" id="8039319">1</span><span class="op" id="8039320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039326">TransferEncoding</span><span class="op" id="8039342">:</span>&nbsp;<span class="op" id="8039344">[</span><span class="op" id="8039345">]</span><span class="builtintype" id="8039346">string</span><span class="op" id="8039352">{</span><span class="string" id="8039353">&#34;chunked&#34;</span><span class="op" id="8039362">}</span><span class="op" id="8039363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039369">Close</span><span class="op" id="8039374">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039387">false</span><span class="op" id="8039392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039397">}</span><span class="op" id="8039398">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8039403">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8039425">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8039431">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8039468">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8039474">&#34;6\r\nabcdef\r\n0\r\n\r\n&#34;</span><span class="op" id="8039500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039504">}</span><span class="op" id="8039505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8039509">//&nbsp;HTTP/1.1&nbsp;response&nbsp;0&nbsp;content-length,&nbsp;and&nbsp;nil&nbsp;body</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039568">Response</span><span class="op" id="8039576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039582">StatusCode</span><span class="op" id="8039592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039597">200</span><span class="op" id="8039600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039606">ProtoMajor</span><span class="op" id="8039616">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039621">1</span><span class="op" id="8039622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039628">ProtoMinor</span><span class="op" id="8039638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039643">1</span><span class="op" id="8039644">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039650">Request</span><span class="op" id="8039657">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039665">dummyReq11</span><span class="op" id="8039675">(</span><span class="string" id="8039676">&#34;GET&#34;</span><span class="op" id="8039681">)</span><span class="op" id="8039682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039688">Header</span><span class="op" id="8039694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039703">Header</span><span class="op" id="8039709">{</span><span class="op" id="8039710">}</span><span class="op" id="8039711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039717">Body</span><span class="op" id="8039721">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039732">nil</span><span class="op" id="8039735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039741">ContentLength</span><span class="op" id="8039754">:</span>&nbsp;<span class="num" id="8039756">0</span><span class="op" id="8039757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039763">Close</span><span class="op" id="8039768">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8039778">false</span><span class="op" id="8039783">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039788">}</span><span class="op" id="8039789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8039794">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8039816">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8039822">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="8039846">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8039852">&#34;\r\n&#34;</span><span class="op" id="8039858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039862">}</span><span class="op" id="8039863">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8039867">//&nbsp;HTTP/1.1&nbsp;response&nbsp;0&nbsp;content-length,&nbsp;and&nbsp;non-nil&nbsp;empty&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8039931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039936">Response</span><span class="op" id="8039944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039950">StatusCode</span><span class="op" id="8039960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039965">200</span><span class="op" id="8039968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039974">ProtoMajor</span><span class="op" id="8039984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8039989">1</span><span class="op" id="8039990">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8039996">ProtoMinor</span><span class="op" id="8040006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040011">1</span><span class="op" id="8040012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040018">Request</span><span class="op" id="8040025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040033">dummyReq11</span><span class="op" id="8040043">(</span><span class="string" id="8040044">&#34;GET&#34;</span><span class="op" id="8040049">)</span><span class="op" id="8040050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040056">Header</span><span class="op" id="8040062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040071">Header</span><span class="op" id="8040077">{</span><span class="op" id="8040078">}</span><span class="op" id="8040079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040085">Body</span><span class="op" id="8040089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040100">ioutil</span><span class="op" id="8040106">.</span><span class="ident" id="8040107">NopCloser</span><span class="op" id="8040116">(</span><span class="ident" id="8040117">strings</span><span class="op" id="8040124">.</span><span class="ident" id="8040125">NewReader</span><span class="op" id="8040134">(</span><span class="string" id="8040135">&#34;&#34;</span><span class="op" id="8040137">)</span><span class="op" id="8040138">)</span><span class="op" id="8040139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040145">ContentLength</span><span class="op" id="8040158">:</span>&nbsp;<span class="num" id="8040160">0</span><span class="op" id="8040161">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040167">Close</span><span class="op" id="8040172">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040182">false</span><span class="op" id="8040187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8040192">}</span><span class="op" id="8040193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8040198">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8040220">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8040226">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="8040250">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8040256">&#34;\r\n&#34;</span><span class="op" id="8040262">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8040266">}</span><span class="op" id="8040267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8040271">//&nbsp;HTTP/1.1&nbsp;response&nbsp;0&nbsp;content-length,&nbsp;and&nbsp;non-nil&nbsp;non-empty&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8040339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040344">Response</span><span class="op" id="8040352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040358">StatusCode</span><span class="op" id="8040368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040373">200</span><span class="op" id="8040376">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040382">ProtoMajor</span><span class="op" id="8040392">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040397">1</span><span class="op" id="8040398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040404">ProtoMinor</span><span class="op" id="8040414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040419">1</span><span class="op" id="8040420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040426">Request</span><span class="op" id="8040433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040441">dummyReq11</span><span class="op" id="8040451">(</span><span class="string" id="8040452">&#34;GET&#34;</span><span class="op" id="8040457">)</span><span class="op" id="8040458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040464">Header</span><span class="op" id="8040470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040479">Header</span><span class="op" id="8040485">{</span><span class="op" id="8040486">}</span><span class="op" id="8040487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040493">Body</span><span class="op" id="8040497">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040508">ioutil</span><span class="op" id="8040514">.</span><span class="ident" id="8040515">NopCloser</span><span class="op" id="8040524">(</span><span class="ident" id="8040525">strings</span><span class="op" id="8040532">.</span><span class="ident" id="8040533">NewReader</span><span class="op" id="8040542">(</span><span class="string" id="8040543">&#34;foo&#34;</span><span class="op" id="8040548">)</span><span class="op" id="8040549">)</span><span class="op" id="8040550">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040556">ContentLength</span><span class="op" id="8040569">:</span>&nbsp;<span class="num" id="8040571">0</span><span class="op" id="8040572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040578">Close</span><span class="op" id="8040583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040593">false</span><span class="op" id="8040598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8040603">}</span><span class="op" id="8040604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8040609">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8040631">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8040637">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8040661">+</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8040667">&#34;\r\nfoo&#34;</span><span class="op" id="8040676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8040680">}</span><span class="op" id="8040681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8040685">//&nbsp;HTTP/1.1,&nbsp;chunked&nbsp;coding;&nbsp;empty&nbsp;trailer;&nbsp;close</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8040737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040742">Response</span><span class="op" id="8040750">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040756">StatusCode</span><span class="op" id="8040766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040774">200</span><span class="op" id="8040777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040783">ProtoMajor</span><span class="op" id="8040793">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040801">1</span><span class="op" id="8040802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040808">ProtoMinor</span><span class="op" id="8040818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040826">1</span><span class="op" id="8040827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040833">Request</span><span class="op" id="8040840">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040851">dummyReq</span><span class="op" id="8040859">(</span><span class="string" id="8040860">&#34;GET&#34;</span><span class="op" id="8040865">)</span><span class="op" id="8040866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040872">Header</span><span class="op" id="8040878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040890">Header</span><span class="op" id="8040896">{</span><span class="op" id="8040897">}</span><span class="op" id="8040898">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040904">Body</span><span class="op" id="8040908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8040922">ioutil</span><span class="op" id="8040928">.</span><span class="ident" id="8040929">NopCloser</span><span class="op" id="8040938">(</span><span class="ident" id="8040939">strings</span><span class="op" id="8040946">.</span><span class="ident" id="8040947">NewReader</span><span class="op" id="8040956">(</span><span class="string" id="8040957">&#34;abcdef&#34;</span><span class="op" id="8040965">)</span><span class="op" id="8040966">)</span><span class="op" id="8040967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040973">ContentLength</span><span class="op" id="8040986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8040991">6</span><span class="op" id="8040992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8040998">TransferEncoding</span><span class="op" id="8041014">:</span>&nbsp;<span class="op" id="8041016">[</span><span class="op" id="8041017">]</span><span class="builtintype" id="8041018">string</span><span class="op" id="8041024">{</span><span class="string" id="8041025">&#34;chunked&#34;</span><span class="op" id="8041034">}</span><span class="op" id="8041035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041041">Close</span><span class="op" id="8041046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8041059">true</span><span class="op" id="8041063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041068">}</span><span class="op" id="8041069">,</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041075">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8041097">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041103">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8041127">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041133">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8041170">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041176">&#34;6\r\nabcdef\r\n0\r\n\r\n&#34;</span><span class="op" id="8041202">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041206">}</span><span class="op" id="8041207">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8041212">//&nbsp;Header&nbsp;value&nbsp;with&nbsp;a&nbsp;newline&nbsp;character&nbsp;(Issue&nbsp;914).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8041268">//&nbsp;Also&nbsp;tests&nbsp;removal&nbsp;of&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;whitespace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041328">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041333">Response</span><span class="op" id="8041341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041347">StatusCode</span><span class="op" id="8041357">:</span>&nbsp;<span class="num" id="8041359">204</span><span class="op" id="8041362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041368">ProtoMajor</span><span class="op" id="8041378">:</span>&nbsp;<span class="num" id="8041380">1</span><span class="op" id="8041381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041387">ProtoMinor</span><span class="op" id="8041397">:</span>&nbsp;<span class="num" id="8041399">1</span><span class="op" id="8041400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041406">Request</span><span class="op" id="8041413">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8041418">dummyReq</span><span class="op" id="8041426">(</span><span class="string" id="8041427">&#34;GET&#34;</span><span class="op" id="8041432">)</span><span class="op" id="8041433">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041439">Header</span><span class="op" id="8041445">:</span>&nbsp;<span class="ident" id="8041447">Header</span><span class="op" id="8041453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041460">&#34;Foo&#34;</span><span class="op" id="8041465">:</span>&nbsp;<span class="op" id="8041467">[</span><span class="op" id="8041468">]</span><span class="builtintype" id="8041469">string</span><span class="op" id="8041475">{</span><span class="string" id="8041476">&#34;&nbsp;Bar\nBaz&nbsp;&#34;</span><span class="op" id="8041488">}</span><span class="op" id="8041489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041495">}</span><span class="op" id="8041496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041502">Body</span><span class="op" id="8041506">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8041520">nil</span><span class="op" id="8041523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041529">ContentLength</span><span class="op" id="8041542">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8041547">0</span><span class="op" id="8041548">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041554">TransferEncoding</span><span class="op" id="8041570">:</span>&nbsp;<span class="op" id="8041572">[</span><span class="op" id="8041573">]</span><span class="builtintype" id="8041574">string</span><span class="op" id="8041580">{</span><span class="string" id="8041581">&#34;chunked&#34;</span><span class="op" id="8041590">}</span><span class="op" id="8041591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041597">Close</span><span class="op" id="8041602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8041615">true</span><span class="op" id="8041619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041624">}</span><span class="op" id="8041625">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041631">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="8041661">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041667">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8041691">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041697">&#34;Foo:&nbsp;Bar&nbsp;Baz\r\n&#34;</span>&nbsp;<span class="op" id="8041716">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8041722">&#34;\r\n&#34;</span><span class="op" id="8041728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041732">}</span><span class="op" id="8041733">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8041738">//&nbsp;Want&nbsp;a&nbsp;single&nbsp;Content-Length&nbsp;header.&nbsp;Fixing&nbsp;issue&nbsp;8180&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8041804">//&nbsp;there&nbsp;were&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8041825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041830">Response</span><span class="op" id="8041838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041844">StatusCode</span><span class="op" id="8041854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8041862">StatusOK</span><span class="op" id="8041870">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041876">ProtoMajor</span><span class="op" id="8041886">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8041894">1</span><span class="op" id="8041895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041901">ProtoMinor</span><span class="op" id="8041911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8041919">1</span><span class="op" id="8041920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041926">Request</span><span class="op" id="8041933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8041944">&amp;</span><span class="ident" id="8041945">Request</span><span class="op" id="8041952">{</span><span class="ident" id="8041953">Method</span><span class="op" id="8041959">:</span>&nbsp;<span class="string" id="8041961">&#34;POST&#34;</span><span class="op" id="8041967">}</span><span class="op" id="8041968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8041974">Header</span><span class="op" id="8041980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8041992">Header</span><span class="op" id="8041998">{</span><span class="op" id="8041999">}</span><span class="op" id="8042000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042006">ContentLength</span><span class="op" id="8042019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8042024">0</span><span class="op" id="8042025">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042031">TransferEncoding</span><span class="op" id="8042047">:</span>&nbsp;<span class="ident" id="8042049">nil</span><span class="op" id="8042052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042058">Body</span><span class="op" id="8042062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8042076">nil</span><span class="op" id="8042079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8042084">}</span><span class="op" id="8042085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8042090">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\nContent-Length:&nbsp;0\r\n\r\n&#34;</span><span class="op" id="8042136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8042140">}</span><span class="op" id="8042141">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8042144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8042148">for</span>&nbsp;<span class="ident" id="8042152">i</span>&nbsp;<span class="op" id="8042154">:=</span>&nbsp;<span class="keyword" id="8042157">range</span>&nbsp;<span class="ident" id="8042163">respWriteTests</span>&nbsp;<span class="op" id="8042178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042182">tt</span>&nbsp;<span class="op" id="8042185">:=</span>&nbsp;<span class="op" id="8042188">&amp;</span><span class="ident" id="8042189">respWriteTests</span><span class="op" id="8042203">[</span><span class="ident" id="8042204">i</span><span class="op" id="8042205">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8042209">var</span>&nbsp;<span class="ident" id="8042213">braw</span>&nbsp;<span class="ident" id="8042218">bytes</span><span class="op" id="8042223">.</span><span class="ident" id="8042224">Buffer</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042233">err</span>&nbsp;<span class="op" id="8042237">:=</span>&nbsp;<span class="ident" id="8042240">tt</span><span class="op" id="8042242">.</span><span class="ident" id="8042243">Resp</span><span class="op" id="8042247">.</span><span class="ident" id="8042248">Write</span><span class="op" id="8042253">(</span><span class="op" id="8042254">&amp;</span><span class="ident" id="8042255">braw</span><span class="op" id="8042259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8042263">if</span>&nbsp;<span class="ident" id="8042266">err</span>&nbsp;<span class="op" id="8042270">!=</span>&nbsp;<span class="ident" id="8042273">nil</span>&nbsp;<span class="op" id="8042277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042282">t</span><span class="op" id="8042283">.</span><span class="ident" id="8042284">Errorf</span><span class="op" id="8042290">(</span><span class="string" id="8042291">&#34;error&nbsp;writing&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="8042314">,</span>&nbsp;<span class="ident" id="8042316">i</span><span class="op" id="8042317">,</span>&nbsp;<span class="ident" id="8042319">err</span><span class="op" id="8042322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8042327">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8042338">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042342">sraw</span>&nbsp;<span class="op" id="8042347">:=</span>&nbsp;<span class="ident" id="8042350">braw</span><span class="op" id="8042354">.</span><span class="ident" id="8042355">String</span><span class="op" id="8042361">(</span><span class="op" id="8042362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8042366">if</span>&nbsp;<span class="ident" id="8042369">sraw</span>&nbsp;<span class="op" id="8042374">!=</span>&nbsp;<span class="ident" id="8042377">tt</span><span class="op" id="8042379">.</span><span class="ident" id="8042380">Raw</span>&nbsp;<span class="op" id="8042384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8042389">t</span><span class="op" id="8042390">.</span><span class="ident" id="8042391">Errorf</span><span class="op" id="8042397">(</span><span class="string" id="8042398">&#34;Test&nbsp;%d,&nbsp;expecting:\n%q\nGot:\n%q\n&#34;</span><span class="op" id="8042435">,</span>&nbsp;<span class="ident" id="8042437">i</span><span class="op" id="8042438">,</span>&nbsp;<span class="ident" id="8042440">tt</span><span class="op" id="8042442">.</span><span class="ident" id="8042443">Raw</span><span class="op" id="8042446">,</span>&nbsp;<span class="ident" id="8042448">sraw</span><span class="op" id="8042452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8042457">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8042468">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8042471">}</span><br>
<span class="lineno"></span><span class="op" id="8042473">}</span>
</div>
</body>
</html>
