<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7655218">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7655274">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7655328">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7655379">package</span>&nbsp;<span class="ident" id="7655387">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7655393">import</span>&nbsp;<span class="op" id="7655400">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655403">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655412">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655430">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655436">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7655446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7655449">func</span>&nbsp;<span class="ident" id="7655454">TestRead</span><span class="op" id="7655462">(</span><span class="ident" id="7655463">t</span>&nbsp;<span class="op" id="7655465">*</span><span class="ident" id="7655466">testing</span><span class="op" id="7655473">.</span><span class="ident" id="7655474">T</span><span class="op" id="7655475">)</span>&nbsp;<span class="op" id="7655477">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655480">var</span>&nbsp;<span class="ident" id="7655484">n</span>&nbsp;<span class="builtintype" id="7655486">int</span>&nbsp;<span class="op" id="7655490">=</span>&nbsp;<span class="num" id="7655492">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655497">if</span>&nbsp;<span class="ident" id="7655500">testing</span><span class="op" id="7655507">.</span><span class="ident" id="7655508">Short</span><span class="op" id="7655513">(</span><span class="op" id="7655514">)</span>&nbsp;<span class="op" id="7655516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655520">n</span>&nbsp;<span class="op" id="7655522">=</span>&nbsp;<span class="num" id="7655524">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655532">b</span>&nbsp;<span class="op" id="7655534">:=</span>&nbsp;<span class="builtinfunc" id="7655537">make</span><span class="op" id="7655541">(</span><span class="op" id="7655542">[</span><span class="op" id="7655543">]</span><span class="builtintype" id="7655544">byte</span><span class="op" id="7655548">,</span>&nbsp;<span class="ident" id="7655550">n</span><span class="op" id="7655551">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655554">n</span><span class="op" id="7655555">,</span>&nbsp;<span class="ident" id="7655557">err</span>&nbsp;<span class="op" id="7655561">:=</span>&nbsp;<span class="ident" id="7655564">io</span><span class="op" id="7655566">.</span><span class="ident" id="7655567">ReadFull</span><span class="op" id="7655575">(</span><span class="ident" id="7655576">Reader</span><span class="op" id="7655582">,</span>&nbsp;<span class="ident" id="7655584">b</span><span class="op" id="7655585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655588">if</span>&nbsp;<span class="ident" id="7655591">n</span>&nbsp;<span class="op" id="7655593">!=</span>&nbsp;<span class="builtinfunc" id="7655596">len</span><span class="op" id="7655599">(</span><span class="ident" id="7655600">b</span><span class="op" id="7655601">)</span>&nbsp;<span class="op" id="7655603">||</span>&nbsp;<span class="ident" id="7655606">err</span>&nbsp;<span class="op" id="7655610">!=</span>&nbsp;<span class="ident" id="7655613">nil</span>&nbsp;<span class="op" id="7655617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655621">t</span><span class="op" id="7655622">.</span><span class="ident" id="7655623">Fatalf</span><span class="op" id="7655629">(</span><span class="string" id="7655630">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7655654">,</span>&nbsp;<span class="ident" id="7655656">n</span><span class="op" id="7655657">,</span>&nbsp;<span class="ident" id="7655659">err</span><span class="op" id="7655662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655669">var</span>&nbsp;<span class="ident" id="7655673">z</span>&nbsp;<span class="ident" id="7655675">bytes</span><span class="op" id="7655680">.</span><span class="ident" id="7655681">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655689">f</span><span class="op" id="7655690">,</span>&nbsp;<span class="ident" id="7655692">_</span>&nbsp;<span class="op" id="7655694">:=</span>&nbsp;<span class="ident" id="7655697">flate</span><span class="op" id="7655702">.</span><span class="ident" id="7655703">NewWriter</span><span class="op" id="7655712">(</span><span class="op" id="7655713">&amp;</span><span class="ident" id="7655714">z</span><span class="op" id="7655715">,</span>&nbsp;<span class="num" id="7655717">5</span><span class="op" id="7655718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655721">f</span><span class="op" id="7655722">.</span><span class="ident" id="7655723">Write</span><span class="op" id="7655728">(</span><span class="ident" id="7655729">b</span><span class="op" id="7655730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655733">f</span><span class="op" id="7655734">.</span><span class="ident" id="7655735">Close</span><span class="op" id="7655740">(</span><span class="op" id="7655741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655744">if</span>&nbsp;<span class="ident" id="7655747">z</span><span class="op" id="7655748">.</span><span class="ident" id="7655749">Len</span><span class="op" id="7655752">(</span><span class="op" id="7655753">)</span>&nbsp;<span class="op" id="7655755">&lt;</span>&nbsp;<span class="builtinfunc" id="7655757">len</span><span class="op" id="7655760">(</span><span class="ident" id="7655761">b</span><span class="op" id="7655762">)</span><span class="op" id="7655763">*</span><span class="num" id="7655764">99</span><span class="op" id="7655766">/</span><span class="num" id="7655767">100</span>&nbsp;<span class="op" id="7655771">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655775">t</span><span class="op" id="7655776">.</span><span class="ident" id="7655777">Fatalf</span><span class="op" id="7655783">(</span><span class="string" id="7655784">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7655805">,</span>&nbsp;<span class="builtinfunc" id="7655807">len</span><span class="op" id="7655810">(</span><span class="ident" id="7655811">b</span><span class="op" id="7655812">)</span><span class="op" id="7655813">,</span>&nbsp;<span class="ident" id="7655815">z</span><span class="op" id="7655816">.</span><span class="ident" id="7655817">Len</span><span class="op" id="7655820">(</span><span class="op" id="7655821">)</span><span class="op" id="7655822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655825">}</span><br>
<span class="lineno"></span><span class="op" id="7655827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7655830">func</span>&nbsp;<span class="ident" id="7655835">TestReadEmpty</span><span class="op" id="7655848">(</span><span class="ident" id="7655849">t</span>&nbsp;<span class="op" id="7655851">*</span><span class="ident" id="7655852">testing</span><span class="op" id="7655859">.</span><span class="ident" id="7655860">T</span><span class="op" id="7655861">)</span>&nbsp;<span class="op" id="7655863">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655866">n</span><span class="op" id="7655867">,</span>&nbsp;<span class="ident" id="7655869">err</span>&nbsp;<span class="op" id="7655873">:=</span>&nbsp;<span class="ident" id="7655876">Reader</span><span class="op" id="7655882">.</span><span class="ident" id="7655883">Read</span><span class="op" id="7655887">(</span><span class="builtinfunc" id="7655888">make</span><span class="op" id="7655892">(</span><span class="op" id="7655893">[</span><span class="op" id="7655894">]</span><span class="builtintype" id="7655895">byte</span><span class="op" id="7655899">,</span>&nbsp;<span class="num" id="7655901">0</span><span class="op" id="7655902">)</span><span class="op" id="7655903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655906">if</span>&nbsp;<span class="ident" id="7655909">n</span>&nbsp;<span class="op" id="7655911">!=</span>&nbsp;<span class="num" id="7655914">0</span>&nbsp;<span class="op" id="7655916">||</span>&nbsp;<span class="ident" id="7655919">err</span>&nbsp;<span class="op" id="7655923">!=</span>&nbsp;<span class="ident" id="7655926">nil</span>&nbsp;<span class="op" id="7655930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655934">t</span><span class="op" id="7655935">.</span><span class="ident" id="7655936">Fatalf</span><span class="op" id="7655942">(</span><span class="string" id="7655943">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7655975">,</span>&nbsp;<span class="ident" id="7655977">n</span><span class="op" id="7655978">,</span>&nbsp;<span class="ident" id="7655980">err</span><span class="op" id="7655983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655989">n</span><span class="op" id="7655990">,</span>&nbsp;<span class="ident" id="7655992">err</span>&nbsp;<span class="op" id="7655996">=</span>&nbsp;<span class="ident" id="7655998">Reader</span><span class="op" id="7656004">.</span><span class="ident" id="7656005">Read</span><span class="op" id="7656009">(</span><span class="ident" id="7656010">nil</span><span class="op" id="7656013">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656016">if</span>&nbsp;<span class="ident" id="7656019">n</span>&nbsp;<span class="op" id="7656021">!=</span>&nbsp;<span class="num" id="7656024">0</span>&nbsp;<span class="op" id="7656026">||</span>&nbsp;<span class="ident" id="7656029">err</span>&nbsp;<span class="op" id="7656033">!=</span>&nbsp;<span class="ident" id="7656036">nil</span>&nbsp;<span class="op" id="7656040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656044">t</span><span class="op" id="7656045">.</span><span class="ident" id="7656046">Fatalf</span><span class="op" id="7656052">(</span><span class="string" id="7656053">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7656073">,</span>&nbsp;<span class="ident" id="7656075">n</span><span class="op" id="7656076">,</span>&nbsp;<span class="ident" id="7656078">err</span><span class="op" id="7656081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656084">}</span><br>
<span class="lineno"></span><span class="op" id="7656086">}</span>
</div>
</body>
</html>
