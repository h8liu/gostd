<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/ring</h2>
<ul>
<li><a href="/gostd/container/ring/ring.go.html" class="current">ring.go</a></li>
<li><a href="/gostd/container/ring/ring_test.go.html">ring_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6066985">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6067040">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6067094">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6067145">//&nbsp;Package&nbsp;ring&nbsp;implements&nbsp;operations&nbsp;on&nbsp;circular&nbsp;lists.</span><br>
<span class="lineno"></span><span class="keyword" id="6067202">package</span>&nbsp;<span class="ident" id="6067210">ring</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6067216">//&nbsp;A&nbsp;Ring&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;circular&nbsp;list,&nbsp;or&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="6067269">//&nbsp;Rings&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;beginning&nbsp;or&nbsp;end;&nbsp;a&nbsp;pointer&nbsp;to&nbsp;any&nbsp;ring&nbsp;element</span><br>
<span class="lineno">10</span><span class="comment" id="6067340">//&nbsp;serves&nbsp;as&nbsp;reference&nbsp;to&nbsp;the&nbsp;entire&nbsp;ring.&nbsp;Empty&nbsp;rings&nbsp;are&nbsp;represented</span><br>
<span class="lineno"></span><span class="comment" id="6067411">//&nbsp;as&nbsp;nil&nbsp;Ring&nbsp;pointers.&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Ring&nbsp;is&nbsp;a&nbsp;one-element</span><br>
<span class="lineno"></span><span class="comment" id="6067479">//&nbsp;ring&nbsp;with&nbsp;a&nbsp;nil&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="6067505">//</span><br>
<span class="lineno"></span><span class="keyword" id="6067508">type</span>&nbsp;<span class="ident" id="6067513">Ring</span>&nbsp;<span class="keyword" id="6067518">struct</span>&nbsp;<span class="op" id="6067525">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067528">next</span><span class="op" id="6067532">,</span>&nbsp;<span class="ident" id="6067534">prev</span>&nbsp;<span class="op" id="6067539">*</span><span class="ident" id="6067540">Ring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067546">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067557">interface</span><span class="op" id="6067566">{</span><span class="op" id="6067567">}</span>&nbsp;<span class="comment" id="6067569">//&nbsp;for&nbsp;use&nbsp;by&nbsp;client;&nbsp;untouched&nbsp;by&nbsp;this&nbsp;library</span><br>
<span class="lineno"></span><span class="op" id="6067617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6067620">func</span>&nbsp;<span class="op" id="6067625">(</span><span class="ident" id="6067626">r</span>&nbsp;<span class="op" id="6067628">*</span><span class="ident" id="6067629">Ring</span><span class="op" id="6067633">)</span>&nbsp;<span class="ident" id="6067635">init</span><span class="op" id="6067639">(</span><span class="op" id="6067640">)</span>&nbsp;<span class="op" id="6067642">*</span><span class="ident" id="6067643">Ring</span>&nbsp;<span class="op" id="6067648">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067651">r</span><span class="op" id="6067652">.</span><span class="ident" id="6067653">next</span>&nbsp;<span class="op" id="6067658">=</span>&nbsp;<span class="ident" id="6067660">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6067663">r</span><span class="op" id="6067664">.</span><span class="ident" id="6067665">prev</span>&nbsp;<span class="op" id="6067670">=</span>&nbsp;<span class="ident" id="6067672">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067675">return</span>&nbsp;<span class="ident" id="6067682">r</span><br>
<span class="lineno"></span><span class="op" id="6067684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6067687">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="6067747">func</span>&nbsp;<span class="op" id="6067752">(</span><span class="ident" id="6067753">r</span>&nbsp;<span class="op" id="6067755">*</span><span class="ident" id="6067756">Ring</span><span class="op" id="6067760">)</span>&nbsp;<span class="ident" id="6067762">Next</span><span class="op" id="6067766">(</span><span class="op" id="6067767">)</span>&nbsp;<span class="op" id="6067769">*</span><span class="ident" id="6067770">Ring</span>&nbsp;<span class="op" id="6067775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067778">if</span>&nbsp;<span class="ident" id="6067781">r</span><span class="op" id="6067782">.</span><span class="ident" id="6067783">next</span>&nbsp;<span class="op" id="6067788">==</span>&nbsp;<span class="builtintype" id="6067791">nil</span>&nbsp;<span class="op" id="6067795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067799">return</span>&nbsp;<span class="ident" id="6067806">r</span><span class="op" id="6067807">.</span><span class="ident" id="6067808">init</span><span class="op" id="6067812">(</span><span class="op" id="6067813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067816">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067819">return</span>&nbsp;<span class="ident" id="6067826">r</span><span class="op" id="6067827">.</span><span class="ident" id="6067828">next</span><br>
<span class="lineno"></span><span class="op" id="6067833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6067836">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="keyword" id="6067900">func</span>&nbsp;<span class="op" id="6067905">(</span><span class="ident" id="6067906">r</span>&nbsp;<span class="op" id="6067908">*</span><span class="ident" id="6067909">Ring</span><span class="op" id="6067913">)</span>&nbsp;<span class="ident" id="6067915">Prev</span><span class="op" id="6067919">(</span><span class="op" id="6067920">)</span>&nbsp;<span class="op" id="6067922">*</span><span class="ident" id="6067923">Ring</span>&nbsp;<span class="op" id="6067928">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067931">if</span>&nbsp;<span class="ident" id="6067934">r</span><span class="op" id="6067935">.</span><span class="ident" id="6067936">next</span>&nbsp;<span class="op" id="6067941">==</span>&nbsp;<span class="builtintype" id="6067944">nil</span>&nbsp;<span class="op" id="6067948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067952">return</span>&nbsp;<span class="ident" id="6067959">r</span><span class="op" id="6067960">.</span><span class="ident" id="6067961">init</span><span class="op" id="6067965">(</span><span class="op" id="6067966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6067969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6067972">return</span>&nbsp;<span class="ident" id="6067979">r</span><span class="op" id="6067980">.</span><span class="ident" id="6067981">prev</span><br>
<span class="lineno"></span><span class="op" id="6067986">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="6067989">//&nbsp;Move&nbsp;moves&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;backward&nbsp;(n&nbsp;&lt;&nbsp;0)&nbsp;or&nbsp;forward&nbsp;(n&nbsp;&gt;=&nbsp;0)</span><br>
<span class="lineno"></span><span class="comment" id="6068061">//&nbsp;in&nbsp;the&nbsp;ring&nbsp;and&nbsp;returns&nbsp;that&nbsp;ring&nbsp;element.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span><span class="comment" id="6068128">//</span><br>
<span class="lineno"></span><span class="keyword" id="6068131">func</span>&nbsp;<span class="op" id="6068136">(</span><span class="ident" id="6068137">r</span>&nbsp;<span class="op" id="6068139">*</span><span class="ident" id="6068140">Ring</span><span class="op" id="6068144">)</span>&nbsp;<span class="ident" id="6068146">Move</span><span class="op" id="6068150">(</span><span class="ident" id="6068151">n</span>&nbsp;<span class="builtintype" id="6068153">int</span><span class="op" id="6068156">)</span>&nbsp;<span class="op" id="6068158">*</span><span class="ident" id="6068159">Ring</span>&nbsp;<span class="op" id="6068164">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068167">if</span>&nbsp;<span class="ident" id="6068170">r</span><span class="op" id="6068171">.</span><span class="ident" id="6068172">next</span>&nbsp;<span class="op" id="6068177">==</span>&nbsp;<span class="builtintype" id="6068180">nil</span>&nbsp;<span class="op" id="6068184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068188">return</span>&nbsp;<span class="ident" id="6068195">r</span><span class="op" id="6068196">.</span><span class="ident" id="6068197">init</span><span class="op" id="6068201">(</span><span class="op" id="6068202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068208">switch</span>&nbsp;<span class="op" id="6068215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068218">case</span>&nbsp;<span class="ident" id="6068223">n</span>&nbsp;<span class="op" id="6068225">&lt;</span>&nbsp;<span class="num" id="6068227">0</span><span class="op" id="6068228">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068232">for</span>&nbsp;<span class="op" id="6068236">;</span>&nbsp;<span class="ident" id="6068238">n</span>&nbsp;<span class="op" id="6068240">&lt;</span>&nbsp;<span class="num" id="6068242">0</span><span class="op" id="6068243">;</span>&nbsp;<span class="ident" id="6068245">n</span><span class="op" id="6068246">++</span>&nbsp;<span class="op" id="6068249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068254">r</span>&nbsp;<span class="op" id="6068256">=</span>&nbsp;<span class="ident" id="6068258">r</span><span class="op" id="6068259">.</span><span class="ident" id="6068260">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068270">case</span>&nbsp;<span class="ident" id="6068275">n</span>&nbsp;<span class="op" id="6068277">&gt;</span>&nbsp;<span class="num" id="6068279">0</span><span class="op" id="6068280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068284">for</span>&nbsp;<span class="op" id="6068288">;</span>&nbsp;<span class="ident" id="6068290">n</span>&nbsp;<span class="op" id="6068292">&gt;</span>&nbsp;<span class="num" id="6068294">0</span><span class="op" id="6068295">;</span>&nbsp;<span class="ident" id="6068297">n</span><span class="op" id="6068298">--</span>&nbsp;<span class="op" id="6068301">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068306">r</span>&nbsp;<span class="op" id="6068308">=</span>&nbsp;<span class="ident" id="6068310">r</span><span class="op" id="6068311">.</span><span class="ident" id="6068312">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068325">return</span>&nbsp;<span class="ident" id="6068332">r</span><br>
<span class="lineno"></span><span class="op" id="6068334">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6068337">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;ring&nbsp;of&nbsp;n&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6068374">func</span>&nbsp;<span class="ident" id="6068379">New</span><span class="op" id="6068382">(</span><span class="ident" id="6068383">n</span>&nbsp;<span class="builtintype" id="6068385">int</span><span class="op" id="6068388">)</span>&nbsp;<span class="op" id="6068390">*</span><span class="ident" id="6068391">Ring</span>&nbsp;<span class="op" id="6068396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068399">if</span>&nbsp;<span class="ident" id="6068402">n</span>&nbsp;<span class="op" id="6068404">&lt;=</span>&nbsp;<span class="num" id="6068407">0</span>&nbsp;<span class="op" id="6068409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068413">return</span>&nbsp;<span class="builtintype" id="6068420">nil</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068428">r</span>&nbsp;<span class="op" id="6068430">:=</span>&nbsp;<span class="builtinfunc" id="6068433">new</span><span class="op" id="6068436">(</span><span class="ident" id="6068437">Ring</span><span class="op" id="6068441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068444">p</span>&nbsp;<span class="op" id="6068446">:=</span>&nbsp;<span class="ident" id="6068449">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068452">for</span>&nbsp;<span class="ident" id="6068456">i</span>&nbsp;<span class="op" id="6068458">:=</span>&nbsp;<span class="num" id="6068461">1</span><span class="op" id="6068462">;</span>&nbsp;<span class="ident" id="6068464">i</span>&nbsp;<span class="op" id="6068466">&lt;</span>&nbsp;<span class="ident" id="6068468">n</span><span class="op" id="6068469">;</span>&nbsp;<span class="ident" id="6068471">i</span><span class="op" id="6068472">++</span>&nbsp;<span class="op" id="6068475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068479">p</span><span class="op" id="6068480">.</span><span class="ident" id="6068481">next</span>&nbsp;<span class="op" id="6068486">=</span>&nbsp;<span class="op" id="6068488">&amp;</span><span class="ident" id="6068489">Ring</span><span class="op" id="6068493">{</span><span class="ident" id="6068494">prev</span><span class="op" id="6068498">:</span>&nbsp;<span class="ident" id="6068500">p</span><span class="op" id="6068501">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068505">p</span>&nbsp;<span class="op" id="6068507">=</span>&nbsp;<span class="ident" id="6068509">p</span><span class="op" id="6068510">.</span><span class="ident" id="6068511">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068520">p</span><span class="op" id="6068521">.</span><span class="ident" id="6068522">next</span>&nbsp;<span class="op" id="6068527">=</span>&nbsp;<span class="ident" id="6068529">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6068532">r</span><span class="op" id="6068533">.</span><span class="ident" id="6068534">prev</span>&nbsp;<span class="op" id="6068539">=</span>&nbsp;<span class="ident" id="6068541">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6068544">return</span>&nbsp;<span class="ident" id="6068551">r</span><br>
<span class="lineno">75</span><span class="op" id="6068553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6068556">//&nbsp;Link&nbsp;connects&nbsp;ring&nbsp;r&nbsp;with&nbsp;ring&nbsp;s&nbsp;such&nbsp;that&nbsp;r.Next()</span><br>
<span class="lineno"></span><span class="comment" id="6068611">//&nbsp;becomes&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next().</span><br>
<span class="lineno"></span><span class="comment" id="6068669">//&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">80</span><span class="comment" id="6068693">//</span><br>
<span class="lineno"></span><span class="comment" id="6068696">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;the&nbsp;same&nbsp;ring,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="6068742">//&nbsp;them&nbsp;removes&nbsp;the&nbsp;elements&nbsp;between&nbsp;r&nbsp;and&nbsp;s&nbsp;from&nbsp;the&nbsp;ring.</span><br>
<span class="lineno"></span><span class="comment" id="6068802">//&nbsp;The&nbsp;removed&nbsp;elements&nbsp;form&nbsp;a&nbsp;subring&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6068861">//&nbsp;reference&nbsp;to&nbsp;that&nbsp;subring&nbsp;(if&nbsp;no&nbsp;elements&nbsp;were&nbsp;removed,</span><br>
<span class="lineno">85</span><span class="comment" id="6068920">//&nbsp;the&nbsp;result&nbsp;is&nbsp;still&nbsp;the&nbsp;original&nbsp;value&nbsp;for&nbsp;r.Next(),</span><br>
<span class="lineno"></span><span class="comment" id="6068976">//&nbsp;and&nbsp;not&nbsp;nil).</span><br>
<span class="lineno"></span><span class="comment" id="6068993">//</span><br>
<span class="lineno"></span><span class="comment" id="6068996">//&nbsp;If&nbsp;r&nbsp;and&nbsp;s&nbsp;point&nbsp;to&nbsp;different&nbsp;rings,&nbsp;linking</span><br>
<span class="lineno"></span><span class="comment" id="6069044">//&nbsp;them&nbsp;creates&nbsp;a&nbsp;single&nbsp;ring&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;s&nbsp;inserted</span><br>
<span class="lineno">90</span><span class="comment" id="6069106">//&nbsp;after&nbsp;r.&nbsp;The&nbsp;result&nbsp;points&nbsp;to&nbsp;the&nbsp;element&nbsp;following&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6069165">//&nbsp;last&nbsp;element&nbsp;of&nbsp;s&nbsp;after&nbsp;insertion.</span><br>
<span class="lineno"></span><span class="comment" id="6069203">//</span><br>
<span class="lineno"></span><span class="keyword" id="6069206">func</span>&nbsp;<span class="op" id="6069211">(</span><span class="ident" id="6069212">r</span>&nbsp;<span class="op" id="6069214">*</span><span class="ident" id="6069215">Ring</span><span class="op" id="6069219">)</span>&nbsp;<span class="ident" id="6069221">Link</span><span class="op" id="6069225">(</span><span class="ident" id="6069226">s</span>&nbsp;<span class="op" id="6069228">*</span><span class="ident" id="6069229">Ring</span><span class="op" id="6069233">)</span>&nbsp;<span class="op" id="6069235">*</span><span class="ident" id="6069236">Ring</span>&nbsp;<span class="op" id="6069241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069244">n</span>&nbsp;<span class="op" id="6069246">:=</span>&nbsp;<span class="ident" id="6069249">r</span><span class="op" id="6069250">.</span><span class="ident" id="6069251">Next</span><span class="op" id="6069255">(</span><span class="op" id="6069256">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069259">if</span>&nbsp;<span class="ident" id="6069262">s</span>&nbsp;<span class="op" id="6069264">!=</span>&nbsp;<span class="builtintype" id="6069267">nil</span>&nbsp;<span class="op" id="6069271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069275">p</span>&nbsp;<span class="op" id="6069277">:=</span>&nbsp;<span class="ident" id="6069280">s</span><span class="op" id="6069281">.</span><span class="ident" id="6069282">Prev</span><span class="op" id="6069286">(</span><span class="op" id="6069287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6069291">//&nbsp;Note:&nbsp;Cannot&nbsp;use&nbsp;multiple&nbsp;assignment&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6069341">//&nbsp;evaluation&nbsp;order&nbsp;of&nbsp;LHS&nbsp;is&nbsp;not&nbsp;specified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069388">r</span><span class="op" id="6069389">.</span><span class="ident" id="6069390">next</span>&nbsp;<span class="op" id="6069395">=</span>&nbsp;<span class="ident" id="6069397">s</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069401">s</span><span class="op" id="6069402">.</span><span class="ident" id="6069403">prev</span>&nbsp;<span class="op" id="6069408">=</span>&nbsp;<span class="ident" id="6069410">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069414">n</span><span class="op" id="6069415">.</span><span class="ident" id="6069416">prev</span>&nbsp;<span class="op" id="6069421">=</span>&nbsp;<span class="ident" id="6069423">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069427">p</span><span class="op" id="6069428">.</span><span class="ident" id="6069429">next</span>&nbsp;<span class="op" id="6069434">=</span>&nbsp;<span class="ident" id="6069436">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6069439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069442">return</span>&nbsp;<span class="ident" id="6069449">n</span><br>
<span class="lineno">105</span><span class="op" id="6069451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6069454">//&nbsp;Unlink&nbsp;removes&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;elements&nbsp;from&nbsp;the&nbsp;ring&nbsp;r,&nbsp;starting</span><br>
<span class="lineno"></span><span class="comment" id="6069519">//&nbsp;at&nbsp;r.Next().&nbsp;If&nbsp;n&nbsp;%&nbsp;r.Len()&nbsp;==&nbsp;0,&nbsp;r&nbsp;remains&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="6069577">//&nbsp;The&nbsp;result&nbsp;is&nbsp;the&nbsp;removed&nbsp;subring.&nbsp;r&nbsp;must&nbsp;not&nbsp;be&nbsp;empty.</span><br>
<span class="lineno">110</span><span class="comment" id="6069636">//</span><br>
<span class="lineno"></span><span class="keyword" id="6069639">func</span>&nbsp;<span class="op" id="6069644">(</span><span class="ident" id="6069645">r</span>&nbsp;<span class="op" id="6069647">*</span><span class="ident" id="6069648">Ring</span><span class="op" id="6069652">)</span>&nbsp;<span class="ident" id="6069654">Unlink</span><span class="op" id="6069660">(</span><span class="ident" id="6069661">n</span>&nbsp;<span class="builtintype" id="6069663">int</span><span class="op" id="6069666">)</span>&nbsp;<span class="op" id="6069668">*</span><span class="ident" id="6069669">Ring</span>&nbsp;<span class="op" id="6069674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069677">if</span>&nbsp;<span class="ident" id="6069680">n</span>&nbsp;<span class="op" id="6069682">&lt;=</span>&nbsp;<span class="num" id="6069685">0</span>&nbsp;<span class="op" id="6069687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069691">return</span>&nbsp;<span class="builtintype" id="6069698">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6069703">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069706">return</span>&nbsp;<span class="ident" id="6069713">r</span><span class="op" id="6069714">.</span><span class="ident" id="6069715">Link</span><span class="op" id="6069719">(</span><span class="ident" id="6069720">r</span><span class="op" id="6069721">.</span><span class="ident" id="6069722">Move</span><span class="op" id="6069726">(</span><span class="ident" id="6069727">n</span>&nbsp;<span class="op" id="6069729">+</span>&nbsp;<span class="num" id="6069731">1</span><span class="op" id="6069732">)</span><span class="op" id="6069733">)</span><br>
<span class="lineno"></span><span class="op" id="6069735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6069738">//&nbsp;Len&nbsp;computes&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;ring&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6069788">//&nbsp;It&nbsp;executes&nbsp;in&nbsp;time&nbsp;proportional&nbsp;to&nbsp;the&nbsp;number&nbsp;of&nbsp;elements.</span><br>
<span class="lineno">120</span><span class="comment" id="6069851">//</span><br>
<span class="lineno"></span><span class="keyword" id="6069854">func</span>&nbsp;<span class="op" id="6069859">(</span><span class="ident" id="6069860">r</span>&nbsp;<span class="op" id="6069862">*</span><span class="ident" id="6069863">Ring</span><span class="op" id="6069867">)</span>&nbsp;<span class="ident" id="6069869">Len</span><span class="op" id="6069872">(</span><span class="op" id="6069873">)</span>&nbsp;<span class="builtintype" id="6069875">int</span>&nbsp;<span class="op" id="6069879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069882">n</span>&nbsp;<span class="op" id="6069884">:=</span>&nbsp;<span class="num" id="6069887">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069890">if</span>&nbsp;<span class="ident" id="6069893">r</span>&nbsp;<span class="op" id="6069895">!=</span>&nbsp;<span class="builtintype" id="6069898">nil</span>&nbsp;<span class="op" id="6069902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069906">n</span>&nbsp;<span class="op" id="6069908">=</span>&nbsp;<span class="num" id="6069910">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069914">for</span>&nbsp;<span class="ident" id="6069918">p</span>&nbsp;<span class="op" id="6069920">:=</span>&nbsp;<span class="ident" id="6069923">r</span><span class="op" id="6069924">.</span><span class="ident" id="6069925">Next</span><span class="op" id="6069929">(</span><span class="op" id="6069930">)</span><span class="op" id="6069931">;</span>&nbsp;<span class="ident" id="6069933">p</span>&nbsp;<span class="op" id="6069935">!=</span>&nbsp;<span class="ident" id="6069938">r</span><span class="op" id="6069939">;</span>&nbsp;<span class="ident" id="6069941">p</span>&nbsp;<span class="op" id="6069943">=</span>&nbsp;<span class="ident" id="6069945">p</span><span class="op" id="6069946">.</span><span class="ident" id="6069947">next</span>&nbsp;<span class="op" id="6069952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6069957">n</span><span class="op" id="6069958">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6069963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6069966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6069969">return</span>&nbsp;<span class="ident" id="6069976">n</span><br>
<span class="lineno">130</span><span class="op" id="6069978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6069981">//&nbsp;Do&nbsp;calls&nbsp;function&nbsp;f&nbsp;on&nbsp;each&nbsp;element&nbsp;of&nbsp;the&nbsp;ring,&nbsp;in&nbsp;forward&nbsp;order.</span><br>
<span class="lineno"></span><span class="comment" id="6070051">//&nbsp;The&nbsp;behavior&nbsp;of&nbsp;Do&nbsp;is&nbsp;undefined&nbsp;if&nbsp;f&nbsp;changes&nbsp;*r.</span><br>
<span class="lineno"></span><span class="keyword" id="6070103">func</span>&nbsp;<span class="op" id="6070108">(</span><span class="ident" id="6070109">r</span>&nbsp;<span class="op" id="6070111">*</span><span class="ident" id="6070112">Ring</span><span class="op" id="6070116">)</span>&nbsp;<span class="ident" id="6070118">Do</span><span class="op" id="6070120">(</span><span class="ident" id="6070121">f</span>&nbsp;<span class="keyword" id="6070123">func</span><span class="op" id="6070127">(</span><span class="keyword" id="6070128">interface</span><span class="op" id="6070137">{</span><span class="op" id="6070138">}</span><span class="op" id="6070139">)</span><span class="op" id="6070140">)</span>&nbsp;<span class="op" id="6070142">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6070145">if</span>&nbsp;<span class="ident" id="6070148">r</span>&nbsp;<span class="op" id="6070150">!=</span>&nbsp;<span class="builtintype" id="6070153">nil</span>&nbsp;<span class="op" id="6070157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6070161">f</span><span class="op" id="6070162">(</span><span class="ident" id="6070163">r</span><span class="op" id="6070164">.</span><span class="ident" id="6070165">Value</span><span class="op" id="6070170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6070174">for</span>&nbsp;<span class="ident" id="6070178">p</span>&nbsp;<span class="op" id="6070180">:=</span>&nbsp;<span class="ident" id="6070183">r</span><span class="op" id="6070184">.</span><span class="ident" id="6070185">Next</span><span class="op" id="6070189">(</span><span class="op" id="6070190">)</span><span class="op" id="6070191">;</span>&nbsp;<span class="ident" id="6070193">p</span>&nbsp;<span class="op" id="6070195">!=</span>&nbsp;<span class="ident" id="6070198">r</span><span class="op" id="6070199">;</span>&nbsp;<span class="ident" id="6070201">p</span>&nbsp;<span class="op" id="6070203">=</span>&nbsp;<span class="ident" id="6070205">p</span><span class="op" id="6070206">.</span><span class="ident" id="6070207">next</span>&nbsp;<span class="op" id="6070212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6070217">f</span><span class="op" id="6070218">(</span><span class="ident" id="6070219">p</span><span class="op" id="6070220">.</span><span class="ident" id="6070221">Value</span><span class="op" id="6070226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6070230">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6070233">}</span><br>
<span class="lineno"></span><span class="op" id="6070235">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
