<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6511785">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6511840">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6511894">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6511945">package</span>&nbsp;<span class="ident" id="6511953">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511958">import</span>&nbsp;<span class="op" id="6511965">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6511968">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6511977">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6511987">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6511997">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6512000">var</span>&nbsp;<span class="ident" id="6512004">writeTests</span>&nbsp;<span class="op" id="6512015">=</span>&nbsp;<span class="op" id="6512017">[</span><span class="op" id="6512018">]</span><span class="keyword" id="6512019">struct</span>&nbsp;<span class="op" id="6512026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512029">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6512037">[</span><span class="op" id="6512038">]</span><span class="op" id="6512039">[</span><span class="op" id="6512040">]</span><span class="builtintype" id="6512041">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512049">Output</span>&nbsp;&nbsp;<span class="builtintype" id="6512057">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512065">UseCRLF</span>&nbsp;<span class="builtintype" id="6512073">bool</span><br>
<span class="lineno"></span><span class="op" id="6512078">}</span><span class="op" id="6512079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512082">{</span><span class="ident" id="6512083">Input</span><span class="op" id="6512088">:</span>&nbsp;<span class="op" id="6512090">[</span><span class="op" id="6512091">]</span><span class="op" id="6512092">[</span><span class="op" id="6512093">]</span><span class="builtintype" id="6512094">string</span><span class="op" id="6512100">{</span><span class="op" id="6512101">{</span><span class="string" id="6512102">&#34;abc&#34;</span><span class="op" id="6512107">}</span><span class="op" id="6512108">}</span><span class="op" id="6512109">,</span>&nbsp;<span class="ident" id="6512111">Output</span><span class="op" id="6512117">:</span>&nbsp;<span class="string" id="6512119">&#34;abc\n&#34;</span><span class="op" id="6512126">}</span><span class="op" id="6512127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512130">{</span><span class="ident" id="6512131">Input</span><span class="op" id="6512136">:</span>&nbsp;<span class="op" id="6512138">[</span><span class="op" id="6512139">]</span><span class="op" id="6512140">[</span><span class="op" id="6512141">]</span><span class="builtintype" id="6512142">string</span><span class="op" id="6512148">{</span><span class="op" id="6512149">{</span><span class="string" id="6512150">&#34;abc&#34;</span><span class="op" id="6512155">}</span><span class="op" id="6512156">}</span><span class="op" id="6512157">,</span>&nbsp;<span class="ident" id="6512159">Output</span><span class="op" id="6512165">:</span>&nbsp;<span class="string" id="6512167">&#34;abc\r\n&#34;</span><span class="op" id="6512176">,</span>&nbsp;<span class="ident" id="6512178">UseCRLF</span><span class="op" id="6512185">:</span>&nbsp;<span class="builtintype" id="6512187">true</span><span class="op" id="6512191">}</span><span class="op" id="6512192">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512195">{</span><span class="ident" id="6512196">Input</span><span class="op" id="6512201">:</span>&nbsp;<span class="op" id="6512203">[</span><span class="op" id="6512204">]</span><span class="op" id="6512205">[</span><span class="op" id="6512206">]</span><span class="builtintype" id="6512207">string</span><span class="op" id="6512213">{</span><span class="op" id="6512214">{</span><span class="string" id="6512215">`&#34;abc&#34;`</span><span class="op" id="6512222">}</span><span class="op" id="6512223">}</span><span class="op" id="6512224">,</span>&nbsp;<span class="ident" id="6512226">Output</span><span class="op" id="6512232">:</span>&nbsp;<span class="string" id="6512234">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6512246">+</span>&nbsp;<span class="string" id="6512248">&#34;\n&#34;</span><span class="op" id="6512252">}</span><span class="op" id="6512253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512256">{</span><span class="ident" id="6512257">Input</span><span class="op" id="6512262">:</span>&nbsp;<span class="op" id="6512264">[</span><span class="op" id="6512265">]</span><span class="op" id="6512266">[</span><span class="op" id="6512267">]</span><span class="builtintype" id="6512268">string</span><span class="op" id="6512274">{</span><span class="op" id="6512275">{</span><span class="string" id="6512276">`a&#34;b`</span><span class="op" id="6512281">}</span><span class="op" id="6512282">}</span><span class="op" id="6512283">,</span>&nbsp;<span class="ident" id="6512285">Output</span><span class="op" id="6512291">:</span>&nbsp;<span class="string" id="6512293">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="6512302">+</span>&nbsp;<span class="string" id="6512304">&#34;\n&#34;</span><span class="op" id="6512308">}</span><span class="op" id="6512309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512312">{</span><span class="ident" id="6512313">Input</span><span class="op" id="6512318">:</span>&nbsp;<span class="op" id="6512320">[</span><span class="op" id="6512321">]</span><span class="op" id="6512322">[</span><span class="op" id="6512323">]</span><span class="builtintype" id="6512324">string</span><span class="op" id="6512330">{</span><span class="op" id="6512331">{</span><span class="string" id="6512332">`&#34;a&#34;b&#34;`</span><span class="op" id="6512339">}</span><span class="op" id="6512340">}</span><span class="op" id="6512341">,</span>&nbsp;<span class="ident" id="6512343">Output</span><span class="op" id="6512349">:</span>&nbsp;<span class="string" id="6512351">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6512364">+</span>&nbsp;<span class="string" id="6512366">&#34;\n&#34;</span><span class="op" id="6512370">}</span><span class="op" id="6512371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512374">{</span><span class="ident" id="6512375">Input</span><span class="op" id="6512380">:</span>&nbsp;<span class="op" id="6512382">[</span><span class="op" id="6512383">]</span><span class="op" id="6512384">[</span><span class="op" id="6512385">]</span><span class="builtintype" id="6512386">string</span><span class="op" id="6512392">{</span><span class="op" id="6512393">{</span><span class="string" id="6512394">&#34;&nbsp;abc&#34;</span><span class="op" id="6512400">}</span><span class="op" id="6512401">}</span><span class="op" id="6512402">,</span>&nbsp;<span class="ident" id="6512404">Output</span><span class="op" id="6512410">:</span>&nbsp;<span class="string" id="6512412">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="6512421">+</span>&nbsp;<span class="string" id="6512423">&#34;\n&#34;</span><span class="op" id="6512427">}</span><span class="op" id="6512428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512431">{</span><span class="ident" id="6512432">Input</span><span class="op" id="6512437">:</span>&nbsp;<span class="op" id="6512439">[</span><span class="op" id="6512440">]</span><span class="op" id="6512441">[</span><span class="op" id="6512442">]</span><span class="builtintype" id="6512443">string</span><span class="op" id="6512449">{</span><span class="op" id="6512450">{</span><span class="string" id="6512451">&#34;abc,def&#34;</span><span class="op" id="6512460">}</span><span class="op" id="6512461">}</span><span class="op" id="6512462">,</span>&nbsp;<span class="ident" id="6512464">Output</span><span class="op" id="6512470">:</span>&nbsp;<span class="string" id="6512472">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="6512484">+</span>&nbsp;<span class="string" id="6512486">&#34;\n&#34;</span><span class="op" id="6512490">}</span><span class="op" id="6512491">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512494">{</span><span class="ident" id="6512495">Input</span><span class="op" id="6512500">:</span>&nbsp;<span class="op" id="6512502">[</span><span class="op" id="6512503">]</span><span class="op" id="6512504">[</span><span class="op" id="6512505">]</span><span class="builtintype" id="6512506">string</span><span class="op" id="6512512">{</span><span class="op" id="6512513">{</span><span class="string" id="6512514">&#34;abc&#34;</span><span class="op" id="6512519">,</span>&nbsp;<span class="string" id="6512521">&#34;def&#34;</span><span class="op" id="6512526">}</span><span class="op" id="6512527">}</span><span class="op" id="6512528">,</span>&nbsp;<span class="ident" id="6512530">Output</span><span class="op" id="6512536">:</span>&nbsp;<span class="string" id="6512538">&#34;abc,def\n&#34;</span><span class="op" id="6512549">}</span><span class="op" id="6512550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512553">{</span><span class="ident" id="6512554">Input</span><span class="op" id="6512559">:</span>&nbsp;<span class="op" id="6512561">[</span><span class="op" id="6512562">]</span><span class="op" id="6512563">[</span><span class="op" id="6512564">]</span><span class="builtintype" id="6512565">string</span><span class="op" id="6512571">{</span><span class="op" id="6512572">{</span><span class="string" id="6512573">&#34;abc&#34;</span><span class="op" id="6512578">}</span><span class="op" id="6512579">,</span>&nbsp;<span class="op" id="6512581">{</span><span class="string" id="6512582">&#34;def&#34;</span><span class="op" id="6512587">}</span><span class="op" id="6512588">}</span><span class="op" id="6512589">,</span>&nbsp;<span class="ident" id="6512591">Output</span><span class="op" id="6512597">:</span>&nbsp;<span class="string" id="6512599">&#34;abc\ndef\n&#34;</span><span class="op" id="6512611">}</span><span class="op" id="6512612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512615">{</span><span class="ident" id="6512616">Input</span><span class="op" id="6512621">:</span>&nbsp;<span class="op" id="6512623">[</span><span class="op" id="6512624">]</span><span class="op" id="6512625">[</span><span class="op" id="6512626">]</span><span class="builtintype" id="6512627">string</span><span class="op" id="6512633">{</span><span class="op" id="6512634">{</span><span class="string" id="6512635">&#34;abc\ndef&#34;</span><span class="op" id="6512645">}</span><span class="op" id="6512646">}</span><span class="op" id="6512647">,</span>&nbsp;<span class="ident" id="6512649">Output</span><span class="op" id="6512655">:</span>&nbsp;<span class="string" id="6512657">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="6512673">}</span><span class="op" id="6512674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512677">{</span><span class="ident" id="6512678">Input</span><span class="op" id="6512683">:</span>&nbsp;<span class="op" id="6512685">[</span><span class="op" id="6512686">]</span><span class="op" id="6512687">[</span><span class="op" id="6512688">]</span><span class="builtintype" id="6512689">string</span><span class="op" id="6512695">{</span><span class="op" id="6512696">{</span><span class="string" id="6512697">&#34;abc\ndef&#34;</span><span class="op" id="6512707">}</span><span class="op" id="6512708">}</span><span class="op" id="6512709">,</span>&nbsp;<span class="ident" id="6512711">Output</span><span class="op" id="6512717">:</span>&nbsp;<span class="string" id="6512719">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="6512739">,</span>&nbsp;<span class="ident" id="6512741">UseCRLF</span><span class="op" id="6512748">:</span>&nbsp;<span class="builtintype" id="6512750">true</span><span class="op" id="6512754">}</span><span class="op" id="6512755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512758">{</span><span class="ident" id="6512759">Input</span><span class="op" id="6512764">:</span>&nbsp;<span class="op" id="6512766">[</span><span class="op" id="6512767">]</span><span class="op" id="6512768">[</span><span class="op" id="6512769">]</span><span class="builtintype" id="6512770">string</span><span class="op" id="6512776">{</span><span class="op" id="6512777">{</span><span class="string" id="6512778">&#34;abc\rdef&#34;</span><span class="op" id="6512788">}</span><span class="op" id="6512789">}</span><span class="op" id="6512790">,</span>&nbsp;<span class="ident" id="6512792">Output</span><span class="op" id="6512798">:</span>&nbsp;<span class="string" id="6512800">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="6512816">,</span>&nbsp;<span class="ident" id="6512818">UseCRLF</span><span class="op" id="6512825">:</span>&nbsp;<span class="builtintype" id="6512827">true</span><span class="op" id="6512831">}</span><span class="op" id="6512832">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512835">{</span><span class="ident" id="6512836">Input</span><span class="op" id="6512841">:</span>&nbsp;<span class="op" id="6512843">[</span><span class="op" id="6512844">]</span><span class="op" id="6512845">[</span><span class="op" id="6512846">]</span><span class="builtintype" id="6512847">string</span><span class="op" id="6512853">{</span><span class="op" id="6512854">{</span><span class="string" id="6512855">&#34;abc\rdef&#34;</span><span class="op" id="6512865">}</span><span class="op" id="6512866">}</span><span class="op" id="6512867">,</span>&nbsp;<span class="ident" id="6512869">Output</span><span class="op" id="6512875">:</span>&nbsp;<span class="string" id="6512877">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="6512893">,</span>&nbsp;<span class="ident" id="6512895">UseCRLF</span><span class="op" id="6512902">:</span>&nbsp;<span class="builtintype" id="6512904">false</span><span class="op" id="6512909">}</span><span class="op" id="6512910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512913">{</span><span class="ident" id="6512914">Input</span><span class="op" id="6512919">:</span>&nbsp;<span class="op" id="6512921">[</span><span class="op" id="6512922">]</span><span class="op" id="6512923">[</span><span class="op" id="6512924">]</span><span class="builtintype" id="6512925">string</span><span class="op" id="6512931">{</span><span class="op" id="6512932">{</span><span class="string" id="6512933">&#34;&#34;</span><span class="op" id="6512935">}</span><span class="op" id="6512936">}</span><span class="op" id="6512937">,</span>&nbsp;<span class="ident" id="6512939">Output</span><span class="op" id="6512945">:</span>&nbsp;<span class="string" id="6512947">&#34;\n&#34;</span><span class="op" id="6512951">}</span><span class="op" id="6512952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512955">{</span><span class="ident" id="6512956">Input</span><span class="op" id="6512961">:</span>&nbsp;<span class="op" id="6512963">[</span><span class="op" id="6512964">]</span><span class="op" id="6512965">[</span><span class="op" id="6512966">]</span><span class="builtintype" id="6512967">string</span><span class="op" id="6512973">{</span><span class="op" id="6512974">{</span><span class="string" id="6512975">&#34;&#34;</span><span class="op" id="6512977">,</span>&nbsp;<span class="string" id="6512979">&#34;&#34;</span><span class="op" id="6512981">}</span><span class="op" id="6512982">}</span><span class="op" id="6512983">,</span>&nbsp;<span class="ident" id="6512985">Output</span><span class="op" id="6512991">:</span>&nbsp;<span class="string" id="6512993">&#34;,\n&#34;</span><span class="op" id="6512998">}</span><span class="op" id="6512999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513002">{</span><span class="ident" id="6513003">Input</span><span class="op" id="6513008">:</span>&nbsp;<span class="op" id="6513010">[</span><span class="op" id="6513011">]</span><span class="op" id="6513012">[</span><span class="op" id="6513013">]</span><span class="builtintype" id="6513014">string</span><span class="op" id="6513020">{</span><span class="op" id="6513021">{</span><span class="string" id="6513022">&#34;&#34;</span><span class="op" id="6513024">,</span>&nbsp;<span class="string" id="6513026">&#34;&#34;</span><span class="op" id="6513028">,</span>&nbsp;<span class="string" id="6513030">&#34;&#34;</span><span class="op" id="6513032">}</span><span class="op" id="6513033">}</span><span class="op" id="6513034">,</span>&nbsp;<span class="ident" id="6513036">Output</span><span class="op" id="6513042">:</span>&nbsp;<span class="string" id="6513044">&#34;,,\n&#34;</span><span class="op" id="6513050">}</span><span class="op" id="6513051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513054">{</span><span class="ident" id="6513055">Input</span><span class="op" id="6513060">:</span>&nbsp;<span class="op" id="6513062">[</span><span class="op" id="6513063">]</span><span class="op" id="6513064">[</span><span class="op" id="6513065">]</span><span class="builtintype" id="6513066">string</span><span class="op" id="6513072">{</span><span class="op" id="6513073">{</span><span class="string" id="6513074">&#34;&#34;</span><span class="op" id="6513076">,</span>&nbsp;<span class="string" id="6513078">&#34;&#34;</span><span class="op" id="6513080">,</span>&nbsp;<span class="string" id="6513082">&#34;a&#34;</span><span class="op" id="6513085">}</span><span class="op" id="6513086">}</span><span class="op" id="6513087">,</span>&nbsp;<span class="ident" id="6513089">Output</span><span class="op" id="6513095">:</span>&nbsp;<span class="string" id="6513097">&#34;,,a\n&#34;</span><span class="op" id="6513104">}</span><span class="op" id="6513105">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513108">{</span><span class="ident" id="6513109">Input</span><span class="op" id="6513114">:</span>&nbsp;<span class="op" id="6513116">[</span><span class="op" id="6513117">]</span><span class="op" id="6513118">[</span><span class="op" id="6513119">]</span><span class="builtintype" id="6513120">string</span><span class="op" id="6513126">{</span><span class="op" id="6513127">{</span><span class="string" id="6513128">&#34;&#34;</span><span class="op" id="6513130">,</span>&nbsp;<span class="string" id="6513132">&#34;a&#34;</span><span class="op" id="6513135">,</span>&nbsp;<span class="string" id="6513137">&#34;&#34;</span><span class="op" id="6513139">}</span><span class="op" id="6513140">}</span><span class="op" id="6513141">,</span>&nbsp;<span class="ident" id="6513143">Output</span><span class="op" id="6513149">:</span>&nbsp;<span class="string" id="6513151">&#34;,a,\n&#34;</span><span class="op" id="6513158">}</span><span class="op" id="6513159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513162">{</span><span class="ident" id="6513163">Input</span><span class="op" id="6513168">:</span>&nbsp;<span class="op" id="6513170">[</span><span class="op" id="6513171">]</span><span class="op" id="6513172">[</span><span class="op" id="6513173">]</span><span class="builtintype" id="6513174">string</span><span class="op" id="6513180">{</span><span class="op" id="6513181">{</span><span class="string" id="6513182">&#34;&#34;</span><span class="op" id="6513184">,</span>&nbsp;<span class="string" id="6513186">&#34;a&#34;</span><span class="op" id="6513189">,</span>&nbsp;<span class="string" id="6513191">&#34;a&#34;</span><span class="op" id="6513194">}</span><span class="op" id="6513195">}</span><span class="op" id="6513196">,</span>&nbsp;<span class="ident" id="6513198">Output</span><span class="op" id="6513204">:</span>&nbsp;<span class="string" id="6513206">&#34;,a,a\n&#34;</span><span class="op" id="6513214">}</span><span class="op" id="6513215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513218">{</span><span class="ident" id="6513219">Input</span><span class="op" id="6513224">:</span>&nbsp;<span class="op" id="6513226">[</span><span class="op" id="6513227">]</span><span class="op" id="6513228">[</span><span class="op" id="6513229">]</span><span class="builtintype" id="6513230">string</span><span class="op" id="6513236">{</span><span class="op" id="6513237">{</span><span class="string" id="6513238">&#34;a&#34;</span><span class="op" id="6513241">,</span>&nbsp;<span class="string" id="6513243">&#34;&#34;</span><span class="op" id="6513245">,</span>&nbsp;<span class="string" id="6513247">&#34;&#34;</span><span class="op" id="6513249">}</span><span class="op" id="6513250">}</span><span class="op" id="6513251">,</span>&nbsp;<span class="ident" id="6513253">Output</span><span class="op" id="6513259">:</span>&nbsp;<span class="string" id="6513261">&#34;a,,\n&#34;</span><span class="op" id="6513268">}</span><span class="op" id="6513269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513272">{</span><span class="ident" id="6513273">Input</span><span class="op" id="6513278">:</span>&nbsp;<span class="op" id="6513280">[</span><span class="op" id="6513281">]</span><span class="op" id="6513282">[</span><span class="op" id="6513283">]</span><span class="builtintype" id="6513284">string</span><span class="op" id="6513290">{</span><span class="op" id="6513291">{</span><span class="string" id="6513292">&#34;a&#34;</span><span class="op" id="6513295">,</span>&nbsp;<span class="string" id="6513297">&#34;&#34;</span><span class="op" id="6513299">,</span>&nbsp;<span class="string" id="6513301">&#34;a&#34;</span><span class="op" id="6513304">}</span><span class="op" id="6513305">}</span><span class="op" id="6513306">,</span>&nbsp;<span class="ident" id="6513308">Output</span><span class="op" id="6513314">:</span>&nbsp;<span class="string" id="6513316">&#34;a,,a\n&#34;</span><span class="op" id="6513324">}</span><span class="op" id="6513325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513328">{</span><span class="ident" id="6513329">Input</span><span class="op" id="6513334">:</span>&nbsp;<span class="op" id="6513336">[</span><span class="op" id="6513337">]</span><span class="op" id="6513338">[</span><span class="op" id="6513339">]</span><span class="builtintype" id="6513340">string</span><span class="op" id="6513346">{</span><span class="op" id="6513347">{</span><span class="string" id="6513348">&#34;a&#34;</span><span class="op" id="6513351">,</span>&nbsp;<span class="string" id="6513353">&#34;a&#34;</span><span class="op" id="6513356">,</span>&nbsp;<span class="string" id="6513358">&#34;&#34;</span><span class="op" id="6513360">}</span><span class="op" id="6513361">}</span><span class="op" id="6513362">,</span>&nbsp;<span class="ident" id="6513364">Output</span><span class="op" id="6513370">:</span>&nbsp;<span class="string" id="6513372">&#34;a,a,\n&#34;</span><span class="op" id="6513380">}</span><span class="op" id="6513381">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513384">{</span><span class="ident" id="6513385">Input</span><span class="op" id="6513390">:</span>&nbsp;<span class="op" id="6513392">[</span><span class="op" id="6513393">]</span><span class="op" id="6513394">[</span><span class="op" id="6513395">]</span><span class="builtintype" id="6513396">string</span><span class="op" id="6513402">{</span><span class="op" id="6513403">{</span><span class="string" id="6513404">&#34;a&#34;</span><span class="op" id="6513407">,</span>&nbsp;<span class="string" id="6513409">&#34;a&#34;</span><span class="op" id="6513412">,</span>&nbsp;<span class="string" id="6513414">&#34;a&#34;</span><span class="op" id="6513417">}</span><span class="op" id="6513418">}</span><span class="op" id="6513419">,</span>&nbsp;<span class="ident" id="6513421">Output</span><span class="op" id="6513427">:</span>&nbsp;<span class="string" id="6513429">&#34;a,a,a\n&#34;</span><span class="op" id="6513438">}</span><span class="op" id="6513439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513442">{</span><span class="ident" id="6513443">Input</span><span class="op" id="6513448">:</span>&nbsp;<span class="op" id="6513450">[</span><span class="op" id="6513451">]</span><span class="op" id="6513452">[</span><span class="op" id="6513453">]</span><span class="builtintype" id="6513454">string</span><span class="op" id="6513460">{</span><span class="op" id="6513461">{</span><span class="string" id="6513462">`\.`</span><span class="op" id="6513466">}</span><span class="op" id="6513467">}</span><span class="op" id="6513468">,</span>&nbsp;<span class="ident" id="6513470">Output</span><span class="op" id="6513476">:</span>&nbsp;<span class="string" id="6513478">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="6513489">}</span><span class="op" id="6513490">,</span><br>
<span class="lineno"></span><span class="op" id="6513492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6513495">func</span>&nbsp;<span class="ident" id="6513500">TestWrite</span><span class="op" id="6513509">(</span><span class="ident" id="6513510">t</span>&nbsp;<span class="op" id="6513512">*</span><span class="ident" id="6513513">testing</span><span class="op" id="6513520">.</span><span class="ident" id="6513521">T</span><span class="op" id="6513522">)</span>&nbsp;<span class="op" id="6513524">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513527">for</span>&nbsp;<span class="ident" id="6513531">n</span><span class="op" id="6513532">,</span>&nbsp;<span class="ident" id="6513534">tt</span>&nbsp;<span class="op" id="6513537">:=</span>&nbsp;<span class="keyword" id="6513540">range</span>&nbsp;<span class="ident" id="6513546">writeTests</span>&nbsp;<span class="op" id="6513557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513561">b</span>&nbsp;<span class="op" id="6513563">:=</span>&nbsp;<span class="op" id="6513566">&amp;</span><span class="ident" id="6513567">bytes</span><span class="op" id="6513572">.</span><span class="ident" id="6513573">Buffer</span><span class="op" id="6513579">{</span><span class="op" id="6513580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513584">f</span>&nbsp;<span class="op" id="6513586">:=</span>&nbsp;<span class="ident" id="6513589">NewWriter</span><span class="op" id="6513598">(</span><span class="ident" id="6513599">b</span><span class="op" id="6513600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513604">f</span><span class="op" id="6513605">.</span><span class="ident" id="6513606">UseCRLF</span>&nbsp;<span class="op" id="6513614">=</span>&nbsp;<span class="ident" id="6513616">tt</span><span class="op" id="6513618">.</span><span class="ident" id="6513619">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513629">err</span>&nbsp;<span class="op" id="6513633">:=</span>&nbsp;<span class="ident" id="6513636">f</span><span class="op" id="6513637">.</span><span class="ident" id="6513638">WriteAll</span><span class="op" id="6513646">(</span><span class="ident" id="6513647">tt</span><span class="op" id="6513649">.</span><span class="ident" id="6513650">Input</span><span class="op" id="6513655">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513659">if</span>&nbsp;<span class="ident" id="6513662">err</span>&nbsp;<span class="op" id="6513666">!=</span>&nbsp;<span class="ident" id="6513669">nil</span>&nbsp;<span class="op" id="6513673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513678">t</span><span class="op" id="6513679">.</span><span class="ident" id="6513680">Errorf</span><span class="op" id="6513686">(</span><span class="string" id="6513687">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6513711">,</span>&nbsp;<span class="ident" id="6513713">err</span><span class="op" id="6513716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513724">out</span>&nbsp;<span class="op" id="6513728">:=</span>&nbsp;<span class="ident" id="6513731">b</span><span class="op" id="6513732">.</span><span class="ident" id="6513733">String</span><span class="op" id="6513739">(</span><span class="op" id="6513740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513744">if</span>&nbsp;<span class="ident" id="6513747">out</span>&nbsp;<span class="op" id="6513751">!=</span>&nbsp;<span class="ident" id="6513754">tt</span><span class="op" id="6513756">.</span><span class="ident" id="6513757">Output</span>&nbsp;<span class="op" id="6513764">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513769">t</span><span class="op" id="6513770">.</span><span class="ident" id="6513771">Errorf</span><span class="op" id="6513777">(</span><span class="string" id="6513778">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6513799">,</span>&nbsp;<span class="ident" id="6513801">n</span><span class="op" id="6513802">,</span>&nbsp;<span class="ident" id="6513804">out</span><span class="op" id="6513807">,</span>&nbsp;<span class="ident" id="6513809">tt</span><span class="op" id="6513811">.</span><span class="ident" id="6513812">Output</span><span class="op" id="6513818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513825">}</span><br>
<span class="lineno"></span><span class="op" id="6513827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6513830">type</span>&nbsp;<span class="ident" id="6513835">errorWriter</span>&nbsp;<span class="keyword" id="6513847">struct</span><span class="op" id="6513853">{</span><span class="op" id="6513854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6513857">func</span>&nbsp;<span class="op" id="6513862">(</span><span class="ident" id="6513863">e</span>&nbsp;<span class="ident" id="6513865">errorWriter</span><span class="op" id="6513876">)</span>&nbsp;<span class="ident" id="6513878">Write</span><span class="op" id="6513883">(</span><span class="ident" id="6513884">b</span>&nbsp;<span class="op" id="6513886">[</span><span class="op" id="6513887">]</span><span class="builtintype" id="6513888">byte</span><span class="op" id="6513892">)</span>&nbsp;<span class="op" id="6513894">(</span><span class="builtintype" id="6513895">int</span><span class="op" id="6513898">,</span>&nbsp;<span class="builtintype" id="6513900">error</span><span class="op" id="6513905">)</span>&nbsp;<span class="op" id="6513907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513910">return</span>&nbsp;<span class="num" id="6513917">0</span><span class="op" id="6513918">,</span>&nbsp;<span class="ident" id="6513920">errors</span><span class="op" id="6513926">.</span><span class="ident" id="6513927">New</span><span class="op" id="6513930">(</span><span class="string" id="6513931">&#34;Test&#34;</span><span class="op" id="6513937">)</span><br>
<span class="lineno"></span><span class="op" id="6513939">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6513942">func</span>&nbsp;<span class="ident" id="6513947">TestError</span><span class="op" id="6513956">(</span><span class="ident" id="6513957">t</span>&nbsp;<span class="op" id="6513959">*</span><span class="ident" id="6513960">testing</span><span class="op" id="6513967">.</span><span class="ident" id="6513968">T</span><span class="op" id="6513969">)</span>&nbsp;<span class="op" id="6513971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513974">b</span>&nbsp;<span class="op" id="6513976">:=</span>&nbsp;<span class="op" id="6513979">&amp;</span><span class="ident" id="6513980">bytes</span><span class="op" id="6513985">.</span><span class="ident" id="6513986">Buffer</span><span class="op" id="6513992">{</span><span class="op" id="6513993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513996">f</span>&nbsp;<span class="op" id="6513998">:=</span>&nbsp;<span class="ident" id="6514001">NewWriter</span><span class="op" id="6514010">(</span><span class="ident" id="6514011">b</span><span class="op" id="6514012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514015">f</span><span class="op" id="6514016">.</span><span class="ident" id="6514017">Write</span><span class="op" id="6514022">(</span><span class="op" id="6514023">[</span><span class="op" id="6514024">]</span><span class="builtintype" id="6514025">string</span><span class="op" id="6514031">{</span><span class="string" id="6514032">&#34;abc&#34;</span><span class="op" id="6514037">}</span><span class="op" id="6514038">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514041">f</span><span class="op" id="6514042">.</span><span class="ident" id="6514043">Flush</span><span class="op" id="6514048">(</span><span class="op" id="6514049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514052">err</span>&nbsp;<span class="op" id="6514056">:=</span>&nbsp;<span class="ident" id="6514059">f</span><span class="op" id="6514060">.</span><span class="ident" id="6514061">Error</span><span class="op" id="6514066">(</span><span class="op" id="6514067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514071">if</span>&nbsp;<span class="ident" id="6514074">err</span>&nbsp;<span class="op" id="6514078">!=</span>&nbsp;<span class="ident" id="6514081">nil</span>&nbsp;<span class="op" id="6514085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514089">t</span><span class="op" id="6514090">.</span><span class="ident" id="6514091">Errorf</span><span class="op" id="6514097">(</span><span class="string" id="6514098">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6514122">,</span>&nbsp;<span class="ident" id="6514124">err</span><span class="op" id="6514127">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514134">f</span>&nbsp;<span class="op" id="6514136">=</span>&nbsp;<span class="ident" id="6514138">NewWriter</span><span class="op" id="6514147">(</span><span class="ident" id="6514148">errorWriter</span><span class="op" id="6514159">{</span><span class="op" id="6514160">}</span><span class="op" id="6514161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514164">f</span><span class="op" id="6514165">.</span><span class="ident" id="6514166">Write</span><span class="op" id="6514171">(</span><span class="op" id="6514172">[</span><span class="op" id="6514173">]</span><span class="builtintype" id="6514174">string</span><span class="op" id="6514180">{</span><span class="string" id="6514181">&#34;abc&#34;</span><span class="op" id="6514186">}</span><span class="op" id="6514187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514190">f</span><span class="op" id="6514191">.</span><span class="ident" id="6514192">Flush</span><span class="op" id="6514197">(</span><span class="op" id="6514198">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514201">err</span>&nbsp;<span class="op" id="6514205">=</span>&nbsp;<span class="ident" id="6514207">f</span><span class="op" id="6514208">.</span><span class="ident" id="6514209">Error</span><span class="op" id="6514214">(</span><span class="op" id="6514215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514219">if</span>&nbsp;<span class="ident" id="6514222">err</span>&nbsp;<span class="op" id="6514226">==</span>&nbsp;<span class="ident" id="6514229">nil</span>&nbsp;<span class="op" id="6514233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514237">t</span><span class="op" id="6514238">.</span><span class="ident" id="6514239">Error</span><span class="op" id="6514244">(</span><span class="string" id="6514245">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="6514270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514273">}</span><br>
<span class="lineno">85</span><span class="op" id="6514275">}</span>
</div>
</body>
</html>
