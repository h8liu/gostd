<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7878329">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7878384">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7878438">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7878489">package</span>&nbsp;<span class="ident" id="7878497">httputil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7878507">import</span>&nbsp;<span class="op" id="7878514">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878517">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878526">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878533">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878539">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878552">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878564">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878575">&#34;runtime&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878586">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7878597">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7878607">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7878610">type</span>&nbsp;<span class="ident" id="7878615">dumpTest</span>&nbsp;<span class="keyword" id="7878624">struct</span>&nbsp;<span class="op" id="7878631">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878634">Req</span>&nbsp;&nbsp;<span class="ident" id="7878639">http</span><span class="op" id="7878643">.</span><span class="ident" id="7878644">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878653">Body</span>&nbsp;<span class="keyword" id="7878658">interface</span><span class="op" id="7878667">{</span><span class="op" id="7878668">}</span>&nbsp;<span class="comment" id="7878670">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878736">WantDump</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7878748">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878756">WantDumpOut</span>&nbsp;<span class="builtintype" id="7878768">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878776">NoBody</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7878788">bool</span>&nbsp;<span class="comment" id="7878793">//&nbsp;if&nbsp;true,&nbsp;set&nbsp;DumpRequest{,Out}&nbsp;body&nbsp;to&nbsp;false</span><br>
<span class="lineno"></span><span class="op" id="7878841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7878844">var</span>&nbsp;<span class="ident" id="7878848">dumpTests</span>&nbsp;<span class="op" id="7878858">=</span>&nbsp;<span class="op" id="7878860">[</span><span class="op" id="7878861">]</span><span class="ident" id="7878862">dumpTest</span><span class="op" id="7878870">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7878874">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7878926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878930">Req</span><span class="op" id="7878933">:</span>&nbsp;<span class="ident" id="7878935">http</span><span class="op" id="7878939">.</span><span class="ident" id="7878940">Request</span><span class="op" id="7878947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878952">Method</span><span class="op" id="7878958">:</span>&nbsp;<span class="string" id="7878960">&#34;GET&#34;</span><span class="op" id="7878965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878970">URL</span><span class="op" id="7878973">:</span>&nbsp;<span class="op" id="7878975">&amp;</span><span class="ident" id="7878976">url</span><span class="op" id="7878979">.</span><span class="ident" id="7878980">URL</span><span class="op" id="7878983">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7878989">Scheme</span><span class="op" id="7878995">:</span>&nbsp;<span class="string" id="7878997">&#34;http&#34;</span><span class="op" id="7879003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879009">Host</span><span class="op" id="7879013">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7879017">&#34;www.google.com&#34;</span><span class="op" id="7879033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879039">Path</span><span class="op" id="7879043">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7879047">&#34;/search&#34;</span><span class="op" id="7879056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879061">}</span><span class="op" id="7879062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879067">ProtoMajor</span><span class="op" id="7879077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7879085">1</span><span class="op" id="7879086">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879091">ProtoMinor</span><span class="op" id="7879101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7879109">1</span><span class="op" id="7879110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879115">TransferEncoding</span><span class="op" id="7879131">:</span>&nbsp;<span class="op" id="7879133">[</span><span class="op" id="7879134">]</span><span class="builtintype" id="7879135">string</span><span class="op" id="7879141">{</span><span class="string" id="7879142">&#34;chunked&#34;</span><span class="op" id="7879151">}</span><span class="op" id="7879152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879156">}</span><span class="op" id="7879157">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879162">Body</span><span class="op" id="7879166">:</span>&nbsp;<span class="op" id="7879168">[</span><span class="op" id="7879169">]</span><span class="builtintype" id="7879170">byte</span><span class="op" id="7879174">(</span><span class="string" id="7879175">&#34;abcdef&#34;</span><span class="op" id="7879183">)</span><span class="op" id="7879184">,</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879189">WantDump</span><span class="op" id="7879197">:</span>&nbsp;<span class="string" id="7879199">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7879226">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879231">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7879258">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879263">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7879300">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879305">chunk</span><span class="op" id="7879310">(</span><span class="string" id="7879311">&#34;abcdef&#34;</span><span class="op" id="7879319">)</span>&nbsp;<span class="op" id="7879321">+</span>&nbsp;<span class="ident" id="7879323">chunk</span><span class="op" id="7879328">(</span><span class="string" id="7879329">&#34;&#34;</span><span class="op" id="7879331">)</span><span class="op" id="7879332">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879335">}</span><span class="op" id="7879336">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7879340">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7879423">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879457">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879461">Req</span><span class="op" id="7879464">:</span>&nbsp;<span class="ident" id="7879466">http</span><span class="op" id="7879470">.</span><span class="ident" id="7879471">Request</span><span class="op" id="7879478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879483">Method</span><span class="op" id="7879489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7879495">&#34;GET&#34;</span><span class="op" id="7879500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879505">URL</span><span class="op" id="7879508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7879517">mustParseURL</span><span class="op" id="7879529">(</span><span class="string" id="7879530">&#34;/foo&#34;</span><span class="op" id="7879536">)</span><span class="op" id="7879537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879542">ProtoMajor</span><span class="op" id="7879552">:</span>&nbsp;<span class="num" id="7879554">1</span><span class="op" id="7879555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879560">ProtoMinor</span><span class="op" id="7879570">:</span>&nbsp;<span class="num" id="7879572">0</span><span class="op" id="7879573">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879578">Header</span><span class="op" id="7879584">:</span>&nbsp;<span class="ident" id="7879586">http</span><span class="op" id="7879590">.</span><span class="ident" id="7879591">Header</span><span class="op" id="7879597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879603">&#34;X-Foo&#34;</span><span class="op" id="7879610">:</span>&nbsp;<span class="op" id="7879612">[</span><span class="op" id="7879613">]</span><span class="builtintype" id="7879614">string</span><span class="op" id="7879620">{</span><span class="string" id="7879621">&#34;X-Bar&#34;</span><span class="op" id="7879628">}</span><span class="op" id="7879629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879634">}</span><span class="op" id="7879635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879639">}</span><span class="op" id="7879640">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879645">WantDump</span><span class="op" id="7879653">:</span>&nbsp;<span class="string" id="7879655">&#34;GET&nbsp;/foo&nbsp;HTTP/1.0\r\n&#34;</span>&nbsp;<span class="op" id="7879679">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879684">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7879706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879709">}</span><span class="op" id="7879710">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879714">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879718">Req</span><span class="op" id="7879721">:</span>&nbsp;<span class="op" id="7879723">*</span><span class="ident" id="7879724">mustNewRequest</span><span class="op" id="7879738">(</span><span class="string" id="7879739">&#34;GET&#34;</span><span class="op" id="7879744">,</span>&nbsp;<span class="string" id="7879746">&#34;http://example.com/foo&#34;</span><span class="op" id="7879770">,</span>&nbsp;<span class="ident" id="7879772">nil</span><span class="op" id="7879775">)</span><span class="op" id="7879776">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7879781">WantDumpOut</span><span class="op" id="7879792">:</span>&nbsp;<span class="string" id="7879794">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7879818">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879823">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7879847">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879852">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7879890">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7879895">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7879926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7879929">}</span><span class="op" id="7879930">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7879934">//&nbsp;Test&nbsp;that&nbsp;an&nbsp;https&nbsp;URL&nbsp;doesn&#39;t&nbsp;try&nbsp;to&nbsp;do&nbsp;an&nbsp;SSL&nbsp;negotiation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7879998">//&nbsp;with&nbsp;a&nbsp;bytes.Buffer&nbsp;and&nbsp;hang&nbsp;with&nbsp;all&nbsp;goroutines&nbsp;not</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7880055">//&nbsp;runnable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880073">Req</span><span class="op" id="7880076">:</span>&nbsp;<span class="op" id="7880078">*</span><span class="ident" id="7880079">mustNewRequest</span><span class="op" id="7880093">(</span><span class="string" id="7880094">&#34;GET&#34;</span><span class="op" id="7880099">,</span>&nbsp;<span class="string" id="7880101">&#34;https://example.com/foo&#34;</span><span class="op" id="7880126">,</span>&nbsp;<span class="ident" id="7880128">nil</span><span class="op" id="7880131">)</span><span class="op" id="7880132">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880137">WantDumpOut</span><span class="op" id="7880148">:</span>&nbsp;<span class="string" id="7880150">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7880174">+</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880179">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7880203">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880208">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7880246">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880251">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7880282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880285">}</span><span class="op" id="7880286">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7880290">//&nbsp;Request&nbsp;with&nbsp;Body,&nbsp;but&nbsp;Dump&nbsp;requested&nbsp;without&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880348">Req</span><span class="op" id="7880351">:</span>&nbsp;<span class="ident" id="7880353">http</span><span class="op" id="7880357">.</span><span class="ident" id="7880358">Request</span><span class="op" id="7880365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880370">Method</span><span class="op" id="7880376">:</span>&nbsp;<span class="string" id="7880378">&#34;POST&#34;</span><span class="op" id="7880384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880389">URL</span><span class="op" id="7880392">:</span>&nbsp;<span class="op" id="7880394">&amp;</span><span class="ident" id="7880395">url</span><span class="op" id="7880398">.</span><span class="ident" id="7880399">URL</span><span class="op" id="7880402">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880408">Scheme</span><span class="op" id="7880414">:</span>&nbsp;<span class="string" id="7880416">&#34;http&#34;</span><span class="op" id="7880422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880428">Host</span><span class="op" id="7880432">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7880436">&#34;post.tld&#34;</span><span class="op" id="7880446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880452">Path</span><span class="op" id="7880456">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7880460">&#34;/&#34;</span><span class="op" id="7880463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880468">}</span><span class="op" id="7880469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880474">ContentLength</span><span class="op" id="7880487">:</span>&nbsp;<span class="num" id="7880489">6</span><span class="op" id="7880490">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880495">ProtoMajor</span><span class="op" id="7880505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7880510">1</span><span class="op" id="7880511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880516">ProtoMinor</span><span class="op" id="7880526">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7880531">1</span><span class="op" id="7880532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880536">}</span><span class="op" id="7880537">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880542">Body</span><span class="op" id="7880546">:</span>&nbsp;<span class="op" id="7880548">[</span><span class="op" id="7880549">]</span><span class="builtintype" id="7880550">byte</span><span class="op" id="7880554">(</span><span class="string" id="7880555">&#34;abcdef&#34;</span><span class="op" id="7880563">)</span><span class="op" id="7880564">,</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880569">WantDumpOut</span><span class="op" id="7880580">:</span>&nbsp;<span class="string" id="7880582">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7880604">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880609">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7880630">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880635">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7880673">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880678">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7880702">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7880707">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span><span class="op" id="7880738">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880743">NoBody</span><span class="op" id="7880749">:</span>&nbsp;<span class="ident" id="7880751">true</span><span class="op" id="7880755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880758">}</span><span class="op" id="7880759">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7880763">//&nbsp;Request&nbsp;with&nbsp;Body&nbsp;&gt;&nbsp;8196&nbsp;(default&nbsp;buffer&nbsp;size)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880818">Req</span><span class="op" id="7880821">:</span>&nbsp;<span class="ident" id="7880823">http</span><span class="op" id="7880827">.</span><span class="ident" id="7880828">Request</span><span class="op" id="7880835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880840">Method</span><span class="op" id="7880846">:</span>&nbsp;<span class="string" id="7880848">&#34;POST&#34;</span><span class="op" id="7880854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880859">URL</span><span class="op" id="7880862">:</span>&nbsp;<span class="op" id="7880864">&amp;</span><span class="ident" id="7880865">url</span><span class="op" id="7880868">.</span><span class="ident" id="7880869">URL</span><span class="op" id="7880872">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880878">Scheme</span><span class="op" id="7880884">:</span>&nbsp;<span class="string" id="7880886">&#34;http&#34;</span><span class="op" id="7880892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880898">Host</span><span class="op" id="7880902">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7880906">&#34;post.tld&#34;</span><span class="op" id="7880916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880922">Path</span><span class="op" id="7880926">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7880930">&#34;/&#34;</span><span class="op" id="7880933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7880938">}</span><span class="op" id="7880939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880944">ContentLength</span><span class="op" id="7880957">:</span>&nbsp;<span class="num" id="7880959">8193</span><span class="op" id="7880963">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880968">ProtoMajor</span><span class="op" id="7880978">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7880983">1</span><span class="op" id="7880984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7880989">ProtoMinor</span><span class="op" id="7880999">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7881004">1</span><span class="op" id="7881005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881009">}</span><span class="op" id="7881010">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881015">Body</span><span class="op" id="7881019">:</span>&nbsp;<span class="ident" id="7881021">bytes</span><span class="op" id="7881026">.</span><span class="ident" id="7881027">Repeat</span><span class="op" id="7881033">(</span><span class="op" id="7881034">[</span><span class="op" id="7881035">]</span><span class="builtintype" id="7881036">byte</span><span class="op" id="7881040">(</span><span class="string" id="7881041">&#34;a&#34;</span><span class="op" id="7881044">)</span><span class="op" id="7881045">,</span>&nbsp;<span class="num" id="7881047">8193</span><span class="op" id="7881051">)</span><span class="op" id="7881052">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881057">WantDumpOut</span><span class="op" id="7881068">:</span>&nbsp;<span class="string" id="7881070">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7881092">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881097">&#34;Host:&nbsp;post.tld\r\n&#34;</span>&nbsp;<span class="op" id="7881118">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881123">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7881161">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881166">&#34;Content-Length:&nbsp;8193\r\n&#34;</span>&nbsp;<span class="op" id="7881193">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7881198">&#34;Accept-Encoding:&nbsp;gzip\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7881230">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881235">strings</span><span class="op" id="7881242">.</span><span class="ident" id="7881243">Repeat</span><span class="op" id="7881249">(</span><span class="string" id="7881250">&#34;a&#34;</span><span class="op" id="7881253">,</span>&nbsp;<span class="num" id="7881255">8193</span><span class="op" id="7881259">)</span><span class="op" id="7881260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881263">}</span><span class="op" id="7881264">,</span><br>
<span class="lineno"></span><span class="op" id="7881266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7881269">func</span>&nbsp;<span class="ident" id="7881274">TestDumpRequest</span><span class="op" id="7881289">(</span><span class="ident" id="7881290">t</span>&nbsp;<span class="op" id="7881292">*</span><span class="ident" id="7881293">testing</span><span class="op" id="7881300">.</span><span class="ident" id="7881301">T</span><span class="op" id="7881302">)</span>&nbsp;<span class="op" id="7881304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881307">numg0</span>&nbsp;<span class="op" id="7881313">:=</span>&nbsp;<span class="ident" id="7881316">runtime</span><span class="op" id="7881323">.</span><span class="ident" id="7881324">NumGoroutine</span><span class="op" id="7881336">(</span><span class="op" id="7881337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881340">for</span>&nbsp;<span class="ident" id="7881344">i</span><span class="op" id="7881345">,</span>&nbsp;<span class="ident" id="7881347">tt</span>&nbsp;<span class="op" id="7881350">:=</span>&nbsp;<span class="keyword" id="7881353">range</span>&nbsp;<span class="ident" id="7881359">dumpTests</span>&nbsp;<span class="op" id="7881369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881373">setBody</span>&nbsp;<span class="op" id="7881381">:=</span>&nbsp;<span class="keyword" id="7881384">func</span><span class="op" id="7881388">(</span><span class="op" id="7881389">)</span>&nbsp;<span class="op" id="7881391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881396">if</span>&nbsp;<span class="ident" id="7881399">tt</span><span class="op" id="7881401">.</span><span class="ident" id="7881402">Body</span>&nbsp;<span class="op" id="7881407">==</span>&nbsp;<span class="ident" id="7881410">nil</span>&nbsp;<span class="op" id="7881414">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881420">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881435">switch</span>&nbsp;<span class="ident" id="7881442">b</span>&nbsp;<span class="op" id="7881444">:=</span>&nbsp;<span class="ident" id="7881447">tt</span><span class="op" id="7881449">.</span><span class="ident" id="7881450">Body</span><span class="op" id="7881454">.</span><span class="op" id="7881455">(</span><span class="keyword" id="7881456">type</span><span class="op" id="7881460">)</span>&nbsp;<span class="op" id="7881462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881467">case</span>&nbsp;<span class="op" id="7881472">[</span><span class="op" id="7881473">]</span><span class="builtintype" id="7881474">byte</span><span class="op" id="7881478">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881484">tt</span><span class="op" id="7881486">.</span><span class="ident" id="7881487">Req</span><span class="op" id="7881490">.</span><span class="ident" id="7881491">Body</span>&nbsp;<span class="op" id="7881496">=</span>&nbsp;<span class="ident" id="7881498">ioutil</span><span class="op" id="7881504">.</span><span class="ident" id="7881505">NopCloser</span><span class="op" id="7881514">(</span><span class="ident" id="7881515">bytes</span><span class="op" id="7881520">.</span><span class="ident" id="7881521">NewReader</span><span class="op" id="7881530">(</span><span class="ident" id="7881531">b</span><span class="op" id="7881532">)</span><span class="op" id="7881533">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881538">case</span>&nbsp;<span class="keyword" id="7881543">func</span><span class="op" id="7881547">(</span><span class="op" id="7881548">)</span>&nbsp;<span class="ident" id="7881550">io</span><span class="op" id="7881552">.</span><span class="ident" id="7881553">ReadCloser</span><span class="op" id="7881563">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881569">tt</span><span class="op" id="7881571">.</span><span class="ident" id="7881572">Req</span><span class="op" id="7881575">.</span><span class="ident" id="7881576">Body</span>&nbsp;<span class="op" id="7881581">=</span>&nbsp;<span class="ident" id="7881583">b</span><span class="op" id="7881584">(</span><span class="op" id="7881585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881590">default</span><span class="op" id="7881597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881603">t</span><span class="op" id="7881604">.</span><span class="ident" id="7881605">Fatalf</span><span class="op" id="7881611">(</span><span class="string" id="7881612">&#34;Test&nbsp;%d:&nbsp;unsupported&nbsp;Body&nbsp;of&nbsp;%T&#34;</span><span class="op" id="7881645">,</span>&nbsp;<span class="ident" id="7881647">i</span><span class="op" id="7881648">,</span>&nbsp;<span class="ident" id="7881650">tt</span><span class="op" id="7881652">.</span><span class="ident" id="7881653">Body</span><span class="op" id="7881657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881662">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881670">setBody</span><span class="op" id="7881677">(</span><span class="op" id="7881678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881682">if</span>&nbsp;<span class="ident" id="7881685">tt</span><span class="op" id="7881687">.</span><span class="ident" id="7881688">Req</span><span class="op" id="7881691">.</span><span class="ident" id="7881692">Header</span>&nbsp;<span class="op" id="7881699">==</span>&nbsp;<span class="ident" id="7881702">nil</span>&nbsp;<span class="op" id="7881706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881711">tt</span><span class="op" id="7881713">.</span><span class="ident" id="7881714">Req</span><span class="op" id="7881717">.</span><span class="ident" id="7881718">Header</span>&nbsp;<span class="op" id="7881725">=</span>&nbsp;<span class="builtinfunc" id="7881727">make</span><span class="op" id="7881731">(</span><span class="ident" id="7881732">http</span><span class="op" id="7881736">.</span><span class="ident" id="7881737">Header</span><span class="op" id="7881743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881747">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881752">if</span>&nbsp;<span class="ident" id="7881755">tt</span><span class="op" id="7881757">.</span><span class="ident" id="7881758">WantDump</span>&nbsp;<span class="op" id="7881767">!=</span>&nbsp;<span class="string" id="7881770">&#34;&#34;</span>&nbsp;<span class="op" id="7881773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881778">setBody</span><span class="op" id="7881785">(</span><span class="op" id="7881786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881791">dump</span><span class="op" id="7881795">,</span>&nbsp;<span class="ident" id="7881797">err</span>&nbsp;<span class="op" id="7881801">:=</span>&nbsp;<span class="ident" id="7881804">DumpRequest</span><span class="op" id="7881815">(</span><span class="op" id="7881816">&amp;</span><span class="ident" id="7881817">tt</span><span class="op" id="7881819">.</span><span class="ident" id="7881820">Req</span><span class="op" id="7881823">,</span>&nbsp;<span class="op" id="7881825">!</span><span class="ident" id="7881826">tt</span><span class="op" id="7881828">.</span><span class="ident" id="7881829">NoBody</span><span class="op" id="7881835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881840">if</span>&nbsp;<span class="ident" id="7881843">err</span>&nbsp;<span class="op" id="7881847">!=</span>&nbsp;<span class="ident" id="7881850">nil</span>&nbsp;<span class="op" id="7881854">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881860">t</span><span class="op" id="7881861">.</span><span class="ident" id="7881862">Errorf</span><span class="op" id="7881868">(</span><span class="string" id="7881869">&#34;DumpRequest&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7881890">,</span>&nbsp;<span class="ident" id="7881892">i</span><span class="op" id="7881893">,</span>&nbsp;<span class="ident" id="7881895">err</span><span class="op" id="7881898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881904">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7881916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7881921">if</span>&nbsp;<span class="builtintype" id="7881924">string</span><span class="op" id="7881930">(</span><span class="ident" id="7881931">dump</span><span class="op" id="7881935">)</span>&nbsp;<span class="op" id="7881937">!=</span>&nbsp;<span class="ident" id="7881940">tt</span><span class="op" id="7881942">.</span><span class="ident" id="7881943">WantDump</span>&nbsp;<span class="op" id="7881952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7881958">t</span><span class="op" id="7881959">.</span><span class="ident" id="7881960">Errorf</span><span class="op" id="7881966">(</span><span class="string" id="7881967">&#34;DumpRequest&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7882011">,</span>&nbsp;<span class="ident" id="7882013">i</span><span class="op" id="7882014">,</span>&nbsp;<span class="ident" id="7882016">tt</span><span class="op" id="7882018">.</span><span class="ident" id="7882019">WantDump</span><span class="op" id="7882027">,</span>&nbsp;<span class="builtintype" id="7882029">string</span><span class="op" id="7882035">(</span><span class="ident" id="7882036">dump</span><span class="op" id="7882040">)</span><span class="op" id="7882041">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882047">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882068">if</span>&nbsp;<span class="ident" id="7882071">tt</span><span class="op" id="7882073">.</span><span class="ident" id="7882074">WantDumpOut</span>&nbsp;<span class="op" id="7882086">!=</span>&nbsp;<span class="string" id="7882089">&#34;&#34;</span>&nbsp;<span class="op" id="7882092">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882097">setBody</span><span class="op" id="7882104">(</span><span class="op" id="7882105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882110">dump</span><span class="op" id="7882114">,</span>&nbsp;<span class="ident" id="7882116">err</span>&nbsp;<span class="op" id="7882120">:=</span>&nbsp;<span class="ident" id="7882123">DumpRequestOut</span><span class="op" id="7882137">(</span><span class="op" id="7882138">&amp;</span><span class="ident" id="7882139">tt</span><span class="op" id="7882141">.</span><span class="ident" id="7882142">Req</span><span class="op" id="7882145">,</span>&nbsp;<span class="op" id="7882147">!</span><span class="ident" id="7882148">tt</span><span class="op" id="7882150">.</span><span class="ident" id="7882151">NoBody</span><span class="op" id="7882157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882162">if</span>&nbsp;<span class="ident" id="7882165">err</span>&nbsp;<span class="op" id="7882169">!=</span>&nbsp;<span class="ident" id="7882172">nil</span>&nbsp;<span class="op" id="7882176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882182">t</span><span class="op" id="7882183">.</span><span class="ident" id="7882184">Errorf</span><span class="op" id="7882190">(</span><span class="string" id="7882191">&#34;DumpRequestOut&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7882215">,</span>&nbsp;<span class="ident" id="7882217">i</span><span class="op" id="7882218">,</span>&nbsp;<span class="ident" id="7882220">err</span><span class="op" id="7882223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882229">continue</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882246">if</span>&nbsp;<span class="builtintype" id="7882249">string</span><span class="op" id="7882255">(</span><span class="ident" id="7882256">dump</span><span class="op" id="7882260">)</span>&nbsp;<span class="op" id="7882262">!=</span>&nbsp;<span class="ident" id="7882265">tt</span><span class="op" id="7882267">.</span><span class="ident" id="7882268">WantDumpOut</span>&nbsp;<span class="op" id="7882280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882286">t</span><span class="op" id="7882287">.</span><span class="ident" id="7882288">Errorf</span><span class="op" id="7882294">(</span><span class="string" id="7882295">&#34;DumpRequestOut&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7882342">,</span>&nbsp;<span class="ident" id="7882344">i</span><span class="op" id="7882345">,</span>&nbsp;<span class="ident" id="7882347">tt</span><span class="op" id="7882349">.</span><span class="ident" id="7882350">WantDumpOut</span><span class="op" id="7882361">,</span>&nbsp;<span class="builtintype" id="7882363">string</span><span class="op" id="7882369">(</span><span class="ident" id="7882370">dump</span><span class="op" id="7882374">)</span><span class="op" id="7882375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882381">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882393">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882403">if</span>&nbsp;<span class="ident" id="7882406">dg</span>&nbsp;<span class="op" id="7882409">:=</span>&nbsp;<span class="ident" id="7882412">runtime</span><span class="op" id="7882419">.</span><span class="ident" id="7882420">NumGoroutine</span><span class="op" id="7882432">(</span><span class="op" id="7882433">)</span>&nbsp;<span class="op" id="7882435">-</span>&nbsp;<span class="ident" id="7882437">numg0</span><span class="op" id="7882442">;</span>&nbsp;<span class="ident" id="7882444">dg</span>&nbsp;<span class="op" id="7882447">&gt;</span>&nbsp;<span class="num" id="7882449">4</span>&nbsp;<span class="op" id="7882451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882455">buf</span>&nbsp;<span class="op" id="7882459">:=</span>&nbsp;<span class="builtinfunc" id="7882462">make</span><span class="op" id="7882466">(</span><span class="op" id="7882467">[</span><span class="op" id="7882468">]</span><span class="builtintype" id="7882469">byte</span><span class="op" id="7882473">,</span>&nbsp;<span class="num" id="7882475">4096</span><span class="op" id="7882479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882483">buf</span>&nbsp;<span class="op" id="7882487">=</span>&nbsp;<span class="ident" id="7882489">buf</span><span class="op" id="7882492">[</span><span class="op" id="7882493">:</span><span class="ident" id="7882494">runtime</span><span class="op" id="7882501">.</span><span class="ident" id="7882502">Stack</span><span class="op" id="7882507">(</span><span class="ident" id="7882508">buf</span><span class="op" id="7882511">,</span>&nbsp;<span class="ident" id="7882513">true</span><span class="op" id="7882517">)</span><span class="op" id="7882518">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882522">t</span><span class="op" id="7882523">.</span><span class="ident" id="7882524">Errorf</span><span class="op" id="7882530">(</span><span class="string" id="7882531">&#34;Unexpectedly&nbsp;large&nbsp;number&nbsp;of&nbsp;new&nbsp;goroutines:&nbsp;%d&nbsp;new:&nbsp;%s&#34;</span><span class="op" id="7882588">,</span>&nbsp;<span class="ident" id="7882590">dg</span><span class="op" id="7882592">,</span>&nbsp;<span class="ident" id="7882594">buf</span><span class="op" id="7882597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882600">}</span><br>
<span class="lineno"></span><span class="op" id="7882602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7882605">func</span>&nbsp;<span class="ident" id="7882610">chunk</span><span class="op" id="7882615">(</span><span class="ident" id="7882616">s</span>&nbsp;<span class="builtintype" id="7882618">string</span><span class="op" id="7882624">)</span>&nbsp;<span class="builtintype" id="7882626">string</span>&nbsp;<span class="op" id="7882633">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882636">return</span>&nbsp;<span class="ident" id="7882643">fmt</span><span class="op" id="7882646">.</span><span class="ident" id="7882647">Sprintf</span><span class="op" id="7882654">(</span><span class="string" id="7882655">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7882669">,</span>&nbsp;<span class="builtinfunc" id="7882671">len</span><span class="op" id="7882674">(</span><span class="ident" id="7882675">s</span><span class="op" id="7882676">)</span><span class="op" id="7882677">,</span>&nbsp;<span class="ident" id="7882679">s</span><span class="op" id="7882680">)</span><br>
<span class="lineno"></span><span class="op" id="7882682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7882685">func</span>&nbsp;<span class="ident" id="7882690">mustParseURL</span><span class="op" id="7882702">(</span><span class="ident" id="7882703">s</span>&nbsp;<span class="builtintype" id="7882705">string</span><span class="op" id="7882711">)</span>&nbsp;<span class="op" id="7882713">*</span><span class="ident" id="7882714">url</span><span class="op" id="7882717">.</span><span class="ident" id="7882718">URL</span>&nbsp;<span class="op" id="7882722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882725">u</span><span class="op" id="7882726">,</span>&nbsp;<span class="ident" id="7882728">err</span>&nbsp;<span class="op" id="7882732">:=</span>&nbsp;<span class="ident" id="7882735">url</span><span class="op" id="7882738">.</span><span class="ident" id="7882739">Parse</span><span class="op" id="7882744">(</span><span class="ident" id="7882745">s</span><span class="op" id="7882746">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882749">if</span>&nbsp;<span class="ident" id="7882752">err</span>&nbsp;<span class="op" id="7882756">!=</span>&nbsp;<span class="ident" id="7882759">nil</span>&nbsp;<span class="op" id="7882763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7882767">panic</span><span class="op" id="7882772">(</span><span class="ident" id="7882773">fmt</span><span class="op" id="7882776">.</span><span class="ident" id="7882777">Sprintf</span><span class="op" id="7882784">(</span><span class="string" id="7882785">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7882811">,</span>&nbsp;<span class="ident" id="7882813">s</span><span class="op" id="7882814">,</span>&nbsp;<span class="ident" id="7882816">err</span><span class="op" id="7882819">)</span><span class="op" id="7882820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7882823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882826">return</span>&nbsp;<span class="ident" id="7882833">u</span><br>
<span class="lineno"></span><span class="op" id="7882835">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7882838">func</span>&nbsp;<span class="ident" id="7882843">mustNewRequest</span><span class="op" id="7882857">(</span><span class="ident" id="7882858">method</span><span class="op" id="7882864">,</span>&nbsp;<span class="ident" id="7882866">url</span>&nbsp;<span class="builtintype" id="7882870">string</span><span class="op" id="7882876">,</span>&nbsp;<span class="ident" id="7882878">body</span>&nbsp;<span class="ident" id="7882883">io</span><span class="op" id="7882885">.</span><span class="ident" id="7882886">Reader</span><span class="op" id="7882892">)</span>&nbsp;<span class="op" id="7882894">*</span><span class="ident" id="7882895">http</span><span class="op" id="7882899">.</span><span class="ident" id="7882900">Request</span>&nbsp;<span class="op" id="7882908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7882911">req</span><span class="op" id="7882914">,</span>&nbsp;<span class="ident" id="7882916">err</span>&nbsp;<span class="op" id="7882920">:=</span>&nbsp;<span class="ident" id="7882923">http</span><span class="op" id="7882927">.</span><span class="ident" id="7882928">NewRequest</span><span class="op" id="7882938">(</span><span class="ident" id="7882939">method</span><span class="op" id="7882945">,</span>&nbsp;<span class="ident" id="7882947">url</span><span class="op" id="7882950">,</span>&nbsp;<span class="ident" id="7882952">body</span><span class="op" id="7882956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7882959">if</span>&nbsp;<span class="ident" id="7882962">err</span>&nbsp;<span class="op" id="7882966">!=</span>&nbsp;<span class="ident" id="7882969">nil</span>&nbsp;<span class="op" id="7882973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7882977">panic</span><span class="op" id="7882982">(</span><span class="ident" id="7882983">fmt</span><span class="op" id="7882986">.</span><span class="ident" id="7882987">Sprintf</span><span class="op" id="7882994">(</span><span class="string" id="7882995">&#34;NewRequest(%q,&nbsp;%q,&nbsp;%p)&nbsp;err&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7883028">,</span>&nbsp;<span class="ident" id="7883030">method</span><span class="op" id="7883036">,</span>&nbsp;<span class="ident" id="7883038">url</span><span class="op" id="7883041">,</span>&nbsp;<span class="ident" id="7883043">body</span><span class="op" id="7883047">,</span>&nbsp;<span class="ident" id="7883049">err</span><span class="op" id="7883052">)</span><span class="op" id="7883053">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7883059">return</span>&nbsp;<span class="ident" id="7883066">req</span><br>
<span class="lineno"></span><span class="op" id="7883070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7883073">var</span>&nbsp;<span class="ident" id="7883077">dumpResTests</span>&nbsp;<span class="op" id="7883090">=</span>&nbsp;<span class="op" id="7883092">[</span><span class="op" id="7883093">]</span><span class="keyword" id="7883094">struct</span>&nbsp;<span class="op" id="7883101">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883104">res</span>&nbsp;&nbsp;<span class="op" id="7883109">*</span><span class="ident" id="7883110">http</span><span class="op" id="7883114">.</span><span class="ident" id="7883115">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883125">body</span>&nbsp;<span class="builtintype" id="7883130">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883136">want</span>&nbsp;<span class="builtintype" id="7883141">string</span><br>
<span class="lineno"></span><span class="op" id="7883148">}</span><span class="op" id="7883149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883152">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883156">res</span><span class="op" id="7883159">:</span>&nbsp;<span class="op" id="7883161">&amp;</span><span class="ident" id="7883162">http</span><span class="op" id="7883166">.</span><span class="ident" id="7883167">Response</span><span class="op" id="7883175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883180">Status</span><span class="op" id="7883186">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7883195">&#34;200&nbsp;OK&#34;</span><span class="op" id="7883203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883208">StatusCode</span><span class="op" id="7883218">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883223">200</span><span class="op" id="7883226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883231">Proto</span><span class="op" id="7883236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7883246">&#34;HTTP/1.1&#34;</span><span class="op" id="7883256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883261">ProtoMajor</span><span class="op" id="7883271">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883276">1</span><span class="op" id="7883277">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883282">ProtoMinor</span><span class="op" id="7883292">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883297">1</span><span class="op" id="7883298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883303">ContentLength</span><span class="op" id="7883316">:</span>&nbsp;<span class="num" id="7883318">50</span><span class="op" id="7883320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883325">Header</span><span class="op" id="7883331">:</span>&nbsp;<span class="ident" id="7883333">http</span><span class="op" id="7883337">.</span><span class="ident" id="7883338">Header</span><span class="op" id="7883344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7883350">&#34;Foo&#34;</span><span class="op" id="7883355">:</span>&nbsp;<span class="op" id="7883357">[</span><span class="op" id="7883358">]</span><span class="builtintype" id="7883359">string</span><span class="op" id="7883365">{</span><span class="string" id="7883366">&#34;Bar&#34;</span><span class="op" id="7883371">}</span><span class="op" id="7883372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883377">}</span><span class="op" id="7883378">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883383">Body</span><span class="op" id="7883387">:</span>&nbsp;<span class="ident" id="7883389">ioutil</span><span class="op" id="7883395">.</span><span class="ident" id="7883396">NopCloser</span><span class="op" id="7883405">(</span><span class="ident" id="7883406">strings</span><span class="op" id="7883413">.</span><span class="ident" id="7883414">NewReader</span><span class="op" id="7883423">(</span><span class="string" id="7883424">&#34;foo&#34;</span><span class="op" id="7883429">)</span><span class="op" id="7883430">)</span><span class="op" id="7883431">,</span>&nbsp;<span class="comment" id="7883433">//&nbsp;shouldn&#39;t&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883456">}</span><span class="op" id="7883457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883461">body</span><span class="op" id="7883465">:</span>&nbsp;<span class="ident" id="7883467">false</span><span class="op" id="7883472">,</span>&nbsp;<span class="comment" id="7883474">//&nbsp;to&nbsp;verify&nbsp;we&nbsp;see&nbsp;50,&nbsp;not&nbsp;empty&nbsp;or&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883516">want</span><span class="op" id="7883520">:</span>&nbsp;<span class="string" id="7883522">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Content-Length:&nbsp;50<br>
<span class="lineno">235</span>Foo:&nbsp;Bar`</span><span class="op" id="7883567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883570">}</span><span class="op" id="7883571">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883579">res</span><span class="op" id="7883582">:</span>&nbsp;<span class="op" id="7883584">&amp;</span><span class="ident" id="7883585">http</span><span class="op" id="7883589">.</span><span class="ident" id="7883590">Response</span><span class="op" id="7883598">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883603">Status</span><span class="op" id="7883609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7883618">&#34;200&nbsp;OK&#34;</span><span class="op" id="7883626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883631">StatusCode</span><span class="op" id="7883641">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883646">200</span><span class="op" id="7883649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883654">Proto</span><span class="op" id="7883659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7883669">&#34;HTTP/1.1&#34;</span><span class="op" id="7883679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883684">ProtoMajor</span><span class="op" id="7883694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883699">1</span><span class="op" id="7883700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883705">ProtoMinor</span><span class="op" id="7883715">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883720">1</span><span class="op" id="7883721">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883726">ContentLength</span><span class="op" id="7883739">:</span>&nbsp;<span class="num" id="7883741">3</span><span class="op" id="7883742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883747">Body</span><span class="op" id="7883751">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7883762">ioutil</span><span class="op" id="7883768">.</span><span class="ident" id="7883769">NopCloser</span><span class="op" id="7883778">(</span><span class="ident" id="7883779">strings</span><span class="op" id="7883786">.</span><span class="ident" id="7883787">NewReader</span><span class="op" id="7883796">(</span><span class="string" id="7883797">&#34;foo&#34;</span><span class="op" id="7883802">)</span><span class="op" id="7883803">)</span><span class="op" id="7883804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883808">}</span><span class="op" id="7883809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883813">body</span><span class="op" id="7883817">:</span>&nbsp;<span class="ident" id="7883819">true</span><span class="op" id="7883823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883827">want</span><span class="op" id="7883831">:</span>&nbsp;<span class="string" id="7883833">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno">250</span>Content-Length:&nbsp;3<br>
<span class="lineno"></span><br>
<span class="lineno"></span>foo`</span><span class="op" id="7883873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883876">}</span><span class="op" id="7883877">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7883881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883885">res</span><span class="op" id="7883888">:</span>&nbsp;<span class="op" id="7883890">&amp;</span><span class="ident" id="7883891">http</span><span class="op" id="7883895">.</span><span class="ident" id="7883896">Response</span><span class="op" id="7883904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883909">Status</span><span class="op" id="7883915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7883927">&#34;200&nbsp;OK&#34;</span><span class="op" id="7883935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883940">StatusCode</span><span class="op" id="7883950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7883958">200</span><span class="op" id="7883961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883966">Proto</span><span class="op" id="7883971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7883984">&#34;HTTP/1.1&#34;</span><span class="op" id="7883994">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7883999">ProtoMajor</span><span class="op" id="7884009">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7884017">1</span><span class="op" id="7884018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884023">ProtoMinor</span><span class="op" id="7884033">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7884041">1</span><span class="op" id="7884042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884047">ContentLength</span><span class="op" id="7884060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7884065">-</span><span class="num" id="7884066">1</span><span class="op" id="7884067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884072">Body</span><span class="op" id="7884076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7884090">ioutil</span><span class="op" id="7884096">.</span><span class="ident" id="7884097">NopCloser</span><span class="op" id="7884106">(</span><span class="ident" id="7884107">strings</span><span class="op" id="7884114">.</span><span class="ident" id="7884115">NewReader</span><span class="op" id="7884124">(</span><span class="string" id="7884125">&#34;foo&#34;</span><span class="op" id="7884130">)</span><span class="op" id="7884131">)</span><span class="op" id="7884132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884137">TransferEncoding</span><span class="op" id="7884153">:</span>&nbsp;<span class="op" id="7884155">[</span><span class="op" id="7884156">]</span><span class="builtintype" id="7884157">string</span><span class="op" id="7884163">{</span><span class="string" id="7884164">&#34;chunked&#34;</span><span class="op" id="7884173">}</span><span class="op" id="7884174">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884178">}</span><span class="op" id="7884179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884183">body</span><span class="op" id="7884187">:</span>&nbsp;<span class="ident" id="7884189">true</span><span class="op" id="7884193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884197">want</span><span class="op" id="7884201">:</span>&nbsp;<span class="string" id="7884203">`HTTP/1.1&nbsp;200&nbsp;OK<br>
<span class="lineno"></span>Transfer-Encoding:&nbsp;chunked<br>
<span class="lineno"></span><br>
<span class="lineno">270</span>3<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>0`</span><span class="op" id="7884256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884259">}</span><span class="op" id="7884260">,</span><br>
<span class="lineno"></span><span class="op" id="7884262">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7884265">func</span>&nbsp;<span class="ident" id="7884270">TestDumpResponse</span><span class="op" id="7884286">(</span><span class="ident" id="7884287">t</span>&nbsp;<span class="op" id="7884289">*</span><span class="ident" id="7884290">testing</span><span class="op" id="7884297">.</span><span class="ident" id="7884298">T</span><span class="op" id="7884299">)</span>&nbsp;<span class="op" id="7884301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884304">for</span>&nbsp;<span class="ident" id="7884308">i</span><span class="op" id="7884309">,</span>&nbsp;<span class="ident" id="7884311">tt</span>&nbsp;<span class="op" id="7884314">:=</span>&nbsp;<span class="keyword" id="7884317">range</span>&nbsp;<span class="ident" id="7884323">dumpResTests</span>&nbsp;<span class="op" id="7884336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884340">gotb</span><span class="op" id="7884344">,</span>&nbsp;<span class="ident" id="7884346">err</span>&nbsp;<span class="op" id="7884350">:=</span>&nbsp;<span class="ident" id="7884353">DumpResponse</span><span class="op" id="7884365">(</span><span class="ident" id="7884366">tt</span><span class="op" id="7884368">.</span><span class="ident" id="7884369">res</span><span class="op" id="7884372">,</span>&nbsp;<span class="ident" id="7884374">tt</span><span class="op" id="7884376">.</span><span class="ident" id="7884377">body</span><span class="op" id="7884381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884385">if</span>&nbsp;<span class="ident" id="7884388">err</span>&nbsp;<span class="op" id="7884392">!=</span>&nbsp;<span class="ident" id="7884395">nil</span>&nbsp;<span class="op" id="7884399">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884404">t</span><span class="op" id="7884405">.</span><span class="ident" id="7884406">Errorf</span><span class="op" id="7884412">(</span><span class="string" id="7884413">&#34;%d.&nbsp;DumpResponse&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7884436">,</span>&nbsp;<span class="ident" id="7884438">i</span><span class="op" id="7884439">,</span>&nbsp;<span class="ident" id="7884441">err</span><span class="op" id="7884444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884449">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884464">got</span>&nbsp;<span class="op" id="7884468">:=</span>&nbsp;<span class="builtintype" id="7884471">string</span><span class="op" id="7884477">(</span><span class="ident" id="7884478">gotb</span><span class="op" id="7884482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884486">got</span>&nbsp;<span class="op" id="7884490">=</span>&nbsp;<span class="ident" id="7884492">strings</span><span class="op" id="7884499">.</span><span class="ident" id="7884500">TrimSpace</span><span class="op" id="7884509">(</span><span class="ident" id="7884510">got</span><span class="op" id="7884513">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884517">got</span>&nbsp;<span class="op" id="7884521">=</span>&nbsp;<span class="ident" id="7884523">strings</span><span class="op" id="7884530">.</span><span class="ident" id="7884531">Replace</span><span class="op" id="7884538">(</span><span class="ident" id="7884539">got</span><span class="op" id="7884542">,</span>&nbsp;<span class="string" id="7884544">&#34;\r&#34;</span><span class="op" id="7884548">,</span>&nbsp;<span class="string" id="7884550">&#34;&#34;</span><span class="op" id="7884552">,</span>&nbsp;<span class="op" id="7884554">-</span><span class="num" id="7884555">1</span><span class="op" id="7884556">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7884561">if</span>&nbsp;<span class="ident" id="7884564">got</span>&nbsp;<span class="op" id="7884568">!=</span>&nbsp;<span class="ident" id="7884571">tt</span><span class="op" id="7884573">.</span><span class="ident" id="7884574">want</span>&nbsp;<span class="op" id="7884579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7884584">t</span><span class="op" id="7884585">.</span><span class="ident" id="7884586">Errorf</span><span class="op" id="7884592">(</span><span class="string" id="7884593">&#34;%d.\nDumpResponse&nbsp;got:\n%s\n\nWant:\n%s\n&#34;</span><span class="op" id="7884636">,</span>&nbsp;<span class="ident" id="7884638">i</span><span class="op" id="7884639">,</span>&nbsp;<span class="ident" id="7884641">got</span><span class="op" id="7884644">,</span>&nbsp;<span class="ident" id="7884646">tt</span><span class="op" id="7884648">.</span><span class="ident" id="7884649">want</span><span class="op" id="7884653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884657">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7884660">}</span><br>
<span class="lineno"></span><span class="op" id="7884662">}</span>
</div>
</body>
</html>
