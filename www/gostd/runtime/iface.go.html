<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html" class="current">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1538948">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1539003">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1539057">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1539108">package</span>&nbsp;<span class="ident" id="1539116">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539125">import</span>&nbsp;<span class="op" id="1539132">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1539135">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1539144">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1539147">const</span>&nbsp;<span class="op" id="1539153">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539156">hashSize</span>&nbsp;<span class="op" id="1539165">=</span>&nbsp;<span class="num" id="1539167">1009</span><br>
<span class="lineno"></span><span class="op" id="1539172">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1539175">var</span>&nbsp;<span class="op" id="1539179">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539182">ifaceLock</span>&nbsp;<span class="ident" id="1539192">mutex</span>&nbsp;<span class="comment" id="1539198">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539226">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539236">[</span><span class="ident" id="1539237">hashSize</span><span class="op" id="1539245">]</span><span class="op" id="1539246">*</span><span class="ident" id="1539247">itab</span><br>
<span class="lineno"></span><span class="op" id="1539252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1539255">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1539325">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1539394">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1539463">type</span>&nbsp;<span class="ident" id="1539468">fInterface</span>&nbsp;<span class="keyword" id="1539479">interface</span>&nbsp;<span class="op" id="1539489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539492">f</span><span class="op" id="1539493">(</span><span class="op" id="1539494">)</span><br>
<span class="lineno">25</span><span class="op" id="1539496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539499">func</span>&nbsp;<span class="ident" id="1539504">getitab</span><span class="op" id="1539511">(</span><span class="ident" id="1539512">inter</span>&nbsp;<span class="op" id="1539518">*</span><span class="ident" id="1539519">interfacetype</span><span class="op" id="1539532">,</span>&nbsp;<span class="ident" id="1539534">typ</span>&nbsp;<span class="op" id="1539538">*</span><span class="ident" id="1539539">_type</span><span class="op" id="1539544">,</span>&nbsp;<span class="ident" id="1539546">canfail</span>&nbsp;<span class="builtintype" id="1539554">bool</span><span class="op" id="1539558">)</span>&nbsp;<span class="op" id="1539560">*</span><span class="ident" id="1539561">itab</span>&nbsp;<span class="op" id="1539566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539569">if</span>&nbsp;<span class="builtinfunc" id="1539572">len</span><span class="op" id="1539575">(</span><span class="ident" id="1539576">inter</span><span class="op" id="1539581">.</span><span class="ident" id="1539582">mhdr</span><span class="op" id="1539586">)</span>&nbsp;<span class="op" id="1539588">==</span>&nbsp;<span class="num" id="1539591">0</span>&nbsp;<span class="op" id="1539593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539597">gothrow</span><span class="op" id="1539604">(</span><span class="string" id="1539605">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1539638">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539645">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539659">x</span>&nbsp;<span class="op" id="1539661">:=</span>&nbsp;<span class="ident" id="1539664">typ</span><span class="op" id="1539667">.</span><span class="ident" id="1539668">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539671">if</span>&nbsp;<span class="ident" id="1539674">x</span>&nbsp;<span class="op" id="1539676">==</span>&nbsp;<span class="builtintype" id="1539679">nil</span>&nbsp;<span class="op" id="1539683">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539687">if</span>&nbsp;<span class="ident" id="1539690">canfail</span>&nbsp;<span class="op" id="1539698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1539703">return</span>&nbsp;<span class="builtintype" id="1539710">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539720">i</span>&nbsp;<span class="op" id="1539722">:=</span>&nbsp;<span class="op" id="1539725">(</span><span class="op" id="1539726">*</span><span class="ident" id="1539727">imethod</span><span class="op" id="1539734">)</span><span class="op" id="1539735">(</span><span class="ident" id="1539736">add</span><span class="op" id="1539739">(</span><span class="ident" id="1539740">unsafe</span><span class="op" id="1539746">.</span><span class="ident" id="1539747">Pointer</span><span class="op" id="1539754">(</span><span class="ident" id="1539755">inter</span><span class="op" id="1539760">)</span><span class="op" id="1539761">,</span>&nbsp;<span class="ident" id="1539763">unsafe</span><span class="op" id="1539769">.</span><span class="ident" id="1539770">Sizeof</span><span class="op" id="1539776">(</span><span class="ident" id="1539777">interfacetype</span><span class="op" id="1539790">{</span><span class="op" id="1539791">}</span><span class="op" id="1539792">)</span><span class="op" id="1539793">)</span><span class="op" id="1539794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1539798">panic</span><span class="op" id="1539803">(</span><span class="op" id="1539804">&amp;</span><span class="ident" id="1539805">TypeAssertionError</span><span class="op" id="1539823">{</span><span class="string" id="1539824">&#34;&#34;</span><span class="op" id="1539826">,</span>&nbsp;<span class="op" id="1539828">*</span><span class="ident" id="1539829">typ</span><span class="op" id="1539832">.</span><span class="ident" id="1539833">_string</span><span class="op" id="1539840">,</span>&nbsp;<span class="op" id="1539842">*</span><span class="ident" id="1539843">inter</span><span class="op" id="1539848">.</span><span class="ident" id="1539849">typ</span><span class="op" id="1539852">.</span><span class="ident" id="1539853">_string</span><span class="op" id="1539860">,</span>&nbsp;<span class="op" id="1539862">*</span><span class="ident" id="1539863">i</span><span class="op" id="1539864">.</span><span class="ident" id="1539865">name</span><span class="op" id="1539869">}</span><span class="op" id="1539870">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1539873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539877">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539932">h</span>&nbsp;<span class="op" id="1539934">:=</span>&nbsp;<span class="ident" id="1539937">inter</span><span class="op" id="1539942">.</span><span class="ident" id="1539943">typ</span><span class="op" id="1539946">.</span><span class="ident" id="1539947">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1539953">h</span>&nbsp;<span class="op" id="1539955">+=</span>&nbsp;<span class="num" id="1539958">17</span>&nbsp;<span class="op" id="1539961">*</span>&nbsp;<span class="ident" id="1539963">typ</span><span class="op" id="1539966">.</span><span class="ident" id="1539967">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1539973">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540008">h</span>&nbsp;<span class="op" id="1540010">%=</span>&nbsp;<span class="ident" id="1540013">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540024">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540071">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540115">var</span>&nbsp;<span class="ident" id="1540119">m</span>&nbsp;<span class="op" id="1540121">*</span><span class="ident" id="1540122">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540128">var</span>&nbsp;<span class="ident" id="1540132">locked</span>&nbsp;<span class="builtintype" id="1540139">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540144">for</span>&nbsp;<span class="ident" id="1540148">locked</span>&nbsp;<span class="op" id="1540155">=</span>&nbsp;<span class="num" id="1540157">0</span><span class="op" id="1540158">;</span>&nbsp;<span class="ident" id="1540160">locked</span>&nbsp;<span class="op" id="1540167">&lt;</span>&nbsp;<span class="num" id="1540169">2</span><span class="op" id="1540170">;</span>&nbsp;<span class="ident" id="1540172">locked</span><span class="op" id="1540178">++</span>&nbsp;<span class="op" id="1540181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540185">if</span>&nbsp;<span class="ident" id="1540188">locked</span>&nbsp;<span class="op" id="1540195">!=</span>&nbsp;<span class="num" id="1540198">0</span>&nbsp;<span class="op" id="1540200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540205">lock</span><span class="op" id="1540209">(</span><span class="op" id="1540210">&amp;</span><span class="ident" id="1540211">ifaceLock</span><span class="op" id="1540220">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540228">for</span>&nbsp;<span class="ident" id="1540232">m</span>&nbsp;<span class="op" id="1540234">=</span>&nbsp;<span class="op" id="1540236">(</span><span class="op" id="1540237">*</span><span class="ident" id="1540238">itab</span><span class="op" id="1540242">)</span><span class="op" id="1540243">(</span><span class="ident" id="1540244">atomicloadp</span><span class="op" id="1540255">(</span><span class="ident" id="1540256">unsafe</span><span class="op" id="1540262">.</span><span class="ident" id="1540263">Pointer</span><span class="op" id="1540270">(</span><span class="op" id="1540271">&amp;</span><span class="ident" id="1540272">hash</span><span class="op" id="1540276">[</span><span class="ident" id="1540277">h</span><span class="op" id="1540278">]</span><span class="op" id="1540279">)</span><span class="op" id="1540280">)</span><span class="op" id="1540281">)</span><span class="op" id="1540282">;</span>&nbsp;<span class="ident" id="1540284">m</span>&nbsp;<span class="op" id="1540286">!=</span>&nbsp;<span class="builtintype" id="1540289">nil</span><span class="op" id="1540292">;</span>&nbsp;<span class="ident" id="1540294">m</span>&nbsp;<span class="op" id="1540296">=</span>&nbsp;<span class="ident" id="1540298">m</span><span class="op" id="1540299">.</span><span class="ident" id="1540300">link</span>&nbsp;<span class="op" id="1540305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540310">if</span>&nbsp;<span class="ident" id="1540313">m</span><span class="op" id="1540314">.</span><span class="ident" id="1540315">inter</span>&nbsp;<span class="op" id="1540321">==</span>&nbsp;<span class="ident" id="1540324">inter</span>&nbsp;<span class="op" id="1540330">&amp;&amp;</span>&nbsp;<span class="ident" id="1540333">m</span><span class="op" id="1540334">.</span><span class="ident" id="1540335">_type</span>&nbsp;<span class="op" id="1540341">==</span>&nbsp;<span class="ident" id="1540344">typ</span>&nbsp;<span class="op" id="1540348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540354">if</span>&nbsp;<span class="ident" id="1540357">m</span><span class="op" id="1540358">.</span><span class="ident" id="1540359">bad</span>&nbsp;<span class="op" id="1540363">!=</span>&nbsp;<span class="num" id="1540366">0</span>&nbsp;<span class="op" id="1540368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540375">m</span>&nbsp;<span class="op" id="1540377">=</span>&nbsp;<span class="builtintype" id="1540379">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540388">if</span>&nbsp;<span class="op" id="1540391">!</span><span class="ident" id="1540392">canfail</span>&nbsp;<span class="op" id="1540400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540408">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540456">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540507">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540554">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540602">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540651">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1540700">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540747">goto</span>&nbsp;<span class="ident" id="1540752">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540764">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540776">if</span>&nbsp;<span class="ident" id="1540779">locked</span>&nbsp;<span class="op" id="1540786">!=</span>&nbsp;<span class="num" id="1540789">0</span>&nbsp;<span class="op" id="1540791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540798">unlock</span><span class="op" id="1540804">(</span><span class="op" id="1540805">&amp;</span><span class="ident" id="1540806">ifaceLock</span><span class="op" id="1540815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1540827">return</span>&nbsp;<span class="ident" id="1540834">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1540846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540850">m</span>&nbsp;<span class="op" id="1540852">=</span>&nbsp;<span class="op" id="1540854">(</span><span class="op" id="1540855">*</span><span class="ident" id="1540856">itab</span><span class="op" id="1540860">)</span><span class="op" id="1540861">(</span><span class="ident" id="1540862">persistentalloc</span><span class="op" id="1540877">(</span><span class="ident" id="1540878">unsafe</span><span class="op" id="1540884">.</span><span class="ident" id="1540885">Sizeof</span><span class="op" id="1540891">(</span><span class="ident" id="1540892">itab</span><span class="op" id="1540896">{</span><span class="op" id="1540897">}</span><span class="op" id="1540898">)</span><span class="op" id="1540899">+</span><span class="builtintype" id="1540900">uintptr</span><span class="op" id="1540907">(</span><span class="builtinfunc" id="1540908">len</span><span class="op" id="1540911">(</span><span class="ident" id="1540912">inter</span><span class="op" id="1540917">.</span><span class="ident" id="1540918">mhdr</span><span class="op" id="1540922">)</span><span class="op" id="1540923">)</span><span class="op" id="1540924">*</span><span class="ident" id="1540925">ptrSize</span><span class="op" id="1540932">,</span>&nbsp;<span class="num" id="1540934">0</span><span class="op" id="1540935">,</span>&nbsp;<span class="op" id="1540937">&amp;</span><span class="ident" id="1540938">memstats</span><span class="op" id="1540946">.</span><span class="ident" id="1540947">other_sys</span><span class="op" id="1540956">)</span><span class="op" id="1540957">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540960">m</span><span class="op" id="1540961">.</span><span class="ident" id="1540962">inter</span>&nbsp;<span class="op" id="1540968">=</span>&nbsp;<span class="ident" id="1540970">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1540977">m</span><span class="op" id="1540978">.</span><span class="ident" id="1540979">_type</span>&nbsp;<span class="op" id="1540985">=</span>&nbsp;<span class="ident" id="1540987">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1540992">search</span><span class="op" id="1540998">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541001">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541052">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541088">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541131">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541170">ni</span>&nbsp;<span class="op" id="1541173">:=</span>&nbsp;<span class="builtinfunc" id="1541176">len</span><span class="op" id="1541179">(</span><span class="ident" id="1541180">inter</span><span class="op" id="1541185">.</span><span class="ident" id="1541186">mhdr</span><span class="op" id="1541190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541193">nt</span>&nbsp;<span class="op" id="1541196">:=</span>&nbsp;<span class="builtinfunc" id="1541199">len</span><span class="op" id="1541202">(</span><span class="ident" id="1541203">x</span><span class="op" id="1541204">.</span><span class="ident" id="1541205">mhdr</span><span class="op" id="1541209">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541212">j</span>&nbsp;<span class="op" id="1541214">:=</span>&nbsp;<span class="num" id="1541217">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541220">for</span>&nbsp;<span class="ident" id="1541224">k</span>&nbsp;<span class="op" id="1541226">:=</span>&nbsp;<span class="num" id="1541229">0</span><span class="op" id="1541230">;</span>&nbsp;<span class="ident" id="1541232">k</span>&nbsp;<span class="op" id="1541234">&lt;</span>&nbsp;<span class="ident" id="1541236">ni</span><span class="op" id="1541238">;</span>&nbsp;<span class="ident" id="1541240">k</span><span class="op" id="1541241">++</span>&nbsp;<span class="op" id="1541244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541248">i</span>&nbsp;<span class="op" id="1541250">:=</span>&nbsp;<span class="op" id="1541253">(</span><span class="op" id="1541254">*</span><span class="ident" id="1541255">imethod</span><span class="op" id="1541262">)</span><span class="op" id="1541263">(</span><span class="ident" id="1541264">add</span><span class="op" id="1541267">(</span><span class="ident" id="1541268">unsafe</span><span class="op" id="1541274">.</span><span class="ident" id="1541275">Pointer</span><span class="op" id="1541282">(</span><span class="ident" id="1541283">inter</span><span class="op" id="1541288">)</span><span class="op" id="1541289">,</span>&nbsp;<span class="ident" id="1541291">unsafe</span><span class="op" id="1541297">.</span><span class="ident" id="1541298">Sizeof</span><span class="op" id="1541304">(</span><span class="ident" id="1541305">interfacetype</span><span class="op" id="1541318">{</span><span class="op" id="1541319">}</span><span class="op" id="1541320">)</span><span class="op" id="1541321">+</span><span class="builtintype" id="1541322">uintptr</span><span class="op" id="1541329">(</span><span class="ident" id="1541330">k</span><span class="op" id="1541331">)</span><span class="op" id="1541332">*</span><span class="ident" id="1541333">unsafe</span><span class="op" id="1541339">.</span><span class="ident" id="1541340">Sizeof</span><span class="op" id="1541346">(</span><span class="ident" id="1541347">imethod</span><span class="op" id="1541354">{</span><span class="op" id="1541355">}</span><span class="op" id="1541356">)</span><span class="op" id="1541357">)</span><span class="op" id="1541358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541362">iname</span>&nbsp;<span class="op" id="1541368">:=</span>&nbsp;<span class="ident" id="1541371">i</span><span class="op" id="1541372">.</span><span class="ident" id="1541373">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541380">ipkgpath</span>&nbsp;<span class="op" id="1541389">:=</span>&nbsp;<span class="ident" id="1541392">i</span><span class="op" id="1541393">.</span><span class="ident" id="1541394">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541404">itype</span>&nbsp;<span class="op" id="1541410">:=</span>&nbsp;<span class="ident" id="1541413">i</span><span class="op" id="1541414">.</span><span class="ident" id="1541415">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541423">for</span>&nbsp;<span class="op" id="1541427">;</span>&nbsp;<span class="ident" id="1541429">j</span>&nbsp;<span class="op" id="1541431">&lt;</span>&nbsp;<span class="ident" id="1541433">nt</span><span class="op" id="1541435">;</span>&nbsp;<span class="ident" id="1541437">j</span><span class="op" id="1541438">++</span>&nbsp;<span class="op" id="1541441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541446">t</span>&nbsp;<span class="op" id="1541448">:=</span>&nbsp;<span class="op" id="1541451">(</span><span class="op" id="1541452">*</span><span class="ident" id="1541453">method</span><span class="op" id="1541459">)</span><span class="op" id="1541460">(</span><span class="ident" id="1541461">add</span><span class="op" id="1541464">(</span><span class="ident" id="1541465">unsafe</span><span class="op" id="1541471">.</span><span class="ident" id="1541472">Pointer</span><span class="op" id="1541479">(</span><span class="ident" id="1541480">x</span><span class="op" id="1541481">)</span><span class="op" id="1541482">,</span>&nbsp;<span class="ident" id="1541484">unsafe</span><span class="op" id="1541490">.</span><span class="ident" id="1541491">Sizeof</span><span class="op" id="1541497">(</span><span class="ident" id="1541498">uncommontype</span><span class="op" id="1541510">{</span><span class="op" id="1541511">}</span><span class="op" id="1541512">)</span><span class="op" id="1541513">+</span><span class="builtintype" id="1541514">uintptr</span><span class="op" id="1541521">(</span><span class="ident" id="1541522">j</span><span class="op" id="1541523">)</span><span class="op" id="1541524">*</span><span class="ident" id="1541525">unsafe</span><span class="op" id="1541531">.</span><span class="ident" id="1541532">Sizeof</span><span class="op" id="1541538">(</span><span class="ident" id="1541539">method</span><span class="op" id="1541545">{</span><span class="op" id="1541546">}</span><span class="op" id="1541547">)</span><span class="op" id="1541548">)</span><span class="op" id="1541549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541554">if</span>&nbsp;<span class="ident" id="1541557">t</span><span class="op" id="1541558">.</span><span class="ident" id="1541559">mtyp</span>&nbsp;<span class="op" id="1541564">==</span>&nbsp;<span class="ident" id="1541567">itype</span>&nbsp;<span class="op" id="1541573">&amp;&amp;</span>&nbsp;<span class="ident" id="1541576">t</span><span class="op" id="1541577">.</span><span class="ident" id="1541578">name</span>&nbsp;<span class="op" id="1541583">==</span>&nbsp;<span class="ident" id="1541586">iname</span>&nbsp;<span class="op" id="1541592">&amp;&amp;</span>&nbsp;<span class="ident" id="1541595">t</span><span class="op" id="1541596">.</span><span class="ident" id="1541597">pkgpath</span>&nbsp;<span class="op" id="1541605">==</span>&nbsp;<span class="ident" id="1541608">ipkgpath</span>&nbsp;<span class="op" id="1541617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541623">if</span>&nbsp;<span class="ident" id="1541626">m</span>&nbsp;<span class="op" id="1541628">!=</span>&nbsp;<span class="builtintype" id="1541631">nil</span>&nbsp;<span class="op" id="1541635">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541642">*</span><span class="op" id="1541643">(</span><span class="op" id="1541644">*</span><span class="ident" id="1541645">unsafe</span><span class="op" id="1541651">.</span><span class="ident" id="1541652">Pointer</span><span class="op" id="1541659">)</span><span class="op" id="1541660">(</span><span class="ident" id="1541661">add</span><span class="op" id="1541664">(</span><span class="ident" id="1541665">unsafe</span><span class="op" id="1541671">.</span><span class="ident" id="1541672">Pointer</span><span class="op" id="1541679">(</span><span class="ident" id="1541680">m</span><span class="op" id="1541681">)</span><span class="op" id="1541682">,</span>&nbsp;<span class="ident" id="1541684">unsafe</span><span class="op" id="1541690">.</span><span class="ident" id="1541691">Sizeof</span><span class="op" id="1541697">(</span><span class="ident" id="1541698">itab</span><span class="op" id="1541702">{</span><span class="op" id="1541703">}</span><span class="op" id="1541704">)</span><span class="op" id="1541705">+</span><span class="builtintype" id="1541706">uintptr</span><span class="op" id="1541713">(</span><span class="ident" id="1541714">k</span><span class="op" id="1541715">)</span><span class="op" id="1541716">*</span><span class="ident" id="1541717">ptrSize</span><span class="op" id="1541724">)</span><span class="op" id="1541725">)</span>&nbsp;<span class="op" id="1541727">=</span>&nbsp;<span class="ident" id="1541729">t</span><span class="op" id="1541730">.</span><span class="ident" id="1541731">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541745">goto</span>&nbsp;<span class="ident" id="1541750">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541769">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1541773">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541797">if</span>&nbsp;<span class="op" id="1541800">!</span><span class="ident" id="1541801">canfail</span>&nbsp;<span class="op" id="1541809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541814">if</span>&nbsp;<span class="ident" id="1541817">locked</span>&nbsp;<span class="op" id="1541824">!=</span>&nbsp;<span class="num" id="1541827">0</span>&nbsp;<span class="op" id="1541829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541835">unlock</span><span class="op" id="1541841">(</span><span class="op" id="1541842">&amp;</span><span class="ident" id="1541843">ifaceLock</span><span class="op" id="1541852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541857">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1541862">panic</span><span class="op" id="1541867">(</span><span class="op" id="1541868">&amp;</span><span class="ident" id="1541869">TypeAssertionError</span><span class="op" id="1541887">{</span><span class="string" id="1541888">&#34;&#34;</span><span class="op" id="1541890">,</span>&nbsp;<span class="op" id="1541892">*</span><span class="ident" id="1541893">typ</span><span class="op" id="1541896">.</span><span class="ident" id="1541897">_string</span><span class="op" id="1541904">,</span>&nbsp;<span class="op" id="1541906">*</span><span class="ident" id="1541907">inter</span><span class="op" id="1541912">.</span><span class="ident" id="1541913">typ</span><span class="op" id="1541916">.</span><span class="ident" id="1541917">_string</span><span class="op" id="1541924">,</span>&nbsp;<span class="op" id="1541926">*</span><span class="ident" id="1541927">iname</span><span class="op" id="1541932">}</span><span class="op" id="1541933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541941">m</span><span class="op" id="1541942">.</span><span class="ident" id="1541943">bad</span>&nbsp;<span class="op" id="1541947">=</span>&nbsp;<span class="num" id="1541949">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541953">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541960">nextimethod</span><span class="op" id="1541971">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1541974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1541977">if</span>&nbsp;<span class="ident" id="1541980">locked</span>&nbsp;<span class="op" id="1541987">==</span>&nbsp;<span class="num" id="1541990">0</span>&nbsp;<span class="op" id="1541992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1541996">gothrow</span><span class="op" id="1542003">(</span><span class="string" id="1542004">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1542026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542032">m</span><span class="op" id="1542033">.</span><span class="ident" id="1542034">link</span>&nbsp;<span class="op" id="1542039">=</span>&nbsp;<span class="ident" id="1542041">hash</span><span class="op" id="1542045">[</span><span class="ident" id="1542046">h</span><span class="op" id="1542047">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542050">atomicstorep</span><span class="op" id="1542062">(</span><span class="ident" id="1542063">unsafe</span><span class="op" id="1542069">.</span><span class="ident" id="1542070">Pointer</span><span class="op" id="1542077">(</span><span class="op" id="1542078">&amp;</span><span class="ident" id="1542079">hash</span><span class="op" id="1542083">[</span><span class="ident" id="1542084">h</span><span class="op" id="1542085">]</span><span class="op" id="1542086">)</span><span class="op" id="1542087">,</span>&nbsp;<span class="ident" id="1542089">unsafe</span><span class="op" id="1542095">.</span><span class="ident" id="1542096">Pointer</span><span class="op" id="1542103">(</span><span class="ident" id="1542104">m</span><span class="op" id="1542105">)</span><span class="op" id="1542106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542109">unlock</span><span class="op" id="1542115">(</span><span class="op" id="1542116">&amp;</span><span class="ident" id="1542117">ifaceLock</span><span class="op" id="1542126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542129">if</span>&nbsp;<span class="ident" id="1542132">m</span><span class="op" id="1542133">.</span><span class="ident" id="1542134">bad</span>&nbsp;<span class="op" id="1542138">!=</span>&nbsp;<span class="num" id="1542141">0</span>&nbsp;<span class="op" id="1542143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542147">return</span>&nbsp;<span class="builtintype" id="1542154">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542159">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542162">return</span>&nbsp;<span class="ident" id="1542169">m</span><br>
<span class="lineno"></span><span class="op" id="1542171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1542174">func</span>&nbsp;<span class="ident" id="1542179">typ2Itab</span><span class="op" id="1542187">(</span><span class="ident" id="1542188">t</span>&nbsp;<span class="op" id="1542190">*</span><span class="ident" id="1542191">_type</span><span class="op" id="1542196">,</span>&nbsp;<span class="ident" id="1542198">inter</span>&nbsp;<span class="op" id="1542204">*</span><span class="ident" id="1542205">interfacetype</span><span class="op" id="1542218">,</span>&nbsp;<span class="ident" id="1542220">cache</span>&nbsp;<span class="op" id="1542226">*</span><span class="op" id="1542227">*</span><span class="ident" id="1542228">itab</span><span class="op" id="1542232">)</span>&nbsp;<span class="op" id="1542234">*</span><span class="ident" id="1542235">itab</span>&nbsp;<span class="op" id="1542240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542243">tab</span>&nbsp;<span class="op" id="1542247">:=</span>&nbsp;<span class="ident" id="1542250">getitab</span><span class="op" id="1542257">(</span><span class="ident" id="1542258">inter</span><span class="op" id="1542263">,</span>&nbsp;<span class="ident" id="1542265">t</span><span class="op" id="1542266">,</span>&nbsp;<span class="builtintype" id="1542268">false</span><span class="op" id="1542273">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542276">atomicstorep</span><span class="op" id="1542288">(</span><span class="ident" id="1542289">unsafe</span><span class="op" id="1542295">.</span><span class="ident" id="1542296">Pointer</span><span class="op" id="1542303">(</span><span class="ident" id="1542304">cache</span><span class="op" id="1542309">)</span><span class="op" id="1542310">,</span>&nbsp;<span class="ident" id="1542312">unsafe</span><span class="op" id="1542318">.</span><span class="ident" id="1542319">Pointer</span><span class="op" id="1542326">(</span><span class="ident" id="1542327">tab</span><span class="op" id="1542330">)</span><span class="op" id="1542331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542334">return</span>&nbsp;<span class="ident" id="1542341">tab</span><br>
<span class="lineno"></span><span class="op" id="1542345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1542348">func</span>&nbsp;<span class="ident" id="1542353">convT2E</span><span class="op" id="1542360">(</span><span class="ident" id="1542361">t</span>&nbsp;<span class="op" id="1542363">*</span><span class="ident" id="1542364">_type</span><span class="op" id="1542369">,</span>&nbsp;<span class="ident" id="1542371">elem</span>&nbsp;<span class="ident" id="1542376">unsafe</span><span class="op" id="1542382">.</span><span class="ident" id="1542383">Pointer</span><span class="op" id="1542390">)</span>&nbsp;<span class="op" id="1542392">(</span><span class="ident" id="1542393">e</span>&nbsp;<span class="keyword" id="1542395">interface</span><span class="op" id="1542404">{</span><span class="op" id="1542405">}</span><span class="op" id="1542406">)</span>&nbsp;<span class="op" id="1542408">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542411">size</span>&nbsp;<span class="op" id="1542416">:=</span>&nbsp;<span class="builtintype" id="1542419">uintptr</span><span class="op" id="1542426">(</span><span class="ident" id="1542427">t</span><span class="op" id="1542428">.</span><span class="ident" id="1542429">size</span><span class="op" id="1542433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542436">ep</span>&nbsp;<span class="op" id="1542439">:=</span>&nbsp;<span class="op" id="1542442">(</span><span class="op" id="1542443">*</span><span class="ident" id="1542444">eface</span><span class="op" id="1542449">)</span><span class="op" id="1542450">(</span><span class="ident" id="1542451">unsafe</span><span class="op" id="1542457">.</span><span class="ident" id="1542458">Pointer</span><span class="op" id="1542465">(</span><span class="op" id="1542466">&amp;</span><span class="ident" id="1542467">e</span><span class="op" id="1542468">)</span><span class="op" id="1542469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542472">if</span>&nbsp;<span class="ident" id="1542475">isDirectIface</span><span class="op" id="1542488">(</span><span class="ident" id="1542489">t</span><span class="op" id="1542490">)</span>&nbsp;<span class="op" id="1542492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542496">ep</span><span class="op" id="1542498">.</span><span class="ident" id="1542499">_type</span>&nbsp;<span class="op" id="1542505">=</span>&nbsp;<span class="ident" id="1542507">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542511">memmove</span><span class="op" id="1542518">(</span><span class="ident" id="1542519">unsafe</span><span class="op" id="1542525">.</span><span class="ident" id="1542526">Pointer</span><span class="op" id="1542533">(</span><span class="op" id="1542534">&amp;</span><span class="ident" id="1542535">ep</span><span class="op" id="1542537">.</span><span class="ident" id="1542538">data</span><span class="op" id="1542542">)</span><span class="op" id="1542543">,</span>&nbsp;<span class="ident" id="1542545">elem</span><span class="op" id="1542549">,</span>&nbsp;<span class="ident" id="1542551">size</span><span class="op" id="1542555">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542558">}</span>&nbsp;<span class="keyword" id="1542560">else</span>&nbsp;<span class="op" id="1542565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542569">x</span>&nbsp;<span class="op" id="1542571">:=</span>&nbsp;<span class="ident" id="1542574">newobject</span><span class="op" id="1542583">(</span><span class="ident" id="1542584">t</span><span class="op" id="1542585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1542589">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1542654">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542730">memmove</span><span class="op" id="1542737">(</span><span class="ident" id="1542738">x</span><span class="op" id="1542739">,</span>&nbsp;<span class="ident" id="1542741">elem</span><span class="op" id="1542745">,</span>&nbsp;<span class="ident" id="1542747">size</span><span class="op" id="1542751">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542755">ep</span><span class="op" id="1542757">.</span><span class="ident" id="1542758">_type</span>&nbsp;<span class="op" id="1542764">=</span>&nbsp;<span class="ident" id="1542766">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542770">ep</span><span class="op" id="1542772">.</span><span class="ident" id="1542773">data</span>&nbsp;<span class="op" id="1542778">=</span>&nbsp;<span class="ident" id="1542780">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1542783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542786">return</span><br>
<span class="lineno"></span><span class="op" id="1542793">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1542796">func</span>&nbsp;<span class="ident" id="1542801">convT2I</span><span class="op" id="1542808">(</span><span class="ident" id="1542809">t</span>&nbsp;<span class="op" id="1542811">*</span><span class="ident" id="1542812">_type</span><span class="op" id="1542817">,</span>&nbsp;<span class="ident" id="1542819">inter</span>&nbsp;<span class="op" id="1542825">*</span><span class="ident" id="1542826">interfacetype</span><span class="op" id="1542839">,</span>&nbsp;<span class="ident" id="1542841">cache</span>&nbsp;<span class="op" id="1542847">*</span><span class="op" id="1542848">*</span><span class="ident" id="1542849">itab</span><span class="op" id="1542853">,</span>&nbsp;<span class="ident" id="1542855">elem</span>&nbsp;<span class="ident" id="1542860">unsafe</span><span class="op" id="1542866">.</span><span class="ident" id="1542867">Pointer</span><span class="op" id="1542874">)</span>&nbsp;<span class="op" id="1542876">(</span><span class="ident" id="1542877">i</span>&nbsp;<span class="ident" id="1542879">fInterface</span><span class="op" id="1542889">)</span>&nbsp;<span class="op" id="1542891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542894">tab</span>&nbsp;<span class="op" id="1542898">:=</span>&nbsp;<span class="op" id="1542901">(</span><span class="op" id="1542902">*</span><span class="ident" id="1542903">itab</span><span class="op" id="1542907">)</span><span class="op" id="1542908">(</span><span class="ident" id="1542909">atomicloadp</span><span class="op" id="1542920">(</span><span class="ident" id="1542921">unsafe</span><span class="op" id="1542927">.</span><span class="ident" id="1542928">Pointer</span><span class="op" id="1542935">(</span><span class="ident" id="1542936">cache</span><span class="op" id="1542941">)</span><span class="op" id="1542942">)</span><span class="op" id="1542943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1542946">if</span>&nbsp;<span class="ident" id="1542949">tab</span>&nbsp;<span class="op" id="1542953">==</span>&nbsp;<span class="builtintype" id="1542956">nil</span>&nbsp;<span class="op" id="1542960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542964">tab</span>&nbsp;<span class="op" id="1542968">=</span>&nbsp;<span class="ident" id="1542970">getitab</span><span class="op" id="1542977">(</span><span class="ident" id="1542978">inter</span><span class="op" id="1542983">,</span>&nbsp;<span class="ident" id="1542985">t</span><span class="op" id="1542986">,</span>&nbsp;<span class="builtintype" id="1542988">false</span><span class="op" id="1542993">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1542997">atomicstorep</span><span class="op" id="1543009">(</span><span class="ident" id="1543010">unsafe</span><span class="op" id="1543016">.</span><span class="ident" id="1543017">Pointer</span><span class="op" id="1543024">(</span><span class="ident" id="1543025">cache</span><span class="op" id="1543030">)</span><span class="op" id="1543031">,</span>&nbsp;<span class="ident" id="1543033">unsafe</span><span class="op" id="1543039">.</span><span class="ident" id="1543040">Pointer</span><span class="op" id="1543047">(</span><span class="ident" id="1543048">tab</span><span class="op" id="1543051">)</span><span class="op" id="1543052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543058">size</span>&nbsp;<span class="op" id="1543063">:=</span>&nbsp;<span class="builtintype" id="1543066">uintptr</span><span class="op" id="1543073">(</span><span class="ident" id="1543074">t</span><span class="op" id="1543075">.</span><span class="ident" id="1543076">size</span><span class="op" id="1543080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543083">pi</span>&nbsp;<span class="op" id="1543086">:=</span>&nbsp;<span class="op" id="1543089">(</span><span class="op" id="1543090">*</span><span class="ident" id="1543091">iface</span><span class="op" id="1543096">)</span><span class="op" id="1543097">(</span><span class="ident" id="1543098">unsafe</span><span class="op" id="1543104">.</span><span class="ident" id="1543105">Pointer</span><span class="op" id="1543112">(</span><span class="op" id="1543113">&amp;</span><span class="ident" id="1543114">i</span><span class="op" id="1543115">)</span><span class="op" id="1543116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543119">if</span>&nbsp;<span class="ident" id="1543122">isDirectIface</span><span class="op" id="1543135">(</span><span class="ident" id="1543136">t</span><span class="op" id="1543137">)</span>&nbsp;<span class="op" id="1543139">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543143">pi</span><span class="op" id="1543145">.</span><span class="ident" id="1543146">tab</span>&nbsp;<span class="op" id="1543150">=</span>&nbsp;<span class="ident" id="1543152">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543158">memmove</span><span class="op" id="1543165">(</span><span class="ident" id="1543166">unsafe</span><span class="op" id="1543172">.</span><span class="ident" id="1543173">Pointer</span><span class="op" id="1543180">(</span><span class="op" id="1543181">&amp;</span><span class="ident" id="1543182">pi</span><span class="op" id="1543184">.</span><span class="ident" id="1543185">data</span><span class="op" id="1543189">)</span><span class="op" id="1543190">,</span>&nbsp;<span class="ident" id="1543192">elem</span><span class="op" id="1543196">,</span>&nbsp;<span class="ident" id="1543198">size</span><span class="op" id="1543202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543205">}</span>&nbsp;<span class="keyword" id="1543207">else</span>&nbsp;<span class="op" id="1543212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543216">x</span>&nbsp;<span class="op" id="1543218">:=</span>&nbsp;<span class="ident" id="1543221">newobject</span><span class="op" id="1543230">(</span><span class="ident" id="1543231">t</span><span class="op" id="1543232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543236">memmove</span><span class="op" id="1543243">(</span><span class="ident" id="1543244">x</span><span class="op" id="1543245">,</span>&nbsp;<span class="ident" id="1543247">elem</span><span class="op" id="1543251">,</span>&nbsp;<span class="ident" id="1543253">size</span><span class="op" id="1543257">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543261">pi</span><span class="op" id="1543263">.</span><span class="ident" id="1543264">tab</span>&nbsp;<span class="op" id="1543268">=</span>&nbsp;<span class="ident" id="1543270">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543276">pi</span><span class="op" id="1543278">.</span><span class="ident" id="1543279">data</span>&nbsp;<span class="op" id="1543284">=</span>&nbsp;<span class="ident" id="1543286">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543292">return</span><br>
<span class="lineno"></span><span class="op" id="1543299">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1543302">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1543379">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1543453">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1543466">func</span>&nbsp;<span class="ident" id="1543471">assertI2T</span><span class="op" id="1543480">(</span><span class="ident" id="1543481">t</span>&nbsp;<span class="op" id="1543483">*</span><span class="ident" id="1543484">_type</span><span class="op" id="1543489">,</span>&nbsp;<span class="ident" id="1543491">i</span>&nbsp;<span class="ident" id="1543493">fInterface</span><span class="op" id="1543503">)</span>&nbsp;<span class="op" id="1543505">(</span><span class="ident" id="1543506">r</span>&nbsp;<span class="keyword" id="1543508">struct</span><span class="op" id="1543514">{</span><span class="op" id="1543515">}</span><span class="op" id="1543516">)</span>&nbsp;<span class="op" id="1543518">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543521">ip</span>&nbsp;<span class="op" id="1543524">:=</span>&nbsp;<span class="op" id="1543527">(</span><span class="op" id="1543528">*</span><span class="ident" id="1543529">iface</span><span class="op" id="1543534">)</span><span class="op" id="1543535">(</span><span class="ident" id="1543536">unsafe</span><span class="op" id="1543542">.</span><span class="ident" id="1543543">Pointer</span><span class="op" id="1543550">(</span><span class="op" id="1543551">&amp;</span><span class="ident" id="1543552">i</span><span class="op" id="1543553">)</span><span class="op" id="1543554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543557">tab</span>&nbsp;<span class="op" id="1543561">:=</span>&nbsp;<span class="ident" id="1543564">ip</span><span class="op" id="1543566">.</span><span class="ident" id="1543567">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543572">if</span>&nbsp;<span class="ident" id="1543575">tab</span>&nbsp;<span class="op" id="1543579">==</span>&nbsp;<span class="builtintype" id="1543582">nil</span>&nbsp;<span class="op" id="1543586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1543590">panic</span><span class="op" id="1543595">(</span><span class="op" id="1543596">&amp;</span><span class="ident" id="1543597">TypeAssertionError</span><span class="op" id="1543615">{</span><span class="string" id="1543616">&#34;&#34;</span><span class="op" id="1543618">,</span>&nbsp;<span class="string" id="1543620">&#34;&#34;</span><span class="op" id="1543622">,</span>&nbsp;<span class="op" id="1543624">*</span><span class="ident" id="1543625">t</span><span class="op" id="1543626">.</span><span class="ident" id="1543627">_string</span><span class="op" id="1543634">,</span>&nbsp;<span class="string" id="1543636">&#34;&#34;</span><span class="op" id="1543638">}</span><span class="op" id="1543639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543642">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543645">if</span>&nbsp;<span class="ident" id="1543648">tab</span><span class="op" id="1543651">.</span><span class="ident" id="1543652">_type</span>&nbsp;<span class="op" id="1543658">!=</span>&nbsp;<span class="ident" id="1543661">t</span>&nbsp;<span class="op" id="1543663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1543667">panic</span><span class="op" id="1543672">(</span><span class="op" id="1543673">&amp;</span><span class="ident" id="1543674">TypeAssertionError</span><span class="op" id="1543692">{</span><span class="op" id="1543693">*</span><span class="ident" id="1543694">tab</span><span class="op" id="1543697">.</span><span class="ident" id="1543698">inter</span><span class="op" id="1543703">.</span><span class="ident" id="1543704">typ</span><span class="op" id="1543707">.</span><span class="ident" id="1543708">_string</span><span class="op" id="1543715">,</span>&nbsp;<span class="op" id="1543717">*</span><span class="ident" id="1543718">tab</span><span class="op" id="1543721">.</span><span class="ident" id="1543722">_type</span><span class="op" id="1543727">.</span><span class="ident" id="1543728">_string</span><span class="op" id="1543735">,</span>&nbsp;<span class="op" id="1543737">*</span><span class="ident" id="1543738">t</span><span class="op" id="1543739">.</span><span class="ident" id="1543740">_string</span><span class="op" id="1543747">,</span>&nbsp;<span class="string" id="1543749">&#34;&#34;</span><span class="op" id="1543751">}</span><span class="op" id="1543752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543758">size</span>&nbsp;<span class="op" id="1543763">:=</span>&nbsp;<span class="builtintype" id="1543766">uintptr</span><span class="op" id="1543773">(</span><span class="ident" id="1543774">t</span><span class="op" id="1543775">.</span><span class="ident" id="1543776">size</span><span class="op" id="1543780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543783">if</span>&nbsp;<span class="ident" id="1543786">isDirectIface</span><span class="op" id="1543799">(</span><span class="ident" id="1543800">t</span><span class="op" id="1543801">)</span>&nbsp;<span class="op" id="1543803">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543807">memmove</span><span class="op" id="1543814">(</span><span class="ident" id="1543815">unsafe</span><span class="op" id="1543821">.</span><span class="ident" id="1543822">Pointer</span><span class="op" id="1543829">(</span><span class="op" id="1543830">&amp;</span><span class="ident" id="1543831">r</span><span class="op" id="1543832">)</span><span class="op" id="1543833">,</span>&nbsp;<span class="ident" id="1543835">unsafe</span><span class="op" id="1543841">.</span><span class="ident" id="1543842">Pointer</span><span class="op" id="1543849">(</span><span class="op" id="1543850">&amp;</span><span class="ident" id="1543851">ip</span><span class="op" id="1543853">.</span><span class="ident" id="1543854">data</span><span class="op" id="1543858">)</span><span class="op" id="1543859">,</span>&nbsp;<span class="ident" id="1543861">size</span><span class="op" id="1543865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543868">}</span>&nbsp;<span class="keyword" id="1543870">else</span>&nbsp;<span class="op" id="1543875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1543879">memmove</span><span class="op" id="1543886">(</span><span class="ident" id="1543887">unsafe</span><span class="op" id="1543893">.</span><span class="ident" id="1543894">Pointer</span><span class="op" id="1543901">(</span><span class="op" id="1543902">&amp;</span><span class="ident" id="1543903">r</span><span class="op" id="1543904">)</span><span class="op" id="1543905">,</span>&nbsp;<span class="ident" id="1543907">ip</span><span class="op" id="1543909">.</span><span class="ident" id="1543910">data</span><span class="op" id="1543914">,</span>&nbsp;<span class="ident" id="1543916">size</span><span class="op" id="1543920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1543923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1543926">return</span><br>
<span class="lineno">190</span><span class="op" id="1543933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1543936">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1543949">func</span>&nbsp;<span class="ident" id="1543954">assertI2T2</span><span class="op" id="1543964">(</span><span class="ident" id="1543965">t</span>&nbsp;<span class="op" id="1543967">*</span><span class="ident" id="1543968">_type</span><span class="op" id="1543973">,</span>&nbsp;<span class="ident" id="1543975">i</span>&nbsp;<span class="ident" id="1543977">fInterface</span><span class="op" id="1543987">)</span>&nbsp;<span class="op" id="1543989">(</span><span class="ident" id="1543990">r</span>&nbsp;<span class="builtintype" id="1543992">byte</span><span class="op" id="1543996">)</span>&nbsp;<span class="op" id="1543998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544001">ip</span>&nbsp;<span class="op" id="1544004">:=</span>&nbsp;<span class="op" id="1544007">(</span><span class="op" id="1544008">*</span><span class="ident" id="1544009">iface</span><span class="op" id="1544014">)</span><span class="op" id="1544015">(</span><span class="ident" id="1544016">unsafe</span><span class="op" id="1544022">.</span><span class="ident" id="1544023">Pointer</span><span class="op" id="1544030">(</span><span class="op" id="1544031">&amp;</span><span class="ident" id="1544032">i</span><span class="op" id="1544033">)</span><span class="op" id="1544034">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544037">size</span>&nbsp;<span class="op" id="1544042">:=</span>&nbsp;<span class="builtintype" id="1544045">uintptr</span><span class="op" id="1544052">(</span><span class="ident" id="1544053">t</span><span class="op" id="1544054">.</span><span class="ident" id="1544055">size</span><span class="op" id="1544059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544062">ok</span>&nbsp;<span class="op" id="1544065">:=</span>&nbsp;<span class="op" id="1544068">(</span><span class="op" id="1544069">*</span><span class="builtintype" id="1544070">bool</span><span class="op" id="1544074">)</span><span class="op" id="1544075">(</span><span class="ident" id="1544076">add</span><span class="op" id="1544079">(</span><span class="ident" id="1544080">unsafe</span><span class="op" id="1544086">.</span><span class="ident" id="1544087">Pointer</span><span class="op" id="1544094">(</span><span class="op" id="1544095">&amp;</span><span class="ident" id="1544096">r</span><span class="op" id="1544097">)</span><span class="op" id="1544098">,</span>&nbsp;<span class="ident" id="1544100">size</span><span class="op" id="1544104">)</span><span class="op" id="1544105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544108">tab</span>&nbsp;<span class="op" id="1544112">:=</span>&nbsp;<span class="ident" id="1544115">ip</span><span class="op" id="1544117">.</span><span class="ident" id="1544118">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544123">if</span>&nbsp;<span class="ident" id="1544126">tab</span>&nbsp;<span class="op" id="1544130">==</span>&nbsp;<span class="builtintype" id="1544133">nil</span>&nbsp;<span class="op" id="1544137">||</span>&nbsp;<span class="ident" id="1544140">tab</span><span class="op" id="1544143">.</span><span class="ident" id="1544144">_type</span>&nbsp;<span class="op" id="1544150">!=</span>&nbsp;<span class="ident" id="1544153">t</span>&nbsp;<span class="op" id="1544155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544159">*</span><span class="ident" id="1544160">ok</span>&nbsp;<span class="op" id="1544163">=</span>&nbsp;<span class="builtintype" id="1544165">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544173">memclr</span><span class="op" id="1544179">(</span><span class="ident" id="1544180">unsafe</span><span class="op" id="1544186">.</span><span class="ident" id="1544187">Pointer</span><span class="op" id="1544194">(</span><span class="op" id="1544195">&amp;</span><span class="ident" id="1544196">r</span><span class="op" id="1544197">)</span><span class="op" id="1544198">,</span>&nbsp;<span class="ident" id="1544200">size</span><span class="op" id="1544204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544208">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544219">*</span><span class="ident" id="1544220">ok</span>&nbsp;<span class="op" id="1544223">=</span>&nbsp;<span class="builtintype" id="1544225">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544231">if</span>&nbsp;<span class="ident" id="1544234">isDirectIface</span><span class="op" id="1544247">(</span><span class="ident" id="1544248">t</span><span class="op" id="1544249">)</span>&nbsp;<span class="op" id="1544251">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544255">memmove</span><span class="op" id="1544262">(</span><span class="ident" id="1544263">unsafe</span><span class="op" id="1544269">.</span><span class="ident" id="1544270">Pointer</span><span class="op" id="1544277">(</span><span class="op" id="1544278">&amp;</span><span class="ident" id="1544279">r</span><span class="op" id="1544280">)</span><span class="op" id="1544281">,</span>&nbsp;<span class="ident" id="1544283">unsafe</span><span class="op" id="1544289">.</span><span class="ident" id="1544290">Pointer</span><span class="op" id="1544297">(</span><span class="op" id="1544298">&amp;</span><span class="ident" id="1544299">ip</span><span class="op" id="1544301">.</span><span class="ident" id="1544302">data</span><span class="op" id="1544306">)</span><span class="op" id="1544307">,</span>&nbsp;<span class="ident" id="1544309">size</span><span class="op" id="1544313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544316">}</span>&nbsp;<span class="keyword" id="1544318">else</span>&nbsp;<span class="op" id="1544323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544327">memmove</span><span class="op" id="1544334">(</span><span class="ident" id="1544335">unsafe</span><span class="op" id="1544341">.</span><span class="ident" id="1544342">Pointer</span><span class="op" id="1544349">(</span><span class="op" id="1544350">&amp;</span><span class="ident" id="1544351">r</span><span class="op" id="1544352">)</span><span class="op" id="1544353">,</span>&nbsp;<span class="ident" id="1544355">ip</span><span class="op" id="1544357">.</span><span class="ident" id="1544358">data</span><span class="op" id="1544362">,</span>&nbsp;<span class="ident" id="1544364">size</span><span class="op" id="1544368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544374">return</span><br>
<span class="lineno">210</span><span class="op" id="1544381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1544384">func</span>&nbsp;<span class="ident" id="1544389">assertI2TOK</span><span class="op" id="1544400">(</span><span class="ident" id="1544401">t</span>&nbsp;<span class="op" id="1544403">*</span><span class="ident" id="1544404">_type</span><span class="op" id="1544409">,</span>&nbsp;<span class="ident" id="1544411">i</span>&nbsp;<span class="ident" id="1544413">fInterface</span><span class="op" id="1544423">)</span>&nbsp;<span class="builtintype" id="1544425">bool</span>&nbsp;<span class="op" id="1544430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544433">ip</span>&nbsp;<span class="op" id="1544436">:=</span>&nbsp;<span class="op" id="1544439">(</span><span class="op" id="1544440">*</span><span class="ident" id="1544441">iface</span><span class="op" id="1544446">)</span><span class="op" id="1544447">(</span><span class="ident" id="1544448">unsafe</span><span class="op" id="1544454">.</span><span class="ident" id="1544455">Pointer</span><span class="op" id="1544462">(</span><span class="op" id="1544463">&amp;</span><span class="ident" id="1544464">i</span><span class="op" id="1544465">)</span><span class="op" id="1544466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544469">tab</span>&nbsp;<span class="op" id="1544473">:=</span>&nbsp;<span class="ident" id="1544476">ip</span><span class="op" id="1544478">.</span><span class="ident" id="1544479">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544484">return</span>&nbsp;<span class="ident" id="1544491">tab</span>&nbsp;<span class="op" id="1544495">!=</span>&nbsp;<span class="builtintype" id="1544498">nil</span>&nbsp;<span class="op" id="1544502">&amp;&amp;</span>&nbsp;<span class="ident" id="1544505">tab</span><span class="op" id="1544508">.</span><span class="ident" id="1544509">_type</span>&nbsp;<span class="op" id="1544515">==</span>&nbsp;<span class="ident" id="1544518">t</span><br>
<span class="lineno"></span><span class="op" id="1544520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1544523">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1544536">func</span>&nbsp;<span class="ident" id="1544541">assertE2T</span><span class="op" id="1544550">(</span><span class="ident" id="1544551">t</span>&nbsp;<span class="op" id="1544553">*</span><span class="ident" id="1544554">_type</span><span class="op" id="1544559">,</span>&nbsp;<span class="ident" id="1544561">e</span>&nbsp;<span class="keyword" id="1544563">interface</span><span class="op" id="1544572">{</span><span class="op" id="1544573">}</span><span class="op" id="1544574">)</span>&nbsp;<span class="op" id="1544576">(</span><span class="ident" id="1544577">r</span>&nbsp;<span class="keyword" id="1544579">struct</span><span class="op" id="1544585">{</span><span class="op" id="1544586">}</span><span class="op" id="1544587">)</span>&nbsp;<span class="op" id="1544589">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544592">ep</span>&nbsp;<span class="op" id="1544595">:=</span>&nbsp;<span class="op" id="1544598">(</span><span class="op" id="1544599">*</span><span class="ident" id="1544600">eface</span><span class="op" id="1544605">)</span><span class="op" id="1544606">(</span><span class="ident" id="1544607">unsafe</span><span class="op" id="1544613">.</span><span class="ident" id="1544614">Pointer</span><span class="op" id="1544621">(</span><span class="op" id="1544622">&amp;</span><span class="ident" id="1544623">e</span><span class="op" id="1544624">)</span><span class="op" id="1544625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544628">if</span>&nbsp;<span class="ident" id="1544631">ep</span><span class="op" id="1544633">.</span><span class="ident" id="1544634">_type</span>&nbsp;<span class="op" id="1544640">==</span>&nbsp;<span class="builtintype" id="1544643">nil</span>&nbsp;<span class="op" id="1544647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1544651">panic</span><span class="op" id="1544656">(</span><span class="op" id="1544657">&amp;</span><span class="ident" id="1544658">TypeAssertionError</span><span class="op" id="1544676">{</span><span class="string" id="1544677">&#34;&#34;</span><span class="op" id="1544679">,</span>&nbsp;<span class="string" id="1544681">&#34;&#34;</span><span class="op" id="1544683">,</span>&nbsp;<span class="op" id="1544685">*</span><span class="ident" id="1544686">t</span><span class="op" id="1544687">.</span><span class="ident" id="1544688">_string</span><span class="op" id="1544695">,</span>&nbsp;<span class="string" id="1544697">&#34;&#34;</span><span class="op" id="1544699">}</span><span class="op" id="1544700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544706">if</span>&nbsp;<span class="ident" id="1544709">ep</span><span class="op" id="1544711">.</span><span class="ident" id="1544712">_type</span>&nbsp;<span class="op" id="1544718">!=</span>&nbsp;<span class="ident" id="1544721">t</span>&nbsp;<span class="op" id="1544723">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1544727">panic</span><span class="op" id="1544732">(</span><span class="op" id="1544733">&amp;</span><span class="ident" id="1544734">TypeAssertionError</span><span class="op" id="1544752">{</span><span class="string" id="1544753">&#34;&#34;</span><span class="op" id="1544755">,</span>&nbsp;<span class="op" id="1544757">*</span><span class="ident" id="1544758">ep</span><span class="op" id="1544760">.</span><span class="ident" id="1544761">_type</span><span class="op" id="1544766">.</span><span class="ident" id="1544767">_string</span><span class="op" id="1544774">,</span>&nbsp;<span class="op" id="1544776">*</span><span class="ident" id="1544777">t</span><span class="op" id="1544778">.</span><span class="ident" id="1544779">_string</span><span class="op" id="1544786">,</span>&nbsp;<span class="string" id="1544788">&#34;&#34;</span><span class="op" id="1544790">}</span><span class="op" id="1544791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544797">size</span>&nbsp;<span class="op" id="1544802">:=</span>&nbsp;<span class="builtintype" id="1544805">uintptr</span><span class="op" id="1544812">(</span><span class="ident" id="1544813">t</span><span class="op" id="1544814">.</span><span class="ident" id="1544815">size</span><span class="op" id="1544819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544822">if</span>&nbsp;<span class="ident" id="1544825">isDirectIface</span><span class="op" id="1544838">(</span><span class="ident" id="1544839">t</span><span class="op" id="1544840">)</span>&nbsp;<span class="op" id="1544842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544846">memmove</span><span class="op" id="1544853">(</span><span class="ident" id="1544854">unsafe</span><span class="op" id="1544860">.</span><span class="ident" id="1544861">Pointer</span><span class="op" id="1544868">(</span><span class="op" id="1544869">&amp;</span><span class="ident" id="1544870">r</span><span class="op" id="1544871">)</span><span class="op" id="1544872">,</span>&nbsp;<span class="ident" id="1544874">unsafe</span><span class="op" id="1544880">.</span><span class="ident" id="1544881">Pointer</span><span class="op" id="1544888">(</span><span class="op" id="1544889">&amp;</span><span class="ident" id="1544890">ep</span><span class="op" id="1544892">.</span><span class="ident" id="1544893">data</span><span class="op" id="1544897">)</span><span class="op" id="1544898">,</span>&nbsp;<span class="ident" id="1544900">size</span><span class="op" id="1544904">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544907">}</span>&nbsp;<span class="keyword" id="1544909">else</span>&nbsp;<span class="op" id="1544914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1544918">memmove</span><span class="op" id="1544925">(</span><span class="ident" id="1544926">unsafe</span><span class="op" id="1544932">.</span><span class="ident" id="1544933">Pointer</span><span class="op" id="1544940">(</span><span class="op" id="1544941">&amp;</span><span class="ident" id="1544942">r</span><span class="op" id="1544943">)</span><span class="op" id="1544944">,</span>&nbsp;<span class="ident" id="1544946">ep</span><span class="op" id="1544948">.</span><span class="ident" id="1544949">data</span><span class="op" id="1544953">,</span>&nbsp;<span class="ident" id="1544955">size</span><span class="op" id="1544959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1544962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1544965">return</span><br>
<span class="lineno"></span><span class="op" id="1544972">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1544975">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1544988">func</span>&nbsp;<span class="ident" id="1544993">assertE2T2</span><span class="op" id="1545003">(</span><span class="ident" id="1545004">t</span>&nbsp;<span class="op" id="1545006">*</span><span class="ident" id="1545007">_type</span><span class="op" id="1545012">,</span>&nbsp;<span class="ident" id="1545014">e</span>&nbsp;<span class="keyword" id="1545016">interface</span><span class="op" id="1545025">{</span><span class="op" id="1545026">}</span><span class="op" id="1545027">)</span>&nbsp;<span class="op" id="1545029">(</span><span class="ident" id="1545030">r</span>&nbsp;<span class="builtintype" id="1545032">byte</span><span class="op" id="1545036">)</span>&nbsp;<span class="op" id="1545038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545041">ep</span>&nbsp;<span class="op" id="1545044">:=</span>&nbsp;<span class="op" id="1545047">(</span><span class="op" id="1545048">*</span><span class="ident" id="1545049">eface</span><span class="op" id="1545054">)</span><span class="op" id="1545055">(</span><span class="ident" id="1545056">unsafe</span><span class="op" id="1545062">.</span><span class="ident" id="1545063">Pointer</span><span class="op" id="1545070">(</span><span class="op" id="1545071">&amp;</span><span class="ident" id="1545072">e</span><span class="op" id="1545073">)</span><span class="op" id="1545074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545077">size</span>&nbsp;<span class="op" id="1545082">:=</span>&nbsp;<span class="builtintype" id="1545085">uintptr</span><span class="op" id="1545092">(</span><span class="ident" id="1545093">t</span><span class="op" id="1545094">.</span><span class="ident" id="1545095">size</span><span class="op" id="1545099">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545102">ok</span>&nbsp;<span class="op" id="1545105">:=</span>&nbsp;<span class="op" id="1545108">(</span><span class="op" id="1545109">*</span><span class="builtintype" id="1545110">bool</span><span class="op" id="1545114">)</span><span class="op" id="1545115">(</span><span class="ident" id="1545116">add</span><span class="op" id="1545119">(</span><span class="ident" id="1545120">unsafe</span><span class="op" id="1545126">.</span><span class="ident" id="1545127">Pointer</span><span class="op" id="1545134">(</span><span class="op" id="1545135">&amp;</span><span class="ident" id="1545136">r</span><span class="op" id="1545137">)</span><span class="op" id="1545138">,</span>&nbsp;<span class="ident" id="1545140">size</span><span class="op" id="1545144">)</span><span class="op" id="1545145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545148">if</span>&nbsp;<span class="ident" id="1545151">ep</span><span class="op" id="1545153">.</span><span class="ident" id="1545154">_type</span>&nbsp;<span class="op" id="1545160">!=</span>&nbsp;<span class="ident" id="1545163">t</span>&nbsp;<span class="op" id="1545165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545169">*</span><span class="ident" id="1545170">ok</span>&nbsp;<span class="op" id="1545173">=</span>&nbsp;<span class="builtintype" id="1545175">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545183">memclr</span><span class="op" id="1545189">(</span><span class="ident" id="1545190">unsafe</span><span class="op" id="1545196">.</span><span class="ident" id="1545197">Pointer</span><span class="op" id="1545204">(</span><span class="op" id="1545205">&amp;</span><span class="ident" id="1545206">r</span><span class="op" id="1545207">)</span><span class="op" id="1545208">,</span>&nbsp;<span class="ident" id="1545210">size</span><span class="op" id="1545214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545218">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545229">*</span><span class="ident" id="1545230">ok</span>&nbsp;<span class="op" id="1545233">=</span>&nbsp;<span class="builtintype" id="1545235">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545241">if</span>&nbsp;<span class="ident" id="1545244">isDirectIface</span><span class="op" id="1545257">(</span><span class="ident" id="1545258">t</span><span class="op" id="1545259">)</span>&nbsp;<span class="op" id="1545261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545265">memmove</span><span class="op" id="1545272">(</span><span class="ident" id="1545273">unsafe</span><span class="op" id="1545279">.</span><span class="ident" id="1545280">Pointer</span><span class="op" id="1545287">(</span><span class="op" id="1545288">&amp;</span><span class="ident" id="1545289">r</span><span class="op" id="1545290">)</span><span class="op" id="1545291">,</span>&nbsp;<span class="ident" id="1545293">unsafe</span><span class="op" id="1545299">.</span><span class="ident" id="1545300">Pointer</span><span class="op" id="1545307">(</span><span class="op" id="1545308">&amp;</span><span class="ident" id="1545309">ep</span><span class="op" id="1545311">.</span><span class="ident" id="1545312">data</span><span class="op" id="1545316">)</span><span class="op" id="1545317">,</span>&nbsp;<span class="ident" id="1545319">size</span><span class="op" id="1545323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545326">}</span>&nbsp;<span class="keyword" id="1545328">else</span>&nbsp;<span class="op" id="1545333">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545337">memmove</span><span class="op" id="1545344">(</span><span class="ident" id="1545345">unsafe</span><span class="op" id="1545351">.</span><span class="ident" id="1545352">Pointer</span><span class="op" id="1545359">(</span><span class="op" id="1545360">&amp;</span><span class="ident" id="1545361">r</span><span class="op" id="1545362">)</span><span class="op" id="1545363">,</span>&nbsp;<span class="ident" id="1545365">ep</span><span class="op" id="1545367">.</span><span class="ident" id="1545368">data</span><span class="op" id="1545372">,</span>&nbsp;<span class="ident" id="1545374">size</span><span class="op" id="1545378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545384">return</span><br>
<span class="lineno"></span><span class="op" id="1545391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1545394">func</span>&nbsp;<span class="ident" id="1545399">assertE2TOK</span><span class="op" id="1545410">(</span><span class="ident" id="1545411">t</span>&nbsp;<span class="op" id="1545413">*</span><span class="ident" id="1545414">_type</span><span class="op" id="1545419">,</span>&nbsp;<span class="ident" id="1545421">e</span>&nbsp;<span class="keyword" id="1545423">interface</span><span class="op" id="1545432">{</span><span class="op" id="1545433">}</span><span class="op" id="1545434">)</span>&nbsp;<span class="builtintype" id="1545436">bool</span>&nbsp;<span class="op" id="1545441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545444">ep</span>&nbsp;<span class="op" id="1545447">:=</span>&nbsp;<span class="op" id="1545450">(</span><span class="op" id="1545451">*</span><span class="ident" id="1545452">eface</span><span class="op" id="1545457">)</span><span class="op" id="1545458">(</span><span class="ident" id="1545459">unsafe</span><span class="op" id="1545465">.</span><span class="ident" id="1545466">Pointer</span><span class="op" id="1545473">(</span><span class="op" id="1545474">&amp;</span><span class="ident" id="1545475">e</span><span class="op" id="1545476">)</span><span class="op" id="1545477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545480">return</span>&nbsp;<span class="ident" id="1545487">t</span>&nbsp;<span class="op" id="1545489">==</span>&nbsp;<span class="ident" id="1545492">ep</span><span class="op" id="1545494">.</span><span class="ident" id="1545495">_type</span><br>
<span class="lineno"></span><span class="op" id="1545501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1545504">func</span>&nbsp;<span class="ident" id="1545509">convI2E</span><span class="op" id="1545516">(</span><span class="ident" id="1545517">i</span>&nbsp;<span class="ident" id="1545519">fInterface</span><span class="op" id="1545529">)</span>&nbsp;<span class="op" id="1545531">(</span><span class="ident" id="1545532">r</span>&nbsp;<span class="keyword" id="1545534">interface</span><span class="op" id="1545543">{</span><span class="op" id="1545544">}</span><span class="op" id="1545545">)</span>&nbsp;<span class="op" id="1545547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545550">ip</span>&nbsp;<span class="op" id="1545553">:=</span>&nbsp;<span class="op" id="1545556">(</span><span class="op" id="1545557">*</span><span class="ident" id="1545558">iface</span><span class="op" id="1545563">)</span><span class="op" id="1545564">(</span><span class="ident" id="1545565">unsafe</span><span class="op" id="1545571">.</span><span class="ident" id="1545572">Pointer</span><span class="op" id="1545579">(</span><span class="op" id="1545580">&amp;</span><span class="ident" id="1545581">i</span><span class="op" id="1545582">)</span><span class="op" id="1545583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545586">tab</span>&nbsp;<span class="op" id="1545590">:=</span>&nbsp;<span class="ident" id="1545593">ip</span><span class="op" id="1545595">.</span><span class="ident" id="1545596">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545601">if</span>&nbsp;<span class="ident" id="1545604">tab</span>&nbsp;<span class="op" id="1545608">==</span>&nbsp;<span class="builtintype" id="1545611">nil</span>&nbsp;<span class="op" id="1545615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545619">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545630">rp</span>&nbsp;<span class="op" id="1545633">:=</span>&nbsp;<span class="op" id="1545636">(</span><span class="op" id="1545637">*</span><span class="ident" id="1545638">eface</span><span class="op" id="1545643">)</span><span class="op" id="1545644">(</span><span class="ident" id="1545645">unsafe</span><span class="op" id="1545651">.</span><span class="ident" id="1545652">Pointer</span><span class="op" id="1545659">(</span><span class="op" id="1545660">&amp;</span><span class="ident" id="1545661">r</span><span class="op" id="1545662">)</span><span class="op" id="1545663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545666">rp</span><span class="op" id="1545668">.</span><span class="ident" id="1545669">_type</span>&nbsp;<span class="op" id="1545675">=</span>&nbsp;<span class="ident" id="1545677">tab</span><span class="op" id="1545680">.</span><span class="ident" id="1545681">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545688">rp</span><span class="op" id="1545690">.</span><span class="ident" id="1545691">data</span>&nbsp;<span class="op" id="1545696">=</span>&nbsp;<span class="ident" id="1545698">ip</span><span class="op" id="1545700">.</span><span class="ident" id="1545701">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545707">return</span><br>
<span class="lineno">270</span><span class="op" id="1545714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1545717">func</span>&nbsp;<span class="ident" id="1545722">assertI2E</span><span class="op" id="1545731">(</span><span class="ident" id="1545732">inter</span>&nbsp;<span class="op" id="1545738">*</span><span class="ident" id="1545739">interfacetype</span><span class="op" id="1545752">,</span>&nbsp;<span class="ident" id="1545754">i</span>&nbsp;<span class="ident" id="1545756">fInterface</span><span class="op" id="1545766">)</span>&nbsp;<span class="op" id="1545768">(</span><span class="ident" id="1545769">r</span>&nbsp;<span class="keyword" id="1545771">interface</span><span class="op" id="1545780">{</span><span class="op" id="1545781">}</span><span class="op" id="1545782">)</span>&nbsp;<span class="op" id="1545784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545787">ip</span>&nbsp;<span class="op" id="1545790">:=</span>&nbsp;<span class="op" id="1545793">(</span><span class="op" id="1545794">*</span><span class="ident" id="1545795">iface</span><span class="op" id="1545800">)</span><span class="op" id="1545801">(</span><span class="ident" id="1545802">unsafe</span><span class="op" id="1545808">.</span><span class="ident" id="1545809">Pointer</span><span class="op" id="1545816">(</span><span class="op" id="1545817">&amp;</span><span class="ident" id="1545818">i</span><span class="op" id="1545819">)</span><span class="op" id="1545820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545823">tab</span>&nbsp;<span class="op" id="1545827">:=</span>&nbsp;<span class="ident" id="1545830">ip</span><span class="op" id="1545832">.</span><span class="ident" id="1545833">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1545838">if</span>&nbsp;<span class="ident" id="1545841">tab</span>&nbsp;<span class="op" id="1545845">==</span>&nbsp;<span class="builtintype" id="1545848">nil</span>&nbsp;<span class="op" id="1545852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1545856">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1545915">panic</span><span class="op" id="1545920">(</span><span class="op" id="1545921">&amp;</span><span class="ident" id="1545922">TypeAssertionError</span><span class="op" id="1545940">{</span><span class="string" id="1545941">&#34;&#34;</span><span class="op" id="1545943">,</span>&nbsp;<span class="string" id="1545945">&#34;&#34;</span><span class="op" id="1545947">,</span>&nbsp;<span class="op" id="1545949">*</span><span class="ident" id="1545950">inter</span><span class="op" id="1545955">.</span><span class="ident" id="1545956">typ</span><span class="op" id="1545959">.</span><span class="ident" id="1545960">_string</span><span class="op" id="1545967">,</span>&nbsp;<span class="string" id="1545969">&#34;&#34;</span><span class="op" id="1545971">}</span><span class="op" id="1545972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1545975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1545978">rp</span>&nbsp;<span class="op" id="1545981">:=</span>&nbsp;<span class="op" id="1545984">(</span><span class="op" id="1545985">*</span><span class="ident" id="1545986">eface</span><span class="op" id="1545991">)</span><span class="op" id="1545992">(</span><span class="ident" id="1545993">unsafe</span><span class="op" id="1545999">.</span><span class="ident" id="1546000">Pointer</span><span class="op" id="1546007">(</span><span class="op" id="1546008">&amp;</span><span class="ident" id="1546009">r</span><span class="op" id="1546010">)</span><span class="op" id="1546011">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546014">rp</span><span class="op" id="1546016">.</span><span class="ident" id="1546017">_type</span>&nbsp;<span class="op" id="1546023">=</span>&nbsp;<span class="ident" id="1546025">tab</span><span class="op" id="1546028">.</span><span class="ident" id="1546029">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546036">rp</span><span class="op" id="1546038">.</span><span class="ident" id="1546039">data</span>&nbsp;<span class="op" id="1546044">=</span>&nbsp;<span class="ident" id="1546046">ip</span><span class="op" id="1546048">.</span><span class="ident" id="1546049">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546055">return</span><br>
<span class="lineno"></span><span class="op" id="1546062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1546065">func</span>&nbsp;<span class="ident" id="1546070">assertI2E2</span><span class="op" id="1546080">(</span><span class="ident" id="1546081">inter</span>&nbsp;<span class="op" id="1546087">*</span><span class="ident" id="1546088">interfacetype</span><span class="op" id="1546101">,</span>&nbsp;<span class="ident" id="1546103">i</span>&nbsp;<span class="ident" id="1546105">fInterface</span><span class="op" id="1546115">)</span>&nbsp;<span class="op" id="1546117">(</span><span class="ident" id="1546118">r</span>&nbsp;<span class="keyword" id="1546120">interface</span><span class="op" id="1546129">{</span><span class="op" id="1546130">}</span><span class="op" id="1546131">,</span>&nbsp;<span class="ident" id="1546133">ok</span>&nbsp;<span class="builtintype" id="1546136">bool</span><span class="op" id="1546140">)</span>&nbsp;<span class="op" id="1546142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546145">ip</span>&nbsp;<span class="op" id="1546148">:=</span>&nbsp;<span class="op" id="1546151">(</span><span class="op" id="1546152">*</span><span class="ident" id="1546153">iface</span><span class="op" id="1546158">)</span><span class="op" id="1546159">(</span><span class="ident" id="1546160">unsafe</span><span class="op" id="1546166">.</span><span class="ident" id="1546167">Pointer</span><span class="op" id="1546174">(</span><span class="op" id="1546175">&amp;</span><span class="ident" id="1546176">i</span><span class="op" id="1546177">)</span><span class="op" id="1546178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546181">tab</span>&nbsp;<span class="op" id="1546185">:=</span>&nbsp;<span class="ident" id="1546188">ip</span><span class="op" id="1546190">.</span><span class="ident" id="1546191">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546196">if</span>&nbsp;<span class="ident" id="1546199">tab</span>&nbsp;<span class="op" id="1546203">==</span>&nbsp;<span class="builtintype" id="1546206">nil</span>&nbsp;<span class="op" id="1546210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546214">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546225">rp</span>&nbsp;<span class="op" id="1546228">:=</span>&nbsp;<span class="op" id="1546231">(</span><span class="op" id="1546232">*</span><span class="ident" id="1546233">eface</span><span class="op" id="1546238">)</span><span class="op" id="1546239">(</span><span class="ident" id="1546240">unsafe</span><span class="op" id="1546246">.</span><span class="ident" id="1546247">Pointer</span><span class="op" id="1546254">(</span><span class="op" id="1546255">&amp;</span><span class="ident" id="1546256">r</span><span class="op" id="1546257">)</span><span class="op" id="1546258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546261">rp</span><span class="op" id="1546263">.</span><span class="ident" id="1546264">_type</span>&nbsp;<span class="op" id="1546270">=</span>&nbsp;<span class="ident" id="1546272">tab</span><span class="op" id="1546275">.</span><span class="ident" id="1546276">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546283">rp</span><span class="op" id="1546285">.</span><span class="ident" id="1546286">data</span>&nbsp;<span class="op" id="1546291">=</span>&nbsp;<span class="ident" id="1546293">ip</span><span class="op" id="1546295">.</span><span class="ident" id="1546296">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546302">ok</span>&nbsp;<span class="op" id="1546305">=</span>&nbsp;<span class="builtintype" id="1546307">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546313">return</span><br>
<span class="lineno"></span><span class="op" id="1546320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1546323">func</span>&nbsp;<span class="ident" id="1546328">convI2I</span><span class="op" id="1546335">(</span><span class="ident" id="1546336">inter</span>&nbsp;<span class="op" id="1546342">*</span><span class="ident" id="1546343">interfacetype</span><span class="op" id="1546356">,</span>&nbsp;<span class="ident" id="1546358">i</span>&nbsp;<span class="ident" id="1546360">fInterface</span><span class="op" id="1546370">)</span>&nbsp;<span class="op" id="1546372">(</span><span class="ident" id="1546373">r</span>&nbsp;<span class="ident" id="1546375">fInterface</span><span class="op" id="1546385">)</span>&nbsp;<span class="op" id="1546387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546390">ip</span>&nbsp;<span class="op" id="1546393">:=</span>&nbsp;<span class="op" id="1546396">(</span><span class="op" id="1546397">*</span><span class="ident" id="1546398">iface</span><span class="op" id="1546403">)</span><span class="op" id="1546404">(</span><span class="ident" id="1546405">unsafe</span><span class="op" id="1546411">.</span><span class="ident" id="1546412">Pointer</span><span class="op" id="1546419">(</span><span class="op" id="1546420">&amp;</span><span class="ident" id="1546421">i</span><span class="op" id="1546422">)</span><span class="op" id="1546423">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546426">tab</span>&nbsp;<span class="op" id="1546430">:=</span>&nbsp;<span class="ident" id="1546433">ip</span><span class="op" id="1546435">.</span><span class="ident" id="1546436">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546441">if</span>&nbsp;<span class="ident" id="1546444">tab</span>&nbsp;<span class="op" id="1546448">==</span>&nbsp;<span class="builtintype" id="1546451">nil</span>&nbsp;<span class="op" id="1546455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546459">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546470">rp</span>&nbsp;<span class="op" id="1546473">:=</span>&nbsp;<span class="op" id="1546476">(</span><span class="op" id="1546477">*</span><span class="ident" id="1546478">iface</span><span class="op" id="1546483">)</span><span class="op" id="1546484">(</span><span class="ident" id="1546485">unsafe</span><span class="op" id="1546491">.</span><span class="ident" id="1546492">Pointer</span><span class="op" id="1546499">(</span><span class="op" id="1546500">&amp;</span><span class="ident" id="1546501">r</span><span class="op" id="1546502">)</span><span class="op" id="1546503">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546506">if</span>&nbsp;<span class="ident" id="1546509">tab</span><span class="op" id="1546512">.</span><span class="ident" id="1546513">inter</span>&nbsp;<span class="op" id="1546519">==</span>&nbsp;<span class="ident" id="1546522">inter</span>&nbsp;<span class="op" id="1546528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546532">rp</span><span class="op" id="1546534">.</span><span class="ident" id="1546535">tab</span>&nbsp;<span class="op" id="1546539">=</span>&nbsp;<span class="ident" id="1546541">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546547">rp</span><span class="op" id="1546549">.</span><span class="ident" id="1546550">data</span>&nbsp;<span class="op" id="1546555">=</span>&nbsp;<span class="ident" id="1546557">ip</span><span class="op" id="1546559">.</span><span class="ident" id="1546560">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546567">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546575">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546578">rp</span><span class="op" id="1546580">.</span><span class="ident" id="1546581">tab</span>&nbsp;<span class="op" id="1546585">=</span>&nbsp;<span class="ident" id="1546587">getitab</span><span class="op" id="1546594">(</span><span class="ident" id="1546595">inter</span><span class="op" id="1546600">,</span>&nbsp;<span class="ident" id="1546602">tab</span><span class="op" id="1546605">.</span><span class="ident" id="1546606">_type</span><span class="op" id="1546611">,</span>&nbsp;<span class="builtintype" id="1546613">false</span><span class="op" id="1546618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546621">rp</span><span class="op" id="1546623">.</span><span class="ident" id="1546624">data</span>&nbsp;<span class="op" id="1546629">=</span>&nbsp;<span class="ident" id="1546631">ip</span><span class="op" id="1546633">.</span><span class="ident" id="1546634">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546640">return</span><br>
<span class="lineno"></span><span class="op" id="1546647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1546650">func</span>&nbsp;<span class="ident" id="1546655">assertI2I</span><span class="op" id="1546664">(</span><span class="ident" id="1546665">inter</span>&nbsp;<span class="op" id="1546671">*</span><span class="ident" id="1546672">interfacetype</span><span class="op" id="1546685">,</span>&nbsp;<span class="ident" id="1546687">i</span>&nbsp;<span class="ident" id="1546689">fInterface</span><span class="op" id="1546699">)</span>&nbsp;<span class="op" id="1546701">(</span><span class="ident" id="1546702">r</span>&nbsp;<span class="ident" id="1546704">fInterface</span><span class="op" id="1546714">)</span>&nbsp;<span class="op" id="1546716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546719">ip</span>&nbsp;<span class="op" id="1546722">:=</span>&nbsp;<span class="op" id="1546725">(</span><span class="op" id="1546726">*</span><span class="ident" id="1546727">iface</span><span class="op" id="1546732">)</span><span class="op" id="1546733">(</span><span class="ident" id="1546734">unsafe</span><span class="op" id="1546740">.</span><span class="ident" id="1546741">Pointer</span><span class="op" id="1546748">(</span><span class="op" id="1546749">&amp;</span><span class="ident" id="1546750">i</span><span class="op" id="1546751">)</span><span class="op" id="1546752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546755">tab</span>&nbsp;<span class="op" id="1546759">:=</span>&nbsp;<span class="ident" id="1546762">ip</span><span class="op" id="1546764">.</span><span class="ident" id="1546765">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546770">if</span>&nbsp;<span class="ident" id="1546773">tab</span>&nbsp;<span class="op" id="1546777">==</span>&nbsp;<span class="builtintype" id="1546780">nil</span>&nbsp;<span class="op" id="1546784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1546788">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1546847">panic</span><span class="op" id="1546852">(</span><span class="op" id="1546853">&amp;</span><span class="ident" id="1546854">TypeAssertionError</span><span class="op" id="1546872">{</span><span class="string" id="1546873">&#34;&#34;</span><span class="op" id="1546875">,</span>&nbsp;<span class="string" id="1546877">&#34;&#34;</span><span class="op" id="1546879">,</span>&nbsp;<span class="op" id="1546881">*</span><span class="ident" id="1546882">inter</span><span class="op" id="1546887">.</span><span class="ident" id="1546888">typ</span><span class="op" id="1546891">.</span><span class="ident" id="1546892">_string</span><span class="op" id="1546899">,</span>&nbsp;<span class="string" id="1546901">&#34;&#34;</span><span class="op" id="1546903">}</span><span class="op" id="1546904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1546907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546910">rp</span>&nbsp;<span class="op" id="1546913">:=</span>&nbsp;<span class="op" id="1546916">(</span><span class="op" id="1546917">*</span><span class="ident" id="1546918">iface</span><span class="op" id="1546923">)</span><span class="op" id="1546924">(</span><span class="ident" id="1546925">unsafe</span><span class="op" id="1546931">.</span><span class="ident" id="1546932">Pointer</span><span class="op" id="1546939">(</span><span class="op" id="1546940">&amp;</span><span class="ident" id="1546941">r</span><span class="op" id="1546942">)</span><span class="op" id="1546943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1546946">if</span>&nbsp;<span class="ident" id="1546949">tab</span><span class="op" id="1546952">.</span><span class="ident" id="1546953">inter</span>&nbsp;<span class="op" id="1546959">==</span>&nbsp;<span class="ident" id="1546962">inter</span>&nbsp;<span class="op" id="1546968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546972">rp</span><span class="op" id="1546974">.</span><span class="ident" id="1546975">tab</span>&nbsp;<span class="op" id="1546979">=</span>&nbsp;<span class="ident" id="1546981">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1546987">rp</span><span class="op" id="1546989">.</span><span class="ident" id="1546990">data</span>&nbsp;<span class="op" id="1546995">=</span>&nbsp;<span class="ident" id="1546997">ip</span><span class="op" id="1546999">.</span><span class="ident" id="1547000">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547007">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547018">rp</span><span class="op" id="1547020">.</span><span class="ident" id="1547021">tab</span>&nbsp;<span class="op" id="1547025">=</span>&nbsp;<span class="ident" id="1547027">getitab</span><span class="op" id="1547034">(</span><span class="ident" id="1547035">inter</span><span class="op" id="1547040">,</span>&nbsp;<span class="ident" id="1547042">tab</span><span class="op" id="1547045">.</span><span class="ident" id="1547046">_type</span><span class="op" id="1547051">,</span>&nbsp;<span class="builtintype" id="1547053">false</span><span class="op" id="1547058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547061">rp</span><span class="op" id="1547063">.</span><span class="ident" id="1547064">data</span>&nbsp;<span class="op" id="1547069">=</span>&nbsp;<span class="ident" id="1547071">ip</span><span class="op" id="1547073">.</span><span class="ident" id="1547074">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547080">return</span><br>
<span class="lineno"></span><span class="op" id="1547087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1547090">func</span>&nbsp;<span class="ident" id="1547095">assertI2I2</span><span class="op" id="1547105">(</span><span class="ident" id="1547106">inter</span>&nbsp;<span class="op" id="1547112">*</span><span class="ident" id="1547113">interfacetype</span><span class="op" id="1547126">,</span>&nbsp;<span class="ident" id="1547128">i</span>&nbsp;<span class="ident" id="1547130">fInterface</span><span class="op" id="1547140">)</span>&nbsp;<span class="op" id="1547142">(</span><span class="ident" id="1547143">r</span>&nbsp;<span class="ident" id="1547145">fInterface</span><span class="op" id="1547155">,</span>&nbsp;<span class="ident" id="1547157">ok</span>&nbsp;<span class="builtintype" id="1547160">bool</span><span class="op" id="1547164">)</span>&nbsp;<span class="op" id="1547166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547169">ip</span>&nbsp;<span class="op" id="1547172">:=</span>&nbsp;<span class="op" id="1547175">(</span><span class="op" id="1547176">*</span><span class="ident" id="1547177">iface</span><span class="op" id="1547182">)</span><span class="op" id="1547183">(</span><span class="ident" id="1547184">unsafe</span><span class="op" id="1547190">.</span><span class="ident" id="1547191">Pointer</span><span class="op" id="1547198">(</span><span class="op" id="1547199">&amp;</span><span class="ident" id="1547200">i</span><span class="op" id="1547201">)</span><span class="op" id="1547202">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547205">tab</span>&nbsp;<span class="op" id="1547209">:=</span>&nbsp;<span class="ident" id="1547212">ip</span><span class="op" id="1547214">.</span><span class="ident" id="1547215">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547220">if</span>&nbsp;<span class="ident" id="1547223">tab</span>&nbsp;<span class="op" id="1547227">==</span>&nbsp;<span class="builtintype" id="1547230">nil</span>&nbsp;<span class="op" id="1547234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547238">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547249">rp</span>&nbsp;<span class="op" id="1547252">:=</span>&nbsp;<span class="op" id="1547255">(</span><span class="op" id="1547256">*</span><span class="ident" id="1547257">iface</span><span class="op" id="1547262">)</span><span class="op" id="1547263">(</span><span class="ident" id="1547264">unsafe</span><span class="op" id="1547270">.</span><span class="ident" id="1547271">Pointer</span><span class="op" id="1547278">(</span><span class="op" id="1547279">&amp;</span><span class="ident" id="1547280">r</span><span class="op" id="1547281">)</span><span class="op" id="1547282">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547285">if</span>&nbsp;<span class="ident" id="1547288">tab</span><span class="op" id="1547291">.</span><span class="ident" id="1547292">inter</span>&nbsp;<span class="op" id="1547298">==</span>&nbsp;<span class="ident" id="1547301">inter</span>&nbsp;<span class="op" id="1547307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547311">rp</span><span class="op" id="1547313">.</span><span class="ident" id="1547314">tab</span>&nbsp;<span class="op" id="1547318">=</span>&nbsp;<span class="ident" id="1547320">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547326">rp</span><span class="op" id="1547328">.</span><span class="ident" id="1547329">data</span>&nbsp;<span class="op" id="1547334">=</span>&nbsp;<span class="ident" id="1547336">ip</span><span class="op" id="1547338">.</span><span class="ident" id="1547339">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547346">ok</span>&nbsp;<span class="op" id="1547349">=</span>&nbsp;<span class="builtintype" id="1547351">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547358">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547369">tab</span>&nbsp;<span class="op" id="1547373">=</span>&nbsp;<span class="ident" id="1547375">getitab</span><span class="op" id="1547382">(</span><span class="ident" id="1547383">inter</span><span class="op" id="1547388">,</span>&nbsp;<span class="ident" id="1547390">tab</span><span class="op" id="1547393">.</span><span class="ident" id="1547394">_type</span><span class="op" id="1547399">,</span>&nbsp;<span class="builtintype" id="1547401">true</span><span class="op" id="1547405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547408">if</span>&nbsp;<span class="ident" id="1547411">tab</span>&nbsp;<span class="op" id="1547415">==</span>&nbsp;<span class="builtintype" id="1547418">nil</span>&nbsp;<span class="op" id="1547422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547426">rp</span><span class="op" id="1547428">.</span><span class="ident" id="1547429">data</span>&nbsp;<span class="op" id="1547434">=</span>&nbsp;<span class="builtintype" id="1547436">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547442">rp</span><span class="op" id="1547444">.</span><span class="ident" id="1547445">tab</span>&nbsp;<span class="op" id="1547449">=</span>&nbsp;<span class="builtintype" id="1547451">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547457">ok</span>&nbsp;<span class="op" id="1547460">=</span>&nbsp;<span class="builtintype" id="1547462">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547470">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547481">rp</span><span class="op" id="1547483">.</span><span class="ident" id="1547484">tab</span>&nbsp;<span class="op" id="1547488">=</span>&nbsp;<span class="ident" id="1547490">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547495">rp</span><span class="op" id="1547497">.</span><span class="ident" id="1547498">data</span>&nbsp;<span class="op" id="1547503">=</span>&nbsp;<span class="ident" id="1547505">ip</span><span class="op" id="1547507">.</span><span class="ident" id="1547508">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547514">ok</span>&nbsp;<span class="op" id="1547517">=</span>&nbsp;<span class="builtintype" id="1547519">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547525">return</span><br>
<span class="lineno"></span><span class="op" id="1547532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1547535">func</span>&nbsp;<span class="ident" id="1547540">assertE2I</span><span class="op" id="1547549">(</span><span class="ident" id="1547550">inter</span>&nbsp;<span class="op" id="1547556">*</span><span class="ident" id="1547557">interfacetype</span><span class="op" id="1547570">,</span>&nbsp;<span class="ident" id="1547572">e</span>&nbsp;<span class="keyword" id="1547574">interface</span><span class="op" id="1547583">{</span><span class="op" id="1547584">}</span><span class="op" id="1547585">)</span>&nbsp;<span class="op" id="1547587">(</span><span class="ident" id="1547588">r</span>&nbsp;<span class="ident" id="1547590">fInterface</span><span class="op" id="1547600">)</span>&nbsp;<span class="op" id="1547602">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547605">ep</span>&nbsp;<span class="op" id="1547608">:=</span>&nbsp;<span class="op" id="1547611">(</span><span class="op" id="1547612">*</span><span class="ident" id="1547613">eface</span><span class="op" id="1547618">)</span><span class="op" id="1547619">(</span><span class="ident" id="1547620">unsafe</span><span class="op" id="1547626">.</span><span class="ident" id="1547627">Pointer</span><span class="op" id="1547634">(</span><span class="op" id="1547635">&amp;</span><span class="ident" id="1547636">e</span><span class="op" id="1547637">)</span><span class="op" id="1547638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547641">t</span>&nbsp;<span class="op" id="1547643">:=</span>&nbsp;<span class="ident" id="1547646">ep</span><span class="op" id="1547648">.</span><span class="ident" id="1547649">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547656">if</span>&nbsp;<span class="ident" id="1547659">t</span>&nbsp;<span class="op" id="1547661">==</span>&nbsp;<span class="builtintype" id="1547664">nil</span>&nbsp;<span class="op" id="1547668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1547672">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1547731">panic</span><span class="op" id="1547736">(</span><span class="op" id="1547737">&amp;</span><span class="ident" id="1547738">TypeAssertionError</span><span class="op" id="1547756">{</span><span class="string" id="1547757">&#34;&#34;</span><span class="op" id="1547759">,</span>&nbsp;<span class="string" id="1547761">&#34;&#34;</span><span class="op" id="1547763">,</span>&nbsp;<span class="op" id="1547765">*</span><span class="ident" id="1547766">inter</span><span class="op" id="1547771">.</span><span class="ident" id="1547772">typ</span><span class="op" id="1547775">.</span><span class="ident" id="1547776">_string</span><span class="op" id="1547783">,</span>&nbsp;<span class="string" id="1547785">&#34;&#34;</span><span class="op" id="1547787">}</span><span class="op" id="1547788">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1547791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547794">rp</span>&nbsp;<span class="op" id="1547797">:=</span>&nbsp;<span class="op" id="1547800">(</span><span class="op" id="1547801">*</span><span class="ident" id="1547802">iface</span><span class="op" id="1547807">)</span><span class="op" id="1547808">(</span><span class="ident" id="1547809">unsafe</span><span class="op" id="1547815">.</span><span class="ident" id="1547816">Pointer</span><span class="op" id="1547823">(</span><span class="op" id="1547824">&amp;</span><span class="ident" id="1547825">r</span><span class="op" id="1547826">)</span><span class="op" id="1547827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547830">rp</span><span class="op" id="1547832">.</span><span class="ident" id="1547833">tab</span>&nbsp;<span class="op" id="1547837">=</span>&nbsp;<span class="ident" id="1547839">getitab</span><span class="op" id="1547846">(</span><span class="ident" id="1547847">inter</span><span class="op" id="1547852">,</span>&nbsp;<span class="ident" id="1547854">t</span><span class="op" id="1547855">,</span>&nbsp;<span class="builtintype" id="1547857">false</span><span class="op" id="1547862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547865">rp</span><span class="op" id="1547867">.</span><span class="ident" id="1547868">data</span>&nbsp;<span class="op" id="1547873">=</span>&nbsp;<span class="ident" id="1547875">ep</span><span class="op" id="1547877">.</span><span class="ident" id="1547878">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1547884">return</span><br>
<span class="lineno">370</span><span class="op" id="1547891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1547894">func</span>&nbsp;<span class="ident" id="1547899">assertE2I2</span><span class="op" id="1547909">(</span><span class="ident" id="1547910">inter</span>&nbsp;<span class="op" id="1547916">*</span><span class="ident" id="1547917">interfacetype</span><span class="op" id="1547930">,</span>&nbsp;<span class="ident" id="1547932">e</span>&nbsp;<span class="keyword" id="1547934">interface</span><span class="op" id="1547943">{</span><span class="op" id="1547944">}</span><span class="op" id="1547945">)</span>&nbsp;<span class="op" id="1547947">(</span><span class="ident" id="1547948">r</span>&nbsp;<span class="ident" id="1547950">fInterface</span><span class="op" id="1547960">,</span>&nbsp;<span class="ident" id="1547962">ok</span>&nbsp;<span class="builtintype" id="1547965">bool</span><span class="op" id="1547969">)</span>&nbsp;<span class="op" id="1547971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1547974">ep</span>&nbsp;<span class="op" id="1547977">:=</span>&nbsp;<span class="op" id="1547980">(</span><span class="op" id="1547981">*</span><span class="ident" id="1547982">eface</span><span class="op" id="1547987">)</span><span class="op" id="1547988">(</span><span class="ident" id="1547989">unsafe</span><span class="op" id="1547995">.</span><span class="ident" id="1547996">Pointer</span><span class="op" id="1548003">(</span><span class="op" id="1548004">&amp;</span><span class="ident" id="1548005">e</span><span class="op" id="1548006">)</span><span class="op" id="1548007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548010">t</span>&nbsp;<span class="op" id="1548012">:=</span>&nbsp;<span class="ident" id="1548015">ep</span><span class="op" id="1548017">.</span><span class="ident" id="1548018">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548025">if</span>&nbsp;<span class="ident" id="1548028">t</span>&nbsp;<span class="op" id="1548030">==</span>&nbsp;<span class="builtintype" id="1548033">nil</span>&nbsp;<span class="op" id="1548037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548041">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548052">tab</span>&nbsp;<span class="op" id="1548056">:=</span>&nbsp;<span class="ident" id="1548059">getitab</span><span class="op" id="1548066">(</span><span class="ident" id="1548067">inter</span><span class="op" id="1548072">,</span>&nbsp;<span class="ident" id="1548074">t</span><span class="op" id="1548075">,</span>&nbsp;<span class="builtintype" id="1548077">true</span><span class="op" id="1548081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548084">if</span>&nbsp;<span class="ident" id="1548087">tab</span>&nbsp;<span class="op" id="1548091">==</span>&nbsp;<span class="builtintype" id="1548094">nil</span>&nbsp;<span class="op" id="1548098">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548102">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548113">rp</span>&nbsp;<span class="op" id="1548116">:=</span>&nbsp;<span class="op" id="1548119">(</span><span class="op" id="1548120">*</span><span class="ident" id="1548121">iface</span><span class="op" id="1548126">)</span><span class="op" id="1548127">(</span><span class="ident" id="1548128">unsafe</span><span class="op" id="1548134">.</span><span class="ident" id="1548135">Pointer</span><span class="op" id="1548142">(</span><span class="op" id="1548143">&amp;</span><span class="ident" id="1548144">r</span><span class="op" id="1548145">)</span><span class="op" id="1548146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548149">rp</span><span class="op" id="1548151">.</span><span class="ident" id="1548152">tab</span>&nbsp;<span class="op" id="1548156">=</span>&nbsp;<span class="ident" id="1548158">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548163">rp</span><span class="op" id="1548165">.</span><span class="ident" id="1548166">data</span>&nbsp;<span class="op" id="1548171">=</span>&nbsp;<span class="ident" id="1548173">ep</span><span class="op" id="1548175">.</span><span class="ident" id="1548176">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548182">ok</span>&nbsp;<span class="op" id="1548185">=</span>&nbsp;<span class="builtintype" id="1548187">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548193">return</span><br>
<span class="lineno"></span><span class="op" id="1548200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1548203">func</span>&nbsp;<span class="ident" id="1548208">reflect_ifaceE2I</span><span class="op" id="1548224">(</span><span class="ident" id="1548225">inter</span>&nbsp;<span class="op" id="1548231">*</span><span class="ident" id="1548232">interfacetype</span><span class="op" id="1548245">,</span>&nbsp;<span class="ident" id="1548247">e</span>&nbsp;<span class="keyword" id="1548249">interface</span><span class="op" id="1548258">{</span><span class="op" id="1548259">}</span><span class="op" id="1548260">,</span>&nbsp;<span class="ident" id="1548262">dst</span>&nbsp;<span class="op" id="1548266">*</span><span class="ident" id="1548267">fInterface</span><span class="op" id="1548277">)</span>&nbsp;<span class="op" id="1548279">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548282">*</span><span class="ident" id="1548283">dst</span>&nbsp;<span class="op" id="1548287">=</span>&nbsp;<span class="ident" id="1548289">assertE2I</span><span class="op" id="1548298">(</span><span class="ident" id="1548299">inter</span><span class="op" id="1548304">,</span>&nbsp;<span class="ident" id="1548306">e</span><span class="op" id="1548307">)</span><br>
<span class="lineno"></span><span class="op" id="1548309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1548312">func</span>&nbsp;<span class="ident" id="1548317">assertE2E</span><span class="op" id="1548326">(</span><span class="ident" id="1548327">inter</span>&nbsp;<span class="op" id="1548333">*</span><span class="ident" id="1548334">interfacetype</span><span class="op" id="1548347">,</span>&nbsp;<span class="ident" id="1548349">e</span>&nbsp;<span class="keyword" id="1548351">interface</span><span class="op" id="1548360">{</span><span class="op" id="1548361">}</span><span class="op" id="1548362">)</span>&nbsp;<span class="keyword" id="1548364">interface</span><span class="op" id="1548373">{</span><span class="op" id="1548374">}</span>&nbsp;<span class="op" id="1548376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548379">ep</span>&nbsp;<span class="op" id="1548382">:=</span>&nbsp;<span class="op" id="1548385">(</span><span class="op" id="1548386">*</span><span class="ident" id="1548387">eface</span><span class="op" id="1548392">)</span><span class="op" id="1548393">(</span><span class="ident" id="1548394">unsafe</span><span class="op" id="1548400">.</span><span class="ident" id="1548401">Pointer</span><span class="op" id="1548408">(</span><span class="op" id="1548409">&amp;</span><span class="ident" id="1548410">e</span><span class="op" id="1548411">)</span><span class="op" id="1548412">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548415">if</span>&nbsp;<span class="ident" id="1548418">ep</span><span class="op" id="1548420">.</span><span class="ident" id="1548421">_type</span>&nbsp;<span class="op" id="1548427">==</span>&nbsp;<span class="builtintype" id="1548430">nil</span>&nbsp;<span class="op" id="1548434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1548438">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1548497">panic</span><span class="op" id="1548502">(</span><span class="op" id="1548503">&amp;</span><span class="ident" id="1548504">TypeAssertionError</span><span class="op" id="1548522">{</span><span class="string" id="1548523">&#34;&#34;</span><span class="op" id="1548525">,</span>&nbsp;<span class="string" id="1548527">&#34;&#34;</span><span class="op" id="1548529">,</span>&nbsp;<span class="op" id="1548531">*</span><span class="ident" id="1548532">inter</span><span class="op" id="1548537">.</span><span class="ident" id="1548538">typ</span><span class="op" id="1548541">.</span><span class="ident" id="1548542">_string</span><span class="op" id="1548549">,</span>&nbsp;<span class="string" id="1548551">&#34;&#34;</span><span class="op" id="1548553">}</span><span class="op" id="1548554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548560">return</span>&nbsp;<span class="ident" id="1548567">e</span><br>
<span class="lineno">400</span><span class="op" id="1548569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1548572">func</span>&nbsp;<span class="ident" id="1548577">assertE2E2</span><span class="op" id="1548587">(</span><span class="ident" id="1548588">inter</span>&nbsp;<span class="op" id="1548594">*</span><span class="ident" id="1548595">interfacetype</span><span class="op" id="1548608">,</span>&nbsp;<span class="ident" id="1548610">e</span>&nbsp;<span class="keyword" id="1548612">interface</span><span class="op" id="1548621">{</span><span class="op" id="1548622">}</span><span class="op" id="1548623">)</span>&nbsp;<span class="op" id="1548625">(</span><span class="keyword" id="1548626">interface</span><span class="op" id="1548635">{</span><span class="op" id="1548636">}</span><span class="op" id="1548637">,</span>&nbsp;<span class="builtintype" id="1548639">bool</span><span class="op" id="1548643">)</span>&nbsp;<span class="op" id="1548645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548648">ep</span>&nbsp;<span class="op" id="1548651">:=</span>&nbsp;<span class="op" id="1548654">(</span><span class="op" id="1548655">*</span><span class="ident" id="1548656">eface</span><span class="op" id="1548661">)</span><span class="op" id="1548662">(</span><span class="ident" id="1548663">unsafe</span><span class="op" id="1548669">.</span><span class="ident" id="1548670">Pointer</span><span class="op" id="1548677">(</span><span class="op" id="1548678">&amp;</span><span class="ident" id="1548679">e</span><span class="op" id="1548680">)</span><span class="op" id="1548681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548684">if</span>&nbsp;<span class="ident" id="1548687">ep</span><span class="op" id="1548689">.</span><span class="ident" id="1548690">_type</span>&nbsp;<span class="op" id="1548696">==</span>&nbsp;<span class="builtintype" id="1548699">nil</span>&nbsp;<span class="op" id="1548703">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548707">return</span>&nbsp;<span class="builtintype" id="1548714">nil</span><span class="op" id="1548717">,</span>&nbsp;<span class="builtintype" id="1548719">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548729">return</span>&nbsp;<span class="ident" id="1548736">e</span><span class="op" id="1548737">,</span>&nbsp;<span class="builtintype" id="1548739">true</span><br>
<span class="lineno"></span><span class="op" id="1548744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1548747">func</span>&nbsp;<span class="ident" id="1548752">ifacethash</span><span class="op" id="1548762">(</span><span class="ident" id="1548763">i</span>&nbsp;<span class="ident" id="1548765">fInterface</span><span class="op" id="1548775">)</span>&nbsp;<span class="builtintype" id="1548777">uint32</span>&nbsp;<span class="op" id="1548784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548787">ip</span>&nbsp;<span class="op" id="1548790">:=</span>&nbsp;<span class="op" id="1548793">(</span><span class="op" id="1548794">*</span><span class="ident" id="1548795">iface</span><span class="op" id="1548800">)</span><span class="op" id="1548801">(</span><span class="ident" id="1548802">unsafe</span><span class="op" id="1548808">.</span><span class="ident" id="1548809">Pointer</span><span class="op" id="1548816">(</span><span class="op" id="1548817">&amp;</span><span class="ident" id="1548818">i</span><span class="op" id="1548819">)</span><span class="op" id="1548820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548823">tab</span>&nbsp;<span class="op" id="1548827">:=</span>&nbsp;<span class="ident" id="1548830">ip</span><span class="op" id="1548832">.</span><span class="ident" id="1548833">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548838">if</span>&nbsp;<span class="ident" id="1548841">tab</span>&nbsp;<span class="op" id="1548845">==</span>&nbsp;<span class="builtintype" id="1548848">nil</span>&nbsp;<span class="op" id="1548852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548856">return</span>&nbsp;<span class="num" id="1548863">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1548866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548869">return</span>&nbsp;<span class="ident" id="1548876">tab</span><span class="op" id="1548879">.</span><span class="ident" id="1548880">_type</span><span class="op" id="1548885">.</span><span class="ident" id="1548886">hash</span><br>
<span class="lineno"></span><span class="op" id="1548891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1548894">func</span>&nbsp;<span class="ident" id="1548899">efacethash</span><span class="op" id="1548909">(</span><span class="ident" id="1548910">e</span>&nbsp;<span class="keyword" id="1548912">interface</span><span class="op" id="1548921">{</span><span class="op" id="1548922">}</span><span class="op" id="1548923">)</span>&nbsp;<span class="builtintype" id="1548925">uint32</span>&nbsp;<span class="op" id="1548932">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548935">ep</span>&nbsp;<span class="op" id="1548938">:=</span>&nbsp;<span class="op" id="1548941">(</span><span class="op" id="1548942">*</span><span class="ident" id="1548943">eface</span><span class="op" id="1548948">)</span><span class="op" id="1548949">(</span><span class="ident" id="1548950">unsafe</span><span class="op" id="1548956">.</span><span class="ident" id="1548957">Pointer</span><span class="op" id="1548964">(</span><span class="op" id="1548965">&amp;</span><span class="ident" id="1548966">e</span><span class="op" id="1548967">)</span><span class="op" id="1548968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1548971">t</span>&nbsp;<span class="op" id="1548973">:=</span>&nbsp;<span class="ident" id="1548976">ep</span><span class="op" id="1548978">.</span><span class="ident" id="1548979">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1548986">if</span>&nbsp;<span class="ident" id="1548989">t</span>&nbsp;<span class="op" id="1548991">==</span>&nbsp;<span class="builtintype" id="1548994">nil</span>&nbsp;<span class="op" id="1548998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549002">return</span>&nbsp;<span class="num" id="1549009">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549012">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549015">return</span>&nbsp;<span class="ident" id="1549022">t</span><span class="op" id="1549023">.</span><span class="ident" id="1549024">hash</span><br>
<span class="lineno"></span><span class="op" id="1549029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1549032">func</span>&nbsp;<span class="ident" id="1549037">iterate_itabs</span><span class="op" id="1549050">(</span><span class="ident" id="1549051">fn</span>&nbsp;<span class="keyword" id="1549054">func</span><span class="op" id="1549058">(</span><span class="op" id="1549059">*</span><span class="ident" id="1549060">itab</span><span class="op" id="1549064">)</span><span class="op" id="1549065">)</span>&nbsp;<span class="op" id="1549067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549070">for</span>&nbsp;<span class="ident" id="1549074">_</span><span class="op" id="1549075">,</span>&nbsp;<span class="ident" id="1549077">h</span>&nbsp;<span class="op" id="1549079">:=</span>&nbsp;<span class="keyword" id="1549082">range</span>&nbsp;<span class="op" id="1549088">&amp;</span><span class="ident" id="1549089">hash</span>&nbsp;<span class="op" id="1549094">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549098">for</span>&nbsp;<span class="op" id="1549102">;</span>&nbsp;<span class="ident" id="1549104">h</span>&nbsp;<span class="op" id="1549106">!=</span>&nbsp;<span class="builtintype" id="1549109">nil</span><span class="op" id="1549112">;</span>&nbsp;<span class="ident" id="1549114">h</span>&nbsp;<span class="op" id="1549116">=</span>&nbsp;<span class="ident" id="1549118">h</span><span class="op" id="1549119">.</span><span class="ident" id="1549120">link</span>&nbsp;<span class="op" id="1549125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1549130">fn</span><span class="op" id="1549132">(</span><span class="ident" id="1549133">h</span><span class="op" id="1549134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549141">}</span><br>
<span class="lineno"></span><span class="op" id="1549143">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1549146">func</span>&nbsp;<span class="ident" id="1549151">ifaceE2I2</span><span class="op" id="1549160">(</span><span class="ident" id="1549161">inter</span>&nbsp;<span class="op" id="1549167">*</span><span class="ident" id="1549168">interfacetype</span><span class="op" id="1549181">,</span>&nbsp;<span class="ident" id="1549183">e</span>&nbsp;<span class="keyword" id="1549185">interface</span><span class="op" id="1549194">{</span><span class="op" id="1549195">}</span><span class="op" id="1549196">,</span>&nbsp;<span class="ident" id="1549198">r</span>&nbsp;<span class="op" id="1549200">*</span><span class="ident" id="1549201">fInterface</span><span class="op" id="1549211">)</span>&nbsp;<span class="op" id="1549213">(</span><span class="ident" id="1549214">ok</span>&nbsp;<span class="builtintype" id="1549217">bool</span><span class="op" id="1549221">)</span>&nbsp;<span class="op" id="1549223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1549226">*</span><span class="ident" id="1549227">r</span><span class="op" id="1549228">,</span>&nbsp;<span class="ident" id="1549230">ok</span>&nbsp;<span class="op" id="1549233">=</span>&nbsp;<span class="ident" id="1549235">assertE2I2</span><span class="op" id="1549245">(</span><span class="ident" id="1549246">inter</span><span class="op" id="1549251">,</span>&nbsp;<span class="ident" id="1549253">e</span><span class="op" id="1549254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1549257">return</span><br>
<span class="lineno"></span><span class="op" id="1549264">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
