<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1501674">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1501730">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1501784">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1501835">package</span>&nbsp;<span class="ident" id="1501843">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1501848">import</span>&nbsp;<span class="op" id="1501855">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1501858">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1501864">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="1501874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1501877">func</span>&nbsp;<span class="ident" id="1501882">setIPv4MulticastInterface</span><span class="op" id="1501907">(</span><span class="ident" id="1501908">fd</span>&nbsp;<span class="op" id="1501911">*</span><span class="ident" id="1501912"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1501917">,</span>&nbsp;<span class="ident" id="1501919">ifi</span>&nbsp;<span class="op" id="1501923">*</span><span class="ident" id="1501924"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1501933">)</span>&nbsp;<span class="builtintype" id="1501935">error</span>&nbsp;<span class="op" id="1501941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501944">var</span>&nbsp;<span class="ident" id="1501948">v</span>&nbsp;<span class="builtintype" id="1501950">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1501957">if</span>&nbsp;<span class="ident" id="1501960"><a href="/net/sockoptip_linux.go.html#1501919">ifi</a></span>&nbsp;<span class="op" id="1501964">!=</span>&nbsp;<span class="ident" id="1501967">nil</span>&nbsp;<span class="op" id="1501971">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1501975"><a href="/net/sockoptip_linux.go.html#1501948">v</a></span>&nbsp;<span class="op" id="1501977">=</span>&nbsp;<span class="builtintype" id="1501979">int32</span><span class="op" id="1501984">(</span><span class="ident" id="1501985"><a href="/net/sockoptip_linux.go.html#1501919">ifi</a></span><span class="op" id="1501988">.</span><span class="ident" id="1501989">Index</span><span class="op" id="1501994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1501997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1502000">mreq</span>&nbsp;<span class="op" id="1502005">:=</span>&nbsp;<span class="op" id="1502008">&amp;</span><span class="ident" id="1502009"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502016">.</span><span class="ident" id="1502017">IPMreqn</span><span class="op" id="1502024">{</span><span class="ident" id="1502025">Ifindex</span><span class="op" id="1502032">:</span>&nbsp;<span class="ident" id="1502034"><a href="/net/sockoptip_linux.go.html#1501948">v</a></span><span class="op" id="1502035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502038">if</span>&nbsp;<span class="ident" id="1502041">err</span>&nbsp;<span class="op" id="1502045">:=</span>&nbsp;<span class="ident" id="1502048"><a href="/net/sockoptip_linux.go.html#1501908">fd</a></span><span class="op" id="1502050">.</span><span class="ident" id="1502051">incref</span><span class="op" id="1502057">(</span><span class="op" id="1502058">)</span><span class="op" id="1502059">;</span>&nbsp;<span class="ident" id="1502061"><a href="/net/sockoptip_linux.go.html#1502041">err</a></span>&nbsp;<span class="op" id="1502065">!=</span>&nbsp;<span class="ident" id="1502068">nil</span>&nbsp;<span class="op" id="1502072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502076">return</span>&nbsp;<span class="ident" id="1502083"><a href="/net/sockoptip_linux.go.html#1502041">err</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502091">defer</span>&nbsp;<span class="ident" id="1502097"><a href="/net/sockoptip_linux.go.html#1501908">fd</a></span><span class="op" id="1502099">.</span><span class="ident" id="1502100">decref</span><span class="op" id="1502106">(</span><span class="op" id="1502107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502110">return</span>&nbsp;<span class="ident" id="1502117"><a href="/net/sockoptip_linux.go.html#1501858">os</a></span><span class="op" id="1502119">.</span><span class="ident" id="1502120">NewSyscallError</span><span class="op" id="1502135">(</span><span class="string" id="1502136">&#34;setsockopt&#34;</span><span class="op" id="1502148">,</span>&nbsp;<span class="ident" id="1502150"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502157">.</span><span class="ident" id="1502158">SetsockoptIPMreqn</span><span class="op" id="1502175">(</span><span class="ident" id="1502176"><a href="/net/sockoptip_linux.go.html#1501908">fd</a></span><span class="op" id="1502178">.</span><span class="ident" id="1502179">sysfd</span><span class="op" id="1502184">,</span>&nbsp;<span class="ident" id="1502186"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502193">.</span><span class="ident" id="1502194">IPPROTO_IP</span><span class="op" id="1502204">,</span>&nbsp;<span class="ident" id="1502206"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502213">.</span><span class="ident" id="1502214">IP_MULTICAST_IF</span><span class="op" id="1502229">,</span>&nbsp;<span class="ident" id="1502231"><a href="/net/sockoptip_linux.go.html#1502000">mreq</a></span><span class="op" id="1502235">)</span><span class="op" id="1502236">)</span><br>
<span class="lineno"></span><span class="op" id="1502238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="1502241">func</span>&nbsp;<span class="ident" id="1502246">setIPv4MulticastLoopback</span><span class="op" id="1502270">(</span><span class="ident" id="1502271">fd</span>&nbsp;<span class="op" id="1502274">*</span><span class="ident" id="1502275"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1502280">,</span>&nbsp;<span class="ident" id="1502282">v</span>&nbsp;<span class="builtintype" id="1502284">bool</span><span class="op" id="1502288">)</span>&nbsp;<span class="builtintype" id="1502290">error</span>&nbsp;<span class="op" id="1502296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502299">if</span>&nbsp;<span class="ident" id="1502302">err</span>&nbsp;<span class="op" id="1502306">:=</span>&nbsp;<span class="ident" id="1502309"><a href="/net/sockoptip_linux.go.html#1502271">fd</a></span><span class="op" id="1502311">.</span><span class="ident" id="1502312">incref</span><span class="op" id="1502318">(</span><span class="op" id="1502319">)</span><span class="op" id="1502320">;</span>&nbsp;<span class="ident" id="1502322"><a href="/net/sockoptip_linux.go.html#1502302">err</a></span>&nbsp;<span class="op" id="1502326">!=</span>&nbsp;<span class="ident" id="1502329">nil</span>&nbsp;<span class="op" id="1502333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502337">return</span>&nbsp;<span class="ident" id="1502344"><a href="/net/sockoptip_linux.go.html#1502302">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1502349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502352">defer</span>&nbsp;<span class="ident" id="1502358"><a href="/net/sockoptip_linux.go.html#1502271">fd</a></span><span class="op" id="1502360">.</span><span class="ident" id="1502361">decref</span><span class="op" id="1502367">(</span><span class="op" id="1502368">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1502371">return</span>&nbsp;<span class="ident" id="1502378"><a href="/net/sockoptip_linux.go.html#1501858">os</a></span><span class="op" id="1502380">.</span><span class="ident" id="1502381">NewSyscallError</span><span class="op" id="1502396">(</span><span class="string" id="1502397">&#34;setsockopt&#34;</span><span class="op" id="1502409">,</span>&nbsp;<span class="ident" id="1502411"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502418">.</span><span class="ident" id="1502419">SetsockoptInt</span><span class="op" id="1502432">(</span><span class="ident" id="1502433"><a href="/net/sockoptip_linux.go.html#1502271">fd</a></span><span class="op" id="1502435">.</span><span class="ident" id="1502436">sysfd</span><span class="op" id="1502441">,</span>&nbsp;<span class="ident" id="1502443"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502450">.</span><span class="ident" id="1502451">IPPROTO_IP</span><span class="op" id="1502461">,</span>&nbsp;<span class="ident" id="1502463"><a href="/net/sockoptip_linux.go.html#1501864">syscall</a></span><span class="op" id="1502470">.</span><span class="ident" id="1502471">IP_MULTICAST_LOOP</span><span class="op" id="1502488">,</span>&nbsp;<span class="ident" id="1502490"><a href="/net/sockopt_posix.go.html#1499075">boolint</a></span><span class="op" id="1502497">(</span><span class="ident" id="1502498"><a href="/net/sockoptip_linux.go.html#1502282">v</a></span><span class="op" id="1502499">)</span><span class="op" id="1502500">)</span><span class="op" id="1502501">)</span><br>
<span class="lineno"></span><span class="op" id="1502503">}</span>
</div>
</body>
</html>
