<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html" class="current">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3251072">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3251127">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3251181">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3251232">package</span>&nbsp;<span class="ident" id="3251240">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3251250">import</span>&nbsp;<span class="op" id="3251257">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251260">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251269">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251276">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251282">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251293">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251304">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251312">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3251323">&#34;text/template/parse&#34;</span><br>
<span class="lineno"></span><span class="op" id="3251345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3251348">//&nbsp;state&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;an&nbsp;execution.&nbsp;It&#39;s&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3251416">//&nbsp;template&nbsp;so&nbsp;that&nbsp;multiple&nbsp;executions&nbsp;of&nbsp;the&nbsp;same&nbsp;template</span><br>
<span class="lineno">20</span><span class="comment" id="3251477">//&nbsp;can&nbsp;execute&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="3251505">type</span>&nbsp;<span class="ident" id="3251510">state</span>&nbsp;<span class="keyword" id="3251516">struct</span>&nbsp;<span class="op" id="3251523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251526">tmpl</span>&nbsp;<span class="op" id="3251531">*</span><span class="ident" id="3251532">Template</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251542">wr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3251547">io</span><span class="op" id="3251549">.</span><span class="ident" id="3251550">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251558">node</span>&nbsp;<span class="ident" id="3251563">parse</span><span class="op" id="3251568">.</span><span class="ident" id="3251569">Node</span>&nbsp;<span class="comment" id="3251574">//&nbsp;current&nbsp;node,&nbsp;for&nbsp;errors</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251603">vars</span>&nbsp;<span class="op" id="3251608">[</span><span class="op" id="3251609">]</span><span class="ident" id="3251610">variable</span>&nbsp;<span class="comment" id="3251619">//&nbsp;push-down&nbsp;stack&nbsp;of&nbsp;variable&nbsp;values.</span><br>
<span class="lineno"></span><span class="op" id="3251658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3251661">//&nbsp;variable&nbsp;holds&nbsp;the&nbsp;dynamic&nbsp;value&nbsp;of&nbsp;a&nbsp;variable&nbsp;such&nbsp;as&nbsp;$,&nbsp;$x&nbsp;etc.</span><br>
<span class="lineno"></span><span class="keyword" id="3251730">type</span>&nbsp;<span class="ident" id="3251735">variable</span>&nbsp;<span class="keyword" id="3251744">struct</span>&nbsp;<span class="op" id="3251751">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251754">name</span>&nbsp;&nbsp;<span class="builtintype" id="3251760">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251768">value</span>&nbsp;<span class="ident" id="3251774">reflect</span><span class="op" id="3251781">.</span><span class="ident" id="3251782">Value</span><br>
<span class="lineno"></span><span class="op" id="3251788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3251791">//&nbsp;push&nbsp;pushes&nbsp;a&nbsp;new&nbsp;variable&nbsp;on&nbsp;the&nbsp;stack.</span><br>
<span class="lineno">35</span><span class="keyword" id="3251835">func</span>&nbsp;<span class="op" id="3251840">(</span><span class="ident" id="3251841">s</span>&nbsp;<span class="op" id="3251843">*</span><span class="ident" id="3251844">state</span><span class="op" id="3251849">)</span>&nbsp;<span class="ident" id="3251851">push</span><span class="op" id="3251855">(</span><span class="ident" id="3251856">name</span>&nbsp;<span class="builtintype" id="3251861">string</span><span class="op" id="3251867">,</span>&nbsp;<span class="ident" id="3251869">value</span>&nbsp;<span class="ident" id="3251875">reflect</span><span class="op" id="3251882">.</span><span class="ident" id="3251883">Value</span><span class="op" id="3251888">)</span>&nbsp;<span class="op" id="3251890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3251893">s</span><span class="op" id="3251894">.</span><span class="ident" id="3251895">vars</span>&nbsp;<span class="op" id="3251900">=</span>&nbsp;<span class="builtinfunc" id="3251902">append</span><span class="op" id="3251908">(</span><span class="ident" id="3251909">s</span><span class="op" id="3251910">.</span><span class="ident" id="3251911">vars</span><span class="op" id="3251915">,</span>&nbsp;<span class="ident" id="3251917">variable</span><span class="op" id="3251925">{</span><span class="ident" id="3251926">name</span><span class="op" id="3251930">,</span>&nbsp;<span class="ident" id="3251932">value</span><span class="op" id="3251937">}</span><span class="op" id="3251938">)</span><br>
<span class="lineno"></span><span class="op" id="3251940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3251943">//&nbsp;mark&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;variable&nbsp;stack.</span><br>
<span class="lineno">40</span><span class="keyword" id="3251993">func</span>&nbsp;<span class="op" id="3251998">(</span><span class="ident" id="3251999">s</span>&nbsp;<span class="op" id="3252001">*</span><span class="ident" id="3252002">state</span><span class="op" id="3252007">)</span>&nbsp;<span class="ident" id="3252009">mark</span><span class="op" id="3252013">(</span><span class="op" id="3252014">)</span>&nbsp;<span class="builtintype" id="3252016">int</span>&nbsp;<span class="op" id="3252020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252023">return</span>&nbsp;<span class="builtinfunc" id="3252030">len</span><span class="op" id="3252033">(</span><span class="ident" id="3252034">s</span><span class="op" id="3252035">.</span><span class="ident" id="3252036">vars</span><span class="op" id="3252040">)</span><br>
<span class="lineno"></span><span class="op" id="3252042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252045">//&nbsp;pop&nbsp;pops&nbsp;the&nbsp;variable&nbsp;stack&nbsp;up&nbsp;to&nbsp;the&nbsp;mark.</span><br>
<span class="lineno">45</span><span class="keyword" id="3252092">func</span>&nbsp;<span class="op" id="3252097">(</span><span class="ident" id="3252098">s</span>&nbsp;<span class="op" id="3252100">*</span><span class="ident" id="3252101">state</span><span class="op" id="3252106">)</span>&nbsp;<span class="ident" id="3252108">pop</span><span class="op" id="3252111">(</span><span class="ident" id="3252112">mark</span>&nbsp;<span class="builtintype" id="3252117">int</span><span class="op" id="3252120">)</span>&nbsp;<span class="op" id="3252122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3252125">s</span><span class="op" id="3252126">.</span><span class="ident" id="3252127">vars</span>&nbsp;<span class="op" id="3252132">=</span>&nbsp;<span class="ident" id="3252134">s</span><span class="op" id="3252135">.</span><span class="ident" id="3252136">vars</span><span class="op" id="3252140">[</span><span class="num" id="3252141">0</span><span class="op" id="3252142">:</span><span class="ident" id="3252143">mark</span><span class="op" id="3252147">]</span><br>
<span class="lineno"></span><span class="op" id="3252149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252152">//&nbsp;setVar&nbsp;overwrites&nbsp;the&nbsp;top-nth&nbsp;variable&nbsp;on&nbsp;the&nbsp;stack.&nbsp;Used&nbsp;by&nbsp;range&nbsp;iterations.</span><br>
<span class="lineno">50</span><span class="keyword" id="3252234">func</span>&nbsp;<span class="op" id="3252239">(</span><span class="ident" id="3252240">s</span>&nbsp;<span class="op" id="3252242">*</span><span class="ident" id="3252243">state</span><span class="op" id="3252248">)</span>&nbsp;<span class="ident" id="3252250">setVar</span><span class="op" id="3252256">(</span><span class="ident" id="3252257">n</span>&nbsp;<span class="builtintype" id="3252259">int</span><span class="op" id="3252262">,</span>&nbsp;<span class="ident" id="3252264">value</span>&nbsp;<span class="ident" id="3252270">reflect</span><span class="op" id="3252277">.</span><span class="ident" id="3252278">Value</span><span class="op" id="3252283">)</span>&nbsp;<span class="op" id="3252285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3252288">s</span><span class="op" id="3252289">.</span><span class="ident" id="3252290">vars</span><span class="op" id="3252294">[</span><span class="builtinfunc" id="3252295">len</span><span class="op" id="3252298">(</span><span class="ident" id="3252299">s</span><span class="op" id="3252300">.</span><span class="ident" id="3252301">vars</span><span class="op" id="3252305">)</span><span class="op" id="3252306">-</span><span class="ident" id="3252307">n</span><span class="op" id="3252308">]</span><span class="op" id="3252309">.</span><span class="ident" id="3252310">value</span>&nbsp;<span class="op" id="3252316">=</span>&nbsp;<span class="ident" id="3252318">value</span><br>
<span class="lineno"></span><span class="op" id="3252324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252327">//&nbsp;varValue&nbsp;returns&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;named&nbsp;variable.</span><br>
<span class="lineno">55</span><span class="keyword" id="3252380">func</span>&nbsp;<span class="op" id="3252385">(</span><span class="ident" id="3252386">s</span>&nbsp;<span class="op" id="3252388">*</span><span class="ident" id="3252389">state</span><span class="op" id="3252394">)</span>&nbsp;<span class="ident" id="3252396">varValue</span><span class="op" id="3252404">(</span><span class="ident" id="3252405">name</span>&nbsp;<span class="builtintype" id="3252410">string</span><span class="op" id="3252416">)</span>&nbsp;<span class="ident" id="3252418">reflect</span><span class="op" id="3252425">.</span><span class="ident" id="3252426">Value</span>&nbsp;<span class="op" id="3252432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252435">for</span>&nbsp;<span class="ident" id="3252439">i</span>&nbsp;<span class="op" id="3252441">:=</span>&nbsp;<span class="ident" id="3252444">s</span><span class="op" id="3252445">.</span><span class="ident" id="3252446">mark</span><span class="op" id="3252450">(</span><span class="op" id="3252451">)</span>&nbsp;<span class="op" id="3252453">-</span>&nbsp;<span class="num" id="3252455">1</span><span class="op" id="3252456">;</span>&nbsp;<span class="ident" id="3252458">i</span>&nbsp;<span class="op" id="3252460">&gt;=</span>&nbsp;<span class="num" id="3252463">0</span><span class="op" id="3252464">;</span>&nbsp;<span class="ident" id="3252466">i</span><span class="op" id="3252467">--</span>&nbsp;<span class="op" id="3252470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252474">if</span>&nbsp;<span class="ident" id="3252477">s</span><span class="op" id="3252478">.</span><span class="ident" id="3252479">vars</span><span class="op" id="3252483">[</span><span class="ident" id="3252484">i</span><span class="op" id="3252485">]</span><span class="op" id="3252486">.</span><span class="ident" id="3252487">name</span>&nbsp;<span class="op" id="3252492">==</span>&nbsp;<span class="ident" id="3252495">name</span>&nbsp;<span class="op" id="3252500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252505">return</span>&nbsp;<span class="ident" id="3252512">s</span><span class="op" id="3252513">.</span><span class="ident" id="3252514">vars</span><span class="op" id="3252518">[</span><span class="ident" id="3252519">i</span><span class="op" id="3252520">]</span><span class="op" id="3252521">.</span><span class="ident" id="3252522">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3252530">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3252533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3252536">s</span><span class="op" id="3252537">.</span><span class="ident" id="3252538">errorf</span><span class="op" id="3252544">(</span><span class="string" id="3252545">&#34;undefined&nbsp;variable:&nbsp;%s&#34;</span><span class="op" id="3252569">,</span>&nbsp;<span class="ident" id="3252571">name</span><span class="op" id="3252575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252578">return</span>&nbsp;<span class="ident" id="3252585">zero</span><br>
<span class="lineno"></span><span class="op" id="3252590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="3252593">var</span>&nbsp;<span class="ident" id="3252597">zero</span>&nbsp;<span class="ident" id="3252602">reflect</span><span class="op" id="3252609">.</span><span class="ident" id="3252610">Value</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252617">//&nbsp;at&nbsp;marks&nbsp;the&nbsp;state&nbsp;to&nbsp;be&nbsp;on&nbsp;node&nbsp;n,&nbsp;for&nbsp;error&nbsp;reporting.</span><br>
<span class="lineno"></span><span class="keyword" id="3252677">func</span>&nbsp;<span class="op" id="3252682">(</span><span class="ident" id="3252683">s</span>&nbsp;<span class="op" id="3252685">*</span><span class="ident" id="3252686">state</span><span class="op" id="3252691">)</span>&nbsp;<span class="ident" id="3252693">at</span><span class="op" id="3252695">(</span><span class="ident" id="3252696">node</span>&nbsp;<span class="ident" id="3252701">parse</span><span class="op" id="3252706">.</span><span class="ident" id="3252707">Node</span><span class="op" id="3252711">)</span>&nbsp;<span class="op" id="3252713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3252716">s</span><span class="op" id="3252717">.</span><span class="ident" id="3252718">node</span>&nbsp;<span class="op" id="3252723">=</span>&nbsp;<span class="ident" id="3252725">node</span><br>
<span class="lineno">70</span><span class="op" id="3252730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3252733">//&nbsp;doublePercent&nbsp;returns&nbsp;the&nbsp;string&nbsp;with&nbsp;%&#39;s&nbsp;replaced&nbsp;by&nbsp;%%,&nbsp;if&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3252808">//&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;safely&nbsp;inside&nbsp;a&nbsp;Printf&nbsp;format&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3252867">func</span>&nbsp;<span class="ident" id="3252872">doublePercent</span><span class="op" id="3252885">(</span><span class="ident" id="3252886">str</span>&nbsp;<span class="builtintype" id="3252890">string</span><span class="op" id="3252896">)</span>&nbsp;<span class="builtintype" id="3252898">string</span>&nbsp;<span class="op" id="3252905">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252908">if</span>&nbsp;<span class="ident" id="3252911">strings</span><span class="op" id="3252918">.</span><span class="ident" id="3252919">Contains</span><span class="op" id="3252927">(</span><span class="ident" id="3252928">str</span><span class="op" id="3252931">,</span>&nbsp;<span class="string" id="3252933">&#34;%&#34;</span><span class="op" id="3252936">)</span>&nbsp;<span class="op" id="3252938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3252942">str</span>&nbsp;<span class="op" id="3252946">=</span>&nbsp;<span class="ident" id="3252948">strings</span><span class="op" id="3252955">.</span><span class="ident" id="3252956">Replace</span><span class="op" id="3252963">(</span><span class="ident" id="3252964">str</span><span class="op" id="3252967">,</span>&nbsp;<span class="string" id="3252969">&#34;%&#34;</span><span class="op" id="3252972">,</span>&nbsp;<span class="string" id="3252974">&#34;%%&#34;</span><span class="op" id="3252978">,</span>&nbsp;<span class="op" id="3252980">-</span><span class="num" id="3252981">1</span><span class="op" id="3252982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3252985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3252988">return</span>&nbsp;<span class="ident" id="3252995">str</span><br>
<span class="lineno"></span><span class="op" id="3252999">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3253002">//&nbsp;errorf&nbsp;formats&nbsp;the&nbsp;error&nbsp;and&nbsp;terminates&nbsp;processing.</span><br>
<span class="lineno"></span><span class="keyword" id="3253057">func</span>&nbsp;<span class="op" id="3253062">(</span><span class="ident" id="3253063">s</span>&nbsp;<span class="op" id="3253065">*</span><span class="ident" id="3253066">state</span><span class="op" id="3253071">)</span>&nbsp;<span class="ident" id="3253073">errorf</span><span class="op" id="3253079">(</span><span class="ident" id="3253080">format</span>&nbsp;<span class="builtintype" id="3253087">string</span><span class="op" id="3253093">,</span>&nbsp;<span class="ident" id="3253095">args</span>&nbsp;<span class="op" id="3253100">...</span><span class="keyword" id="3253103">interface</span><span class="op" id="3253112">{</span><span class="op" id="3253113">}</span><span class="op" id="3253114">)</span>&nbsp;<span class="op" id="3253116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253119">name</span>&nbsp;<span class="op" id="3253124">:=</span>&nbsp;<span class="ident" id="3253127">doublePercent</span><span class="op" id="3253140">(</span><span class="ident" id="3253141">s</span><span class="op" id="3253142">.</span><span class="ident" id="3253143">tmpl</span><span class="op" id="3253147">.</span><span class="ident" id="3253148">Name</span><span class="op" id="3253152">(</span><span class="op" id="3253153">)</span><span class="op" id="3253154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253157">if</span>&nbsp;<span class="ident" id="3253160">s</span><span class="op" id="3253161">.</span><span class="ident" id="3253162">node</span>&nbsp;<span class="op" id="3253167">==</span>&nbsp;<span class="builtintype" id="3253170">nil</span>&nbsp;<span class="op" id="3253174">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253178">format</span>&nbsp;<span class="op" id="3253185">=</span>&nbsp;<span class="ident" id="3253187">fmt</span><span class="op" id="3253190">.</span><span class="ident" id="3253191">Sprintf</span><span class="op" id="3253198">(</span><span class="string" id="3253199">&#34;template:&nbsp;%s:&nbsp;%s&#34;</span><span class="op" id="3253217">,</span>&nbsp;<span class="ident" id="3253219">name</span><span class="op" id="3253223">,</span>&nbsp;<span class="ident" id="3253225">format</span><span class="op" id="3253231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3253234">}</span>&nbsp;<span class="keyword" id="3253236">else</span>&nbsp;<span class="op" id="3253241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253245">location</span><span class="op" id="3253253">,</span>&nbsp;<span class="ident" id="3253255">context</span>&nbsp;<span class="op" id="3253263">:=</span>&nbsp;<span class="ident" id="3253266">s</span><span class="op" id="3253267">.</span><span class="ident" id="3253268">tmpl</span><span class="op" id="3253272">.</span><span class="ident" id="3253273">ErrorContext</span><span class="op" id="3253285">(</span><span class="ident" id="3253286">s</span><span class="op" id="3253287">.</span><span class="ident" id="3253288">node</span><span class="op" id="3253292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253296">format</span>&nbsp;<span class="op" id="3253303">=</span>&nbsp;<span class="ident" id="3253305">fmt</span><span class="op" id="3253308">.</span><span class="ident" id="3253309">Sprintf</span><span class="op" id="3253316">(</span><span class="string" id="3253317">&#34;template:&nbsp;%s:&nbsp;executing&nbsp;%q&nbsp;at&nbsp;&lt;%s&gt;:&nbsp;%s&#34;</span><span class="op" id="3253357">,</span>&nbsp;<span class="ident" id="3253359">location</span><span class="op" id="3253367">,</span>&nbsp;<span class="ident" id="3253369">name</span><span class="op" id="3253373">,</span>&nbsp;<span class="ident" id="3253375">doublePercent</span><span class="op" id="3253388">(</span><span class="ident" id="3253389">context</span><span class="op" id="3253396">)</span><span class="op" id="3253397">,</span>&nbsp;<span class="ident" id="3253399">format</span><span class="op" id="3253405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3253408">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3253411">panic</span><span class="op" id="3253416">(</span><span class="ident" id="3253417">fmt</span><span class="op" id="3253420">.</span><span class="ident" id="3253421">Errorf</span><span class="op" id="3253427">(</span><span class="ident" id="3253428">format</span><span class="op" id="3253434">,</span>&nbsp;<span class="ident" id="3253436">args</span><span class="op" id="3253440">...</span><span class="op" id="3253443">)</span><span class="op" id="3253444">)</span><br>
<span class="lineno"></span><span class="op" id="3253446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3253449">//&nbsp;errRecover&nbsp;is&nbsp;the&nbsp;handler&nbsp;that&nbsp;turns&nbsp;panics&nbsp;into&nbsp;returns&nbsp;from&nbsp;the&nbsp;top</span><br>
<span class="lineno"></span><span class="comment" id="3253522">//&nbsp;level&nbsp;of&nbsp;Parse.</span><br>
<span class="lineno">95</span><span class="keyword" id="3253541">func</span>&nbsp;<span class="ident" id="3253546">errRecover</span><span class="op" id="3253556">(</span><span class="ident" id="3253557">errp</span>&nbsp;<span class="op" id="3253562">*</span><span class="builtintype" id="3253563">error</span><span class="op" id="3253568">)</span>&nbsp;<span class="op" id="3253570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3253573">e</span>&nbsp;<span class="op" id="3253575">:=</span>&nbsp;<span class="builtinfunc" id="3253578">recover</span><span class="op" id="3253585">(</span><span class="op" id="3253586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253589">if</span>&nbsp;<span class="ident" id="3253592">e</span>&nbsp;<span class="op" id="3253594">!=</span>&nbsp;<span class="builtintype" id="3253597">nil</span>&nbsp;<span class="op" id="3253601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253605">switch</span>&nbsp;<span class="ident" id="3253612">err</span>&nbsp;<span class="op" id="3253616">:=</span>&nbsp;<span class="ident" id="3253619">e</span><span class="op" id="3253620">.</span><span class="op" id="3253621">(</span><span class="keyword" id="3253622">type</span><span class="op" id="3253626">)</span>&nbsp;<span class="op" id="3253628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253632">case</span>&nbsp;<span class="ident" id="3253637">runtime</span><span class="op" id="3253644">.</span><span class="ident" id="3253645">Error</span><span class="op" id="3253650">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3253655">panic</span><span class="op" id="3253660">(</span><span class="ident" id="3253661">e</span><span class="op" id="3253662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253666">case</span>&nbsp;<span class="builtintype" id="3253671">error</span><span class="op" id="3253676">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3253681">*</span><span class="ident" id="3253682">errp</span>&nbsp;<span class="op" id="3253687">=</span>&nbsp;<span class="ident" id="3253689">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3253695">default</span><span class="op" id="3253702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3253707">panic</span><span class="op" id="3253712">(</span><span class="ident" id="3253713">e</span><span class="op" id="3253714">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3253718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3253721">}</span><br>
<span class="lineno"></span><span class="op" id="3253723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3253726">//&nbsp;ExecuteTemplate&nbsp;applies&nbsp;the&nbsp;template&nbsp;associated&nbsp;with&nbsp;t&nbsp;that&nbsp;has&nbsp;the&nbsp;given&nbsp;name</span><br>
<span class="lineno">110</span><span class="comment" id="3253808">//&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object&nbsp;and&nbsp;writes&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno"></span><span class="comment" id="3253869">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="3253937">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3254010">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="3254032">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno">115</span><span class="keyword" id="3254082">func</span>&nbsp;<span class="op" id="3254087">(</span><span class="ident" id="3254088">t</span>&nbsp;<span class="op" id="3254090">*</span><span class="ident" id="3254091">Template</span><span class="op" id="3254099">)</span>&nbsp;<span class="ident" id="3254101">ExecuteTemplate</span><span class="op" id="3254116">(</span><span class="ident" id="3254117">wr</span>&nbsp;<span class="ident" id="3254120">io</span><span class="op" id="3254122">.</span><span class="ident" id="3254123">Writer</span><span class="op" id="3254129">,</span>&nbsp;<span class="ident" id="3254131">name</span>&nbsp;<span class="builtintype" id="3254136">string</span><span class="op" id="3254142">,</span>&nbsp;<span class="ident" id="3254144">data</span>&nbsp;<span class="keyword" id="3254149">interface</span><span class="op" id="3254158">{</span><span class="op" id="3254159">}</span><span class="op" id="3254160">)</span>&nbsp;<span class="builtintype" id="3254162">error</span>&nbsp;<span class="op" id="3254168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254171">tmpl</span>&nbsp;<span class="op" id="3254176">:=</span>&nbsp;<span class="ident" id="3254179">t</span><span class="op" id="3254180">.</span><span class="ident" id="3254181">tmpl</span><span class="op" id="3254185">[</span><span class="ident" id="3254186">name</span><span class="op" id="3254190">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254193">if</span>&nbsp;<span class="ident" id="3254196">tmpl</span>&nbsp;<span class="op" id="3254201">==</span>&nbsp;<span class="builtintype" id="3254204">nil</span>&nbsp;<span class="op" id="3254208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254212">return</span>&nbsp;<span class="ident" id="3254219">fmt</span><span class="op" id="3254222">.</span><span class="ident" id="3254223">Errorf</span><span class="op" id="3254229">(</span><span class="string" id="3254230">&#34;template:&nbsp;no&nbsp;template&nbsp;%q&nbsp;associated&nbsp;with&nbsp;template&nbsp;%q&#34;</span><span class="op" id="3254284">,</span>&nbsp;<span class="ident" id="3254286">name</span><span class="op" id="3254290">,</span>&nbsp;<span class="ident" id="3254292">t</span><span class="op" id="3254293">.</span><span class="ident" id="3254294">name</span><span class="op" id="3254298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3254301">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254304">return</span>&nbsp;<span class="ident" id="3254311">tmpl</span><span class="op" id="3254315">.</span><span class="ident" id="3254316">Execute</span><span class="op" id="3254323">(</span><span class="ident" id="3254324">wr</span><span class="op" id="3254326">,</span>&nbsp;<span class="ident" id="3254328">data</span><span class="op" id="3254332">)</span><br>
<span class="lineno"></span><span class="op" id="3254334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3254337">//&nbsp;Execute&nbsp;applies&nbsp;a&nbsp;parsed&nbsp;template&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object,</span><br>
<span class="lineno"></span><span class="comment" id="3254404">//&nbsp;and&nbsp;writes&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno">125</span><span class="comment" id="3254436">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="3254504">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3254577">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="3254599">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="3254649">func</span>&nbsp;<span class="op" id="3254654">(</span><span class="ident" id="3254655">t</span>&nbsp;<span class="op" id="3254657">*</span><span class="ident" id="3254658">Template</span><span class="op" id="3254666">)</span>&nbsp;<span class="ident" id="3254668">Execute</span><span class="op" id="3254675">(</span><span class="ident" id="3254676">wr</span>&nbsp;<span class="ident" id="3254679">io</span><span class="op" id="3254681">.</span><span class="ident" id="3254682">Writer</span><span class="op" id="3254688">,</span>&nbsp;<span class="ident" id="3254690">data</span>&nbsp;<span class="keyword" id="3254695">interface</span><span class="op" id="3254704">{</span><span class="op" id="3254705">}</span><span class="op" id="3254706">)</span>&nbsp;<span class="op" id="3254708">(</span><span class="ident" id="3254709">err</span>&nbsp;<span class="builtintype" id="3254713">error</span><span class="op" id="3254718">)</span>&nbsp;<span class="op" id="3254720">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254723">defer</span>&nbsp;<span class="ident" id="3254729">errRecover</span><span class="op" id="3254739">(</span><span class="op" id="3254740">&amp;</span><span class="ident" id="3254741">err</span><span class="op" id="3254744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254747">value</span>&nbsp;<span class="op" id="3254753">:=</span>&nbsp;<span class="ident" id="3254756">reflect</span><span class="op" id="3254763">.</span><span class="ident" id="3254764">ValueOf</span><span class="op" id="3254771">(</span><span class="ident" id="3254772">data</span><span class="op" id="3254776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254779">state</span>&nbsp;<span class="op" id="3254785">:=</span>&nbsp;<span class="op" id="3254788">&amp;</span><span class="ident" id="3254789">state</span><span class="op" id="3254794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254798">tmpl</span><span class="op" id="3254802">:</span>&nbsp;<span class="ident" id="3254804">t</span><span class="op" id="3254805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254809">wr</span><span class="op" id="3254811">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3254815">wr</span><span class="op" id="3254817">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254821">vars</span><span class="op" id="3254825">:</span>&nbsp;<span class="op" id="3254827">[</span><span class="op" id="3254828">]</span><span class="ident" id="3254829">variable</span><span class="op" id="3254837">{</span><span class="op" id="3254838">{</span><span class="string" id="3254839">&#34;$&#34;</span><span class="op" id="3254842">,</span>&nbsp;<span class="ident" id="3254844">value</span><span class="op" id="3254849">}</span><span class="op" id="3254850">}</span><span class="op" id="3254851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3254854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3254857">t</span><span class="op" id="3254858">.</span><span class="ident" id="3254859">init</span><span class="op" id="3254863">(</span><span class="op" id="3254864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254867">if</span>&nbsp;<span class="ident" id="3254870">t</span><span class="op" id="3254871">.</span><span class="ident" id="3254872">Tree</span>&nbsp;<span class="op" id="3254877">==</span>&nbsp;<span class="builtintype" id="3254880">nil</span>&nbsp;<span class="op" id="3254884">||</span>&nbsp;<span class="ident" id="3254887">t</span><span class="op" id="3254888">.</span><span class="ident" id="3254889">Root</span>&nbsp;<span class="op" id="3254894">==</span>&nbsp;<span class="builtintype" id="3254897">nil</span>&nbsp;<span class="op" id="3254901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254905">var</span>&nbsp;<span class="ident" id="3254909">b</span>&nbsp;<span class="ident" id="3254911">bytes</span><span class="op" id="3254916">.</span><span class="ident" id="3254917">Buffer</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254926">for</span>&nbsp;<span class="ident" id="3254930">name</span><span class="op" id="3254934">,</span>&nbsp;<span class="ident" id="3254936">tmpl</span>&nbsp;<span class="op" id="3254941">:=</span>&nbsp;<span class="keyword" id="3254944">range</span>&nbsp;<span class="ident" id="3254950">t</span><span class="op" id="3254951">.</span><span class="ident" id="3254952">tmpl</span>&nbsp;<span class="op" id="3254957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3254962">if</span>&nbsp;<span class="ident" id="3254965">tmpl</span><span class="op" id="3254969">.</span><span class="ident" id="3254970">Tree</span>&nbsp;<span class="op" id="3254975">==</span>&nbsp;<span class="builtintype" id="3254978">nil</span>&nbsp;<span class="op" id="3254982">||</span>&nbsp;<span class="ident" id="3254985">tmpl</span><span class="op" id="3254989">.</span><span class="ident" id="3254990">Root</span>&nbsp;<span class="op" id="3254995">==</span>&nbsp;<span class="builtintype" id="3254998">nil</span>&nbsp;<span class="op" id="3255002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255008">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255025">if</span>&nbsp;<span class="ident" id="3255028">b</span><span class="op" id="3255029">.</span><span class="ident" id="3255030">Len</span><span class="op" id="3255033">(</span><span class="op" id="3255034">)</span>&nbsp;<span class="op" id="3255036">&gt;</span>&nbsp;<span class="num" id="3255038">0</span>&nbsp;<span class="op" id="3255040">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255046">b</span><span class="op" id="3255047">.</span><span class="ident" id="3255048">WriteString</span><span class="op" id="3255059">(</span><span class="string" id="3255060">&#34;,&nbsp;&#34;</span><span class="op" id="3255064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255074">fmt</span><span class="op" id="3255077">.</span><span class="ident" id="3255078">Fprintf</span><span class="op" id="3255085">(</span><span class="op" id="3255086">&amp;</span><span class="ident" id="3255087">b</span><span class="op" id="3255088">,</span>&nbsp;<span class="string" id="3255090">&#34;%q&#34;</span><span class="op" id="3255094">,</span>&nbsp;<span class="ident" id="3255096">name</span><span class="op" id="3255100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255108">var</span>&nbsp;<span class="ident" id="3255112">s</span>&nbsp;<span class="builtintype" id="3255114">string</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255123">if</span>&nbsp;<span class="ident" id="3255126">b</span><span class="op" id="3255127">.</span><span class="ident" id="3255128">Len</span><span class="op" id="3255131">(</span><span class="op" id="3255132">)</span>&nbsp;<span class="op" id="3255134">&gt;</span>&nbsp;<span class="num" id="3255136">0</span>&nbsp;<span class="op" id="3255138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255143">s</span>&nbsp;<span class="op" id="3255145">=</span>&nbsp;<span class="string" id="3255147">&#34;;&nbsp;defined&nbsp;templates&nbsp;are:&nbsp;&#34;</span>&nbsp;<span class="op" id="3255175">+</span>&nbsp;<span class="ident" id="3255177">b</span><span class="op" id="3255178">.</span><span class="ident" id="3255179">String</span><span class="op" id="3255185">(</span><span class="op" id="3255186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255194">state</span><span class="op" id="3255199">.</span><span class="ident" id="3255200">errorf</span><span class="op" id="3255206">(</span><span class="string" id="3255207">&#34;%q&nbsp;is&nbsp;an&nbsp;incomplete&nbsp;or&nbsp;empty&nbsp;template%s&#34;</span><span class="op" id="3255248">,</span>&nbsp;<span class="ident" id="3255250">t</span><span class="op" id="3255251">.</span><span class="ident" id="3255252">Name</span><span class="op" id="3255256">(</span><span class="op" id="3255257">)</span><span class="op" id="3255258">,</span>&nbsp;<span class="ident" id="3255260">s</span><span class="op" id="3255261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255264">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255267">state</span><span class="op" id="3255272">.</span><span class="ident" id="3255273">walk</span><span class="op" id="3255277">(</span><span class="ident" id="3255278">value</span><span class="op" id="3255283">,</span>&nbsp;<span class="ident" id="3255285">t</span><span class="op" id="3255286">.</span><span class="ident" id="3255287">Root</span><span class="op" id="3255291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255294">return</span><br>
<span class="lineno"></span><span class="op" id="3255301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3255304">//&nbsp;Walk&nbsp;functions&nbsp;step&nbsp;through&nbsp;the&nbsp;major&nbsp;pieces&nbsp;of&nbsp;the&nbsp;template&nbsp;structure,</span><br>
<span class="lineno">160</span><span class="comment" id="3255379">//&nbsp;generating&nbsp;output&nbsp;as&nbsp;they&nbsp;go.</span><br>
<span class="lineno"></span><span class="keyword" id="3255412">func</span>&nbsp;<span class="op" id="3255417">(</span><span class="ident" id="3255418">s</span>&nbsp;<span class="op" id="3255420">*</span><span class="ident" id="3255421">state</span><span class="op" id="3255426">)</span>&nbsp;<span class="ident" id="3255428">walk</span><span class="op" id="3255432">(</span><span class="ident" id="3255433">dot</span>&nbsp;<span class="ident" id="3255437">reflect</span><span class="op" id="3255444">.</span><span class="ident" id="3255445">Value</span><span class="op" id="3255450">,</span>&nbsp;<span class="ident" id="3255452">node</span>&nbsp;<span class="ident" id="3255457">parse</span><span class="op" id="3255462">.</span><span class="ident" id="3255463">Node</span><span class="op" id="3255467">)</span>&nbsp;<span class="op" id="3255469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255472">s</span><span class="op" id="3255473">.</span><span class="ident" id="3255474">at</span><span class="op" id="3255476">(</span><span class="ident" id="3255477">node</span><span class="op" id="3255481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255484">switch</span>&nbsp;<span class="ident" id="3255491">node</span>&nbsp;<span class="op" id="3255496">:=</span>&nbsp;<span class="ident" id="3255499">node</span><span class="op" id="3255503">.</span><span class="op" id="3255504">(</span><span class="keyword" id="3255505">type</span><span class="op" id="3255509">)</span>&nbsp;<span class="op" id="3255511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255514">case</span>&nbsp;<span class="op" id="3255519">*</span><span class="ident" id="3255520">parse</span><span class="op" id="3255525">.</span><span class="ident" id="3255526">ActionNode</span><span class="op" id="3255536">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3255540">//&nbsp;Do&nbsp;not&nbsp;pop&nbsp;variables&nbsp;so&nbsp;they&nbsp;persist&nbsp;until&nbsp;next&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3255598">//&nbsp;Also,&nbsp;if&nbsp;the&nbsp;action&nbsp;declares&nbsp;variables,&nbsp;don&#39;t&nbsp;print&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255667">val</span>&nbsp;<span class="op" id="3255671">:=</span>&nbsp;<span class="ident" id="3255674">s</span><span class="op" id="3255675">.</span><span class="ident" id="3255676">evalPipeline</span><span class="op" id="3255688">(</span><span class="ident" id="3255689">dot</span><span class="op" id="3255692">,</span>&nbsp;<span class="ident" id="3255694">node</span><span class="op" id="3255698">.</span><span class="ident" id="3255699">Pipe</span><span class="op" id="3255703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255707">if</span>&nbsp;<span class="builtinfunc" id="3255710">len</span><span class="op" id="3255713">(</span><span class="ident" id="3255714">node</span><span class="op" id="3255718">.</span><span class="ident" id="3255719">Pipe</span><span class="op" id="3255723">.</span><span class="ident" id="3255724">Decl</span><span class="op" id="3255728">)</span>&nbsp;<span class="op" id="3255730">==</span>&nbsp;<span class="num" id="3255733">0</span>&nbsp;<span class="op" id="3255735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255740">s</span><span class="op" id="3255741">.</span><span class="ident" id="3255742">printValue</span><span class="op" id="3255752">(</span><span class="ident" id="3255753">node</span><span class="op" id="3255757">,</span>&nbsp;<span class="ident" id="3255759">val</span><span class="op" id="3255762">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255769">case</span>&nbsp;<span class="op" id="3255774">*</span><span class="ident" id="3255775">parse</span><span class="op" id="3255780">.</span><span class="ident" id="3255781">IfNode</span><span class="op" id="3255787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255791">s</span><span class="op" id="3255792">.</span><span class="ident" id="3255793">walkIfOrWith</span><span class="op" id="3255805">(</span><span class="ident" id="3255806">parse</span><span class="op" id="3255811">.</span><span class="ident" id="3255812">NodeIf</span><span class="op" id="3255818">,</span>&nbsp;<span class="ident" id="3255820">dot</span><span class="op" id="3255823">,</span>&nbsp;<span class="ident" id="3255825">node</span><span class="op" id="3255829">.</span><span class="ident" id="3255830">Pipe</span><span class="op" id="3255834">,</span>&nbsp;<span class="ident" id="3255836">node</span><span class="op" id="3255840">.</span><span class="ident" id="3255841">List</span><span class="op" id="3255845">,</span>&nbsp;<span class="ident" id="3255847">node</span><span class="op" id="3255851">.</span><span class="ident" id="3255852">ElseList</span><span class="op" id="3255860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255863">case</span>&nbsp;<span class="op" id="3255868">*</span><span class="ident" id="3255869">parse</span><span class="op" id="3255874">.</span><span class="ident" id="3255875">ListNode</span><span class="op" id="3255883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255887">for</span>&nbsp;<span class="ident" id="3255891">_</span><span class="op" id="3255892">,</span>&nbsp;<span class="ident" id="3255894">node</span>&nbsp;<span class="op" id="3255899">:=</span>&nbsp;<span class="keyword" id="3255902">range</span>&nbsp;<span class="ident" id="3255908">node</span><span class="op" id="3255912">.</span><span class="ident" id="3255913">Nodes</span>&nbsp;<span class="op" id="3255919">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255924">s</span><span class="op" id="3255925">.</span><span class="ident" id="3255926">walk</span><span class="op" id="3255930">(</span><span class="ident" id="3255931">dot</span><span class="op" id="3255934">,</span>&nbsp;<span class="ident" id="3255936">node</span><span class="op" id="3255940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3255944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255947">case</span>&nbsp;<span class="op" id="3255952">*</span><span class="ident" id="3255953">parse</span><span class="op" id="3255958">.</span><span class="ident" id="3255959">RangeNode</span><span class="op" id="3255968">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3255972">s</span><span class="op" id="3255973">.</span><span class="ident" id="3255974">walkRange</span><span class="op" id="3255983">(</span><span class="ident" id="3255984">dot</span><span class="op" id="3255987">,</span>&nbsp;<span class="ident" id="3255989">node</span><span class="op" id="3255993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3255996">case</span>&nbsp;<span class="op" id="3256001">*</span><span class="ident" id="3256002">parse</span><span class="op" id="3256007">.</span><span class="ident" id="3256008">TemplateNode</span><span class="op" id="3256020">:</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256024">s</span><span class="op" id="3256025">.</span><span class="ident" id="3256026">walkTemplate</span><span class="op" id="3256038">(</span><span class="ident" id="3256039">dot</span><span class="op" id="3256042">,</span>&nbsp;<span class="ident" id="3256044">node</span><span class="op" id="3256048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256051">case</span>&nbsp;<span class="op" id="3256056">*</span><span class="ident" id="3256057">parse</span><span class="op" id="3256062">.</span><span class="ident" id="3256063">TextNode</span><span class="op" id="3256071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256075">if</span>&nbsp;<span class="ident" id="3256078">_</span><span class="op" id="3256079">,</span>&nbsp;<span class="ident" id="3256081">err</span>&nbsp;<span class="op" id="3256085">:=</span>&nbsp;<span class="ident" id="3256088">s</span><span class="op" id="3256089">.</span><span class="ident" id="3256090">wr</span><span class="op" id="3256092">.</span><span class="ident" id="3256093">Write</span><span class="op" id="3256098">(</span><span class="ident" id="3256099">node</span><span class="op" id="3256103">.</span><span class="ident" id="3256104">Text</span><span class="op" id="3256108">)</span><span class="op" id="3256109">;</span>&nbsp;<span class="ident" id="3256111">err</span>&nbsp;<span class="op" id="3256115">!=</span>&nbsp;<span class="builtintype" id="3256118">nil</span>&nbsp;<span class="op" id="3256122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256127">s</span><span class="op" id="3256128">.</span><span class="ident" id="3256129">errorf</span><span class="op" id="3256135">(</span><span class="string" id="3256136">&#34;%s&#34;</span><span class="op" id="3256140">,</span>&nbsp;<span class="ident" id="3256142">err</span><span class="op" id="3256145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256149">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256152">case</span>&nbsp;<span class="op" id="3256157">*</span><span class="ident" id="3256158">parse</span><span class="op" id="3256163">.</span><span class="ident" id="3256164">WithNode</span><span class="op" id="3256172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256176">s</span><span class="op" id="3256177">.</span><span class="ident" id="3256178">walkIfOrWith</span><span class="op" id="3256190">(</span><span class="ident" id="3256191">parse</span><span class="op" id="3256196">.</span><span class="ident" id="3256197">NodeWith</span><span class="op" id="3256205">,</span>&nbsp;<span class="ident" id="3256207">dot</span><span class="op" id="3256210">,</span>&nbsp;<span class="ident" id="3256212">node</span><span class="op" id="3256216">.</span><span class="ident" id="3256217">Pipe</span><span class="op" id="3256221">,</span>&nbsp;<span class="ident" id="3256223">node</span><span class="op" id="3256227">.</span><span class="ident" id="3256228">List</span><span class="op" id="3256232">,</span>&nbsp;<span class="ident" id="3256234">node</span><span class="op" id="3256238">.</span><span class="ident" id="3256239">ElseList</span><span class="op" id="3256247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256250">default</span><span class="op" id="3256257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256261">s</span><span class="op" id="3256262">.</span><span class="ident" id="3256263">errorf</span><span class="op" id="3256269">(</span><span class="string" id="3256270">&#34;unknown&nbsp;node:&nbsp;%s&#34;</span><span class="op" id="3256288">,</span>&nbsp;<span class="ident" id="3256290">node</span><span class="op" id="3256294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256297">}</span><br>
<span class="lineno">190</span><span class="op" id="3256299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256302">//&nbsp;walkIfOrWith&nbsp;walks&nbsp;an&nbsp;&#39;if&#39;&nbsp;or&nbsp;&#39;with&#39;&nbsp;node.&nbsp;The&nbsp;two&nbsp;control&nbsp;structures</span><br>
<span class="lineno"></span><span class="comment" id="3256375">//&nbsp;are&nbsp;identical&nbsp;in&nbsp;behavior&nbsp;except&nbsp;that&nbsp;&#39;with&#39;&nbsp;sets&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3256433">func</span>&nbsp;<span class="op" id="3256438">(</span><span class="ident" id="3256439">s</span>&nbsp;<span class="op" id="3256441">*</span><span class="ident" id="3256442">state</span><span class="op" id="3256447">)</span>&nbsp;<span class="ident" id="3256449">walkIfOrWith</span><span class="op" id="3256461">(</span><span class="ident" id="3256462">typ</span>&nbsp;<span class="ident" id="3256466">parse</span><span class="op" id="3256471">.</span><span class="ident" id="3256472">NodeType</span><span class="op" id="3256480">,</span>&nbsp;<span class="ident" id="3256482">dot</span>&nbsp;<span class="ident" id="3256486">reflect</span><span class="op" id="3256493">.</span><span class="ident" id="3256494">Value</span><span class="op" id="3256499">,</span>&nbsp;<span class="ident" id="3256501">pipe</span>&nbsp;<span class="op" id="3256506">*</span><span class="ident" id="3256507">parse</span><span class="op" id="3256512">.</span><span class="ident" id="3256513">PipeNode</span><span class="op" id="3256521">,</span>&nbsp;<span class="ident" id="3256523">list</span><span class="op" id="3256527">,</span>&nbsp;<span class="ident" id="3256529">elseList</span>&nbsp;<span class="op" id="3256538">*</span><span class="ident" id="3256539">parse</span><span class="op" id="3256544">.</span><span class="ident" id="3256545">ListNode</span><span class="op" id="3256553">)</span>&nbsp;<span class="op" id="3256555">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256558">defer</span>&nbsp;<span class="ident" id="3256564">s</span><span class="op" id="3256565">.</span><span class="ident" id="3256566">pop</span><span class="op" id="3256569">(</span><span class="ident" id="3256570">s</span><span class="op" id="3256571">.</span><span class="ident" id="3256572">mark</span><span class="op" id="3256576">(</span><span class="op" id="3256577">)</span><span class="op" id="3256578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256581">val</span>&nbsp;<span class="op" id="3256585">:=</span>&nbsp;<span class="ident" id="3256588">s</span><span class="op" id="3256589">.</span><span class="ident" id="3256590">evalPipeline</span><span class="op" id="3256602">(</span><span class="ident" id="3256603">dot</span><span class="op" id="3256606">,</span>&nbsp;<span class="ident" id="3256608">pipe</span><span class="op" id="3256612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256615">truth</span><span class="op" id="3256620">,</span>&nbsp;<span class="ident" id="3256622">ok</span>&nbsp;<span class="op" id="3256625">:=</span>&nbsp;<span class="ident" id="3256628">isTrue</span><span class="op" id="3256634">(</span><span class="ident" id="3256635">val</span><span class="op" id="3256638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256641">if</span>&nbsp;<span class="op" id="3256644">!</span><span class="ident" id="3256645">ok</span>&nbsp;<span class="op" id="3256648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256652">s</span><span class="op" id="3256653">.</span><span class="ident" id="3256654">errorf</span><span class="op" id="3256660">(</span><span class="string" id="3256661">&#34;if/with&nbsp;can&#39;t&nbsp;use&nbsp;%v&#34;</span><span class="op" id="3256683">,</span>&nbsp;<span class="ident" id="3256685">val</span><span class="op" id="3256688">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256694">if</span>&nbsp;<span class="ident" id="3256697">truth</span>&nbsp;<span class="op" id="3256703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3256707">if</span>&nbsp;<span class="ident" id="3256710">typ</span>&nbsp;<span class="op" id="3256714">==</span>&nbsp;<span class="ident" id="3256717">parse</span><span class="op" id="3256722">.</span><span class="ident" id="3256723">NodeWith</span>&nbsp;<span class="op" id="3256732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256737">s</span><span class="op" id="3256738">.</span><span class="ident" id="3256739">walk</span><span class="op" id="3256743">(</span><span class="ident" id="3256744">val</span><span class="op" id="3256747">,</span>&nbsp;<span class="ident" id="3256749">list</span><span class="op" id="3256753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256757">}</span>&nbsp;<span class="keyword" id="3256759">else</span>&nbsp;<span class="op" id="3256764">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256769">s</span><span class="op" id="3256770">.</span><span class="ident" id="3256771">walk</span><span class="op" id="3256775">(</span><span class="ident" id="3256776">dot</span><span class="op" id="3256779">,</span>&nbsp;<span class="ident" id="3256781">list</span><span class="op" id="3256785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256792">}</span>&nbsp;<span class="keyword" id="3256794">else</span>&nbsp;<span class="keyword" id="3256799">if</span>&nbsp;<span class="ident" id="3256802">elseList</span>&nbsp;<span class="op" id="3256811">!=</span>&nbsp;<span class="builtintype" id="3256814">nil</span>&nbsp;<span class="op" id="3256818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3256822">s</span><span class="op" id="3256823">.</span><span class="ident" id="3256824">walk</span><span class="op" id="3256828">(</span><span class="ident" id="3256829">dot</span><span class="op" id="3256832">,</span>&nbsp;<span class="ident" id="3256834">elseList</span><span class="op" id="3256842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3256845">}</span><br>
<span class="lineno">210</span><span class="op" id="3256847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3256850">//&nbsp;isTrue&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;&#39;true&#39;,&nbsp;in&nbsp;the&nbsp;sense&nbsp;of&nbsp;not&nbsp;the&nbsp;zero&nbsp;of&nbsp;its&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="3256939">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;value&nbsp;has&nbsp;a&nbsp;meaningful&nbsp;truth&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3256994">func</span>&nbsp;<span class="ident" id="3256999">isTrue</span><span class="op" id="3257005">(</span><span class="ident" id="3257006">val</span>&nbsp;<span class="ident" id="3257010">reflect</span><span class="op" id="3257017">.</span><span class="ident" id="3257018">Value</span><span class="op" id="3257023">)</span>&nbsp;<span class="op" id="3257025">(</span><span class="ident" id="3257026">truth</span><span class="op" id="3257031">,</span>&nbsp;<span class="ident" id="3257033">ok</span>&nbsp;<span class="builtintype" id="3257036">bool</span><span class="op" id="3257040">)</span>&nbsp;<span class="op" id="3257042">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257045">if</span>&nbsp;<span class="op" id="3257048">!</span><span class="ident" id="3257049">val</span><span class="op" id="3257052">.</span><span class="ident" id="3257053">IsValid</span><span class="op" id="3257060">(</span><span class="op" id="3257061">)</span>&nbsp;<span class="op" id="3257063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3257067">//&nbsp;Something&nbsp;like&nbsp;var&nbsp;x&nbsp;interface{},&nbsp;never&nbsp;set.&nbsp;It&#39;s&nbsp;a&nbsp;form&nbsp;of&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257137">return</span>&nbsp;<span class="builtintype" id="3257144">false</span><span class="op" id="3257149">,</span>&nbsp;<span class="builtintype" id="3257151">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3257157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257160">switch</span>&nbsp;<span class="ident" id="3257167">val</span><span class="op" id="3257170">.</span><span class="ident" id="3257171">Kind</span><span class="op" id="3257175">(</span><span class="op" id="3257176">)</span>&nbsp;<span class="op" id="3257178">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257181">case</span>&nbsp;<span class="ident" id="3257186">reflect</span><span class="op" id="3257193">.</span><span class="ident" id="3257194">Array</span><span class="op" id="3257199">,</span>&nbsp;<span class="ident" id="3257201">reflect</span><span class="op" id="3257208">.</span><span class="ident" id="3257209">Map</span><span class="op" id="3257212">,</span>&nbsp;<span class="ident" id="3257214">reflect</span><span class="op" id="3257221">.</span><span class="ident" id="3257222">Slice</span><span class="op" id="3257227">,</span>&nbsp;<span class="ident" id="3257229">reflect</span><span class="op" id="3257236">.</span><span class="ident" id="3257237">String</span><span class="op" id="3257243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257247">truth</span>&nbsp;<span class="op" id="3257253">=</span>&nbsp;<span class="ident" id="3257255">val</span><span class="op" id="3257258">.</span><span class="ident" id="3257259">Len</span><span class="op" id="3257262">(</span><span class="op" id="3257263">)</span>&nbsp;<span class="op" id="3257265">&gt;</span>&nbsp;<span class="num" id="3257267">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257270">case</span>&nbsp;<span class="ident" id="3257275">reflect</span><span class="op" id="3257282">.</span><span class="ident" id="3257283">Bool</span><span class="op" id="3257287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257291">truth</span>&nbsp;<span class="op" id="3257297">=</span>&nbsp;<span class="ident" id="3257299">val</span><span class="op" id="3257302">.</span><span class="ident" id="3257303">Bool</span><span class="op" id="3257307">(</span><span class="op" id="3257308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257311">case</span>&nbsp;<span class="ident" id="3257316">reflect</span><span class="op" id="3257323">.</span><span class="ident" id="3257324">Complex64</span><span class="op" id="3257333">,</span>&nbsp;<span class="ident" id="3257335">reflect</span><span class="op" id="3257342">.</span><span class="ident" id="3257343">Complex128</span><span class="op" id="3257353">:</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257357">truth</span>&nbsp;<span class="op" id="3257363">=</span>&nbsp;<span class="ident" id="3257365">val</span><span class="op" id="3257368">.</span><span class="ident" id="3257369">Complex</span><span class="op" id="3257376">(</span><span class="op" id="3257377">)</span>&nbsp;<span class="op" id="3257379">!=</span>&nbsp;<span class="num" id="3257382">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257385">case</span>&nbsp;<span class="ident" id="3257390">reflect</span><span class="op" id="3257397">.</span><span class="ident" id="3257398">Chan</span><span class="op" id="3257402">,</span>&nbsp;<span class="ident" id="3257404">reflect</span><span class="op" id="3257411">.</span><span class="ident" id="3257412">Func</span><span class="op" id="3257416">,</span>&nbsp;<span class="ident" id="3257418">reflect</span><span class="op" id="3257425">.</span><span class="ident" id="3257426">Ptr</span><span class="op" id="3257429">,</span>&nbsp;<span class="ident" id="3257431">reflect</span><span class="op" id="3257438">.</span><span class="ident" id="3257439">Interface</span><span class="op" id="3257448">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257452">truth</span>&nbsp;<span class="op" id="3257458">=</span>&nbsp;<span class="op" id="3257460">!</span><span class="ident" id="3257461">val</span><span class="op" id="3257464">.</span><span class="ident" id="3257465">IsNil</span><span class="op" id="3257470">(</span><span class="op" id="3257471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257474">case</span>&nbsp;<span class="ident" id="3257479">reflect</span><span class="op" id="3257486">.</span><span class="ident" id="3257487">Int</span><span class="op" id="3257490">,</span>&nbsp;<span class="ident" id="3257492">reflect</span><span class="op" id="3257499">.</span><span class="ident" id="3257500">Int8</span><span class="op" id="3257504">,</span>&nbsp;<span class="ident" id="3257506">reflect</span><span class="op" id="3257513">.</span><span class="ident" id="3257514">Int16</span><span class="op" id="3257519">,</span>&nbsp;<span class="ident" id="3257521">reflect</span><span class="op" id="3257528">.</span><span class="ident" id="3257529">Int32</span><span class="op" id="3257534">,</span>&nbsp;<span class="ident" id="3257536">reflect</span><span class="op" id="3257543">.</span><span class="ident" id="3257544">Int64</span><span class="op" id="3257549">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257553">truth</span>&nbsp;<span class="op" id="3257559">=</span>&nbsp;<span class="ident" id="3257561">val</span><span class="op" id="3257564">.</span><span class="ident" id="3257565">Int</span><span class="op" id="3257568">(</span><span class="op" id="3257569">)</span>&nbsp;<span class="op" id="3257571">!=</span>&nbsp;<span class="num" id="3257574">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257577">case</span>&nbsp;<span class="ident" id="3257582">reflect</span><span class="op" id="3257589">.</span><span class="ident" id="3257590">Float32</span><span class="op" id="3257597">,</span>&nbsp;<span class="ident" id="3257599">reflect</span><span class="op" id="3257606">.</span><span class="ident" id="3257607">Float64</span><span class="op" id="3257614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257618">truth</span>&nbsp;<span class="op" id="3257624">=</span>&nbsp;<span class="ident" id="3257626">val</span><span class="op" id="3257629">.</span><span class="ident" id="3257630">Float</span><span class="op" id="3257635">(</span><span class="op" id="3257636">)</span>&nbsp;<span class="op" id="3257638">!=</span>&nbsp;<span class="num" id="3257641">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257644">case</span>&nbsp;<span class="ident" id="3257649">reflect</span><span class="op" id="3257656">.</span><span class="ident" id="3257657">Uint</span><span class="op" id="3257661">,</span>&nbsp;<span class="ident" id="3257663">reflect</span><span class="op" id="3257670">.</span><span class="ident" id="3257671">Uint8</span><span class="op" id="3257676">,</span>&nbsp;<span class="ident" id="3257678">reflect</span><span class="op" id="3257685">.</span><span class="ident" id="3257686">Uint16</span><span class="op" id="3257692">,</span>&nbsp;<span class="ident" id="3257694">reflect</span><span class="op" id="3257701">.</span><span class="ident" id="3257702">Uint32</span><span class="op" id="3257708">,</span>&nbsp;<span class="ident" id="3257710">reflect</span><span class="op" id="3257717">.</span><span class="ident" id="3257718">Uint64</span><span class="op" id="3257724">,</span>&nbsp;<span class="ident" id="3257726">reflect</span><span class="op" id="3257733">.</span><span class="ident" id="3257734">Uintptr</span><span class="op" id="3257741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257745">truth</span>&nbsp;<span class="op" id="3257751">=</span>&nbsp;<span class="ident" id="3257753">val</span><span class="op" id="3257756">.</span><span class="ident" id="3257757">Uint</span><span class="op" id="3257761">(</span><span class="op" id="3257762">)</span>&nbsp;<span class="op" id="3257764">!=</span>&nbsp;<span class="num" id="3257767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257770">case</span>&nbsp;<span class="ident" id="3257775">reflect</span><span class="op" id="3257782">.</span><span class="ident" id="3257783">Struct</span><span class="op" id="3257789">:</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257793">truth</span>&nbsp;<span class="op" id="3257799">=</span>&nbsp;<span class="builtintype" id="3257801">true</span>&nbsp;<span class="comment" id="3257806">//&nbsp;Struct&nbsp;values&nbsp;are&nbsp;always&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257841">default</span><span class="op" id="3257848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257852">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3257860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257863">return</span>&nbsp;<span class="ident" id="3257870">truth</span><span class="op" id="3257875">,</span>&nbsp;<span class="builtintype" id="3257877">true</span><br>
<span class="lineno">240</span><span class="op" id="3257882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3257885">func</span>&nbsp;<span class="op" id="3257890">(</span><span class="ident" id="3257891">s</span>&nbsp;<span class="op" id="3257893">*</span><span class="ident" id="3257894">state</span><span class="op" id="3257899">)</span>&nbsp;<span class="ident" id="3257901">walkRange</span><span class="op" id="3257910">(</span><span class="ident" id="3257911">dot</span>&nbsp;<span class="ident" id="3257915">reflect</span><span class="op" id="3257922">.</span><span class="ident" id="3257923">Value</span><span class="op" id="3257928">,</span>&nbsp;<span class="ident" id="3257930">r</span>&nbsp;<span class="op" id="3257932">*</span><span class="ident" id="3257933">parse</span><span class="op" id="3257938">.</span><span class="ident" id="3257939">RangeNode</span><span class="op" id="3257948">)</span>&nbsp;<span class="op" id="3257950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257953">s</span><span class="op" id="3257954">.</span><span class="ident" id="3257955">at</span><span class="op" id="3257957">(</span><span class="ident" id="3257958">r</span><span class="op" id="3257959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3257962">defer</span>&nbsp;<span class="ident" id="3257968">s</span><span class="op" id="3257969">.</span><span class="ident" id="3257970">pop</span><span class="op" id="3257973">(</span><span class="ident" id="3257974">s</span><span class="op" id="3257975">.</span><span class="ident" id="3257976">mark</span><span class="op" id="3257980">(</span><span class="op" id="3257981">)</span><span class="op" id="3257982">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257985">val</span><span class="op" id="3257988">,</span>&nbsp;<span class="ident" id="3257990">_</span>&nbsp;<span class="op" id="3257992">:=</span>&nbsp;<span class="ident" id="3257995">indirect</span><span class="op" id="3258003">(</span><span class="ident" id="3258004">s</span><span class="op" id="3258005">.</span><span class="ident" id="3258006">evalPipeline</span><span class="op" id="3258018">(</span><span class="ident" id="3258019">dot</span><span class="op" id="3258022">,</span>&nbsp;<span class="ident" id="3258024">r</span><span class="op" id="3258025">.</span><span class="ident" id="3258026">Pipe</span><span class="op" id="3258030">)</span><span class="op" id="3258031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3258034">//&nbsp;mark&nbsp;top&nbsp;of&nbsp;stack&nbsp;before&nbsp;any&nbsp;variables&nbsp;in&nbsp;the&nbsp;body&nbsp;are&nbsp;pushed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258101">mark</span>&nbsp;<span class="op" id="3258106">:=</span>&nbsp;<span class="ident" id="3258109">s</span><span class="op" id="3258110">.</span><span class="ident" id="3258111">mark</span><span class="op" id="3258115">(</span><span class="op" id="3258116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258119">oneIteration</span>&nbsp;<span class="op" id="3258132">:=</span>&nbsp;<span class="keyword" id="3258135">func</span><span class="op" id="3258139">(</span><span class="ident" id="3258140">index</span><span class="op" id="3258145">,</span>&nbsp;<span class="ident" id="3258147">elem</span>&nbsp;<span class="ident" id="3258152">reflect</span><span class="op" id="3258159">.</span><span class="ident" id="3258160">Value</span><span class="op" id="3258165">)</span>&nbsp;<span class="op" id="3258167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3258171">//&nbsp;Set&nbsp;top&nbsp;var&nbsp;(lexically&nbsp;the&nbsp;second&nbsp;if&nbsp;there&nbsp;are&nbsp;two)&nbsp;to&nbsp;the&nbsp;element.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258244">if</span>&nbsp;<span class="builtinfunc" id="3258247">len</span><span class="op" id="3258250">(</span><span class="ident" id="3258251">r</span><span class="op" id="3258252">.</span><span class="ident" id="3258253">Pipe</span><span class="op" id="3258257">.</span><span class="ident" id="3258258">Decl</span><span class="op" id="3258262">)</span>&nbsp;<span class="op" id="3258264">&gt;</span>&nbsp;<span class="num" id="3258266">0</span>&nbsp;<span class="op" id="3258268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258273">s</span><span class="op" id="3258274">.</span><span class="ident" id="3258275">setVar</span><span class="op" id="3258281">(</span><span class="num" id="3258282">1</span><span class="op" id="3258283">,</span>&nbsp;<span class="ident" id="3258285">elem</span><span class="op" id="3258289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3258297">//&nbsp;Set&nbsp;next&nbsp;var&nbsp;(lexically&nbsp;the&nbsp;first&nbsp;if&nbsp;there&nbsp;are&nbsp;two)&nbsp;to&nbsp;the&nbsp;index.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258368">if</span>&nbsp;<span class="builtinfunc" id="3258371">len</span><span class="op" id="3258374">(</span><span class="ident" id="3258375">r</span><span class="op" id="3258376">.</span><span class="ident" id="3258377">Pipe</span><span class="op" id="3258381">.</span><span class="ident" id="3258382">Decl</span><span class="op" id="3258386">)</span>&nbsp;<span class="op" id="3258388">&gt;</span>&nbsp;<span class="num" id="3258390">1</span>&nbsp;<span class="op" id="3258392">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258397">s</span><span class="op" id="3258398">.</span><span class="ident" id="3258399">setVar</span><span class="op" id="3258405">(</span><span class="num" id="3258406">2</span><span class="op" id="3258407">,</span>&nbsp;<span class="ident" id="3258409">index</span><span class="op" id="3258414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258422">s</span><span class="op" id="3258423">.</span><span class="ident" id="3258424">walk</span><span class="op" id="3258428">(</span><span class="ident" id="3258429">elem</span><span class="op" id="3258433">,</span>&nbsp;<span class="ident" id="3258435">r</span><span class="op" id="3258436">.</span><span class="ident" id="3258437">List</span><span class="op" id="3258441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258445">s</span><span class="op" id="3258446">.</span><span class="ident" id="3258447">pop</span><span class="op" id="3258450">(</span><span class="ident" id="3258451">mark</span><span class="op" id="3258455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258458">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258461">switch</span>&nbsp;<span class="ident" id="3258468">val</span><span class="op" id="3258471">.</span><span class="ident" id="3258472">Kind</span><span class="op" id="3258476">(</span><span class="op" id="3258477">)</span>&nbsp;<span class="op" id="3258479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258482">case</span>&nbsp;<span class="ident" id="3258487">reflect</span><span class="op" id="3258494">.</span><span class="ident" id="3258495">Array</span><span class="op" id="3258500">,</span>&nbsp;<span class="ident" id="3258502">reflect</span><span class="op" id="3258509">.</span><span class="ident" id="3258510">Slice</span><span class="op" id="3258515">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258519">if</span>&nbsp;<span class="ident" id="3258522">val</span><span class="op" id="3258525">.</span><span class="ident" id="3258526">Len</span><span class="op" id="3258529">(</span><span class="op" id="3258530">)</span>&nbsp;<span class="op" id="3258532">==</span>&nbsp;<span class="num" id="3258535">0</span>&nbsp;<span class="op" id="3258537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258542">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258550">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258554">for</span>&nbsp;<span class="ident" id="3258558">i</span>&nbsp;<span class="op" id="3258560">:=</span>&nbsp;<span class="num" id="3258563">0</span><span class="op" id="3258564">;</span>&nbsp;<span class="ident" id="3258566">i</span>&nbsp;<span class="op" id="3258568">&lt;</span>&nbsp;<span class="ident" id="3258570">val</span><span class="op" id="3258573">.</span><span class="ident" id="3258574">Len</span><span class="op" id="3258577">(</span><span class="op" id="3258578">)</span><span class="op" id="3258579">;</span>&nbsp;<span class="ident" id="3258581">i</span><span class="op" id="3258582">++</span>&nbsp;<span class="op" id="3258585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258590">oneIteration</span><span class="op" id="3258602">(</span><span class="ident" id="3258603">reflect</span><span class="op" id="3258610">.</span><span class="ident" id="3258611">ValueOf</span><span class="op" id="3258618">(</span><span class="ident" id="3258619">i</span><span class="op" id="3258620">)</span><span class="op" id="3258621">,</span>&nbsp;<span class="ident" id="3258623">val</span><span class="op" id="3258626">.</span><span class="ident" id="3258627">Index</span><span class="op" id="3258632">(</span><span class="ident" id="3258633">i</span><span class="op" id="3258634">)</span><span class="op" id="3258635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258643">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258651">case</span>&nbsp;<span class="ident" id="3258656">reflect</span><span class="op" id="3258663">.</span><span class="ident" id="3258664">Map</span><span class="op" id="3258667">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258671">if</span>&nbsp;<span class="ident" id="3258674">val</span><span class="op" id="3258677">.</span><span class="ident" id="3258678">Len</span><span class="op" id="3258681">(</span><span class="op" id="3258682">)</span>&nbsp;<span class="op" id="3258684">==</span>&nbsp;<span class="num" id="3258687">0</span>&nbsp;<span class="op" id="3258689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258694">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258706">for</span>&nbsp;<span class="ident" id="3258710">_</span><span class="op" id="3258711">,</span>&nbsp;<span class="ident" id="3258713">key</span>&nbsp;<span class="op" id="3258717">:=</span>&nbsp;<span class="keyword" id="3258720">range</span>&nbsp;<span class="ident" id="3258726">sortKeys</span><span class="op" id="3258734">(</span><span class="ident" id="3258735">val</span><span class="op" id="3258738">.</span><span class="ident" id="3258739">MapKeys</span><span class="op" id="3258746">(</span><span class="op" id="3258747">)</span><span class="op" id="3258748">)</span>&nbsp;<span class="op" id="3258750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258755">oneIteration</span><span class="op" id="3258767">(</span><span class="ident" id="3258768">key</span><span class="op" id="3258771">,</span>&nbsp;<span class="ident" id="3258773">val</span><span class="op" id="3258776">.</span><span class="ident" id="3258777">MapIndex</span><span class="op" id="3258785">(</span><span class="ident" id="3258786">key</span><span class="op" id="3258789">)</span><span class="op" id="3258790">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258798">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258806">case</span>&nbsp;<span class="ident" id="3258811">reflect</span><span class="op" id="3258818">.</span><span class="ident" id="3258819">Chan</span><span class="op" id="3258823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258827">if</span>&nbsp;<span class="ident" id="3258830">val</span><span class="op" id="3258833">.</span><span class="ident" id="3258834">IsNil</span><span class="op" id="3258839">(</span><span class="op" id="3258840">)</span>&nbsp;<span class="op" id="3258842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258847">break</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258859">i</span>&nbsp;<span class="op" id="3258861">:=</span>&nbsp;<span class="num" id="3258864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258868">for</span>&nbsp;<span class="op" id="3258872">;</span>&nbsp;<span class="op" id="3258874">;</span>&nbsp;<span class="ident" id="3258876">i</span><span class="op" id="3258877">++</span>&nbsp;<span class="op" id="3258880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258885">elem</span><span class="op" id="3258889">,</span>&nbsp;<span class="ident" id="3258891">ok</span>&nbsp;<span class="op" id="3258894">:=</span>&nbsp;<span class="ident" id="3258897">val</span><span class="op" id="3258900">.</span><span class="ident" id="3258901">Recv</span><span class="op" id="3258905">(</span><span class="op" id="3258906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258911">if</span>&nbsp;<span class="op" id="3258914">!</span><span class="ident" id="3258915">ok</span>&nbsp;<span class="op" id="3258918">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258924">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3258938">oneIteration</span><span class="op" id="3258950">(</span><span class="ident" id="3258951">reflect</span><span class="op" id="3258958">.</span><span class="ident" id="3258959">ValueOf</span><span class="op" id="3258966">(</span><span class="ident" id="3258967">i</span><span class="op" id="3258968">)</span><span class="op" id="3258969">,</span>&nbsp;<span class="ident" id="3258971">elem</span><span class="op" id="3258975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3258979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258983">if</span>&nbsp;<span class="ident" id="3258986">i</span>&nbsp;<span class="op" id="3258988">==</span>&nbsp;<span class="num" id="3258991">0</span>&nbsp;<span class="op" id="3258993">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3258998">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3259006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3259010">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3259018">case</span>&nbsp;<span class="ident" id="3259023">reflect</span><span class="op" id="3259030">.</span><span class="ident" id="3259031">Invalid</span><span class="op" id="3259038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3259042">break</span>&nbsp;<span class="comment" id="3259048">//&nbsp;An&nbsp;invalid&nbsp;value&nbsp;is&nbsp;likely&nbsp;a&nbsp;nil&nbsp;map,&nbsp;etc.&nbsp;and&nbsp;acts&nbsp;like&nbsp;an&nbsp;empty&nbsp;map.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3259123">default</span><span class="op" id="3259130">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259134">s</span><span class="op" id="3259135">.</span><span class="ident" id="3259136">errorf</span><span class="op" id="3259142">(</span><span class="string" id="3259143">&#34;range&nbsp;can&#39;t&nbsp;iterate&nbsp;over&nbsp;%v&#34;</span><span class="op" id="3259172">,</span>&nbsp;<span class="ident" id="3259174">val</span><span class="op" id="3259177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3259180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3259183">if</span>&nbsp;<span class="ident" id="3259186">r</span><span class="op" id="3259187">.</span><span class="ident" id="3259188">ElseList</span>&nbsp;<span class="op" id="3259197">!=</span>&nbsp;<span class="builtintype" id="3259200">nil</span>&nbsp;<span class="op" id="3259204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259208">s</span><span class="op" id="3259209">.</span><span class="ident" id="3259210">walk</span><span class="op" id="3259214">(</span><span class="ident" id="3259215">dot</span><span class="op" id="3259218">,</span>&nbsp;<span class="ident" id="3259220">r</span><span class="op" id="3259221">.</span><span class="ident" id="3259222">ElseList</span><span class="op" id="3259230">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3259233">}</span><br>
<span class="lineno"></span><span class="op" id="3259235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3259238">func</span>&nbsp;<span class="op" id="3259243">(</span><span class="ident" id="3259244">s</span>&nbsp;<span class="op" id="3259246">*</span><span class="ident" id="3259247">state</span><span class="op" id="3259252">)</span>&nbsp;<span class="ident" id="3259254">walkTemplate</span><span class="op" id="3259266">(</span><span class="ident" id="3259267">dot</span>&nbsp;<span class="ident" id="3259271">reflect</span><span class="op" id="3259278">.</span><span class="ident" id="3259279">Value</span><span class="op" id="3259284">,</span>&nbsp;<span class="ident" id="3259286">t</span>&nbsp;<span class="op" id="3259288">*</span><span class="ident" id="3259289">parse</span><span class="op" id="3259294">.</span><span class="ident" id="3259295">TemplateNode</span><span class="op" id="3259307">)</span>&nbsp;<span class="op" id="3259309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259312">s</span><span class="op" id="3259313">.</span><span class="ident" id="3259314">at</span><span class="op" id="3259316">(</span><span class="ident" id="3259317">t</span><span class="op" id="3259318">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259321">tmpl</span>&nbsp;<span class="op" id="3259326">:=</span>&nbsp;<span class="ident" id="3259329">s</span><span class="op" id="3259330">.</span><span class="ident" id="3259331">tmpl</span><span class="op" id="3259335">.</span><span class="ident" id="3259336">tmpl</span><span class="op" id="3259340">[</span><span class="ident" id="3259341">t</span><span class="op" id="3259342">.</span><span class="ident" id="3259343">Name</span><span class="op" id="3259347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3259350">if</span>&nbsp;<span class="ident" id="3259353">tmpl</span>&nbsp;<span class="op" id="3259358">==</span>&nbsp;<span class="builtintype" id="3259361">nil</span>&nbsp;<span class="op" id="3259365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259369">s</span><span class="op" id="3259370">.</span><span class="ident" id="3259371">errorf</span><span class="op" id="3259377">(</span><span class="string" id="3259378">&#34;template&nbsp;%q&nbsp;not&nbsp;defined&#34;</span><span class="op" id="3259403">,</span>&nbsp;<span class="ident" id="3259405">t</span><span class="op" id="3259406">.</span><span class="ident" id="3259407">Name</span><span class="op" id="3259411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3259414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3259417">//&nbsp;Variables&nbsp;declared&nbsp;by&nbsp;the&nbsp;pipeline&nbsp;persist.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259465">dot</span>&nbsp;<span class="op" id="3259469">=</span>&nbsp;<span class="ident" id="3259471">s</span><span class="op" id="3259472">.</span><span class="ident" id="3259473">evalPipeline</span><span class="op" id="3259485">(</span><span class="ident" id="3259486">dot</span><span class="op" id="3259489">,</span>&nbsp;<span class="ident" id="3259491">t</span><span class="op" id="3259492">.</span><span class="ident" id="3259493">Pipe</span><span class="op" id="3259497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259500">newState</span>&nbsp;<span class="op" id="3259509">:=</span>&nbsp;<span class="op" id="3259512">*</span><span class="ident" id="3259513">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259516">newState</span><span class="op" id="3259524">.</span><span class="ident" id="3259525">tmpl</span>&nbsp;<span class="op" id="3259530">=</span>&nbsp;<span class="ident" id="3259532">tmpl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3259538">//&nbsp;No&nbsp;dynamic&nbsp;scoping:&nbsp;template&nbsp;invocations&nbsp;inherit&nbsp;no&nbsp;variables.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259605">newState</span><span class="op" id="3259613">.</span><span class="ident" id="3259614">vars</span>&nbsp;<span class="op" id="3259619">=</span>&nbsp;<span class="op" id="3259621">[</span><span class="op" id="3259622">]</span><span class="ident" id="3259623">variable</span><span class="op" id="3259631">{</span><span class="op" id="3259632">{</span><span class="string" id="3259633">&#34;$&#34;</span><span class="op" id="3259636">,</span>&nbsp;<span class="ident" id="3259638">dot</span><span class="op" id="3259641">}</span><span class="op" id="3259642">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3259645">newState</span><span class="op" id="3259653">.</span><span class="ident" id="3259654">walk</span><span class="op" id="3259658">(</span><span class="ident" id="3259659">dot</span><span class="op" id="3259662">,</span>&nbsp;<span class="ident" id="3259664">tmpl</span><span class="op" id="3259668">.</span><span class="ident" id="3259669">Root</span><span class="op" id="3259673">)</span><br>
<span class="lineno"></span><span class="op" id="3259675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3259678">//&nbsp;Eval&nbsp;functions&nbsp;evaluate&nbsp;pipelines,&nbsp;commands,&nbsp;and&nbsp;their&nbsp;elements&nbsp;and&nbsp;extract</span><br>
<span class="lineno"></span><span class="comment" id="3259757">//&nbsp;values&nbsp;from&nbsp;the&nbsp;data&nbsp;structure&nbsp;by&nbsp;examining&nbsp;fields,&nbsp;calling&nbsp;methods,&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">320</span><span class="comment" id="3259840">//&nbsp;The&nbsp;printing&nbsp;of&nbsp;those&nbsp;values&nbsp;happens&nbsp;only&nbsp;through&nbsp;walk&nbsp;functions.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3259910">//&nbsp;evalPipeline&nbsp;returns&nbsp;the&nbsp;value&nbsp;acquired&nbsp;by&nbsp;evaluating&nbsp;a&nbsp;pipeline.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3259986">//&nbsp;pipeline&nbsp;has&nbsp;a&nbsp;variable&nbsp;declaration,&nbsp;the&nbsp;variable&nbsp;will&nbsp;be&nbsp;pushed&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3260061">//&nbsp;stack.&nbsp;Callers&nbsp;should&nbsp;therefore&nbsp;pop&nbsp;the&nbsp;stack&nbsp;after&nbsp;they&nbsp;are&nbsp;finished</span><br>
<span class="lineno">325</span><span class="comment" id="3260134">//&nbsp;executing&nbsp;commands&nbsp;depending&nbsp;on&nbsp;the&nbsp;pipeline&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3260189">func</span>&nbsp;<span class="op" id="3260194">(</span><span class="ident" id="3260195">s</span>&nbsp;<span class="op" id="3260197">*</span><span class="ident" id="3260198">state</span><span class="op" id="3260203">)</span>&nbsp;<span class="ident" id="3260205">evalPipeline</span><span class="op" id="3260217">(</span><span class="ident" id="3260218">dot</span>&nbsp;<span class="ident" id="3260222">reflect</span><span class="op" id="3260229">.</span><span class="ident" id="3260230">Value</span><span class="op" id="3260235">,</span>&nbsp;<span class="ident" id="3260237">pipe</span>&nbsp;<span class="op" id="3260242">*</span><span class="ident" id="3260243">parse</span><span class="op" id="3260248">.</span><span class="ident" id="3260249">PipeNode</span><span class="op" id="3260257">)</span>&nbsp;<span class="op" id="3260259">(</span><span class="ident" id="3260260">value</span>&nbsp;<span class="ident" id="3260266">reflect</span><span class="op" id="3260273">.</span><span class="ident" id="3260274">Value</span><span class="op" id="3260279">)</span>&nbsp;<span class="op" id="3260281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260284">if</span>&nbsp;<span class="ident" id="3260287">pipe</span>&nbsp;<span class="op" id="3260292">==</span>&nbsp;<span class="builtintype" id="3260295">nil</span>&nbsp;<span class="op" id="3260299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260303">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3260311">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3260314">s</span><span class="op" id="3260315">.</span><span class="ident" id="3260316">at</span><span class="op" id="3260318">(</span><span class="ident" id="3260319">pipe</span><span class="op" id="3260323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260326">for</span>&nbsp;<span class="ident" id="3260330">_</span><span class="op" id="3260331">,</span>&nbsp;<span class="ident" id="3260333">cmd</span>&nbsp;<span class="op" id="3260337">:=</span>&nbsp;<span class="keyword" id="3260340">range</span>&nbsp;<span class="ident" id="3260346">pipe</span><span class="op" id="3260350">.</span><span class="ident" id="3260351">Cmds</span>&nbsp;<span class="op" id="3260356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3260360">value</span>&nbsp;<span class="op" id="3260366">=</span>&nbsp;<span class="ident" id="3260368">s</span><span class="op" id="3260369">.</span><span class="ident" id="3260370">evalCommand</span><span class="op" id="3260381">(</span><span class="ident" id="3260382">dot</span><span class="op" id="3260385">,</span>&nbsp;<span class="ident" id="3260387">cmd</span><span class="op" id="3260390">,</span>&nbsp;<span class="ident" id="3260392">value</span><span class="op" id="3260397">)</span>&nbsp;<span class="comment" id="3260399">//&nbsp;previous&nbsp;value&nbsp;is&nbsp;this&nbsp;one&#39;s&nbsp;final&nbsp;arg.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3260444">//&nbsp;If&nbsp;the&nbsp;object&nbsp;has&nbsp;type&nbsp;interface{},&nbsp;dig&nbsp;down&nbsp;one&nbsp;level&nbsp;to&nbsp;the&nbsp;thing&nbsp;inside.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260525">if</span>&nbsp;<span class="ident" id="3260528">value</span><span class="op" id="3260533">.</span><span class="ident" id="3260534">Kind</span><span class="op" id="3260538">(</span><span class="op" id="3260539">)</span>&nbsp;<span class="op" id="3260541">==</span>&nbsp;<span class="ident" id="3260544">reflect</span><span class="op" id="3260551">.</span><span class="ident" id="3260552">Interface</span>&nbsp;<span class="op" id="3260562">&amp;&amp;</span>&nbsp;<span class="ident" id="3260565">value</span><span class="op" id="3260570">.</span><span class="ident" id="3260571">Type</span><span class="op" id="3260575">(</span><span class="op" id="3260576">)</span><span class="op" id="3260577">.</span><span class="ident" id="3260578">NumMethod</span><span class="op" id="3260587">(</span><span class="op" id="3260588">)</span>&nbsp;<span class="op" id="3260590">==</span>&nbsp;<span class="num" id="3260593">0</span>&nbsp;<span class="op" id="3260595">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3260600">value</span>&nbsp;<span class="op" id="3260606">=</span>&nbsp;<span class="ident" id="3260608">reflect</span><span class="op" id="3260615">.</span><span class="ident" id="3260616">ValueOf</span><span class="op" id="3260623">(</span><span class="ident" id="3260624">value</span><span class="op" id="3260629">.</span><span class="ident" id="3260630">Interface</span><span class="op" id="3260639">(</span><span class="op" id="3260640">)</span><span class="op" id="3260641">)</span>&nbsp;<span class="comment" id="3260643">//&nbsp;lovely!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3260656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3260659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260662">for</span>&nbsp;<span class="ident" id="3260666">_</span><span class="op" id="3260667">,</span>&nbsp;<span class="ident" id="3260669">variable</span>&nbsp;<span class="op" id="3260678">:=</span>&nbsp;<span class="keyword" id="3260681">range</span>&nbsp;<span class="ident" id="3260687">pipe</span><span class="op" id="3260691">.</span><span class="ident" id="3260692">Decl</span>&nbsp;<span class="op" id="3260697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3260701">s</span><span class="op" id="3260702">.</span><span class="ident" id="3260703">push</span><span class="op" id="3260707">(</span><span class="ident" id="3260708">variable</span><span class="op" id="3260716">.</span><span class="ident" id="3260717">Ident</span><span class="op" id="3260722">[</span><span class="num" id="3260723">0</span><span class="op" id="3260724">]</span><span class="op" id="3260725">,</span>&nbsp;<span class="ident" id="3260727">value</span><span class="op" id="3260732">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3260735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260738">return</span>&nbsp;<span class="ident" id="3260745">value</span><br>
<span class="lineno"></span><span class="op" id="3260751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3260754">func</span>&nbsp;<span class="op" id="3260759">(</span><span class="ident" id="3260760">s</span>&nbsp;<span class="op" id="3260762">*</span><span class="ident" id="3260763">state</span><span class="op" id="3260768">)</span>&nbsp;<span class="ident" id="3260770">notAFunction</span><span class="op" id="3260782">(</span><span class="ident" id="3260783">args</span>&nbsp;<span class="op" id="3260788">[</span><span class="op" id="3260789">]</span><span class="ident" id="3260790">parse</span><span class="op" id="3260795">.</span><span class="ident" id="3260796">Node</span><span class="op" id="3260800">,</span>&nbsp;<span class="ident" id="3260802">final</span>&nbsp;<span class="ident" id="3260808">reflect</span><span class="op" id="3260815">.</span><span class="ident" id="3260816">Value</span><span class="op" id="3260821">)</span>&nbsp;<span class="op" id="3260823">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3260826">if</span>&nbsp;<span class="builtinfunc" id="3260829">len</span><span class="op" id="3260832">(</span><span class="ident" id="3260833">args</span><span class="op" id="3260837">)</span>&nbsp;<span class="op" id="3260839">&gt;</span>&nbsp;<span class="num" id="3260841">1</span>&nbsp;<span class="op" id="3260843">||</span>&nbsp;<span class="ident" id="3260846">final</span><span class="op" id="3260851">.</span><span class="ident" id="3260852">IsValid</span><span class="op" id="3260859">(</span><span class="op" id="3260860">)</span>&nbsp;<span class="op" id="3260862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3260866">s</span><span class="op" id="3260867">.</span><span class="ident" id="3260868">errorf</span><span class="op" id="3260874">(</span><span class="string" id="3260875">&#34;can&#39;t&nbsp;give&nbsp;argument&nbsp;to&nbsp;non-function&nbsp;%s&#34;</span><span class="op" id="3260915">,</span>&nbsp;<span class="ident" id="3260917">args</span><span class="op" id="3260921">[</span><span class="num" id="3260922">0</span><span class="op" id="3260923">]</span><span class="op" id="3260924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3260927">}</span><br>
<span class="lineno"></span><span class="op" id="3260929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="3260932">func</span>&nbsp;<span class="op" id="3260937">(</span><span class="ident" id="3260938">s</span>&nbsp;<span class="op" id="3260940">*</span><span class="ident" id="3260941">state</span><span class="op" id="3260946">)</span>&nbsp;<span class="ident" id="3260948">evalCommand</span><span class="op" id="3260959">(</span><span class="ident" id="3260960">dot</span>&nbsp;<span class="ident" id="3260964">reflect</span><span class="op" id="3260971">.</span><span class="ident" id="3260972">Value</span><span class="op" id="3260977">,</span>&nbsp;<span class="ident" id="3260979">cmd</span>&nbsp;<span class="op" id="3260983">*</span><span class="ident" id="3260984">parse</span><span class="op" id="3260989">.</span><span class="ident" id="3260990">CommandNode</span><span class="op" id="3261001">,</span>&nbsp;<span class="ident" id="3261003">final</span>&nbsp;<span class="ident" id="3261009">reflect</span><span class="op" id="3261016">.</span><span class="ident" id="3261017">Value</span><span class="op" id="3261022">)</span>&nbsp;<span class="ident" id="3261024">reflect</span><span class="op" id="3261031">.</span><span class="ident" id="3261032">Value</span>&nbsp;<span class="op" id="3261038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3261041">firstWord</span>&nbsp;<span class="op" id="3261051">:=</span>&nbsp;<span class="ident" id="3261054">cmd</span><span class="op" id="3261057">.</span><span class="ident" id="3261058">Args</span><span class="op" id="3261062">[</span><span class="num" id="3261063">0</span><span class="op" id="3261064">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261067">switch</span>&nbsp;<span class="ident" id="3261074">n</span>&nbsp;<span class="op" id="3261076">:=</span>&nbsp;<span class="ident" id="3261079">firstWord</span><span class="op" id="3261088">.</span><span class="op" id="3261089">(</span><span class="keyword" id="3261090">type</span><span class="op" id="3261094">)</span>&nbsp;<span class="op" id="3261096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261099">case</span>&nbsp;<span class="op" id="3261104">*</span><span class="ident" id="3261105">parse</span><span class="op" id="3261110">.</span><span class="ident" id="3261111">FieldNode</span><span class="op" id="3261120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261124">return</span>&nbsp;<span class="ident" id="3261131">s</span><span class="op" id="3261132">.</span><span class="ident" id="3261133">evalFieldNode</span><span class="op" id="3261146">(</span><span class="ident" id="3261147">dot</span><span class="op" id="3261150">,</span>&nbsp;<span class="ident" id="3261152">n</span><span class="op" id="3261153">,</span>&nbsp;<span class="ident" id="3261155">cmd</span><span class="op" id="3261158">.</span><span class="ident" id="3261159">Args</span><span class="op" id="3261163">,</span>&nbsp;<span class="ident" id="3261165">final</span><span class="op" id="3261170">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261173">case</span>&nbsp;<span class="op" id="3261178">*</span><span class="ident" id="3261179">parse</span><span class="op" id="3261184">.</span><span class="ident" id="3261185">ChainNode</span><span class="op" id="3261194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261198">return</span>&nbsp;<span class="ident" id="3261205">s</span><span class="op" id="3261206">.</span><span class="ident" id="3261207">evalChainNode</span><span class="op" id="3261220">(</span><span class="ident" id="3261221">dot</span><span class="op" id="3261224">,</span>&nbsp;<span class="ident" id="3261226">n</span><span class="op" id="3261227">,</span>&nbsp;<span class="ident" id="3261229">cmd</span><span class="op" id="3261232">.</span><span class="ident" id="3261233">Args</span><span class="op" id="3261237">,</span>&nbsp;<span class="ident" id="3261239">final</span><span class="op" id="3261244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261247">case</span>&nbsp;<span class="op" id="3261252">*</span><span class="ident" id="3261253">parse</span><span class="op" id="3261258">.</span><span class="ident" id="3261259">IdentifierNode</span><span class="op" id="3261273">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3261277">//&nbsp;Must&nbsp;be&nbsp;a&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261302">return</span>&nbsp;<span class="ident" id="3261309">s</span><span class="op" id="3261310">.</span><span class="ident" id="3261311">evalFunction</span><span class="op" id="3261323">(</span><span class="ident" id="3261324">dot</span><span class="op" id="3261327">,</span>&nbsp;<span class="ident" id="3261329">n</span><span class="op" id="3261330">,</span>&nbsp;<span class="ident" id="3261332">cmd</span><span class="op" id="3261335">,</span>&nbsp;<span class="ident" id="3261337">cmd</span><span class="op" id="3261340">.</span><span class="ident" id="3261341">Args</span><span class="op" id="3261345">,</span>&nbsp;<span class="ident" id="3261347">final</span><span class="op" id="3261352">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261355">case</span>&nbsp;<span class="op" id="3261360">*</span><span class="ident" id="3261361">parse</span><span class="op" id="3261366">.</span><span class="ident" id="3261367">PipeNode</span><span class="op" id="3261375">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3261379">//&nbsp;Parenthesized&nbsp;pipeline.&nbsp;The&nbsp;arguments&nbsp;are&nbsp;all&nbsp;inside&nbsp;the&nbsp;pipeline;&nbsp;final&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261469">return</span>&nbsp;<span class="ident" id="3261476">s</span><span class="op" id="3261477">.</span><span class="ident" id="3261478">evalPipeline</span><span class="op" id="3261490">(</span><span class="ident" id="3261491">dot</span><span class="op" id="3261494">,</span>&nbsp;<span class="ident" id="3261496">n</span><span class="op" id="3261497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261500">case</span>&nbsp;<span class="op" id="3261505">*</span><span class="ident" id="3261506">parse</span><span class="op" id="3261511">.</span><span class="ident" id="3261512">VariableNode</span><span class="op" id="3261524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261528">return</span>&nbsp;<span class="ident" id="3261535">s</span><span class="op" id="3261536">.</span><span class="ident" id="3261537">evalVariableNode</span><span class="op" id="3261553">(</span><span class="ident" id="3261554">dot</span><span class="op" id="3261557">,</span>&nbsp;<span class="ident" id="3261559">n</span><span class="op" id="3261560">,</span>&nbsp;<span class="ident" id="3261562">cmd</span><span class="op" id="3261565">.</span><span class="ident" id="3261566">Args</span><span class="op" id="3261570">,</span>&nbsp;<span class="ident" id="3261572">final</span><span class="op" id="3261577">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3261580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3261583">s</span><span class="op" id="3261584">.</span><span class="ident" id="3261585">at</span><span class="op" id="3261587">(</span><span class="ident" id="3261588">firstWord</span><span class="op" id="3261597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3261600">s</span><span class="op" id="3261601">.</span><span class="ident" id="3261602">notAFunction</span><span class="op" id="3261614">(</span><span class="ident" id="3261615">cmd</span><span class="op" id="3261618">.</span><span class="ident" id="3261619">Args</span><span class="op" id="3261623">,</span>&nbsp;<span class="ident" id="3261625">final</span><span class="op" id="3261630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261633">switch</span>&nbsp;<span class="ident" id="3261640">word</span>&nbsp;<span class="op" id="3261645">:=</span>&nbsp;<span class="ident" id="3261648">firstWord</span><span class="op" id="3261657">.</span><span class="op" id="3261658">(</span><span class="keyword" id="3261659">type</span><span class="op" id="3261663">)</span>&nbsp;<span class="op" id="3261665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261668">case</span>&nbsp;<span class="op" id="3261673">*</span><span class="ident" id="3261674">parse</span><span class="op" id="3261679">.</span><span class="ident" id="3261680">BoolNode</span><span class="op" id="3261688">:</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261692">return</span>&nbsp;<span class="ident" id="3261699">reflect</span><span class="op" id="3261706">.</span><span class="ident" id="3261707">ValueOf</span><span class="op" id="3261714">(</span><span class="ident" id="3261715">word</span><span class="op" id="3261719">.</span><span class="ident" id="3261720">True</span><span class="op" id="3261724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261727">case</span>&nbsp;<span class="op" id="3261732">*</span><span class="ident" id="3261733">parse</span><span class="op" id="3261738">.</span><span class="ident" id="3261739">DotNode</span><span class="op" id="3261746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261750">return</span>&nbsp;<span class="ident" id="3261757">dot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261762">case</span>&nbsp;<span class="op" id="3261767">*</span><span class="ident" id="3261768">parse</span><span class="op" id="3261773">.</span><span class="ident" id="3261774">NilNode</span><span class="op" id="3261781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3261785">s</span><span class="op" id="3261786">.</span><span class="ident" id="3261787">errorf</span><span class="op" id="3261793">(</span><span class="string" id="3261794">&#34;nil&nbsp;is&nbsp;not&nbsp;a&nbsp;command&#34;</span><span class="op" id="3261816">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261819">case</span>&nbsp;<span class="op" id="3261824">*</span><span class="ident" id="3261825">parse</span><span class="op" id="3261830">.</span><span class="ident" id="3261831">NumberNode</span><span class="op" id="3261841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261845">return</span>&nbsp;<span class="ident" id="3261852">s</span><span class="op" id="3261853">.</span><span class="ident" id="3261854">idealConstant</span><span class="op" id="3261867">(</span><span class="ident" id="3261868">word</span><span class="op" id="3261872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261875">case</span>&nbsp;<span class="op" id="3261880">*</span><span class="ident" id="3261881">parse</span><span class="op" id="3261886">.</span><span class="ident" id="3261887">StringNode</span><span class="op" id="3261897">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3261901">return</span>&nbsp;<span class="ident" id="3261908">reflect</span><span class="op" id="3261915">.</span><span class="ident" id="3261916">ValueOf</span><span class="op" id="3261923">(</span><span class="ident" id="3261924">word</span><span class="op" id="3261928">.</span><span class="ident" id="3261929">Text</span><span class="op" id="3261933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3261936">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3261939">s</span><span class="op" id="3261940">.</span><span class="ident" id="3261941">errorf</span><span class="op" id="3261947">(</span><span class="string" id="3261948">&#34;can&#39;t&nbsp;evaluate&nbsp;command&nbsp;%q&#34;</span><span class="op" id="3261975">,</span>&nbsp;<span class="ident" id="3261977">firstWord</span><span class="op" id="3261986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3261989">panic</span><span class="op" id="3261994">(</span><span class="string" id="3261995">&#34;not&nbsp;reached&#34;</span><span class="op" id="3262008">)</span><br>
<span class="lineno"></span><span class="op" id="3262010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262013">//&nbsp;idealConstant&nbsp;is&nbsp;called&nbsp;to&nbsp;return&nbsp;the&nbsp;value&nbsp;of&nbsp;a&nbsp;number&nbsp;in&nbsp;a&nbsp;context&nbsp;where</span><br>
<span class="lineno">385</span><span class="comment" id="3262091">//&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;the&nbsp;type.&nbsp;In&nbsp;that&nbsp;case,&nbsp;the&nbsp;syntax&nbsp;of&nbsp;the&nbsp;number&nbsp;tells&nbsp;us</span><br>
<span class="lineno"></span><span class="comment" id="3262166">//&nbsp;its&nbsp;type,&nbsp;and&nbsp;we&nbsp;use&nbsp;Go&nbsp;rules&nbsp;to&nbsp;resolve.&nbsp;&nbsp;Note&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;thing&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3262243">//&nbsp;a&nbsp;uint&nbsp;ideal&nbsp;constant&nbsp;in&nbsp;this&nbsp;situation&nbsp;-&nbsp;the&nbsp;value&nbsp;must&nbsp;be&nbsp;of&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3262319">func</span>&nbsp;<span class="op" id="3262324">(</span><span class="ident" id="3262325">s</span>&nbsp;<span class="op" id="3262327">*</span><span class="ident" id="3262328">state</span><span class="op" id="3262333">)</span>&nbsp;<span class="ident" id="3262335">idealConstant</span><span class="op" id="3262348">(</span><span class="ident" id="3262349">constant</span>&nbsp;<span class="op" id="3262358">*</span><span class="ident" id="3262359">parse</span><span class="op" id="3262364">.</span><span class="ident" id="3262365">NumberNode</span><span class="op" id="3262375">)</span>&nbsp;<span class="ident" id="3262377">reflect</span><span class="op" id="3262384">.</span><span class="ident" id="3262385">Value</span>&nbsp;<span class="op" id="3262391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3262394">//&nbsp;These&nbsp;are&nbsp;ideal&nbsp;constants&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;the&nbsp;type</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3262451">//&nbsp;and&nbsp;we&nbsp;have&nbsp;no&nbsp;context.&nbsp;&nbsp;(If&nbsp;it&nbsp;was&nbsp;a&nbsp;method&nbsp;argument,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3262510">//&nbsp;we&#39;d&nbsp;know&nbsp;what&nbsp;we&nbsp;need.)&nbsp;The&nbsp;syntax&nbsp;guides&nbsp;us&nbsp;to&nbsp;some&nbsp;extent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3262576">s</span><span class="op" id="3262577">.</span><span class="ident" id="3262578">at</span><span class="op" id="3262580">(</span><span class="ident" id="3262581">constant</span><span class="op" id="3262589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262592">switch</span>&nbsp;<span class="op" id="3262599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262602">case</span>&nbsp;<span class="ident" id="3262607">constant</span><span class="op" id="3262615">.</span><span class="ident" id="3262616">IsComplex</span><span class="op" id="3262625">:</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262629">return</span>&nbsp;<span class="ident" id="3262636">reflect</span><span class="op" id="3262643">.</span><span class="ident" id="3262644">ValueOf</span><span class="op" id="3262651">(</span><span class="ident" id="3262652">constant</span><span class="op" id="3262660">.</span><span class="ident" id="3262661">Complex128</span><span class="op" id="3262671">)</span>&nbsp;<span class="comment" id="3262673">//&nbsp;incontrovertible.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262695">case</span>&nbsp;<span class="ident" id="3262700">constant</span><span class="op" id="3262708">.</span><span class="ident" id="3262709">IsFloat</span>&nbsp;<span class="op" id="3262717">&amp;&amp;</span>&nbsp;<span class="op" id="3262720">!</span><span class="ident" id="3262721">isHexConstant</span><span class="op" id="3262734">(</span><span class="ident" id="3262735">constant</span><span class="op" id="3262743">.</span><span class="ident" id="3262744">Text</span><span class="op" id="3262748">)</span>&nbsp;<span class="op" id="3262750">&amp;&amp;</span>&nbsp;<span class="ident" id="3262753">strings</span><span class="op" id="3262760">.</span><span class="ident" id="3262761">IndexAny</span><span class="op" id="3262769">(</span><span class="ident" id="3262770">constant</span><span class="op" id="3262778">.</span><span class="ident" id="3262779">Text</span><span class="op" id="3262783">,</span>&nbsp;<span class="string" id="3262785">&#34;.eE&#34;</span><span class="op" id="3262790">)</span>&nbsp;<span class="op" id="3262792">&gt;=</span>&nbsp;<span class="num" id="3262795">0</span><span class="op" id="3262796">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262800">return</span>&nbsp;<span class="ident" id="3262807">reflect</span><span class="op" id="3262814">.</span><span class="ident" id="3262815">ValueOf</span><span class="op" id="3262822">(</span><span class="ident" id="3262823">constant</span><span class="op" id="3262831">.</span><span class="ident" id="3262832">Float64</span><span class="op" id="3262839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262842">case</span>&nbsp;<span class="ident" id="3262847">constant</span><span class="op" id="3262855">.</span><span class="ident" id="3262856">IsInt</span><span class="op" id="3262861">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3262865">n</span>&nbsp;<span class="op" id="3262867">:=</span>&nbsp;<span class="builtintype" id="3262870">int</span><span class="op" id="3262873">(</span><span class="ident" id="3262874">constant</span><span class="op" id="3262882">.</span><span class="ident" id="3262883">Int64</span><span class="op" id="3262888">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262892">if</span>&nbsp;<span class="builtintype" id="3262895">int64</span><span class="op" id="3262900">(</span><span class="ident" id="3262901">n</span><span class="op" id="3262902">)</span>&nbsp;<span class="op" id="3262904">!=</span>&nbsp;<span class="ident" id="3262907">constant</span><span class="op" id="3262915">.</span><span class="ident" id="3262916">Int64</span>&nbsp;<span class="op" id="3262922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3262927">s</span><span class="op" id="3262928">.</span><span class="ident" id="3262929">errorf</span><span class="op" id="3262935">(</span><span class="string" id="3262936">&#34;%s&nbsp;overflows&nbsp;int&#34;</span><span class="op" id="3262954">,</span>&nbsp;<span class="ident" id="3262956">constant</span><span class="op" id="3262964">.</span><span class="ident" id="3262965">Text</span><span class="op" id="3262969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3262973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3262977">return</span>&nbsp;<span class="ident" id="3262984">reflect</span><span class="op" id="3262991">.</span><span class="ident" id="3262992">ValueOf</span><span class="op" id="3262999">(</span><span class="ident" id="3263000">n</span><span class="op" id="3263001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3263004">case</span>&nbsp;<span class="ident" id="3263009">constant</span><span class="op" id="3263017">.</span><span class="ident" id="3263018">IsUint</span><span class="op" id="3263024">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3263028">s</span><span class="op" id="3263029">.</span><span class="ident" id="3263030">errorf</span><span class="op" id="3263036">(</span><span class="string" id="3263037">&#34;%s&nbsp;overflows&nbsp;int&#34;</span><span class="op" id="3263055">,</span>&nbsp;<span class="ident" id="3263057">constant</span><span class="op" id="3263065">.</span><span class="ident" id="3263066">Text</span><span class="op" id="3263070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3263073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3263076">return</span>&nbsp;<span class="ident" id="3263083">zero</span><br>
<span class="lineno"></span><span class="op" id="3263088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="3263091">func</span>&nbsp;<span class="ident" id="3263096">isHexConstant</span><span class="op" id="3263109">(</span><span class="ident" id="3263110">s</span>&nbsp;<span class="builtintype" id="3263112">string</span><span class="op" id="3263118">)</span>&nbsp;<span class="builtintype" id="3263120">bool</span>&nbsp;<span class="op" id="3263125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3263128">return</span>&nbsp;<span class="builtinfunc" id="3263135">len</span><span class="op" id="3263138">(</span><span class="ident" id="3263139">s</span><span class="op" id="3263140">)</span>&nbsp;<span class="op" id="3263142">&gt;</span>&nbsp;<span class="num" id="3263144">2</span>&nbsp;<span class="op" id="3263146">&amp;&amp;</span>&nbsp;<span class="ident" id="3263149">s</span><span class="op" id="3263150">[</span><span class="num" id="3263151">0</span><span class="op" id="3263152">]</span>&nbsp;<span class="op" id="3263154">==</span>&nbsp;<span class="string" id="3263157">&#39;0&#39;</span>&nbsp;<span class="op" id="3263161">&amp;&amp;</span>&nbsp;<span class="op" id="3263164">(</span><span class="ident" id="3263165">s</span><span class="op" id="3263166">[</span><span class="num" id="3263167">1</span><span class="op" id="3263168">]</span>&nbsp;<span class="op" id="3263170">==</span>&nbsp;<span class="string" id="3263173">&#39;x&#39;</span>&nbsp;<span class="op" id="3263177">||</span>&nbsp;<span class="ident" id="3263180">s</span><span class="op" id="3263181">[</span><span class="num" id="3263182">1</span><span class="op" id="3263183">]</span>&nbsp;<span class="op" id="3263185">==</span>&nbsp;<span class="string" id="3263188">&#39;X&#39;</span><span class="op" id="3263191">)</span><br>
<span class="lineno"></span><span class="op" id="3263193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263196">func</span>&nbsp;<span class="op" id="3263201">(</span><span class="ident" id="3263202">s</span>&nbsp;<span class="op" id="3263204">*</span><span class="ident" id="3263205">state</span><span class="op" id="3263210">)</span>&nbsp;<span class="ident" id="3263212">evalFieldNode</span><span class="op" id="3263225">(</span><span class="ident" id="3263226">dot</span>&nbsp;<span class="ident" id="3263230">reflect</span><span class="op" id="3263237">.</span><span class="ident" id="3263238">Value</span><span class="op" id="3263243">,</span>&nbsp;<span class="ident" id="3263245">field</span>&nbsp;<span class="op" id="3263251">*</span><span class="ident" id="3263252">parse</span><span class="op" id="3263257">.</span><span class="ident" id="3263258">FieldNode</span><span class="op" id="3263267">,</span>&nbsp;<span class="ident" id="3263269">args</span>&nbsp;<span class="op" id="3263274">[</span><span class="op" id="3263275">]</span><span class="ident" id="3263276">parse</span><span class="op" id="3263281">.</span><span class="ident" id="3263282">Node</span><span class="op" id="3263286">,</span>&nbsp;<span class="ident" id="3263288">final</span>&nbsp;<span class="ident" id="3263294">reflect</span><span class="op" id="3263301">.</span><span class="ident" id="3263302">Value</span><span class="op" id="3263307">)</span>&nbsp;<span class="ident" id="3263309">reflect</span><span class="op" id="3263316">.</span><span class="ident" id="3263317">Value</span>&nbsp;<span class="op" id="3263323">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3263326">s</span><span class="op" id="3263327">.</span><span class="ident" id="3263328">at</span><span class="op" id="3263330">(</span><span class="ident" id="3263331">field</span><span class="op" id="3263336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3263339">return</span>&nbsp;<span class="ident" id="3263346">s</span><span class="op" id="3263347">.</span><span class="ident" id="3263348">evalFieldChain</span><span class="op" id="3263362">(</span><span class="ident" id="3263363">dot</span><span class="op" id="3263366">,</span>&nbsp;<span class="ident" id="3263368">dot</span><span class="op" id="3263371">,</span>&nbsp;<span class="ident" id="3263373">field</span><span class="op" id="3263378">,</span>&nbsp;<span class="ident" id="3263380">field</span><span class="op" id="3263385">.</span><span class="ident" id="3263386">Ident</span><span class="op" id="3263391">,</span>&nbsp;<span class="ident" id="3263393">args</span><span class="op" id="3263397">,</span>&nbsp;<span class="ident" id="3263399">final</span><span class="op" id="3263404">)</span><br>
<span class="lineno"></span><span class="op" id="3263406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263409">func</span>&nbsp;<span class="op" id="3263414">(</span><span class="ident" id="3263415">s</span>&nbsp;<span class="op" id="3263417">*</span><span class="ident" id="3263418">state</span><span class="op" id="3263423">)</span>&nbsp;<span class="ident" id="3263425">evalChainNode</span><span class="op" id="3263438">(</span><span class="ident" id="3263439">dot</span>&nbsp;<span class="ident" id="3263443">reflect</span><span class="op" id="3263450">.</span><span class="ident" id="3263451">Value</span><span class="op" id="3263456">,</span>&nbsp;<span class="ident" id="3263458">chain</span>&nbsp;<span class="op" id="3263464">*</span><span class="ident" id="3263465">parse</span><span class="op" id="3263470">.</span><span class="ident" id="3263471">ChainNode</span><span class="op" id="3263480">,</span>&nbsp;<span class="ident" id="3263482">args</span>&nbsp;<span class="op" id="3263487">[</span><span class="op" id="3263488">]</span><span class="ident" id="3263489">parse</span><span class="op" id="3263494">.</span><span class="ident" id="3263495">Node</span><span class="op" id="3263499">,</span>&nbsp;<span class="ident" id="3263501">final</span>&nbsp;<span class="ident" id="3263507">reflect</span><span class="op" id="3263514">.</span><span class="ident" id="3263515">Value</span><span class="op" id="3263520">)</span>&nbsp;<span class="ident" id="3263522">reflect</span><span class="op" id="3263529">.</span><span class="ident" id="3263530">Value</span>&nbsp;<span class="op" id="3263536">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3263539">s</span><span class="op" id="3263540">.</span><span class="ident" id="3263541">at</span><span class="op" id="3263543">(</span><span class="ident" id="3263544">chain</span><span class="op" id="3263549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3263552">//&nbsp;(pipe).Field1.Field2&nbsp;has&nbsp;pipe&nbsp;as&nbsp;.Node,&nbsp;fields&nbsp;as&nbsp;.Field.&nbsp;Eval&nbsp;the&nbsp;pipeline,&nbsp;then&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3263650">pipe</span>&nbsp;<span class="op" id="3263655">:=</span>&nbsp;<span class="ident" id="3263658">s</span><span class="op" id="3263659">.</span><span class="ident" id="3263660">evalArg</span><span class="op" id="3263667">(</span><span class="ident" id="3263668">dot</span><span class="op" id="3263671">,</span>&nbsp;<span class="builtintype" id="3263673">nil</span><span class="op" id="3263676">,</span>&nbsp;<span class="ident" id="3263678">chain</span><span class="op" id="3263683">.</span><span class="ident" id="3263684">Node</span><span class="op" id="3263688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3263691">if</span>&nbsp;<span class="builtinfunc" id="3263694">len</span><span class="op" id="3263697">(</span><span class="ident" id="3263698">chain</span><span class="op" id="3263703">.</span><span class="ident" id="3263704">Field</span><span class="op" id="3263709">)</span>&nbsp;<span class="op" id="3263711">==</span>&nbsp;<span class="num" id="3263714">0</span>&nbsp;<span class="op" id="3263716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3263720">s</span><span class="op" id="3263721">.</span><span class="ident" id="3263722">errorf</span><span class="op" id="3263728">(</span><span class="string" id="3263729">&#34;internal&nbsp;error:&nbsp;no&nbsp;fields&nbsp;in&nbsp;evalChainNode&#34;</span><span class="op" id="3263773">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3263776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3263779">return</span>&nbsp;<span class="ident" id="3263786">s</span><span class="op" id="3263787">.</span><span class="ident" id="3263788">evalFieldChain</span><span class="op" id="3263802">(</span><span class="ident" id="3263803">dot</span><span class="op" id="3263806">,</span>&nbsp;<span class="ident" id="3263808">pipe</span><span class="op" id="3263812">,</span>&nbsp;<span class="ident" id="3263814">chain</span><span class="op" id="3263819">,</span>&nbsp;<span class="ident" id="3263821">chain</span><span class="op" id="3263826">.</span><span class="ident" id="3263827">Field</span><span class="op" id="3263832">,</span>&nbsp;<span class="ident" id="3263834">args</span><span class="op" id="3263838">,</span>&nbsp;<span class="ident" id="3263840">final</span><span class="op" id="3263845">)</span><br>
<span class="lineno"></span><span class="op" id="3263847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263850">func</span>&nbsp;<span class="op" id="3263855">(</span><span class="ident" id="3263856">s</span>&nbsp;<span class="op" id="3263858">*</span><span class="ident" id="3263859">state</span><span class="op" id="3263864">)</span>&nbsp;<span class="ident" id="3263866">evalVariableNode</span><span class="op" id="3263882">(</span><span class="ident" id="3263883">dot</span>&nbsp;<span class="ident" id="3263887">reflect</span><span class="op" id="3263894">.</span><span class="ident" id="3263895">Value</span><span class="op" id="3263900">,</span>&nbsp;<span class="ident" id="3263902">variable</span>&nbsp;<span class="op" id="3263911">*</span><span class="ident" id="3263912">parse</span><span class="op" id="3263917">.</span><span class="ident" id="3263918">VariableNode</span><span class="op" id="3263930">,</span>&nbsp;<span class="ident" id="3263932">args</span>&nbsp;<span class="op" id="3263937">[</span><span class="op" id="3263938">]</span><span class="ident" id="3263939">parse</span><span class="op" id="3263944">.</span><span class="ident" id="3263945">Node</span><span class="op" id="3263949">,</span>&nbsp;<span class="ident" id="3263951">final</span>&nbsp;<span class="ident" id="3263957">reflect</span><span class="op" id="3263964">.</span><span class="ident" id="3263965">Value</span><span class="op" id="3263970">)</span>&nbsp;<span class="ident" id="3263972">reflect</span><span class="op" id="3263979">.</span><span class="ident" id="3263980">Value</span>&nbsp;<span class="op" id="3263986">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3263989">//&nbsp;$x.Field&nbsp;has&nbsp;$x&nbsp;as&nbsp;the&nbsp;first&nbsp;ident,&nbsp;Field&nbsp;as&nbsp;the&nbsp;second.&nbsp;Eval&nbsp;the&nbsp;var,&nbsp;then&nbsp;the&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3264081">s</span><span class="op" id="3264082">.</span><span class="ident" id="3264083">at</span><span class="op" id="3264085">(</span><span class="ident" id="3264086">variable</span><span class="op" id="3264094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3264097">value</span>&nbsp;<span class="op" id="3264103">:=</span>&nbsp;<span class="ident" id="3264106">s</span><span class="op" id="3264107">.</span><span class="ident" id="3264108">varValue</span><span class="op" id="3264116">(</span><span class="ident" id="3264117">variable</span><span class="op" id="3264125">.</span><span class="ident" id="3264126">Ident</span><span class="op" id="3264131">[</span><span class="num" id="3264132">0</span><span class="op" id="3264133">]</span><span class="op" id="3264134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3264137">if</span>&nbsp;<span class="builtinfunc" id="3264140">len</span><span class="op" id="3264143">(</span><span class="ident" id="3264144">variable</span><span class="op" id="3264152">.</span><span class="ident" id="3264153">Ident</span><span class="op" id="3264158">)</span>&nbsp;<span class="op" id="3264160">==</span>&nbsp;<span class="num" id="3264163">1</span>&nbsp;<span class="op" id="3264165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3264169">s</span><span class="op" id="3264170">.</span><span class="ident" id="3264171">notAFunction</span><span class="op" id="3264183">(</span><span class="ident" id="3264184">args</span><span class="op" id="3264188">,</span>&nbsp;<span class="ident" id="3264190">final</span><span class="op" id="3264195">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3264199">return</span>&nbsp;<span class="ident" id="3264206">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3264213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3264216">return</span>&nbsp;<span class="ident" id="3264223">s</span><span class="op" id="3264224">.</span><span class="ident" id="3264225">evalFieldChain</span><span class="op" id="3264239">(</span><span class="ident" id="3264240">dot</span><span class="op" id="3264243">,</span>&nbsp;<span class="ident" id="3264245">value</span><span class="op" id="3264250">,</span>&nbsp;<span class="ident" id="3264252">variable</span><span class="op" id="3264260">,</span>&nbsp;<span class="ident" id="3264262">variable</span><span class="op" id="3264270">.</span><span class="ident" id="3264271">Ident</span><span class="op" id="3264276">[</span><span class="num" id="3264277">1</span><span class="op" id="3264278">:</span><span class="op" id="3264279">]</span><span class="op" id="3264280">,</span>&nbsp;<span class="ident" id="3264282">args</span><span class="op" id="3264286">,</span>&nbsp;<span class="ident" id="3264288">final</span><span class="op" id="3264293">)</span><br>
<span class="lineno"></span><span class="op" id="3264295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="comment" id="3264298">//&nbsp;evalFieldChain&nbsp;evaluates&nbsp;.X.Y.Z&nbsp;possibly&nbsp;followed&nbsp;by&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="comment" id="3264365">//&nbsp;dot&nbsp;is&nbsp;the&nbsp;environment&nbsp;in&nbsp;which&nbsp;to&nbsp;evaluate&nbsp;arguments,&nbsp;while</span><br>
<span class="lineno"></span><span class="comment" id="3264429">//&nbsp;receiver&nbsp;is&nbsp;the&nbsp;value&nbsp;being&nbsp;walked&nbsp;along&nbsp;the&nbsp;chain.</span><br>
<span class="lineno"></span><span class="keyword" id="3264484">func</span>&nbsp;<span class="op" id="3264489">(</span><span class="ident" id="3264490">s</span>&nbsp;<span class="op" id="3264492">*</span><span class="ident" id="3264493">state</span><span class="op" id="3264498">)</span>&nbsp;<span class="ident" id="3264500">evalFieldChain</span><span class="op" id="3264514">(</span><span class="ident" id="3264515">dot</span><span class="op" id="3264518">,</span>&nbsp;<span class="ident" id="3264520">receiver</span>&nbsp;<span class="ident" id="3264529">reflect</span><span class="op" id="3264536">.</span><span class="ident" id="3264537">Value</span><span class="op" id="3264542">,</span>&nbsp;<span class="ident" id="3264544">node</span>&nbsp;<span class="ident" id="3264549">parse</span><span class="op" id="3264554">.</span><span class="ident" id="3264555">Node</span><span class="op" id="3264559">,</span>&nbsp;<span class="ident" id="3264561">ident</span>&nbsp;<span class="op" id="3264567">[</span><span class="op" id="3264568">]</span><span class="builtintype" id="3264569">string</span><span class="op" id="3264575">,</span>&nbsp;<span class="ident" id="3264577">args</span>&nbsp;<span class="op" id="3264582">[</span><span class="op" id="3264583">]</span><span class="ident" id="3264584">parse</span><span class="op" id="3264589">.</span><span class="ident" id="3264590">Node</span><span class="op" id="3264594">,</span>&nbsp;<span class="ident" id="3264596">final</span>&nbsp;<span class="ident" id="3264602">reflect</span><span class="op" id="3264609">.</span><span class="ident" id="3264610">Value</span><span class="op" id="3264615">)</span>&nbsp;<span class="ident" id="3264617">reflect</span><span class="op" id="3264624">.</span><span class="ident" id="3264625">Value</span>&nbsp;<span class="op" id="3264631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3264634">n</span>&nbsp;<span class="op" id="3264636">:=</span>&nbsp;<span class="builtinfunc" id="3264639">len</span><span class="op" id="3264642">(</span><span class="ident" id="3264643">ident</span><span class="op" id="3264648">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3264651">for</span>&nbsp;<span class="ident" id="3264655">i</span>&nbsp;<span class="op" id="3264657">:=</span>&nbsp;<span class="num" id="3264660">0</span><span class="op" id="3264661">;</span>&nbsp;<span class="ident" id="3264663">i</span>&nbsp;<span class="op" id="3264665">&lt;</span>&nbsp;<span class="ident" id="3264667">n</span><span class="op" id="3264668">-</span><span class="num" id="3264669">1</span><span class="op" id="3264670">;</span>&nbsp;<span class="ident" id="3264672">i</span><span class="op" id="3264673">++</span>&nbsp;<span class="op" id="3264676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3264680">receiver</span>&nbsp;<span class="op" id="3264689">=</span>&nbsp;<span class="ident" id="3264691">s</span><span class="op" id="3264692">.</span><span class="ident" id="3264693">evalField</span><span class="op" id="3264702">(</span><span class="ident" id="3264703">dot</span><span class="op" id="3264706">,</span>&nbsp;<span class="ident" id="3264708">ident</span><span class="op" id="3264713">[</span><span class="ident" id="3264714">i</span><span class="op" id="3264715">]</span><span class="op" id="3264716">,</span>&nbsp;<span class="ident" id="3264718">node</span><span class="op" id="3264722">,</span>&nbsp;<span class="builtintype" id="3264724">nil</span><span class="op" id="3264727">,</span>&nbsp;<span class="ident" id="3264729">zero</span><span class="op" id="3264733">,</span>&nbsp;<span class="ident" id="3264735">receiver</span><span class="op" id="3264743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3264746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3264749">//&nbsp;Now&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;method,&nbsp;it&nbsp;gets&nbsp;the&nbsp;arguments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3264798">return</span>&nbsp;<span class="ident" id="3264805">s</span><span class="op" id="3264806">.</span><span class="ident" id="3264807">evalField</span><span class="op" id="3264816">(</span><span class="ident" id="3264817">dot</span><span class="op" id="3264820">,</span>&nbsp;<span class="ident" id="3264822">ident</span><span class="op" id="3264827">[</span><span class="ident" id="3264828">n</span><span class="op" id="3264829">-</span><span class="num" id="3264830">1</span><span class="op" id="3264831">]</span><span class="op" id="3264832">,</span>&nbsp;<span class="ident" id="3264834">node</span><span class="op" id="3264838">,</span>&nbsp;<span class="ident" id="3264840">args</span><span class="op" id="3264844">,</span>&nbsp;<span class="ident" id="3264846">final</span><span class="op" id="3264851">,</span>&nbsp;<span class="ident" id="3264853">receiver</span><span class="op" id="3264861">)</span><br>
<span class="lineno">450</span><span class="op" id="3264863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3264866">func</span>&nbsp;<span class="op" id="3264871">(</span><span class="ident" id="3264872">s</span>&nbsp;<span class="op" id="3264874">*</span><span class="ident" id="3264875">state</span><span class="op" id="3264880">)</span>&nbsp;<span class="ident" id="3264882">evalFunction</span><span class="op" id="3264894">(</span><span class="ident" id="3264895">dot</span>&nbsp;<span class="ident" id="3264899">reflect</span><span class="op" id="3264906">.</span><span class="ident" id="3264907">Value</span><span class="op" id="3264912">,</span>&nbsp;<span class="ident" id="3264914">node</span>&nbsp;<span class="op" id="3264919">*</span><span class="ident" id="3264920">parse</span><span class="op" id="3264925">.</span><span class="ident" id="3264926">IdentifierNode</span><span class="op" id="3264940">,</span>&nbsp;<span class="ident" id="3264942">cmd</span>&nbsp;<span class="ident" id="3264946">parse</span><span class="op" id="3264951">.</span><span class="ident" id="3264952">Node</span><span class="op" id="3264956">,</span>&nbsp;<span class="ident" id="3264958">args</span>&nbsp;<span class="op" id="3264963">[</span><span class="op" id="3264964">]</span><span class="ident" id="3264965">parse</span><span class="op" id="3264970">.</span><span class="ident" id="3264971">Node</span><span class="op" id="3264975">,</span>&nbsp;<span class="ident" id="3264977">final</span>&nbsp;<span class="ident" id="3264983">reflect</span><span class="op" id="3264990">.</span><span class="ident" id="3264991">Value</span><span class="op" id="3264996">)</span>&nbsp;<span class="ident" id="3264998">reflect</span><span class="op" id="3265005">.</span><span class="ident" id="3265006">Value</span>&nbsp;<span class="op" id="3265012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265015">s</span><span class="op" id="3265016">.</span><span class="ident" id="3265017">at</span><span class="op" id="3265019">(</span><span class="ident" id="3265020">node</span><span class="op" id="3265024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265027">name</span>&nbsp;<span class="op" id="3265032">:=</span>&nbsp;<span class="ident" id="3265035">node</span><span class="op" id="3265039">.</span><span class="ident" id="3265040">Ident</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265047">function</span><span class="op" id="3265055">,</span>&nbsp;<span class="ident" id="3265057">ok</span>&nbsp;<span class="op" id="3265060">:=</span>&nbsp;<span class="ident" id="3265063">findFunction</span><span class="op" id="3265075">(</span><span class="ident" id="3265076">name</span><span class="op" id="3265080">,</span>&nbsp;<span class="ident" id="3265082">s</span><span class="op" id="3265083">.</span><span class="ident" id="3265084">tmpl</span><span class="op" id="3265088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265091">if</span>&nbsp;<span class="op" id="3265094">!</span><span class="ident" id="3265095">ok</span>&nbsp;<span class="op" id="3265098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265102">s</span><span class="op" id="3265103">.</span><span class="ident" id="3265104">errorf</span><span class="op" id="3265110">(</span><span class="string" id="3265111">&#34;%q&nbsp;is&nbsp;not&nbsp;a&nbsp;defined&nbsp;function&#34;</span><span class="op" id="3265141">,</span>&nbsp;<span class="ident" id="3265143">name</span><span class="op" id="3265147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3265150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265153">return</span>&nbsp;<span class="ident" id="3265160">s</span><span class="op" id="3265161">.</span><span class="ident" id="3265162">evalCall</span><span class="op" id="3265170">(</span><span class="ident" id="3265171">dot</span><span class="op" id="3265174">,</span>&nbsp;<span class="ident" id="3265176">function</span><span class="op" id="3265184">,</span>&nbsp;<span class="ident" id="3265186">cmd</span><span class="op" id="3265189">,</span>&nbsp;<span class="ident" id="3265191">name</span><span class="op" id="3265195">,</span>&nbsp;<span class="ident" id="3265197">args</span><span class="op" id="3265201">,</span>&nbsp;<span class="ident" id="3265203">final</span><span class="op" id="3265208">)</span><br>
<span class="lineno">460</span><span class="op" id="3265210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3265213">//&nbsp;evalField&nbsp;evaluates&nbsp;an&nbsp;expression&nbsp;like&nbsp;(.Field)&nbsp;or&nbsp;(.Field&nbsp;arg1&nbsp;arg2).</span><br>
<span class="lineno"></span><span class="comment" id="3265287">//&nbsp;The&nbsp;&#39;final&#39;&nbsp;argument&nbsp;represents&nbsp;the&nbsp;return&nbsp;value&nbsp;from&nbsp;the&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="3265358">//&nbsp;value&nbsp;of&nbsp;the&nbsp;pipeline,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">465</span><span class="keyword" id="3265392">func</span>&nbsp;<span class="op" id="3265397">(</span><span class="ident" id="3265398">s</span>&nbsp;<span class="op" id="3265400">*</span><span class="ident" id="3265401">state</span><span class="op" id="3265406">)</span>&nbsp;<span class="ident" id="3265408">evalField</span><span class="op" id="3265417">(</span><span class="ident" id="3265418">dot</span>&nbsp;<span class="ident" id="3265422">reflect</span><span class="op" id="3265429">.</span><span class="ident" id="3265430">Value</span><span class="op" id="3265435">,</span>&nbsp;<span class="ident" id="3265437">fieldName</span>&nbsp;<span class="builtintype" id="3265447">string</span><span class="op" id="3265453">,</span>&nbsp;<span class="ident" id="3265455">node</span>&nbsp;<span class="ident" id="3265460">parse</span><span class="op" id="3265465">.</span><span class="ident" id="3265466">Node</span><span class="op" id="3265470">,</span>&nbsp;<span class="ident" id="3265472">args</span>&nbsp;<span class="op" id="3265477">[</span><span class="op" id="3265478">]</span><span class="ident" id="3265479">parse</span><span class="op" id="3265484">.</span><span class="ident" id="3265485">Node</span><span class="op" id="3265489">,</span>&nbsp;<span class="ident" id="3265491">final</span><span class="op" id="3265496">,</span>&nbsp;<span class="ident" id="3265498">receiver</span>&nbsp;<span class="ident" id="3265507">reflect</span><span class="op" id="3265514">.</span><span class="ident" id="3265515">Value</span><span class="op" id="3265520">)</span>&nbsp;<span class="ident" id="3265522">reflect</span><span class="op" id="3265529">.</span><span class="ident" id="3265530">Value</span>&nbsp;<span class="op" id="3265536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265539">if</span>&nbsp;<span class="op" id="3265542">!</span><span class="ident" id="3265543">receiver</span><span class="op" id="3265551">.</span><span class="ident" id="3265552">IsValid</span><span class="op" id="3265559">(</span><span class="op" id="3265560">)</span>&nbsp;<span class="op" id="3265562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265566">return</span>&nbsp;<span class="ident" id="3265573">zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3265579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265582">typ</span>&nbsp;<span class="op" id="3265586">:=</span>&nbsp;<span class="ident" id="3265589">receiver</span><span class="op" id="3265597">.</span><span class="ident" id="3265598">Type</span><span class="op" id="3265602">(</span><span class="op" id="3265603">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265606">receiver</span><span class="op" id="3265614">,</span>&nbsp;<span class="ident" id="3265616">_</span>&nbsp;<span class="op" id="3265618">=</span>&nbsp;<span class="ident" id="3265620">indirect</span><span class="op" id="3265628">(</span><span class="ident" id="3265629">receiver</span><span class="op" id="3265637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3265640">//&nbsp;Unless&nbsp;it&#39;s&nbsp;an&nbsp;interface,&nbsp;need&nbsp;to&nbsp;get&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;*T&nbsp;to&nbsp;guarantee</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3265717">//&nbsp;we&nbsp;see&nbsp;all&nbsp;methods&nbsp;of&nbsp;T&nbsp;and&nbsp;*T.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265753">ptr</span>&nbsp;<span class="op" id="3265757">:=</span>&nbsp;<span class="ident" id="3265760">receiver</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265770">if</span>&nbsp;<span class="ident" id="3265773">ptr</span><span class="op" id="3265776">.</span><span class="ident" id="3265777">Kind</span><span class="op" id="3265781">(</span><span class="op" id="3265782">)</span>&nbsp;<span class="op" id="3265784">!=</span>&nbsp;<span class="ident" id="3265787">reflect</span><span class="op" id="3265794">.</span><span class="ident" id="3265795">Interface</span>&nbsp;<span class="op" id="3265805">&amp;&amp;</span>&nbsp;<span class="ident" id="3265808">ptr</span><span class="op" id="3265811">.</span><span class="ident" id="3265812">CanAddr</span><span class="op" id="3265819">(</span><span class="op" id="3265820">)</span>&nbsp;<span class="op" id="3265822">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265826">ptr</span>&nbsp;<span class="op" id="3265830">=</span>&nbsp;<span class="ident" id="3265832">ptr</span><span class="op" id="3265835">.</span><span class="ident" id="3265836">Addr</span><span class="op" id="3265840">(</span><span class="op" id="3265841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3265844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265847">if</span>&nbsp;<span class="ident" id="3265850">method</span>&nbsp;<span class="op" id="3265857">:=</span>&nbsp;<span class="ident" id="3265860">ptr</span><span class="op" id="3265863">.</span><span class="ident" id="3265864">MethodByName</span><span class="op" id="3265876">(</span><span class="ident" id="3265877">fieldName</span><span class="op" id="3265886">)</span><span class="op" id="3265887">;</span>&nbsp;<span class="ident" id="3265889">method</span><span class="op" id="3265895">.</span><span class="ident" id="3265896">IsValid</span><span class="op" id="3265903">(</span><span class="op" id="3265904">)</span>&nbsp;<span class="op" id="3265906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3265910">return</span>&nbsp;<span class="ident" id="3265917">s</span><span class="op" id="3265918">.</span><span class="ident" id="3265919">evalCall</span><span class="op" id="3265927">(</span><span class="ident" id="3265928">dot</span><span class="op" id="3265931">,</span>&nbsp;<span class="ident" id="3265933">method</span><span class="op" id="3265939">,</span>&nbsp;<span class="ident" id="3265941">node</span><span class="op" id="3265945">,</span>&nbsp;<span class="ident" id="3265947">fieldName</span><span class="op" id="3265956">,</span>&nbsp;<span class="ident" id="3265958">args</span><span class="op" id="3265962">,</span>&nbsp;<span class="ident" id="3265964">final</span><span class="op" id="3265969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3265972">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3265975">hasArgs</span>&nbsp;<span class="op" id="3265983">:=</span>&nbsp;<span class="builtinfunc" id="3265986">len</span><span class="op" id="3265989">(</span><span class="ident" id="3265990">args</span><span class="op" id="3265994">)</span>&nbsp;<span class="op" id="3265996">&gt;</span>&nbsp;<span class="num" id="3265998">1</span>&nbsp;<span class="op" id="3266000">||</span>&nbsp;<span class="ident" id="3266003">final</span><span class="op" id="3266008">.</span><span class="ident" id="3266009">IsValid</span><span class="op" id="3266016">(</span><span class="op" id="3266017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3266020">//&nbsp;It&#39;s&nbsp;not&nbsp;a&nbsp;method;&nbsp;must&nbsp;be&nbsp;a&nbsp;field&nbsp;of&nbsp;a&nbsp;struct&nbsp;or&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;map.&nbsp;The&nbsp;receiver&nbsp;must&nbsp;not&nbsp;be&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266125">receiver</span><span class="op" id="3266133">,</span>&nbsp;<span class="ident" id="3266135">isNil</span>&nbsp;<span class="op" id="3266141">:=</span>&nbsp;<span class="ident" id="3266144">indirect</span><span class="op" id="3266152">(</span><span class="ident" id="3266153">receiver</span><span class="op" id="3266161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266164">if</span>&nbsp;<span class="ident" id="3266167">isNil</span>&nbsp;<span class="op" id="3266173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266177">s</span><span class="op" id="3266178">.</span><span class="ident" id="3266179">errorf</span><span class="op" id="3266185">(</span><span class="string" id="3266186">&#34;nil&nbsp;pointer&nbsp;evaluating&nbsp;%s.%s&#34;</span><span class="op" id="3266216">,</span>&nbsp;<span class="ident" id="3266218">typ</span><span class="op" id="3266221">,</span>&nbsp;<span class="ident" id="3266223">fieldName</span><span class="op" id="3266232">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3266235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266238">switch</span>&nbsp;<span class="ident" id="3266245">receiver</span><span class="op" id="3266253">.</span><span class="ident" id="3266254">Kind</span><span class="op" id="3266258">(</span><span class="op" id="3266259">)</span>&nbsp;<span class="op" id="3266261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266264">case</span>&nbsp;<span class="ident" id="3266269">reflect</span><span class="op" id="3266276">.</span><span class="ident" id="3266277">Struct</span><span class="op" id="3266283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266287">tField</span><span class="op" id="3266293">,</span>&nbsp;<span class="ident" id="3266295">ok</span>&nbsp;<span class="op" id="3266298">:=</span>&nbsp;<span class="ident" id="3266301">receiver</span><span class="op" id="3266309">.</span><span class="ident" id="3266310">Type</span><span class="op" id="3266314">(</span><span class="op" id="3266315">)</span><span class="op" id="3266316">.</span><span class="ident" id="3266317">FieldByName</span><span class="op" id="3266328">(</span><span class="ident" id="3266329">fieldName</span><span class="op" id="3266338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266342">if</span>&nbsp;<span class="ident" id="3266345">ok</span>&nbsp;<span class="op" id="3266348">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266353">field</span>&nbsp;<span class="op" id="3266359">:=</span>&nbsp;<span class="ident" id="3266362">receiver</span><span class="op" id="3266370">.</span><span class="ident" id="3266371">FieldByIndex</span><span class="op" id="3266383">(</span><span class="ident" id="3266384">tField</span><span class="op" id="3266390">.</span><span class="ident" id="3266391">Index</span><span class="op" id="3266396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266401">if</span>&nbsp;<span class="ident" id="3266404">tField</span><span class="op" id="3266410">.</span><span class="ident" id="3266411">PkgPath</span>&nbsp;<span class="op" id="3266419">!=</span>&nbsp;<span class="string" id="3266422">&#34;&#34;</span>&nbsp;<span class="op" id="3266425">{</span>&nbsp;<span class="comment" id="3266427">//&nbsp;field&nbsp;is&nbsp;unexported</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266454">s</span><span class="op" id="3266455">.</span><span class="ident" id="3266456">errorf</span><span class="op" id="3266462">(</span><span class="string" id="3266463">&#34;%s&nbsp;is&nbsp;an&nbsp;unexported&nbsp;field&nbsp;of&nbsp;struct&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3266508">,</span>&nbsp;<span class="ident" id="3266510">fieldName</span><span class="op" id="3266519">,</span>&nbsp;<span class="ident" id="3266521">typ</span><span class="op" id="3266524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3266529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3266534">//&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;function,&nbsp;we&nbsp;must&nbsp;call&nbsp;it.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266577">if</span>&nbsp;<span class="ident" id="3266580">hasArgs</span>&nbsp;<span class="op" id="3266588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266594">s</span><span class="op" id="3266595">.</span><span class="ident" id="3266596">errorf</span><span class="op" id="3266602">(</span><span class="string" id="3266603">&#34;%s&nbsp;has&nbsp;arguments&nbsp;but&nbsp;cannot&nbsp;be&nbsp;invoked&nbsp;as&nbsp;function&#34;</span><span class="op" id="3266655">,</span>&nbsp;<span class="ident" id="3266657">fieldName</span><span class="op" id="3266666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3266671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266676">return</span>&nbsp;<span class="ident" id="3266683">field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3266691">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266695">s</span><span class="op" id="3266696">.</span><span class="ident" id="3266697">errorf</span><span class="op" id="3266703">(</span><span class="string" id="3266704">&#34;%s&nbsp;is&nbsp;not&nbsp;a&nbsp;field&nbsp;of&nbsp;struct&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3266741">,</span>&nbsp;<span class="ident" id="3266743">fieldName</span><span class="op" id="3266752">,</span>&nbsp;<span class="ident" id="3266754">typ</span><span class="op" id="3266757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266760">case</span>&nbsp;<span class="ident" id="3266765">reflect</span><span class="op" id="3266772">.</span><span class="ident" id="3266773">Map</span><span class="op" id="3266776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3266780">//&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;map,&nbsp;attempt&nbsp;to&nbsp;use&nbsp;the&nbsp;field&nbsp;name&nbsp;as&nbsp;a&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266840">nameVal</span>&nbsp;<span class="op" id="3266848">:=</span>&nbsp;<span class="ident" id="3266851">reflect</span><span class="op" id="3266858">.</span><span class="ident" id="3266859">ValueOf</span><span class="op" id="3266866">(</span><span class="ident" id="3266867">fieldName</span><span class="op" id="3266876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266880">if</span>&nbsp;<span class="ident" id="3266883">nameVal</span><span class="op" id="3266890">.</span><span class="ident" id="3266891">Type</span><span class="op" id="3266895">(</span><span class="op" id="3266896">)</span><span class="op" id="3266897">.</span><span class="ident" id="3266898">AssignableTo</span><span class="op" id="3266910">(</span><span class="ident" id="3266911">receiver</span><span class="op" id="3266919">.</span><span class="ident" id="3266920">Type</span><span class="op" id="3266924">(</span><span class="op" id="3266925">)</span><span class="op" id="3266926">.</span><span class="ident" id="3266927">Key</span><span class="op" id="3266930">(</span><span class="op" id="3266931">)</span><span class="op" id="3266932">)</span>&nbsp;<span class="op" id="3266934">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3266939">if</span>&nbsp;<span class="ident" id="3266942">hasArgs</span>&nbsp;<span class="op" id="3266950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3266956">s</span><span class="op" id="3266957">.</span><span class="ident" id="3266958">errorf</span><span class="op" id="3266964">(</span><span class="string" id="3266965">&#34;%s&nbsp;is&nbsp;not&nbsp;a&nbsp;method&nbsp;but&nbsp;has&nbsp;arguments&#34;</span><span class="op" id="3267003">,</span>&nbsp;<span class="ident" id="3267005">fieldName</span><span class="op" id="3267014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3267019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3267024">return</span>&nbsp;<span class="ident" id="3267031">receiver</span><span class="op" id="3267039">.</span><span class="ident" id="3267040">MapIndex</span><span class="op" id="3267048">(</span><span class="ident" id="3267049">nameVal</span><span class="op" id="3267056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3267060">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3267063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267066">s</span><span class="op" id="3267067">.</span><span class="ident" id="3267068">errorf</span><span class="op" id="3267074">(</span><span class="string" id="3267075">&#34;can&#39;t&nbsp;evaluate&nbsp;field&nbsp;%s&nbsp;in&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3267111">,</span>&nbsp;<span class="ident" id="3267113">fieldName</span><span class="op" id="3267122">,</span>&nbsp;<span class="ident" id="3267124">typ</span><span class="op" id="3267127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3267130">panic</span><span class="op" id="3267135">(</span><span class="string" id="3267136">&#34;not&nbsp;reached&#34;</span><span class="op" id="3267149">)</span><br>
<span class="lineno"></span><span class="op" id="3267151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="3267154">var</span>&nbsp;<span class="op" id="3267158">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267161">errorType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3267177">=</span>&nbsp;<span class="ident" id="3267179">reflect</span><span class="op" id="3267186">.</span><span class="ident" id="3267187">TypeOf</span><span class="op" id="3267193">(</span><span class="op" id="3267194">(</span><span class="op" id="3267195">*</span><span class="builtintype" id="3267196">error</span><span class="op" id="3267201">)</span><span class="op" id="3267202">(</span><span class="builtintype" id="3267203">nil</span><span class="op" id="3267206">)</span><span class="op" id="3267207">)</span><span class="op" id="3267208">.</span><span class="ident" id="3267209">Elem</span><span class="op" id="3267213">(</span><span class="op" id="3267214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267217">fmtStringerType</span>&nbsp;<span class="op" id="3267233">=</span>&nbsp;<span class="ident" id="3267235">reflect</span><span class="op" id="3267242">.</span><span class="ident" id="3267243">TypeOf</span><span class="op" id="3267249">(</span><span class="op" id="3267250">(</span><span class="op" id="3267251">*</span><span class="ident" id="3267252">fmt</span><span class="op" id="3267255">.</span><span class="ident" id="3267256">Stringer</span><span class="op" id="3267264">)</span><span class="op" id="3267265">(</span><span class="builtintype" id="3267266">nil</span><span class="op" id="3267269">)</span><span class="op" id="3267270">)</span><span class="op" id="3267271">.</span><span class="ident" id="3267272">Elem</span><span class="op" id="3267276">(</span><span class="op" id="3267277">)</span><br>
<span class="lineno"></span><span class="op" id="3267279">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="comment" id="3267282">//&nbsp;evalCall&nbsp;executes&nbsp;a&nbsp;function&nbsp;or&nbsp;method&nbsp;call.&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;method,&nbsp;fun&nbsp;already&nbsp;has&nbsp;the&nbsp;receiver&nbsp;bound,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="3267387">//&nbsp;it&nbsp;looks&nbsp;just&nbsp;like&nbsp;a&nbsp;function&nbsp;call.&nbsp;&nbsp;The&nbsp;arg&nbsp;list,&nbsp;if&nbsp;non-nil,&nbsp;includes&nbsp;(in&nbsp;the&nbsp;manner&nbsp;of&nbsp;the&nbsp;shell),&nbsp;arg[0]</span><br>
<span class="lineno"></span><span class="comment" id="3267499">//&nbsp;as&nbsp;the&nbsp;function&nbsp;itself.</span><br>
<span class="lineno"></span><span class="keyword" id="3267526">func</span>&nbsp;<span class="op" id="3267531">(</span><span class="ident" id="3267532">s</span>&nbsp;<span class="op" id="3267534">*</span><span class="ident" id="3267535">state</span><span class="op" id="3267540">)</span>&nbsp;<span class="ident" id="3267542">evalCall</span><span class="op" id="3267550">(</span><span class="ident" id="3267551">dot</span><span class="op" id="3267554">,</span>&nbsp;<span class="ident" id="3267556">fun</span>&nbsp;<span class="ident" id="3267560">reflect</span><span class="op" id="3267567">.</span><span class="ident" id="3267568">Value</span><span class="op" id="3267573">,</span>&nbsp;<span class="ident" id="3267575">node</span>&nbsp;<span class="ident" id="3267580">parse</span><span class="op" id="3267585">.</span><span class="ident" id="3267586">Node</span><span class="op" id="3267590">,</span>&nbsp;<span class="ident" id="3267592">name</span>&nbsp;<span class="builtintype" id="3267597">string</span><span class="op" id="3267603">,</span>&nbsp;<span class="ident" id="3267605">args</span>&nbsp;<span class="op" id="3267610">[</span><span class="op" id="3267611">]</span><span class="ident" id="3267612">parse</span><span class="op" id="3267617">.</span><span class="ident" id="3267618">Node</span><span class="op" id="3267622">,</span>&nbsp;<span class="ident" id="3267624">final</span>&nbsp;<span class="ident" id="3267630">reflect</span><span class="op" id="3267637">.</span><span class="ident" id="3267638">Value</span><span class="op" id="3267643">)</span>&nbsp;<span class="ident" id="3267645">reflect</span><span class="op" id="3267652">.</span><span class="ident" id="3267653">Value</span>&nbsp;<span class="op" id="3267659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3267662">if</span>&nbsp;<span class="ident" id="3267665">args</span>&nbsp;<span class="op" id="3267670">!=</span>&nbsp;<span class="builtintype" id="3267673">nil</span>&nbsp;<span class="op" id="3267677">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267681">args</span>&nbsp;<span class="op" id="3267686">=</span>&nbsp;<span class="ident" id="3267688">args</span><span class="op" id="3267692">[</span><span class="num" id="3267693">1</span><span class="op" id="3267694">:</span><span class="op" id="3267695">]</span>&nbsp;<span class="comment" id="3267697">//&nbsp;Zeroth&nbsp;arg&nbsp;is&nbsp;function&nbsp;name/node;&nbsp;not&nbsp;passed&nbsp;to&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3267759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267762">typ</span>&nbsp;<span class="op" id="3267766">:=</span>&nbsp;<span class="ident" id="3267769">fun</span><span class="op" id="3267772">.</span><span class="ident" id="3267773">Type</span><span class="op" id="3267777">(</span><span class="op" id="3267778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267781">numIn</span>&nbsp;<span class="op" id="3267787">:=</span>&nbsp;<span class="builtinfunc" id="3267790">len</span><span class="op" id="3267793">(</span><span class="ident" id="3267794">args</span><span class="op" id="3267798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3267801">if</span>&nbsp;<span class="ident" id="3267804">final</span><span class="op" id="3267809">.</span><span class="ident" id="3267810">IsValid</span><span class="op" id="3267817">(</span><span class="op" id="3267818">)</span>&nbsp;<span class="op" id="3267820">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267824">numIn</span><span class="op" id="3267829">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3267833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267836">numFixed</span>&nbsp;<span class="op" id="3267845">:=</span>&nbsp;<span class="builtinfunc" id="3267848">len</span><span class="op" id="3267851">(</span><span class="ident" id="3267852">args</span><span class="op" id="3267856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3267859">if</span>&nbsp;<span class="ident" id="3267862">typ</span><span class="op" id="3267865">.</span><span class="ident" id="3267866">IsVariadic</span><span class="op" id="3267876">(</span><span class="op" id="3267877">)</span>&nbsp;<span class="op" id="3267879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267883">numFixed</span>&nbsp;<span class="op" id="3267892">=</span>&nbsp;<span class="ident" id="3267894">typ</span><span class="op" id="3267897">.</span><span class="ident" id="3267898">NumIn</span><span class="op" id="3267903">(</span><span class="op" id="3267904">)</span>&nbsp;<span class="op" id="3267906">-</span>&nbsp;<span class="num" id="3267908">1</span>&nbsp;<span class="comment" id="3267910">//&nbsp;last&nbsp;arg&nbsp;is&nbsp;the&nbsp;variadic&nbsp;one.</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3267945">if</span>&nbsp;<span class="ident" id="3267948">numIn</span>&nbsp;<span class="op" id="3267954">&lt;</span>&nbsp;<span class="ident" id="3267956">numFixed</span>&nbsp;<span class="op" id="3267965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3267970">s</span><span class="op" id="3267971">.</span><span class="ident" id="3267972">errorf</span><span class="op" id="3267978">(</span><span class="string" id="3267979">&#34;wrong&nbsp;number&nbsp;of&nbsp;args&nbsp;for&nbsp;%s:&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&nbsp;got&nbsp;%d&#34;</span><span class="op" id="3268033">,</span>&nbsp;<span class="ident" id="3268035">name</span><span class="op" id="3268039">,</span>&nbsp;<span class="ident" id="3268041">typ</span><span class="op" id="3268044">.</span><span class="ident" id="3268045">NumIn</span><span class="op" id="3268050">(</span><span class="op" id="3268051">)</span><span class="op" id="3268052">-</span><span class="num" id="3268053">1</span><span class="op" id="3268054">,</span>&nbsp;<span class="builtinfunc" id="3268056">len</span><span class="op" id="3268059">(</span><span class="ident" id="3268060">args</span><span class="op" id="3268064">)</span><span class="op" id="3268065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268072">}</span>&nbsp;<span class="keyword" id="3268074">else</span>&nbsp;<span class="keyword" id="3268079">if</span>&nbsp;<span class="ident" id="3268082">numIn</span>&nbsp;<span class="op" id="3268088">&lt;</span>&nbsp;<span class="ident" id="3268090">typ</span><span class="op" id="3268093">.</span><span class="ident" id="3268094">NumIn</span><span class="op" id="3268099">(</span><span class="op" id="3268100">)</span><span class="op" id="3268101">-</span><span class="num" id="3268102">1</span>&nbsp;<span class="op" id="3268104">||</span>&nbsp;<span class="op" id="3268107">!</span><span class="ident" id="3268108">typ</span><span class="op" id="3268111">.</span><span class="ident" id="3268112">IsVariadic</span><span class="op" id="3268122">(</span><span class="op" id="3268123">)</span>&nbsp;<span class="op" id="3268125">&amp;&amp;</span>&nbsp;<span class="ident" id="3268128">numIn</span>&nbsp;<span class="op" id="3268134">!=</span>&nbsp;<span class="ident" id="3268137">typ</span><span class="op" id="3268140">.</span><span class="ident" id="3268141">NumIn</span><span class="op" id="3268146">(</span><span class="op" id="3268147">)</span>&nbsp;<span class="op" id="3268149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268153">s</span><span class="op" id="3268154">.</span><span class="ident" id="3268155">errorf</span><span class="op" id="3268161">(</span><span class="string" id="3268162">&#34;wrong&nbsp;number&nbsp;of&nbsp;args&nbsp;for&nbsp;%s:&nbsp;want&nbsp;%d&nbsp;got&nbsp;%d&#34;</span><span class="op" id="3268207">,</span>&nbsp;<span class="ident" id="3268209">name</span><span class="op" id="3268213">,</span>&nbsp;<span class="ident" id="3268215">typ</span><span class="op" id="3268218">.</span><span class="ident" id="3268219">NumIn</span><span class="op" id="3268224">(</span><span class="op" id="3268225">)</span><span class="op" id="3268226">,</span>&nbsp;<span class="builtinfunc" id="3268228">len</span><span class="op" id="3268231">(</span><span class="ident" id="3268232">args</span><span class="op" id="3268236">)</span><span class="op" id="3268237">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3268243">if</span>&nbsp;<span class="op" id="3268246">!</span><span class="ident" id="3268247">goodFunc</span><span class="op" id="3268255">(</span><span class="ident" id="3268256">typ</span><span class="op" id="3268259">)</span>&nbsp;<span class="op" id="3268261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3268265">//&nbsp;TODO:&nbsp;This&nbsp;could&nbsp;still&nbsp;be&nbsp;a&nbsp;confusing&nbsp;error;&nbsp;maybe&nbsp;goodFunc&nbsp;should&nbsp;provide&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268351">s</span><span class="op" id="3268352">.</span><span class="ident" id="3268353">errorf</span><span class="op" id="3268359">(</span><span class="string" id="3268360">&#34;can&#39;t&nbsp;call&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="3268407">,</span>&nbsp;<span class="ident" id="3268409">name</span><span class="op" id="3268413">,</span>&nbsp;<span class="ident" id="3268415">typ</span><span class="op" id="3268418">.</span><span class="ident" id="3268419">NumOut</span><span class="op" id="3268425">(</span><span class="op" id="3268426">)</span><span class="op" id="3268427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268430">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3268433">//&nbsp;Build&nbsp;the&nbsp;arg&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268457">argv</span>&nbsp;<span class="op" id="3268462">:=</span>&nbsp;<span class="builtinfunc" id="3268465">make</span><span class="op" id="3268469">(</span><span class="op" id="3268470">[</span><span class="op" id="3268471">]</span><span class="ident" id="3268472">reflect</span><span class="op" id="3268479">.</span><span class="ident" id="3268480">Value</span><span class="op" id="3268485">,</span>&nbsp;<span class="ident" id="3268487">numIn</span><span class="op" id="3268492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3268495">//&nbsp;Args&nbsp;must&nbsp;be&nbsp;evaluated.&nbsp;Fixed&nbsp;args&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268541">i</span>&nbsp;<span class="op" id="3268543">:=</span>&nbsp;<span class="num" id="3268546">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3268549">for</span>&nbsp;<span class="op" id="3268553">;</span>&nbsp;<span class="ident" id="3268555">i</span>&nbsp;<span class="op" id="3268557">&lt;</span>&nbsp;<span class="ident" id="3268559">numFixed</span>&nbsp;<span class="op" id="3268568">&amp;&amp;</span>&nbsp;<span class="ident" id="3268571">i</span>&nbsp;<span class="op" id="3268573">&lt;</span>&nbsp;<span class="builtinfunc" id="3268575">len</span><span class="op" id="3268578">(</span><span class="ident" id="3268579">args</span><span class="op" id="3268583">)</span><span class="op" id="3268584">;</span>&nbsp;<span class="ident" id="3268586">i</span><span class="op" id="3268587">++</span>&nbsp;<span class="op" id="3268590">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268594">argv</span><span class="op" id="3268598">[</span><span class="ident" id="3268599">i</span><span class="op" id="3268600">]</span>&nbsp;<span class="op" id="3268602">=</span>&nbsp;<span class="ident" id="3268604">s</span><span class="op" id="3268605">.</span><span class="ident" id="3268606">evalArg</span><span class="op" id="3268613">(</span><span class="ident" id="3268614">dot</span><span class="op" id="3268617">,</span>&nbsp;<span class="ident" id="3268619">typ</span><span class="op" id="3268622">.</span><span class="ident" id="3268623">In</span><span class="op" id="3268625">(</span><span class="ident" id="3268626">i</span><span class="op" id="3268627">)</span><span class="op" id="3268628">,</span>&nbsp;<span class="ident" id="3268630">args</span><span class="op" id="3268634">[</span><span class="ident" id="3268635">i</span><span class="op" id="3268636">]</span><span class="op" id="3268637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3268643">//&nbsp;Now&nbsp;the&nbsp;...&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3268665">if</span>&nbsp;<span class="ident" id="3268668">typ</span><span class="op" id="3268671">.</span><span class="ident" id="3268672">IsVariadic</span><span class="op" id="3268682">(</span><span class="op" id="3268683">)</span>&nbsp;<span class="op" id="3268685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268689">argType</span>&nbsp;<span class="op" id="3268697">:=</span>&nbsp;<span class="ident" id="3268700">typ</span><span class="op" id="3268703">.</span><span class="ident" id="3268704">In</span><span class="op" id="3268706">(</span><span class="ident" id="3268707">typ</span><span class="op" id="3268710">.</span><span class="ident" id="3268711">NumIn</span><span class="op" id="3268716">(</span><span class="op" id="3268717">)</span>&nbsp;<span class="op" id="3268719">-</span>&nbsp;<span class="num" id="3268721">1</span><span class="op" id="3268722">)</span><span class="op" id="3268723">.</span><span class="ident" id="3268724">Elem</span><span class="op" id="3268728">(</span><span class="op" id="3268729">)</span>&nbsp;<span class="comment" id="3268731">//&nbsp;Argument&nbsp;is&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3268757">for</span>&nbsp;<span class="op" id="3268761">;</span>&nbsp;<span class="ident" id="3268763">i</span>&nbsp;<span class="op" id="3268765">&lt;</span>&nbsp;<span class="builtinfunc" id="3268767">len</span><span class="op" id="3268770">(</span><span class="ident" id="3268771">args</span><span class="op" id="3268775">)</span><span class="op" id="3268776">;</span>&nbsp;<span class="ident" id="3268778">i</span><span class="op" id="3268779">++</span>&nbsp;<span class="op" id="3268782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268787">argv</span><span class="op" id="3268791">[</span><span class="ident" id="3268792">i</span><span class="op" id="3268793">]</span>&nbsp;<span class="op" id="3268795">=</span>&nbsp;<span class="ident" id="3268797">s</span><span class="op" id="3268798">.</span><span class="ident" id="3268799">evalArg</span><span class="op" id="3268806">(</span><span class="ident" id="3268807">dot</span><span class="op" id="3268810">,</span>&nbsp;<span class="ident" id="3268812">argType</span><span class="op" id="3268819">,</span>&nbsp;<span class="ident" id="3268821">args</span><span class="op" id="3268825">[</span><span class="ident" id="3268826">i</span><span class="op" id="3268827">]</span><span class="op" id="3268828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3268838">//&nbsp;Add&nbsp;final&nbsp;value&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3268872">if</span>&nbsp;<span class="ident" id="3268875">final</span><span class="op" id="3268880">.</span><span class="ident" id="3268881">IsValid</span><span class="op" id="3268888">(</span><span class="op" id="3268889">)</span>&nbsp;<span class="op" id="3268891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268895">t</span>&nbsp;<span class="op" id="3268897">:=</span>&nbsp;<span class="ident" id="3268900">typ</span><span class="op" id="3268903">.</span><span class="ident" id="3268904">In</span><span class="op" id="3268906">(</span><span class="ident" id="3268907">typ</span><span class="op" id="3268910">.</span><span class="ident" id="3268911">NumIn</span><span class="op" id="3268916">(</span><span class="op" id="3268917">)</span>&nbsp;<span class="op" id="3268919">-</span>&nbsp;<span class="num" id="3268921">1</span><span class="op" id="3268922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3268926">if</span>&nbsp;<span class="ident" id="3268929">typ</span><span class="op" id="3268932">.</span><span class="ident" id="3268933">IsVariadic</span><span class="op" id="3268943">(</span><span class="op" id="3268944">)</span>&nbsp;<span class="op" id="3268946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268951">t</span>&nbsp;<span class="op" id="3268953">=</span>&nbsp;<span class="ident" id="3268955">t</span><span class="op" id="3268956">.</span><span class="ident" id="3268957">Elem</span><span class="op" id="3268961">(</span><span class="op" id="3268962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3268966">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3268970">argv</span><span class="op" id="3268974">[</span><span class="ident" id="3268975">i</span><span class="op" id="3268976">]</span>&nbsp;<span class="op" id="3268978">=</span>&nbsp;<span class="ident" id="3268980">s</span><span class="op" id="3268981">.</span><span class="ident" id="3268982">validateType</span><span class="op" id="3268994">(</span><span class="ident" id="3268995">final</span><span class="op" id="3269000">,</span>&nbsp;<span class="ident" id="3269002">t</span><span class="op" id="3269003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269009">result</span>&nbsp;<span class="op" id="3269016">:=</span>&nbsp;<span class="ident" id="3269019">fun</span><span class="op" id="3269022">.</span><span class="ident" id="3269023">Call</span><span class="op" id="3269027">(</span><span class="ident" id="3269028">argv</span><span class="op" id="3269032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3269035">//&nbsp;If&nbsp;we&nbsp;have&nbsp;an&nbsp;error&nbsp;that&nbsp;is&nbsp;not&nbsp;nil,&nbsp;stop&nbsp;execution&nbsp;and&nbsp;return&nbsp;that&nbsp;error&nbsp;to&nbsp;the&nbsp;caller.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269128">if</span>&nbsp;<span class="builtinfunc" id="3269131">len</span><span class="op" id="3269134">(</span><span class="ident" id="3269135">result</span><span class="op" id="3269141">)</span>&nbsp;<span class="op" id="3269143">==</span>&nbsp;<span class="num" id="3269146">2</span>&nbsp;<span class="op" id="3269148">&amp;&amp;</span>&nbsp;<span class="op" id="3269151">!</span><span class="ident" id="3269152">result</span><span class="op" id="3269158">[</span><span class="num" id="3269159">1</span><span class="op" id="3269160">]</span><span class="op" id="3269161">.</span><span class="ident" id="3269162">IsNil</span><span class="op" id="3269167">(</span><span class="op" id="3269168">)</span>&nbsp;<span class="op" id="3269170">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269174">s</span><span class="op" id="3269175">.</span><span class="ident" id="3269176">at</span><span class="op" id="3269178">(</span><span class="ident" id="3269179">node</span><span class="op" id="3269183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269187">s</span><span class="op" id="3269188">.</span><span class="ident" id="3269189">errorf</span><span class="op" id="3269195">(</span><span class="string" id="3269196">&#34;error&nbsp;calling&nbsp;%s:&nbsp;%s&#34;</span><span class="op" id="3269218">,</span>&nbsp;<span class="ident" id="3269220">name</span><span class="op" id="3269224">,</span>&nbsp;<span class="ident" id="3269226">result</span><span class="op" id="3269232">[</span><span class="num" id="3269233">1</span><span class="op" id="3269234">]</span><span class="op" id="3269235">.</span><span class="ident" id="3269236">Interface</span><span class="op" id="3269245">(</span><span class="op" id="3269246">)</span><span class="op" id="3269247">.</span><span class="op" id="3269248">(</span><span class="builtintype" id="3269249">error</span><span class="op" id="3269254">)</span><span class="op" id="3269255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269261">return</span>&nbsp;<span class="ident" id="3269268">result</span><span class="op" id="3269274">[</span><span class="num" id="3269275">0</span><span class="op" id="3269276">]</span><br>
<span class="lineno"></span><span class="op" id="3269278">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="3269281">//&nbsp;canBeNil&nbsp;reports&nbsp;whether&nbsp;an&nbsp;untyped&nbsp;nil&nbsp;can&nbsp;be&nbsp;assigned&nbsp;to&nbsp;the&nbsp;type.&nbsp;See&nbsp;reflect.Zero.</span><br>
<span class="lineno"></span><span class="keyword" id="3269371">func</span>&nbsp;<span class="ident" id="3269376">canBeNil</span><span class="op" id="3269384">(</span><span class="ident" id="3269385">typ</span>&nbsp;<span class="ident" id="3269389">reflect</span><span class="op" id="3269396">.</span><span class="ident" id="3269397">Type</span><span class="op" id="3269401">)</span>&nbsp;<span class="builtintype" id="3269403">bool</span>&nbsp;<span class="op" id="3269408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269411">switch</span>&nbsp;<span class="ident" id="3269418">typ</span><span class="op" id="3269421">.</span><span class="ident" id="3269422">Kind</span><span class="op" id="3269426">(</span><span class="op" id="3269427">)</span>&nbsp;<span class="op" id="3269429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269432">case</span>&nbsp;<span class="ident" id="3269437">reflect</span><span class="op" id="3269444">.</span><span class="ident" id="3269445">Chan</span><span class="op" id="3269449">,</span>&nbsp;<span class="ident" id="3269451">reflect</span><span class="op" id="3269458">.</span><span class="ident" id="3269459">Func</span><span class="op" id="3269463">,</span>&nbsp;<span class="ident" id="3269465">reflect</span><span class="op" id="3269472">.</span><span class="ident" id="3269473">Interface</span><span class="op" id="3269482">,</span>&nbsp;<span class="ident" id="3269484">reflect</span><span class="op" id="3269491">.</span><span class="ident" id="3269492">Map</span><span class="op" id="3269495">,</span>&nbsp;<span class="ident" id="3269497">reflect</span><span class="op" id="3269504">.</span><span class="ident" id="3269505">Ptr</span><span class="op" id="3269508">,</span>&nbsp;<span class="ident" id="3269510">reflect</span><span class="op" id="3269517">.</span><span class="ident" id="3269518">Slice</span><span class="op" id="3269523">:</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269527">return</span>&nbsp;<span class="builtintype" id="3269534">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269543">return</span>&nbsp;<span class="builtintype" id="3269550">false</span><br>
<span class="lineno"></span><span class="op" id="3269556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="comment" id="3269559">//&nbsp;validateType&nbsp;guarantees&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;valid&nbsp;and&nbsp;assignable&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3269638">func</span>&nbsp;<span class="op" id="3269643">(</span><span class="ident" id="3269644">s</span>&nbsp;<span class="op" id="3269646">*</span><span class="ident" id="3269647">state</span><span class="op" id="3269652">)</span>&nbsp;<span class="ident" id="3269654">validateType</span><span class="op" id="3269666">(</span><span class="ident" id="3269667">value</span>&nbsp;<span class="ident" id="3269673">reflect</span><span class="op" id="3269680">.</span><span class="ident" id="3269681">Value</span><span class="op" id="3269686">,</span>&nbsp;<span class="ident" id="3269688">typ</span>&nbsp;<span class="ident" id="3269692">reflect</span><span class="op" id="3269699">.</span><span class="ident" id="3269700">Type</span><span class="op" id="3269704">)</span>&nbsp;<span class="ident" id="3269706">reflect</span><span class="op" id="3269713">.</span><span class="ident" id="3269714">Value</span>&nbsp;<span class="op" id="3269720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269723">if</span>&nbsp;<span class="op" id="3269726">!</span><span class="ident" id="3269727">value</span><span class="op" id="3269732">.</span><span class="ident" id="3269733">IsValid</span><span class="op" id="3269740">(</span><span class="op" id="3269741">)</span>&nbsp;<span class="op" id="3269743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269747">if</span>&nbsp;<span class="ident" id="3269750">typ</span>&nbsp;<span class="op" id="3269754">==</span>&nbsp;<span class="builtintype" id="3269757">nil</span>&nbsp;<span class="op" id="3269761">||</span>&nbsp;<span class="ident" id="3269764">canBeNil</span><span class="op" id="3269772">(</span><span class="ident" id="3269773">typ</span><span class="op" id="3269776">)</span>&nbsp;<span class="op" id="3269778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3269783">//&nbsp;An&nbsp;untyped&nbsp;nil&nbsp;interface{}.&nbsp;Accept&nbsp;as&nbsp;a&nbsp;proper&nbsp;nil&nbsp;value.</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269847">return</span>&nbsp;<span class="ident" id="3269854">reflect</span><span class="op" id="3269861">.</span><span class="ident" id="3269862">Zero</span><span class="op" id="3269866">(</span><span class="ident" id="3269867">typ</span><span class="op" id="3269870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269878">s</span><span class="op" id="3269879">.</span><span class="ident" id="3269880">errorf</span><span class="op" id="3269886">(</span><span class="string" id="3269887">&#34;invalid&nbsp;value;&nbsp;expected&nbsp;%s&#34;</span><span class="op" id="3269915">,</span>&nbsp;<span class="ident" id="3269917">typ</span><span class="op" id="3269920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269926">if</span>&nbsp;<span class="ident" id="3269929">typ</span>&nbsp;<span class="op" id="3269933">!=</span>&nbsp;<span class="builtintype" id="3269936">nil</span>&nbsp;<span class="op" id="3269940">&amp;&amp;</span>&nbsp;<span class="op" id="3269943">!</span><span class="ident" id="3269944">value</span><span class="op" id="3269949">.</span><span class="ident" id="3269950">Type</span><span class="op" id="3269954">(</span><span class="op" id="3269955">)</span><span class="op" id="3269956">.</span><span class="ident" id="3269957">AssignableTo</span><span class="op" id="3269969">(</span><span class="ident" id="3269970">typ</span><span class="op" id="3269973">)</span>&nbsp;<span class="op" id="3269975">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269979">if</span>&nbsp;<span class="ident" id="3269982">value</span><span class="op" id="3269987">.</span><span class="ident" id="3269988">Kind</span><span class="op" id="3269992">(</span><span class="op" id="3269993">)</span>&nbsp;<span class="op" id="3269995">==</span>&nbsp;<span class="ident" id="3269998">reflect</span><span class="op" id="3270005">.</span><span class="ident" id="3270006">Interface</span>&nbsp;<span class="op" id="3270016">&amp;&amp;</span>&nbsp;<span class="op" id="3270019">!</span><span class="ident" id="3270020">value</span><span class="op" id="3270025">.</span><span class="ident" id="3270026">IsNil</span><span class="op" id="3270031">(</span><span class="op" id="3270032">)</span>&nbsp;<span class="op" id="3270034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270039">value</span>&nbsp;<span class="op" id="3270045">=</span>&nbsp;<span class="ident" id="3270047">value</span><span class="op" id="3270052">.</span><span class="ident" id="3270053">Elem</span><span class="op" id="3270057">(</span><span class="op" id="3270058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270063">if</span>&nbsp;<span class="ident" id="3270066">value</span><span class="op" id="3270071">.</span><span class="ident" id="3270072">Type</span><span class="op" id="3270076">(</span><span class="op" id="3270077">)</span><span class="op" id="3270078">.</span><span class="ident" id="3270079">AssignableTo</span><span class="op" id="3270091">(</span><span class="ident" id="3270092">typ</span><span class="op" id="3270095">)</span>&nbsp;<span class="op" id="3270097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270103">return</span>&nbsp;<span class="ident" id="3270110">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270119">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3270124">//&nbsp;fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3270145">//&nbsp;Does&nbsp;one&nbsp;dereference&nbsp;or&nbsp;indirection&nbsp;work?&nbsp;We&nbsp;could&nbsp;do&nbsp;more,&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3270216">//&nbsp;do&nbsp;with&nbsp;method&nbsp;receivers,&nbsp;but&nbsp;that&nbsp;gets&nbsp;messy&nbsp;and&nbsp;method&nbsp;receivers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3270288">//&nbsp;are&nbsp;much&nbsp;more&nbsp;constrained,&nbsp;so&nbsp;it&nbsp;makes&nbsp;more&nbsp;sense&nbsp;there&nbsp;than&nbsp;here.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3270360">//&nbsp;Besides,&nbsp;one&nbsp;is&nbsp;almost&nbsp;always&nbsp;all&nbsp;you&nbsp;need.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270409">switch</span>&nbsp;<span class="op" id="3270416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270420">case</span>&nbsp;<span class="ident" id="3270425">value</span><span class="op" id="3270430">.</span><span class="ident" id="3270431">Kind</span><span class="op" id="3270435">(</span><span class="op" id="3270436">)</span>&nbsp;<span class="op" id="3270438">==</span>&nbsp;<span class="ident" id="3270441">reflect</span><span class="op" id="3270448">.</span><span class="ident" id="3270449">Ptr</span>&nbsp;<span class="op" id="3270453">&amp;&amp;</span>&nbsp;<span class="ident" id="3270456">value</span><span class="op" id="3270461">.</span><span class="ident" id="3270462">Type</span><span class="op" id="3270466">(</span><span class="op" id="3270467">)</span><span class="op" id="3270468">.</span><span class="ident" id="3270469">Elem</span><span class="op" id="3270473">(</span><span class="op" id="3270474">)</span><span class="op" id="3270475">.</span><span class="ident" id="3270476">AssignableTo</span><span class="op" id="3270488">(</span><span class="ident" id="3270489">typ</span><span class="op" id="3270492">)</span><span class="op" id="3270493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270498">value</span>&nbsp;<span class="op" id="3270504">=</span>&nbsp;<span class="ident" id="3270506">value</span><span class="op" id="3270511">.</span><span class="ident" id="3270512">Elem</span><span class="op" id="3270516">(</span><span class="op" id="3270517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270522">if</span>&nbsp;<span class="op" id="3270525">!</span><span class="ident" id="3270526">value</span><span class="op" id="3270531">.</span><span class="ident" id="3270532">IsValid</span><span class="op" id="3270539">(</span><span class="op" id="3270540">)</span>&nbsp;<span class="op" id="3270542">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270548">s</span><span class="op" id="3270549">.</span><span class="ident" id="3270550">errorf</span><span class="op" id="3270556">(</span><span class="string" id="3270557">&#34;dereference&nbsp;of&nbsp;nil&nbsp;pointer&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3270596">,</span>&nbsp;<span class="ident" id="3270598">typ</span><span class="op" id="3270601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270610">case</span>&nbsp;<span class="ident" id="3270615">reflect</span><span class="op" id="3270622">.</span><span class="ident" id="3270623">PtrTo</span><span class="op" id="3270628">(</span><span class="ident" id="3270629">value</span><span class="op" id="3270634">.</span><span class="ident" id="3270635">Type</span><span class="op" id="3270639">(</span><span class="op" id="3270640">)</span><span class="op" id="3270641">)</span><span class="op" id="3270642">.</span><span class="ident" id="3270643">AssignableTo</span><span class="op" id="3270655">(</span><span class="ident" id="3270656">typ</span><span class="op" id="3270659">)</span>&nbsp;<span class="op" id="3270661">&amp;&amp;</span>&nbsp;<span class="ident" id="3270664">value</span><span class="op" id="3270669">.</span><span class="ident" id="3270670">CanAddr</span><span class="op" id="3270677">(</span><span class="op" id="3270678">)</span><span class="op" id="3270679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270684">value</span>&nbsp;<span class="op" id="3270690">=</span>&nbsp;<span class="ident" id="3270692">value</span><span class="op" id="3270697">.</span><span class="ident" id="3270698">Addr</span><span class="op" id="3270702">(</span><span class="op" id="3270703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270707">default</span><span class="op" id="3270714">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270719">s</span><span class="op" id="3270720">.</span><span class="ident" id="3270721">errorf</span><span class="op" id="3270727">(</span><span class="string" id="3270728">&#34;wrong&nbsp;type&nbsp;for&nbsp;value;&nbsp;expected&nbsp;%s;&nbsp;got&nbsp;%s&#34;</span><span class="op" id="3270771">,</span>&nbsp;<span class="ident" id="3270773">typ</span><span class="op" id="3270776">,</span>&nbsp;<span class="ident" id="3270778">value</span><span class="op" id="3270783">.</span><span class="ident" id="3270784">Type</span><span class="op" id="3270788">(</span><span class="op" id="3270789">)</span><span class="op" id="3270790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270800">return</span>&nbsp;<span class="ident" id="3270807">value</span><br>
<span class="lineno"></span><span class="op" id="3270813">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span><span class="keyword" id="3270816">func</span>&nbsp;<span class="op" id="3270821">(</span><span class="ident" id="3270822">s</span>&nbsp;<span class="op" id="3270824">*</span><span class="ident" id="3270825">state</span><span class="op" id="3270830">)</span>&nbsp;<span class="ident" id="3270832">evalArg</span><span class="op" id="3270839">(</span><span class="ident" id="3270840">dot</span>&nbsp;<span class="ident" id="3270844">reflect</span><span class="op" id="3270851">.</span><span class="ident" id="3270852">Value</span><span class="op" id="3270857">,</span>&nbsp;<span class="ident" id="3270859">typ</span>&nbsp;<span class="ident" id="3270863">reflect</span><span class="op" id="3270870">.</span><span class="ident" id="3270871">Type</span><span class="op" id="3270875">,</span>&nbsp;<span class="ident" id="3270877">n</span>&nbsp;<span class="ident" id="3270879">parse</span><span class="op" id="3270884">.</span><span class="ident" id="3270885">Node</span><span class="op" id="3270889">)</span>&nbsp;<span class="ident" id="3270891">reflect</span><span class="op" id="3270898">.</span><span class="ident" id="3270899">Value</span>&nbsp;<span class="op" id="3270905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270908">s</span><span class="op" id="3270909">.</span><span class="ident" id="3270910">at</span><span class="op" id="3270912">(</span><span class="ident" id="3270913">n</span><span class="op" id="3270914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270917">switch</span>&nbsp;<span class="ident" id="3270924">arg</span>&nbsp;<span class="op" id="3270928">:=</span>&nbsp;<span class="ident" id="3270931">n</span><span class="op" id="3270932">.</span><span class="op" id="3270933">(</span><span class="keyword" id="3270934">type</span><span class="op" id="3270938">)</span>&nbsp;<span class="op" id="3270940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270943">case</span>&nbsp;<span class="op" id="3270948">*</span><span class="ident" id="3270949">parse</span><span class="op" id="3270954">.</span><span class="ident" id="3270955">DotNode</span><span class="op" id="3270962">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270966">return</span>&nbsp;<span class="ident" id="3270973">s</span><span class="op" id="3270974">.</span><span class="ident" id="3270975">validateType</span><span class="op" id="3270987">(</span><span class="ident" id="3270988">dot</span><span class="op" id="3270991">,</span>&nbsp;<span class="ident" id="3270993">typ</span><span class="op" id="3270996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270999">case</span>&nbsp;<span class="op" id="3271004">*</span><span class="ident" id="3271005">parse</span><span class="op" id="3271010">.</span><span class="ident" id="3271011">NilNode</span><span class="op" id="3271018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271022">if</span>&nbsp;<span class="ident" id="3271025">canBeNil</span><span class="op" id="3271033">(</span><span class="ident" id="3271034">typ</span><span class="op" id="3271037">)</span>&nbsp;<span class="op" id="3271039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271044">return</span>&nbsp;<span class="ident" id="3271051">reflect</span><span class="op" id="3271058">.</span><span class="ident" id="3271059">Zero</span><span class="op" id="3271063">(</span><span class="ident" id="3271064">typ</span><span class="op" id="3271067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271071">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3271075">s</span><span class="op" id="3271076">.</span><span class="ident" id="3271077">errorf</span><span class="op" id="3271083">(</span><span class="string" id="3271084">&#34;cannot&nbsp;assign&nbsp;nil&nbsp;to&nbsp;%s&#34;</span><span class="op" id="3271109">,</span>&nbsp;<span class="ident" id="3271111">typ</span><span class="op" id="3271114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271117">case</span>&nbsp;<span class="op" id="3271122">*</span><span class="ident" id="3271123">parse</span><span class="op" id="3271128">.</span><span class="ident" id="3271129">FieldNode</span><span class="op" id="3271138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271142">return</span>&nbsp;<span class="ident" id="3271149">s</span><span class="op" id="3271150">.</span><span class="ident" id="3271151">validateType</span><span class="op" id="3271163">(</span><span class="ident" id="3271164">s</span><span class="op" id="3271165">.</span><span class="ident" id="3271166">evalFieldNode</span><span class="op" id="3271179">(</span><span class="ident" id="3271180">dot</span><span class="op" id="3271183">,</span>&nbsp;<span class="ident" id="3271185">arg</span><span class="op" id="3271188">,</span>&nbsp;<span class="op" id="3271190">[</span><span class="op" id="3271191">]</span><span class="ident" id="3271192">parse</span><span class="op" id="3271197">.</span><span class="ident" id="3271198">Node</span><span class="op" id="3271202">{</span><span class="ident" id="3271203">n</span><span class="op" id="3271204">}</span><span class="op" id="3271205">,</span>&nbsp;<span class="ident" id="3271207">zero</span><span class="op" id="3271211">)</span><span class="op" id="3271212">,</span>&nbsp;<span class="ident" id="3271214">typ</span><span class="op" id="3271217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271220">case</span>&nbsp;<span class="op" id="3271225">*</span><span class="ident" id="3271226">parse</span><span class="op" id="3271231">.</span><span class="ident" id="3271232">VariableNode</span><span class="op" id="3271244">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271248">return</span>&nbsp;<span class="ident" id="3271255">s</span><span class="op" id="3271256">.</span><span class="ident" id="3271257">validateType</span><span class="op" id="3271269">(</span><span class="ident" id="3271270">s</span><span class="op" id="3271271">.</span><span class="ident" id="3271272">evalVariableNode</span><span class="op" id="3271288">(</span><span class="ident" id="3271289">dot</span><span class="op" id="3271292">,</span>&nbsp;<span class="ident" id="3271294">arg</span><span class="op" id="3271297">,</span>&nbsp;<span class="builtintype" id="3271299">nil</span><span class="op" id="3271302">,</span>&nbsp;<span class="ident" id="3271304">zero</span><span class="op" id="3271308">)</span><span class="op" id="3271309">,</span>&nbsp;<span class="ident" id="3271311">typ</span><span class="op" id="3271314">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271317">case</span>&nbsp;<span class="op" id="3271322">*</span><span class="ident" id="3271323">parse</span><span class="op" id="3271328">.</span><span class="ident" id="3271329">PipeNode</span><span class="op" id="3271337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271341">return</span>&nbsp;<span class="ident" id="3271348">s</span><span class="op" id="3271349">.</span><span class="ident" id="3271350">validateType</span><span class="op" id="3271362">(</span><span class="ident" id="3271363">s</span><span class="op" id="3271364">.</span><span class="ident" id="3271365">evalPipeline</span><span class="op" id="3271377">(</span><span class="ident" id="3271378">dot</span><span class="op" id="3271381">,</span>&nbsp;<span class="ident" id="3271383">arg</span><span class="op" id="3271386">)</span><span class="op" id="3271387">,</span>&nbsp;<span class="ident" id="3271389">typ</span><span class="op" id="3271392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271395">case</span>&nbsp;<span class="op" id="3271400">*</span><span class="ident" id="3271401">parse</span><span class="op" id="3271406">.</span><span class="ident" id="3271407">IdentifierNode</span><span class="op" id="3271421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271425">return</span>&nbsp;<span class="ident" id="3271432">s</span><span class="op" id="3271433">.</span><span class="ident" id="3271434">evalFunction</span><span class="op" id="3271446">(</span><span class="ident" id="3271447">dot</span><span class="op" id="3271450">,</span>&nbsp;<span class="ident" id="3271452">arg</span><span class="op" id="3271455">,</span>&nbsp;<span class="ident" id="3271457">arg</span><span class="op" id="3271460">,</span>&nbsp;<span class="builtintype" id="3271462">nil</span><span class="op" id="3271465">,</span>&nbsp;<span class="ident" id="3271467">zero</span><span class="op" id="3271471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271474">case</span>&nbsp;<span class="op" id="3271479">*</span><span class="ident" id="3271480">parse</span><span class="op" id="3271485">.</span><span class="ident" id="3271486">ChainNode</span><span class="op" id="3271495">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271499">return</span>&nbsp;<span class="ident" id="3271506">s</span><span class="op" id="3271507">.</span><span class="ident" id="3271508">validateType</span><span class="op" id="3271520">(</span><span class="ident" id="3271521">s</span><span class="op" id="3271522">.</span><span class="ident" id="3271523">evalChainNode</span><span class="op" id="3271536">(</span><span class="ident" id="3271537">dot</span><span class="op" id="3271540">,</span>&nbsp;<span class="ident" id="3271542">arg</span><span class="op" id="3271545">,</span>&nbsp;<span class="builtintype" id="3271547">nil</span><span class="op" id="3271550">,</span>&nbsp;<span class="ident" id="3271552">zero</span><span class="op" id="3271556">)</span><span class="op" id="3271557">,</span>&nbsp;<span class="ident" id="3271559">typ</span><span class="op" id="3271562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271568">switch</span>&nbsp;<span class="ident" id="3271575">typ</span><span class="op" id="3271578">.</span><span class="ident" id="3271579">Kind</span><span class="op" id="3271583">(</span><span class="op" id="3271584">)</span>&nbsp;<span class="op" id="3271586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271589">case</span>&nbsp;<span class="ident" id="3271594">reflect</span><span class="op" id="3271601">.</span><span class="ident" id="3271602">Bool</span><span class="op" id="3271606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271610">return</span>&nbsp;<span class="ident" id="3271617">s</span><span class="op" id="3271618">.</span><span class="ident" id="3271619">evalBool</span><span class="op" id="3271627">(</span><span class="ident" id="3271628">typ</span><span class="op" id="3271631">,</span>&nbsp;<span class="ident" id="3271633">n</span><span class="op" id="3271634">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271637">case</span>&nbsp;<span class="ident" id="3271642">reflect</span><span class="op" id="3271649">.</span><span class="ident" id="3271650">Complex64</span><span class="op" id="3271659">,</span>&nbsp;<span class="ident" id="3271661">reflect</span><span class="op" id="3271668">.</span><span class="ident" id="3271669">Complex128</span><span class="op" id="3271679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271683">return</span>&nbsp;<span class="ident" id="3271690">s</span><span class="op" id="3271691">.</span><span class="ident" id="3271692">evalComplex</span><span class="op" id="3271703">(</span><span class="ident" id="3271704">typ</span><span class="op" id="3271707">,</span>&nbsp;<span class="ident" id="3271709">n</span><span class="op" id="3271710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271713">case</span>&nbsp;<span class="ident" id="3271718">reflect</span><span class="op" id="3271725">.</span><span class="ident" id="3271726">Float32</span><span class="op" id="3271733">,</span>&nbsp;<span class="ident" id="3271735">reflect</span><span class="op" id="3271742">.</span><span class="ident" id="3271743">Float64</span><span class="op" id="3271750">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271754">return</span>&nbsp;<span class="ident" id="3271761">s</span><span class="op" id="3271762">.</span><span class="ident" id="3271763">evalFloat</span><span class="op" id="3271772">(</span><span class="ident" id="3271773">typ</span><span class="op" id="3271776">,</span>&nbsp;<span class="ident" id="3271778">n</span><span class="op" id="3271779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271782">case</span>&nbsp;<span class="ident" id="3271787">reflect</span><span class="op" id="3271794">.</span><span class="ident" id="3271795">Int</span><span class="op" id="3271798">,</span>&nbsp;<span class="ident" id="3271800">reflect</span><span class="op" id="3271807">.</span><span class="ident" id="3271808">Int8</span><span class="op" id="3271812">,</span>&nbsp;<span class="ident" id="3271814">reflect</span><span class="op" id="3271821">.</span><span class="ident" id="3271822">Int16</span><span class="op" id="3271827">,</span>&nbsp;<span class="ident" id="3271829">reflect</span><span class="op" id="3271836">.</span><span class="ident" id="3271837">Int32</span><span class="op" id="3271842">,</span>&nbsp;<span class="ident" id="3271844">reflect</span><span class="op" id="3271851">.</span><span class="ident" id="3271852">Int64</span><span class="op" id="3271857">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271861">return</span>&nbsp;<span class="ident" id="3271868">s</span><span class="op" id="3271869">.</span><span class="ident" id="3271870">evalInteger</span><span class="op" id="3271881">(</span><span class="ident" id="3271882">typ</span><span class="op" id="3271885">,</span>&nbsp;<span class="ident" id="3271887">n</span><span class="op" id="3271888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271891">case</span>&nbsp;<span class="ident" id="3271896">reflect</span><span class="op" id="3271903">.</span><span class="ident" id="3271904">Interface</span><span class="op" id="3271913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271917">if</span>&nbsp;<span class="ident" id="3271920">typ</span><span class="op" id="3271923">.</span><span class="ident" id="3271924">NumMethod</span><span class="op" id="3271933">(</span><span class="op" id="3271934">)</span>&nbsp;<span class="op" id="3271936">==</span>&nbsp;<span class="num" id="3271939">0</span>&nbsp;<span class="op" id="3271941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271946">return</span>&nbsp;<span class="ident" id="3271953">s</span><span class="op" id="3271954">.</span><span class="ident" id="3271955">evalEmptyInterface</span><span class="op" id="3271973">(</span><span class="ident" id="3271974">dot</span><span class="op" id="3271977">,</span>&nbsp;<span class="ident" id="3271979">n</span><span class="op" id="3271980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271984">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271987">case</span>&nbsp;<span class="ident" id="3271992">reflect</span><span class="op" id="3271999">.</span><span class="ident" id="3272000">String</span><span class="op" id="3272006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272010">return</span>&nbsp;<span class="ident" id="3272017">s</span><span class="op" id="3272018">.</span><span class="ident" id="3272019">evalString</span><span class="op" id="3272029">(</span><span class="ident" id="3272030">typ</span><span class="op" id="3272033">,</span>&nbsp;<span class="ident" id="3272035">n</span><span class="op" id="3272036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272039">case</span>&nbsp;<span class="ident" id="3272044">reflect</span><span class="op" id="3272051">.</span><span class="ident" id="3272052">Uint</span><span class="op" id="3272056">,</span>&nbsp;<span class="ident" id="3272058">reflect</span><span class="op" id="3272065">.</span><span class="ident" id="3272066">Uint8</span><span class="op" id="3272071">,</span>&nbsp;<span class="ident" id="3272073">reflect</span><span class="op" id="3272080">.</span><span class="ident" id="3272081">Uint16</span><span class="op" id="3272087">,</span>&nbsp;<span class="ident" id="3272089">reflect</span><span class="op" id="3272096">.</span><span class="ident" id="3272097">Uint32</span><span class="op" id="3272103">,</span>&nbsp;<span class="ident" id="3272105">reflect</span><span class="op" id="3272112">.</span><span class="ident" id="3272113">Uint64</span><span class="op" id="3272119">,</span>&nbsp;<span class="ident" id="3272121">reflect</span><span class="op" id="3272128">.</span><span class="ident" id="3272129">Uintptr</span><span class="op" id="3272136">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272140">return</span>&nbsp;<span class="ident" id="3272147">s</span><span class="op" id="3272148">.</span><span class="ident" id="3272149">evalUnsignedInteger</span><span class="op" id="3272168">(</span><span class="ident" id="3272169">typ</span><span class="op" id="3272172">,</span>&nbsp;<span class="ident" id="3272174">n</span><span class="op" id="3272175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272178">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272181">s</span><span class="op" id="3272182">.</span><span class="ident" id="3272183">errorf</span><span class="op" id="3272189">(</span><span class="string" id="3272190">&#34;can&#39;t&nbsp;handle&nbsp;%s&nbsp;for&nbsp;arg&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3272226">,</span>&nbsp;<span class="ident" id="3272228">n</span><span class="op" id="3272229">,</span>&nbsp;<span class="ident" id="3272231">typ</span><span class="op" id="3272234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3272237">panic</span><span class="op" id="3272242">(</span><span class="string" id="3272243">&#34;not&nbsp;reached&#34;</span><span class="op" id="3272256">)</span><br>
<span class="lineno"></span><span class="op" id="3272258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3272261">func</span>&nbsp;<span class="op" id="3272266">(</span><span class="ident" id="3272267">s</span>&nbsp;<span class="op" id="3272269">*</span><span class="ident" id="3272270">state</span><span class="op" id="3272275">)</span>&nbsp;<span class="ident" id="3272277">evalBool</span><span class="op" id="3272285">(</span><span class="ident" id="3272286">typ</span>&nbsp;<span class="ident" id="3272290">reflect</span><span class="op" id="3272297">.</span><span class="ident" id="3272298">Type</span><span class="op" id="3272302">,</span>&nbsp;<span class="ident" id="3272304">n</span>&nbsp;<span class="ident" id="3272306">parse</span><span class="op" id="3272311">.</span><span class="ident" id="3272312">Node</span><span class="op" id="3272316">)</span>&nbsp;<span class="ident" id="3272318">reflect</span><span class="op" id="3272325">.</span><span class="ident" id="3272326">Value</span>&nbsp;<span class="op" id="3272332">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272335">s</span><span class="op" id="3272336">.</span><span class="ident" id="3272337">at</span><span class="op" id="3272339">(</span><span class="ident" id="3272340">n</span><span class="op" id="3272341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272344">if</span>&nbsp;<span class="ident" id="3272347">n</span><span class="op" id="3272348">,</span>&nbsp;<span class="ident" id="3272350">ok</span>&nbsp;<span class="op" id="3272353">:=</span>&nbsp;<span class="ident" id="3272356">n</span><span class="op" id="3272357">.</span><span class="op" id="3272358">(</span><span class="op" id="3272359">*</span><span class="ident" id="3272360">parse</span><span class="op" id="3272365">.</span><span class="ident" id="3272366">BoolNode</span><span class="op" id="3272374">)</span><span class="op" id="3272375">;</span>&nbsp;<span class="ident" id="3272377">ok</span>&nbsp;<span class="op" id="3272380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272384">value</span>&nbsp;<span class="op" id="3272390">:=</span>&nbsp;<span class="ident" id="3272393">reflect</span><span class="op" id="3272400">.</span><span class="ident" id="3272401">New</span><span class="op" id="3272404">(</span><span class="ident" id="3272405">typ</span><span class="op" id="3272408">)</span><span class="op" id="3272409">.</span><span class="ident" id="3272410">Elem</span><span class="op" id="3272414">(</span><span class="op" id="3272415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272419">value</span><span class="op" id="3272424">.</span><span class="ident" id="3272425">SetBool</span><span class="op" id="3272432">(</span><span class="ident" id="3272433">n</span><span class="op" id="3272434">.</span><span class="ident" id="3272435">True</span><span class="op" id="3272439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272443">return</span>&nbsp;<span class="ident" id="3272450">value</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272460">s</span><span class="op" id="3272461">.</span><span class="ident" id="3272462">errorf</span><span class="op" id="3272468">(</span><span class="string" id="3272469">&#34;expected&nbsp;bool;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="3272494">,</span>&nbsp;<span class="ident" id="3272496">n</span><span class="op" id="3272497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3272500">panic</span><span class="op" id="3272505">(</span><span class="string" id="3272506">&#34;not&nbsp;reached&#34;</span><span class="op" id="3272519">)</span><br>
<span class="lineno"></span><span class="op" id="3272521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="3272524">func</span>&nbsp;<span class="op" id="3272529">(</span><span class="ident" id="3272530">s</span>&nbsp;<span class="op" id="3272532">*</span><span class="ident" id="3272533">state</span><span class="op" id="3272538">)</span>&nbsp;<span class="ident" id="3272540">evalString</span><span class="op" id="3272550">(</span><span class="ident" id="3272551">typ</span>&nbsp;<span class="ident" id="3272555">reflect</span><span class="op" id="3272562">.</span><span class="ident" id="3272563">Type</span><span class="op" id="3272567">,</span>&nbsp;<span class="ident" id="3272569">n</span>&nbsp;<span class="ident" id="3272571">parse</span><span class="op" id="3272576">.</span><span class="ident" id="3272577">Node</span><span class="op" id="3272581">)</span>&nbsp;<span class="ident" id="3272583">reflect</span><span class="op" id="3272590">.</span><span class="ident" id="3272591">Value</span>&nbsp;<span class="op" id="3272597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272600">s</span><span class="op" id="3272601">.</span><span class="ident" id="3272602">at</span><span class="op" id="3272604">(</span><span class="ident" id="3272605">n</span><span class="op" id="3272606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272609">if</span>&nbsp;<span class="ident" id="3272612">n</span><span class="op" id="3272613">,</span>&nbsp;<span class="ident" id="3272615">ok</span>&nbsp;<span class="op" id="3272618">:=</span>&nbsp;<span class="ident" id="3272621">n</span><span class="op" id="3272622">.</span><span class="op" id="3272623">(</span><span class="op" id="3272624">*</span><span class="ident" id="3272625">parse</span><span class="op" id="3272630">.</span><span class="ident" id="3272631">StringNode</span><span class="op" id="3272641">)</span><span class="op" id="3272642">;</span>&nbsp;<span class="ident" id="3272644">ok</span>&nbsp;<span class="op" id="3272647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272651">value</span>&nbsp;<span class="op" id="3272657">:=</span>&nbsp;<span class="ident" id="3272660">reflect</span><span class="op" id="3272667">.</span><span class="ident" id="3272668">New</span><span class="op" id="3272671">(</span><span class="ident" id="3272672">typ</span><span class="op" id="3272675">)</span><span class="op" id="3272676">.</span><span class="ident" id="3272677">Elem</span><span class="op" id="3272681">(</span><span class="op" id="3272682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272686">value</span><span class="op" id="3272691">.</span><span class="ident" id="3272692">SetString</span><span class="op" id="3272701">(</span><span class="ident" id="3272702">n</span><span class="op" id="3272703">.</span><span class="ident" id="3272704">Text</span><span class="op" id="3272708">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272712">return</span>&nbsp;<span class="ident" id="3272719">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272729">s</span><span class="op" id="3272730">.</span><span class="ident" id="3272731">errorf</span><span class="op" id="3272737">(</span><span class="string" id="3272738">&#34;expected&nbsp;string;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="3272765">,</span>&nbsp;<span class="ident" id="3272767">n</span><span class="op" id="3272768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3272771">panic</span><span class="op" id="3272776">(</span><span class="string" id="3272777">&#34;not&nbsp;reached&#34;</span><span class="op" id="3272790">)</span><br>
<span class="lineno"></span><span class="op" id="3272792">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="keyword" id="3272795">func</span>&nbsp;<span class="op" id="3272800">(</span><span class="ident" id="3272801">s</span>&nbsp;<span class="op" id="3272803">*</span><span class="ident" id="3272804">state</span><span class="op" id="3272809">)</span>&nbsp;<span class="ident" id="3272811">evalInteger</span><span class="op" id="3272822">(</span><span class="ident" id="3272823">typ</span>&nbsp;<span class="ident" id="3272827">reflect</span><span class="op" id="3272834">.</span><span class="ident" id="3272835">Type</span><span class="op" id="3272839">,</span>&nbsp;<span class="ident" id="3272841">n</span>&nbsp;<span class="ident" id="3272843">parse</span><span class="op" id="3272848">.</span><span class="ident" id="3272849">Node</span><span class="op" id="3272853">)</span>&nbsp;<span class="ident" id="3272855">reflect</span><span class="op" id="3272862">.</span><span class="ident" id="3272863">Value</span>&nbsp;<span class="op" id="3272869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272872">s</span><span class="op" id="3272873">.</span><span class="ident" id="3272874">at</span><span class="op" id="3272876">(</span><span class="ident" id="3272877">n</span><span class="op" id="3272878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272881">if</span>&nbsp;<span class="ident" id="3272884">n</span><span class="op" id="3272885">,</span>&nbsp;<span class="ident" id="3272887">ok</span>&nbsp;<span class="op" id="3272890">:=</span>&nbsp;<span class="ident" id="3272893">n</span><span class="op" id="3272894">.</span><span class="op" id="3272895">(</span><span class="op" id="3272896">*</span><span class="ident" id="3272897">parse</span><span class="op" id="3272902">.</span><span class="ident" id="3272903">NumberNode</span><span class="op" id="3272913">)</span><span class="op" id="3272914">;</span>&nbsp;<span class="ident" id="3272916">ok</span>&nbsp;<span class="op" id="3272919">&amp;&amp;</span>&nbsp;<span class="ident" id="3272922">n</span><span class="op" id="3272923">.</span><span class="ident" id="3272924">IsInt</span>&nbsp;<span class="op" id="3272930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272934">value</span>&nbsp;<span class="op" id="3272940">:=</span>&nbsp;<span class="ident" id="3272943">reflect</span><span class="op" id="3272950">.</span><span class="ident" id="3272951">New</span><span class="op" id="3272954">(</span><span class="ident" id="3272955">typ</span><span class="op" id="3272958">)</span><span class="op" id="3272959">.</span><span class="ident" id="3272960">Elem</span><span class="op" id="3272964">(</span><span class="op" id="3272965">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272969">value</span><span class="op" id="3272974">.</span><span class="ident" id="3272975">SetInt</span><span class="op" id="3272981">(</span><span class="ident" id="3272982">n</span><span class="op" id="3272983">.</span><span class="ident" id="3272984">Int64</span><span class="op" id="3272989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272993">return</span>&nbsp;<span class="ident" id="3273000">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3273007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273010">s</span><span class="op" id="3273011">.</span><span class="ident" id="3273012">errorf</span><span class="op" id="3273018">(</span><span class="string" id="3273019">&#34;expected&nbsp;integer;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="3273047">,</span>&nbsp;<span class="ident" id="3273049">n</span><span class="op" id="3273050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3273053">panic</span><span class="op" id="3273058">(</span><span class="string" id="3273059">&#34;not&nbsp;reached&#34;</span><span class="op" id="3273072">)</span><br>
<span class="lineno">695</span><span class="op" id="3273074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3273077">func</span>&nbsp;<span class="op" id="3273082">(</span><span class="ident" id="3273083">s</span>&nbsp;<span class="op" id="3273085">*</span><span class="ident" id="3273086">state</span><span class="op" id="3273091">)</span>&nbsp;<span class="ident" id="3273093">evalUnsignedInteger</span><span class="op" id="3273112">(</span><span class="ident" id="3273113">typ</span>&nbsp;<span class="ident" id="3273117">reflect</span><span class="op" id="3273124">.</span><span class="ident" id="3273125">Type</span><span class="op" id="3273129">,</span>&nbsp;<span class="ident" id="3273131">n</span>&nbsp;<span class="ident" id="3273133">parse</span><span class="op" id="3273138">.</span><span class="ident" id="3273139">Node</span><span class="op" id="3273143">)</span>&nbsp;<span class="ident" id="3273145">reflect</span><span class="op" id="3273152">.</span><span class="ident" id="3273153">Value</span>&nbsp;<span class="op" id="3273159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273162">s</span><span class="op" id="3273163">.</span><span class="ident" id="3273164">at</span><span class="op" id="3273166">(</span><span class="ident" id="3273167">n</span><span class="op" id="3273168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3273171">if</span>&nbsp;<span class="ident" id="3273174">n</span><span class="op" id="3273175">,</span>&nbsp;<span class="ident" id="3273177">ok</span>&nbsp;<span class="op" id="3273180">:=</span>&nbsp;<span class="ident" id="3273183">n</span><span class="op" id="3273184">.</span><span class="op" id="3273185">(</span><span class="op" id="3273186">*</span><span class="ident" id="3273187">parse</span><span class="op" id="3273192">.</span><span class="ident" id="3273193">NumberNode</span><span class="op" id="3273203">)</span><span class="op" id="3273204">;</span>&nbsp;<span class="ident" id="3273206">ok</span>&nbsp;<span class="op" id="3273209">&amp;&amp;</span>&nbsp;<span class="ident" id="3273212">n</span><span class="op" id="3273213">.</span><span class="ident" id="3273214">IsUint</span>&nbsp;<span class="op" id="3273221">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273225">value</span>&nbsp;<span class="op" id="3273231">:=</span>&nbsp;<span class="ident" id="3273234">reflect</span><span class="op" id="3273241">.</span><span class="ident" id="3273242">New</span><span class="op" id="3273245">(</span><span class="ident" id="3273246">typ</span><span class="op" id="3273249">)</span><span class="op" id="3273250">.</span><span class="ident" id="3273251">Elem</span><span class="op" id="3273255">(</span><span class="op" id="3273256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273260">value</span><span class="op" id="3273265">.</span><span class="ident" id="3273266">SetUint</span><span class="op" id="3273273">(</span><span class="ident" id="3273274">n</span><span class="op" id="3273275">.</span><span class="ident" id="3273276">Uint64</span><span class="op" id="3273282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3273286">return</span>&nbsp;<span class="ident" id="3273293">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3273300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273303">s</span><span class="op" id="3273304">.</span><span class="ident" id="3273305">errorf</span><span class="op" id="3273311">(</span><span class="string" id="3273312">&#34;expected&nbsp;unsigned&nbsp;integer;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="3273349">,</span>&nbsp;<span class="ident" id="3273351">n</span><span class="op" id="3273352">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3273355">panic</span><span class="op" id="3273360">(</span><span class="string" id="3273361">&#34;not&nbsp;reached&#34;</span><span class="op" id="3273374">)</span><br>
<span class="lineno"></span><span class="op" id="3273376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3273379">func</span>&nbsp;<span class="op" id="3273384">(</span><span class="ident" id="3273385">s</span>&nbsp;<span class="op" id="3273387">*</span><span class="ident" id="3273388">state</span><span class="op" id="3273393">)</span>&nbsp;<span class="ident" id="3273395">evalFloat</span><span class="op" id="3273404">(</span><span class="ident" id="3273405">typ</span>&nbsp;<span class="ident" id="3273409">reflect</span><span class="op" id="3273416">.</span><span class="ident" id="3273417">Type</span><span class="op" id="3273421">,</span>&nbsp;<span class="ident" id="3273423">n</span>&nbsp;<span class="ident" id="3273425">parse</span><span class="op" id="3273430">.</span><span class="ident" id="3273431">Node</span><span class="op" id="3273435">)</span>&nbsp;<span class="ident" id="3273437">reflect</span><span class="op" id="3273444">.</span><span class="ident" id="3273445">Value</span>&nbsp;<span class="op" id="3273451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273454">s</span><span class="op" id="3273455">.</span><span class="ident" id="3273456">at</span><span class="op" id="3273458">(</span><span class="ident" id="3273459">n</span><span class="op" id="3273460">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3273463">if</span>&nbsp;<span class="ident" id="3273466">n</span><span class="op" id="3273467">,</span>&nbsp;<span class="ident" id="3273469">ok</span>&nbsp;<span class="op" id="3273472">:=</span>&nbsp;<span class="ident" id="3273475">n</span><span class="op" id="3273476">.</span><span class="op" id="3273477">(</span><span class="op" id="3273478">*</span><span class="ident" id="3273479">parse</span><span class="op" id="3273484">.</span><span class="ident" id="3273485">NumberNode</span><span class="op" id="3273495">)</span><span class="op" id="3273496">;</span>&nbsp;<span class="ident" id="3273498">ok</span>&nbsp;<span class="op" id="3273501">&amp;&amp;</span>&nbsp;<span class="ident" id="3273504">n</span><span class="op" id="3273505">.</span><span class="ident" id="3273506">IsFloat</span>&nbsp;<span class="op" id="3273514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273518">value</span>&nbsp;<span class="op" id="3273524">:=</span>&nbsp;<span class="ident" id="3273527">reflect</span><span class="op" id="3273534">.</span><span class="ident" id="3273535">New</span><span class="op" id="3273538">(</span><span class="ident" id="3273539">typ</span><span class="op" id="3273542">)</span><span class="op" id="3273543">.</span><span class="ident" id="3273544">Elem</span><span class="op" id="3273548">(</span><span class="op" id="3273549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273553">value</span><span class="op" id="3273558">.</span><span class="ident" id="3273559">SetFloat</span><span class="op" id="3273567">(</span><span class="ident" id="3273568">n</span><span class="op" id="3273569">.</span><span class="ident" id="3273570">Float64</span><span class="op" id="3273577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3273581">return</span>&nbsp;<span class="ident" id="3273588">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3273595">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273598">s</span><span class="op" id="3273599">.</span><span class="ident" id="3273600">errorf</span><span class="op" id="3273606">(</span><span class="string" id="3273607">&#34;expected&nbsp;float;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="3273633">,</span>&nbsp;<span class="ident" id="3273635">n</span><span class="op" id="3273636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3273639">panic</span><span class="op" id="3273644">(</span><span class="string" id="3273645">&#34;not&nbsp;reached&#34;</span><span class="op" id="3273658">)</span><br>
<span class="lineno"></span><span class="op" id="3273660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3273663">func</span>&nbsp;<span class="op" id="3273668">(</span><span class="ident" id="3273669">s</span>&nbsp;<span class="op" id="3273671">*</span><span class="ident" id="3273672">state</span><span class="op" id="3273677">)</span>&nbsp;<span class="ident" id="3273679">evalComplex</span><span class="op" id="3273690">(</span><span class="ident" id="3273691">typ</span>&nbsp;<span class="ident" id="3273695">reflect</span><span class="op" id="3273702">.</span><span class="ident" id="3273703">Type</span><span class="op" id="3273707">,</span>&nbsp;<span class="ident" id="3273709">n</span>&nbsp;<span class="ident" id="3273711">parse</span><span class="op" id="3273716">.</span><span class="ident" id="3273717">Node</span><span class="op" id="3273721">)</span>&nbsp;<span class="ident" id="3273723">reflect</span><span class="op" id="3273730">.</span><span class="ident" id="3273731">Value</span>&nbsp;<span class="op" id="3273737">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3273740">if</span>&nbsp;<span class="ident" id="3273743">n</span><span class="op" id="3273744">,</span>&nbsp;<span class="ident" id="3273746">ok</span>&nbsp;<span class="op" id="3273749">:=</span>&nbsp;<span class="ident" id="3273752">n</span><span class="op" id="3273753">.</span><span class="op" id="3273754">(</span><span class="op" id="3273755">*</span><span class="ident" id="3273756">parse</span><span class="op" id="3273761">.</span><span class="ident" id="3273762">NumberNode</span><span class="op" id="3273772">)</span><span class="op" id="3273773">;</span>&nbsp;<span class="ident" id="3273775">ok</span>&nbsp;<span class="op" id="3273778">&amp;&amp;</span>&nbsp;<span class="ident" id="3273781">n</span><span class="op" id="3273782">.</span><span class="ident" id="3273783">IsComplex</span>&nbsp;<span class="op" id="3273793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273797">value</span>&nbsp;<span class="op" id="3273803">:=</span>&nbsp;<span class="ident" id="3273806">reflect</span><span class="op" id="3273813">.</span><span class="ident" id="3273814">New</span><span class="op" id="3273817">(</span><span class="ident" id="3273818">typ</span><span class="op" id="3273821">)</span><span class="op" id="3273822">.</span><span class="ident" id="3273823">Elem</span><span class="op" id="3273827">(</span><span class="op" id="3273828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273832">value</span><span class="op" id="3273837">.</span><span class="ident" id="3273838">SetComplex</span><span class="op" id="3273848">(</span><span class="ident" id="3273849">n</span><span class="op" id="3273850">.</span><span class="ident" id="3273851">Complex128</span><span class="op" id="3273861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3273865">return</span>&nbsp;<span class="ident" id="3273872">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3273879">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3273882">s</span><span class="op" id="3273883">.</span><span class="ident" id="3273884">errorf</span><span class="op" id="3273890">(</span><span class="string" id="3273891">&#34;expected&nbsp;complex;&nbsp;found&nbsp;%s&#34;</span><span class="op" id="3273919">,</span>&nbsp;<span class="ident" id="3273921">n</span><span class="op" id="3273922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3273925">panic</span><span class="op" id="3273930">(</span><span class="string" id="3273931">&#34;not&nbsp;reached&#34;</span><span class="op" id="3273944">)</span><br>
<span class="lineno"></span><span class="op" id="3273946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3273949">func</span>&nbsp;<span class="op" id="3273954">(</span><span class="ident" id="3273955">s</span>&nbsp;<span class="op" id="3273957">*</span><span class="ident" id="3273958">state</span><span class="op" id="3273963">)</span>&nbsp;<span class="ident" id="3273965">evalEmptyInterface</span><span class="op" id="3273983">(</span><span class="ident" id="3273984">dot</span>&nbsp;<span class="ident" id="3273988">reflect</span><span class="op" id="3273995">.</span><span class="ident" id="3273996">Value</span><span class="op" id="3274001">,</span>&nbsp;<span class="ident" id="3274003">n</span>&nbsp;<span class="ident" id="3274005">parse</span><span class="op" id="3274010">.</span><span class="ident" id="3274011">Node</span><span class="op" id="3274015">)</span>&nbsp;<span class="ident" id="3274017">reflect</span><span class="op" id="3274024">.</span><span class="ident" id="3274025">Value</span>&nbsp;<span class="op" id="3274031">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3274034">s</span><span class="op" id="3274035">.</span><span class="ident" id="3274036">at</span><span class="op" id="3274038">(</span><span class="ident" id="3274039">n</span><span class="op" id="3274040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274043">switch</span>&nbsp;<span class="ident" id="3274050">n</span>&nbsp;<span class="op" id="3274052">:=</span>&nbsp;<span class="ident" id="3274055">n</span><span class="op" id="3274056">.</span><span class="op" id="3274057">(</span><span class="keyword" id="3274058">type</span><span class="op" id="3274062">)</span>&nbsp;<span class="op" id="3274064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274067">case</span>&nbsp;<span class="op" id="3274072">*</span><span class="ident" id="3274073">parse</span><span class="op" id="3274078">.</span><span class="ident" id="3274079">BoolNode</span><span class="op" id="3274087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274091">return</span>&nbsp;<span class="ident" id="3274098">reflect</span><span class="op" id="3274105">.</span><span class="ident" id="3274106">ValueOf</span><span class="op" id="3274113">(</span><span class="ident" id="3274114">n</span><span class="op" id="3274115">.</span><span class="ident" id="3274116">True</span><span class="op" id="3274120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274123">case</span>&nbsp;<span class="op" id="3274128">*</span><span class="ident" id="3274129">parse</span><span class="op" id="3274134">.</span><span class="ident" id="3274135">DotNode</span><span class="op" id="3274142">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274146">return</span>&nbsp;<span class="ident" id="3274153">dot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274158">case</span>&nbsp;<span class="op" id="3274163">*</span><span class="ident" id="3274164">parse</span><span class="op" id="3274169">.</span><span class="ident" id="3274170">FieldNode</span><span class="op" id="3274179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274183">return</span>&nbsp;<span class="ident" id="3274190">s</span><span class="op" id="3274191">.</span><span class="ident" id="3274192">evalFieldNode</span><span class="op" id="3274205">(</span><span class="ident" id="3274206">dot</span><span class="op" id="3274209">,</span>&nbsp;<span class="ident" id="3274211">n</span><span class="op" id="3274212">,</span>&nbsp;<span class="builtintype" id="3274214">nil</span><span class="op" id="3274217">,</span>&nbsp;<span class="ident" id="3274219">zero</span><span class="op" id="3274223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274226">case</span>&nbsp;<span class="op" id="3274231">*</span><span class="ident" id="3274232">parse</span><span class="op" id="3274237">.</span><span class="ident" id="3274238">IdentifierNode</span><span class="op" id="3274252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274256">return</span>&nbsp;<span class="ident" id="3274263">s</span><span class="op" id="3274264">.</span><span class="ident" id="3274265">evalFunction</span><span class="op" id="3274277">(</span><span class="ident" id="3274278">dot</span><span class="op" id="3274281">,</span>&nbsp;<span class="ident" id="3274283">n</span><span class="op" id="3274284">,</span>&nbsp;<span class="ident" id="3274286">n</span><span class="op" id="3274287">,</span>&nbsp;<span class="builtintype" id="3274289">nil</span><span class="op" id="3274292">,</span>&nbsp;<span class="ident" id="3274294">zero</span><span class="op" id="3274298">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274301">case</span>&nbsp;<span class="op" id="3274306">*</span><span class="ident" id="3274307">parse</span><span class="op" id="3274312">.</span><span class="ident" id="3274313">NilNode</span><span class="op" id="3274320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3274324">//&nbsp;NilNode&nbsp;is&nbsp;handled&nbsp;in&nbsp;evalArg,&nbsp;the&nbsp;only&nbsp;place&nbsp;that&nbsp;calls&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3274392">s</span><span class="op" id="3274393">.</span><span class="ident" id="3274394">errorf</span><span class="op" id="3274400">(</span><span class="string" id="3274401">&#34;evalEmptyInterface:&nbsp;nil&nbsp;(can&#39;t&nbsp;happen)&#34;</span><span class="op" id="3274441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274444">case</span>&nbsp;<span class="op" id="3274449">*</span><span class="ident" id="3274450">parse</span><span class="op" id="3274455">.</span><span class="ident" id="3274456">NumberNode</span><span class="op" id="3274466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274470">return</span>&nbsp;<span class="ident" id="3274477">s</span><span class="op" id="3274478">.</span><span class="ident" id="3274479">idealConstant</span><span class="op" id="3274492">(</span><span class="ident" id="3274493">n</span><span class="op" id="3274494">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274497">case</span>&nbsp;<span class="op" id="3274502">*</span><span class="ident" id="3274503">parse</span><span class="op" id="3274508">.</span><span class="ident" id="3274509">StringNode</span><span class="op" id="3274519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274523">return</span>&nbsp;<span class="ident" id="3274530">reflect</span><span class="op" id="3274537">.</span><span class="ident" id="3274538">ValueOf</span><span class="op" id="3274545">(</span><span class="ident" id="3274546">n</span><span class="op" id="3274547">.</span><span class="ident" id="3274548">Text</span><span class="op" id="3274552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274555">case</span>&nbsp;<span class="op" id="3274560">*</span><span class="ident" id="3274561">parse</span><span class="op" id="3274566">.</span><span class="ident" id="3274567">VariableNode</span><span class="op" id="3274579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274583">return</span>&nbsp;<span class="ident" id="3274590">s</span><span class="op" id="3274591">.</span><span class="ident" id="3274592">evalVariableNode</span><span class="op" id="3274608">(</span><span class="ident" id="3274609">dot</span><span class="op" id="3274612">,</span>&nbsp;<span class="ident" id="3274614">n</span><span class="op" id="3274615">,</span>&nbsp;<span class="builtintype" id="3274617">nil</span><span class="op" id="3274620">,</span>&nbsp;<span class="ident" id="3274622">zero</span><span class="op" id="3274626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274629">case</span>&nbsp;<span class="op" id="3274634">*</span><span class="ident" id="3274635">parse</span><span class="op" id="3274640">.</span><span class="ident" id="3274641">PipeNode</span><span class="op" id="3274649">:</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3274653">return</span>&nbsp;<span class="ident" id="3274660">s</span><span class="op" id="3274661">.</span><span class="ident" id="3274662">evalPipeline</span><span class="op" id="3274674">(</span><span class="ident" id="3274675">dot</span><span class="op" id="3274678">,</span>&nbsp;<span class="ident" id="3274680">n</span><span class="op" id="3274681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3274684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3274687">s</span><span class="op" id="3274688">.</span><span class="ident" id="3274689">errorf</span><span class="op" id="3274695">(</span><span class="string" id="3274696">&#34;can&#39;t&nbsp;handle&nbsp;assignment&nbsp;of&nbsp;%s&nbsp;to&nbsp;empty&nbsp;interface&nbsp;argument&#34;</span><span class="op" id="3274755">,</span>&nbsp;<span class="ident" id="3274757">n</span><span class="op" id="3274758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3274761">panic</span><span class="op" id="3274766">(</span><span class="string" id="3274767">&#34;not&nbsp;reached&#34;</span><span class="op" id="3274780">)</span><br>
<span class="lineno"></span><span class="op" id="3274782">}</span><br>
<span class="lineno">755</span><br>
<span class="lineno"></span><span class="comment" id="3274785">//&nbsp;indirect&nbsp;returns&nbsp;the&nbsp;item&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;indirection,&nbsp;and&nbsp;a&nbsp;bool&nbsp;to&nbsp;indicate&nbsp;if&nbsp;it&#39;s&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="3274877">//&nbsp;We&nbsp;indirect&nbsp;through&nbsp;pointers&nbsp;and&nbsp;empty&nbsp;interfaces&nbsp;(only)&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="3274945">//&nbsp;non-empty&nbsp;interfaces&nbsp;have&nbsp;methods&nbsp;we&nbsp;might&nbsp;need.</span><br>
<span class="lineno"></span><span class="keyword" id="3274997">func</span>&nbsp;<span class="ident" id="3275002">indirect</span><span class="op" id="3275010">(</span><span class="ident" id="3275011">v</span>&nbsp;<span class="ident" id="3275013">reflect</span><span class="op" id="3275020">.</span><span class="ident" id="3275021">Value</span><span class="op" id="3275026">)</span>&nbsp;<span class="op" id="3275028">(</span><span class="ident" id="3275029">rv</span>&nbsp;<span class="ident" id="3275032">reflect</span><span class="op" id="3275039">.</span><span class="ident" id="3275040">Value</span><span class="op" id="3275045">,</span>&nbsp;<span class="ident" id="3275047">isNil</span>&nbsp;<span class="builtintype" id="3275053">bool</span><span class="op" id="3275057">)</span>&nbsp;<span class="op" id="3275059">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275062">for</span>&nbsp;<span class="op" id="3275066">;</span>&nbsp;<span class="ident" id="3275068">v</span><span class="op" id="3275069">.</span><span class="ident" id="3275070">Kind</span><span class="op" id="3275074">(</span><span class="op" id="3275075">)</span>&nbsp;<span class="op" id="3275077">==</span>&nbsp;<span class="ident" id="3275080">reflect</span><span class="op" id="3275087">.</span><span class="ident" id="3275088">Ptr</span>&nbsp;<span class="op" id="3275092">||</span>&nbsp;<span class="ident" id="3275095">v</span><span class="op" id="3275096">.</span><span class="ident" id="3275097">Kind</span><span class="op" id="3275101">(</span><span class="op" id="3275102">)</span>&nbsp;<span class="op" id="3275104">==</span>&nbsp;<span class="ident" id="3275107">reflect</span><span class="op" id="3275114">.</span><span class="ident" id="3275115">Interface</span><span class="op" id="3275124">;</span>&nbsp;<span class="ident" id="3275126">v</span>&nbsp;<span class="op" id="3275128">=</span>&nbsp;<span class="ident" id="3275130">v</span><span class="op" id="3275131">.</span><span class="ident" id="3275132">Elem</span><span class="op" id="3275136">(</span><span class="op" id="3275137">)</span>&nbsp;<span class="op" id="3275139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275143">if</span>&nbsp;<span class="ident" id="3275146">v</span><span class="op" id="3275147">.</span><span class="ident" id="3275148">IsNil</span><span class="op" id="3275153">(</span><span class="op" id="3275154">)</span>&nbsp;<span class="op" id="3275156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275161">return</span>&nbsp;<span class="ident" id="3275168">v</span><span class="op" id="3275169">,</span>&nbsp;<span class="builtintype" id="3275171">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3275178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275182">if</span>&nbsp;<span class="ident" id="3275185">v</span><span class="op" id="3275186">.</span><span class="ident" id="3275187">Kind</span><span class="op" id="3275191">(</span><span class="op" id="3275192">)</span>&nbsp;<span class="op" id="3275194">==</span>&nbsp;<span class="ident" id="3275197">reflect</span><span class="op" id="3275204">.</span><span class="ident" id="3275205">Interface</span>&nbsp;<span class="op" id="3275215">&amp;&amp;</span>&nbsp;<span class="ident" id="3275218">v</span><span class="op" id="3275219">.</span><span class="ident" id="3275220">NumMethod</span><span class="op" id="3275229">(</span><span class="op" id="3275230">)</span>&nbsp;<span class="op" id="3275232">&gt;</span>&nbsp;<span class="num" id="3275234">0</span>&nbsp;<span class="op" id="3275236">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275241">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3275249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3275252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275255">return</span>&nbsp;<span class="ident" id="3275262">v</span><span class="op" id="3275263">,</span>&nbsp;<span class="builtintype" id="3275265">false</span><br>
<span class="lineno"></span><span class="op" id="3275271">}</span><br>
<span class="lineno">770</span><br>
<span class="lineno"></span><span class="comment" id="3275274">//&nbsp;printValue&nbsp;writes&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of&nbsp;the&nbsp;value&nbsp;to&nbsp;the&nbsp;output&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3275352">//&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="3275369">func</span>&nbsp;<span class="op" id="3275374">(</span><span class="ident" id="3275375">s</span>&nbsp;<span class="op" id="3275377">*</span><span class="ident" id="3275378">state</span><span class="op" id="3275383">)</span>&nbsp;<span class="ident" id="3275385">printValue</span><span class="op" id="3275395">(</span><span class="ident" id="3275396">n</span>&nbsp;<span class="ident" id="3275398">parse</span><span class="op" id="3275403">.</span><span class="ident" id="3275404">Node</span><span class="op" id="3275408">,</span>&nbsp;<span class="ident" id="3275410">v</span>&nbsp;<span class="ident" id="3275412">reflect</span><span class="op" id="3275419">.</span><span class="ident" id="3275420">Value</span><span class="op" id="3275425">)</span>&nbsp;<span class="op" id="3275427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3275430">s</span><span class="op" id="3275431">.</span><span class="ident" id="3275432">at</span><span class="op" id="3275434">(</span><span class="ident" id="3275435">n</span><span class="op" id="3275436">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3275439">iface</span><span class="op" id="3275444">,</span>&nbsp;<span class="ident" id="3275446">ok</span>&nbsp;<span class="op" id="3275449">:=</span>&nbsp;<span class="ident" id="3275452">printableValue</span><span class="op" id="3275466">(</span><span class="ident" id="3275467">v</span><span class="op" id="3275468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275471">if</span>&nbsp;<span class="op" id="3275474">!</span><span class="ident" id="3275475">ok</span>&nbsp;<span class="op" id="3275478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3275482">s</span><span class="op" id="3275483">.</span><span class="ident" id="3275484">errorf</span><span class="op" id="3275490">(</span><span class="string" id="3275491">&#34;can&#39;t&nbsp;print&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3275518">,</span>&nbsp;<span class="ident" id="3275520">n</span><span class="op" id="3275521">,</span>&nbsp;<span class="ident" id="3275523">v</span><span class="op" id="3275524">.</span><span class="ident" id="3275525">Type</span><span class="op" id="3275529">(</span><span class="op" id="3275530">)</span><span class="op" id="3275531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3275534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3275537">fmt</span><span class="op" id="3275540">.</span><span class="ident" id="3275541">Fprint</span><span class="op" id="3275547">(</span><span class="ident" id="3275548">s</span><span class="op" id="3275549">.</span><span class="ident" id="3275550">wr</span><span class="op" id="3275552">,</span>&nbsp;<span class="ident" id="3275554">iface</span><span class="op" id="3275559">)</span><br>
<span class="lineno">780</span><span class="op" id="3275561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3275564">//&nbsp;printableValue&nbsp;returns&nbsp;the,&nbsp;possibly&nbsp;indirected,&nbsp;interface&nbsp;value&nbsp;inside&nbsp;v&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3275646">//&nbsp;is&nbsp;best&nbsp;for&nbsp;a&nbsp;call&nbsp;to&nbsp;formatted&nbsp;printer.</span><br>
<span class="lineno"></span><span class="keyword" id="3275690">func</span>&nbsp;<span class="ident" id="3275695">printableValue</span><span class="op" id="3275709">(</span><span class="ident" id="3275710">v</span>&nbsp;<span class="ident" id="3275712">reflect</span><span class="op" id="3275719">.</span><span class="ident" id="3275720">Value</span><span class="op" id="3275725">)</span>&nbsp;<span class="op" id="3275727">(</span><span class="keyword" id="3275728">interface</span><span class="op" id="3275737">{</span><span class="op" id="3275738">}</span><span class="op" id="3275739">,</span>&nbsp;<span class="builtintype" id="3275741">bool</span><span class="op" id="3275745">)</span>&nbsp;<span class="op" id="3275747">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275750">if</span>&nbsp;<span class="ident" id="3275753">v</span><span class="op" id="3275754">.</span><span class="ident" id="3275755">Kind</span><span class="op" id="3275759">(</span><span class="op" id="3275760">)</span>&nbsp;<span class="op" id="3275762">==</span>&nbsp;<span class="ident" id="3275765">reflect</span><span class="op" id="3275772">.</span><span class="ident" id="3275773">Ptr</span>&nbsp;<span class="op" id="3275777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3275781">v</span><span class="op" id="3275782">,</span>&nbsp;<span class="ident" id="3275784">_</span>&nbsp;<span class="op" id="3275786">=</span>&nbsp;<span class="ident" id="3275788">indirect</span><span class="op" id="3275796">(</span><span class="ident" id="3275797">v</span><span class="op" id="3275798">)</span>&nbsp;<span class="comment" id="3275800">//&nbsp;fmt.Fprint&nbsp;handles&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3275828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275831">if</span>&nbsp;<span class="op" id="3275834">!</span><span class="ident" id="3275835">v</span><span class="op" id="3275836">.</span><span class="ident" id="3275837">IsValid</span><span class="op" id="3275844">(</span><span class="op" id="3275845">)</span>&nbsp;<span class="op" id="3275847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275851">return</span>&nbsp;<span class="string" id="3275858">&#34;&lt;no&nbsp;value&gt;&#34;</span><span class="op" id="3275870">,</span>&nbsp;<span class="builtintype" id="3275872">true</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3275878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275882">if</span>&nbsp;<span class="op" id="3275885">!</span><span class="ident" id="3275886">v</span><span class="op" id="3275887">.</span><span class="ident" id="3275888">Type</span><span class="op" id="3275892">(</span><span class="op" id="3275893">)</span><span class="op" id="3275894">.</span><span class="ident" id="3275895">Implements</span><span class="op" id="3275905">(</span><span class="ident" id="3275906">errorType</span><span class="op" id="3275915">)</span>&nbsp;<span class="op" id="3275917">&amp;&amp;</span>&nbsp;<span class="op" id="3275920">!</span><span class="ident" id="3275921">v</span><span class="op" id="3275922">.</span><span class="ident" id="3275923">Type</span><span class="op" id="3275927">(</span><span class="op" id="3275928">)</span><span class="op" id="3275929">.</span><span class="ident" id="3275930">Implements</span><span class="op" id="3275940">(</span><span class="ident" id="3275941">fmtStringerType</span><span class="op" id="3275956">)</span>&nbsp;<span class="op" id="3275958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3275962">if</span>&nbsp;<span class="ident" id="3275965">v</span><span class="op" id="3275966">.</span><span class="ident" id="3275967">CanAddr</span><span class="op" id="3275974">(</span><span class="op" id="3275975">)</span>&nbsp;<span class="op" id="3275977">&amp;&amp;</span>&nbsp;<span class="op" id="3275980">(</span><span class="ident" id="3275981">reflect</span><span class="op" id="3275988">.</span><span class="ident" id="3275989">PtrTo</span><span class="op" id="3275994">(</span><span class="ident" id="3275995">v</span><span class="op" id="3275996">.</span><span class="ident" id="3275997">Type</span><span class="op" id="3276001">(</span><span class="op" id="3276002">)</span><span class="op" id="3276003">)</span><span class="op" id="3276004">.</span><span class="ident" id="3276005">Implements</span><span class="op" id="3276015">(</span><span class="ident" id="3276016">errorType</span><span class="op" id="3276025">)</span>&nbsp;<span class="op" id="3276027">||</span>&nbsp;<span class="ident" id="3276030">reflect</span><span class="op" id="3276037">.</span><span class="ident" id="3276038">PtrTo</span><span class="op" id="3276043">(</span><span class="ident" id="3276044">v</span><span class="op" id="3276045">.</span><span class="ident" id="3276046">Type</span><span class="op" id="3276050">(</span><span class="op" id="3276051">)</span><span class="op" id="3276052">)</span><span class="op" id="3276053">.</span><span class="ident" id="3276054">Implements</span><span class="op" id="3276064">(</span><span class="ident" id="3276065">fmtStringerType</span><span class="op" id="3276080">)</span><span class="op" id="3276081">)</span>&nbsp;<span class="op" id="3276083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3276088">v</span>&nbsp;<span class="op" id="3276090">=</span>&nbsp;<span class="ident" id="3276092">v</span><span class="op" id="3276093">.</span><span class="ident" id="3276094">Addr</span><span class="op" id="3276098">(</span><span class="op" id="3276099">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3276103">}</span>&nbsp;<span class="keyword" id="3276105">else</span>&nbsp;<span class="op" id="3276110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3276115">switch</span>&nbsp;<span class="ident" id="3276122">v</span><span class="op" id="3276123">.</span><span class="ident" id="3276124">Kind</span><span class="op" id="3276128">(</span><span class="op" id="3276129">)</span>&nbsp;<span class="op" id="3276131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3276136">case</span>&nbsp;<span class="ident" id="3276141">reflect</span><span class="op" id="3276148">.</span><span class="ident" id="3276149">Chan</span><span class="op" id="3276153">,</span>&nbsp;<span class="ident" id="3276155">reflect</span><span class="op" id="3276162">.</span><span class="ident" id="3276163">Func</span><span class="op" id="3276167">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3276173">return</span>&nbsp;<span class="builtintype" id="3276180">nil</span><span class="op" id="3276183">,</span>&nbsp;<span class="builtintype" id="3276185">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3276194">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3276198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3276201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3276204">return</span>&nbsp;<span class="ident" id="3276211">v</span><span class="op" id="3276212">.</span><span class="ident" id="3276213">Interface</span><span class="op" id="3276222">(</span><span class="op" id="3276223">)</span><span class="op" id="3276224">,</span>&nbsp;<span class="builtintype" id="3276226">true</span><br>
<span class="lineno"></span><span class="op" id="3276231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">805</span><span class="comment" id="3276234">//&nbsp;Types&nbsp;to&nbsp;help&nbsp;sort&nbsp;the&nbsp;keys&nbsp;in&nbsp;a&nbsp;map&nbsp;for&nbsp;reproducible&nbsp;output.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276300">type</span>&nbsp;<span class="ident" id="3276305">rvs</span>&nbsp;<span class="op" id="3276309">[</span><span class="op" id="3276310">]</span><span class="ident" id="3276311">reflect</span><span class="op" id="3276318">.</span><span class="ident" id="3276319">Value</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276326">func</span>&nbsp;<span class="op" id="3276331">(</span><span class="ident" id="3276332">x</span>&nbsp;<span class="ident" id="3276334">rvs</span><span class="op" id="3276337">)</span>&nbsp;<span class="ident" id="3276339">Len</span><span class="op" id="3276342">(</span><span class="op" id="3276343">)</span>&nbsp;<span class="builtintype" id="3276345">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3276354">{</span>&nbsp;<span class="keyword" id="3276356">return</span>&nbsp;<span class="builtinfunc" id="3276363">len</span><span class="op" id="3276366">(</span><span class="ident" id="3276367">x</span><span class="op" id="3276368">)</span>&nbsp;<span class="op" id="3276370">}</span><br>
<span class="lineno">810</span><span class="keyword" id="3276372">func</span>&nbsp;<span class="op" id="3276377">(</span><span class="ident" id="3276378">x</span>&nbsp;<span class="ident" id="3276380">rvs</span><span class="op" id="3276383">)</span>&nbsp;<span class="ident" id="3276385">Swap</span><span class="op" id="3276389">(</span><span class="ident" id="3276390">i</span><span class="op" id="3276391">,</span>&nbsp;<span class="ident" id="3276393">j</span>&nbsp;<span class="builtintype" id="3276395">int</span><span class="op" id="3276398">)</span>&nbsp;<span class="op" id="3276400">{</span>&nbsp;<span class="ident" id="3276402">x</span><span class="op" id="3276403">[</span><span class="ident" id="3276404">i</span><span class="op" id="3276405">]</span><span class="op" id="3276406">,</span>&nbsp;<span class="ident" id="3276408">x</span><span class="op" id="3276409">[</span><span class="ident" id="3276410">j</span><span class="op" id="3276411">]</span>&nbsp;<span class="op" id="3276413">=</span>&nbsp;<span class="ident" id="3276415">x</span><span class="op" id="3276416">[</span><span class="ident" id="3276417">j</span><span class="op" id="3276418">]</span><span class="op" id="3276419">,</span>&nbsp;<span class="ident" id="3276421">x</span><span class="op" id="3276422">[</span><span class="ident" id="3276423">i</span><span class="op" id="3276424">]</span>&nbsp;<span class="op" id="3276426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276429">type</span>&nbsp;<span class="ident" id="3276434">rvInts</span>&nbsp;<span class="keyword" id="3276441">struct</span><span class="op" id="3276447">{</span>&nbsp;<span class="ident" id="3276449">rvs</span>&nbsp;<span class="op" id="3276453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276456">func</span>&nbsp;<span class="op" id="3276461">(</span><span class="ident" id="3276462">x</span>&nbsp;<span class="ident" id="3276464">rvInts</span><span class="op" id="3276470">)</span>&nbsp;<span class="ident" id="3276472">Less</span><span class="op" id="3276476">(</span><span class="ident" id="3276477">i</span><span class="op" id="3276478">,</span>&nbsp;<span class="ident" id="3276480">j</span>&nbsp;<span class="builtintype" id="3276482">int</span><span class="op" id="3276485">)</span>&nbsp;<span class="builtintype" id="3276487">bool</span>&nbsp;<span class="op" id="3276492">{</span>&nbsp;<span class="keyword" id="3276494">return</span>&nbsp;<span class="ident" id="3276501">x</span><span class="op" id="3276502">.</span><span class="ident" id="3276503">rvs</span><span class="op" id="3276506">[</span><span class="ident" id="3276507">i</span><span class="op" id="3276508">]</span><span class="op" id="3276509">.</span><span class="ident" id="3276510">Int</span><span class="op" id="3276513">(</span><span class="op" id="3276514">)</span>&nbsp;<span class="op" id="3276516">&lt;</span>&nbsp;<span class="ident" id="3276518">x</span><span class="op" id="3276519">.</span><span class="ident" id="3276520">rvs</span><span class="op" id="3276523">[</span><span class="ident" id="3276524">j</span><span class="op" id="3276525">]</span><span class="op" id="3276526">.</span><span class="ident" id="3276527">Int</span><span class="op" id="3276530">(</span><span class="op" id="3276531">)</span>&nbsp;<span class="op" id="3276533">}</span><br>
<span class="lineno">815</span><br>
<span class="lineno"></span><span class="keyword" id="3276536">type</span>&nbsp;<span class="ident" id="3276541">rvUints</span>&nbsp;<span class="keyword" id="3276549">struct</span><span class="op" id="3276555">{</span>&nbsp;<span class="ident" id="3276557">rvs</span>&nbsp;<span class="op" id="3276561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276564">func</span>&nbsp;<span class="op" id="3276569">(</span><span class="ident" id="3276570">x</span>&nbsp;<span class="ident" id="3276572">rvUints</span><span class="op" id="3276579">)</span>&nbsp;<span class="ident" id="3276581">Less</span><span class="op" id="3276585">(</span><span class="ident" id="3276586">i</span><span class="op" id="3276587">,</span>&nbsp;<span class="ident" id="3276589">j</span>&nbsp;<span class="builtintype" id="3276591">int</span><span class="op" id="3276594">)</span>&nbsp;<span class="builtintype" id="3276596">bool</span>&nbsp;<span class="op" id="3276601">{</span>&nbsp;<span class="keyword" id="3276603">return</span>&nbsp;<span class="ident" id="3276610">x</span><span class="op" id="3276611">.</span><span class="ident" id="3276612">rvs</span><span class="op" id="3276615">[</span><span class="ident" id="3276616">i</span><span class="op" id="3276617">]</span><span class="op" id="3276618">.</span><span class="ident" id="3276619">Uint</span><span class="op" id="3276623">(</span><span class="op" id="3276624">)</span>&nbsp;<span class="op" id="3276626">&lt;</span>&nbsp;<span class="ident" id="3276628">x</span><span class="op" id="3276629">.</span><span class="ident" id="3276630">rvs</span><span class="op" id="3276633">[</span><span class="ident" id="3276634">j</span><span class="op" id="3276635">]</span><span class="op" id="3276636">.</span><span class="ident" id="3276637">Uint</span><span class="op" id="3276641">(</span><span class="op" id="3276642">)</span>&nbsp;<span class="op" id="3276644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">820</span><span class="keyword" id="3276647">type</span>&nbsp;<span class="ident" id="3276652">rvFloats</span>&nbsp;<span class="keyword" id="3276661">struct</span><span class="op" id="3276667">{</span>&nbsp;<span class="ident" id="3276669">rvs</span>&nbsp;<span class="op" id="3276673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276676">func</span>&nbsp;<span class="op" id="3276681">(</span><span class="ident" id="3276682">x</span>&nbsp;<span class="ident" id="3276684">rvFloats</span><span class="op" id="3276692">)</span>&nbsp;<span class="ident" id="3276694">Less</span><span class="op" id="3276698">(</span><span class="ident" id="3276699">i</span><span class="op" id="3276700">,</span>&nbsp;<span class="ident" id="3276702">j</span>&nbsp;<span class="builtintype" id="3276704">int</span><span class="op" id="3276707">)</span>&nbsp;<span class="builtintype" id="3276709">bool</span>&nbsp;<span class="op" id="3276714">{</span>&nbsp;<span class="keyword" id="3276716">return</span>&nbsp;<span class="ident" id="3276723">x</span><span class="op" id="3276724">.</span><span class="ident" id="3276725">rvs</span><span class="op" id="3276728">[</span><span class="ident" id="3276729">i</span><span class="op" id="3276730">]</span><span class="op" id="3276731">.</span><span class="ident" id="3276732">Float</span><span class="op" id="3276737">(</span><span class="op" id="3276738">)</span>&nbsp;<span class="op" id="3276740">&lt;</span>&nbsp;<span class="ident" id="3276742">x</span><span class="op" id="3276743">.</span><span class="ident" id="3276744">rvs</span><span class="op" id="3276747">[</span><span class="ident" id="3276748">j</span><span class="op" id="3276749">]</span><span class="op" id="3276750">.</span><span class="ident" id="3276751">Float</span><span class="op" id="3276756">(</span><span class="op" id="3276757">)</span>&nbsp;<span class="op" id="3276759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3276762">type</span>&nbsp;<span class="ident" id="3276767">rvStrings</span>&nbsp;<span class="keyword" id="3276777">struct</span><span class="op" id="3276783">{</span>&nbsp;<span class="ident" id="3276785">rvs</span>&nbsp;<span class="op" id="3276789">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span><span class="keyword" id="3276792">func</span>&nbsp;<span class="op" id="3276797">(</span><span class="ident" id="3276798">x</span>&nbsp;<span class="ident" id="3276800">rvStrings</span><span class="op" id="3276809">)</span>&nbsp;<span class="ident" id="3276811">Less</span><span class="op" id="3276815">(</span><span class="ident" id="3276816">i</span><span class="op" id="3276817">,</span>&nbsp;<span class="ident" id="3276819">j</span>&nbsp;<span class="builtintype" id="3276821">int</span><span class="op" id="3276824">)</span>&nbsp;<span class="builtintype" id="3276826">bool</span>&nbsp;<span class="op" id="3276831">{</span>&nbsp;<span class="keyword" id="3276833">return</span>&nbsp;<span class="ident" id="3276840">x</span><span class="op" id="3276841">.</span><span class="ident" id="3276842">rvs</span><span class="op" id="3276845">[</span><span class="ident" id="3276846">i</span><span class="op" id="3276847">]</span><span class="op" id="3276848">.</span><span class="ident" id="3276849">String</span><span class="op" id="3276855">(</span><span class="op" id="3276856">)</span>&nbsp;<span class="op" id="3276858">&lt;</span>&nbsp;<span class="ident" id="3276860">x</span><span class="op" id="3276861">.</span><span class="ident" id="3276862">rvs</span><span class="op" id="3276865">[</span><span class="ident" id="3276866">j</span><span class="op" id="3276867">]</span><span class="op" id="3276868">.</span><span class="ident" id="3276869">String</span><span class="op" id="3276875">(</span><span class="op" id="3276876">)</span>&nbsp;<span class="op" id="3276878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3276881">//&nbsp;sortKeys&nbsp;sorts&nbsp;(if&nbsp;it&nbsp;can)&nbsp;the&nbsp;slice&nbsp;of&nbsp;reflect.Values,&nbsp;which&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;map&nbsp;keys.</span><br>
<span class="lineno"></span><span class="keyword" id="3276970">func</span>&nbsp;<span class="ident" id="3276975">sortKeys</span><span class="op" id="3276983">(</span><span class="ident" id="3276984">v</span>&nbsp;<span class="op" id="3276986">[</span><span class="op" id="3276987">]</span><span class="ident" id="3276988">reflect</span><span class="op" id="3276995">.</span><span class="ident" id="3276996">Value</span><span class="op" id="3277001">)</span>&nbsp;<span class="op" id="3277003">[</span><span class="op" id="3277004">]</span><span class="ident" id="3277005">reflect</span><span class="op" id="3277012">.</span><span class="ident" id="3277013">Value</span>&nbsp;<span class="op" id="3277019">{</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277022">if</span>&nbsp;<span class="builtinfunc" id="3277025">len</span><span class="op" id="3277028">(</span><span class="ident" id="3277029">v</span><span class="op" id="3277030">)</span>&nbsp;<span class="op" id="3277032">&lt;=</span>&nbsp;<span class="num" id="3277035">1</span>&nbsp;<span class="op" id="3277037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277041">return</span>&nbsp;<span class="ident" id="3277048">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3277051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277054">switch</span>&nbsp;<span class="ident" id="3277061">v</span><span class="op" id="3277062">[</span><span class="num" id="3277063">0</span><span class="op" id="3277064">]</span><span class="op" id="3277065">.</span><span class="ident" id="3277066">Kind</span><span class="op" id="3277070">(</span><span class="op" id="3277071">)</span>&nbsp;<span class="op" id="3277073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277076">case</span>&nbsp;<span class="ident" id="3277081">reflect</span><span class="op" id="3277088">.</span><span class="ident" id="3277089">Float32</span><span class="op" id="3277096">,</span>&nbsp;<span class="ident" id="3277098">reflect</span><span class="op" id="3277105">.</span><span class="ident" id="3277106">Float64</span><span class="op" id="3277113">:</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3277117">sort</span><span class="op" id="3277121">.</span><span class="ident" id="3277122">Sort</span><span class="op" id="3277126">(</span><span class="ident" id="3277127">rvFloats</span><span class="op" id="3277135">{</span><span class="ident" id="3277136">v</span><span class="op" id="3277137">}</span><span class="op" id="3277138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277141">case</span>&nbsp;<span class="ident" id="3277146">reflect</span><span class="op" id="3277153">.</span><span class="ident" id="3277154">Int</span><span class="op" id="3277157">,</span>&nbsp;<span class="ident" id="3277159">reflect</span><span class="op" id="3277166">.</span><span class="ident" id="3277167">Int8</span><span class="op" id="3277171">,</span>&nbsp;<span class="ident" id="3277173">reflect</span><span class="op" id="3277180">.</span><span class="ident" id="3277181">Int16</span><span class="op" id="3277186">,</span>&nbsp;<span class="ident" id="3277188">reflect</span><span class="op" id="3277195">.</span><span class="ident" id="3277196">Int32</span><span class="op" id="3277201">,</span>&nbsp;<span class="ident" id="3277203">reflect</span><span class="op" id="3277210">.</span><span class="ident" id="3277211">Int64</span><span class="op" id="3277216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3277220">sort</span><span class="op" id="3277224">.</span><span class="ident" id="3277225">Sort</span><span class="op" id="3277229">(</span><span class="ident" id="3277230">rvInts</span><span class="op" id="3277236">{</span><span class="ident" id="3277237">v</span><span class="op" id="3277238">}</span><span class="op" id="3277239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277242">case</span>&nbsp;<span class="ident" id="3277247">reflect</span><span class="op" id="3277254">.</span><span class="ident" id="3277255">String</span><span class="op" id="3277261">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3277265">sort</span><span class="op" id="3277269">.</span><span class="ident" id="3277270">Sort</span><span class="op" id="3277274">(</span><span class="ident" id="3277275">rvStrings</span><span class="op" id="3277284">{</span><span class="ident" id="3277285">v</span><span class="op" id="3277286">}</span><span class="op" id="3277287">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277290">case</span>&nbsp;<span class="ident" id="3277295">reflect</span><span class="op" id="3277302">.</span><span class="ident" id="3277303">Uint</span><span class="op" id="3277307">,</span>&nbsp;<span class="ident" id="3277309">reflect</span><span class="op" id="3277316">.</span><span class="ident" id="3277317">Uint8</span><span class="op" id="3277322">,</span>&nbsp;<span class="ident" id="3277324">reflect</span><span class="op" id="3277331">.</span><span class="ident" id="3277332">Uint16</span><span class="op" id="3277338">,</span>&nbsp;<span class="ident" id="3277340">reflect</span><span class="op" id="3277347">.</span><span class="ident" id="3277348">Uint32</span><span class="op" id="3277354">,</span>&nbsp;<span class="ident" id="3277356">reflect</span><span class="op" id="3277363">.</span><span class="ident" id="3277364">Uint64</span><span class="op" id="3277370">,</span>&nbsp;<span class="ident" id="3277372">reflect</span><span class="op" id="3277379">.</span><span class="ident" id="3277380">Uintptr</span><span class="op" id="3277387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3277391">sort</span><span class="op" id="3277395">.</span><span class="ident" id="3277396">Sort</span><span class="op" id="3277400">(</span><span class="ident" id="3277401">rvUints</span><span class="op" id="3277408">{</span><span class="ident" id="3277409">v</span><span class="op" id="3277410">}</span><span class="op" id="3277411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3277414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3277417">return</span>&nbsp;<span class="ident" id="3277424">v</span><br>
<span class="lineno"></span><span class="op" id="3277426">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
