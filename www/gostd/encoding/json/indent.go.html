<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3295603">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3295659">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3295713">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3295764">package</span>&nbsp;<span class="ident" id="3295772">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3295778">import</span>&nbsp;<span class="string" id="3295785">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3295794">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="3295846">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="3295888">func</span>&nbsp;<span class="ident" id="3295893">Compact</span><span class="op" id="3295900">(</span><span class="ident" id="3295901">dst</span>&nbsp;<span class="op" id="3295905">*</span><span class="ident" id="3295906">bytes</span><span class="op" id="3295911">.</span><span class="ident" id="3295912">Buffer</span><span class="op" id="3295918">,</span>&nbsp;<span class="ident" id="3295920">src</span>&nbsp;<span class="op" id="3295924">[</span><span class="op" id="3295925">]</span><span class="builtintype" id="3295926">byte</span><span class="op" id="3295930">)</span>&nbsp;<span class="builtintype" id="3295932">error</span>&nbsp;<span class="op" id="3295938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295941">return</span>&nbsp;<span class="ident" id="3295948">compact</span><span class="op" id="3295955">(</span><span class="ident" id="3295956">dst</span><span class="op" id="3295959">,</span>&nbsp;<span class="ident" id="3295961">src</span><span class="op" id="3295964">,</span>&nbsp;<span class="builtintype" id="3295966">false</span><span class="op" id="3295971">)</span><br>
<span class="lineno"></span><span class="op" id="3295973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3295976">func</span>&nbsp;<span class="ident" id="3295981">compact</span><span class="op" id="3295988">(</span><span class="ident" id="3295989">dst</span>&nbsp;<span class="op" id="3295993">*</span><span class="ident" id="3295994">bytes</span><span class="op" id="3295999">.</span><span class="ident" id="3296000">Buffer</span><span class="op" id="3296006">,</span>&nbsp;<span class="ident" id="3296008">src</span>&nbsp;<span class="op" id="3296012">[</span><span class="op" id="3296013">]</span><span class="builtintype" id="3296014">byte</span><span class="op" id="3296018">,</span>&nbsp;<span class="ident" id="3296020">escape</span>&nbsp;<span class="builtintype" id="3296027">bool</span><span class="op" id="3296031">)</span>&nbsp;<span class="builtintype" id="3296033">error</span>&nbsp;<span class="op" id="3296039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296042">origLen</span>&nbsp;<span class="op" id="3296050">:=</span>&nbsp;<span class="ident" id="3296053">dst</span><span class="op" id="3296056">.</span><span class="ident" id="3296057">Len</span><span class="op" id="3296060">(</span><span class="op" id="3296061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296064">var</span>&nbsp;<span class="ident" id="3296068">scan</span>&nbsp;<span class="ident" id="3296073">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296082">scan</span><span class="op" id="3296086">.</span><span class="ident" id="3296087">reset</span><span class="op" id="3296092">(</span><span class="op" id="3296093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296096">start</span>&nbsp;<span class="op" id="3296102">:=</span>&nbsp;<span class="num" id="3296105">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296108">for</span>&nbsp;<span class="ident" id="3296112">i</span><span class="op" id="3296113">,</span>&nbsp;<span class="ident" id="3296115">c</span>&nbsp;<span class="op" id="3296117">:=</span>&nbsp;<span class="keyword" id="3296120">range</span>&nbsp;<span class="ident" id="3296126">src</span>&nbsp;<span class="op" id="3296130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296134">if</span>&nbsp;<span class="ident" id="3296137">escape</span>&nbsp;<span class="op" id="3296144">&amp;&amp;</span>&nbsp;<span class="op" id="3296147">(</span><span class="ident" id="3296148">c</span>&nbsp;<span class="op" id="3296150">==</span>&nbsp;<span class="string" id="3296153">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="3296157">||</span>&nbsp;<span class="ident" id="3296160">c</span>&nbsp;<span class="op" id="3296162">==</span>&nbsp;<span class="string" id="3296165">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="3296169">||</span>&nbsp;<span class="ident" id="3296172">c</span>&nbsp;<span class="op" id="3296174">==</span>&nbsp;<span class="string" id="3296177">&#39;&amp;&#39;</span><span class="op" id="3296180">)</span>&nbsp;<span class="op" id="3296182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296187">if</span>&nbsp;<span class="ident" id="3296190">start</span>&nbsp;<span class="op" id="3296196">&lt;</span>&nbsp;<span class="ident" id="3296198">i</span>&nbsp;<span class="op" id="3296200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296206">dst</span><span class="op" id="3296209">.</span><span class="ident" id="3296210">Write</span><span class="op" id="3296215">(</span><span class="ident" id="3296216">src</span><span class="op" id="3296219">[</span><span class="ident" id="3296220">start</span><span class="op" id="3296225">:</span><span class="ident" id="3296226">i</span><span class="op" id="3296227">]</span><span class="op" id="3296228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296233">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296238">dst</span><span class="op" id="3296241">.</span><span class="ident" id="3296242">WriteString</span><span class="op" id="3296253">(</span><span class="string" id="3296254">`\u00`</span><span class="op" id="3296260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296265">dst</span><span class="op" id="3296268">.</span><span class="ident" id="3296269">WriteByte</span><span class="op" id="3296278">(</span><span class="ident" id="3296279">hex</span><span class="op" id="3296282">[</span><span class="ident" id="3296283">c</span><span class="op" id="3296284">&gt;&gt;</span><span class="num" id="3296286">4</span><span class="op" id="3296287">]</span><span class="op" id="3296288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296293">dst</span><span class="op" id="3296296">.</span><span class="ident" id="3296297">WriteByte</span><span class="op" id="3296306">(</span><span class="ident" id="3296307">hex</span><span class="op" id="3296310">[</span><span class="ident" id="3296311">c</span><span class="op" id="3296312">&amp;</span><span class="num" id="3296313">0xF</span><span class="op" id="3296316">]</span><span class="op" id="3296317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296322">start</span>&nbsp;<span class="op" id="3296328">=</span>&nbsp;<span class="ident" id="3296330">i</span>&nbsp;<span class="op" id="3296332">+</span>&nbsp;<span class="num" id="3296334">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296338">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3296342">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296398">if</span>&nbsp;<span class="ident" id="3296401">c</span>&nbsp;<span class="op" id="3296403">==</span>&nbsp;<span class="num" id="3296406">0xE2</span>&nbsp;<span class="op" id="3296411">&amp;&amp;</span>&nbsp;<span class="ident" id="3296414">i</span><span class="op" id="3296415">+</span><span class="num" id="3296416">2</span>&nbsp;<span class="op" id="3296418">&lt;</span>&nbsp;<span class="builtinfunc" id="3296420">len</span><span class="op" id="3296423">(</span><span class="ident" id="3296424">src</span><span class="op" id="3296427">)</span>&nbsp;<span class="op" id="3296429">&amp;&amp;</span>&nbsp;<span class="ident" id="3296432">src</span><span class="op" id="3296435">[</span><span class="ident" id="3296436">i</span><span class="op" id="3296437">+</span><span class="num" id="3296438">1</span><span class="op" id="3296439">]</span>&nbsp;<span class="op" id="3296441">==</span>&nbsp;<span class="num" id="3296444">0x80</span>&nbsp;<span class="op" id="3296449">&amp;&amp;</span>&nbsp;<span class="ident" id="3296452">src</span><span class="op" id="3296455">[</span><span class="ident" id="3296456">i</span><span class="op" id="3296457">+</span><span class="num" id="3296458">2</span><span class="op" id="3296459">]</span><span class="op" id="3296460">&amp;^</span><span class="num" id="3296462">1</span>&nbsp;<span class="op" id="3296464">==</span>&nbsp;<span class="num" id="3296467">0xA8</span>&nbsp;<span class="op" id="3296472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296477">if</span>&nbsp;<span class="ident" id="3296480">start</span>&nbsp;<span class="op" id="3296486">&lt;</span>&nbsp;<span class="ident" id="3296488">i</span>&nbsp;<span class="op" id="3296490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296496">dst</span><span class="op" id="3296499">.</span><span class="ident" id="3296500">Write</span><span class="op" id="3296505">(</span><span class="ident" id="3296506">src</span><span class="op" id="3296509">[</span><span class="ident" id="3296510">start</span><span class="op" id="3296515">:</span><span class="ident" id="3296516">i</span><span class="op" id="3296517">]</span><span class="op" id="3296518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296523">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296528">dst</span><span class="op" id="3296531">.</span><span class="ident" id="3296532">WriteString</span><span class="op" id="3296543">(</span><span class="string" id="3296544">`\u202`</span><span class="op" id="3296551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296556">dst</span><span class="op" id="3296559">.</span><span class="ident" id="3296560">WriteByte</span><span class="op" id="3296569">(</span><span class="ident" id="3296570">hex</span><span class="op" id="3296573">[</span><span class="ident" id="3296574">src</span><span class="op" id="3296577">[</span><span class="ident" id="3296578">i</span><span class="op" id="3296579">+</span><span class="num" id="3296580">2</span><span class="op" id="3296581">]</span><span class="op" id="3296582">&amp;</span><span class="num" id="3296583">0xF</span><span class="op" id="3296586">]</span><span class="op" id="3296587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296592">start</span>&nbsp;<span class="op" id="3296598">=</span>&nbsp;<span class="ident" id="3296600">i</span>&nbsp;<span class="op" id="3296602">+</span>&nbsp;<span class="num" id="3296604">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296612">v</span>&nbsp;<span class="op" id="3296614">:=</span>&nbsp;<span class="ident" id="3296617">scan</span><span class="op" id="3296621">.</span><span class="ident" id="3296622">step</span><span class="op" id="3296626">(</span><span class="op" id="3296627">&amp;</span><span class="ident" id="3296628">scan</span><span class="op" id="3296632">,</span>&nbsp;<span class="builtintype" id="3296634">int</span><span class="op" id="3296637">(</span><span class="ident" id="3296638">c</span><span class="op" id="3296639">)</span><span class="op" id="3296640">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296644">if</span>&nbsp;<span class="ident" id="3296647">v</span>&nbsp;<span class="op" id="3296649">&gt;=</span>&nbsp;<span class="ident" id="3296652">scanSkipSpace</span>&nbsp;<span class="op" id="3296666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296671">if</span>&nbsp;<span class="ident" id="3296674">v</span>&nbsp;<span class="op" id="3296676">==</span>&nbsp;<span class="ident" id="3296679">scanError</span>&nbsp;<span class="op" id="3296689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296695">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296709">if</span>&nbsp;<span class="ident" id="3296712">start</span>&nbsp;<span class="op" id="3296718">&lt;</span>&nbsp;<span class="ident" id="3296720">i</span>&nbsp;<span class="op" id="3296722">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296728">dst</span><span class="op" id="3296731">.</span><span class="ident" id="3296732">Write</span><span class="op" id="3296737">(</span><span class="ident" id="3296738">src</span><span class="op" id="3296741">[</span><span class="ident" id="3296742">start</span><span class="op" id="3296747">:</span><span class="ident" id="3296748">i</span><span class="op" id="3296749">]</span><span class="op" id="3296750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296760">start</span>&nbsp;<span class="op" id="3296766">=</span>&nbsp;<span class="ident" id="3296768">i</span>&nbsp;<span class="op" id="3296770">+</span>&nbsp;<span class="num" id="3296772">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296779">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296782">if</span>&nbsp;<span class="ident" id="3296785">scan</span><span class="op" id="3296789">.</span><span class="ident" id="3296790">eof</span><span class="op" id="3296793">(</span><span class="op" id="3296794">)</span>&nbsp;<span class="op" id="3296796">==</span>&nbsp;<span class="ident" id="3296799">scanError</span>&nbsp;<span class="op" id="3296809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296813">dst</span><span class="op" id="3296816">.</span><span class="ident" id="3296817">Truncate</span><span class="op" id="3296825">(</span><span class="ident" id="3296826">origLen</span><span class="op" id="3296833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296837">return</span>&nbsp;<span class="ident" id="3296844">scan</span><span class="op" id="3296848">.</span><span class="ident" id="3296849">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296857">if</span>&nbsp;<span class="ident" id="3296860">start</span>&nbsp;<span class="op" id="3296866">&lt;</span>&nbsp;<span class="builtinfunc" id="3296868">len</span><span class="op" id="3296871">(</span><span class="ident" id="3296872">src</span><span class="op" id="3296875">)</span>&nbsp;<span class="op" id="3296877">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296881">dst</span><span class="op" id="3296884">.</span><span class="ident" id="3296885">Write</span><span class="op" id="3296890">(</span><span class="ident" id="3296891">src</span><span class="op" id="3296894">[</span><span class="ident" id="3296895">start</span><span class="op" id="3296900">:</span><span class="op" id="3296901">]</span><span class="op" id="3296902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3296905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3296908">return</span>&nbsp;<span class="ident" id="3296915">nil</span><br>
<span class="lineno"></span><span class="op" id="3296919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3296922">func</span>&nbsp;<span class="ident" id="3296927">newline</span><span class="op" id="3296934">(</span><span class="ident" id="3296935">dst</span>&nbsp;<span class="op" id="3296939">*</span><span class="ident" id="3296940">bytes</span><span class="op" id="3296945">.</span><span class="ident" id="3296946">Buffer</span><span class="op" id="3296952">,</span>&nbsp;<span class="ident" id="3296954">prefix</span><span class="op" id="3296960">,</span>&nbsp;<span class="ident" id="3296962">indent</span>&nbsp;<span class="builtintype" id="3296969">string</span><span class="op" id="3296975">,</span>&nbsp;<span class="ident" id="3296977">depth</span>&nbsp;<span class="builtintype" id="3296983">int</span><span class="op" id="3296986">)</span>&nbsp;<span class="op" id="3296988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3296991">dst</span><span class="op" id="3296994">.</span><span class="ident" id="3296995">WriteByte</span><span class="op" id="3297004">(</span><span class="string" id="3297005">&#39;\n&#39;</span><span class="op" id="3297009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297012">dst</span><span class="op" id="3297015">.</span><span class="ident" id="3297016">WriteString</span><span class="op" id="3297027">(</span><span class="ident" id="3297028">prefix</span><span class="op" id="3297034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297037">for</span>&nbsp;<span class="ident" id="3297041">i</span>&nbsp;<span class="op" id="3297043">:=</span>&nbsp;<span class="num" id="3297046">0</span><span class="op" id="3297047">;</span>&nbsp;<span class="ident" id="3297049">i</span>&nbsp;<span class="op" id="3297051">&lt;</span>&nbsp;<span class="ident" id="3297053">depth</span><span class="op" id="3297058">;</span>&nbsp;<span class="ident" id="3297060">i</span><span class="op" id="3297061">++</span>&nbsp;<span class="op" id="3297064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297068">dst</span><span class="op" id="3297071">.</span><span class="ident" id="3297072">WriteString</span><span class="op" id="3297083">(</span><span class="ident" id="3297084">indent</span><span class="op" id="3297090">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3297093">}</span><br>
<span class="lineno"></span><span class="op" id="3297095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3297098">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="3297165">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="3297224">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3297287">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="3297345">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="3297408">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3297468">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="3297521">func</span>&nbsp;<span class="ident" id="3297526">Indent</span><span class="op" id="3297532">(</span><span class="ident" id="3297533">dst</span>&nbsp;<span class="op" id="3297537">*</span><span class="ident" id="3297538">bytes</span><span class="op" id="3297543">.</span><span class="ident" id="3297544">Buffer</span><span class="op" id="3297550">,</span>&nbsp;<span class="ident" id="3297552">src</span>&nbsp;<span class="op" id="3297556">[</span><span class="op" id="3297557">]</span><span class="builtintype" id="3297558">byte</span><span class="op" id="3297562">,</span>&nbsp;<span class="ident" id="3297564">prefix</span><span class="op" id="3297570">,</span>&nbsp;<span class="ident" id="3297572">indent</span>&nbsp;<span class="builtintype" id="3297579">string</span><span class="op" id="3297585">)</span>&nbsp;<span class="builtintype" id="3297587">error</span>&nbsp;<span class="op" id="3297593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297596">origLen</span>&nbsp;<span class="op" id="3297604">:=</span>&nbsp;<span class="ident" id="3297607">dst</span><span class="op" id="3297610">.</span><span class="ident" id="3297611">Len</span><span class="op" id="3297614">(</span><span class="op" id="3297615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297618">var</span>&nbsp;<span class="ident" id="3297622">scan</span>&nbsp;<span class="ident" id="3297627">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297636">scan</span><span class="op" id="3297640">.</span><span class="ident" id="3297641">reset</span><span class="op" id="3297646">(</span><span class="op" id="3297647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297650">needIndent</span>&nbsp;<span class="op" id="3297661">:=</span>&nbsp;<span class="builtintype" id="3297664">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297671">depth</span>&nbsp;<span class="op" id="3297677">:=</span>&nbsp;<span class="num" id="3297680">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297683">for</span>&nbsp;<span class="ident" id="3297687">_</span><span class="op" id="3297688">,</span>&nbsp;<span class="ident" id="3297690">c</span>&nbsp;<span class="op" id="3297692">:=</span>&nbsp;<span class="keyword" id="3297695">range</span>&nbsp;<span class="ident" id="3297701">src</span>&nbsp;<span class="op" id="3297705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297709">scan</span><span class="op" id="3297713">.</span><span class="ident" id="3297714">bytes</span><span class="op" id="3297719">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297724">v</span>&nbsp;<span class="op" id="3297726">:=</span>&nbsp;<span class="ident" id="3297729">scan</span><span class="op" id="3297733">.</span><span class="ident" id="3297734">step</span><span class="op" id="3297738">(</span><span class="op" id="3297739">&amp;</span><span class="ident" id="3297740">scan</span><span class="op" id="3297744">,</span>&nbsp;<span class="builtintype" id="3297746">int</span><span class="op" id="3297749">(</span><span class="ident" id="3297750">c</span><span class="op" id="3297751">)</span><span class="op" id="3297752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297756">if</span>&nbsp;<span class="ident" id="3297759">v</span>&nbsp;<span class="op" id="3297761">==</span>&nbsp;<span class="ident" id="3297764">scanSkipSpace</span>&nbsp;<span class="op" id="3297778">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297783">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3297794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297798">if</span>&nbsp;<span class="ident" id="3297801">v</span>&nbsp;<span class="op" id="3297803">==</span>&nbsp;<span class="ident" id="3297806">scanError</span>&nbsp;<span class="op" id="3297816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297821">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3297829">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3297833">if</span>&nbsp;<span class="ident" id="3297836">needIndent</span>&nbsp;<span class="op" id="3297847">&amp;&amp;</span>&nbsp;<span class="ident" id="3297850">v</span>&nbsp;<span class="op" id="3297852">!=</span>&nbsp;<span class="ident" id="3297855">scanEndObject</span>&nbsp;<span class="op" id="3297869">&amp;&amp;</span>&nbsp;<span class="ident" id="3297872">v</span>&nbsp;<span class="op" id="3297874">!=</span>&nbsp;<span class="ident" id="3297877">scanEndArray</span>&nbsp;<span class="op" id="3297890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297895">needIndent</span>&nbsp;<span class="op" id="3297906">=</span>&nbsp;<span class="builtintype" id="3297908">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297917">depth</span><span class="op" id="3297922">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3297928">newline</span><span class="op" id="3297935">(</span><span class="ident" id="3297936">dst</span><span class="op" id="3297939">,</span>&nbsp;<span class="ident" id="3297941">prefix</span><span class="op" id="3297947">,</span>&nbsp;<span class="ident" id="3297949">indent</span><span class="op" id="3297955">,</span>&nbsp;<span class="ident" id="3297957">depth</span><span class="op" id="3297962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3297966">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3297971">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3298014">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298071">if</span>&nbsp;<span class="ident" id="3298074">v</span>&nbsp;<span class="op" id="3298076">==</span>&nbsp;<span class="ident" id="3298079">scanContinue</span>&nbsp;<span class="op" id="3298092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298097">dst</span><span class="op" id="3298100">.</span><span class="ident" id="3298101">WriteByte</span><span class="op" id="3298110">(</span><span class="ident" id="3298111">c</span><span class="op" id="3298112">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298117">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3298128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3298133">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298175">switch</span>&nbsp;<span class="ident" id="3298182">c</span>&nbsp;<span class="op" id="3298184">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298188">case</span>&nbsp;<span class="string" id="3298193">&#39;{&#39;</span><span class="op" id="3298196">,</span>&nbsp;<span class="string" id="3298198">&#39;[&#39;</span><span class="op" id="3298201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3298206">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298284">needIndent</span>&nbsp;<span class="op" id="3298295">=</span>&nbsp;<span class="builtintype" id="3298297">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298305">dst</span><span class="op" id="3298308">.</span><span class="ident" id="3298309">WriteByte</span><span class="op" id="3298318">(</span><span class="ident" id="3298319">c</span><span class="op" id="3298320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298325">case</span>&nbsp;<span class="string" id="3298330">&#39;,&#39;</span><span class="op" id="3298333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298338">dst</span><span class="op" id="3298341">.</span><span class="ident" id="3298342">WriteByte</span><span class="op" id="3298351">(</span><span class="ident" id="3298352">c</span><span class="op" id="3298353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298358">newline</span><span class="op" id="3298365">(</span><span class="ident" id="3298366">dst</span><span class="op" id="3298369">,</span>&nbsp;<span class="ident" id="3298371">prefix</span><span class="op" id="3298377">,</span>&nbsp;<span class="ident" id="3298379">indent</span><span class="op" id="3298385">,</span>&nbsp;<span class="ident" id="3298387">depth</span><span class="op" id="3298392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298397">case</span>&nbsp;<span class="string" id="3298402">&#39;:&#39;</span><span class="op" id="3298405">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298410">dst</span><span class="op" id="3298413">.</span><span class="ident" id="3298414">WriteByte</span><span class="op" id="3298423">(</span><span class="ident" id="3298424">c</span><span class="op" id="3298425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298430">dst</span><span class="op" id="3298433">.</span><span class="ident" id="3298434">WriteByte</span><span class="op" id="3298443">(</span><span class="string" id="3298444">&#39;&nbsp;&#39;</span><span class="op" id="3298447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298452">case</span>&nbsp;<span class="string" id="3298457">&#39;}&#39;</span><span class="op" id="3298460">,</span>&nbsp;<span class="string" id="3298462">&#39;]&#39;</span><span class="op" id="3298465">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298470">if</span>&nbsp;<span class="ident" id="3298473">needIndent</span>&nbsp;<span class="op" id="3298484">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3298490">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298535">needIndent</span>&nbsp;<span class="op" id="3298546">=</span>&nbsp;<span class="builtintype" id="3298548">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3298557">}</span>&nbsp;<span class="keyword" id="3298559">else</span>&nbsp;<span class="op" id="3298564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298570">depth</span><span class="op" id="3298575">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298582">newline</span><span class="op" id="3298589">(</span><span class="ident" id="3298590">dst</span><span class="op" id="3298593">,</span>&nbsp;<span class="ident" id="3298595">prefix</span><span class="op" id="3298601">,</span>&nbsp;<span class="ident" id="3298603">indent</span><span class="op" id="3298609">,</span>&nbsp;<span class="ident" id="3298611">depth</span><span class="op" id="3298616">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3298621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298626">dst</span><span class="op" id="3298629">.</span><span class="ident" id="3298630">WriteByte</span><span class="op" id="3298639">(</span><span class="ident" id="3298640">c</span><span class="op" id="3298641">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298646">default</span><span class="op" id="3298653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298658">dst</span><span class="op" id="3298661">.</span><span class="ident" id="3298662">WriteByte</span><span class="op" id="3298671">(</span><span class="ident" id="3298672">c</span><span class="op" id="3298673">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3298677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3298680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298683">if</span>&nbsp;<span class="ident" id="3298686">scan</span><span class="op" id="3298690">.</span><span class="ident" id="3298691">eof</span><span class="op" id="3298694">(</span><span class="op" id="3298695">)</span>&nbsp;<span class="op" id="3298697">==</span>&nbsp;<span class="ident" id="3298700">scanError</span>&nbsp;<span class="op" id="3298710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3298714">dst</span><span class="op" id="3298717">.</span><span class="ident" id="3298718">Truncate</span><span class="op" id="3298726">(</span><span class="ident" id="3298727">origLen</span><span class="op" id="3298734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298738">return</span>&nbsp;<span class="ident" id="3298745">scan</span><span class="op" id="3298749">.</span><span class="ident" id="3298750">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3298755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3298758">return</span>&nbsp;<span class="ident" id="3298765">nil</span><br>
<span class="lineno"></span><span class="op" id="3298769">}</span>
</div>
</body>
</html>
