<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1627648">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1627703">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1627757">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1627808">package</span>&nbsp;<span class="ident" id="1627816">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1627822">//&nbsp;Logb&nbsp;returns&nbsp;the&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="1627864">//</span><br>
<span class="lineno"></span><span class="comment" id="1627867">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno">10</span><span class="comment" id="1627889">//&nbsp;&nbsp;&nbsp;&nbspLogb(±Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno"></span><span class="comment" id="1627911">//&nbsp;&nbsp;&nbsp;&nbspLogb(0)&nbsp;=&nbsp;-Inf</span><br>
<span class="lineno"></span><span class="comment" id="1627929">//&nbsp;&nbsp;&nbsp;&nbspLogb(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="1627948">func</span>&nbsp;<span class="ident" id="1627953">Logb</span><span class="op" id="1627957">(</span><span class="ident" id="1627958">x</span>&nbsp;<span class="builtintype" id="1627960">float64</span><span class="op" id="1627967">)</span>&nbsp;<span class="builtintype" id="1627969">float64</span>&nbsp;<span class="op" id="1627977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1627980">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627998">switch</span>&nbsp;<span class="op" id="1628005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628008">case</span>&nbsp;<span class="ident" id="1628013">x</span>&nbsp;<span class="op" id="1628015">==</span>&nbsp;<span class="num" id="1628018">0</span><span class="op" id="1628019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628023">return</span>&nbsp;<span class="ident" id="1628030">Inf</span><span class="op" id="1628033">(</span><span class="op" id="1628034">-</span><span class="num" id="1628035">1</span><span class="op" id="1628036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628039">case</span>&nbsp;<span class="ident" id="1628044">IsInf</span><span class="op" id="1628049">(</span><span class="ident" id="1628050">x</span><span class="op" id="1628051">,</span>&nbsp;<span class="num" id="1628053">0</span><span class="op" id="1628054">)</span><span class="op" id="1628055">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628059">return</span>&nbsp;<span class="ident" id="1628066">Inf</span><span class="op" id="1628069">(</span><span class="num" id="1628070">1</span><span class="op" id="1628071">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628074">case</span>&nbsp;<span class="ident" id="1628079">IsNaN</span><span class="op" id="1628084">(</span><span class="ident" id="1628085">x</span><span class="op" id="1628086">)</span><span class="op" id="1628087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628091">return</span>&nbsp;<span class="ident" id="1628098">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1628101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628104">return</span>&nbsp;<span class="builtintype" id="1628111">float64</span><span class="op" id="1628118">(</span><span class="ident" id="1628119">ilogb</span><span class="op" id="1628124">(</span><span class="ident" id="1628125">x</span><span class="op" id="1628126">)</span><span class="op" id="1628127">)</span><br>
<span class="lineno"></span><span class="op" id="1628129">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="1628132">//&nbsp;Ilogb&nbsp;returns&nbsp;the&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;x&nbsp;as&nbsp;an&nbsp;integer.</span><br>
<span class="lineno"></span><span class="comment" id="1628189">//</span><br>
<span class="lineno"></span><span class="comment" id="1628192">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1628214">//&nbsp;&nbsp;&nbsp;&nbspIlogb(±Inf)&nbsp;=&nbsp;MaxInt32</span><br>
<span class="lineno">30</span><span class="comment" id="1628241">//&nbsp;&nbsp;&nbsp;&nbspIlogb(0)&nbsp;=&nbsp;MinInt32</span><br>
<span class="lineno"></span><span class="comment" id="1628264">//&nbsp;&nbsp;&nbsp;&nbspIlogb(NaN)&nbsp;=&nbsp;MaxInt32</span><br>
<span class="lineno"></span><span class="keyword" id="1628289">func</span>&nbsp;<span class="ident" id="1628294">Ilogb</span><span class="op" id="1628299">(</span><span class="ident" id="1628300">x</span>&nbsp;<span class="builtintype" id="1628302">float64</span><span class="op" id="1628309">)</span>&nbsp;<span class="builtintype" id="1628311">int</span>&nbsp;<span class="op" id="1628315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628318">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628336">switch</span>&nbsp;<span class="op" id="1628343">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628346">case</span>&nbsp;<span class="ident" id="1628351">x</span>&nbsp;<span class="op" id="1628353">==</span>&nbsp;<span class="num" id="1628356">0</span><span class="op" id="1628357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628361">return</span>&nbsp;<span class="ident" id="1628368">MinInt32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628378">case</span>&nbsp;<span class="ident" id="1628383">IsNaN</span><span class="op" id="1628388">(</span><span class="ident" id="1628389">x</span><span class="op" id="1628390">)</span><span class="op" id="1628391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628395">return</span>&nbsp;<span class="ident" id="1628402">MaxInt32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628412">case</span>&nbsp;<span class="ident" id="1628417">IsInf</span><span class="op" id="1628422">(</span><span class="ident" id="1628423">x</span><span class="op" id="1628424">,</span>&nbsp;<span class="num" id="1628426">0</span><span class="op" id="1628427">)</span><span class="op" id="1628428">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628432">return</span>&nbsp;<span class="ident" id="1628439">MaxInt32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1628449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628452">return</span>&nbsp;<span class="ident" id="1628459">ilogb</span><span class="op" id="1628464">(</span><span class="ident" id="1628465">x</span><span class="op" id="1628466">)</span><br>
<span class="lineno"></span><span class="op" id="1628468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="1628471">//&nbsp;logb&nbsp;returns&nbsp;the&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;x.&nbsp;It&nbsp;assumes&nbsp;x&nbsp;is&nbsp;finite&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1628540">//&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="keyword" id="1628553">func</span>&nbsp;<span class="ident" id="1628558">ilogb</span><span class="op" id="1628563">(</span><span class="ident" id="1628564">x</span>&nbsp;<span class="builtintype" id="1628566">float64</span><span class="op" id="1628573">)</span>&nbsp;<span class="builtintype" id="1628575">int</span>&nbsp;<span class="op" id="1628579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628582">x</span><span class="op" id="1628583">,</span>&nbsp;<span class="ident" id="1628585">exp</span>&nbsp;<span class="op" id="1628589">:=</span>&nbsp;<span class="ident" id="1628592">normalize</span><span class="op" id="1628601">(</span><span class="ident" id="1628602">x</span><span class="op" id="1628603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628606">return</span>&nbsp;<span class="builtintype" id="1628613">int</span><span class="op" id="1628616">(</span><span class="op" id="1628617">(</span><span class="ident" id="1628618">Float64bits</span><span class="op" id="1628629">(</span><span class="ident" id="1628630">x</span><span class="op" id="1628631">)</span><span class="op" id="1628632">&gt;&gt;</span><span class="ident" id="1628634">shift</span><span class="op" id="1628639">)</span><span class="op" id="1628640">&amp;</span><span class="ident" id="1628641">mask</span><span class="op" id="1628645">)</span>&nbsp;<span class="op" id="1628647">-</span>&nbsp;<span class="ident" id="1628649">bias</span>&nbsp;<span class="op" id="1628654">+</span>&nbsp;<span class="ident" id="1628656">exp</span><br>
<span class="lineno">50</span><span class="op" id="1628660">}</span>
</div>
</body>
</html>
