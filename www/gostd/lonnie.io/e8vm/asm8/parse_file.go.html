<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5106659">package</span>&nbsp;<span class="ident" id="5106667">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5106673">import</span>&nbsp;<span class="op" id="5106680">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5106683">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5106705">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5106708">func</span>&nbsp;<span class="ident" id="5106713">parseFile</span><span class="op" id="5106722">(</span><span class="ident" id="5106723">p</span>&nbsp;<span class="op" id="5106725">*</span><span class="ident" id="5106726">parser</span><span class="op" id="5106732">)</span>&nbsp;<span class="op" id="5106734">*</span><span class="ident" id="5106735">file</span>&nbsp;<span class="op" id="5106740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5106743">ret</span>&nbsp;<span class="op" id="5106747">:=</span>&nbsp;<span class="builtinfunc" id="5106750">new</span><span class="op" id="5106753">(</span><span class="ident" id="5106754">file</span><span class="op" id="5106758">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106762">for</span>&nbsp;<span class="ident" id="5106766">p</span><span class="op" id="5106767">.</span><span class="ident" id="5106768">seeKeyword</span><span class="op" id="5106778">(</span><span class="string" id="5106779">&#34;import&#34;</span><span class="op" id="5106787">)</span>&nbsp;<span class="op" id="5106789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5106793">panic</span><span class="op" id="5106798">(</span><span class="string" id="5106799">&#34;todo&#34;</span><span class="op" id="5106805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5106808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106812">for</span>&nbsp;<span class="op" id="5106816">!</span><span class="ident" id="5106817">p</span><span class="op" id="5106818">.</span><span class="ident" id="5106819">see</span><span class="op" id="5106822">(</span><span class="ident" id="5106823">lex8</span><span class="op" id="5106827">.</span><span class="ident" id="5106828">EOF</span><span class="op" id="5106831">)</span>&nbsp;<span class="op" id="5106833">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106837">if</span>&nbsp;<span class="ident" id="5106840">p</span><span class="op" id="5106841">.</span><span class="ident" id="5106842">seeKeyword</span><span class="op" id="5106852">(</span><span class="string" id="5106853">&#34;func&#34;</span><span class="op" id="5106859">)</span>&nbsp;<span class="op" id="5106861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106866">if</span>&nbsp;<span class="ident" id="5106869">f</span>&nbsp;<span class="op" id="5106871">:=</span>&nbsp;<span class="ident" id="5106874">parseFunc</span><span class="op" id="5106883">(</span><span class="ident" id="5106884">p</span><span class="op" id="5106885">)</span><span class="op" id="5106886">;</span>&nbsp;<span class="ident" id="5106888">f</span>&nbsp;<span class="op" id="5106890">!=</span>&nbsp;<span class="ident" id="5106893">nil</span>&nbsp;<span class="op" id="5106897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5106903">ret</span><span class="op" id="5106906">.</span><span class="ident" id="5106907">Funcs</span>&nbsp;<span class="op" id="5106913">=</span>&nbsp;<span class="builtinfunc" id="5106915">append</span><span class="op" id="5106921">(</span><span class="ident" id="5106922">ret</span><span class="op" id="5106925">.</span><span class="ident" id="5106926">Funcs</span><span class="op" id="5106931">,</span>&nbsp;<span class="ident" id="5106933">f</span><span class="op" id="5106934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5106939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5106943">}</span>&nbsp;<span class="keyword" id="5106945">else</span>&nbsp;<span class="keyword" id="5106950">if</span>&nbsp;<span class="ident" id="5106953">p</span><span class="op" id="5106954">.</span><span class="ident" id="5106955">seeKeyword</span><span class="op" id="5106965">(</span><span class="string" id="5106966">&#34;var&#34;</span><span class="op" id="5106971">)</span>&nbsp;<span class="op" id="5106973">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106978">if</span>&nbsp;<span class="ident" id="5106981">v</span>&nbsp;<span class="op" id="5106983">:=</span>&nbsp;<span class="ident" id="5106986">parseVar</span><span class="op" id="5106994">(</span><span class="ident" id="5106995">p</span><span class="op" id="5106996">)</span><span class="op" id="5106997">;</span>&nbsp;<span class="ident" id="5106999">v</span>&nbsp;<span class="op" id="5107001">!=</span>&nbsp;<span class="ident" id="5107004">nil</span>&nbsp;<span class="op" id="5107008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107014">ret</span><span class="op" id="5107017">.</span><span class="ident" id="5107018">Vars</span>&nbsp;<span class="op" id="5107023">=</span>&nbsp;<span class="builtinfunc" id="5107025">append</span><span class="op" id="5107031">(</span><span class="ident" id="5107032">ret</span><span class="op" id="5107035">.</span><span class="ident" id="5107036">Vars</span><span class="op" id="5107040">,</span>&nbsp;<span class="ident" id="5107042">v</span><span class="op" id="5107043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107052">}</span>&nbsp;<span class="keyword" id="5107054">else</span>&nbsp;<span class="keyword" id="5107059">if</span>&nbsp;<span class="ident" id="5107062">p</span><span class="op" id="5107063">.</span><span class="ident" id="5107064">seeKeyword</span><span class="op" id="5107074">(</span><span class="string" id="5107075">&#34;const&#34;</span><span class="op" id="5107082">)</span>&nbsp;<span class="op" id="5107084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5107089">//&nbsp;TODO:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107101">p</span><span class="op" id="5107102">.</span><span class="ident" id="5107103">err</span><span class="op" id="5107106">(</span><span class="ident" id="5107107">p</span><span class="op" id="5107108">.</span><span class="ident" id="5107109">t</span><span class="op" id="5107110">.</span><span class="ident" id="5107111">Pos</span><span class="op" id="5107114">,</span>&nbsp;<span class="string" id="5107116">&#34;const&nbsp;support&nbsp;not&nbsp;implemented&nbsp;yet&#34;</span><span class="op" id="5107151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107156">p</span><span class="op" id="5107157">.</span><span class="ident" id="5107158">skipErrStmt</span><span class="op" id="5107169">(</span><span class="op" id="5107170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107174">}</span>&nbsp;<span class="keyword" id="5107176">else</span>&nbsp;<span class="op" id="5107181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107186">p</span><span class="op" id="5107187">.</span><span class="ident" id="5107188">err</span><span class="op" id="5107191">(</span><span class="ident" id="5107192">p</span><span class="op" id="5107193">.</span><span class="ident" id="5107194">t</span><span class="op" id="5107195">.</span><span class="ident" id="5107196">Pos</span><span class="op" id="5107199">,</span>&nbsp;<span class="string" id="5107201">&#34;expect&nbsp;top-declaration:&nbsp;func,&nbsp;var&nbsp;or&nbsp;const&#34;</span><span class="op" id="5107245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107250">return</span>&nbsp;<span class="ident" id="5107257">nil</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5107268">p</span><span class="op" id="5107269">.</span><span class="ident" id="5107270">clearErr</span><span class="op" id="5107278">(</span><span class="op" id="5107279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5107282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5107286">return</span>&nbsp;<span class="ident" id="5107293">ret</span><br>
<span class="lineno"></span><span class="op" id="5107297">}</span>
</div>
</body>
</html>
