<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html" class="current">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1966088">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1966143">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1966197">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1966248">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="1966323">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1966354">package</span>&nbsp;<span class="ident" id="1966362">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="1966368">import</span>&nbsp;<span class="op" id="1966375">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966378">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966387">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966399">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966418">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966428">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966435">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966446">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966457">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966468">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966479">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1966496">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="1966511">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1966514">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="1966578">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="1966611">//</span><br>
<span class="lineno"></span><span class="comment" id="1966614">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1966666">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="1966735">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="1966775">//</span><br>
<span class="lineno"></span><span class="comment" id="1966778">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1966851">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="1966922">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="1966992">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="1967066">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="1967111">//</span><br>
<span class="lineno"></span><span class="comment" id="1967114">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="1967184">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="1967263">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="1967337">//</span><br>
<span class="lineno"></span><span class="comment" id="1967340">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="1967386">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="1967443">//</span><br>
<span class="lineno"></span><span class="comment" id="1967446">//&nbsp;&nbsp;&nbsp;&nbsp;bool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="1967473">//&nbsp;&nbsp;&nbsp;&nbsp;float64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="1967502">//&nbsp;&nbsp;&nbsp;&nbsp;string,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="1967530">//&nbsp;&nbsp;&nbsp;&nbsp;[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="1967564">//&nbsp;&nbsp;&nbsp;&nbsp;map[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="1967608">//&nbsp;&nbsp;&nbsp;&nbsp;nil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="1967629">//</span><br>
<span class="lineno"></span><span class="comment" id="1967632">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="1967695">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="1967755">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="1967823">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="1967887">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1967948">//</span><br>
<span class="lineno"></span><span class="comment" id="1967951">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="1968027">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="1968106">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="1968188">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1968227">//</span><br>
<span class="lineno"></span><span class="comment" id="1968230">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1968284">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1968347">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="1968404">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="1968425">//</span><br>
<span class="lineno"></span><span class="keyword" id="1968428">func</span>&nbsp;<span class="ident" id="1968433">Unmarshal</span><span class="op" id="1968442">(</span><span class="ident" id="1968443">data</span>&nbsp;<span class="op" id="1968448">[</span><span class="op" id="1968449">]</span><span class="builtintype" id="1968450">byte</span><span class="op" id="1968454">,</span>&nbsp;<span class="ident" id="1968456">v</span>&nbsp;<span class="keyword" id="1968458">interface</span><span class="op" id="1968467">{</span><span class="op" id="1968468">}</span><span class="op" id="1968469">)</span>&nbsp;<span class="builtintype" id="1968471">error</span>&nbsp;<span class="op" id="1968477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1968480">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1968511">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1968556">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1968600">var</span>&nbsp;<span class="ident" id="1968604">d</span>&nbsp;<span class="ident" id="1968606">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1968619">err</span>&nbsp;<span class="op" id="1968623">:=</span>&nbsp;<span class="ident" id="1968626">checkValid</span><span class="op" id="1968636">(</span><span class="ident" id="1968637">data</span><span class="op" id="1968641">,</span>&nbsp;<span class="op" id="1968643">&amp;</span><span class="ident" id="1968644">d</span><span class="op" id="1968645">.</span><span class="ident" id="1968646">scan</span><span class="op" id="1968650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1968653">if</span>&nbsp;<span class="ident" id="1968656">err</span>&nbsp;<span class="op" id="1968660">!=</span>&nbsp;<span class="builtintype" id="1968663">nil</span>&nbsp;<span class="op" id="1968667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1968671">return</span>&nbsp;<span class="ident" id="1968678">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1968683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1968687">d</span><span class="op" id="1968688">.</span><span class="ident" id="1968689">init</span><span class="op" id="1968693">(</span><span class="ident" id="1968694">data</span><span class="op" id="1968698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1968701">return</span>&nbsp;<span class="ident" id="1968708">d</span><span class="op" id="1968709">.</span><span class="ident" id="1968710">unmarshal</span><span class="op" id="1968719">(</span><span class="ident" id="1968720">v</span><span class="op" id="1968721">)</span><br>
<span class="lineno"></span><span class="op" id="1968723">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="1968726">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="1968781">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="1968837">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="1968891">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="1968946">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="1968998">type</span>&nbsp;<span class="ident" id="1969003">Unmarshaler</span>&nbsp;<span class="keyword" id="1969015">interface</span>&nbsp;<span class="op" id="1969025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1969028">UnmarshalJSON</span><span class="op" id="1969041">(</span><span class="op" id="1969042">[</span><span class="op" id="1969043">]</span><span class="builtintype" id="1969044">byte</span><span class="op" id="1969048">)</span>&nbsp;<span class="builtintype" id="1969050">error</span><br>
<span class="lineno"></span><span class="op" id="1969056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="1969059">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="1969116">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="1969170">type</span>&nbsp;<span class="ident" id="1969175">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="1969194">struct</span>&nbsp;<span class="op" id="1969201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1969204">Value</span>&nbsp;<span class="builtintype" id="1969210">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1969223">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1969284">Type</span>&nbsp;&nbsp;<span class="ident" id="1969290">reflect</span><span class="op" id="1969297">.</span><span class="ident" id="1969298">Type</span>&nbsp;<span class="comment" id="1969303">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="1969351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1969354">func</span>&nbsp;<span class="op" id="1969359">(</span><span class="ident" id="1969360">e</span>&nbsp;<span class="op" id="1969362">*</span><span class="ident" id="1969363">UnmarshalTypeError</span><span class="op" id="1969381">)</span>&nbsp;<span class="ident" id="1969383">Error</span><span class="op" id="1969388">(</span><span class="op" id="1969389">)</span>&nbsp;<span class="builtintype" id="1969391">string</span>&nbsp;<span class="op" id="1969398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1969401">return</span>&nbsp;<span class="string" id="1969408">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="1969434">+</span>&nbsp;<span class="ident" id="1969436">e</span><span class="op" id="1969437">.</span><span class="ident" id="1969438">Value</span>&nbsp;<span class="op" id="1969444">+</span>&nbsp;<span class="string" id="1969446">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1969472">+</span>&nbsp;<span class="ident" id="1969474">e</span><span class="op" id="1969475">.</span><span class="ident" id="1969476">Type</span><span class="op" id="1969480">.</span><span class="ident" id="1969481">String</span><span class="op" id="1969487">(</span><span class="op" id="1969488">)</span><br>
<span class="lineno"></span><span class="op" id="1969490">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="1969493">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1969552">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="1969617">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="1969662">type</span>&nbsp;<span class="ident" id="1969667">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="1969687">struct</span>&nbsp;<span class="op" id="1969694">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1969697">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1969703">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1969711">Type</span>&nbsp;&nbsp;<span class="ident" id="1969717">reflect</span><span class="op" id="1969724">.</span><span class="ident" id="1969725">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1969731">Field</span>&nbsp;<span class="ident" id="1969737">reflect</span><span class="op" id="1969744">.</span><span class="ident" id="1969745">StructField</span><br>
<span class="lineno"></span><span class="op" id="1969757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="1969760">func</span>&nbsp;<span class="op" id="1969765">(</span><span class="ident" id="1969766">e</span>&nbsp;<span class="op" id="1969768">*</span><span class="ident" id="1969769">UnmarshalFieldError</span><span class="op" id="1969788">)</span>&nbsp;<span class="ident" id="1969790">Error</span><span class="op" id="1969795">(</span><span class="op" id="1969796">)</span>&nbsp;<span class="builtintype" id="1969798">string</span>&nbsp;<span class="op" id="1969805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1969808">return</span>&nbsp;<span class="string" id="1969815">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="1969852">+</span>&nbsp;<span class="ident" id="1969854">strconv</span><span class="op" id="1969861">.</span><span class="ident" id="1969862">Quote</span><span class="op" id="1969867">(</span><span class="ident" id="1969868">e</span><span class="op" id="1969869">.</span><span class="ident" id="1969870">Key</span><span class="op" id="1969873">)</span>&nbsp;<span class="op" id="1969875">+</span>&nbsp;<span class="string" id="1969877">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="1969903">+</span>&nbsp;<span class="ident" id="1969905">e</span><span class="op" id="1969906">.</span><span class="ident" id="1969907">Field</span><span class="op" id="1969912">.</span><span class="ident" id="1969913">Name</span>&nbsp;<span class="op" id="1969918">+</span>&nbsp;<span class="string" id="1969920">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="1969932">+</span>&nbsp;<span class="ident" id="1969934">e</span><span class="op" id="1969935">.</span><span class="ident" id="1969936">Type</span><span class="op" id="1969940">.</span><span class="ident" id="1969941">String</span><span class="op" id="1969947">(</span><span class="op" id="1969948">)</span><br>
<span class="lineno"></span><span class="op" id="1969950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1969953">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="1970032">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="1970090">type</span>&nbsp;<span class="ident" id="1970095">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="1970117">struct</span>&nbsp;<span class="op" id="1970124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1970127">Type</span>&nbsp;<span class="ident" id="1970132">reflect</span><span class="op" id="1970139">.</span><span class="ident" id="1970140">Type</span><br>
<span class="lineno"></span><span class="op" id="1970145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="1970148">func</span>&nbsp;<span class="op" id="1970153">(</span><span class="ident" id="1970154">e</span>&nbsp;<span class="op" id="1970156">*</span><span class="ident" id="1970157">InvalidUnmarshalError</span><span class="op" id="1970178">)</span>&nbsp;<span class="ident" id="1970180">Error</span><span class="op" id="1970185">(</span><span class="op" id="1970186">)</span>&nbsp;<span class="builtintype" id="1970188">string</span>&nbsp;<span class="op" id="1970195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970198">if</span>&nbsp;<span class="ident" id="1970201">e</span><span class="op" id="1970202">.</span><span class="ident" id="1970203">Type</span>&nbsp;<span class="op" id="1970208">==</span>&nbsp;<span class="builtintype" id="1970211">nil</span>&nbsp;<span class="op" id="1970215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970219">return</span>&nbsp;<span class="string" id="1970226">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1970250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970254">if</span>&nbsp;<span class="ident" id="1970257">e</span><span class="op" id="1970258">.</span><span class="ident" id="1970259">Type</span><span class="op" id="1970263">.</span><span class="ident" id="1970264">Kind</span><span class="op" id="1970268">(</span><span class="op" id="1970269">)</span>&nbsp;<span class="op" id="1970271">!=</span>&nbsp;<span class="ident" id="1970274">reflect</span><span class="op" id="1970281">.</span><span class="ident" id="1970282">Ptr</span>&nbsp;<span class="op" id="1970286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970290">return</span>&nbsp;<span class="string" id="1970297">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="1970328">+</span>&nbsp;<span class="ident" id="1970330">e</span><span class="op" id="1970331">.</span><span class="ident" id="1970332">Type</span><span class="op" id="1970336">.</span><span class="ident" id="1970337">String</span><span class="op" id="1970343">(</span><span class="op" id="1970344">)</span>&nbsp;<span class="op" id="1970346">+</span>&nbsp;<span class="string" id="1970348">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1970353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970356">return</span>&nbsp;<span class="string" id="1970363">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="1970386">+</span>&nbsp;<span class="ident" id="1970388">e</span><span class="op" id="1970389">.</span><span class="ident" id="1970390">Type</span><span class="op" id="1970394">.</span><span class="ident" id="1970395">String</span><span class="op" id="1970401">(</span><span class="op" id="1970402">)</span>&nbsp;<span class="op" id="1970404">+</span>&nbsp;<span class="string" id="1970406">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="1970410">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="1970413">func</span>&nbsp;<span class="op" id="1970418">(</span><span class="ident" id="1970419">d</span>&nbsp;<span class="op" id="1970421">*</span><span class="ident" id="1970422">decodeState</span><span class="op" id="1970433">)</span>&nbsp;<span class="ident" id="1970435">unmarshal</span><span class="op" id="1970444">(</span><span class="ident" id="1970445">v</span>&nbsp;<span class="keyword" id="1970447">interface</span><span class="op" id="1970456">{</span><span class="op" id="1970457">}</span><span class="op" id="1970458">)</span>&nbsp;<span class="op" id="1970460">(</span><span class="ident" id="1970461">err</span>&nbsp;<span class="builtintype" id="1970465">error</span><span class="op" id="1970470">)</span>&nbsp;<span class="op" id="1970472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970475">defer</span>&nbsp;<span class="keyword" id="1970481">func</span><span class="op" id="1970485">(</span><span class="op" id="1970486">)</span>&nbsp;<span class="op" id="1970488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970492">if</span>&nbsp;<span class="ident" id="1970495">r</span>&nbsp;<span class="op" id="1970497">:=</span>&nbsp;<span class="builtinfunc" id="1970500">recover</span><span class="op" id="1970507">(</span><span class="op" id="1970508">)</span><span class="op" id="1970509">;</span>&nbsp;<span class="ident" id="1970511">r</span>&nbsp;<span class="op" id="1970513">!=</span>&nbsp;<span class="builtintype" id="1970516">nil</span>&nbsp;<span class="op" id="1970520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970525">if</span>&nbsp;<span class="ident" id="1970528">_</span><span class="op" id="1970529">,</span>&nbsp;<span class="ident" id="1970531">ok</span>&nbsp;<span class="op" id="1970534">:=</span>&nbsp;<span class="ident" id="1970537">r</span><span class="op" id="1970538">.</span><span class="op" id="1970539">(</span><span class="ident" id="1970540">runtime</span><span class="op" id="1970547">.</span><span class="ident" id="1970548">Error</span><span class="op" id="1970553">)</span><span class="op" id="1970554">;</span>&nbsp;<span class="ident" id="1970556">ok</span>&nbsp;<span class="op" id="1970559">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1970565">panic</span><span class="op" id="1970570">(</span><span class="ident" id="1970571">r</span><span class="op" id="1970572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1970577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1970582">err</span>&nbsp;<span class="op" id="1970586">=</span>&nbsp;<span class="ident" id="1970588">r</span><span class="op" id="1970589">.</span><span class="op" id="1970590">(</span><span class="builtintype" id="1970591">error</span><span class="op" id="1970596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1970600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1970603">}</span><span class="op" id="1970604">(</span><span class="op" id="1970605">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1970609">rv</span>&nbsp;<span class="op" id="1970612">:=</span>&nbsp;<span class="ident" id="1970615">reflect</span><span class="op" id="1970622">.</span><span class="ident" id="1970623">ValueOf</span><span class="op" id="1970630">(</span><span class="ident" id="1970631">v</span><span class="op" id="1970632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970635">if</span>&nbsp;<span class="ident" id="1970638">rv</span><span class="op" id="1970640">.</span><span class="ident" id="1970641">Kind</span><span class="op" id="1970645">(</span><span class="op" id="1970646">)</span>&nbsp;<span class="op" id="1970648">!=</span>&nbsp;<span class="ident" id="1970651">reflect</span><span class="op" id="1970658">.</span><span class="ident" id="1970659">Ptr</span>&nbsp;<span class="op" id="1970663">||</span>&nbsp;<span class="ident" id="1970666">rv</span><span class="op" id="1970668">.</span><span class="ident" id="1970669">IsNil</span><span class="op" id="1970674">(</span><span class="op" id="1970675">)</span>&nbsp;<span class="op" id="1970677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970681">return</span>&nbsp;<span class="op" id="1970688">&amp;</span><span class="ident" id="1970689">InvalidUnmarshalError</span><span class="op" id="1970710">{</span><span class="ident" id="1970711">reflect</span><span class="op" id="1970718">.</span><span class="ident" id="1970719">TypeOf</span><span class="op" id="1970725">(</span><span class="ident" id="1970726">v</span><span class="op" id="1970727">)</span><span class="op" id="1970728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1970731">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1970735">d</span><span class="op" id="1970736">.</span><span class="ident" id="1970737">scan</span><span class="op" id="1970741">.</span><span class="ident" id="1970742">reset</span><span class="op" id="1970747">(</span><span class="op" id="1970748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1970751">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1970814">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1970870">d</span><span class="op" id="1970871">.</span><span class="ident" id="1970872">value</span><span class="op" id="1970877">(</span><span class="ident" id="1970878">rv</span><span class="op" id="1970880">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1970883">return</span>&nbsp;<span class="ident" id="1970890">d</span><span class="op" id="1970891">.</span><span class="ident" id="1970892">savedError</span><br>
<span class="lineno"></span><span class="op" id="1970903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1970906">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="1970952">type</span>&nbsp;<span class="ident" id="1970957">Number</span>&nbsp;<span class="builtintype" id="1970964">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="1970972">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="1971022">func</span>&nbsp;<span class="op" id="1971027">(</span><span class="ident" id="1971028">n</span>&nbsp;<span class="ident" id="1971030">Number</span><span class="op" id="1971036">)</span>&nbsp;<span class="ident" id="1971038">String</span><span class="op" id="1971044">(</span><span class="op" id="1971045">)</span>&nbsp;<span class="builtintype" id="1971047">string</span>&nbsp;<span class="op" id="1971054">{</span>&nbsp;<span class="keyword" id="1971056">return</span>&nbsp;<span class="builtintype" id="1971063">string</span><span class="op" id="1971069">(</span><span class="ident" id="1971070">n</span><span class="op" id="1971071">)</span>&nbsp;<span class="op" id="1971073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1971076">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="1971120">func</span>&nbsp;<span class="op" id="1971125">(</span><span class="ident" id="1971126">n</span>&nbsp;<span class="ident" id="1971128">Number</span><span class="op" id="1971134">)</span>&nbsp;<span class="ident" id="1971136">Float64</span><span class="op" id="1971143">(</span><span class="op" id="1971144">)</span>&nbsp;<span class="op" id="1971146">(</span><span class="builtintype" id="1971147">float64</span><span class="op" id="1971154">,</span>&nbsp;<span class="builtintype" id="1971156">error</span><span class="op" id="1971161">)</span>&nbsp;<span class="op" id="1971163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1971166">return</span>&nbsp;<span class="ident" id="1971173">strconv</span><span class="op" id="1971180">.</span><span class="ident" id="1971181">ParseFloat</span><span class="op" id="1971191">(</span><span class="builtintype" id="1971192">string</span><span class="op" id="1971198">(</span><span class="ident" id="1971199">n</span><span class="op" id="1971200">)</span><span class="op" id="1971201">,</span>&nbsp;<span class="num" id="1971203">64</span><span class="op" id="1971205">)</span><br>
<span class="lineno"></span><span class="op" id="1971207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1971210">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="1971251">func</span>&nbsp;<span class="op" id="1971256">(</span><span class="ident" id="1971257">n</span>&nbsp;<span class="ident" id="1971259">Number</span><span class="op" id="1971265">)</span>&nbsp;<span class="ident" id="1971267">Int64</span><span class="op" id="1971272">(</span><span class="op" id="1971273">)</span>&nbsp;<span class="op" id="1971275">(</span><span class="ident" id="1971276">int64</span><span class="op" id="1971281">,</span>&nbsp;<span class="builtintype" id="1971283">error</span><span class="op" id="1971288">)</span>&nbsp;<span class="op" id="1971290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1971293">return</span>&nbsp;<span class="ident" id="1971300">strconv</span><span class="op" id="1971307">.</span><span class="ident" id="1971308">ParseInt</span><span class="op" id="1971316">(</span><span class="builtintype" id="1971317">string</span><span class="op" id="1971323">(</span><span class="ident" id="1971324">n</span><span class="op" id="1971325">)</span><span class="op" id="1971326">,</span>&nbsp;<span class="num" id="1971328">10</span><span class="op" id="1971330">,</span>&nbsp;<span class="num" id="1971332">64</span><span class="op" id="1971334">)</span><br>
<span class="lineno"></span><span class="op" id="1971336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1971339">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="1971404">type</span>&nbsp;<span class="ident" id="1971409">decodeState</span>&nbsp;<span class="keyword" id="1971421">struct</span>&nbsp;<span class="op" id="1971428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971431">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1971442">[</span><span class="op" id="1971443">]</span><span class="builtintype" id="1971444">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971450">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1971461">int</span>&nbsp;<span class="comment" id="1971465">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971489">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971500">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971509">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1971520">scanner</span>&nbsp;<span class="comment" id="1971528">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971555">savedError</span>&nbsp;<span class="builtintype" id="1971566">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971573">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="1971584">bool</span><br>
<span class="lineno"></span><span class="op" id="1971589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1971592">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="1971653">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="1971715">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="1971761">var</span>&nbsp;<span class="ident" id="1971765">errPhase</span>&nbsp;<span class="op" id="1971774">=</span>&nbsp;<span class="ident" id="1971776">errors</span><span class="op" id="1971782">.</span><span class="ident" id="1971783">New</span><span class="op" id="1971786">(</span><span class="string" id="1971787">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="1971840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1971843">func</span>&nbsp;<span class="op" id="1971848">(</span><span class="ident" id="1971849">d</span>&nbsp;<span class="op" id="1971851">*</span><span class="ident" id="1971852">decodeState</span><span class="op" id="1971863">)</span>&nbsp;<span class="ident" id="1971865">init</span><span class="op" id="1971869">(</span><span class="ident" id="1971870">data</span>&nbsp;<span class="op" id="1971875">[</span><span class="op" id="1971876">]</span><span class="builtintype" id="1971877">byte</span><span class="op" id="1971881">)</span>&nbsp;<span class="op" id="1971883">*</span><span class="ident" id="1971884">decodeState</span>&nbsp;<span class="op" id="1971896">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971899">d</span><span class="op" id="1971900">.</span><span class="ident" id="1971901">data</span>&nbsp;<span class="op" id="1971906">=</span>&nbsp;<span class="ident" id="1971908">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971914">d</span><span class="op" id="1971915">.</span><span class="ident" id="1971916">off</span>&nbsp;<span class="op" id="1971920">=</span>&nbsp;<span class="num" id="1971922">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1971925">d</span><span class="op" id="1971926">.</span><span class="ident" id="1971927">savedError</span>&nbsp;<span class="op" id="1971938">=</span>&nbsp;<span class="builtintype" id="1971940">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1971945">return</span>&nbsp;<span class="ident" id="1971952">d</span><br>
<span class="lineno"></span><span class="op" id="1971954">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="1971957">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="1972009">func</span>&nbsp;<span class="op" id="1972014">(</span><span class="ident" id="1972015">d</span>&nbsp;<span class="op" id="1972017">*</span><span class="ident" id="1972018">decodeState</span><span class="op" id="1972029">)</span>&nbsp;<span class="builtintype" id="1972031">error</span><span class="op" id="1972036">(</span><span class="ident" id="1972037">err</span>&nbsp;<span class="builtintype" id="1972041">error</span><span class="op" id="1972046">)</span>&nbsp;<span class="op" id="1972048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1972051">panic</span><span class="op" id="1972056">(</span><span class="ident" id="1972057">err</span><span class="op" id="1972060">)</span><br>
<span class="lineno"></span><span class="op" id="1972062">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="1972065">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="1972117">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="1972163">func</span>&nbsp;<span class="op" id="1972168">(</span><span class="ident" id="1972169">d</span>&nbsp;<span class="op" id="1972171">*</span><span class="ident" id="1972172">decodeState</span><span class="op" id="1972183">)</span>&nbsp;<span class="ident" id="1972185">saveError</span><span class="op" id="1972194">(</span><span class="ident" id="1972195">err</span>&nbsp;<span class="builtintype" id="1972199">error</span><span class="op" id="1972204">)</span>&nbsp;<span class="op" id="1972206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1972209">if</span>&nbsp;<span class="ident" id="1972212">d</span><span class="op" id="1972213">.</span><span class="ident" id="1972214">savedError</span>&nbsp;<span class="op" id="1972225">==</span>&nbsp;<span class="builtintype" id="1972228">nil</span>&nbsp;<span class="op" id="1972232">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972236">d</span><span class="op" id="1972237">.</span><span class="ident" id="1972238">savedError</span>&nbsp;<span class="op" id="1972249">=</span>&nbsp;<span class="ident" id="1972251">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1972256">}</span><br>
<span class="lineno"></span><span class="op" id="1972258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1972261">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="1972334">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="1972402">func</span>&nbsp;<span class="op" id="1972407">(</span><span class="ident" id="1972408">d</span>&nbsp;<span class="op" id="1972410">*</span><span class="ident" id="1972411">decodeState</span><span class="op" id="1972422">)</span>&nbsp;<span class="ident" id="1972424">next</span><span class="op" id="1972428">(</span><span class="op" id="1972429">)</span>&nbsp;<span class="op" id="1972431">[</span><span class="op" id="1972432">]</span><span class="builtintype" id="1972433">byte</span>&nbsp;<span class="op" id="1972438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972441">c</span>&nbsp;<span class="op" id="1972443">:=</span>&nbsp;<span class="ident" id="1972446">d</span><span class="op" id="1972447">.</span><span class="ident" id="1972448">data</span><span class="op" id="1972452">[</span><span class="ident" id="1972453">d</span><span class="op" id="1972454">.</span><span class="ident" id="1972455">off</span><span class="op" id="1972458">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972461">item</span><span class="op" id="1972465">,</span>&nbsp;<span class="ident" id="1972467">rest</span><span class="op" id="1972471">,</span>&nbsp;<span class="ident" id="1972473">err</span>&nbsp;<span class="op" id="1972477">:=</span>&nbsp;<span class="ident" id="1972480">nextValue</span><span class="op" id="1972489">(</span><span class="ident" id="1972490">d</span><span class="op" id="1972491">.</span><span class="ident" id="1972492">data</span><span class="op" id="1972496">[</span><span class="ident" id="1972497">d</span><span class="op" id="1972498">.</span><span class="ident" id="1972499">off</span><span class="op" id="1972502">:</span><span class="op" id="1972503">]</span><span class="op" id="1972504">,</span>&nbsp;<span class="op" id="1972506">&amp;</span><span class="ident" id="1972507">d</span><span class="op" id="1972508">.</span><span class="ident" id="1972509">nextscan</span><span class="op" id="1972517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1972520">if</span>&nbsp;<span class="ident" id="1972523">err</span>&nbsp;<span class="op" id="1972527">!=</span>&nbsp;<span class="builtintype" id="1972530">nil</span>&nbsp;<span class="op" id="1972534">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972538">d</span><span class="op" id="1972539">.</span><span class="builtintype" id="1972540">error</span><span class="op" id="1972545">(</span><span class="ident" id="1972546">err</span><span class="op" id="1972549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1972552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972555">d</span><span class="op" id="1972556">.</span><span class="ident" id="1972557">off</span>&nbsp;<span class="op" id="1972561">=</span>&nbsp;<span class="builtinfunc" id="1972563">len</span><span class="op" id="1972566">(</span><span class="ident" id="1972567">d</span><span class="op" id="1972568">.</span><span class="ident" id="1972569">data</span><span class="op" id="1972573">)</span>&nbsp;<span class="op" id="1972575">-</span>&nbsp;<span class="builtinfunc" id="1972577">len</span><span class="op" id="1972580">(</span><span class="ident" id="1972581">rest</span><span class="op" id="1972585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1972589">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1972640">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1972696">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1972746">if</span>&nbsp;<span class="ident" id="1972749">c</span>&nbsp;<span class="op" id="1972751">==</span>&nbsp;<span class="string" id="1972754">&#39;{&#39;</span>&nbsp;<span class="op" id="1972758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972762">d</span><span class="op" id="1972763">.</span><span class="ident" id="1972764">scan</span><span class="op" id="1972768">.</span><span class="ident" id="1972769">step</span><span class="op" id="1972773">(</span><span class="op" id="1972774">&amp;</span><span class="ident" id="1972775">d</span><span class="op" id="1972776">.</span><span class="ident" id="1972777">scan</span><span class="op" id="1972781">,</span>&nbsp;<span class="string" id="1972783">&#39;}&#39;</span><span class="op" id="1972786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1972789">}</span>&nbsp;<span class="keyword" id="1972791">else</span>&nbsp;<span class="op" id="1972796">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1972800">d</span><span class="op" id="1972801">.</span><span class="ident" id="1972802">scan</span><span class="op" id="1972806">.</span><span class="ident" id="1972807">step</span><span class="op" id="1972811">(</span><span class="op" id="1972812">&amp;</span><span class="ident" id="1972813">d</span><span class="op" id="1972814">.</span><span class="ident" id="1972815">scan</span><span class="op" id="1972819">,</span>&nbsp;<span class="string" id="1972821">&#39;]&#39;</span><span class="op" id="1972824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1972827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1972831">return</span>&nbsp;<span class="ident" id="1972838">item</span><br>
<span class="lineno"></span><span class="op" id="1972843">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="1972846">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="1972902">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="1972943">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="1972994">func</span>&nbsp;<span class="op" id="1972999">(</span><span class="ident" id="1973000">d</span>&nbsp;<span class="op" id="1973002">*</span><span class="ident" id="1973003">decodeState</span><span class="op" id="1973014">)</span>&nbsp;<span class="ident" id="1973016">scanWhile</span><span class="op" id="1973025">(</span><span class="ident" id="1973026">op</span>&nbsp;<span class="builtintype" id="1973029">int</span><span class="op" id="1973032">)</span>&nbsp;<span class="builtintype" id="1973034">int</span>&nbsp;<span class="op" id="1973038">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973041">var</span>&nbsp;<span class="ident" id="1973045">newOp</span>&nbsp;<span class="builtintype" id="1973051">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973056">for</span>&nbsp;<span class="op" id="1973060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973064">if</span>&nbsp;<span class="ident" id="1973067">d</span><span class="op" id="1973068">.</span><span class="ident" id="1973069">off</span>&nbsp;<span class="op" id="1973073">&gt;=</span>&nbsp;<span class="builtinfunc" id="1973076">len</span><span class="op" id="1973079">(</span><span class="ident" id="1973080">d</span><span class="op" id="1973081">.</span><span class="ident" id="1973082">data</span><span class="op" id="1973086">)</span>&nbsp;<span class="op" id="1973088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973093">newOp</span>&nbsp;<span class="op" id="1973099">=</span>&nbsp;<span class="ident" id="1973101">d</span><span class="op" id="1973102">.</span><span class="ident" id="1973103">scan</span><span class="op" id="1973107">.</span><span class="ident" id="1973108">eof</span><span class="op" id="1973111">(</span><span class="op" id="1973112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973117">d</span><span class="op" id="1973118">.</span><span class="ident" id="1973119">off</span>&nbsp;<span class="op" id="1973123">=</span>&nbsp;<span class="builtinfunc" id="1973125">len</span><span class="op" id="1973128">(</span><span class="ident" id="1973129">d</span><span class="op" id="1973130">.</span><span class="ident" id="1973131">data</span><span class="op" id="1973135">)</span>&nbsp;<span class="op" id="1973137">+</span>&nbsp;<span class="num" id="1973139">1</span>&nbsp;<span class="comment" id="1973141">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1973176">}</span>&nbsp;<span class="keyword" id="1973178">else</span>&nbsp;<span class="op" id="1973183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973188">c</span>&nbsp;<span class="op" id="1973190">:=</span>&nbsp;<span class="builtintype" id="1973193">int</span><span class="op" id="1973196">(</span><span class="ident" id="1973197">d</span><span class="op" id="1973198">.</span><span class="ident" id="1973199">data</span><span class="op" id="1973203">[</span><span class="ident" id="1973204">d</span><span class="op" id="1973205">.</span><span class="ident" id="1973206">off</span><span class="op" id="1973209">]</span><span class="op" id="1973210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973215">d</span><span class="op" id="1973216">.</span><span class="ident" id="1973217">off</span><span class="op" id="1973220">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973226">newOp</span>&nbsp;<span class="op" id="1973232">=</span>&nbsp;<span class="ident" id="1973234">d</span><span class="op" id="1973235">.</span><span class="ident" id="1973236">scan</span><span class="op" id="1973240">.</span><span class="ident" id="1973241">step</span><span class="op" id="1973245">(</span><span class="op" id="1973246">&amp;</span><span class="ident" id="1973247">d</span><span class="op" id="1973248">.</span><span class="ident" id="1973249">scan</span><span class="op" id="1973253">,</span>&nbsp;<span class="ident" id="1973255">c</span><span class="op" id="1973256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1973260">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973264">if</span>&nbsp;<span class="ident" id="1973267">newOp</span>&nbsp;<span class="op" id="1973273">!=</span>&nbsp;<span class="ident" id="1973276">op</span>&nbsp;<span class="op" id="1973279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973284">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1973292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1973295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973298">return</span>&nbsp;<span class="ident" id="1973305">newOp</span><br>
<span class="lineno">245</span><span class="op" id="1973311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1973314">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="1973380">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="1973433">func</span>&nbsp;<span class="op" id="1973438">(</span><span class="ident" id="1973439">d</span>&nbsp;<span class="op" id="1973441">*</span><span class="ident" id="1973442">decodeState</span><span class="op" id="1973453">)</span>&nbsp;<span class="ident" id="1973455">value</span><span class="op" id="1973460">(</span><span class="ident" id="1973461">v</span>&nbsp;<span class="ident" id="1973463">reflect</span><span class="op" id="1973470">.</span><span class="ident" id="1973471">Value</span><span class="op" id="1973476">)</span>&nbsp;<span class="op" id="1973478">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973481">if</span>&nbsp;<span class="op" id="1973484">!</span><span class="ident" id="1973485">v</span><span class="op" id="1973486">.</span><span class="ident" id="1973487">IsValid</span><span class="op" id="1973494">(</span><span class="op" id="1973495">)</span>&nbsp;<span class="op" id="1973497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973501">_</span><span class="op" id="1973502">,</span>&nbsp;<span class="ident" id="1973504">rest</span><span class="op" id="1973508">,</span>&nbsp;<span class="ident" id="1973510">err</span>&nbsp;<span class="op" id="1973514">:=</span>&nbsp;<span class="ident" id="1973517">nextValue</span><span class="op" id="1973526">(</span><span class="ident" id="1973527">d</span><span class="op" id="1973528">.</span><span class="ident" id="1973529">data</span><span class="op" id="1973533">[</span><span class="ident" id="1973534">d</span><span class="op" id="1973535">.</span><span class="ident" id="1973536">off</span><span class="op" id="1973539">:</span><span class="op" id="1973540">]</span><span class="op" id="1973541">,</span>&nbsp;<span class="op" id="1973543">&amp;</span><span class="ident" id="1973544">d</span><span class="op" id="1973545">.</span><span class="ident" id="1973546">nextscan</span><span class="op" id="1973554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973558">if</span>&nbsp;<span class="ident" id="1973561">err</span>&nbsp;<span class="op" id="1973565">!=</span>&nbsp;<span class="builtintype" id="1973568">nil</span>&nbsp;<span class="op" id="1973572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973577">d</span><span class="op" id="1973578">.</span><span class="builtintype" id="1973579">error</span><span class="op" id="1973584">(</span><span class="ident" id="1973585">err</span><span class="op" id="1973588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1973592">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973596">d</span><span class="op" id="1973597">.</span><span class="ident" id="1973598">off</span>&nbsp;<span class="op" id="1973602">=</span>&nbsp;<span class="builtinfunc" id="1973604">len</span><span class="op" id="1973607">(</span><span class="ident" id="1973608">d</span><span class="op" id="1973609">.</span><span class="ident" id="1973610">data</span><span class="op" id="1973614">)</span>&nbsp;<span class="op" id="1973616">-</span>&nbsp;<span class="builtinfunc" id="1973618">len</span><span class="op" id="1973621">(</span><span class="ident" id="1973622">rest</span><span class="op" id="1973626">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1973631">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1973692">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1973754">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973808">if</span>&nbsp;<span class="ident" id="1973811">d</span><span class="op" id="1973812">.</span><span class="ident" id="1973813">scan</span><span class="op" id="1973817">.</span><span class="ident" id="1973818">redo</span>&nbsp;<span class="op" id="1973823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1973828">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973842">d</span><span class="op" id="1973843">.</span><span class="ident" id="1973844">scan</span><span class="op" id="1973848">.</span><span class="ident" id="1973849">redo</span>&nbsp;<span class="op" id="1973854">=</span>&nbsp;<span class="builtintype" id="1973856">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973865">d</span><span class="op" id="1973866">.</span><span class="ident" id="1973867">scan</span><span class="op" id="1973871">.</span><span class="ident" id="1973872">step</span>&nbsp;<span class="op" id="1973877">=</span>&nbsp;<span class="ident" id="1973879">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1973897">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973901">d</span><span class="op" id="1973902">.</span><span class="ident" id="1973903">scan</span><span class="op" id="1973907">.</span><span class="ident" id="1973908">step</span><span class="op" id="1973912">(</span><span class="op" id="1973913">&amp;</span><span class="ident" id="1973914">d</span><span class="op" id="1973915">.</span><span class="ident" id="1973916">scan</span><span class="op" id="1973920">,</span>&nbsp;<span class="string" id="1973922">&#39;&#34;&#39;</span><span class="op" id="1973925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973929">d</span><span class="op" id="1973930">.</span><span class="ident" id="1973931">scan</span><span class="op" id="1973935">.</span><span class="ident" id="1973936">step</span><span class="op" id="1973940">(</span><span class="op" id="1973941">&amp;</span><span class="ident" id="1973942">d</span><span class="op" id="1973943">.</span><span class="ident" id="1973944">scan</span><span class="op" id="1973948">,</span>&nbsp;<span class="string" id="1973950">&#39;&#34;&#39;</span><span class="op" id="1973953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1973958">n</span>&nbsp;<span class="op" id="1973960">:=</span>&nbsp;<span class="builtinfunc" id="1973963">len</span><span class="op" id="1973966">(</span><span class="ident" id="1973967">d</span><span class="op" id="1973968">.</span><span class="ident" id="1973969">scan</span><span class="op" id="1973973">.</span><span class="ident" id="1973974">parseState</span><span class="op" id="1973984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1973988">if</span>&nbsp;<span class="ident" id="1973991">n</span>&nbsp;<span class="op" id="1973993">&gt;</span>&nbsp;<span class="num" id="1973995">0</span>&nbsp;<span class="op" id="1973997">&amp;&amp;</span>&nbsp;<span class="ident" id="1974000">d</span><span class="op" id="1974001">.</span><span class="ident" id="1974002">scan</span><span class="op" id="1974006">.</span><span class="ident" id="1974007">parseState</span><span class="op" id="1974017">[</span><span class="ident" id="1974018">n</span><span class="op" id="1974019">-</span><span class="num" id="1974020">1</span><span class="op" id="1974021">]</span>&nbsp;<span class="op" id="1974023">==</span>&nbsp;<span class="ident" id="1974026">parseObjectKey</span>&nbsp;<span class="op" id="1974041">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1974046">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974112">d</span><span class="op" id="1974113">.</span><span class="ident" id="1974114">scan</span><span class="op" id="1974118">.</span><span class="ident" id="1974119">step</span><span class="op" id="1974123">(</span><span class="op" id="1974124">&amp;</span><span class="ident" id="1974125">d</span><span class="op" id="1974126">.</span><span class="ident" id="1974127">scan</span><span class="op" id="1974131">,</span>&nbsp;<span class="string" id="1974133">&#39;:&#39;</span><span class="op" id="1974136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974141">d</span><span class="op" id="1974142">.</span><span class="ident" id="1974143">scan</span><span class="op" id="1974147">.</span><span class="ident" id="1974148">step</span><span class="op" id="1974152">(</span><span class="op" id="1974153">&amp;</span><span class="ident" id="1974154">d</span><span class="op" id="1974155">.</span><span class="ident" id="1974156">scan</span><span class="op" id="1974160">,</span>&nbsp;<span class="string" id="1974162">&#39;&#34;&#39;</span><span class="op" id="1974165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974170">d</span><span class="op" id="1974171">.</span><span class="ident" id="1974172">scan</span><span class="op" id="1974176">.</span><span class="ident" id="1974177">step</span><span class="op" id="1974181">(</span><span class="op" id="1974182">&amp;</span><span class="ident" id="1974183">d</span><span class="op" id="1974184">.</span><span class="ident" id="1974185">scan</span><span class="op" id="1974189">,</span>&nbsp;<span class="string" id="1974191">&#39;&#34;&#39;</span><span class="op" id="1974194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974199">d</span><span class="op" id="1974200">.</span><span class="ident" id="1974201">scan</span><span class="op" id="1974205">.</span><span class="ident" id="1974206">step</span><span class="op" id="1974210">(</span><span class="op" id="1974211">&amp;</span><span class="ident" id="1974212">d</span><span class="op" id="1974213">.</span><span class="ident" id="1974214">scan</span><span class="op" id="1974218">,</span>&nbsp;<span class="string" id="1974220">&#39;}&#39;</span><span class="op" id="1974223">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1974227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974232">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1974240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974244">switch</span>&nbsp;<span class="ident" id="1974251">op</span>&nbsp;<span class="op" id="1974254">:=</span>&nbsp;<span class="ident" id="1974257">d</span><span class="op" id="1974258">.</span><span class="ident" id="1974259">scanWhile</span><span class="op" id="1974268">(</span><span class="ident" id="1974269">scanSkipSpace</span><span class="op" id="1974282">)</span><span class="op" id="1974283">;</span>&nbsp;<span class="ident" id="1974285">op</span>&nbsp;<span class="op" id="1974288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974291">default</span><span class="op" id="1974298">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974302">d</span><span class="op" id="1974303">.</span><span class="builtintype" id="1974304">error</span><span class="op" id="1974309">(</span><span class="ident" id="1974310">errPhase</span><span class="op" id="1974318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974322">case</span>&nbsp;<span class="ident" id="1974327">scanBeginArray</span><span class="op" id="1974341">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974345">d</span><span class="op" id="1974346">.</span><span class="ident" id="1974347">array</span><span class="op" id="1974352">(</span><span class="ident" id="1974353">v</span><span class="op" id="1974354">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974358">case</span>&nbsp;<span class="ident" id="1974363">scanBeginObject</span><span class="op" id="1974378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974382">d</span><span class="op" id="1974383">.</span><span class="ident" id="1974384">object</span><span class="op" id="1974390">(</span><span class="ident" id="1974391">v</span><span class="op" id="1974392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974396">case</span>&nbsp;<span class="ident" id="1974401">scanBeginLiteral</span><span class="op" id="1974417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974421">d</span><span class="op" id="1974422">.</span><span class="ident" id="1974423">literal</span><span class="op" id="1974430">(</span><span class="ident" id="1974431">v</span><span class="op" id="1974432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1974435">}</span><br>
<span class="lineno"></span><span class="op" id="1974437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="1974440">type</span>&nbsp;<span class="ident" id="1974445">unquotedValue</span>&nbsp;<span class="keyword" id="1974459">struct</span><span class="op" id="1974465">{</span><span class="op" id="1974466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1974469">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1974512">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="1974578">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="1974646">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="1974686">func</span>&nbsp;<span class="op" id="1974691">(</span><span class="ident" id="1974692">d</span>&nbsp;<span class="op" id="1974694">*</span><span class="ident" id="1974695">decodeState</span><span class="op" id="1974706">)</span>&nbsp;<span class="ident" id="1974708">valueQuoted</span><span class="op" id="1974719">(</span><span class="op" id="1974720">)</span>&nbsp;<span class="keyword" id="1974722">interface</span><span class="op" id="1974731">{</span><span class="op" id="1974732">}</span>&nbsp;<span class="op" id="1974734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974737">switch</span>&nbsp;<span class="ident" id="1974744">op</span>&nbsp;<span class="op" id="1974747">:=</span>&nbsp;<span class="ident" id="1974750">d</span><span class="op" id="1974751">.</span><span class="ident" id="1974752">scanWhile</span><span class="op" id="1974761">(</span><span class="ident" id="1974762">scanSkipSpace</span><span class="op" id="1974775">)</span><span class="op" id="1974776">;</span>&nbsp;<span class="ident" id="1974778">op</span>&nbsp;<span class="op" id="1974781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974784">default</span><span class="op" id="1974791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974795">d</span><span class="op" id="1974796">.</span><span class="builtintype" id="1974797">error</span><span class="op" id="1974802">(</span><span class="ident" id="1974803">errPhase</span><span class="op" id="1974811">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974815">case</span>&nbsp;<span class="ident" id="1974820">scanBeginArray</span><span class="op" id="1974834">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974838">d</span><span class="op" id="1974839">.</span><span class="ident" id="1974840">array</span><span class="op" id="1974845">(</span><span class="ident" id="1974846">reflect</span><span class="op" id="1974853">.</span><span class="ident" id="1974854">Value</span><span class="op" id="1974859">{</span><span class="op" id="1974860">}</span><span class="op" id="1974861">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974865">case</span>&nbsp;<span class="ident" id="1974870">scanBeginObject</span><span class="op" id="1974885">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1974889">d</span><span class="op" id="1974890">.</span><span class="ident" id="1974891">object</span><span class="op" id="1974897">(</span><span class="ident" id="1974898">reflect</span><span class="op" id="1974905">.</span><span class="ident" id="1974906">Value</span><span class="op" id="1974911">{</span><span class="op" id="1974912">}</span><span class="op" id="1974913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974917">case</span>&nbsp;<span class="ident" id="1974922">scanBeginLiteral</span><span class="op" id="1974938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974942">switch</span>&nbsp;<span class="ident" id="1974949">v</span>&nbsp;<span class="op" id="1974951">:=</span>&nbsp;<span class="ident" id="1974954">d</span><span class="op" id="1974955">.</span><span class="ident" id="1974956">literalInterface</span><span class="op" id="1974972">(</span><span class="op" id="1974973">)</span><span class="op" id="1974974">.</span><span class="op" id="1974975">(</span><span class="keyword" id="1974976">type</span><span class="op" id="1974980">)</span>&nbsp;<span class="op" id="1974982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1974986">case</span>&nbsp;<span class="builtintype" id="1974991">nil</span><span class="op" id="1974994">,</span>&nbsp;<span class="builtintype" id="1974996">string</span><span class="op" id="1975002">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975007">return</span>&nbsp;<span class="ident" id="1975014">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1975018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1975021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975024">return</span>&nbsp;<span class="ident" id="1975031">unquotedValue</span><span class="op" id="1975044">{</span><span class="op" id="1975045">}</span><br>
<span class="lineno"></span><span class="op" id="1975047">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="1975050">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="1975106">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="1975141">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="1975210">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="1975298">func</span>&nbsp;<span class="op" id="1975303">(</span><span class="ident" id="1975304">d</span>&nbsp;<span class="op" id="1975306">*</span><span class="ident" id="1975307">decodeState</span><span class="op" id="1975318">)</span>&nbsp;<span class="ident" id="1975320">indirect</span><span class="op" id="1975328">(</span><span class="ident" id="1975329">v</span>&nbsp;<span class="ident" id="1975331">reflect</span><span class="op" id="1975338">.</span><span class="ident" id="1975339">Value</span><span class="op" id="1975344">,</span>&nbsp;<span class="ident" id="1975346">decodingNull</span>&nbsp;<span class="builtintype" id="1975359">bool</span><span class="op" id="1975363">)</span>&nbsp;<span class="op" id="1975365">(</span><span class="ident" id="1975366">Unmarshaler</span><span class="op" id="1975377">,</span>&nbsp;<span class="ident" id="1975379">encoding</span><span class="op" id="1975387">.</span><span class="ident" id="1975388">TextUnmarshaler</span><span class="op" id="1975403">,</span>&nbsp;<span class="ident" id="1975405">reflect</span><span class="op" id="1975412">.</span><span class="ident" id="1975413">Value</span><span class="op" id="1975418">)</span>&nbsp;<span class="op" id="1975420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1975423">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1975468">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1975537">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975555">if</span>&nbsp;<span class="ident" id="1975558">v</span><span class="op" id="1975559">.</span><span class="ident" id="1975560">Kind</span><span class="op" id="1975564">(</span><span class="op" id="1975565">)</span>&nbsp;<span class="op" id="1975567">!=</span>&nbsp;<span class="ident" id="1975570">reflect</span><span class="op" id="1975577">.</span><span class="ident" id="1975578">Ptr</span>&nbsp;<span class="op" id="1975582">&amp;&amp;</span>&nbsp;<span class="ident" id="1975585">v</span><span class="op" id="1975586">.</span><span class="ident" id="1975587">Type</span><span class="op" id="1975591">(</span><span class="op" id="1975592">)</span><span class="op" id="1975593">.</span><span class="ident" id="1975594">Name</span><span class="op" id="1975598">(</span><span class="op" id="1975599">)</span>&nbsp;<span class="op" id="1975601">!=</span>&nbsp;<span class="string" id="1975604">&#34;&#34;</span>&nbsp;<span class="op" id="1975607">&amp;&amp;</span>&nbsp;<span class="ident" id="1975610">v</span><span class="op" id="1975611">.</span><span class="ident" id="1975612">CanAddr</span><span class="op" id="1975619">(</span><span class="op" id="1975620">)</span>&nbsp;<span class="op" id="1975622">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1975626">v</span>&nbsp;<span class="op" id="1975628">=</span>&nbsp;<span class="ident" id="1975630">v</span><span class="op" id="1975631">.</span><span class="ident" id="1975632">Addr</span><span class="op" id="1975636">(</span><span class="op" id="1975637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1975640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975643">for</span>&nbsp;<span class="op" id="1975647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1975651">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1975714">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975741">if</span>&nbsp;<span class="ident" id="1975744">v</span><span class="op" id="1975745">.</span><span class="ident" id="1975746">Kind</span><span class="op" id="1975750">(</span><span class="op" id="1975751">)</span>&nbsp;<span class="op" id="1975753">==</span>&nbsp;<span class="ident" id="1975756">reflect</span><span class="op" id="1975763">.</span><span class="ident" id="1975764">Interface</span>&nbsp;<span class="op" id="1975774">&amp;&amp;</span>&nbsp;<span class="op" id="1975777">!</span><span class="ident" id="1975778">v</span><span class="op" id="1975779">.</span><span class="ident" id="1975780">IsNil</span><span class="op" id="1975785">(</span><span class="op" id="1975786">)</span>&nbsp;<span class="op" id="1975788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1975793">e</span>&nbsp;<span class="op" id="1975795">:=</span>&nbsp;<span class="ident" id="1975798">v</span><span class="op" id="1975799">.</span><span class="ident" id="1975800">Elem</span><span class="op" id="1975804">(</span><span class="op" id="1975805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975810">if</span>&nbsp;<span class="ident" id="1975813">e</span><span class="op" id="1975814">.</span><span class="ident" id="1975815">Kind</span><span class="op" id="1975819">(</span><span class="op" id="1975820">)</span>&nbsp;<span class="op" id="1975822">==</span>&nbsp;<span class="ident" id="1975825">reflect</span><span class="op" id="1975832">.</span><span class="ident" id="1975833">Ptr</span>&nbsp;<span class="op" id="1975837">&amp;&amp;</span>&nbsp;<span class="op" id="1975840">!</span><span class="ident" id="1975841">e</span><span class="op" id="1975842">.</span><span class="ident" id="1975843">IsNil</span><span class="op" id="1975848">(</span><span class="op" id="1975849">)</span>&nbsp;<span class="op" id="1975851">&amp;&amp;</span>&nbsp;<span class="op" id="1975854">(</span><span class="op" id="1975855">!</span><span class="ident" id="1975856">decodingNull</span>&nbsp;<span class="op" id="1975869">||</span>&nbsp;<span class="ident" id="1975872">e</span><span class="op" id="1975873">.</span><span class="ident" id="1975874">Elem</span><span class="op" id="1975878">(</span><span class="op" id="1975879">)</span><span class="op" id="1975880">.</span><span class="ident" id="1975881">Kind</span><span class="op" id="1975885">(</span><span class="op" id="1975886">)</span>&nbsp;<span class="op" id="1975888">==</span>&nbsp;<span class="ident" id="1975891">reflect</span><span class="op" id="1975898">.</span><span class="ident" id="1975899">Ptr</span><span class="op" id="1975902">)</span>&nbsp;<span class="op" id="1975904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1975910">v</span>&nbsp;<span class="op" id="1975912">=</span>&nbsp;<span class="ident" id="1975914">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975920">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1975932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1975936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975941">if</span>&nbsp;<span class="ident" id="1975944">v</span><span class="op" id="1975945">.</span><span class="ident" id="1975946">Kind</span><span class="op" id="1975950">(</span><span class="op" id="1975951">)</span>&nbsp;<span class="op" id="1975953">!=</span>&nbsp;<span class="ident" id="1975956">reflect</span><span class="op" id="1975963">.</span><span class="ident" id="1975964">Ptr</span>&nbsp;<span class="op" id="1975968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975973">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1975981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1975986">if</span>&nbsp;<span class="ident" id="1975989">v</span><span class="op" id="1975990">.</span><span class="ident" id="1975991">Elem</span><span class="op" id="1975995">(</span><span class="op" id="1975996">)</span><span class="op" id="1975997">.</span><span class="ident" id="1975998">Kind</span><span class="op" id="1976002">(</span><span class="op" id="1976003">)</span>&nbsp;<span class="op" id="1976005">!=</span>&nbsp;<span class="ident" id="1976008">reflect</span><span class="op" id="1976015">.</span><span class="ident" id="1976016">Ptr</span>&nbsp;<span class="op" id="1976020">&amp;&amp;</span>&nbsp;<span class="ident" id="1976023">decodingNull</span>&nbsp;<span class="op" id="1976036">&amp;&amp;</span>&nbsp;<span class="ident" id="1976039">v</span><span class="op" id="1976040">.</span><span class="ident" id="1976041">CanSet</span><span class="op" id="1976047">(</span><span class="op" id="1976048">)</span>&nbsp;<span class="op" id="1976050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976055">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976063">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976067">if</span>&nbsp;<span class="ident" id="1976070">v</span><span class="op" id="1976071">.</span><span class="ident" id="1976072">IsNil</span><span class="op" id="1976077">(</span><span class="op" id="1976078">)</span>&nbsp;<span class="op" id="1976080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976085">v</span><span class="op" id="1976086">.</span><span class="ident" id="1976087">Set</span><span class="op" id="1976090">(</span><span class="ident" id="1976091">reflect</span><span class="op" id="1976098">.</span><span class="ident" id="1976099">New</span><span class="op" id="1976102">(</span><span class="ident" id="1976103">v</span><span class="op" id="1976104">.</span><span class="ident" id="1976105">Type</span><span class="op" id="1976109">(</span><span class="op" id="1976110">)</span><span class="op" id="1976111">.</span><span class="ident" id="1976112">Elem</span><span class="op" id="1976116">(</span><span class="op" id="1976117">)</span><span class="op" id="1976118">)</span><span class="op" id="1976119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976127">if</span>&nbsp;<span class="ident" id="1976130">v</span><span class="op" id="1976131">.</span><span class="ident" id="1976132">Type</span><span class="op" id="1976136">(</span><span class="op" id="1976137">)</span><span class="op" id="1976138">.</span><span class="ident" id="1976139">NumMethod</span><span class="op" id="1976148">(</span><span class="op" id="1976149">)</span>&nbsp;<span class="op" id="1976151">&gt;</span>&nbsp;<span class="num" id="1976153">0</span>&nbsp;<span class="op" id="1976155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976160">if</span>&nbsp;<span class="ident" id="1976163">u</span><span class="op" id="1976164">,</span>&nbsp;<span class="ident" id="1976166">ok</span>&nbsp;<span class="op" id="1976169">:=</span>&nbsp;<span class="ident" id="1976172">v</span><span class="op" id="1976173">.</span><span class="ident" id="1976174">Interface</span><span class="op" id="1976183">(</span><span class="op" id="1976184">)</span><span class="op" id="1976185">.</span><span class="op" id="1976186">(</span><span class="ident" id="1976187">Unmarshaler</span><span class="op" id="1976198">)</span><span class="op" id="1976199">;</span>&nbsp;<span class="ident" id="1976201">ok</span>&nbsp;<span class="op" id="1976204">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976210">return</span>&nbsp;<span class="ident" id="1976217">u</span><span class="op" id="1976218">,</span>&nbsp;<span class="builtintype" id="1976220">nil</span><span class="op" id="1976223">,</span>&nbsp;<span class="ident" id="1976225">reflect</span><span class="op" id="1976232">.</span><span class="ident" id="1976233">Value</span><span class="op" id="1976238">{</span><span class="op" id="1976239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976249">if</span>&nbsp;<span class="ident" id="1976252">u</span><span class="op" id="1976253">,</span>&nbsp;<span class="ident" id="1976255">ok</span>&nbsp;<span class="op" id="1976258">:=</span>&nbsp;<span class="ident" id="1976261">v</span><span class="op" id="1976262">.</span><span class="ident" id="1976263">Interface</span><span class="op" id="1976272">(</span><span class="op" id="1976273">)</span><span class="op" id="1976274">.</span><span class="op" id="1976275">(</span><span class="ident" id="1976276">encoding</span><span class="op" id="1976284">.</span><span class="ident" id="1976285">TextUnmarshaler</span><span class="op" id="1976300">)</span><span class="op" id="1976301">;</span>&nbsp;<span class="ident" id="1976303">ok</span>&nbsp;<span class="op" id="1976306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976312">return</span>&nbsp;<span class="builtintype" id="1976319">nil</span><span class="op" id="1976322">,</span>&nbsp;<span class="ident" id="1976324">u</span><span class="op" id="1976325">,</span>&nbsp;<span class="ident" id="1976327">reflect</span><span class="op" id="1976334">.</span><span class="ident" id="1976335">Value</span><span class="op" id="1976340">{</span><span class="op" id="1976341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976346">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976354">v</span>&nbsp;<span class="op" id="1976356">=</span>&nbsp;<span class="ident" id="1976358">v</span><span class="op" id="1976359">.</span><span class="ident" id="1976360">Elem</span><span class="op" id="1976364">(</span><span class="op" id="1976365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976371">return</span>&nbsp;<span class="builtintype" id="1976378">nil</span><span class="op" id="1976381">,</span>&nbsp;<span class="builtintype" id="1976383">nil</span><span class="op" id="1976386">,</span>&nbsp;<span class="ident" id="1976388">v</span><br>
<span class="lineno"></span><span class="op" id="1976390">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="1976393">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="1976470">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="1976530">func</span>&nbsp;<span class="op" id="1976535">(</span><span class="ident" id="1976536">d</span>&nbsp;<span class="op" id="1976538">*</span><span class="ident" id="1976539">decodeState</span><span class="op" id="1976550">)</span>&nbsp;<span class="ident" id="1976552">array</span><span class="op" id="1976557">(</span><span class="ident" id="1976558">v</span>&nbsp;<span class="ident" id="1976560">reflect</span><span class="op" id="1976567">.</span><span class="ident" id="1976568">Value</span><span class="op" id="1976573">)</span>&nbsp;<span class="op" id="1976575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1976578">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976605">u</span><span class="op" id="1976606">,</span>&nbsp;<span class="ident" id="1976608">ut</span><span class="op" id="1976610">,</span>&nbsp;<span class="ident" id="1976612">pv</span>&nbsp;<span class="op" id="1976615">:=</span>&nbsp;<span class="ident" id="1976618">d</span><span class="op" id="1976619">.</span><span class="ident" id="1976620">indirect</span><span class="op" id="1976628">(</span><span class="ident" id="1976629">v</span><span class="op" id="1976630">,</span>&nbsp;<span class="builtintype" id="1976632">false</span><span class="op" id="1976637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976640">if</span>&nbsp;<span class="ident" id="1976643">u</span>&nbsp;<span class="op" id="1976645">!=</span>&nbsp;<span class="builtintype" id="1976648">nil</span>&nbsp;<span class="op" id="1976652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976656">d</span><span class="op" id="1976657">.</span><span class="ident" id="1976658">off</span><span class="op" id="1976661">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976666">err</span>&nbsp;<span class="op" id="1976670">:=</span>&nbsp;<span class="ident" id="1976673">u</span><span class="op" id="1976674">.</span><span class="ident" id="1976675">UnmarshalJSON</span><span class="op" id="1976688">(</span><span class="ident" id="1976689">d</span><span class="op" id="1976690">.</span><span class="ident" id="1976691">next</span><span class="op" id="1976695">(</span><span class="op" id="1976696">)</span><span class="op" id="1976697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976701">if</span>&nbsp;<span class="ident" id="1976704">err</span>&nbsp;<span class="op" id="1976708">!=</span>&nbsp;<span class="builtintype" id="1976711">nil</span>&nbsp;<span class="op" id="1976715">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976720">d</span><span class="op" id="1976721">.</span><span class="builtintype" id="1976722">error</span><span class="op" id="1976727">(</span><span class="ident" id="1976728">err</span><span class="op" id="1976731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976739">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976750">if</span>&nbsp;<span class="ident" id="1976753">ut</span>&nbsp;<span class="op" id="1976756">!=</span>&nbsp;<span class="builtintype" id="1976759">nil</span>&nbsp;<span class="op" id="1976763">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976767">d</span><span class="op" id="1976768">.</span><span class="ident" id="1976769">saveError</span><span class="op" id="1976778">(</span><span class="op" id="1976779">&amp;</span><span class="ident" id="1976780">UnmarshalTypeError</span><span class="op" id="1976798">{</span><span class="string" id="1976799">&#34;array&#34;</span><span class="op" id="1976806">,</span>&nbsp;<span class="ident" id="1976808">v</span><span class="op" id="1976809">.</span><span class="ident" id="1976810">Type</span><span class="op" id="1976814">(</span><span class="op" id="1976815">)</span><span class="op" id="1976816">}</span><span class="op" id="1976817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976821">d</span><span class="op" id="1976822">.</span><span class="ident" id="1976823">off</span><span class="op" id="1976826">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976831">d</span><span class="op" id="1976832">.</span><span class="ident" id="1976833">next</span><span class="op" id="1976837">(</span><span class="op" id="1976838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976842">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1976850">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1976854">v</span>&nbsp;<span class="op" id="1976856">=</span>&nbsp;<span class="ident" id="1976858">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1976863">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976889">switch</span>&nbsp;<span class="ident" id="1976896">v</span><span class="op" id="1976897">.</span><span class="ident" id="1976898">Kind</span><span class="op" id="1976902">(</span><span class="op" id="1976903">)</span>&nbsp;<span class="op" id="1976905">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976908">case</span>&nbsp;<span class="ident" id="1976913">reflect</span><span class="op" id="1976920">.</span><span class="ident" id="1976921">Interface</span><span class="op" id="1976930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1976934">if</span>&nbsp;<span class="ident" id="1976937">v</span><span class="op" id="1976938">.</span><span class="ident" id="1976939">NumMethod</span><span class="op" id="1976948">(</span><span class="op" id="1976949">)</span>&nbsp;<span class="op" id="1976951">==</span>&nbsp;<span class="num" id="1976954">0</span>&nbsp;<span class="op" id="1976956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1976961">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977025">v</span><span class="op" id="1977026">.</span><span class="ident" id="1977027">Set</span><span class="op" id="1977030">(</span><span class="ident" id="1977031">reflect</span><span class="op" id="1977038">.</span><span class="ident" id="1977039">ValueOf</span><span class="op" id="1977046">(</span><span class="ident" id="1977047">d</span><span class="op" id="1977048">.</span><span class="ident" id="1977049">arrayInterface</span><span class="op" id="1977063">(</span><span class="op" id="1977064">)</span><span class="op" id="1977065">)</span><span class="op" id="1977066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977071">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977084">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977113">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977126">default</span><span class="op" id="1977133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977137">d</span><span class="op" id="1977138">.</span><span class="ident" id="1977139">saveError</span><span class="op" id="1977148">(</span><span class="op" id="1977149">&amp;</span><span class="ident" id="1977150">UnmarshalTypeError</span><span class="op" id="1977168">{</span><span class="string" id="1977169">&#34;array&#34;</span><span class="op" id="1977176">,</span>&nbsp;<span class="ident" id="1977178">v</span><span class="op" id="1977179">.</span><span class="ident" id="1977180">Type</span><span class="op" id="1977184">(</span><span class="op" id="1977185">)</span><span class="op" id="1977186">}</span><span class="op" id="1977187">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977191">d</span><span class="op" id="1977192">.</span><span class="ident" id="1977193">off</span><span class="op" id="1977196">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977201">d</span><span class="op" id="1977202">.</span><span class="ident" id="1977203">next</span><span class="op" id="1977207">(</span><span class="op" id="1977208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977212">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977220">case</span>&nbsp;<span class="ident" id="1977225">reflect</span><span class="op" id="1977232">.</span><span class="ident" id="1977233">Array</span><span class="op" id="1977238">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977241">case</span>&nbsp;<span class="ident" id="1977246">reflect</span><span class="op" id="1977253">.</span><span class="ident" id="1977254">Slice</span><span class="op" id="1977259">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977263">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977274">i</span>&nbsp;<span class="op" id="1977276">:=</span>&nbsp;<span class="num" id="1977279">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977282">for</span>&nbsp;<span class="op" id="1977286">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977290">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977350">op</span>&nbsp;<span class="op" id="1977353">:=</span>&nbsp;<span class="ident" id="1977356">d</span><span class="op" id="1977357">.</span><span class="ident" id="1977358">scanWhile</span><span class="op" id="1977367">(</span><span class="ident" id="1977368">scanSkipSpace</span><span class="op" id="1977381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977385">if</span>&nbsp;<span class="ident" id="1977388">op</span>&nbsp;<span class="op" id="1977391">==</span>&nbsp;<span class="ident" id="1977394">scanEndArray</span>&nbsp;<span class="op" id="1977407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977412">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977420">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977425">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977481">d</span><span class="op" id="1977482">.</span><span class="ident" id="1977483">off</span><span class="op" id="1977486">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977491">d</span><span class="op" id="1977492">.</span><span class="ident" id="1977493">scan</span><span class="op" id="1977497">.</span><span class="ident" id="1977498">undo</span><span class="op" id="1977502">(</span><span class="ident" id="1977503">op</span><span class="op" id="1977505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977510">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977559">if</span>&nbsp;<span class="ident" id="1977562">v</span><span class="op" id="1977563">.</span><span class="ident" id="1977564">Kind</span><span class="op" id="1977568">(</span><span class="op" id="1977569">)</span>&nbsp;<span class="op" id="1977571">==</span>&nbsp;<span class="ident" id="1977574">reflect</span><span class="op" id="1977581">.</span><span class="ident" id="1977582">Slice</span>&nbsp;<span class="op" id="1977588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977593">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977623">if</span>&nbsp;<span class="ident" id="1977626">i</span>&nbsp;<span class="op" id="1977628">&gt;=</span>&nbsp;<span class="ident" id="1977631">v</span><span class="op" id="1977632">.</span><span class="ident" id="1977633">Cap</span><span class="op" id="1977636">(</span><span class="op" id="1977637">)</span>&nbsp;<span class="op" id="1977639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977645">newcap</span>&nbsp;<span class="op" id="1977652">:=</span>&nbsp;<span class="ident" id="1977655">v</span><span class="op" id="1977656">.</span><span class="ident" id="1977657">Cap</span><span class="op" id="1977660">(</span><span class="op" id="1977661">)</span>&nbsp;<span class="op" id="1977663">+</span>&nbsp;<span class="ident" id="1977665">v</span><span class="op" id="1977666">.</span><span class="ident" id="1977667">Cap</span><span class="op" id="1977670">(</span><span class="op" id="1977671">)</span><span class="op" id="1977672">/</span><span class="num" id="1977673">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977679">if</span>&nbsp;<span class="ident" id="1977682">newcap</span>&nbsp;<span class="op" id="1977689">&lt;</span>&nbsp;<span class="num" id="1977691">4</span>&nbsp;<span class="op" id="1977693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977700">newcap</span>&nbsp;<span class="op" id="1977707">=</span>&nbsp;<span class="num" id="1977709">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977721">newv</span>&nbsp;<span class="op" id="1977726">:=</span>&nbsp;<span class="ident" id="1977729">reflect</span><span class="op" id="1977736">.</span><span class="ident" id="1977737">MakeSlice</span><span class="op" id="1977746">(</span><span class="ident" id="1977747">v</span><span class="op" id="1977748">.</span><span class="ident" id="1977749">Type</span><span class="op" id="1977753">(</span><span class="op" id="1977754">)</span><span class="op" id="1977755">,</span>&nbsp;<span class="ident" id="1977757">v</span><span class="op" id="1977758">.</span><span class="ident" id="1977759">Len</span><span class="op" id="1977762">(</span><span class="op" id="1977763">)</span><span class="op" id="1977764">,</span>&nbsp;<span class="ident" id="1977766">newcap</span><span class="op" id="1977772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977778">reflect</span><span class="op" id="1977785">.</span><span class="ident" id="1977786">Copy</span><span class="op" id="1977790">(</span><span class="ident" id="1977791">newv</span><span class="op" id="1977795">,</span>&nbsp;<span class="ident" id="1977797">v</span><span class="op" id="1977798">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977804">v</span><span class="op" id="1977805">.</span><span class="ident" id="1977806">Set</span><span class="op" id="1977809">(</span><span class="ident" id="1977810">newv</span><span class="op" id="1977814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977824">if</span>&nbsp;<span class="ident" id="1977827">i</span>&nbsp;<span class="op" id="1977829">&gt;=</span>&nbsp;<span class="ident" id="1977832">v</span><span class="op" id="1977833">.</span><span class="ident" id="1977834">Len</span><span class="op" id="1977837">(</span><span class="op" id="1977838">)</span>&nbsp;<span class="op" id="1977840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977846">v</span><span class="op" id="1977847">.</span><span class="ident" id="1977848">SetLen</span><span class="op" id="1977854">(</span><span class="ident" id="1977855">i</span>&nbsp;<span class="op" id="1977857">+</span>&nbsp;<span class="num" id="1977859">1</span><span class="op" id="1977860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977865">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1977874">if</span>&nbsp;<span class="ident" id="1977877">i</span>&nbsp;<span class="op" id="1977879">&lt;</span>&nbsp;<span class="ident" id="1977881">v</span><span class="op" id="1977882">.</span><span class="ident" id="1977883">Len</span><span class="op" id="1977886">(</span><span class="op" id="1977887">)</span>&nbsp;<span class="op" id="1977889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977894">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977921">d</span><span class="op" id="1977922">.</span><span class="ident" id="1977923">value</span><span class="op" id="1977928">(</span><span class="ident" id="1977929">v</span><span class="op" id="1977930">.</span><span class="ident" id="1977931">Index</span><span class="op" id="1977936">(</span><span class="ident" id="1977937">i</span><span class="op" id="1977938">)</span><span class="op" id="1977939">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1977943">}</span>&nbsp;<span class="keyword" id="1977945">else</span>&nbsp;<span class="op" id="1977950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1977955">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1977991">d</span><span class="op" id="1977992">.</span><span class="ident" id="1977993">value</span><span class="op" id="1977998">(</span><span class="ident" id="1977999">reflect</span><span class="op" id="1978006">.</span><span class="ident" id="1978007">Value</span><span class="op" id="1978012">{</span><span class="op" id="1978013">}</span><span class="op" id="1978014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978022">i</span><span class="op" id="1978023">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1978029">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978061">op</span>&nbsp;<span class="op" id="1978064">=</span>&nbsp;<span class="ident" id="1978066">d</span><span class="op" id="1978067">.</span><span class="ident" id="1978068">scanWhile</span><span class="op" id="1978077">(</span><span class="ident" id="1978078">scanSkipSpace</span><span class="op" id="1978091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978095">if</span>&nbsp;<span class="ident" id="1978098">op</span>&nbsp;<span class="op" id="1978101">==</span>&nbsp;<span class="ident" id="1978104">scanEndArray</span>&nbsp;<span class="op" id="1978117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978122">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978134">if</span>&nbsp;<span class="ident" id="1978137">op</span>&nbsp;<span class="op" id="1978140">!=</span>&nbsp;<span class="ident" id="1978143">scanArrayValue</span>&nbsp;<span class="op" id="1978158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978163">d</span><span class="op" id="1978164">.</span><span class="builtintype" id="1978165">error</span><span class="op" id="1978170">(</span><span class="ident" id="1978171">errPhase</span><span class="op" id="1978179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978186">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978190">if</span>&nbsp;<span class="ident" id="1978193">i</span>&nbsp;<span class="op" id="1978195">&lt;</span>&nbsp;<span class="ident" id="1978197">v</span><span class="op" id="1978198">.</span><span class="ident" id="1978199">Len</span><span class="op" id="1978202">(</span><span class="op" id="1978203">)</span>&nbsp;<span class="op" id="1978205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978209">if</span>&nbsp;<span class="ident" id="1978212">v</span><span class="op" id="1978213">.</span><span class="ident" id="1978214">Kind</span><span class="op" id="1978218">(</span><span class="op" id="1978219">)</span>&nbsp;<span class="op" id="1978221">==</span>&nbsp;<span class="ident" id="1978224">reflect</span><span class="op" id="1978231">.</span><span class="ident" id="1978232">Array</span>&nbsp;<span class="op" id="1978238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1978243">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978272">z</span>&nbsp;<span class="op" id="1978274">:=</span>&nbsp;<span class="ident" id="1978277">reflect</span><span class="op" id="1978284">.</span><span class="ident" id="1978285">Zero</span><span class="op" id="1978289">(</span><span class="ident" id="1978290">v</span><span class="op" id="1978291">.</span><span class="ident" id="1978292">Type</span><span class="op" id="1978296">(</span><span class="op" id="1978297">)</span><span class="op" id="1978298">.</span><span class="ident" id="1978299">Elem</span><span class="op" id="1978303">(</span><span class="op" id="1978304">)</span><span class="op" id="1978305">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978310">for</span>&nbsp;<span class="op" id="1978314">;</span>&nbsp;<span class="ident" id="1978316">i</span>&nbsp;<span class="op" id="1978318">&lt;</span>&nbsp;<span class="ident" id="1978320">v</span><span class="op" id="1978321">.</span><span class="ident" id="1978322">Len</span><span class="op" id="1978325">(</span><span class="op" id="1978326">)</span><span class="op" id="1978327">;</span>&nbsp;<span class="ident" id="1978329">i</span><span class="op" id="1978330">++</span>&nbsp;<span class="op" id="1978333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978339">v</span><span class="op" id="1978340">.</span><span class="ident" id="1978341">Index</span><span class="op" id="1978346">(</span><span class="ident" id="1978347">i</span><span class="op" id="1978348">)</span><span class="op" id="1978349">.</span><span class="ident" id="1978350">Set</span><span class="op" id="1978353">(</span><span class="ident" id="1978354">z</span><span class="op" id="1978355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978364">}</span>&nbsp;<span class="keyword" id="1978366">else</span>&nbsp;<span class="op" id="1978371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978376">v</span><span class="op" id="1978377">.</span><span class="ident" id="1978378">SetLen</span><span class="op" id="1978384">(</span><span class="ident" id="1978385">i</span><span class="op" id="1978386">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978396">if</span>&nbsp;<span class="ident" id="1978399">i</span>&nbsp;<span class="op" id="1978401">==</span>&nbsp;<span class="num" id="1978404">0</span>&nbsp;<span class="op" id="1978406">&amp;&amp;</span>&nbsp;<span class="ident" id="1978409">v</span><span class="op" id="1978410">.</span><span class="ident" id="1978411">Kind</span><span class="op" id="1978415">(</span><span class="op" id="1978416">)</span>&nbsp;<span class="op" id="1978418">==</span>&nbsp;<span class="ident" id="1978421">reflect</span><span class="op" id="1978428">.</span><span class="ident" id="1978429">Slice</span>&nbsp;<span class="op" id="1978435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978439">v</span><span class="op" id="1978440">.</span><span class="ident" id="1978441">Set</span><span class="op" id="1978444">(</span><span class="ident" id="1978445">reflect</span><span class="op" id="1978452">.</span><span class="ident" id="1978453">MakeSlice</span><span class="op" id="1978462">(</span><span class="ident" id="1978463">v</span><span class="op" id="1978464">.</span><span class="ident" id="1978465">Type</span><span class="op" id="1978469">(</span><span class="op" id="1978470">)</span><span class="op" id="1978471">,</span>&nbsp;<span class="num" id="1978473">0</span><span class="op" id="1978474">,</span>&nbsp;<span class="num" id="1978476">0</span><span class="op" id="1978477">)</span><span class="op" id="1978478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978481">}</span><br>
<span class="lineno">470</span><span class="op" id="1978483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1978486">var</span>&nbsp;<span class="ident" id="1978490">nullLiteral</span>&nbsp;<span class="op" id="1978502">=</span>&nbsp;<span class="op" id="1978504">[</span><span class="op" id="1978505">]</span><span class="builtintype" id="1978506">byte</span><span class="op" id="1978510">(</span><span class="string" id="1978511">&#34;null&#34;</span><span class="op" id="1978517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1978520">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="1978599">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="1978660">func</span>&nbsp;<span class="op" id="1978665">(</span><span class="ident" id="1978666">d</span>&nbsp;<span class="op" id="1978668">*</span><span class="ident" id="1978669">decodeState</span><span class="op" id="1978680">)</span>&nbsp;<span class="ident" id="1978682">object</span><span class="op" id="1978688">(</span><span class="ident" id="1978689">v</span>&nbsp;<span class="ident" id="1978691">reflect</span><span class="op" id="1978698">.</span><span class="ident" id="1978699">Value</span><span class="op" id="1978704">)</span>&nbsp;<span class="op" id="1978706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1978709">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978736">u</span><span class="op" id="1978737">,</span>&nbsp;<span class="ident" id="1978739">ut</span><span class="op" id="1978741">,</span>&nbsp;<span class="ident" id="1978743">pv</span>&nbsp;<span class="op" id="1978746">:=</span>&nbsp;<span class="ident" id="1978749">d</span><span class="op" id="1978750">.</span><span class="ident" id="1978751">indirect</span><span class="op" id="1978759">(</span><span class="ident" id="1978760">v</span><span class="op" id="1978761">,</span>&nbsp;<span class="builtintype" id="1978763">false</span><span class="op" id="1978768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978771">if</span>&nbsp;<span class="ident" id="1978774">u</span>&nbsp;<span class="op" id="1978776">!=</span>&nbsp;<span class="builtintype" id="1978779">nil</span>&nbsp;<span class="op" id="1978783">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978787">d</span><span class="op" id="1978788">.</span><span class="ident" id="1978789">off</span><span class="op" id="1978792">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978797">err</span>&nbsp;<span class="op" id="1978801">:=</span>&nbsp;<span class="ident" id="1978804">u</span><span class="op" id="1978805">.</span><span class="ident" id="1978806">UnmarshalJSON</span><span class="op" id="1978819">(</span><span class="ident" id="1978820">d</span><span class="op" id="1978821">.</span><span class="ident" id="1978822">next</span><span class="op" id="1978826">(</span><span class="op" id="1978827">)</span><span class="op" id="1978828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978832">if</span>&nbsp;<span class="ident" id="1978835">err</span>&nbsp;<span class="op" id="1978839">!=</span>&nbsp;<span class="builtintype" id="1978842">nil</span>&nbsp;<span class="op" id="1978846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978851">d</span><span class="op" id="1978852">.</span><span class="builtintype" id="1978853">error</span><span class="op" id="1978858">(</span><span class="ident" id="1978859">err</span><span class="op" id="1978862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978866">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978870">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1978878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1978881">if</span>&nbsp;<span class="ident" id="1978884">ut</span>&nbsp;<span class="op" id="1978887">!=</span>&nbsp;<span class="builtintype" id="1978890">nil</span>&nbsp;<span class="op" id="1978894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978898">d</span><span class="op" id="1978899">.</span><span class="ident" id="1978900">saveError</span><span class="op" id="1978909">(</span><span class="op" id="1978910">&amp;</span><span class="ident" id="1978911">UnmarshalTypeError</span><span class="op" id="1978929">{</span><span class="string" id="1978930">&#34;object&#34;</span><span class="op" id="1978938">,</span>&nbsp;<span class="ident" id="1978940">v</span><span class="op" id="1978941">.</span><span class="ident" id="1978942">Type</span><span class="op" id="1978946">(</span><span class="op" id="1978947">)</span><span class="op" id="1978948">}</span><span class="op" id="1978949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978953">d</span><span class="op" id="1978954">.</span><span class="ident" id="1978955">off</span><span class="op" id="1978958">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1978963">d</span><span class="op" id="1978964">.</span><span class="ident" id="1978965">next</span><span class="op" id="1978969">(</span><span class="op" id="1978970">)</span>&nbsp;<span class="comment" id="1978972">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979000">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979011">v</span>&nbsp;<span class="op" id="1979013">=</span>&nbsp;<span class="ident" id="1979015">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1979020">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979082">if</span>&nbsp;<span class="ident" id="1979085">v</span><span class="op" id="1979086">.</span><span class="ident" id="1979087">Kind</span><span class="op" id="1979091">(</span><span class="op" id="1979092">)</span>&nbsp;<span class="op" id="1979094">==</span>&nbsp;<span class="ident" id="1979097">reflect</span><span class="op" id="1979104">.</span><span class="ident" id="1979105">Interface</span>&nbsp;<span class="op" id="1979115">&amp;&amp;</span>&nbsp;<span class="ident" id="1979118">v</span><span class="op" id="1979119">.</span><span class="ident" id="1979120">NumMethod</span><span class="op" id="1979129">(</span><span class="op" id="1979130">)</span>&nbsp;<span class="op" id="1979132">==</span>&nbsp;<span class="num" id="1979135">0</span>&nbsp;<span class="op" id="1979137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979141">v</span><span class="op" id="1979142">.</span><span class="ident" id="1979143">Set</span><span class="op" id="1979146">(</span><span class="ident" id="1979147">reflect</span><span class="op" id="1979154">.</span><span class="ident" id="1979155">ValueOf</span><span class="op" id="1979162">(</span><span class="ident" id="1979163">d</span><span class="op" id="1979164">.</span><span class="ident" id="1979165">objectInterface</span><span class="op" id="1979180">(</span><span class="op" id="1979181">)</span><span class="op" id="1979182">)</span><span class="op" id="1979183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979187">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979195">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1979199">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979248">switch</span>&nbsp;<span class="ident" id="1979255">v</span><span class="op" id="1979256">.</span><span class="ident" id="1979257">Kind</span><span class="op" id="1979261">(</span><span class="op" id="1979262">)</span>&nbsp;<span class="op" id="1979264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979267">case</span>&nbsp;<span class="ident" id="1979272">reflect</span><span class="op" id="1979279">.</span><span class="ident" id="1979280">Map</span><span class="op" id="1979283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1979287">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979318">t</span>&nbsp;<span class="op" id="1979320">:=</span>&nbsp;<span class="ident" id="1979323">v</span><span class="op" id="1979324">.</span><span class="ident" id="1979325">Type</span><span class="op" id="1979329">(</span><span class="op" id="1979330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979334">if</span>&nbsp;<span class="ident" id="1979337">t</span><span class="op" id="1979338">.</span><span class="ident" id="1979339">Key</span><span class="op" id="1979342">(</span><span class="op" id="1979343">)</span><span class="op" id="1979344">.</span><span class="ident" id="1979345">Kind</span><span class="op" id="1979349">(</span><span class="op" id="1979350">)</span>&nbsp;<span class="op" id="1979352">!=</span>&nbsp;<span class="ident" id="1979355">reflect</span><span class="op" id="1979362">.</span><span class="ident" id="1979363">String</span>&nbsp;<span class="op" id="1979370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979375">d</span><span class="op" id="1979376">.</span><span class="ident" id="1979377">saveError</span><span class="op" id="1979386">(</span><span class="op" id="1979387">&amp;</span><span class="ident" id="1979388">UnmarshalTypeError</span><span class="op" id="1979406">{</span><span class="string" id="1979407">&#34;object&#34;</span><span class="op" id="1979415">,</span>&nbsp;<span class="ident" id="1979417">v</span><span class="op" id="1979418">.</span><span class="ident" id="1979419">Type</span><span class="op" id="1979423">(</span><span class="op" id="1979424">)</span><span class="op" id="1979425">}</span><span class="op" id="1979426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979431">d</span><span class="op" id="1979432">.</span><span class="ident" id="1979433">off</span><span class="op" id="1979436">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979442">d</span><span class="op" id="1979443">.</span><span class="ident" id="1979444">next</span><span class="op" id="1979448">(</span><span class="op" id="1979449">)</span>&nbsp;<span class="comment" id="1979451">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979480">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979493">if</span>&nbsp;<span class="ident" id="1979496">v</span><span class="op" id="1979497">.</span><span class="ident" id="1979498">IsNil</span><span class="op" id="1979503">(</span><span class="op" id="1979504">)</span>&nbsp;<span class="op" id="1979506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979511">v</span><span class="op" id="1979512">.</span><span class="ident" id="1979513">Set</span><span class="op" id="1979516">(</span><span class="ident" id="1979517">reflect</span><span class="op" id="1979524">.</span><span class="ident" id="1979525">MakeMap</span><span class="op" id="1979532">(</span><span class="ident" id="1979533">t</span><span class="op" id="1979534">)</span><span class="op" id="1979535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979539">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979542">case</span>&nbsp;<span class="ident" id="1979547">reflect</span><span class="op" id="1979554">.</span><span class="ident" id="1979555">Struct</span><span class="op" id="1979561">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979565">default</span><span class="op" id="1979572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979576">d</span><span class="op" id="1979577">.</span><span class="ident" id="1979578">saveError</span><span class="op" id="1979587">(</span><span class="op" id="1979588">&amp;</span><span class="ident" id="1979589">UnmarshalTypeError</span><span class="op" id="1979607">{</span><span class="string" id="1979608">&#34;object&#34;</span><span class="op" id="1979616">,</span>&nbsp;<span class="ident" id="1979618">v</span><span class="op" id="1979619">.</span><span class="ident" id="1979620">Type</span><span class="op" id="1979624">(</span><span class="op" id="1979625">)</span><span class="op" id="1979626">}</span><span class="op" id="1979627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979631">d</span><span class="op" id="1979632">.</span><span class="ident" id="1979633">off</span><span class="op" id="1979636">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979641">d</span><span class="op" id="1979642">.</span><span class="ident" id="1979643">next</span><span class="op" id="1979647">(</span><span class="op" id="1979648">)</span>&nbsp;<span class="comment" id="1979650">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979678">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979690">var</span>&nbsp;<span class="ident" id="1979694">mapElem</span>&nbsp;<span class="ident" id="1979702">reflect</span><span class="op" id="1979709">.</span><span class="ident" id="1979710">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979718">for</span>&nbsp;<span class="op" id="1979722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1979726">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979774">op</span>&nbsp;<span class="op" id="1979777">:=</span>&nbsp;<span class="ident" id="1979780">d</span><span class="op" id="1979781">.</span><span class="ident" id="1979782">scanWhile</span><span class="op" id="1979791">(</span><span class="ident" id="1979792">scanSkipSpace</span><span class="op" id="1979805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979809">if</span>&nbsp;<span class="ident" id="1979812">op</span>&nbsp;<span class="op" id="1979815">==</span>&nbsp;<span class="ident" id="1979818">scanEndObject</span>&nbsp;<span class="op" id="1979832">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1979837">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979891">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1979903">if</span>&nbsp;<span class="ident" id="1979906">op</span>&nbsp;<span class="op" id="1979909">!=</span>&nbsp;<span class="ident" id="1979912">scanBeginLiteral</span>&nbsp;<span class="op" id="1979929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979934">d</span><span class="op" id="1979935">.</span><span class="builtintype" id="1979936">error</span><span class="op" id="1979941">(</span><span class="ident" id="1979942">errPhase</span><span class="op" id="1979950">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1979954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1979959">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979974">start</span>&nbsp;<span class="op" id="1979980">:=</span>&nbsp;<span class="ident" id="1979983">d</span><span class="op" id="1979984">.</span><span class="ident" id="1979985">off</span>&nbsp;<span class="op" id="1979989">-</span>&nbsp;<span class="num" id="1979991">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1979995">op</span>&nbsp;<span class="op" id="1979998">=</span>&nbsp;<span class="ident" id="1980000">d</span><span class="op" id="1980001">.</span><span class="ident" id="1980002">scanWhile</span><span class="op" id="1980011">(</span><span class="ident" id="1980012">scanContinue</span><span class="op" id="1980024">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980028">item</span>&nbsp;<span class="op" id="1980033">:=</span>&nbsp;<span class="ident" id="1980036">d</span><span class="op" id="1980037">.</span><span class="ident" id="1980038">data</span><span class="op" id="1980042">[</span><span class="ident" id="1980043">start</span>&nbsp;<span class="op" id="1980049">:</span>&nbsp;<span class="ident" id="1980051">d</span><span class="op" id="1980052">.</span><span class="ident" id="1980053">off</span><span class="op" id="1980056">-</span><span class="num" id="1980057">1</span><span class="op" id="1980058">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980062">key</span><span class="op" id="1980065">,</span>&nbsp;<span class="ident" id="1980067">ok</span>&nbsp;<span class="op" id="1980070">:=</span>&nbsp;<span class="ident" id="1980073">unquoteBytes</span><span class="op" id="1980085">(</span><span class="ident" id="1980086">item</span><span class="op" id="1980090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980094">if</span>&nbsp;<span class="op" id="1980097">!</span><span class="ident" id="1980098">ok</span>&nbsp;<span class="op" id="1980101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980106">d</span><span class="op" id="1980107">.</span><span class="builtintype" id="1980108">error</span><span class="op" id="1980113">(</span><span class="ident" id="1980114">errPhase</span><span class="op" id="1980122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980126">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1980131">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980175">var</span>&nbsp;<span class="ident" id="1980179">subv</span>&nbsp;<span class="ident" id="1980184">reflect</span><span class="op" id="1980191">.</span><span class="ident" id="1980192">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980200">destring</span>&nbsp;<span class="op" id="1980209">:=</span>&nbsp;<span class="builtintype" id="1980212">false</span>&nbsp;<span class="comment" id="1980218">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980285">if</span>&nbsp;<span class="ident" id="1980288">v</span><span class="op" id="1980289">.</span><span class="ident" id="1980290">Kind</span><span class="op" id="1980294">(</span><span class="op" id="1980295">)</span>&nbsp;<span class="op" id="1980297">==</span>&nbsp;<span class="ident" id="1980300">reflect</span><span class="op" id="1980307">.</span><span class="ident" id="1980308">Map</span>&nbsp;<span class="op" id="1980312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980317">elemType</span>&nbsp;<span class="op" id="1980326">:=</span>&nbsp;<span class="ident" id="1980329">v</span><span class="op" id="1980330">.</span><span class="ident" id="1980331">Type</span><span class="op" id="1980335">(</span><span class="op" id="1980336">)</span><span class="op" id="1980337">.</span><span class="ident" id="1980338">Elem</span><span class="op" id="1980342">(</span><span class="op" id="1980343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980348">if</span>&nbsp;<span class="op" id="1980351">!</span><span class="ident" id="1980352">mapElem</span><span class="op" id="1980359">.</span><span class="ident" id="1980360">IsValid</span><span class="op" id="1980367">(</span><span class="op" id="1980368">)</span>&nbsp;<span class="op" id="1980370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980376">mapElem</span>&nbsp;<span class="op" id="1980384">=</span>&nbsp;<span class="ident" id="1980386">reflect</span><span class="op" id="1980393">.</span><span class="ident" id="1980394">New</span><span class="op" id="1980397">(</span><span class="ident" id="1980398">elemType</span><span class="op" id="1980406">)</span><span class="op" id="1980407">.</span><span class="ident" id="1980408">Elem</span><span class="op" id="1980412">(</span><span class="op" id="1980413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980418">}</span>&nbsp;<span class="keyword" id="1980420">else</span>&nbsp;<span class="op" id="1980425">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980431">mapElem</span><span class="op" id="1980438">.</span><span class="ident" id="1980439">Set</span><span class="op" id="1980442">(</span><span class="ident" id="1980443">reflect</span><span class="op" id="1980450">.</span><span class="ident" id="1980451">Zero</span><span class="op" id="1980455">(</span><span class="ident" id="1980456">elemType</span><span class="op" id="1980464">)</span><span class="op" id="1980465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980475">subv</span>&nbsp;<span class="op" id="1980480">=</span>&nbsp;<span class="ident" id="1980482">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980492">}</span>&nbsp;<span class="keyword" id="1980494">else</span>&nbsp;<span class="op" id="1980499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980504">var</span>&nbsp;<span class="ident" id="1980508">f</span>&nbsp;<span class="op" id="1980510">*</span><span class="ident" id="1980511">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980520">fields</span>&nbsp;<span class="op" id="1980527">:=</span>&nbsp;<span class="ident" id="1980530">cachedTypeFields</span><span class="op" id="1980546">(</span><span class="ident" id="1980547">v</span><span class="op" id="1980548">.</span><span class="ident" id="1980549">Type</span><span class="op" id="1980553">(</span><span class="op" id="1980554">)</span><span class="op" id="1980555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980560">for</span>&nbsp;<span class="ident" id="1980564">i</span>&nbsp;<span class="op" id="1980566">:=</span>&nbsp;<span class="keyword" id="1980569">range</span>&nbsp;<span class="ident" id="1980575">fields</span>&nbsp;<span class="op" id="1980582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980588">ff</span>&nbsp;<span class="op" id="1980591">:=</span>&nbsp;<span class="op" id="1980594">&amp;</span><span class="ident" id="1980595">fields</span><span class="op" id="1980601">[</span><span class="ident" id="1980602">i</span><span class="op" id="1980603">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980609">if</span>&nbsp;<span class="ident" id="1980612">bytes</span><span class="op" id="1980617">.</span><span class="ident" id="1980618">Equal</span><span class="op" id="1980623">(</span><span class="ident" id="1980624">ff</span><span class="op" id="1980626">.</span><span class="ident" id="1980627">nameBytes</span><span class="op" id="1980636">,</span>&nbsp;<span class="ident" id="1980638">key</span><span class="op" id="1980641">)</span>&nbsp;<span class="op" id="1980643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980650">f</span>&nbsp;<span class="op" id="1980652">=</span>&nbsp;<span class="ident" id="1980654">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980662">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980678">if</span>&nbsp;<span class="ident" id="1980681">f</span>&nbsp;<span class="op" id="1980683">==</span>&nbsp;<span class="builtintype" id="1980686">nil</span>&nbsp;<span class="op" id="1980690">&amp;&amp;</span>&nbsp;<span class="ident" id="1980693">ff</span><span class="op" id="1980695">.</span><span class="ident" id="1980696">equalFold</span><span class="op" id="1980705">(</span><span class="ident" id="1980706">ff</span><span class="op" id="1980708">.</span><span class="ident" id="1980709">nameBytes</span><span class="op" id="1980718">,</span>&nbsp;<span class="ident" id="1980720">key</span><span class="op" id="1980723">)</span>&nbsp;<span class="op" id="1980725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980732">f</span>&nbsp;<span class="op" id="1980734">=</span>&nbsp;<span class="ident" id="1980736">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980743">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980753">if</span>&nbsp;<span class="ident" id="1980756">f</span>&nbsp;<span class="op" id="1980758">!=</span>&nbsp;<span class="builtintype" id="1980761">nil</span>&nbsp;<span class="op" id="1980765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980771">subv</span>&nbsp;<span class="op" id="1980776">=</span>&nbsp;<span class="ident" id="1980778">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980784">destring</span>&nbsp;<span class="op" id="1980793">=</span>&nbsp;<span class="ident" id="1980795">f</span><span class="op" id="1980796">.</span><span class="ident" id="1980797">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980808">for</span>&nbsp;<span class="ident" id="1980812">_</span><span class="op" id="1980813">,</span>&nbsp;<span class="ident" id="1980815">i</span>&nbsp;<span class="op" id="1980817">:=</span>&nbsp;<span class="keyword" id="1980820">range</span>&nbsp;<span class="ident" id="1980826">f</span><span class="op" id="1980827">.</span><span class="ident" id="1980828">index</span>&nbsp;<span class="op" id="1980834">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980841">if</span>&nbsp;<span class="ident" id="1980844">subv</span><span class="op" id="1980848">.</span><span class="ident" id="1980849">Kind</span><span class="op" id="1980853">(</span><span class="op" id="1980854">)</span>&nbsp;<span class="op" id="1980856">==</span>&nbsp;<span class="ident" id="1980859">reflect</span><span class="op" id="1980866">.</span><span class="ident" id="1980867">Ptr</span>&nbsp;<span class="op" id="1980871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1980879">if</span>&nbsp;<span class="ident" id="1980882">subv</span><span class="op" id="1980886">.</span><span class="ident" id="1980887">IsNil</span><span class="op" id="1980892">(</span><span class="op" id="1980893">)</span>&nbsp;<span class="op" id="1980895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980904">subv</span><span class="op" id="1980908">.</span><span class="ident" id="1980909">Set</span><span class="op" id="1980912">(</span><span class="ident" id="1980913">reflect</span><span class="op" id="1980920">.</span><span class="ident" id="1980921">New</span><span class="op" id="1980924">(</span><span class="ident" id="1980925">subv</span><span class="op" id="1980929">.</span><span class="ident" id="1980930">Type</span><span class="op" id="1980934">(</span><span class="op" id="1980935">)</span><span class="op" id="1980936">.</span><span class="ident" id="1980937">Elem</span><span class="op" id="1980941">(</span><span class="op" id="1980942">)</span><span class="op" id="1980943">)</span><span class="op" id="1980944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980960">subv</span>&nbsp;<span class="op" id="1980965">=</span>&nbsp;<span class="ident" id="1980967">subv</span><span class="op" id="1980971">.</span><span class="ident" id="1980972">Elem</span><span class="op" id="1980976">(</span><span class="op" id="1980977">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1980984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1980991">subv</span>&nbsp;<span class="op" id="1980996">=</span>&nbsp;<span class="ident" id="1980998">subv</span><span class="op" id="1981002">.</span><span class="ident" id="1981003">Field</span><span class="op" id="1981008">(</span><span class="ident" id="1981009">i</span><span class="op" id="1981010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981025">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1981030">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981056">if</span>&nbsp;<span class="ident" id="1981059">op</span>&nbsp;<span class="op" id="1981062">==</span>&nbsp;<span class="ident" id="1981065">scanSkipSpace</span>&nbsp;<span class="op" id="1981079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981084">op</span>&nbsp;<span class="op" id="1981087">=</span>&nbsp;<span class="ident" id="1981089">d</span><span class="op" id="1981090">.</span><span class="ident" id="1981091">scanWhile</span><span class="op" id="1981100">(</span><span class="ident" id="1981101">scanSkipSpace</span><span class="op" id="1981114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981118">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981122">if</span>&nbsp;<span class="ident" id="1981125">op</span>&nbsp;<span class="op" id="1981128">!=</span>&nbsp;<span class="ident" id="1981131">scanObjectKey</span>&nbsp;<span class="op" id="1981145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981150">d</span><span class="op" id="1981151">.</span><span class="builtintype" id="1981152">error</span><span class="op" id="1981157">(</span><span class="ident" id="1981158">errPhase</span><span class="op" id="1981166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1981175">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981192">if</span>&nbsp;<span class="ident" id="1981195">destring</span>&nbsp;<span class="op" id="1981204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981209">switch</span>&nbsp;<span class="ident" id="1981216">qv</span>&nbsp;<span class="op" id="1981219">:=</span>&nbsp;<span class="ident" id="1981222">d</span><span class="op" id="1981223">.</span><span class="ident" id="1981224">valueQuoted</span><span class="op" id="1981235">(</span><span class="op" id="1981236">)</span><span class="op" id="1981237">.</span><span class="op" id="1981238">(</span><span class="keyword" id="1981239">type</span><span class="op" id="1981243">)</span>&nbsp;<span class="op" id="1981245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981250">case</span>&nbsp;<span class="builtintype" id="1981255">nil</span><span class="op" id="1981258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981264">d</span><span class="op" id="1981265">.</span><span class="ident" id="1981266">literalStore</span><span class="op" id="1981278">(</span><span class="ident" id="1981279">nullLiteral</span><span class="op" id="1981290">,</span>&nbsp;<span class="ident" id="1981292">subv</span><span class="op" id="1981296">,</span>&nbsp;<span class="builtintype" id="1981298">false</span><span class="op" id="1981303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981308">case</span>&nbsp;<span class="builtintype" id="1981313">string</span><span class="op" id="1981319">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981325">d</span><span class="op" id="1981326">.</span><span class="ident" id="1981327">literalStore</span><span class="op" id="1981339">(</span><span class="op" id="1981340">[</span><span class="op" id="1981341">]</span><span class="builtintype" id="1981342">byte</span><span class="op" id="1981346">(</span><span class="ident" id="1981347">qv</span><span class="op" id="1981349">)</span><span class="op" id="1981350">,</span>&nbsp;<span class="ident" id="1981352">subv</span><span class="op" id="1981356">,</span>&nbsp;<span class="builtintype" id="1981358">true</span><span class="op" id="1981362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981367">default</span><span class="op" id="1981374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981380">d</span><span class="op" id="1981381">.</span><span class="ident" id="1981382">saveError</span><span class="op" id="1981391">(</span><span class="ident" id="1981392">fmt</span><span class="op" id="1981395">.</span><span class="ident" id="1981396">Errorf</span><span class="op" id="1981402">(</span><span class="string" id="1981403">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1981488">,</span>&nbsp;<span class="ident" id="1981490">item</span><span class="op" id="1981494">,</span>&nbsp;<span class="ident" id="1981496">v</span><span class="op" id="1981497">.</span><span class="ident" id="1981498">Type</span><span class="op" id="1981502">(</span><span class="op" id="1981503">)</span><span class="op" id="1981504">)</span><span class="op" id="1981505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981514">}</span>&nbsp;<span class="keyword" id="1981516">else</span>&nbsp;<span class="op" id="1981521">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981526">d</span><span class="op" id="1981527">.</span><span class="ident" id="1981528">value</span><span class="op" id="1981533">(</span><span class="ident" id="1981534">subv</span><span class="op" id="1981538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1981547">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1981577">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981632">if</span>&nbsp;<span class="ident" id="1981635">v</span><span class="op" id="1981636">.</span><span class="ident" id="1981637">Kind</span><span class="op" id="1981641">(</span><span class="op" id="1981642">)</span>&nbsp;<span class="op" id="1981644">==</span>&nbsp;<span class="ident" id="1981647">reflect</span><span class="op" id="1981654">.</span><span class="ident" id="1981655">Map</span>&nbsp;<span class="op" id="1981659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981664">kv</span>&nbsp;<span class="op" id="1981667">:=</span>&nbsp;<span class="ident" id="1981670">reflect</span><span class="op" id="1981677">.</span><span class="ident" id="1981678">ValueOf</span><span class="op" id="1981685">(</span><span class="ident" id="1981686">key</span><span class="op" id="1981689">)</span><span class="op" id="1981690">.</span><span class="ident" id="1981691">Convert</span><span class="op" id="1981698">(</span><span class="ident" id="1981699">v</span><span class="op" id="1981700">.</span><span class="ident" id="1981701">Type</span><span class="op" id="1981705">(</span><span class="op" id="1981706">)</span><span class="op" id="1981707">.</span><span class="ident" id="1981708">Key</span><span class="op" id="1981711">(</span><span class="op" id="1981712">)</span><span class="op" id="1981713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981718">v</span><span class="op" id="1981719">.</span><span class="ident" id="1981720">SetMapIndex</span><span class="op" id="1981731">(</span><span class="ident" id="1981732">kv</span><span class="op" id="1981734">,</span>&nbsp;<span class="ident" id="1981736">subv</span><span class="op" id="1981740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1981749">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981781">op</span>&nbsp;<span class="op" id="1981784">=</span>&nbsp;<span class="ident" id="1981786">d</span><span class="op" id="1981787">.</span><span class="ident" id="1981788">scanWhile</span><span class="op" id="1981797">(</span><span class="ident" id="1981798">scanSkipSpace</span><span class="op" id="1981811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981815">if</span>&nbsp;<span class="ident" id="1981818">op</span>&nbsp;<span class="op" id="1981821">==</span>&nbsp;<span class="ident" id="1981824">scanEndObject</span>&nbsp;<span class="op" id="1981838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981843">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981851">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1981855">if</span>&nbsp;<span class="ident" id="1981858">op</span>&nbsp;<span class="op" id="1981861">!=</span>&nbsp;<span class="ident" id="1981864">scanObjectValue</span>&nbsp;<span class="op" id="1981880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1981885">d</span><span class="op" id="1981886">.</span><span class="builtintype" id="1981887">error</span><span class="op" id="1981892">(</span><span class="ident" id="1981893">errPhase</span><span class="op" id="1981901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1981908">}</span><br>
<span class="lineno"></span><span class="op" id="1981910">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="1981913">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="1981993">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="1982048">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="1982097">func</span>&nbsp;<span class="op" id="1982102">(</span><span class="ident" id="1982103">d</span>&nbsp;<span class="op" id="1982105">*</span><span class="ident" id="1982106">decodeState</span><span class="op" id="1982117">)</span>&nbsp;<span class="ident" id="1982119">literal</span><span class="op" id="1982126">(</span><span class="ident" id="1982127">v</span>&nbsp;<span class="ident" id="1982129">reflect</span><span class="op" id="1982136">.</span><span class="ident" id="1982137">Value</span><span class="op" id="1982142">)</span>&nbsp;<span class="op" id="1982144">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1982147">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1982205">start</span>&nbsp;<span class="op" id="1982211">:=</span>&nbsp;<span class="ident" id="1982214">d</span><span class="op" id="1982215">.</span><span class="ident" id="1982216">off</span>&nbsp;<span class="op" id="1982220">-</span>&nbsp;<span class="num" id="1982222">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1982225">op</span>&nbsp;<span class="op" id="1982228">:=</span>&nbsp;<span class="ident" id="1982231">d</span><span class="op" id="1982232">.</span><span class="ident" id="1982233">scanWhile</span><span class="op" id="1982242">(</span><span class="ident" id="1982243">scanContinue</span><span class="op" id="1982255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1982259">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1982300">d</span><span class="op" id="1982301">.</span><span class="ident" id="1982302">off</span><span class="op" id="1982305">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1982309">d</span><span class="op" id="1982310">.</span><span class="ident" id="1982311">scan</span><span class="op" id="1982315">.</span><span class="ident" id="1982316">undo</span><span class="op" id="1982320">(</span><span class="ident" id="1982321">op</span><span class="op" id="1982323">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1982327">d</span><span class="op" id="1982328">.</span><span class="ident" id="1982329">literalStore</span><span class="op" id="1982341">(</span><span class="ident" id="1982342">d</span><span class="op" id="1982343">.</span><span class="ident" id="1982344">data</span><span class="op" id="1982348">[</span><span class="ident" id="1982349">start</span><span class="op" id="1982354">:</span><span class="ident" id="1982355">d</span><span class="op" id="1982356">.</span><span class="ident" id="1982357">off</span><span class="op" id="1982360">]</span><span class="op" id="1982361">,</span>&nbsp;<span class="ident" id="1982363">v</span><span class="op" id="1982364">,</span>&nbsp;<span class="builtintype" id="1982366">false</span><span class="op" id="1982371">)</span><br>
<span class="lineno"></span><span class="op" id="1982373">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="1982376">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="1982448">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="1982492">func</span>&nbsp;<span class="op" id="1982497">(</span><span class="ident" id="1982498">d</span>&nbsp;<span class="op" id="1982500">*</span><span class="ident" id="1982501">decodeState</span><span class="op" id="1982512">)</span>&nbsp;<span class="ident" id="1982514">convertNumber</span><span class="op" id="1982527">(</span><span class="ident" id="1982528">s</span>&nbsp;<span class="builtintype" id="1982530">string</span><span class="op" id="1982536">)</span>&nbsp;<span class="op" id="1982538">(</span><span class="keyword" id="1982539">interface</span><span class="op" id="1982548">{</span><span class="op" id="1982549">}</span><span class="op" id="1982550">,</span>&nbsp;<span class="builtintype" id="1982552">error</span><span class="op" id="1982557">)</span>&nbsp;<span class="op" id="1982559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1982562">if</span>&nbsp;<span class="ident" id="1982565">d</span><span class="op" id="1982566">.</span><span class="ident" id="1982567">useNumber</span>&nbsp;<span class="op" id="1982577">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1982581">return</span>&nbsp;<span class="ident" id="1982588">Number</span><span class="op" id="1982594">(</span><span class="ident" id="1982595">s</span><span class="op" id="1982596">)</span><span class="op" id="1982597">,</span>&nbsp;<span class="builtintype" id="1982599">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1982604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1982607">f</span><span class="op" id="1982608">,</span>&nbsp;<span class="ident" id="1982610">err</span>&nbsp;<span class="op" id="1982614">:=</span>&nbsp;<span class="ident" id="1982617">strconv</span><span class="op" id="1982624">.</span><span class="ident" id="1982625">ParseFloat</span><span class="op" id="1982635">(</span><span class="ident" id="1982636">s</span><span class="op" id="1982637">,</span>&nbsp;<span class="num" id="1982639">64</span><span class="op" id="1982641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1982644">if</span>&nbsp;<span class="ident" id="1982647">err</span>&nbsp;<span class="op" id="1982651">!=</span>&nbsp;<span class="builtintype" id="1982654">nil</span>&nbsp;<span class="op" id="1982658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1982662">return</span>&nbsp;<span class="builtintype" id="1982669">nil</span><span class="op" id="1982672">,</span>&nbsp;<span class="op" id="1982674">&amp;</span><span class="ident" id="1982675">UnmarshalTypeError</span><span class="op" id="1982693">{</span><span class="string" id="1982694">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="1982704">+</span>&nbsp;<span class="ident" id="1982706">s</span><span class="op" id="1982707">,</span>&nbsp;<span class="ident" id="1982709">reflect</span><span class="op" id="1982716">.</span><span class="ident" id="1982717">TypeOf</span><span class="op" id="1982723">(</span><span class="num" id="1982724">0.0</span><span class="op" id="1982727">)</span><span class="op" id="1982728">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1982731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1982734">return</span>&nbsp;<span class="ident" id="1982741">f</span><span class="op" id="1982742">,</span>&nbsp;<span class="builtintype" id="1982744">nil</span><br>
<span class="lineno"></span><span class="op" id="1982748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1982751">var</span>&nbsp;<span class="ident" id="1982755">numberType</span>&nbsp;<span class="op" id="1982766">=</span>&nbsp;<span class="ident" id="1982768">reflect</span><span class="op" id="1982775">.</span><span class="ident" id="1982776">TypeOf</span><span class="op" id="1982782">(</span><span class="ident" id="1982783">Number</span><span class="op" id="1982789">(</span><span class="string" id="1982790">&#34;&#34;</span><span class="op" id="1982792">)</span><span class="op" id="1982793">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="1982796">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="1982853">//</span><br>
<span class="lineno"></span><span class="comment" id="1982856">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1982924">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="1982993">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="1983033">func</span>&nbsp;<span class="op" id="1983038">(</span><span class="ident" id="1983039">d</span>&nbsp;<span class="op" id="1983041">*</span><span class="ident" id="1983042">decodeState</span><span class="op" id="1983053">)</span>&nbsp;<span class="ident" id="1983055">literalStore</span><span class="op" id="1983067">(</span><span class="ident" id="1983068">item</span>&nbsp;<span class="op" id="1983073">[</span><span class="op" id="1983074">]</span><span class="builtintype" id="1983075">byte</span><span class="op" id="1983079">,</span>&nbsp;<span class="ident" id="1983081">v</span>&nbsp;<span class="ident" id="1983083">reflect</span><span class="op" id="1983090">.</span><span class="ident" id="1983091">Value</span><span class="op" id="1983096">,</span>&nbsp;<span class="ident" id="1983098">fromQuoted</span>&nbsp;<span class="builtintype" id="1983109">bool</span><span class="op" id="1983113">)</span>&nbsp;<span class="op" id="1983115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1983118">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983145">if</span>&nbsp;<span class="builtinfunc" id="1983148">len</span><span class="op" id="1983151">(</span><span class="ident" id="1983152">item</span><span class="op" id="1983156">)</span>&nbsp;<span class="op" id="1983158">==</span>&nbsp;<span class="num" id="1983161">0</span>&nbsp;<span class="op" id="1983163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1983167">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983190">d</span><span class="op" id="1983191">.</span><span class="ident" id="1983192">saveError</span><span class="op" id="1983201">(</span><span class="ident" id="1983202">fmt</span><span class="op" id="1983205">.</span><span class="ident" id="1983206">Errorf</span><span class="op" id="1983212">(</span><span class="string" id="1983213">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1983286">,</span>&nbsp;<span class="ident" id="1983288">item</span><span class="op" id="1983292">,</span>&nbsp;<span class="ident" id="1983294">v</span><span class="op" id="1983295">.</span><span class="ident" id="1983296">Type</span><span class="op" id="1983300">(</span><span class="op" id="1983301">)</span><span class="op" id="1983302">)</span><span class="op" id="1983303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983307">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983318">wantptr</span>&nbsp;<span class="op" id="1983326">:=</span>&nbsp;<span class="ident" id="1983329">item</span><span class="op" id="1983333">[</span><span class="num" id="1983334">0</span><span class="op" id="1983335">]</span>&nbsp;<span class="op" id="1983337">==</span>&nbsp;<span class="string" id="1983340">&#39;n&#39;</span>&nbsp;<span class="comment" id="1983344">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983353">u</span><span class="op" id="1983354">,</span>&nbsp;<span class="ident" id="1983356">ut</span><span class="op" id="1983358">,</span>&nbsp;<span class="ident" id="1983360">pv</span>&nbsp;<span class="op" id="1983363">:=</span>&nbsp;<span class="ident" id="1983366">d</span><span class="op" id="1983367">.</span><span class="ident" id="1983368">indirect</span><span class="op" id="1983376">(</span><span class="ident" id="1983377">v</span><span class="op" id="1983378">,</span>&nbsp;<span class="ident" id="1983380">wantptr</span><span class="op" id="1983387">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983390">if</span>&nbsp;<span class="ident" id="1983393">u</span>&nbsp;<span class="op" id="1983395">!=</span>&nbsp;<span class="builtintype" id="1983398">nil</span>&nbsp;<span class="op" id="1983402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983406">err</span>&nbsp;<span class="op" id="1983410">:=</span>&nbsp;<span class="ident" id="1983413">u</span><span class="op" id="1983414">.</span><span class="ident" id="1983415">UnmarshalJSON</span><span class="op" id="1983428">(</span><span class="ident" id="1983429">item</span><span class="op" id="1983433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983437">if</span>&nbsp;<span class="ident" id="1983440">err</span>&nbsp;<span class="op" id="1983444">!=</span>&nbsp;<span class="builtintype" id="1983447">nil</span>&nbsp;<span class="op" id="1983451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983456">d</span><span class="op" id="1983457">.</span><span class="builtintype" id="1983458">error</span><span class="op" id="1983463">(</span><span class="ident" id="1983464">err</span><span class="op" id="1983467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983471">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983475">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983486">if</span>&nbsp;<span class="ident" id="1983489">ut</span>&nbsp;<span class="op" id="1983492">!=</span>&nbsp;<span class="builtintype" id="1983495">nil</span>&nbsp;<span class="op" id="1983499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983503">if</span>&nbsp;<span class="ident" id="1983506">item</span><span class="op" id="1983510">[</span><span class="num" id="1983511">0</span><span class="op" id="1983512">]</span>&nbsp;<span class="op" id="1983514">!=</span>&nbsp;<span class="string" id="1983517">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="1983521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983526">if</span>&nbsp;<span class="ident" id="1983529">fromQuoted</span>&nbsp;<span class="op" id="1983540">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983546">d</span><span class="op" id="1983547">.</span><span class="ident" id="1983548">saveError</span><span class="op" id="1983557">(</span><span class="ident" id="1983558">fmt</span><span class="op" id="1983561">.</span><span class="ident" id="1983562">Errorf</span><span class="op" id="1983568">(</span><span class="string" id="1983569">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1983642">,</span>&nbsp;<span class="ident" id="1983644">item</span><span class="op" id="1983648">,</span>&nbsp;<span class="ident" id="1983650">v</span><span class="op" id="1983651">.</span><span class="ident" id="1983652">Type</span><span class="op" id="1983656">(</span><span class="op" id="1983657">)</span><span class="op" id="1983658">)</span><span class="op" id="1983659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983664">}</span>&nbsp;<span class="keyword" id="1983666">else</span>&nbsp;<span class="op" id="1983671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983677">d</span><span class="op" id="1983678">.</span><span class="ident" id="1983679">saveError</span><span class="op" id="1983688">(</span><span class="op" id="1983689">&amp;</span><span class="ident" id="1983690">UnmarshalTypeError</span><span class="op" id="1983708">{</span><span class="string" id="1983709">&#34;string&#34;</span><span class="op" id="1983717">,</span>&nbsp;<span class="ident" id="1983719">v</span><span class="op" id="1983720">.</span><span class="ident" id="1983721">Type</span><span class="op" id="1983725">(</span><span class="op" id="1983726">)</span><span class="op" id="1983727">}</span><span class="op" id="1983728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983737">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983741">s</span><span class="op" id="1983742">,</span>&nbsp;<span class="ident" id="1983744">ok</span>&nbsp;<span class="op" id="1983747">:=</span>&nbsp;<span class="ident" id="1983750">unquoteBytes</span><span class="op" id="1983762">(</span><span class="ident" id="1983763">item</span><span class="op" id="1983767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983771">if</span>&nbsp;<span class="op" id="1983774">!</span><span class="ident" id="1983775">ok</span>&nbsp;<span class="op" id="1983778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983783">if</span>&nbsp;<span class="ident" id="1983786">fromQuoted</span>&nbsp;<span class="op" id="1983797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983803">d</span><span class="op" id="1983804">.</span><span class="builtintype" id="1983805">error</span><span class="op" id="1983810">(</span><span class="ident" id="1983811">fmt</span><span class="op" id="1983814">.</span><span class="ident" id="1983815">Errorf</span><span class="op" id="1983821">(</span><span class="string" id="1983822">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1983895">,</span>&nbsp;<span class="ident" id="1983897">item</span><span class="op" id="1983901">,</span>&nbsp;<span class="ident" id="1983903">v</span><span class="op" id="1983904">.</span><span class="ident" id="1983905">Type</span><span class="op" id="1983909">(</span><span class="op" id="1983910">)</span><span class="op" id="1983911">)</span><span class="op" id="1983912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983917">}</span>&nbsp;<span class="keyword" id="1983919">else</span>&nbsp;<span class="op" id="1983924">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983930">d</span><span class="op" id="1983931">.</span><span class="builtintype" id="1983932">error</span><span class="op" id="1983937">(</span><span class="ident" id="1983938">errPhase</span><span class="op" id="1983946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1983955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1983959">err</span>&nbsp;<span class="op" id="1983963">:=</span>&nbsp;<span class="ident" id="1983966">ut</span><span class="op" id="1983968">.</span><span class="ident" id="1983969">UnmarshalText</span><span class="op" id="1983982">(</span><span class="ident" id="1983983">s</span><span class="op" id="1983984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1983988">if</span>&nbsp;<span class="ident" id="1983991">err</span>&nbsp;<span class="op" id="1983995">!=</span>&nbsp;<span class="builtintype" id="1983998">nil</span>&nbsp;<span class="op" id="1984002">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984007">d</span><span class="op" id="1984008">.</span><span class="builtintype" id="1984009">error</span><span class="op" id="1984014">(</span><span class="ident" id="1984015">err</span><span class="op" id="1984018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984026">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984038">v</span>&nbsp;<span class="op" id="1984040">=</span>&nbsp;<span class="ident" id="1984042">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984047">switch</span>&nbsp;<span class="ident" id="1984054">c</span>&nbsp;<span class="op" id="1984056">:=</span>&nbsp;<span class="ident" id="1984059">item</span><span class="op" id="1984063">[</span><span class="num" id="1984064">0</span><span class="op" id="1984065">]</span><span class="op" id="1984066">;</span>&nbsp;<span class="ident" id="1984068">c</span>&nbsp;<span class="op" id="1984070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984073">case</span>&nbsp;<span class="string" id="1984078">&#39;n&#39;</span><span class="op" id="1984081">:</span>&nbsp;<span class="comment" id="1984083">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984093">switch</span>&nbsp;<span class="ident" id="1984100">v</span><span class="op" id="1984101">.</span><span class="ident" id="1984102">Kind</span><span class="op" id="1984106">(</span><span class="op" id="1984107">)</span>&nbsp;<span class="op" id="1984109">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984113">case</span>&nbsp;<span class="ident" id="1984118">reflect</span><span class="op" id="1984125">.</span><span class="ident" id="1984126">Interface</span><span class="op" id="1984135">,</span>&nbsp;<span class="ident" id="1984137">reflect</span><span class="op" id="1984144">.</span><span class="ident" id="1984145">Ptr</span><span class="op" id="1984148">,</span>&nbsp;<span class="ident" id="1984150">reflect</span><span class="op" id="1984157">.</span><span class="ident" id="1984158">Map</span><span class="op" id="1984161">,</span>&nbsp;<span class="ident" id="1984163">reflect</span><span class="op" id="1984170">.</span><span class="ident" id="1984171">Slice</span><span class="op" id="1984176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984181">v</span><span class="op" id="1984182">.</span><span class="ident" id="1984183">Set</span><span class="op" id="1984186">(</span><span class="ident" id="1984187">reflect</span><span class="op" id="1984194">.</span><span class="ident" id="1984195">Zero</span><span class="op" id="1984199">(</span><span class="ident" id="1984200">v</span><span class="op" id="1984201">.</span><span class="ident" id="1984202">Type</span><span class="op" id="1984206">(</span><span class="op" id="1984207">)</span><span class="op" id="1984208">)</span><span class="op" id="1984209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1984214">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984267">case</span>&nbsp;<span class="string" id="1984272">&#39;t&#39;</span><span class="op" id="1984275">,</span>&nbsp;<span class="string" id="1984277">&#39;f&#39;</span><span class="op" id="1984280">:</span>&nbsp;<span class="comment" id="1984282">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984299">value</span>&nbsp;<span class="op" id="1984305">:=</span>&nbsp;<span class="ident" id="1984308">c</span>&nbsp;<span class="op" id="1984310">==</span>&nbsp;<span class="string" id="1984313">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984319">switch</span>&nbsp;<span class="ident" id="1984326">v</span><span class="op" id="1984327">.</span><span class="ident" id="1984328">Kind</span><span class="op" id="1984332">(</span><span class="op" id="1984333">)</span>&nbsp;<span class="op" id="1984335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984339">default</span><span class="op" id="1984346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984351">if</span>&nbsp;<span class="ident" id="1984354">fromQuoted</span>&nbsp;<span class="op" id="1984365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984371">d</span><span class="op" id="1984372">.</span><span class="ident" id="1984373">saveError</span><span class="op" id="1984382">(</span><span class="ident" id="1984383">fmt</span><span class="op" id="1984386">.</span><span class="ident" id="1984387">Errorf</span><span class="op" id="1984393">(</span><span class="string" id="1984394">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1984467">,</span>&nbsp;<span class="ident" id="1984469">item</span><span class="op" id="1984473">,</span>&nbsp;<span class="ident" id="1984475">v</span><span class="op" id="1984476">.</span><span class="ident" id="1984477">Type</span><span class="op" id="1984481">(</span><span class="op" id="1984482">)</span><span class="op" id="1984483">)</span><span class="op" id="1984484">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984489">}</span>&nbsp;<span class="keyword" id="1984491">else</span>&nbsp;<span class="op" id="1984496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984502">d</span><span class="op" id="1984503">.</span><span class="ident" id="1984504">saveError</span><span class="op" id="1984513">(</span><span class="op" id="1984514">&amp;</span><span class="ident" id="1984515">UnmarshalTypeError</span><span class="op" id="1984533">{</span><span class="string" id="1984534">&#34;bool&#34;</span><span class="op" id="1984540">,</span>&nbsp;<span class="ident" id="1984542">v</span><span class="op" id="1984543">.</span><span class="ident" id="1984544">Type</span><span class="op" id="1984548">(</span><span class="op" id="1984549">)</span><span class="op" id="1984550">}</span><span class="op" id="1984551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984560">case</span>&nbsp;<span class="ident" id="1984565">reflect</span><span class="op" id="1984572">.</span><span class="ident" id="1984573">Bool</span><span class="op" id="1984577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984582">v</span><span class="op" id="1984583">.</span><span class="ident" id="1984584">SetBool</span><span class="op" id="1984591">(</span><span class="ident" id="1984592">value</span><span class="op" id="1984597">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984601">case</span>&nbsp;<span class="ident" id="1984606">reflect</span><span class="op" id="1984613">.</span><span class="ident" id="1984614">Interface</span><span class="op" id="1984623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984628">if</span>&nbsp;<span class="ident" id="1984631">v</span><span class="op" id="1984632">.</span><span class="ident" id="1984633">NumMethod</span><span class="op" id="1984642">(</span><span class="op" id="1984643">)</span>&nbsp;<span class="op" id="1984645">==</span>&nbsp;<span class="num" id="1984648">0</span>&nbsp;<span class="op" id="1984650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984656">v</span><span class="op" id="1984657">.</span><span class="ident" id="1984658">Set</span><span class="op" id="1984661">(</span><span class="ident" id="1984662">reflect</span><span class="op" id="1984669">.</span><span class="ident" id="1984670">ValueOf</span><span class="op" id="1984677">(</span><span class="ident" id="1984678">value</span><span class="op" id="1984683">)</span><span class="op" id="1984684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984689">}</span>&nbsp;<span class="keyword" id="1984691">else</span>&nbsp;<span class="op" id="1984696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984702">d</span><span class="op" id="1984703">.</span><span class="ident" id="1984704">saveError</span><span class="op" id="1984713">(</span><span class="op" id="1984714">&amp;</span><span class="ident" id="1984715">UnmarshalTypeError</span><span class="op" id="1984733">{</span><span class="string" id="1984734">&#34;bool&#34;</span><span class="op" id="1984740">,</span>&nbsp;<span class="ident" id="1984742">v</span><span class="op" id="1984743">.</span><span class="ident" id="1984744">Type</span><span class="op" id="1984748">(</span><span class="op" id="1984749">)</span><span class="op" id="1984750">}</span><span class="op" id="1984751">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984764">case</span>&nbsp;<span class="string" id="1984769">&#39;&#34;&#39;</span><span class="op" id="1984772">:</span>&nbsp;<span class="comment" id="1984774">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984786">s</span><span class="op" id="1984787">,</span>&nbsp;<span class="ident" id="1984789">ok</span>&nbsp;<span class="op" id="1984792">:=</span>&nbsp;<span class="ident" id="1984795">unquoteBytes</span><span class="op" id="1984807">(</span><span class="ident" id="1984808">item</span><span class="op" id="1984812">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984816">if</span>&nbsp;<span class="op" id="1984819">!</span><span class="ident" id="1984820">ok</span>&nbsp;<span class="op" id="1984823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1984828">if</span>&nbsp;<span class="ident" id="1984831">fromQuoted</span>&nbsp;<span class="op" id="1984842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984848">d</span><span class="op" id="1984849">.</span><span class="builtintype" id="1984850">error</span><span class="op" id="1984855">(</span><span class="ident" id="1984856">fmt</span><span class="op" id="1984859">.</span><span class="ident" id="1984860">Errorf</span><span class="op" id="1984866">(</span><span class="string" id="1984867">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1984940">,</span>&nbsp;<span class="ident" id="1984942">item</span><span class="op" id="1984946">,</span>&nbsp;<span class="ident" id="1984948">v</span><span class="op" id="1984949">.</span><span class="ident" id="1984950">Type</span><span class="op" id="1984954">(</span><span class="op" id="1984955">)</span><span class="op" id="1984956">)</span><span class="op" id="1984957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984962">}</span>&nbsp;<span class="keyword" id="1984964">else</span>&nbsp;<span class="op" id="1984969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1984975">d</span><span class="op" id="1984976">.</span><span class="builtintype" id="1984977">error</span><span class="op" id="1984982">(</span><span class="ident" id="1984983">errPhase</span><span class="op" id="1984991">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1984996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985004">switch</span>&nbsp;<span class="ident" id="1985011">v</span><span class="op" id="1985012">.</span><span class="ident" id="1985013">Kind</span><span class="op" id="1985017">(</span><span class="op" id="1985018">)</span>&nbsp;<span class="op" id="1985020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985024">default</span><span class="op" id="1985031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985036">d</span><span class="op" id="1985037">.</span><span class="ident" id="1985038">saveError</span><span class="op" id="1985047">(</span><span class="op" id="1985048">&amp;</span><span class="ident" id="1985049">UnmarshalTypeError</span><span class="op" id="1985067">{</span><span class="string" id="1985068">&#34;string&#34;</span><span class="op" id="1985076">,</span>&nbsp;<span class="ident" id="1985078">v</span><span class="op" id="1985079">.</span><span class="ident" id="1985080">Type</span><span class="op" id="1985084">(</span><span class="op" id="1985085">)</span><span class="op" id="1985086">}</span><span class="op" id="1985087">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985091">case</span>&nbsp;<span class="ident" id="1985096">reflect</span><span class="op" id="1985103">.</span><span class="ident" id="1985104">Slice</span><span class="op" id="1985109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985114">if</span>&nbsp;<span class="ident" id="1985117">v</span><span class="op" id="1985118">.</span><span class="ident" id="1985119">Type</span><span class="op" id="1985123">(</span><span class="op" id="1985124">)</span>&nbsp;<span class="op" id="1985126">!=</span>&nbsp;<span class="ident" id="1985129">byteSliceType</span>&nbsp;<span class="op" id="1985143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985149">d</span><span class="op" id="1985150">.</span><span class="ident" id="1985151">saveError</span><span class="op" id="1985160">(</span><span class="op" id="1985161">&amp;</span><span class="ident" id="1985162">UnmarshalTypeError</span><span class="op" id="1985180">{</span><span class="string" id="1985181">&#34;string&#34;</span><span class="op" id="1985189">,</span>&nbsp;<span class="ident" id="1985191">v</span><span class="op" id="1985192">.</span><span class="ident" id="1985193">Type</span><span class="op" id="1985197">(</span><span class="op" id="1985198">)</span><span class="op" id="1985199">}</span><span class="op" id="1985200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985206">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985215">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985220">b</span>&nbsp;<span class="op" id="1985222">:=</span>&nbsp;<span class="builtinfunc" id="1985225">make</span><span class="op" id="1985229">(</span><span class="op" id="1985230">[</span><span class="op" id="1985231">]</span><span class="builtintype" id="1985232">byte</span><span class="op" id="1985236">,</span>&nbsp;<span class="ident" id="1985238">base64</span><span class="op" id="1985244">.</span><span class="ident" id="1985245">StdEncoding</span><span class="op" id="1985256">.</span><span class="ident" id="1985257">DecodedLen</span><span class="op" id="1985267">(</span><span class="builtinfunc" id="1985268">len</span><span class="op" id="1985271">(</span><span class="ident" id="1985272">s</span><span class="op" id="1985273">)</span><span class="op" id="1985274">)</span><span class="op" id="1985275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985280">n</span><span class="op" id="1985281">,</span>&nbsp;<span class="ident" id="1985283">err</span>&nbsp;<span class="op" id="1985287">:=</span>&nbsp;<span class="ident" id="1985290">base64</span><span class="op" id="1985296">.</span><span class="ident" id="1985297">StdEncoding</span><span class="op" id="1985308">.</span><span class="ident" id="1985309">Decode</span><span class="op" id="1985315">(</span><span class="ident" id="1985316">b</span><span class="op" id="1985317">,</span>&nbsp;<span class="ident" id="1985319">s</span><span class="op" id="1985320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985325">if</span>&nbsp;<span class="ident" id="1985328">err</span>&nbsp;<span class="op" id="1985332">!=</span>&nbsp;<span class="builtintype" id="1985335">nil</span>&nbsp;<span class="op" id="1985339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985345">d</span><span class="op" id="1985346">.</span><span class="ident" id="1985347">saveError</span><span class="op" id="1985356">(</span><span class="ident" id="1985357">err</span><span class="op" id="1985360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985366">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985380">v</span><span class="op" id="1985381">.</span><span class="ident" id="1985382">Set</span><span class="op" id="1985385">(</span><span class="ident" id="1985386">reflect</span><span class="op" id="1985393">.</span><span class="ident" id="1985394">ValueOf</span><span class="op" id="1985401">(</span><span class="ident" id="1985402">b</span><span class="op" id="1985403">[</span><span class="num" id="1985404">0</span><span class="op" id="1985405">:</span><span class="ident" id="1985406">n</span><span class="op" id="1985407">]</span><span class="op" id="1985408">)</span><span class="op" id="1985409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985413">case</span>&nbsp;<span class="ident" id="1985418">reflect</span><span class="op" id="1985425">.</span><span class="ident" id="1985426">String</span><span class="op" id="1985432">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985437">v</span><span class="op" id="1985438">.</span><span class="ident" id="1985439">SetString</span><span class="op" id="1985448">(</span><span class="builtintype" id="1985449">string</span><span class="op" id="1985455">(</span><span class="ident" id="1985456">s</span><span class="op" id="1985457">)</span><span class="op" id="1985458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985462">case</span>&nbsp;<span class="ident" id="1985467">reflect</span><span class="op" id="1985474">.</span><span class="ident" id="1985475">Interface</span><span class="op" id="1985484">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985489">if</span>&nbsp;<span class="ident" id="1985492">v</span><span class="op" id="1985493">.</span><span class="ident" id="1985494">NumMethod</span><span class="op" id="1985503">(</span><span class="op" id="1985504">)</span>&nbsp;<span class="op" id="1985506">==</span>&nbsp;<span class="num" id="1985509">0</span>&nbsp;<span class="op" id="1985511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985517">v</span><span class="op" id="1985518">.</span><span class="ident" id="1985519">Set</span><span class="op" id="1985522">(</span><span class="ident" id="1985523">reflect</span><span class="op" id="1985530">.</span><span class="ident" id="1985531">ValueOf</span><span class="op" id="1985538">(</span><span class="builtintype" id="1985539">string</span><span class="op" id="1985545">(</span><span class="ident" id="1985546">s</span><span class="op" id="1985547">)</span><span class="op" id="1985548">)</span><span class="op" id="1985549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985554">}</span>&nbsp;<span class="keyword" id="1985556">else</span>&nbsp;<span class="op" id="1985561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985567">d</span><span class="op" id="1985568">.</span><span class="ident" id="1985569">saveError</span><span class="op" id="1985578">(</span><span class="op" id="1985579">&amp;</span><span class="ident" id="1985580">UnmarshalTypeError</span><span class="op" id="1985598">{</span><span class="string" id="1985599">&#34;string&#34;</span><span class="op" id="1985607">,</span>&nbsp;<span class="ident" id="1985609">v</span><span class="op" id="1985610">.</span><span class="ident" id="1985611">Type</span><span class="op" id="1985615">(</span><span class="op" id="1985616">)</span><span class="op" id="1985617">}</span><span class="op" id="1985618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985623">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985631">default</span><span class="op" id="1985638">:</span>&nbsp;<span class="comment" id="1985640">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985652">if</span>&nbsp;<span class="ident" id="1985655">c</span>&nbsp;<span class="op" id="1985657">!=</span>&nbsp;<span class="string" id="1985660">&#39;-&#39;</span>&nbsp;<span class="op" id="1985664">&amp;&amp;</span>&nbsp;<span class="op" id="1985667">(</span><span class="ident" id="1985668">c</span>&nbsp;<span class="op" id="1985670">&lt;</span>&nbsp;<span class="string" id="1985672">&#39;0&#39;</span>&nbsp;<span class="op" id="1985676">||</span>&nbsp;<span class="ident" id="1985679">c</span>&nbsp;<span class="op" id="1985681">&gt;</span>&nbsp;<span class="string" id="1985683">&#39;9&#39;</span><span class="op" id="1985686">)</span>&nbsp;<span class="op" id="1985688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985693">if</span>&nbsp;<span class="ident" id="1985696">fromQuoted</span>&nbsp;<span class="op" id="1985707">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985713">d</span><span class="op" id="1985714">.</span><span class="builtintype" id="1985715">error</span><span class="op" id="1985720">(</span><span class="ident" id="1985721">fmt</span><span class="op" id="1985724">.</span><span class="ident" id="1985725">Errorf</span><span class="op" id="1985731">(</span><span class="string" id="1985732">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1985805">,</span>&nbsp;<span class="ident" id="1985807">item</span><span class="op" id="1985811">,</span>&nbsp;<span class="ident" id="1985813">v</span><span class="op" id="1985814">.</span><span class="ident" id="1985815">Type</span><span class="op" id="1985819">(</span><span class="op" id="1985820">)</span><span class="op" id="1985821">)</span><span class="op" id="1985822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985827">}</span>&nbsp;<span class="keyword" id="1985829">else</span>&nbsp;<span class="op" id="1985834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985840">d</span><span class="op" id="1985841">.</span><span class="builtintype" id="1985842">error</span><span class="op" id="1985847">(</span><span class="ident" id="1985848">errPhase</span><span class="op" id="1985856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1985865">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985869">s</span>&nbsp;<span class="op" id="1985871">:=</span>&nbsp;<span class="builtintype" id="1985874">string</span><span class="op" id="1985880">(</span><span class="ident" id="1985881">item</span><span class="op" id="1985885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985889">switch</span>&nbsp;<span class="ident" id="1985896">v</span><span class="op" id="1985897">.</span><span class="ident" id="1985898">Kind</span><span class="op" id="1985902">(</span><span class="op" id="1985903">)</span>&nbsp;<span class="op" id="1985905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985909">default</span><span class="op" id="1985916">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1985921">if</span>&nbsp;<span class="ident" id="1985924">v</span><span class="op" id="1985925">.</span><span class="ident" id="1985926">Kind</span><span class="op" id="1985930">(</span><span class="op" id="1985931">)</span>&nbsp;<span class="op" id="1985933">==</span>&nbsp;<span class="ident" id="1985936">reflect</span><span class="op" id="1985943">.</span><span class="ident" id="1985944">String</span>&nbsp;<span class="op" id="1985951">&amp;&amp;</span>&nbsp;<span class="ident" id="1985954">v</span><span class="op" id="1985955">.</span><span class="ident" id="1985956">Type</span><span class="op" id="1985960">(</span><span class="op" id="1985961">)</span>&nbsp;<span class="op" id="1985963">==</span>&nbsp;<span class="ident" id="1985966">numberType</span>&nbsp;<span class="op" id="1985977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1985983">v</span><span class="op" id="1985984">.</span><span class="ident" id="1985985">SetString</span><span class="op" id="1985994">(</span><span class="ident" id="1985995">s</span><span class="op" id="1985996">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986002">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986016">if</span>&nbsp;<span class="ident" id="1986019">fromQuoted</span>&nbsp;<span class="op" id="1986030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986036">d</span><span class="op" id="1986037">.</span><span class="builtintype" id="1986038">error</span><span class="op" id="1986043">(</span><span class="ident" id="1986044">fmt</span><span class="op" id="1986047">.</span><span class="ident" id="1986048">Errorf</span><span class="op" id="1986054">(</span><span class="string" id="1986055">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="1986128">,</span>&nbsp;<span class="ident" id="1986130">item</span><span class="op" id="1986134">,</span>&nbsp;<span class="ident" id="1986136">v</span><span class="op" id="1986137">.</span><span class="ident" id="1986138">Type</span><span class="op" id="1986142">(</span><span class="op" id="1986143">)</span><span class="op" id="1986144">)</span><span class="op" id="1986145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986150">}</span>&nbsp;<span class="keyword" id="1986152">else</span>&nbsp;<span class="op" id="1986157">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986163">d</span><span class="op" id="1986164">.</span><span class="builtintype" id="1986165">error</span><span class="op" id="1986170">(</span><span class="op" id="1986171">&amp;</span><span class="ident" id="1986172">UnmarshalTypeError</span><span class="op" id="1986190">{</span><span class="string" id="1986191">&#34;number&#34;</span><span class="op" id="1986199">,</span>&nbsp;<span class="ident" id="1986201">v</span><span class="op" id="1986202">.</span><span class="ident" id="1986203">Type</span><span class="op" id="1986207">(</span><span class="op" id="1986208">)</span><span class="op" id="1986209">}</span><span class="op" id="1986210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986219">case</span>&nbsp;<span class="ident" id="1986224">reflect</span><span class="op" id="1986231">.</span><span class="ident" id="1986232">Interface</span><span class="op" id="1986241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986246">n</span><span class="op" id="1986247">,</span>&nbsp;<span class="ident" id="1986249">err</span>&nbsp;<span class="op" id="1986253">:=</span>&nbsp;<span class="ident" id="1986256">d</span><span class="op" id="1986257">.</span><span class="ident" id="1986258">convertNumber</span><span class="op" id="1986271">(</span><span class="ident" id="1986272">s</span><span class="op" id="1986273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986278">if</span>&nbsp;<span class="ident" id="1986281">err</span>&nbsp;<span class="op" id="1986285">!=</span>&nbsp;<span class="builtintype" id="1986288">nil</span>&nbsp;<span class="op" id="1986292">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986298">d</span><span class="op" id="1986299">.</span><span class="ident" id="1986300">saveError</span><span class="op" id="1986309">(</span><span class="ident" id="1986310">err</span><span class="op" id="1986313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986319">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986333">if</span>&nbsp;<span class="ident" id="1986336">v</span><span class="op" id="1986337">.</span><span class="ident" id="1986338">NumMethod</span><span class="op" id="1986347">(</span><span class="op" id="1986348">)</span>&nbsp;<span class="op" id="1986350">!=</span>&nbsp;<span class="num" id="1986353">0</span>&nbsp;<span class="op" id="1986355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986361">d</span><span class="op" id="1986362">.</span><span class="ident" id="1986363">saveError</span><span class="op" id="1986372">(</span><span class="op" id="1986373">&amp;</span><span class="ident" id="1986374">UnmarshalTypeError</span><span class="op" id="1986392">{</span><span class="string" id="1986393">&#34;number&#34;</span><span class="op" id="1986401">,</span>&nbsp;<span class="ident" id="1986403">v</span><span class="op" id="1986404">.</span><span class="ident" id="1986405">Type</span><span class="op" id="1986409">(</span><span class="op" id="1986410">)</span><span class="op" id="1986411">}</span><span class="op" id="1986412">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986418">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986432">v</span><span class="op" id="1986433">.</span><span class="ident" id="1986434">Set</span><span class="op" id="1986437">(</span><span class="ident" id="1986438">reflect</span><span class="op" id="1986445">.</span><span class="ident" id="1986446">ValueOf</span><span class="op" id="1986453">(</span><span class="ident" id="1986454">n</span><span class="op" id="1986455">)</span><span class="op" id="1986456">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986461">case</span>&nbsp;<span class="ident" id="1986466">reflect</span><span class="op" id="1986473">.</span><span class="ident" id="1986474">Int</span><span class="op" id="1986477">,</span>&nbsp;<span class="ident" id="1986479">reflect</span><span class="op" id="1986486">.</span><span class="ident" id="1986487">Int8</span><span class="op" id="1986491">,</span>&nbsp;<span class="ident" id="1986493">reflect</span><span class="op" id="1986500">.</span><span class="ident" id="1986501">Int16</span><span class="op" id="1986506">,</span>&nbsp;<span class="ident" id="1986508">reflect</span><span class="op" id="1986515">.</span><span class="ident" id="1986516">Int32</span><span class="op" id="1986521">,</span>&nbsp;<span class="ident" id="1986523">reflect</span><span class="op" id="1986530">.</span><span class="ident" id="1986531">Int64</span><span class="op" id="1986536">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986541">n</span><span class="op" id="1986542">,</span>&nbsp;<span class="ident" id="1986544">err</span>&nbsp;<span class="op" id="1986548">:=</span>&nbsp;<span class="ident" id="1986551">strconv</span><span class="op" id="1986558">.</span><span class="ident" id="1986559">ParseInt</span><span class="op" id="1986567">(</span><span class="ident" id="1986568">s</span><span class="op" id="1986569">,</span>&nbsp;<span class="num" id="1986571">10</span><span class="op" id="1986573">,</span>&nbsp;<span class="num" id="1986575">64</span><span class="op" id="1986577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986582">if</span>&nbsp;<span class="ident" id="1986585">err</span>&nbsp;<span class="op" id="1986589">!=</span>&nbsp;<span class="builtintype" id="1986592">nil</span>&nbsp;<span class="op" id="1986596">||</span>&nbsp;<span class="ident" id="1986599">v</span><span class="op" id="1986600">.</span><span class="ident" id="1986601">OverflowInt</span><span class="op" id="1986612">(</span><span class="ident" id="1986613">n</span><span class="op" id="1986614">)</span>&nbsp;<span class="op" id="1986616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986622">d</span><span class="op" id="1986623">.</span><span class="ident" id="1986624">saveError</span><span class="op" id="1986633">(</span><span class="op" id="1986634">&amp;</span><span class="ident" id="1986635">UnmarshalTypeError</span><span class="op" id="1986653">{</span><span class="string" id="1986654">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="1986664">+</span>&nbsp;<span class="ident" id="1986666">s</span><span class="op" id="1986667">,</span>&nbsp;<span class="ident" id="1986669">v</span><span class="op" id="1986670">.</span><span class="ident" id="1986671">Type</span><span class="op" id="1986675">(</span><span class="op" id="1986676">)</span><span class="op" id="1986677">}</span><span class="op" id="1986678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986684">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986693">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986698">v</span><span class="op" id="1986699">.</span><span class="ident" id="1986700">SetInt</span><span class="op" id="1986706">(</span><span class="ident" id="1986707">n</span><span class="op" id="1986708">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986713">case</span>&nbsp;<span class="ident" id="1986718">reflect</span><span class="op" id="1986725">.</span><span class="ident" id="1986726">Uint</span><span class="op" id="1986730">,</span>&nbsp;<span class="ident" id="1986732">reflect</span><span class="op" id="1986739">.</span><span class="ident" id="1986740">Uint8</span><span class="op" id="1986745">,</span>&nbsp;<span class="ident" id="1986747">reflect</span><span class="op" id="1986754">.</span><span class="ident" id="1986755">Uint16</span><span class="op" id="1986761">,</span>&nbsp;<span class="ident" id="1986763">reflect</span><span class="op" id="1986770">.</span><span class="ident" id="1986771">Uint32</span><span class="op" id="1986777">,</span>&nbsp;<span class="ident" id="1986779">reflect</span><span class="op" id="1986786">.</span><span class="ident" id="1986787">Uint64</span><span class="op" id="1986793">,</span>&nbsp;<span class="ident" id="1986795">reflect</span><span class="op" id="1986802">.</span><span class="ident" id="1986803">Uintptr</span><span class="op" id="1986810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986815">n</span><span class="op" id="1986816">,</span>&nbsp;<span class="ident" id="1986818">err</span>&nbsp;<span class="op" id="1986822">:=</span>&nbsp;<span class="ident" id="1986825">strconv</span><span class="op" id="1986832">.</span><span class="ident" id="1986833">ParseUint</span><span class="op" id="1986842">(</span><span class="ident" id="1986843">s</span><span class="op" id="1986844">,</span>&nbsp;<span class="num" id="1986846">10</span><span class="op" id="1986848">,</span>&nbsp;<span class="num" id="1986850">64</span><span class="op" id="1986852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986857">if</span>&nbsp;<span class="ident" id="1986860">err</span>&nbsp;<span class="op" id="1986864">!=</span>&nbsp;<span class="builtintype" id="1986867">nil</span>&nbsp;<span class="op" id="1986871">||</span>&nbsp;<span class="ident" id="1986874">v</span><span class="op" id="1986875">.</span><span class="ident" id="1986876">OverflowUint</span><span class="op" id="1986888">(</span><span class="ident" id="1986889">n</span><span class="op" id="1986890">)</span>&nbsp;<span class="op" id="1986892">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986898">d</span><span class="op" id="1986899">.</span><span class="ident" id="1986900">saveError</span><span class="op" id="1986909">(</span><span class="op" id="1986910">&amp;</span><span class="ident" id="1986911">UnmarshalTypeError</span><span class="op" id="1986929">{</span><span class="string" id="1986930">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="1986940">+</span>&nbsp;<span class="ident" id="1986942">s</span><span class="op" id="1986943">,</span>&nbsp;<span class="ident" id="1986945">v</span><span class="op" id="1986946">.</span><span class="ident" id="1986947">Type</span><span class="op" id="1986951">(</span><span class="op" id="1986952">)</span><span class="op" id="1986953">}</span><span class="op" id="1986954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986960">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1986969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1986974">v</span><span class="op" id="1986975">.</span><span class="ident" id="1986976">SetUint</span><span class="op" id="1986983">(</span><span class="ident" id="1986984">n</span><span class="op" id="1986985">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1986990">case</span>&nbsp;<span class="ident" id="1986995">reflect</span><span class="op" id="1987002">.</span><span class="ident" id="1987003">Float32</span><span class="op" id="1987010">,</span>&nbsp;<span class="ident" id="1987012">reflect</span><span class="op" id="1987019">.</span><span class="ident" id="1987020">Float64</span><span class="op" id="1987027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987032">n</span><span class="op" id="1987033">,</span>&nbsp;<span class="ident" id="1987035">err</span>&nbsp;<span class="op" id="1987039">:=</span>&nbsp;<span class="ident" id="1987042">strconv</span><span class="op" id="1987049">.</span><span class="ident" id="1987050">ParseFloat</span><span class="op" id="1987060">(</span><span class="ident" id="1987061">s</span><span class="op" id="1987062">,</span>&nbsp;<span class="ident" id="1987064">v</span><span class="op" id="1987065">.</span><span class="ident" id="1987066">Type</span><span class="op" id="1987070">(</span><span class="op" id="1987071">)</span><span class="op" id="1987072">.</span><span class="ident" id="1987073">Bits</span><span class="op" id="1987077">(</span><span class="op" id="1987078">)</span><span class="op" id="1987079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987084">if</span>&nbsp;<span class="ident" id="1987087">err</span>&nbsp;<span class="op" id="1987091">!=</span>&nbsp;<span class="builtintype" id="1987094">nil</span>&nbsp;<span class="op" id="1987098">||</span>&nbsp;<span class="ident" id="1987101">v</span><span class="op" id="1987102">.</span><span class="ident" id="1987103">OverflowFloat</span><span class="op" id="1987116">(</span><span class="ident" id="1987117">n</span><span class="op" id="1987118">)</span>&nbsp;<span class="op" id="1987120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987126">d</span><span class="op" id="1987127">.</span><span class="ident" id="1987128">saveError</span><span class="op" id="1987137">(</span><span class="op" id="1987138">&amp;</span><span class="ident" id="1987139">UnmarshalTypeError</span><span class="op" id="1987157">{</span><span class="string" id="1987158">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="1987168">+</span>&nbsp;<span class="ident" id="1987170">s</span><span class="op" id="1987171">,</span>&nbsp;<span class="ident" id="1987173">v</span><span class="op" id="1987174">.</span><span class="ident" id="1987175">Type</span><span class="op" id="1987179">(</span><span class="op" id="1987180">)</span><span class="op" id="1987181">}</span><span class="op" id="1987182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987188">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1987197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987202">v</span><span class="op" id="1987203">.</span><span class="ident" id="1987204">SetFloat</span><span class="op" id="1987212">(</span><span class="ident" id="1987213">n</span><span class="op" id="1987214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1987218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1987221">}</span><br>
<span class="lineno"></span><span class="op" id="1987223">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="1987226">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="1987285">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="1987345">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="1987410">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="1987466">func</span>&nbsp;<span class="op" id="1987471">(</span><span class="ident" id="1987472">d</span>&nbsp;<span class="op" id="1987474">*</span><span class="ident" id="1987475">decodeState</span><span class="op" id="1987486">)</span>&nbsp;<span class="ident" id="1987488">valueInterface</span><span class="op" id="1987502">(</span><span class="op" id="1987503">)</span>&nbsp;<span class="keyword" id="1987505">interface</span><span class="op" id="1987514">{</span><span class="op" id="1987515">}</span>&nbsp;<span class="op" id="1987517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987520">switch</span>&nbsp;<span class="ident" id="1987527">d</span><span class="op" id="1987528">.</span><span class="ident" id="1987529">scanWhile</span><span class="op" id="1987538">(</span><span class="ident" id="1987539">scanSkipSpace</span><span class="op" id="1987552">)</span>&nbsp;<span class="op" id="1987554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987557">default</span><span class="op" id="1987564">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987568">d</span><span class="op" id="1987569">.</span><span class="builtintype" id="1987570">error</span><span class="op" id="1987575">(</span><span class="ident" id="1987576">errPhase</span><span class="op" id="1987584">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1987588">panic</span><span class="op" id="1987593">(</span><span class="string" id="1987594">&#34;unreachable&#34;</span><span class="op" id="1987607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987610">case</span>&nbsp;<span class="ident" id="1987615">scanBeginArray</span><span class="op" id="1987629">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987633">return</span>&nbsp;<span class="ident" id="1987640">d</span><span class="op" id="1987641">.</span><span class="ident" id="1987642">arrayInterface</span><span class="op" id="1987656">(</span><span class="op" id="1987657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987660">case</span>&nbsp;<span class="ident" id="1987665">scanBeginObject</span><span class="op" id="1987680">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987684">return</span>&nbsp;<span class="ident" id="1987691">d</span><span class="op" id="1987692">.</span><span class="ident" id="1987693">objectInterface</span><span class="op" id="1987708">(</span><span class="op" id="1987709">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987712">case</span>&nbsp;<span class="ident" id="1987717">scanBeginLiteral</span><span class="op" id="1987733">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987737">return</span>&nbsp;<span class="ident" id="1987744">d</span><span class="op" id="1987745">.</span><span class="ident" id="1987746">literalInterface</span><span class="op" id="1987762">(</span><span class="op" id="1987763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1987766">}</span><br>
<span class="lineno"></span><span class="op" id="1987768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="1987771">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="1987830">func</span>&nbsp;<span class="op" id="1987835">(</span><span class="ident" id="1987836">d</span>&nbsp;<span class="op" id="1987838">*</span><span class="ident" id="1987839">decodeState</span><span class="op" id="1987850">)</span>&nbsp;<span class="ident" id="1987852">arrayInterface</span><span class="op" id="1987866">(</span><span class="op" id="1987867">)</span>&nbsp;<span class="op" id="1987869">[</span><span class="op" id="1987870">]</span><span class="keyword" id="1987871">interface</span><span class="op" id="1987880">{</span><span class="op" id="1987881">}</span>&nbsp;<span class="op" id="1987883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987886">var</span>&nbsp;<span class="ident" id="1987890">v</span>&nbsp;<span class="op" id="1987892">=</span>&nbsp;<span class="builtinfunc" id="1987894">make</span><span class="op" id="1987898">(</span><span class="op" id="1987899">[</span><span class="op" id="1987900">]</span><span class="keyword" id="1987901">interface</span><span class="op" id="1987910">{</span><span class="op" id="1987911">}</span><span class="op" id="1987912">,</span>&nbsp;<span class="num" id="1987914">0</span><span class="op" id="1987915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1987918">for</span>&nbsp;<span class="op" id="1987922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1987926">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1987986">op</span>&nbsp;<span class="op" id="1987989">:=</span>&nbsp;<span class="ident" id="1987992">d</span><span class="op" id="1987993">.</span><span class="ident" id="1987994">scanWhile</span><span class="op" id="1988003">(</span><span class="ident" id="1988004">scanSkipSpace</span><span class="op" id="1988017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988021">if</span>&nbsp;<span class="ident" id="1988024">op</span>&nbsp;<span class="op" id="1988027">==</span>&nbsp;<span class="ident" id="1988030">scanEndArray</span>&nbsp;<span class="op" id="1988043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988048">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1988061">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988117">d</span><span class="op" id="1988118">.</span><span class="ident" id="1988119">off</span><span class="op" id="1988122">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988127">d</span><span class="op" id="1988128">.</span><span class="ident" id="1988129">scan</span><span class="op" id="1988133">.</span><span class="ident" id="1988134">undo</span><span class="op" id="1988138">(</span><span class="ident" id="1988139">op</span><span class="op" id="1988141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988146">v</span>&nbsp;<span class="op" id="1988148">=</span>&nbsp;<span class="builtinfunc" id="1988150">append</span><span class="op" id="1988156">(</span><span class="ident" id="1988157">v</span><span class="op" id="1988158">,</span>&nbsp;<span class="ident" id="1988160">d</span><span class="op" id="1988161">.</span><span class="ident" id="1988162">valueInterface</span><span class="op" id="1988176">(</span><span class="op" id="1988177">)</span><span class="op" id="1988178">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1988183">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988215">op</span>&nbsp;<span class="op" id="1988218">=</span>&nbsp;<span class="ident" id="1988220">d</span><span class="op" id="1988221">.</span><span class="ident" id="1988222">scanWhile</span><span class="op" id="1988231">(</span><span class="ident" id="1988232">scanSkipSpace</span><span class="op" id="1988245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988249">if</span>&nbsp;<span class="ident" id="1988252">op</span>&nbsp;<span class="op" id="1988255">==</span>&nbsp;<span class="ident" id="1988258">scanEndArray</span>&nbsp;<span class="op" id="1988271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988276">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988288">if</span>&nbsp;<span class="ident" id="1988291">op</span>&nbsp;<span class="op" id="1988294">!=</span>&nbsp;<span class="ident" id="1988297">scanArrayValue</span>&nbsp;<span class="op" id="1988312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988317">d</span><span class="op" id="1988318">.</span><span class="builtintype" id="1988319">error</span><span class="op" id="1988324">(</span><span class="ident" id="1988325">errPhase</span><span class="op" id="1988333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988340">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988343">return</span>&nbsp;<span class="ident" id="1988350">v</span><br>
<span class="lineno"></span><span class="op" id="1988352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1988355">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="1988425">func</span>&nbsp;<span class="op" id="1988430">(</span><span class="ident" id="1988431">d</span>&nbsp;<span class="op" id="1988433">*</span><span class="ident" id="1988434">decodeState</span><span class="op" id="1988445">)</span>&nbsp;<span class="ident" id="1988447">objectInterface</span><span class="op" id="1988462">(</span><span class="op" id="1988463">)</span>&nbsp;<span class="keyword" id="1988465">map</span><span class="op" id="1988468">[</span><span class="builtintype" id="1988469">string</span><span class="op" id="1988475">]</span><span class="keyword" id="1988476">interface</span><span class="op" id="1988485">{</span><span class="op" id="1988486">}</span>&nbsp;<span class="op" id="1988488">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988491">m</span>&nbsp;<span class="op" id="1988493">:=</span>&nbsp;<span class="builtinfunc" id="1988496">make</span><span class="op" id="1988500">(</span><span class="keyword" id="1988501">map</span><span class="op" id="1988504">[</span><span class="builtintype" id="1988505">string</span><span class="op" id="1988511">]</span><span class="keyword" id="1988512">interface</span><span class="op" id="1988521">{</span><span class="op" id="1988522">}</span><span class="op" id="1988523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988526">for</span>&nbsp;<span class="op" id="1988530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1988534">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988582">op</span>&nbsp;<span class="op" id="1988585">:=</span>&nbsp;<span class="ident" id="1988588">d</span><span class="op" id="1988589">.</span><span class="ident" id="1988590">scanWhile</span><span class="op" id="1988599">(</span><span class="ident" id="1988600">scanSkipSpace</span><span class="op" id="1988613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988617">if</span>&nbsp;<span class="ident" id="1988620">op</span>&nbsp;<span class="op" id="1988623">==</span>&nbsp;<span class="ident" id="1988626">scanEndObject</span>&nbsp;<span class="op" id="1988640">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1988645">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988699">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988711">if</span>&nbsp;<span class="ident" id="1988714">op</span>&nbsp;<span class="op" id="1988717">!=</span>&nbsp;<span class="ident" id="1988720">scanBeginLiteral</span>&nbsp;<span class="op" id="1988737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988742">d</span><span class="op" id="1988743">.</span><span class="builtintype" id="1988744">error</span><span class="op" id="1988749">(</span><span class="ident" id="1988750">errPhase</span><span class="op" id="1988758">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1988767">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988789">start</span>&nbsp;<span class="op" id="1988795">:=</span>&nbsp;<span class="ident" id="1988798">d</span><span class="op" id="1988799">.</span><span class="ident" id="1988800">off</span>&nbsp;<span class="op" id="1988804">-</span>&nbsp;<span class="num" id="1988806">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988810">op</span>&nbsp;<span class="op" id="1988813">=</span>&nbsp;<span class="ident" id="1988815">d</span><span class="op" id="1988816">.</span><span class="ident" id="1988817">scanWhile</span><span class="op" id="1988826">(</span><span class="ident" id="1988827">scanContinue</span><span class="op" id="1988839">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988843">item</span>&nbsp;<span class="op" id="1988848">:=</span>&nbsp;<span class="ident" id="1988851">d</span><span class="op" id="1988852">.</span><span class="ident" id="1988853">data</span><span class="op" id="1988857">[</span><span class="ident" id="1988858">start</span>&nbsp;<span class="op" id="1988864">:</span>&nbsp;<span class="ident" id="1988866">d</span><span class="op" id="1988867">.</span><span class="ident" id="1988868">off</span><span class="op" id="1988871">-</span><span class="num" id="1988872">1</span><span class="op" id="1988873">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988877">key</span><span class="op" id="1988880">,</span>&nbsp;<span class="ident" id="1988882">ok</span>&nbsp;<span class="op" id="1988885">:=</span>&nbsp;<span class="ident" id="1988888">unquote</span><span class="op" id="1988895">(</span><span class="ident" id="1988896">item</span><span class="op" id="1988900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988904">if</span>&nbsp;<span class="op" id="1988907">!</span><span class="ident" id="1988908">ok</span>&nbsp;<span class="op" id="1988911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988916">d</span><span class="op" id="1988917">.</span><span class="builtintype" id="1988918">error</span><span class="op" id="1988923">(</span><span class="ident" id="1988924">errPhase</span><span class="op" id="1988932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1988936">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1988941">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1988967">if</span>&nbsp;<span class="ident" id="1988970">op</span>&nbsp;<span class="op" id="1988973">==</span>&nbsp;<span class="ident" id="1988976">scanSkipSpace</span>&nbsp;<span class="op" id="1988990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1988995">op</span>&nbsp;<span class="op" id="1988998">=</span>&nbsp;<span class="ident" id="1989000">d</span><span class="op" id="1989001">.</span><span class="ident" id="1989002">scanWhile</span><span class="op" id="1989011">(</span><span class="ident" id="1989012">scanSkipSpace</span><span class="op" id="1989025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989029">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989033">if</span>&nbsp;<span class="ident" id="1989036">op</span>&nbsp;<span class="op" id="1989039">!=</span>&nbsp;<span class="ident" id="1989042">scanObjectKey</span>&nbsp;<span class="op" id="1989056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989061">d</span><span class="op" id="1989062">.</span><span class="builtintype" id="1989063">error</span><span class="op" id="1989068">(</span><span class="ident" id="1989069">errPhase</span><span class="op" id="1989077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1989086">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989103">m</span><span class="op" id="1989104">[</span><span class="ident" id="1989105">key</span><span class="op" id="1989108">]</span>&nbsp;<span class="op" id="1989110">=</span>&nbsp;<span class="ident" id="1989112">d</span><span class="op" id="1989113">.</span><span class="ident" id="1989114">valueInterface</span><span class="op" id="1989128">(</span><span class="op" id="1989129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1989134">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989166">op</span>&nbsp;<span class="op" id="1989169">=</span>&nbsp;<span class="ident" id="1989171">d</span><span class="op" id="1989172">.</span><span class="ident" id="1989173">scanWhile</span><span class="op" id="1989182">(</span><span class="ident" id="1989183">scanSkipSpace</span><span class="op" id="1989196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989200">if</span>&nbsp;<span class="ident" id="1989203">op</span>&nbsp;<span class="op" id="1989206">==</span>&nbsp;<span class="ident" id="1989209">scanEndObject</span>&nbsp;<span class="op" id="1989223">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989228">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989240">if</span>&nbsp;<span class="ident" id="1989243">op</span>&nbsp;<span class="op" id="1989246">!=</span>&nbsp;<span class="ident" id="1989249">scanObjectValue</span>&nbsp;<span class="op" id="1989265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989270">d</span><span class="op" id="1989271">.</span><span class="builtintype" id="1989272">error</span><span class="op" id="1989277">(</span><span class="ident" id="1989278">errPhase</span><span class="op" id="1989286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989290">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989296">return</span>&nbsp;<span class="ident" id="1989303">m</span><br>
<span class="lineno"></span><span class="op" id="1989305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1989308">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="1989376">func</span>&nbsp;<span class="op" id="1989381">(</span><span class="ident" id="1989382">d</span>&nbsp;<span class="op" id="1989384">*</span><span class="ident" id="1989385">decodeState</span><span class="op" id="1989396">)</span>&nbsp;<span class="ident" id="1989398">literalInterface</span><span class="op" id="1989414">(</span><span class="op" id="1989415">)</span>&nbsp;<span class="keyword" id="1989417">interface</span><span class="op" id="1989426">{</span><span class="op" id="1989427">}</span>&nbsp;<span class="op" id="1989429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1989432">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989490">start</span>&nbsp;<span class="op" id="1989496">:=</span>&nbsp;<span class="ident" id="1989499">d</span><span class="op" id="1989500">.</span><span class="ident" id="1989501">off</span>&nbsp;<span class="op" id="1989505">-</span>&nbsp;<span class="num" id="1989507">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989510">op</span>&nbsp;<span class="op" id="1989513">:=</span>&nbsp;<span class="ident" id="1989516">d</span><span class="op" id="1989517">.</span><span class="ident" id="1989518">scanWhile</span><span class="op" id="1989527">(</span><span class="ident" id="1989528">scanContinue</span><span class="op" id="1989540">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1989544">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989585">d</span><span class="op" id="1989586">.</span><span class="ident" id="1989587">off</span><span class="op" id="1989590">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989594">d</span><span class="op" id="1989595">.</span><span class="ident" id="1989596">scan</span><span class="op" id="1989600">.</span><span class="ident" id="1989601">undo</span><span class="op" id="1989605">(</span><span class="ident" id="1989606">op</span><span class="op" id="1989608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989611">item</span>&nbsp;<span class="op" id="1989616">:=</span>&nbsp;<span class="ident" id="1989619">d</span><span class="op" id="1989620">.</span><span class="ident" id="1989621">data</span><span class="op" id="1989625">[</span><span class="ident" id="1989626">start</span><span class="op" id="1989631">:</span><span class="ident" id="1989632">d</span><span class="op" id="1989633">.</span><span class="ident" id="1989634">off</span><span class="op" id="1989637">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989641">switch</span>&nbsp;<span class="ident" id="1989648">c</span>&nbsp;<span class="op" id="1989650">:=</span>&nbsp;<span class="ident" id="1989653">item</span><span class="op" id="1989657">[</span><span class="num" id="1989658">0</span><span class="op" id="1989659">]</span><span class="op" id="1989660">;</span>&nbsp;<span class="ident" id="1989662">c</span>&nbsp;<span class="op" id="1989664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989667">case</span>&nbsp;<span class="string" id="1989672">&#39;n&#39;</span><span class="op" id="1989675">:</span>&nbsp;<span class="comment" id="1989677">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989687">return</span>&nbsp;<span class="builtintype" id="1989694">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989700">case</span>&nbsp;<span class="string" id="1989705">&#39;t&#39;</span><span class="op" id="1989708">,</span>&nbsp;<span class="string" id="1989710">&#39;f&#39;</span><span class="op" id="1989713">:</span>&nbsp;<span class="comment" id="1989715">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989732">return</span>&nbsp;<span class="ident" id="1989739">c</span>&nbsp;<span class="op" id="1989741">==</span>&nbsp;<span class="string" id="1989744">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989750">case</span>&nbsp;<span class="string" id="1989755">&#39;&#34;&#39;</span><span class="op" id="1989758">:</span>&nbsp;<span class="comment" id="1989760">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989772">s</span><span class="op" id="1989773">,</span>&nbsp;<span class="ident" id="1989775">ok</span>&nbsp;<span class="op" id="1989778">:=</span>&nbsp;<span class="ident" id="1989781">unquote</span><span class="op" id="1989788">(</span><span class="ident" id="1989789">item</span><span class="op" id="1989793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989797">if</span>&nbsp;<span class="op" id="1989800">!</span><span class="ident" id="1989801">ok</span>&nbsp;<span class="op" id="1989804">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989809">d</span><span class="op" id="1989810">.</span><span class="builtintype" id="1989811">error</span><span class="op" id="1989816">(</span><span class="ident" id="1989817">errPhase</span><span class="op" id="1989825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989833">return</span>&nbsp;<span class="ident" id="1989840">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989844">default</span><span class="op" id="1989851">:</span>&nbsp;<span class="comment" id="1989853">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989865">if</span>&nbsp;<span class="ident" id="1989868">c</span>&nbsp;<span class="op" id="1989870">!=</span>&nbsp;<span class="string" id="1989873">&#39;-&#39;</span>&nbsp;<span class="op" id="1989877">&amp;&amp;</span>&nbsp;<span class="op" id="1989880">(</span><span class="ident" id="1989881">c</span>&nbsp;<span class="op" id="1989883">&lt;</span>&nbsp;<span class="string" id="1989885">&#39;0&#39;</span>&nbsp;<span class="op" id="1989889">||</span>&nbsp;<span class="ident" id="1989892">c</span>&nbsp;<span class="op" id="1989894">&gt;</span>&nbsp;<span class="string" id="1989896">&#39;9&#39;</span><span class="op" id="1989899">)</span>&nbsp;<span class="op" id="1989901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989906">d</span><span class="op" id="1989907">.</span><span class="builtintype" id="1989908">error</span><span class="op" id="1989913">(</span><span class="ident" id="1989914">errPhase</span><span class="op" id="1989922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1989926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989930">n</span><span class="op" id="1989931">,</span>&nbsp;<span class="ident" id="1989933">err</span>&nbsp;<span class="op" id="1989937">:=</span>&nbsp;<span class="ident" id="1989940">d</span><span class="op" id="1989941">.</span><span class="ident" id="1989942">convertNumber</span><span class="op" id="1989955">(</span><span class="builtintype" id="1989956">string</span><span class="op" id="1989962">(</span><span class="ident" id="1989963">item</span><span class="op" id="1989967">)</span><span class="op" id="1989968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1989972">if</span>&nbsp;<span class="ident" id="1989975">err</span>&nbsp;<span class="op" id="1989979">!=</span>&nbsp;<span class="builtintype" id="1989982">nil</span>&nbsp;<span class="op" id="1989986">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1989991">d</span><span class="op" id="1989992">.</span><span class="ident" id="1989993">saveError</span><span class="op" id="1990002">(</span><span class="ident" id="1990003">err</span><span class="op" id="1990006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990014">return</span>&nbsp;<span class="ident" id="1990021">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990024">}</span><br>
<span class="lineno"></span><span class="op" id="1990026">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="1990029">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="1990103">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="1990124">func</span>&nbsp;<span class="ident" id="1990129">getu4</span><span class="op" id="1990134">(</span><span class="ident" id="1990135">s</span>&nbsp;<span class="op" id="1990137">[</span><span class="op" id="1990138">]</span><span class="builtintype" id="1990139">byte</span><span class="op" id="1990143">)</span>&nbsp;<span class="builtintype" id="1990145">rune</span>&nbsp;<span class="op" id="1990150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990153">if</span>&nbsp;<span class="builtinfunc" id="1990156">len</span><span class="op" id="1990159">(</span><span class="ident" id="1990160">s</span><span class="op" id="1990161">)</span>&nbsp;<span class="op" id="1990163">&lt;</span>&nbsp;<span class="num" id="1990165">6</span>&nbsp;<span class="op" id="1990167">||</span>&nbsp;<span class="ident" id="1990170">s</span><span class="op" id="1990171">[</span><span class="num" id="1990172">0</span><span class="op" id="1990173">]</span>&nbsp;<span class="op" id="1990175">!=</span>&nbsp;<span class="string" id="1990178">&#39;\\&#39;</span>&nbsp;<span class="op" id="1990183">||</span>&nbsp;<span class="ident" id="1990186">s</span><span class="op" id="1990187">[</span><span class="num" id="1990188">1</span><span class="op" id="1990189">]</span>&nbsp;<span class="op" id="1990191">!=</span>&nbsp;<span class="string" id="1990194">&#39;u&#39;</span>&nbsp;<span class="op" id="1990198">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990202">return</span>&nbsp;<span class="op" id="1990209">-</span><span class="num" id="1990210">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990216">r</span><span class="op" id="1990217">,</span>&nbsp;<span class="ident" id="1990219">err</span>&nbsp;<span class="op" id="1990223">:=</span>&nbsp;<span class="ident" id="1990226">strconv</span><span class="op" id="1990233">.</span><span class="ident" id="1990234">ParseUint</span><span class="op" id="1990243">(</span><span class="builtintype" id="1990244">string</span><span class="op" id="1990250">(</span><span class="ident" id="1990251">s</span><span class="op" id="1990252">[</span><span class="num" id="1990253">2</span><span class="op" id="1990254">:</span><span class="num" id="1990255">6</span><span class="op" id="1990256">]</span><span class="op" id="1990257">)</span><span class="op" id="1990258">,</span>&nbsp;<span class="num" id="1990260">16</span><span class="op" id="1990262">,</span>&nbsp;<span class="num" id="1990264">64</span><span class="op" id="1990266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990269">if</span>&nbsp;<span class="ident" id="1990272">err</span>&nbsp;<span class="op" id="1990276">!=</span>&nbsp;<span class="builtintype" id="1990279">nil</span>&nbsp;<span class="op" id="1990283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990287">return</span>&nbsp;<span class="op" id="1990294">-</span><span class="num" id="1990295">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990301">return</span>&nbsp;<span class="builtintype" id="1990308">rune</span><span class="op" id="1990312">(</span><span class="ident" id="1990313">r</span><span class="op" id="1990314">)</span><br>
<span class="lineno"></span><span class="op" id="1990316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1990319">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="1990395">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="1990466">func</span>&nbsp;<span class="ident" id="1990471">unquote</span><span class="op" id="1990478">(</span><span class="ident" id="1990479">s</span>&nbsp;<span class="op" id="1990481">[</span><span class="op" id="1990482">]</span><span class="builtintype" id="1990483">byte</span><span class="op" id="1990487">)</span>&nbsp;<span class="op" id="1990489">(</span><span class="ident" id="1990490">t</span>&nbsp;<span class="builtintype" id="1990492">string</span><span class="op" id="1990498">,</span>&nbsp;<span class="ident" id="1990500">ok</span>&nbsp;<span class="builtintype" id="1990503">bool</span><span class="op" id="1990507">)</span>&nbsp;<span class="op" id="1990509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990512">s</span><span class="op" id="1990513">,</span>&nbsp;<span class="ident" id="1990515">ok</span>&nbsp;<span class="op" id="1990518">=</span>&nbsp;<span class="ident" id="1990520">unquoteBytes</span><span class="op" id="1990532">(</span><span class="ident" id="1990533">s</span><span class="op" id="1990534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990537">t</span>&nbsp;<span class="op" id="1990539">=</span>&nbsp;<span class="builtintype" id="1990541">string</span><span class="op" id="1990547">(</span><span class="ident" id="1990548">s</span><span class="op" id="1990549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990552">return</span><br>
<span class="lineno">970</span><span class="op" id="1990559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1990562">func</span>&nbsp;<span class="ident" id="1990567">unquoteBytes</span><span class="op" id="1990579">(</span><span class="ident" id="1990580">s</span>&nbsp;<span class="op" id="1990582">[</span><span class="op" id="1990583">]</span><span class="builtintype" id="1990584">byte</span><span class="op" id="1990588">)</span>&nbsp;<span class="op" id="1990590">(</span><span class="ident" id="1990591">t</span>&nbsp;<span class="op" id="1990593">[</span><span class="op" id="1990594">]</span><span class="builtintype" id="1990595">byte</span><span class="op" id="1990599">,</span>&nbsp;<span class="ident" id="1990601">ok</span>&nbsp;<span class="builtintype" id="1990604">bool</span><span class="op" id="1990608">)</span>&nbsp;<span class="op" id="1990610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990613">if</span>&nbsp;<span class="builtinfunc" id="1990616">len</span><span class="op" id="1990619">(</span><span class="ident" id="1990620">s</span><span class="op" id="1990621">)</span>&nbsp;<span class="op" id="1990623">&lt;</span>&nbsp;<span class="num" id="1990625">2</span>&nbsp;<span class="op" id="1990627">||</span>&nbsp;<span class="ident" id="1990630">s</span><span class="op" id="1990631">[</span><span class="num" id="1990632">0</span><span class="op" id="1990633">]</span>&nbsp;<span class="op" id="1990635">!=</span>&nbsp;<span class="string" id="1990638">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="1990642">||</span>&nbsp;<span class="ident" id="1990645">s</span><span class="op" id="1990646">[</span><span class="builtinfunc" id="1990647">len</span><span class="op" id="1990650">(</span><span class="ident" id="1990651">s</span><span class="op" id="1990652">)</span><span class="op" id="1990653">-</span><span class="num" id="1990654">1</span><span class="op" id="1990655">]</span>&nbsp;<span class="op" id="1990657">!=</span>&nbsp;<span class="string" id="1990660">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="1990664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990668">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990679">s</span>&nbsp;<span class="op" id="1990681">=</span>&nbsp;<span class="ident" id="1990683">s</span><span class="op" id="1990684">[</span><span class="num" id="1990685">1</span>&nbsp;<span class="op" id="1990687">:</span>&nbsp;<span class="builtinfunc" id="1990689">len</span><span class="op" id="1990692">(</span><span class="ident" id="1990693">s</span><span class="op" id="1990694">)</span><span class="op" id="1990695">-</span><span class="num" id="1990696">1</span><span class="op" id="1990697">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1990701">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1990754">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1990812">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990832">r</span>&nbsp;<span class="op" id="1990834">:=</span>&nbsp;<span class="num" id="1990837">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990840">for</span>&nbsp;<span class="ident" id="1990844">r</span>&nbsp;<span class="op" id="1990846">&lt;</span>&nbsp;<span class="builtinfunc" id="1990848">len</span><span class="op" id="1990851">(</span><span class="ident" id="1990852">s</span><span class="op" id="1990853">)</span>&nbsp;<span class="op" id="1990855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990859">c</span>&nbsp;<span class="op" id="1990861">:=</span>&nbsp;<span class="ident" id="1990864">s</span><span class="op" id="1990865">[</span><span class="ident" id="1990866">r</span><span class="op" id="1990867">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990871">if</span>&nbsp;<span class="ident" id="1990874">c</span>&nbsp;<span class="op" id="1990876">==</span>&nbsp;<span class="string" id="1990879">&#39;\\&#39;</span>&nbsp;<span class="op" id="1990884">||</span>&nbsp;<span class="ident" id="1990887">c</span>&nbsp;<span class="op" id="1990889">==</span>&nbsp;<span class="string" id="1990892">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="1990896">||</span>&nbsp;<span class="ident" id="1990899">c</span>&nbsp;<span class="op" id="1990901">&lt;</span>&nbsp;<span class="string" id="1990903">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="1990907">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990912">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990924">if</span>&nbsp;<span class="ident" id="1990927">c</span>&nbsp;<span class="op" id="1990929">&lt;</span>&nbsp;<span class="ident" id="1990931">utf8</span><span class="op" id="1990935">.</span><span class="ident" id="1990936">RuneSelf</span>&nbsp;<span class="op" id="1990945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990950">r</span><span class="op" id="1990951">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1990957">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1990968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1990972">rr</span><span class="op" id="1990974">,</span>&nbsp;<span class="ident" id="1990976">size</span>&nbsp;<span class="op" id="1990981">:=</span>&nbsp;<span class="ident" id="1990984">utf8</span><span class="op" id="1990988">.</span><span class="ident" id="1990989">DecodeRune</span><span class="op" id="1990999">(</span><span class="ident" id="1991000">s</span><span class="op" id="1991001">[</span><span class="ident" id="1991002">r</span><span class="op" id="1991003">:</span><span class="op" id="1991004">]</span><span class="op" id="1991005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991009">if</span>&nbsp;<span class="ident" id="1991012">rr</span>&nbsp;<span class="op" id="1991015">==</span>&nbsp;<span class="ident" id="1991018">utf8</span><span class="op" id="1991022">.</span><span class="ident" id="1991023">RuneError</span>&nbsp;<span class="op" id="1991033">&amp;&amp;</span>&nbsp;<span class="ident" id="1991036">size</span>&nbsp;<span class="op" id="1991041">==</span>&nbsp;<span class="num" id="1991044">1</span>&nbsp;<span class="op" id="1991046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1991059">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991063">r</span>&nbsp;<span class="op" id="1991065">+=</span>&nbsp;<span class="ident" id="1991068">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1991074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991077">if</span>&nbsp;<span class="ident" id="1991080">r</span>&nbsp;<span class="op" id="1991082">==</span>&nbsp;<span class="builtinfunc" id="1991085">len</span><span class="op" id="1991088">(</span><span class="ident" id="1991089">s</span><span class="op" id="1991090">)</span>&nbsp;<span class="op" id="1991092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991096">return</span>&nbsp;<span class="ident" id="1991103">s</span><span class="op" id="1991104">,</span>&nbsp;<span class="builtintype" id="1991106">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1991112">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991116">b</span>&nbsp;<span class="op" id="1991118">:=</span>&nbsp;<span class="builtinfunc" id="1991121">make</span><span class="op" id="1991125">(</span><span class="op" id="1991126">[</span><span class="op" id="1991127">]</span><span class="builtintype" id="1991128">byte</span><span class="op" id="1991132">,</span>&nbsp;<span class="builtinfunc" id="1991134">len</span><span class="op" id="1991137">(</span><span class="ident" id="1991138">s</span><span class="op" id="1991139">)</span><span class="op" id="1991140">+</span><span class="num" id="1991141">2</span><span class="op" id="1991142">*</span><span class="ident" id="1991143">utf8</span><span class="op" id="1991147">.</span><span class="ident" id="1991148">UTFMax</span><span class="op" id="1991154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991157">w</span>&nbsp;<span class="op" id="1991159">:=</span>&nbsp;<span class="builtinfunc" id="1991162">copy</span><span class="op" id="1991166">(</span><span class="ident" id="1991167">b</span><span class="op" id="1991168">,</span>&nbsp;<span class="ident" id="1991170">s</span><span class="op" id="1991171">[</span><span class="num" id="1991172">0</span><span class="op" id="1991173">:</span><span class="ident" id="1991174">r</span><span class="op" id="1991175">]</span><span class="op" id="1991176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991179">for</span>&nbsp;<span class="ident" id="1991183">r</span>&nbsp;<span class="op" id="1991185">&lt;</span>&nbsp;<span class="builtinfunc" id="1991187">len</span><span class="op" id="1991190">(</span><span class="ident" id="1991191">s</span><span class="op" id="1991192">)</span>&nbsp;<span class="op" id="1991194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1991198">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1991249">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1991295">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991321">if</span>&nbsp;<span class="ident" id="1991324">w</span>&nbsp;<span class="op" id="1991326">&gt;=</span>&nbsp;<span class="builtinfunc" id="1991329">len</span><span class="op" id="1991332">(</span><span class="ident" id="1991333">b</span><span class="op" id="1991334">)</span><span class="op" id="1991335">-</span><span class="num" id="1991336">2</span><span class="op" id="1991337">*</span><span class="ident" id="1991338">utf8</span><span class="op" id="1991342">.</span><span class="ident" id="1991343">UTFMax</span>&nbsp;<span class="op" id="1991350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991355">nb</span>&nbsp;<span class="op" id="1991358">:=</span>&nbsp;<span class="builtinfunc" id="1991361">make</span><span class="op" id="1991365">(</span><span class="op" id="1991366">[</span><span class="op" id="1991367">]</span><span class="builtintype" id="1991368">byte</span><span class="op" id="1991372">,</span>&nbsp;<span class="op" id="1991374">(</span><span class="builtinfunc" id="1991375">len</span><span class="op" id="1991378">(</span><span class="ident" id="1991379">b</span><span class="op" id="1991380">)</span><span class="op" id="1991381">+</span><span class="ident" id="1991382">utf8</span><span class="op" id="1991386">.</span><span class="ident" id="1991387">UTFMax</span><span class="op" id="1991393">)</span><span class="op" id="1991394">*</span><span class="num" id="1991395">2</span><span class="op" id="1991396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1991401">copy</span><span class="op" id="1991405">(</span><span class="ident" id="1991406">nb</span><span class="op" id="1991408">,</span>&nbsp;<span class="ident" id="1991410">b</span><span class="op" id="1991411">[</span><span class="num" id="1991412">0</span><span class="op" id="1991413">:</span><span class="ident" id="1991414">w</span><span class="op" id="1991415">]</span><span class="op" id="1991416">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991421">b</span>&nbsp;<span class="op" id="1991423">=</span>&nbsp;<span class="ident" id="1991425">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1991430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991434">switch</span>&nbsp;<span class="ident" id="1991441">c</span>&nbsp;<span class="op" id="1991443">:=</span>&nbsp;<span class="ident" id="1991446">s</span><span class="op" id="1991447">[</span><span class="ident" id="1991448">r</span><span class="op" id="1991449">]</span><span class="op" id="1991450">;</span>&nbsp;<span class="op" id="1991452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991456">case</span>&nbsp;<span class="ident" id="1991461">c</span>&nbsp;<span class="op" id="1991463">==</span>&nbsp;<span class="string" id="1991466">&#39;\\&#39;</span><span class="op" id="1991470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991475">r</span><span class="op" id="1991476">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991482">if</span>&nbsp;<span class="ident" id="1991485">r</span>&nbsp;<span class="op" id="1991487">&gt;=</span>&nbsp;<span class="builtinfunc" id="1991490">len</span><span class="op" id="1991493">(</span><span class="ident" id="1991494">s</span><span class="op" id="1991495">)</span>&nbsp;<span class="op" id="1991497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991503">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1991513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991518">switch</span>&nbsp;<span class="ident" id="1991525">s</span><span class="op" id="1991526">[</span><span class="ident" id="1991527">r</span><span class="op" id="1991528">]</span>&nbsp;<span class="op" id="1991530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991535">default</span><span class="op" id="1991542">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991548">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991558">case</span>&nbsp;<span class="string" id="1991563">&#39;&#34;&#39;</span><span class="op" id="1991566">,</span>&nbsp;<span class="string" id="1991568">&#39;\\&#39;</span><span class="op" id="1991572">,</span>&nbsp;<span class="string" id="1991574">&#39;/&#39;</span><span class="op" id="1991577">,</span>&nbsp;<span class="string" id="1991579">&#39;\&#39;&#39;</span><span class="op" id="1991583">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991589">b</span><span class="op" id="1991590">[</span><span class="ident" id="1991591">w</span><span class="op" id="1991592">]</span>&nbsp;<span class="op" id="1991594">=</span>&nbsp;<span class="ident" id="1991596">s</span><span class="op" id="1991597">[</span><span class="ident" id="1991598">r</span><span class="op" id="1991599">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991605">r</span><span class="op" id="1991606">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991613">w</span><span class="op" id="1991614">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991620">case</span>&nbsp;<span class="string" id="1991625">&#39;b&#39;</span><span class="op" id="1991628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991634">b</span><span class="op" id="1991635">[</span><span class="ident" id="1991636">w</span><span class="op" id="1991637">]</span>&nbsp;<span class="op" id="1991639">=</span>&nbsp;<span class="string" id="1991641">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991650">r</span><span class="op" id="1991651">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991658">w</span><span class="op" id="1991659">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991665">case</span>&nbsp;<span class="string" id="1991670">&#39;f&#39;</span><span class="op" id="1991673">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991679">b</span><span class="op" id="1991680">[</span><span class="ident" id="1991681">w</span><span class="op" id="1991682">]</span>&nbsp;<span class="op" id="1991684">=</span>&nbsp;<span class="string" id="1991686">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991695">r</span><span class="op" id="1991696">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991703">w</span><span class="op" id="1991704">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991710">case</span>&nbsp;<span class="string" id="1991715">&#39;n&#39;</span><span class="op" id="1991718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991724">b</span><span class="op" id="1991725">[</span><span class="ident" id="1991726">w</span><span class="op" id="1991727">]</span>&nbsp;<span class="op" id="1991729">=</span>&nbsp;<span class="string" id="1991731">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991740">r</span><span class="op" id="1991741">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991748">w</span><span class="op" id="1991749">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991755">case</span>&nbsp;<span class="string" id="1991760">&#39;r&#39;</span><span class="op" id="1991763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991769">b</span><span class="op" id="1991770">[</span><span class="ident" id="1991771">w</span><span class="op" id="1991772">]</span>&nbsp;<span class="op" id="1991774">=</span>&nbsp;<span class="string" id="1991776">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991785">r</span><span class="op" id="1991786">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991793">w</span><span class="op" id="1991794">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991800">case</span>&nbsp;<span class="string" id="1991805">&#39;t&#39;</span><span class="op" id="1991808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991814">b</span><span class="op" id="1991815">[</span><span class="ident" id="1991816">w</span><span class="op" id="1991817">]</span>&nbsp;<span class="op" id="1991819">=</span>&nbsp;<span class="string" id="1991821">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991830">r</span><span class="op" id="1991831">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991838">w</span><span class="op" id="1991839">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991845">case</span>&nbsp;<span class="string" id="1991850">&#39;u&#39;</span><span class="op" id="1991853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991859">r</span><span class="op" id="1991860">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991867">rr</span>&nbsp;<span class="op" id="1991870">:=</span>&nbsp;<span class="ident" id="1991873">getu4</span><span class="op" id="1991878">(</span><span class="ident" id="1991879">s</span><span class="op" id="1991880">[</span><span class="ident" id="1991881">r</span><span class="op" id="1991882">:</span><span class="op" id="1991883">]</span><span class="op" id="1991884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991890">if</span>&nbsp;<span class="ident" id="1991893">rr</span>&nbsp;<span class="op" id="1991896">&lt;</span>&nbsp;<span class="num" id="1991898">0</span>&nbsp;<span class="op" id="1991900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991907">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1991918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991924">r</span>&nbsp;<span class="op" id="1991926">+=</span>&nbsp;<span class="num" id="1991929">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991935">if</span>&nbsp;<span class="ident" id="1991938">utf16</span><span class="op" id="1991943">.</span><span class="ident" id="1991944">IsSurrogate</span><span class="op" id="1991955">(</span><span class="ident" id="1991956">rr</span><span class="op" id="1991958">)</span>&nbsp;<span class="op" id="1991960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1991967">rr1</span>&nbsp;<span class="op" id="1991971">:=</span>&nbsp;<span class="ident" id="1991974">getu4</span><span class="op" id="1991979">(</span><span class="ident" id="1991980">s</span><span class="op" id="1991981">[</span><span class="ident" id="1991982">r</span><span class="op" id="1991983">:</span><span class="op" id="1991984">]</span><span class="op" id="1991985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1991992">if</span>&nbsp;<span class="ident" id="1991995">dec</span>&nbsp;<span class="op" id="1991999">:=</span>&nbsp;<span class="ident" id="1992002">utf16</span><span class="op" id="1992007">.</span><span class="ident" id="1992008">DecodeRune</span><span class="op" id="1992018">(</span><span class="ident" id="1992019">rr</span><span class="op" id="1992021">,</span>&nbsp;<span class="ident" id="1992023">rr1</span><span class="op" id="1992026">)</span><span class="op" id="1992027">;</span>&nbsp;<span class="ident" id="1992029">dec</span>&nbsp;<span class="op" id="1992033">!=</span>&nbsp;<span class="ident" id="1992036">unicode</span><span class="op" id="1992043">.</span><span class="ident" id="1992044">ReplacementChar</span>&nbsp;<span class="op" id="1992060">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1992068">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992100">r</span>&nbsp;<span class="op" id="1992102">+=</span>&nbsp;<span class="num" id="1992105">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992113">w</span>&nbsp;<span class="op" id="1992115">+=</span>&nbsp;<span class="ident" id="1992118">utf8</span><span class="op" id="1992122">.</span><span class="ident" id="1992123">EncodeRune</span><span class="op" id="1992133">(</span><span class="ident" id="1992134">b</span><span class="op" id="1992135">[</span><span class="ident" id="1992136">w</span><span class="op" id="1992137">:</span><span class="op" id="1992138">]</span><span class="op" id="1992139">,</span>&nbsp;<span class="ident" id="1992141">dec</span><span class="op" id="1992144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1992152">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1992163">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1992170">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992228">rr</span>&nbsp;<span class="op" id="1992231">=</span>&nbsp;<span class="ident" id="1992233">unicode</span><span class="op" id="1992240">.</span><span class="ident" id="1992241">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1992261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992267">w</span>&nbsp;<span class="op" id="1992269">+=</span>&nbsp;<span class="ident" id="1992272">utf8</span><span class="op" id="1992276">.</span><span class="ident" id="1992277">EncodeRune</span><span class="op" id="1992287">(</span><span class="ident" id="1992288">b</span><span class="op" id="1992289">[</span><span class="ident" id="1992290">w</span><span class="op" id="1992291">:</span><span class="op" id="1992292">]</span><span class="op" id="1992293">,</span>&nbsp;<span class="ident" id="1992295">rr</span><span class="op" id="1992297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1992302">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1992307">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1992351">case</span>&nbsp;<span class="ident" id="1992356">c</span>&nbsp;<span class="op" id="1992358">==</span>&nbsp;<span class="string" id="1992361">&#39;&#34;&#39;</span><span class="op" id="1992364">,</span>&nbsp;<span class="ident" id="1992366">c</span>&nbsp;<span class="op" id="1992368">&lt;</span>&nbsp;<span class="string" id="1992370">&#39;&nbsp;&#39;</span><span class="op" id="1992373">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1992378">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1992388">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1992399">case</span>&nbsp;<span class="ident" id="1992404">c</span>&nbsp;<span class="op" id="1992406">&lt;</span>&nbsp;<span class="ident" id="1992408">utf8</span><span class="op" id="1992412">.</span><span class="ident" id="1992413">RuneSelf</span><span class="op" id="1992421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992426">b</span><span class="op" id="1992427">[</span><span class="ident" id="1992428">w</span><span class="op" id="1992429">]</span>&nbsp;<span class="op" id="1992431">=</span>&nbsp;<span class="ident" id="1992433">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992438">r</span><span class="op" id="1992439">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992445">w</span><span class="op" id="1992446">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1992452">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1992486">default</span><span class="op" id="1992493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992498">rr</span><span class="op" id="1992500">,</span>&nbsp;<span class="ident" id="1992502">size</span>&nbsp;<span class="op" id="1992507">:=</span>&nbsp;<span class="ident" id="1992510">utf8</span><span class="op" id="1992514">.</span><span class="ident" id="1992515">DecodeRune</span><span class="op" id="1992525">(</span><span class="ident" id="1992526">s</span><span class="op" id="1992527">[</span><span class="ident" id="1992528">r</span><span class="op" id="1992529">:</span><span class="op" id="1992530">]</span><span class="op" id="1992531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992536">r</span>&nbsp;<span class="op" id="1992538">+=</span>&nbsp;<span class="ident" id="1992541">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1992549">w</span>&nbsp;<span class="op" id="1992551">+=</span>&nbsp;<span class="ident" id="1992554">utf8</span><span class="op" id="1992558">.</span><span class="ident" id="1992559">EncodeRune</span><span class="op" id="1992569">(</span><span class="ident" id="1992570">b</span><span class="op" id="1992571">[</span><span class="ident" id="1992572">w</span><span class="op" id="1992573">:</span><span class="op" id="1992574">]</span><span class="op" id="1992575">,</span>&nbsp;<span class="ident" id="1992577">rr</span><span class="op" id="1992579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1992583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1992586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1992589">return</span>&nbsp;<span class="ident" id="1992596">b</span><span class="op" id="1992597">[</span><span class="num" id="1992598">0</span><span class="op" id="1992599">:</span><span class="ident" id="1992600">w</span><span class="op" id="1992601">]</span><span class="op" id="1992602">,</span>&nbsp;<span class="builtintype" id="1992604">true</span><br>
<span class="lineno"></span><span class="op" id="1992609">}</span>
</div>
</body>
</html>
