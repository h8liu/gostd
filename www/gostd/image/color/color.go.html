<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html" class="current">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5523378">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5523433">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5523487">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5523538">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="5523589">package</span>&nbsp;<span class="ident" id="5523597">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5523604">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="5523681">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="5523713">type</span>&nbsp;<span class="ident" id="5523718">Color</span>&nbsp;<span class="keyword" id="5523724">interface</span>&nbsp;<span class="op" id="5523734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5523737">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5523812">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5523888">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5523964">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523978">RGBA</span><span class="op" id="5523982">(</span><span class="op" id="5523983">)</span>&nbsp;<span class="op" id="5523985">(</span><span class="ident" id="5523986">r</span><span class="op" id="5523987">,</span>&nbsp;<span class="ident" id="5523989">g</span><span class="op" id="5523990">,</span>&nbsp;<span class="ident" id="5523992">b</span><span class="op" id="5523993">,</span>&nbsp;<span class="ident" id="5523995">a</span>&nbsp;<span class="builtintype" id="5523997">uint32</span><span class="op" id="5524003">)</span><br>
<span class="lineno"></span><span class="op" id="5524005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5524008">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5524075">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="5524132">type</span>&nbsp;<span class="ident" id="5524137">RGBA</span>&nbsp;<span class="keyword" id="5524142">struct</span>&nbsp;<span class="op" id="5524149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524152">R</span><span class="op" id="5524153">,</span>&nbsp;<span class="ident" id="5524155">G</span><span class="op" id="5524156">,</span>&nbsp;<span class="ident" id="5524158">B</span><span class="op" id="5524159">,</span>&nbsp;<span class="ident" id="5524161">A</span>&nbsp;<span class="builtintype" id="5524163">uint8</span><br>
<span class="lineno"></span><span class="op" id="5524169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5524172">func</span>&nbsp;<span class="op" id="5524177">(</span><span class="ident" id="5524178">c</span>&nbsp;<span class="ident" id="5524180">RGBA</span><span class="op" id="5524184">)</span>&nbsp;<span class="ident" id="5524186">RGBA</span><span class="op" id="5524190">(</span><span class="op" id="5524191">)</span>&nbsp;<span class="op" id="5524193">(</span><span class="ident" id="5524194">r</span><span class="op" id="5524195">,</span>&nbsp;<span class="ident" id="5524197">g</span><span class="op" id="5524198">,</span>&nbsp;<span class="ident" id="5524200">b</span><span class="op" id="5524201">,</span>&nbsp;<span class="ident" id="5524203">a</span>&nbsp;<span class="builtintype" id="5524205">uint32</span><span class="op" id="5524211">)</span>&nbsp;<span class="op" id="5524213">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524216">r</span>&nbsp;<span class="op" id="5524218">=</span>&nbsp;<span class="builtintype" id="5524220">uint32</span><span class="op" id="5524226">(</span><span class="ident" id="5524227">c</span><span class="op" id="5524228">.</span><span class="ident" id="5524229">R</span><span class="op" id="5524230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524233">r</span>&nbsp;<span class="op" id="5524235">|=</span>&nbsp;<span class="ident" id="5524238">r</span>&nbsp;<span class="op" id="5524240">&lt;&lt;</span>&nbsp;<span class="num" id="5524243">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524246">g</span>&nbsp;<span class="op" id="5524248">=</span>&nbsp;<span class="builtintype" id="5524250">uint32</span><span class="op" id="5524256">(</span><span class="ident" id="5524257">c</span><span class="op" id="5524258">.</span><span class="ident" id="5524259">G</span><span class="op" id="5524260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524263">g</span>&nbsp;<span class="op" id="5524265">|=</span>&nbsp;<span class="ident" id="5524268">g</span>&nbsp;<span class="op" id="5524270">&lt;&lt;</span>&nbsp;<span class="num" id="5524273">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524276">b</span>&nbsp;<span class="op" id="5524278">=</span>&nbsp;<span class="builtintype" id="5524280">uint32</span><span class="op" id="5524286">(</span><span class="ident" id="5524287">c</span><span class="op" id="5524288">.</span><span class="ident" id="5524289">B</span><span class="op" id="5524290">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524293">b</span>&nbsp;<span class="op" id="5524295">|=</span>&nbsp;<span class="ident" id="5524298">b</span>&nbsp;<span class="op" id="5524300">&lt;&lt;</span>&nbsp;<span class="num" id="5524303">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524306">a</span>&nbsp;<span class="op" id="5524308">=</span>&nbsp;<span class="builtintype" id="5524310">uint32</span><span class="op" id="5524316">(</span><span class="ident" id="5524317">c</span><span class="op" id="5524318">.</span><span class="ident" id="5524319">A</span><span class="op" id="5524320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524323">a</span>&nbsp;<span class="op" id="5524325">|=</span>&nbsp;<span class="ident" id="5524328">a</span>&nbsp;<span class="op" id="5524330">&lt;&lt;</span>&nbsp;<span class="num" id="5524333">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524336">return</span><br>
<span class="lineno"></span><span class="op" id="5524343">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5524346">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="5524403">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5524461">type</span>&nbsp;<span class="ident" id="5524466">RGBA64</span>&nbsp;<span class="keyword" id="5524473">struct</span>&nbsp;<span class="op" id="5524480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524483">R</span><span class="op" id="5524484">,</span>&nbsp;<span class="ident" id="5524486">G</span><span class="op" id="5524487">,</span>&nbsp;<span class="ident" id="5524489">B</span><span class="op" id="5524490">,</span>&nbsp;<span class="ident" id="5524492">A</span>&nbsp;<span class="builtintype" id="5524494">uint16</span><br>
<span class="lineno">40</span><span class="op" id="5524501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5524504">func</span>&nbsp;<span class="op" id="5524509">(</span><span class="ident" id="5524510">c</span>&nbsp;<span class="ident" id="5524512">RGBA64</span><span class="op" id="5524518">)</span>&nbsp;<span class="ident" id="5524520">RGBA</span><span class="op" id="5524524">(</span><span class="op" id="5524525">)</span>&nbsp;<span class="op" id="5524527">(</span><span class="ident" id="5524528">r</span><span class="op" id="5524529">,</span>&nbsp;<span class="ident" id="5524531">g</span><span class="op" id="5524532">,</span>&nbsp;<span class="ident" id="5524534">b</span><span class="op" id="5524535">,</span>&nbsp;<span class="ident" id="5524537">a</span>&nbsp;<span class="builtintype" id="5524539">uint32</span><span class="op" id="5524545">)</span>&nbsp;<span class="op" id="5524547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524550">return</span>&nbsp;<span class="builtintype" id="5524557">uint32</span><span class="op" id="5524563">(</span><span class="ident" id="5524564">c</span><span class="op" id="5524565">.</span><span class="ident" id="5524566">R</span><span class="op" id="5524567">)</span><span class="op" id="5524568">,</span>&nbsp;<span class="builtintype" id="5524570">uint32</span><span class="op" id="5524576">(</span><span class="ident" id="5524577">c</span><span class="op" id="5524578">.</span><span class="ident" id="5524579">G</span><span class="op" id="5524580">)</span><span class="op" id="5524581">,</span>&nbsp;<span class="builtintype" id="5524583">uint32</span><span class="op" id="5524589">(</span><span class="ident" id="5524590">c</span><span class="op" id="5524591">.</span><span class="ident" id="5524592">B</span><span class="op" id="5524593">)</span><span class="op" id="5524594">,</span>&nbsp;<span class="builtintype" id="5524596">uint32</span><span class="op" id="5524602">(</span><span class="ident" id="5524603">c</span><span class="op" id="5524604">.</span><span class="ident" id="5524605">A</span><span class="op" id="5524606">)</span><br>
<span class="lineno"></span><span class="op" id="5524608">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5524611">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5524671">type</span>&nbsp;<span class="ident" id="5524676">NRGBA</span>&nbsp;<span class="keyword" id="5524682">struct</span>&nbsp;<span class="op" id="5524689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524692">R</span><span class="op" id="5524693">,</span>&nbsp;<span class="ident" id="5524695">G</span><span class="op" id="5524696">,</span>&nbsp;<span class="ident" id="5524698">B</span><span class="op" id="5524699">,</span>&nbsp;<span class="ident" id="5524701">A</span>&nbsp;<span class="builtintype" id="5524703">uint8</span><br>
<span class="lineno"></span><span class="op" id="5524709">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5524712">func</span>&nbsp;<span class="op" id="5524717">(</span><span class="ident" id="5524718">c</span>&nbsp;<span class="ident" id="5524720">NRGBA</span><span class="op" id="5524725">)</span>&nbsp;<span class="ident" id="5524727">RGBA</span><span class="op" id="5524731">(</span><span class="op" id="5524732">)</span>&nbsp;<span class="op" id="5524734">(</span><span class="ident" id="5524735">r</span><span class="op" id="5524736">,</span>&nbsp;<span class="ident" id="5524738">g</span><span class="op" id="5524739">,</span>&nbsp;<span class="ident" id="5524741">b</span><span class="op" id="5524742">,</span>&nbsp;<span class="ident" id="5524744">a</span>&nbsp;<span class="builtintype" id="5524746">uint32</span><span class="op" id="5524752">)</span>&nbsp;<span class="op" id="5524754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524757">r</span>&nbsp;<span class="op" id="5524759">=</span>&nbsp;<span class="builtintype" id="5524761">uint32</span><span class="op" id="5524767">(</span><span class="ident" id="5524768">c</span><span class="op" id="5524769">.</span><span class="ident" id="5524770">R</span><span class="op" id="5524771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524774">r</span>&nbsp;<span class="op" id="5524776">|=</span>&nbsp;<span class="ident" id="5524779">r</span>&nbsp;<span class="op" id="5524781">&lt;&lt;</span>&nbsp;<span class="num" id="5524784">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524787">r</span>&nbsp;<span class="op" id="5524789">*=</span>&nbsp;<span class="builtintype" id="5524792">uint32</span><span class="op" id="5524798">(</span><span class="ident" id="5524799">c</span><span class="op" id="5524800">.</span><span class="ident" id="5524801">A</span><span class="op" id="5524802">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524805">r</span>&nbsp;<span class="op" id="5524807">/=</span>&nbsp;<span class="num" id="5524810">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524816">g</span>&nbsp;<span class="op" id="5524818">=</span>&nbsp;<span class="builtintype" id="5524820">uint32</span><span class="op" id="5524826">(</span><span class="ident" id="5524827">c</span><span class="op" id="5524828">.</span><span class="ident" id="5524829">G</span><span class="op" id="5524830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524833">g</span>&nbsp;<span class="op" id="5524835">|=</span>&nbsp;<span class="ident" id="5524838">g</span>&nbsp;<span class="op" id="5524840">&lt;&lt;</span>&nbsp;<span class="num" id="5524843">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524846">g</span>&nbsp;<span class="op" id="5524848">*=</span>&nbsp;<span class="builtintype" id="5524851">uint32</span><span class="op" id="5524857">(</span><span class="ident" id="5524858">c</span><span class="op" id="5524859">.</span><span class="ident" id="5524860">A</span><span class="op" id="5524861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524864">g</span>&nbsp;<span class="op" id="5524866">/=</span>&nbsp;<span class="num" id="5524869">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524875">b</span>&nbsp;<span class="op" id="5524877">=</span>&nbsp;<span class="builtintype" id="5524879">uint32</span><span class="op" id="5524885">(</span><span class="ident" id="5524886">c</span><span class="op" id="5524887">.</span><span class="ident" id="5524888">B</span><span class="op" id="5524889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524892">b</span>&nbsp;<span class="op" id="5524894">|=</span>&nbsp;<span class="ident" id="5524897">b</span>&nbsp;<span class="op" id="5524899">&lt;&lt;</span>&nbsp;<span class="num" id="5524902">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524905">b</span>&nbsp;<span class="op" id="5524907">*=</span>&nbsp;<span class="builtintype" id="5524910">uint32</span><span class="op" id="5524916">(</span><span class="ident" id="5524917">c</span><span class="op" id="5524918">.</span><span class="ident" id="5524919">A</span><span class="op" id="5524920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524923">b</span>&nbsp;<span class="op" id="5524925">/=</span>&nbsp;<span class="num" id="5524928">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524934">a</span>&nbsp;<span class="op" id="5524936">=</span>&nbsp;<span class="builtintype" id="5524938">uint32</span><span class="op" id="5524944">(</span><span class="ident" id="5524945">c</span><span class="op" id="5524946">.</span><span class="ident" id="5524947">A</span><span class="op" id="5524948">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5524951">a</span>&nbsp;<span class="op" id="5524953">|=</span>&nbsp;<span class="ident" id="5524956">a</span>&nbsp;<span class="op" id="5524958">&lt;&lt;</span>&nbsp;<span class="num" id="5524961">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5524964">return</span><br>
<span class="lineno"></span><span class="op" id="5524971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5524974">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="5525036">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="5525094">type</span>&nbsp;<span class="ident" id="5525099">NRGBA64</span>&nbsp;<span class="keyword" id="5525107">struct</span>&nbsp;<span class="op" id="5525114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525117">R</span><span class="op" id="5525118">,</span>&nbsp;<span class="ident" id="5525120">G</span><span class="op" id="5525121">,</span>&nbsp;<span class="ident" id="5525123">B</span><span class="op" id="5525124">,</span>&nbsp;<span class="ident" id="5525126">A</span>&nbsp;<span class="builtintype" id="5525128">uint16</span><br>
<span class="lineno"></span><span class="op" id="5525135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="5525138">func</span>&nbsp;<span class="op" id="5525143">(</span><span class="ident" id="5525144">c</span>&nbsp;<span class="ident" id="5525146">NRGBA64</span><span class="op" id="5525153">)</span>&nbsp;<span class="ident" id="5525155">RGBA</span><span class="op" id="5525159">(</span><span class="op" id="5525160">)</span>&nbsp;<span class="op" id="5525162">(</span><span class="ident" id="5525163">r</span><span class="op" id="5525164">,</span>&nbsp;<span class="ident" id="5525166">g</span><span class="op" id="5525167">,</span>&nbsp;<span class="ident" id="5525169">b</span><span class="op" id="5525170">,</span>&nbsp;<span class="ident" id="5525172">a</span>&nbsp;<span class="builtintype" id="5525174">uint32</span><span class="op" id="5525180">)</span>&nbsp;<span class="op" id="5525182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525185">r</span>&nbsp;<span class="op" id="5525187">=</span>&nbsp;<span class="builtintype" id="5525189">uint32</span><span class="op" id="5525195">(</span><span class="ident" id="5525196">c</span><span class="op" id="5525197">.</span><span class="ident" id="5525198">R</span><span class="op" id="5525199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525202">r</span>&nbsp;<span class="op" id="5525204">*=</span>&nbsp;<span class="builtintype" id="5525207">uint32</span><span class="op" id="5525213">(</span><span class="ident" id="5525214">c</span><span class="op" id="5525215">.</span><span class="ident" id="5525216">A</span><span class="op" id="5525217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525220">r</span>&nbsp;<span class="op" id="5525222">/=</span>&nbsp;<span class="num" id="5525225">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525233">g</span>&nbsp;<span class="op" id="5525235">=</span>&nbsp;<span class="builtintype" id="5525237">uint32</span><span class="op" id="5525243">(</span><span class="ident" id="5525244">c</span><span class="op" id="5525245">.</span><span class="ident" id="5525246">G</span><span class="op" id="5525247">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525250">g</span>&nbsp;<span class="op" id="5525252">*=</span>&nbsp;<span class="builtintype" id="5525255">uint32</span><span class="op" id="5525261">(</span><span class="ident" id="5525262">c</span><span class="op" id="5525263">.</span><span class="ident" id="5525264">A</span><span class="op" id="5525265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525268">g</span>&nbsp;<span class="op" id="5525270">/=</span>&nbsp;<span class="num" id="5525273">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525281">b</span>&nbsp;<span class="op" id="5525283">=</span>&nbsp;<span class="builtintype" id="5525285">uint32</span><span class="op" id="5525291">(</span><span class="ident" id="5525292">c</span><span class="op" id="5525293">.</span><span class="ident" id="5525294">B</span><span class="op" id="5525295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525298">b</span>&nbsp;<span class="op" id="5525300">*=</span>&nbsp;<span class="builtintype" id="5525303">uint32</span><span class="op" id="5525309">(</span><span class="ident" id="5525310">c</span><span class="op" id="5525311">.</span><span class="ident" id="5525312">A</span><span class="op" id="5525313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525316">b</span>&nbsp;<span class="op" id="5525318">/=</span>&nbsp;<span class="num" id="5525321">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525329">a</span>&nbsp;<span class="op" id="5525331">=</span>&nbsp;<span class="builtintype" id="5525333">uint32</span><span class="op" id="5525339">(</span><span class="ident" id="5525340">c</span><span class="op" id="5525341">.</span><span class="ident" id="5525342">A</span><span class="op" id="5525343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525346">return</span><br>
<span class="lineno"></span><span class="op" id="5525353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5525356">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="5525398">type</span>&nbsp;<span class="ident" id="5525403">Alpha</span>&nbsp;<span class="keyword" id="5525409">struct</span>&nbsp;<span class="op" id="5525416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525419">A</span>&nbsp;<span class="builtintype" id="5525421">uint8</span><br>
<span class="lineno"></span><span class="op" id="5525427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5525430">func</span>&nbsp;<span class="op" id="5525435">(</span><span class="ident" id="5525436">c</span>&nbsp;<span class="ident" id="5525438">Alpha</span><span class="op" id="5525443">)</span>&nbsp;<span class="ident" id="5525445">RGBA</span><span class="op" id="5525449">(</span><span class="op" id="5525450">)</span>&nbsp;<span class="op" id="5525452">(</span><span class="ident" id="5525453">r</span><span class="op" id="5525454">,</span>&nbsp;<span class="ident" id="5525456">g</span><span class="op" id="5525457">,</span>&nbsp;<span class="ident" id="5525459">b</span><span class="op" id="5525460">,</span>&nbsp;<span class="ident" id="5525462">a</span>&nbsp;<span class="builtintype" id="5525464">uint32</span><span class="op" id="5525470">)</span>&nbsp;<span class="op" id="5525472">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525475">a</span>&nbsp;<span class="op" id="5525477">=</span>&nbsp;<span class="builtintype" id="5525479">uint32</span><span class="op" id="5525485">(</span><span class="ident" id="5525486">c</span><span class="op" id="5525487">.</span><span class="ident" id="5525488">A</span><span class="op" id="5525489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525492">a</span>&nbsp;<span class="op" id="5525494">|=</span>&nbsp;<span class="ident" id="5525497">a</span>&nbsp;<span class="op" id="5525499">&lt;&lt;</span>&nbsp;<span class="num" id="5525502">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525505">return</span>&nbsp;<span class="ident" id="5525512">a</span><span class="op" id="5525513">,</span>&nbsp;<span class="ident" id="5525515">a</span><span class="op" id="5525516">,</span>&nbsp;<span class="ident" id="5525518">a</span><span class="op" id="5525519">,</span>&nbsp;<span class="ident" id="5525521">a</span><br>
<span class="lineno"></span><span class="op" id="5525523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="5525526">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5525570">type</span>&nbsp;<span class="ident" id="5525575">Alpha16</span>&nbsp;<span class="keyword" id="5525583">struct</span>&nbsp;<span class="op" id="5525590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525593">A</span>&nbsp;<span class="builtintype" id="5525595">uint16</span><br>
<span class="lineno"></span><span class="op" id="5525602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5525605">func</span>&nbsp;<span class="op" id="5525610">(</span><span class="ident" id="5525611">c</span>&nbsp;<span class="ident" id="5525613">Alpha16</span><span class="op" id="5525620">)</span>&nbsp;<span class="ident" id="5525622">RGBA</span><span class="op" id="5525626">(</span><span class="op" id="5525627">)</span>&nbsp;<span class="op" id="5525629">(</span><span class="ident" id="5525630">r</span><span class="op" id="5525631">,</span>&nbsp;<span class="ident" id="5525633">g</span><span class="op" id="5525634">,</span>&nbsp;<span class="ident" id="5525636">b</span><span class="op" id="5525637">,</span>&nbsp;<span class="ident" id="5525639">a</span>&nbsp;<span class="builtintype" id="5525641">uint32</span><span class="op" id="5525647">)</span>&nbsp;<span class="op" id="5525649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525652">a</span>&nbsp;<span class="op" id="5525654">=</span>&nbsp;<span class="builtintype" id="5525656">uint32</span><span class="op" id="5525662">(</span><span class="ident" id="5525663">c</span><span class="op" id="5525664">.</span><span class="ident" id="5525665">A</span><span class="op" id="5525666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525669">return</span>&nbsp;<span class="ident" id="5525676">a</span><span class="op" id="5525677">,</span>&nbsp;<span class="ident" id="5525679">a</span><span class="op" id="5525680">,</span>&nbsp;<span class="ident" id="5525682">a</span><span class="op" id="5525683">,</span>&nbsp;<span class="ident" id="5525685">a</span><br>
<span class="lineno"></span><span class="op" id="5525687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5525690">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5525735">type</span>&nbsp;<span class="ident" id="5525740">Gray</span>&nbsp;<span class="keyword" id="5525745">struct</span>&nbsp;<span class="op" id="5525752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525755">Y</span>&nbsp;<span class="builtintype" id="5525757">uint8</span><br>
<span class="lineno"></span><span class="op" id="5525763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5525766">func</span>&nbsp;<span class="op" id="5525771">(</span><span class="ident" id="5525772">c</span>&nbsp;<span class="ident" id="5525774">Gray</span><span class="op" id="5525778">)</span>&nbsp;<span class="ident" id="5525780">RGBA</span><span class="op" id="5525784">(</span><span class="op" id="5525785">)</span>&nbsp;<span class="op" id="5525787">(</span><span class="ident" id="5525788">r</span><span class="op" id="5525789">,</span>&nbsp;<span class="ident" id="5525791">g</span><span class="op" id="5525792">,</span>&nbsp;<span class="ident" id="5525794">b</span><span class="op" id="5525795">,</span>&nbsp;<span class="ident" id="5525797">a</span>&nbsp;<span class="builtintype" id="5525799">uint32</span><span class="op" id="5525805">)</span>&nbsp;<span class="op" id="5525807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525810">y</span>&nbsp;<span class="op" id="5525812">:=</span>&nbsp;<span class="builtintype" id="5525815">uint32</span><span class="op" id="5525821">(</span><span class="ident" id="5525822">c</span><span class="op" id="5525823">.</span><span class="ident" id="5525824">Y</span><span class="op" id="5525825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525828">y</span>&nbsp;<span class="op" id="5525830">|=</span>&nbsp;<span class="ident" id="5525833">y</span>&nbsp;<span class="op" id="5525835">&lt;&lt;</span>&nbsp;<span class="num" id="5525838">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5525841">return</span>&nbsp;<span class="ident" id="5525848">y</span><span class="op" id="5525849">,</span>&nbsp;<span class="ident" id="5525851">y</span><span class="op" id="5525852">,</span>&nbsp;<span class="ident" id="5525854">y</span><span class="op" id="5525855">,</span>&nbsp;<span class="num" id="5525857">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5525864">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5525867">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="5525914">type</span>&nbsp;<span class="ident" id="5525919">Gray16</span>&nbsp;<span class="keyword" id="5525926">struct</span>&nbsp;<span class="op" id="5525933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525936">Y</span>&nbsp;<span class="builtintype" id="5525938">uint16</span><br>
<span class="lineno"></span><span class="op" id="5525945">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5525948">func</span>&nbsp;<span class="op" id="5525953">(</span><span class="ident" id="5525954">c</span>&nbsp;<span class="ident" id="5525956">Gray16</span><span class="op" id="5525962">)</span>&nbsp;<span class="ident" id="5525964">RGBA</span><span class="op" id="5525968">(</span><span class="op" id="5525969">)</span>&nbsp;<span class="op" id="5525971">(</span><span class="ident" id="5525972">r</span><span class="op" id="5525973">,</span>&nbsp;<span class="ident" id="5525975">g</span><span class="op" id="5525976">,</span>&nbsp;<span class="ident" id="5525978">b</span><span class="op" id="5525979">,</span>&nbsp;<span class="ident" id="5525981">a</span>&nbsp;<span class="builtintype" id="5525983">uint32</span><span class="op" id="5525989">)</span>&nbsp;<span class="op" id="5525991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5525994">y</span>&nbsp;<span class="op" id="5525996">:=</span>&nbsp;<span class="builtintype" id="5525999">uint32</span><span class="op" id="5526005">(</span><span class="ident" id="5526006">c</span><span class="op" id="5526007">.</span><span class="ident" id="5526008">Y</span><span class="op" id="5526009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526012">return</span>&nbsp;<span class="ident" id="5526019">y</span><span class="op" id="5526020">,</span>&nbsp;<span class="ident" id="5526022">y</span><span class="op" id="5526023">,</span>&nbsp;<span class="ident" id="5526025">y</span><span class="op" id="5526026">,</span>&nbsp;<span class="num" id="5526028">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5526035">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5526038">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5526117">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="5526134">type</span>&nbsp;<span class="ident" id="5526139">Model</span>&nbsp;<span class="keyword" id="5526145">interface</span>&nbsp;<span class="op" id="5526155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526158">Convert</span><span class="op" id="5526165">(</span><span class="ident" id="5526166">c</span>&nbsp;<span class="ident" id="5526168">Color</span><span class="op" id="5526173">)</span>&nbsp;<span class="ident" id="5526175">Color</span><br>
<span class="lineno">135</span><span class="op" id="5526181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5526184">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="5526257">func</span>&nbsp;<span class="ident" id="5526262">ModelFunc</span><span class="op" id="5526271">(</span><span class="ident" id="5526272">f</span>&nbsp;<span class="keyword" id="5526274">func</span><span class="op" id="5526278">(</span><span class="ident" id="5526279">Color</span><span class="op" id="5526284">)</span>&nbsp;<span class="ident" id="5526286">Color</span><span class="op" id="5526291">)</span>&nbsp;<span class="ident" id="5526293">Model</span>&nbsp;<span class="op" id="5526299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526302">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526351">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526400">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526450">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5526500">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526530">return</span>&nbsp;<span class="op" id="5526537">&amp;</span><span class="ident" id="5526538">modelFunc</span><span class="op" id="5526547">{</span><span class="ident" id="5526548">f</span><span class="op" id="5526549">}</span><br>
<span class="lineno">145</span><span class="op" id="5526551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5526554">type</span>&nbsp;<span class="ident" id="5526559">modelFunc</span>&nbsp;<span class="keyword" id="5526569">struct</span>&nbsp;<span class="op" id="5526576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526579">f</span>&nbsp;<span class="keyword" id="5526581">func</span><span class="op" id="5526585">(</span><span class="ident" id="5526586">Color</span><span class="op" id="5526591">)</span>&nbsp;<span class="ident" id="5526593">Color</span><br>
<span class="lineno"></span><span class="op" id="5526599">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5526602">func</span>&nbsp;<span class="op" id="5526607">(</span><span class="ident" id="5526608">m</span>&nbsp;<span class="op" id="5526610">*</span><span class="ident" id="5526611">modelFunc</span><span class="op" id="5526620">)</span>&nbsp;<span class="ident" id="5526622">Convert</span><span class="op" id="5526629">(</span><span class="ident" id="5526630">c</span>&nbsp;<span class="ident" id="5526632">Color</span><span class="op" id="5526637">)</span>&nbsp;<span class="ident" id="5526639">Color</span>&nbsp;<span class="op" id="5526645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5526648">return</span>&nbsp;<span class="ident" id="5526655">m</span><span class="op" id="5526656">.</span><span class="ident" id="5526657">f</span><span class="op" id="5526658">(</span><span class="ident" id="5526659">c</span><span class="op" id="5526660">)</span><br>
<span class="lineno"></span><span class="op" id="5526662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5526665">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5526705">var</span>&nbsp;<span class="op" id="5526709">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526712">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5526725">Model</span>&nbsp;<span class="op" id="5526731">=</span>&nbsp;<span class="ident" id="5526733">ModelFunc</span><span class="op" id="5526742">(</span><span class="ident" id="5526743">rgbaModel</span><span class="op" id="5526752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526755">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="5526768">Model</span>&nbsp;<span class="op" id="5526774">=</span>&nbsp;<span class="ident" id="5526776">ModelFunc</span><span class="op" id="5526785">(</span><span class="ident" id="5526786">rgba64Model</span><span class="op" id="5526797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526800">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5526813">Model</span>&nbsp;<span class="op" id="5526819">=</span>&nbsp;<span class="ident" id="5526821">ModelFunc</span><span class="op" id="5526830">(</span><span class="ident" id="5526831">nrgbaModel</span><span class="op" id="5526841">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526844">NRGBA64Model</span>&nbsp;<span class="ident" id="5526857">Model</span>&nbsp;<span class="op" id="5526863">=</span>&nbsp;<span class="ident" id="5526865">ModelFunc</span><span class="op" id="5526874">(</span><span class="ident" id="5526875">nrgba64Model</span><span class="op" id="5526887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526890">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5526903">Model</span>&nbsp;<span class="op" id="5526909">=</span>&nbsp;<span class="ident" id="5526911">ModelFunc</span><span class="op" id="5526920">(</span><span class="ident" id="5526921">alphaModel</span><span class="op" id="5526931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526934">Alpha16Model</span>&nbsp;<span class="ident" id="5526947">Model</span>&nbsp;<span class="op" id="5526953">=</span>&nbsp;<span class="ident" id="5526955">ModelFunc</span><span class="op" id="5526964">(</span><span class="ident" id="5526965">alpha16Model</span><span class="op" id="5526977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5526980">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5526993">Model</span>&nbsp;<span class="op" id="5526999">=</span>&nbsp;<span class="ident" id="5527001">ModelFunc</span><span class="op" id="5527010">(</span><span class="ident" id="5527011">grayModel</span><span class="op" id="5527020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527023">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="5527036">Model</span>&nbsp;<span class="op" id="5527042">=</span>&nbsp;<span class="ident" id="5527044">ModelFunc</span><span class="op" id="5527053">(</span><span class="ident" id="5527054">gray16Model</span><span class="op" id="5527065">)</span><br>
<span class="lineno">165</span><span class="op" id="5527067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5527070">func</span>&nbsp;<span class="ident" id="5527075">rgbaModel</span><span class="op" id="5527084">(</span><span class="ident" id="5527085">c</span>&nbsp;<span class="ident" id="5527087">Color</span><span class="op" id="5527092">)</span>&nbsp;<span class="ident" id="5527094">Color</span>&nbsp;<span class="op" id="5527100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527103">if</span>&nbsp;<span class="ident" id="5527106">_</span><span class="op" id="5527107">,</span>&nbsp;<span class="ident" id="5527109">ok</span>&nbsp;<span class="op" id="5527112">:=</span>&nbsp;<span class="ident" id="5527115">c</span><span class="op" id="5527116">.</span><span class="op" id="5527117">(</span><span class="ident" id="5527118">RGBA</span><span class="op" id="5527122">)</span><span class="op" id="5527123">;</span>&nbsp;<span class="ident" id="5527125">ok</span>&nbsp;<span class="op" id="5527128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527132">return</span>&nbsp;<span class="ident" id="5527139">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527145">r</span><span class="op" id="5527146">,</span>&nbsp;<span class="ident" id="5527148">g</span><span class="op" id="5527149">,</span>&nbsp;<span class="ident" id="5527151">b</span><span class="op" id="5527152">,</span>&nbsp;<span class="ident" id="5527154">a</span>&nbsp;<span class="op" id="5527156">:=</span>&nbsp;<span class="ident" id="5527159">c</span><span class="op" id="5527160">.</span><span class="ident" id="5527161">RGBA</span><span class="op" id="5527165">(</span><span class="op" id="5527166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527169">return</span>&nbsp;<span class="ident" id="5527176">RGBA</span><span class="op" id="5527180">{</span><span class="builtintype" id="5527181">uint8</span><span class="op" id="5527186">(</span><span class="ident" id="5527187">r</span>&nbsp;<span class="op" id="5527189">&gt;&gt;</span>&nbsp;<span class="num" id="5527192">8</span><span class="op" id="5527193">)</span><span class="op" id="5527194">,</span>&nbsp;<span class="builtintype" id="5527196">uint8</span><span class="op" id="5527201">(</span><span class="ident" id="5527202">g</span>&nbsp;<span class="op" id="5527204">&gt;&gt;</span>&nbsp;<span class="num" id="5527207">8</span><span class="op" id="5527208">)</span><span class="op" id="5527209">,</span>&nbsp;<span class="builtintype" id="5527211">uint8</span><span class="op" id="5527216">(</span><span class="ident" id="5527217">b</span>&nbsp;<span class="op" id="5527219">&gt;&gt;</span>&nbsp;<span class="num" id="5527222">8</span><span class="op" id="5527223">)</span><span class="op" id="5527224">,</span>&nbsp;<span class="builtintype" id="5527226">uint8</span><span class="op" id="5527231">(</span><span class="ident" id="5527232">a</span>&nbsp;<span class="op" id="5527234">&gt;&gt;</span>&nbsp;<span class="num" id="5527237">8</span><span class="op" id="5527238">)</span><span class="op" id="5527239">}</span><br>
<span class="lineno"></span><span class="op" id="5527241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5527244">func</span>&nbsp;<span class="ident" id="5527249">rgba64Model</span><span class="op" id="5527260">(</span><span class="ident" id="5527261">c</span>&nbsp;<span class="ident" id="5527263">Color</span><span class="op" id="5527268">)</span>&nbsp;<span class="ident" id="5527270">Color</span>&nbsp;<span class="op" id="5527276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527279">if</span>&nbsp;<span class="ident" id="5527282">_</span><span class="op" id="5527283">,</span>&nbsp;<span class="ident" id="5527285">ok</span>&nbsp;<span class="op" id="5527288">:=</span>&nbsp;<span class="ident" id="5527291">c</span><span class="op" id="5527292">.</span><span class="op" id="5527293">(</span><span class="ident" id="5527294">RGBA64</span><span class="op" id="5527300">)</span><span class="op" id="5527301">;</span>&nbsp;<span class="ident" id="5527303">ok</span>&nbsp;<span class="op" id="5527306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527310">return</span>&nbsp;<span class="ident" id="5527317">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527323">r</span><span class="op" id="5527324">,</span>&nbsp;<span class="ident" id="5527326">g</span><span class="op" id="5527327">,</span>&nbsp;<span class="ident" id="5527329">b</span><span class="op" id="5527330">,</span>&nbsp;<span class="ident" id="5527332">a</span>&nbsp;<span class="op" id="5527334">:=</span>&nbsp;<span class="ident" id="5527337">c</span><span class="op" id="5527338">.</span><span class="ident" id="5527339">RGBA</span><span class="op" id="5527343">(</span><span class="op" id="5527344">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527347">return</span>&nbsp;<span class="ident" id="5527354">RGBA64</span><span class="op" id="5527360">{</span><span class="builtintype" id="5527361">uint16</span><span class="op" id="5527367">(</span><span class="ident" id="5527368">r</span><span class="op" id="5527369">)</span><span class="op" id="5527370">,</span>&nbsp;<span class="builtintype" id="5527372">uint16</span><span class="op" id="5527378">(</span><span class="ident" id="5527379">g</span><span class="op" id="5527380">)</span><span class="op" id="5527381">,</span>&nbsp;<span class="builtintype" id="5527383">uint16</span><span class="op" id="5527389">(</span><span class="ident" id="5527390">b</span><span class="op" id="5527391">)</span><span class="op" id="5527392">,</span>&nbsp;<span class="builtintype" id="5527394">uint16</span><span class="op" id="5527400">(</span><span class="ident" id="5527401">a</span><span class="op" id="5527402">)</span><span class="op" id="5527403">}</span><br>
<span class="lineno"></span><span class="op" id="5527405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5527408">func</span>&nbsp;<span class="ident" id="5527413">nrgbaModel</span><span class="op" id="5527423">(</span><span class="ident" id="5527424">c</span>&nbsp;<span class="ident" id="5527426">Color</span><span class="op" id="5527431">)</span>&nbsp;<span class="ident" id="5527433">Color</span>&nbsp;<span class="op" id="5527439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527442">if</span>&nbsp;<span class="ident" id="5527445">_</span><span class="op" id="5527446">,</span>&nbsp;<span class="ident" id="5527448">ok</span>&nbsp;<span class="op" id="5527451">:=</span>&nbsp;<span class="ident" id="5527454">c</span><span class="op" id="5527455">.</span><span class="op" id="5527456">(</span><span class="ident" id="5527457">NRGBA</span><span class="op" id="5527462">)</span><span class="op" id="5527463">;</span>&nbsp;<span class="ident" id="5527465">ok</span>&nbsp;<span class="op" id="5527468">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527472">return</span>&nbsp;<span class="ident" id="5527479">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527485">r</span><span class="op" id="5527486">,</span>&nbsp;<span class="ident" id="5527488">g</span><span class="op" id="5527489">,</span>&nbsp;<span class="ident" id="5527491">b</span><span class="op" id="5527492">,</span>&nbsp;<span class="ident" id="5527494">a</span>&nbsp;<span class="op" id="5527496">:=</span>&nbsp;<span class="ident" id="5527499">c</span><span class="op" id="5527500">.</span><span class="ident" id="5527501">RGBA</span><span class="op" id="5527505">(</span><span class="op" id="5527506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527509">if</span>&nbsp;<span class="ident" id="5527512">a</span>&nbsp;<span class="op" id="5527514">==</span>&nbsp;<span class="num" id="5527517">0xffff</span>&nbsp;<span class="op" id="5527524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527528">return</span>&nbsp;<span class="ident" id="5527535">NRGBA</span><span class="op" id="5527540">{</span><span class="builtintype" id="5527541">uint8</span><span class="op" id="5527546">(</span><span class="ident" id="5527547">r</span>&nbsp;<span class="op" id="5527549">&gt;&gt;</span>&nbsp;<span class="num" id="5527552">8</span><span class="op" id="5527553">)</span><span class="op" id="5527554">,</span>&nbsp;<span class="builtintype" id="5527556">uint8</span><span class="op" id="5527561">(</span><span class="ident" id="5527562">g</span>&nbsp;<span class="op" id="5527564">&gt;&gt;</span>&nbsp;<span class="num" id="5527567">8</span><span class="op" id="5527568">)</span><span class="op" id="5527569">,</span>&nbsp;<span class="builtintype" id="5527571">uint8</span><span class="op" id="5527576">(</span><span class="ident" id="5527577">b</span>&nbsp;<span class="op" id="5527579">&gt;&gt;</span>&nbsp;<span class="num" id="5527582">8</span><span class="op" id="5527583">)</span><span class="op" id="5527584">,</span>&nbsp;<span class="num" id="5527586">0xff</span><span class="op" id="5527590">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527596">if</span>&nbsp;<span class="ident" id="5527599">a</span>&nbsp;<span class="op" id="5527601">==</span>&nbsp;<span class="num" id="5527604">0</span>&nbsp;<span class="op" id="5527606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527610">return</span>&nbsp;<span class="ident" id="5527617">NRGBA</span><span class="op" id="5527622">{</span><span class="num" id="5527623">0</span><span class="op" id="5527624">,</span>&nbsp;<span class="num" id="5527626">0</span><span class="op" id="5527627">,</span>&nbsp;<span class="num" id="5527629">0</span><span class="op" id="5527630">,</span>&nbsp;<span class="num" id="5527632">0</span><span class="op" id="5527633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5527639">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527740">r</span>&nbsp;<span class="op" id="5527742">=</span>&nbsp;<span class="op" id="5527744">(</span><span class="ident" id="5527745">r</span>&nbsp;<span class="op" id="5527747">*</span>&nbsp;<span class="num" id="5527749">0xffff</span><span class="op" id="5527755">)</span>&nbsp;<span class="op" id="5527757">/</span>&nbsp;<span class="ident" id="5527759">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527762">g</span>&nbsp;<span class="op" id="5527764">=</span>&nbsp;<span class="op" id="5527766">(</span><span class="ident" id="5527767">g</span>&nbsp;<span class="op" id="5527769">*</span>&nbsp;<span class="num" id="5527771">0xffff</span><span class="op" id="5527777">)</span>&nbsp;<span class="op" id="5527779">/</span>&nbsp;<span class="ident" id="5527781">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527784">b</span>&nbsp;<span class="op" id="5527786">=</span>&nbsp;<span class="op" id="5527788">(</span><span class="ident" id="5527789">b</span>&nbsp;<span class="op" id="5527791">*</span>&nbsp;<span class="num" id="5527793">0xffff</span><span class="op" id="5527799">)</span>&nbsp;<span class="op" id="5527801">/</span>&nbsp;<span class="ident" id="5527803">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527806">return</span>&nbsp;<span class="ident" id="5527813">NRGBA</span><span class="op" id="5527818">{</span><span class="builtintype" id="5527819">uint8</span><span class="op" id="5527824">(</span><span class="ident" id="5527825">r</span>&nbsp;<span class="op" id="5527827">&gt;&gt;</span>&nbsp;<span class="num" id="5527830">8</span><span class="op" id="5527831">)</span><span class="op" id="5527832">,</span>&nbsp;<span class="builtintype" id="5527834">uint8</span><span class="op" id="5527839">(</span><span class="ident" id="5527840">g</span>&nbsp;<span class="op" id="5527842">&gt;&gt;</span>&nbsp;<span class="num" id="5527845">8</span><span class="op" id="5527846">)</span><span class="op" id="5527847">,</span>&nbsp;<span class="builtintype" id="5527849">uint8</span><span class="op" id="5527854">(</span><span class="ident" id="5527855">b</span>&nbsp;<span class="op" id="5527857">&gt;&gt;</span>&nbsp;<span class="num" id="5527860">8</span><span class="op" id="5527861">)</span><span class="op" id="5527862">,</span>&nbsp;<span class="builtintype" id="5527864">uint8</span><span class="op" id="5527869">(</span><span class="ident" id="5527870">a</span>&nbsp;<span class="op" id="5527872">&gt;&gt;</span>&nbsp;<span class="num" id="5527875">8</span><span class="op" id="5527876">)</span><span class="op" id="5527877">}</span><br>
<span class="lineno"></span><span class="op" id="5527879">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="5527882">func</span>&nbsp;<span class="ident" id="5527887">nrgba64Model</span><span class="op" id="5527899">(</span><span class="ident" id="5527900">c</span>&nbsp;<span class="ident" id="5527902">Color</span><span class="op" id="5527907">)</span>&nbsp;<span class="ident" id="5527909">Color</span>&nbsp;<span class="op" id="5527915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527918">if</span>&nbsp;<span class="ident" id="5527921">_</span><span class="op" id="5527922">,</span>&nbsp;<span class="ident" id="5527924">ok</span>&nbsp;<span class="op" id="5527927">:=</span>&nbsp;<span class="ident" id="5527930">c</span><span class="op" id="5527931">.</span><span class="op" id="5527932">(</span><span class="ident" id="5527933">NRGBA64</span><span class="op" id="5527940">)</span><span class="op" id="5527941">;</span>&nbsp;<span class="ident" id="5527943">ok</span>&nbsp;<span class="op" id="5527946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527950">return</span>&nbsp;<span class="ident" id="5527957">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5527960">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5527963">r</span><span class="op" id="5527964">,</span>&nbsp;<span class="ident" id="5527966">g</span><span class="op" id="5527967">,</span>&nbsp;<span class="ident" id="5527969">b</span><span class="op" id="5527970">,</span>&nbsp;<span class="ident" id="5527972">a</span>&nbsp;<span class="op" id="5527974">:=</span>&nbsp;<span class="ident" id="5527977">c</span><span class="op" id="5527978">.</span><span class="ident" id="5527979">RGBA</span><span class="op" id="5527983">(</span><span class="op" id="5527984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5527987">if</span>&nbsp;<span class="ident" id="5527990">a</span>&nbsp;<span class="op" id="5527992">==</span>&nbsp;<span class="num" id="5527995">0xffff</span>&nbsp;<span class="op" id="5528002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528006">return</span>&nbsp;<span class="ident" id="5528013">NRGBA64</span><span class="op" id="5528020">{</span><span class="builtintype" id="5528021">uint16</span><span class="op" id="5528027">(</span><span class="ident" id="5528028">r</span><span class="op" id="5528029">)</span><span class="op" id="5528030">,</span>&nbsp;<span class="builtintype" id="5528032">uint16</span><span class="op" id="5528038">(</span><span class="ident" id="5528039">g</span><span class="op" id="5528040">)</span><span class="op" id="5528041">,</span>&nbsp;<span class="builtintype" id="5528043">uint16</span><span class="op" id="5528049">(</span><span class="ident" id="5528050">b</span><span class="op" id="5528051">)</span><span class="op" id="5528052">,</span>&nbsp;<span class="num" id="5528054">0xffff</span><span class="op" id="5528060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5528063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528066">if</span>&nbsp;<span class="ident" id="5528069">a</span>&nbsp;<span class="op" id="5528071">==</span>&nbsp;<span class="num" id="5528074">0</span>&nbsp;<span class="op" id="5528076">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528080">return</span>&nbsp;<span class="ident" id="5528087">NRGBA64</span><span class="op" id="5528094">{</span><span class="num" id="5528095">0</span><span class="op" id="5528096">,</span>&nbsp;<span class="num" id="5528098">0</span><span class="op" id="5528099">,</span>&nbsp;<span class="num" id="5528101">0</span><span class="op" id="5528102">,</span>&nbsp;<span class="num" id="5528104">0</span><span class="op" id="5528105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5528108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5528111">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528212">r</span>&nbsp;<span class="op" id="5528214">=</span>&nbsp;<span class="op" id="5528216">(</span><span class="ident" id="5528217">r</span>&nbsp;<span class="op" id="5528219">*</span>&nbsp;<span class="num" id="5528221">0xffff</span><span class="op" id="5528227">)</span>&nbsp;<span class="op" id="5528229">/</span>&nbsp;<span class="ident" id="5528231">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528234">g</span>&nbsp;<span class="op" id="5528236">=</span>&nbsp;<span class="op" id="5528238">(</span><span class="ident" id="5528239">g</span>&nbsp;<span class="op" id="5528241">*</span>&nbsp;<span class="num" id="5528243">0xffff</span><span class="op" id="5528249">)</span>&nbsp;<span class="op" id="5528251">/</span>&nbsp;<span class="ident" id="5528253">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528256">b</span>&nbsp;<span class="op" id="5528258">=</span>&nbsp;<span class="op" id="5528260">(</span><span class="ident" id="5528261">b</span>&nbsp;<span class="op" id="5528263">*</span>&nbsp;<span class="num" id="5528265">0xffff</span><span class="op" id="5528271">)</span>&nbsp;<span class="op" id="5528273">/</span>&nbsp;<span class="ident" id="5528275">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528278">return</span>&nbsp;<span class="ident" id="5528285">NRGBA64</span><span class="op" id="5528292">{</span><span class="builtintype" id="5528293">uint16</span><span class="op" id="5528299">(</span><span class="ident" id="5528300">r</span><span class="op" id="5528301">)</span><span class="op" id="5528302">,</span>&nbsp;<span class="builtintype" id="5528304">uint16</span><span class="op" id="5528310">(</span><span class="ident" id="5528311">g</span><span class="op" id="5528312">)</span><span class="op" id="5528313">,</span>&nbsp;<span class="builtintype" id="5528315">uint16</span><span class="op" id="5528321">(</span><span class="ident" id="5528322">b</span><span class="op" id="5528323">)</span><span class="op" id="5528324">,</span>&nbsp;<span class="builtintype" id="5528326">uint16</span><span class="op" id="5528332">(</span><span class="ident" id="5528333">a</span><span class="op" id="5528334">)</span><span class="op" id="5528335">}</span><br>
<span class="lineno"></span><span class="op" id="5528337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5528340">func</span>&nbsp;<span class="ident" id="5528345">alphaModel</span><span class="op" id="5528355">(</span><span class="ident" id="5528356">c</span>&nbsp;<span class="ident" id="5528358">Color</span><span class="op" id="5528363">)</span>&nbsp;<span class="ident" id="5528365">Color</span>&nbsp;<span class="op" id="5528371">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528374">if</span>&nbsp;<span class="ident" id="5528377">_</span><span class="op" id="5528378">,</span>&nbsp;<span class="ident" id="5528380">ok</span>&nbsp;<span class="op" id="5528383">:=</span>&nbsp;<span class="ident" id="5528386">c</span><span class="op" id="5528387">.</span><span class="op" id="5528388">(</span><span class="ident" id="5528389">Alpha</span><span class="op" id="5528394">)</span><span class="op" id="5528395">;</span>&nbsp;<span class="ident" id="5528397">ok</span>&nbsp;<span class="op" id="5528400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528404">return</span>&nbsp;<span class="ident" id="5528411">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5528414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528417">_</span><span class="op" id="5528418">,</span>&nbsp;<span class="ident" id="5528420">_</span><span class="op" id="5528421">,</span>&nbsp;<span class="ident" id="5528423">_</span><span class="op" id="5528424">,</span>&nbsp;<span class="ident" id="5528426">a</span>&nbsp;<span class="op" id="5528428">:=</span>&nbsp;<span class="ident" id="5528431">c</span><span class="op" id="5528432">.</span><span class="ident" id="5528433">RGBA</span><span class="op" id="5528437">(</span><span class="op" id="5528438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528441">return</span>&nbsp;<span class="ident" id="5528448">Alpha</span><span class="op" id="5528453">{</span><span class="builtintype" id="5528454">uint8</span><span class="op" id="5528459">(</span><span class="ident" id="5528460">a</span>&nbsp;<span class="op" id="5528462">&gt;&gt;</span>&nbsp;<span class="num" id="5528465">8</span><span class="op" id="5528466">)</span><span class="op" id="5528467">}</span><br>
<span class="lineno">225</span><span class="op" id="5528469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5528472">func</span>&nbsp;<span class="ident" id="5528477">alpha16Model</span><span class="op" id="5528489">(</span><span class="ident" id="5528490">c</span>&nbsp;<span class="ident" id="5528492">Color</span><span class="op" id="5528497">)</span>&nbsp;<span class="ident" id="5528499">Color</span>&nbsp;<span class="op" id="5528505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528508">if</span>&nbsp;<span class="ident" id="5528511">_</span><span class="op" id="5528512">,</span>&nbsp;<span class="ident" id="5528514">ok</span>&nbsp;<span class="op" id="5528517">:=</span>&nbsp;<span class="ident" id="5528520">c</span><span class="op" id="5528521">.</span><span class="op" id="5528522">(</span><span class="ident" id="5528523">Alpha16</span><span class="op" id="5528530">)</span><span class="op" id="5528531">;</span>&nbsp;<span class="ident" id="5528533">ok</span>&nbsp;<span class="op" id="5528536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528540">return</span>&nbsp;<span class="ident" id="5528547">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5528550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528553">_</span><span class="op" id="5528554">,</span>&nbsp;<span class="ident" id="5528556">_</span><span class="op" id="5528557">,</span>&nbsp;<span class="ident" id="5528559">_</span><span class="op" id="5528560">,</span>&nbsp;<span class="ident" id="5528562">a</span>&nbsp;<span class="op" id="5528564">:=</span>&nbsp;<span class="ident" id="5528567">c</span><span class="op" id="5528568">.</span><span class="ident" id="5528569">RGBA</span><span class="op" id="5528573">(</span><span class="op" id="5528574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528577">return</span>&nbsp;<span class="ident" id="5528584">Alpha16</span><span class="op" id="5528591">{</span><span class="builtintype" id="5528592">uint16</span><span class="op" id="5528598">(</span><span class="ident" id="5528599">a</span><span class="op" id="5528600">)</span><span class="op" id="5528601">}</span><br>
<span class="lineno"></span><span class="op" id="5528603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5528606">func</span>&nbsp;<span class="ident" id="5528611">grayModel</span><span class="op" id="5528620">(</span><span class="ident" id="5528621">c</span>&nbsp;<span class="ident" id="5528623">Color</span><span class="op" id="5528628">)</span>&nbsp;<span class="ident" id="5528630">Color</span>&nbsp;<span class="op" id="5528636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528639">if</span>&nbsp;<span class="ident" id="5528642">_</span><span class="op" id="5528643">,</span>&nbsp;<span class="ident" id="5528645">ok</span>&nbsp;<span class="op" id="5528648">:=</span>&nbsp;<span class="ident" id="5528651">c</span><span class="op" id="5528652">.</span><span class="op" id="5528653">(</span><span class="ident" id="5528654">Gray</span><span class="op" id="5528658">)</span><span class="op" id="5528659">;</span>&nbsp;<span class="ident" id="5528661">ok</span>&nbsp;<span class="op" id="5528664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528668">return</span>&nbsp;<span class="ident" id="5528675">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5528678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528681">r</span><span class="op" id="5528682">,</span>&nbsp;<span class="ident" id="5528684">g</span><span class="op" id="5528685">,</span>&nbsp;<span class="ident" id="5528687">b</span><span class="op" id="5528688">,</span>&nbsp;<span class="ident" id="5528690">_</span>&nbsp;<span class="op" id="5528692">:=</span>&nbsp;<span class="ident" id="5528695">c</span><span class="op" id="5528696">.</span><span class="ident" id="5528697">RGBA</span><span class="op" id="5528701">(</span><span class="op" id="5528702">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528705">y</span>&nbsp;<span class="op" id="5528707">:=</span>&nbsp;<span class="op" id="5528710">(</span><span class="num" id="5528711">299</span><span class="op" id="5528714">*</span><span class="ident" id="5528715">r</span>&nbsp;<span class="op" id="5528717">+</span>&nbsp;<span class="num" id="5528719">587</span><span class="op" id="5528722">*</span><span class="ident" id="5528723">g</span>&nbsp;<span class="op" id="5528725">+</span>&nbsp;<span class="num" id="5528727">114</span><span class="op" id="5528730">*</span><span class="ident" id="5528731">b</span>&nbsp;<span class="op" id="5528733">+</span>&nbsp;<span class="num" id="5528735">500</span><span class="op" id="5528738">)</span>&nbsp;<span class="op" id="5528740">/</span>&nbsp;<span class="num" id="5528742">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528748">return</span>&nbsp;<span class="ident" id="5528755">Gray</span><span class="op" id="5528759">{</span><span class="builtintype" id="5528760">uint8</span><span class="op" id="5528765">(</span><span class="ident" id="5528766">y</span>&nbsp;<span class="op" id="5528768">&gt;&gt;</span>&nbsp;<span class="num" id="5528771">8</span><span class="op" id="5528772">)</span><span class="op" id="5528773">}</span><br>
<span class="lineno"></span><span class="op" id="5528775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5528778">func</span>&nbsp;<span class="ident" id="5528783">gray16Model</span><span class="op" id="5528794">(</span><span class="ident" id="5528795">c</span>&nbsp;<span class="ident" id="5528797">Color</span><span class="op" id="5528802">)</span>&nbsp;<span class="ident" id="5528804">Color</span>&nbsp;<span class="op" id="5528810">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528813">if</span>&nbsp;<span class="ident" id="5528816">_</span><span class="op" id="5528817">,</span>&nbsp;<span class="ident" id="5528819">ok</span>&nbsp;<span class="op" id="5528822">:=</span>&nbsp;<span class="ident" id="5528825">c</span><span class="op" id="5528826">.</span><span class="op" id="5528827">(</span><span class="ident" id="5528828">Gray16</span><span class="op" id="5528834">)</span><span class="op" id="5528835">;</span>&nbsp;<span class="ident" id="5528837">ok</span>&nbsp;<span class="op" id="5528840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528844">return</span>&nbsp;<span class="ident" id="5528851">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5528854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528857">r</span><span class="op" id="5528858">,</span>&nbsp;<span class="ident" id="5528860">g</span><span class="op" id="5528861">,</span>&nbsp;<span class="ident" id="5528863">b</span><span class="op" id="5528864">,</span>&nbsp;<span class="ident" id="5528866">_</span>&nbsp;<span class="op" id="5528868">:=</span>&nbsp;<span class="ident" id="5528871">c</span><span class="op" id="5528872">.</span><span class="ident" id="5528873">RGBA</span><span class="op" id="5528877">(</span><span class="op" id="5528878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5528881">y</span>&nbsp;<span class="op" id="5528883">:=</span>&nbsp;<span class="op" id="5528886">(</span><span class="num" id="5528887">299</span><span class="op" id="5528890">*</span><span class="ident" id="5528891">r</span>&nbsp;<span class="op" id="5528893">+</span>&nbsp;<span class="num" id="5528895">587</span><span class="op" id="5528898">*</span><span class="ident" id="5528899">g</span>&nbsp;<span class="op" id="5528901">+</span>&nbsp;<span class="num" id="5528903">114</span><span class="op" id="5528906">*</span><span class="ident" id="5528907">b</span>&nbsp;<span class="op" id="5528909">+</span>&nbsp;<span class="num" id="5528911">500</span><span class="op" id="5528914">)</span>&nbsp;<span class="op" id="5528916">/</span>&nbsp;<span class="num" id="5528918">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5528924">return</span>&nbsp;<span class="ident" id="5528931">Gray16</span><span class="op" id="5528937">{</span><span class="builtintype" id="5528938">uint16</span><span class="op" id="5528944">(</span><span class="ident" id="5528945">y</span><span class="op" id="5528946">)</span><span class="op" id="5528947">}</span><br>
<span class="lineno"></span><span class="op" id="5528949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5528952">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5528987">type</span>&nbsp;<span class="ident" id="5528992">Palette</span>&nbsp;<span class="op" id="5529000">[</span><span class="op" id="5529001">]</span><span class="ident" id="5529002">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="5529009">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5529085">func</span>&nbsp;<span class="op" id="5529090">(</span><span class="ident" id="5529091">p</span>&nbsp;<span class="ident" id="5529093">Palette</span><span class="op" id="5529100">)</span>&nbsp;<span class="ident" id="5529102">Convert</span><span class="op" id="5529109">(</span><span class="ident" id="5529110">c</span>&nbsp;<span class="ident" id="5529112">Color</span><span class="op" id="5529117">)</span>&nbsp;<span class="ident" id="5529119">Color</span>&nbsp;<span class="op" id="5529125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529128">if</span>&nbsp;<span class="builtinfunc" id="5529131">len</span><span class="op" id="5529134">(</span><span class="ident" id="5529135">p</span><span class="op" id="5529136">)</span>&nbsp;<span class="op" id="5529138">==</span>&nbsp;<span class="num" id="5529141">0</span>&nbsp;<span class="op" id="5529143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529147">return</span>&nbsp;<span class="ident" id="5529154">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5529159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529162">return</span>&nbsp;<span class="ident" id="5529169">p</span><span class="op" id="5529170">[</span><span class="ident" id="5529171">p</span><span class="op" id="5529172">.</span><span class="ident" id="5529173">Index</span><span class="op" id="5529178">(</span><span class="ident" id="5529179">c</span><span class="op" id="5529180">)</span><span class="op" id="5529181">]</span><br>
<span class="lineno"></span><span class="op" id="5529183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5529186">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="5529260">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="5529276">func</span>&nbsp;<span class="op" id="5529281">(</span><span class="ident" id="5529282">p</span>&nbsp;<span class="ident" id="5529284">Palette</span><span class="op" id="5529291">)</span>&nbsp;<span class="ident" id="5529293">Index</span><span class="op" id="5529298">(</span><span class="ident" id="5529299">c</span>&nbsp;<span class="ident" id="5529301">Color</span><span class="op" id="5529306">)</span>&nbsp;<span class="builtintype" id="5529308">int</span>&nbsp;<span class="op" id="5529312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5529315">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529382">cr</span><span class="op" id="5529384">,</span>&nbsp;<span class="ident" id="5529386">cg</span><span class="op" id="5529388">,</span>&nbsp;<span class="ident" id="5529390">cb</span><span class="op" id="5529392">,</span>&nbsp;<span class="ident" id="5529394">_</span>&nbsp;<span class="op" id="5529396">:=</span>&nbsp;<span class="ident" id="5529399">c</span><span class="op" id="5529400">.</span><span class="ident" id="5529401">RGBA</span><span class="op" id="5529405">(</span><span class="op" id="5529406">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529409">ret</span><span class="op" id="5529412">,</span>&nbsp;<span class="ident" id="5529414">bestSSD</span>&nbsp;<span class="op" id="5529422">:=</span>&nbsp;<span class="num" id="5529425">0</span><span class="op" id="5529426">,</span>&nbsp;<span class="builtintype" id="5529428">uint32</span><span class="op" id="5529434">(</span><span class="num" id="5529435">1</span><span class="op" id="5529436">&lt;&lt;</span><span class="num" id="5529438">32</span><span class="op" id="5529440">-</span><span class="num" id="5529441">1</span><span class="op" id="5529442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529445">for</span>&nbsp;<span class="ident" id="5529449">i</span><span class="op" id="5529450">,</span>&nbsp;<span class="ident" id="5529452">v</span>&nbsp;<span class="op" id="5529454">:=</span>&nbsp;<span class="keyword" id="5529457">range</span>&nbsp;<span class="ident" id="5529463">p</span>&nbsp;<span class="op" id="5529465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529469">vr</span><span class="op" id="5529471">,</span>&nbsp;<span class="ident" id="5529473">vg</span><span class="op" id="5529475">,</span>&nbsp;<span class="ident" id="5529477">vb</span><span class="op" id="5529479">,</span>&nbsp;<span class="ident" id="5529481">_</span>&nbsp;<span class="op" id="5529483">:=</span>&nbsp;<span class="ident" id="5529486">v</span><span class="op" id="5529487">.</span><span class="ident" id="5529488">RGBA</span><span class="op" id="5529492">(</span><span class="op" id="5529493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5529497">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5529558">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529587">delta</span>&nbsp;<span class="op" id="5529593">:=</span>&nbsp;<span class="op" id="5529596">(</span><span class="builtintype" id="5529597">int32</span><span class="op" id="5529602">(</span><span class="ident" id="5529603">cr</span><span class="op" id="5529605">)</span>&nbsp;<span class="op" id="5529607">-</span>&nbsp;<span class="builtintype" id="5529609">int32</span><span class="op" id="5529614">(</span><span class="ident" id="5529615">vr</span><span class="op" id="5529617">)</span><span class="op" id="5529618">)</span>&nbsp;<span class="op" id="5529620">&gt;&gt;</span>&nbsp;<span class="num" id="5529623">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529627">ssd</span>&nbsp;<span class="op" id="5529631">:=</span>&nbsp;<span class="builtintype" id="5529634">uint32</span><span class="op" id="5529640">(</span><span class="ident" id="5529641">delta</span>&nbsp;<span class="op" id="5529647">*</span>&nbsp;<span class="ident" id="5529649">delta</span><span class="op" id="5529654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529658">delta</span>&nbsp;<span class="op" id="5529664">=</span>&nbsp;<span class="op" id="5529666">(</span><span class="builtintype" id="5529667">int32</span><span class="op" id="5529672">(</span><span class="ident" id="5529673">cg</span><span class="op" id="5529675">)</span>&nbsp;<span class="op" id="5529677">-</span>&nbsp;<span class="builtintype" id="5529679">int32</span><span class="op" id="5529684">(</span><span class="ident" id="5529685">vg</span><span class="op" id="5529687">)</span><span class="op" id="5529688">)</span>&nbsp;<span class="op" id="5529690">&gt;&gt;</span>&nbsp;<span class="num" id="5529693">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529697">ssd</span>&nbsp;<span class="op" id="5529701">+=</span>&nbsp;<span class="builtintype" id="5529704">uint32</span><span class="op" id="5529710">(</span><span class="ident" id="5529711">delta</span>&nbsp;<span class="op" id="5529717">*</span>&nbsp;<span class="ident" id="5529719">delta</span><span class="op" id="5529724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529728">delta</span>&nbsp;<span class="op" id="5529734">=</span>&nbsp;<span class="op" id="5529736">(</span><span class="builtintype" id="5529737">int32</span><span class="op" id="5529742">(</span><span class="ident" id="5529743">cb</span><span class="op" id="5529745">)</span>&nbsp;<span class="op" id="5529747">-</span>&nbsp;<span class="builtintype" id="5529749">int32</span><span class="op" id="5529754">(</span><span class="ident" id="5529755">vb</span><span class="op" id="5529757">)</span><span class="op" id="5529758">)</span>&nbsp;<span class="op" id="5529760">&gt;&gt;</span>&nbsp;<span class="num" id="5529763">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529767">ssd</span>&nbsp;<span class="op" id="5529771">+=</span>&nbsp;<span class="builtintype" id="5529774">uint32</span><span class="op" id="5529780">(</span><span class="ident" id="5529781">delta</span>&nbsp;<span class="op" id="5529787">*</span>&nbsp;<span class="ident" id="5529789">delta</span><span class="op" id="5529794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529798">if</span>&nbsp;<span class="ident" id="5529801">ssd</span>&nbsp;<span class="op" id="5529805">&lt;</span>&nbsp;<span class="ident" id="5529807">bestSSD</span>&nbsp;<span class="op" id="5529815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529820">if</span>&nbsp;<span class="ident" id="5529823">ssd</span>&nbsp;<span class="op" id="5529827">==</span>&nbsp;<span class="num" id="5529830">0</span>&nbsp;<span class="op" id="5529832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529838">return</span>&nbsp;<span class="ident" id="5529845">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5529850">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529855">ret</span><span class="op" id="5529858">,</span>&nbsp;<span class="ident" id="5529860">bestSSD</span>&nbsp;<span class="op" id="5529868">=</span>&nbsp;<span class="ident" id="5529870">i</span><span class="op" id="5529871">,</span>&nbsp;<span class="ident" id="5529873">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5529879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5529882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5529885">return</span>&nbsp;<span class="ident" id="5529892">ret</span><br>
<span class="lineno"></span><span class="op" id="5529896">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5529899">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="5529919">var</span>&nbsp;<span class="op" id="5529923">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529926">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5529938">=</span>&nbsp;<span class="ident" id="5529940">Gray16</span><span class="op" id="5529946">{</span><span class="num" id="5529947">0</span><span class="op" id="5529948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529951">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5529963">=</span>&nbsp;<span class="ident" id="5529965">Gray16</span><span class="op" id="5529971">{</span><span class="num" id="5529972">0xffff</span><span class="op" id="5529978">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5529981">Transparent</span>&nbsp;<span class="op" id="5529993">=</span>&nbsp;<span class="ident" id="5529995">Alpha16</span><span class="op" id="5530002">{</span><span class="num" id="5530003">0</span><span class="op" id="5530004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5530007">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5530019">=</span>&nbsp;<span class="ident" id="5530021">Alpha16</span><span class="op" id="5530028">{</span><span class="num" id="5530029">0xffff</span><span class="op" id="5530035">}</span><br>
<span class="lineno"></span><span class="op" id="5530037">)</span>
</div>
</body>
</html>
