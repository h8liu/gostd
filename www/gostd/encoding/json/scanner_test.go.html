<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8631941">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8631997">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8632051">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8632102">package</span>&nbsp;<span class="ident" id="8632110">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8632116">import</span>&nbsp;<span class="op" id="8632123">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8632126">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8632135">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8632143">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8632156">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8632167">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8632177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8632180">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8632210">type</span>&nbsp;<span class="ident" id="8632215">example</span>&nbsp;<span class="keyword" id="8632223">struct</span>&nbsp;<span class="op" id="8632230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8632233">compact</span>&nbsp;<span class="builtintype" id="8632241">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8632249">indent</span>&nbsp;&nbsp;<span class="builtintype" id="8632257">string</span><br>
<span class="lineno">20</span><span class="op" id="8632264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8632267">var</span>&nbsp;<span class="ident" id="8632271">examples</span>&nbsp;<span class="op" id="8632280">=</span>&nbsp;<span class="op" id="8632282">[</span><span class="op" id="8632283">]</span><span class="ident" id="8632284">example</span><span class="op" id="8632291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632294">{</span><span class="string" id="8632295">`1`</span><span class="op" id="8632298">,</span>&nbsp;<span class="string" id="8632300">`1`</span><span class="op" id="8632303">}</span><span class="op" id="8632304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632307">{</span><span class="string" id="8632308">`{}`</span><span class="op" id="8632312">,</span>&nbsp;<span class="string" id="8632314">`{}`</span><span class="op" id="8632318">}</span><span class="op" id="8632319">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632322">{</span><span class="string" id="8632323">`[]`</span><span class="op" id="8632327">,</span>&nbsp;<span class="string" id="8632329">`[]`</span><span class="op" id="8632333">}</span><span class="op" id="8632334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632337">{</span><span class="string" id="8632338">`{&#34;&#34;:2}`</span><span class="op" id="8632346">,</span>&nbsp;<span class="string" id="8632348">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="8632365">}</span><span class="op" id="8632366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632369">{</span><span class="string" id="8632370">`[3]`</span><span class="op" id="8632375">,</span>&nbsp;<span class="string" id="8632377">&#34;[\n\t3\n]&#34;</span><span class="op" id="8632388">}</span><span class="op" id="8632389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632392">{</span><span class="string" id="8632393">`[1,2,3]`</span><span class="op" id="8632402">,</span>&nbsp;<span class="string" id="8632404">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="8632427">}</span><span class="op" id="8632428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632431">{</span><span class="string" id="8632432">`{&#34;x&#34;:1}`</span><span class="op" id="8632441">,</span>&nbsp;<span class="string" id="8632443">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="8632461">}</span><span class="op" id="8632462">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632465">{</span><span class="ident" id="8632466">ex1</span><span class="op" id="8632469">,</span>&nbsp;<span class="ident" id="8632471">ex1i</span><span class="op" id="8632475">}</span><span class="op" id="8632476">,</span><br>
<span class="lineno"></span><span class="op" id="8632478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8632481">var</span>&nbsp;<span class="ident" id="8632485">ex1</span>&nbsp;<span class="op" id="8632489">=</span>&nbsp;<span class="string" id="8632491">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8632530">var</span>&nbsp;<span class="ident" id="8632534">ex1i</span>&nbsp;<span class="op" id="8632539">=</span>&nbsp;<span class="string" id="8632541">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="8632597">func</span>&nbsp;<span class="ident" id="8632602">TestCompact</span><span class="op" id="8632613">(</span><span class="ident" id="8632614">t</span>&nbsp;<span class="op" id="8632616">*</span><span class="ident" id="8632617">testing</span><span class="op" id="8632624">.</span><span class="ident" id="8632625">T</span><span class="op" id="8632626">)</span>&nbsp;<span class="op" id="8632628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8632631">var</span>&nbsp;<span class="ident" id="8632635">buf</span>&nbsp;<span class="ident" id="8632639">bytes</span><span class="op" id="8632644">.</span><span class="ident" id="8632645">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8632653">for</span>&nbsp;<span class="ident" id="8632657">_</span><span class="op" id="8632658">,</span>&nbsp;<span class="ident" id="8632660">tt</span>&nbsp;<span class="op" id="8632663">:=</span>&nbsp;<span class="keyword" id="8632666">range</span>&nbsp;<span class="ident" id="8632672">examples</span>&nbsp;<span class="op" id="8632681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8632685">buf</span><span class="op" id="8632688">.</span><span class="ident" id="8632689">Reset</span><span class="op" id="8632694">(</span><span class="op" id="8632695">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8632699">if</span>&nbsp;<span class="ident" id="8632702">err</span>&nbsp;<span class="op" id="8632706">:=</span>&nbsp;<span class="ident" id="8632709">Compact</span><span class="op" id="8632716">(</span><span class="op" id="8632717">&amp;</span><span class="ident" id="8632718">buf</span><span class="op" id="8632721">,</span>&nbsp;<span class="op" id="8632723">[</span><span class="op" id="8632724">]</span><span class="builtintype" id="8632725">byte</span><span class="op" id="8632729">(</span><span class="ident" id="8632730">tt</span><span class="op" id="8632732">.</span><span class="ident" id="8632733">compact</span><span class="op" id="8632740">)</span><span class="op" id="8632741">)</span><span class="op" id="8632742">;</span>&nbsp;<span class="ident" id="8632744">err</span>&nbsp;<span class="op" id="8632748">!=</span>&nbsp;<span class="ident" id="8632751">nil</span>&nbsp;<span class="op" id="8632755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8632760">t</span><span class="op" id="8632761">.</span><span class="ident" id="8632762">Errorf</span><span class="op" id="8632768">(</span><span class="string" id="8632769">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8632787">,</span>&nbsp;<span class="ident" id="8632789">tt</span><span class="op" id="8632791">.</span><span class="ident" id="8632792">compact</span><span class="op" id="8632799">,</span>&nbsp;<span class="ident" id="8632801">err</span><span class="op" id="8632804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632808">}</span>&nbsp;<span class="keyword" id="8632810">else</span>&nbsp;<span class="keyword" id="8632815">if</span>&nbsp;<span class="ident" id="8632818">s</span>&nbsp;<span class="op" id="8632820">:=</span>&nbsp;<span class="ident" id="8632823">buf</span><span class="op" id="8632826">.</span><span class="ident" id="8632827">String</span><span class="op" id="8632833">(</span><span class="op" id="8632834">)</span><span class="op" id="8632835">;</span>&nbsp;<span class="ident" id="8632837">s</span>&nbsp;<span class="op" id="8632839">!=</span>&nbsp;<span class="ident" id="8632842">tt</span><span class="op" id="8632844">.</span><span class="ident" id="8632845">compact</span>&nbsp;<span class="op" id="8632853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8632858">t</span><span class="op" id="8632859">.</span><span class="ident" id="8632860">Errorf</span><span class="op" id="8632866">(</span><span class="string" id="8632867">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8632902">,</span>&nbsp;<span class="ident" id="8632904">tt</span><span class="op" id="8632906">.</span><span class="ident" id="8632907">compact</span><span class="op" id="8632914">,</span>&nbsp;<span class="ident" id="8632916">s</span><span class="op" id="8632917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8632921">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8632926">buf</span><span class="op" id="8632929">.</span><span class="ident" id="8632930">Reset</span><span class="op" id="8632935">(</span><span class="op" id="8632936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8632940">if</span>&nbsp;<span class="ident" id="8632943">err</span>&nbsp;<span class="op" id="8632947">:=</span>&nbsp;<span class="ident" id="8632950">Compact</span><span class="op" id="8632957">(</span><span class="op" id="8632958">&amp;</span><span class="ident" id="8632959">buf</span><span class="op" id="8632962">,</span>&nbsp;<span class="op" id="8632964">[</span><span class="op" id="8632965">]</span><span class="builtintype" id="8632966">byte</span><span class="op" id="8632970">(</span><span class="ident" id="8632971">tt</span><span class="op" id="8632973">.</span><span class="ident" id="8632974">indent</span><span class="op" id="8632980">)</span><span class="op" id="8632981">)</span><span class="op" id="8632982">;</span>&nbsp;<span class="ident" id="8632984">err</span>&nbsp;<span class="op" id="8632988">!=</span>&nbsp;<span class="ident" id="8632991">nil</span>&nbsp;<span class="op" id="8632995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633000">t</span><span class="op" id="8633001">.</span><span class="ident" id="8633002">Errorf</span><span class="op" id="8633008">(</span><span class="string" id="8633009">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="8633027">,</span>&nbsp;<span class="ident" id="8633029">tt</span><span class="op" id="8633031">.</span><span class="ident" id="8633032">indent</span><span class="op" id="8633038">,</span>&nbsp;<span class="ident" id="8633040">err</span><span class="op" id="8633043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633048">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633059">}</span>&nbsp;<span class="keyword" id="8633061">else</span>&nbsp;<span class="keyword" id="8633066">if</span>&nbsp;<span class="ident" id="8633069">s</span>&nbsp;<span class="op" id="8633071">:=</span>&nbsp;<span class="ident" id="8633074">buf</span><span class="op" id="8633077">.</span><span class="ident" id="8633078">String</span><span class="op" id="8633084">(</span><span class="op" id="8633085">)</span><span class="op" id="8633086">;</span>&nbsp;<span class="ident" id="8633088">s</span>&nbsp;<span class="op" id="8633090">!=</span>&nbsp;<span class="ident" id="8633093">tt</span><span class="op" id="8633095">.</span><span class="ident" id="8633096">compact</span>&nbsp;<span class="op" id="8633104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633109">t</span><span class="op" id="8633110">.</span><span class="ident" id="8633111">Errorf</span><span class="op" id="8633117">(</span><span class="string" id="8633118">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8633148">,</span>&nbsp;<span class="ident" id="8633150">tt</span><span class="op" id="8633152">.</span><span class="ident" id="8633153">indent</span><span class="op" id="8633159">,</span>&nbsp;<span class="ident" id="8633161">s</span><span class="op" id="8633162">,</span>&nbsp;<span class="ident" id="8633164">tt</span><span class="op" id="8633166">.</span><span class="ident" id="8633167">compact</span><span class="op" id="8633174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633181">}</span><br>
<span class="lineno"></span><span class="op" id="8633183">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8633186">func</span>&nbsp;<span class="ident" id="8633191">TestCompactSeparators</span><span class="op" id="8633212">(</span><span class="ident" id="8633213">t</span>&nbsp;<span class="op" id="8633215">*</span><span class="ident" id="8633216">testing</span><span class="op" id="8633223">.</span><span class="ident" id="8633224">T</span><span class="op" id="8633225">)</span>&nbsp;<span class="op" id="8633227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8633230">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8633286">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633330">tests</span>&nbsp;<span class="op" id="8633336">:=</span>&nbsp;<span class="op" id="8633339">[</span><span class="op" id="8633340">]</span><span class="keyword" id="8633341">struct</span>&nbsp;<span class="op" id="8633348">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633352">in</span><span class="op" id="8633354">,</span>&nbsp;<span class="ident" id="8633356">compact</span>&nbsp;<span class="builtintype" id="8633364">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633372">}</span><span class="op" id="8633373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633377">{</span><span class="string" id="8633378">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="8633395">,</span>&nbsp;<span class="string" id="8633397">`{&#34;\u2028&#34;:1}`</span><span class="op" id="8633411">}</span><span class="op" id="8633412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633416">{</span><span class="string" id="8633417">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="8633434">,</span>&nbsp;<span class="string" id="8633436">`{&#34;\u2029&#34;:2}`</span><span class="op" id="8633450">}</span><span class="op" id="8633451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633454">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633457">for</span>&nbsp;<span class="ident" id="8633461">_</span><span class="op" id="8633462">,</span>&nbsp;<span class="ident" id="8633464">tt</span>&nbsp;<span class="op" id="8633467">:=</span>&nbsp;<span class="keyword" id="8633470">range</span>&nbsp;<span class="ident" id="8633476">tests</span>&nbsp;<span class="op" id="8633482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633486">var</span>&nbsp;<span class="ident" id="8633490">buf</span>&nbsp;<span class="ident" id="8633494">bytes</span><span class="op" id="8633499">.</span><span class="ident" id="8633500">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633509">if</span>&nbsp;<span class="ident" id="8633512">err</span>&nbsp;<span class="op" id="8633516">:=</span>&nbsp;<span class="ident" id="8633519">Compact</span><span class="op" id="8633526">(</span><span class="op" id="8633527">&amp;</span><span class="ident" id="8633528">buf</span><span class="op" id="8633531">,</span>&nbsp;<span class="op" id="8633533">[</span><span class="op" id="8633534">]</span><span class="builtintype" id="8633535">byte</span><span class="op" id="8633539">(</span><span class="ident" id="8633540">tt</span><span class="op" id="8633542">.</span><span class="ident" id="8633543">in</span><span class="op" id="8633545">)</span><span class="op" id="8633546">)</span><span class="op" id="8633547">;</span>&nbsp;<span class="ident" id="8633549">err</span>&nbsp;<span class="op" id="8633553">!=</span>&nbsp;<span class="ident" id="8633556">nil</span>&nbsp;<span class="op" id="8633560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633565">t</span><span class="op" id="8633566">.</span><span class="ident" id="8633567">Errorf</span><span class="op" id="8633573">(</span><span class="string" id="8633574">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="8633591">,</span>&nbsp;<span class="ident" id="8633593">tt</span><span class="op" id="8633595">.</span><span class="ident" id="8633596">in</span><span class="op" id="8633598">,</span>&nbsp;<span class="ident" id="8633600">err</span><span class="op" id="8633603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633607">}</span>&nbsp;<span class="keyword" id="8633609">else</span>&nbsp;<span class="keyword" id="8633614">if</span>&nbsp;<span class="ident" id="8633617">s</span>&nbsp;<span class="op" id="8633619">:=</span>&nbsp;<span class="ident" id="8633622">buf</span><span class="op" id="8633625">.</span><span class="ident" id="8633626">String</span><span class="op" id="8633632">(</span><span class="op" id="8633633">)</span><span class="op" id="8633634">;</span>&nbsp;<span class="ident" id="8633636">s</span>&nbsp;<span class="op" id="8633638">!=</span>&nbsp;<span class="ident" id="8633641">tt</span><span class="op" id="8633643">.</span><span class="ident" id="8633644">compact</span>&nbsp;<span class="op" id="8633652">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633657">t</span><span class="op" id="8633658">.</span><span class="ident" id="8633659">Errorf</span><span class="op" id="8633665">(</span><span class="string" id="8633666">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8633693">,</span>&nbsp;<span class="ident" id="8633695">tt</span><span class="op" id="8633697">.</span><span class="ident" id="8633698">in</span><span class="op" id="8633700">,</span>&nbsp;<span class="ident" id="8633702">s</span><span class="op" id="8633703">,</span>&nbsp;<span class="ident" id="8633705">tt</span><span class="op" id="8633707">.</span><span class="ident" id="8633708">compact</span><span class="op" id="8633715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633722">}</span><br>
<span class="lineno"></span><span class="op" id="8633724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="8633727">func</span>&nbsp;<span class="ident" id="8633732">TestIndent</span><span class="op" id="8633742">(</span><span class="ident" id="8633743">t</span>&nbsp;<span class="op" id="8633745">*</span><span class="ident" id="8633746">testing</span><span class="op" id="8633753">.</span><span class="ident" id="8633754">T</span><span class="op" id="8633755">)</span>&nbsp;<span class="op" id="8633757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633760">var</span>&nbsp;<span class="ident" id="8633764">buf</span>&nbsp;<span class="ident" id="8633768">bytes</span><span class="op" id="8633773">.</span><span class="ident" id="8633774">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633782">for</span>&nbsp;<span class="ident" id="8633786">_</span><span class="op" id="8633787">,</span>&nbsp;<span class="ident" id="8633789">tt</span>&nbsp;<span class="op" id="8633792">:=</span>&nbsp;<span class="keyword" id="8633795">range</span>&nbsp;<span class="ident" id="8633801">examples</span>&nbsp;<span class="op" id="8633810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633814">buf</span><span class="op" id="8633817">.</span><span class="ident" id="8633818">Reset</span><span class="op" id="8633823">(</span><span class="op" id="8633824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8633828">if</span>&nbsp;<span class="ident" id="8633831">err</span>&nbsp;<span class="op" id="8633835">:=</span>&nbsp;<span class="ident" id="8633838">Indent</span><span class="op" id="8633844">(</span><span class="op" id="8633845">&amp;</span><span class="ident" id="8633846">buf</span><span class="op" id="8633849">,</span>&nbsp;<span class="op" id="8633851">[</span><span class="op" id="8633852">]</span><span class="builtintype" id="8633853">byte</span><span class="op" id="8633857">(</span><span class="ident" id="8633858">tt</span><span class="op" id="8633860">.</span><span class="ident" id="8633861">indent</span><span class="op" id="8633867">)</span><span class="op" id="8633868">,</span>&nbsp;<span class="string" id="8633870">&#34;&#34;</span><span class="op" id="8633872">,</span>&nbsp;<span class="string" id="8633874">&#34;\t&#34;</span><span class="op" id="8633878">)</span><span class="op" id="8633879">;</span>&nbsp;<span class="ident" id="8633881">err</span>&nbsp;<span class="op" id="8633885">!=</span>&nbsp;<span class="ident" id="8633888">nil</span>&nbsp;<span class="op" id="8633892">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633897">t</span><span class="op" id="8633898">.</span><span class="ident" id="8633899">Errorf</span><span class="op" id="8633905">(</span><span class="string" id="8633906">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8633923">,</span>&nbsp;<span class="ident" id="8633925">tt</span><span class="op" id="8633927">.</span><span class="ident" id="8633928">indent</span><span class="op" id="8633934">,</span>&nbsp;<span class="ident" id="8633936">err</span><span class="op" id="8633939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8633943">}</span>&nbsp;<span class="keyword" id="8633945">else</span>&nbsp;<span class="keyword" id="8633950">if</span>&nbsp;<span class="ident" id="8633953">s</span>&nbsp;<span class="op" id="8633955">:=</span>&nbsp;<span class="ident" id="8633958">buf</span><span class="op" id="8633961">.</span><span class="ident" id="8633962">String</span><span class="op" id="8633968">(</span><span class="op" id="8633969">)</span><span class="op" id="8633970">;</span>&nbsp;<span class="ident" id="8633972">s</span>&nbsp;<span class="op" id="8633974">!=</span>&nbsp;<span class="ident" id="8633977">tt</span><span class="op" id="8633979">.</span><span class="ident" id="8633980">indent</span>&nbsp;<span class="op" id="8633987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8633992">t</span><span class="op" id="8633993">.</span><span class="ident" id="8633994">Errorf</span><span class="op" id="8634000">(</span><span class="string" id="8634001">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="8634035">,</span>&nbsp;<span class="ident" id="8634037">tt</span><span class="op" id="8634039">.</span><span class="ident" id="8634040">indent</span><span class="op" id="8634046">,</span>&nbsp;<span class="ident" id="8634048">s</span><span class="op" id="8634049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634058">buf</span><span class="op" id="8634061">.</span><span class="ident" id="8634062">Reset</span><span class="op" id="8634067">(</span><span class="op" id="8634068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634072">if</span>&nbsp;<span class="ident" id="8634075">err</span>&nbsp;<span class="op" id="8634079">:=</span>&nbsp;<span class="ident" id="8634082">Indent</span><span class="op" id="8634088">(</span><span class="op" id="8634089">&amp;</span><span class="ident" id="8634090">buf</span><span class="op" id="8634093">,</span>&nbsp;<span class="op" id="8634095">[</span><span class="op" id="8634096">]</span><span class="builtintype" id="8634097">byte</span><span class="op" id="8634101">(</span><span class="ident" id="8634102">tt</span><span class="op" id="8634104">.</span><span class="ident" id="8634105">compact</span><span class="op" id="8634112">)</span><span class="op" id="8634113">,</span>&nbsp;<span class="string" id="8634115">&#34;&#34;</span><span class="op" id="8634117">,</span>&nbsp;<span class="string" id="8634119">&#34;\t&#34;</span><span class="op" id="8634123">)</span><span class="op" id="8634124">;</span>&nbsp;<span class="ident" id="8634126">err</span>&nbsp;<span class="op" id="8634130">!=</span>&nbsp;<span class="ident" id="8634133">nil</span>&nbsp;<span class="op" id="8634137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634142">t</span><span class="op" id="8634143">.</span><span class="ident" id="8634144">Errorf</span><span class="op" id="8634150">(</span><span class="string" id="8634151">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="8634168">,</span>&nbsp;<span class="ident" id="8634170">tt</span><span class="op" id="8634172">.</span><span class="ident" id="8634173">compact</span><span class="op" id="8634180">,</span>&nbsp;<span class="ident" id="8634182">err</span><span class="op" id="8634185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634190">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634201">}</span>&nbsp;<span class="keyword" id="8634203">else</span>&nbsp;<span class="keyword" id="8634208">if</span>&nbsp;<span class="ident" id="8634211">s</span>&nbsp;<span class="op" id="8634213">:=</span>&nbsp;<span class="ident" id="8634216">buf</span><span class="op" id="8634219">.</span><span class="ident" id="8634220">String</span><span class="op" id="8634226">(</span><span class="op" id="8634227">)</span><span class="op" id="8634228">;</span>&nbsp;<span class="ident" id="8634230">s</span>&nbsp;<span class="op" id="8634232">!=</span>&nbsp;<span class="ident" id="8634235">tt</span><span class="op" id="8634237">.</span><span class="ident" id="8634238">indent</span>&nbsp;<span class="op" id="8634245">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634250">t</span><span class="op" id="8634251">.</span><span class="ident" id="8634252">Errorf</span><span class="op" id="8634258">(</span><span class="string" id="8634259">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="8634288">,</span>&nbsp;<span class="ident" id="8634290">tt</span><span class="op" id="8634292">.</span><span class="ident" id="8634293">compact</span><span class="op" id="8634300">,</span>&nbsp;<span class="ident" id="8634302">s</span><span class="op" id="8634303">,</span>&nbsp;<span class="ident" id="8634305">tt</span><span class="op" id="8634307">.</span><span class="ident" id="8634308">indent</span><span class="op" id="8634314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634321">}</span><br>
<span class="lineno"></span><span class="op" id="8634323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="8634326">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8634365">func</span>&nbsp;<span class="ident" id="8634370">TestCompactBig</span><span class="op" id="8634384">(</span><span class="ident" id="8634385">t</span>&nbsp;<span class="op" id="8634387">*</span><span class="ident" id="8634388">testing</span><span class="op" id="8634395">.</span><span class="ident" id="8634396">T</span><span class="op" id="8634397">)</span>&nbsp;<span class="op" id="8634399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634402">initBig</span><span class="op" id="8634409">(</span><span class="op" id="8634410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634413">var</span>&nbsp;<span class="ident" id="8634417">buf</span>&nbsp;<span class="ident" id="8634421">bytes</span><span class="op" id="8634426">.</span><span class="ident" id="8634427">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634435">if</span>&nbsp;<span class="ident" id="8634438">err</span>&nbsp;<span class="op" id="8634442">:=</span>&nbsp;<span class="ident" id="8634445">Compact</span><span class="op" id="8634452">(</span><span class="op" id="8634453">&amp;</span><span class="ident" id="8634454">buf</span><span class="op" id="8634457">,</span>&nbsp;<span class="ident" id="8634459">jsonBig</span><span class="op" id="8634466">)</span><span class="op" id="8634467">;</span>&nbsp;<span class="ident" id="8634469">err</span>&nbsp;<span class="op" id="8634473">!=</span>&nbsp;<span class="ident" id="8634476">nil</span>&nbsp;<span class="op" id="8634480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634484">t</span><span class="op" id="8634485">.</span><span class="ident" id="8634486">Fatalf</span><span class="op" id="8634492">(</span><span class="string" id="8634493">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8634506">,</span>&nbsp;<span class="ident" id="8634508">err</span><span class="op" id="8634511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634517">b</span>&nbsp;<span class="op" id="8634519">:=</span>&nbsp;<span class="ident" id="8634522">buf</span><span class="op" id="8634525">.</span><span class="ident" id="8634526">Bytes</span><span class="op" id="8634531">(</span><span class="op" id="8634532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634535">if</span>&nbsp;<span class="op" id="8634538">!</span><span class="ident" id="8634539">bytes</span><span class="op" id="8634544">.</span><span class="ident" id="8634545">Equal</span><span class="op" id="8634550">(</span><span class="ident" id="8634551">b</span><span class="op" id="8634552">,</span>&nbsp;<span class="ident" id="8634554">jsonBig</span><span class="op" id="8634561">)</span>&nbsp;<span class="op" id="8634563">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634567">t</span><span class="op" id="8634568">.</span><span class="ident" id="8634569">Error</span><span class="op" id="8634574">(</span><span class="string" id="8634575">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8634604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634608">diff</span><span class="op" id="8634612">(</span><span class="ident" id="8634613">t</span><span class="op" id="8634614">,</span>&nbsp;<span class="ident" id="8634616">b</span><span class="op" id="8634617">,</span>&nbsp;<span class="ident" id="8634619">jsonBig</span><span class="op" id="8634626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634630">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634638">}</span><br>
<span class="lineno"></span><span class="op" id="8634640">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="8634643">func</span>&nbsp;<span class="ident" id="8634648">TestIndentBig</span><span class="op" id="8634661">(</span><span class="ident" id="8634662">t</span>&nbsp;<span class="op" id="8634664">*</span><span class="ident" id="8634665">testing</span><span class="op" id="8634672">.</span><span class="ident" id="8634673">T</span><span class="op" id="8634674">)</span>&nbsp;<span class="op" id="8634676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634679">initBig</span><span class="op" id="8634686">(</span><span class="op" id="8634687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634690">var</span>&nbsp;<span class="ident" id="8634694">buf</span>&nbsp;<span class="ident" id="8634698">bytes</span><span class="op" id="8634703">.</span><span class="ident" id="8634704">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634712">if</span>&nbsp;<span class="ident" id="8634715">err</span>&nbsp;<span class="op" id="8634719">:=</span>&nbsp;<span class="ident" id="8634722">Indent</span><span class="op" id="8634728">(</span><span class="op" id="8634729">&amp;</span><span class="ident" id="8634730">buf</span><span class="op" id="8634733">,</span>&nbsp;<span class="ident" id="8634735">jsonBig</span><span class="op" id="8634742">,</span>&nbsp;<span class="string" id="8634744">&#34;&#34;</span><span class="op" id="8634746">,</span>&nbsp;<span class="string" id="8634748">&#34;\t&#34;</span><span class="op" id="8634752">)</span><span class="op" id="8634753">;</span>&nbsp;<span class="ident" id="8634755">err</span>&nbsp;<span class="op" id="8634759">!=</span>&nbsp;<span class="ident" id="8634762">nil</span>&nbsp;<span class="op" id="8634766">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634770">t</span><span class="op" id="8634771">.</span><span class="ident" id="8634772">Fatalf</span><span class="op" id="8634778">(</span><span class="string" id="8634779">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="8634792">,</span>&nbsp;<span class="ident" id="8634794">err</span><span class="op" id="8634797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634803">b</span>&nbsp;<span class="op" id="8634805">:=</span>&nbsp;<span class="ident" id="8634808">buf</span><span class="op" id="8634811">.</span><span class="ident" id="8634812">Bytes</span><span class="op" id="8634817">(</span><span class="op" id="8634818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8634821">if</span>&nbsp;<span class="builtinfunc" id="8634824">len</span><span class="op" id="8634827">(</span><span class="ident" id="8634828">b</span><span class="op" id="8634829">)</span>&nbsp;<span class="op" id="8634831">==</span>&nbsp;<span class="builtinfunc" id="8634834">len</span><span class="op" id="8634837">(</span><span class="ident" id="8634838">jsonBig</span><span class="op" id="8634845">)</span>&nbsp;<span class="op" id="8634847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8634851">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8634900">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8634937">t</span><span class="op" id="8634938">.</span><span class="ident" id="8634939">Fatalf</span><span class="op" id="8634945">(</span><span class="string" id="8634946">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="8634982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8634985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8634989">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635014">var</span>&nbsp;<span class="ident" id="8635018">buf1</span>&nbsp;<span class="ident" id="8635023">bytes</span><span class="op" id="8635028">.</span><span class="ident" id="8635029">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635037">if</span>&nbsp;<span class="ident" id="8635040">err</span>&nbsp;<span class="op" id="8635044">:=</span>&nbsp;<span class="ident" id="8635047">Indent</span><span class="op" id="8635053">(</span><span class="op" id="8635054">&amp;</span><span class="ident" id="8635055">buf1</span><span class="op" id="8635059">,</span>&nbsp;<span class="ident" id="8635061">b</span><span class="op" id="8635062">,</span>&nbsp;<span class="string" id="8635064">&#34;&#34;</span><span class="op" id="8635066">,</span>&nbsp;<span class="string" id="8635068">&#34;\t&#34;</span><span class="op" id="8635072">)</span><span class="op" id="8635073">;</span>&nbsp;<span class="ident" id="8635075">err</span>&nbsp;<span class="op" id="8635079">!=</span>&nbsp;<span class="ident" id="8635082">nil</span>&nbsp;<span class="op" id="8635086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635090">t</span><span class="op" id="8635091">.</span><span class="ident" id="8635092">Fatalf</span><span class="op" id="8635098">(</span><span class="string" id="8635099">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="8635112">,</span>&nbsp;<span class="ident" id="8635114">err</span><span class="op" id="8635117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8635120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635123">b1</span>&nbsp;<span class="op" id="8635126">:=</span>&nbsp;<span class="ident" id="8635129">buf1</span><span class="op" id="8635133">.</span><span class="ident" id="8635134">Bytes</span><span class="op" id="8635139">(</span><span class="op" id="8635140">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635143">if</span>&nbsp;<span class="op" id="8635146">!</span><span class="ident" id="8635147">bytes</span><span class="op" id="8635152">.</span><span class="ident" id="8635153">Equal</span><span class="op" id="8635158">(</span><span class="ident" id="8635159">b1</span><span class="op" id="8635161">,</span>&nbsp;<span class="ident" id="8635163">b</span><span class="op" id="8635164">)</span>&nbsp;<span class="op" id="8635166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635170">t</span><span class="op" id="8635171">.</span><span class="ident" id="8635172">Error</span><span class="op" id="8635177">(</span><span class="string" id="8635178">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="8635222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635226">diff</span><span class="op" id="8635230">(</span><span class="ident" id="8635231">t</span><span class="op" id="8635232">,</span>&nbsp;<span class="ident" id="8635234">b1</span><span class="op" id="8635236">,</span>&nbsp;<span class="ident" id="8635238">b</span><span class="op" id="8635239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635243">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8635251">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8635255">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635287">buf1</span><span class="op" id="8635291">.</span><span class="ident" id="8635292">Reset</span><span class="op" id="8635297">(</span><span class="op" id="8635298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635301">if</span>&nbsp;<span class="ident" id="8635304">err</span>&nbsp;<span class="op" id="8635308">:=</span>&nbsp;<span class="ident" id="8635311">Compact</span><span class="op" id="8635318">(</span><span class="op" id="8635319">&amp;</span><span class="ident" id="8635320">buf1</span><span class="op" id="8635324">,</span>&nbsp;<span class="ident" id="8635326">b</span><span class="op" id="8635327">)</span><span class="op" id="8635328">;</span>&nbsp;<span class="ident" id="8635330">err</span>&nbsp;<span class="op" id="8635334">!=</span>&nbsp;<span class="ident" id="8635337">nil</span>&nbsp;<span class="op" id="8635341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635345">t</span><span class="op" id="8635346">.</span><span class="ident" id="8635347">Fatalf</span><span class="op" id="8635353">(</span><span class="string" id="8635354">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="8635367">,</span>&nbsp;<span class="ident" id="8635369">err</span><span class="op" id="8635372">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8635375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635378">b1</span>&nbsp;<span class="op" id="8635381">=</span>&nbsp;<span class="ident" id="8635383">buf1</span><span class="op" id="8635387">.</span><span class="ident" id="8635388">Bytes</span><span class="op" id="8635393">(</span><span class="op" id="8635394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635397">if</span>&nbsp;<span class="op" id="8635400">!</span><span class="ident" id="8635401">bytes</span><span class="op" id="8635406">.</span><span class="ident" id="8635407">Equal</span><span class="op" id="8635412">(</span><span class="ident" id="8635413">b1</span><span class="op" id="8635415">,</span>&nbsp;<span class="ident" id="8635417">jsonBig</span><span class="op" id="8635424">)</span>&nbsp;<span class="op" id="8635426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635430">t</span><span class="op" id="8635431">.</span><span class="ident" id="8635432">Error</span><span class="op" id="8635437">(</span><span class="string" id="8635438">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="8635475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635479">diff</span><span class="op" id="8635483">(</span><span class="ident" id="8635484">t</span><span class="op" id="8635485">,</span>&nbsp;<span class="ident" id="8635487">b1</span><span class="op" id="8635489">,</span>&nbsp;<span class="ident" id="8635491">jsonBig</span><span class="op" id="8635498">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635502">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8635510">}</span><br>
<span class="lineno"></span><span class="op" id="8635512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8635515">type</span>&nbsp;<span class="ident" id="8635520">indentErrorTest</span>&nbsp;<span class="keyword" id="8635536">struct</span>&nbsp;<span class="op" id="8635543">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635546">in</span>&nbsp;&nbsp;<span class="builtintype" id="8635550">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635558">err</span>&nbsp;<span class="builtintype" id="8635562">error</span><br>
<span class="lineno"></span><span class="op" id="8635568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8635571">var</span>&nbsp;<span class="ident" id="8635575">indentErrorTests</span>&nbsp;<span class="op" id="8635592">=</span>&nbsp;<span class="op" id="8635594">[</span><span class="op" id="8635595">]</span><span class="ident" id="8635596">indentErrorTest</span><span class="op" id="8635611">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8635614">{</span><span class="string" id="8635615">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="8635634">,</span>&nbsp;<span class="op" id="8635636">&amp;</span><span class="ident" id="8635637">SyntaxError</span><span class="op" id="8635648">{</span><span class="string" id="8635649">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="8635689">,</span>&nbsp;<span class="num" id="8635691">17</span><span class="op" id="8635693">}</span><span class="op" id="8635694">}</span><span class="op" id="8635695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8635698">{</span><span class="string" id="8635699">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="8635724">,</span>&nbsp;<span class="op" id="8635726">&amp;</span><span class="ident" id="8635727">SyntaxError</span><span class="op" id="8635738">{</span><span class="string" id="8635739">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="8635791">,</span>&nbsp;<span class="num" id="8635793">13</span><span class="op" id="8635795">}</span><span class="op" id="8635796">}</span><span class="op" id="8635797">,</span><br>
<span class="lineno"></span><span class="op" id="8635799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8635802">func</span>&nbsp;<span class="ident" id="8635807">TestIndentErrors</span><span class="op" id="8635823">(</span><span class="ident" id="8635824">t</span>&nbsp;<span class="op" id="8635826">*</span><span class="ident" id="8635827">testing</span><span class="op" id="8635834">.</span><span class="ident" id="8635835">T</span><span class="op" id="8635836">)</span>&nbsp;<span class="op" id="8635838">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635841">for</span>&nbsp;<span class="ident" id="8635845">i</span><span class="op" id="8635846">,</span>&nbsp;<span class="ident" id="8635848">tt</span>&nbsp;<span class="op" id="8635851">:=</span>&nbsp;<span class="keyword" id="8635854">range</span>&nbsp;<span class="ident" id="8635860">indentErrorTests</span>&nbsp;<span class="op" id="8635877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635881">slice</span>&nbsp;<span class="op" id="8635887">:=</span>&nbsp;<span class="builtinfunc" id="8635890">make</span><span class="op" id="8635894">(</span><span class="op" id="8635895">[</span><span class="op" id="8635896">]</span><span class="builtintype" id="8635897">uint8</span><span class="op" id="8635902">,</span>&nbsp;<span class="num" id="8635904">0</span><span class="op" id="8635905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8635909">buf</span>&nbsp;<span class="op" id="8635913">:=</span>&nbsp;<span class="ident" id="8635916">bytes</span><span class="op" id="8635921">.</span><span class="ident" id="8635922">NewBuffer</span><span class="op" id="8635931">(</span><span class="ident" id="8635932">slice</span><span class="op" id="8635937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8635941">if</span>&nbsp;<span class="ident" id="8635944">err</span>&nbsp;<span class="op" id="8635948">:=</span>&nbsp;<span class="ident" id="8635951">Indent</span><span class="op" id="8635957">(</span><span class="ident" id="8635958">buf</span><span class="op" id="8635961">,</span>&nbsp;<span class="op" id="8635963">[</span><span class="op" id="8635964">]</span><span class="builtintype" id="8635965">uint8</span><span class="op" id="8635970">(</span><span class="ident" id="8635971">tt</span><span class="op" id="8635973">.</span><span class="ident" id="8635974">in</span><span class="op" id="8635976">)</span><span class="op" id="8635977">,</span>&nbsp;<span class="string" id="8635979">&#34;&#34;</span><span class="op" id="8635981">,</span>&nbsp;<span class="string" id="8635983">&#34;&#34;</span><span class="op" id="8635985">)</span><span class="op" id="8635986">;</span>&nbsp;<span class="ident" id="8635988">err</span>&nbsp;<span class="op" id="8635992">!=</span>&nbsp;<span class="ident" id="8635995">nil</span>&nbsp;<span class="op" id="8635999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636004">if</span>&nbsp;<span class="op" id="8636007">!</span><span class="ident" id="8636008">reflect</span><span class="op" id="8636015">.</span><span class="ident" id="8636016">DeepEqual</span><span class="op" id="8636025">(</span><span class="ident" id="8636026">err</span><span class="op" id="8636029">,</span>&nbsp;<span class="ident" id="8636031">tt</span><span class="op" id="8636033">.</span><span class="ident" id="8636034">err</span><span class="op" id="8636037">)</span>&nbsp;<span class="op" id="8636039">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636045">t</span><span class="op" id="8636046">.</span><span class="ident" id="8636047">Errorf</span><span class="op" id="8636053">(</span><span class="string" id="8636054">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="8636072">,</span>&nbsp;<span class="ident" id="8636074">i</span><span class="op" id="8636075">,</span>&nbsp;<span class="ident" id="8636077">err</span><span class="op" id="8636080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636086">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636105">}</span><br>
<span class="lineno">180</span><span class="op" id="8636107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8636110">func</span>&nbsp;<span class="ident" id="8636115">TestNextValueBig</span><span class="op" id="8636131">(</span><span class="ident" id="8636132">t</span>&nbsp;<span class="op" id="8636134">*</span><span class="ident" id="8636135">testing</span><span class="op" id="8636142">.</span><span class="ident" id="8636143">T</span><span class="op" id="8636144">)</span>&nbsp;<span class="op" id="8636146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636149">initBig</span><span class="op" id="8636156">(</span><span class="op" id="8636157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636160">var</span>&nbsp;<span class="ident" id="8636164">scan</span>&nbsp;<span class="ident" id="8636169">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636178">item</span><span class="op" id="8636182">,</span>&nbsp;<span class="ident" id="8636184">rest</span><span class="op" id="8636188">,</span>&nbsp;<span class="ident" id="8636190">err</span>&nbsp;<span class="op" id="8636194">:=</span>&nbsp;<span class="ident" id="8636197">nextValue</span><span class="op" id="8636206">(</span><span class="ident" id="8636207">jsonBig</span><span class="op" id="8636214">,</span>&nbsp;<span class="op" id="8636216">&amp;</span><span class="ident" id="8636217">scan</span><span class="op" id="8636221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636224">if</span>&nbsp;<span class="ident" id="8636227">err</span>&nbsp;<span class="op" id="8636231">!=</span>&nbsp;<span class="ident" id="8636234">nil</span>&nbsp;<span class="op" id="8636238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636242">t</span><span class="op" id="8636243">.</span><span class="ident" id="8636244">Fatalf</span><span class="op" id="8636250">(</span><span class="string" id="8636251">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="8636266">,</span>&nbsp;<span class="ident" id="8636268">err</span><span class="op" id="8636271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636277">if</span>&nbsp;<span class="builtinfunc" id="8636280">len</span><span class="op" id="8636283">(</span><span class="ident" id="8636284">item</span><span class="op" id="8636288">)</span>&nbsp;<span class="op" id="8636290">!=</span>&nbsp;<span class="builtinfunc" id="8636293">len</span><span class="op" id="8636296">(</span><span class="ident" id="8636297">jsonBig</span><span class="op" id="8636304">)</span>&nbsp;<span class="op" id="8636306">||</span>&nbsp;<span class="op" id="8636309">&amp;</span><span class="ident" id="8636310">item</span><span class="op" id="8636314">[</span><span class="num" id="8636315">0</span><span class="op" id="8636316">]</span>&nbsp;<span class="op" id="8636318">!=</span>&nbsp;<span class="op" id="8636321">&amp;</span><span class="ident" id="8636322">jsonBig</span><span class="op" id="8636329">[</span><span class="num" id="8636330">0</span><span class="op" id="8636331">]</span>&nbsp;<span class="op" id="8636333">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636337">t</span><span class="op" id="8636338">.</span><span class="ident" id="8636339">Errorf</span><span class="op" id="8636345">(</span><span class="string" id="8636346">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8636367">,</span>&nbsp;<span class="builtinfunc" id="8636369">len</span><span class="op" id="8636372">(</span><span class="ident" id="8636373">item</span><span class="op" id="8636377">)</span><span class="op" id="8636378">,</span>&nbsp;<span class="builtinfunc" id="8636380">len</span><span class="op" id="8636383">(</span><span class="ident" id="8636384">jsonBig</span><span class="op" id="8636391">)</span><span class="op" id="8636392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636398">if</span>&nbsp;<span class="builtinfunc" id="8636401">len</span><span class="op" id="8636404">(</span><span class="ident" id="8636405">rest</span><span class="op" id="8636409">)</span>&nbsp;<span class="op" id="8636411">!=</span>&nbsp;<span class="num" id="8636414">0</span>&nbsp;<span class="op" id="8636416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636420">t</span><span class="op" id="8636421">.</span><span class="ident" id="8636422">Errorf</span><span class="op" id="8636428">(</span><span class="string" id="8636429">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8636447">,</span>&nbsp;<span class="builtinfunc" id="8636449">len</span><span class="op" id="8636452">(</span><span class="ident" id="8636453">rest</span><span class="op" id="8636457">)</span><span class="op" id="8636458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636461">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636465">item</span><span class="op" id="8636469">,</span>&nbsp;<span class="ident" id="8636471">rest</span><span class="op" id="8636475">,</span>&nbsp;<span class="ident" id="8636477">err</span>&nbsp;<span class="op" id="8636481">=</span>&nbsp;<span class="ident" id="8636483">nextValue</span><span class="op" id="8636492">(</span><span class="builtinfunc" id="8636493">append</span><span class="op" id="8636499">(</span><span class="ident" id="8636500">jsonBig</span><span class="op" id="8636507">,</span>&nbsp;<span class="string" id="8636509">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="8636522">...</span><span class="op" id="8636525">)</span><span class="op" id="8636526">,</span>&nbsp;<span class="op" id="8636528">&amp;</span><span class="ident" id="8636529">scan</span><span class="op" id="8636533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636536">if</span>&nbsp;<span class="ident" id="8636539">err</span>&nbsp;<span class="op" id="8636543">!=</span>&nbsp;<span class="ident" id="8636546">nil</span>&nbsp;<span class="op" id="8636550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636554">t</span><span class="op" id="8636555">.</span><span class="ident" id="8636556">Fatalf</span><span class="op" id="8636562">(</span><span class="string" id="8636563">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="8636584">,</span>&nbsp;<span class="ident" id="8636586">err</span><span class="op" id="8636589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636592">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636595">if</span>&nbsp;<span class="builtinfunc" id="8636598">len</span><span class="op" id="8636601">(</span><span class="ident" id="8636602">item</span><span class="op" id="8636606">)</span>&nbsp;<span class="op" id="8636608">!=</span>&nbsp;<span class="builtinfunc" id="8636611">len</span><span class="op" id="8636614">(</span><span class="ident" id="8636615">jsonBig</span><span class="op" id="8636622">)</span>&nbsp;<span class="op" id="8636624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636628">t</span><span class="op" id="8636629">.</span><span class="ident" id="8636630">Errorf</span><span class="op" id="8636636">(</span><span class="string" id="8636637">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="8636658">,</span>&nbsp;<span class="builtinfunc" id="8636660">len</span><span class="op" id="8636663">(</span><span class="ident" id="8636664">item</span><span class="op" id="8636668">)</span><span class="op" id="8636669">,</span>&nbsp;<span class="builtinfunc" id="8636671">len</span><span class="op" id="8636674">(</span><span class="ident" id="8636675">jsonBig</span><span class="op" id="8636682">)</span><span class="op" id="8636683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636689">if</span>&nbsp;<span class="builtintype" id="8636692">string</span><span class="op" id="8636698">(</span><span class="ident" id="8636699">rest</span><span class="op" id="8636703">)</span>&nbsp;<span class="op" id="8636705">!=</span>&nbsp;<span class="string" id="8636708">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="8636722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636726">t</span><span class="op" id="8636727">.</span><span class="ident" id="8636728">Errorf</span><span class="op" id="8636734">(</span><span class="string" id="8636735">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="8636753">,</span>&nbsp;<span class="builtinfunc" id="8636755">len</span><span class="op" id="8636758">(</span><span class="ident" id="8636759">rest</span><span class="op" id="8636763">)</span><span class="op" id="8636764">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636767">}</span><br>
<span class="lineno"></span><span class="op" id="8636769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8636772">var</span>&nbsp;<span class="ident" id="8636776">benchScan</span>&nbsp;<span class="ident" id="8636786">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="8636795">func</span>&nbsp;<span class="ident" id="8636800">BenchmarkSkipValue</span><span class="op" id="8636818">(</span><span class="ident" id="8636819">b</span>&nbsp;<span class="op" id="8636821">*</span><span class="ident" id="8636822">testing</span><span class="op" id="8636829">.</span><span class="ident" id="8636830">B</span><span class="op" id="8636831">)</span>&nbsp;<span class="op" id="8636833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636836">initBig</span><span class="op" id="8636843">(</span><span class="op" id="8636844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636847">for</span>&nbsp;<span class="ident" id="8636851">i</span>&nbsp;<span class="op" id="8636853">:=</span>&nbsp;<span class="num" id="8636856">0</span><span class="op" id="8636857">;</span>&nbsp;<span class="ident" id="8636859">i</span>&nbsp;<span class="op" id="8636861">&lt;</span>&nbsp;<span class="ident" id="8636863">b</span><span class="op" id="8636864">.</span><span class="ident" id="8636865">N</span><span class="op" id="8636866">;</span>&nbsp;<span class="ident" id="8636868">i</span><span class="op" id="8636869">++</span>&nbsp;<span class="op" id="8636872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636876">nextValue</span><span class="op" id="8636885">(</span><span class="ident" id="8636886">jsonBig</span><span class="op" id="8636893">,</span>&nbsp;<span class="op" id="8636895">&amp;</span><span class="ident" id="8636896">benchScan</span><span class="op" id="8636905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8636908">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8636911">b</span><span class="op" id="8636912">.</span><span class="ident" id="8636913">SetBytes</span><span class="op" id="8636921">(</span><span class="ident" id="8636922">int64</span><span class="op" id="8636927">(</span><span class="builtinfunc" id="8636928">len</span><span class="op" id="8636931">(</span><span class="ident" id="8636932">jsonBig</span><span class="op" id="8636939">)</span><span class="op" id="8636940">)</span><span class="op" id="8636941">)</span><br>
<span class="lineno"></span><span class="op" id="8636943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8636946">func</span>&nbsp;<span class="ident" id="8636951">diff</span><span class="op" id="8636955">(</span><span class="ident" id="8636956">t</span>&nbsp;<span class="op" id="8636958">*</span><span class="ident" id="8636959">testing</span><span class="op" id="8636966">.</span><span class="ident" id="8636967">T</span><span class="op" id="8636968">,</span>&nbsp;<span class="ident" id="8636970">a</span><span class="op" id="8636971">,</span>&nbsp;<span class="ident" id="8636973">b</span>&nbsp;<span class="op" id="8636975">[</span><span class="op" id="8636976">]</span><span class="builtintype" id="8636977">byte</span><span class="op" id="8636981">)</span>&nbsp;<span class="op" id="8636983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8636986">for</span>&nbsp;<span class="ident" id="8636990">i</span>&nbsp;<span class="op" id="8636992">:=</span>&nbsp;<span class="num" id="8636995">0</span><span class="op" id="8636996">;</span>&nbsp;<span class="op" id="8636998">;</span>&nbsp;<span class="ident" id="8637000">i</span><span class="op" id="8637001">++</span>&nbsp;<span class="op" id="8637004">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637008">if</span>&nbsp;<span class="ident" id="8637011">i</span>&nbsp;<span class="op" id="8637013">&gt;=</span>&nbsp;<span class="builtinfunc" id="8637016">len</span><span class="op" id="8637019">(</span><span class="ident" id="8637020">a</span><span class="op" id="8637021">)</span>&nbsp;<span class="op" id="8637023">||</span>&nbsp;<span class="ident" id="8637026">i</span>&nbsp;<span class="op" id="8637028">&gt;=</span>&nbsp;<span class="builtinfunc" id="8637031">len</span><span class="op" id="8637034">(</span><span class="ident" id="8637035">b</span><span class="op" id="8637036">)</span>&nbsp;<span class="op" id="8637038">||</span>&nbsp;<span class="ident" id="8637041">a</span><span class="op" id="8637042">[</span><span class="ident" id="8637043">i</span><span class="op" id="8637044">]</span>&nbsp;<span class="op" id="8637046">!=</span>&nbsp;<span class="ident" id="8637049">b</span><span class="op" id="8637050">[</span><span class="ident" id="8637051">i</span><span class="op" id="8637052">]</span>&nbsp;<span class="op" id="8637054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637059">j</span>&nbsp;<span class="op" id="8637061">:=</span>&nbsp;<span class="ident" id="8637064">i</span>&nbsp;<span class="op" id="8637066">-</span>&nbsp;<span class="num" id="8637068">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637074">if</span>&nbsp;<span class="ident" id="8637077">j</span>&nbsp;<span class="op" id="8637079">&lt;</span>&nbsp;<span class="num" id="8637081">0</span>&nbsp;<span class="op" id="8637083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637089">j</span>&nbsp;<span class="op" id="8637091">=</span>&nbsp;<span class="num" id="8637093">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637098">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637103">t</span><span class="op" id="8637104">.</span><span class="ident" id="8637105">Errorf</span><span class="op" id="8637111">(</span><span class="string" id="8637112">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;«%s»&nbsp;vs&nbsp;«%s»&#34;</span><span class="op" id="8637145">,</span>&nbsp;<span class="ident" id="8637147">i</span><span class="op" id="8637148">,</span>&nbsp;<span class="ident" id="8637150">trim</span><span class="op" id="8637154">(</span><span class="ident" id="8637155">a</span><span class="op" id="8637156">[</span><span class="ident" id="8637157">j</span><span class="op" id="8637158">:</span><span class="op" id="8637159">]</span><span class="op" id="8637160">)</span><span class="op" id="8637161">,</span>&nbsp;<span class="ident" id="8637163">trim</span><span class="op" id="8637167">(</span><span class="ident" id="8637168">b</span><span class="op" id="8637169">[</span><span class="ident" id="8637170">j</span><span class="op" id="8637171">:</span><span class="op" id="8637172">]</span><span class="op" id="8637173">)</span><span class="op" id="8637174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637179">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637191">}</span><br>
<span class="lineno"></span><span class="op" id="8637193">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8637196">func</span>&nbsp;<span class="ident" id="8637201">trim</span><span class="op" id="8637205">(</span><span class="ident" id="8637206">b</span>&nbsp;<span class="op" id="8637208">[</span><span class="op" id="8637209">]</span><span class="builtintype" id="8637210">byte</span><span class="op" id="8637214">)</span>&nbsp;<span class="op" id="8637216">[</span><span class="op" id="8637217">]</span><span class="builtintype" id="8637218">byte</span>&nbsp;<span class="op" id="8637223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637226">if</span>&nbsp;<span class="builtinfunc" id="8637229">len</span><span class="op" id="8637232">(</span><span class="ident" id="8637233">b</span><span class="op" id="8637234">)</span>&nbsp;<span class="op" id="8637236">&gt;</span>&nbsp;<span class="num" id="8637238">20</span>&nbsp;<span class="op" id="8637241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637245">return</span>&nbsp;<span class="ident" id="8637252">b</span><span class="op" id="8637253">[</span><span class="num" id="8637254">0</span><span class="op" id="8637255">:</span><span class="num" id="8637256">20</span><span class="op" id="8637258">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637261">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637264">return</span>&nbsp;<span class="ident" id="8637271">b</span><br>
<span class="lineno"></span><span class="op" id="8637273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8637276">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8637311">var</span>&nbsp;<span class="ident" id="8637315">jsonBig</span>&nbsp;<span class="op" id="8637323">[</span><span class="op" id="8637324">]</span><span class="builtintype" id="8637325">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8637331">func</span>&nbsp;<span class="ident" id="8637336">initBig</span><span class="op" id="8637343">(</span><span class="op" id="8637344">)</span>&nbsp;<span class="op" id="8637346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637349">n</span>&nbsp;<span class="op" id="8637351">:=</span>&nbsp;<span class="num" id="8637354">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637361">if</span>&nbsp;<span class="ident" id="8637364">testing</span><span class="op" id="8637371">.</span><span class="ident" id="8637372">Short</span><span class="op" id="8637377">(</span><span class="op" id="8637378">)</span>&nbsp;<span class="op" id="8637380">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637384">n</span>&nbsp;<span class="op" id="8637386">=</span>&nbsp;<span class="num" id="8637388">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637396">b</span><span class="op" id="8637397">,</span>&nbsp;<span class="ident" id="8637399">err</span>&nbsp;<span class="op" id="8637403">:=</span>&nbsp;<span class="ident" id="8637406">Marshal</span><span class="op" id="8637413">(</span><span class="ident" id="8637414">genValue</span><span class="op" id="8637422">(</span><span class="ident" id="8637423">n</span><span class="op" id="8637424">)</span><span class="op" id="8637425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637428">if</span>&nbsp;<span class="ident" id="8637431">err</span>&nbsp;<span class="op" id="8637435">!=</span>&nbsp;<span class="ident" id="8637438">nil</span>&nbsp;<span class="op" id="8637442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8637446">panic</span><span class="op" id="8637451">(</span><span class="ident" id="8637452">err</span><span class="op" id="8637455">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637461">jsonBig</span>&nbsp;<span class="op" id="8637469">=</span>&nbsp;<span class="ident" id="8637471">b</span><br>
<span class="lineno"></span><span class="op" id="8637473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8637476">func</span>&nbsp;<span class="ident" id="8637481">genValue</span><span class="op" id="8637489">(</span><span class="ident" id="8637490">n</span>&nbsp;<span class="builtintype" id="8637492">int</span><span class="op" id="8637495">)</span>&nbsp;<span class="keyword" id="8637497">interface</span><span class="op" id="8637506">{</span><span class="op" id="8637507">}</span>&nbsp;<span class="op" id="8637509">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637512">if</span>&nbsp;<span class="ident" id="8637515">n</span>&nbsp;<span class="op" id="8637517">&gt;</span>&nbsp;<span class="num" id="8637519">1</span>&nbsp;<span class="op" id="8637521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637525">switch</span>&nbsp;<span class="ident" id="8637532">rand</span><span class="op" id="8637536">.</span><span class="ident" id="8637537">Intn</span><span class="op" id="8637541">(</span><span class="num" id="8637542">2</span><span class="op" id="8637543">)</span>&nbsp;<span class="op" id="8637545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637549">case</span>&nbsp;<span class="num" id="8637554">0</span><span class="op" id="8637555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637560">return</span>&nbsp;<span class="ident" id="8637567">genArray</span><span class="op" id="8637575">(</span><span class="ident" id="8637576">n</span><span class="op" id="8637577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637581">case</span>&nbsp;<span class="num" id="8637586">1</span><span class="op" id="8637587">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637592">return</span>&nbsp;<span class="ident" id="8637599">genMap</span><span class="op" id="8637605">(</span><span class="ident" id="8637606">n</span><span class="op" id="8637607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637617">switch</span>&nbsp;<span class="ident" id="8637624">rand</span><span class="op" id="8637628">.</span><span class="ident" id="8637629">Intn</span><span class="op" id="8637633">(</span><span class="num" id="8637634">3</span><span class="op" id="8637635">)</span>&nbsp;<span class="op" id="8637637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637640">case</span>&nbsp;<span class="num" id="8637645">0</span><span class="op" id="8637646">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637650">return</span>&nbsp;<span class="ident" id="8637657">rand</span><span class="op" id="8637661">.</span><span class="ident" id="8637662">Intn</span><span class="op" id="8637666">(</span><span class="num" id="8637667">2</span><span class="op" id="8637668">)</span>&nbsp;<span class="op" id="8637670">==</span>&nbsp;<span class="num" id="8637673">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637676">case</span>&nbsp;<span class="num" id="8637681">1</span><span class="op" id="8637682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637686">return</span>&nbsp;<span class="ident" id="8637693">rand</span><span class="op" id="8637697">.</span><span class="ident" id="8637698">NormFloat64</span><span class="op" id="8637709">(</span><span class="op" id="8637710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637713">case</span>&nbsp;<span class="num" id="8637718">2</span><span class="op" id="8637719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637723">return</span>&nbsp;<span class="ident" id="8637730">genString</span><span class="op" id="8637739">(</span><span class="num" id="8637740">30</span><span class="op" id="8637742">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8637748">panic</span><span class="op" id="8637753">(</span><span class="string" id="8637754">&#34;unreachable&#34;</span><span class="op" id="8637767">)</span><br>
<span class="lineno"></span><span class="op" id="8637769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8637772">func</span>&nbsp;<span class="ident" id="8637777">genString</span><span class="op" id="8637786">(</span><span class="ident" id="8637787">stddev</span>&nbsp;<span class="builtintype" id="8637794">float64</span><span class="op" id="8637801">)</span>&nbsp;<span class="builtintype" id="8637803">string</span>&nbsp;<span class="op" id="8637810">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637813">n</span>&nbsp;<span class="op" id="8637815">:=</span>&nbsp;<span class="builtintype" id="8637818">int</span><span class="op" id="8637821">(</span><span class="ident" id="8637822">math</span><span class="op" id="8637826">.</span><span class="ident" id="8637827">Abs</span><span class="op" id="8637830">(</span><span class="ident" id="8637831">rand</span><span class="op" id="8637835">.</span><span class="ident" id="8637836">NormFloat64</span><span class="op" id="8637847">(</span><span class="op" id="8637848">)</span><span class="op" id="8637849">*</span><span class="ident" id="8637850">stddev</span>&nbsp;<span class="op" id="8637857">+</span>&nbsp;<span class="ident" id="8637859">stddev</span><span class="op" id="8637865">/</span><span class="num" id="8637866">2</span><span class="op" id="8637867">)</span><span class="op" id="8637868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637871">c</span>&nbsp;<span class="op" id="8637873">:=</span>&nbsp;<span class="builtinfunc" id="8637876">make</span><span class="op" id="8637880">(</span><span class="op" id="8637881">[</span><span class="op" id="8637882">]</span><span class="builtintype" id="8637883">rune</span><span class="op" id="8637887">,</span>&nbsp;<span class="ident" id="8637889">n</span><span class="op" id="8637890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637893">for</span>&nbsp;<span class="ident" id="8637897">i</span>&nbsp;<span class="op" id="8637899">:=</span>&nbsp;<span class="keyword" id="8637902">range</span>&nbsp;<span class="ident" id="8637908">c</span>&nbsp;<span class="op" id="8637910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637914">f</span>&nbsp;<span class="op" id="8637916">:=</span>&nbsp;<span class="ident" id="8637919">math</span><span class="op" id="8637923">.</span><span class="ident" id="8637924">Abs</span><span class="op" id="8637927">(</span><span class="ident" id="8637928">rand</span><span class="op" id="8637932">.</span><span class="ident" id="8637933">NormFloat64</span><span class="op" id="8637944">(</span><span class="op" id="8637945">)</span><span class="op" id="8637946">*</span><span class="num" id="8637947">64</span>&nbsp;<span class="op" id="8637950">+</span>&nbsp;<span class="num" id="8637952">32</span><span class="op" id="8637954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8637958">if</span>&nbsp;<span class="ident" id="8637961">f</span>&nbsp;<span class="op" id="8637963">&gt;</span>&nbsp;<span class="num" id="8637965">0x10ffff</span>&nbsp;<span class="op" id="8637974">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637979">f</span>&nbsp;<span class="op" id="8637981">=</span>&nbsp;<span class="num" id="8637983">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8637994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8637998">c</span><span class="op" id="8637999">[</span><span class="ident" id="8638000">i</span><span class="op" id="8638001">]</span>&nbsp;<span class="op" id="8638003">=</span>&nbsp;<span class="builtintype" id="8638005">rune</span><span class="op" id="8638009">(</span><span class="ident" id="8638010">f</span><span class="op" id="8638011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638017">return</span>&nbsp;<span class="builtintype" id="8638024">string</span><span class="op" id="8638030">(</span><span class="ident" id="8638031">c</span><span class="op" id="8638032">)</span><br>
<span class="lineno">285</span><span class="op" id="8638034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8638037">func</span>&nbsp;<span class="ident" id="8638042">genArray</span><span class="op" id="8638050">(</span><span class="ident" id="8638051">n</span>&nbsp;<span class="builtintype" id="8638053">int</span><span class="op" id="8638056">)</span>&nbsp;<span class="op" id="8638058">[</span><span class="op" id="8638059">]</span><span class="keyword" id="8638060">interface</span><span class="op" id="8638069">{</span><span class="op" id="8638070">}</span>&nbsp;<span class="op" id="8638072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638075">f</span>&nbsp;<span class="op" id="8638077">:=</span>&nbsp;<span class="builtintype" id="8638080">int</span><span class="op" id="8638083">(</span><span class="ident" id="8638084">math</span><span class="op" id="8638088">.</span><span class="ident" id="8638089">Abs</span><span class="op" id="8638092">(</span><span class="ident" id="8638093">rand</span><span class="op" id="8638097">.</span><span class="ident" id="8638098">NormFloat64</span><span class="op" id="8638109">(</span><span class="op" id="8638110">)</span><span class="op" id="8638111">)</span>&nbsp;<span class="op" id="8638113">*</span>&nbsp;<span class="ident" id="8638115">math</span><span class="op" id="8638119">.</span><span class="ident" id="8638120">Min</span><span class="op" id="8638123">(</span><span class="num" id="8638124">10</span><span class="op" id="8638126">,</span>&nbsp;<span class="builtintype" id="8638128">float64</span><span class="op" id="8638135">(</span><span class="ident" id="8638136">n</span><span class="op" id="8638137">/</span><span class="num" id="8638138">2</span><span class="op" id="8638139">)</span><span class="op" id="8638140">)</span><span class="op" id="8638141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638144">if</span>&nbsp;<span class="ident" id="8638147">f</span>&nbsp;<span class="op" id="8638149">&gt;</span>&nbsp;<span class="ident" id="8638151">n</span>&nbsp;<span class="op" id="8638153">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638157">f</span>&nbsp;<span class="op" id="8638159">=</span>&nbsp;<span class="ident" id="8638161">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638167">if</span>&nbsp;<span class="ident" id="8638170">f</span>&nbsp;<span class="op" id="8638172">&lt;</span>&nbsp;<span class="num" id="8638174">1</span>&nbsp;<span class="op" id="8638176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638180">f</span>&nbsp;<span class="op" id="8638182">=</span>&nbsp;<span class="num" id="8638184">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638187">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638190">x</span>&nbsp;<span class="op" id="8638192">:=</span>&nbsp;<span class="builtinfunc" id="8638195">make</span><span class="op" id="8638199">(</span><span class="op" id="8638200">[</span><span class="op" id="8638201">]</span><span class="keyword" id="8638202">interface</span><span class="op" id="8638211">{</span><span class="op" id="8638212">}</span><span class="op" id="8638213">,</span>&nbsp;<span class="ident" id="8638215">f</span><span class="op" id="8638216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638219">for</span>&nbsp;<span class="ident" id="8638223">i</span>&nbsp;<span class="op" id="8638225">:=</span>&nbsp;<span class="keyword" id="8638228">range</span>&nbsp;<span class="ident" id="8638234">x</span>&nbsp;<span class="op" id="8638236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638240">x</span><span class="op" id="8638241">[</span><span class="ident" id="8638242">i</span><span class="op" id="8638243">]</span>&nbsp;<span class="op" id="8638245">=</span>&nbsp;<span class="ident" id="8638247">genValue</span><span class="op" id="8638255">(</span><span class="op" id="8638256">(</span><span class="op" id="8638257">(</span><span class="ident" id="8638258">i</span><span class="op" id="8638259">+</span><span class="num" id="8638260">1</span><span class="op" id="8638261">)</span><span class="op" id="8638262">*</span><span class="ident" id="8638263">n</span><span class="op" id="8638264">)</span><span class="op" id="8638265">/</span><span class="ident" id="8638266">f</span>&nbsp;<span class="op" id="8638268">-</span>&nbsp;<span class="op" id="8638270">(</span><span class="ident" id="8638271">i</span><span class="op" id="8638272">*</span><span class="ident" id="8638273">n</span><span class="op" id="8638274">)</span><span class="op" id="8638275">/</span><span class="ident" id="8638276">f</span><span class="op" id="8638277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638283">return</span>&nbsp;<span class="ident" id="8638290">x</span><br>
<span class="lineno">300</span><span class="op" id="8638292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8638295">func</span>&nbsp;<span class="ident" id="8638300">genMap</span><span class="op" id="8638306">(</span><span class="ident" id="8638307">n</span>&nbsp;<span class="builtintype" id="8638309">int</span><span class="op" id="8638312">)</span>&nbsp;<span class="keyword" id="8638314">map</span><span class="op" id="8638317">[</span><span class="builtintype" id="8638318">string</span><span class="op" id="8638324">]</span><span class="keyword" id="8638325">interface</span><span class="op" id="8638334">{</span><span class="op" id="8638335">}</span>&nbsp;<span class="op" id="8638337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638340">f</span>&nbsp;<span class="op" id="8638342">:=</span>&nbsp;<span class="builtintype" id="8638345">int</span><span class="op" id="8638348">(</span><span class="ident" id="8638349">math</span><span class="op" id="8638353">.</span><span class="ident" id="8638354">Abs</span><span class="op" id="8638357">(</span><span class="ident" id="8638358">rand</span><span class="op" id="8638362">.</span><span class="ident" id="8638363">NormFloat64</span><span class="op" id="8638374">(</span><span class="op" id="8638375">)</span><span class="op" id="8638376">)</span>&nbsp;<span class="op" id="8638378">*</span>&nbsp;<span class="ident" id="8638380">math</span><span class="op" id="8638384">.</span><span class="ident" id="8638385">Min</span><span class="op" id="8638388">(</span><span class="num" id="8638389">10</span><span class="op" id="8638391">,</span>&nbsp;<span class="builtintype" id="8638393">float64</span><span class="op" id="8638400">(</span><span class="ident" id="8638401">n</span><span class="op" id="8638402">/</span><span class="num" id="8638403">2</span><span class="op" id="8638404">)</span><span class="op" id="8638405">)</span><span class="op" id="8638406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638409">if</span>&nbsp;<span class="ident" id="8638412">f</span>&nbsp;<span class="op" id="8638414">&gt;</span>&nbsp;<span class="ident" id="8638416">n</span>&nbsp;<span class="op" id="8638418">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638422">f</span>&nbsp;<span class="op" id="8638424">=</span>&nbsp;<span class="ident" id="8638426">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638432">if</span>&nbsp;<span class="ident" id="8638435">n</span>&nbsp;<span class="op" id="8638437">&gt;</span>&nbsp;<span class="num" id="8638439">0</span>&nbsp;<span class="op" id="8638441">&amp;&amp;</span>&nbsp;<span class="ident" id="8638444">f</span>&nbsp;<span class="op" id="8638446">==</span>&nbsp;<span class="num" id="8638449">0</span>&nbsp;<span class="op" id="8638451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638455">f</span>&nbsp;<span class="op" id="8638457">=</span>&nbsp;<span class="num" id="8638459">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638462">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638465">x</span>&nbsp;<span class="op" id="8638467">:=</span>&nbsp;<span class="builtinfunc" id="8638470">make</span><span class="op" id="8638474">(</span><span class="keyword" id="8638475">map</span><span class="op" id="8638478">[</span><span class="builtintype" id="8638479">string</span><span class="op" id="8638485">]</span><span class="keyword" id="8638486">interface</span><span class="op" id="8638495">{</span><span class="op" id="8638496">}</span><span class="op" id="8638497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638500">for</span>&nbsp;<span class="ident" id="8638504">i</span>&nbsp;<span class="op" id="8638506">:=</span>&nbsp;<span class="num" id="8638509">0</span><span class="op" id="8638510">;</span>&nbsp;<span class="ident" id="8638512">i</span>&nbsp;<span class="op" id="8638514">&lt;</span>&nbsp;<span class="ident" id="8638516">f</span><span class="op" id="8638517">;</span>&nbsp;<span class="ident" id="8638519">i</span><span class="op" id="8638520">++</span>&nbsp;<span class="op" id="8638523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8638527">x</span><span class="op" id="8638528">[</span><span class="ident" id="8638529">genString</span><span class="op" id="8638538">(</span><span class="num" id="8638539">10</span><span class="op" id="8638541">)</span><span class="op" id="8638542">]</span>&nbsp;<span class="op" id="8638544">=</span>&nbsp;<span class="ident" id="8638546">genValue</span><span class="op" id="8638554">(</span><span class="op" id="8638555">(</span><span class="op" id="8638556">(</span><span class="ident" id="8638557">i</span><span class="op" id="8638558">+</span><span class="num" id="8638559">1</span><span class="op" id="8638560">)</span><span class="op" id="8638561">*</span><span class="ident" id="8638562">n</span><span class="op" id="8638563">)</span><span class="op" id="8638564">/</span><span class="ident" id="8638565">f</span>&nbsp;<span class="op" id="8638567">-</span>&nbsp;<span class="op" id="8638569">(</span><span class="ident" id="8638570">i</span><span class="op" id="8638571">*</span><span class="ident" id="8638572">n</span><span class="op" id="8638573">)</span><span class="op" id="8638574">/</span><span class="ident" id="8638575">f</span><span class="op" id="8638576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8638579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8638582">return</span>&nbsp;<span class="ident" id="8638589">x</span><br>
<span class="lineno">315</span><span class="op" id="8638591">}</span>
</div>
</body>
</html>
