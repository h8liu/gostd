<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2284740">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2284795">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2284849">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2284900">package</span>&nbsp;<span class="ident" id="2284908">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2284914">//&nbsp;Frexp&nbsp;breaks&nbsp;f&nbsp;into&nbsp;a&nbsp;normalized&nbsp;fraction</span><br>
<span class="lineno"></span><span class="comment" id="2284959">//&nbsp;and&nbsp;an&nbsp;integral&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="comment" id="2284992">//&nbsp;It&nbsp;returns&nbsp;frac&nbsp;and&nbsp;exp&nbsp;satisfying&nbsp;f&nbsp;==&nbsp;frac&nbsp;×&nbsp;2**exp,</span><br>
<span class="lineno">10</span><span class="comment" id="2285051">//&nbsp;with&nbsp;the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;frac&nbsp;in&nbsp;the&nbsp;interval&nbsp;[½,&nbsp;1).</span><br>
<span class="lineno"></span><span class="comment" id="2285111">//</span><br>
<span class="lineno"></span><span class="comment" id="2285114">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2285136">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±0)&nbsp;=&nbsp;±0,&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2285159">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±Inf)&nbsp;=&nbsp;±Inf,&nbsp;0</span><br>
<span class="lineno">15</span><span class="comment" id="2285186">//&nbsp;&nbsp;&nbsp;&nbspFrexp(NaN)&nbsp;=&nbsp;NaN,&nbsp;0</span><br>
<span class="lineno"></span><span class="keyword" id="2285209">func</span>&nbsp;<span class="ident" id="2285214">Frexp</span><span class="op" id="2285219">(</span><span class="ident" id="2285220">f</span>&nbsp;<span class="builtintype" id="2285222">float64</span><span class="op" id="2285229">)</span>&nbsp;<span class="op" id="2285231">(</span><span class="ident" id="2285232">frac</span>&nbsp;<span class="builtintype" id="2285237">float64</span><span class="op" id="2285244">,</span>&nbsp;<span class="ident" id="2285246">exp</span>&nbsp;<span class="builtintype" id="2285250">int</span><span class="op" id="2285253">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2285256">func</span>&nbsp;<span class="ident" id="2285261">frexp</span><span class="op" id="2285266">(</span><span class="ident" id="2285267">f</span>&nbsp;<span class="builtintype" id="2285269">float64</span><span class="op" id="2285276">)</span>&nbsp;<span class="op" id="2285278">(</span><span class="ident" id="2285279">frac</span>&nbsp;<span class="builtintype" id="2285284">float64</span><span class="op" id="2285291">,</span>&nbsp;<span class="ident" id="2285293">exp</span>&nbsp;<span class="builtintype" id="2285297">int</span><span class="op" id="2285300">)</span>&nbsp;<span class="op" id="2285302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2285305">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2285323">switch</span>&nbsp;<span class="op" id="2285330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2285333">case</span>&nbsp;<span class="ident" id="2285338"><a href="/math/frexp.go.html#2285267">f</a></span>&nbsp;<span class="op" id="2285340">==</span>&nbsp;<span class="num" id="2285343">0</span><span class="op" id="2285344">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2285348">return</span>&nbsp;<span class="ident" id="2285355"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285356">,</span>&nbsp;<span class="num" id="2285358">0</span>&nbsp;<span class="comment" id="2285360">//&nbsp;correctly&nbsp;return&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2285384">case</span>&nbsp;<span class="ident" id="2285389"><a href="/math/bits.go.html#2252563">IsInf</a></span><span class="op" id="2285394">(</span><span class="ident" id="2285395"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285396">,</span>&nbsp;<span class="num" id="2285398">0</span><span class="op" id="2285399">)</span>&nbsp;<span class="op" id="2285401">||</span>&nbsp;<span class="ident" id="2285404"><a href="/math/bits.go.html#2252065">IsNaN</a></span><span class="op" id="2285409">(</span><span class="ident" id="2285410"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285411">)</span><span class="op" id="2285412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2285416">return</span>&nbsp;<span class="ident" id="2285423"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285424">,</span>&nbsp;<span class="num" id="2285426">0</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2285429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2285432"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285433">,</span>&nbsp;<span class="ident" id="2285435"><a href="/math/frexp.go.html#2285293">exp</a></span>&nbsp;<span class="op" id="2285439">=</span>&nbsp;<span class="ident" id="2285441"><a href="/math/bits.go.html#2253000">normalize</a></span><span class="op" id="2285450">(</span><span class="ident" id="2285451"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2285455">x</span>&nbsp;<span class="op" id="2285457">:=</span>&nbsp;<span class="ident" id="2285460"><a href="/math/unsafe.go.html#2380703">Float64bits</a></span><span class="op" id="2285471">(</span><span class="ident" id="2285472"><a href="/math/frexp.go.html#2285267">f</a></span><span class="op" id="2285473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2285476"><a href="/math/frexp.go.html#2285293">exp</a></span>&nbsp;<span class="op" id="2285480">+=</span>&nbsp;<span class="builtintype" id="2285483">int</span><span class="op" id="2285486">(</span><span class="op" id="2285487">(</span><span class="ident" id="2285488"><a href="/math/frexp.go.html#2285455">x</a></span><span class="op" id="2285489">&gt;&gt;</span><span class="ident" id="2285491"><a href="/math/bits.go.html#2251639">shift</a></span><span class="op" id="2285496">)</span><span class="op" id="2285497">&amp;</span><span class="ident" id="2285498"><a href="/math/bits.go.html#2251621">mask</a></span><span class="op" id="2285502">)</span>&nbsp;<span class="op" id="2285504">-</span>&nbsp;<span class="ident" id="2285506"><a href="/math/bits.go.html#2251663">bias</a></span>&nbsp;<span class="op" id="2285511">+</span>&nbsp;<span class="num" id="2285513">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2285516"><a href="/math/frexp.go.html#2285455">x</a></span>&nbsp;<span class="op" id="2285518">&amp;^=</span>&nbsp;<span class="ident" id="2285522"><a href="/math/bits.go.html#2251621">mask</a></span>&nbsp;<span class="op" id="2285527">&lt;&lt;</span>&nbsp;<span class="ident" id="2285530"><a href="/math/bits.go.html#2251639">shift</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2285537"><a href="/math/frexp.go.html#2285455">x</a></span>&nbsp;<span class="op" id="2285539">|=</span>&nbsp;<span class="op" id="2285542">(</span><span class="op" id="2285543">-</span><span class="num" id="2285544">1</span>&nbsp;<span class="op" id="2285546">+</span>&nbsp;<span class="ident" id="2285548"><a href="/math/bits.go.html#2251663">bias</a></span><span class="op" id="2285552">)</span>&nbsp;<span class="op" id="2285554">&lt;&lt;</span>&nbsp;<span class="ident" id="2285557"><a href="/math/bits.go.html#2251639">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2285564"><a href="/math/frexp.go.html#2285279">frac</a></span>&nbsp;<span class="op" id="2285569">=</span>&nbsp;<span class="ident" id="2285571"><a href="/math/unsafe.go.html#2380889">Float64frombits</a></span><span class="op" id="2285586">(</span><span class="ident" id="2285587"><a href="/math/frexp.go.html#2285455">x</a></span><span class="op" id="2285588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2285591">return</span><br>
<span class="lineno"></span><span class="op" id="2285598">}</span>
</div>
</body>
</html>
