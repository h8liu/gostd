<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7599834">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7599890">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7599944">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7599995">package</span>&nbsp;<span class="ident" id="7600003">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7600014">import</span>&nbsp;<span class="op" id="7600021">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600024">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600033">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600042">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7600052">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7600055">func</span>&nbsp;<span class="ident" id="7600060">TestPrintfLine</span><span class="op" id="7600074">(</span><span class="ident" id="7600075">t</span>&nbsp;<span class="op" id="7600077">*</span><span class="ident" id="7600078"><a href="/net/textproto/writer_test.go.html#7600042">testing</a></span><span class="op" id="7600085">.</span><span class="ident" id="7600086">T</span><span class="op" id="7600087">)</span>&nbsp;<span class="op" id="7600089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600092">var</span>&nbsp;<span class="ident" id="7600096">buf</span>&nbsp;<span class="ident" id="7600100"><a href="/net/textproto/writer_test.go.html#7600033">bytes</a></span><span class="op" id="7600105">.</span><span class="ident" id="7600106">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600114">w</span>&nbsp;<span class="op" id="7600116">:=</span>&nbsp;<span class="ident" id="7600119"><a href="/net/textproto/writer.go.html#4008604">NewWriter</a></span><span class="op" id="7600128">(</span><span class="ident" id="7600129"><a href="/net/textproto/writer_test.go.html#7600024">bufio</a></span><span class="op" id="7600134">.</span><span class="ident" id="7600135">NewWriter</span><span class="op" id="7600144">(</span><span class="op" id="7600145">&amp;</span><span class="ident" id="7600146"><a href="/net/textproto/writer_test.go.html#7600096">buf</a></span><span class="op" id="7600149">)</span><span class="op" id="7600150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600153">err</span>&nbsp;<span class="op" id="7600157">:=</span>&nbsp;<span class="ident" id="7600160"><a href="/net/textproto/writer_test.go.html#7600114">w</a></span><span class="op" id="7600161">.</span><span class="ident" id="7600162">PrintfLine</span><span class="op" id="7600172">(</span><span class="string" id="7600173">&#34;foo&nbsp;%d&#34;</span><span class="op" id="7600181">,</span>&nbsp;<span class="num" id="7600183">123</span><span class="op" id="7600186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600189">if</span>&nbsp;<span class="ident" id="7600192">s</span>&nbsp;<span class="op" id="7600194">:=</span>&nbsp;<span class="ident" id="7600197"><a href="/net/textproto/writer_test.go.html#7600096">buf</a></span><span class="op" id="7600200">.</span><span class="ident" id="7600201">String</span><span class="op" id="7600207">(</span><span class="op" id="7600208">)</span><span class="op" id="7600209">;</span>&nbsp;<span class="ident" id="7600211"><a href="/net/textproto/writer_test.go.html#7600192">s</a></span>&nbsp;<span class="op" id="7600213">!=</span>&nbsp;<span class="string" id="7600216">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7600230">||</span>&nbsp;<span class="ident" id="7600233"><a href="/net/textproto/writer_test.go.html#7600153">err</a></span>&nbsp;<span class="op" id="7600237">!=</span>&nbsp;<span class="ident" id="7600240">nil</span>&nbsp;<span class="op" id="7600244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600248"><a href="/net/textproto/writer_test.go.html#7600075">t</a></span><span class="op" id="7600249">.</span><span class="ident" id="7600250">Fatalf</span><span class="op" id="7600256">(</span><span class="string" id="7600257">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="7600271">,</span>&nbsp;<span class="ident" id="7600273"><a href="/net/textproto/writer_test.go.html#7600192">s</a></span><span class="op" id="7600274">,</span>&nbsp;<span class="ident" id="7600276"><a href="/net/textproto/writer_test.go.html#7600153">err</a></span><span class="op" id="7600279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7600282">}</span><br>
<span class="lineno">20</span><span class="op" id="7600284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7600287">func</span>&nbsp;<span class="ident" id="7600292">TestDotWriter</span><span class="op" id="7600305">(</span><span class="ident" id="7600306">t</span>&nbsp;<span class="op" id="7600308">*</span><span class="ident" id="7600309"><a href="/net/textproto/writer_test.go.html#7600042">testing</a></span><span class="op" id="7600316">.</span><span class="ident" id="7600317">T</span><span class="op" id="7600318">)</span>&nbsp;<span class="op" id="7600320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600323">var</span>&nbsp;<span class="ident" id="7600327">buf</span>&nbsp;<span class="ident" id="7600331"><a href="/net/textproto/writer_test.go.html#7600033">bytes</a></span><span class="op" id="7600336">.</span><span class="ident" id="7600337">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600345">w</span>&nbsp;<span class="op" id="7600347">:=</span>&nbsp;<span class="ident" id="7600350"><a href="/net/textproto/writer.go.html#4008604">NewWriter</a></span><span class="op" id="7600359">(</span><span class="ident" id="7600360"><a href="/net/textproto/writer_test.go.html#7600024">bufio</a></span><span class="op" id="7600365">.</span><span class="ident" id="7600366">NewWriter</span><span class="op" id="7600375">(</span><span class="op" id="7600376">&amp;</span><span class="ident" id="7600377"><a href="/net/textproto/writer_test.go.html#7600327">buf</a></span><span class="op" id="7600380">)</span><span class="op" id="7600381">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600384">d</span>&nbsp;<span class="op" id="7600386">:=</span>&nbsp;<span class="ident" id="7600389"><a href="/net/textproto/writer_test.go.html#7600345">w</a></span><span class="op" id="7600390">.</span><span class="ident" id="7600391">DotWriter</span><span class="op" id="7600400">(</span><span class="op" id="7600401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600404">n</span><span class="op" id="7600405">,</span>&nbsp;<span class="ident" id="7600407">err</span>&nbsp;<span class="op" id="7600411">:=</span>&nbsp;<span class="ident" id="7600414"><a href="/net/textproto/writer_test.go.html#7600384">d</a></span><span class="op" id="7600415">.</span><span class="ident" id="7600416">Write</span><span class="op" id="7600421">(</span><span class="op" id="7600422">[</span><span class="op" id="7600423">]</span><span class="builtintype" id="7600424">byte</span><span class="op" id="7600428">(</span><span class="string" id="7600429">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="7600456">)</span><span class="op" id="7600457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600460">if</span>&nbsp;<span class="ident" id="7600463"><a href="/net/textproto/writer_test.go.html#7600404">n</a></span>&nbsp;<span class="op" id="7600465">!=</span>&nbsp;<span class="num" id="7600468">21</span>&nbsp;<span class="op" id="7600471">||</span>&nbsp;<span class="ident" id="7600474"><a href="/net/textproto/writer_test.go.html#7600407">err</a></span>&nbsp;<span class="op" id="7600478">!=</span>&nbsp;<span class="ident" id="7600481">nil</span>&nbsp;<span class="op" id="7600485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600489"><a href="/net/textproto/writer_test.go.html#7600306">t</a></span><span class="op" id="7600490">.</span><span class="ident" id="7600491">Fatalf</span><span class="op" id="7600497">(</span><span class="string" id="7600498">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7600513">,</span>&nbsp;<span class="ident" id="7600515"><a href="/net/textproto/writer_test.go.html#7600404">n</a></span><span class="op" id="7600516">,</span>&nbsp;<span class="ident" id="7600518"><a href="/net/textproto/writer_test.go.html#7600407">err</a></span><span class="op" id="7600521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7600524">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600527"><a href="/net/textproto/writer_test.go.html#7600384">d</a></span><span class="op" id="7600528">.</span><span class="ident" id="7600529">Close</span><span class="op" id="7600534">(</span><span class="op" id="7600535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600538">want</span>&nbsp;<span class="op" id="7600543">:=</span>&nbsp;<span class="string" id="7600546">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600596">if</span>&nbsp;<span class="ident" id="7600599">s</span>&nbsp;<span class="op" id="7600601">:=</span>&nbsp;<span class="ident" id="7600604"><a href="/net/textproto/writer_test.go.html#7600327">buf</a></span><span class="op" id="7600607">.</span><span class="ident" id="7600608">String</span><span class="op" id="7600614">(</span><span class="op" id="7600615">)</span><span class="op" id="7600616">;</span>&nbsp;<span class="ident" id="7600618"><a href="/net/textproto/writer_test.go.html#7600599">s</a></span>&nbsp;<span class="op" id="7600620">!=</span>&nbsp;<span class="ident" id="7600623"><a href="/net/textproto/writer_test.go.html#7600538">want</a></span>&nbsp;<span class="op" id="7600628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600632"><a href="/net/textproto/writer_test.go.html#7600306">t</a></span><span class="op" id="7600633">.</span><span class="ident" id="7600634">Fatalf</span><span class="op" id="7600640">(</span><span class="string" id="7600641">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="7600651">,</span>&nbsp;<span class="ident" id="7600653"><a href="/net/textproto/writer_test.go.html#7600599">s</a></span><span class="op" id="7600654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7600657">}</span><br>
<span class="lineno">35</span><span class="op" id="7600659">}</span>
</div>
</body>
</html>
