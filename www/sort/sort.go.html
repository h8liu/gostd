<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2385204">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2385259">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2385313">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2385364">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2385436">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2385452">package</span>&nbsp;<span class="ident" id="2385460">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2385466">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2385538">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2385611">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2385676">type</span>&nbsp;<span class="ident" id="2385681">Interface</span>&nbsp;<span class="keyword" id="2385691">interface</span>&nbsp;<span class="op" id="2385701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2385704">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2385757">Len</span><span class="op" id="2385760">(</span><span class="op" id="2385761">)</span>&nbsp;<span class="builtintype" id="2385763">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2385768">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2385810">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2385867">Less</span><span class="op" id="2385871">(</span><span class="ident" id="2385872">i</span><span class="op" id="2385873">,</span>&nbsp;<span class="ident" id="2385875">j</span>&nbsp;<span class="builtintype" id="2385877">int</span><span class="op" id="2385880">)</span>&nbsp;<span class="builtintype" id="2385882">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2385888">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2385938">Swap</span><span class="op" id="2385942">(</span><span class="ident" id="2385943">i</span><span class="op" id="2385944">,</span>&nbsp;<span class="ident" id="2385946">j</span>&nbsp;<span class="builtintype" id="2385948">int</span><span class="op" id="2385951">)</span><br>
<span class="lineno">20</span><span class="op" id="2385953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2385956">func</span>&nbsp;<span class="ident" id="2385961">min</span><span class="op" id="2385964">(</span><span class="ident" id="2385965">a</span><span class="op" id="2385966">,</span>&nbsp;<span class="ident" id="2385968">b</span>&nbsp;<span class="builtintype" id="2385970">int</span><span class="op" id="2385973">)</span>&nbsp;<span class="builtintype" id="2385975">int</span>&nbsp;<span class="op" id="2385979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2385982">if</span>&nbsp;<span class="ident" id="2385985"><a href="/sort/sort.go.html#2385965">a</a></span>&nbsp;<span class="op" id="2385987">&lt;</span>&nbsp;<span class="ident" id="2385989"><a href="/sort/sort.go.html#2385968">b</a></span>&nbsp;<span class="op" id="2385991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2385995">return</span>&nbsp;<span class="ident" id="2386002"><a href="/sort/sort.go.html#2385965">a</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386008">return</span>&nbsp;<span class="ident" id="2386015"><a href="/sort/sort.go.html#2385968">b</a></span><br>
<span class="lineno"></span><span class="op" id="2386017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2386020">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2386038">func</span>&nbsp;<span class="ident" id="2386043">insertionSort</span><span class="op" id="2386056">(</span><span class="ident" id="2386057">data</span>&nbsp;<span class="ident" id="2386062"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2386071">,</span>&nbsp;<span class="ident" id="2386073">a</span><span class="op" id="2386074">,</span>&nbsp;<span class="ident" id="2386076">b</span>&nbsp;<span class="builtintype" id="2386078">int</span><span class="op" id="2386081">)</span>&nbsp;<span class="op" id="2386083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386086">for</span>&nbsp;<span class="ident" id="2386090">i</span>&nbsp;<span class="op" id="2386092">:=</span>&nbsp;<span class="ident" id="2386095"><a href="/sort/sort.go.html#2386073">a</a></span>&nbsp;<span class="op" id="2386097">+</span>&nbsp;<span class="num" id="2386099">1</span><span class="op" id="2386100">;</span>&nbsp;<span class="ident" id="2386102"><a href="/sort/sort.go.html#2386090">i</a></span>&nbsp;<span class="op" id="2386104">&lt;</span>&nbsp;<span class="ident" id="2386106"><a href="/sort/sort.go.html#2386076">b</a></span><span class="op" id="2386107">;</span>&nbsp;<span class="ident" id="2386109"><a href="/sort/sort.go.html#2386090">i</a></span><span class="op" id="2386110">++</span>&nbsp;<span class="op" id="2386113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386117">for</span>&nbsp;<span class="ident" id="2386121">j</span>&nbsp;<span class="op" id="2386123">:=</span>&nbsp;<span class="ident" id="2386126"><a href="/sort/sort.go.html#2386090">i</a></span><span class="op" id="2386127">;</span>&nbsp;<span class="ident" id="2386129"><a href="/sort/sort.go.html#2386121">j</a></span>&nbsp;<span class="op" id="2386131">&gt;</span>&nbsp;<span class="ident" id="2386133"><a href="/sort/sort.go.html#2386073">a</a></span>&nbsp;<span class="op" id="2386135">&amp;&amp;</span>&nbsp;<span class="ident" id="2386138"><a href="/sort/sort.go.html#2386057">data</a></span><span class="op" id="2386142">.</span><span class="ident" id="2386143">Less</span><span class="op" id="2386147">(</span><span class="ident" id="2386148"><a href="/sort/sort.go.html#2386121">j</a></span><span class="op" id="2386149">,</span>&nbsp;<span class="ident" id="2386151"><a href="/sort/sort.go.html#2386121">j</a></span><span class="op" id="2386152">-</span><span class="num" id="2386153">1</span><span class="op" id="2386154">)</span><span class="op" id="2386155">;</span>&nbsp;<span class="ident" id="2386157"><a href="/sort/sort.go.html#2386121">j</a></span><span class="op" id="2386158">--</span>&nbsp;<span class="op" id="2386161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386166"><a href="/sort/sort.go.html#2386057">data</a></span><span class="op" id="2386170">.</span><span class="ident" id="2386171">Swap</span><span class="op" id="2386175">(</span><span class="ident" id="2386176"><a href="/sort/sort.go.html#2386121">j</a></span><span class="op" id="2386177">,</span>&nbsp;<span class="ident" id="2386179"><a href="/sort/sort.go.html#2386121">j</a></span><span class="op" id="2386180">-</span><span class="num" id="2386181">1</span><span class="op" id="2386182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386186">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386189">}</span><br>
<span class="lineno"></span><span class="op" id="2386191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2386194">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2386252">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2386322">func</span>&nbsp;<span class="ident" id="2386327">siftDown</span><span class="op" id="2386335">(</span><span class="ident" id="2386336">data</span>&nbsp;<span class="ident" id="2386341"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2386350">,</span>&nbsp;<span class="ident" id="2386352">lo</span><span class="op" id="2386354">,</span>&nbsp;<span class="ident" id="2386356">hi</span><span class="op" id="2386358">,</span>&nbsp;<span class="ident" id="2386360">first</span>&nbsp;<span class="builtintype" id="2386366">int</span><span class="op" id="2386369">)</span>&nbsp;<span class="op" id="2386371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386374">root</span>&nbsp;<span class="op" id="2386379">:=</span>&nbsp;<span class="ident" id="2386382"><a href="/sort/sort.go.html#2386352">lo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386386">for</span>&nbsp;<span class="op" id="2386390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386394">child</span>&nbsp;<span class="op" id="2386400">:=</span>&nbsp;<span class="num" id="2386403">2</span><span class="op" id="2386404">*</span><span class="ident" id="2386405"><a href="/sort/sort.go.html#2386374">root</a></span>&nbsp;<span class="op" id="2386410">+</span>&nbsp;<span class="num" id="2386412">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386416">if</span>&nbsp;<span class="ident" id="2386419"><a href="/sort/sort.go.html#2386394">child</a></span>&nbsp;<span class="op" id="2386425">&gt;=</span>&nbsp;<span class="ident" id="2386428"><a href="/sort/sort.go.html#2386356">hi</a></span>&nbsp;<span class="op" id="2386431">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386436">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386448">if</span>&nbsp;<span class="ident" id="2386451"><a href="/sort/sort.go.html#2386394">child</a></span><span class="op" id="2386456">+</span><span class="num" id="2386457">1</span>&nbsp;<span class="op" id="2386459">&lt;</span>&nbsp;<span class="ident" id="2386461"><a href="/sort/sort.go.html#2386356">hi</a></span>&nbsp;<span class="op" id="2386464">&amp;&amp;</span>&nbsp;<span class="ident" id="2386467"><a href="/sort/sort.go.html#2386336">data</a></span><span class="op" id="2386471">.</span><span class="ident" id="2386472">Less</span><span class="op" id="2386476">(</span><span class="ident" id="2386477"><a href="/sort/sort.go.html#2386360">first</a></span><span class="op" id="2386482">+</span><span class="ident" id="2386483"><a href="/sort/sort.go.html#2386394">child</a></span><span class="op" id="2386488">,</span>&nbsp;<span class="ident" id="2386490"><a href="/sort/sort.go.html#2386360">first</a></span><span class="op" id="2386495">+</span><span class="ident" id="2386496"><a href="/sort/sort.go.html#2386394">child</a></span><span class="op" id="2386501">+</span><span class="num" id="2386502">1</span><span class="op" id="2386503">)</span>&nbsp;<span class="op" id="2386505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386510"><a href="/sort/sort.go.html#2386394">child</a></span><span class="op" id="2386515">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386520">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386524">if</span>&nbsp;<span class="op" id="2386527">!</span><span class="ident" id="2386528"><a href="/sort/sort.go.html#2386336">data</a></span><span class="op" id="2386532">.</span><span class="ident" id="2386533">Less</span><span class="op" id="2386537">(</span><span class="ident" id="2386538"><a href="/sort/sort.go.html#2386360">first</a></span><span class="op" id="2386543">+</span><span class="ident" id="2386544"><a href="/sort/sort.go.html#2386374">root</a></span><span class="op" id="2386548">,</span>&nbsp;<span class="ident" id="2386550"><a href="/sort/sort.go.html#2386360">first</a></span><span class="op" id="2386555">+</span><span class="ident" id="2386556"><a href="/sort/sort.go.html#2386394">child</a></span><span class="op" id="2386561">)</span>&nbsp;<span class="op" id="2386563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386568">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386581"><a href="/sort/sort.go.html#2386336">data</a></span><span class="op" id="2386585">.</span><span class="ident" id="2386586">Swap</span><span class="op" id="2386590">(</span><span class="ident" id="2386591"><a href="/sort/sort.go.html#2386360">first</a></span><span class="op" id="2386596">+</span><span class="ident" id="2386597"><a href="/sort/sort.go.html#2386374">root</a></span><span class="op" id="2386601">,</span>&nbsp;<span class="ident" id="2386603"><a href="/sort/sort.go.html#2386360">first</a></span><span class="op" id="2386608">+</span><span class="ident" id="2386609"><a href="/sort/sort.go.html#2386394">child</a></span><span class="op" id="2386614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386618"><a href="/sort/sort.go.html#2386374">root</a></span>&nbsp;<span class="op" id="2386623">=</span>&nbsp;<span class="ident" id="2386625"><a href="/sort/sort.go.html#2386394">child</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386632">}</span><br>
<span class="lineno"></span><span class="op" id="2386634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2386637">func</span>&nbsp;<span class="ident" id="2386642">heapSort</span><span class="op" id="2386650">(</span><span class="ident" id="2386651">data</span>&nbsp;<span class="ident" id="2386656"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2386665">,</span>&nbsp;<span class="ident" id="2386667">a</span><span class="op" id="2386668">,</span>&nbsp;<span class="ident" id="2386670">b</span>&nbsp;<span class="builtintype" id="2386672">int</span><span class="op" id="2386675">)</span>&nbsp;<span class="op" id="2386677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386680">first</span>&nbsp;<span class="op" id="2386686">:=</span>&nbsp;<span class="ident" id="2386689"><a href="/sort/sort.go.html#2386667">a</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386692">lo</span>&nbsp;<span class="op" id="2386695">:=</span>&nbsp;<span class="num" id="2386698">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386701">hi</span>&nbsp;<span class="op" id="2386704">:=</span>&nbsp;<span class="ident" id="2386707"><a href="/sort/sort.go.html#2386670">b</a></span>&nbsp;<span class="op" id="2386709">-</span>&nbsp;<span class="ident" id="2386711"><a href="/sort/sort.go.html#2386667">a</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2386715">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386760">for</span>&nbsp;<span class="ident" id="2386764">i</span>&nbsp;<span class="op" id="2386766">:=</span>&nbsp;<span class="op" id="2386769">(</span><span class="ident" id="2386770"><a href="/sort/sort.go.html#2386701">hi</a></span>&nbsp;<span class="op" id="2386773">-</span>&nbsp;<span class="num" id="2386775">1</span><span class="op" id="2386776">)</span>&nbsp;<span class="op" id="2386778">/</span>&nbsp;<span class="num" id="2386780">2</span><span class="op" id="2386781">;</span>&nbsp;<span class="ident" id="2386783"><a href="/sort/sort.go.html#2386764">i</a></span>&nbsp;<span class="op" id="2386785">&gt;=</span>&nbsp;<span class="num" id="2386788">0</span><span class="op" id="2386789">;</span>&nbsp;<span class="ident" id="2386791"><a href="/sort/sort.go.html#2386764">i</a></span><span class="op" id="2386792">--</span>&nbsp;<span class="op" id="2386795">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386799"><a href="/sort/sort.go.html#2386327">siftDown</a></span><span class="op" id="2386807">(</span><span class="ident" id="2386808"><a href="/sort/sort.go.html#2386651">data</a></span><span class="op" id="2386812">,</span>&nbsp;<span class="ident" id="2386814"><a href="/sort/sort.go.html#2386764">i</a></span><span class="op" id="2386815">,</span>&nbsp;<span class="ident" id="2386817"><a href="/sort/sort.go.html#2386701">hi</a></span><span class="op" id="2386819">,</span>&nbsp;<span class="ident" id="2386821"><a href="/sort/sort.go.html#2386680">first</a></span><span class="op" id="2386826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2386833">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2386884">for</span>&nbsp;<span class="ident" id="2386888">i</span>&nbsp;<span class="op" id="2386890">:=</span>&nbsp;<span class="ident" id="2386893"><a href="/sort/sort.go.html#2386701">hi</a></span>&nbsp;<span class="op" id="2386896">-</span>&nbsp;<span class="num" id="2386898">1</span><span class="op" id="2386899">;</span>&nbsp;<span class="ident" id="2386901"><a href="/sort/sort.go.html#2386888">i</a></span>&nbsp;<span class="op" id="2386903">&gt;=</span>&nbsp;<span class="num" id="2386906">0</span><span class="op" id="2386907">;</span>&nbsp;<span class="ident" id="2386909"><a href="/sort/sort.go.html#2386888">i</a></span><span class="op" id="2386910">--</span>&nbsp;<span class="op" id="2386913">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386917"><a href="/sort/sort.go.html#2386651">data</a></span><span class="op" id="2386921">.</span><span class="ident" id="2386922">Swap</span><span class="op" id="2386926">(</span><span class="ident" id="2386927"><a href="/sort/sort.go.html#2386680">first</a></span><span class="op" id="2386932">,</span>&nbsp;<span class="ident" id="2386934"><a href="/sort/sort.go.html#2386680">first</a></span><span class="op" id="2386939">+</span><span class="ident" id="2386940"><a href="/sort/sort.go.html#2386888">i</a></span><span class="op" id="2386941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2386945"><a href="/sort/sort.go.html#2386327">siftDown</a></span><span class="op" id="2386953">(</span><span class="ident" id="2386954"><a href="/sort/sort.go.html#2386651">data</a></span><span class="op" id="2386958">,</span>&nbsp;<span class="ident" id="2386960"><a href="/sort/sort.go.html#2386692">lo</a></span><span class="op" id="2386962">,</span>&nbsp;<span class="ident" id="2386964"><a href="/sort/sort.go.html#2386888">i</a></span><span class="op" id="2386965">,</span>&nbsp;<span class="ident" id="2386967"><a href="/sort/sort.go.html#2386680">first</a></span><span class="op" id="2386972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2386975">}</span><br>
<span class="lineno"></span><span class="op" id="2386977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2386980">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2387025">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2387082">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2387176">func</span>&nbsp;<span class="ident" id="2387181">medianOfThree</span><span class="op" id="2387194">(</span><span class="ident" id="2387195">data</span>&nbsp;<span class="ident" id="2387200"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2387209">,</span>&nbsp;<span class="ident" id="2387211">a</span><span class="op" id="2387212">,</span>&nbsp;<span class="ident" id="2387214">b</span><span class="op" id="2387215">,</span>&nbsp;<span class="ident" id="2387217">c</span>&nbsp;<span class="builtintype" id="2387219">int</span><span class="op" id="2387222">)</span>&nbsp;<span class="op" id="2387224">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387227">m0</span>&nbsp;<span class="op" id="2387230">:=</span>&nbsp;<span class="ident" id="2387233"><a href="/sort/sort.go.html#2387214">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387236">m1</span>&nbsp;<span class="op" id="2387239">:=</span>&nbsp;<span class="ident" id="2387242"><a href="/sort/sort.go.html#2387211">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387245">m2</span>&nbsp;<span class="op" id="2387248">:=</span>&nbsp;<span class="ident" id="2387251"><a href="/sort/sort.go.html#2387217">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2387254">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2387284">if</span>&nbsp;<span class="ident" id="2387287"><a href="/sort/sort.go.html#2387195">data</a></span><span class="op" id="2387291">.</span><span class="ident" id="2387292">Less</span><span class="op" id="2387296">(</span><span class="ident" id="2387297"><a href="/sort/sort.go.html#2387236">m1</a></span><span class="op" id="2387299">,</span>&nbsp;<span class="ident" id="2387301"><a href="/sort/sort.go.html#2387227">m0</a></span><span class="op" id="2387303">)</span>&nbsp;<span class="op" id="2387305">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387309"><a href="/sort/sort.go.html#2387195">data</a></span><span class="op" id="2387313">.</span><span class="ident" id="2387314">Swap</span><span class="op" id="2387318">(</span><span class="ident" id="2387319"><a href="/sort/sort.go.html#2387236">m1</a></span><span class="op" id="2387321">,</span>&nbsp;<span class="ident" id="2387323"><a href="/sort/sort.go.html#2387227">m0</a></span><span class="op" id="2387325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2387328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2387331">if</span>&nbsp;<span class="ident" id="2387334"><a href="/sort/sort.go.html#2387195">data</a></span><span class="op" id="2387338">.</span><span class="ident" id="2387339">Less</span><span class="op" id="2387343">(</span><span class="ident" id="2387344"><a href="/sort/sort.go.html#2387245">m2</a></span><span class="op" id="2387346">,</span>&nbsp;<span class="ident" id="2387348"><a href="/sort/sort.go.html#2387236">m1</a></span><span class="op" id="2387350">)</span>&nbsp;<span class="op" id="2387352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387356"><a href="/sort/sort.go.html#2387195">data</a></span><span class="op" id="2387360">.</span><span class="ident" id="2387361">Swap</span><span class="op" id="2387365">(</span><span class="ident" id="2387366"><a href="/sort/sort.go.html#2387245">m2</a></span><span class="op" id="2387368">,</span>&nbsp;<span class="ident" id="2387370"><a href="/sort/sort.go.html#2387236">m1</a></span><span class="op" id="2387372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2387375">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2387378">if</span>&nbsp;<span class="ident" id="2387381"><a href="/sort/sort.go.html#2387195">data</a></span><span class="op" id="2387385">.</span><span class="ident" id="2387386">Less</span><span class="op" id="2387390">(</span><span class="ident" id="2387391"><a href="/sort/sort.go.html#2387236">m1</a></span><span class="op" id="2387393">,</span>&nbsp;<span class="ident" id="2387395"><a href="/sort/sort.go.html#2387227">m0</a></span><span class="op" id="2387397">)</span>&nbsp;<span class="op" id="2387399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387403"><a href="/sort/sort.go.html#2387195">data</a></span><span class="op" id="2387407">.</span><span class="ident" id="2387408">Swap</span><span class="op" id="2387412">(</span><span class="ident" id="2387413"><a href="/sort/sort.go.html#2387236">m1</a></span><span class="op" id="2387415">,</span>&nbsp;<span class="ident" id="2387417"><a href="/sort/sort.go.html#2387227">m0</a></span><span class="op" id="2387419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2387422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2387425">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2387465">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2387468">func</span>&nbsp;<span class="ident" id="2387473">swapRange</span><span class="op" id="2387482">(</span><span class="ident" id="2387483">data</span>&nbsp;<span class="ident" id="2387488"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2387497">,</span>&nbsp;<span class="ident" id="2387499">a</span><span class="op" id="2387500">,</span>&nbsp;<span class="ident" id="2387502">b</span><span class="op" id="2387503">,</span>&nbsp;<span class="ident" id="2387505">n</span>&nbsp;<span class="builtintype" id="2387507">int</span><span class="op" id="2387510">)</span>&nbsp;<span class="op" id="2387512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2387515">for</span>&nbsp;<span class="ident" id="2387519">i</span>&nbsp;<span class="op" id="2387521">:=</span>&nbsp;<span class="num" id="2387524">0</span><span class="op" id="2387525">;</span>&nbsp;<span class="ident" id="2387527"><a href="/sort/sort.go.html#2387519">i</a></span>&nbsp;<span class="op" id="2387529">&lt;</span>&nbsp;<span class="ident" id="2387531"><a href="/sort/sort.go.html#2387505">n</a></span><span class="op" id="2387532">;</span>&nbsp;<span class="ident" id="2387534"><a href="/sort/sort.go.html#2387519">i</a></span><span class="op" id="2387535">++</span>&nbsp;<span class="op" id="2387538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387542"><a href="/sort/sort.go.html#2387483">data</a></span><span class="op" id="2387546">.</span><span class="ident" id="2387547">Swap</span><span class="op" id="2387551">(</span><span class="ident" id="2387552"><a href="/sort/sort.go.html#2387499">a</a></span><span class="op" id="2387553">+</span><span class="ident" id="2387554"><a href="/sort/sort.go.html#2387519">i</a></span><span class="op" id="2387555">,</span>&nbsp;<span class="ident" id="2387557"><a href="/sort/sort.go.html#2387502">b</a></span><span class="op" id="2387558">+</span><span class="ident" id="2387559"><a href="/sort/sort.go.html#2387519">i</a></span><span class="op" id="2387560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2387563">}</span><br>
<span class="lineno">100</span><span class="op" id="2387565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2387568">func</span>&nbsp;<span class="ident" id="2387573">doPivot</span><span class="op" id="2387580">(</span><span class="ident" id="2387581">data</span>&nbsp;<span class="ident" id="2387586"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2387595">,</span>&nbsp;<span class="ident" id="2387597">lo</span><span class="op" id="2387599">,</span>&nbsp;<span class="ident" id="2387601">hi</span>&nbsp;<span class="builtintype" id="2387604">int</span><span class="op" id="2387607">)</span>&nbsp;<span class="op" id="2387609">(</span><span class="ident" id="2387610">midlo</span><span class="op" id="2387615">,</span>&nbsp;<span class="ident" id="2387617">midhi</span>&nbsp;<span class="builtintype" id="2387623">int</span><span class="op" id="2387626">)</span>&nbsp;<span class="op" id="2387628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387631">m</span>&nbsp;<span class="op" id="2387633">:=</span>&nbsp;<span class="ident" id="2387636"><a href="/sort/sort.go.html#2387597">lo</a></span>&nbsp;<span class="op" id="2387639">+</span>&nbsp;<span class="op" id="2387641">(</span><span class="ident" id="2387642"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2387644">-</span><span class="ident" id="2387645"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2387647">)</span><span class="op" id="2387648">/</span><span class="num" id="2387649">2</span>&nbsp;<span class="comment" id="2387651">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2387700">if</span>&nbsp;<span class="ident" id="2387703"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2387705">-</span><span class="ident" id="2387706"><a href="/sort/sort.go.html#2387597">lo</a></span>&nbsp;<span class="op" id="2387709">&gt;</span>&nbsp;<span class="num" id="2387711">40</span>&nbsp;<span class="op" id="2387714">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2387718">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387778">s</span>&nbsp;<span class="op" id="2387780">:=</span>&nbsp;<span class="op" id="2387783">(</span><span class="ident" id="2387784"><a href="/sort/sort.go.html#2387601">hi</a></span>&nbsp;<span class="op" id="2387787">-</span>&nbsp;<span class="ident" id="2387789"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2387791">)</span>&nbsp;<span class="op" id="2387793">/</span>&nbsp;<span class="num" id="2387795">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387799"><a href="/sort/sort.go.html#2387181">medianOfThree</a></span><span class="op" id="2387812">(</span><span class="ident" id="2387813"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2387817">,</span>&nbsp;<span class="ident" id="2387819"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2387821">,</span>&nbsp;<span class="ident" id="2387823"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2387825">+</span><span class="ident" id="2387826"><a href="/sort/sort.go.html#2387778">s</a></span><span class="op" id="2387827">,</span>&nbsp;<span class="ident" id="2387829"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2387831">+</span><span class="num" id="2387832">2</span><span class="op" id="2387833">*</span><span class="ident" id="2387834"><a href="/sort/sort.go.html#2387778">s</a></span><span class="op" id="2387835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387839"><a href="/sort/sort.go.html#2387181">medianOfThree</a></span><span class="op" id="2387852">(</span><span class="ident" id="2387853"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2387857">,</span>&nbsp;<span class="ident" id="2387859"><a href="/sort/sort.go.html#2387631">m</a></span><span class="op" id="2387860">,</span>&nbsp;<span class="ident" id="2387862"><a href="/sort/sort.go.html#2387631">m</a></span><span class="op" id="2387863">-</span><span class="ident" id="2387864"><a href="/sort/sort.go.html#2387778">s</a></span><span class="op" id="2387865">,</span>&nbsp;<span class="ident" id="2387867"><a href="/sort/sort.go.html#2387631">m</a></span><span class="op" id="2387868">+</span><span class="ident" id="2387869"><a href="/sort/sort.go.html#2387778">s</a></span><span class="op" id="2387870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387874"><a href="/sort/sort.go.html#2387181">medianOfThree</a></span><span class="op" id="2387887">(</span><span class="ident" id="2387888"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2387892">,</span>&nbsp;<span class="ident" id="2387894"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2387896">-</span><span class="num" id="2387897">1</span><span class="op" id="2387898">,</span>&nbsp;<span class="ident" id="2387900"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2387902">-</span><span class="num" id="2387903">1</span><span class="op" id="2387904">-</span><span class="ident" id="2387905"><a href="/sort/sort.go.html#2387778">s</a></span><span class="op" id="2387906">,</span>&nbsp;<span class="ident" id="2387908"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2387910">-</span><span class="num" id="2387911">1</span><span class="op" id="2387912">-</span><span class="num" id="2387913">2</span><span class="op" id="2387914">*</span><span class="ident" id="2387915"><a href="/sort/sort.go.html#2387778">s</a></span><span class="op" id="2387916">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2387919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2387922"><a href="/sort/sort.go.html#2387181">medianOfThree</a></span><span class="op" id="2387935">(</span><span class="ident" id="2387936"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2387940">,</span>&nbsp;<span class="ident" id="2387942"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2387944">,</span>&nbsp;<span class="ident" id="2387946"><a href="/sort/sort.go.html#2387631">m</a></span><span class="op" id="2387947">,</span>&nbsp;<span class="ident" id="2387949"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2387951">-</span><span class="num" id="2387952">1</span><span class="op" id="2387953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2387957">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2387977">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388022">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388052">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388081">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388116">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388145">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388175">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388179">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388231">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388265">pivot</span>&nbsp;<span class="op" id="2388271">:=</span>&nbsp;<span class="ident" id="2388274"><a href="/sort/sort.go.html#2387597">lo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388278">a</span><span class="op" id="2388279">,</span>&nbsp;<span class="ident" id="2388281">b</span><span class="op" id="2388282">,</span>&nbsp;<span class="ident" id="2388284">c</span><span class="op" id="2388285">,</span>&nbsp;<span class="ident" id="2388287">d</span>&nbsp;<span class="op" id="2388289">:=</span>&nbsp;<span class="ident" id="2388292"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2388294">+</span><span class="num" id="2388295">1</span><span class="op" id="2388296">,</span>&nbsp;<span class="ident" id="2388298"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2388300">+</span><span class="num" id="2388301">1</span><span class="op" id="2388302">,</span>&nbsp;<span class="ident" id="2388304"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2388306">,</span>&nbsp;<span class="ident" id="2388308"><a href="/sort/sort.go.html#2387601">hi</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388312">for</span>&nbsp;<span class="op" id="2388316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388320">for</span>&nbsp;<span class="ident" id="2388324"><a href="/sort/sort.go.html#2388281">b</a></span>&nbsp;<span class="op" id="2388326">&lt;</span>&nbsp;<span class="ident" id="2388328"><a href="/sort/sort.go.html#2388284">c</a></span>&nbsp;<span class="op" id="2388330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388335">if</span>&nbsp;<span class="ident" id="2388338"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388342">.</span><span class="ident" id="2388343">Less</span><span class="op" id="2388347">(</span><span class="ident" id="2388348"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388349">,</span>&nbsp;<span class="ident" id="2388351"><a href="/sort/sort.go.html#2388265">pivot</a></span><span class="op" id="2388356">)</span>&nbsp;<span class="op" id="2388358">{</span>&nbsp;<span class="comment" id="2388360">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388383"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388384">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388390">}</span>&nbsp;<span class="keyword" id="2388392">else</span>&nbsp;<span class="keyword" id="2388397">if</span>&nbsp;<span class="op" id="2388400">!</span><span class="ident" id="2388401"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388405">.</span><span class="ident" id="2388406">Less</span><span class="op" id="2388410">(</span><span class="ident" id="2388411"><a href="/sort/sort.go.html#2388265">pivot</a></span><span class="op" id="2388416">,</span>&nbsp;<span class="ident" id="2388418"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388419">)</span>&nbsp;<span class="op" id="2388421">{</span>&nbsp;<span class="comment" id="2388423">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388446"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388450">.</span><span class="ident" id="2388451">Swap</span><span class="op" id="2388455">(</span><span class="ident" id="2388456"><a href="/sort/sort.go.html#2388278">a</a></span><span class="op" id="2388457">,</span>&nbsp;<span class="ident" id="2388459"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388466"><a href="/sort/sort.go.html#2388278">a</a></span><span class="op" id="2388467">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388474"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388475">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388481">}</span>&nbsp;<span class="keyword" id="2388483">else</span>&nbsp;<span class="op" id="2388488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388494">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388511">for</span>&nbsp;<span class="ident" id="2388515"><a href="/sort/sort.go.html#2388281">b</a></span>&nbsp;<span class="op" id="2388517">&lt;</span>&nbsp;<span class="ident" id="2388519"><a href="/sort/sort.go.html#2388284">c</a></span>&nbsp;<span class="op" id="2388521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388526">if</span>&nbsp;<span class="ident" id="2388529"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388533">.</span><span class="ident" id="2388534">Less</span><span class="op" id="2388538">(</span><span class="ident" id="2388539"><a href="/sort/sort.go.html#2388265">pivot</a></span><span class="op" id="2388544">,</span>&nbsp;<span class="ident" id="2388546"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388547">-</span><span class="num" id="2388548">1</span><span class="op" id="2388549">)</span>&nbsp;<span class="op" id="2388551">{</span>&nbsp;<span class="comment" id="2388553">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388578"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388579">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388585">}</span>&nbsp;<span class="keyword" id="2388587">else</span>&nbsp;<span class="keyword" id="2388592">if</span>&nbsp;<span class="op" id="2388595">!</span><span class="ident" id="2388596"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388600">.</span><span class="ident" id="2388601">Less</span><span class="op" id="2388605">(</span><span class="ident" id="2388606"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388607">-</span><span class="num" id="2388608">1</span><span class="op" id="2388609">,</span>&nbsp;<span class="ident" id="2388611"><a href="/sort/sort.go.html#2388265">pivot</a></span><span class="op" id="2388616">)</span>&nbsp;<span class="op" id="2388618">{</span>&nbsp;<span class="comment" id="2388620">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388645"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388649">.</span><span class="ident" id="2388650">Swap</span><span class="op" id="2388654">(</span><span class="ident" id="2388655"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388656">-</span><span class="num" id="2388657">1</span><span class="op" id="2388658">,</span>&nbsp;<span class="ident" id="2388660"><a href="/sort/sort.go.html#2388287">d</a></span><span class="op" id="2388661">-</span><span class="num" id="2388662">1</span><span class="op" id="2388663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388669"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388670">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388677"><a href="/sort/sort.go.html#2388287">d</a></span><span class="op" id="2388678">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388684">}</span>&nbsp;<span class="keyword" id="2388686">else</span>&nbsp;<span class="op" id="2388691">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388697">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388714">if</span>&nbsp;<span class="ident" id="2388717"><a href="/sort/sort.go.html#2388281">b</a></span>&nbsp;<span class="op" id="2388719">&gt;=</span>&nbsp;<span class="ident" id="2388722"><a href="/sort/sort.go.html#2388284">c</a></span>&nbsp;<span class="op" id="2388724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388729">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2388741">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388781"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388785">.</span><span class="ident" id="2388786">Swap</span><span class="op" id="2388790">(</span><span class="ident" id="2388791"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388792">,</span>&nbsp;<span class="ident" id="2388794"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388795">-</span><span class="num" id="2388796">1</span><span class="op" id="2388797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388801"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388802">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388807"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388808">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2388812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388816">n</span>&nbsp;<span class="op" id="2388818">:=</span>&nbsp;<span class="ident" id="2388821"><a href="/sort/sort.go.html#2385961">min</a></span><span class="op" id="2388824">(</span><span class="ident" id="2388825"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388826">-</span><span class="ident" id="2388827"><a href="/sort/sort.go.html#2388278">a</a></span><span class="op" id="2388828">,</span>&nbsp;<span class="ident" id="2388830"><a href="/sort/sort.go.html#2388278">a</a></span><span class="op" id="2388831">-</span><span class="ident" id="2388832"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2388834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388837"><a href="/sort/sort.go.html#2387473">swapRange</a></span><span class="op" id="2388846">(</span><span class="ident" id="2388847"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388851">,</span>&nbsp;<span class="ident" id="2388853"><a href="/sort/sort.go.html#2387597">lo</a></span><span class="op" id="2388855">,</span>&nbsp;<span class="ident" id="2388857"><a href="/sort/sort.go.html#2388281">b</a></span><span class="op" id="2388858">-</span><span class="ident" id="2388859"><a href="/sort/sort.go.html#2388816">n</a></span><span class="op" id="2388860">,</span>&nbsp;<span class="ident" id="2388862"><a href="/sort/sort.go.html#2388816">n</a></span><span class="op" id="2388863">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388867"><a href="/sort/sort.go.html#2388816">n</a></span>&nbsp;<span class="op" id="2388869">=</span>&nbsp;<span class="ident" id="2388871"><a href="/sort/sort.go.html#2385961">min</a></span><span class="op" id="2388874">(</span><span class="ident" id="2388875"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2388877">-</span><span class="ident" id="2388878"><a href="/sort/sort.go.html#2388287">d</a></span><span class="op" id="2388879">,</span>&nbsp;<span class="ident" id="2388881"><a href="/sort/sort.go.html#2388287">d</a></span><span class="op" id="2388882">-</span><span class="ident" id="2388883"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2388887"><a href="/sort/sort.go.html#2387473">swapRange</a></span><span class="op" id="2388896">(</span><span class="ident" id="2388897"><a href="/sort/sort.go.html#2387581">data</a></span><span class="op" id="2388901">,</span>&nbsp;<span class="ident" id="2388903"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388904">,</span>&nbsp;<span class="ident" id="2388906"><a href="/sort/sort.go.html#2387601">hi</a></span><span class="op" id="2388908">-</span><span class="ident" id="2388909"><a href="/sort/sort.go.html#2388816">n</a></span><span class="op" id="2388910">,</span>&nbsp;<span class="ident" id="2388912"><a href="/sort/sort.go.html#2388816">n</a></span><span class="op" id="2388913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2388917">return</span>&nbsp;<span class="ident" id="2388924"><a href="/sort/sort.go.html#2387597">lo</a></span>&nbsp;<span class="op" id="2388927">+</span>&nbsp;<span class="ident" id="2388929"><a href="/sort/sort.go.html#2388281">b</a></span>&nbsp;<span class="op" id="2388931">-</span>&nbsp;<span class="ident" id="2388933"><a href="/sort/sort.go.html#2388278">a</a></span><span class="op" id="2388934">,</span>&nbsp;<span class="ident" id="2388936"><a href="/sort/sort.go.html#2387601">hi</a></span>&nbsp;<span class="op" id="2388939">-</span>&nbsp;<span class="op" id="2388941">(</span><span class="ident" id="2388942"><a href="/sort/sort.go.html#2388287">d</a></span>&nbsp;<span class="op" id="2388944">-</span>&nbsp;<span class="ident" id="2388946"><a href="/sort/sort.go.html#2388284">c</a></span><span class="op" id="2388947">)</span><br>
<span class="lineno"></span><span class="op" id="2388949">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2388952">func</span>&nbsp;<span class="ident" id="2388957">quickSort</span><span class="op" id="2388966">(</span><span class="ident" id="2388967">data</span>&nbsp;<span class="ident" id="2388972"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2388981">,</span>&nbsp;<span class="ident" id="2388983">a</span><span class="op" id="2388984">,</span>&nbsp;<span class="ident" id="2388986">b</span><span class="op" id="2388987">,</span>&nbsp;<span class="ident" id="2388989">maxDepth</span>&nbsp;<span class="builtintype" id="2388998">int</span><span class="op" id="2389001">)</span>&nbsp;<span class="op" id="2389003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2389006">for</span>&nbsp;<span class="ident" id="2389010"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389011">-</span><span class="ident" id="2389012"><a href="/sort/sort.go.html#2388983">a</a></span>&nbsp;<span class="op" id="2389014">&gt;</span>&nbsp;<span class="num" id="2389016">7</span>&nbsp;<span class="op" id="2389018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2389022">if</span>&nbsp;<span class="ident" id="2389025"><a href="/sort/sort.go.html#2388989">maxDepth</a></span>&nbsp;<span class="op" id="2389034">==</span>&nbsp;<span class="num" id="2389037">0</span>&nbsp;<span class="op" id="2389039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389044"><a href="/sort/sort.go.html#2386642">heapSort</a></span><span class="op" id="2389052">(</span><span class="ident" id="2389053"><a href="/sort/sort.go.html#2388967">data</a></span><span class="op" id="2389057">,</span>&nbsp;<span class="ident" id="2389059"><a href="/sort/sort.go.html#2388983">a</a></span><span class="op" id="2389060">,</span>&nbsp;<span class="ident" id="2389062"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389063">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2389068">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2389077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389081"><a href="/sort/sort.go.html#2388989">maxDepth</a></span><span class="op" id="2389089">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389094">mlo</span><span class="op" id="2389097">,</span>&nbsp;<span class="ident" id="2389099">mhi</span>&nbsp;<span class="op" id="2389103">:=</span>&nbsp;<span class="ident" id="2389106"><a href="/sort/sort.go.html#2387573">doPivot</a></span><span class="op" id="2389113">(</span><span class="ident" id="2389114"><a href="/sort/sort.go.html#2388967">data</a></span><span class="op" id="2389118">,</span>&nbsp;<span class="ident" id="2389120"><a href="/sort/sort.go.html#2388983">a</a></span><span class="op" id="2389121">,</span>&nbsp;<span class="ident" id="2389123"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2389128">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2389188">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2389227">if</span>&nbsp;<span class="ident" id="2389230"><a href="/sort/sort.go.html#2389094">mlo</a></span><span class="op" id="2389233">-</span><span class="ident" id="2389234"><a href="/sort/sort.go.html#2388983">a</a></span>&nbsp;<span class="op" id="2389236">&lt;</span>&nbsp;<span class="ident" id="2389238"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389239">-</span><span class="ident" id="2389240"><a href="/sort/sort.go.html#2389099">mhi</a></span>&nbsp;<span class="op" id="2389244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389249"><a href="/sort/sort.go.html#2388957">quickSort</a></span><span class="op" id="2389258">(</span><span class="ident" id="2389259"><a href="/sort/sort.go.html#2388967">data</a></span><span class="op" id="2389263">,</span>&nbsp;<span class="ident" id="2389265"><a href="/sort/sort.go.html#2388983">a</a></span><span class="op" id="2389266">,</span>&nbsp;<span class="ident" id="2389268"><a href="/sort/sort.go.html#2389094">mlo</a></span><span class="op" id="2389271">,</span>&nbsp;<span class="ident" id="2389273"><a href="/sort/sort.go.html#2388989">maxDepth</a></span><span class="op" id="2389281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389286"><a href="/sort/sort.go.html#2388983">a</a></span>&nbsp;<span class="op" id="2389288">=</span>&nbsp;<span class="ident" id="2389290"><a href="/sort/sort.go.html#2389099">mhi</a></span>&nbsp;<span class="comment" id="2389294">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2389329">}</span>&nbsp;<span class="keyword" id="2389331">else</span>&nbsp;<span class="op" id="2389336">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389341"><a href="/sort/sort.go.html#2388957">quickSort</a></span><span class="op" id="2389350">(</span><span class="ident" id="2389351"><a href="/sort/sort.go.html#2388967">data</a></span><span class="op" id="2389355">,</span>&nbsp;<span class="ident" id="2389357"><a href="/sort/sort.go.html#2389099">mhi</a></span><span class="op" id="2389360">,</span>&nbsp;<span class="ident" id="2389362"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389363">,</span>&nbsp;<span class="ident" id="2389365"><a href="/sort/sort.go.html#2388989">maxDepth</a></span><span class="op" id="2389373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389378"><a href="/sort/sort.go.html#2388986">b</a></span>&nbsp;<span class="op" id="2389380">=</span>&nbsp;<span class="ident" id="2389382"><a href="/sort/sort.go.html#2389094">mlo</a></span>&nbsp;<span class="comment" id="2389386">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2389421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2389424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2389427">if</span>&nbsp;<span class="ident" id="2389430"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389431">-</span><span class="ident" id="2389432"><a href="/sort/sort.go.html#2388983">a</a></span>&nbsp;<span class="op" id="2389434">&gt;</span>&nbsp;<span class="num" id="2389436">1</span>&nbsp;<span class="op" id="2389438">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389442"><a href="/sort/sort.go.html#2386043">insertionSort</a></span><span class="op" id="2389455">(</span><span class="ident" id="2389456"><a href="/sort/sort.go.html#2388967">data</a></span><span class="op" id="2389460">,</span>&nbsp;<span class="ident" id="2389462"><a href="/sort/sort.go.html#2388983">a</a></span><span class="op" id="2389463">,</span>&nbsp;<span class="ident" id="2389465"><a href="/sort/sort.go.html#2388986">b</a></span><span class="op" id="2389466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2389469">}</span><br>
<span class="lineno"></span><span class="op" id="2389471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2389474">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2389494">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2389568">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2389637">func</span>&nbsp;<span class="ident" id="2389642">Sort</span><span class="op" id="2389646">(</span><span class="ident" id="2389647">data</span>&nbsp;<span class="ident" id="2389652"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2389661">)</span>&nbsp;<span class="op" id="2389663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2389666">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389729">n</span>&nbsp;<span class="op" id="2389731">:=</span>&nbsp;<span class="ident" id="2389734"><a href="/sort/sort.go.html#2389647">data</a></span><span class="op" id="2389738">.</span><span class="ident" id="2389739">Len</span><span class="op" id="2389742">(</span><span class="op" id="2389743">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389746">maxDepth</span>&nbsp;<span class="op" id="2389755">:=</span>&nbsp;<span class="num" id="2389758">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2389761">for</span>&nbsp;<span class="ident" id="2389765">i</span>&nbsp;<span class="op" id="2389767">:=</span>&nbsp;<span class="ident" id="2389770"><a href="/sort/sort.go.html#2389729">n</a></span><span class="op" id="2389771">;</span>&nbsp;<span class="ident" id="2389773"><a href="/sort/sort.go.html#2389765">i</a></span>&nbsp;<span class="op" id="2389775">&gt;</span>&nbsp;<span class="num" id="2389777">0</span><span class="op" id="2389778">;</span>&nbsp;<span class="ident" id="2389780"><a href="/sort/sort.go.html#2389765">i</a></span>&nbsp;<span class="op" id="2389782">&gt;&gt;=</span>&nbsp;<span class="num" id="2389786">1</span>&nbsp;<span class="op" id="2389788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389792"><a href="/sort/sort.go.html#2389746">maxDepth</a></span><span class="op" id="2389800">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2389804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389807"><a href="/sort/sort.go.html#2389746">maxDepth</a></span>&nbsp;<span class="op" id="2389816">*=</span>&nbsp;<span class="num" id="2389819">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389822"><a href="/sort/sort.go.html#2388957">quickSort</a></span><span class="op" id="2389831">(</span><span class="ident" id="2389832"><a href="/sort/sort.go.html#2389647">data</a></span><span class="op" id="2389836">,</span>&nbsp;<span class="num" id="2389838">0</span><span class="op" id="2389839">,</span>&nbsp;<span class="ident" id="2389841"><a href="/sort/sort.go.html#2389729">n</a></span><span class="op" id="2389842">,</span>&nbsp;<span class="ident" id="2389844"><a href="/sort/sort.go.html#2389746">maxDepth</a></span><span class="op" id="2389852">)</span><br>
<span class="lineno"></span><span class="op" id="2389854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2389857">type</span>&nbsp;<span class="ident" id="2389862">reverse</span>&nbsp;<span class="keyword" id="2389870">struct</span>&nbsp;<span class="op" id="2389877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2389880">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2389946">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2389984"><a href="/sort/sort.go.html#2385681">Interface</a></span><br>
<span class="lineno"></span><span class="op" id="2389994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2389997">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2390072">func</span>&nbsp;<span class="op" id="2390077">(</span><span class="ident" id="2390078">r</span>&nbsp;<span class="ident" id="2390080"><a href="/sort/sort.go.html#2389862">reverse</a></span><span class="op" id="2390087">)</span>&nbsp;<span class="ident" id="2390089">Less</span><span class="op" id="2390093">(</span><span class="ident" id="2390094">i</span><span class="op" id="2390095">,</span>&nbsp;<span class="ident" id="2390097">j</span>&nbsp;<span class="builtintype" id="2390099">int</span><span class="op" id="2390102">)</span>&nbsp;<span class="builtintype" id="2390104">bool</span>&nbsp;<span class="op" id="2390109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2390112">return</span>&nbsp;<span class="ident" id="2390119"><a href="/sort/sort.go.html#2390078">r</a></span><span class="op" id="2390120">.</span><span class="ident" id="2390121">Interface</span><span class="op" id="2390130">.</span><span class="ident" id="2390131">Less</span><span class="op" id="2390135">(</span><span class="ident" id="2390136"><a href="/sort/sort.go.html#2390097">j</a></span><span class="op" id="2390137">,</span>&nbsp;<span class="ident" id="2390139"><a href="/sort/sort.go.html#2390094">i</a></span><span class="op" id="2390140">)</span><br>
<span class="lineno"></span><span class="op" id="2390142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2390145">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2390192">func</span>&nbsp;<span class="ident" id="2390197">Reverse</span><span class="op" id="2390204">(</span><span class="ident" id="2390205">data</span>&nbsp;<span class="ident" id="2390210"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2390219">)</span>&nbsp;<span class="ident" id="2390221"><a href="/sort/sort.go.html#2385681">Interface</a></span>&nbsp;<span class="op" id="2390231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2390234">return</span>&nbsp;<span class="op" id="2390241">&amp;</span><span class="ident" id="2390242"><a href="/sort/sort.go.html#2389862">reverse</a></span><span class="op" id="2390249">{</span><span class="ident" id="2390250"><a href="/sort/sort.go.html#2390205">data</a></span><span class="op" id="2390254">}</span><br>
<span class="lineno"></span><span class="op" id="2390256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2390259">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2390303">func</span>&nbsp;<span class="ident" id="2390308">IsSorted</span><span class="op" id="2390316">(</span><span class="ident" id="2390317">data</span>&nbsp;<span class="ident" id="2390322"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2390331">)</span>&nbsp;<span class="builtintype" id="2390333">bool</span>&nbsp;<span class="op" id="2390338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2390341">n</span>&nbsp;<span class="op" id="2390343">:=</span>&nbsp;<span class="ident" id="2390346"><a href="/sort/sort.go.html#2390317">data</a></span><span class="op" id="2390350">.</span><span class="ident" id="2390351">Len</span><span class="op" id="2390354">(</span><span class="op" id="2390355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2390358">for</span>&nbsp;<span class="ident" id="2390362">i</span>&nbsp;<span class="op" id="2390364">:=</span>&nbsp;<span class="ident" id="2390367"><a href="/sort/sort.go.html#2390341">n</a></span>&nbsp;<span class="op" id="2390369">-</span>&nbsp;<span class="num" id="2390371">1</span><span class="op" id="2390372">;</span>&nbsp;<span class="ident" id="2390374"><a href="/sort/sort.go.html#2390362">i</a></span>&nbsp;<span class="op" id="2390376">&gt;</span>&nbsp;<span class="num" id="2390378">0</span><span class="op" id="2390379">;</span>&nbsp;<span class="ident" id="2390381"><a href="/sort/sort.go.html#2390362">i</a></span><span class="op" id="2390382">--</span>&nbsp;<span class="op" id="2390385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2390389">if</span>&nbsp;<span class="ident" id="2390392"><a href="/sort/sort.go.html#2390317">data</a></span><span class="op" id="2390396">.</span><span class="ident" id="2390397">Less</span><span class="op" id="2390401">(</span><span class="ident" id="2390402"><a href="/sort/sort.go.html#2390362">i</a></span><span class="op" id="2390403">,</span>&nbsp;<span class="ident" id="2390405"><a href="/sort/sort.go.html#2390362">i</a></span><span class="op" id="2390406">-</span><span class="num" id="2390407">1</span><span class="op" id="2390408">)</span>&nbsp;<span class="op" id="2390410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2390415">return</span>&nbsp;<span class="builtintype" id="2390422">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2390430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2390433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2390436">return</span>&nbsp;<span class="builtintype" id="2390443">true</span><br>
<span class="lineno"></span><span class="op" id="2390448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2390451">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2390490">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2390575">type</span>&nbsp;<span class="ident" id="2390580">IntSlice</span>&nbsp;<span class="op" id="2390589">[</span><span class="op" id="2390590">]</span><span class="builtintype" id="2390591">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2390596">func</span>&nbsp;<span class="op" id="2390601">(</span><span class="ident" id="2390602">p</span>&nbsp;<span class="ident" id="2390604"><a href="/sort/sort.go.html#2390580">IntSlice</a></span><span class="op" id="2390612">)</span>&nbsp;<span class="ident" id="2390614">Len</span><span class="op" id="2390617">(</span><span class="op" id="2390618">)</span>&nbsp;<span class="builtintype" id="2390620">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390634">{</span>&nbsp;<span class="keyword" id="2390636">return</span>&nbsp;<span class="builtinfunc" id="2390643">len</span><span class="op" id="2390646">(</span><span class="ident" id="2390647"><a href="/sort/sort.go.html#2390602">p</a></span><span class="op" id="2390648">)</span>&nbsp;<span class="op" id="2390650">}</span><br>
<span class="lineno"></span><span class="keyword" id="2390652">func</span>&nbsp;<span class="op" id="2390657">(</span><span class="ident" id="2390658">p</span>&nbsp;<span class="ident" id="2390660"><a href="/sort/sort.go.html#2390580">IntSlice</a></span><span class="op" id="2390668">)</span>&nbsp;<span class="ident" id="2390670">Less</span><span class="op" id="2390674">(</span><span class="ident" id="2390675">i</span><span class="op" id="2390676">,</span>&nbsp;<span class="ident" id="2390678">j</span>&nbsp;<span class="builtintype" id="2390680">int</span><span class="op" id="2390683">)</span>&nbsp;<span class="builtintype" id="2390685">bool</span>&nbsp;<span class="op" id="2390690">{</span>&nbsp;<span class="keyword" id="2390692">return</span>&nbsp;<span class="ident" id="2390699"><a href="/sort/sort.go.html#2390658">p</a></span><span class="op" id="2390700">[</span><span class="ident" id="2390701"><a href="/sort/sort.go.html#2390675">i</a></span><span class="op" id="2390702">]</span>&nbsp;<span class="op" id="2390704">&lt;</span>&nbsp;<span class="ident" id="2390706"><a href="/sort/sort.go.html#2390658">p</a></span><span class="op" id="2390707">[</span><span class="ident" id="2390708"><a href="/sort/sort.go.html#2390678">j</a></span><span class="op" id="2390709">]</span>&nbsp;<span class="op" id="2390711">}</span><br>
<span class="lineno"></span><span class="keyword" id="2390713">func</span>&nbsp;<span class="op" id="2390718">(</span><span class="ident" id="2390719">p</span>&nbsp;<span class="ident" id="2390721"><a href="/sort/sort.go.html#2390580">IntSlice</a></span><span class="op" id="2390729">)</span>&nbsp;<span class="ident" id="2390731">Swap</span><span class="op" id="2390735">(</span><span class="ident" id="2390736">i</span><span class="op" id="2390737">,</span>&nbsp;<span class="ident" id="2390739">j</span>&nbsp;<span class="builtintype" id="2390741">int</span><span class="op" id="2390744">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2390751">{</span>&nbsp;<span class="ident" id="2390753"><a href="/sort/sort.go.html#2390719">p</a></span><span class="op" id="2390754">[</span><span class="ident" id="2390755"><a href="/sort/sort.go.html#2390736">i</a></span><span class="op" id="2390756">]</span><span class="op" id="2390757">,</span>&nbsp;<span class="ident" id="2390759"><a href="/sort/sort.go.html#2390719">p</a></span><span class="op" id="2390760">[</span><span class="ident" id="2390761"><a href="/sort/sort.go.html#2390739">j</a></span><span class="op" id="2390762">]</span>&nbsp;<span class="op" id="2390764">=</span>&nbsp;<span class="ident" id="2390766"><a href="/sort/sort.go.html#2390719">p</a></span><span class="op" id="2390767">[</span><span class="ident" id="2390768"><a href="/sort/sort.go.html#2390739">j</a></span><span class="op" id="2390769">]</span><span class="op" id="2390770">,</span>&nbsp;<span class="ident" id="2390772"><a href="/sort/sort.go.html#2390719">p</a></span><span class="op" id="2390773">[</span><span class="ident" id="2390774"><a href="/sort/sort.go.html#2390736">i</a></span><span class="op" id="2390775">]</span>&nbsp;<span class="op" id="2390777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2390780">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2390813">func</span>&nbsp;<span class="op" id="2390818">(</span><span class="ident" id="2390819">p</span>&nbsp;<span class="ident" id="2390821"><a href="/sort/sort.go.html#2390580">IntSlice</a></span><span class="op" id="2390829">)</span>&nbsp;<span class="ident" id="2390831">Sort</span><span class="op" id="2390835">(</span><span class="op" id="2390836">)</span>&nbsp;<span class="op" id="2390838">{</span>&nbsp;<span class="ident" id="2390840"><a href="/sort/sort.go.html#2389642">Sort</a></span><span class="op" id="2390844">(</span><span class="ident" id="2390845"><a href="/sort/sort.go.html#2390819">p</a></span><span class="op" id="2390846">)</span>&nbsp;<span class="op" id="2390848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2390851">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2390944">type</span>&nbsp;<span class="ident" id="2390949">Float64Slice</span>&nbsp;<span class="op" id="2390962">[</span><span class="op" id="2390963">]</span><span class="builtintype" id="2390964">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2390973">func</span>&nbsp;<span class="op" id="2390978">(</span><span class="ident" id="2390979">p</span>&nbsp;<span class="ident" id="2390981"><a href="/sort/sort.go.html#2390949">Float64Slice</a></span><span class="op" id="2390993">)</span>&nbsp;<span class="ident" id="2390995">Len</span><span class="op" id="2390998">(</span><span class="op" id="2390999">)</span>&nbsp;<span class="builtintype" id="2391001">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391015">{</span>&nbsp;<span class="keyword" id="2391017">return</span>&nbsp;<span class="builtinfunc" id="2391024">len</span><span class="op" id="2391027">(</span><span class="ident" id="2391028"><a href="/sort/sort.go.html#2390979">p</a></span><span class="op" id="2391029">)</span>&nbsp;<span class="op" id="2391031">}</span><br>
<span class="lineno"></span><span class="keyword" id="2391033">func</span>&nbsp;<span class="op" id="2391038">(</span><span class="ident" id="2391039">p</span>&nbsp;<span class="ident" id="2391041"><a href="/sort/sort.go.html#2390949">Float64Slice</a></span><span class="op" id="2391053">)</span>&nbsp;<span class="ident" id="2391055">Less</span><span class="op" id="2391059">(</span><span class="ident" id="2391060">i</span><span class="op" id="2391061">,</span>&nbsp;<span class="ident" id="2391063">j</span>&nbsp;<span class="builtintype" id="2391065">int</span><span class="op" id="2391068">)</span>&nbsp;<span class="builtintype" id="2391070">bool</span>&nbsp;<span class="op" id="2391075">{</span>&nbsp;<span class="keyword" id="2391077">return</span>&nbsp;<span class="ident" id="2391084"><a href="/sort/sort.go.html#2391039">p</a></span><span class="op" id="2391085">[</span><span class="ident" id="2391086"><a href="/sort/sort.go.html#2391060">i</a></span><span class="op" id="2391087">]</span>&nbsp;<span class="op" id="2391089">&lt;</span>&nbsp;<span class="ident" id="2391091"><a href="/sort/sort.go.html#2391039">p</a></span><span class="op" id="2391092">[</span><span class="ident" id="2391093"><a href="/sort/sort.go.html#2391063">j</a></span><span class="op" id="2391094">]</span>&nbsp;<span class="op" id="2391096">||</span>&nbsp;<span class="ident" id="2391099"><a href="/sort/sort.go.html#2391281">isNaN</a></span><span class="op" id="2391104">(</span><span class="ident" id="2391105"><a href="/sort/sort.go.html#2391039">p</a></span><span class="op" id="2391106">[</span><span class="ident" id="2391107"><a href="/sort/sort.go.html#2391060">i</a></span><span class="op" id="2391108">]</span><span class="op" id="2391109">)</span>&nbsp;<span class="op" id="2391111">&amp;&amp;</span>&nbsp;<span class="op" id="2391114">!</span><span class="ident" id="2391115"><a href="/sort/sort.go.html#2391281">isNaN</a></span><span class="op" id="2391120">(</span><span class="ident" id="2391121"><a href="/sort/sort.go.html#2391039">p</a></span><span class="op" id="2391122">[</span><span class="ident" id="2391123"><a href="/sort/sort.go.html#2391063">j</a></span><span class="op" id="2391124">]</span><span class="op" id="2391125">)</span>&nbsp;<span class="op" id="2391127">}</span><br>
<span class="lineno"></span><span class="keyword" id="2391129">func</span>&nbsp;<span class="op" id="2391134">(</span><span class="ident" id="2391135">p</span>&nbsp;<span class="ident" id="2391137"><a href="/sort/sort.go.html#2390949">Float64Slice</a></span><span class="op" id="2391149">)</span>&nbsp;<span class="ident" id="2391151">Swap</span><span class="op" id="2391155">(</span><span class="ident" id="2391156">i</span><span class="op" id="2391157">,</span>&nbsp;<span class="ident" id="2391159">j</span>&nbsp;<span class="builtintype" id="2391161">int</span><span class="op" id="2391164">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391171">{</span>&nbsp;<span class="ident" id="2391173"><a href="/sort/sort.go.html#2391135">p</a></span><span class="op" id="2391174">[</span><span class="ident" id="2391175"><a href="/sort/sort.go.html#2391156">i</a></span><span class="op" id="2391176">]</span><span class="op" id="2391177">,</span>&nbsp;<span class="ident" id="2391179"><a href="/sort/sort.go.html#2391135">p</a></span><span class="op" id="2391180">[</span><span class="ident" id="2391181"><a href="/sort/sort.go.html#2391159">j</a></span><span class="op" id="2391182">]</span>&nbsp;<span class="op" id="2391184">=</span>&nbsp;<span class="ident" id="2391186"><a href="/sort/sort.go.html#2391135">p</a></span><span class="op" id="2391187">[</span><span class="ident" id="2391188"><a href="/sort/sort.go.html#2391159">j</a></span><span class="op" id="2391189">]</span><span class="op" id="2391190">,</span>&nbsp;<span class="ident" id="2391192"><a href="/sort/sort.go.html#2391135">p</a></span><span class="op" id="2391193">[</span><span class="ident" id="2391194"><a href="/sort/sort.go.html#2391156">i</a></span><span class="op" id="2391195">]</span>&nbsp;<span class="op" id="2391197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391200">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2391276">func</span>&nbsp;<span class="ident" id="2391281">isNaN</span><span class="op" id="2391286">(</span><span class="ident" id="2391287">f</span>&nbsp;<span class="builtintype" id="2391289">float64</span><span class="op" id="2391296">)</span>&nbsp;<span class="builtintype" id="2391298">bool</span>&nbsp;<span class="op" id="2391303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2391306">return</span>&nbsp;<span class="ident" id="2391313"><a href="/sort/sort.go.html#2391287">f</a></span>&nbsp;<span class="op" id="2391315">!=</span>&nbsp;<span class="ident" id="2391318"><a href="/sort/sort.go.html#2391287">f</a></span><br>
<span class="lineno"></span><span class="op" id="2391320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391323">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2391356">func</span>&nbsp;<span class="op" id="2391361">(</span><span class="ident" id="2391362">p</span>&nbsp;<span class="ident" id="2391364"><a href="/sort/sort.go.html#2390949">Float64Slice</a></span><span class="op" id="2391376">)</span>&nbsp;<span class="ident" id="2391378">Sort</span><span class="op" id="2391382">(</span><span class="op" id="2391383">)</span>&nbsp;<span class="op" id="2391385">{</span>&nbsp;<span class="ident" id="2391387"><a href="/sort/sort.go.html#2389642">Sort</a></span><span class="op" id="2391391">(</span><span class="ident" id="2391392"><a href="/sort/sort.go.html#2391362">p</a></span><span class="op" id="2391393">)</span>&nbsp;<span class="op" id="2391395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391398">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2391489">type</span>&nbsp;<span class="ident" id="2391494">StringSlice</span>&nbsp;<span class="op" id="2391506">[</span><span class="op" id="2391507">]</span><span class="builtintype" id="2391508">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2391516">func</span>&nbsp;<span class="op" id="2391521">(</span><span class="ident" id="2391522">p</span>&nbsp;<span class="ident" id="2391524"><a href="/sort/sort.go.html#2391494">StringSlice</a></span><span class="op" id="2391535">)</span>&nbsp;<span class="ident" id="2391537">Len</span><span class="op" id="2391540">(</span><span class="op" id="2391541">)</span>&nbsp;<span class="builtintype" id="2391543">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391557">{</span>&nbsp;<span class="keyword" id="2391559">return</span>&nbsp;<span class="builtinfunc" id="2391566">len</span><span class="op" id="2391569">(</span><span class="ident" id="2391570"><a href="/sort/sort.go.html#2391522">p</a></span><span class="op" id="2391571">)</span>&nbsp;<span class="op" id="2391573">}</span><br>
<span class="lineno"></span><span class="keyword" id="2391575">func</span>&nbsp;<span class="op" id="2391580">(</span><span class="ident" id="2391581">p</span>&nbsp;<span class="ident" id="2391583"><a href="/sort/sort.go.html#2391494">StringSlice</a></span><span class="op" id="2391594">)</span>&nbsp;<span class="ident" id="2391596">Less</span><span class="op" id="2391600">(</span><span class="ident" id="2391601">i</span><span class="op" id="2391602">,</span>&nbsp;<span class="ident" id="2391604">j</span>&nbsp;<span class="builtintype" id="2391606">int</span><span class="op" id="2391609">)</span>&nbsp;<span class="builtintype" id="2391611">bool</span>&nbsp;<span class="op" id="2391616">{</span>&nbsp;<span class="keyword" id="2391618">return</span>&nbsp;<span class="ident" id="2391625"><a href="/sort/sort.go.html#2391581">p</a></span><span class="op" id="2391626">[</span><span class="ident" id="2391627"><a href="/sort/sort.go.html#2391601">i</a></span><span class="op" id="2391628">]</span>&nbsp;<span class="op" id="2391630">&lt;</span>&nbsp;<span class="ident" id="2391632"><a href="/sort/sort.go.html#2391581">p</a></span><span class="op" id="2391633">[</span><span class="ident" id="2391634"><a href="/sort/sort.go.html#2391604">j</a></span><span class="op" id="2391635">]</span>&nbsp;<span class="op" id="2391637">}</span><br>
<span class="lineno"></span><span class="keyword" id="2391639">func</span>&nbsp;<span class="op" id="2391644">(</span><span class="ident" id="2391645">p</span>&nbsp;<span class="ident" id="2391647"><a href="/sort/sort.go.html#2391494">StringSlice</a></span><span class="op" id="2391658">)</span>&nbsp;<span class="ident" id="2391660">Swap</span><span class="op" id="2391664">(</span><span class="ident" id="2391665">i</span><span class="op" id="2391666">,</span>&nbsp;<span class="ident" id="2391668">j</span>&nbsp;<span class="builtintype" id="2391670">int</span><span class="op" id="2391673">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2391680">{</span>&nbsp;<span class="ident" id="2391682"><a href="/sort/sort.go.html#2391645">p</a></span><span class="op" id="2391683">[</span><span class="ident" id="2391684"><a href="/sort/sort.go.html#2391665">i</a></span><span class="op" id="2391685">]</span><span class="op" id="2391686">,</span>&nbsp;<span class="ident" id="2391688"><a href="/sort/sort.go.html#2391645">p</a></span><span class="op" id="2391689">[</span><span class="ident" id="2391690"><a href="/sort/sort.go.html#2391668">j</a></span><span class="op" id="2391691">]</span>&nbsp;<span class="op" id="2391693">=</span>&nbsp;<span class="ident" id="2391695"><a href="/sort/sort.go.html#2391645">p</a></span><span class="op" id="2391696">[</span><span class="ident" id="2391697"><a href="/sort/sort.go.html#2391668">j</a></span><span class="op" id="2391698">]</span><span class="op" id="2391699">,</span>&nbsp;<span class="ident" id="2391701"><a href="/sort/sort.go.html#2391645">p</a></span><span class="op" id="2391702">[</span><span class="ident" id="2391703"><a href="/sort/sort.go.html#2391665">i</a></span><span class="op" id="2391704">]</span>&nbsp;<span class="op" id="2391706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391709">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2391742">func</span>&nbsp;<span class="op" id="2391747">(</span><span class="ident" id="2391748">p</span>&nbsp;<span class="ident" id="2391750"><a href="/sort/sort.go.html#2391494">StringSlice</a></span><span class="op" id="2391761">)</span>&nbsp;<span class="ident" id="2391763">Sort</span><span class="op" id="2391767">(</span><span class="op" id="2391768">)</span>&nbsp;<span class="op" id="2391770">{</span>&nbsp;<span class="ident" id="2391772"><a href="/sort/sort.go.html#2389642">Sort</a></span><span class="op" id="2391776">(</span><span class="ident" id="2391777"><a href="/sort/sort.go.html#2391748">p</a></span><span class="op" id="2391778">)</span>&nbsp;<span class="op" id="2391780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391783">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391825">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2391876">func</span>&nbsp;<span class="ident" id="2391881">Ints</span><span class="op" id="2391885">(</span><span class="ident" id="2391886">a</span>&nbsp;<span class="op" id="2391888">[</span><span class="op" id="2391889">]</span><span class="builtintype" id="2391890">int</span><span class="op" id="2391893">)</span>&nbsp;<span class="op" id="2391895">{</span>&nbsp;<span class="ident" id="2391897"><a href="/sort/sort.go.html#2389642">Sort</a></span><span class="op" id="2391901">(</span><span class="ident" id="2391902"><a href="/sort/sort.go.html#2390580">IntSlice</a></span><span class="op" id="2391910">(</span><span class="ident" id="2391911"><a href="/sort/sort.go.html#2391886">a</a></span><span class="op" id="2391912">)</span><span class="op" id="2391913">)</span>&nbsp;<span class="op" id="2391915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2391918">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2391977">func</span>&nbsp;<span class="ident" id="2391982">Float64s</span><span class="op" id="2391990">(</span><span class="ident" id="2391991">a</span>&nbsp;<span class="op" id="2391993">[</span><span class="op" id="2391994">]</span><span class="builtintype" id="2391995">float64</span><span class="op" id="2392002">)</span>&nbsp;<span class="op" id="2392004">{</span>&nbsp;<span class="ident" id="2392006"><a href="/sort/sort.go.html#2389642">Sort</a></span><span class="op" id="2392010">(</span><span class="ident" id="2392011"><a href="/sort/sort.go.html#2390949">Float64Slice</a></span><span class="op" id="2392023">(</span><span class="ident" id="2392024"><a href="/sort/sort.go.html#2391991">a</a></span><span class="op" id="2392025">)</span><span class="op" id="2392026">)</span>&nbsp;<span class="op" id="2392028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2392031">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2392088">func</span>&nbsp;<span class="ident" id="2392093">Strings</span><span class="op" id="2392100">(</span><span class="ident" id="2392101">a</span>&nbsp;<span class="op" id="2392103">[</span><span class="op" id="2392104">]</span><span class="builtintype" id="2392105">string</span><span class="op" id="2392111">)</span>&nbsp;<span class="op" id="2392113">{</span>&nbsp;<span class="ident" id="2392115"><a href="/sort/sort.go.html#2389642">Sort</a></span><span class="op" id="2392119">(</span><span class="ident" id="2392120"><a href="/sort/sort.go.html#2391494">StringSlice</a></span><span class="op" id="2392131">(</span><span class="ident" id="2392132"><a href="/sort/sort.go.html#2392101">a</a></span><span class="op" id="2392133">)</span><span class="op" id="2392134">)</span>&nbsp;<span class="op" id="2392136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2392139">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2392217">func</span>&nbsp;<span class="ident" id="2392222">IntsAreSorted</span><span class="op" id="2392235">(</span><span class="ident" id="2392236">a</span>&nbsp;<span class="op" id="2392238">[</span><span class="op" id="2392239">]</span><span class="builtintype" id="2392240">int</span><span class="op" id="2392243">)</span>&nbsp;<span class="builtintype" id="2392245">bool</span>&nbsp;<span class="op" id="2392250">{</span>&nbsp;<span class="keyword" id="2392252">return</span>&nbsp;<span class="ident" id="2392259"><a href="/sort/sort.go.html#2390308">IsSorted</a></span><span class="op" id="2392267">(</span><span class="ident" id="2392268"><a href="/sort/sort.go.html#2390580">IntSlice</a></span><span class="op" id="2392276">(</span><span class="ident" id="2392277"><a href="/sort/sort.go.html#2392236">a</a></span><span class="op" id="2392278">)</span><span class="op" id="2392279">)</span>&nbsp;<span class="op" id="2392281">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2392284">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2392370">func</span>&nbsp;<span class="ident" id="2392375">Float64sAreSorted</span><span class="op" id="2392392">(</span><span class="ident" id="2392393">a</span>&nbsp;<span class="op" id="2392395">[</span><span class="op" id="2392396">]</span><span class="builtintype" id="2392397">float64</span><span class="op" id="2392404">)</span>&nbsp;<span class="builtintype" id="2392406">bool</span>&nbsp;<span class="op" id="2392411">{</span>&nbsp;<span class="keyword" id="2392413">return</span>&nbsp;<span class="ident" id="2392420"><a href="/sort/sort.go.html#2390308">IsSorted</a></span><span class="op" id="2392428">(</span><span class="ident" id="2392429"><a href="/sort/sort.go.html#2390949">Float64Slice</a></span><span class="op" id="2392441">(</span><span class="ident" id="2392442"><a href="/sort/sort.go.html#2392393">a</a></span><span class="op" id="2392443">)</span><span class="op" id="2392444">)</span>&nbsp;<span class="op" id="2392446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2392449">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2392533">func</span>&nbsp;<span class="ident" id="2392538">StringsAreSorted</span><span class="op" id="2392554">(</span><span class="ident" id="2392555">a</span>&nbsp;<span class="op" id="2392557">[</span><span class="op" id="2392558">]</span><span class="builtintype" id="2392559">string</span><span class="op" id="2392565">)</span>&nbsp;<span class="builtintype" id="2392567">bool</span>&nbsp;<span class="op" id="2392572">{</span>&nbsp;<span class="keyword" id="2392574">return</span>&nbsp;<span class="ident" id="2392581"><a href="/sort/sort.go.html#2390308">IsSorted</a></span><span class="op" id="2392589">(</span><span class="ident" id="2392590"><a href="/sort/sort.go.html#2391494">StringSlice</a></span><span class="op" id="2392601">(</span><span class="ident" id="2392602"><a href="/sort/sort.go.html#2392555">a</a></span><span class="op" id="2392603">)</span><span class="op" id="2392604">)</span>&nbsp;<span class="op" id="2392606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2392609">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2392637">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2392713">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2392788">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2392851">//</span><br>
<span class="lineno"></span><span class="comment" id="2392854">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2392896">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2392968">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2392986">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2393040">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2393117">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2393189">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2393261">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2393316">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2393389">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2393440">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2393516">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2393590">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2393656">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2393733">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2393812">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2393890">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2393964">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2394012">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2394086">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2394135">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2394208">//</span><br>
<span class="lineno">315</span><span class="comment" id="2394211">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2394281">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2394337">func</span>&nbsp;<span class="ident" id="2394342">Stable</span><span class="op" id="2394348">(</span><span class="ident" id="2394349">data</span>&nbsp;<span class="ident" id="2394354"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2394363">)</span>&nbsp;<span class="op" id="2394365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394368">n</span>&nbsp;<span class="op" id="2394370">:=</span>&nbsp;<span class="ident" id="2394373"><a href="/sort/sort.go.html#2394349">data</a></span><span class="op" id="2394377">.</span><span class="ident" id="2394378">Len</span><span class="op" id="2394381">(</span><span class="op" id="2394382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394385">blockSize</span>&nbsp;<span class="op" id="2394395">:=</span>&nbsp;<span class="num" id="2394398">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394402">a</span><span class="op" id="2394403">,</span>&nbsp;<span class="ident" id="2394405">b</span>&nbsp;<span class="op" id="2394407">:=</span>&nbsp;<span class="num" id="2394410">0</span><span class="op" id="2394411">,</span>&nbsp;<span class="ident" id="2394413"><a href="/sort/sort.go.html#2394385">blockSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2394424">for</span>&nbsp;<span class="ident" id="2394428"><a href="/sort/sort.go.html#2394405">b</a></span>&nbsp;<span class="op" id="2394430">&lt;=</span>&nbsp;<span class="ident" id="2394433"><a href="/sort/sort.go.html#2394368">n</a></span>&nbsp;<span class="op" id="2394435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394439"><a href="/sort/sort.go.html#2386043">insertionSort</a></span><span class="op" id="2394452">(</span><span class="ident" id="2394453"><a href="/sort/sort.go.html#2394349">data</a></span><span class="op" id="2394457">,</span>&nbsp;<span class="ident" id="2394459"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394460">,</span>&nbsp;<span class="ident" id="2394462"><a href="/sort/sort.go.html#2394405">b</a></span><span class="op" id="2394463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394467"><a href="/sort/sort.go.html#2394402">a</a></span>&nbsp;<span class="op" id="2394469">=</span>&nbsp;<span class="ident" id="2394471"><a href="/sort/sort.go.html#2394405">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394475"><a href="/sort/sort.go.html#2394405">b</a></span>&nbsp;<span class="op" id="2394477">+=</span>&nbsp;<span class="ident" id="2394480"><a href="/sort/sort.go.html#2394385">blockSize</a></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2394491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394494"><a href="/sort/sort.go.html#2386043">insertionSort</a></span><span class="op" id="2394507">(</span><span class="ident" id="2394508"><a href="/sort/sort.go.html#2394349">data</a></span><span class="op" id="2394512">,</span>&nbsp;<span class="ident" id="2394514"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394515">,</span>&nbsp;<span class="ident" id="2394517"><a href="/sort/sort.go.html#2394368">n</a></span><span class="op" id="2394518">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2394522">for</span>&nbsp;<span class="ident" id="2394526"><a href="/sort/sort.go.html#2394385">blockSize</a></span>&nbsp;<span class="op" id="2394536">&lt;</span>&nbsp;<span class="ident" id="2394538"><a href="/sort/sort.go.html#2394368">n</a></span>&nbsp;<span class="op" id="2394540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394544"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394545">,</span>&nbsp;<span class="ident" id="2394547"><a href="/sort/sort.go.html#2394405">b</a></span>&nbsp;<span class="op" id="2394549">=</span>&nbsp;<span class="num" id="2394551">0</span><span class="op" id="2394552">,</span>&nbsp;<span class="num" id="2394554">2</span><span class="op" id="2394555">*</span><span class="ident" id="2394556"><a href="/sort/sort.go.html#2394385">blockSize</a></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2394568">for</span>&nbsp;<span class="ident" id="2394572"><a href="/sort/sort.go.html#2394405">b</a></span>&nbsp;<span class="op" id="2394574">&lt;=</span>&nbsp;<span class="ident" id="2394577"><a href="/sort/sort.go.html#2394368">n</a></span>&nbsp;<span class="op" id="2394579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394584"><a href="/sort/sort.go.html#2395566">symMerge</a></span><span class="op" id="2394592">(</span><span class="ident" id="2394593"><a href="/sort/sort.go.html#2394349">data</a></span><span class="op" id="2394597">,</span>&nbsp;<span class="ident" id="2394599"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394600">,</span>&nbsp;<span class="ident" id="2394602"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394603">+</span><span class="ident" id="2394604"><a href="/sort/sort.go.html#2394385">blockSize</a></span><span class="op" id="2394613">,</span>&nbsp;<span class="ident" id="2394615"><a href="/sort/sort.go.html#2394405">b</a></span><span class="op" id="2394616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394621"><a href="/sort/sort.go.html#2394402">a</a></span>&nbsp;<span class="op" id="2394623">=</span>&nbsp;<span class="ident" id="2394625"><a href="/sort/sort.go.html#2394405">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394630"><a href="/sort/sort.go.html#2394405">b</a></span>&nbsp;<span class="op" id="2394632">+=</span>&nbsp;<span class="num" id="2394635">2</span>&nbsp;<span class="op" id="2394637">*</span>&nbsp;<span class="ident" id="2394639"><a href="/sort/sort.go.html#2394385">blockSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2394651">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394655"><a href="/sort/sort.go.html#2395566">symMerge</a></span><span class="op" id="2394663">(</span><span class="ident" id="2394664"><a href="/sort/sort.go.html#2394349">data</a></span><span class="op" id="2394668">,</span>&nbsp;<span class="ident" id="2394670"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394671">,</span>&nbsp;<span class="ident" id="2394673"><a href="/sort/sort.go.html#2394402">a</a></span><span class="op" id="2394674">+</span><span class="ident" id="2394675"><a href="/sort/sort.go.html#2394385">blockSize</a></span><span class="op" id="2394684">,</span>&nbsp;<span class="ident" id="2394686"><a href="/sort/sort.go.html#2394368">n</a></span><span class="op" id="2394687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2394691"><a href="/sort/sort.go.html#2394385">blockSize</a></span>&nbsp;<span class="op" id="2394701">*=</span>&nbsp;<span class="num" id="2394704">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2394707">}</span><br>
<span class="lineno"></span><span class="op" id="2394709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2394712">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2394789">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2394866">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2394941">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2395016">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2395068">//</span><br>
<span class="lineno"></span><span class="comment" id="2395071">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2395112">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2395163">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2395224">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2395283">//</span><br>
<span class="lineno"></span><span class="comment" id="2395286">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2395361">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2395441">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2395518">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2395561">func</span>&nbsp;<span class="ident" id="2395566">symMerge</span><span class="op" id="2395574">(</span><span class="ident" id="2395575">data</span>&nbsp;<span class="ident" id="2395580"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2395589">,</span>&nbsp;<span class="ident" id="2395591">a</span><span class="op" id="2395592">,</span>&nbsp;<span class="ident" id="2395594">m</span><span class="op" id="2395595">,</span>&nbsp;<span class="ident" id="2395597">b</span>&nbsp;<span class="builtintype" id="2395599">int</span><span class="op" id="2395602">)</span>&nbsp;<span class="op" id="2395604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395607">if</span>&nbsp;<span class="ident" id="2395610"><a href="/sort/sort.go.html#2395591">a</a></span>&nbsp;<span class="op" id="2395612">&gt;=</span>&nbsp;<span class="ident" id="2395615"><a href="/sort/sort.go.html#2395594">m</a></span>&nbsp;<span class="op" id="2395617">||</span>&nbsp;<span class="ident" id="2395620"><a href="/sort/sort.go.html#2395594">m</a></span>&nbsp;<span class="op" id="2395622">&gt;=</span>&nbsp;<span class="ident" id="2395625"><a href="/sort/sort.go.html#2395597">b</a></span>&nbsp;<span class="op" id="2395627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395631">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2395639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395643">mid</span>&nbsp;<span class="op" id="2395647">:=</span>&nbsp;<span class="ident" id="2395650"><a href="/sort/sort.go.html#2395591">a</a></span>&nbsp;<span class="op" id="2395652">+</span>&nbsp;<span class="op" id="2395654">(</span><span class="ident" id="2395655"><a href="/sort/sort.go.html#2395597">b</a></span><span class="op" id="2395656">-</span><span class="ident" id="2395657"><a href="/sort/sort.go.html#2395591">a</a></span><span class="op" id="2395658">)</span><span class="op" id="2395659">/</span><span class="num" id="2395660">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395663">n</span>&nbsp;<span class="op" id="2395665">:=</span>&nbsp;<span class="ident" id="2395668"><a href="/sort/sort.go.html#2395643">mid</a></span>&nbsp;<span class="op" id="2395672">+</span>&nbsp;<span class="ident" id="2395674"><a href="/sort/sort.go.html#2395594">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395677">start</span>&nbsp;<span class="op" id="2395683">:=</span>&nbsp;<span class="num" id="2395686">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395689">if</span>&nbsp;<span class="ident" id="2395692"><a href="/sort/sort.go.html#2395594">m</a></span>&nbsp;<span class="op" id="2395694">&gt;</span>&nbsp;<span class="ident" id="2395696"><a href="/sort/sort.go.html#2395643">mid</a></span>&nbsp;<span class="op" id="2395700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395704"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395710">=</span>&nbsp;<span class="ident" id="2395712"><a href="/sort/sort.go.html#2395663">n</a></span>&nbsp;<span class="op" id="2395714">-</span>&nbsp;<span class="ident" id="2395716"><a href="/sort/sort.go.html#2395597">b</a></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395720">r</span><span class="op" id="2395721">,</span>&nbsp;<span class="ident" id="2395723">p</span>&nbsp;<span class="op" id="2395725">:=</span>&nbsp;<span class="ident" id="2395728"><a href="/sort/sort.go.html#2395643">mid</a></span><span class="op" id="2395731">,</span>&nbsp;<span class="ident" id="2395733"><a href="/sort/sort.go.html#2395663">n</a></span><span class="op" id="2395734">-</span><span class="num" id="2395735">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395739">for</span>&nbsp;<span class="ident" id="2395743"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395749">&lt;</span>&nbsp;<span class="ident" id="2395751"><a href="/sort/sort.go.html#2395720">r</a></span>&nbsp;<span class="op" id="2395753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395758">c</span>&nbsp;<span class="op" id="2395760">:=</span>&nbsp;<span class="ident" id="2395763"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395769">+</span>&nbsp;<span class="op" id="2395771">(</span><span class="ident" id="2395772"><a href="/sort/sort.go.html#2395720">r</a></span><span class="op" id="2395773">-</span><span class="ident" id="2395774"><a href="/sort/sort.go.html#2395677">start</a></span><span class="op" id="2395779">)</span><span class="op" id="2395780">/</span><span class="num" id="2395781">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395786">if</span>&nbsp;<span class="op" id="2395789">!</span><span class="ident" id="2395790"><a href="/sort/sort.go.html#2395575">data</a></span><span class="op" id="2395794">.</span><span class="ident" id="2395795">Less</span><span class="op" id="2395799">(</span><span class="ident" id="2395800"><a href="/sort/sort.go.html#2395723">p</a></span><span class="op" id="2395801">-</span><span class="ident" id="2395802"><a href="/sort/sort.go.html#2395758">c</a></span><span class="op" id="2395803">,</span>&nbsp;<span class="ident" id="2395805"><a href="/sort/sort.go.html#2395758">c</a></span><span class="op" id="2395806">)</span>&nbsp;<span class="op" id="2395808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395814"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395820">=</span>&nbsp;<span class="ident" id="2395822"><a href="/sort/sort.go.html#2395758">c</a></span>&nbsp;<span class="op" id="2395824">+</span>&nbsp;<span class="num" id="2395826">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2395831">}</span>&nbsp;<span class="keyword" id="2395833">else</span>&nbsp;<span class="op" id="2395838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395844"><a href="/sort/sort.go.html#2395720">r</a></span>&nbsp;<span class="op" id="2395846">=</span>&nbsp;<span class="ident" id="2395848"><a href="/sort/sort.go.html#2395758">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2395853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2395857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2395860">}</span>&nbsp;<span class="keyword" id="2395862">else</span>&nbsp;<span class="op" id="2395867">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395871"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395877">=</span>&nbsp;<span class="ident" id="2395879"><a href="/sort/sort.go.html#2395591">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395883">r</span><span class="op" id="2395884">,</span>&nbsp;<span class="ident" id="2395886">p</span>&nbsp;<span class="op" id="2395888">:=</span>&nbsp;<span class="ident" id="2395891"><a href="/sort/sort.go.html#2395594">m</a></span><span class="op" id="2395892">,</span>&nbsp;<span class="ident" id="2395894"><a href="/sort/sort.go.html#2395663">n</a></span><span class="op" id="2395895">-</span><span class="num" id="2395896">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395900">for</span>&nbsp;<span class="ident" id="2395904"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395910">&lt;</span>&nbsp;<span class="ident" id="2395912"><a href="/sort/sort.go.html#2395883">r</a></span>&nbsp;<span class="op" id="2395914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395919">c</span>&nbsp;<span class="op" id="2395921">:=</span>&nbsp;<span class="ident" id="2395924"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395930">+</span>&nbsp;<span class="op" id="2395932">(</span><span class="ident" id="2395933"><a href="/sort/sort.go.html#2395883">r</a></span><span class="op" id="2395934">-</span><span class="ident" id="2395935"><a href="/sort/sort.go.html#2395677">start</a></span><span class="op" id="2395940">)</span><span class="op" id="2395941">/</span><span class="num" id="2395942">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2395947">if</span>&nbsp;<span class="op" id="2395950">!</span><span class="ident" id="2395951"><a href="/sort/sort.go.html#2395575">data</a></span><span class="op" id="2395955">.</span><span class="ident" id="2395956">Less</span><span class="op" id="2395960">(</span><span class="ident" id="2395961"><a href="/sort/sort.go.html#2395886">p</a></span><span class="op" id="2395962">-</span><span class="ident" id="2395963"><a href="/sort/sort.go.html#2395919">c</a></span><span class="op" id="2395964">,</span>&nbsp;<span class="ident" id="2395966"><a href="/sort/sort.go.html#2395919">c</a></span><span class="op" id="2395967">)</span>&nbsp;<span class="op" id="2395969">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2395975"><a href="/sort/sort.go.html#2395677">start</a></span>&nbsp;<span class="op" id="2395981">=</span>&nbsp;<span class="ident" id="2395983"><a href="/sort/sort.go.html#2395919">c</a></span>&nbsp;<span class="op" id="2395985">+</span>&nbsp;<span class="num" id="2395987">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2395992">}</span>&nbsp;<span class="keyword" id="2395994">else</span>&nbsp;<span class="op" id="2395999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396005"><a href="/sort/sort.go.html#2395883">r</a></span>&nbsp;<span class="op" id="2396007">=</span>&nbsp;<span class="ident" id="2396009"><a href="/sort/sort.go.html#2395919">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396018">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396024">end</span>&nbsp;<span class="op" id="2396028">:=</span>&nbsp;<span class="ident" id="2396031"><a href="/sort/sort.go.html#2395663">n</a></span>&nbsp;<span class="op" id="2396033">-</span>&nbsp;<span class="ident" id="2396035"><a href="/sort/sort.go.html#2395677">start</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396042"><a href="/sort/sort.go.html#2396324">rotate</a></span><span class="op" id="2396048">(</span><span class="ident" id="2396049"><a href="/sort/sort.go.html#2395575">data</a></span><span class="op" id="2396053">,</span>&nbsp;<span class="ident" id="2396055"><a href="/sort/sort.go.html#2395677">start</a></span><span class="op" id="2396060">,</span>&nbsp;<span class="ident" id="2396062"><a href="/sort/sort.go.html#2395594">m</a></span><span class="op" id="2396063">,</span>&nbsp;<span class="ident" id="2396065"><a href="/sort/sort.go.html#2396024">end</a></span><span class="op" id="2396068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396071"><a href="/sort/sort.go.html#2395566">symMerge</a></span><span class="op" id="2396079">(</span><span class="ident" id="2396080"><a href="/sort/sort.go.html#2395575">data</a></span><span class="op" id="2396084">,</span>&nbsp;<span class="ident" id="2396086"><a href="/sort/sort.go.html#2395591">a</a></span><span class="op" id="2396087">,</span>&nbsp;<span class="ident" id="2396089"><a href="/sort/sort.go.html#2395677">start</a></span><span class="op" id="2396094">,</span>&nbsp;<span class="ident" id="2396096"><a href="/sort/sort.go.html#2395643">mid</a></span><span class="op" id="2396099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396102"><a href="/sort/sort.go.html#2395566">symMerge</a></span><span class="op" id="2396110">(</span><span class="ident" id="2396111"><a href="/sort/sort.go.html#2395575">data</a></span><span class="op" id="2396115">,</span>&nbsp;<span class="ident" id="2396117"><a href="/sort/sort.go.html#2395643">mid</a></span><span class="op" id="2396120">,</span>&nbsp;<span class="ident" id="2396122"><a href="/sort/sort.go.html#2396024">end</a></span><span class="op" id="2396125">,</span>&nbsp;<span class="ident" id="2396127"><a href="/sort/sort.go.html#2395597">b</a></span><span class="op" id="2396128">)</span><br>
<span class="lineno">390</span><span class="op" id="2396130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2396133">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2396208">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2396263">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2396319">func</span>&nbsp;<span class="ident" id="2396324">rotate</span><span class="op" id="2396330">(</span><span class="ident" id="2396331">data</span>&nbsp;<span class="ident" id="2396336"><a href="/sort/sort.go.html#2385681">Interface</a></span><span class="op" id="2396345">,</span>&nbsp;<span class="ident" id="2396347">a</span><span class="op" id="2396348">,</span>&nbsp;<span class="ident" id="2396350">m</span><span class="op" id="2396351">,</span>&nbsp;<span class="ident" id="2396353">b</span>&nbsp;<span class="builtintype" id="2396355">int</span><span class="op" id="2396358">)</span>&nbsp;<span class="op" id="2396360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396363">i</span>&nbsp;<span class="op" id="2396365">:=</span>&nbsp;<span class="ident" id="2396368"><a href="/sort/sort.go.html#2396350">m</a></span>&nbsp;<span class="op" id="2396370">-</span>&nbsp;<span class="ident" id="2396372"><a href="/sort/sort.go.html#2396347">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396375">if</span>&nbsp;<span class="ident" id="2396378"><a href="/sort/sort.go.html#2396363">i</a></span>&nbsp;<span class="op" id="2396380">==</span>&nbsp;<span class="num" id="2396383">0</span>&nbsp;<span class="op" id="2396385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396389">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396397">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396400">j</span>&nbsp;<span class="op" id="2396402">:=</span>&nbsp;<span class="ident" id="2396405"><a href="/sort/sort.go.html#2396353">b</a></span>&nbsp;<span class="op" id="2396407">-</span>&nbsp;<span class="ident" id="2396409"><a href="/sort/sort.go.html#2396350">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396412">if</span>&nbsp;<span class="ident" id="2396415"><a href="/sort/sort.go.html#2396400">j</a></span>&nbsp;<span class="op" id="2396417">==</span>&nbsp;<span class="num" id="2396420">0</span>&nbsp;<span class="op" id="2396422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396426">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396438">if</span>&nbsp;<span class="ident" id="2396441"><a href="/sort/sort.go.html#2396363">i</a></span>&nbsp;<span class="op" id="2396443">==</span>&nbsp;<span class="ident" id="2396446"><a href="/sort/sort.go.html#2396400">j</a></span>&nbsp;<span class="op" id="2396448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396452"><a href="/sort/sort.go.html#2387473">swapRange</a></span><span class="op" id="2396461">(</span><span class="ident" id="2396462"><a href="/sort/sort.go.html#2396331">data</a></span><span class="op" id="2396466">,</span>&nbsp;<span class="ident" id="2396468"><a href="/sort/sort.go.html#2396347">a</a></span><span class="op" id="2396469">,</span>&nbsp;<span class="ident" id="2396471"><a href="/sort/sort.go.html#2396350">m</a></span><span class="op" id="2396472">,</span>&nbsp;<span class="ident" id="2396474"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396491">p</span>&nbsp;<span class="op" id="2396493">:=</span>&nbsp;<span class="ident" id="2396496"><a href="/sort/sort.go.html#2396347">a</a></span>&nbsp;<span class="op" id="2396498">+</span>&nbsp;<span class="ident" id="2396500"><a href="/sort/sort.go.html#2396363">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396503">for</span>&nbsp;<span class="ident" id="2396507"><a href="/sort/sort.go.html#2396363">i</a></span>&nbsp;<span class="op" id="2396509">!=</span>&nbsp;<span class="ident" id="2396512"><a href="/sort/sort.go.html#2396400">j</a></span>&nbsp;<span class="op" id="2396514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2396518">if</span>&nbsp;<span class="ident" id="2396521"><a href="/sort/sort.go.html#2396363">i</a></span>&nbsp;<span class="op" id="2396523">&gt;</span>&nbsp;<span class="ident" id="2396525"><a href="/sort/sort.go.html#2396400">j</a></span>&nbsp;<span class="op" id="2396527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396532"><a href="/sort/sort.go.html#2387473">swapRange</a></span><span class="op" id="2396541">(</span><span class="ident" id="2396542"><a href="/sort/sort.go.html#2396331">data</a></span><span class="op" id="2396546">,</span>&nbsp;<span class="ident" id="2396548"><a href="/sort/sort.go.html#2396491">p</a></span><span class="op" id="2396549">-</span><span class="ident" id="2396550"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396551">,</span>&nbsp;<span class="ident" id="2396553"><a href="/sort/sort.go.html#2396491">p</a></span><span class="op" id="2396554">,</span>&nbsp;<span class="ident" id="2396556"><a href="/sort/sort.go.html#2396400">j</a></span><span class="op" id="2396557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396562"><a href="/sort/sort.go.html#2396363">i</a></span>&nbsp;<span class="op" id="2396564">-=</span>&nbsp;<span class="ident" id="2396567"><a href="/sort/sort.go.html#2396400">j</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396571">}</span>&nbsp;<span class="keyword" id="2396573">else</span>&nbsp;<span class="op" id="2396578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396583"><a href="/sort/sort.go.html#2387473">swapRange</a></span><span class="op" id="2396592">(</span><span class="ident" id="2396593"><a href="/sort/sort.go.html#2396331">data</a></span><span class="op" id="2396597">,</span>&nbsp;<span class="ident" id="2396599"><a href="/sort/sort.go.html#2396491">p</a></span><span class="op" id="2396600">-</span><span class="ident" id="2396601"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396602">,</span>&nbsp;<span class="ident" id="2396604"><a href="/sort/sort.go.html#2396491">p</a></span><span class="op" id="2396605">+</span><span class="ident" id="2396606"><a href="/sort/sort.go.html#2396400">j</a></span><span class="op" id="2396607">-</span><span class="ident" id="2396608"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396609">,</span>&nbsp;<span class="ident" id="2396611"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396617"><a href="/sort/sort.go.html#2396400">j</a></span>&nbsp;<span class="op" id="2396619">-=</span>&nbsp;<span class="ident" id="2396622"><a href="/sort/sort.go.html#2396363">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2396629">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2396632"><a href="/sort/sort.go.html#2387473">swapRange</a></span><span class="op" id="2396641">(</span><span class="ident" id="2396642"><a href="/sort/sort.go.html#2396331">data</a></span><span class="op" id="2396646">,</span>&nbsp;<span class="ident" id="2396648"><a href="/sort/sort.go.html#2396491">p</a></span><span class="op" id="2396649">-</span><span class="ident" id="2396650"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396651">,</span>&nbsp;<span class="ident" id="2396653"><a href="/sort/sort.go.html#2396491">p</a></span><span class="op" id="2396654">,</span>&nbsp;<span class="ident" id="2396656"><a href="/sort/sort.go.html#2396363">i</a></span><span class="op" id="2396657">)</span><br>
<span class="lineno"></span><span class="op" id="2396659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2396662">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
