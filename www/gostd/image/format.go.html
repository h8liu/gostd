<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html" class="current">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5503614">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5503669">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5503723">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5503774">package</span>&nbsp;<span class="ident" id="5503782">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5503789">import</span>&nbsp;<span class="op" id="5503796">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503799">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503808">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503818">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5503823">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5503826">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5503894">var</span>&nbsp;<span class="ident" id="5503898">ErrFormat</span>&nbsp;<span class="op" id="5503908">=</span>&nbsp;<span class="ident" id="5503910">errors</span><span class="op" id="5503916">.</span><span class="ident" id="5503917">New</span><span class="op" id="5503920">(</span><span class="string" id="5503921">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5503944">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5503947">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5504024">type</span>&nbsp;<span class="ident" id="5504029">format</span>&nbsp;<span class="keyword" id="5504036">struct</span>&nbsp;<span class="op" id="5504043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504046">name</span><span class="op" id="5504050">,</span>&nbsp;<span class="ident" id="5504052">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5504059">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504067">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5504080">func</span><span class="op" id="5504084">(</span><span class="ident" id="5504085">io</span><span class="op" id="5504087">.</span><span class="ident" id="5504088">Reader</span><span class="op" id="5504094">)</span>&nbsp;<span class="op" id="5504096">(</span><span class="ident" id="5504097">Image</span><span class="op" id="5504102">,</span>&nbsp;<span class="builtintype" id="5504104">error</span><span class="op" id="5504109">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504112">decodeConfig</span>&nbsp;<span class="keyword" id="5504125">func</span><span class="op" id="5504129">(</span><span class="ident" id="5504130">io</span><span class="op" id="5504132">.</span><span class="ident" id="5504133">Reader</span><span class="op" id="5504139">)</span>&nbsp;<span class="op" id="5504141">(</span><span class="ident" id="5504142">Config</span><span class="op" id="5504148">,</span>&nbsp;<span class="builtintype" id="5504150">error</span><span class="op" id="5504155">)</span><br>
<span class="lineno"></span><span class="op" id="5504157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5504160">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5504206">var</span>&nbsp;<span class="ident" id="5504210">formats</span>&nbsp;<span class="op" id="5504218">[</span><span class="op" id="5504219">]</span><span class="ident" id="5504220">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5504228">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5504291">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5504348">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5504426">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5504492">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5504550">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5504619">func</span>&nbsp;<span class="ident" id="5504624">RegisterFormat</span><span class="op" id="5504638">(</span><span class="ident" id="5504639">name</span><span class="op" id="5504643">,</span>&nbsp;<span class="ident" id="5504645">magic</span>&nbsp;<span class="builtintype" id="5504651">string</span><span class="op" id="5504657">,</span>&nbsp;<span class="ident" id="5504659">decode</span>&nbsp;<span class="keyword" id="5504666">func</span><span class="op" id="5504670">(</span><span class="ident" id="5504671">io</span><span class="op" id="5504673">.</span><span class="ident" id="5504674">Reader</span><span class="op" id="5504680">)</span>&nbsp;<span class="op" id="5504682">(</span><span class="ident" id="5504683">Image</span><span class="op" id="5504688">,</span>&nbsp;<span class="builtintype" id="5504690">error</span><span class="op" id="5504695">)</span><span class="op" id="5504696">,</span>&nbsp;<span class="ident" id="5504698">decodeConfig</span>&nbsp;<span class="keyword" id="5504711">func</span><span class="op" id="5504715">(</span><span class="ident" id="5504716">io</span><span class="op" id="5504718">.</span><span class="ident" id="5504719">Reader</span><span class="op" id="5504725">)</span>&nbsp;<span class="op" id="5504727">(</span><span class="ident" id="5504728">Config</span><span class="op" id="5504734">,</span>&nbsp;<span class="builtintype" id="5504736">error</span><span class="op" id="5504741">)</span><span class="op" id="5504742">)</span>&nbsp;<span class="op" id="5504744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504747">formats</span>&nbsp;<span class="op" id="5504755">=</span>&nbsp;<span class="builtinfunc" id="5504757">append</span><span class="op" id="5504763">(</span><span class="ident" id="5504764">formats</span><span class="op" id="5504771">,</span>&nbsp;<span class="ident" id="5504773">format</span><span class="op" id="5504779">{</span><span class="ident" id="5504780">name</span><span class="op" id="5504784">,</span>&nbsp;<span class="ident" id="5504786">magic</span><span class="op" id="5504791">,</span>&nbsp;<span class="ident" id="5504793">decode</span><span class="op" id="5504799">,</span>&nbsp;<span class="ident" id="5504801">decodeConfig</span><span class="op" id="5504813">}</span><span class="op" id="5504814">)</span><br>
<span class="lineno"></span><span class="op" id="5504816">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5504819">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5504873">type</span>&nbsp;<span class="ident" id="5504878">reader</span>&nbsp;<span class="keyword" id="5504885">interface</span>&nbsp;<span class="op" id="5504895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504898">io</span><span class="op" id="5504900">.</span><span class="ident" id="5504901">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504909">Peek</span><span class="op" id="5504913">(</span><span class="builtintype" id="5504914">int</span><span class="op" id="5504917">)</span>&nbsp;<span class="op" id="5504919">(</span><span class="op" id="5504920">[</span><span class="op" id="5504921">]</span><span class="builtintype" id="5504922">byte</span><span class="op" id="5504926">,</span>&nbsp;<span class="builtintype" id="5504928">error</span><span class="op" id="5504933">)</span><br>
<span class="lineno">40</span><span class="op" id="5504935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5504938">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5504985">func</span>&nbsp;<span class="ident" id="5504990">asReader</span><span class="op" id="5504998">(</span><span class="ident" id="5504999">r</span>&nbsp;<span class="ident" id="5505001">io</span><span class="op" id="5505003">.</span><span class="ident" id="5505004">Reader</span><span class="op" id="5505010">)</span>&nbsp;<span class="ident" id="5505012">reader</span>&nbsp;<span class="op" id="5505019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505022">if</span>&nbsp;<span class="ident" id="5505025">rr</span><span class="op" id="5505027">,</span>&nbsp;<span class="ident" id="5505029">ok</span>&nbsp;<span class="op" id="5505032">:=</span>&nbsp;<span class="ident" id="5505035">r</span><span class="op" id="5505036">.</span><span class="op" id="5505037">(</span><span class="ident" id="5505038">reader</span><span class="op" id="5505044">)</span><span class="op" id="5505045">;</span>&nbsp;<span class="ident" id="5505047">ok</span>&nbsp;<span class="op" id="5505050">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505054">return</span>&nbsp;<span class="ident" id="5505061">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505068">return</span>&nbsp;<span class="ident" id="5505075">bufio</span><span class="op" id="5505080">.</span><span class="ident" id="5505081">NewReader</span><span class="op" id="5505090">(</span><span class="ident" id="5505091">r</span><span class="op" id="5505092">)</span><br>
<span class="lineno"></span><span class="op" id="5505094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5505097">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5505172">func</span>&nbsp;<span class="ident" id="5505177">match</span><span class="op" id="5505182">(</span><span class="ident" id="5505183">magic</span>&nbsp;<span class="builtintype" id="5505189">string</span><span class="op" id="5505195">,</span>&nbsp;<span class="ident" id="5505197">b</span>&nbsp;<span class="op" id="5505199">[</span><span class="op" id="5505200">]</span><span class="builtintype" id="5505201">byte</span><span class="op" id="5505205">)</span>&nbsp;<span class="builtintype" id="5505207">bool</span>&nbsp;<span class="op" id="5505212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505215">if</span>&nbsp;<span class="builtinfunc" id="5505218">len</span><span class="op" id="5505221">(</span><span class="ident" id="5505222">magic</span><span class="op" id="5505227">)</span>&nbsp;<span class="op" id="5505229">!=</span>&nbsp;<span class="builtinfunc" id="5505232">len</span><span class="op" id="5505235">(</span><span class="ident" id="5505236">b</span><span class="op" id="5505237">)</span>&nbsp;<span class="op" id="5505239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505243">return</span>&nbsp;<span class="builtintype" id="5505250">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505257">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505260">for</span>&nbsp;<span class="ident" id="5505264">i</span><span class="op" id="5505265">,</span>&nbsp;<span class="ident" id="5505267">c</span>&nbsp;<span class="op" id="5505269">:=</span>&nbsp;<span class="keyword" id="5505272">range</span>&nbsp;<span class="ident" id="5505278">b</span>&nbsp;<span class="op" id="5505280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505284">if</span>&nbsp;<span class="ident" id="5505287">magic</span><span class="op" id="5505292">[</span><span class="ident" id="5505293">i</span><span class="op" id="5505294">]</span>&nbsp;<span class="op" id="5505296">!=</span>&nbsp;<span class="ident" id="5505299">c</span>&nbsp;<span class="op" id="5505301">&amp;&amp;</span>&nbsp;<span class="ident" id="5505304">magic</span><span class="op" id="5505309">[</span><span class="ident" id="5505310">i</span><span class="op" id="5505311">]</span>&nbsp;<span class="op" id="5505313">!=</span>&nbsp;<span class="string" id="5505316">&#39;?&#39;</span>&nbsp;<span class="op" id="5505320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505325">return</span>&nbsp;<span class="builtintype" id="5505332">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505343">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505346">return</span>&nbsp;<span class="builtintype" id="5505353">true</span><br>
<span class="lineno"></span><span class="op" id="5505358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5505361">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5505405">func</span>&nbsp;<span class="ident" id="5505410">sniff</span><span class="op" id="5505415">(</span><span class="ident" id="5505416">r</span>&nbsp;<span class="ident" id="5505418">reader</span><span class="op" id="5505424">)</span>&nbsp;<span class="ident" id="5505426">format</span>&nbsp;<span class="op" id="5505433">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505436">for</span>&nbsp;<span class="ident" id="5505440">_</span><span class="op" id="5505441">,</span>&nbsp;<span class="ident" id="5505443">f</span>&nbsp;<span class="op" id="5505445">:=</span>&nbsp;<span class="keyword" id="5505448">range</span>&nbsp;<span class="ident" id="5505454">formats</span>&nbsp;<span class="op" id="5505462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505466">b</span><span class="op" id="5505467">,</span>&nbsp;<span class="ident" id="5505469">err</span>&nbsp;<span class="op" id="5505473">:=</span>&nbsp;<span class="ident" id="5505476">r</span><span class="op" id="5505477">.</span><span class="ident" id="5505478">Peek</span><span class="op" id="5505482">(</span><span class="builtinfunc" id="5505483">len</span><span class="op" id="5505486">(</span><span class="ident" id="5505487">f</span><span class="op" id="5505488">.</span><span class="ident" id="5505489">magic</span><span class="op" id="5505494">)</span><span class="op" id="5505495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505499">if</span>&nbsp;<span class="ident" id="5505502">err</span>&nbsp;<span class="op" id="5505506">==</span>&nbsp;<span class="ident" id="5505509">nil</span>&nbsp;<span class="op" id="5505513">&amp;&amp;</span>&nbsp;<span class="ident" id="5505516">match</span><span class="op" id="5505521">(</span><span class="ident" id="5505522">f</span><span class="op" id="5505523">.</span><span class="ident" id="5505524">magic</span><span class="op" id="5505529">,</span>&nbsp;<span class="ident" id="5505531">b</span><span class="op" id="5505532">)</span>&nbsp;<span class="op" id="5505534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505539">return</span>&nbsp;<span class="ident" id="5505546">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505550">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505556">return</span>&nbsp;<span class="ident" id="5505563">format</span><span class="op" id="5505569">{</span><span class="op" id="5505570">}</span><br>
<span class="lineno"></span><span class="op" id="5505572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5505575">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5505648">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5505723">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5505798">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5505819">func</span>&nbsp;<span class="ident" id="5505824">Decode</span><span class="op" id="5505830">(</span><span class="ident" id="5505831">r</span>&nbsp;<span class="ident" id="5505833">io</span><span class="op" id="5505835">.</span><span class="ident" id="5505836">Reader</span><span class="op" id="5505842">)</span>&nbsp;<span class="op" id="5505844">(</span><span class="ident" id="5505845">Image</span><span class="op" id="5505850">,</span>&nbsp;<span class="builtintype" id="5505852">string</span><span class="op" id="5505858">,</span>&nbsp;<span class="builtintype" id="5505860">error</span><span class="op" id="5505865">)</span>&nbsp;<span class="op" id="5505867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505870">rr</span>&nbsp;<span class="op" id="5505873">:=</span>&nbsp;<span class="ident" id="5505876">asReader</span><span class="op" id="5505884">(</span><span class="ident" id="5505885">r</span><span class="op" id="5505886">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505889">f</span>&nbsp;<span class="op" id="5505891">:=</span>&nbsp;<span class="ident" id="5505894">sniff</span><span class="op" id="5505899">(</span><span class="ident" id="5505900">rr</span><span class="op" id="5505902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505905">if</span>&nbsp;<span class="ident" id="5505908">f</span><span class="op" id="5505909">.</span><span class="ident" id="5505910">decode</span>&nbsp;<span class="op" id="5505917">==</span>&nbsp;<span class="ident" id="5505920">nil</span>&nbsp;<span class="op" id="5505924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505928">return</span>&nbsp;<span class="ident" id="5505935">nil</span><span class="op" id="5505938">,</span>&nbsp;<span class="string" id="5505940">&#34;&#34;</span><span class="op" id="5505942">,</span>&nbsp;<span class="ident" id="5505944">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505958">m</span><span class="op" id="5505959">,</span>&nbsp;<span class="ident" id="5505961">err</span>&nbsp;<span class="op" id="5505965">:=</span>&nbsp;<span class="ident" id="5505968">f</span><span class="op" id="5505969">.</span><span class="ident" id="5505970">decode</span><span class="op" id="5505976">(</span><span class="ident" id="5505977">rr</span><span class="op" id="5505979">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505982">return</span>&nbsp;<span class="ident" id="5505989">m</span><span class="op" id="5505990">,</span>&nbsp;<span class="ident" id="5505992">f</span><span class="op" id="5505993">.</span><span class="ident" id="5505994">name</span><span class="op" id="5505998">,</span>&nbsp;<span class="ident" id="5506000">err</span><br>
<span class="lineno"></span><span class="op" id="5506004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5506007">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5506083">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5506162">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5506239">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5506290">func</span>&nbsp;<span class="ident" id="5506295">DecodeConfig</span><span class="op" id="5506307">(</span><span class="ident" id="5506308">r</span>&nbsp;<span class="ident" id="5506310">io</span><span class="op" id="5506312">.</span><span class="ident" id="5506313">Reader</span><span class="op" id="5506319">)</span>&nbsp;<span class="op" id="5506321">(</span><span class="ident" id="5506322">Config</span><span class="op" id="5506328">,</span>&nbsp;<span class="builtintype" id="5506330">string</span><span class="op" id="5506336">,</span>&nbsp;<span class="builtintype" id="5506338">error</span><span class="op" id="5506343">)</span>&nbsp;<span class="op" id="5506345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506348">rr</span>&nbsp;<span class="op" id="5506351">:=</span>&nbsp;<span class="ident" id="5506354">asReader</span><span class="op" id="5506362">(</span><span class="ident" id="5506363">r</span><span class="op" id="5506364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506367">f</span>&nbsp;<span class="op" id="5506369">:=</span>&nbsp;<span class="ident" id="5506372">sniff</span><span class="op" id="5506377">(</span><span class="ident" id="5506378">rr</span><span class="op" id="5506380">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506383">if</span>&nbsp;<span class="ident" id="5506386">f</span><span class="op" id="5506387">.</span><span class="ident" id="5506388">decodeConfig</span>&nbsp;<span class="op" id="5506401">==</span>&nbsp;<span class="ident" id="5506404">nil</span>&nbsp;<span class="op" id="5506408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506412">return</span>&nbsp;<span class="ident" id="5506419">Config</span><span class="op" id="5506425">{</span><span class="op" id="5506426">}</span><span class="op" id="5506427">,</span>&nbsp;<span class="string" id="5506429">&#34;&#34;</span><span class="op" id="5506431">,</span>&nbsp;<span class="ident" id="5506433">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5506444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506447">c</span><span class="op" id="5506448">,</span>&nbsp;<span class="ident" id="5506450">err</span>&nbsp;<span class="op" id="5506454">:=</span>&nbsp;<span class="ident" id="5506457">f</span><span class="op" id="5506458">.</span><span class="ident" id="5506459">decodeConfig</span><span class="op" id="5506471">(</span><span class="ident" id="5506472">rr</span><span class="op" id="5506474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506477">return</span>&nbsp;<span class="ident" id="5506484">c</span><span class="op" id="5506485">,</span>&nbsp;<span class="ident" id="5506487">f</span><span class="op" id="5506488">.</span><span class="ident" id="5506489">name</span><span class="op" id="5506493">,</span>&nbsp;<span class="ident" id="5506495">err</span><br>
<span class="lineno">100</span><span class="op" id="5506499">}</span>
</div>
</body>
</html>
