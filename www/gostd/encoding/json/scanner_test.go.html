<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6820734">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6820790">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6820844">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6820895">package</span>&nbsp;<span class="ident" id="6820903">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6820909">import</span>&nbsp;<span class="op" id="6820916">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6820919">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6820928">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6820936">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6820949">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6820960">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6820970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6820973">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6821003">type</span>&nbsp;<span class="ident" id="6821008">example</span>&nbsp;<span class="keyword" id="6821016">struct</span>&nbsp;<span class="op" id="6821023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821026">compact</span>&nbsp;<span class="builtintype" id="6821034">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821042">indent</span>&nbsp;&nbsp;<span class="builtintype" id="6821050">string</span><br>
<span class="lineno">20</span><span class="op" id="6821057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6821060">var</span>&nbsp;<span class="ident" id="6821064">examples</span>&nbsp;<span class="op" id="6821073">=</span>&nbsp;<span class="op" id="6821075">[</span><span class="op" id="6821076">]</span><span class="ident" id="6821077">example</span><span class="op" id="6821084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821087">{</span><span class="string" id="6821088">`1`</span><span class="op" id="6821091">,</span>&nbsp;<span class="string" id="6821093">`1`</span><span class="op" id="6821096">}</span><span class="op" id="6821097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821100">{</span><span class="string" id="6821101">`{}`</span><span class="op" id="6821105">,</span>&nbsp;<span class="string" id="6821107">`{}`</span><span class="op" id="6821111">}</span><span class="op" id="6821112">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821115">{</span><span class="string" id="6821116">`[]`</span><span class="op" id="6821120">,</span>&nbsp;<span class="string" id="6821122">`[]`</span><span class="op" id="6821126">}</span><span class="op" id="6821127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821130">{</span><span class="string" id="6821131">`{&#34;&#34;:2}`</span><span class="op" id="6821139">,</span>&nbsp;<span class="string" id="6821141">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="6821158">}</span><span class="op" id="6821159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821162">{</span><span class="string" id="6821163">`[3]`</span><span class="op" id="6821168">,</span>&nbsp;<span class="string" id="6821170">&#34;[\n\t3\n]&#34;</span><span class="op" id="6821181">}</span><span class="op" id="6821182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821185">{</span><span class="string" id="6821186">`[1,2,3]`</span><span class="op" id="6821195">,</span>&nbsp;<span class="string" id="6821197">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="6821220">}</span><span class="op" id="6821221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821224">{</span><span class="string" id="6821225">`{&#34;x&#34;:1}`</span><span class="op" id="6821234">,</span>&nbsp;<span class="string" id="6821236">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="6821254">}</span><span class="op" id="6821255">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821258">{</span><span class="ident" id="6821259">ex1</span><span class="op" id="6821262">,</span>&nbsp;<span class="ident" id="6821264">ex1i</span><span class="op" id="6821268">}</span><span class="op" id="6821269">,</span><br>
<span class="lineno"></span><span class="op" id="6821271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6821274">var</span>&nbsp;<span class="ident" id="6821278">ex1</span>&nbsp;<span class="op" id="6821282">=</span>&nbsp;<span class="string" id="6821284">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6821323">var</span>&nbsp;<span class="ident" id="6821327">ex1i</span>&nbsp;<span class="op" id="6821332">=</span>&nbsp;<span class="string" id="6821334">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6821390">func</span>&nbsp;<span class="ident" id="6821395">TestCompact</span><span class="op" id="6821406">(</span><span class="ident" id="6821407">t</span>&nbsp;<span class="op" id="6821409">*</span><span class="ident" id="6821410">testing</span><span class="op" id="6821417">.</span><span class="ident" id="6821418">T</span><span class="op" id="6821419">)</span>&nbsp;<span class="op" id="6821421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6821424">var</span>&nbsp;<span class="ident" id="6821428">buf</span>&nbsp;<span class="ident" id="6821432">bytes</span><span class="op" id="6821437">.</span><span class="ident" id="6821438">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6821446">for</span>&nbsp;<span class="ident" id="6821450">_</span><span class="op" id="6821451">,</span>&nbsp;<span class="ident" id="6821453">tt</span>&nbsp;<span class="op" id="6821456">:=</span>&nbsp;<span class="keyword" id="6821459">range</span>&nbsp;<span class="ident" id="6821465">examples</span>&nbsp;<span class="op" id="6821474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821478">buf</span><span class="op" id="6821481">.</span><span class="ident" id="6821482">Reset</span><span class="op" id="6821487">(</span><span class="op" id="6821488">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6821492">if</span>&nbsp;<span class="ident" id="6821495">err</span>&nbsp;<span class="op" id="6821499">:=</span>&nbsp;<span class="ident" id="6821502">Compact</span><span class="op" id="6821509">(</span><span class="op" id="6821510">&amp;</span><span class="ident" id="6821511">buf</span><span class="op" id="6821514">,</span>&nbsp;<span class="op" id="6821516">[</span><span class="op" id="6821517">]</span><span class="builtintype" id="6821518">byte</span><span class="op" id="6821522">(</span><span class="ident" id="6821523">tt</span><span class="op" id="6821525">.</span><span class="ident" id="6821526">compact</span><span class="op" id="6821533">)</span><span class="op" id="6821534">)</span><span class="op" id="6821535">;</span>&nbsp;<span class="ident" id="6821537">err</span>&nbsp;<span class="op" id="6821541">!=</span>&nbsp;<span class="ident" id="6821544">nil</span>&nbsp;<span class="op" id="6821548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821553">t</span><span class="op" id="6821554">.</span><span class="ident" id="6821555">Errorf</span><span class="op" id="6821561">(</span><span class="string" id="6821562">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6821580">,</span>&nbsp;<span class="ident" id="6821582">tt</span><span class="op" id="6821584">.</span><span class="ident" id="6821585">compact</span><span class="op" id="6821592">,</span>&nbsp;<span class="ident" id="6821594">err</span><span class="op" id="6821597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821601">}</span>&nbsp;<span class="keyword" id="6821603">else</span>&nbsp;<span class="keyword" id="6821608">if</span>&nbsp;<span class="ident" id="6821611">s</span>&nbsp;<span class="op" id="6821613">:=</span>&nbsp;<span class="ident" id="6821616">buf</span><span class="op" id="6821619">.</span><span class="ident" id="6821620">String</span><span class="op" id="6821626">(</span><span class="op" id="6821627">)</span><span class="op" id="6821628">;</span>&nbsp;<span class="ident" id="6821630">s</span>&nbsp;<span class="op" id="6821632">!=</span>&nbsp;<span class="ident" id="6821635">tt</span><span class="op" id="6821637">.</span><span class="ident" id="6821638">compact</span>&nbsp;<span class="op" id="6821646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821651">t</span><span class="op" id="6821652">.</span><span class="ident" id="6821653">Errorf</span><span class="op" id="6821659">(</span><span class="string" id="6821660">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6821695">,</span>&nbsp;<span class="ident" id="6821697">tt</span><span class="op" id="6821699">.</span><span class="ident" id="6821700">compact</span><span class="op" id="6821707">,</span>&nbsp;<span class="ident" id="6821709">s</span><span class="op" id="6821710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821714">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821719">buf</span><span class="op" id="6821722">.</span><span class="ident" id="6821723">Reset</span><span class="op" id="6821728">(</span><span class="op" id="6821729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6821733">if</span>&nbsp;<span class="ident" id="6821736">err</span>&nbsp;<span class="op" id="6821740">:=</span>&nbsp;<span class="ident" id="6821743">Compact</span><span class="op" id="6821750">(</span><span class="op" id="6821751">&amp;</span><span class="ident" id="6821752">buf</span><span class="op" id="6821755">,</span>&nbsp;<span class="op" id="6821757">[</span><span class="op" id="6821758">]</span><span class="builtintype" id="6821759">byte</span><span class="op" id="6821763">(</span><span class="ident" id="6821764">tt</span><span class="op" id="6821766">.</span><span class="ident" id="6821767">indent</span><span class="op" id="6821773">)</span><span class="op" id="6821774">)</span><span class="op" id="6821775">;</span>&nbsp;<span class="ident" id="6821777">err</span>&nbsp;<span class="op" id="6821781">!=</span>&nbsp;<span class="ident" id="6821784">nil</span>&nbsp;<span class="op" id="6821788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821793">t</span><span class="op" id="6821794">.</span><span class="ident" id="6821795">Errorf</span><span class="op" id="6821801">(</span><span class="string" id="6821802">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="6821820">,</span>&nbsp;<span class="ident" id="6821822">tt</span><span class="op" id="6821824">.</span><span class="ident" id="6821825">indent</span><span class="op" id="6821831">,</span>&nbsp;<span class="ident" id="6821833">err</span><span class="op" id="6821836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6821841">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821852">}</span>&nbsp;<span class="keyword" id="6821854">else</span>&nbsp;<span class="keyword" id="6821859">if</span>&nbsp;<span class="ident" id="6821862">s</span>&nbsp;<span class="op" id="6821864">:=</span>&nbsp;<span class="ident" id="6821867">buf</span><span class="op" id="6821870">.</span><span class="ident" id="6821871">String</span><span class="op" id="6821877">(</span><span class="op" id="6821878">)</span><span class="op" id="6821879">;</span>&nbsp;<span class="ident" id="6821881">s</span>&nbsp;<span class="op" id="6821883">!=</span>&nbsp;<span class="ident" id="6821886">tt</span><span class="op" id="6821888">.</span><span class="ident" id="6821889">compact</span>&nbsp;<span class="op" id="6821897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6821902">t</span><span class="op" id="6821903">.</span><span class="ident" id="6821904">Errorf</span><span class="op" id="6821910">(</span><span class="string" id="6821911">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6821941">,</span>&nbsp;<span class="ident" id="6821943">tt</span><span class="op" id="6821945">.</span><span class="ident" id="6821946">indent</span><span class="op" id="6821952">,</span>&nbsp;<span class="ident" id="6821954">s</span><span class="op" id="6821955">,</span>&nbsp;<span class="ident" id="6821957">tt</span><span class="op" id="6821959">.</span><span class="ident" id="6821960">compact</span><span class="op" id="6821967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6821974">}</span><br>
<span class="lineno"></span><span class="op" id="6821976">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6821979">func</span>&nbsp;<span class="ident" id="6821984">TestCompactSeparators</span><span class="op" id="6822005">(</span><span class="ident" id="6822006">t</span>&nbsp;<span class="op" id="6822008">*</span><span class="ident" id="6822009">testing</span><span class="op" id="6822016">.</span><span class="ident" id="6822017">T</span><span class="op" id="6822018">)</span>&nbsp;<span class="op" id="6822020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6822023">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6822079">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822123">tests</span>&nbsp;<span class="op" id="6822129">:=</span>&nbsp;<span class="op" id="6822132">[</span><span class="op" id="6822133">]</span><span class="keyword" id="6822134">struct</span>&nbsp;<span class="op" id="6822141">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822145">in</span><span class="op" id="6822147">,</span>&nbsp;<span class="ident" id="6822149">compact</span>&nbsp;<span class="builtintype" id="6822157">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822165">}</span><span class="op" id="6822166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822170">{</span><span class="string" id="6822171">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="6822188">,</span>&nbsp;<span class="string" id="6822190">`{&#34;\u2028&#34;:1}`</span><span class="op" id="6822204">}</span><span class="op" id="6822205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822209">{</span><span class="string" id="6822210">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="6822227">,</span>&nbsp;<span class="string" id="6822229">`{&#34;\u2029&#34;:2}`</span><span class="op" id="6822243">}</span><span class="op" id="6822244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822247">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822250">for</span>&nbsp;<span class="ident" id="6822254">_</span><span class="op" id="6822255">,</span>&nbsp;<span class="ident" id="6822257">tt</span>&nbsp;<span class="op" id="6822260">:=</span>&nbsp;<span class="keyword" id="6822263">range</span>&nbsp;<span class="ident" id="6822269">tests</span>&nbsp;<span class="op" id="6822275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822279">var</span>&nbsp;<span class="ident" id="6822283">buf</span>&nbsp;<span class="ident" id="6822287">bytes</span><span class="op" id="6822292">.</span><span class="ident" id="6822293">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822302">if</span>&nbsp;<span class="ident" id="6822305">err</span>&nbsp;<span class="op" id="6822309">:=</span>&nbsp;<span class="ident" id="6822312">Compact</span><span class="op" id="6822319">(</span><span class="op" id="6822320">&amp;</span><span class="ident" id="6822321">buf</span><span class="op" id="6822324">,</span>&nbsp;<span class="op" id="6822326">[</span><span class="op" id="6822327">]</span><span class="builtintype" id="6822328">byte</span><span class="op" id="6822332">(</span><span class="ident" id="6822333">tt</span><span class="op" id="6822335">.</span><span class="ident" id="6822336">in</span><span class="op" id="6822338">)</span><span class="op" id="6822339">)</span><span class="op" id="6822340">;</span>&nbsp;<span class="ident" id="6822342">err</span>&nbsp;<span class="op" id="6822346">!=</span>&nbsp;<span class="ident" id="6822349">nil</span>&nbsp;<span class="op" id="6822353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822358">t</span><span class="op" id="6822359">.</span><span class="ident" id="6822360">Errorf</span><span class="op" id="6822366">(</span><span class="string" id="6822367">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="6822384">,</span>&nbsp;<span class="ident" id="6822386">tt</span><span class="op" id="6822388">.</span><span class="ident" id="6822389">in</span><span class="op" id="6822391">,</span>&nbsp;<span class="ident" id="6822393">err</span><span class="op" id="6822396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822400">}</span>&nbsp;<span class="keyword" id="6822402">else</span>&nbsp;<span class="keyword" id="6822407">if</span>&nbsp;<span class="ident" id="6822410">s</span>&nbsp;<span class="op" id="6822412">:=</span>&nbsp;<span class="ident" id="6822415">buf</span><span class="op" id="6822418">.</span><span class="ident" id="6822419">String</span><span class="op" id="6822425">(</span><span class="op" id="6822426">)</span><span class="op" id="6822427">;</span>&nbsp;<span class="ident" id="6822429">s</span>&nbsp;<span class="op" id="6822431">!=</span>&nbsp;<span class="ident" id="6822434">tt</span><span class="op" id="6822436">.</span><span class="ident" id="6822437">compact</span>&nbsp;<span class="op" id="6822445">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822450">t</span><span class="op" id="6822451">.</span><span class="ident" id="6822452">Errorf</span><span class="op" id="6822458">(</span><span class="string" id="6822459">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6822486">,</span>&nbsp;<span class="ident" id="6822488">tt</span><span class="op" id="6822490">.</span><span class="ident" id="6822491">in</span><span class="op" id="6822493">,</span>&nbsp;<span class="ident" id="6822495">s</span><span class="op" id="6822496">,</span>&nbsp;<span class="ident" id="6822498">tt</span><span class="op" id="6822500">.</span><span class="ident" id="6822501">compact</span><span class="op" id="6822508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822515">}</span><br>
<span class="lineno"></span><span class="op" id="6822517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6822520">func</span>&nbsp;<span class="ident" id="6822525">TestIndent</span><span class="op" id="6822535">(</span><span class="ident" id="6822536">t</span>&nbsp;<span class="op" id="6822538">*</span><span class="ident" id="6822539">testing</span><span class="op" id="6822546">.</span><span class="ident" id="6822547">T</span><span class="op" id="6822548">)</span>&nbsp;<span class="op" id="6822550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822553">var</span>&nbsp;<span class="ident" id="6822557">buf</span>&nbsp;<span class="ident" id="6822561">bytes</span><span class="op" id="6822566">.</span><span class="ident" id="6822567">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822575">for</span>&nbsp;<span class="ident" id="6822579">_</span><span class="op" id="6822580">,</span>&nbsp;<span class="ident" id="6822582">tt</span>&nbsp;<span class="op" id="6822585">:=</span>&nbsp;<span class="keyword" id="6822588">range</span>&nbsp;<span class="ident" id="6822594">examples</span>&nbsp;<span class="op" id="6822603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822607">buf</span><span class="op" id="6822610">.</span><span class="ident" id="6822611">Reset</span><span class="op" id="6822616">(</span><span class="op" id="6822617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822621">if</span>&nbsp;<span class="ident" id="6822624">err</span>&nbsp;<span class="op" id="6822628">:=</span>&nbsp;<span class="ident" id="6822631">Indent</span><span class="op" id="6822637">(</span><span class="op" id="6822638">&amp;</span><span class="ident" id="6822639">buf</span><span class="op" id="6822642">,</span>&nbsp;<span class="op" id="6822644">[</span><span class="op" id="6822645">]</span><span class="builtintype" id="6822646">byte</span><span class="op" id="6822650">(</span><span class="ident" id="6822651">tt</span><span class="op" id="6822653">.</span><span class="ident" id="6822654">indent</span><span class="op" id="6822660">)</span><span class="op" id="6822661">,</span>&nbsp;<span class="string" id="6822663">&#34;&#34;</span><span class="op" id="6822665">,</span>&nbsp;<span class="string" id="6822667">&#34;\t&#34;</span><span class="op" id="6822671">)</span><span class="op" id="6822672">;</span>&nbsp;<span class="ident" id="6822674">err</span>&nbsp;<span class="op" id="6822678">!=</span>&nbsp;<span class="ident" id="6822681">nil</span>&nbsp;<span class="op" id="6822685">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822690">t</span><span class="op" id="6822691">.</span><span class="ident" id="6822692">Errorf</span><span class="op" id="6822698">(</span><span class="string" id="6822699">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6822716">,</span>&nbsp;<span class="ident" id="6822718">tt</span><span class="op" id="6822720">.</span><span class="ident" id="6822721">indent</span><span class="op" id="6822727">,</span>&nbsp;<span class="ident" id="6822729">err</span><span class="op" id="6822732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822736">}</span>&nbsp;<span class="keyword" id="6822738">else</span>&nbsp;<span class="keyword" id="6822743">if</span>&nbsp;<span class="ident" id="6822746">s</span>&nbsp;<span class="op" id="6822748">:=</span>&nbsp;<span class="ident" id="6822751">buf</span><span class="op" id="6822754">.</span><span class="ident" id="6822755">String</span><span class="op" id="6822761">(</span><span class="op" id="6822762">)</span><span class="op" id="6822763">;</span>&nbsp;<span class="ident" id="6822765">s</span>&nbsp;<span class="op" id="6822767">!=</span>&nbsp;<span class="ident" id="6822770">tt</span><span class="op" id="6822772">.</span><span class="ident" id="6822773">indent</span>&nbsp;<span class="op" id="6822780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822785">t</span><span class="op" id="6822786">.</span><span class="ident" id="6822787">Errorf</span><span class="op" id="6822793">(</span><span class="string" id="6822794">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="6822828">,</span>&nbsp;<span class="ident" id="6822830">tt</span><span class="op" id="6822832">.</span><span class="ident" id="6822833">indent</span><span class="op" id="6822839">,</span>&nbsp;<span class="ident" id="6822841">s</span><span class="op" id="6822842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822851">buf</span><span class="op" id="6822854">.</span><span class="ident" id="6822855">Reset</span><span class="op" id="6822860">(</span><span class="op" id="6822861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822865">if</span>&nbsp;<span class="ident" id="6822868">err</span>&nbsp;<span class="op" id="6822872">:=</span>&nbsp;<span class="ident" id="6822875">Indent</span><span class="op" id="6822881">(</span><span class="op" id="6822882">&amp;</span><span class="ident" id="6822883">buf</span><span class="op" id="6822886">,</span>&nbsp;<span class="op" id="6822888">[</span><span class="op" id="6822889">]</span><span class="builtintype" id="6822890">byte</span><span class="op" id="6822894">(</span><span class="ident" id="6822895">tt</span><span class="op" id="6822897">.</span><span class="ident" id="6822898">compact</span><span class="op" id="6822905">)</span><span class="op" id="6822906">,</span>&nbsp;<span class="string" id="6822908">&#34;&#34;</span><span class="op" id="6822910">,</span>&nbsp;<span class="string" id="6822912">&#34;\t&#34;</span><span class="op" id="6822916">)</span><span class="op" id="6822917">;</span>&nbsp;<span class="ident" id="6822919">err</span>&nbsp;<span class="op" id="6822923">!=</span>&nbsp;<span class="ident" id="6822926">nil</span>&nbsp;<span class="op" id="6822930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6822935">t</span><span class="op" id="6822936">.</span><span class="ident" id="6822937">Errorf</span><span class="op" id="6822943">(</span><span class="string" id="6822944">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="6822961">,</span>&nbsp;<span class="ident" id="6822963">tt</span><span class="op" id="6822965">.</span><span class="ident" id="6822966">compact</span><span class="op" id="6822973">,</span>&nbsp;<span class="ident" id="6822975">err</span><span class="op" id="6822978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6822983">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6822994">}</span>&nbsp;<span class="keyword" id="6822996">else</span>&nbsp;<span class="keyword" id="6823001">if</span>&nbsp;<span class="ident" id="6823004">s</span>&nbsp;<span class="op" id="6823006">:=</span>&nbsp;<span class="ident" id="6823009">buf</span><span class="op" id="6823012">.</span><span class="ident" id="6823013">String</span><span class="op" id="6823019">(</span><span class="op" id="6823020">)</span><span class="op" id="6823021">;</span>&nbsp;<span class="ident" id="6823023">s</span>&nbsp;<span class="op" id="6823025">!=</span>&nbsp;<span class="ident" id="6823028">tt</span><span class="op" id="6823030">.</span><span class="ident" id="6823031">indent</span>&nbsp;<span class="op" id="6823038">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823043">t</span><span class="op" id="6823044">.</span><span class="ident" id="6823045">Errorf</span><span class="op" id="6823051">(</span><span class="string" id="6823052">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="6823081">,</span>&nbsp;<span class="ident" id="6823083">tt</span><span class="op" id="6823085">.</span><span class="ident" id="6823086">compact</span><span class="op" id="6823093">,</span>&nbsp;<span class="ident" id="6823095">s</span><span class="op" id="6823096">,</span>&nbsp;<span class="ident" id="6823098">tt</span><span class="op" id="6823100">.</span><span class="ident" id="6823101">indent</span><span class="op" id="6823107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823114">}</span><br>
<span class="lineno"></span><span class="op" id="6823116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="6823119">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6823158">func</span>&nbsp;<span class="ident" id="6823163">TestCompactBig</span><span class="op" id="6823177">(</span><span class="ident" id="6823178">t</span>&nbsp;<span class="op" id="6823180">*</span><span class="ident" id="6823181">testing</span><span class="op" id="6823188">.</span><span class="ident" id="6823189">T</span><span class="op" id="6823190">)</span>&nbsp;<span class="op" id="6823192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823195">initBig</span><span class="op" id="6823202">(</span><span class="op" id="6823203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823206">var</span>&nbsp;<span class="ident" id="6823210">buf</span>&nbsp;<span class="ident" id="6823214">bytes</span><span class="op" id="6823219">.</span><span class="ident" id="6823220">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823228">if</span>&nbsp;<span class="ident" id="6823231">err</span>&nbsp;<span class="op" id="6823235">:=</span>&nbsp;<span class="ident" id="6823238">Compact</span><span class="op" id="6823245">(</span><span class="op" id="6823246">&amp;</span><span class="ident" id="6823247">buf</span><span class="op" id="6823250">,</span>&nbsp;<span class="ident" id="6823252">jsonBig</span><span class="op" id="6823259">)</span><span class="op" id="6823260">;</span>&nbsp;<span class="ident" id="6823262">err</span>&nbsp;<span class="op" id="6823266">!=</span>&nbsp;<span class="ident" id="6823269">nil</span>&nbsp;<span class="op" id="6823273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823277">t</span><span class="op" id="6823278">.</span><span class="ident" id="6823279">Fatalf</span><span class="op" id="6823285">(</span><span class="string" id="6823286">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6823299">,</span>&nbsp;<span class="ident" id="6823301">err</span><span class="op" id="6823304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823310">b</span>&nbsp;<span class="op" id="6823312">:=</span>&nbsp;<span class="ident" id="6823315">buf</span><span class="op" id="6823318">.</span><span class="ident" id="6823319">Bytes</span><span class="op" id="6823324">(</span><span class="op" id="6823325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823328">if</span>&nbsp;<span class="op" id="6823331">!</span><span class="ident" id="6823332">bytes</span><span class="op" id="6823337">.</span><span class="ident" id="6823338">Equal</span><span class="op" id="6823343">(</span><span class="ident" id="6823344">b</span><span class="op" id="6823345">,</span>&nbsp;<span class="ident" id="6823347">jsonBig</span><span class="op" id="6823354">)</span>&nbsp;<span class="op" id="6823356">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823360">t</span><span class="op" id="6823361">.</span><span class="ident" id="6823362">Error</span><span class="op" id="6823367">(</span><span class="string" id="6823368">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6823397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823401">diff</span><span class="op" id="6823405">(</span><span class="ident" id="6823406">t</span><span class="op" id="6823407">,</span>&nbsp;<span class="ident" id="6823409">b</span><span class="op" id="6823410">,</span>&nbsp;<span class="ident" id="6823412">jsonBig</span><span class="op" id="6823419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823423">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823431">}</span><br>
<span class="lineno"></span><span class="op" id="6823433">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="6823436">func</span>&nbsp;<span class="ident" id="6823441">TestIndentBig</span><span class="op" id="6823454">(</span><span class="ident" id="6823455">t</span>&nbsp;<span class="op" id="6823457">*</span><span class="ident" id="6823458">testing</span><span class="op" id="6823465">.</span><span class="ident" id="6823466">T</span><span class="op" id="6823467">)</span>&nbsp;<span class="op" id="6823469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823472">initBig</span><span class="op" id="6823479">(</span><span class="op" id="6823480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823483">var</span>&nbsp;<span class="ident" id="6823487">buf</span>&nbsp;<span class="ident" id="6823491">bytes</span><span class="op" id="6823496">.</span><span class="ident" id="6823497">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823505">if</span>&nbsp;<span class="ident" id="6823508">err</span>&nbsp;<span class="op" id="6823512">:=</span>&nbsp;<span class="ident" id="6823515">Indent</span><span class="op" id="6823521">(</span><span class="op" id="6823522">&amp;</span><span class="ident" id="6823523">buf</span><span class="op" id="6823526">,</span>&nbsp;<span class="ident" id="6823528">jsonBig</span><span class="op" id="6823535">,</span>&nbsp;<span class="string" id="6823537">&#34;&#34;</span><span class="op" id="6823539">,</span>&nbsp;<span class="string" id="6823541">&#34;\t&#34;</span><span class="op" id="6823545">)</span><span class="op" id="6823546">;</span>&nbsp;<span class="ident" id="6823548">err</span>&nbsp;<span class="op" id="6823552">!=</span>&nbsp;<span class="ident" id="6823555">nil</span>&nbsp;<span class="op" id="6823559">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823563">t</span><span class="op" id="6823564">.</span><span class="ident" id="6823565">Fatalf</span><span class="op" id="6823571">(</span><span class="string" id="6823572">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="6823585">,</span>&nbsp;<span class="ident" id="6823587">err</span><span class="op" id="6823590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823596">b</span>&nbsp;<span class="op" id="6823598">:=</span>&nbsp;<span class="ident" id="6823601">buf</span><span class="op" id="6823604">.</span><span class="ident" id="6823605">Bytes</span><span class="op" id="6823610">(</span><span class="op" id="6823611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823614">if</span>&nbsp;<span class="builtinfunc" id="6823617">len</span><span class="op" id="6823620">(</span><span class="ident" id="6823621">b</span><span class="op" id="6823622">)</span>&nbsp;<span class="op" id="6823624">==</span>&nbsp;<span class="builtinfunc" id="6823627">len</span><span class="op" id="6823630">(</span><span class="ident" id="6823631">jsonBig</span><span class="op" id="6823638">)</span>&nbsp;<span class="op" id="6823640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6823644">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6823693">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823730">t</span><span class="op" id="6823731">.</span><span class="ident" id="6823732">Fatalf</span><span class="op" id="6823738">(</span><span class="string" id="6823739">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="6823775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6823782">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823807">var</span>&nbsp;<span class="ident" id="6823811">buf1</span>&nbsp;<span class="ident" id="6823816">bytes</span><span class="op" id="6823821">.</span><span class="ident" id="6823822">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823830">if</span>&nbsp;<span class="ident" id="6823833">err</span>&nbsp;<span class="op" id="6823837">:=</span>&nbsp;<span class="ident" id="6823840">Indent</span><span class="op" id="6823846">(</span><span class="op" id="6823847">&amp;</span><span class="ident" id="6823848">buf1</span><span class="op" id="6823852">,</span>&nbsp;<span class="ident" id="6823854">b</span><span class="op" id="6823855">,</span>&nbsp;<span class="string" id="6823857">&#34;&#34;</span><span class="op" id="6823859">,</span>&nbsp;<span class="string" id="6823861">&#34;\t&#34;</span><span class="op" id="6823865">)</span><span class="op" id="6823866">;</span>&nbsp;<span class="ident" id="6823868">err</span>&nbsp;<span class="op" id="6823872">!=</span>&nbsp;<span class="ident" id="6823875">nil</span>&nbsp;<span class="op" id="6823879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823883">t</span><span class="op" id="6823884">.</span><span class="ident" id="6823885">Fatalf</span><span class="op" id="6823891">(</span><span class="string" id="6823892">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="6823905">,</span>&nbsp;<span class="ident" id="6823907">err</span><span class="op" id="6823910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6823913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823916">b1</span>&nbsp;<span class="op" id="6823919">:=</span>&nbsp;<span class="ident" id="6823922">buf1</span><span class="op" id="6823926">.</span><span class="ident" id="6823927">Bytes</span><span class="op" id="6823932">(</span><span class="op" id="6823933">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6823936">if</span>&nbsp;<span class="op" id="6823939">!</span><span class="ident" id="6823940">bytes</span><span class="op" id="6823945">.</span><span class="ident" id="6823946">Equal</span><span class="op" id="6823951">(</span><span class="ident" id="6823952">b1</span><span class="op" id="6823954">,</span>&nbsp;<span class="ident" id="6823956">b</span><span class="op" id="6823957">)</span>&nbsp;<span class="op" id="6823959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6823963">t</span><span class="op" id="6823964">.</span><span class="ident" id="6823965">Error</span><span class="op" id="6823970">(</span><span class="string" id="6823971">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="6824015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824019">diff</span><span class="op" id="6824023">(</span><span class="ident" id="6824024">t</span><span class="op" id="6824025">,</span>&nbsp;<span class="ident" id="6824027">b1</span><span class="op" id="6824029">,</span>&nbsp;<span class="ident" id="6824031">b</span><span class="op" id="6824032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824036">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824044">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6824048">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824080">buf1</span><span class="op" id="6824084">.</span><span class="ident" id="6824085">Reset</span><span class="op" id="6824090">(</span><span class="op" id="6824091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824094">if</span>&nbsp;<span class="ident" id="6824097">err</span>&nbsp;<span class="op" id="6824101">:=</span>&nbsp;<span class="ident" id="6824104">Compact</span><span class="op" id="6824111">(</span><span class="op" id="6824112">&amp;</span><span class="ident" id="6824113">buf1</span><span class="op" id="6824117">,</span>&nbsp;<span class="ident" id="6824119">b</span><span class="op" id="6824120">)</span><span class="op" id="6824121">;</span>&nbsp;<span class="ident" id="6824123">err</span>&nbsp;<span class="op" id="6824127">!=</span>&nbsp;<span class="ident" id="6824130">nil</span>&nbsp;<span class="op" id="6824134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824138">t</span><span class="op" id="6824139">.</span><span class="ident" id="6824140">Fatalf</span><span class="op" id="6824146">(</span><span class="string" id="6824147">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="6824160">,</span>&nbsp;<span class="ident" id="6824162">err</span><span class="op" id="6824165">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824171">b1</span>&nbsp;<span class="op" id="6824174">=</span>&nbsp;<span class="ident" id="6824176">buf1</span><span class="op" id="6824180">.</span><span class="ident" id="6824181">Bytes</span><span class="op" id="6824186">(</span><span class="op" id="6824187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824190">if</span>&nbsp;<span class="op" id="6824193">!</span><span class="ident" id="6824194">bytes</span><span class="op" id="6824199">.</span><span class="ident" id="6824200">Equal</span><span class="op" id="6824205">(</span><span class="ident" id="6824206">b1</span><span class="op" id="6824208">,</span>&nbsp;<span class="ident" id="6824210">jsonBig</span><span class="op" id="6824217">)</span>&nbsp;<span class="op" id="6824219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824223">t</span><span class="op" id="6824224">.</span><span class="ident" id="6824225">Error</span><span class="op" id="6824230">(</span><span class="string" id="6824231">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="6824268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824272">diff</span><span class="op" id="6824276">(</span><span class="ident" id="6824277">t</span><span class="op" id="6824278">,</span>&nbsp;<span class="ident" id="6824280">b1</span><span class="op" id="6824282">,</span>&nbsp;<span class="ident" id="6824284">jsonBig</span><span class="op" id="6824291">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824295">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824303">}</span><br>
<span class="lineno"></span><span class="op" id="6824305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6824308">type</span>&nbsp;<span class="ident" id="6824313">indentErrorTest</span>&nbsp;<span class="keyword" id="6824329">struct</span>&nbsp;<span class="op" id="6824336">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824339">in</span>&nbsp;&nbsp;<span class="builtintype" id="6824343">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824351">err</span>&nbsp;<span class="builtintype" id="6824355">error</span><br>
<span class="lineno"></span><span class="op" id="6824361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6824364">var</span>&nbsp;<span class="ident" id="6824368">indentErrorTests</span>&nbsp;<span class="op" id="6824385">=</span>&nbsp;<span class="op" id="6824387">[</span><span class="op" id="6824388">]</span><span class="ident" id="6824389">indentErrorTest</span><span class="op" id="6824404">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824407">{</span><span class="string" id="6824408">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="6824427">,</span>&nbsp;<span class="op" id="6824429">&amp;</span><span class="ident" id="6824430">SyntaxError</span><span class="op" id="6824441">{</span><span class="string" id="6824442">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="6824482">,</span>&nbsp;<span class="num" id="6824484">17</span><span class="op" id="6824486">}</span><span class="op" id="6824487">}</span><span class="op" id="6824488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824491">{</span><span class="string" id="6824492">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="6824517">,</span>&nbsp;<span class="op" id="6824519">&amp;</span><span class="ident" id="6824520">SyntaxError</span><span class="op" id="6824531">{</span><span class="string" id="6824532">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="6824584">,</span>&nbsp;<span class="num" id="6824586">13</span><span class="op" id="6824588">}</span><span class="op" id="6824589">}</span><span class="op" id="6824590">,</span><br>
<span class="lineno"></span><span class="op" id="6824592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6824595">func</span>&nbsp;<span class="ident" id="6824600">TestIndentErrors</span><span class="op" id="6824616">(</span><span class="ident" id="6824617">t</span>&nbsp;<span class="op" id="6824619">*</span><span class="ident" id="6824620">testing</span><span class="op" id="6824627">.</span><span class="ident" id="6824628">T</span><span class="op" id="6824629">)</span>&nbsp;<span class="op" id="6824631">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824634">for</span>&nbsp;<span class="ident" id="6824638">i</span><span class="op" id="6824639">,</span>&nbsp;<span class="ident" id="6824641">tt</span>&nbsp;<span class="op" id="6824644">:=</span>&nbsp;<span class="keyword" id="6824647">range</span>&nbsp;<span class="ident" id="6824653">indentErrorTests</span>&nbsp;<span class="op" id="6824670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824674">slice</span>&nbsp;<span class="op" id="6824680">:=</span>&nbsp;<span class="builtinfunc" id="6824683">make</span><span class="op" id="6824687">(</span><span class="op" id="6824688">[</span><span class="op" id="6824689">]</span><span class="builtintype" id="6824690">uint8</span><span class="op" id="6824695">,</span>&nbsp;<span class="num" id="6824697">0</span><span class="op" id="6824698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824702">buf</span>&nbsp;<span class="op" id="6824706">:=</span>&nbsp;<span class="ident" id="6824709">bytes</span><span class="op" id="6824714">.</span><span class="ident" id="6824715">NewBuffer</span><span class="op" id="6824724">(</span><span class="ident" id="6824725">slice</span><span class="op" id="6824730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824734">if</span>&nbsp;<span class="ident" id="6824737">err</span>&nbsp;<span class="op" id="6824741">:=</span>&nbsp;<span class="ident" id="6824744">Indent</span><span class="op" id="6824750">(</span><span class="ident" id="6824751">buf</span><span class="op" id="6824754">,</span>&nbsp;<span class="op" id="6824756">[</span><span class="op" id="6824757">]</span><span class="builtintype" id="6824758">uint8</span><span class="op" id="6824763">(</span><span class="ident" id="6824764">tt</span><span class="op" id="6824766">.</span><span class="ident" id="6824767">in</span><span class="op" id="6824769">)</span><span class="op" id="6824770">,</span>&nbsp;<span class="string" id="6824772">&#34;&#34;</span><span class="op" id="6824774">,</span>&nbsp;<span class="string" id="6824776">&#34;&#34;</span><span class="op" id="6824778">)</span><span class="op" id="6824779">;</span>&nbsp;<span class="ident" id="6824781">err</span>&nbsp;<span class="op" id="6824785">!=</span>&nbsp;<span class="ident" id="6824788">nil</span>&nbsp;<span class="op" id="6824792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824797">if</span>&nbsp;<span class="op" id="6824800">!</span><span class="ident" id="6824801">reflect</span><span class="op" id="6824808">.</span><span class="ident" id="6824809">DeepEqual</span><span class="op" id="6824818">(</span><span class="ident" id="6824819">err</span><span class="op" id="6824822">,</span>&nbsp;<span class="ident" id="6824824">tt</span><span class="op" id="6824826">.</span><span class="ident" id="6824827">err</span><span class="op" id="6824830">)</span>&nbsp;<span class="op" id="6824832">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824838">t</span><span class="op" id="6824839">.</span><span class="ident" id="6824840">Errorf</span><span class="op" id="6824846">(</span><span class="string" id="6824847">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="6824865">,</span>&nbsp;<span class="ident" id="6824867">i</span><span class="op" id="6824868">,</span>&nbsp;<span class="ident" id="6824870">err</span><span class="op" id="6824873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824879">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6824898">}</span><br>
<span class="lineno">180</span><span class="op" id="6824900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6824903">func</span>&nbsp;<span class="ident" id="6824908">TestNextValueBig</span><span class="op" id="6824924">(</span><span class="ident" id="6824925">t</span>&nbsp;<span class="op" id="6824927">*</span><span class="ident" id="6824928">testing</span><span class="op" id="6824935">.</span><span class="ident" id="6824936">T</span><span class="op" id="6824937">)</span>&nbsp;<span class="op" id="6824939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824942">initBig</span><span class="op" id="6824949">(</span><span class="op" id="6824950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6824953">var</span>&nbsp;<span class="ident" id="6824957">scan</span>&nbsp;<span class="ident" id="6824962">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6824971">item</span><span class="op" id="6824975">,</span>&nbsp;<span class="ident" id="6824977">rest</span><span class="op" id="6824981">,</span>&nbsp;<span class="ident" id="6824983">err</span>&nbsp;<span class="op" id="6824987">:=</span>&nbsp;<span class="ident" id="6824990">nextValue</span><span class="op" id="6824999">(</span><span class="ident" id="6825000">jsonBig</span><span class="op" id="6825007">,</span>&nbsp;<span class="op" id="6825009">&amp;</span><span class="ident" id="6825010">scan</span><span class="op" id="6825014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825017">if</span>&nbsp;<span class="ident" id="6825020">err</span>&nbsp;<span class="op" id="6825024">!=</span>&nbsp;<span class="ident" id="6825027">nil</span>&nbsp;<span class="op" id="6825031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825035">t</span><span class="op" id="6825036">.</span><span class="ident" id="6825037">Fatalf</span><span class="op" id="6825043">(</span><span class="string" id="6825044">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="6825059">,</span>&nbsp;<span class="ident" id="6825061">err</span><span class="op" id="6825064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825070">if</span>&nbsp;<span class="builtinfunc" id="6825073">len</span><span class="op" id="6825076">(</span><span class="ident" id="6825077">item</span><span class="op" id="6825081">)</span>&nbsp;<span class="op" id="6825083">!=</span>&nbsp;<span class="builtinfunc" id="6825086">len</span><span class="op" id="6825089">(</span><span class="ident" id="6825090">jsonBig</span><span class="op" id="6825097">)</span>&nbsp;<span class="op" id="6825099">||</span>&nbsp;<span class="op" id="6825102">&amp;</span><span class="ident" id="6825103">item</span><span class="op" id="6825107">[</span><span class="num" id="6825108">0</span><span class="op" id="6825109">]</span>&nbsp;<span class="op" id="6825111">!=</span>&nbsp;<span class="op" id="6825114">&amp;</span><span class="ident" id="6825115">jsonBig</span><span class="op" id="6825122">[</span><span class="num" id="6825123">0</span><span class="op" id="6825124">]</span>&nbsp;<span class="op" id="6825126">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825130">t</span><span class="op" id="6825131">.</span><span class="ident" id="6825132">Errorf</span><span class="op" id="6825138">(</span><span class="string" id="6825139">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6825160">,</span>&nbsp;<span class="builtinfunc" id="6825162">len</span><span class="op" id="6825165">(</span><span class="ident" id="6825166">item</span><span class="op" id="6825170">)</span><span class="op" id="6825171">,</span>&nbsp;<span class="builtinfunc" id="6825173">len</span><span class="op" id="6825176">(</span><span class="ident" id="6825177">jsonBig</span><span class="op" id="6825184">)</span><span class="op" id="6825185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825191">if</span>&nbsp;<span class="builtinfunc" id="6825194">len</span><span class="op" id="6825197">(</span><span class="ident" id="6825198">rest</span><span class="op" id="6825202">)</span>&nbsp;<span class="op" id="6825204">!=</span>&nbsp;<span class="num" id="6825207">0</span>&nbsp;<span class="op" id="6825209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825213">t</span><span class="op" id="6825214">.</span><span class="ident" id="6825215">Errorf</span><span class="op" id="6825221">(</span><span class="string" id="6825222">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6825240">,</span>&nbsp;<span class="builtinfunc" id="6825242">len</span><span class="op" id="6825245">(</span><span class="ident" id="6825246">rest</span><span class="op" id="6825250">)</span><span class="op" id="6825251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825254">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825258">item</span><span class="op" id="6825262">,</span>&nbsp;<span class="ident" id="6825264">rest</span><span class="op" id="6825268">,</span>&nbsp;<span class="ident" id="6825270">err</span>&nbsp;<span class="op" id="6825274">=</span>&nbsp;<span class="ident" id="6825276">nextValue</span><span class="op" id="6825285">(</span><span class="builtinfunc" id="6825286">append</span><span class="op" id="6825292">(</span><span class="ident" id="6825293">jsonBig</span><span class="op" id="6825300">,</span>&nbsp;<span class="string" id="6825302">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="6825315">...</span><span class="op" id="6825318">)</span><span class="op" id="6825319">,</span>&nbsp;<span class="op" id="6825321">&amp;</span><span class="ident" id="6825322">scan</span><span class="op" id="6825326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825329">if</span>&nbsp;<span class="ident" id="6825332">err</span>&nbsp;<span class="op" id="6825336">!=</span>&nbsp;<span class="ident" id="6825339">nil</span>&nbsp;<span class="op" id="6825343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825347">t</span><span class="op" id="6825348">.</span><span class="ident" id="6825349">Fatalf</span><span class="op" id="6825355">(</span><span class="string" id="6825356">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="6825377">,</span>&nbsp;<span class="ident" id="6825379">err</span><span class="op" id="6825382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825385">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825388">if</span>&nbsp;<span class="builtinfunc" id="6825391">len</span><span class="op" id="6825394">(</span><span class="ident" id="6825395">item</span><span class="op" id="6825399">)</span>&nbsp;<span class="op" id="6825401">!=</span>&nbsp;<span class="builtinfunc" id="6825404">len</span><span class="op" id="6825407">(</span><span class="ident" id="6825408">jsonBig</span><span class="op" id="6825415">)</span>&nbsp;<span class="op" id="6825417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825421">t</span><span class="op" id="6825422">.</span><span class="ident" id="6825423">Errorf</span><span class="op" id="6825429">(</span><span class="string" id="6825430">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="6825451">,</span>&nbsp;<span class="builtinfunc" id="6825453">len</span><span class="op" id="6825456">(</span><span class="ident" id="6825457">item</span><span class="op" id="6825461">)</span><span class="op" id="6825462">,</span>&nbsp;<span class="builtinfunc" id="6825464">len</span><span class="op" id="6825467">(</span><span class="ident" id="6825468">jsonBig</span><span class="op" id="6825475">)</span><span class="op" id="6825476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825482">if</span>&nbsp;<span class="builtintype" id="6825485">string</span><span class="op" id="6825491">(</span><span class="ident" id="6825492">rest</span><span class="op" id="6825496">)</span>&nbsp;<span class="op" id="6825498">!=</span>&nbsp;<span class="string" id="6825501">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="6825515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825519">t</span><span class="op" id="6825520">.</span><span class="ident" id="6825521">Errorf</span><span class="op" id="6825527">(</span><span class="string" id="6825528">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="6825546">,</span>&nbsp;<span class="builtinfunc" id="6825548">len</span><span class="op" id="6825551">(</span><span class="ident" id="6825552">rest</span><span class="op" id="6825556">)</span><span class="op" id="6825557">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825560">}</span><br>
<span class="lineno"></span><span class="op" id="6825562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6825565">var</span>&nbsp;<span class="ident" id="6825569">benchScan</span>&nbsp;<span class="ident" id="6825579">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="6825588">func</span>&nbsp;<span class="ident" id="6825593">BenchmarkSkipValue</span><span class="op" id="6825611">(</span><span class="ident" id="6825612">b</span>&nbsp;<span class="op" id="6825614">*</span><span class="ident" id="6825615">testing</span><span class="op" id="6825622">.</span><span class="ident" id="6825623">B</span><span class="op" id="6825624">)</span>&nbsp;<span class="op" id="6825626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825629">initBig</span><span class="op" id="6825636">(</span><span class="op" id="6825637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825640">for</span>&nbsp;<span class="ident" id="6825644">i</span>&nbsp;<span class="op" id="6825646">:=</span>&nbsp;<span class="num" id="6825649">0</span><span class="op" id="6825650">;</span>&nbsp;<span class="ident" id="6825652">i</span>&nbsp;<span class="op" id="6825654">&lt;</span>&nbsp;<span class="ident" id="6825656">b</span><span class="op" id="6825657">.</span><span class="ident" id="6825658">N</span><span class="op" id="6825659">;</span>&nbsp;<span class="ident" id="6825661">i</span><span class="op" id="6825662">++</span>&nbsp;<span class="op" id="6825665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825669">nextValue</span><span class="op" id="6825678">(</span><span class="ident" id="6825679">jsonBig</span><span class="op" id="6825686">,</span>&nbsp;<span class="op" id="6825688">&amp;</span><span class="ident" id="6825689">benchScan</span><span class="op" id="6825698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825701">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825704">b</span><span class="op" id="6825705">.</span><span class="ident" id="6825706">SetBytes</span><span class="op" id="6825714">(</span><span class="ident" id="6825715">int64</span><span class="op" id="6825720">(</span><span class="builtinfunc" id="6825721">len</span><span class="op" id="6825724">(</span><span class="ident" id="6825725">jsonBig</span><span class="op" id="6825732">)</span><span class="op" id="6825733">)</span><span class="op" id="6825734">)</span><br>
<span class="lineno"></span><span class="op" id="6825736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6825739">func</span>&nbsp;<span class="ident" id="6825744">diff</span><span class="op" id="6825748">(</span><span class="ident" id="6825749">t</span>&nbsp;<span class="op" id="6825751">*</span><span class="ident" id="6825752">testing</span><span class="op" id="6825759">.</span><span class="ident" id="6825760">T</span><span class="op" id="6825761">,</span>&nbsp;<span class="ident" id="6825763">a</span><span class="op" id="6825764">,</span>&nbsp;<span class="ident" id="6825766">b</span>&nbsp;<span class="op" id="6825768">[</span><span class="op" id="6825769">]</span><span class="builtintype" id="6825770">byte</span><span class="op" id="6825774">)</span>&nbsp;<span class="op" id="6825776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825779">for</span>&nbsp;<span class="ident" id="6825783">i</span>&nbsp;<span class="op" id="6825785">:=</span>&nbsp;<span class="num" id="6825788">0</span><span class="op" id="6825789">;</span>&nbsp;<span class="op" id="6825791">;</span>&nbsp;<span class="ident" id="6825793">i</span><span class="op" id="6825794">++</span>&nbsp;<span class="op" id="6825797">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825801">if</span>&nbsp;<span class="ident" id="6825804">i</span>&nbsp;<span class="op" id="6825806">&gt;=</span>&nbsp;<span class="builtinfunc" id="6825809">len</span><span class="op" id="6825812">(</span><span class="ident" id="6825813">a</span><span class="op" id="6825814">)</span>&nbsp;<span class="op" id="6825816">||</span>&nbsp;<span class="ident" id="6825819">i</span>&nbsp;<span class="op" id="6825821">&gt;=</span>&nbsp;<span class="builtinfunc" id="6825824">len</span><span class="op" id="6825827">(</span><span class="ident" id="6825828">b</span><span class="op" id="6825829">)</span>&nbsp;<span class="op" id="6825831">||</span>&nbsp;<span class="ident" id="6825834">a</span><span class="op" id="6825835">[</span><span class="ident" id="6825836">i</span><span class="op" id="6825837">]</span>&nbsp;<span class="op" id="6825839">!=</span>&nbsp;<span class="ident" id="6825842">b</span><span class="op" id="6825843">[</span><span class="ident" id="6825844">i</span><span class="op" id="6825845">]</span>&nbsp;<span class="op" id="6825847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825852">j</span>&nbsp;<span class="op" id="6825854">:=</span>&nbsp;<span class="ident" id="6825857">i</span>&nbsp;<span class="op" id="6825859">-</span>&nbsp;<span class="num" id="6825861">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825867">if</span>&nbsp;<span class="ident" id="6825870">j</span>&nbsp;<span class="op" id="6825872">&lt;</span>&nbsp;<span class="num" id="6825874">0</span>&nbsp;<span class="op" id="6825876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825882">j</span>&nbsp;<span class="op" id="6825884">=</span>&nbsp;<span class="num" id="6825886">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825891">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6825896">t</span><span class="op" id="6825897">.</span><span class="ident" id="6825898">Errorf</span><span class="op" id="6825904">(</span><span class="string" id="6825905">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;%s&nbsp;vs&nbsp;%s&#34;</span><span class="op" id="6825938">,</span>&nbsp;<span class="ident" id="6825940">i</span><span class="op" id="6825941">,</span>&nbsp;<span class="ident" id="6825943">trim</span><span class="op" id="6825947">(</span><span class="ident" id="6825948">a</span><span class="op" id="6825949">[</span><span class="ident" id="6825950">j</span><span class="op" id="6825951">:</span><span class="op" id="6825952">]</span><span class="op" id="6825953">)</span><span class="op" id="6825954">,</span>&nbsp;<span class="ident" id="6825956">trim</span><span class="op" id="6825960">(</span><span class="ident" id="6825961">b</span><span class="op" id="6825962">[</span><span class="ident" id="6825963">j</span><span class="op" id="6825964">:</span><span class="op" id="6825965">]</span><span class="op" id="6825966">)</span><span class="op" id="6825967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6825972">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6825984">}</span><br>
<span class="lineno"></span><span class="op" id="6825986">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6825989">func</span>&nbsp;<span class="ident" id="6825994">trim</span><span class="op" id="6825998">(</span><span class="ident" id="6825999">b</span>&nbsp;<span class="op" id="6826001">[</span><span class="op" id="6826002">]</span><span class="builtintype" id="6826003">byte</span><span class="op" id="6826007">)</span>&nbsp;<span class="op" id="6826009">[</span><span class="op" id="6826010">]</span><span class="builtintype" id="6826011">byte</span>&nbsp;<span class="op" id="6826016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826019">if</span>&nbsp;<span class="builtinfunc" id="6826022">len</span><span class="op" id="6826025">(</span><span class="ident" id="6826026">b</span><span class="op" id="6826027">)</span>&nbsp;<span class="op" id="6826029">&gt;</span>&nbsp;<span class="num" id="6826031">20</span>&nbsp;<span class="op" id="6826034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826038">return</span>&nbsp;<span class="ident" id="6826045">b</span><span class="op" id="6826046">[</span><span class="num" id="6826047">0</span><span class="op" id="6826048">:</span><span class="num" id="6826049">20</span><span class="op" id="6826051">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826054">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826057">return</span>&nbsp;<span class="ident" id="6826064">b</span><br>
<span class="lineno"></span><span class="op" id="6826066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6826069">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6826104">var</span>&nbsp;<span class="ident" id="6826108">jsonBig</span>&nbsp;<span class="op" id="6826116">[</span><span class="op" id="6826117">]</span><span class="builtintype" id="6826118">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6826124">func</span>&nbsp;<span class="ident" id="6826129">initBig</span><span class="op" id="6826136">(</span><span class="op" id="6826137">)</span>&nbsp;<span class="op" id="6826139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826142">n</span>&nbsp;<span class="op" id="6826144">:=</span>&nbsp;<span class="num" id="6826147">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826154">if</span>&nbsp;<span class="ident" id="6826157">testing</span><span class="op" id="6826164">.</span><span class="ident" id="6826165">Short</span><span class="op" id="6826170">(</span><span class="op" id="6826171">)</span>&nbsp;<span class="op" id="6826173">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826177">n</span>&nbsp;<span class="op" id="6826179">=</span>&nbsp;<span class="num" id="6826181">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826189">b</span><span class="op" id="6826190">,</span>&nbsp;<span class="ident" id="6826192">err</span>&nbsp;<span class="op" id="6826196">:=</span>&nbsp;<span class="ident" id="6826199">Marshal</span><span class="op" id="6826206">(</span><span class="ident" id="6826207">genValue</span><span class="op" id="6826215">(</span><span class="ident" id="6826216">n</span><span class="op" id="6826217">)</span><span class="op" id="6826218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826221">if</span>&nbsp;<span class="ident" id="6826224">err</span>&nbsp;<span class="op" id="6826228">!=</span>&nbsp;<span class="ident" id="6826231">nil</span>&nbsp;<span class="op" id="6826235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6826239">panic</span><span class="op" id="6826244">(</span><span class="ident" id="6826245">err</span><span class="op" id="6826248">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826254">jsonBig</span>&nbsp;<span class="op" id="6826262">=</span>&nbsp;<span class="ident" id="6826264">b</span><br>
<span class="lineno"></span><span class="op" id="6826266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6826269">func</span>&nbsp;<span class="ident" id="6826274">genValue</span><span class="op" id="6826282">(</span><span class="ident" id="6826283">n</span>&nbsp;<span class="builtintype" id="6826285">int</span><span class="op" id="6826288">)</span>&nbsp;<span class="keyword" id="6826290">interface</span><span class="op" id="6826299">{</span><span class="op" id="6826300">}</span>&nbsp;<span class="op" id="6826302">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826305">if</span>&nbsp;<span class="ident" id="6826308">n</span>&nbsp;<span class="op" id="6826310">&gt;</span>&nbsp;<span class="num" id="6826312">1</span>&nbsp;<span class="op" id="6826314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826318">switch</span>&nbsp;<span class="ident" id="6826325">rand</span><span class="op" id="6826329">.</span><span class="ident" id="6826330">Intn</span><span class="op" id="6826334">(</span><span class="num" id="6826335">2</span><span class="op" id="6826336">)</span>&nbsp;<span class="op" id="6826338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826342">case</span>&nbsp;<span class="num" id="6826347">0</span><span class="op" id="6826348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826353">return</span>&nbsp;<span class="ident" id="6826360">genArray</span><span class="op" id="6826368">(</span><span class="ident" id="6826369">n</span><span class="op" id="6826370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826374">case</span>&nbsp;<span class="num" id="6826379">1</span><span class="op" id="6826380">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826385">return</span>&nbsp;<span class="ident" id="6826392">genMap</span><span class="op" id="6826398">(</span><span class="ident" id="6826399">n</span><span class="op" id="6826400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826410">switch</span>&nbsp;<span class="ident" id="6826417">rand</span><span class="op" id="6826421">.</span><span class="ident" id="6826422">Intn</span><span class="op" id="6826426">(</span><span class="num" id="6826427">3</span><span class="op" id="6826428">)</span>&nbsp;<span class="op" id="6826430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826433">case</span>&nbsp;<span class="num" id="6826438">0</span><span class="op" id="6826439">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826443">return</span>&nbsp;<span class="ident" id="6826450">rand</span><span class="op" id="6826454">.</span><span class="ident" id="6826455">Intn</span><span class="op" id="6826459">(</span><span class="num" id="6826460">2</span><span class="op" id="6826461">)</span>&nbsp;<span class="op" id="6826463">==</span>&nbsp;<span class="num" id="6826466">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826469">case</span>&nbsp;<span class="num" id="6826474">1</span><span class="op" id="6826475">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826479">return</span>&nbsp;<span class="ident" id="6826486">rand</span><span class="op" id="6826490">.</span><span class="ident" id="6826491">NormFloat64</span><span class="op" id="6826502">(</span><span class="op" id="6826503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826506">case</span>&nbsp;<span class="num" id="6826511">2</span><span class="op" id="6826512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826516">return</span>&nbsp;<span class="ident" id="6826523">genString</span><span class="op" id="6826532">(</span><span class="num" id="6826533">30</span><span class="op" id="6826535">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6826541">panic</span><span class="op" id="6826546">(</span><span class="string" id="6826547">&#34;unreachable&#34;</span><span class="op" id="6826560">)</span><br>
<span class="lineno"></span><span class="op" id="6826562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6826565">func</span>&nbsp;<span class="ident" id="6826570">genString</span><span class="op" id="6826579">(</span><span class="ident" id="6826580">stddev</span>&nbsp;<span class="builtintype" id="6826587">float64</span><span class="op" id="6826594">)</span>&nbsp;<span class="builtintype" id="6826596">string</span>&nbsp;<span class="op" id="6826603">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826606">n</span>&nbsp;<span class="op" id="6826608">:=</span>&nbsp;<span class="builtintype" id="6826611">int</span><span class="op" id="6826614">(</span><span class="ident" id="6826615">math</span><span class="op" id="6826619">.</span><span class="ident" id="6826620">Abs</span><span class="op" id="6826623">(</span><span class="ident" id="6826624">rand</span><span class="op" id="6826628">.</span><span class="ident" id="6826629">NormFloat64</span><span class="op" id="6826640">(</span><span class="op" id="6826641">)</span><span class="op" id="6826642">*</span><span class="ident" id="6826643">stddev</span>&nbsp;<span class="op" id="6826650">+</span>&nbsp;<span class="ident" id="6826652">stddev</span><span class="op" id="6826658">/</span><span class="num" id="6826659">2</span><span class="op" id="6826660">)</span><span class="op" id="6826661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826664">c</span>&nbsp;<span class="op" id="6826666">:=</span>&nbsp;<span class="builtinfunc" id="6826669">make</span><span class="op" id="6826673">(</span><span class="op" id="6826674">[</span><span class="op" id="6826675">]</span><span class="builtintype" id="6826676">rune</span><span class="op" id="6826680">,</span>&nbsp;<span class="ident" id="6826682">n</span><span class="op" id="6826683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826686">for</span>&nbsp;<span class="ident" id="6826690">i</span>&nbsp;<span class="op" id="6826692">:=</span>&nbsp;<span class="keyword" id="6826695">range</span>&nbsp;<span class="ident" id="6826701">c</span>&nbsp;<span class="op" id="6826703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826707">f</span>&nbsp;<span class="op" id="6826709">:=</span>&nbsp;<span class="ident" id="6826712">math</span><span class="op" id="6826716">.</span><span class="ident" id="6826717">Abs</span><span class="op" id="6826720">(</span><span class="ident" id="6826721">rand</span><span class="op" id="6826725">.</span><span class="ident" id="6826726">NormFloat64</span><span class="op" id="6826737">(</span><span class="op" id="6826738">)</span><span class="op" id="6826739">*</span><span class="num" id="6826740">64</span>&nbsp;<span class="op" id="6826743">+</span>&nbsp;<span class="num" id="6826745">32</span><span class="op" id="6826747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826751">if</span>&nbsp;<span class="ident" id="6826754">f</span>&nbsp;<span class="op" id="6826756">&gt;</span>&nbsp;<span class="num" id="6826758">0x10ffff</span>&nbsp;<span class="op" id="6826767">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826772">f</span>&nbsp;<span class="op" id="6826774">=</span>&nbsp;<span class="num" id="6826776">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826791">c</span><span class="op" id="6826792">[</span><span class="ident" id="6826793">i</span><span class="op" id="6826794">]</span>&nbsp;<span class="op" id="6826796">=</span>&nbsp;<span class="builtintype" id="6826798">rune</span><span class="op" id="6826802">(</span><span class="ident" id="6826803">f</span><span class="op" id="6826804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826810">return</span>&nbsp;<span class="builtintype" id="6826817">string</span><span class="op" id="6826823">(</span><span class="ident" id="6826824">c</span><span class="op" id="6826825">)</span><br>
<span class="lineno">285</span><span class="op" id="6826827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6826830">func</span>&nbsp;<span class="ident" id="6826835">genArray</span><span class="op" id="6826843">(</span><span class="ident" id="6826844">n</span>&nbsp;<span class="builtintype" id="6826846">int</span><span class="op" id="6826849">)</span>&nbsp;<span class="op" id="6826851">[</span><span class="op" id="6826852">]</span><span class="keyword" id="6826853">interface</span><span class="op" id="6826862">{</span><span class="op" id="6826863">}</span>&nbsp;<span class="op" id="6826865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826868">f</span>&nbsp;<span class="op" id="6826870">:=</span>&nbsp;<span class="builtintype" id="6826873">int</span><span class="op" id="6826876">(</span><span class="ident" id="6826877">math</span><span class="op" id="6826881">.</span><span class="ident" id="6826882">Abs</span><span class="op" id="6826885">(</span><span class="ident" id="6826886">rand</span><span class="op" id="6826890">.</span><span class="ident" id="6826891">NormFloat64</span><span class="op" id="6826902">(</span><span class="op" id="6826903">)</span><span class="op" id="6826904">)</span>&nbsp;<span class="op" id="6826906">*</span>&nbsp;<span class="ident" id="6826908">math</span><span class="op" id="6826912">.</span><span class="ident" id="6826913">Min</span><span class="op" id="6826916">(</span><span class="num" id="6826917">10</span><span class="op" id="6826919">,</span>&nbsp;<span class="builtintype" id="6826921">float64</span><span class="op" id="6826928">(</span><span class="ident" id="6826929">n</span><span class="op" id="6826930">/</span><span class="num" id="6826931">2</span><span class="op" id="6826932">)</span><span class="op" id="6826933">)</span><span class="op" id="6826934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826937">if</span>&nbsp;<span class="ident" id="6826940">f</span>&nbsp;<span class="op" id="6826942">&gt;</span>&nbsp;<span class="ident" id="6826944">n</span>&nbsp;<span class="op" id="6826946">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826950">f</span>&nbsp;<span class="op" id="6826952">=</span>&nbsp;<span class="ident" id="6826954">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6826960">if</span>&nbsp;<span class="ident" id="6826963">f</span>&nbsp;<span class="op" id="6826965">&lt;</span>&nbsp;<span class="num" id="6826967">1</span>&nbsp;<span class="op" id="6826969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826973">f</span>&nbsp;<span class="op" id="6826975">=</span>&nbsp;<span class="num" id="6826977">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6826980">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6826983">x</span>&nbsp;<span class="op" id="6826985">:=</span>&nbsp;<span class="builtinfunc" id="6826988">make</span><span class="op" id="6826992">(</span><span class="op" id="6826993">[</span><span class="op" id="6826994">]</span><span class="keyword" id="6826995">interface</span><span class="op" id="6827004">{</span><span class="op" id="6827005">}</span><span class="op" id="6827006">,</span>&nbsp;<span class="ident" id="6827008">f</span><span class="op" id="6827009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827012">for</span>&nbsp;<span class="ident" id="6827016">i</span>&nbsp;<span class="op" id="6827018">:=</span>&nbsp;<span class="keyword" id="6827021">range</span>&nbsp;<span class="ident" id="6827027">x</span>&nbsp;<span class="op" id="6827029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827033">x</span><span class="op" id="6827034">[</span><span class="ident" id="6827035">i</span><span class="op" id="6827036">]</span>&nbsp;<span class="op" id="6827038">=</span>&nbsp;<span class="ident" id="6827040">genValue</span><span class="op" id="6827048">(</span><span class="op" id="6827049">(</span><span class="op" id="6827050">(</span><span class="ident" id="6827051">i</span><span class="op" id="6827052">+</span><span class="num" id="6827053">1</span><span class="op" id="6827054">)</span><span class="op" id="6827055">*</span><span class="ident" id="6827056">n</span><span class="op" id="6827057">)</span><span class="op" id="6827058">/</span><span class="ident" id="6827059">f</span>&nbsp;<span class="op" id="6827061">-</span>&nbsp;<span class="op" id="6827063">(</span><span class="ident" id="6827064">i</span><span class="op" id="6827065">*</span><span class="ident" id="6827066">n</span><span class="op" id="6827067">)</span><span class="op" id="6827068">/</span><span class="ident" id="6827069">f</span><span class="op" id="6827070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827076">return</span>&nbsp;<span class="ident" id="6827083">x</span><br>
<span class="lineno">300</span><span class="op" id="6827085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6827088">func</span>&nbsp;<span class="ident" id="6827093">genMap</span><span class="op" id="6827099">(</span><span class="ident" id="6827100">n</span>&nbsp;<span class="builtintype" id="6827102">int</span><span class="op" id="6827105">)</span>&nbsp;<span class="keyword" id="6827107">map</span><span class="op" id="6827110">[</span><span class="builtintype" id="6827111">string</span><span class="op" id="6827117">]</span><span class="keyword" id="6827118">interface</span><span class="op" id="6827127">{</span><span class="op" id="6827128">}</span>&nbsp;<span class="op" id="6827130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827133">f</span>&nbsp;<span class="op" id="6827135">:=</span>&nbsp;<span class="builtintype" id="6827138">int</span><span class="op" id="6827141">(</span><span class="ident" id="6827142">math</span><span class="op" id="6827146">.</span><span class="ident" id="6827147">Abs</span><span class="op" id="6827150">(</span><span class="ident" id="6827151">rand</span><span class="op" id="6827155">.</span><span class="ident" id="6827156">NormFloat64</span><span class="op" id="6827167">(</span><span class="op" id="6827168">)</span><span class="op" id="6827169">)</span>&nbsp;<span class="op" id="6827171">*</span>&nbsp;<span class="ident" id="6827173">math</span><span class="op" id="6827177">.</span><span class="ident" id="6827178">Min</span><span class="op" id="6827181">(</span><span class="num" id="6827182">10</span><span class="op" id="6827184">,</span>&nbsp;<span class="builtintype" id="6827186">float64</span><span class="op" id="6827193">(</span><span class="ident" id="6827194">n</span><span class="op" id="6827195">/</span><span class="num" id="6827196">2</span><span class="op" id="6827197">)</span><span class="op" id="6827198">)</span><span class="op" id="6827199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827202">if</span>&nbsp;<span class="ident" id="6827205">f</span>&nbsp;<span class="op" id="6827207">&gt;</span>&nbsp;<span class="ident" id="6827209">n</span>&nbsp;<span class="op" id="6827211">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827215">f</span>&nbsp;<span class="op" id="6827217">=</span>&nbsp;<span class="ident" id="6827219">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827225">if</span>&nbsp;<span class="ident" id="6827228">n</span>&nbsp;<span class="op" id="6827230">&gt;</span>&nbsp;<span class="num" id="6827232">0</span>&nbsp;<span class="op" id="6827234">&amp;&amp;</span>&nbsp;<span class="ident" id="6827237">f</span>&nbsp;<span class="op" id="6827239">==</span>&nbsp;<span class="num" id="6827242">0</span>&nbsp;<span class="op" id="6827244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827248">f</span>&nbsp;<span class="op" id="6827250">=</span>&nbsp;<span class="num" id="6827252">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827255">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827258">x</span>&nbsp;<span class="op" id="6827260">:=</span>&nbsp;<span class="builtinfunc" id="6827263">make</span><span class="op" id="6827267">(</span><span class="keyword" id="6827268">map</span><span class="op" id="6827271">[</span><span class="builtintype" id="6827272">string</span><span class="op" id="6827278">]</span><span class="keyword" id="6827279">interface</span><span class="op" id="6827288">{</span><span class="op" id="6827289">}</span><span class="op" id="6827290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827293">for</span>&nbsp;<span class="ident" id="6827297">i</span>&nbsp;<span class="op" id="6827299">:=</span>&nbsp;<span class="num" id="6827302">0</span><span class="op" id="6827303">;</span>&nbsp;<span class="ident" id="6827305">i</span>&nbsp;<span class="op" id="6827307">&lt;</span>&nbsp;<span class="ident" id="6827309">f</span><span class="op" id="6827310">;</span>&nbsp;<span class="ident" id="6827312">i</span><span class="op" id="6827313">++</span>&nbsp;<span class="op" id="6827316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827320">x</span><span class="op" id="6827321">[</span><span class="ident" id="6827322">genString</span><span class="op" id="6827331">(</span><span class="num" id="6827332">10</span><span class="op" id="6827334">)</span><span class="op" id="6827335">]</span>&nbsp;<span class="op" id="6827337">=</span>&nbsp;<span class="ident" id="6827339">genValue</span><span class="op" id="6827347">(</span><span class="op" id="6827348">(</span><span class="op" id="6827349">(</span><span class="ident" id="6827350">i</span><span class="op" id="6827351">+</span><span class="num" id="6827352">1</span><span class="op" id="6827353">)</span><span class="op" id="6827354">*</span><span class="ident" id="6827355">n</span><span class="op" id="6827356">)</span><span class="op" id="6827357">/</span><span class="ident" id="6827358">f</span>&nbsp;<span class="op" id="6827360">-</span>&nbsp;<span class="op" id="6827362">(</span><span class="ident" id="6827363">i</span><span class="op" id="6827364">*</span><span class="ident" id="6827365">n</span><span class="op" id="6827366">)</span><span class="op" id="6827367">/</span><span class="ident" id="6827368">f</span><span class="op" id="6827369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827375">return</span>&nbsp;<span class="ident" id="6827382">x</span><br>
<span class="lineno">315</span><span class="op" id="6827384">}</span>
</div>
</body>
</html>
