<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5779541">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5779596">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5779650">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5779701">package</span>&nbsp;<span class="ident" id="5779709">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5779714">import</span>&nbsp;<span class="op" id="5779721">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5779724">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5779734">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5779746">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5779756">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5779764">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="5779774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5779777">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5779857">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5779881">//</span><br>
<span class="lineno"></span><span class="comment" id="5779884">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5779965">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="5780047">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="5780129">//</span><br>
<span class="lineno"></span><span class="keyword" id="5780132">type</span>&nbsp;<span class="ident" id="5780137">methodSet</span>&nbsp;<span class="keyword" id="5780147">map</span><span class="op" id="5780150">[</span><span class="builtintype" id="5780151">string</span><span class="op" id="5780157">]</span><span class="op" id="5780158">*</span><span class="ident" id="5780159">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5780165">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5780226">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="5780291">//</span><br>
<span class="lineno"></span><span class="keyword" id="5780294">func</span>&nbsp;<span class="ident" id="5780299">recvString</span><span class="op" id="5780309">(</span><span class="ident" id="5780310">recv</span>&nbsp;<span class="ident" id="5780315">ast</span><span class="op" id="5780318">.</span><span class="ident" id="5780319">Expr</span><span class="op" id="5780323">)</span>&nbsp;<span class="builtintype" id="5780325">string</span>&nbsp;<span class="op" id="5780332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780335">switch</span>&nbsp;<span class="ident" id="5780342">t</span>&nbsp;<span class="op" id="5780344">:=</span>&nbsp;<span class="ident" id="5780347">recv</span><span class="op" id="5780351">.</span><span class="op" id="5780352">(</span><span class="keyword" id="5780353">type</span><span class="op" id="5780357">)</span>&nbsp;<span class="op" id="5780359">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780362">case</span>&nbsp;<span class="op" id="5780367">*</span><span class="ident" id="5780368">ast</span><span class="op" id="5780371">.</span><span class="ident" id="5780372">Ident</span><span class="op" id="5780377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780381">return</span>&nbsp;<span class="ident" id="5780388">t</span><span class="op" id="5780389">.</span><span class="ident" id="5780390">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780396">case</span>&nbsp;<span class="op" id="5780401">*</span><span class="ident" id="5780402">ast</span><span class="op" id="5780405">.</span><span class="ident" id="5780406">StarExpr</span><span class="op" id="5780414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780418">return</span>&nbsp;<span class="string" id="5780425">&#34;*&#34;</span>&nbsp;<span class="op" id="5780429">+</span>&nbsp;<span class="ident" id="5780431">recvString</span><span class="op" id="5780441">(</span><span class="ident" id="5780442">t</span><span class="op" id="5780443">.</span><span class="ident" id="5780444">X</span><span class="op" id="5780445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5780448">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780451">return</span>&nbsp;<span class="string" id="5780458">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="5780468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5780471">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5780536">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="5780605">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5780655">//</span><br>
<span class="lineno"></span><span class="keyword" id="5780658">func</span>&nbsp;<span class="op" id="5780663">(</span><span class="ident" id="5780664">mset</span>&nbsp;<span class="ident" id="5780669">methodSet</span><span class="op" id="5780678">)</span>&nbsp;<span class="ident" id="5780680">set</span><span class="op" id="5780683">(</span><span class="ident" id="5780684">f</span>&nbsp;<span class="op" id="5780686">*</span><span class="ident" id="5780687">ast</span><span class="op" id="5780690">.</span><span class="ident" id="5780691">FuncDecl</span><span class="op" id="5780699">)</span>&nbsp;<span class="op" id="5780701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5780704">name</span>&nbsp;<span class="op" id="5780709">:=</span>&nbsp;<span class="ident" id="5780712">f</span><span class="op" id="5780713">.</span><span class="ident" id="5780714">Name</span><span class="op" id="5780718">.</span><span class="ident" id="5780719">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5780725">if</span>&nbsp;<span class="ident" id="5780728">g</span>&nbsp;<span class="op" id="5780730">:=</span>&nbsp;<span class="ident" id="5780733">mset</span><span class="op" id="5780737">[</span><span class="ident" id="5780738">name</span><span class="op" id="5780742">]</span><span class="op" id="5780743">;</span>&nbsp;<span class="ident" id="5780745">g</span>&nbsp;<span class="op" id="5780747">!=</span>&nbsp;<span class="ident" id="5780750">nil</span>&nbsp;<span class="op" id="5780754">&amp;&amp;</span>&nbsp;<span class="ident" id="5780757">g</span><span class="op" id="5780758">.</span><span class="ident" id="5780759">Doc</span>&nbsp;<span class="op" id="5780763">!=</span>&nbsp;<span class="string" id="5780766">&#34;&#34;</span>&nbsp;<span class="op" id="5780769">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5780773">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5780837">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5780897">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5780960">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5781023">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781058">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5781069">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781127">recv</span>&nbsp;<span class="op" id="5781132">:=</span>&nbsp;<span class="string" id="5781135">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781139">if</span>&nbsp;<span class="ident" id="5781142">f</span><span class="op" id="5781143">.</span><span class="ident" id="5781144">Recv</span>&nbsp;<span class="op" id="5781149">!=</span>&nbsp;<span class="ident" id="5781152">nil</span>&nbsp;<span class="op" id="5781156">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781160">var</span>&nbsp;<span class="ident" id="5781164">typ</span>&nbsp;<span class="ident" id="5781168">ast</span><span class="op" id="5781171">.</span><span class="ident" id="5781172">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5781179">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781221">if</span>&nbsp;<span class="ident" id="5781224">list</span>&nbsp;<span class="op" id="5781229">:=</span>&nbsp;<span class="ident" id="5781232">f</span><span class="op" id="5781233">.</span><span class="ident" id="5781234">Recv</span><span class="op" id="5781238">.</span><span class="ident" id="5781239">List</span><span class="op" id="5781243">;</span>&nbsp;<span class="builtinfunc" id="5781245">len</span><span class="op" id="5781248">(</span><span class="ident" id="5781249">list</span><span class="op" id="5781253">)</span>&nbsp;<span class="op" id="5781255">==</span>&nbsp;<span class="num" id="5781258">1</span>&nbsp;<span class="op" id="5781260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781265">typ</span>&nbsp;<span class="op" id="5781269">=</span>&nbsp;<span class="ident" id="5781271">list</span><span class="op" id="5781275">[</span><span class="num" id="5781276">0</span><span class="op" id="5781277">]</span><span class="op" id="5781278">.</span><span class="ident" id="5781279">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781286">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781290">recv</span>&nbsp;<span class="op" id="5781295">=</span>&nbsp;<span class="ident" id="5781297">recvString</span><span class="op" id="5781307">(</span><span class="ident" id="5781308">typ</span><span class="op" id="5781311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781317">mset</span><span class="op" id="5781321">[</span><span class="ident" id="5781322">name</span><span class="op" id="5781326">]</span>&nbsp;<span class="op" id="5781328">=</span>&nbsp;<span class="op" id="5781330">&amp;</span><span class="ident" id="5781331">Func</span><span class="op" id="5781335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781339">Doc</span><span class="op" id="5781342">:</span>&nbsp;&nbsp;<span class="ident" id="5781345">f</span><span class="op" id="5781346">.</span><span class="ident" id="5781347">Doc</span><span class="op" id="5781350">.</span><span class="ident" id="5781351">Text</span><span class="op" id="5781355">(</span><span class="op" id="5781356">)</span><span class="op" id="5781357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781361">Name</span><span class="op" id="5781365">:</span>&nbsp;<span class="ident" id="5781367">name</span><span class="op" id="5781371">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781375">Decl</span><span class="op" id="5781379">:</span>&nbsp;<span class="ident" id="5781381">f</span><span class="op" id="5781382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781386">Recv</span><span class="op" id="5781390">:</span>&nbsp;<span class="ident" id="5781392">recv</span><span class="op" id="5781396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781400">Orig</span><span class="op" id="5781404">:</span>&nbsp;<span class="ident" id="5781406">recv</span><span class="op" id="5781410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781416">f</span><span class="op" id="5781417">.</span><span class="ident" id="5781418">Doc</span>&nbsp;<span class="op" id="5781422">=</span>&nbsp;<span class="ident" id="5781424">nil</span>&nbsp;<span class="comment" id="5781428">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="5781462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5781465">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="5781536">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="5781608">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="5781625">//</span><br>
<span class="lineno"></span><span class="keyword" id="5781628">func</span>&nbsp;<span class="op" id="5781633">(</span><span class="ident" id="5781634">mset</span>&nbsp;<span class="ident" id="5781639">methodSet</span><span class="op" id="5781648">)</span>&nbsp;<span class="ident" id="5781650">add</span><span class="op" id="5781653">(</span><span class="ident" id="5781654">m</span>&nbsp;<span class="op" id="5781656">*</span><span class="ident" id="5781657">Func</span><span class="op" id="5781661">)</span>&nbsp;<span class="op" id="5781663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781666">old</span>&nbsp;<span class="op" id="5781670">:=</span>&nbsp;<span class="ident" id="5781673">mset</span><span class="op" id="5781677">[</span><span class="ident" id="5781678">m</span><span class="op" id="5781679">.</span><span class="ident" id="5781680">Name</span><span class="op" id="5781684">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781687">if</span>&nbsp;<span class="ident" id="5781690">old</span>&nbsp;<span class="op" id="5781694">==</span>&nbsp;<span class="ident" id="5781697">nil</span>&nbsp;<span class="op" id="5781701">||</span>&nbsp;<span class="ident" id="5781704">m</span><span class="op" id="5781705">.</span><span class="ident" id="5781706">Level</span>&nbsp;<span class="op" id="5781712">&lt;</span>&nbsp;<span class="ident" id="5781714">old</span><span class="op" id="5781717">.</span><span class="ident" id="5781718">Level</span>&nbsp;<span class="op" id="5781724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781728">mset</span><span class="op" id="5781732">[</span><span class="ident" id="5781733">m</span><span class="op" id="5781734">.</span><span class="ident" id="5781735">Name</span><span class="op" id="5781739">]</span>&nbsp;<span class="op" id="5781741">=</span>&nbsp;<span class="ident" id="5781743">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781747">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5781758">if</span>&nbsp;<span class="ident" id="5781761">old</span>&nbsp;<span class="op" id="5781765">!=</span>&nbsp;<span class="ident" id="5781768">nil</span>&nbsp;<span class="op" id="5781772">&amp;&amp;</span>&nbsp;<span class="ident" id="5781775">m</span><span class="op" id="5781776">.</span><span class="ident" id="5781777">Level</span>&nbsp;<span class="op" id="5781783">==</span>&nbsp;<span class="ident" id="5781786">old</span><span class="op" id="5781789">.</span><span class="ident" id="5781790">Level</span>&nbsp;<span class="op" id="5781796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5781800">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781853">mset</span><span class="op" id="5781857">[</span><span class="ident" id="5781858">m</span><span class="op" id="5781859">.</span><span class="ident" id="5781860">Name</span><span class="op" id="5781864">]</span>&nbsp;<span class="op" id="5781866">=</span>&nbsp;<span class="op" id="5781868">&amp;</span><span class="ident" id="5781869">Func</span><span class="op" id="5781873">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781878">Name</span><span class="op" id="5781882">:</span>&nbsp;&nbsp;<span class="ident" id="5781885">m</span><span class="op" id="5781886">.</span><span class="ident" id="5781887">Name</span><span class="op" id="5781891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5781896">Level</span><span class="op" id="5781901">:</span>&nbsp;<span class="ident" id="5781903">m</span><span class="op" id="5781904">.</span><span class="ident" id="5781905">Level</span><span class="op" id="5781910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5781917">}</span><br>
<span class="lineno"></span><span class="op" id="5781919">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5781922">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5782002">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5782018">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="5782081">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="5782125">//</span><br>
<span class="lineno"></span><span class="keyword" id="5782128">func</span>&nbsp;<span class="ident" id="5782133">baseTypeName</span><span class="op" id="5782145">(</span><span class="ident" id="5782146">x</span>&nbsp;<span class="ident" id="5782148">ast</span><span class="op" id="5782151">.</span><span class="ident" id="5782152">Expr</span><span class="op" id="5782156">)</span>&nbsp;<span class="op" id="5782158">(</span><span class="ident" id="5782159">name</span>&nbsp;<span class="builtintype" id="5782164">string</span><span class="op" id="5782170">,</span>&nbsp;<span class="ident" id="5782172">imported</span>&nbsp;<span class="builtintype" id="5782181">bool</span><span class="op" id="5782185">)</span>&nbsp;<span class="op" id="5782187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782190">switch</span>&nbsp;<span class="ident" id="5782197">t</span>&nbsp;<span class="op" id="5782199">:=</span>&nbsp;<span class="ident" id="5782202">x</span><span class="op" id="5782203">.</span><span class="op" id="5782204">(</span><span class="keyword" id="5782205">type</span><span class="op" id="5782209">)</span>&nbsp;<span class="op" id="5782211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782214">case</span>&nbsp;<span class="op" id="5782219">*</span><span class="ident" id="5782220">ast</span><span class="op" id="5782223">.</span><span class="ident" id="5782224">Ident</span><span class="op" id="5782229">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782233">return</span>&nbsp;<span class="ident" id="5782240">t</span><span class="op" id="5782241">.</span><span class="ident" id="5782242">Name</span><span class="op" id="5782246">,</span>&nbsp;<span class="builtintype" id="5782248">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782255">case</span>&nbsp;<span class="op" id="5782260">*</span><span class="ident" id="5782261">ast</span><span class="op" id="5782264">.</span><span class="ident" id="5782265">SelectorExpr</span><span class="op" id="5782277">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782281">if</span>&nbsp;<span class="ident" id="5782284">_</span><span class="op" id="5782285">,</span>&nbsp;<span class="ident" id="5782287">ok</span>&nbsp;<span class="op" id="5782290">:=</span>&nbsp;<span class="ident" id="5782293">t</span><span class="op" id="5782294">.</span><span class="ident" id="5782295">X</span><span class="op" id="5782296">.</span><span class="op" id="5782297">(</span><span class="op" id="5782298">*</span><span class="ident" id="5782299">ast</span><span class="op" id="5782302">.</span><span class="ident" id="5782303">Ident</span><span class="op" id="5782308">)</span><span class="op" id="5782309">;</span>&nbsp;<span class="ident" id="5782311">ok</span>&nbsp;<span class="op" id="5782314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5782319">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5782365">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782395">return</span>&nbsp;<span class="ident" id="5782402">t</span><span class="op" id="5782403">.</span><span class="ident" id="5782404">Sel</span><span class="op" id="5782407">.</span><span class="ident" id="5782408">Name</span><span class="op" id="5782412">,</span>&nbsp;<span class="builtintype" id="5782414">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5782421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782424">case</span>&nbsp;<span class="op" id="5782429">*</span><span class="ident" id="5782430">ast</span><span class="op" id="5782433">.</span><span class="ident" id="5782434">StarExpr</span><span class="op" id="5782442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782446">return</span>&nbsp;<span class="ident" id="5782453">baseTypeName</span><span class="op" id="5782465">(</span><span class="ident" id="5782466">t</span><span class="op" id="5782467">.</span><span class="ident" id="5782468">X</span><span class="op" id="5782469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5782472">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5782475">return</span><br>
<span class="lineno"></span><span class="op" id="5782482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5782485">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5782538">type</span>&nbsp;<span class="ident" id="5782543">embeddedSet</span>&nbsp;<span class="keyword" id="5782555">map</span><span class="op" id="5782558">[</span><span class="op" id="5782559">*</span><span class="ident" id="5782560">namedType</span><span class="op" id="5782569">]</span><span class="builtintype" id="5782570">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5782576">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="5782650">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="5782722">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="5782744">//</span><br>
<span class="lineno">120</span><span class="keyword" id="5782747">type</span>&nbsp;<span class="ident" id="5782752">namedType</span>&nbsp;<span class="keyword" id="5782762">struct</span>&nbsp;<span class="op" id="5782769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5782772">doc</span>&nbsp;&nbsp;<span class="builtintype" id="5782777">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782790">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5782815">name</span>&nbsp;<span class="builtintype" id="5782820">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782833">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5782847">decl</span>&nbsp;<span class="op" id="5782852">*</span><span class="ident" id="5782853">ast</span><span class="op" id="5782856">.</span><span class="ident" id="5782857">GenDecl</span>&nbsp;<span class="comment" id="5782865">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5782910">isEmbedded</span>&nbsp;<span class="builtintype" id="5782921">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782933">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5782967">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5782978">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5782990">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783024">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5783035">embeddedSet</span>&nbsp;<span class="comment" id="5783047">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5783091">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783119">values</span>&nbsp;&nbsp;<span class="op" id="5783127">[</span><span class="op" id="5783128">]</span><span class="op" id="5783129">*</span><span class="ident" id="5783130">Value</span>&nbsp;<span class="comment" id="5783136">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783156">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5783164">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783175">methods</span>&nbsp;<span class="ident" id="5783183">methodSet</span><br>
<span class="lineno"></span><span class="op" id="5783193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="5783196">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5783276">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5783291">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="5783349">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="5783410">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5783467">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="5783527">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5783588">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="5783629">//</span><br>
<span class="lineno">145</span><span class="keyword" id="5783632">type</span>&nbsp;<span class="ident" id="5783637">reader</span>&nbsp;<span class="keyword" id="5783644">struct</span>&nbsp;<span class="op" id="5783651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783654">mode</span>&nbsp;<span class="ident" id="5783659">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5783666">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783689">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5783699">string</span>&nbsp;<span class="comment" id="5783706">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783740">filenames</span>&nbsp;<span class="op" id="5783750">[</span><span class="op" id="5783751">]</span><span class="builtintype" id="5783752">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783760">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783770">map</span><span class="op" id="5783773">[</span><span class="builtintype" id="5783774">string</span><span class="op" id="5783780">]</span><span class="op" id="5783781">[</span><span class="op" id="5783782">]</span><span class="op" id="5783783">*</span><span class="ident" id="5783784">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5783791">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783808">imports</span>&nbsp;<span class="keyword" id="5783816">map</span><span class="op" id="5783819">[</span><span class="builtintype" id="5783820">string</span><span class="op" id="5783826">]</span><span class="builtintype" id="5783827">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783832">values</span>&nbsp;&nbsp;<span class="op" id="5783840">[</span><span class="op" id="5783841">]</span><span class="op" id="5783842">*</span><span class="ident" id="5783843">Value</span>&nbsp;<span class="comment" id="5783849">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783869">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5783877">map</span><span class="op" id="5783880">[</span><span class="builtintype" id="5783881">string</span><span class="op" id="5783887">]</span><span class="op" id="5783888">*</span><span class="ident" id="5783889">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783900">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5783908">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5783920">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5783974">errorDecl</span>&nbsp;<span class="builtintype" id="5783984">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5784005">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784051">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5784061">[</span><span class="op" id="5784062">]</span><span class="op" id="5784063">*</span><span class="ident" id="5784064">ast</span><span class="op" id="5784067">.</span><span class="ident" id="5784068">InterfaceType</span>&nbsp;<span class="comment" id="5784082">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="5784139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5784142">func</span>&nbsp;<span class="op" id="5784147">(</span><span class="ident" id="5784148">r</span>&nbsp;<span class="op" id="5784150">*</span><span class="ident" id="5784151">reader</span><span class="op" id="5784157">)</span>&nbsp;<span class="ident" id="5784159">isVisible</span><span class="op" id="5784168">(</span><span class="ident" id="5784169">name</span>&nbsp;<span class="builtintype" id="5784174">string</span><span class="op" id="5784180">)</span>&nbsp;<span class="builtintype" id="5784182">bool</span>&nbsp;<span class="op" id="5784187">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5784190">return</span>&nbsp;<span class="ident" id="5784197">r</span><span class="op" id="5784198">.</span><span class="ident" id="5784199">mode</span><span class="op" id="5784203">&amp;</span><span class="ident" id="5784204">AllDecls</span>&nbsp;<span class="op" id="5784213">!=</span>&nbsp;<span class="num" id="5784216">0</span>&nbsp;<span class="op" id="5784218">||</span>&nbsp;<span class="ident" id="5784221">ast</span><span class="op" id="5784224">.</span><span class="ident" id="5784225">IsExported</span><span class="op" id="5784235">(</span><span class="ident" id="5784236">name</span><span class="op" id="5784240">)</span><br>
<span class="lineno"></span><span class="op" id="5784242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5784245">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5784302">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="5784358">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="5784416">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="5784445">//</span><br>
<span class="lineno"></span><span class="keyword" id="5784448">func</span>&nbsp;<span class="op" id="5784453">(</span><span class="ident" id="5784454">r</span>&nbsp;<span class="op" id="5784456">*</span><span class="ident" id="5784457">reader</span><span class="op" id="5784463">)</span>&nbsp;<span class="ident" id="5784465">lookupType</span><span class="op" id="5784475">(</span><span class="ident" id="5784476">name</span>&nbsp;<span class="builtintype" id="5784481">string</span><span class="op" id="5784487">)</span>&nbsp;<span class="op" id="5784489">*</span><span class="ident" id="5784490">namedType</span>&nbsp;<span class="op" id="5784500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5784503">if</span>&nbsp;<span class="ident" id="5784506">name</span>&nbsp;<span class="op" id="5784511">==</span>&nbsp;<span class="string" id="5784514">&#34;&#34;</span>&nbsp;<span class="op" id="5784517">||</span>&nbsp;<span class="ident" id="5784520">name</span>&nbsp;<span class="op" id="5784525">==</span>&nbsp;<span class="string" id="5784528">&#34;_&#34;</span>&nbsp;<span class="op" id="5784532">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5784536">return</span>&nbsp;<span class="ident" id="5784543">nil</span>&nbsp;<span class="comment" id="5784547">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5784584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5784587">if</span>&nbsp;<span class="ident" id="5784590">typ</span><span class="op" id="5784593">,</span>&nbsp;<span class="ident" id="5784595">found</span>&nbsp;<span class="op" id="5784601">:=</span>&nbsp;<span class="ident" id="5784604">r</span><span class="op" id="5784605">.</span><span class="ident" id="5784606">types</span><span class="op" id="5784611">[</span><span class="ident" id="5784612">name</span><span class="op" id="5784616">]</span><span class="op" id="5784617">;</span>&nbsp;<span class="ident" id="5784619">found</span>&nbsp;<span class="op" id="5784625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5784629">return</span>&nbsp;<span class="ident" id="5784636">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5784641">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5784644">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784693">typ</span>&nbsp;<span class="op" id="5784697">:=</span>&nbsp;<span class="op" id="5784700">&amp;</span><span class="ident" id="5784701">namedType</span><span class="op" id="5784710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784714">name</span><span class="op" id="5784718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5784724">name</span><span class="op" id="5784728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784732">embedded</span><span class="op" id="5784740">:</span>&nbsp;<span class="builtinfunc" id="5784742">make</span><span class="op" id="5784746">(</span><span class="ident" id="5784747">embeddedSet</span><span class="op" id="5784758">)</span><span class="op" id="5784759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784763">funcs</span><span class="op" id="5784768">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5784773">make</span><span class="op" id="5784777">(</span><span class="ident" id="5784778">methodSet</span><span class="op" id="5784787">)</span><span class="op" id="5784788">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784792">methods</span><span class="op" id="5784799">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="5784802">make</span><span class="op" id="5784806">(</span><span class="ident" id="5784807">methodSet</span><span class="op" id="5784816">)</span><span class="op" id="5784817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5784820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5784823">r</span><span class="op" id="5784824">.</span><span class="ident" id="5784825">types</span><span class="op" id="5784830">[</span><span class="ident" id="5784831">name</span><span class="op" id="5784835">]</span>&nbsp;<span class="op" id="5784837">=</span>&nbsp;<span class="ident" id="5784839">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5784844">return</span>&nbsp;<span class="ident" id="5784851">typ</span><br>
<span class="lineno"></span><span class="op" id="5784855">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5784858">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5784920">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5784984">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5785048">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="5785088">//</span><br>
<span class="lineno"></span><span class="keyword" id="5785091">func</span>&nbsp;<span class="op" id="5785096">(</span><span class="ident" id="5785097">r</span>&nbsp;<span class="op" id="5785099">*</span><span class="ident" id="5785100">reader</span><span class="op" id="5785106">)</span>&nbsp;<span class="ident" id="5785108">recordAnonymousField</span><span class="op" id="5785128">(</span><span class="ident" id="5785129">parent</span>&nbsp;<span class="op" id="5785136">*</span><span class="ident" id="5785137">namedType</span><span class="op" id="5785146">,</span>&nbsp;<span class="ident" id="5785148">fieldType</span>&nbsp;<span class="ident" id="5785158">ast</span><span class="op" id="5785161">.</span><span class="ident" id="5785162">Expr</span><span class="op" id="5785166">)</span>&nbsp;<span class="op" id="5785168">(</span><span class="ident" id="5785169">fname</span>&nbsp;<span class="builtintype" id="5785175">string</span><span class="op" id="5785181">)</span>&nbsp;<span class="op" id="5785183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785186">fname</span><span class="op" id="5785191">,</span>&nbsp;<span class="ident" id="5785193">imp</span>&nbsp;<span class="op" id="5785197">:=</span>&nbsp;<span class="ident" id="5785200">baseTypeName</span><span class="op" id="5785212">(</span><span class="ident" id="5785213">fieldType</span><span class="op" id="5785222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785225">if</span>&nbsp;<span class="ident" id="5785228">parent</span>&nbsp;<span class="op" id="5785235">==</span>&nbsp;<span class="ident" id="5785238">nil</span>&nbsp;<span class="op" id="5785242">||</span>&nbsp;<span class="ident" id="5785245">imp</span>&nbsp;<span class="op" id="5785249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785253">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5785261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785264">if</span>&nbsp;<span class="ident" id="5785267">ftype</span>&nbsp;<span class="op" id="5785273">:=</span>&nbsp;<span class="ident" id="5785276">r</span><span class="op" id="5785277">.</span><span class="ident" id="5785278">lookupType</span><span class="op" id="5785288">(</span><span class="ident" id="5785289">fname</span><span class="op" id="5785294">)</span><span class="op" id="5785295">;</span>&nbsp;<span class="ident" id="5785297">ftype</span>&nbsp;<span class="op" id="5785303">!=</span>&nbsp;<span class="ident" id="5785306">nil</span>&nbsp;<span class="op" id="5785310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785314">ftype</span><span class="op" id="5785319">.</span><span class="ident" id="5785320">isEmbedded</span>&nbsp;<span class="op" id="5785331">=</span>&nbsp;<span class="builtintype" id="5785333">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785340">_</span><span class="op" id="5785341">,</span>&nbsp;<span class="ident" id="5785343">ptr</span>&nbsp;<span class="op" id="5785347">:=</span>&nbsp;<span class="ident" id="5785350">fieldType</span><span class="op" id="5785359">.</span><span class="op" id="5785360">(</span><span class="op" id="5785361">*</span><span class="ident" id="5785362">ast</span><span class="op" id="5785365">.</span><span class="ident" id="5785366">StarExpr</span><span class="op" id="5785374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785378">parent</span><span class="op" id="5785384">.</span><span class="ident" id="5785385">embedded</span><span class="op" id="5785393">[</span><span class="ident" id="5785394">ftype</span><span class="op" id="5785399">]</span>&nbsp;<span class="op" id="5785401">=</span>&nbsp;<span class="ident" id="5785403">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5785408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785411">return</span><br>
<span class="lineno"></span><span class="op" id="5785418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5785421">func</span>&nbsp;<span class="op" id="5785426">(</span><span class="ident" id="5785427">r</span>&nbsp;<span class="op" id="5785429">*</span><span class="ident" id="5785430">reader</span><span class="op" id="5785436">)</span>&nbsp;<span class="ident" id="5785438">readDoc</span><span class="op" id="5785445">(</span><span class="ident" id="5785446">comment</span>&nbsp;<span class="op" id="5785454">*</span><span class="ident" id="5785455">ast</span><span class="op" id="5785458">.</span><span class="ident" id="5785459">CommentGroup</span><span class="op" id="5785471">)</span>&nbsp;<span class="op" id="5785473">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5785476">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5785535">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785591">text</span>&nbsp;<span class="op" id="5785596">:=</span>&nbsp;<span class="ident" id="5785599">comment</span><span class="op" id="5785606">.</span><span class="ident" id="5785607">Text</span><span class="op" id="5785611">(</span><span class="op" id="5785612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785615">if</span>&nbsp;<span class="ident" id="5785618">r</span><span class="op" id="5785619">.</span><span class="ident" id="5785620">doc</span>&nbsp;<span class="op" id="5785624">==</span>&nbsp;<span class="string" id="5785627">&#34;&#34;</span>&nbsp;<span class="op" id="5785630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785634">r</span><span class="op" id="5785635">.</span><span class="ident" id="5785636">doc</span>&nbsp;<span class="op" id="5785640">=</span>&nbsp;<span class="ident" id="5785642">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785649">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5785657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785660">r</span><span class="op" id="5785661">.</span><span class="ident" id="5785662">doc</span>&nbsp;<span class="op" id="5785666">+=</span>&nbsp;<span class="string" id="5785669">&#34;\n&#34;</span>&nbsp;<span class="op" id="5785674">+</span>&nbsp;<span class="ident" id="5785676">text</span><br>
<span class="lineno"></span><span class="op" id="5785681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="5785684">func</span>&nbsp;<span class="op" id="5785689">(</span><span class="ident" id="5785690">r</span>&nbsp;<span class="op" id="5785692">*</span><span class="ident" id="5785693">reader</span><span class="op" id="5785699">)</span>&nbsp;<span class="ident" id="5785701">remember</span><span class="op" id="5785709">(</span><span class="ident" id="5785710">typ</span>&nbsp;<span class="op" id="5785714">*</span><span class="ident" id="5785715">ast</span><span class="op" id="5785718">.</span><span class="ident" id="5785719">InterfaceType</span><span class="op" id="5785732">)</span>&nbsp;<span class="op" id="5785734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785737">r</span><span class="op" id="5785738">.</span><span class="ident" id="5785739">fixlist</span>&nbsp;<span class="op" id="5785747">=</span>&nbsp;<span class="builtinfunc" id="5785749">append</span><span class="op" id="5785755">(</span><span class="ident" id="5785756">r</span><span class="op" id="5785757">.</span><span class="ident" id="5785758">fixlist</span><span class="op" id="5785765">,</span>&nbsp;<span class="ident" id="5785767">typ</span><span class="op" id="5785770">)</span><br>
<span class="lineno"></span><span class="op" id="5785772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5785775">func</span>&nbsp;<span class="ident" id="5785780">specNames</span><span class="op" id="5785789">(</span><span class="ident" id="5785790">specs</span>&nbsp;<span class="op" id="5785796">[</span><span class="op" id="5785797">]</span><span class="ident" id="5785798">ast</span><span class="op" id="5785801">.</span><span class="ident" id="5785802">Spec</span><span class="op" id="5785806">)</span>&nbsp;<span class="op" id="5785808">[</span><span class="op" id="5785809">]</span><span class="builtintype" id="5785810">string</span>&nbsp;<span class="op" id="5785817">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5785820">names</span>&nbsp;<span class="op" id="5785826">:=</span>&nbsp;<span class="builtinfunc" id="5785829">make</span><span class="op" id="5785833">(</span><span class="op" id="5785834">[</span><span class="op" id="5785835">]</span><span class="builtintype" id="5785836">string</span><span class="op" id="5785842">,</span>&nbsp;<span class="num" id="5785844">0</span><span class="op" id="5785845">,</span>&nbsp;<span class="builtinfunc" id="5785847">len</span><span class="op" id="5785850">(</span><span class="ident" id="5785851">specs</span><span class="op" id="5785856">)</span><span class="op" id="5785857">)</span>&nbsp;<span class="comment" id="5785859">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785883">for</span>&nbsp;<span class="ident" id="5785887">_</span><span class="op" id="5785888">,</span>&nbsp;<span class="ident" id="5785890">s</span>&nbsp;<span class="op" id="5785892">:=</span>&nbsp;<span class="keyword" id="5785895">range</span>&nbsp;<span class="ident" id="5785901">specs</span>&nbsp;<span class="op" id="5785907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5785911">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5785966">for</span>&nbsp;<span class="ident" id="5785970">_</span><span class="op" id="5785971">,</span>&nbsp;<span class="ident" id="5785973">ident</span>&nbsp;<span class="op" id="5785979">:=</span>&nbsp;<span class="keyword" id="5785982">range</span>&nbsp;<span class="ident" id="5785988">s</span><span class="op" id="5785989">.</span><span class="op" id="5785990">(</span><span class="op" id="5785991">*</span><span class="ident" id="5785992">ast</span><span class="op" id="5785995">.</span><span class="ident" id="5785996">ValueSpec</span><span class="op" id="5786005">)</span><span class="op" id="5786006">.</span><span class="ident" id="5786007">Names</span>&nbsp;<span class="op" id="5786013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786018">names</span>&nbsp;<span class="op" id="5786024">=</span>&nbsp;<span class="builtinfunc" id="5786026">append</span><span class="op" id="5786032">(</span><span class="ident" id="5786033">names</span><span class="op" id="5786038">,</span>&nbsp;<span class="ident" id="5786040">ident</span><span class="op" id="5786045">.</span><span class="ident" id="5786046">Name</span><span class="op" id="5786050">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5786054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5786057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786060">return</span>&nbsp;<span class="ident" id="5786067">names</span><br>
<span class="lineno"></span><span class="op" id="5786073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="5786076">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5786127">//</span><br>
<span class="lineno"></span><span class="keyword" id="5786130">func</span>&nbsp;<span class="op" id="5786135">(</span><span class="ident" id="5786136">r</span>&nbsp;<span class="op" id="5786138">*</span><span class="ident" id="5786139">reader</span><span class="op" id="5786145">)</span>&nbsp;<span class="ident" id="5786147">readValue</span><span class="op" id="5786156">(</span><span class="ident" id="5786157">decl</span>&nbsp;<span class="op" id="5786162">*</span><span class="ident" id="5786163">ast</span><span class="op" id="5786166">.</span><span class="ident" id="5786167">GenDecl</span><span class="op" id="5786174">)</span>&nbsp;<span class="op" id="5786176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786179">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786234">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786304">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786374">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786444">domName</span>&nbsp;<span class="op" id="5786452">:=</span>&nbsp;<span class="string" id="5786455">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786459">domFreq</span>&nbsp;<span class="op" id="5786467">:=</span>&nbsp;<span class="num" id="5786470">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786473">prev</span>&nbsp;<span class="op" id="5786478">:=</span>&nbsp;<span class="string" id="5786481">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786485">n</span>&nbsp;<span class="op" id="5786487">:=</span>&nbsp;<span class="num" id="5786490">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786493">for</span>&nbsp;<span class="ident" id="5786497">_</span><span class="op" id="5786498">,</span>&nbsp;<span class="ident" id="5786500">spec</span>&nbsp;<span class="op" id="5786505">:=</span>&nbsp;<span class="keyword" id="5786508">range</span>&nbsp;<span class="ident" id="5786514">decl</span><span class="op" id="5786518">.</span><span class="ident" id="5786519">Specs</span>&nbsp;<span class="op" id="5786525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786529">s</span><span class="op" id="5786530">,</span>&nbsp;<span class="ident" id="5786532">ok</span>&nbsp;<span class="op" id="5786535">:=</span>&nbsp;<span class="ident" id="5786538">spec</span><span class="op" id="5786542">.</span><span class="op" id="5786543">(</span><span class="op" id="5786544">*</span><span class="ident" id="5786545">ast</span><span class="op" id="5786548">.</span><span class="ident" id="5786549">ValueSpec</span><span class="op" id="5786558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786562">if</span>&nbsp;<span class="op" id="5786565">!</span><span class="ident" id="5786566">ok</span>&nbsp;<span class="op" id="5786569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786574">continue</span>&nbsp;<span class="comment" id="5786583">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5786627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786631">name</span>&nbsp;<span class="op" id="5786636">:=</span>&nbsp;<span class="string" id="5786639">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786644">switch</span>&nbsp;<span class="op" id="5786651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786655">case</span>&nbsp;<span class="ident" id="5786660">s</span><span class="op" id="5786661">.</span><span class="ident" id="5786662">Type</span>&nbsp;<span class="op" id="5786667">!=</span>&nbsp;<span class="ident" id="5786670">nil</span><span class="op" id="5786673">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786678">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786722">if</span>&nbsp;<span class="ident" id="5786725">n</span><span class="op" id="5786726">,</span>&nbsp;<span class="ident" id="5786728">imp</span>&nbsp;<span class="op" id="5786732">:=</span>&nbsp;<span class="ident" id="5786735">baseTypeName</span><span class="op" id="5786747">(</span><span class="ident" id="5786748">s</span><span class="op" id="5786749">.</span><span class="ident" id="5786750">Type</span><span class="op" id="5786754">)</span><span class="op" id="5786755">;</span>&nbsp;<span class="op" id="5786757">!</span><span class="ident" id="5786758">imp</span>&nbsp;<span class="op" id="5786762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5786768">name</span>&nbsp;<span class="op" id="5786773">=</span>&nbsp;<span class="ident" id="5786775">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5786780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5786784">case</span>&nbsp;<span class="ident" id="5786789">decl</span><span class="op" id="5786793">.</span><span class="ident" id="5786794">Tok</span>&nbsp;<span class="op" id="5786798">==</span>&nbsp;<span class="ident" id="5786801">token</span><span class="op" id="5786806">.</span><span class="ident" id="5786807">CONST</span><span class="op" id="5786812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786817">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786878">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786938">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5786996">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787057">name</span>&nbsp;<span class="op" id="5787062">=</span>&nbsp;<span class="ident" id="5787064">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787071">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787075">if</span>&nbsp;<span class="ident" id="5787078">name</span>&nbsp;<span class="op" id="5787083">!=</span>&nbsp;<span class="string" id="5787086">&#34;&#34;</span>&nbsp;<span class="op" id="5787089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5787094">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787123">if</span>&nbsp;<span class="ident" id="5787126">domName</span>&nbsp;<span class="op" id="5787134">!=</span>&nbsp;<span class="string" id="5787137">&#34;&#34;</span>&nbsp;<span class="op" id="5787140">&amp;&amp;</span>&nbsp;<span class="ident" id="5787143">domName</span>&nbsp;<span class="op" id="5787151">!=</span>&nbsp;<span class="ident" id="5787154">name</span>&nbsp;<span class="op" id="5787159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5787165">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5787215">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787236">domName</span>&nbsp;<span class="op" id="5787244">=</span>&nbsp;<span class="string" id="5787246">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787253">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787267">domName</span>&nbsp;<span class="op" id="5787275">=</span>&nbsp;<span class="ident" id="5787277">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787285">domFreq</span><span class="op" id="5787292">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787301">prev</span>&nbsp;<span class="op" id="5787306">=</span>&nbsp;<span class="ident" id="5787308">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787315">n</span><span class="op" id="5787316">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5787324">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787366">if</span>&nbsp;<span class="ident" id="5787369">n</span>&nbsp;<span class="op" id="5787371">==</span>&nbsp;<span class="num" id="5787374">0</span>&nbsp;<span class="op" id="5787376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787380">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5787392">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787466">values</span>&nbsp;<span class="op" id="5787473">:=</span>&nbsp;<span class="op" id="5787476">&amp;</span><span class="ident" id="5787477">r</span><span class="op" id="5787478">.</span><span class="ident" id="5787479">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787487">const</span>&nbsp;<span class="ident" id="5787493">threshold</span>&nbsp;<span class="op" id="5787503">=</span>&nbsp;<span class="num" id="5787505">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787511">if</span>&nbsp;<span class="ident" id="5787514">domName</span>&nbsp;<span class="op" id="5787522">!=</span>&nbsp;<span class="string" id="5787525">&#34;&#34;</span>&nbsp;<span class="op" id="5787528">&amp;&amp;</span>&nbsp;<span class="ident" id="5787531">r</span><span class="op" id="5787532">.</span><span class="ident" id="5787533">isVisible</span><span class="op" id="5787542">(</span><span class="ident" id="5787543">domName</span><span class="op" id="5787550">)</span>&nbsp;<span class="op" id="5787552">&amp;&amp;</span>&nbsp;<span class="ident" id="5787555">domFreq</span>&nbsp;<span class="op" id="5787563">&gt;=</span>&nbsp;<span class="builtintype" id="5787566">int</span><span class="op" id="5787569">(</span><span class="builtintype" id="5787570">float64</span><span class="op" id="5787577">(</span><span class="builtinfunc" id="5787578">len</span><span class="op" id="5787581">(</span><span class="ident" id="5787582">decl</span><span class="op" id="5787586">.</span><span class="ident" id="5787587">Specs</span><span class="op" id="5787592">)</span><span class="op" id="5787593">)</span><span class="op" id="5787594">*</span><span class="ident" id="5787595">threshold</span><span class="op" id="5787604">)</span>&nbsp;<span class="op" id="5787606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5787610">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5787655">if</span>&nbsp;<span class="ident" id="5787658">typ</span>&nbsp;<span class="op" id="5787662">:=</span>&nbsp;<span class="ident" id="5787665">r</span><span class="op" id="5787666">.</span><span class="ident" id="5787667">lookupType</span><span class="op" id="5787677">(</span><span class="ident" id="5787678">domName</span><span class="op" id="5787685">)</span><span class="op" id="5787686">;</span>&nbsp;<span class="ident" id="5787688">typ</span>&nbsp;<span class="op" id="5787692">!=</span>&nbsp;<span class="ident" id="5787695">nil</span>&nbsp;<span class="op" id="5787699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787704">values</span>&nbsp;<span class="op" id="5787711">=</span>&nbsp;<span class="op" id="5787713">&amp;</span><span class="ident" id="5787714">typ</span><span class="op" id="5787717">.</span><span class="ident" id="5787718">values</span>&nbsp;<span class="comment" id="5787725">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787762">*</span><span class="ident" id="5787763">values</span>&nbsp;<span class="op" id="5787770">=</span>&nbsp;<span class="builtinfunc" id="5787772">append</span><span class="op" id="5787778">(</span><span class="op" id="5787779">*</span><span class="ident" id="5787780">values</span><span class="op" id="5787786">,</span>&nbsp;<span class="op" id="5787788">&amp;</span><span class="ident" id="5787789">Value</span><span class="op" id="5787794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787798">Doc</span><span class="op" id="5787801">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5787805">decl</span><span class="op" id="5787809">.</span><span class="ident" id="5787810">Doc</span><span class="op" id="5787813">.</span><span class="ident" id="5787814">Text</span><span class="op" id="5787818">(</span><span class="op" id="5787819">)</span><span class="op" id="5787820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787824">Names</span><span class="op" id="5787829">:</span>&nbsp;<span class="ident" id="5787831">specNames</span><span class="op" id="5787840">(</span><span class="ident" id="5787841">decl</span><span class="op" id="5787845">.</span><span class="ident" id="5787846">Specs</span><span class="op" id="5787851">)</span><span class="op" id="5787852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787856">Decl</span><span class="op" id="5787860">:</span>&nbsp;&nbsp;<span class="ident" id="5787863">decl</span><span class="op" id="5787867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787871">order</span><span class="op" id="5787876">:</span>&nbsp;<span class="builtinfunc" id="5787878">len</span><span class="op" id="5787881">(</span><span class="op" id="5787882">*</span><span class="ident" id="5787883">values</span><span class="op" id="5787889">)</span><span class="op" id="5787890">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5787893">}</span><span class="op" id="5787894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5787897">decl</span><span class="op" id="5787901">.</span><span class="ident" id="5787902">Doc</span>&nbsp;<span class="op" id="5787906">=</span>&nbsp;<span class="ident" id="5787908">nil</span>&nbsp;<span class="comment" id="5787912">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5787946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5787949">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="5788012">//</span><br>
<span class="lineno"></span><span class="keyword" id="5788015">func</span>&nbsp;<span class="ident" id="5788020">fields</span><span class="op" id="5788026">(</span><span class="ident" id="5788027">typ</span>&nbsp;<span class="ident" id="5788031">ast</span><span class="op" id="5788034">.</span><span class="ident" id="5788035">Expr</span><span class="op" id="5788039">)</span>&nbsp;<span class="op" id="5788041">(</span><span class="ident" id="5788042">list</span>&nbsp;<span class="op" id="5788047">[</span><span class="op" id="5788048">]</span><span class="op" id="5788049">*</span><span class="ident" id="5788050">ast</span><span class="op" id="5788053">.</span><span class="ident" id="5788054">Field</span><span class="op" id="5788059">,</span>&nbsp;<span class="ident" id="5788061">isStruct</span>&nbsp;<span class="builtintype" id="5788070">bool</span><span class="op" id="5788074">)</span>&nbsp;<span class="op" id="5788076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788079">var</span>&nbsp;<span class="ident" id="5788083">fields</span>&nbsp;<span class="op" id="5788090">*</span><span class="ident" id="5788091">ast</span><span class="op" id="5788094">.</span><span class="ident" id="5788095">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788106">switch</span>&nbsp;<span class="ident" id="5788113">t</span>&nbsp;<span class="op" id="5788115">:=</span>&nbsp;<span class="ident" id="5788118">typ</span><span class="op" id="5788121">.</span><span class="op" id="5788122">(</span><span class="keyword" id="5788123">type</span><span class="op" id="5788127">)</span>&nbsp;<span class="op" id="5788129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788132">case</span>&nbsp;<span class="op" id="5788137">*</span><span class="ident" id="5788138">ast</span><span class="op" id="5788141">.</span><span class="ident" id="5788142">StructType</span><span class="op" id="5788152">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788156">fields</span>&nbsp;<span class="op" id="5788163">=</span>&nbsp;<span class="ident" id="5788165">t</span><span class="op" id="5788166">.</span><span class="ident" id="5788167">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788176">isStruct</span>&nbsp;<span class="op" id="5788185">=</span>&nbsp;<span class="builtintype" id="5788187">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788193">case</span>&nbsp;<span class="op" id="5788198">*</span><span class="ident" id="5788199">ast</span><span class="op" id="5788202">.</span><span class="ident" id="5788203">InterfaceType</span><span class="op" id="5788216">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788220">fields</span>&nbsp;<span class="op" id="5788227">=</span>&nbsp;<span class="ident" id="5788229">t</span><span class="op" id="5788230">.</span><span class="ident" id="5788231">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5788240">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788243">if</span>&nbsp;<span class="ident" id="5788246">fields</span>&nbsp;<span class="op" id="5788253">!=</span>&nbsp;<span class="ident" id="5788256">nil</span>&nbsp;<span class="op" id="5788260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788264">list</span>&nbsp;<span class="op" id="5788269">=</span>&nbsp;<span class="ident" id="5788271">fields</span><span class="op" id="5788277">.</span><span class="ident" id="5788278">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5788284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788287">return</span><br>
<span class="lineno"></span><span class="op" id="5788294">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5788297">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5788339">//</span><br>
<span class="lineno"></span><span class="keyword" id="5788342">func</span>&nbsp;<span class="op" id="5788347">(</span><span class="ident" id="5788348">r</span>&nbsp;<span class="op" id="5788350">*</span><span class="ident" id="5788351">reader</span><span class="op" id="5788357">)</span>&nbsp;<span class="ident" id="5788359">readType</span><span class="op" id="5788367">(</span><span class="ident" id="5788368">decl</span>&nbsp;<span class="op" id="5788373">*</span><span class="ident" id="5788374">ast</span><span class="op" id="5788377">.</span><span class="ident" id="5788378">GenDecl</span><span class="op" id="5788385">,</span>&nbsp;<span class="ident" id="5788387">spec</span>&nbsp;<span class="op" id="5788392">*</span><span class="ident" id="5788393">ast</span><span class="op" id="5788396">.</span><span class="ident" id="5788397">TypeSpec</span><span class="op" id="5788405">)</span>&nbsp;<span class="op" id="5788407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788410">typ</span>&nbsp;<span class="op" id="5788414">:=</span>&nbsp;<span class="ident" id="5788417">r</span><span class="op" id="5788418">.</span><span class="ident" id="5788419">lookupType</span><span class="op" id="5788429">(</span><span class="ident" id="5788430">spec</span><span class="op" id="5788434">.</span><span class="ident" id="5788435">Name</span><span class="op" id="5788439">.</span><span class="ident" id="5788440">Name</span><span class="op" id="5788444">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788447">if</span>&nbsp;<span class="ident" id="5788450">typ</span>&nbsp;<span class="op" id="5788454">==</span>&nbsp;<span class="ident" id="5788457">nil</span>&nbsp;<span class="op" id="5788461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788465">return</span>&nbsp;<span class="comment" id="5788472">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5788516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5788520">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5788573">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788628">typ</span><span class="op" id="5788631">.</span><span class="ident" id="5788632">decl</span>&nbsp;<span class="op" id="5788637">=</span>&nbsp;<span class="ident" id="5788639">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5788646">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788672">doc</span>&nbsp;<span class="op" id="5788676">:=</span>&nbsp;<span class="ident" id="5788679">spec</span><span class="op" id="5788683">.</span><span class="ident" id="5788684">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788689">spec</span><span class="op" id="5788693">.</span><span class="ident" id="5788694">Doc</span>&nbsp;<span class="op" id="5788698">=</span>&nbsp;<span class="ident" id="5788700">nil</span>&nbsp;<span class="comment" id="5788704">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5788739">if</span>&nbsp;<span class="ident" id="5788742">doc</span>&nbsp;<span class="op" id="5788746">==</span>&nbsp;<span class="ident" id="5788749">nil</span>&nbsp;<span class="op" id="5788753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5788757">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788827">doc</span>&nbsp;<span class="op" id="5788831">=</span>&nbsp;<span class="ident" id="5788833">decl</span><span class="op" id="5788837">.</span><span class="ident" id="5788838">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5788843">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788846">decl</span><span class="op" id="5788850">.</span><span class="ident" id="5788851">Doc</span>&nbsp;<span class="op" id="5788855">=</span>&nbsp;<span class="ident" id="5788857">nil</span>&nbsp;<span class="comment" id="5788861">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5788896">typ</span><span class="op" id="5788899">.</span><span class="ident" id="5788900">doc</span>&nbsp;<span class="op" id="5788904">=</span>&nbsp;<span class="ident" id="5788906">doc</span><span class="op" id="5788909">.</span><span class="ident" id="5788910">Text</span><span class="op" id="5788914">(</span><span class="op" id="5788915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5788919">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5788977">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789040">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789068">var</span>&nbsp;<span class="ident" id="5789072">list</span>&nbsp;<span class="op" id="5789077">[</span><span class="op" id="5789078">]</span><span class="op" id="5789079">*</span><span class="ident" id="5789080">ast</span><span class="op" id="5789083">.</span><span class="ident" id="5789084">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789091">list</span><span class="op" id="5789095">,</span>&nbsp;<span class="ident" id="5789097">typ</span><span class="op" id="5789100">.</span><span class="ident" id="5789101">isStruct</span>&nbsp;<span class="op" id="5789110">=</span>&nbsp;<span class="ident" id="5789112">fields</span><span class="op" id="5789118">(</span><span class="ident" id="5789119">spec</span><span class="op" id="5789123">.</span><span class="ident" id="5789124">Type</span><span class="op" id="5789128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789131">for</span>&nbsp;<span class="ident" id="5789135">_</span><span class="op" id="5789136">,</span>&nbsp;<span class="ident" id="5789138">field</span>&nbsp;<span class="op" id="5789144">:=</span>&nbsp;<span class="keyword" id="5789147">range</span>&nbsp;<span class="ident" id="5789153">list</span>&nbsp;<span class="op" id="5789158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789162">if</span>&nbsp;<span class="builtinfunc" id="5789165">len</span><span class="op" id="5789168">(</span><span class="ident" id="5789169">field</span><span class="op" id="5789174">.</span><span class="ident" id="5789175">Names</span><span class="op" id="5789180">)</span>&nbsp;<span class="op" id="5789182">==</span>&nbsp;<span class="num" id="5789185">0</span>&nbsp;<span class="op" id="5789187">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789192">r</span><span class="op" id="5789193">.</span><span class="ident" id="5789194">recordAnonymousField</span><span class="op" id="5789214">(</span><span class="ident" id="5789215">typ</span><span class="op" id="5789218">,</span>&nbsp;<span class="ident" id="5789220">field</span><span class="op" id="5789225">.</span><span class="ident" id="5789226">Type</span><span class="op" id="5789230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789237">}</span><br>
<span class="lineno"></span><span class="op" id="5789239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="5789242">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5789294">//</span><br>
<span class="lineno"></span><span class="keyword" id="5789297">func</span>&nbsp;<span class="op" id="5789302">(</span><span class="ident" id="5789303">r</span>&nbsp;<span class="op" id="5789305">*</span><span class="ident" id="5789306">reader</span><span class="op" id="5789312">)</span>&nbsp;<span class="ident" id="5789314">readFunc</span><span class="op" id="5789322">(</span><span class="ident" id="5789323">fun</span>&nbsp;<span class="op" id="5789327">*</span><span class="ident" id="5789328">ast</span><span class="op" id="5789331">.</span><span class="ident" id="5789332">FuncDecl</span><span class="op" id="5789340">)</span>&nbsp;<span class="op" id="5789342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789345">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789369">fun</span><span class="op" id="5789372">.</span><span class="ident" id="5789373">Body</span>&nbsp;<span class="op" id="5789378">=</span>&nbsp;<span class="ident" id="5789380">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789386">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789439">if</span>&nbsp;<span class="ident" id="5789442">fun</span><span class="op" id="5789445">.</span><span class="ident" id="5789446">Recv</span>&nbsp;<span class="op" id="5789451">!=</span>&nbsp;<span class="ident" id="5789454">nil</span>&nbsp;<span class="op" id="5789458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789462">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789474">recvTypeName</span><span class="op" id="5789486">,</span>&nbsp;<span class="ident" id="5789488">imp</span>&nbsp;<span class="op" id="5789492">:=</span>&nbsp;<span class="ident" id="5789495">baseTypeName</span><span class="op" id="5789507">(</span><span class="ident" id="5789508">fun</span><span class="op" id="5789511">.</span><span class="ident" id="5789512">Recv</span><span class="op" id="5789516">.</span><span class="ident" id="5789517">List</span><span class="op" id="5789521">[</span><span class="num" id="5789522">0</span><span class="op" id="5789523">]</span><span class="op" id="5789524">.</span><span class="ident" id="5789525">Type</span><span class="op" id="5789529">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789533">if</span>&nbsp;<span class="ident" id="5789536">imp</span>&nbsp;<span class="op" id="5789540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789545">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789586">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789615">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789624">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5789628">if</span>&nbsp;<span class="ident" id="5789631">typ</span>&nbsp;<span class="op" id="5789635">:=</span>&nbsp;<span class="ident" id="5789638">r</span><span class="op" id="5789639">.</span><span class="ident" id="5789640">lookupType</span><span class="op" id="5789650">(</span><span class="ident" id="5789651">recvTypeName</span><span class="op" id="5789663">)</span><span class="op" id="5789664">;</span>&nbsp;<span class="ident" id="5789666">typ</span>&nbsp;<span class="op" id="5789670">!=</span>&nbsp;<span class="ident" id="5789673">nil</span>&nbsp;<span class="op" id="5789677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5789682">typ</span><span class="op" id="5789685">.</span><span class="ident" id="5789686">methods</span><span class="op" id="5789693">.</span><span class="ident" id="5789694">set</span><span class="op" id="5789697">(</span><span class="ident" id="5789698">fun</span><span class="op" id="5789701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5789705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789709">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789742">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789810">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789879">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5789947">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790012">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790020">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790024">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790099">if</span>&nbsp;<span class="ident" id="5790102">fun</span><span class="op" id="5790105">.</span><span class="ident" id="5790106">Type</span><span class="op" id="5790110">.</span><span class="ident" id="5790111">Results</span><span class="op" id="5790118">.</span><span class="ident" id="5790119">NumFields</span><span class="op" id="5790128">(</span><span class="op" id="5790129">)</span>&nbsp;<span class="op" id="5790131">&gt;=</span>&nbsp;<span class="num" id="5790134">1</span>&nbsp;<span class="op" id="5790136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790140">res</span>&nbsp;<span class="op" id="5790144">:=</span>&nbsp;<span class="ident" id="5790147">fun</span><span class="op" id="5790150">.</span><span class="ident" id="5790151">Type</span><span class="op" id="5790155">.</span><span class="ident" id="5790156">Results</span><span class="op" id="5790163">.</span><span class="ident" id="5790164">List</span><span class="op" id="5790168">[</span><span class="num" id="5790169">0</span><span class="op" id="5790170">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790174">if</span>&nbsp;<span class="builtinfunc" id="5790177">len</span><span class="op" id="5790180">(</span><span class="ident" id="5790181">res</span><span class="op" id="5790184">.</span><span class="ident" id="5790185">Names</span><span class="op" id="5790190">)</span>&nbsp;<span class="op" id="5790192">&lt;=</span>&nbsp;<span class="num" id="5790195">1</span>&nbsp;<span class="op" id="5790197">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790202">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790259">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790316">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790347">if</span>&nbsp;<span class="ident" id="5790350">n</span><span class="op" id="5790351">,</span>&nbsp;<span class="ident" id="5790353">imp</span>&nbsp;<span class="op" id="5790357">:=</span>&nbsp;<span class="ident" id="5790360">baseTypeName</span><span class="op" id="5790372">(</span><span class="ident" id="5790373">res</span><span class="op" id="5790376">.</span><span class="ident" id="5790377">Type</span><span class="op" id="5790381">)</span><span class="op" id="5790382">;</span>&nbsp;<span class="op" id="5790384">!</span><span class="ident" id="5790385">imp</span>&nbsp;<span class="op" id="5790389">&amp;&amp;</span>&nbsp;<span class="ident" id="5790392">r</span><span class="op" id="5790393">.</span><span class="ident" id="5790394">isVisible</span><span class="op" id="5790403">(</span><span class="ident" id="5790404">n</span><span class="op" id="5790405">)</span>&nbsp;<span class="op" id="5790407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790413">if</span>&nbsp;<span class="ident" id="5790416">typ</span>&nbsp;<span class="op" id="5790420">:=</span>&nbsp;<span class="ident" id="5790423">r</span><span class="op" id="5790424">.</span><span class="ident" id="5790425">lookupType</span><span class="op" id="5790435">(</span><span class="ident" id="5790436">n</span><span class="op" id="5790437">)</span><span class="op" id="5790438">;</span>&nbsp;<span class="ident" id="5790440">typ</span>&nbsp;<span class="op" id="5790444">!=</span>&nbsp;<span class="ident" id="5790447">nil</span>&nbsp;<span class="op" id="5790451">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790458">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790494">typ</span><span class="op" id="5790497">.</span><span class="ident" id="5790498">funcs</span><span class="op" id="5790503">.</span><span class="ident" id="5790504">set</span><span class="op" id="5790507">(</span><span class="ident" id="5790508">fun</span><span class="op" id="5790511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5790518">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790534">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5790541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5790545">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790575">r</span><span class="op" id="5790576">.</span><span class="ident" id="5790577">funcs</span><span class="op" id="5790582">.</span><span class="ident" id="5790583">set</span><span class="op" id="5790586">(</span><span class="ident" id="5790587">fun</span><span class="op" id="5790590">)</span><br>
<span class="lineno">400</span><span class="op" id="5790592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5790595">var</span>&nbsp;<span class="op" id="5790599">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790602">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5790616">=</span>&nbsp;<span class="string" id="5790618">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5790666">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790728">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="5790742">=</span>&nbsp;<span class="ident" id="5790744">regexp</span><span class="op" id="5790750">.</span><span class="ident" id="5790751">MustCompile</span><span class="op" id="5790762">(</span><span class="string" id="5790763">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="5790773">+</span>&nbsp;<span class="ident" id="5790775">noteMarker</span><span class="op" id="5790785">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5790792">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5790822">noteCommentRx</span>&nbsp;<span class="op" id="5790836">=</span>&nbsp;<span class="ident" id="5790838">regexp</span><span class="op" id="5790844">.</span><span class="ident" id="5790845">MustCompile</span><span class="op" id="5790856">(</span><span class="string" id="5790857">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="5790872">+</span>&nbsp;<span class="ident" id="5790874">noteMarker</span><span class="op" id="5790884">)</span>&nbsp;<span class="comment" id="5790886">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="5790918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5790921">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5790985">//</span><br>
<span class="lineno">410</span><span class="keyword" id="5790988">func</span>&nbsp;<span class="op" id="5790993">(</span><span class="ident" id="5790994">r</span>&nbsp;<span class="op" id="5790996">*</span><span class="ident" id="5790997">reader</span><span class="op" id="5791003">)</span>&nbsp;<span class="ident" id="5791005">readNote</span><span class="op" id="5791013">(</span><span class="ident" id="5791014">list</span>&nbsp;<span class="op" id="5791019">[</span><span class="op" id="5791020">]</span><span class="op" id="5791021">*</span><span class="ident" id="5791022">ast</span><span class="op" id="5791025">.</span><span class="ident" id="5791026">Comment</span><span class="op" id="5791033">)</span>&nbsp;<span class="op" id="5791035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791038">text</span>&nbsp;<span class="op" id="5791043">:=</span>&nbsp;<span class="op" id="5791046">(</span><span class="op" id="5791047">&amp;</span><span class="ident" id="5791048">ast</span><span class="op" id="5791051">.</span><span class="ident" id="5791052">CommentGroup</span><span class="op" id="5791064">{</span><span class="ident" id="5791065">List</span><span class="op" id="5791069">:</span>&nbsp;<span class="ident" id="5791071">list</span><span class="op" id="5791075">}</span><span class="op" id="5791076">)</span><span class="op" id="5791077">.</span><span class="ident" id="5791078">Text</span><span class="op" id="5791082">(</span><span class="op" id="5791083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5791086">if</span>&nbsp;<span class="ident" id="5791089">m</span>&nbsp;<span class="op" id="5791091">:=</span>&nbsp;<span class="ident" id="5791094">noteMarkerRx</span><span class="op" id="5791106">.</span><span class="ident" id="5791107">FindStringSubmatchIndex</span><span class="op" id="5791130">(</span><span class="ident" id="5791131">text</span><span class="op" id="5791135">)</span><span class="op" id="5791136">;</span>&nbsp;<span class="ident" id="5791138">m</span>&nbsp;<span class="op" id="5791140">!=</span>&nbsp;<span class="ident" id="5791143">nil</span>&nbsp;<span class="op" id="5791147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5791151">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5791195">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5791242">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5791289">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791317">body</span>&nbsp;<span class="op" id="5791322">:=</span>&nbsp;<span class="ident" id="5791325">clean</span><span class="op" id="5791330">(</span><span class="ident" id="5791331">text</span><span class="op" id="5791335">[</span><span class="ident" id="5791336">m</span><span class="op" id="5791337">[</span><span class="num" id="5791338">1</span><span class="op" id="5791339">]</span><span class="op" id="5791340">:</span><span class="op" id="5791341">]</span><span class="op" id="5791342">,</span>&nbsp;<span class="ident" id="5791344">keepNL</span><span class="op" id="5791350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5791354">if</span>&nbsp;<span class="ident" id="5791357">body</span>&nbsp;<span class="op" id="5791362">!=</span>&nbsp;<span class="string" id="5791365">&#34;&#34;</span>&nbsp;<span class="op" id="5791368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791373">marker</span>&nbsp;<span class="op" id="5791380">:=</span>&nbsp;<span class="ident" id="5791383">text</span><span class="op" id="5791387">[</span><span class="ident" id="5791388">m</span><span class="op" id="5791389">[</span><span class="num" id="5791390">2</span><span class="op" id="5791391">]</span><span class="op" id="5791392">:</span><span class="ident" id="5791393">m</span><span class="op" id="5791394">[</span><span class="num" id="5791395">3</span><span class="op" id="5791396">]</span><span class="op" id="5791397">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791402">r</span><span class="op" id="5791403">.</span><span class="ident" id="5791404">notes</span><span class="op" id="5791409">[</span><span class="ident" id="5791410">marker</span><span class="op" id="5791416">]</span>&nbsp;<span class="op" id="5791418">=</span>&nbsp;<span class="builtinfunc" id="5791420">append</span><span class="op" id="5791426">(</span><span class="ident" id="5791427">r</span><span class="op" id="5791428">.</span><span class="ident" id="5791429">notes</span><span class="op" id="5791434">[</span><span class="ident" id="5791435">marker</span><span class="op" id="5791441">]</span><span class="op" id="5791442">,</span>&nbsp;<span class="op" id="5791444">&amp;</span><span class="ident" id="5791445">Note</span><span class="op" id="5791449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791455">Pos</span><span class="op" id="5791458">:</span>&nbsp;&nbsp;<span class="ident" id="5791461">list</span><span class="op" id="5791465">[</span><span class="num" id="5791466">0</span><span class="op" id="5791467">]</span><span class="op" id="5791468">.</span><span class="ident" id="5791469">Pos</span><span class="op" id="5791472">(</span><span class="op" id="5791473">)</span><span class="op" id="5791474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791480">End</span><span class="op" id="5791483">:</span>&nbsp;&nbsp;<span class="ident" id="5791486">list</span><span class="op" id="5791490">[</span><span class="builtinfunc" id="5791491">len</span><span class="op" id="5791494">(</span><span class="ident" id="5791495">list</span><span class="op" id="5791499">)</span><span class="op" id="5791500">-</span><span class="num" id="5791501">1</span><span class="op" id="5791502">]</span><span class="op" id="5791503">.</span><span class="ident" id="5791504">End</span><span class="op" id="5791507">(</span><span class="op" id="5791508">)</span><span class="op" id="5791509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791515">UID</span><span class="op" id="5791518">:</span>&nbsp;&nbsp;<span class="ident" id="5791521">text</span><span class="op" id="5791525">[</span><span class="ident" id="5791526">m</span><span class="op" id="5791527">[</span><span class="num" id="5791528">4</span><span class="op" id="5791529">]</span><span class="op" id="5791530">:</span><span class="ident" id="5791531">m</span><span class="op" id="5791532">[</span><span class="num" id="5791533">5</span><span class="op" id="5791534">]</span><span class="op" id="5791535">]</span><span class="op" id="5791536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791542">Body</span><span class="op" id="5791546">:</span>&nbsp;<span class="ident" id="5791548">body</span><span class="op" id="5791552">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5791557">}</span><span class="op" id="5791558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5791562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5791565">}</span><br>
<span class="lineno"></span><span class="op" id="5791567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="5791570">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5791613">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5791684">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="5791753">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5791821">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="5791887">//</span><br>
<span class="lineno"></span><span class="keyword" id="5791890">func</span>&nbsp;<span class="op" id="5791895">(</span><span class="ident" id="5791896">r</span>&nbsp;<span class="op" id="5791898">*</span><span class="ident" id="5791899">reader</span><span class="op" id="5791905">)</span>&nbsp;<span class="ident" id="5791907">readNotes</span><span class="op" id="5791916">(</span><span class="ident" id="5791917">comments</span>&nbsp;<span class="op" id="5791926">[</span><span class="op" id="5791927">]</span><span class="op" id="5791928">*</span><span class="ident" id="5791929">ast</span><span class="op" id="5791932">.</span><span class="ident" id="5791933">CommentGroup</span><span class="op" id="5791945">)</span>&nbsp;<span class="op" id="5791947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5791950">for</span>&nbsp;<span class="ident" id="5791954">_</span><span class="op" id="5791955">,</span>&nbsp;<span class="ident" id="5791957">group</span>&nbsp;<span class="op" id="5791963">:=</span>&nbsp;<span class="keyword" id="5791966">range</span>&nbsp;<span class="ident" id="5791972">comments</span>&nbsp;<span class="op" id="5791981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5791985">i</span>&nbsp;<span class="op" id="5791987">:=</span>&nbsp;<span class="op" id="5791990">-</span><span class="num" id="5791991">1</span>&nbsp;<span class="comment" id="5791993">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792053">list</span>&nbsp;<span class="op" id="5792058">:=</span>&nbsp;<span class="ident" id="5792061">group</span><span class="op" id="5792066">.</span><span class="ident" id="5792067">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792074">for</span>&nbsp;<span class="ident" id="5792078">j</span><span class="op" id="5792079">,</span>&nbsp;<span class="ident" id="5792081">c</span>&nbsp;<span class="op" id="5792083">:=</span>&nbsp;<span class="keyword" id="5792086">range</span>&nbsp;<span class="ident" id="5792092">list</span>&nbsp;<span class="op" id="5792097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792102">if</span>&nbsp;<span class="ident" id="5792105">noteCommentRx</span><span class="op" id="5792118">.</span><span class="ident" id="5792119">MatchString</span><span class="op" id="5792130">(</span><span class="ident" id="5792131">c</span><span class="op" id="5792132">.</span><span class="ident" id="5792133">Text</span><span class="op" id="5792137">)</span>&nbsp;<span class="op" id="5792139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792145">if</span>&nbsp;<span class="ident" id="5792148">i</span>&nbsp;<span class="op" id="5792150">&gt;=</span>&nbsp;<span class="num" id="5792153">0</span>&nbsp;<span class="op" id="5792155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792162">r</span><span class="op" id="5792163">.</span><span class="ident" id="5792164">readNote</span><span class="op" id="5792172">(</span><span class="ident" id="5792173">list</span><span class="op" id="5792177">[</span><span class="ident" id="5792178">i</span><span class="op" id="5792179">:</span><span class="ident" id="5792180">j</span><span class="op" id="5792181">]</span><span class="op" id="5792182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792188">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792194">i</span>&nbsp;<span class="op" id="5792196">=</span>&nbsp;<span class="ident" id="5792198">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792211">if</span>&nbsp;<span class="ident" id="5792214">i</span>&nbsp;<span class="op" id="5792216">&gt;=</span>&nbsp;<span class="num" id="5792219">0</span>&nbsp;<span class="op" id="5792221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792226">r</span><span class="op" id="5792227">.</span><span class="ident" id="5792228">readNote</span><span class="op" id="5792236">(</span><span class="ident" id="5792237">list</span><span class="op" id="5792241">[</span><span class="ident" id="5792242">i</span><span class="op" id="5792243">:</span><span class="op" id="5792244">]</span><span class="op" id="5792245">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792252">}</span><br>
<span class="lineno"></span><span class="op" id="5792254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5792257">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="5792315">//</span><br>
<span class="lineno"></span><span class="keyword" id="5792318">func</span>&nbsp;<span class="op" id="5792323">(</span><span class="ident" id="5792324">r</span>&nbsp;<span class="op" id="5792326">*</span><span class="ident" id="5792327">reader</span><span class="op" id="5792333">)</span>&nbsp;<span class="ident" id="5792335">readFile</span><span class="op" id="5792343">(</span><span class="ident" id="5792344">src</span>&nbsp;<span class="op" id="5792348">*</span><span class="ident" id="5792349">ast</span><span class="op" id="5792352">.</span><span class="ident" id="5792353">File</span><span class="op" id="5792357">)</span>&nbsp;<span class="op" id="5792359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5792362">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792392">if</span>&nbsp;<span class="ident" id="5792395">src</span><span class="op" id="5792398">.</span><span class="ident" id="5792399">Doc</span>&nbsp;<span class="op" id="5792403">!=</span>&nbsp;<span class="ident" id="5792406">nil</span>&nbsp;<span class="op" id="5792410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792414">r</span><span class="op" id="5792415">.</span><span class="ident" id="5792416">readDoc</span><span class="op" id="5792423">(</span><span class="ident" id="5792424">src</span><span class="op" id="5792427">.</span><span class="ident" id="5792428">Doc</span><span class="op" id="5792431">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792435">src</span><span class="op" id="5792438">.</span><span class="ident" id="5792439">Doc</span>&nbsp;<span class="op" id="5792443">=</span>&nbsp;<span class="ident" id="5792445">nil</span>&nbsp;<span class="comment" id="5792449">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5792488">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792513">for</span>&nbsp;<span class="ident" id="5792517">_</span><span class="op" id="5792518">,</span>&nbsp;<span class="ident" id="5792520">decl</span>&nbsp;<span class="op" id="5792525">:=</span>&nbsp;<span class="keyword" id="5792528">range</span>&nbsp;<span class="ident" id="5792534">src</span><span class="op" id="5792537">.</span><span class="ident" id="5792538">Decls</span>&nbsp;<span class="op" id="5792544">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792548">switch</span>&nbsp;<span class="ident" id="5792555">d</span>&nbsp;<span class="op" id="5792557">:=</span>&nbsp;<span class="ident" id="5792560">decl</span><span class="op" id="5792564">.</span><span class="op" id="5792565">(</span><span class="keyword" id="5792566">type</span><span class="op" id="5792570">)</span>&nbsp;<span class="op" id="5792572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792576">case</span>&nbsp;<span class="op" id="5792581">*</span><span class="ident" id="5792582">ast</span><span class="op" id="5792585">.</span><span class="ident" id="5792586">GenDecl</span><span class="op" id="5792593">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792598">switch</span>&nbsp;<span class="ident" id="5792605">d</span><span class="op" id="5792606">.</span><span class="ident" id="5792607">Tok</span>&nbsp;<span class="op" id="5792611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792616">case</span>&nbsp;<span class="ident" id="5792621">token</span><span class="op" id="5792626">.</span><span class="ident" id="5792627">IMPORT</span><span class="op" id="5792633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5792639">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792679">for</span>&nbsp;<span class="ident" id="5792683">_</span><span class="op" id="5792684">,</span>&nbsp;<span class="ident" id="5792686">spec</span>&nbsp;<span class="op" id="5792691">:=</span>&nbsp;<span class="keyword" id="5792694">range</span>&nbsp;<span class="ident" id="5792700">d</span><span class="op" id="5792701">.</span><span class="ident" id="5792702">Specs</span>&nbsp;<span class="op" id="5792708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792715">if</span>&nbsp;<span class="ident" id="5792718">s</span><span class="op" id="5792719">,</span>&nbsp;<span class="ident" id="5792721">ok</span>&nbsp;<span class="op" id="5792724">:=</span>&nbsp;<span class="ident" id="5792727">spec</span><span class="op" id="5792731">.</span><span class="op" id="5792732">(</span><span class="op" id="5792733">*</span><span class="ident" id="5792734">ast</span><span class="op" id="5792737">.</span><span class="ident" id="5792738">ImportSpec</span><span class="op" id="5792748">)</span><span class="op" id="5792749">;</span>&nbsp;<span class="ident" id="5792751">ok</span>&nbsp;<span class="op" id="5792754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792762">if</span>&nbsp;<span class="ident" id="5792765">import_</span><span class="op" id="5792772">,</span>&nbsp;<span class="ident" id="5792774">err</span>&nbsp;<span class="op" id="5792778">:=</span>&nbsp;<span class="ident" id="5792781">strconv</span><span class="op" id="5792788">.</span><span class="ident" id="5792789">Unquote</span><span class="op" id="5792796">(</span><span class="ident" id="5792797">s</span><span class="op" id="5792798">.</span><span class="ident" id="5792799">Path</span><span class="op" id="5792803">.</span><span class="ident" id="5792804">Value</span><span class="op" id="5792809">)</span><span class="op" id="5792810">;</span>&nbsp;<span class="ident" id="5792812">err</span>&nbsp;<span class="op" id="5792816">==</span>&nbsp;<span class="ident" id="5792819">nil</span>&nbsp;<span class="op" id="5792823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792832">r</span><span class="op" id="5792833">.</span><span class="ident" id="5792834">imports</span><span class="op" id="5792841">[</span><span class="ident" id="5792842">import_</span><span class="op" id="5792849">]</span>&nbsp;<span class="op" id="5792851">=</span>&nbsp;<span class="num" id="5792853">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792861">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5792874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792879">case</span>&nbsp;<span class="ident" id="5792884">token</span><span class="op" id="5792889">.</span><span class="ident" id="5792890">CONST</span><span class="op" id="5792895">,</span>&nbsp;<span class="ident" id="5792897">token</span><span class="op" id="5792902">.</span><span class="ident" id="5792903">VAR</span><span class="op" id="5792906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5792912">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5792973">r</span><span class="op" id="5792974">.</span><span class="ident" id="5792975">readValue</span><span class="op" id="5792984">(</span><span class="ident" id="5792985">d</span><span class="op" id="5792986">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5792991">case</span>&nbsp;<span class="ident" id="5792996">token</span><span class="op" id="5793001">.</span><span class="ident" id="5793002">TYPE</span><span class="op" id="5793006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793012">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5793050">if</span>&nbsp;<span class="builtinfunc" id="5793053">len</span><span class="op" id="5793056">(</span><span class="ident" id="5793057">d</span><span class="op" id="5793058">.</span><span class="ident" id="5793059">Specs</span><span class="op" id="5793064">)</span>&nbsp;<span class="op" id="5793066">==</span>&nbsp;<span class="num" id="5793069">1</span>&nbsp;<span class="op" id="5793071">&amp;&amp;</span>&nbsp;<span class="op" id="5793074">!</span><span class="ident" id="5793075">d</span><span class="op" id="5793076">.</span><span class="ident" id="5793077">Lparen</span><span class="op" id="5793083">.</span><span class="ident" id="5793084">IsValid</span><span class="op" id="5793091">(</span><span class="op" id="5793092">)</span>&nbsp;<span class="op" id="5793094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793101">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793157">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793208">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793261">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793312">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5793333">if</span>&nbsp;<span class="ident" id="5793336">s</span><span class="op" id="5793337">,</span>&nbsp;<span class="ident" id="5793339">ok</span>&nbsp;<span class="op" id="5793342">:=</span>&nbsp;<span class="ident" id="5793345">d</span><span class="op" id="5793346">.</span><span class="ident" id="5793347">Specs</span><span class="op" id="5793352">[</span><span class="num" id="5793353">0</span><span class="op" id="5793354">]</span><span class="op" id="5793355">.</span><span class="op" id="5793356">(</span><span class="op" id="5793357">*</span><span class="ident" id="5793358">ast</span><span class="op" id="5793361">.</span><span class="ident" id="5793362">TypeSpec</span><span class="op" id="5793370">)</span><span class="op" id="5793371">;</span>&nbsp;<span class="ident" id="5793373">ok</span>&nbsp;<span class="op" id="5793376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5793384">r</span><span class="op" id="5793385">.</span><span class="ident" id="5793386">readType</span><span class="op" id="5793394">(</span><span class="ident" id="5793395">d</span><span class="op" id="5793396">,</span>&nbsp;<span class="ident" id="5793398">s</span><span class="op" id="5793399">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5793406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5793413">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5793423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5793429">for</span>&nbsp;<span class="ident" id="5793433">_</span><span class="op" id="5793434">,</span>&nbsp;<span class="ident" id="5793436">spec</span>&nbsp;<span class="op" id="5793441">:=</span>&nbsp;<span class="keyword" id="5793444">range</span>&nbsp;<span class="ident" id="5793450">d</span><span class="op" id="5793451">.</span><span class="ident" id="5793452">Specs</span>&nbsp;<span class="op" id="5793458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5793465">if</span>&nbsp;<span class="ident" id="5793468">s</span><span class="op" id="5793469">,</span>&nbsp;<span class="ident" id="5793471">ok</span>&nbsp;<span class="op" id="5793474">:=</span>&nbsp;<span class="ident" id="5793477">spec</span><span class="op" id="5793481">.</span><span class="op" id="5793482">(</span><span class="op" id="5793483">*</span><span class="ident" id="5793484">ast</span><span class="op" id="5793487">.</span><span class="ident" id="5793488">TypeSpec</span><span class="op" id="5793496">)</span><span class="op" id="5793497">;</span>&nbsp;<span class="ident" id="5793499">ok</span>&nbsp;<span class="op" id="5793502">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793510">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793565">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793622">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793678">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5793735">fake</span>&nbsp;<span class="op" id="5793740">:=</span>&nbsp;<span class="op" id="5793743">&amp;</span><span class="ident" id="5793744">ast</span><span class="op" id="5793747">.</span><span class="ident" id="5793748">GenDecl</span><span class="op" id="5793755">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5793764">Doc</span><span class="op" id="5793767">:</span>&nbsp;<span class="ident" id="5793769">d</span><span class="op" id="5793770">.</span><span class="ident" id="5793771">Doc</span><span class="op" id="5793774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793783">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793834">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793887">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793936">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5793987">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794039">TokPos</span><span class="op" id="5794045">:</span>&nbsp;<span class="ident" id="5794047">s</span><span class="op" id="5794048">.</span><span class="ident" id="5794049">Pos</span><span class="op" id="5794052">(</span><span class="op" id="5794053">)</span><span class="op" id="5794054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794063">Tok</span><span class="op" id="5794066">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5794071">token</span><span class="op" id="5794076">.</span><span class="ident" id="5794077">TYPE</span><span class="op" id="5794081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794090">Specs</span><span class="op" id="5794095">:</span>&nbsp;&nbsp;<span class="op" id="5794098">[</span><span class="op" id="5794099">]</span><span class="ident" id="5794100">ast</span><span class="op" id="5794103">.</span><span class="ident" id="5794104">Spec</span><span class="op" id="5794108">{</span><span class="ident" id="5794109">s</span><span class="op" id="5794110">}</span><span class="op" id="5794111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794119">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794127">r</span><span class="op" id="5794128">.</span><span class="ident" id="5794129">readType</span><span class="op" id="5794137">(</span><span class="ident" id="5794138">fake</span><span class="op" id="5794142">,</span>&nbsp;<span class="ident" id="5794144">s</span><span class="op" id="5794145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5794167">case</span>&nbsp;<span class="op" id="5794172">*</span><span class="ident" id="5794173">ast</span><span class="op" id="5794176">.</span><span class="ident" id="5794177">FuncDecl</span><span class="op" id="5794185">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794190">r</span><span class="op" id="5794191">.</span><span class="ident" id="5794192">readFunc</span><span class="op" id="5794200">(</span><span class="ident" id="5794201">d</span><span class="op" id="5794202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5794213">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794250">r</span><span class="op" id="5794251">.</span><span class="ident" id="5794252">readNotes</span><span class="op" id="5794261">(</span><span class="ident" id="5794262">src</span><span class="op" id="5794265">.</span><span class="ident" id="5794266">Comments</span><span class="op" id="5794274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794277">src</span><span class="op" id="5794280">.</span><span class="ident" id="5794281">Comments</span>&nbsp;<span class="op" id="5794290">=</span>&nbsp;<span class="ident" id="5794292">nil</span>&nbsp;<span class="comment" id="5794296">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5794348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5794351">func</span>&nbsp;<span class="op" id="5794356">(</span><span class="ident" id="5794357">r</span>&nbsp;<span class="op" id="5794359">*</span><span class="ident" id="5794360">reader</span><span class="op" id="5794366">)</span>&nbsp;<span class="ident" id="5794368">readPackage</span><span class="op" id="5794379">(</span><span class="ident" id="5794380">pkg</span>&nbsp;<span class="op" id="5794384">*</span><span class="ident" id="5794385">ast</span><span class="op" id="5794388">.</span><span class="ident" id="5794389">Package</span><span class="op" id="5794396">,</span>&nbsp;<span class="ident" id="5794398">mode</span>&nbsp;<span class="ident" id="5794403">Mode</span><span class="op" id="5794407">)</span>&nbsp;<span class="op" id="5794409">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5794412">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794434">r</span><span class="op" id="5794435">.</span><span class="ident" id="5794436">filenames</span>&nbsp;<span class="op" id="5794446">=</span>&nbsp;<span class="builtinfunc" id="5794448">make</span><span class="op" id="5794452">(</span><span class="op" id="5794453">[</span><span class="op" id="5794454">]</span><span class="builtintype" id="5794455">string</span><span class="op" id="5794461">,</span>&nbsp;<span class="builtinfunc" id="5794463">len</span><span class="op" id="5794466">(</span><span class="ident" id="5794467">pkg</span><span class="op" id="5794470">.</span><span class="ident" id="5794471">Files</span><span class="op" id="5794476">)</span><span class="op" id="5794477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794480">r</span><span class="op" id="5794481">.</span><span class="ident" id="5794482">imports</span>&nbsp;<span class="op" id="5794490">=</span>&nbsp;<span class="builtinfunc" id="5794492">make</span><span class="op" id="5794496">(</span><span class="keyword" id="5794497">map</span><span class="op" id="5794500">[</span><span class="builtintype" id="5794501">string</span><span class="op" id="5794507">]</span><span class="builtintype" id="5794508">int</span><span class="op" id="5794511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794514">r</span><span class="op" id="5794515">.</span><span class="ident" id="5794516">mode</span>&nbsp;<span class="op" id="5794521">=</span>&nbsp;<span class="ident" id="5794523">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794529">r</span><span class="op" id="5794530">.</span><span class="ident" id="5794531">types</span>&nbsp;<span class="op" id="5794537">=</span>&nbsp;<span class="builtinfunc" id="5794539">make</span><span class="op" id="5794543">(</span><span class="keyword" id="5794544">map</span><span class="op" id="5794547">[</span><span class="builtintype" id="5794548">string</span><span class="op" id="5794554">]</span><span class="op" id="5794555">*</span><span class="ident" id="5794556">namedType</span><span class="op" id="5794565">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794568">r</span><span class="op" id="5794569">.</span><span class="ident" id="5794570">funcs</span>&nbsp;<span class="op" id="5794576">=</span>&nbsp;<span class="builtinfunc" id="5794578">make</span><span class="op" id="5794582">(</span><span class="ident" id="5794583">methodSet</span><span class="op" id="5794592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794595">r</span><span class="op" id="5794596">.</span><span class="ident" id="5794597">notes</span>&nbsp;<span class="op" id="5794603">=</span>&nbsp;<span class="builtinfunc" id="5794605">make</span><span class="op" id="5794609">(</span><span class="keyword" id="5794610">map</span><span class="op" id="5794613">[</span><span class="builtintype" id="5794614">string</span><span class="op" id="5794620">]</span><span class="op" id="5794621">[</span><span class="op" id="5794622">]</span><span class="op" id="5794623">*</span><span class="ident" id="5794624">Note</span><span class="op" id="5794628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5794632">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5794687">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794737">i</span>&nbsp;<span class="op" id="5794739">:=</span>&nbsp;<span class="num" id="5794742">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5794745">for</span>&nbsp;<span class="ident" id="5794749">filename</span>&nbsp;<span class="op" id="5794758">:=</span>&nbsp;<span class="keyword" id="5794761">range</span>&nbsp;<span class="ident" id="5794767">pkg</span><span class="op" id="5794770">.</span><span class="ident" id="5794771">Files</span>&nbsp;<span class="op" id="5794777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794781">r</span><span class="op" id="5794782">.</span><span class="ident" id="5794783">filenames</span><span class="op" id="5794792">[</span><span class="ident" id="5794793">i</span><span class="op" id="5794794">]</span>&nbsp;<span class="op" id="5794796">=</span>&nbsp;<span class="ident" id="5794798">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794809">i</span><span class="op" id="5794810">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794814">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794817">sort</span><span class="op" id="5794821">.</span><span class="ident" id="5794822">Strings</span><span class="op" id="5794829">(</span><span class="ident" id="5794830">r</span><span class="op" id="5794831">.</span><span class="ident" id="5794832">filenames</span><span class="op" id="5794841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5794845">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5794879">for</span>&nbsp;<span class="ident" id="5794883">_</span><span class="op" id="5794884">,</span>&nbsp;<span class="ident" id="5794886">filename</span>&nbsp;<span class="op" id="5794895">:=</span>&nbsp;<span class="keyword" id="5794898">range</span>&nbsp;<span class="ident" id="5794904">r</span><span class="op" id="5794905">.</span><span class="ident" id="5794906">filenames</span>&nbsp;<span class="op" id="5794916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794920">f</span>&nbsp;<span class="op" id="5794922">:=</span>&nbsp;<span class="ident" id="5794925">pkg</span><span class="op" id="5794928">.</span><span class="ident" id="5794929">Files</span><span class="op" id="5794934">[</span><span class="ident" id="5794935">filename</span><span class="op" id="5794943">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5794947">if</span>&nbsp;<span class="ident" id="5794950">mode</span><span class="op" id="5794954">&amp;</span><span class="ident" id="5794955">AllDecls</span>&nbsp;<span class="op" id="5794964">==</span>&nbsp;<span class="num" id="5794967">0</span>&nbsp;<span class="op" id="5794969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794974">r</span><span class="op" id="5794975">.</span><span class="ident" id="5794976">fileExports</span><span class="op" id="5794987">(</span><span class="ident" id="5794988">f</span><span class="op" id="5794989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5794993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5794997">r</span><span class="op" id="5794998">.</span><span class="ident" id="5794999">readFile</span><span class="op" id="5795007">(</span><span class="ident" id="5795008">f</span><span class="op" id="5795009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5795012">}</span><br>
<span class="lineno">550</span><span class="op" id="5795014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5795017">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5795097">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5795107">func</span>&nbsp;<span class="ident" id="5795112">customizeRecv</span><span class="op" id="5795125">(</span><span class="ident" id="5795126">f</span>&nbsp;<span class="op" id="5795128">*</span><span class="ident" id="5795129">Func</span><span class="op" id="5795133">,</span>&nbsp;<span class="ident" id="5795135">recvTypeName</span>&nbsp;<span class="builtintype" id="5795148">string</span><span class="op" id="5795154">,</span>&nbsp;<span class="ident" id="5795156">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5795170">bool</span><span class="op" id="5795174">,</span>&nbsp;<span class="ident" id="5795176">level</span>&nbsp;<span class="builtintype" id="5795182">int</span><span class="op" id="5795185">)</span>&nbsp;<span class="op" id="5795187">*</span><span class="ident" id="5795188">Func</span>&nbsp;<span class="op" id="5795193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5795196">if</span>&nbsp;<span class="ident" id="5795199">f</span>&nbsp;<span class="op" id="5795201">==</span>&nbsp;<span class="ident" id="5795204">nil</span>&nbsp;<span class="op" id="5795208">||</span>&nbsp;<span class="ident" id="5795211">f</span><span class="op" id="5795212">.</span><span class="ident" id="5795213">Decl</span>&nbsp;<span class="op" id="5795218">==</span>&nbsp;<span class="ident" id="5795221">nil</span>&nbsp;<span class="op" id="5795225">||</span>&nbsp;<span class="ident" id="5795228">f</span><span class="op" id="5795229">.</span><span class="ident" id="5795230">Decl</span><span class="op" id="5795234">.</span><span class="ident" id="5795235">Recv</span>&nbsp;<span class="op" id="5795240">==</span>&nbsp;<span class="ident" id="5795243">nil</span>&nbsp;<span class="op" id="5795247">||</span>&nbsp;<span class="builtinfunc" id="5795250">len</span><span class="op" id="5795253">(</span><span class="ident" id="5795254">f</span><span class="op" id="5795255">.</span><span class="ident" id="5795256">Decl</span><span class="op" id="5795260">.</span><span class="ident" id="5795261">Recv</span><span class="op" id="5795265">.</span><span class="ident" id="5795266">List</span><span class="op" id="5795270">)</span>&nbsp;<span class="op" id="5795272">!=</span>&nbsp;<span class="num" id="5795275">1</span>&nbsp;<span class="op" id="5795277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5795281">return</span>&nbsp;<span class="ident" id="5795288">f</span>&nbsp;<span class="comment" id="5795290">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5795324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5795328">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795378">newField</span>&nbsp;<span class="op" id="5795387">:=</span>&nbsp;<span class="op" id="5795390">*</span><span class="ident" id="5795391">f</span><span class="op" id="5795392">.</span><span class="ident" id="5795393">Decl</span><span class="op" id="5795397">.</span><span class="ident" id="5795398">Recv</span><span class="op" id="5795402">.</span><span class="ident" id="5795403">List</span><span class="op" id="5795407">[</span><span class="num" id="5795408">0</span><span class="op" id="5795409">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795412">origPos</span>&nbsp;<span class="op" id="5795420">:=</span>&nbsp;<span class="ident" id="5795423">newField</span><span class="op" id="5795431">.</span><span class="ident" id="5795432">Type</span><span class="op" id="5795436">.</span><span class="ident" id="5795437">Pos</span><span class="op" id="5795440">(</span><span class="op" id="5795441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795444">_</span><span class="op" id="5795445">,</span>&nbsp;<span class="ident" id="5795447">origRecvIsPtr</span>&nbsp;<span class="op" id="5795461">:=</span>&nbsp;<span class="ident" id="5795464">newField</span><span class="op" id="5795472">.</span><span class="ident" id="5795473">Type</span><span class="op" id="5795477">.</span><span class="op" id="5795478">(</span><span class="op" id="5795479">*</span><span class="ident" id="5795480">ast</span><span class="op" id="5795483">.</span><span class="ident" id="5795484">StarExpr</span><span class="op" id="5795492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795495">newIdent</span>&nbsp;<span class="op" id="5795504">:=</span>&nbsp;<span class="op" id="5795507">&amp;</span><span class="ident" id="5795508">ast</span><span class="op" id="5795511">.</span><span class="ident" id="5795512">Ident</span><span class="op" id="5795517">{</span><span class="ident" id="5795518">NamePos</span><span class="op" id="5795525">:</span>&nbsp;<span class="ident" id="5795527">origPos</span><span class="op" id="5795534">,</span>&nbsp;<span class="ident" id="5795536">Name</span><span class="op" id="5795540">:</span>&nbsp;<span class="ident" id="5795542">recvTypeName</span><span class="op" id="5795554">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5795557">var</span>&nbsp;<span class="ident" id="5795561">typ</span>&nbsp;<span class="ident" id="5795565">ast</span><span class="op" id="5795568">.</span><span class="ident" id="5795569">Expr</span>&nbsp;<span class="op" id="5795574">=</span>&nbsp;<span class="ident" id="5795576">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5795586">if</span>&nbsp;<span class="op" id="5795589">!</span><span class="ident" id="5795590">embeddedIsPtr</span>&nbsp;<span class="op" id="5795604">&amp;&amp;</span>&nbsp;<span class="ident" id="5795607">origRecvIsPtr</span>&nbsp;<span class="op" id="5795621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795625">newIdent</span><span class="op" id="5795633">.</span><span class="ident" id="5795634">NamePos</span><span class="op" id="5795641">++</span>&nbsp;<span class="comment" id="5795644">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795670">typ</span>&nbsp;<span class="op" id="5795674">=</span>&nbsp;<span class="op" id="5795676">&amp;</span><span class="ident" id="5795677">ast</span><span class="op" id="5795680">.</span><span class="ident" id="5795681">StarExpr</span><span class="op" id="5795689">{</span><span class="ident" id="5795690">Star</span><span class="op" id="5795694">:</span>&nbsp;<span class="ident" id="5795696">origPos</span><span class="op" id="5795703">,</span>&nbsp;<span class="ident" id="5795705">X</span><span class="op" id="5795706">:</span>&nbsp;<span class="ident" id="5795708">newIdent</span><span class="op" id="5795716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5795719">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795722">newField</span><span class="op" id="5795730">.</span><span class="ident" id="5795731">Type</span>&nbsp;<span class="op" id="5795736">=</span>&nbsp;<span class="ident" id="5795738">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5795744">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795809">newFieldList</span>&nbsp;<span class="op" id="5795822">:=</span>&nbsp;<span class="op" id="5795825">*</span><span class="ident" id="5795826">f</span><span class="op" id="5795827">.</span><span class="ident" id="5795828">Decl</span><span class="op" id="5795832">.</span><span class="ident" id="5795833">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795839">newFieldList</span><span class="op" id="5795851">.</span><span class="ident" id="5795852">List</span>&nbsp;<span class="op" id="5795857">=</span>&nbsp;<span class="op" id="5795859">[</span><span class="op" id="5795860">]</span><span class="op" id="5795861">*</span><span class="ident" id="5795862">ast</span><span class="op" id="5795865">.</span><span class="ident" id="5795866">Field</span><span class="op" id="5795871">{</span><span class="op" id="5795872">&amp;</span><span class="ident" id="5795873">newField</span><span class="op" id="5795881">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5795885">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795956">newFuncDecl</span>&nbsp;<span class="op" id="5795968">:=</span>&nbsp;<span class="op" id="5795971">*</span><span class="ident" id="5795972">f</span><span class="op" id="5795973">.</span><span class="ident" id="5795974">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5795980">newFuncDecl</span><span class="op" id="5795991">.</span><span class="ident" id="5795992">Recv</span>&nbsp;<span class="op" id="5795997">=</span>&nbsp;<span class="op" id="5795999">&amp;</span><span class="ident" id="5796000">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796015">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796080">newF</span>&nbsp;<span class="op" id="5796085">:=</span>&nbsp;<span class="op" id="5796088">*</span><span class="ident" id="5796089">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796092">newF</span><span class="op" id="5796096">.</span><span class="ident" id="5796097">Decl</span>&nbsp;<span class="op" id="5796102">=</span>&nbsp;<span class="op" id="5796104">&amp;</span><span class="ident" id="5796105">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796118">newF</span><span class="op" id="5796122">.</span><span class="ident" id="5796123">Recv</span>&nbsp;<span class="op" id="5796128">=</span>&nbsp;<span class="ident" id="5796130">recvString</span><span class="op" id="5796140">(</span><span class="ident" id="5796141">typ</span><span class="op" id="5796144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796147">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796180">newF</span><span class="op" id="5796184">.</span><span class="ident" id="5796185">Level</span>&nbsp;<span class="op" id="5796191">=</span>&nbsp;<span class="ident" id="5796193">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5796201">return</span>&nbsp;<span class="op" id="5796208">&amp;</span><span class="ident" id="5796209">newF</span><br>
<span class="lineno"></span><span class="op" id="5796214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5796217">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5796289">//</span><br>
<span class="lineno"></span><span class="keyword" id="5796292">func</span>&nbsp;<span class="op" id="5796297">(</span><span class="ident" id="5796298">r</span>&nbsp;<span class="op" id="5796300">*</span><span class="ident" id="5796301">reader</span><span class="op" id="5796307">)</span>&nbsp;<span class="ident" id="5796309">collectEmbeddedMethods</span><span class="op" id="5796331">(</span><span class="ident" id="5796332">mset</span>&nbsp;<span class="ident" id="5796337">methodSet</span><span class="op" id="5796346">,</span>&nbsp;<span class="ident" id="5796348">typ</span>&nbsp;<span class="op" id="5796352">*</span><span class="ident" id="5796353">namedType</span><span class="op" id="5796362">,</span>&nbsp;<span class="ident" id="5796364">recvTypeName</span>&nbsp;<span class="builtintype" id="5796377">string</span><span class="op" id="5796383">,</span>&nbsp;<span class="ident" id="5796385">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5796399">bool</span><span class="op" id="5796403">,</span>&nbsp;<span class="ident" id="5796405">level</span>&nbsp;<span class="builtintype" id="5796411">int</span><span class="op" id="5796414">,</span>&nbsp;<span class="ident" id="5796416">visited</span>&nbsp;<span class="ident" id="5796424">embeddedSet</span><span class="op" id="5796435">)</span>&nbsp;<span class="op" id="5796437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796440">visited</span><span class="op" id="5796447">[</span><span class="ident" id="5796448">typ</span><span class="op" id="5796451">]</span>&nbsp;<span class="op" id="5796453">=</span>&nbsp;<span class="builtintype" id="5796455">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5796461">for</span>&nbsp;<span class="ident" id="5796465">embedded</span><span class="op" id="5796473">,</span>&nbsp;<span class="ident" id="5796475">isPtr</span>&nbsp;<span class="op" id="5796481">:=</span>&nbsp;<span class="keyword" id="5796484">range</span>&nbsp;<span class="ident" id="5796490">typ</span><span class="op" id="5796493">.</span><span class="ident" id="5796494">embedded</span>&nbsp;<span class="op" id="5796503">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796507">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796564">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796620">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796676">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796733">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796759">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="5796777">:=</span>&nbsp;<span class="ident" id="5796780">embeddedIsPtr</span>&nbsp;<span class="op" id="5796794">||</span>&nbsp;<span class="ident" id="5796797">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5796805">for</span>&nbsp;<span class="ident" id="5796809">_</span><span class="op" id="5796810">,</span>&nbsp;<span class="ident" id="5796812">m</span>&nbsp;<span class="op" id="5796814">:=</span>&nbsp;<span class="keyword" id="5796817">range</span>&nbsp;<span class="ident" id="5796823">embedded</span><span class="op" id="5796831">.</span><span class="ident" id="5796832">methods</span>&nbsp;<span class="op" id="5796840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5796845">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5796887">if</span>&nbsp;<span class="ident" id="5796890">m</span><span class="op" id="5796891">.</span><span class="ident" id="5796892">Level</span>&nbsp;<span class="op" id="5796898">==</span>&nbsp;<span class="num" id="5796901">0</span>&nbsp;<span class="op" id="5796903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5796909">mset</span><span class="op" id="5796913">.</span><span class="ident" id="5796914">add</span><span class="op" id="5796917">(</span><span class="ident" id="5796918">customizeRecv</span><span class="op" id="5796931">(</span><span class="ident" id="5796932">m</span><span class="op" id="5796933">,</span>&nbsp;<span class="ident" id="5796935">recvTypeName</span><span class="op" id="5796947">,</span>&nbsp;<span class="ident" id="5796949">thisEmbeddedIsPtr</span><span class="op" id="5796966">,</span>&nbsp;<span class="ident" id="5796968">level</span><span class="op" id="5796973">)</span><span class="op" id="5796974">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5796979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5796983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5796987">if</span>&nbsp;<span class="op" id="5796990">!</span><span class="ident" id="5796991">visited</span><span class="op" id="5796998">[</span><span class="ident" id="5796999">embedded</span><span class="op" id="5797007">]</span>&nbsp;<span class="op" id="5797009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5797014">r</span><span class="op" id="5797015">.</span><span class="ident" id="5797016">collectEmbeddedMethods</span><span class="op" id="5797038">(</span><span class="ident" id="5797039">mset</span><span class="op" id="5797043">,</span>&nbsp;<span class="ident" id="5797045">embedded</span><span class="op" id="5797053">,</span>&nbsp;<span class="ident" id="5797055">recvTypeName</span><span class="op" id="5797067">,</span>&nbsp;<span class="ident" id="5797069">thisEmbeddedIsPtr</span><span class="op" id="5797086">,</span>&nbsp;<span class="ident" id="5797088">level</span><span class="op" id="5797093">+</span><span class="num" id="5797094">1</span><span class="op" id="5797095">,</span>&nbsp;<span class="ident" id="5797097">visited</span><span class="op" id="5797104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797108">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5797114">delete</span><span class="op" id="5797120">(</span><span class="ident" id="5797121">visited</span><span class="op" id="5797128">,</span>&nbsp;<span class="ident" id="5797130">typ</span><span class="op" id="5797133">)</span><br>
<span class="lineno"></span><span class="op" id="5797135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5797138">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="5797220">//</span><br>
<span class="lineno"></span><span class="keyword" id="5797223">func</span>&nbsp;<span class="op" id="5797228">(</span><span class="ident" id="5797229">r</span>&nbsp;<span class="op" id="5797231">*</span><span class="ident" id="5797232">reader</span><span class="op" id="5797238">)</span>&nbsp;<span class="ident" id="5797240">computeMethodSets</span><span class="op" id="5797257">(</span><span class="op" id="5797258">)</span>&nbsp;<span class="op" id="5797260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5797263">for</span>&nbsp;<span class="ident" id="5797267">_</span><span class="op" id="5797268">,</span>&nbsp;<span class="ident" id="5797270">t</span>&nbsp;<span class="op" id="5797272">:=</span>&nbsp;<span class="keyword" id="5797275">range</span>&nbsp;<span class="ident" id="5797281">r</span><span class="op" id="5797282">.</span><span class="ident" id="5797283">types</span>&nbsp;<span class="op" id="5797289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5797293">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5797329">if</span>&nbsp;<span class="ident" id="5797332">t</span><span class="op" id="5797333">.</span><span class="ident" id="5797334">isStruct</span>&nbsp;<span class="op" id="5797343">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5797348">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5797361">r</span><span class="op" id="5797362">.</span><span class="ident" id="5797363">collectEmbeddedMethods</span><span class="op" id="5797385">(</span><span class="ident" id="5797386">t</span><span class="op" id="5797387">.</span><span class="ident" id="5797388">methods</span><span class="op" id="5797395">,</span>&nbsp;<span class="ident" id="5797397">t</span><span class="op" id="5797398">,</span>&nbsp;<span class="ident" id="5797400">t</span><span class="op" id="5797401">.</span><span class="ident" id="5797402">name</span><span class="op" id="5797406">,</span>&nbsp;<span class="builtintype" id="5797408">false</span><span class="op" id="5797413">,</span>&nbsp;<span class="num" id="5797415">1</span><span class="op" id="5797416">,</span>&nbsp;<span class="builtinfunc" id="5797418">make</span><span class="op" id="5797422">(</span><span class="ident" id="5797423">embeddedSet</span><span class="op" id="5797434">)</span><span class="op" id="5797435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797439">}</span>&nbsp;<span class="keyword" id="5797441">else</span>&nbsp;<span class="op" id="5797446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5797451">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5797467">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5797498">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5797574">if</span>&nbsp;<span class="ident" id="5797577">r</span><span class="op" id="5797578">.</span><span class="ident" id="5797579">errorDecl</span>&nbsp;<span class="op" id="5797589">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5797593">for</span>&nbsp;<span class="ident" id="5797597">_</span><span class="op" id="5797598">,</span>&nbsp;<span class="ident" id="5797600">ityp</span>&nbsp;<span class="op" id="5797605">:=</span>&nbsp;<span class="keyword" id="5797608">range</span>&nbsp;<span class="ident" id="5797614">r</span><span class="op" id="5797615">.</span><span class="ident" id="5797616">fixlist</span>&nbsp;<span class="op" id="5797624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5797629">removeErrorField</span><span class="op" id="5797645">(</span><span class="ident" id="5797646">ityp</span><span class="op" id="5797650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5797657">}</span><br>
<span class="lineno"></span><span class="op" id="5797659">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="5797662">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5797732">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="5797804">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="5797874">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="5797916">//</span><br>
<span class="lineno"></span><span class="keyword" id="5797919">func</span>&nbsp;<span class="op" id="5797924">(</span><span class="ident" id="5797925">r</span>&nbsp;<span class="op" id="5797927">*</span><span class="ident" id="5797928">reader</span><span class="op" id="5797934">)</span>&nbsp;<span class="ident" id="5797936">cleanupTypes</span><span class="op" id="5797948">(</span><span class="op" id="5797949">)</span>&nbsp;<span class="op" id="5797951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5797954">for</span>&nbsp;<span class="ident" id="5797958">_</span><span class="op" id="5797959">,</span>&nbsp;<span class="ident" id="5797961">t</span>&nbsp;<span class="op" id="5797963">:=</span>&nbsp;<span class="keyword" id="5797966">range</span>&nbsp;<span class="ident" id="5797972">r</span><span class="op" id="5797973">.</span><span class="ident" id="5797974">types</span>&nbsp;<span class="op" id="5797980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5797984">visible</span>&nbsp;<span class="op" id="5797992">:=</span>&nbsp;<span class="ident" id="5797995">r</span><span class="op" id="5797996">.</span><span class="ident" id="5797997">isVisible</span><span class="op" id="5798006">(</span><span class="ident" id="5798007">t</span><span class="op" id="5798008">.</span><span class="ident" id="5798009">name</span><span class="op" id="5798013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5798017">if</span>&nbsp;<span class="ident" id="5798020">t</span><span class="op" id="5798021">.</span><span class="ident" id="5798022">decl</span>&nbsp;<span class="op" id="5798027">==</span>&nbsp;<span class="ident" id="5798030">nil</span>&nbsp;<span class="op" id="5798034">&amp;&amp;</span>&nbsp;<span class="op" id="5798037">(</span><span class="ident" id="5798038">predeclaredTypes</span><span class="op" id="5798054">[</span><span class="ident" id="5798055">t</span><span class="op" id="5798056">.</span><span class="ident" id="5798057">name</span><span class="op" id="5798061">]</span>&nbsp;<span class="op" id="5798063">||</span>&nbsp;<span class="ident" id="5798066">t</span><span class="op" id="5798067">.</span><span class="ident" id="5798068">isEmbedded</span>&nbsp;<span class="op" id="5798079">&amp;&amp;</span>&nbsp;<span class="ident" id="5798082">visible</span><span class="op" id="5798089">)</span>&nbsp;<span class="op" id="5798091">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798096">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798173">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798248">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798325">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798380">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5798401">r</span><span class="op" id="5798402">.</span><span class="ident" id="5798403">values</span>&nbsp;<span class="op" id="5798410">=</span>&nbsp;<span class="builtinfunc" id="5798412">append</span><span class="op" id="5798418">(</span><span class="ident" id="5798419">r</span><span class="op" id="5798420">.</span><span class="ident" id="5798421">values</span><span class="op" id="5798427">,</span>&nbsp;<span class="ident" id="5798429">t</span><span class="op" id="5798430">.</span><span class="ident" id="5798431">values</span><span class="op" id="5798437">...</span><span class="op" id="5798440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798445">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5798477">for</span>&nbsp;<span class="ident" id="5798481">name</span><span class="op" id="5798485">,</span>&nbsp;<span class="ident" id="5798487">f</span>&nbsp;<span class="op" id="5798489">:=</span>&nbsp;<span class="keyword" id="5798492">range</span>&nbsp;<span class="ident" id="5798498">t</span><span class="op" id="5798499">.</span><span class="ident" id="5798500">funcs</span>&nbsp;<span class="op" id="5798506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798512">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798566">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5798624">r</span><span class="op" id="5798625">.</span><span class="ident" id="5798626">funcs</span><span class="op" id="5798631">[</span><span class="ident" id="5798632">name</span><span class="op" id="5798636">]</span>&nbsp;<span class="op" id="5798638">=</span>&nbsp;<span class="ident" id="5798640">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5798645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798650">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5798672">for</span>&nbsp;<span class="ident" id="5798676">name</span><span class="op" id="5798680">,</span>&nbsp;<span class="ident" id="5798682">m</span>&nbsp;<span class="op" id="5798684">:=</span>&nbsp;<span class="keyword" id="5798687">range</span>&nbsp;<span class="ident" id="5798693">t</span><span class="op" id="5798694">.</span><span class="ident" id="5798695">methods</span>&nbsp;<span class="op" id="5798703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798709">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5798773">if</span>&nbsp;<span class="ident" id="5798776">_</span><span class="op" id="5798777">,</span>&nbsp;<span class="ident" id="5798779">found</span>&nbsp;<span class="op" id="5798785">:=</span>&nbsp;<span class="ident" id="5798788">r</span><span class="op" id="5798789">.</span><span class="ident" id="5798790">funcs</span><span class="op" id="5798795">[</span><span class="ident" id="5798796">name</span><span class="op" id="5798800">]</span><span class="op" id="5798801">;</span>&nbsp;<span class="op" id="5798803">!</span><span class="ident" id="5798804">found</span>&nbsp;<span class="op" id="5798810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5798817">r</span><span class="op" id="5798818">.</span><span class="ident" id="5798819">funcs</span><span class="op" id="5798824">[</span><span class="ident" id="5798825">name</span><span class="op" id="5798829">]</span>&nbsp;<span class="op" id="5798831">=</span>&nbsp;<span class="ident" id="5798833">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5798839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5798844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5798848">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5798852">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5798911">if</span>&nbsp;<span class="ident" id="5798914">t</span><span class="op" id="5798915">.</span><span class="ident" id="5798916">decl</span>&nbsp;<span class="op" id="5798921">==</span>&nbsp;<span class="ident" id="5798924">nil</span>&nbsp;<span class="op" id="5798928">||</span>&nbsp;<span class="op" id="5798931">!</span><span class="ident" id="5798932">visible</span>&nbsp;<span class="op" id="5798940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5798945">delete</span><span class="op" id="5798951">(</span><span class="ident" id="5798952">r</span><span class="op" id="5798953">.</span><span class="ident" id="5798954">types</span><span class="op" id="5798959">,</span>&nbsp;<span class="ident" id="5798961">t</span><span class="op" id="5798962">.</span><span class="ident" id="5798963">name</span><span class="op" id="5798967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5798971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5798974">}</span><br>
<span class="lineno">670</span><span class="op" id="5798976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5798979">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5799059">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="5799071">type</span>&nbsp;<span class="ident" id="5799076">data</span>&nbsp;<span class="keyword" id="5799081">struct</span>&nbsp;<span class="op" id="5799088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799091">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5799096">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799101">swap</span>&nbsp;<span class="keyword" id="5799106">func</span><span class="op" id="5799110">(</span><span class="ident" id="5799111">i</span><span class="op" id="5799112">,</span>&nbsp;<span class="ident" id="5799114">j</span>&nbsp;<span class="builtintype" id="5799116">int</span><span class="op" id="5799119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799122">less</span>&nbsp;<span class="keyword" id="5799127">func</span><span class="op" id="5799131">(</span><span class="ident" id="5799132">i</span><span class="op" id="5799133">,</span>&nbsp;<span class="ident" id="5799135">j</span>&nbsp;<span class="builtintype" id="5799137">int</span><span class="op" id="5799140">)</span>&nbsp;<span class="builtintype" id="5799142">bool</span><br>
<span class="lineno"></span><span class="op" id="5799147">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5799150">func</span>&nbsp;<span class="op" id="5799155">(</span><span class="ident" id="5799156">d</span>&nbsp;<span class="op" id="5799158">*</span><span class="ident" id="5799159">data</span><span class="op" id="5799163">)</span>&nbsp;<span class="ident" id="5799165">Len</span><span class="op" id="5799168">(</span><span class="op" id="5799169">)</span>&nbsp;<span class="builtintype" id="5799171">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799185">{</span>&nbsp;<span class="keyword" id="5799187">return</span>&nbsp;<span class="ident" id="5799194">d</span><span class="op" id="5799195">.</span><span class="ident" id="5799196">n</span>&nbsp;<span class="op" id="5799198">}</span><br>
<span class="lineno"></span><span class="keyword" id="5799200">func</span>&nbsp;<span class="op" id="5799205">(</span><span class="ident" id="5799206">d</span>&nbsp;<span class="op" id="5799208">*</span><span class="ident" id="5799209">data</span><span class="op" id="5799213">)</span>&nbsp;<span class="ident" id="5799215">Swap</span><span class="op" id="5799219">(</span><span class="ident" id="5799220">i</span><span class="op" id="5799221">,</span>&nbsp;<span class="ident" id="5799223">j</span>&nbsp;<span class="builtintype" id="5799225">int</span><span class="op" id="5799228">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5799235">{</span>&nbsp;<span class="ident" id="5799237">d</span><span class="op" id="5799238">.</span><span class="ident" id="5799239">swap</span><span class="op" id="5799243">(</span><span class="ident" id="5799244">i</span><span class="op" id="5799245">,</span>&nbsp;<span class="ident" id="5799247">j</span><span class="op" id="5799248">)</span>&nbsp;<span class="op" id="5799250">}</span><br>
<span class="lineno"></span><span class="keyword" id="5799252">func</span>&nbsp;<span class="op" id="5799257">(</span><span class="ident" id="5799258">d</span>&nbsp;<span class="op" id="5799260">*</span><span class="ident" id="5799261">data</span><span class="op" id="5799265">)</span>&nbsp;<span class="ident" id="5799267">Less</span><span class="op" id="5799271">(</span><span class="ident" id="5799272">i</span><span class="op" id="5799273">,</span>&nbsp;<span class="ident" id="5799275">j</span>&nbsp;<span class="builtintype" id="5799277">int</span><span class="op" id="5799280">)</span>&nbsp;<span class="builtintype" id="5799282">bool</span>&nbsp;<span class="op" id="5799287">{</span>&nbsp;<span class="keyword" id="5799289">return</span>&nbsp;<span class="ident" id="5799296">d</span><span class="op" id="5799297">.</span><span class="ident" id="5799298">less</span><span class="op" id="5799302">(</span><span class="ident" id="5799303">i</span><span class="op" id="5799304">,</span>&nbsp;<span class="ident" id="5799306">j</span><span class="op" id="5799307">)</span>&nbsp;<span class="op" id="5799309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="5799312">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="5799355">func</span>&nbsp;<span class="ident" id="5799360">sortBy</span><span class="op" id="5799366">(</span><span class="ident" id="5799367">less</span>&nbsp;<span class="keyword" id="5799372">func</span><span class="op" id="5799376">(</span><span class="ident" id="5799377">i</span><span class="op" id="5799378">,</span>&nbsp;<span class="ident" id="5799380">j</span>&nbsp;<span class="builtintype" id="5799382">int</span><span class="op" id="5799385">)</span>&nbsp;<span class="builtintype" id="5799387">bool</span><span class="op" id="5799391">,</span>&nbsp;<span class="ident" id="5799393">swap</span>&nbsp;<span class="keyword" id="5799398">func</span><span class="op" id="5799402">(</span><span class="ident" id="5799403">i</span><span class="op" id="5799404">,</span>&nbsp;<span class="ident" id="5799406">j</span>&nbsp;<span class="builtintype" id="5799408">int</span><span class="op" id="5799411">)</span><span class="op" id="5799412">,</span>&nbsp;<span class="ident" id="5799414">n</span>&nbsp;<span class="builtintype" id="5799416">int</span><span class="op" id="5799419">)</span>&nbsp;<span class="op" id="5799421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799424">sort</span><span class="op" id="5799428">.</span><span class="ident" id="5799429">Sort</span><span class="op" id="5799433">(</span><span class="op" id="5799434">&amp;</span><span class="ident" id="5799435">data</span><span class="op" id="5799439">{</span><span class="ident" id="5799440">n</span><span class="op" id="5799441">,</span>&nbsp;<span class="ident" id="5799443">swap</span><span class="op" id="5799447">,</span>&nbsp;<span class="ident" id="5799449">less</span><span class="op" id="5799453">}</span><span class="op" id="5799454">)</span><br>
<span class="lineno"></span><span class="op" id="5799456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="5799459">func</span>&nbsp;<span class="ident" id="5799464">sortedKeys</span><span class="op" id="5799474">(</span><span class="ident" id="5799475">m</span>&nbsp;<span class="keyword" id="5799477">map</span><span class="op" id="5799480">[</span><span class="builtintype" id="5799481">string</span><span class="op" id="5799487">]</span><span class="builtintype" id="5799488">int</span><span class="op" id="5799491">)</span>&nbsp;<span class="op" id="5799493">[</span><span class="op" id="5799494">]</span><span class="builtintype" id="5799495">string</span>&nbsp;<span class="op" id="5799502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799505">list</span>&nbsp;<span class="op" id="5799510">:=</span>&nbsp;<span class="builtinfunc" id="5799513">make</span><span class="op" id="5799517">(</span><span class="op" id="5799518">[</span><span class="op" id="5799519">]</span><span class="builtintype" id="5799520">string</span><span class="op" id="5799526">,</span>&nbsp;<span class="builtinfunc" id="5799528">len</span><span class="op" id="5799531">(</span><span class="ident" id="5799532">m</span><span class="op" id="5799533">)</span><span class="op" id="5799534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799537">i</span>&nbsp;<span class="op" id="5799539">:=</span>&nbsp;<span class="num" id="5799542">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799545">for</span>&nbsp;<span class="ident" id="5799549">key</span>&nbsp;<span class="op" id="5799553">:=</span>&nbsp;<span class="keyword" id="5799556">range</span>&nbsp;<span class="ident" id="5799562">m</span>&nbsp;<span class="op" id="5799564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799568">list</span><span class="op" id="5799572">[</span><span class="ident" id="5799573">i</span><span class="op" id="5799574">]</span>&nbsp;<span class="op" id="5799576">=</span>&nbsp;<span class="ident" id="5799578">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799584">i</span><span class="op" id="5799585">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5799589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799592">sort</span><span class="op" id="5799596">.</span><span class="ident" id="5799597">Strings</span><span class="op" id="5799604">(</span><span class="ident" id="5799605">list</span><span class="op" id="5799609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799612">return</span>&nbsp;<span class="ident" id="5799619">list</span><br>
<span class="lineno"></span><span class="op" id="5799624">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="5799627">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="5799693">//</span><br>
<span class="lineno"></span><span class="keyword" id="5799696">func</span>&nbsp;<span class="ident" id="5799701">sortingName</span><span class="op" id="5799712">(</span><span class="ident" id="5799713">d</span>&nbsp;<span class="op" id="5799715">*</span><span class="ident" id="5799716">ast</span><span class="op" id="5799719">.</span><span class="ident" id="5799720">GenDecl</span><span class="op" id="5799727">)</span>&nbsp;<span class="builtintype" id="5799729">string</span>&nbsp;<span class="op" id="5799736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799739">if</span>&nbsp;<span class="builtinfunc" id="5799742">len</span><span class="op" id="5799745">(</span><span class="ident" id="5799746">d</span><span class="op" id="5799747">.</span><span class="ident" id="5799748">Specs</span><span class="op" id="5799753">)</span>&nbsp;<span class="op" id="5799755">==</span>&nbsp;<span class="num" id="5799758">1</span>&nbsp;<span class="op" id="5799760">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799764">if</span>&nbsp;<span class="ident" id="5799767">s</span><span class="op" id="5799768">,</span>&nbsp;<span class="ident" id="5799770">ok</span>&nbsp;<span class="op" id="5799773">:=</span>&nbsp;<span class="ident" id="5799776">d</span><span class="op" id="5799777">.</span><span class="ident" id="5799778">Specs</span><span class="op" id="5799783">[</span><span class="num" id="5799784">0</span><span class="op" id="5799785">]</span><span class="op" id="5799786">.</span><span class="op" id="5799787">(</span><span class="op" id="5799788">*</span><span class="ident" id="5799789">ast</span><span class="op" id="5799792">.</span><span class="ident" id="5799793">ValueSpec</span><span class="op" id="5799802">)</span><span class="op" id="5799803">;</span>&nbsp;<span class="ident" id="5799805">ok</span>&nbsp;<span class="op" id="5799808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799813">return</span>&nbsp;<span class="ident" id="5799820">s</span><span class="op" id="5799821">.</span><span class="ident" id="5799822">Names</span><span class="op" id="5799827">[</span><span class="num" id="5799828">0</span><span class="op" id="5799829">]</span><span class="op" id="5799830">.</span><span class="ident" id="5799831">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5799838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5799841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799844">return</span>&nbsp;<span class="string" id="5799851">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="5799854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5799857">func</span>&nbsp;<span class="ident" id="5799862">sortedValues</span><span class="op" id="5799874">(</span><span class="ident" id="5799875">m</span>&nbsp;<span class="op" id="5799877">[</span><span class="op" id="5799878">]</span><span class="op" id="5799879">*</span><span class="ident" id="5799880">Value</span><span class="op" id="5799885">,</span>&nbsp;<span class="ident" id="5799887">tok</span>&nbsp;<span class="ident" id="5799891">token</span><span class="op" id="5799896">.</span><span class="ident" id="5799897">Token</span><span class="op" id="5799902">)</span>&nbsp;<span class="op" id="5799904">[</span><span class="op" id="5799905">]</span><span class="op" id="5799906">*</span><span class="ident" id="5799907">Value</span>&nbsp;<span class="op" id="5799913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799916">list</span>&nbsp;<span class="op" id="5799921">:=</span>&nbsp;<span class="builtinfunc" id="5799924">make</span><span class="op" id="5799928">(</span><span class="op" id="5799929">[</span><span class="op" id="5799930">]</span><span class="op" id="5799931">*</span><span class="ident" id="5799932">Value</span><span class="op" id="5799937">,</span>&nbsp;<span class="builtinfunc" id="5799939">len</span><span class="op" id="5799942">(</span><span class="ident" id="5799943">m</span><span class="op" id="5799944">)</span><span class="op" id="5799945">)</span>&nbsp;<span class="comment" id="5799947">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5799974">i</span>&nbsp;<span class="op" id="5799976">:=</span>&nbsp;<span class="num" id="5799979">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5799982">for</span>&nbsp;<span class="ident" id="5799986">_</span><span class="op" id="5799987">,</span>&nbsp;<span class="ident" id="5799989">val</span>&nbsp;<span class="op" id="5799993">:=</span>&nbsp;<span class="keyword" id="5799996">range</span>&nbsp;<span class="ident" id="5800002">m</span>&nbsp;<span class="op" id="5800004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800008">if</span>&nbsp;<span class="ident" id="5800011">val</span><span class="op" id="5800014">.</span><span class="ident" id="5800015">Decl</span><span class="op" id="5800019">.</span><span class="ident" id="5800020">Tok</span>&nbsp;<span class="op" id="5800024">==</span>&nbsp;<span class="ident" id="5800027">tok</span>&nbsp;<span class="op" id="5800031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800036">list</span><span class="op" id="5800040">[</span><span class="ident" id="5800041">i</span><span class="op" id="5800042">]</span>&nbsp;<span class="op" id="5800044">=</span>&nbsp;<span class="ident" id="5800046">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800053">i</span><span class="op" id="5800054">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800059">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800065">list</span>&nbsp;<span class="op" id="5800070">=</span>&nbsp;<span class="ident" id="5800072">list</span><span class="op" id="5800076">[</span><span class="num" id="5800077">0</span><span class="op" id="5800078">:</span><span class="ident" id="5800079">i</span><span class="op" id="5800080">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800084">sortBy</span><span class="op" id="5800090">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800094">func</span><span class="op" id="5800098">(</span><span class="ident" id="5800099">i</span><span class="op" id="5800100">,</span>&nbsp;<span class="ident" id="5800102">j</span>&nbsp;<span class="builtintype" id="5800104">int</span><span class="op" id="5800107">)</span>&nbsp;<span class="builtintype" id="5800109">bool</span>&nbsp;<span class="op" id="5800114">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800119">if</span>&nbsp;<span class="ident" id="5800122">ni</span><span class="op" id="5800124">,</span>&nbsp;<span class="ident" id="5800126">nj</span>&nbsp;<span class="op" id="5800129">:=</span>&nbsp;<span class="ident" id="5800132">sortingName</span><span class="op" id="5800143">(</span><span class="ident" id="5800144">list</span><span class="op" id="5800148">[</span><span class="ident" id="5800149">i</span><span class="op" id="5800150">]</span><span class="op" id="5800151">.</span><span class="ident" id="5800152">Decl</span><span class="op" id="5800156">)</span><span class="op" id="5800157">,</span>&nbsp;<span class="ident" id="5800159">sortingName</span><span class="op" id="5800170">(</span><span class="ident" id="5800171">list</span><span class="op" id="5800175">[</span><span class="ident" id="5800176">j</span><span class="op" id="5800177">]</span><span class="op" id="5800178">.</span><span class="ident" id="5800179">Decl</span><span class="op" id="5800183">)</span><span class="op" id="5800184">;</span>&nbsp;<span class="ident" id="5800186">ni</span>&nbsp;<span class="op" id="5800189">!=</span>&nbsp;<span class="ident" id="5800192">nj</span>&nbsp;<span class="op" id="5800195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800201">return</span>&nbsp;<span class="ident" id="5800208">ni</span>&nbsp;<span class="op" id="5800211">&lt;</span>&nbsp;<span class="ident" id="5800213">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800224">return</span>&nbsp;<span class="ident" id="5800231">list</span><span class="op" id="5800235">[</span><span class="ident" id="5800236">i</span><span class="op" id="5800237">]</span><span class="op" id="5800238">.</span><span class="ident" id="5800239">order</span>&nbsp;<span class="op" id="5800245">&lt;</span>&nbsp;<span class="ident" id="5800247">list</span><span class="op" id="5800251">[</span><span class="ident" id="5800252">j</span><span class="op" id="5800253">]</span><span class="op" id="5800254">.</span><span class="ident" id="5800255">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800263">}</span><span class="op" id="5800264">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800268">func</span><span class="op" id="5800272">(</span><span class="ident" id="5800273">i</span><span class="op" id="5800274">,</span>&nbsp;<span class="ident" id="5800276">j</span>&nbsp;<span class="builtintype" id="5800278">int</span><span class="op" id="5800281">)</span>&nbsp;<span class="op" id="5800283">{</span>&nbsp;<span class="ident" id="5800285">list</span><span class="op" id="5800289">[</span><span class="ident" id="5800290">i</span><span class="op" id="5800291">]</span><span class="op" id="5800292">,</span>&nbsp;<span class="ident" id="5800294">list</span><span class="op" id="5800298">[</span><span class="ident" id="5800299">j</span><span class="op" id="5800300">]</span>&nbsp;<span class="op" id="5800302">=</span>&nbsp;<span class="ident" id="5800304">list</span><span class="op" id="5800308">[</span><span class="ident" id="5800309">j</span><span class="op" id="5800310">]</span><span class="op" id="5800311">,</span>&nbsp;<span class="ident" id="5800313">list</span><span class="op" id="5800317">[</span><span class="ident" id="5800318">i</span><span class="op" id="5800319">]</span>&nbsp;<span class="op" id="5800321">}</span><span class="op" id="5800322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5800326">len</span><span class="op" id="5800329">(</span><span class="ident" id="5800330">list</span><span class="op" id="5800334">)</span><span class="op" id="5800335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800342">return</span>&nbsp;<span class="ident" id="5800349">list</span><br>
<span class="lineno">735</span><span class="op" id="5800354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5800357">func</span>&nbsp;<span class="ident" id="5800362">sortedTypes</span><span class="op" id="5800373">(</span><span class="ident" id="5800374">m</span>&nbsp;<span class="keyword" id="5800376">map</span><span class="op" id="5800379">[</span><span class="builtintype" id="5800380">string</span><span class="op" id="5800386">]</span><span class="op" id="5800387">*</span><span class="ident" id="5800388">namedType</span><span class="op" id="5800397">,</span>&nbsp;<span class="ident" id="5800399">allMethods</span>&nbsp;<span class="builtintype" id="5800410">bool</span><span class="op" id="5800414">)</span>&nbsp;<span class="op" id="5800416">[</span><span class="op" id="5800417">]</span><span class="op" id="5800418">*</span><span class="ident" id="5800419">Type</span>&nbsp;<span class="op" id="5800424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800427">list</span>&nbsp;<span class="op" id="5800432">:=</span>&nbsp;<span class="builtinfunc" id="5800435">make</span><span class="op" id="5800439">(</span><span class="op" id="5800440">[</span><span class="op" id="5800441">]</span><span class="op" id="5800442">*</span><span class="ident" id="5800443">Type</span><span class="op" id="5800447">,</span>&nbsp;<span class="builtinfunc" id="5800449">len</span><span class="op" id="5800452">(</span><span class="ident" id="5800453">m</span><span class="op" id="5800454">)</span><span class="op" id="5800455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800458">i</span>&nbsp;<span class="op" id="5800460">:=</span>&nbsp;<span class="num" id="5800463">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800466">for</span>&nbsp;<span class="ident" id="5800470">_</span><span class="op" id="5800471">,</span>&nbsp;<span class="ident" id="5800473">t</span>&nbsp;<span class="op" id="5800475">:=</span>&nbsp;<span class="keyword" id="5800478">range</span>&nbsp;<span class="ident" id="5800484">m</span>&nbsp;<span class="op" id="5800486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800490">list</span><span class="op" id="5800494">[</span><span class="ident" id="5800495">i</span><span class="op" id="5800496">]</span>&nbsp;<span class="op" id="5800498">=</span>&nbsp;<span class="op" id="5800500">&amp;</span><span class="ident" id="5800501">Type</span><span class="op" id="5800505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800510">Doc</span><span class="op" id="5800513">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5800519">t</span><span class="op" id="5800520">.</span><span class="ident" id="5800521">doc</span><span class="op" id="5800524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800529">Name</span><span class="op" id="5800533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5800538">t</span><span class="op" id="5800539">.</span><span class="ident" id="5800540">name</span><span class="op" id="5800544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800549">Decl</span><span class="op" id="5800553">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5800558">t</span><span class="op" id="5800559">.</span><span class="ident" id="5800560">decl</span><span class="op" id="5800564">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800569">Consts</span><span class="op" id="5800575">:</span>&nbsp;&nbsp;<span class="ident" id="5800578">sortedValues</span><span class="op" id="5800590">(</span><span class="ident" id="5800591">t</span><span class="op" id="5800592">.</span><span class="ident" id="5800593">values</span><span class="op" id="5800599">,</span>&nbsp;<span class="ident" id="5800601">token</span><span class="op" id="5800606">.</span><span class="ident" id="5800607">CONST</span><span class="op" id="5800612">)</span><span class="op" id="5800613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800618">Vars</span><span class="op" id="5800622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5800627">sortedValues</span><span class="op" id="5800639">(</span><span class="ident" id="5800640">t</span><span class="op" id="5800641">.</span><span class="ident" id="5800642">values</span><span class="op" id="5800648">,</span>&nbsp;<span class="ident" id="5800650">token</span><span class="op" id="5800655">.</span><span class="ident" id="5800656">VAR</span><span class="op" id="5800659">)</span><span class="op" id="5800660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800665">Funcs</span><span class="op" id="5800670">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5800674">sortedFuncs</span><span class="op" id="5800685">(</span><span class="ident" id="5800686">t</span><span class="op" id="5800687">.</span><span class="ident" id="5800688">funcs</span><span class="op" id="5800693">,</span>&nbsp;<span class="builtintype" id="5800695">true</span><span class="op" id="5800699">)</span><span class="op" id="5800700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800705">Methods</span><span class="op" id="5800712">:</span>&nbsp;<span class="ident" id="5800714">sortedFuncs</span><span class="op" id="5800725">(</span><span class="ident" id="5800726">t</span><span class="op" id="5800727">.</span><span class="ident" id="5800728">methods</span><span class="op" id="5800735">,</span>&nbsp;<span class="ident" id="5800737">allMethods</span><span class="op" id="5800747">)</span><span class="op" id="5800748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800752">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800756">i</span><span class="op" id="5800757">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5800765">sortBy</span><span class="op" id="5800771">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800775">func</span><span class="op" id="5800779">(</span><span class="ident" id="5800780">i</span><span class="op" id="5800781">,</span>&nbsp;<span class="ident" id="5800783">j</span>&nbsp;<span class="builtintype" id="5800785">int</span><span class="op" id="5800788">)</span>&nbsp;<span class="builtintype" id="5800790">bool</span>&nbsp;<span class="op" id="5800795">{</span>&nbsp;<span class="keyword" id="5800797">return</span>&nbsp;<span class="ident" id="5800804">list</span><span class="op" id="5800808">[</span><span class="ident" id="5800809">i</span><span class="op" id="5800810">]</span><span class="op" id="5800811">.</span><span class="ident" id="5800812">Name</span>&nbsp;<span class="op" id="5800817">&lt;</span>&nbsp;<span class="ident" id="5800819">list</span><span class="op" id="5800823">[</span><span class="ident" id="5800824">j</span><span class="op" id="5800825">]</span><span class="op" id="5800826">.</span><span class="ident" id="5800827">Name</span>&nbsp;<span class="op" id="5800832">}</span><span class="op" id="5800833">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800837">func</span><span class="op" id="5800841">(</span><span class="ident" id="5800842">i</span><span class="op" id="5800843">,</span>&nbsp;<span class="ident" id="5800845">j</span>&nbsp;<span class="builtintype" id="5800847">int</span><span class="op" id="5800850">)</span>&nbsp;<span class="op" id="5800852">{</span>&nbsp;<span class="ident" id="5800854">list</span><span class="op" id="5800858">[</span><span class="ident" id="5800859">i</span><span class="op" id="5800860">]</span><span class="op" id="5800861">,</span>&nbsp;<span class="ident" id="5800863">list</span><span class="op" id="5800867">[</span><span class="ident" id="5800868">j</span><span class="op" id="5800869">]</span>&nbsp;<span class="op" id="5800871">=</span>&nbsp;<span class="ident" id="5800873">list</span><span class="op" id="5800877">[</span><span class="ident" id="5800878">j</span><span class="op" id="5800879">]</span><span class="op" id="5800880">,</span>&nbsp;<span class="ident" id="5800882">list</span><span class="op" id="5800886">[</span><span class="ident" id="5800887">i</span><span class="op" id="5800888">]</span>&nbsp;<span class="op" id="5800890">}</span><span class="op" id="5800891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5800895">len</span><span class="op" id="5800898">(</span><span class="ident" id="5800899">list</span><span class="op" id="5800903">)</span><span class="op" id="5800904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5800907">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800911">return</span>&nbsp;<span class="ident" id="5800918">list</span><br>
<span class="lineno">760</span><span class="op" id="5800923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5800926">func</span>&nbsp;<span class="ident" id="5800931">removeStar</span><span class="op" id="5800941">(</span><span class="ident" id="5800942">s</span>&nbsp;<span class="builtintype" id="5800944">string</span><span class="op" id="5800950">)</span>&nbsp;<span class="builtintype" id="5800952">string</span>&nbsp;<span class="op" id="5800959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800962">if</span>&nbsp;<span class="builtinfunc" id="5800965">len</span><span class="op" id="5800968">(</span><span class="ident" id="5800969">s</span><span class="op" id="5800970">)</span>&nbsp;<span class="op" id="5800972">&gt;</span>&nbsp;<span class="num" id="5800974">0</span>&nbsp;<span class="op" id="5800976">&amp;&amp;</span>&nbsp;<span class="ident" id="5800979">s</span><span class="op" id="5800980">[</span><span class="num" id="5800981">0</span><span class="op" id="5800982">]</span>&nbsp;<span class="op" id="5800984">==</span>&nbsp;<span class="string" id="5800987">&#39;*&#39;</span>&nbsp;<span class="op" id="5800991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5800995">return</span>&nbsp;<span class="ident" id="5801002">s</span><span class="op" id="5801003">[</span><span class="num" id="5801004">1</span><span class="op" id="5801005">:</span><span class="op" id="5801006">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5801009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801012">return</span>&nbsp;<span class="ident" id="5801019">s</span><br>
<span class="lineno"></span><span class="op" id="5801021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5801024">func</span>&nbsp;<span class="ident" id="5801029">sortedFuncs</span><span class="op" id="5801040">(</span><span class="ident" id="5801041">m</span>&nbsp;<span class="ident" id="5801043">methodSet</span><span class="op" id="5801052">,</span>&nbsp;<span class="ident" id="5801054">allMethods</span>&nbsp;<span class="builtintype" id="5801065">bool</span><span class="op" id="5801069">)</span>&nbsp;<span class="op" id="5801071">[</span><span class="op" id="5801072">]</span><span class="op" id="5801073">*</span><span class="ident" id="5801074">Func</span>&nbsp;<span class="op" id="5801079">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801082">list</span>&nbsp;<span class="op" id="5801087">:=</span>&nbsp;<span class="builtinfunc" id="5801090">make</span><span class="op" id="5801094">(</span><span class="op" id="5801095">[</span><span class="op" id="5801096">]</span><span class="op" id="5801097">*</span><span class="ident" id="5801098">Func</span><span class="op" id="5801102">,</span>&nbsp;<span class="builtinfunc" id="5801104">len</span><span class="op" id="5801107">(</span><span class="ident" id="5801108">m</span><span class="op" id="5801109">)</span><span class="op" id="5801110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801113">i</span>&nbsp;<span class="op" id="5801115">:=</span>&nbsp;<span class="num" id="5801118">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801121">for</span>&nbsp;<span class="ident" id="5801125">_</span><span class="op" id="5801126">,</span>&nbsp;<span class="ident" id="5801128">m</span>&nbsp;<span class="op" id="5801130">:=</span>&nbsp;<span class="keyword" id="5801133">range</span>&nbsp;<span class="ident" id="5801139">m</span>&nbsp;<span class="op" id="5801141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5801145">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801185">switch</span>&nbsp;<span class="op" id="5801192">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801196">case</span>&nbsp;<span class="ident" id="5801201">m</span><span class="op" id="5801202">.</span><span class="ident" id="5801203">Decl</span>&nbsp;<span class="op" id="5801208">==</span>&nbsp;<span class="ident" id="5801211">nil</span><span class="op" id="5801214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5801219">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801247">case</span>&nbsp;<span class="ident" id="5801252">allMethods</span><span class="op" id="5801262">,</span>&nbsp;<span class="ident" id="5801264">m</span><span class="op" id="5801265">.</span><span class="ident" id="5801266">Level</span>&nbsp;<span class="op" id="5801272">==</span>&nbsp;<span class="num" id="5801275">0</span><span class="op" id="5801276">,</span>&nbsp;<span class="op" id="5801278">!</span><span class="ident" id="5801279">ast</span><span class="op" id="5801282">.</span><span class="ident" id="5801283">IsExported</span><span class="op" id="5801293">(</span><span class="ident" id="5801294">removeStar</span><span class="op" id="5801304">(</span><span class="ident" id="5801305">m</span><span class="op" id="5801306">.</span><span class="ident" id="5801307">Orig</span><span class="op" id="5801311">)</span><span class="op" id="5801312">)</span><span class="op" id="5801313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5801318">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5801373">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801428">list</span><span class="op" id="5801432">[</span><span class="ident" id="5801433">i</span><span class="op" id="5801434">]</span>&nbsp;<span class="op" id="5801436">=</span>&nbsp;<span class="ident" id="5801438">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801443">i</span><span class="op" id="5801444">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5801449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5801452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801455">list</span>&nbsp;<span class="op" id="5801460">=</span>&nbsp;<span class="ident" id="5801462">list</span><span class="op" id="5801466">[</span><span class="num" id="5801467">0</span><span class="op" id="5801468">:</span><span class="ident" id="5801469">i</span><span class="op" id="5801470">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801473">sortBy</span><span class="op" id="5801479">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801483">func</span><span class="op" id="5801487">(</span><span class="ident" id="5801488">i</span><span class="op" id="5801489">,</span>&nbsp;<span class="ident" id="5801491">j</span>&nbsp;<span class="builtintype" id="5801493">int</span><span class="op" id="5801496">)</span>&nbsp;<span class="builtintype" id="5801498">bool</span>&nbsp;<span class="op" id="5801503">{</span>&nbsp;<span class="keyword" id="5801505">return</span>&nbsp;<span class="ident" id="5801512">list</span><span class="op" id="5801516">[</span><span class="ident" id="5801517">i</span><span class="op" id="5801518">]</span><span class="op" id="5801519">.</span><span class="ident" id="5801520">Name</span>&nbsp;<span class="op" id="5801525">&lt;</span>&nbsp;<span class="ident" id="5801527">list</span><span class="op" id="5801531">[</span><span class="ident" id="5801532">j</span><span class="op" id="5801533">]</span><span class="op" id="5801534">.</span><span class="ident" id="5801535">Name</span>&nbsp;<span class="op" id="5801540">}</span><span class="op" id="5801541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801545">func</span><span class="op" id="5801549">(</span><span class="ident" id="5801550">i</span><span class="op" id="5801551">,</span>&nbsp;<span class="ident" id="5801553">j</span>&nbsp;<span class="builtintype" id="5801555">int</span><span class="op" id="5801558">)</span>&nbsp;<span class="op" id="5801560">{</span>&nbsp;<span class="ident" id="5801562">list</span><span class="op" id="5801566">[</span><span class="ident" id="5801567">i</span><span class="op" id="5801568">]</span><span class="op" id="5801569">,</span>&nbsp;<span class="ident" id="5801571">list</span><span class="op" id="5801575">[</span><span class="ident" id="5801576">j</span><span class="op" id="5801577">]</span>&nbsp;<span class="op" id="5801579">=</span>&nbsp;<span class="ident" id="5801581">list</span><span class="op" id="5801585">[</span><span class="ident" id="5801586">j</span><span class="op" id="5801587">]</span><span class="op" id="5801588">,</span>&nbsp;<span class="ident" id="5801590">list</span><span class="op" id="5801594">[</span><span class="ident" id="5801595">i</span><span class="op" id="5801596">]</span>&nbsp;<span class="op" id="5801598">}</span><span class="op" id="5801599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5801603">len</span><span class="op" id="5801606">(</span><span class="ident" id="5801607">list</span><span class="op" id="5801611">)</span><span class="op" id="5801612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5801615">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801618">return</span>&nbsp;<span class="ident" id="5801625">list</span><br>
<span class="lineno"></span><span class="op" id="5801630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5801633">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="5801706">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="5801774">//</span><br>
<span class="lineno"></span><span class="keyword" id="5801777">func</span>&nbsp;<span class="ident" id="5801782">noteBodies</span><span class="op" id="5801792">(</span><span class="ident" id="5801793">notes</span>&nbsp;<span class="op" id="5801799">[</span><span class="op" id="5801800">]</span><span class="op" id="5801801">*</span><span class="ident" id="5801802">Note</span><span class="op" id="5801806">)</span>&nbsp;<span class="op" id="5801808">[</span><span class="op" id="5801809">]</span><span class="builtintype" id="5801810">string</span>&nbsp;<span class="op" id="5801817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801820">var</span>&nbsp;<span class="ident" id="5801824">list</span>&nbsp;<span class="op" id="5801829">[</span><span class="op" id="5801830">]</span><span class="builtintype" id="5801831">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801839">for</span>&nbsp;<span class="ident" id="5801843">_</span><span class="op" id="5801844">,</span>&nbsp;<span class="ident" id="5801846">n</span>&nbsp;<span class="op" id="5801848">:=</span>&nbsp;<span class="keyword" id="5801851">range</span>&nbsp;<span class="ident" id="5801857">notes</span>&nbsp;<span class="op" id="5801863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5801867">list</span>&nbsp;<span class="op" id="5801872">=</span>&nbsp;<span class="builtinfunc" id="5801874">append</span><span class="op" id="5801880">(</span><span class="ident" id="5801881">list</span><span class="op" id="5801885">,</span>&nbsp;<span class="ident" id="5801887">n</span><span class="op" id="5801888">.</span><span class="ident" id="5801889">Body</span><span class="op" id="5801893">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5801896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5801899">return</span>&nbsp;<span class="ident" id="5801906">list</span><br>
<span class="lineno"></span><span class="op" id="5801911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5801914">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="5801994">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5802022">var</span>&nbsp;<span class="ident" id="5802026">predeclaredTypes</span>&nbsp;<span class="op" id="5802043">=</span>&nbsp;<span class="keyword" id="5802045">map</span><span class="op" id="5802048">[</span><span class="builtintype" id="5802049">string</span><span class="op" id="5802055">]</span><span class="builtintype" id="5802056">bool</span><span class="op" id="5802060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802063">&#34;bool&#34;</span><span class="op" id="5802069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802077">true</span><span class="op" id="5802081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802084">&#34;byte&#34;</span><span class="op" id="5802090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802098">true</span><span class="op" id="5802102">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802105">&#34;complex64&#34;</span><span class="op" id="5802116">:</span>&nbsp;&nbsp;<span class="builtintype" id="5802119">true</span><span class="op" id="5802123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802126">&#34;complex128&#34;</span><span class="op" id="5802138">:</span>&nbsp;<span class="builtintype" id="5802140">true</span><span class="op" id="5802144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802147">&#34;error&#34;</span><span class="op" id="5802154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802161">true</span><span class="op" id="5802165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802168">&#34;float32&#34;</span><span class="op" id="5802177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802182">true</span><span class="op" id="5802186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802189">&#34;float64&#34;</span><span class="op" id="5802198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802203">true</span><span class="op" id="5802207">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802210">&#34;int&#34;</span><span class="op" id="5802215">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802224">true</span><span class="op" id="5802228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802231">&#34;int8&#34;</span><span class="op" id="5802237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802245">true</span><span class="op" id="5802249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802252">&#34;int16&#34;</span><span class="op" id="5802259">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802266">true</span><span class="op" id="5802270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802273">&#34;int32&#34;</span><span class="op" id="5802280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802287">true</span><span class="op" id="5802291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802294">&#34;int64&#34;</span><span class="op" id="5802301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802308">true</span><span class="op" id="5802312">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802315">&#34;rune&#34;</span><span class="op" id="5802321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802329">true</span><span class="op" id="5802333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802336">&#34;string&#34;</span><span class="op" id="5802344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802350">true</span><span class="op" id="5802354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802357">&#34;uint&#34;</span><span class="op" id="5802363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802371">true</span><span class="op" id="5802375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802378">&#34;uint8&#34;</span><span class="op" id="5802385">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802392">true</span><span class="op" id="5802396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802399">&#34;uint16&#34;</span><span class="op" id="5802407">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802413">true</span><span class="op" id="5802417">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802420">&#34;uint32&#34;</span><span class="op" id="5802428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802434">true</span><span class="op" id="5802438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802441">&#34;uint64&#34;</span><span class="op" id="5802449">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802455">true</span><span class="op" id="5802459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802462">&#34;uintptr&#34;</span><span class="op" id="5802471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802476">true</span><span class="op" id="5802480">,</span><br>
<span class="lineno"></span><span class="op" id="5802482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="5802485">var</span>&nbsp;<span class="ident" id="5802489">predeclaredFuncs</span>&nbsp;<span class="op" id="5802506">=</span>&nbsp;<span class="keyword" id="5802508">map</span><span class="op" id="5802511">[</span><span class="builtintype" id="5802512">string</span><span class="op" id="5802518">]</span><span class="builtintype" id="5802519">bool</span><span class="op" id="5802523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802526">&#34;append&#34;</span><span class="op" id="5802534">:</span>&nbsp;&nbsp;<span class="builtintype" id="5802537">true</span><span class="op" id="5802541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802544">&#34;cap&#34;</span><span class="op" id="5802549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802555">true</span><span class="op" id="5802559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802562">&#34;close&#34;</span><span class="op" id="5802569">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802573">true</span><span class="op" id="5802577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802580">&#34;complex&#34;</span><span class="op" id="5802589">:</span>&nbsp;<span class="builtintype" id="5802591">true</span><span class="op" id="5802595">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802598">&#34;copy&#34;</span><span class="op" id="5802604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802609">true</span><span class="op" id="5802613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802616">&#34;delete&#34;</span><span class="op" id="5802624">:</span>&nbsp;&nbsp;<span class="builtintype" id="5802627">true</span><span class="op" id="5802631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802634">&#34;imag&#34;</span><span class="op" id="5802640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802645">true</span><span class="op" id="5802649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802652">&#34;len&#34;</span><span class="op" id="5802657">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802663">true</span><span class="op" id="5802667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802670">&#34;make&#34;</span><span class="op" id="5802676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802681">true</span><span class="op" id="5802685">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802688">&#34;new&#34;</span><span class="op" id="5802693">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802699">true</span><span class="op" id="5802703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802706">&#34;panic&#34;</span><span class="op" id="5802713">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802717">true</span><span class="op" id="5802721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802724">&#34;print&#34;</span><span class="op" id="5802731">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802735">true</span><span class="op" id="5802739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802742">&#34;println&#34;</span><span class="op" id="5802751">:</span>&nbsp;<span class="builtintype" id="5802753">true</span><span class="op" id="5802757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802760">&#34;real&#34;</span><span class="op" id="5802766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802771">true</span><span class="op" id="5802775">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802778">&#34;recover&#34;</span><span class="op" id="5802787">:</span>&nbsp;<span class="builtintype" id="5802789">true</span><span class="op" id="5802793">,</span><br>
<span class="lineno"></span><span class="op" id="5802795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5802798">var</span>&nbsp;<span class="ident" id="5802802">predeclaredConstants</span>&nbsp;<span class="op" id="5802823">=</span>&nbsp;<span class="keyword" id="5802825">map</span><span class="op" id="5802828">[</span><span class="builtintype" id="5802829">string</span><span class="op" id="5802835">]</span><span class="builtintype" id="5802836">bool</span><span class="op" id="5802840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802843">&#34;false&#34;</span><span class="op" id="5802850">:</span>&nbsp;<span class="builtintype" id="5802852">true</span><span class="op" id="5802856">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802859">&#34;iota&#34;</span><span class="op" id="5802865">:</span>&nbsp;&nbsp;<span class="builtintype" id="5802868">true</span><span class="op" id="5802872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802875">&#34;nil&#34;</span><span class="op" id="5802880">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802884">true</span><span class="op" id="5802888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802891">&#34;true&#34;</span><span class="op" id="5802897">:</span>&nbsp;&nbsp;<span class="builtintype" id="5802900">true</span><span class="op" id="5802904">,</span><br>
<span class="lineno"></span><span class="op" id="5802906">}</span>
</div>
</body>
</html>
