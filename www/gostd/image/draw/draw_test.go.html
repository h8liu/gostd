<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7961731">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7961786">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7961840">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7961891">package</span>&nbsp;<span class="ident" id="7961899">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7961905">import</span>&nbsp;<span class="op" id="7961912">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7961915">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7961924">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7961939">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7961952">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7961958">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7961968">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7961971">func</span>&nbsp;<span class="ident" id="7961976">eq</span><span class="op" id="7961978">(</span><span class="ident" id="7961979">c0</span><span class="op" id="7961981">,</span>&nbsp;<span class="ident" id="7961983">c1</span>&nbsp;<span class="ident" id="7961986">color</span><span class="op" id="7961991">.</span><span class="ident" id="7961992">Color</span><span class="op" id="7961997">)</span>&nbsp;<span class="builtintype" id="7961999">bool</span>&nbsp;<span class="op" id="7962004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962007">r0</span><span class="op" id="7962009">,</span>&nbsp;<span class="ident" id="7962011">g0</span><span class="op" id="7962013">,</span>&nbsp;<span class="ident" id="7962015">b0</span><span class="op" id="7962017">,</span>&nbsp;<span class="ident" id="7962019">a0</span>&nbsp;<span class="op" id="7962022">:=</span>&nbsp;<span class="ident" id="7962025">c0</span><span class="op" id="7962027">.</span><span class="ident" id="7962028">RGBA</span><span class="op" id="7962032">(</span><span class="op" id="7962033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962036">r1</span><span class="op" id="7962038">,</span>&nbsp;<span class="ident" id="7962040">g1</span><span class="op" id="7962042">,</span>&nbsp;<span class="ident" id="7962044">b1</span><span class="op" id="7962046">,</span>&nbsp;<span class="ident" id="7962048">a1</span>&nbsp;<span class="op" id="7962051">:=</span>&nbsp;<span class="ident" id="7962054">c1</span><span class="op" id="7962056">.</span><span class="ident" id="7962057">RGBA</span><span class="op" id="7962061">(</span><span class="op" id="7962062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962065">return</span>&nbsp;<span class="ident" id="7962072">r0</span>&nbsp;<span class="op" id="7962075">==</span>&nbsp;<span class="ident" id="7962078">r1</span>&nbsp;<span class="op" id="7962081">&amp;&amp;</span>&nbsp;<span class="ident" id="7962084">g0</span>&nbsp;<span class="op" id="7962087">==</span>&nbsp;<span class="ident" id="7962090">g1</span>&nbsp;<span class="op" id="7962093">&amp;&amp;</span>&nbsp;<span class="ident" id="7962096">b0</span>&nbsp;<span class="op" id="7962099">==</span>&nbsp;<span class="ident" id="7962102">b1</span>&nbsp;<span class="op" id="7962105">&amp;&amp;</span>&nbsp;<span class="ident" id="7962108">a0</span>&nbsp;<span class="op" id="7962111">==</span>&nbsp;<span class="ident" id="7962114">a1</span><br>
<span class="lineno"></span><span class="op" id="7962117">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7962120">func</span>&nbsp;<span class="ident" id="7962125">fillBlue</span><span class="op" id="7962133">(</span><span class="ident" id="7962134">alpha</span>&nbsp;<span class="builtintype" id="7962140">int</span><span class="op" id="7962143">)</span>&nbsp;<span class="ident" id="7962145">image</span><span class="op" id="7962150">.</span><span class="ident" id="7962151">Image</span>&nbsp;<span class="op" id="7962157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962160">return</span>&nbsp;<span class="ident" id="7962167">image</span><span class="op" id="7962172">.</span><span class="ident" id="7962173">NewUniform</span><span class="op" id="7962183">(</span><span class="ident" id="7962184">color</span><span class="op" id="7962189">.</span><span class="ident" id="7962190">RGBA</span><span class="op" id="7962194">{</span><span class="num" id="7962195">0</span><span class="op" id="7962196">,</span>&nbsp;<span class="num" id="7962198">0</span><span class="op" id="7962199">,</span>&nbsp;<span class="builtintype" id="7962201">uint8</span><span class="op" id="7962206">(</span><span class="ident" id="7962207">alpha</span><span class="op" id="7962212">)</span><span class="op" id="7962213">,</span>&nbsp;<span class="builtintype" id="7962215">uint8</span><span class="op" id="7962220">(</span><span class="ident" id="7962221">alpha</span><span class="op" id="7962226">)</span><span class="op" id="7962227">}</span><span class="op" id="7962228">)</span><br>
<span class="lineno"></span><span class="op" id="7962230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7962233">func</span>&nbsp;<span class="ident" id="7962238">fillAlpha</span><span class="op" id="7962247">(</span><span class="ident" id="7962248">alpha</span>&nbsp;<span class="builtintype" id="7962254">int</span><span class="op" id="7962257">)</span>&nbsp;<span class="ident" id="7962259">image</span><span class="op" id="7962264">.</span><span class="ident" id="7962265">Image</span>&nbsp;<span class="op" id="7962271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962274">return</span>&nbsp;<span class="ident" id="7962281">image</span><span class="op" id="7962286">.</span><span class="ident" id="7962287">NewUniform</span><span class="op" id="7962297">(</span><span class="ident" id="7962298">color</span><span class="op" id="7962303">.</span><span class="ident" id="7962304">Alpha</span><span class="op" id="7962309">{</span><span class="builtintype" id="7962310">uint8</span><span class="op" id="7962315">(</span><span class="ident" id="7962316">alpha</span><span class="op" id="7962321">)</span><span class="op" id="7962322">}</span><span class="op" id="7962323">)</span><br>
<span class="lineno"></span><span class="op" id="7962325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7962328">func</span>&nbsp;<span class="ident" id="7962333">vgradGreen</span><span class="op" id="7962343">(</span><span class="ident" id="7962344">alpha</span>&nbsp;<span class="builtintype" id="7962350">int</span><span class="op" id="7962353">)</span>&nbsp;<span class="ident" id="7962355">image</span><span class="op" id="7962360">.</span><span class="ident" id="7962361">Image</span>&nbsp;<span class="op" id="7962367">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962370">m</span>&nbsp;<span class="op" id="7962372">:=</span>&nbsp;<span class="ident" id="7962375">image</span><span class="op" id="7962380">.</span><span class="ident" id="7962381">NewRGBA</span><span class="op" id="7962388">(</span><span class="ident" id="7962389">image</span><span class="op" id="7962394">.</span><span class="ident" id="7962395">Rect</span><span class="op" id="7962399">(</span><span class="num" id="7962400">0</span><span class="op" id="7962401">,</span>&nbsp;<span class="num" id="7962403">0</span><span class="op" id="7962404">,</span>&nbsp;<span class="num" id="7962406">16</span><span class="op" id="7962408">,</span>&nbsp;<span class="num" id="7962410">16</span><span class="op" id="7962412">)</span><span class="op" id="7962413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962416">for</span>&nbsp;<span class="ident" id="7962420">y</span>&nbsp;<span class="op" id="7962422">:=</span>&nbsp;<span class="num" id="7962425">0</span><span class="op" id="7962426">;</span>&nbsp;<span class="ident" id="7962428">y</span>&nbsp;<span class="op" id="7962430">&lt;</span>&nbsp;<span class="num" id="7962432">16</span><span class="op" id="7962434">;</span>&nbsp;<span class="ident" id="7962436">y</span><span class="op" id="7962437">++</span>&nbsp;<span class="op" id="7962440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962444">for</span>&nbsp;<span class="ident" id="7962448">x</span>&nbsp;<span class="op" id="7962450">:=</span>&nbsp;<span class="num" id="7962453">0</span><span class="op" id="7962454">;</span>&nbsp;<span class="ident" id="7962456">x</span>&nbsp;<span class="op" id="7962458">&lt;</span>&nbsp;<span class="num" id="7962460">16</span><span class="op" id="7962462">;</span>&nbsp;<span class="ident" id="7962464">x</span><span class="op" id="7962465">++</span>&nbsp;<span class="op" id="7962468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962473">m</span><span class="op" id="7962474">.</span><span class="ident" id="7962475">Set</span><span class="op" id="7962478">(</span><span class="ident" id="7962479">x</span><span class="op" id="7962480">,</span>&nbsp;<span class="ident" id="7962482">y</span><span class="op" id="7962483">,</span>&nbsp;<span class="ident" id="7962485">color</span><span class="op" id="7962490">.</span><span class="ident" id="7962491">RGBA</span><span class="op" id="7962495">{</span><span class="num" id="7962496">0</span><span class="op" id="7962497">,</span>&nbsp;<span class="builtintype" id="7962499">uint8</span><span class="op" id="7962504">(</span><span class="ident" id="7962505">y</span>&nbsp;<span class="op" id="7962507">*</span>&nbsp;<span class="ident" id="7962509">alpha</span>&nbsp;<span class="op" id="7962515">/</span>&nbsp;<span class="num" id="7962517">15</span><span class="op" id="7962519">)</span><span class="op" id="7962520">,</span>&nbsp;<span class="num" id="7962522">0</span><span class="op" id="7962523">,</span>&nbsp;<span class="builtintype" id="7962525">uint8</span><span class="op" id="7962530">(</span><span class="ident" id="7962531">alpha</span><span class="op" id="7962536">)</span><span class="op" id="7962537">}</span><span class="op" id="7962538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962542">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962548">return</span>&nbsp;<span class="ident" id="7962555">m</span><br>
<span class="lineno"></span><span class="op" id="7962557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7962560">func</span>&nbsp;<span class="ident" id="7962565">vgradAlpha</span><span class="op" id="7962575">(</span><span class="ident" id="7962576">alpha</span>&nbsp;<span class="builtintype" id="7962582">int</span><span class="op" id="7962585">)</span>&nbsp;<span class="ident" id="7962587">image</span><span class="op" id="7962592">.</span><span class="ident" id="7962593">Image</span>&nbsp;<span class="op" id="7962599">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962602">m</span>&nbsp;<span class="op" id="7962604">:=</span>&nbsp;<span class="ident" id="7962607">image</span><span class="op" id="7962612">.</span><span class="ident" id="7962613">NewAlpha</span><span class="op" id="7962621">(</span><span class="ident" id="7962622">image</span><span class="op" id="7962627">.</span><span class="ident" id="7962628">Rect</span><span class="op" id="7962632">(</span><span class="num" id="7962633">0</span><span class="op" id="7962634">,</span>&nbsp;<span class="num" id="7962636">0</span><span class="op" id="7962637">,</span>&nbsp;<span class="num" id="7962639">16</span><span class="op" id="7962641">,</span>&nbsp;<span class="num" id="7962643">16</span><span class="op" id="7962645">)</span><span class="op" id="7962646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962649">for</span>&nbsp;<span class="ident" id="7962653">y</span>&nbsp;<span class="op" id="7962655">:=</span>&nbsp;<span class="num" id="7962658">0</span><span class="op" id="7962659">;</span>&nbsp;<span class="ident" id="7962661">y</span>&nbsp;<span class="op" id="7962663">&lt;</span>&nbsp;<span class="num" id="7962665">16</span><span class="op" id="7962667">;</span>&nbsp;<span class="ident" id="7962669">y</span><span class="op" id="7962670">++</span>&nbsp;<span class="op" id="7962673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962677">for</span>&nbsp;<span class="ident" id="7962681">x</span>&nbsp;<span class="op" id="7962683">:=</span>&nbsp;<span class="num" id="7962686">0</span><span class="op" id="7962687">;</span>&nbsp;<span class="ident" id="7962689">x</span>&nbsp;<span class="op" id="7962691">&lt;</span>&nbsp;<span class="num" id="7962693">16</span><span class="op" id="7962695">;</span>&nbsp;<span class="ident" id="7962697">x</span><span class="op" id="7962698">++</span>&nbsp;<span class="op" id="7962701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962706">m</span><span class="op" id="7962707">.</span><span class="ident" id="7962708">Set</span><span class="op" id="7962711">(</span><span class="ident" id="7962712">x</span><span class="op" id="7962713">,</span>&nbsp;<span class="ident" id="7962715">y</span><span class="op" id="7962716">,</span>&nbsp;<span class="ident" id="7962718">color</span><span class="op" id="7962723">.</span><span class="ident" id="7962724">Alpha</span><span class="op" id="7962729">{</span><span class="builtintype" id="7962730">uint8</span><span class="op" id="7962735">(</span><span class="ident" id="7962736">y</span>&nbsp;<span class="op" id="7962738">*</span>&nbsp;<span class="ident" id="7962740">alpha</span>&nbsp;<span class="op" id="7962746">/</span>&nbsp;<span class="num" id="7962748">15</span><span class="op" id="7962750">)</span><span class="op" id="7962751">}</span><span class="op" id="7962752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962756">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962762">return</span>&nbsp;<span class="ident" id="7962769">m</span><br>
<span class="lineno"></span><span class="op" id="7962771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7962774">func</span>&nbsp;<span class="ident" id="7962779">vgradGreenNRGBA</span><span class="op" id="7962794">(</span><span class="ident" id="7962795">alpha</span>&nbsp;<span class="builtintype" id="7962801">int</span><span class="op" id="7962804">)</span>&nbsp;<span class="ident" id="7962806">image</span><span class="op" id="7962811">.</span><span class="ident" id="7962812">Image</span>&nbsp;<span class="op" id="7962818">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962821">m</span>&nbsp;<span class="op" id="7962823">:=</span>&nbsp;<span class="ident" id="7962826">image</span><span class="op" id="7962831">.</span><span class="ident" id="7962832">NewNRGBA</span><span class="op" id="7962840">(</span><span class="ident" id="7962841">image</span><span class="op" id="7962846">.</span><span class="ident" id="7962847">Rect</span><span class="op" id="7962851">(</span><span class="num" id="7962852">0</span><span class="op" id="7962853">,</span>&nbsp;<span class="num" id="7962855">0</span><span class="op" id="7962856">,</span>&nbsp;<span class="num" id="7962858">16</span><span class="op" id="7962860">,</span>&nbsp;<span class="num" id="7962862">16</span><span class="op" id="7962864">)</span><span class="op" id="7962865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962868">for</span>&nbsp;<span class="ident" id="7962872">y</span>&nbsp;<span class="op" id="7962874">:=</span>&nbsp;<span class="num" id="7962877">0</span><span class="op" id="7962878">;</span>&nbsp;<span class="ident" id="7962880">y</span>&nbsp;<span class="op" id="7962882">&lt;</span>&nbsp;<span class="num" id="7962884">16</span><span class="op" id="7962886">;</span>&nbsp;<span class="ident" id="7962888">y</span><span class="op" id="7962889">++</span>&nbsp;<span class="op" id="7962892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962896">for</span>&nbsp;<span class="ident" id="7962900">x</span>&nbsp;<span class="op" id="7962902">:=</span>&nbsp;<span class="num" id="7962905">0</span><span class="op" id="7962906">;</span>&nbsp;<span class="ident" id="7962908">x</span>&nbsp;<span class="op" id="7962910">&lt;</span>&nbsp;<span class="num" id="7962912">16</span><span class="op" id="7962914">;</span>&nbsp;<span class="ident" id="7962916">x</span><span class="op" id="7962917">++</span>&nbsp;<span class="op" id="7962920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962925">m</span><span class="op" id="7962926">.</span><span class="ident" id="7962927">Set</span><span class="op" id="7962930">(</span><span class="ident" id="7962931">x</span><span class="op" id="7962932">,</span>&nbsp;<span class="ident" id="7962934">y</span><span class="op" id="7962935">,</span>&nbsp;<span class="ident" id="7962937">color</span><span class="op" id="7962942">.</span><span class="ident" id="7962943">RGBA</span><span class="op" id="7962947">{</span><span class="num" id="7962948">0</span><span class="op" id="7962949">,</span>&nbsp;<span class="builtintype" id="7962951">uint8</span><span class="op" id="7962956">(</span><span class="ident" id="7962957">y</span>&nbsp;<span class="op" id="7962959">*</span>&nbsp;<span class="num" id="7962961">0x11</span><span class="op" id="7962965">)</span><span class="op" id="7962966">,</span>&nbsp;<span class="num" id="7962968">0</span><span class="op" id="7962969">,</span>&nbsp;<span class="builtintype" id="7962971">uint8</span><span class="op" id="7962976">(</span><span class="ident" id="7962977">alpha</span><span class="op" id="7962982">)</span><span class="op" id="7962983">}</span><span class="op" id="7962984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962988">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962994">return</span>&nbsp;<span class="ident" id="7963001">m</span><br>
<span class="lineno"></span><span class="op" id="7963003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7963006">func</span>&nbsp;<span class="ident" id="7963011">vgradCr</span><span class="op" id="7963018">(</span><span class="op" id="7963019">)</span>&nbsp;<span class="ident" id="7963021">image</span><span class="op" id="7963026">.</span><span class="ident" id="7963027">Image</span>&nbsp;<span class="op" id="7963033">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963036">m</span>&nbsp;<span class="op" id="7963038">:=</span>&nbsp;<span class="op" id="7963041">&amp;</span><span class="ident" id="7963042">image</span><span class="op" id="7963047">.</span><span class="ident" id="7963048">YCbCr</span><span class="op" id="7963053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963057">Y</span><span class="op" id="7963058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7963073">make</span><span class="op" id="7963077">(</span><span class="op" id="7963078">[</span><span class="op" id="7963079">]</span><span class="builtintype" id="7963080">byte</span><span class="op" id="7963084">,</span>&nbsp;<span class="num" id="7963086">16</span><span class="op" id="7963088">*</span><span class="num" id="7963089">16</span><span class="op" id="7963091">)</span><span class="op" id="7963092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963096">Cb</span><span class="op" id="7963098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7963112">make</span><span class="op" id="7963116">(</span><span class="op" id="7963117">[</span><span class="op" id="7963118">]</span><span class="builtintype" id="7963119">byte</span><span class="op" id="7963123">,</span>&nbsp;<span class="num" id="7963125">16</span><span class="op" id="7963127">*</span><span class="num" id="7963128">16</span><span class="op" id="7963130">)</span><span class="op" id="7963131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963135">Cr</span><span class="op" id="7963137">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7963151">make</span><span class="op" id="7963155">(</span><span class="op" id="7963156">[</span><span class="op" id="7963157">]</span><span class="builtintype" id="7963158">byte</span><span class="op" id="7963162">,</span>&nbsp;<span class="num" id="7963164">16</span><span class="op" id="7963166">*</span><span class="num" id="7963167">16</span><span class="op" id="7963169">)</span><span class="op" id="7963170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963174">YStride</span><span class="op" id="7963181">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7963190">16</span><span class="op" id="7963192">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963196">CStride</span><span class="op" id="7963203">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7963212">16</span><span class="op" id="7963214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963218">SubsampleRatio</span><span class="op" id="7963232">:</span>&nbsp;<span class="ident" id="7963234">image</span><span class="op" id="7963239">.</span><span class="ident" id="7963240">YCbCrSubsampleRatio444</span><span class="op" id="7963262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963266">Rect</span><span class="op" id="7963270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963282">image</span><span class="op" id="7963287">.</span><span class="ident" id="7963288">Rect</span><span class="op" id="7963292">(</span><span class="num" id="7963293">0</span><span class="op" id="7963294">,</span>&nbsp;<span class="num" id="7963296">0</span><span class="op" id="7963297">,</span>&nbsp;<span class="num" id="7963299">16</span><span class="op" id="7963301">,</span>&nbsp;<span class="num" id="7963303">16</span><span class="op" id="7963305">)</span><span class="op" id="7963306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963312">for</span>&nbsp;<span class="ident" id="7963316">y</span>&nbsp;<span class="op" id="7963318">:=</span>&nbsp;<span class="num" id="7963321">0</span><span class="op" id="7963322">;</span>&nbsp;<span class="ident" id="7963324">y</span>&nbsp;<span class="op" id="7963326">&lt;</span>&nbsp;<span class="num" id="7963328">16</span><span class="op" id="7963330">;</span>&nbsp;<span class="ident" id="7963332">y</span><span class="op" id="7963333">++</span>&nbsp;<span class="op" id="7963336">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963340">for</span>&nbsp;<span class="ident" id="7963344">x</span>&nbsp;<span class="op" id="7963346">:=</span>&nbsp;<span class="num" id="7963349">0</span><span class="op" id="7963350">;</span>&nbsp;<span class="ident" id="7963352">x</span>&nbsp;<span class="op" id="7963354">&lt;</span>&nbsp;<span class="num" id="7963356">16</span><span class="op" id="7963358">;</span>&nbsp;<span class="ident" id="7963360">x</span><span class="op" id="7963361">++</span>&nbsp;<span class="op" id="7963364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963369">m</span><span class="op" id="7963370">.</span><span class="ident" id="7963371">Cr</span><span class="op" id="7963373">[</span><span class="ident" id="7963374">y</span><span class="op" id="7963375">*</span><span class="ident" id="7963376">m</span><span class="op" id="7963377">.</span><span class="ident" id="7963378">CStride</span><span class="op" id="7963385">+</span><span class="ident" id="7963386">x</span><span class="op" id="7963387">]</span>&nbsp;<span class="op" id="7963389">=</span>&nbsp;<span class="builtintype" id="7963391">uint8</span><span class="op" id="7963396">(</span><span class="ident" id="7963397">y</span>&nbsp;<span class="op" id="7963399">*</span>&nbsp;<span class="num" id="7963401">0x11</span><span class="op" id="7963405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963415">return</span>&nbsp;<span class="ident" id="7963422">m</span><br>
<span class="lineno">75</span><span class="op" id="7963424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7963427">func</span>&nbsp;<span class="ident" id="7963432">hgradRed</span><span class="op" id="7963440">(</span><span class="ident" id="7963441">alpha</span>&nbsp;<span class="builtintype" id="7963447">int</span><span class="op" id="7963450">)</span>&nbsp;<span class="ident" id="7963452">Image</span>&nbsp;<span class="op" id="7963458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963461">m</span>&nbsp;<span class="op" id="7963463">:=</span>&nbsp;<span class="ident" id="7963466">image</span><span class="op" id="7963471">.</span><span class="ident" id="7963472">NewRGBA</span><span class="op" id="7963479">(</span><span class="ident" id="7963480">image</span><span class="op" id="7963485">.</span><span class="ident" id="7963486">Rect</span><span class="op" id="7963490">(</span><span class="num" id="7963491">0</span><span class="op" id="7963492">,</span>&nbsp;<span class="num" id="7963494">0</span><span class="op" id="7963495">,</span>&nbsp;<span class="num" id="7963497">16</span><span class="op" id="7963499">,</span>&nbsp;<span class="num" id="7963501">16</span><span class="op" id="7963503">)</span><span class="op" id="7963504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963507">for</span>&nbsp;<span class="ident" id="7963511">y</span>&nbsp;<span class="op" id="7963513">:=</span>&nbsp;<span class="num" id="7963516">0</span><span class="op" id="7963517">;</span>&nbsp;<span class="ident" id="7963519">y</span>&nbsp;<span class="op" id="7963521">&lt;</span>&nbsp;<span class="num" id="7963523">16</span><span class="op" id="7963525">;</span>&nbsp;<span class="ident" id="7963527">y</span><span class="op" id="7963528">++</span>&nbsp;<span class="op" id="7963531">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963535">for</span>&nbsp;<span class="ident" id="7963539">x</span>&nbsp;<span class="op" id="7963541">:=</span>&nbsp;<span class="num" id="7963544">0</span><span class="op" id="7963545">;</span>&nbsp;<span class="ident" id="7963547">x</span>&nbsp;<span class="op" id="7963549">&lt;</span>&nbsp;<span class="num" id="7963551">16</span><span class="op" id="7963553">;</span>&nbsp;<span class="ident" id="7963555">x</span><span class="op" id="7963556">++</span>&nbsp;<span class="op" id="7963559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963564">m</span><span class="op" id="7963565">.</span><span class="ident" id="7963566">Set</span><span class="op" id="7963569">(</span><span class="ident" id="7963570">x</span><span class="op" id="7963571">,</span>&nbsp;<span class="ident" id="7963573">y</span><span class="op" id="7963574">,</span>&nbsp;<span class="ident" id="7963576">color</span><span class="op" id="7963581">.</span><span class="ident" id="7963582">RGBA</span><span class="op" id="7963586">{</span><span class="builtintype" id="7963587">uint8</span><span class="op" id="7963592">(</span><span class="ident" id="7963593">x</span>&nbsp;<span class="op" id="7963595">*</span>&nbsp;<span class="ident" id="7963597">alpha</span>&nbsp;<span class="op" id="7963603">/</span>&nbsp;<span class="num" id="7963605">15</span><span class="op" id="7963607">)</span><span class="op" id="7963608">,</span>&nbsp;<span class="num" id="7963610">0</span><span class="op" id="7963611">,</span>&nbsp;<span class="num" id="7963613">0</span><span class="op" id="7963614">,</span>&nbsp;<span class="builtintype" id="7963616">uint8</span><span class="op" id="7963621">(</span><span class="ident" id="7963622">alpha</span><span class="op" id="7963627">)</span><span class="op" id="7963628">}</span><span class="op" id="7963629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963639">return</span>&nbsp;<span class="ident" id="7963646">m</span><br>
<span class="lineno">85</span><span class="op" id="7963648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7963651">func</span>&nbsp;<span class="ident" id="7963656">gradYellow</span><span class="op" id="7963666">(</span><span class="ident" id="7963667">alpha</span>&nbsp;<span class="builtintype" id="7963673">int</span><span class="op" id="7963676">)</span>&nbsp;<span class="ident" id="7963678">Image</span>&nbsp;<span class="op" id="7963684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963687">m</span>&nbsp;<span class="op" id="7963689">:=</span>&nbsp;<span class="ident" id="7963692">image</span><span class="op" id="7963697">.</span><span class="ident" id="7963698">NewRGBA</span><span class="op" id="7963705">(</span><span class="ident" id="7963706">image</span><span class="op" id="7963711">.</span><span class="ident" id="7963712">Rect</span><span class="op" id="7963716">(</span><span class="num" id="7963717">0</span><span class="op" id="7963718">,</span>&nbsp;<span class="num" id="7963720">0</span><span class="op" id="7963721">,</span>&nbsp;<span class="num" id="7963723">16</span><span class="op" id="7963725">,</span>&nbsp;<span class="num" id="7963727">16</span><span class="op" id="7963729">)</span><span class="op" id="7963730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963733">for</span>&nbsp;<span class="ident" id="7963737">y</span>&nbsp;<span class="op" id="7963739">:=</span>&nbsp;<span class="num" id="7963742">0</span><span class="op" id="7963743">;</span>&nbsp;<span class="ident" id="7963745">y</span>&nbsp;<span class="op" id="7963747">&lt;</span>&nbsp;<span class="num" id="7963749">16</span><span class="op" id="7963751">;</span>&nbsp;<span class="ident" id="7963753">y</span><span class="op" id="7963754">++</span>&nbsp;<span class="op" id="7963757">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963761">for</span>&nbsp;<span class="ident" id="7963765">x</span>&nbsp;<span class="op" id="7963767">:=</span>&nbsp;<span class="num" id="7963770">0</span><span class="op" id="7963771">;</span>&nbsp;<span class="ident" id="7963773">x</span>&nbsp;<span class="op" id="7963775">&lt;</span>&nbsp;<span class="num" id="7963777">16</span><span class="op" id="7963779">;</span>&nbsp;<span class="ident" id="7963781">x</span><span class="op" id="7963782">++</span>&nbsp;<span class="op" id="7963785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963790">m</span><span class="op" id="7963791">.</span><span class="ident" id="7963792">Set</span><span class="op" id="7963795">(</span><span class="ident" id="7963796">x</span><span class="op" id="7963797">,</span>&nbsp;<span class="ident" id="7963799">y</span><span class="op" id="7963800">,</span>&nbsp;<span class="ident" id="7963802">color</span><span class="op" id="7963807">.</span><span class="ident" id="7963808">RGBA</span><span class="op" id="7963812">{</span><span class="builtintype" id="7963813">uint8</span><span class="op" id="7963818">(</span><span class="ident" id="7963819">x</span>&nbsp;<span class="op" id="7963821">*</span>&nbsp;<span class="ident" id="7963823">alpha</span>&nbsp;<span class="op" id="7963829">/</span>&nbsp;<span class="num" id="7963831">15</span><span class="op" id="7963833">)</span><span class="op" id="7963834">,</span>&nbsp;<span class="builtintype" id="7963836">uint8</span><span class="op" id="7963841">(</span><span class="ident" id="7963842">y</span>&nbsp;<span class="op" id="7963844">*</span>&nbsp;<span class="ident" id="7963846">alpha</span>&nbsp;<span class="op" id="7963852">/</span>&nbsp;<span class="num" id="7963854">15</span><span class="op" id="7963856">)</span><span class="op" id="7963857">,</span>&nbsp;<span class="num" id="7963859">0</span><span class="op" id="7963860">,</span>&nbsp;<span class="builtintype" id="7963862">uint8</span><span class="op" id="7963867">(</span><span class="ident" id="7963868">alpha</span><span class="op" id="7963873">)</span><span class="op" id="7963874">}</span><span class="op" id="7963875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963885">return</span>&nbsp;<span class="ident" id="7963892">m</span><br>
<span class="lineno">95</span><span class="op" id="7963894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7963897">type</span>&nbsp;<span class="ident" id="7963902">drawTest</span>&nbsp;<span class="keyword" id="7963911">struct</span>&nbsp;<span class="op" id="7963918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963921">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7963930">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963938">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963947">image</span><span class="op" id="7963952">.</span><span class="ident" id="7963953">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963960">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963969">image</span><span class="op" id="7963974">.</span><span class="ident" id="7963975">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963982">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7963991">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963995">expected</span>&nbsp;<span class="ident" id="7964004">color</span><span class="op" id="7964009">.</span><span class="ident" id="7964010">Color</span><br>
<span class="lineno"></span><span class="op" id="7964016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7964019">var</span>&nbsp;<span class="ident" id="7964023">drawTests</span>&nbsp;<span class="op" id="7964033">=</span>&nbsp;<span class="op" id="7964035">[</span><span class="op" id="7964036">]</span><span class="ident" id="7964037">drawTest</span><span class="op" id="7964045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964048">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964078">{</span><span class="string" id="7964079">&#34;nop&#34;</span><span class="op" id="7964084">,</span>&nbsp;<span class="ident" id="7964086">vgradGreen</span><span class="op" id="7964096">(</span><span class="num" id="7964097">255</span><span class="op" id="7964100">)</span><span class="op" id="7964101">,</span>&nbsp;<span class="ident" id="7964103">fillAlpha</span><span class="op" id="7964112">(</span><span class="num" id="7964113">0</span><span class="op" id="7964114">)</span><span class="op" id="7964115">,</span>&nbsp;<span class="ident" id="7964117">Over</span><span class="op" id="7964121">,</span>&nbsp;<span class="ident" id="7964123">color</span><span class="op" id="7964128">.</span><span class="ident" id="7964129">RGBA</span><span class="op" id="7964133">{</span><span class="num" id="7964134">136</span><span class="op" id="7964137">,</span>&nbsp;<span class="num" id="7964139">0</span><span class="op" id="7964140">,</span>&nbsp;<span class="num" id="7964142">0</span><span class="op" id="7964143">,</span>&nbsp;<span class="num" id="7964145">255</span><span class="op" id="7964148">}</span><span class="op" id="7964149">}</span><span class="op" id="7964150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964153">{</span><span class="string" id="7964154">&#34;clear&#34;</span><span class="op" id="7964161">,</span>&nbsp;<span class="ident" id="7964163">vgradGreen</span><span class="op" id="7964173">(</span><span class="num" id="7964174">255</span><span class="op" id="7964177">)</span><span class="op" id="7964178">,</span>&nbsp;<span class="ident" id="7964180">fillAlpha</span><span class="op" id="7964189">(</span><span class="num" id="7964190">0</span><span class="op" id="7964191">)</span><span class="op" id="7964192">,</span>&nbsp;<span class="ident" id="7964194">Src</span><span class="op" id="7964197">,</span>&nbsp;<span class="ident" id="7964199">color</span><span class="op" id="7964204">.</span><span class="ident" id="7964205">RGBA</span><span class="op" id="7964209">{</span><span class="num" id="7964210">0</span><span class="op" id="7964211">,</span>&nbsp;<span class="num" id="7964213">0</span><span class="op" id="7964214">,</span>&nbsp;<span class="num" id="7964216">0</span><span class="op" id="7964217">,</span>&nbsp;<span class="num" id="7964219">0</span><span class="op" id="7964220">}</span><span class="op" id="7964221">}</span><span class="op" id="7964222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964225">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964279">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964304">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964351">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964391">{</span><span class="string" id="7964392">&#34;fill&#34;</span><span class="op" id="7964398">,</span>&nbsp;<span class="ident" id="7964400">fillBlue</span><span class="op" id="7964408">(</span><span class="num" id="7964409">90</span><span class="op" id="7964411">)</span><span class="op" id="7964412">,</span>&nbsp;<span class="ident" id="7964414">fillAlpha</span><span class="op" id="7964423">(</span><span class="num" id="7964424">255</span><span class="op" id="7964427">)</span><span class="op" id="7964428">,</span>&nbsp;<span class="ident" id="7964430">Over</span><span class="op" id="7964434">,</span>&nbsp;<span class="ident" id="7964436">color</span><span class="op" id="7964441">.</span><span class="ident" id="7964442">RGBA</span><span class="op" id="7964446">{</span><span class="num" id="7964447">88</span><span class="op" id="7964449">,</span>&nbsp;<span class="num" id="7964451">0</span><span class="op" id="7964452">,</span>&nbsp;<span class="num" id="7964454">90</span><span class="op" id="7964456">,</span>&nbsp;<span class="num" id="7964458">255</span><span class="op" id="7964461">}</span><span class="op" id="7964462">}</span><span class="op" id="7964463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964466">{</span><span class="string" id="7964467">&#34;fillSrc&#34;</span><span class="op" id="7964476">,</span>&nbsp;<span class="ident" id="7964478">fillBlue</span><span class="op" id="7964486">(</span><span class="num" id="7964487">90</span><span class="op" id="7964489">)</span><span class="op" id="7964490">,</span>&nbsp;<span class="ident" id="7964492">fillAlpha</span><span class="op" id="7964501">(</span><span class="num" id="7964502">255</span><span class="op" id="7964505">)</span><span class="op" id="7964506">,</span>&nbsp;<span class="ident" id="7964508">Src</span><span class="op" id="7964511">,</span>&nbsp;<span class="ident" id="7964513">color</span><span class="op" id="7964518">.</span><span class="ident" id="7964519">RGBA</span><span class="op" id="7964523">{</span><span class="num" id="7964524">0</span><span class="op" id="7964525">,</span>&nbsp;<span class="num" id="7964527">0</span><span class="op" id="7964528">,</span>&nbsp;<span class="num" id="7964530">90</span><span class="op" id="7964532">,</span>&nbsp;<span class="num" id="7964534">90</span><span class="op" id="7964536">}</span><span class="op" id="7964537">}</span><span class="op" id="7964538">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964541">{</span><span class="string" id="7964542">&#34;fillAlpha&#34;</span><span class="op" id="7964553">,</span>&nbsp;<span class="ident" id="7964555">fillBlue</span><span class="op" id="7964563">(</span><span class="num" id="7964564">90</span><span class="op" id="7964566">)</span><span class="op" id="7964567">,</span>&nbsp;<span class="ident" id="7964569">fillAlpha</span><span class="op" id="7964578">(</span><span class="num" id="7964579">192</span><span class="op" id="7964582">)</span><span class="op" id="7964583">,</span>&nbsp;<span class="ident" id="7964585">Over</span><span class="op" id="7964589">,</span>&nbsp;<span class="ident" id="7964591">color</span><span class="op" id="7964596">.</span><span class="ident" id="7964597">RGBA</span><span class="op" id="7964601">{</span><span class="num" id="7964602">100</span><span class="op" id="7964605">,</span>&nbsp;<span class="num" id="7964607">0</span><span class="op" id="7964608">,</span>&nbsp;<span class="num" id="7964610">68</span><span class="op" id="7964612">,</span>&nbsp;<span class="num" id="7964614">255</span><span class="op" id="7964617">}</span><span class="op" id="7964618">}</span><span class="op" id="7964619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964622">{</span><span class="string" id="7964623">&#34;fillAlphaSrc&#34;</span><span class="op" id="7964637">,</span>&nbsp;<span class="ident" id="7964639">fillBlue</span><span class="op" id="7964647">(</span><span class="num" id="7964648">90</span><span class="op" id="7964650">)</span><span class="op" id="7964651">,</span>&nbsp;<span class="ident" id="7964653">fillAlpha</span><span class="op" id="7964662">(</span><span class="num" id="7964663">192</span><span class="op" id="7964666">)</span><span class="op" id="7964667">,</span>&nbsp;<span class="ident" id="7964669">Src</span><span class="op" id="7964672">,</span>&nbsp;<span class="ident" id="7964674">color</span><span class="op" id="7964679">.</span><span class="ident" id="7964680">RGBA</span><span class="op" id="7964684">{</span><span class="num" id="7964685">0</span><span class="op" id="7964686">,</span>&nbsp;<span class="num" id="7964688">0</span><span class="op" id="7964689">,</span>&nbsp;<span class="num" id="7964691">68</span><span class="op" id="7964693">,</span>&nbsp;<span class="num" id="7964695">68</span><span class="op" id="7964697">}</span><span class="op" id="7964698">}</span><span class="op" id="7964699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964702">{</span><span class="string" id="7964703">&#34;fillNil&#34;</span><span class="op" id="7964712">,</span>&nbsp;<span class="ident" id="7964714">fillBlue</span><span class="op" id="7964722">(</span><span class="num" id="7964723">90</span><span class="op" id="7964725">)</span><span class="op" id="7964726">,</span>&nbsp;<span class="ident" id="7964728">nil</span><span class="op" id="7964731">,</span>&nbsp;<span class="ident" id="7964733">Over</span><span class="op" id="7964737">,</span>&nbsp;<span class="ident" id="7964739">color</span><span class="op" id="7964744">.</span><span class="ident" id="7964745">RGBA</span><span class="op" id="7964749">{</span><span class="num" id="7964750">88</span><span class="op" id="7964752">,</span>&nbsp;<span class="num" id="7964754">0</span><span class="op" id="7964755">,</span>&nbsp;<span class="num" id="7964757">90</span><span class="op" id="7964759">,</span>&nbsp;<span class="num" id="7964761">255</span><span class="op" id="7964764">}</span><span class="op" id="7964765">}</span><span class="op" id="7964766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964769">{</span><span class="string" id="7964770">&#34;fillNilSrc&#34;</span><span class="op" id="7964782">,</span>&nbsp;<span class="ident" id="7964784">fillBlue</span><span class="op" id="7964792">(</span><span class="num" id="7964793">90</span><span class="op" id="7964795">)</span><span class="op" id="7964796">,</span>&nbsp;<span class="ident" id="7964798">nil</span><span class="op" id="7964801">,</span>&nbsp;<span class="ident" id="7964803">Src</span><span class="op" id="7964806">,</span>&nbsp;<span class="ident" id="7964808">color</span><span class="op" id="7964813">.</span><span class="ident" id="7964814">RGBA</span><span class="op" id="7964818">{</span><span class="num" id="7964819">0</span><span class="op" id="7964820">,</span>&nbsp;<span class="num" id="7964822">0</span><span class="op" id="7964823">,</span>&nbsp;<span class="num" id="7964825">90</span><span class="op" id="7964827">,</span>&nbsp;<span class="num" id="7964829">90</span><span class="op" id="7964831">}</span><span class="op" id="7964832">}</span><span class="op" id="7964833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964836">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964891">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964916">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7964963">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965003">{</span><span class="string" id="7965004">&#34;copy&#34;</span><span class="op" id="7965010">,</span>&nbsp;<span class="ident" id="7965012">vgradGreen</span><span class="op" id="7965022">(</span><span class="num" id="7965023">90</span><span class="op" id="7965025">)</span><span class="op" id="7965026">,</span>&nbsp;<span class="ident" id="7965028">fillAlpha</span><span class="op" id="7965037">(</span><span class="num" id="7965038">255</span><span class="op" id="7965041">)</span><span class="op" id="7965042">,</span>&nbsp;<span class="ident" id="7965044">Over</span><span class="op" id="7965048">,</span>&nbsp;<span class="ident" id="7965050">color</span><span class="op" id="7965055">.</span><span class="ident" id="7965056">RGBA</span><span class="op" id="7965060">{</span><span class="num" id="7965061">88</span><span class="op" id="7965063">,</span>&nbsp;<span class="num" id="7965065">48</span><span class="op" id="7965067">,</span>&nbsp;<span class="num" id="7965069">0</span><span class="op" id="7965070">,</span>&nbsp;<span class="num" id="7965072">255</span><span class="op" id="7965075">}</span><span class="op" id="7965076">}</span><span class="op" id="7965077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965080">{</span><span class="string" id="7965081">&#34;copySrc&#34;</span><span class="op" id="7965090">,</span>&nbsp;<span class="ident" id="7965092">vgradGreen</span><span class="op" id="7965102">(</span><span class="num" id="7965103">90</span><span class="op" id="7965105">)</span><span class="op" id="7965106">,</span>&nbsp;<span class="ident" id="7965108">fillAlpha</span><span class="op" id="7965117">(</span><span class="num" id="7965118">255</span><span class="op" id="7965121">)</span><span class="op" id="7965122">,</span>&nbsp;<span class="ident" id="7965124">Src</span><span class="op" id="7965127">,</span>&nbsp;<span class="ident" id="7965129">color</span><span class="op" id="7965134">.</span><span class="ident" id="7965135">RGBA</span><span class="op" id="7965139">{</span><span class="num" id="7965140">0</span><span class="op" id="7965141">,</span>&nbsp;<span class="num" id="7965143">48</span><span class="op" id="7965145">,</span>&nbsp;<span class="num" id="7965147">0</span><span class="op" id="7965148">,</span>&nbsp;<span class="num" id="7965150">90</span><span class="op" id="7965152">}</span><span class="op" id="7965153">}</span><span class="op" id="7965154">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965157">{</span><span class="string" id="7965158">&#34;copyAlpha&#34;</span><span class="op" id="7965169">,</span>&nbsp;<span class="ident" id="7965171">vgradGreen</span><span class="op" id="7965181">(</span><span class="num" id="7965182">90</span><span class="op" id="7965184">)</span><span class="op" id="7965185">,</span>&nbsp;<span class="ident" id="7965187">fillAlpha</span><span class="op" id="7965196">(</span><span class="num" id="7965197">192</span><span class="op" id="7965200">)</span><span class="op" id="7965201">,</span>&nbsp;<span class="ident" id="7965203">Over</span><span class="op" id="7965207">,</span>&nbsp;<span class="ident" id="7965209">color</span><span class="op" id="7965214">.</span><span class="ident" id="7965215">RGBA</span><span class="op" id="7965219">{</span><span class="num" id="7965220">100</span><span class="op" id="7965223">,</span>&nbsp;<span class="num" id="7965225">36</span><span class="op" id="7965227">,</span>&nbsp;<span class="num" id="7965229">0</span><span class="op" id="7965230">,</span>&nbsp;<span class="num" id="7965232">255</span><span class="op" id="7965235">}</span><span class="op" id="7965236">}</span><span class="op" id="7965237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965240">{</span><span class="string" id="7965241">&#34;copyAlphaSrc&#34;</span><span class="op" id="7965255">,</span>&nbsp;<span class="ident" id="7965257">vgradGreen</span><span class="op" id="7965267">(</span><span class="num" id="7965268">90</span><span class="op" id="7965270">)</span><span class="op" id="7965271">,</span>&nbsp;<span class="ident" id="7965273">fillAlpha</span><span class="op" id="7965282">(</span><span class="num" id="7965283">192</span><span class="op" id="7965286">)</span><span class="op" id="7965287">,</span>&nbsp;<span class="ident" id="7965289">Src</span><span class="op" id="7965292">,</span>&nbsp;<span class="ident" id="7965294">color</span><span class="op" id="7965299">.</span><span class="ident" id="7965300">RGBA</span><span class="op" id="7965304">{</span><span class="num" id="7965305">0</span><span class="op" id="7965306">,</span>&nbsp;<span class="num" id="7965308">36</span><span class="op" id="7965310">,</span>&nbsp;<span class="num" id="7965312">0</span><span class="op" id="7965313">,</span>&nbsp;<span class="num" id="7965315">68</span><span class="op" id="7965317">}</span><span class="op" id="7965318">}</span><span class="op" id="7965319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965322">{</span><span class="string" id="7965323">&#34;copyNil&#34;</span><span class="op" id="7965332">,</span>&nbsp;<span class="ident" id="7965334">vgradGreen</span><span class="op" id="7965344">(</span><span class="num" id="7965345">90</span><span class="op" id="7965347">)</span><span class="op" id="7965348">,</span>&nbsp;<span class="ident" id="7965350">nil</span><span class="op" id="7965353">,</span>&nbsp;<span class="ident" id="7965355">Over</span><span class="op" id="7965359">,</span>&nbsp;<span class="ident" id="7965361">color</span><span class="op" id="7965366">.</span><span class="ident" id="7965367">RGBA</span><span class="op" id="7965371">{</span><span class="num" id="7965372">88</span><span class="op" id="7965374">,</span>&nbsp;<span class="num" id="7965376">48</span><span class="op" id="7965378">,</span>&nbsp;<span class="num" id="7965380">0</span><span class="op" id="7965381">,</span>&nbsp;<span class="num" id="7965383">255</span><span class="op" id="7965386">}</span><span class="op" id="7965387">}</span><span class="op" id="7965388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965391">{</span><span class="string" id="7965392">&#34;copyNilSrc&#34;</span><span class="op" id="7965404">,</span>&nbsp;<span class="ident" id="7965406">vgradGreen</span><span class="op" id="7965416">(</span><span class="num" id="7965417">90</span><span class="op" id="7965419">)</span><span class="op" id="7965420">,</span>&nbsp;<span class="ident" id="7965422">nil</span><span class="op" id="7965425">,</span>&nbsp;<span class="ident" id="7965427">Src</span><span class="op" id="7965430">,</span>&nbsp;<span class="ident" id="7965432">color</span><span class="op" id="7965437">.</span><span class="ident" id="7965438">RGBA</span><span class="op" id="7965442">{</span><span class="num" id="7965443">0</span><span class="op" id="7965444">,</span>&nbsp;<span class="num" id="7965446">48</span><span class="op" id="7965448">,</span>&nbsp;<span class="num" id="7965450">0</span><span class="op" id="7965451">,</span>&nbsp;<span class="num" id="7965453">90</span><span class="op" id="7965455">}</span><span class="op" id="7965456">}</span><span class="op" id="7965457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7965460">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7965521">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7965546">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7965593">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7965688">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965781">{</span><span class="string" id="7965782">&#34;nrgba&#34;</span><span class="op" id="7965789">,</span>&nbsp;<span class="ident" id="7965791">vgradGreenNRGBA</span><span class="op" id="7965806">(</span><span class="num" id="7965807">90</span><span class="op" id="7965809">)</span><span class="op" id="7965810">,</span>&nbsp;<span class="ident" id="7965812">fillAlpha</span><span class="op" id="7965821">(</span><span class="num" id="7965822">255</span><span class="op" id="7965825">)</span><span class="op" id="7965826">,</span>&nbsp;<span class="ident" id="7965828">Over</span><span class="op" id="7965832">,</span>&nbsp;<span class="ident" id="7965834">color</span><span class="op" id="7965839">.</span><span class="ident" id="7965840">RGBA</span><span class="op" id="7965844">{</span><span class="num" id="7965845">88</span><span class="op" id="7965847">,</span>&nbsp;<span class="num" id="7965849">46</span><span class="op" id="7965851">,</span>&nbsp;<span class="num" id="7965853">0</span><span class="op" id="7965854">,</span>&nbsp;<span class="num" id="7965856">255</span><span class="op" id="7965859">}</span><span class="op" id="7965860">}</span><span class="op" id="7965861">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965864">{</span><span class="string" id="7965865">&#34;nrgbaSrc&#34;</span><span class="op" id="7965875">,</span>&nbsp;<span class="ident" id="7965877">vgradGreenNRGBA</span><span class="op" id="7965892">(</span><span class="num" id="7965893">90</span><span class="op" id="7965895">)</span><span class="op" id="7965896">,</span>&nbsp;<span class="ident" id="7965898">fillAlpha</span><span class="op" id="7965907">(</span><span class="num" id="7965908">255</span><span class="op" id="7965911">)</span><span class="op" id="7965912">,</span>&nbsp;<span class="ident" id="7965914">Src</span><span class="op" id="7965917">,</span>&nbsp;<span class="ident" id="7965919">color</span><span class="op" id="7965924">.</span><span class="ident" id="7965925">RGBA</span><span class="op" id="7965929">{</span><span class="num" id="7965930">0</span><span class="op" id="7965931">,</span>&nbsp;<span class="num" id="7965933">46</span><span class="op" id="7965935">,</span>&nbsp;<span class="num" id="7965937">0</span><span class="op" id="7965938">,</span>&nbsp;<span class="num" id="7965940">90</span><span class="op" id="7965942">}</span><span class="op" id="7965943">}</span><span class="op" id="7965944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965947">{</span><span class="string" id="7965948">&#34;nrgbaAlpha&#34;</span><span class="op" id="7965960">,</span>&nbsp;<span class="ident" id="7965962">vgradGreenNRGBA</span><span class="op" id="7965977">(</span><span class="num" id="7965978">90</span><span class="op" id="7965980">)</span><span class="op" id="7965981">,</span>&nbsp;<span class="ident" id="7965983">fillAlpha</span><span class="op" id="7965992">(</span><span class="num" id="7965993">192</span><span class="op" id="7965996">)</span><span class="op" id="7965997">,</span>&nbsp;<span class="ident" id="7965999">Over</span><span class="op" id="7966003">,</span>&nbsp;<span class="ident" id="7966005">color</span><span class="op" id="7966010">.</span><span class="ident" id="7966011">RGBA</span><span class="op" id="7966015">{</span><span class="num" id="7966016">100</span><span class="op" id="7966019">,</span>&nbsp;<span class="num" id="7966021">34</span><span class="op" id="7966023">,</span>&nbsp;<span class="num" id="7966025">0</span><span class="op" id="7966026">,</span>&nbsp;<span class="num" id="7966028">255</span><span class="op" id="7966031">}</span><span class="op" id="7966032">}</span><span class="op" id="7966033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966036">{</span><span class="string" id="7966037">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="7966052">,</span>&nbsp;<span class="ident" id="7966054">vgradGreenNRGBA</span><span class="op" id="7966069">(</span><span class="num" id="7966070">90</span><span class="op" id="7966072">)</span><span class="op" id="7966073">,</span>&nbsp;<span class="ident" id="7966075">fillAlpha</span><span class="op" id="7966084">(</span><span class="num" id="7966085">192</span><span class="op" id="7966088">)</span><span class="op" id="7966089">,</span>&nbsp;<span class="ident" id="7966091">Src</span><span class="op" id="7966094">,</span>&nbsp;<span class="ident" id="7966096">color</span><span class="op" id="7966101">.</span><span class="ident" id="7966102">RGBA</span><span class="op" id="7966106">{</span><span class="num" id="7966107">0</span><span class="op" id="7966108">,</span>&nbsp;<span class="num" id="7966110">34</span><span class="op" id="7966112">,</span>&nbsp;<span class="num" id="7966114">0</span><span class="op" id="7966115">,</span>&nbsp;<span class="num" id="7966117">68</span><span class="op" id="7966119">}</span><span class="op" id="7966120">}</span><span class="op" id="7966121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966124">{</span><span class="string" id="7966125">&#34;nrgbaNil&#34;</span><span class="op" id="7966135">,</span>&nbsp;<span class="ident" id="7966137">vgradGreenNRGBA</span><span class="op" id="7966152">(</span><span class="num" id="7966153">90</span><span class="op" id="7966155">)</span><span class="op" id="7966156">,</span>&nbsp;<span class="ident" id="7966158">nil</span><span class="op" id="7966161">,</span>&nbsp;<span class="ident" id="7966163">Over</span><span class="op" id="7966167">,</span>&nbsp;<span class="ident" id="7966169">color</span><span class="op" id="7966174">.</span><span class="ident" id="7966175">RGBA</span><span class="op" id="7966179">{</span><span class="num" id="7966180">88</span><span class="op" id="7966182">,</span>&nbsp;<span class="num" id="7966184">46</span><span class="op" id="7966186">,</span>&nbsp;<span class="num" id="7966188">0</span><span class="op" id="7966189">,</span>&nbsp;<span class="num" id="7966191">255</span><span class="op" id="7966194">}</span><span class="op" id="7966195">}</span><span class="op" id="7966196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966199">{</span><span class="string" id="7966200">&#34;nrgbaNilSrc&#34;</span><span class="op" id="7966213">,</span>&nbsp;<span class="ident" id="7966215">vgradGreenNRGBA</span><span class="op" id="7966230">(</span><span class="num" id="7966231">90</span><span class="op" id="7966233">)</span><span class="op" id="7966234">,</span>&nbsp;<span class="ident" id="7966236">nil</span><span class="op" id="7966239">,</span>&nbsp;<span class="ident" id="7966241">Src</span><span class="op" id="7966244">,</span>&nbsp;<span class="ident" id="7966246">color</span><span class="op" id="7966251">.</span><span class="ident" id="7966252">RGBA</span><span class="op" id="7966256">{</span><span class="num" id="7966257">0</span><span class="op" id="7966258">,</span>&nbsp;<span class="num" id="7966260">46</span><span class="op" id="7966262">,</span>&nbsp;<span class="num" id="7966264">0</span><span class="op" id="7966265">,</span>&nbsp;<span class="num" id="7966267">90</span><span class="op" id="7966269">}</span><span class="op" id="7966270">}</span><span class="op" id="7966271">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966274">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966335">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966360">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966407">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966499">{</span><span class="string" id="7966500">&#34;ycbcr&#34;</span><span class="op" id="7966507">,</span>&nbsp;<span class="ident" id="7966509">vgradCr</span><span class="op" id="7966516">(</span><span class="op" id="7966517">)</span><span class="op" id="7966518">,</span>&nbsp;<span class="ident" id="7966520">fillAlpha</span><span class="op" id="7966529">(</span><span class="num" id="7966530">255</span><span class="op" id="7966533">)</span><span class="op" id="7966534">,</span>&nbsp;<span class="ident" id="7966536">Over</span><span class="op" id="7966540">,</span>&nbsp;<span class="ident" id="7966542">color</span><span class="op" id="7966547">.</span><span class="ident" id="7966548">RGBA</span><span class="op" id="7966552">{</span><span class="num" id="7966553">11</span><span class="op" id="7966555">,</span>&nbsp;<span class="num" id="7966557">38</span><span class="op" id="7966559">,</span>&nbsp;<span class="num" id="7966561">0</span><span class="op" id="7966562">,</span>&nbsp;<span class="num" id="7966564">255</span><span class="op" id="7966567">}</span><span class="op" id="7966568">}</span><span class="op" id="7966569">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966572">{</span><span class="string" id="7966573">&#34;ycbcrSrc&#34;</span><span class="op" id="7966583">,</span>&nbsp;<span class="ident" id="7966585">vgradCr</span><span class="op" id="7966592">(</span><span class="op" id="7966593">)</span><span class="op" id="7966594">,</span>&nbsp;<span class="ident" id="7966596">fillAlpha</span><span class="op" id="7966605">(</span><span class="num" id="7966606">255</span><span class="op" id="7966609">)</span><span class="op" id="7966610">,</span>&nbsp;<span class="ident" id="7966612">Src</span><span class="op" id="7966615">,</span>&nbsp;<span class="ident" id="7966617">color</span><span class="op" id="7966622">.</span><span class="ident" id="7966623">RGBA</span><span class="op" id="7966627">{</span><span class="num" id="7966628">11</span><span class="op" id="7966630">,</span>&nbsp;<span class="num" id="7966632">38</span><span class="op" id="7966634">,</span>&nbsp;<span class="num" id="7966636">0</span><span class="op" id="7966637">,</span>&nbsp;<span class="num" id="7966639">255</span><span class="op" id="7966642">}</span><span class="op" id="7966643">}</span><span class="op" id="7966644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966647">{</span><span class="string" id="7966648">&#34;ycbcrAlpha&#34;</span><span class="op" id="7966660">,</span>&nbsp;<span class="ident" id="7966662">vgradCr</span><span class="op" id="7966669">(</span><span class="op" id="7966670">)</span><span class="op" id="7966671">,</span>&nbsp;<span class="ident" id="7966673">fillAlpha</span><span class="op" id="7966682">(</span><span class="num" id="7966683">192</span><span class="op" id="7966686">)</span><span class="op" id="7966687">,</span>&nbsp;<span class="ident" id="7966689">Over</span><span class="op" id="7966693">,</span>&nbsp;<span class="ident" id="7966695">color</span><span class="op" id="7966700">.</span><span class="ident" id="7966701">RGBA</span><span class="op" id="7966705">{</span><span class="num" id="7966706">42</span><span class="op" id="7966708">,</span>&nbsp;<span class="num" id="7966710">28</span><span class="op" id="7966712">,</span>&nbsp;<span class="num" id="7966714">0</span><span class="op" id="7966715">,</span>&nbsp;<span class="num" id="7966717">255</span><span class="op" id="7966720">}</span><span class="op" id="7966721">}</span><span class="op" id="7966722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966725">{</span><span class="string" id="7966726">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="7966741">,</span>&nbsp;<span class="ident" id="7966743">vgradCr</span><span class="op" id="7966750">(</span><span class="op" id="7966751">)</span><span class="op" id="7966752">,</span>&nbsp;<span class="ident" id="7966754">fillAlpha</span><span class="op" id="7966763">(</span><span class="num" id="7966764">192</span><span class="op" id="7966767">)</span><span class="op" id="7966768">,</span>&nbsp;<span class="ident" id="7966770">Src</span><span class="op" id="7966773">,</span>&nbsp;<span class="ident" id="7966775">color</span><span class="op" id="7966780">.</span><span class="ident" id="7966781">RGBA</span><span class="op" id="7966785">{</span><span class="num" id="7966786">8</span><span class="op" id="7966787">,</span>&nbsp;<span class="num" id="7966789">28</span><span class="op" id="7966791">,</span>&nbsp;<span class="num" id="7966793">0</span><span class="op" id="7966794">,</span>&nbsp;<span class="num" id="7966796">192</span><span class="op" id="7966799">}</span><span class="op" id="7966800">}</span><span class="op" id="7966801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966804">{</span><span class="string" id="7966805">&#34;ycbcrNil&#34;</span><span class="op" id="7966815">,</span>&nbsp;<span class="ident" id="7966817">vgradCr</span><span class="op" id="7966824">(</span><span class="op" id="7966825">)</span><span class="op" id="7966826">,</span>&nbsp;<span class="ident" id="7966828">nil</span><span class="op" id="7966831">,</span>&nbsp;<span class="ident" id="7966833">Over</span><span class="op" id="7966837">,</span>&nbsp;<span class="ident" id="7966839">color</span><span class="op" id="7966844">.</span><span class="ident" id="7966845">RGBA</span><span class="op" id="7966849">{</span><span class="num" id="7966850">11</span><span class="op" id="7966852">,</span>&nbsp;<span class="num" id="7966854">38</span><span class="op" id="7966856">,</span>&nbsp;<span class="num" id="7966858">0</span><span class="op" id="7966859">,</span>&nbsp;<span class="num" id="7966861">255</span><span class="op" id="7966864">}</span><span class="op" id="7966865">}</span><span class="op" id="7966866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966869">{</span><span class="string" id="7966870">&#34;ycbcrNilSrc&#34;</span><span class="op" id="7966883">,</span>&nbsp;<span class="ident" id="7966885">vgradCr</span><span class="op" id="7966892">(</span><span class="op" id="7966893">)</span><span class="op" id="7966894">,</span>&nbsp;<span class="ident" id="7966896">nil</span><span class="op" id="7966899">,</span>&nbsp;<span class="ident" id="7966901">Src</span><span class="op" id="7966904">,</span>&nbsp;<span class="ident" id="7966906">color</span><span class="op" id="7966911">.</span><span class="ident" id="7966912">RGBA</span><span class="op" id="7966916">{</span><span class="num" id="7966917">11</span><span class="op" id="7966919">,</span>&nbsp;<span class="num" id="7966921">38</span><span class="op" id="7966923">,</span>&nbsp;<span class="num" id="7966925">0</span><span class="op" id="7966926">,</span>&nbsp;<span class="num" id="7966928">255</span><span class="op" id="7966931">}</span><span class="op" id="7966932">}</span><span class="op" id="7966933">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966936">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966975">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7967000">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7967047">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7967089">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967132">{</span><span class="string" id="7967133">&#34;generic&#34;</span><span class="op" id="7967142">,</span>&nbsp;<span class="ident" id="7967144">fillBlue</span><span class="op" id="7967152">(</span><span class="num" id="7967153">255</span><span class="op" id="7967156">)</span><span class="op" id="7967157">,</span>&nbsp;<span class="ident" id="7967159">vgradAlpha</span><span class="op" id="7967169">(</span><span class="num" id="7967170">192</span><span class="op" id="7967173">)</span><span class="op" id="7967174">,</span>&nbsp;<span class="ident" id="7967176">Over</span><span class="op" id="7967180">,</span>&nbsp;<span class="ident" id="7967182">color</span><span class="op" id="7967187">.</span><span class="ident" id="7967188">RGBA</span><span class="op" id="7967192">{</span><span class="num" id="7967193">81</span><span class="op" id="7967195">,</span>&nbsp;<span class="num" id="7967197">0</span><span class="op" id="7967198">,</span>&nbsp;<span class="num" id="7967200">102</span><span class="op" id="7967203">,</span>&nbsp;<span class="num" id="7967205">255</span><span class="op" id="7967208">}</span><span class="op" id="7967209">}</span><span class="op" id="7967210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967213">{</span><span class="string" id="7967214">&#34;genericSrc&#34;</span><span class="op" id="7967226">,</span>&nbsp;<span class="ident" id="7967228">fillBlue</span><span class="op" id="7967236">(</span><span class="num" id="7967237">255</span><span class="op" id="7967240">)</span><span class="op" id="7967241">,</span>&nbsp;<span class="ident" id="7967243">vgradAlpha</span><span class="op" id="7967253">(</span><span class="num" id="7967254">192</span><span class="op" id="7967257">)</span><span class="op" id="7967258">,</span>&nbsp;<span class="ident" id="7967260">Src</span><span class="op" id="7967263">,</span>&nbsp;<span class="ident" id="7967265">color</span><span class="op" id="7967270">.</span><span class="ident" id="7967271">RGBA</span><span class="op" id="7967275">{</span><span class="num" id="7967276">0</span><span class="op" id="7967277">,</span>&nbsp;<span class="num" id="7967279">0</span><span class="op" id="7967280">,</span>&nbsp;<span class="num" id="7967282">102</span><span class="op" id="7967285">,</span>&nbsp;<span class="num" id="7967287">102</span><span class="op" id="7967290">}</span><span class="op" id="7967291">}</span><span class="op" id="7967292">,</span><br>
<span class="lineno"></span><span class="op" id="7967294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7967297">func</span>&nbsp;<span class="ident" id="7967302">makeGolden</span><span class="op" id="7967312">(</span><span class="ident" id="7967313">dst</span>&nbsp;<span class="ident" id="7967317">image</span><span class="op" id="7967322">.</span><span class="ident" id="7967323">Image</span><span class="op" id="7967328">,</span>&nbsp;<span class="ident" id="7967330">r</span>&nbsp;<span class="ident" id="7967332">image</span><span class="op" id="7967337">.</span><span class="ident" id="7967338">Rectangle</span><span class="op" id="7967347">,</span>&nbsp;<span class="ident" id="7967349">src</span>&nbsp;<span class="ident" id="7967353">image</span><span class="op" id="7967358">.</span><span class="ident" id="7967359">Image</span><span class="op" id="7967364">,</span>&nbsp;<span class="ident" id="7967366">sp</span>&nbsp;<span class="ident" id="7967369">image</span><span class="op" id="7967374">.</span><span class="ident" id="7967375">Point</span><span class="op" id="7967380">,</span>&nbsp;<span class="ident" id="7967382">mask</span>&nbsp;<span class="ident" id="7967387">image</span><span class="op" id="7967392">.</span><span class="ident" id="7967393">Image</span><span class="op" id="7967398">,</span>&nbsp;<span class="ident" id="7967400">mp</span>&nbsp;<span class="ident" id="7967403">image</span><span class="op" id="7967408">.</span><span class="ident" id="7967409">Point</span><span class="op" id="7967414">,</span>&nbsp;<span class="ident" id="7967416">op</span>&nbsp;<span class="ident" id="7967419">Op</span><span class="op" id="7967421">)</span>&nbsp;<span class="ident" id="7967423">image</span><span class="op" id="7967428">.</span><span class="ident" id="7967429">Image</span>&nbsp;<span class="op" id="7967435">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7967438">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7967513">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967583">b</span>&nbsp;<span class="op" id="7967585">:=</span>&nbsp;<span class="ident" id="7967588">dst</span><span class="op" id="7967591">.</span><span class="ident" id="7967592">Bounds</span><span class="op" id="7967598">(</span><span class="op" id="7967599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967602">sb</span>&nbsp;<span class="op" id="7967605">:=</span>&nbsp;<span class="ident" id="7967608">src</span><span class="op" id="7967611">.</span><span class="ident" id="7967612">Bounds</span><span class="op" id="7967618">(</span><span class="op" id="7967619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967622">mb</span>&nbsp;<span class="op" id="7967625">:=</span>&nbsp;<span class="ident" id="7967628">image</span><span class="op" id="7967633">.</span><span class="ident" id="7967634">Rect</span><span class="op" id="7967638">(</span><span class="op" id="7967639">-</span><span class="num" id="7967640">1e9</span><span class="op" id="7967643">,</span>&nbsp;<span class="op" id="7967645">-</span><span class="num" id="7967646">1e9</span><span class="op" id="7967649">,</span>&nbsp;<span class="num" id="7967651">1e9</span><span class="op" id="7967654">,</span>&nbsp;<span class="num" id="7967656">1e9</span><span class="op" id="7967659">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967662">if</span>&nbsp;<span class="ident" id="7967665">mask</span>&nbsp;<span class="op" id="7967670">!=</span>&nbsp;<span class="ident" id="7967673">nil</span>&nbsp;<span class="op" id="7967677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967681">mb</span>&nbsp;<span class="op" id="7967684">=</span>&nbsp;<span class="ident" id="7967686">mask</span><span class="op" id="7967690">.</span><span class="ident" id="7967691">Bounds</span><span class="op" id="7967697">(</span><span class="op" id="7967698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967704">golden</span>&nbsp;<span class="op" id="7967711">:=</span>&nbsp;<span class="ident" id="7967714">image</span><span class="op" id="7967719">.</span><span class="ident" id="7967720">NewRGBA</span><span class="op" id="7967727">(</span><span class="ident" id="7967728">image</span><span class="op" id="7967733">.</span><span class="ident" id="7967734">Rect</span><span class="op" id="7967738">(</span><span class="num" id="7967739">0</span><span class="op" id="7967740">,</span>&nbsp;<span class="num" id="7967742">0</span><span class="op" id="7967743">,</span>&nbsp;<span class="ident" id="7967745">b</span><span class="op" id="7967746">.</span><span class="ident" id="7967747">Max</span><span class="op" id="7967750">.</span><span class="ident" id="7967751">X</span><span class="op" id="7967752">,</span>&nbsp;<span class="ident" id="7967754">b</span><span class="op" id="7967755">.</span><span class="ident" id="7967756">Max</span><span class="op" id="7967759">.</span><span class="ident" id="7967760">Y</span><span class="op" id="7967761">)</span><span class="op" id="7967762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967765">for</span>&nbsp;<span class="ident" id="7967769">y</span>&nbsp;<span class="op" id="7967771">:=</span>&nbsp;<span class="ident" id="7967774">r</span><span class="op" id="7967775">.</span><span class="ident" id="7967776">Min</span><span class="op" id="7967779">.</span><span class="ident" id="7967780">Y</span><span class="op" id="7967781">;</span>&nbsp;<span class="ident" id="7967783">y</span>&nbsp;<span class="op" id="7967785">&lt;</span>&nbsp;<span class="ident" id="7967787">r</span><span class="op" id="7967788">.</span><span class="ident" id="7967789">Max</span><span class="op" id="7967792">.</span><span class="ident" id="7967793">Y</span><span class="op" id="7967794">;</span>&nbsp;<span class="ident" id="7967796">y</span><span class="op" id="7967797">++</span>&nbsp;<span class="op" id="7967800">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967804">sy</span>&nbsp;<span class="op" id="7967807">:=</span>&nbsp;<span class="ident" id="7967810">y</span>&nbsp;<span class="op" id="7967812">+</span>&nbsp;<span class="ident" id="7967814">sp</span><span class="op" id="7967816">.</span><span class="ident" id="7967817">Y</span>&nbsp;<span class="op" id="7967819">-</span>&nbsp;<span class="ident" id="7967821">r</span><span class="op" id="7967822">.</span><span class="ident" id="7967823">Min</span><span class="op" id="7967826">.</span><span class="ident" id="7967827">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967831">my</span>&nbsp;<span class="op" id="7967834">:=</span>&nbsp;<span class="ident" id="7967837">y</span>&nbsp;<span class="op" id="7967839">+</span>&nbsp;<span class="ident" id="7967841">mp</span><span class="op" id="7967843">.</span><span class="ident" id="7967844">Y</span>&nbsp;<span class="op" id="7967846">-</span>&nbsp;<span class="ident" id="7967848">r</span><span class="op" id="7967849">.</span><span class="ident" id="7967850">Min</span><span class="op" id="7967853">.</span><span class="ident" id="7967854">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967858">for</span>&nbsp;<span class="ident" id="7967862">x</span>&nbsp;<span class="op" id="7967864">:=</span>&nbsp;<span class="ident" id="7967867">r</span><span class="op" id="7967868">.</span><span class="ident" id="7967869">Min</span><span class="op" id="7967872">.</span><span class="ident" id="7967873">X</span><span class="op" id="7967874">;</span>&nbsp;<span class="ident" id="7967876">x</span>&nbsp;<span class="op" id="7967878">&lt;</span>&nbsp;<span class="ident" id="7967880">r</span><span class="op" id="7967881">.</span><span class="ident" id="7967882">Max</span><span class="op" id="7967885">.</span><span class="ident" id="7967886">X</span><span class="op" id="7967887">;</span>&nbsp;<span class="ident" id="7967889">x</span><span class="op" id="7967890">++</span>&nbsp;<span class="op" id="7967893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967898">if</span>&nbsp;<span class="op" id="7967901">!</span><span class="op" id="7967902">(</span><span class="ident" id="7967903">image</span><span class="op" id="7967908">.</span><span class="ident" id="7967909">Pt</span><span class="op" id="7967911">(</span><span class="ident" id="7967912">x</span><span class="op" id="7967913">,</span>&nbsp;<span class="ident" id="7967915">y</span><span class="op" id="7967916">)</span><span class="op" id="7967917">.</span><span class="ident" id="7967918">In</span><span class="op" id="7967920">(</span><span class="ident" id="7967921">b</span><span class="op" id="7967922">)</span><span class="op" id="7967923">)</span>&nbsp;<span class="op" id="7967925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967931">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967948">sx</span>&nbsp;<span class="op" id="7967951">:=</span>&nbsp;<span class="ident" id="7967954">x</span>&nbsp;<span class="op" id="7967956">+</span>&nbsp;<span class="ident" id="7967958">sp</span><span class="op" id="7967960">.</span><span class="ident" id="7967961">X</span>&nbsp;<span class="op" id="7967963">-</span>&nbsp;<span class="ident" id="7967965">r</span><span class="op" id="7967966">.</span><span class="ident" id="7967967">Min</span><span class="op" id="7967970">.</span><span class="ident" id="7967971">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967976">if</span>&nbsp;<span class="op" id="7967979">!</span><span class="op" id="7967980">(</span><span class="ident" id="7967981">image</span><span class="op" id="7967986">.</span><span class="ident" id="7967987">Pt</span><span class="op" id="7967989">(</span><span class="ident" id="7967990">sx</span><span class="op" id="7967992">,</span>&nbsp;<span class="ident" id="7967994">sy</span><span class="op" id="7967996">)</span><span class="op" id="7967997">.</span><span class="ident" id="7967998">In</span><span class="op" id="7968000">(</span><span class="ident" id="7968001">sb</span><span class="op" id="7968003">)</span><span class="op" id="7968004">)</span>&nbsp;<span class="op" id="7968006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968012">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968024">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968029">mx</span>&nbsp;<span class="op" id="7968032">:=</span>&nbsp;<span class="ident" id="7968035">x</span>&nbsp;<span class="op" id="7968037">+</span>&nbsp;<span class="ident" id="7968039">mp</span><span class="op" id="7968041">.</span><span class="ident" id="7968042">X</span>&nbsp;<span class="op" id="7968044">-</span>&nbsp;<span class="ident" id="7968046">r</span><span class="op" id="7968047">.</span><span class="ident" id="7968048">Min</span><span class="op" id="7968051">.</span><span class="ident" id="7968052">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968057">if</span>&nbsp;<span class="op" id="7968060">!</span><span class="op" id="7968061">(</span><span class="ident" id="7968062">image</span><span class="op" id="7968067">.</span><span class="ident" id="7968068">Pt</span><span class="op" id="7968070">(</span><span class="ident" id="7968071">mx</span><span class="op" id="7968073">,</span>&nbsp;<span class="ident" id="7968075">my</span><span class="op" id="7968077">)</span><span class="op" id="7968078">.</span><span class="ident" id="7968079">In</span><span class="op" id="7968081">(</span><span class="ident" id="7968082">mb</span><span class="op" id="7968084">)</span><span class="op" id="7968085">)</span>&nbsp;<span class="op" id="7968087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968093">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968111">const</span>&nbsp;<span class="ident" id="7968117">M</span>&nbsp;<span class="op" id="7968119">=</span>&nbsp;<span class="num" id="7968121">1</span><span class="op" id="7968122">&lt;&lt;</span><span class="num" id="7968124">16</span>&nbsp;<span class="op" id="7968127">-</span>&nbsp;<span class="num" id="7968129">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968134">var</span>&nbsp;<span class="ident" id="7968138">dr</span><span class="op" id="7968140">,</span>&nbsp;<span class="ident" id="7968142">dg</span><span class="op" id="7968144">,</span>&nbsp;<span class="ident" id="7968146">db</span><span class="op" id="7968148">,</span>&nbsp;<span class="ident" id="7968150">da</span>&nbsp;<span class="builtintype" id="7968153">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968163">if</span>&nbsp;<span class="ident" id="7968166">op</span>&nbsp;<span class="op" id="7968169">==</span>&nbsp;<span class="ident" id="7968172">Over</span>&nbsp;<span class="op" id="7968177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968183">dr</span><span class="op" id="7968185">,</span>&nbsp;<span class="ident" id="7968187">dg</span><span class="op" id="7968189">,</span>&nbsp;<span class="ident" id="7968191">db</span><span class="op" id="7968193">,</span>&nbsp;<span class="ident" id="7968195">da</span>&nbsp;<span class="op" id="7968198">=</span>&nbsp;<span class="ident" id="7968200">dst</span><span class="op" id="7968203">.</span><span class="ident" id="7968204">At</span><span class="op" id="7968206">(</span><span class="ident" id="7968207">x</span><span class="op" id="7968208">,</span>&nbsp;<span class="ident" id="7968210">y</span><span class="op" id="7968211">)</span><span class="op" id="7968212">.</span><span class="ident" id="7968213">RGBA</span><span class="op" id="7968217">(</span><span class="op" id="7968218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968223">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968228">sr</span><span class="op" id="7968230">,</span>&nbsp;<span class="ident" id="7968232">sg</span><span class="op" id="7968234">,</span>&nbsp;<span class="ident" id="7968236">sb</span><span class="op" id="7968238">,</span>&nbsp;<span class="ident" id="7968240">sa</span>&nbsp;<span class="op" id="7968243">:=</span>&nbsp;<span class="ident" id="7968246">src</span><span class="op" id="7968249">.</span><span class="ident" id="7968250">At</span><span class="op" id="7968252">(</span><span class="ident" id="7968253">sx</span><span class="op" id="7968255">,</span>&nbsp;<span class="ident" id="7968257">sy</span><span class="op" id="7968259">)</span><span class="op" id="7968260">.</span><span class="ident" id="7968261">RGBA</span><span class="op" id="7968265">(</span><span class="op" id="7968266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968271">ma</span>&nbsp;<span class="op" id="7968274">:=</span>&nbsp;<span class="builtintype" id="7968277">uint32</span><span class="op" id="7968283">(</span><span class="ident" id="7968284">M</span><span class="op" id="7968285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968290">if</span>&nbsp;<span class="ident" id="7968293">mask</span>&nbsp;<span class="op" id="7968298">!=</span>&nbsp;<span class="ident" id="7968301">nil</span>&nbsp;<span class="op" id="7968305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968311">_</span><span class="op" id="7968312">,</span>&nbsp;<span class="ident" id="7968314">_</span><span class="op" id="7968315">,</span>&nbsp;<span class="ident" id="7968317">_</span><span class="op" id="7968318">,</span>&nbsp;<span class="ident" id="7968320">ma</span>&nbsp;<span class="op" id="7968323">=</span>&nbsp;<span class="ident" id="7968325">mask</span><span class="op" id="7968329">.</span><span class="ident" id="7968330">At</span><span class="op" id="7968332">(</span><span class="ident" id="7968333">mx</span><span class="op" id="7968335">,</span>&nbsp;<span class="ident" id="7968337">my</span><span class="op" id="7968339">)</span><span class="op" id="7968340">.</span><span class="ident" id="7968341">RGBA</span><span class="op" id="7968345">(</span><span class="op" id="7968346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968351">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968356">a</span>&nbsp;<span class="op" id="7968358">:=</span>&nbsp;<span class="ident" id="7968361">M</span>&nbsp;<span class="op" id="7968363">-</span>&nbsp;<span class="op" id="7968365">(</span><span class="ident" id="7968366">sa</span>&nbsp;<span class="op" id="7968369">*</span>&nbsp;<span class="ident" id="7968371">ma</span>&nbsp;<span class="op" id="7968374">/</span>&nbsp;<span class="ident" id="7968376">M</span><span class="op" id="7968377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968382">golden</span><span class="op" id="7968388">.</span><span class="ident" id="7968389">Set</span><span class="op" id="7968392">(</span><span class="ident" id="7968393">x</span><span class="op" id="7968394">,</span>&nbsp;<span class="ident" id="7968396">y</span><span class="op" id="7968397">,</span>&nbsp;<span class="ident" id="7968399">color</span><span class="op" id="7968404">.</span><span class="ident" id="7968405">RGBA64</span><span class="op" id="7968411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7968417">uint16</span><span class="op" id="7968423">(</span><span class="op" id="7968424">(</span><span class="ident" id="7968425">dr</span><span class="op" id="7968427">*</span><span class="ident" id="7968428">a</span>&nbsp;<span class="op" id="7968430">+</span>&nbsp;<span class="ident" id="7968432">sr</span><span class="op" id="7968434">*</span><span class="ident" id="7968435">ma</span><span class="op" id="7968437">)</span>&nbsp;<span class="op" id="7968439">/</span>&nbsp;<span class="ident" id="7968441">M</span><span class="op" id="7968442">)</span><span class="op" id="7968443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7968449">uint16</span><span class="op" id="7968455">(</span><span class="op" id="7968456">(</span><span class="ident" id="7968457">dg</span><span class="op" id="7968459">*</span><span class="ident" id="7968460">a</span>&nbsp;<span class="op" id="7968462">+</span>&nbsp;<span class="ident" id="7968464">sg</span><span class="op" id="7968466">*</span><span class="ident" id="7968467">ma</span><span class="op" id="7968469">)</span>&nbsp;<span class="op" id="7968471">/</span>&nbsp;<span class="ident" id="7968473">M</span><span class="op" id="7968474">)</span><span class="op" id="7968475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7968481">uint16</span><span class="op" id="7968487">(</span><span class="op" id="7968488">(</span><span class="ident" id="7968489">db</span><span class="op" id="7968491">*</span><span class="ident" id="7968492">a</span>&nbsp;<span class="op" id="7968494">+</span>&nbsp;<span class="ident" id="7968496">sb</span><span class="op" id="7968498">*</span><span class="ident" id="7968499">ma</span><span class="op" id="7968501">)</span>&nbsp;<span class="op" id="7968503">/</span>&nbsp;<span class="ident" id="7968505">M</span><span class="op" id="7968506">)</span><span class="op" id="7968507">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7968513">uint16</span><span class="op" id="7968519">(</span><span class="op" id="7968520">(</span><span class="ident" id="7968521">da</span><span class="op" id="7968523">*</span><span class="ident" id="7968524">a</span>&nbsp;<span class="op" id="7968526">+</span>&nbsp;<span class="ident" id="7968528">sa</span><span class="op" id="7968530">*</span><span class="ident" id="7968531">ma</span><span class="op" id="7968533">)</span>&nbsp;<span class="op" id="7968535">/</span>&nbsp;<span class="ident" id="7968537">M</span><span class="op" id="7968538">)</span><span class="op" id="7968539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968544">}</span><span class="op" id="7968545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968555">return</span>&nbsp;<span class="ident" id="7968562">golden</span><span class="op" id="7968568">.</span><span class="ident" id="7968569">SubImage</span><span class="op" id="7968577">(</span><span class="ident" id="7968578">b</span><span class="op" id="7968579">)</span><br>
<span class="lineno">205</span><span class="op" id="7968581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7968584">func</span>&nbsp;<span class="ident" id="7968589">TestDraw</span><span class="op" id="7968597">(</span><span class="ident" id="7968598">t</span>&nbsp;<span class="op" id="7968600">*</span><span class="ident" id="7968601">testing</span><span class="op" id="7968608">.</span><span class="ident" id="7968609">T</span><span class="op" id="7968610">)</span>&nbsp;<span class="op" id="7968612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968615">rr</span>&nbsp;<span class="op" id="7968618">:=</span>&nbsp;<span class="op" id="7968621">[</span><span class="op" id="7968622">]</span><span class="ident" id="7968623">image</span><span class="op" id="7968628">.</span><span class="ident" id="7968629">Rectangle</span><span class="op" id="7968638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968642">image</span><span class="op" id="7968647">.</span><span class="ident" id="7968648">Rect</span><span class="op" id="7968652">(</span><span class="num" id="7968653">0</span><span class="op" id="7968654">,</span>&nbsp;<span class="num" id="7968656">0</span><span class="op" id="7968657">,</span>&nbsp;<span class="num" id="7968659">0</span><span class="op" id="7968660">,</span>&nbsp;<span class="num" id="7968662">0</span><span class="op" id="7968663">)</span><span class="op" id="7968664">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968668">image</span><span class="op" id="7968673">.</span><span class="ident" id="7968674">Rect</span><span class="op" id="7968678">(</span><span class="num" id="7968679">0</span><span class="op" id="7968680">,</span>&nbsp;<span class="num" id="7968682">0</span><span class="op" id="7968683">,</span>&nbsp;<span class="num" id="7968685">16</span><span class="op" id="7968687">,</span>&nbsp;<span class="num" id="7968689">16</span><span class="op" id="7968691">)</span><span class="op" id="7968692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968696">image</span><span class="op" id="7968701">.</span><span class="ident" id="7968702">Rect</span><span class="op" id="7968706">(</span><span class="num" id="7968707">3</span><span class="op" id="7968708">,</span>&nbsp;<span class="num" id="7968710">5</span><span class="op" id="7968711">,</span>&nbsp;<span class="num" id="7968713">12</span><span class="op" id="7968715">,</span>&nbsp;<span class="num" id="7968717">10</span><span class="op" id="7968719">)</span><span class="op" id="7968720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968724">image</span><span class="op" id="7968729">.</span><span class="ident" id="7968730">Rect</span><span class="op" id="7968734">(</span><span class="num" id="7968735">0</span><span class="op" id="7968736">,</span>&nbsp;<span class="num" id="7968738">0</span><span class="op" id="7968739">,</span>&nbsp;<span class="num" id="7968741">9</span><span class="op" id="7968742">,</span>&nbsp;<span class="num" id="7968744">9</span><span class="op" id="7968745">)</span><span class="op" id="7968746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968750">image</span><span class="op" id="7968755">.</span><span class="ident" id="7968756">Rect</span><span class="op" id="7968760">(</span><span class="num" id="7968761">8</span><span class="op" id="7968762">,</span>&nbsp;<span class="num" id="7968764">8</span><span class="op" id="7968765">,</span>&nbsp;<span class="num" id="7968767">16</span><span class="op" id="7968769">,</span>&nbsp;<span class="num" id="7968771">16</span><span class="op" id="7968773">)</span><span class="op" id="7968774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968778">image</span><span class="op" id="7968783">.</span><span class="ident" id="7968784">Rect</span><span class="op" id="7968788">(</span><span class="num" id="7968789">8</span><span class="op" id="7968790">,</span>&nbsp;<span class="num" id="7968792">0</span><span class="op" id="7968793">,</span>&nbsp;<span class="num" id="7968795">9</span><span class="op" id="7968796">,</span>&nbsp;<span class="num" id="7968798">16</span><span class="op" id="7968800">)</span><span class="op" id="7968801">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968805">image</span><span class="op" id="7968810">.</span><span class="ident" id="7968811">Rect</span><span class="op" id="7968815">(</span><span class="num" id="7968816">0</span><span class="op" id="7968817">,</span>&nbsp;<span class="num" id="7968819">8</span><span class="op" id="7968820">,</span>&nbsp;<span class="num" id="7968822">16</span><span class="op" id="7968824">,</span>&nbsp;<span class="num" id="7968826">9</span><span class="op" id="7968827">)</span><span class="op" id="7968828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968832">image</span><span class="op" id="7968837">.</span><span class="ident" id="7968838">Rect</span><span class="op" id="7968842">(</span><span class="num" id="7968843">8</span><span class="op" id="7968844">,</span>&nbsp;<span class="num" id="7968846">8</span><span class="op" id="7968847">,</span>&nbsp;<span class="num" id="7968849">9</span><span class="op" id="7968850">,</span>&nbsp;<span class="num" id="7968852">9</span><span class="op" id="7968853">)</span><span class="op" id="7968854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968858">image</span><span class="op" id="7968863">.</span><span class="ident" id="7968864">Rect</span><span class="op" id="7968868">(</span><span class="num" id="7968869">8</span><span class="op" id="7968870">,</span>&nbsp;<span class="num" id="7968872">8</span><span class="op" id="7968873">,</span>&nbsp;<span class="num" id="7968875">8</span><span class="op" id="7968876">,</span>&nbsp;<span class="num" id="7968878">8</span><span class="op" id="7968879">)</span><span class="op" id="7968880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968886">for</span>&nbsp;<span class="ident" id="7968890">_</span><span class="op" id="7968891">,</span>&nbsp;<span class="ident" id="7968893">r</span>&nbsp;<span class="op" id="7968895">:=</span>&nbsp;<span class="keyword" id="7968898">range</span>&nbsp;<span class="ident" id="7968904">rr</span>&nbsp;<span class="op" id="7968907">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968910">loop</span><span class="op" id="7968914">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968918">for</span>&nbsp;<span class="ident" id="7968922">_</span><span class="op" id="7968923">,</span>&nbsp;<span class="ident" id="7968925">test</span>&nbsp;<span class="op" id="7968930">:=</span>&nbsp;<span class="keyword" id="7968933">range</span>&nbsp;<span class="ident" id="7968939">drawTests</span>&nbsp;<span class="op" id="7968949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968954">dst</span>&nbsp;<span class="op" id="7968958">:=</span>&nbsp;<span class="ident" id="7968961">hgradRed</span><span class="op" id="7968969">(</span><span class="num" id="7968970">255</span><span class="op" id="7968973">)</span><span class="op" id="7968974">.</span><span class="op" id="7968975">(</span><span class="op" id="7968976">*</span><span class="ident" id="7968977">image</span><span class="op" id="7968982">.</span><span class="ident" id="7968983">RGBA</span><span class="op" id="7968987">)</span><span class="op" id="7968988">.</span><span class="ident" id="7968989">SubImage</span><span class="op" id="7968997">(</span><span class="ident" id="7968998">r</span><span class="op" id="7968999">)</span><span class="op" id="7969000">.</span><span class="op" id="7969001">(</span><span class="ident" id="7969002">Image</span><span class="op" id="7969007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969012">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969113">golden</span>&nbsp;<span class="op" id="7969120">:=</span>&nbsp;<span class="ident" id="7969123">makeGolden</span><span class="op" id="7969133">(</span><span class="ident" id="7969134">dst</span><span class="op" id="7969137">,</span>&nbsp;<span class="ident" id="7969139">image</span><span class="op" id="7969144">.</span><span class="ident" id="7969145">Rect</span><span class="op" id="7969149">(</span><span class="num" id="7969150">0</span><span class="op" id="7969151">,</span>&nbsp;<span class="num" id="7969153">0</span><span class="op" id="7969154">,</span>&nbsp;<span class="num" id="7969156">16</span><span class="op" id="7969158">,</span>&nbsp;<span class="num" id="7969160">16</span><span class="op" id="7969162">)</span><span class="op" id="7969163">,</span>&nbsp;<span class="ident" id="7969165">test</span><span class="op" id="7969169">.</span><span class="ident" id="7969170">src</span><span class="op" id="7969173">,</span>&nbsp;<span class="ident" id="7969175">image</span><span class="op" id="7969180">.</span><span class="ident" id="7969181">ZP</span><span class="op" id="7969183">,</span>&nbsp;<span class="ident" id="7969185">test</span><span class="op" id="7969189">.</span><span class="ident" id="7969190">mask</span><span class="op" id="7969194">,</span>&nbsp;<span class="ident" id="7969196">image</span><span class="op" id="7969201">.</span><span class="ident" id="7969202">ZP</span><span class="op" id="7969204">,</span>&nbsp;<span class="ident" id="7969206">test</span><span class="op" id="7969210">.</span><span class="ident" id="7969211">op</span><span class="op" id="7969213">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969218">b</span>&nbsp;<span class="op" id="7969220">:=</span>&nbsp;<span class="ident" id="7969223">dst</span><span class="op" id="7969226">.</span><span class="ident" id="7969227">Bounds</span><span class="op" id="7969233">(</span><span class="op" id="7969234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969239">if</span>&nbsp;<span class="op" id="7969242">!</span><span class="ident" id="7969243">b</span><span class="op" id="7969244">.</span><span class="ident" id="7969245">Eq</span><span class="op" id="7969247">(</span><span class="ident" id="7969248">golden</span><span class="op" id="7969254">.</span><span class="ident" id="7969255">Bounds</span><span class="op" id="7969261">(</span><span class="op" id="7969262">)</span><span class="op" id="7969263">)</span>&nbsp;<span class="op" id="7969265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969271">t</span><span class="op" id="7969272">.</span><span class="ident" id="7969273">Errorf</span><span class="op" id="7969279">(</span><span class="string" id="7969280">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7969313">,</span>&nbsp;<span class="ident" id="7969315">r</span><span class="op" id="7969316">,</span>&nbsp;<span class="ident" id="7969318">test</span><span class="op" id="7969322">.</span><span class="ident" id="7969323">desc</span><span class="op" id="7969327">,</span>&nbsp;<span class="ident" id="7969329">dst</span><span class="op" id="7969332">.</span><span class="ident" id="7969333">Bounds</span><span class="op" id="7969339">(</span><span class="op" id="7969340">)</span><span class="op" id="7969341">,</span>&nbsp;<span class="ident" id="7969343">golden</span><span class="op" id="7969349">.</span><span class="ident" id="7969350">Bounds</span><span class="op" id="7969356">(</span><span class="op" id="7969357">)</span><span class="op" id="7969358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969364">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969376">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969381">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969478">DrawMask</span><span class="op" id="7969486">(</span><span class="ident" id="7969487">dst</span><span class="op" id="7969490">,</span>&nbsp;<span class="ident" id="7969492">image</span><span class="op" id="7969497">.</span><span class="ident" id="7969498">Rect</span><span class="op" id="7969502">(</span><span class="num" id="7969503">0</span><span class="op" id="7969504">,</span>&nbsp;<span class="num" id="7969506">0</span><span class="op" id="7969507">,</span>&nbsp;<span class="num" id="7969509">16</span><span class="op" id="7969511">,</span>&nbsp;<span class="num" id="7969513">16</span><span class="op" id="7969515">)</span><span class="op" id="7969516">,</span>&nbsp;<span class="ident" id="7969518">test</span><span class="op" id="7969522">.</span><span class="ident" id="7969523">src</span><span class="op" id="7969526">,</span>&nbsp;<span class="ident" id="7969528">image</span><span class="op" id="7969533">.</span><span class="ident" id="7969534">ZP</span><span class="op" id="7969536">,</span>&nbsp;<span class="ident" id="7969538">test</span><span class="op" id="7969542">.</span><span class="ident" id="7969543">mask</span><span class="op" id="7969547">,</span>&nbsp;<span class="ident" id="7969549">image</span><span class="op" id="7969554">.</span><span class="ident" id="7969555">ZP</span><span class="op" id="7969557">,</span>&nbsp;<span class="ident" id="7969559">test</span><span class="op" id="7969563">.</span><span class="ident" id="7969564">op</span><span class="op" id="7969566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969571">if</span>&nbsp;<span class="ident" id="7969574">image</span><span class="op" id="7969579">.</span><span class="ident" id="7969580">Pt</span><span class="op" id="7969582">(</span><span class="num" id="7969583">8</span><span class="op" id="7969584">,</span>&nbsp;<span class="num" id="7969586">8</span><span class="op" id="7969587">)</span><span class="op" id="7969588">.</span><span class="ident" id="7969589">In</span><span class="op" id="7969591">(</span><span class="ident" id="7969592">r</span><span class="op" id="7969593">)</span>&nbsp;<span class="op" id="7969595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969601">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969672">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969725">if</span>&nbsp;<span class="op" id="7969728">!</span><span class="ident" id="7969729">eq</span><span class="op" id="7969731">(</span><span class="ident" id="7969732">dst</span><span class="op" id="7969735">.</span><span class="ident" id="7969736">At</span><span class="op" id="7969738">(</span><span class="num" id="7969739">8</span><span class="op" id="7969740">,</span>&nbsp;<span class="num" id="7969742">8</span><span class="op" id="7969743">)</span><span class="op" id="7969744">,</span>&nbsp;<span class="ident" id="7969746">test</span><span class="op" id="7969750">.</span><span class="ident" id="7969751">expected</span><span class="op" id="7969759">)</span>&nbsp;<span class="op" id="7969761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969768">t</span><span class="op" id="7969769">.</span><span class="ident" id="7969770">Errorf</span><span class="op" id="7969776">(</span><span class="string" id="7969777">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7969813">,</span>&nbsp;<span class="ident" id="7969815">r</span><span class="op" id="7969816">,</span>&nbsp;<span class="ident" id="7969818">test</span><span class="op" id="7969822">.</span><span class="ident" id="7969823">desc</span><span class="op" id="7969827">,</span>&nbsp;<span class="ident" id="7969829">dst</span><span class="op" id="7969832">.</span><span class="ident" id="7969833">At</span><span class="op" id="7969835">(</span><span class="num" id="7969836">8</span><span class="op" id="7969837">,</span>&nbsp;<span class="num" id="7969839">8</span><span class="op" id="7969840">)</span><span class="op" id="7969841">,</span>&nbsp;<span class="ident" id="7969843">test</span><span class="op" id="7969847">.</span><span class="ident" id="7969848">expected</span><span class="op" id="7969856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969863">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969881">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969886">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969954">for</span>&nbsp;<span class="ident" id="7969958">y</span>&nbsp;<span class="op" id="7969960">:=</span>&nbsp;<span class="ident" id="7969963">b</span><span class="op" id="7969964">.</span><span class="ident" id="7969965">Min</span><span class="op" id="7969968">.</span><span class="ident" id="7969969">Y</span><span class="op" id="7969970">;</span>&nbsp;<span class="ident" id="7969972">y</span>&nbsp;<span class="op" id="7969974">&lt;</span>&nbsp;<span class="ident" id="7969976">b</span><span class="op" id="7969977">.</span><span class="ident" id="7969978">Max</span><span class="op" id="7969981">.</span><span class="ident" id="7969982">Y</span><span class="op" id="7969983">;</span>&nbsp;<span class="ident" id="7969985">y</span><span class="op" id="7969986">++</span>&nbsp;<span class="op" id="7969989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969995">for</span>&nbsp;<span class="ident" id="7969999">x</span>&nbsp;<span class="op" id="7970001">:=</span>&nbsp;<span class="ident" id="7970004">b</span><span class="op" id="7970005">.</span><span class="ident" id="7970006">Min</span><span class="op" id="7970009">.</span><span class="ident" id="7970010">X</span><span class="op" id="7970011">;</span>&nbsp;<span class="ident" id="7970013">x</span>&nbsp;<span class="op" id="7970015">&lt;</span>&nbsp;<span class="ident" id="7970017">b</span><span class="op" id="7970018">.</span><span class="ident" id="7970019">Max</span><span class="op" id="7970022">.</span><span class="ident" id="7970023">X</span><span class="op" id="7970024">;</span>&nbsp;<span class="ident" id="7970026">x</span><span class="op" id="7970027">++</span>&nbsp;<span class="op" id="7970030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970037">if</span>&nbsp;<span class="op" id="7970040">!</span><span class="ident" id="7970041">eq</span><span class="op" id="7970043">(</span><span class="ident" id="7970044">dst</span><span class="op" id="7970047">.</span><span class="ident" id="7970048">At</span><span class="op" id="7970050">(</span><span class="ident" id="7970051">x</span><span class="op" id="7970052">,</span>&nbsp;<span class="ident" id="7970054">y</span><span class="op" id="7970055">)</span><span class="op" id="7970056">,</span>&nbsp;<span class="ident" id="7970058">golden</span><span class="op" id="7970064">.</span><span class="ident" id="7970065">At</span><span class="op" id="7970067">(</span><span class="ident" id="7970068">x</span><span class="op" id="7970069">,</span>&nbsp;<span class="ident" id="7970071">y</span><span class="op" id="7970072">)</span><span class="op" id="7970073">)</span>&nbsp;<span class="op" id="7970075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970083">t</span><span class="op" id="7970084">.</span><span class="ident" id="7970085">Errorf</span><span class="op" id="7970091">(</span><span class="string" id="7970092">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="7970138">,</span>&nbsp;<span class="ident" id="7970140">r</span><span class="op" id="7970141">,</span>&nbsp;<span class="ident" id="7970143">test</span><span class="op" id="7970147">.</span><span class="ident" id="7970148">desc</span><span class="op" id="7970152">,</span>&nbsp;<span class="ident" id="7970154">x</span><span class="op" id="7970155">,</span>&nbsp;<span class="ident" id="7970157">y</span><span class="op" id="7970158">,</span>&nbsp;<span class="ident" id="7970160">dst</span><span class="op" id="7970163">.</span><span class="ident" id="7970164">At</span><span class="op" id="7970166">(</span><span class="ident" id="7970167">x</span><span class="op" id="7970168">,</span>&nbsp;<span class="ident" id="7970170">y</span><span class="op" id="7970171">)</span><span class="op" id="7970172">,</span>&nbsp;<span class="ident" id="7970174">golden</span><span class="op" id="7970180">.</span><span class="ident" id="7970181">At</span><span class="op" id="7970183">(</span><span class="ident" id="7970184">x</span><span class="op" id="7970185">,</span>&nbsp;<span class="ident" id="7970187">y</span><span class="op" id="7970188">)</span><span class="op" id="7970189">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970197">continue</span>&nbsp;<span class="ident" id="7970206">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970231">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970234">}</span><br>
<span class="lineno"></span><span class="op" id="7970236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7970239">func</span>&nbsp;<span class="ident" id="7970244">TestDrawOverlap</span><span class="op" id="7970259">(</span><span class="ident" id="7970260">t</span>&nbsp;<span class="op" id="7970262">*</span><span class="ident" id="7970263">testing</span><span class="op" id="7970270">.</span><span class="ident" id="7970271">T</span><span class="op" id="7970272">)</span>&nbsp;<span class="op" id="7970274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970277">for</span>&nbsp;<span class="ident" id="7970281">_</span><span class="op" id="7970282">,</span>&nbsp;<span class="ident" id="7970284">op</span>&nbsp;<span class="op" id="7970287">:=</span>&nbsp;<span class="keyword" id="7970290">range</span>&nbsp;<span class="op" id="7970296">[</span><span class="op" id="7970297">]</span><span class="ident" id="7970298">Op</span><span class="op" id="7970300">{</span><span class="ident" id="7970301">Over</span><span class="op" id="7970305">,</span>&nbsp;<span class="ident" id="7970307">Src</span><span class="op" id="7970310">}</span>&nbsp;<span class="op" id="7970312">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970316">for</span>&nbsp;<span class="ident" id="7970320">yoff</span>&nbsp;<span class="op" id="7970325">:=</span>&nbsp;<span class="op" id="7970328">-</span><span class="num" id="7970329">2</span><span class="op" id="7970330">;</span>&nbsp;<span class="ident" id="7970332">yoff</span>&nbsp;<span class="op" id="7970337">&lt;=</span>&nbsp;<span class="num" id="7970340">2</span><span class="op" id="7970341">;</span>&nbsp;<span class="ident" id="7970343">yoff</span><span class="op" id="7970347">++</span>&nbsp;<span class="op" id="7970350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970354">loop</span><span class="op" id="7970358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970363">for</span>&nbsp;<span class="ident" id="7970367">xoff</span>&nbsp;<span class="op" id="7970372">:=</span>&nbsp;<span class="op" id="7970375">-</span><span class="num" id="7970376">2</span><span class="op" id="7970377">;</span>&nbsp;<span class="ident" id="7970379">xoff</span>&nbsp;<span class="op" id="7970384">&lt;=</span>&nbsp;<span class="num" id="7970387">2</span><span class="op" id="7970388">;</span>&nbsp;<span class="ident" id="7970390">xoff</span><span class="op" id="7970394">++</span>&nbsp;<span class="op" id="7970397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970403">m</span>&nbsp;<span class="op" id="7970405">:=</span>&nbsp;<span class="ident" id="7970408">gradYellow</span><span class="op" id="7970418">(</span><span class="num" id="7970419">127</span><span class="op" id="7970422">)</span><span class="op" id="7970423">.</span><span class="op" id="7970424">(</span><span class="op" id="7970425">*</span><span class="ident" id="7970426">image</span><span class="op" id="7970431">.</span><span class="ident" id="7970432">RGBA</span><span class="op" id="7970436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970442">dst</span>&nbsp;<span class="op" id="7970446">:=</span>&nbsp;<span class="ident" id="7970449">m</span><span class="op" id="7970450">.</span><span class="ident" id="7970451">SubImage</span><span class="op" id="7970459">(</span><span class="ident" id="7970460">image</span><span class="op" id="7970465">.</span><span class="ident" id="7970466">Rect</span><span class="op" id="7970470">(</span><span class="num" id="7970471">5</span><span class="op" id="7970472">,</span>&nbsp;<span class="num" id="7970474">5</span><span class="op" id="7970475">,</span>&nbsp;<span class="num" id="7970477">10</span><span class="op" id="7970479">,</span>&nbsp;<span class="num" id="7970481">10</span><span class="op" id="7970483">)</span><span class="op" id="7970484">)</span><span class="op" id="7970485">.</span><span class="op" id="7970486">(</span><span class="op" id="7970487">*</span><span class="ident" id="7970488">image</span><span class="op" id="7970493">.</span><span class="ident" id="7970494">RGBA</span><span class="op" id="7970498">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970504">src</span>&nbsp;<span class="op" id="7970508">:=</span>&nbsp;<span class="ident" id="7970511">m</span><span class="op" id="7970512">.</span><span class="ident" id="7970513">SubImage</span><span class="op" id="7970521">(</span><span class="ident" id="7970522">image</span><span class="op" id="7970527">.</span><span class="ident" id="7970528">Rect</span><span class="op" id="7970532">(</span><span class="num" id="7970533">5</span><span class="op" id="7970534">+</span><span class="ident" id="7970535">xoff</span><span class="op" id="7970539">,</span>&nbsp;<span class="num" id="7970541">5</span><span class="op" id="7970542">+</span><span class="ident" id="7970543">yoff</span><span class="op" id="7970547">,</span>&nbsp;<span class="num" id="7970549">10</span><span class="op" id="7970551">+</span><span class="ident" id="7970552">xoff</span><span class="op" id="7970556">,</span>&nbsp;<span class="num" id="7970558">10</span><span class="op" id="7970560">+</span><span class="ident" id="7970561">yoff</span><span class="op" id="7970565">)</span><span class="op" id="7970566">)</span><span class="op" id="7970567">.</span><span class="op" id="7970568">(</span><span class="op" id="7970569">*</span><span class="ident" id="7970570">image</span><span class="op" id="7970575">.</span><span class="ident" id="7970576">RGBA</span><span class="op" id="7970580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970586">b</span>&nbsp;<span class="op" id="7970588">:=</span>&nbsp;<span class="ident" id="7970591">dst</span><span class="op" id="7970594">.</span><span class="ident" id="7970595">Bounds</span><span class="op" id="7970601">(</span><span class="op" id="7970602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7970608">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970710">golden</span>&nbsp;<span class="op" id="7970717">:=</span>&nbsp;<span class="ident" id="7970720">makeGolden</span><span class="op" id="7970730">(</span><span class="ident" id="7970731">dst</span><span class="op" id="7970734">,</span>&nbsp;<span class="ident" id="7970736">b</span><span class="op" id="7970737">,</span>&nbsp;<span class="ident" id="7970739">src</span><span class="op" id="7970742">,</span>&nbsp;<span class="ident" id="7970744">src</span><span class="op" id="7970747">.</span><span class="ident" id="7970748">Bounds</span><span class="op" id="7970754">(</span><span class="op" id="7970755">)</span><span class="op" id="7970756">.</span><span class="ident" id="7970757">Min</span><span class="op" id="7970760">,</span>&nbsp;<span class="ident" id="7970762">nil</span><span class="op" id="7970765">,</span>&nbsp;<span class="ident" id="7970767">image</span><span class="op" id="7970772">.</span><span class="ident" id="7970773">ZP</span><span class="op" id="7970775">,</span>&nbsp;<span class="ident" id="7970777">op</span><span class="op" id="7970779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970785">if</span>&nbsp;<span class="op" id="7970788">!</span><span class="ident" id="7970789">b</span><span class="op" id="7970790">.</span><span class="ident" id="7970791">Eq</span><span class="op" id="7970793">(</span><span class="ident" id="7970794">golden</span><span class="op" id="7970800">.</span><span class="ident" id="7970801">Bounds</span><span class="op" id="7970807">(</span><span class="op" id="7970808">)</span><span class="op" id="7970809">)</span>&nbsp;<span class="op" id="7970811">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970818">t</span><span class="op" id="7970819">.</span><span class="ident" id="7970820">Errorf</span><span class="op" id="7970826">(</span><span class="string" id="7970827">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7970877">,</span>&nbsp;<span class="ident" id="7970879">xoff</span><span class="op" id="7970883">,</span>&nbsp;<span class="ident" id="7970885">yoff</span><span class="op" id="7970889">,</span>&nbsp;<span class="ident" id="7970891">dst</span><span class="op" id="7970894">.</span><span class="ident" id="7970895">Bounds</span><span class="op" id="7970901">(</span><span class="op" id="7970902">)</span><span class="op" id="7970903">,</span>&nbsp;<span class="ident" id="7970905">golden</span><span class="op" id="7970911">.</span><span class="ident" id="7970912">Bounds</span><span class="op" id="7970918">(</span><span class="op" id="7970919">)</span><span class="op" id="7970920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970927">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7970946">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971044">DrawMask</span><span class="op" id="7971052">(</span><span class="ident" id="7971053">dst</span><span class="op" id="7971056">,</span>&nbsp;<span class="ident" id="7971058">b</span><span class="op" id="7971059">,</span>&nbsp;<span class="ident" id="7971061">src</span><span class="op" id="7971064">,</span>&nbsp;<span class="ident" id="7971066">src</span><span class="op" id="7971069">.</span><span class="ident" id="7971070">Bounds</span><span class="op" id="7971076">(</span><span class="op" id="7971077">)</span><span class="op" id="7971078">.</span><span class="ident" id="7971079">Min</span><span class="op" id="7971082">,</span>&nbsp;<span class="ident" id="7971084">nil</span><span class="op" id="7971087">,</span>&nbsp;<span class="ident" id="7971089">image</span><span class="op" id="7971094">.</span><span class="ident" id="7971095">ZP</span><span class="op" id="7971097">,</span>&nbsp;<span class="ident" id="7971099">op</span><span class="op" id="7971101">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7971107">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971176">for</span>&nbsp;<span class="ident" id="7971180">y</span>&nbsp;<span class="op" id="7971182">:=</span>&nbsp;<span class="ident" id="7971185">b</span><span class="op" id="7971186">.</span><span class="ident" id="7971187">Min</span><span class="op" id="7971190">.</span><span class="ident" id="7971191">Y</span><span class="op" id="7971192">;</span>&nbsp;<span class="ident" id="7971194">y</span>&nbsp;<span class="op" id="7971196">&lt;</span>&nbsp;<span class="ident" id="7971198">b</span><span class="op" id="7971199">.</span><span class="ident" id="7971200">Max</span><span class="op" id="7971203">.</span><span class="ident" id="7971204">Y</span><span class="op" id="7971205">;</span>&nbsp;<span class="ident" id="7971207">y</span><span class="op" id="7971208">++</span>&nbsp;<span class="op" id="7971211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971218">for</span>&nbsp;<span class="ident" id="7971222">x</span>&nbsp;<span class="op" id="7971224">:=</span>&nbsp;<span class="ident" id="7971227">b</span><span class="op" id="7971228">.</span><span class="ident" id="7971229">Min</span><span class="op" id="7971232">.</span><span class="ident" id="7971233">X</span><span class="op" id="7971234">;</span>&nbsp;<span class="ident" id="7971236">x</span>&nbsp;<span class="op" id="7971238">&lt;</span>&nbsp;<span class="ident" id="7971240">b</span><span class="op" id="7971241">.</span><span class="ident" id="7971242">Max</span><span class="op" id="7971245">.</span><span class="ident" id="7971246">X</span><span class="op" id="7971247">;</span>&nbsp;<span class="ident" id="7971249">x</span><span class="op" id="7971250">++</span>&nbsp;<span class="op" id="7971253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971261">if</span>&nbsp;<span class="op" id="7971264">!</span><span class="ident" id="7971265">eq</span><span class="op" id="7971267">(</span><span class="ident" id="7971268">dst</span><span class="op" id="7971271">.</span><span class="ident" id="7971272">At</span><span class="op" id="7971274">(</span><span class="ident" id="7971275">x</span><span class="op" id="7971276">,</span>&nbsp;<span class="ident" id="7971278">y</span><span class="op" id="7971279">)</span><span class="op" id="7971280">,</span>&nbsp;<span class="ident" id="7971282">golden</span><span class="op" id="7971288">.</span><span class="ident" id="7971289">At</span><span class="op" id="7971291">(</span><span class="ident" id="7971292">x</span><span class="op" id="7971293">,</span>&nbsp;<span class="ident" id="7971295">y</span><span class="op" id="7971296">)</span><span class="op" id="7971297">)</span>&nbsp;<span class="op" id="7971299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971308">t</span><span class="op" id="7971309">.</span><span class="ident" id="7971310">Errorf</span><span class="op" id="7971316">(</span><span class="string" id="7971317">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="7971380">,</span>&nbsp;<span class="ident" id="7971382">xoff</span><span class="op" id="7971386">,</span>&nbsp;<span class="ident" id="7971388">yoff</span><span class="op" id="7971392">,</span>&nbsp;<span class="ident" id="7971394">x</span><span class="op" id="7971395">,</span>&nbsp;<span class="ident" id="7971397">y</span><span class="op" id="7971398">,</span>&nbsp;<span class="ident" id="7971400">dst</span><span class="op" id="7971403">.</span><span class="ident" id="7971404">At</span><span class="op" id="7971406">(</span><span class="ident" id="7971407">x</span><span class="op" id="7971408">,</span>&nbsp;<span class="ident" id="7971410">y</span><span class="op" id="7971411">)</span><span class="op" id="7971412">,</span>&nbsp;<span class="ident" id="7971414">golden</span><span class="op" id="7971420">.</span><span class="ident" id="7971421">At</span><span class="op" id="7971423">(</span><span class="ident" id="7971424">x</span><span class="op" id="7971425">,</span>&nbsp;<span class="ident" id="7971427">y</span><span class="op" id="7971428">)</span><span class="op" id="7971429">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971438">continue</span>&nbsp;<span class="ident" id="7971447">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971476">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971483">}</span><br>
<span class="lineno"></span><span class="op" id="7971485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7971488">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="7971560">func</span>&nbsp;<span class="ident" id="7971565">TestNonZeroSrcPt</span><span class="op" id="7971581">(</span><span class="ident" id="7971582">t</span>&nbsp;<span class="op" id="7971584">*</span><span class="ident" id="7971585">testing</span><span class="op" id="7971592">.</span><span class="ident" id="7971593">T</span><span class="op" id="7971594">)</span>&nbsp;<span class="op" id="7971596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971599">a</span>&nbsp;<span class="op" id="7971601">:=</span>&nbsp;<span class="ident" id="7971604">image</span><span class="op" id="7971609">.</span><span class="ident" id="7971610">NewRGBA</span><span class="op" id="7971617">(</span><span class="ident" id="7971618">image</span><span class="op" id="7971623">.</span><span class="ident" id="7971624">Rect</span><span class="op" id="7971628">(</span><span class="num" id="7971629">0</span><span class="op" id="7971630">,</span>&nbsp;<span class="num" id="7971632">0</span><span class="op" id="7971633">,</span>&nbsp;<span class="num" id="7971635">1</span><span class="op" id="7971636">,</span>&nbsp;<span class="num" id="7971638">1</span><span class="op" id="7971639">)</span><span class="op" id="7971640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971643">b</span>&nbsp;<span class="op" id="7971645">:=</span>&nbsp;<span class="ident" id="7971648">image</span><span class="op" id="7971653">.</span><span class="ident" id="7971654">NewRGBA</span><span class="op" id="7971661">(</span><span class="ident" id="7971662">image</span><span class="op" id="7971667">.</span><span class="ident" id="7971668">Rect</span><span class="op" id="7971672">(</span><span class="num" id="7971673">0</span><span class="op" id="7971674">,</span>&nbsp;<span class="num" id="7971676">0</span><span class="op" id="7971677">,</span>&nbsp;<span class="num" id="7971679">2</span><span class="op" id="7971680">,</span>&nbsp;<span class="num" id="7971682">2</span><span class="op" id="7971683">)</span><span class="op" id="7971684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971687">b</span><span class="op" id="7971688">.</span><span class="ident" id="7971689">Set</span><span class="op" id="7971692">(</span><span class="num" id="7971693">0</span><span class="op" id="7971694">,</span>&nbsp;<span class="num" id="7971696">0</span><span class="op" id="7971697">,</span>&nbsp;<span class="ident" id="7971699">color</span><span class="op" id="7971704">.</span><span class="ident" id="7971705">RGBA</span><span class="op" id="7971709">{</span><span class="num" id="7971710">0</span><span class="op" id="7971711">,</span>&nbsp;<span class="num" id="7971713">0</span><span class="op" id="7971714">,</span>&nbsp;<span class="num" id="7971716">0</span><span class="op" id="7971717">,</span>&nbsp;<span class="num" id="7971719">5</span><span class="op" id="7971720">}</span><span class="op" id="7971721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971724">b</span><span class="op" id="7971725">.</span><span class="ident" id="7971726">Set</span><span class="op" id="7971729">(</span><span class="num" id="7971730">1</span><span class="op" id="7971731">,</span>&nbsp;<span class="num" id="7971733">0</span><span class="op" id="7971734">,</span>&nbsp;<span class="ident" id="7971736">color</span><span class="op" id="7971741">.</span><span class="ident" id="7971742">RGBA</span><span class="op" id="7971746">{</span><span class="num" id="7971747">0</span><span class="op" id="7971748">,</span>&nbsp;<span class="num" id="7971750">0</span><span class="op" id="7971751">,</span>&nbsp;<span class="num" id="7971753">5</span><span class="op" id="7971754">,</span>&nbsp;<span class="num" id="7971756">5</span><span class="op" id="7971757">}</span><span class="op" id="7971758">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971761">b</span><span class="op" id="7971762">.</span><span class="ident" id="7971763">Set</span><span class="op" id="7971766">(</span><span class="num" id="7971767">0</span><span class="op" id="7971768">,</span>&nbsp;<span class="num" id="7971770">1</span><span class="op" id="7971771">,</span>&nbsp;<span class="ident" id="7971773">color</span><span class="op" id="7971778">.</span><span class="ident" id="7971779">RGBA</span><span class="op" id="7971783">{</span><span class="num" id="7971784">0</span><span class="op" id="7971785">,</span>&nbsp;<span class="num" id="7971787">5</span><span class="op" id="7971788">,</span>&nbsp;<span class="num" id="7971790">0</span><span class="op" id="7971791">,</span>&nbsp;<span class="num" id="7971793">5</span><span class="op" id="7971794">}</span><span class="op" id="7971795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971798">b</span><span class="op" id="7971799">.</span><span class="ident" id="7971800">Set</span><span class="op" id="7971803">(</span><span class="num" id="7971804">1</span><span class="op" id="7971805">,</span>&nbsp;<span class="num" id="7971807">1</span><span class="op" id="7971808">,</span>&nbsp;<span class="ident" id="7971810">color</span><span class="op" id="7971815">.</span><span class="ident" id="7971816">RGBA</span><span class="op" id="7971820">{</span><span class="num" id="7971821">5</span><span class="op" id="7971822">,</span>&nbsp;<span class="num" id="7971824">0</span><span class="op" id="7971825">,</span>&nbsp;<span class="num" id="7971827">0</span><span class="op" id="7971828">,</span>&nbsp;<span class="num" id="7971830">5</span><span class="op" id="7971831">}</span><span class="op" id="7971832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971835">Draw</span><span class="op" id="7971839">(</span><span class="ident" id="7971840">a</span><span class="op" id="7971841">,</span>&nbsp;<span class="ident" id="7971843">image</span><span class="op" id="7971848">.</span><span class="ident" id="7971849">Rect</span><span class="op" id="7971853">(</span><span class="num" id="7971854">0</span><span class="op" id="7971855">,</span>&nbsp;<span class="num" id="7971857">0</span><span class="op" id="7971858">,</span>&nbsp;<span class="num" id="7971860">1</span><span class="op" id="7971861">,</span>&nbsp;<span class="num" id="7971863">1</span><span class="op" id="7971864">)</span><span class="op" id="7971865">,</span>&nbsp;<span class="ident" id="7971867">b</span><span class="op" id="7971868">,</span>&nbsp;<span class="ident" id="7971870">image</span><span class="op" id="7971875">.</span><span class="ident" id="7971876">Pt</span><span class="op" id="7971878">(</span><span class="num" id="7971879">1</span><span class="op" id="7971880">,</span>&nbsp;<span class="num" id="7971882">1</span><span class="op" id="7971883">)</span><span class="op" id="7971884">,</span>&nbsp;<span class="ident" id="7971886">Over</span><span class="op" id="7971890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971893">if</span>&nbsp;<span class="op" id="7971896">!</span><span class="ident" id="7971897">eq</span><span class="op" id="7971899">(</span><span class="ident" id="7971900">color</span><span class="op" id="7971905">.</span><span class="ident" id="7971906">RGBA</span><span class="op" id="7971910">{</span><span class="num" id="7971911">5</span><span class="op" id="7971912">,</span>&nbsp;<span class="num" id="7971914">0</span><span class="op" id="7971915">,</span>&nbsp;<span class="num" id="7971917">0</span><span class="op" id="7971918">,</span>&nbsp;<span class="num" id="7971920">5</span><span class="op" id="7971921">}</span><span class="op" id="7971922">,</span>&nbsp;<span class="ident" id="7971924">a</span><span class="op" id="7971925">.</span><span class="ident" id="7971926">At</span><span class="op" id="7971928">(</span><span class="num" id="7971929">0</span><span class="op" id="7971930">,</span>&nbsp;<span class="num" id="7971932">0</span><span class="op" id="7971933">)</span><span class="op" id="7971934">)</span>&nbsp;<span class="op" id="7971936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971940">t</span><span class="op" id="7971941">.</span><span class="ident" id="7971942">Errorf</span><span class="op" id="7971948">(</span><span class="string" id="7971949">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7971982">,</span>&nbsp;<span class="ident" id="7971984">color</span><span class="op" id="7971989">.</span><span class="ident" id="7971990">RGBA</span><span class="op" id="7971994">{</span><span class="num" id="7971995">5</span><span class="op" id="7971996">,</span>&nbsp;<span class="num" id="7971998">0</span><span class="op" id="7971999">,</span>&nbsp;<span class="num" id="7972001">0</span><span class="op" id="7972002">,</span>&nbsp;<span class="num" id="7972004">5</span><span class="op" id="7972005">}</span><span class="op" id="7972006">,</span>&nbsp;<span class="ident" id="7972008">a</span><span class="op" id="7972009">.</span><span class="ident" id="7972010">At</span><span class="op" id="7972012">(</span><span class="num" id="7972013">0</span><span class="op" id="7972014">,</span>&nbsp;<span class="num" id="7972016">0</span><span class="op" id="7972017">)</span><span class="op" id="7972018">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972021">}</span><br>
<span class="lineno"></span><span class="op" id="7972023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7972026">func</span>&nbsp;<span class="ident" id="7972031">TestFill</span><span class="op" id="7972039">(</span><span class="ident" id="7972040">t</span>&nbsp;<span class="op" id="7972042">*</span><span class="ident" id="7972043">testing</span><span class="op" id="7972050">.</span><span class="ident" id="7972051">T</span><span class="op" id="7972052">)</span>&nbsp;<span class="op" id="7972054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972057">rr</span>&nbsp;<span class="op" id="7972060">:=</span>&nbsp;<span class="op" id="7972063">[</span><span class="op" id="7972064">]</span><span class="ident" id="7972065">image</span><span class="op" id="7972070">.</span><span class="ident" id="7972071">Rectangle</span><span class="op" id="7972080">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972084">image</span><span class="op" id="7972089">.</span><span class="ident" id="7972090">Rect</span><span class="op" id="7972094">(</span><span class="num" id="7972095">0</span><span class="op" id="7972096">,</span>&nbsp;<span class="num" id="7972098">0</span><span class="op" id="7972099">,</span>&nbsp;<span class="num" id="7972101">0</span><span class="op" id="7972102">,</span>&nbsp;<span class="num" id="7972104">0</span><span class="op" id="7972105">)</span><span class="op" id="7972106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972110">image</span><span class="op" id="7972115">.</span><span class="ident" id="7972116">Rect</span><span class="op" id="7972120">(</span><span class="num" id="7972121">0</span><span class="op" id="7972122">,</span>&nbsp;<span class="num" id="7972124">0</span><span class="op" id="7972125">,</span>&nbsp;<span class="num" id="7972127">40</span><span class="op" id="7972129">,</span>&nbsp;<span class="num" id="7972131">30</span><span class="op" id="7972133">)</span><span class="op" id="7972134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972138">image</span><span class="op" id="7972143">.</span><span class="ident" id="7972144">Rect</span><span class="op" id="7972148">(</span><span class="num" id="7972149">10</span><span class="op" id="7972151">,</span>&nbsp;<span class="num" id="7972153">0</span><span class="op" id="7972154">,</span>&nbsp;<span class="num" id="7972156">40</span><span class="op" id="7972158">,</span>&nbsp;<span class="num" id="7972160">30</span><span class="op" id="7972162">)</span><span class="op" id="7972163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972167">image</span><span class="op" id="7972172">.</span><span class="ident" id="7972173">Rect</span><span class="op" id="7972177">(</span><span class="num" id="7972178">0</span><span class="op" id="7972179">,</span>&nbsp;<span class="num" id="7972181">20</span><span class="op" id="7972183">,</span>&nbsp;<span class="num" id="7972185">40</span><span class="op" id="7972187">,</span>&nbsp;<span class="num" id="7972189">30</span><span class="op" id="7972191">)</span><span class="op" id="7972192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972196">image</span><span class="op" id="7972201">.</span><span class="ident" id="7972202">Rect</span><span class="op" id="7972206">(</span><span class="num" id="7972207">10</span><span class="op" id="7972209">,</span>&nbsp;<span class="num" id="7972211">20</span><span class="op" id="7972213">,</span>&nbsp;<span class="num" id="7972215">40</span><span class="op" id="7972217">,</span>&nbsp;<span class="num" id="7972219">30</span><span class="op" id="7972221">)</span><span class="op" id="7972222">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972226">image</span><span class="op" id="7972231">.</span><span class="ident" id="7972232">Rect</span><span class="op" id="7972236">(</span><span class="num" id="7972237">10</span><span class="op" id="7972239">,</span>&nbsp;<span class="num" id="7972241">20</span><span class="op" id="7972243">,</span>&nbsp;<span class="num" id="7972245">15</span><span class="op" id="7972247">,</span>&nbsp;<span class="num" id="7972249">25</span><span class="op" id="7972251">)</span><span class="op" id="7972252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972256">image</span><span class="op" id="7972261">.</span><span class="ident" id="7972262">Rect</span><span class="op" id="7972266">(</span><span class="num" id="7972267">10</span><span class="op" id="7972269">,</span>&nbsp;<span class="num" id="7972271">0</span><span class="op" id="7972272">,</span>&nbsp;<span class="num" id="7972274">35</span><span class="op" id="7972276">,</span>&nbsp;<span class="num" id="7972278">30</span><span class="op" id="7972280">)</span><span class="op" id="7972281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972285">image</span><span class="op" id="7972290">.</span><span class="ident" id="7972291">Rect</span><span class="op" id="7972295">(</span><span class="num" id="7972296">0</span><span class="op" id="7972297">,</span>&nbsp;<span class="num" id="7972299">15</span><span class="op" id="7972301">,</span>&nbsp;<span class="num" id="7972303">40</span><span class="op" id="7972305">,</span>&nbsp;<span class="num" id="7972307">16</span><span class="op" id="7972309">)</span><span class="op" id="7972310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972314">image</span><span class="op" id="7972319">.</span><span class="ident" id="7972320">Rect</span><span class="op" id="7972324">(</span><span class="num" id="7972325">24</span><span class="op" id="7972327">,</span>&nbsp;<span class="num" id="7972329">24</span><span class="op" id="7972331">,</span>&nbsp;<span class="num" id="7972333">25</span><span class="op" id="7972335">,</span>&nbsp;<span class="num" id="7972337">25</span><span class="op" id="7972339">)</span><span class="op" id="7972340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972344">image</span><span class="op" id="7972349">.</span><span class="ident" id="7972350">Rect</span><span class="op" id="7972354">(</span><span class="num" id="7972355">23</span><span class="op" id="7972357">,</span>&nbsp;<span class="num" id="7972359">23</span><span class="op" id="7972361">,</span>&nbsp;<span class="num" id="7972363">26</span><span class="op" id="7972365">,</span>&nbsp;<span class="num" id="7972367">26</span><span class="op" id="7972369">)</span><span class="op" id="7972370">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972374">image</span><span class="op" id="7972379">.</span><span class="ident" id="7972380">Rect</span><span class="op" id="7972384">(</span><span class="num" id="7972385">22</span><span class="op" id="7972387">,</span>&nbsp;<span class="num" id="7972389">22</span><span class="op" id="7972391">,</span>&nbsp;<span class="num" id="7972393">27</span><span class="op" id="7972395">,</span>&nbsp;<span class="num" id="7972397">27</span><span class="op" id="7972399">)</span><span class="op" id="7972400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972404">image</span><span class="op" id="7972409">.</span><span class="ident" id="7972410">Rect</span><span class="op" id="7972414">(</span><span class="num" id="7972415">21</span><span class="op" id="7972417">,</span>&nbsp;<span class="num" id="7972419">21</span><span class="op" id="7972421">,</span>&nbsp;<span class="num" id="7972423">28</span><span class="op" id="7972425">,</span>&nbsp;<span class="num" id="7972427">28</span><span class="op" id="7972429">)</span><span class="op" id="7972430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972434">image</span><span class="op" id="7972439">.</span><span class="ident" id="7972440">Rect</span><span class="op" id="7972444">(</span><span class="num" id="7972445">20</span><span class="op" id="7972447">,</span>&nbsp;<span class="num" id="7972449">20</span><span class="op" id="7972451">,</span>&nbsp;<span class="num" id="7972453">29</span><span class="op" id="7972455">,</span>&nbsp;<span class="num" id="7972457">29</span><span class="op" id="7972459">)</span><span class="op" id="7972460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972466">for</span>&nbsp;<span class="ident" id="7972470">_</span><span class="op" id="7972471">,</span>&nbsp;<span class="ident" id="7972473">r</span>&nbsp;<span class="op" id="7972475">:=</span>&nbsp;<span class="keyword" id="7972478">range</span>&nbsp;<span class="ident" id="7972484">rr</span>&nbsp;<span class="op" id="7972487">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972491">m</span>&nbsp;<span class="op" id="7972493">:=</span>&nbsp;<span class="ident" id="7972496">image</span><span class="op" id="7972501">.</span><span class="ident" id="7972502">NewRGBA</span><span class="op" id="7972509">(</span><span class="ident" id="7972510">image</span><span class="op" id="7972515">.</span><span class="ident" id="7972516">Rect</span><span class="op" id="7972520">(</span><span class="num" id="7972521">0</span><span class="op" id="7972522">,</span>&nbsp;<span class="num" id="7972524">0</span><span class="op" id="7972525">,</span>&nbsp;<span class="num" id="7972527">40</span><span class="op" id="7972529">,</span>&nbsp;<span class="num" id="7972531">30</span><span class="op" id="7972533">)</span><span class="op" id="7972534">)</span><span class="op" id="7972535">.</span><span class="ident" id="7972536">SubImage</span><span class="op" id="7972544">(</span><span class="ident" id="7972545">r</span><span class="op" id="7972546">)</span><span class="op" id="7972547">.</span><span class="op" id="7972548">(</span><span class="op" id="7972549">*</span><span class="ident" id="7972550">image</span><span class="op" id="7972555">.</span><span class="ident" id="7972556">RGBA</span><span class="op" id="7972560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972564">b</span>&nbsp;<span class="op" id="7972566">:=</span>&nbsp;<span class="ident" id="7972569">m</span><span class="op" id="7972570">.</span><span class="ident" id="7972571">Bounds</span><span class="op" id="7972577">(</span><span class="op" id="7972578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972582">c</span>&nbsp;<span class="op" id="7972584">:=</span>&nbsp;<span class="ident" id="7972587">color</span><span class="op" id="7972592">.</span><span class="ident" id="7972593">RGBA</span><span class="op" id="7972597">{</span><span class="num" id="7972598">11</span><span class="op" id="7972600">,</span>&nbsp;<span class="num" id="7972602">0</span><span class="op" id="7972603">,</span>&nbsp;<span class="num" id="7972605">0</span><span class="op" id="7972606">,</span>&nbsp;<span class="num" id="7972608">255</span><span class="op" id="7972611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972615">src</span>&nbsp;<span class="op" id="7972619">:=</span>&nbsp;<span class="op" id="7972622">&amp;</span><span class="ident" id="7972623">image</span><span class="op" id="7972628">.</span><span class="ident" id="7972629">Uniform</span><span class="op" id="7972636">{</span><span class="ident" id="7972637">C</span><span class="op" id="7972638">:</span>&nbsp;<span class="ident" id="7972640">c</span><span class="op" id="7972641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972645">check</span>&nbsp;<span class="op" id="7972651">:=</span>&nbsp;<span class="keyword" id="7972654">func</span><span class="op" id="7972658">(</span><span class="ident" id="7972659">desc</span>&nbsp;<span class="builtintype" id="7972664">string</span><span class="op" id="7972670">)</span>&nbsp;<span class="op" id="7972672">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972677">for</span>&nbsp;<span class="ident" id="7972681">y</span>&nbsp;<span class="op" id="7972683">:=</span>&nbsp;<span class="ident" id="7972686">b</span><span class="op" id="7972687">.</span><span class="ident" id="7972688">Min</span><span class="op" id="7972691">.</span><span class="ident" id="7972692">Y</span><span class="op" id="7972693">;</span>&nbsp;<span class="ident" id="7972695">y</span>&nbsp;<span class="op" id="7972697">&lt;</span>&nbsp;<span class="ident" id="7972699">b</span><span class="op" id="7972700">.</span><span class="ident" id="7972701">Max</span><span class="op" id="7972704">.</span><span class="ident" id="7972705">Y</span><span class="op" id="7972706">;</span>&nbsp;<span class="ident" id="7972708">y</span><span class="op" id="7972709">++</span>&nbsp;<span class="op" id="7972712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972718">for</span>&nbsp;<span class="ident" id="7972722">x</span>&nbsp;<span class="op" id="7972724">:=</span>&nbsp;<span class="ident" id="7972727">b</span><span class="op" id="7972728">.</span><span class="ident" id="7972729">Min</span><span class="op" id="7972732">.</span><span class="ident" id="7972733">X</span><span class="op" id="7972734">;</span>&nbsp;<span class="ident" id="7972736">x</span>&nbsp;<span class="op" id="7972738">&lt;</span>&nbsp;<span class="ident" id="7972740">b</span><span class="op" id="7972741">.</span><span class="ident" id="7972742">Max</span><span class="op" id="7972745">.</span><span class="ident" id="7972746">X</span><span class="op" id="7972747">;</span>&nbsp;<span class="ident" id="7972749">x</span><span class="op" id="7972750">++</span>&nbsp;<span class="op" id="7972753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972760">if</span>&nbsp;<span class="op" id="7972763">!</span><span class="ident" id="7972764">eq</span><span class="op" id="7972766">(</span><span class="ident" id="7972767">c</span><span class="op" id="7972768">,</span>&nbsp;<span class="ident" id="7972770">m</span><span class="op" id="7972771">.</span><span class="ident" id="7972772">At</span><span class="op" id="7972774">(</span><span class="ident" id="7972775">x</span><span class="op" id="7972776">,</span>&nbsp;<span class="ident" id="7972778">y</span><span class="op" id="7972779">)</span><span class="op" id="7972780">)</span>&nbsp;<span class="op" id="7972782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972790">t</span><span class="op" id="7972791">.</span><span class="ident" id="7972792">Errorf</span><span class="op" id="7972798">(</span><span class="string" id="7972799">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7972858">,</span>&nbsp;<span class="ident" id="7972860">desc</span><span class="op" id="7972864">,</span>&nbsp;<span class="ident" id="7972866">x</span><span class="op" id="7972867">,</span>&nbsp;<span class="ident" id="7972869">y</span><span class="op" id="7972870">,</span>&nbsp;<span class="ident" id="7972872">r</span><span class="op" id="7972873">,</span>&nbsp;<span class="ident" id="7972875">c</span><span class="op" id="7972876">,</span>&nbsp;<span class="ident" id="7972878">m</span><span class="op" id="7972879">.</span><span class="ident" id="7972880">At</span><span class="op" id="7972882">(</span><span class="ident" id="7972883">x</span><span class="op" id="7972884">,</span>&nbsp;<span class="ident" id="7972886">y</span><span class="op" id="7972887">)</span><span class="op" id="7972888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972896">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7972927">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972956">for</span>&nbsp;<span class="ident" id="7972960">y</span>&nbsp;<span class="op" id="7972962">:=</span>&nbsp;<span class="ident" id="7972965">b</span><span class="op" id="7972966">.</span><span class="ident" id="7972967">Min</span><span class="op" id="7972970">.</span><span class="ident" id="7972971">Y</span><span class="op" id="7972972">;</span>&nbsp;<span class="ident" id="7972974">y</span>&nbsp;<span class="op" id="7972976">&lt;</span>&nbsp;<span class="ident" id="7972978">b</span><span class="op" id="7972979">.</span><span class="ident" id="7972980">Max</span><span class="op" id="7972983">.</span><span class="ident" id="7972984">Y</span><span class="op" id="7972985">;</span>&nbsp;<span class="ident" id="7972987">y</span><span class="op" id="7972988">++</span>&nbsp;<span class="op" id="7972991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972996">for</span>&nbsp;<span class="ident" id="7973000">x</span>&nbsp;<span class="op" id="7973002">:=</span>&nbsp;<span class="ident" id="7973005">b</span><span class="op" id="7973006">.</span><span class="ident" id="7973007">Min</span><span class="op" id="7973010">.</span><span class="ident" id="7973011">X</span><span class="op" id="7973012">;</span>&nbsp;<span class="ident" id="7973014">x</span>&nbsp;<span class="op" id="7973016">&lt;</span>&nbsp;<span class="ident" id="7973018">b</span><span class="op" id="7973019">.</span><span class="ident" id="7973020">Max</span><span class="op" id="7973023">.</span><span class="ident" id="7973024">X</span><span class="op" id="7973025">;</span>&nbsp;<span class="ident" id="7973027">x</span><span class="op" id="7973028">++</span>&nbsp;<span class="op" id="7973031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973037">DrawMask</span><span class="op" id="7973045">(</span><span class="ident" id="7973046">m</span><span class="op" id="7973047">,</span>&nbsp;<span class="ident" id="7973049">image</span><span class="op" id="7973054">.</span><span class="ident" id="7973055">Rect</span><span class="op" id="7973059">(</span><span class="ident" id="7973060">x</span><span class="op" id="7973061">,</span>&nbsp;<span class="ident" id="7973063">y</span><span class="op" id="7973064">,</span>&nbsp;<span class="ident" id="7973066">x</span><span class="op" id="7973067">+</span><span class="num" id="7973068">1</span><span class="op" id="7973069">,</span>&nbsp;<span class="ident" id="7973071">y</span><span class="op" id="7973072">+</span><span class="num" id="7973073">1</span><span class="op" id="7973074">)</span><span class="op" id="7973075">,</span>&nbsp;<span class="ident" id="7973077">src</span><span class="op" id="7973080">,</span>&nbsp;<span class="ident" id="7973082">image</span><span class="op" id="7973087">.</span><span class="ident" id="7973088">ZP</span><span class="op" id="7973090">,</span>&nbsp;<span class="ident" id="7973092">nil</span><span class="op" id="7973095">,</span>&nbsp;<span class="ident" id="7973097">image</span><span class="op" id="7973102">.</span><span class="ident" id="7973103">ZP</span><span class="op" id="7973105">,</span>&nbsp;<span class="ident" id="7973107">Src</span><span class="op" id="7973110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973119">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973123">check</span><span class="op" id="7973128">(</span><span class="string" id="7973129">&#34;pixel&#34;</span><span class="op" id="7973136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7973140">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973167">c</span>&nbsp;<span class="op" id="7973169">=</span>&nbsp;<span class="ident" id="7973171">color</span><span class="op" id="7973176">.</span><span class="ident" id="7973177">RGBA</span><span class="op" id="7973181">{</span><span class="num" id="7973182">0</span><span class="op" id="7973183">,</span>&nbsp;<span class="num" id="7973185">22</span><span class="op" id="7973187">,</span>&nbsp;<span class="num" id="7973189">0</span><span class="op" id="7973190">,</span>&nbsp;<span class="num" id="7973192">255</span><span class="op" id="7973195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973199">src</span>&nbsp;<span class="op" id="7973203">=</span>&nbsp;<span class="op" id="7973205">&amp;</span><span class="ident" id="7973206">image</span><span class="op" id="7973211">.</span><span class="ident" id="7973212">Uniform</span><span class="op" id="7973219">{</span><span class="ident" id="7973220">C</span><span class="op" id="7973221">:</span>&nbsp;<span class="ident" id="7973223">c</span><span class="op" id="7973224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973228">for</span>&nbsp;<span class="ident" id="7973232">y</span>&nbsp;<span class="op" id="7973234">:=</span>&nbsp;<span class="ident" id="7973237">b</span><span class="op" id="7973238">.</span><span class="ident" id="7973239">Min</span><span class="op" id="7973242">.</span><span class="ident" id="7973243">Y</span><span class="op" id="7973244">;</span>&nbsp;<span class="ident" id="7973246">y</span>&nbsp;<span class="op" id="7973248">&lt;</span>&nbsp;<span class="ident" id="7973250">b</span><span class="op" id="7973251">.</span><span class="ident" id="7973252">Max</span><span class="op" id="7973255">.</span><span class="ident" id="7973256">Y</span><span class="op" id="7973257">;</span>&nbsp;<span class="ident" id="7973259">y</span><span class="op" id="7973260">++</span>&nbsp;<span class="op" id="7973263">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973268">DrawMask</span><span class="op" id="7973276">(</span><span class="ident" id="7973277">m</span><span class="op" id="7973278">,</span>&nbsp;<span class="ident" id="7973280">image</span><span class="op" id="7973285">.</span><span class="ident" id="7973286">Rect</span><span class="op" id="7973290">(</span><span class="ident" id="7973291">b</span><span class="op" id="7973292">.</span><span class="ident" id="7973293">Min</span><span class="op" id="7973296">.</span><span class="ident" id="7973297">X</span><span class="op" id="7973298">,</span>&nbsp;<span class="ident" id="7973300">y</span><span class="op" id="7973301">,</span>&nbsp;<span class="ident" id="7973303">b</span><span class="op" id="7973304">.</span><span class="ident" id="7973305">Max</span><span class="op" id="7973308">.</span><span class="ident" id="7973309">X</span><span class="op" id="7973310">,</span>&nbsp;<span class="ident" id="7973312">y</span><span class="op" id="7973313">+</span><span class="num" id="7973314">1</span><span class="op" id="7973315">)</span><span class="op" id="7973316">,</span>&nbsp;<span class="ident" id="7973318">src</span><span class="op" id="7973321">,</span>&nbsp;<span class="ident" id="7973323">image</span><span class="op" id="7973328">.</span><span class="ident" id="7973329">ZP</span><span class="op" id="7973331">,</span>&nbsp;<span class="ident" id="7973333">nil</span><span class="op" id="7973336">,</span>&nbsp;<span class="ident" id="7973338">image</span><span class="op" id="7973343">.</span><span class="ident" id="7973344">ZP</span><span class="op" id="7973346">,</span>&nbsp;<span class="ident" id="7973348">Src</span><span class="op" id="7973351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973359">check</span><span class="op" id="7973364">(</span><span class="string" id="7973365">&#34;row&#34;</span><span class="op" id="7973370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7973374">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973404">c</span>&nbsp;<span class="op" id="7973406">=</span>&nbsp;<span class="ident" id="7973408">color</span><span class="op" id="7973413">.</span><span class="ident" id="7973414">RGBA</span><span class="op" id="7973418">{</span><span class="num" id="7973419">0</span><span class="op" id="7973420">,</span>&nbsp;<span class="num" id="7973422">0</span><span class="op" id="7973423">,</span>&nbsp;<span class="num" id="7973425">33</span><span class="op" id="7973427">,</span>&nbsp;<span class="num" id="7973429">255</span><span class="op" id="7973432">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973436">src</span>&nbsp;<span class="op" id="7973440">=</span>&nbsp;<span class="op" id="7973442">&amp;</span><span class="ident" id="7973443">image</span><span class="op" id="7973448">.</span><span class="ident" id="7973449">Uniform</span><span class="op" id="7973456">{</span><span class="ident" id="7973457">C</span><span class="op" id="7973458">:</span>&nbsp;<span class="ident" id="7973460">c</span><span class="op" id="7973461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973465">for</span>&nbsp;<span class="ident" id="7973469">x</span>&nbsp;<span class="op" id="7973471">:=</span>&nbsp;<span class="ident" id="7973474">b</span><span class="op" id="7973475">.</span><span class="ident" id="7973476">Min</span><span class="op" id="7973479">.</span><span class="ident" id="7973480">X</span><span class="op" id="7973481">;</span>&nbsp;<span class="ident" id="7973483">x</span>&nbsp;<span class="op" id="7973485">&lt;</span>&nbsp;<span class="ident" id="7973487">b</span><span class="op" id="7973488">.</span><span class="ident" id="7973489">Max</span><span class="op" id="7973492">.</span><span class="ident" id="7973493">X</span><span class="op" id="7973494">;</span>&nbsp;<span class="ident" id="7973496">x</span><span class="op" id="7973497">++</span>&nbsp;<span class="op" id="7973500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973505">DrawMask</span><span class="op" id="7973513">(</span><span class="ident" id="7973514">m</span><span class="op" id="7973515">,</span>&nbsp;<span class="ident" id="7973517">image</span><span class="op" id="7973522">.</span><span class="ident" id="7973523">Rect</span><span class="op" id="7973527">(</span><span class="ident" id="7973528">x</span><span class="op" id="7973529">,</span>&nbsp;<span class="ident" id="7973531">b</span><span class="op" id="7973532">.</span><span class="ident" id="7973533">Min</span><span class="op" id="7973536">.</span><span class="ident" id="7973537">Y</span><span class="op" id="7973538">,</span>&nbsp;<span class="ident" id="7973540">x</span><span class="op" id="7973541">+</span><span class="num" id="7973542">1</span><span class="op" id="7973543">,</span>&nbsp;<span class="ident" id="7973545">b</span><span class="op" id="7973546">.</span><span class="ident" id="7973547">Max</span><span class="op" id="7973550">.</span><span class="ident" id="7973551">Y</span><span class="op" id="7973552">)</span><span class="op" id="7973553">,</span>&nbsp;<span class="ident" id="7973555">src</span><span class="op" id="7973558">,</span>&nbsp;<span class="ident" id="7973560">image</span><span class="op" id="7973565">.</span><span class="ident" id="7973566">ZP</span><span class="op" id="7973568">,</span>&nbsp;<span class="ident" id="7973570">nil</span><span class="op" id="7973573">,</span>&nbsp;<span class="ident" id="7973575">image</span><span class="op" id="7973580">.</span><span class="ident" id="7973581">ZP</span><span class="op" id="7973583">,</span>&nbsp;<span class="ident" id="7973585">Src</span><span class="op" id="7973588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973596">check</span><span class="op" id="7973601">(</span><span class="string" id="7973602">&#34;column&#34;</span><span class="op" id="7973610">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7973614">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973649">c</span>&nbsp;<span class="op" id="7973651">=</span>&nbsp;<span class="ident" id="7973653">color</span><span class="op" id="7973658">.</span><span class="ident" id="7973659">RGBA</span><span class="op" id="7973663">{</span><span class="num" id="7973664">44</span><span class="op" id="7973666">,</span>&nbsp;<span class="num" id="7973668">55</span><span class="op" id="7973670">,</span>&nbsp;<span class="num" id="7973672">66</span><span class="op" id="7973674">,</span>&nbsp;<span class="num" id="7973676">77</span><span class="op" id="7973678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973682">src</span>&nbsp;<span class="op" id="7973686">=</span>&nbsp;<span class="op" id="7973688">&amp;</span><span class="ident" id="7973689">image</span><span class="op" id="7973694">.</span><span class="ident" id="7973695">Uniform</span><span class="op" id="7973702">{</span><span class="ident" id="7973703">C</span><span class="op" id="7973704">:</span>&nbsp;<span class="ident" id="7973706">c</span><span class="op" id="7973707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973711">DrawMask</span><span class="op" id="7973719">(</span><span class="ident" id="7973720">m</span><span class="op" id="7973721">,</span>&nbsp;<span class="ident" id="7973723">b</span><span class="op" id="7973724">,</span>&nbsp;<span class="ident" id="7973726">src</span><span class="op" id="7973729">,</span>&nbsp;<span class="ident" id="7973731">image</span><span class="op" id="7973736">.</span><span class="ident" id="7973737">ZP</span><span class="op" id="7973739">,</span>&nbsp;<span class="ident" id="7973741">nil</span><span class="op" id="7973744">,</span>&nbsp;<span class="ident" id="7973746">image</span><span class="op" id="7973751">.</span><span class="ident" id="7973752">ZP</span><span class="op" id="7973754">,</span>&nbsp;<span class="ident" id="7973756">Src</span><span class="op" id="7973759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973763">check</span><span class="op" id="7973768">(</span><span class="string" id="7973769">&#34;whole&#34;</span><span class="op" id="7973776">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973779">}</span><br>
<span class="lineno"></span><span class="op" id="7973781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7973784">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="7973859">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="7973936">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="7973974">func</span>&nbsp;<span class="ident" id="7973979">TestFloydSteinbergCheckerboard</span><span class="op" id="7974009">(</span><span class="ident" id="7974010">t</span>&nbsp;<span class="op" id="7974012">*</span><span class="ident" id="7974013">testing</span><span class="op" id="7974020">.</span><span class="ident" id="7974021">T</span><span class="op" id="7974022">)</span>&nbsp;<span class="op" id="7974024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974027">b</span>&nbsp;<span class="op" id="7974029">:=</span>&nbsp;<span class="ident" id="7974032">image</span><span class="op" id="7974037">.</span><span class="ident" id="7974038">Rect</span><span class="op" id="7974042">(</span><span class="num" id="7974043">0</span><span class="op" id="7974044">,</span>&nbsp;<span class="num" id="7974046">0</span><span class="op" id="7974047">,</span>&nbsp;<span class="num" id="7974049">640</span><span class="op" id="7974052">,</span>&nbsp;<span class="num" id="7974054">480</span><span class="op" id="7974057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7974060">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974133">src</span>&nbsp;<span class="op" id="7974137">:=</span>&nbsp;<span class="op" id="7974140">&amp;</span><span class="ident" id="7974141">image</span><span class="op" id="7974146">.</span><span class="ident" id="7974147">Uniform</span><span class="op" id="7974154">{</span><span class="ident" id="7974155">color</span><span class="op" id="7974160">.</span><span class="ident" id="7974161">Gray16</span><span class="op" id="7974167">{</span><span class="num" id="7974168">0x7fff</span><span class="op" id="7974174">}</span><span class="op" id="7974175">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974178">dst</span>&nbsp;<span class="op" id="7974182">:=</span>&nbsp;<span class="ident" id="7974185">image</span><span class="op" id="7974190">.</span><span class="ident" id="7974191">NewPaletted</span><span class="op" id="7974202">(</span><span class="ident" id="7974203">b</span><span class="op" id="7974204">,</span>&nbsp;<span class="ident" id="7974206">color</span><span class="op" id="7974211">.</span><span class="ident" id="7974212">Palette</span><span class="op" id="7974219">{</span><span class="ident" id="7974220">color</span><span class="op" id="7974225">.</span><span class="ident" id="7974226">Black</span><span class="op" id="7974231">,</span>&nbsp;<span class="ident" id="7974233">color</span><span class="op" id="7974238">.</span><span class="ident" id="7974239">White</span><span class="op" id="7974244">}</span><span class="op" id="7974245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974248">FloydSteinberg</span><span class="op" id="7974262">.</span><span class="ident" id="7974263">Draw</span><span class="op" id="7974267">(</span><span class="ident" id="7974268">dst</span><span class="op" id="7974271">,</span>&nbsp;<span class="ident" id="7974273">b</span><span class="op" id="7974274">,</span>&nbsp;<span class="ident" id="7974276">src</span><span class="op" id="7974279">,</span>&nbsp;<span class="ident" id="7974281">image</span><span class="op" id="7974286">.</span><span class="ident" id="7974287">Point</span><span class="op" id="7974292">{</span><span class="op" id="7974293">}</span><span class="op" id="7974294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974297">nErr</span>&nbsp;<span class="op" id="7974302">:=</span>&nbsp;<span class="num" id="7974305">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974308">for</span>&nbsp;<span class="ident" id="7974312">y</span>&nbsp;<span class="op" id="7974314">:=</span>&nbsp;<span class="ident" id="7974317">b</span><span class="op" id="7974318">.</span><span class="ident" id="7974319">Min</span><span class="op" id="7974322">.</span><span class="ident" id="7974323">Y</span><span class="op" id="7974324">;</span>&nbsp;<span class="ident" id="7974326">y</span>&nbsp;<span class="op" id="7974328">&lt;</span>&nbsp;<span class="ident" id="7974330">b</span><span class="op" id="7974331">.</span><span class="ident" id="7974332">Max</span><span class="op" id="7974335">.</span><span class="ident" id="7974336">Y</span><span class="op" id="7974337">;</span>&nbsp;<span class="ident" id="7974339">y</span><span class="op" id="7974340">++</span>&nbsp;<span class="op" id="7974343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974347">for</span>&nbsp;<span class="ident" id="7974351">x</span>&nbsp;<span class="op" id="7974353">:=</span>&nbsp;<span class="ident" id="7974356">b</span><span class="op" id="7974357">.</span><span class="ident" id="7974358">Min</span><span class="op" id="7974361">.</span><span class="ident" id="7974362">X</span><span class="op" id="7974363">;</span>&nbsp;<span class="ident" id="7974365">x</span>&nbsp;<span class="op" id="7974367">&lt;</span>&nbsp;<span class="ident" id="7974369">b</span><span class="op" id="7974370">.</span><span class="ident" id="7974371">Max</span><span class="op" id="7974374">.</span><span class="ident" id="7974375">X</span><span class="op" id="7974376">;</span>&nbsp;<span class="ident" id="7974378">x</span><span class="op" id="7974379">++</span>&nbsp;<span class="op" id="7974382">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974387">got</span>&nbsp;<span class="op" id="7974391">:=</span>&nbsp;<span class="ident" id="7974394">dst</span><span class="op" id="7974397">.</span><span class="ident" id="7974398">Pix</span><span class="op" id="7974401">[</span><span class="ident" id="7974402">dst</span><span class="op" id="7974405">.</span><span class="ident" id="7974406">PixOffset</span><span class="op" id="7974415">(</span><span class="ident" id="7974416">x</span><span class="op" id="7974417">,</span>&nbsp;<span class="ident" id="7974419">y</span><span class="op" id="7974420">)</span><span class="op" id="7974421">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974426">want</span>&nbsp;<span class="op" id="7974431">:=</span>&nbsp;<span class="builtintype" id="7974434">uint8</span><span class="op" id="7974439">(</span><span class="ident" id="7974440">x</span><span class="op" id="7974441">+</span><span class="ident" id="7974442">y</span><span class="op" id="7974443">)</span>&nbsp;<span class="op" id="7974445">%</span>&nbsp;<span class="num" id="7974447">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974452">if</span>&nbsp;<span class="ident" id="7974455">got</span>&nbsp;<span class="op" id="7974459">!=</span>&nbsp;<span class="ident" id="7974462">want</span>&nbsp;<span class="op" id="7974467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974473">t</span><span class="op" id="7974474">.</span><span class="ident" id="7974475">Errorf</span><span class="op" id="7974481">(</span><span class="string" id="7974482">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7974512">,</span>&nbsp;<span class="ident" id="7974514">x</span><span class="op" id="7974515">,</span>&nbsp;<span class="ident" id="7974517">y</span><span class="op" id="7974518">,</span>&nbsp;<span class="ident" id="7974520">got</span><span class="op" id="7974523">,</span>&nbsp;<span class="ident" id="7974525">want</span><span class="op" id="7974529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974535">if</span>&nbsp;<span class="ident" id="7974538">nErr</span><span class="op" id="7974542">++</span><span class="op" id="7974544">;</span>&nbsp;<span class="ident" id="7974546">nErr</span>&nbsp;<span class="op" id="7974551">==</span>&nbsp;<span class="num" id="7974554">10</span>&nbsp;<span class="op" id="7974557">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974564">t</span><span class="op" id="7974565">.</span><span class="ident" id="7974566">Fatal</span><span class="op" id="7974571">(</span><span class="string" id="7974572">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="7974598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974616">}</span><br>
<span class="lineno">380</span><span class="op" id="7974618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7974621">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="7974700">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="7974732">type</span>&nbsp;<span class="ident" id="7974737">embeddedPaletted</span>&nbsp;<span class="keyword" id="7974754">struct</span>&nbsp;<span class="op" id="7974761">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974764">*</span><span class="ident" id="7974765">image</span><span class="op" id="7974770">.</span><span class="ident" id="7974771">Paletted</span><br>
<span class="lineno"></span><span class="op" id="7974780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7974783">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="7974853">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="7974905">func</span>&nbsp;<span class="ident" id="7974910">TestPaletted</span><span class="op" id="7974922">(</span><span class="ident" id="7974923">t</span>&nbsp;<span class="op" id="7974925">*</span><span class="ident" id="7974926">testing</span><span class="op" id="7974933">.</span><span class="ident" id="7974934">T</span><span class="op" id="7974935">)</span>&nbsp;<span class="op" id="7974937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974940">f</span><span class="op" id="7974941">,</span>&nbsp;<span class="ident" id="7974943">err</span>&nbsp;<span class="op" id="7974947">:=</span>&nbsp;<span class="ident" id="7974950">os</span><span class="op" id="7974952">.</span><span class="ident" id="7974953">Open</span><span class="op" id="7974957">(</span><span class="string" id="7974958">&#34;../testdata/video-001.png&#34;</span><span class="op" id="7974985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974988">if</span>&nbsp;<span class="ident" id="7974991">err</span>&nbsp;<span class="op" id="7974995">!=</span>&nbsp;<span class="ident" id="7974998">nil</span>&nbsp;<span class="op" id="7975002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975006">t</span><span class="op" id="7975007">.</span><span class="ident" id="7975008">Fatalf</span><span class="op" id="7975014">(</span><span class="string" id="7975015">&#34;open:&nbsp;%v&#34;</span><span class="op" id="7975025">,</span>&nbsp;<span class="ident" id="7975027">err</span><span class="op" id="7975030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975033">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975036">defer</span>&nbsp;<span class="ident" id="7975042">f</span><span class="op" id="7975043">.</span><span class="ident" id="7975044">Close</span><span class="op" id="7975049">(</span><span class="op" id="7975050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975053">src</span><span class="op" id="7975056">,</span>&nbsp;<span class="ident" id="7975058">err</span>&nbsp;<span class="op" id="7975062">:=</span>&nbsp;<span class="ident" id="7975065">png</span><span class="op" id="7975068">.</span><span class="ident" id="7975069">Decode</span><span class="op" id="7975075">(</span><span class="ident" id="7975076">f</span><span class="op" id="7975077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975080">if</span>&nbsp;<span class="ident" id="7975083">err</span>&nbsp;<span class="op" id="7975087">!=</span>&nbsp;<span class="ident" id="7975090">nil</span>&nbsp;<span class="op" id="7975094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975098">t</span><span class="op" id="7975099">.</span><span class="ident" id="7975100">Fatalf</span><span class="op" id="7975106">(</span><span class="string" id="7975107">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7975119">,</span>&nbsp;<span class="ident" id="7975121">err</span><span class="op" id="7975124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975127">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975130">b</span>&nbsp;<span class="op" id="7975132">:=</span>&nbsp;<span class="ident" id="7975135">src</span><span class="op" id="7975138">.</span><span class="ident" id="7975139">Bounds</span><span class="op" id="7975145">(</span><span class="op" id="7975146">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975150">cgaPalette</span>&nbsp;<span class="op" id="7975161">:=</span>&nbsp;<span class="ident" id="7975164">color</span><span class="op" id="7975169">.</span><span class="ident" id="7975170">Palette</span><span class="op" id="7975177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975181">color</span><span class="op" id="7975186">.</span><span class="ident" id="7975187">RGBA</span><span class="op" id="7975191">{</span><span class="num" id="7975192">0x00</span><span class="op" id="7975196">,</span>&nbsp;<span class="num" id="7975198">0x00</span><span class="op" id="7975202">,</span>&nbsp;<span class="num" id="7975204">0x00</span><span class="op" id="7975208">,</span>&nbsp;<span class="num" id="7975210">0xff</span><span class="op" id="7975214">}</span><span class="op" id="7975215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975219">color</span><span class="op" id="7975224">.</span><span class="ident" id="7975225">RGBA</span><span class="op" id="7975229">{</span><span class="num" id="7975230">0x55</span><span class="op" id="7975234">,</span>&nbsp;<span class="num" id="7975236">0xff</span><span class="op" id="7975240">,</span>&nbsp;<span class="num" id="7975242">0xff</span><span class="op" id="7975246">,</span>&nbsp;<span class="num" id="7975248">0xff</span><span class="op" id="7975252">}</span><span class="op" id="7975253">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975257">color</span><span class="op" id="7975262">.</span><span class="ident" id="7975263">RGBA</span><span class="op" id="7975267">{</span><span class="num" id="7975268">0xff</span><span class="op" id="7975272">,</span>&nbsp;<span class="num" id="7975274">0x55</span><span class="op" id="7975278">,</span>&nbsp;<span class="num" id="7975280">0xff</span><span class="op" id="7975284">,</span>&nbsp;<span class="num" id="7975286">0xff</span><span class="op" id="7975290">}</span><span class="op" id="7975291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975295">color</span><span class="op" id="7975300">.</span><span class="ident" id="7975301">RGBA</span><span class="op" id="7975305">{</span><span class="num" id="7975306">0xff</span><span class="op" id="7975310">,</span>&nbsp;<span class="num" id="7975312">0xff</span><span class="op" id="7975316">,</span>&nbsp;<span class="num" id="7975318">0xff</span><span class="op" id="7975322">,</span>&nbsp;<span class="num" id="7975324">0xff</span><span class="op" id="7975328">}</span><span class="op" id="7975329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975335">drawers</span>&nbsp;<span class="op" id="7975343">:=</span>&nbsp;<span class="keyword" id="7975346">map</span><span class="op" id="7975349">[</span><span class="builtintype" id="7975350">string</span><span class="op" id="7975356">]</span><span class="ident" id="7975357">Drawer</span><span class="op" id="7975363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7975367">&#34;src&#34;</span><span class="op" id="7975372">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7975386">Src</span><span class="op" id="7975389">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7975393">&#34;floyd-steinberg&#34;</span><span class="op" id="7975410">:</span>&nbsp;<span class="ident" id="7975412">FloydSteinberg</span><span class="op" id="7975426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="7975432">loop</span><span class="op" id="7975436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975439">for</span>&nbsp;<span class="ident" id="7975443">dName</span><span class="op" id="7975448">,</span>&nbsp;<span class="ident" id="7975450">d</span>&nbsp;<span class="op" id="7975452">:=</span>&nbsp;<span class="keyword" id="7975455">range</span>&nbsp;<span class="ident" id="7975461">drawers</span>&nbsp;<span class="op" id="7975469">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975473">dst0</span>&nbsp;<span class="op" id="7975478">:=</span>&nbsp;<span class="ident" id="7975481">image</span><span class="op" id="7975486">.</span><span class="ident" id="7975487">NewPaletted</span><span class="op" id="7975498">(</span><span class="ident" id="7975499">b</span><span class="op" id="7975500">,</span>&nbsp;<span class="ident" id="7975502">cgaPalette</span><span class="op" id="7975512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975516">dst1</span>&nbsp;<span class="op" id="7975521">:=</span>&nbsp;<span class="ident" id="7975524">image</span><span class="op" id="7975529">.</span><span class="ident" id="7975530">NewPaletted</span><span class="op" id="7975541">(</span><span class="ident" id="7975542">b</span><span class="op" id="7975543">,</span>&nbsp;<span class="ident" id="7975545">cgaPalette</span><span class="op" id="7975555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975559">d</span><span class="op" id="7975560">.</span><span class="ident" id="7975561">Draw</span><span class="op" id="7975565">(</span><span class="ident" id="7975566">dst0</span><span class="op" id="7975570">,</span>&nbsp;<span class="ident" id="7975572">b</span><span class="op" id="7975573">,</span>&nbsp;<span class="ident" id="7975575">src</span><span class="op" id="7975578">,</span>&nbsp;<span class="ident" id="7975580">image</span><span class="op" id="7975585">.</span><span class="ident" id="7975586">Point</span><span class="op" id="7975591">{</span><span class="op" id="7975592">}</span><span class="op" id="7975593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975597">d</span><span class="op" id="7975598">.</span><span class="ident" id="7975599">Draw</span><span class="op" id="7975603">(</span><span class="ident" id="7975604">embeddedPaletted</span><span class="op" id="7975620">{</span><span class="ident" id="7975621">dst1</span><span class="op" id="7975625">}</span><span class="op" id="7975626">,</span>&nbsp;<span class="ident" id="7975628">b</span><span class="op" id="7975629">,</span>&nbsp;<span class="ident" id="7975631">src</span><span class="op" id="7975634">,</span>&nbsp;<span class="ident" id="7975636">image</span><span class="op" id="7975641">.</span><span class="ident" id="7975642">Point</span><span class="op" id="7975647">{</span><span class="op" id="7975648">}</span><span class="op" id="7975649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975653">for</span>&nbsp;<span class="ident" id="7975657">y</span>&nbsp;<span class="op" id="7975659">:=</span>&nbsp;<span class="ident" id="7975662">b</span><span class="op" id="7975663">.</span><span class="ident" id="7975664">Min</span><span class="op" id="7975667">.</span><span class="ident" id="7975668">Y</span><span class="op" id="7975669">;</span>&nbsp;<span class="ident" id="7975671">y</span>&nbsp;<span class="op" id="7975673">&lt;</span>&nbsp;<span class="ident" id="7975675">b</span><span class="op" id="7975676">.</span><span class="ident" id="7975677">Max</span><span class="op" id="7975680">.</span><span class="ident" id="7975681">Y</span><span class="op" id="7975682">;</span>&nbsp;<span class="ident" id="7975684">y</span><span class="op" id="7975685">++</span>&nbsp;<span class="op" id="7975688">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975693">for</span>&nbsp;<span class="ident" id="7975697">x</span>&nbsp;<span class="op" id="7975699">:=</span>&nbsp;<span class="ident" id="7975702">b</span><span class="op" id="7975703">.</span><span class="ident" id="7975704">Min</span><span class="op" id="7975707">.</span><span class="ident" id="7975708">X</span><span class="op" id="7975709">;</span>&nbsp;<span class="ident" id="7975711">x</span>&nbsp;<span class="op" id="7975713">&lt;</span>&nbsp;<span class="ident" id="7975715">b</span><span class="op" id="7975716">.</span><span class="ident" id="7975717">Max</span><span class="op" id="7975720">.</span><span class="ident" id="7975721">X</span><span class="op" id="7975722">;</span>&nbsp;<span class="ident" id="7975724">x</span><span class="op" id="7975725">++</span>&nbsp;<span class="op" id="7975728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975734">if</span>&nbsp;<span class="op" id="7975737">!</span><span class="ident" id="7975738">eq</span><span class="op" id="7975740">(</span><span class="ident" id="7975741">dst0</span><span class="op" id="7975745">.</span><span class="ident" id="7975746">At</span><span class="op" id="7975748">(</span><span class="ident" id="7975749">x</span><span class="op" id="7975750">,</span>&nbsp;<span class="ident" id="7975752">y</span><span class="op" id="7975753">)</span><span class="op" id="7975754">,</span>&nbsp;<span class="ident" id="7975756">dst1</span><span class="op" id="7975760">.</span><span class="ident" id="7975761">At</span><span class="op" id="7975763">(</span><span class="ident" id="7975764">x</span><span class="op" id="7975765">,</span>&nbsp;<span class="ident" id="7975767">y</span><span class="op" id="7975768">)</span><span class="op" id="7975769">)</span>&nbsp;<span class="op" id="7975771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975778">t</span><span class="op" id="7975779">.</span><span class="ident" id="7975780">Errorf</span><span class="op" id="7975786">(</span><span class="string" id="7975787">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7975818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975826">dName</span><span class="op" id="7975831">,</span>&nbsp;<span class="ident" id="7975833">x</span><span class="op" id="7975834">,</span>&nbsp;<span class="ident" id="7975836">y</span><span class="op" id="7975837">,</span>&nbsp;<span class="ident" id="7975839">dst0</span><span class="op" id="7975843">.</span><span class="ident" id="7975844">At</span><span class="op" id="7975846">(</span><span class="ident" id="7975847">x</span><span class="op" id="7975848">,</span>&nbsp;<span class="ident" id="7975850">y</span><span class="op" id="7975851">)</span><span class="op" id="7975852">,</span>&nbsp;<span class="ident" id="7975854">dst1</span><span class="op" id="7975858">.</span><span class="ident" id="7975859">At</span><span class="op" id="7975861">(</span><span class="ident" id="7975862">x</span><span class="op" id="7975863">,</span>&nbsp;<span class="ident" id="7975865">y</span><span class="op" id="7975866">)</span><span class="op" id="7975867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975874">continue</span>&nbsp;<span class="ident" id="7975883">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975904">}</span><br>
<span class="lineno"></span><span class="op" id="7975906">}</span>
</div>
</body>
</html>
