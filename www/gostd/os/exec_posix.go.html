<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2151567">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2151622">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2151676">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2151727">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2151805">package</span>&nbsp;<span class="ident" id="2151813">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2151817">import</span>&nbsp;<span class="op" id="2151824">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2151827">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2151837">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2151840">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2151906">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2151971">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2151996">var</span>&nbsp;<span class="op" id="2152000">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152003">Interrupt</span>&nbsp;<span class="ident" id="2152013">Signal</span>&nbsp;<span class="op" id="2152020">=</span>&nbsp;<span class="ident" id="2152022">syscall</span><span class="op" id="2152029">.</span><span class="ident" id="2152030">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152038">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2152048">Signal</span>&nbsp;<span class="op" id="2152055">=</span>&nbsp;<span class="ident" id="2152057">syscall</span><span class="op" id="2152064">.</span><span class="ident" id="2152065">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2152073">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2152076">func</span>&nbsp;<span class="ident" id="2152081">startProcess</span><span class="op" id="2152093">(</span><span class="ident" id="2152094">name</span>&nbsp;<span class="builtintype" id="2152099">string</span><span class="op" id="2152105">,</span>&nbsp;<span class="ident" id="2152107">argv</span>&nbsp;<span class="op" id="2152112">[</span><span class="op" id="2152113">]</span><span class="builtintype" id="2152114">string</span><span class="op" id="2152120">,</span>&nbsp;<span class="ident" id="2152122">attr</span>&nbsp;<span class="op" id="2152127">*</span><span class="ident" id="2152128">ProcAttr</span><span class="op" id="2152136">)</span>&nbsp;<span class="op" id="2152138">(</span><span class="ident" id="2152139">p</span>&nbsp;<span class="op" id="2152141">*</span><span class="ident" id="2152142">Process</span><span class="op" id="2152149">,</span>&nbsp;<span class="ident" id="2152151">err</span>&nbsp;<span class="builtintype" id="2152155">error</span><span class="op" id="2152160">)</span>&nbsp;<span class="op" id="2152162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152165">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152222">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2152284">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152344">if</span>&nbsp;<span class="ident" id="2152347">attr</span>&nbsp;<span class="op" id="2152352">!=</span>&nbsp;<span class="ident" id="2152355">nil</span>&nbsp;<span class="op" id="2152359">&amp;&amp;</span>&nbsp;<span class="ident" id="2152362">attr</span><span class="op" id="2152366">.</span><span class="ident" id="2152367">Sys</span>&nbsp;<span class="op" id="2152371">==</span>&nbsp;<span class="ident" id="2152374">nil</span>&nbsp;<span class="op" id="2152378">&amp;&amp;</span>&nbsp;<span class="ident" id="2152381">attr</span><span class="op" id="2152385">.</span><span class="ident" id="2152386">Dir</span>&nbsp;<span class="op" id="2152390">!=</span>&nbsp;<span class="string" id="2152393">&#34;&#34;</span>&nbsp;<span class="op" id="2152396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152400">if</span>&nbsp;<span class="ident" id="2152403">_</span><span class="op" id="2152404">,</span>&nbsp;<span class="ident" id="2152406">err</span>&nbsp;<span class="op" id="2152410">:=</span>&nbsp;<span class="ident" id="2152413">Stat</span><span class="op" id="2152417">(</span><span class="ident" id="2152418">attr</span><span class="op" id="2152422">.</span><span class="ident" id="2152423">Dir</span><span class="op" id="2152426">)</span><span class="op" id="2152427">;</span>&nbsp;<span class="ident" id="2152429">err</span>&nbsp;<span class="op" id="2152433">!=</span>&nbsp;<span class="ident" id="2152436">nil</span>&nbsp;<span class="op" id="2152440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152445">pe</span>&nbsp;<span class="op" id="2152448">:=</span>&nbsp;<span class="ident" id="2152451">err</span><span class="op" id="2152454">.</span><span class="op" id="2152455">(</span><span class="op" id="2152456">*</span><span class="ident" id="2152457">PathError</span><span class="op" id="2152466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152471">pe</span><span class="op" id="2152473">.</span><span class="ident" id="2152474">Op</span>&nbsp;<span class="op" id="2152477">=</span>&nbsp;<span class="string" id="2152479">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152490">return</span>&nbsp;<span class="ident" id="2152497">nil</span><span class="op" id="2152500">,</span>&nbsp;<span class="ident" id="2152502">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152514">sysattr</span>&nbsp;<span class="op" id="2152522">:=</span>&nbsp;<span class="op" id="2152525">&amp;</span><span class="ident" id="2152526">syscall</span><span class="op" id="2152533">.</span><span class="ident" id="2152534">ProcAttr</span><span class="op" id="2152542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152546">Dir</span><span class="op" id="2152549">:</span>&nbsp;<span class="ident" id="2152551">attr</span><span class="op" id="2152555">.</span><span class="ident" id="2152556">Dir</span><span class="op" id="2152559">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152563">Env</span><span class="op" id="2152566">:</span>&nbsp;<span class="ident" id="2152568">attr</span><span class="op" id="2152572">.</span><span class="ident" id="2152573">Env</span><span class="op" id="2152576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152580">Sys</span><span class="op" id="2152583">:</span>&nbsp;<span class="ident" id="2152585">attr</span><span class="op" id="2152589">.</span><span class="ident" id="2152590">Sys</span><span class="op" id="2152593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152599">if</span>&nbsp;<span class="ident" id="2152602">sysattr</span><span class="op" id="2152609">.</span><span class="ident" id="2152610">Env</span>&nbsp;<span class="op" id="2152614">==</span>&nbsp;<span class="ident" id="2152617">nil</span>&nbsp;<span class="op" id="2152621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152625">sysattr</span><span class="op" id="2152632">.</span><span class="ident" id="2152633">Env</span>&nbsp;<span class="op" id="2152637">=</span>&nbsp;<span class="ident" id="2152639">Environ</span><span class="op" id="2152646">(</span><span class="op" id="2152647">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152653">for</span>&nbsp;<span class="ident" id="2152657">_</span><span class="op" id="2152658">,</span>&nbsp;<span class="ident" id="2152660">f</span>&nbsp;<span class="op" id="2152662">:=</span>&nbsp;<span class="keyword" id="2152665">range</span>&nbsp;<span class="ident" id="2152671">attr</span><span class="op" id="2152675">.</span><span class="ident" id="2152676">Files</span>&nbsp;<span class="op" id="2152682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152686">sysattr</span><span class="op" id="2152693">.</span><span class="ident" id="2152694">Files</span>&nbsp;<span class="op" id="2152700">=</span>&nbsp;<span class="builtinfunc" id="2152702">append</span><span class="op" id="2152708">(</span><span class="ident" id="2152709">sysattr</span><span class="op" id="2152716">.</span><span class="ident" id="2152717">Files</span><span class="op" id="2152722">,</span>&nbsp;<span class="ident" id="2152724">f</span><span class="op" id="2152725">.</span><span class="ident" id="2152726">Fd</span><span class="op" id="2152728">(</span><span class="op" id="2152729">)</span><span class="op" id="2152730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2152737">pid</span><span class="op" id="2152740">,</span>&nbsp;<span class="ident" id="2152742">h</span><span class="op" id="2152743">,</span>&nbsp;<span class="ident" id="2152745">e</span>&nbsp;<span class="op" id="2152747">:=</span>&nbsp;<span class="ident" id="2152750">syscall</span><span class="op" id="2152757">.</span><span class="ident" id="2152758">StartProcess</span><span class="op" id="2152770">(</span><span class="ident" id="2152771">name</span><span class="op" id="2152775">,</span>&nbsp;<span class="ident" id="2152777">argv</span><span class="op" id="2152781">,</span>&nbsp;<span class="ident" id="2152783">sysattr</span><span class="op" id="2152790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152793">if</span>&nbsp;<span class="ident" id="2152796">e</span>&nbsp;<span class="op" id="2152798">!=</span>&nbsp;<span class="ident" id="2152801">nil</span>&nbsp;<span class="op" id="2152805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152809">return</span>&nbsp;<span class="ident" id="2152816">nil</span><span class="op" id="2152819">,</span>&nbsp;<span class="op" id="2152821">&amp;</span><span class="ident" id="2152822">PathError</span><span class="op" id="2152831">{</span><span class="string" id="2152832">&#34;fork/exec&#34;</span><span class="op" id="2152843">,</span>&nbsp;<span class="ident" id="2152845">name</span><span class="op" id="2152849">,</span>&nbsp;<span class="ident" id="2152851">e</span><span class="op" id="2152852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2152855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152858">return</span>&nbsp;<span class="ident" id="2152865">newProcess</span><span class="op" id="2152875">(</span><span class="ident" id="2152876">pid</span><span class="op" id="2152879">,</span>&nbsp;<span class="ident" id="2152881">h</span><span class="op" id="2152882">)</span><span class="op" id="2152883">,</span>&nbsp;<span class="ident" id="2152885">nil</span><br>
<span class="lineno">50</span><span class="op" id="2152889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2152892">func</span>&nbsp;<span class="op" id="2152897">(</span><span class="ident" id="2152898">p</span>&nbsp;<span class="op" id="2152900">*</span><span class="ident" id="2152901">Process</span><span class="op" id="2152908">)</span>&nbsp;<span class="ident" id="2152910">kill</span><span class="op" id="2152914">(</span><span class="op" id="2152915">)</span>&nbsp;<span class="builtintype" id="2152917">error</span>&nbsp;<span class="op" id="2152923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2152926">return</span>&nbsp;<span class="ident" id="2152933">p</span><span class="op" id="2152934">.</span><span class="ident" id="2152935">Signal</span><span class="op" id="2152941">(</span><span class="ident" id="2152942">Kill</span><span class="op" id="2152946">)</span><br>
<span class="lineno"></span><span class="op" id="2152948">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2152951">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2153024">type</span>&nbsp;<span class="ident" id="2153029">ProcessState</span>&nbsp;<span class="keyword" id="2153042">struct</span>&nbsp;<span class="op" id="2153049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153052">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2153059">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2153078">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153100">status</span>&nbsp;<span class="ident" id="2153107">syscall</span><span class="op" id="2153114">.</span><span class="ident" id="2153115">WaitStatus</span>&nbsp;<span class="comment" id="2153126">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153160">rusage</span>&nbsp;<span class="op" id="2153167">*</span><span class="ident" id="2153168">syscall</span><span class="op" id="2153175">.</span><span class="ident" id="2153176">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2153183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2153186">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2153239">func</span>&nbsp;<span class="op" id="2153244">(</span><span class="ident" id="2153245">p</span>&nbsp;<span class="op" id="2153247">*</span><span class="ident" id="2153248">ProcessState</span><span class="op" id="2153260">)</span>&nbsp;<span class="ident" id="2153262">Pid</span><span class="op" id="2153265">(</span><span class="op" id="2153266">)</span>&nbsp;<span class="builtintype" id="2153268">int</span>&nbsp;<span class="op" id="2153272">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153275">return</span>&nbsp;<span class="ident" id="2153282">p</span><span class="op" id="2153283">.</span><span class="ident" id="2153284">pid</span><br>
<span class="lineno"></span><span class="op" id="2153288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2153291">func</span>&nbsp;<span class="op" id="2153296">(</span><span class="ident" id="2153297">p</span>&nbsp;<span class="op" id="2153299">*</span><span class="ident" id="2153300">ProcessState</span><span class="op" id="2153312">)</span>&nbsp;<span class="ident" id="2153314">exited</span><span class="op" id="2153320">(</span><span class="op" id="2153321">)</span>&nbsp;<span class="builtintype" id="2153323">bool</span>&nbsp;<span class="op" id="2153328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153331">return</span>&nbsp;<span class="ident" id="2153338">p</span><span class="op" id="2153339">.</span><span class="ident" id="2153340">status</span><span class="op" id="2153346">.</span><span class="ident" id="2153347">Exited</span><span class="op" id="2153353">(</span><span class="op" id="2153354">)</span><br>
<span class="lineno">70</span><span class="op" id="2153356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2153359">func</span>&nbsp;<span class="op" id="2153364">(</span><span class="ident" id="2153365">p</span>&nbsp;<span class="op" id="2153367">*</span><span class="ident" id="2153368">ProcessState</span><span class="op" id="2153380">)</span>&nbsp;<span class="ident" id="2153382">success</span><span class="op" id="2153389">(</span><span class="op" id="2153390">)</span>&nbsp;<span class="builtintype" id="2153392">bool</span>&nbsp;<span class="op" id="2153397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153400">return</span>&nbsp;<span class="ident" id="2153407">p</span><span class="op" id="2153408">.</span><span class="ident" id="2153409">status</span><span class="op" id="2153415">.</span><span class="ident" id="2153416">ExitStatus</span><span class="op" id="2153426">(</span><span class="op" id="2153427">)</span>&nbsp;<span class="op" id="2153429">==</span>&nbsp;<span class="num" id="2153432">0</span><br>
<span class="lineno"></span><span class="op" id="2153434">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2153437">func</span>&nbsp;<span class="op" id="2153442">(</span><span class="ident" id="2153443">p</span>&nbsp;<span class="op" id="2153445">*</span><span class="ident" id="2153446">ProcessState</span><span class="op" id="2153458">)</span>&nbsp;<span class="ident" id="2153460">sys</span><span class="op" id="2153463">(</span><span class="op" id="2153464">)</span>&nbsp;<span class="keyword" id="2153466">interface</span><span class="op" id="2153475">{</span><span class="op" id="2153476">}</span>&nbsp;<span class="op" id="2153478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153481">return</span>&nbsp;<span class="ident" id="2153488">p</span><span class="op" id="2153489">.</span><span class="ident" id="2153490">status</span><br>
<span class="lineno"></span><span class="op" id="2153497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2153500">func</span>&nbsp;<span class="op" id="2153505">(</span><span class="ident" id="2153506">p</span>&nbsp;<span class="op" id="2153508">*</span><span class="ident" id="2153509">ProcessState</span><span class="op" id="2153521">)</span>&nbsp;<span class="ident" id="2153523">sysUsage</span><span class="op" id="2153531">(</span><span class="op" id="2153532">)</span>&nbsp;<span class="keyword" id="2153534">interface</span><span class="op" id="2153543">{</span><span class="op" id="2153544">}</span>&nbsp;<span class="op" id="2153546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153549">return</span>&nbsp;<span class="ident" id="2153556">p</span><span class="op" id="2153557">.</span><span class="ident" id="2153558">rusage</span><br>
<span class="lineno"></span><span class="op" id="2153565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2153568">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2153600">func</span>&nbsp;<span class="ident" id="2153605">itod</span><span class="op" id="2153609">(</span><span class="ident" id="2153610">i</span>&nbsp;<span class="builtintype" id="2153612">int</span><span class="op" id="2153615">)</span>&nbsp;<span class="builtintype" id="2153617">string</span>&nbsp;<span class="op" id="2153624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153627">if</span>&nbsp;<span class="ident" id="2153630">i</span>&nbsp;<span class="op" id="2153632">==</span>&nbsp;<span class="num" id="2153635">0</span>&nbsp;<span class="op" id="2153637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153641">return</span>&nbsp;<span class="string" id="2153648">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153657">u</span>&nbsp;<span class="op" id="2153659">:=</span>&nbsp;<span class="ident" id="2153662">uint64</span><span class="op" id="2153668">(</span><span class="ident" id="2153669">i</span><span class="op" id="2153670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153673">if</span>&nbsp;<span class="ident" id="2153676">i</span>&nbsp;<span class="op" id="2153678">&lt;</span>&nbsp;<span class="num" id="2153680">0</span>&nbsp;<span class="op" id="2153682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153686">u</span>&nbsp;<span class="op" id="2153688">=</span>&nbsp;<span class="op" id="2153690">-</span><span class="ident" id="2153691">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2153698">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153737">var</span>&nbsp;<span class="ident" id="2153741">b</span>&nbsp;<span class="op" id="2153743">[</span><span class="num" id="2153744">32</span><span class="op" id="2153746">]</span><span class="builtintype" id="2153747">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153753">bp</span>&nbsp;<span class="op" id="2153756">:=</span>&nbsp;<span class="builtinfunc" id="2153759">len</span><span class="op" id="2153762">(</span><span class="ident" id="2153763">b</span><span class="op" id="2153764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153767">for</span>&nbsp;<span class="op" id="2153771">;</span>&nbsp;<span class="ident" id="2153773">u</span>&nbsp;<span class="op" id="2153775">&gt;</span>&nbsp;<span class="num" id="2153777">0</span><span class="op" id="2153778">;</span>&nbsp;<span class="ident" id="2153780">u</span>&nbsp;<span class="op" id="2153782">/=</span>&nbsp;<span class="num" id="2153785">10</span>&nbsp;<span class="op" id="2153788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153792">bp</span><span class="op" id="2153794">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153799">b</span><span class="op" id="2153800">[</span><span class="ident" id="2153801">bp</span><span class="op" id="2153803">]</span>&nbsp;<span class="op" id="2153805">=</span>&nbsp;<span class="builtintype" id="2153807">byte</span><span class="op" id="2153811">(</span><span class="ident" id="2153812">u</span><span class="op" id="2153813">%</span><span class="num" id="2153814">10</span><span class="op" id="2153816">)</span>&nbsp;<span class="op" id="2153818">+</span>&nbsp;<span class="string" id="2153820">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153829">if</span>&nbsp;<span class="ident" id="2153832">i</span>&nbsp;<span class="op" id="2153834">&lt;</span>&nbsp;<span class="num" id="2153836">0</span>&nbsp;<span class="op" id="2153838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153842">bp</span><span class="op" id="2153844">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153849">b</span><span class="op" id="2153850">[</span><span class="ident" id="2153851">bp</span><span class="op" id="2153853">]</span>&nbsp;<span class="op" id="2153855">=</span>&nbsp;<span class="string" id="2153857">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153866">return</span>&nbsp;<span class="builtintype" id="2153873">string</span><span class="op" id="2153879">(</span><span class="ident" id="2153880">b</span><span class="op" id="2153881">[</span><span class="ident" id="2153882">bp</span><span class="op" id="2153884">:</span><span class="op" id="2153885">]</span><span class="op" id="2153886">)</span><br>
<span class="lineno"></span><span class="op" id="2153888">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2153891">func</span>&nbsp;<span class="op" id="2153896">(</span><span class="ident" id="2153897">p</span>&nbsp;<span class="op" id="2153899">*</span><span class="ident" id="2153900">ProcessState</span><span class="op" id="2153912">)</span>&nbsp;<span class="ident" id="2153914">String</span><span class="op" id="2153920">(</span><span class="op" id="2153921">)</span>&nbsp;<span class="builtintype" id="2153923">string</span>&nbsp;<span class="op" id="2153930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153933">if</span>&nbsp;<span class="ident" id="2153936">p</span>&nbsp;<span class="op" id="2153938">==</span>&nbsp;<span class="ident" id="2153941">nil</span>&nbsp;<span class="op" id="2153945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2153949">return</span>&nbsp;<span class="string" id="2153956">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2153965">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2153968">status</span>&nbsp;<span class="op" id="2153975">:=</span>&nbsp;<span class="ident" id="2153978">p</span><span class="op" id="2153979">.</span><span class="ident" id="2153980">Sys</span><span class="op" id="2153983">(</span><span class="op" id="2153984">)</span><span class="op" id="2153985">.</span><span class="op" id="2153986">(</span><span class="ident" id="2153987">syscall</span><span class="op" id="2153994">.</span><span class="ident" id="2153995">WaitStatus</span><span class="op" id="2154005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154008">res</span>&nbsp;<span class="op" id="2154012">:=</span>&nbsp;<span class="string" id="2154015">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154019">switch</span>&nbsp;<span class="op" id="2154026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154029">case</span>&nbsp;<span class="ident" id="2154034">status</span><span class="op" id="2154040">.</span><span class="ident" id="2154041">Exited</span><span class="op" id="2154047">(</span><span class="op" id="2154048">)</span><span class="op" id="2154049">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154053">res</span>&nbsp;<span class="op" id="2154057">=</span>&nbsp;<span class="string" id="2154059">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2154074">+</span>&nbsp;<span class="ident" id="2154076">itod</span><span class="op" id="2154080">(</span><span class="ident" id="2154081">status</span><span class="op" id="2154087">.</span><span class="ident" id="2154088">ExitStatus</span><span class="op" id="2154098">(</span><span class="op" id="2154099">)</span><span class="op" id="2154100">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154103">case</span>&nbsp;<span class="ident" id="2154108">status</span><span class="op" id="2154114">.</span><span class="ident" id="2154115">Signaled</span><span class="op" id="2154123">(</span><span class="op" id="2154124">)</span><span class="op" id="2154125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154129">res</span>&nbsp;<span class="op" id="2154133">=</span>&nbsp;<span class="string" id="2154135">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2154146">+</span>&nbsp;<span class="ident" id="2154148">status</span><span class="op" id="2154154">.</span><span class="ident" id="2154155">Signal</span><span class="op" id="2154161">(</span><span class="op" id="2154162">)</span><span class="op" id="2154163">.</span><span class="ident" id="2154164">String</span><span class="op" id="2154170">(</span><span class="op" id="2154171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154174">case</span>&nbsp;<span class="ident" id="2154179">status</span><span class="op" id="2154185">.</span><span class="ident" id="2154186">Stopped</span><span class="op" id="2154193">(</span><span class="op" id="2154194">)</span><span class="op" id="2154195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154199">res</span>&nbsp;<span class="op" id="2154203">=</span>&nbsp;<span class="string" id="2154205">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2154221">+</span>&nbsp;<span class="ident" id="2154223">status</span><span class="op" id="2154229">.</span><span class="ident" id="2154230">StopSignal</span><span class="op" id="2154240">(</span><span class="op" id="2154241">)</span><span class="op" id="2154242">.</span><span class="ident" id="2154243">String</span><span class="op" id="2154249">(</span><span class="op" id="2154250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154254">if</span>&nbsp;<span class="ident" id="2154257">status</span><span class="op" id="2154263">.</span><span class="ident" id="2154264">StopSignal</span><span class="op" id="2154274">(</span><span class="op" id="2154275">)</span>&nbsp;<span class="op" id="2154277">==</span>&nbsp;<span class="ident" id="2154280">syscall</span><span class="op" id="2154287">.</span><span class="ident" id="2154288">SIGTRAP</span>&nbsp;<span class="op" id="2154296">&amp;&amp;</span>&nbsp;<span class="ident" id="2154299">status</span><span class="op" id="2154305">.</span><span class="ident" id="2154306">TrapCause</span><span class="op" id="2154315">(</span><span class="op" id="2154316">)</span>&nbsp;<span class="op" id="2154318">!=</span>&nbsp;<span class="num" id="2154321">0</span>&nbsp;<span class="op" id="2154323">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154328">res</span>&nbsp;<span class="op" id="2154332">+=</span>&nbsp;<span class="string" id="2154335">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2154345">+</span>&nbsp;<span class="ident" id="2154347">itod</span><span class="op" id="2154351">(</span><span class="ident" id="2154352">status</span><span class="op" id="2154358">.</span><span class="ident" id="2154359">TrapCause</span><span class="op" id="2154368">(</span><span class="op" id="2154369">)</span><span class="op" id="2154370">)</span>&nbsp;<span class="op" id="2154372">+</span>&nbsp;<span class="string" id="2154374">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154383">case</span>&nbsp;<span class="ident" id="2154388">status</span><span class="op" id="2154394">.</span><span class="ident" id="2154395">Continued</span><span class="op" id="2154404">(</span><span class="op" id="2154405">)</span><span class="op" id="2154406">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154410">res</span>&nbsp;<span class="op" id="2154414">=</span>&nbsp;<span class="string" id="2154416">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154429">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154432">if</span>&nbsp;<span class="ident" id="2154435">status</span><span class="op" id="2154441">.</span><span class="ident" id="2154442">CoreDump</span><span class="op" id="2154450">(</span><span class="op" id="2154451">)</span>&nbsp;<span class="op" id="2154453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2154457">res</span>&nbsp;<span class="op" id="2154461">+=</span>&nbsp;<span class="string" id="2154464">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2154482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2154485">return</span>&nbsp;<span class="ident" id="2154492">res</span><br>
<span class="lineno"></span><span class="op" id="2154496">}</span>
</div>
</body>
</html>
