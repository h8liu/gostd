<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6855824">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6855879">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6855933">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6855984">//&nbsp;TODO&nbsp;It&nbsp;would&nbsp;be&nbsp;nice&nbsp;to&nbsp;use&nbsp;a&nbsp;mock&nbsp;DNS&nbsp;server,&nbsp;to&nbsp;eliminate</span><br>
<span class="lineno"></span><span class="comment" id="6856048">//&nbsp;external&nbsp;dependencies.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6856075">package</span>&nbsp;<span class="ident" id="6856083">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6856088">import</span>&nbsp;<span class="op" id="6856095">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856098">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856106">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856117">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6856127">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6856130">var</span>&nbsp;<span class="ident" id="6856134">testExternal</span>&nbsp;<span class="op" id="6856147">=</span>&nbsp;<span class="ident" id="6856149"><a href="/net/lookup_test.go.html#6856098">flag</a></span><span class="op" id="6856153">.</span><span class="ident" id="6856154">Bool</span><span class="op" id="6856158">(</span><span class="string" id="6856159">&#34;external&#34;</span><span class="op" id="6856169">,</span>&nbsp;<span class="ident" id="6856171">true</span><span class="op" id="6856175">,</span>&nbsp;<span class="string" id="6856177">&#34;allow&nbsp;use&nbsp;of&nbsp;external&nbsp;networks&nbsp;during&nbsp;long&nbsp;test&#34;</span><span class="op" id="6856226">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6856229">var</span>&nbsp;<span class="ident" id="6856233">lookupGoogleSRVTests</span>&nbsp;<span class="op" id="6856254">=</span>&nbsp;<span class="op" id="6856256">[</span><span class="op" id="6856257">]</span><span class="keyword" id="6856258">struct</span>&nbsp;<span class="op" id="6856265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856268">service</span><span class="op" id="6856275">,</span>&nbsp;<span class="ident" id="6856277">proto</span><span class="op" id="6856282">,</span>&nbsp;<span class="ident" id="6856284">name</span>&nbsp;<span class="builtintype" id="6856289">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856297">cname</span><span class="op" id="6856302">,</span>&nbsp;<span class="ident" id="6856304">target</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6856318">string</span><br>
<span class="lineno"></span><span class="op" id="6856325">}</span><span class="op" id="6856326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856333">&#34;xmpp-server&#34;</span><span class="op" id="6856346">,</span>&nbsp;<span class="string" id="6856348">&#34;tcp&#34;</span><span class="op" id="6856353">,</span>&nbsp;<span class="string" id="6856355">&#34;google.com&#34;</span><span class="op" id="6856367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856371">&#34;.google.com&#34;</span><span class="op" id="6856384">,</span>&nbsp;<span class="string" id="6856386">&#34;.google.com&#34;</span><span class="op" id="6856399">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856402">}</span><span class="op" id="6856403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856410">&#34;&#34;</span><span class="op" id="6856412">,</span>&nbsp;<span class="string" id="6856414">&#34;&#34;</span><span class="op" id="6856416">,</span>&nbsp;<span class="string" id="6856418">&#34;_xmpp-server._tcp.google.com&#34;</span><span class="op" id="6856448">,</span>&nbsp;<span class="comment" id="6856450">//&nbsp;non-standard&nbsp;back&nbsp;door</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6856478">&#34;.google.com&#34;</span><span class="op" id="6856491">,</span>&nbsp;<span class="string" id="6856493">&#34;.google.com&#34;</span><span class="op" id="6856506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856509">}</span><span class="op" id="6856510">,</span><br>
<span class="lineno">30</span><span class="op" id="6856512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6856515">func</span>&nbsp;<span class="ident" id="6856520">TestLookupGoogleSRV</span><span class="op" id="6856539">(</span><span class="ident" id="6856540">t</span>&nbsp;<span class="op" id="6856542">*</span><span class="ident" id="6856543"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6856550">.</span><span class="ident" id="6856551">T</span><span class="op" id="6856552">)</span>&nbsp;<span class="op" id="6856554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856557">if</span>&nbsp;<span class="ident" id="6856560"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6856567">.</span><span class="ident" id="6856568">Short</span><span class="op" id="6856573">(</span><span class="op" id="6856574">)</span>&nbsp;<span class="op" id="6856576">||</span>&nbsp;<span class="op" id="6856579">!</span><span class="op" id="6856580">*</span><span class="ident" id="6856581"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6856594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856598"><a href="/net/lookup_test.go.html#6856540">t</a></span><span class="op" id="6856599">.</span><span class="ident" id="6856600">Skip</span><span class="op" id="6856604">(</span><span class="string" id="6856605">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6856646">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856653">for</span>&nbsp;<span class="ident" id="6856657">_</span><span class="op" id="6856658">,</span>&nbsp;<span class="ident" id="6856660">tt</span>&nbsp;<span class="op" id="6856663">:=</span>&nbsp;<span class="keyword" id="6856666">range</span>&nbsp;<span class="ident" id="6856672"><a href="/net/lookup_test.go.html#6856233">lookupGoogleSRVTests</a></span>&nbsp;<span class="op" id="6856693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856697">cname</span><span class="op" id="6856702">,</span>&nbsp;<span class="ident" id="6856704">srvs</span><span class="op" id="6856708">,</span>&nbsp;<span class="ident" id="6856710">err</span>&nbsp;<span class="op" id="6856714">:=</span>&nbsp;<span class="ident" id="6856717"><a href="/net/lookup.go.html#2644858">LookupSRV</a></span><span class="op" id="6856726">(</span><span class="ident" id="6856727"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6856729">.</span><span class="ident" id="6856730">service</span><span class="op" id="6856737">,</span>&nbsp;<span class="ident" id="6856739"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6856741">.</span><span class="ident" id="6856742">proto</span><span class="op" id="6856747">,</span>&nbsp;<span class="ident" id="6856749"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6856751">.</span><span class="ident" id="6856752">name</span><span class="op" id="6856756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856760">if</span>&nbsp;<span class="ident" id="6856763"><a href="/net/lookup_test.go.html#6856710">err</a></span>&nbsp;<span class="op" id="6856767">!=</span>&nbsp;<span class="ident" id="6856770">nil</span>&nbsp;<span class="op" id="6856774">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856779"><a href="/net/lookup_test.go.html#6856540">t</a></span><span class="op" id="6856780">.</span><span class="ident" id="6856781">Fatal</span><span class="op" id="6856786">(</span><span class="ident" id="6856787"><a href="/net/lookup_test.go.html#6856710">err</a></span><span class="op" id="6856790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856798">if</span>&nbsp;<span class="builtinfunc" id="6856801">len</span><span class="op" id="6856804">(</span><span class="ident" id="6856805"><a href="/net/lookup_test.go.html#6856704">srvs</a></span><span class="op" id="6856809">)</span>&nbsp;<span class="op" id="6856811">==</span>&nbsp;<span class="num" id="6856814">0</span>&nbsp;<span class="op" id="6856816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856821"><a href="/net/lookup_test.go.html#6856540">t</a></span><span class="op" id="6856822">.</span><span class="ident" id="6856823">Error</span><span class="op" id="6856828">(</span><span class="string" id="6856829">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6856844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856848">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856852">if</span>&nbsp;<span class="op" id="6856855">!</span><span class="ident" id="6856856"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6856863">.</span><span class="ident" id="6856864">Contains</span><span class="op" id="6856872">(</span><span class="ident" id="6856873"><a href="/net/lookup_test.go.html#6856697">cname</a></span><span class="op" id="6856878">,</span>&nbsp;<span class="ident" id="6856880"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6856882">.</span><span class="ident" id="6856883">cname</span><span class="op" id="6856888">)</span>&nbsp;<span class="op" id="6856890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6856895"><a href="/net/lookup_test.go.html#6856540">t</a></span><span class="op" id="6856896">.</span><span class="ident" id="6856897">Errorf</span><span class="op" id="6856903">(</span><span class="string" id="6856904">&#34;got&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6856921">,</span>&nbsp;<span class="ident" id="6856923"><a href="/net/lookup_test.go.html#6856697">cname</a></span><span class="op" id="6856928">,</span>&nbsp;<span class="ident" id="6856930"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6856932">.</span><span class="ident" id="6856933">cname</span><span class="op" id="6856938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6856942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856946">for</span>&nbsp;<span class="ident" id="6856950">_</span><span class="op" id="6856951">,</span>&nbsp;<span class="ident" id="6856953">srv</span>&nbsp;<span class="op" id="6856957">:=</span>&nbsp;<span class="keyword" id="6856960">range</span>&nbsp;<span class="ident" id="6856966"><a href="/net/lookup_test.go.html#6856704">srvs</a></span>&nbsp;<span class="op" id="6856971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6856976">if</span>&nbsp;<span class="op" id="6856979">!</span><span class="ident" id="6856980"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6856987">.</span><span class="ident" id="6856988">Contains</span><span class="op" id="6856996">(</span><span class="ident" id="6856997"><a href="/net/lookup_test.go.html#6856953">srv</a></span><span class="op" id="6857000">.</span><span class="ident" id="6857001">Target</span><span class="op" id="6857007">,</span>&nbsp;<span class="ident" id="6857009"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6857011">.</span><span class="ident" id="6857012">target</span><span class="op" id="6857018">)</span>&nbsp;<span class="op" id="6857020">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857026"><a href="/net/lookup_test.go.html#6856540">t</a></span><span class="op" id="6857027">.</span><span class="ident" id="6857028">Errorf</span><span class="op" id="6857034">(</span><span class="string" id="6857035">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="6857072">,</span>&nbsp;<span class="ident" id="6857074"><a href="/net/lookup_test.go.html#6856953">srv</a></span><span class="op" id="6857077">,</span>&nbsp;<span class="ident" id="6857079"><a href="/net/lookup_test.go.html#6856660">tt</a></span><span class="op" id="6857081">.</span><span class="ident" id="6857082">target</span><span class="op" id="6857088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857100">}</span><br>
<span class="lineno"></span><span class="op" id="6857102">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6857105">func</span>&nbsp;<span class="ident" id="6857110">TestLookupGmailMX</span><span class="op" id="6857127">(</span><span class="ident" id="6857128">t</span>&nbsp;<span class="op" id="6857130">*</span><span class="ident" id="6857131"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6857138">.</span><span class="ident" id="6857139">T</span><span class="op" id="6857140">)</span>&nbsp;<span class="op" id="6857142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857145">if</span>&nbsp;<span class="ident" id="6857148"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6857155">.</span><span class="ident" id="6857156">Short</span><span class="op" id="6857161">(</span><span class="op" id="6857162">)</span>&nbsp;<span class="op" id="6857164">||</span>&nbsp;<span class="op" id="6857167">!</span><span class="op" id="6857168">*</span><span class="ident" id="6857169"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6857182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857186"><a href="/net/lookup_test.go.html#6857128">t</a></span><span class="op" id="6857187">.</span><span class="ident" id="6857188">Skip</span><span class="op" id="6857192">(</span><span class="string" id="6857193">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6857234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857237">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857241">mxs</span><span class="op" id="6857244">,</span>&nbsp;<span class="ident" id="6857246">err</span>&nbsp;<span class="op" id="6857250">:=</span>&nbsp;<span class="ident" id="6857253"><a href="/net/lookup.go.html#2645074">LookupMX</a></span><span class="op" id="6857261">(</span><span class="string" id="6857262">&#34;gmail.com&#34;</span><span class="op" id="6857273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857276">if</span>&nbsp;<span class="ident" id="6857279"><a href="/net/lookup_test.go.html#6857246">err</a></span>&nbsp;<span class="op" id="6857283">!=</span>&nbsp;<span class="ident" id="6857286">nil</span>&nbsp;<span class="op" id="6857290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857294"><a href="/net/lookup_test.go.html#6857128">t</a></span><span class="op" id="6857295">.</span><span class="ident" id="6857296">Fatal</span><span class="op" id="6857301">(</span><span class="ident" id="6857302"><a href="/net/lookup_test.go.html#6857246">err</a></span><span class="op" id="6857305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857308">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857311">if</span>&nbsp;<span class="builtinfunc" id="6857314">len</span><span class="op" id="6857317">(</span><span class="ident" id="6857318"><a href="/net/lookup_test.go.html#6857241">mxs</a></span><span class="op" id="6857321">)</span>&nbsp;<span class="op" id="6857323">==</span>&nbsp;<span class="num" id="6857326">0</span>&nbsp;<span class="op" id="6857328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857332"><a href="/net/lookup_test.go.html#6857128">t</a></span><span class="op" id="6857333">.</span><span class="ident" id="6857334">Error</span><span class="op" id="6857339">(</span><span class="string" id="6857340">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6857355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857361">for</span>&nbsp;<span class="ident" id="6857365">_</span><span class="op" id="6857366">,</span>&nbsp;<span class="ident" id="6857368">mx</span>&nbsp;<span class="op" id="6857371">:=</span>&nbsp;<span class="keyword" id="6857374">range</span>&nbsp;<span class="ident" id="6857380"><a href="/net/lookup_test.go.html#6857241">mxs</a></span>&nbsp;<span class="op" id="6857384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857388">if</span>&nbsp;<span class="op" id="6857391">!</span><span class="ident" id="6857392"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6857399">.</span><span class="ident" id="6857400">Contains</span><span class="op" id="6857408">(</span><span class="ident" id="6857409"><a href="/net/lookup_test.go.html#6857368">mx</a></span><span class="op" id="6857411">.</span><span class="ident" id="6857412">Host</span><span class="op" id="6857416">,</span>&nbsp;<span class="string" id="6857418">&#34;.google.com&#34;</span><span class="op" id="6857431">)</span>&nbsp;<span class="op" id="6857433">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857438"><a href="/net/lookup_test.go.html#6857128">t</a></span><span class="op" id="6857439">.</span><span class="ident" id="6857440">Errorf</span><span class="op" id="6857446">(</span><span class="string" id="6857447">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="6857494">,</span>&nbsp;<span class="ident" id="6857496"><a href="/net/lookup_test.go.html#6857368">mx</a></span><span class="op" id="6857498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857505">}</span><br>
<span class="lineno"></span><span class="op" id="6857507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6857510">func</span>&nbsp;<span class="ident" id="6857515">TestLookupGmailNS</span><span class="op" id="6857532">(</span><span class="ident" id="6857533">t</span>&nbsp;<span class="op" id="6857535">*</span><span class="ident" id="6857536"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6857543">.</span><span class="ident" id="6857544">T</span><span class="op" id="6857545">)</span>&nbsp;<span class="op" id="6857547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857550">if</span>&nbsp;<span class="ident" id="6857553"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6857560">.</span><span class="ident" id="6857561">Short</span><span class="op" id="6857566">(</span><span class="op" id="6857567">)</span>&nbsp;<span class="op" id="6857569">||</span>&nbsp;<span class="op" id="6857572">!</span><span class="op" id="6857573">*</span><span class="ident" id="6857574"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6857587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857591"><a href="/net/lookup_test.go.html#6857533">t</a></span><span class="op" id="6857592">.</span><span class="ident" id="6857593">Skip</span><span class="op" id="6857597">(</span><span class="string" id="6857598">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6857639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857646">nss</span><span class="op" id="6857649">,</span>&nbsp;<span class="ident" id="6857651">err</span>&nbsp;<span class="op" id="6857655">:=</span>&nbsp;<span class="ident" id="6857658"><a href="/net/lookup.go.html#2645217">LookupNS</a></span><span class="op" id="6857666">(</span><span class="string" id="6857667">&#34;gmail.com&#34;</span><span class="op" id="6857678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857681">if</span>&nbsp;<span class="ident" id="6857684"><a href="/net/lookup_test.go.html#6857651">err</a></span>&nbsp;<span class="op" id="6857688">!=</span>&nbsp;<span class="ident" id="6857691">nil</span>&nbsp;<span class="op" id="6857695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857699"><a href="/net/lookup_test.go.html#6857533">t</a></span><span class="op" id="6857700">.</span><span class="ident" id="6857701">Fatal</span><span class="op" id="6857706">(</span><span class="ident" id="6857707"><a href="/net/lookup_test.go.html#6857651">err</a></span><span class="op" id="6857710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857716">if</span>&nbsp;<span class="builtinfunc" id="6857719">len</span><span class="op" id="6857722">(</span><span class="ident" id="6857723"><a href="/net/lookup_test.go.html#6857646">nss</a></span><span class="op" id="6857726">)</span>&nbsp;<span class="op" id="6857728">==</span>&nbsp;<span class="num" id="6857731">0</span>&nbsp;<span class="op" id="6857733">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857737"><a href="/net/lookup_test.go.html#6857533">t</a></span><span class="op" id="6857738">.</span><span class="ident" id="6857739">Error</span><span class="op" id="6857744">(</span><span class="string" id="6857745">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6857760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857766">for</span>&nbsp;<span class="ident" id="6857770">_</span><span class="op" id="6857771">,</span>&nbsp;<span class="ident" id="6857773">ns</span>&nbsp;<span class="op" id="6857776">:=</span>&nbsp;<span class="keyword" id="6857779">range</span>&nbsp;<span class="ident" id="6857785"><a href="/net/lookup_test.go.html#6857646">nss</a></span>&nbsp;<span class="op" id="6857789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857793">if</span>&nbsp;<span class="op" id="6857796">!</span><span class="ident" id="6857797"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6857804">.</span><span class="ident" id="6857805">Contains</span><span class="op" id="6857813">(</span><span class="ident" id="6857814"><a href="/net/lookup_test.go.html#6857773">ns</a></span><span class="op" id="6857816">.</span><span class="ident" id="6857817">Host</span><span class="op" id="6857821">,</span>&nbsp;<span class="string" id="6857823">&#34;.google.com&#34;</span><span class="op" id="6857836">)</span>&nbsp;<span class="op" id="6857838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857843"><a href="/net/lookup_test.go.html#6857533">t</a></span><span class="op" id="6857844">.</span><span class="ident" id="6857845">Errorf</span><span class="op" id="6857851">(</span><span class="string" id="6857852">&#34;got&nbsp;%v;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.google.com.&#34;</span><span class="op" id="6857899">,</span>&nbsp;<span class="ident" id="6857901"><a href="/net/lookup_test.go.html#6857773">ns</a></span><span class="op" id="6857903">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6857910">}</span><br>
<span class="lineno"></span><span class="op" id="6857912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6857915">func</span>&nbsp;<span class="ident" id="6857920">TestLookupGmailTXT</span><span class="op" id="6857938">(</span><span class="ident" id="6857939">t</span>&nbsp;<span class="op" id="6857941">*</span><span class="ident" id="6857942"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6857949">.</span><span class="ident" id="6857950">T</span><span class="op" id="6857951">)</span>&nbsp;<span class="op" id="6857953">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6857956">if</span>&nbsp;<span class="ident" id="6857959"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6857966">.</span><span class="ident" id="6857967">Short</span><span class="op" id="6857972">(</span><span class="op" id="6857973">)</span>&nbsp;<span class="op" id="6857975">||</span>&nbsp;<span class="op" id="6857978">!</span><span class="op" id="6857979">*</span><span class="ident" id="6857980"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6857993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6857997"><a href="/net/lookup_test.go.html#6857939">t</a></span><span class="op" id="6857998">.</span><span class="ident" id="6857999">Skip</span><span class="op" id="6858003">(</span><span class="string" id="6858004">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6858045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858052">txts</span><span class="op" id="6858056">,</span>&nbsp;<span class="ident" id="6858058">err</span>&nbsp;<span class="op" id="6858062">:=</span>&nbsp;<span class="ident" id="6858065"><a href="/net/lookup.go.html#2645362">LookupTXT</a></span><span class="op" id="6858074">(</span><span class="string" id="6858075">&#34;gmail.com&#34;</span><span class="op" id="6858086">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858089">if</span>&nbsp;<span class="ident" id="6858092"><a href="/net/lookup_test.go.html#6858058">err</a></span>&nbsp;<span class="op" id="6858096">!=</span>&nbsp;<span class="ident" id="6858099">nil</span>&nbsp;<span class="op" id="6858103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858107"><a href="/net/lookup_test.go.html#6857939">t</a></span><span class="op" id="6858108">.</span><span class="ident" id="6858109">Fatal</span><span class="op" id="6858114">(</span><span class="ident" id="6858115"><a href="/net/lookup_test.go.html#6858058">err</a></span><span class="op" id="6858118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858124">if</span>&nbsp;<span class="builtinfunc" id="6858127">len</span><span class="op" id="6858130">(</span><span class="ident" id="6858131"><a href="/net/lookup_test.go.html#6858052">txts</a></span><span class="op" id="6858135">)</span>&nbsp;<span class="op" id="6858137">==</span>&nbsp;<span class="num" id="6858140">0</span>&nbsp;<span class="op" id="6858142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858146"><a href="/net/lookup_test.go.html#6857939">t</a></span><span class="op" id="6858147">.</span><span class="ident" id="6858148">Error</span><span class="op" id="6858153">(</span><span class="string" id="6858154">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6858169">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858175">for</span>&nbsp;<span class="ident" id="6858179">_</span><span class="op" id="6858180">,</span>&nbsp;<span class="ident" id="6858182">txt</span>&nbsp;<span class="op" id="6858186">:=</span>&nbsp;<span class="keyword" id="6858189">range</span>&nbsp;<span class="ident" id="6858195"><a href="/net/lookup_test.go.html#6858052">txts</a></span>&nbsp;<span class="op" id="6858200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858204">if</span>&nbsp;<span class="op" id="6858207">!</span><span class="ident" id="6858208"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6858215">.</span><span class="ident" id="6858216">Contains</span><span class="op" id="6858224">(</span><span class="ident" id="6858225"><a href="/net/lookup_test.go.html#6858182">txt</a></span><span class="op" id="6858228">,</span>&nbsp;<span class="string" id="6858230">&#34;spf&#34;</span><span class="op" id="6858235">)</span>&nbsp;<span class="op" id="6858237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858242"><a href="/net/lookup_test.go.html#6857939">t</a></span><span class="op" id="6858243">.</span><span class="ident" id="6858244">Errorf</span><span class="op" id="6858250">(</span><span class="string" id="6858251">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;spf&nbsp;record&#34;</span><span class="op" id="6858278">,</span>&nbsp;<span class="ident" id="6858280"><a href="/net/lookup_test.go.html#6858182">txt</a></span><span class="op" id="6858283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858287">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858290">}</span><br>
<span class="lineno"></span><span class="op" id="6858292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858295">var</span>&nbsp;<span class="ident" id="6858299">lookupGooglePublicDNSAddrs</span>&nbsp;<span class="op" id="6858326">=</span>&nbsp;<span class="op" id="6858328">[</span><span class="op" id="6858329">]</span><span class="keyword" id="6858330">struct</span>&nbsp;<span class="op" id="6858337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858340">addr</span>&nbsp;<span class="builtintype" id="6858345">string</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858353">name</span>&nbsp;<span class="builtintype" id="6858358">string</span><br>
<span class="lineno"></span><span class="op" id="6858365">}</span><span class="op" id="6858366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858369">{</span><span class="string" id="6858370">&#34;8.8.8.8&#34;</span><span class="op" id="6858379">,</span>&nbsp;<span class="string" id="6858381">&#34;.google.com.&#34;</span><span class="op" id="6858395">}</span><span class="op" id="6858396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858399">{</span><span class="string" id="6858400">&#34;8.8.4.4&#34;</span><span class="op" id="6858409">,</span>&nbsp;<span class="string" id="6858411">&#34;.google.com.&#34;</span><span class="op" id="6858425">}</span><span class="op" id="6858426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858429">{</span><span class="string" id="6858430">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="6858452">,</span>&nbsp;<span class="string" id="6858454">&#34;.google.com.&#34;</span><span class="op" id="6858468">}</span><span class="op" id="6858469">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858472">{</span><span class="string" id="6858473">&#34;2001:4860:4860::8844&#34;</span><span class="op" id="6858495">,</span>&nbsp;<span class="string" id="6858497">&#34;.google.com.&#34;</span><span class="op" id="6858511">}</span><span class="op" id="6858512">,</span><br>
<span class="lineno"></span><span class="op" id="6858514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858517">func</span>&nbsp;<span class="ident" id="6858522">TestLookupGooglePublicDNSAddr</span><span class="op" id="6858551">(</span><span class="ident" id="6858552">t</span>&nbsp;<span class="op" id="6858554">*</span><span class="ident" id="6858555"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6858562">.</span><span class="ident" id="6858563">T</span><span class="op" id="6858564">)</span>&nbsp;<span class="op" id="6858566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858569">if</span>&nbsp;<span class="ident" id="6858572"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6858579">.</span><span class="ident" id="6858580">Short</span><span class="op" id="6858585">(</span><span class="op" id="6858586">)</span>&nbsp;<span class="op" id="6858588">||</span>&nbsp;<span class="op" id="6858591">!</span><span class="op" id="6858592">*</span><span class="ident" id="6858593"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6858606">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858610"><a href="/net/lookup_test.go.html#6858552">t</a></span><span class="op" id="6858611">.</span><span class="ident" id="6858612">Skip</span><span class="op" id="6858616">(</span><span class="string" id="6858617">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6858658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858665">for</span>&nbsp;<span class="ident" id="6858669">_</span><span class="op" id="6858670">,</span>&nbsp;<span class="ident" id="6858672">tt</span>&nbsp;<span class="op" id="6858675">:=</span>&nbsp;<span class="keyword" id="6858678">range</span>&nbsp;<span class="ident" id="6858684"><a href="/net/lookup_test.go.html#6858299">lookupGooglePublicDNSAddrs</a></span>&nbsp;<span class="op" id="6858711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858715">names</span><span class="op" id="6858720">,</span>&nbsp;<span class="ident" id="6858722">err</span>&nbsp;<span class="op" id="6858726">:=</span>&nbsp;<span class="ident" id="6858729"><a href="/net/lookup.go.html#2645562">LookupAddr</a></span><span class="op" id="6858739">(</span><span class="ident" id="6858740"><a href="/net/lookup_test.go.html#6858672">tt</a></span><span class="op" id="6858742">.</span><span class="ident" id="6858743">addr</span><span class="op" id="6858747">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858751">if</span>&nbsp;<span class="ident" id="6858754"><a href="/net/lookup_test.go.html#6858722">err</a></span>&nbsp;<span class="op" id="6858758">!=</span>&nbsp;<span class="ident" id="6858761">nil</span>&nbsp;<span class="op" id="6858765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858770"><a href="/net/lookup_test.go.html#6858552">t</a></span><span class="op" id="6858771">.</span><span class="ident" id="6858772">Fatal</span><span class="op" id="6858777">(</span><span class="ident" id="6858778"><a href="/net/lookup_test.go.html#6858722">err</a></span><span class="op" id="6858781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858789">if</span>&nbsp;<span class="builtinfunc" id="6858792">len</span><span class="op" id="6858795">(</span><span class="ident" id="6858796"><a href="/net/lookup_test.go.html#6858715">names</a></span><span class="op" id="6858801">)</span>&nbsp;<span class="op" id="6858803">==</span>&nbsp;<span class="num" id="6858806">0</span>&nbsp;<span class="op" id="6858808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858813"><a href="/net/lookup_test.go.html#6858552">t</a></span><span class="op" id="6858814">.</span><span class="ident" id="6858815">Error</span><span class="op" id="6858820">(</span><span class="string" id="6858821">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6858836">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858844">for</span>&nbsp;<span class="ident" id="6858848">_</span><span class="op" id="6858849">,</span>&nbsp;<span class="ident" id="6858851">name</span>&nbsp;<span class="op" id="6858856">:=</span>&nbsp;<span class="keyword" id="6858859">range</span>&nbsp;<span class="ident" id="6858865"><a href="/net/lookup_test.go.html#6858715">names</a></span>&nbsp;<span class="op" id="6858871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6858876">if</span>&nbsp;<span class="op" id="6858879">!</span><span class="ident" id="6858880"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6858887">.</span><span class="ident" id="6858888">HasSuffix</span><span class="op" id="6858897">(</span><span class="ident" id="6858898"><a href="/net/lookup_test.go.html#6858851">name</a></span><span class="op" id="6858902">,</span>&nbsp;<span class="ident" id="6858904"><a href="/net/lookup_test.go.html#6858672">tt</a></span><span class="op" id="6858906">.</span><span class="ident" id="6858907">name</span><span class="op" id="6858911">)</span>&nbsp;<span class="op" id="6858913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6858919"><a href="/net/lookup_test.go.html#6858552">t</a></span><span class="op" id="6858920">.</span><span class="ident" id="6858921">Errorf</span><span class="op" id="6858927">(</span><span class="string" id="6858928">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;%q&#34;</span><span class="op" id="6858965">,</span>&nbsp;<span class="ident" id="6858967"><a href="/net/lookup_test.go.html#6858851">name</a></span><span class="op" id="6858971">,</span>&nbsp;<span class="ident" id="6858973"><a href="/net/lookup_test.go.html#6858672">tt</a></span><span class="op" id="6858975">.</span><span class="ident" id="6858976">name</span><span class="op" id="6858980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858985">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6858992">}</span><br>
<span class="lineno"></span><span class="op" id="6858994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6858997">func</span>&nbsp;<span class="ident" id="6859002">TestLookupIANACNAME</span><span class="op" id="6859021">(</span><span class="ident" id="6859022">t</span>&nbsp;<span class="op" id="6859024">*</span><span class="ident" id="6859025"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6859032">.</span><span class="ident" id="6859033">T</span><span class="op" id="6859034">)</span>&nbsp;<span class="op" id="6859036">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859039">if</span>&nbsp;<span class="ident" id="6859042"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6859049">.</span><span class="ident" id="6859050">Short</span><span class="op" id="6859055">(</span><span class="op" id="6859056">)</span>&nbsp;<span class="op" id="6859058">||</span>&nbsp;<span class="op" id="6859061">!</span><span class="op" id="6859062">*</span><span class="ident" id="6859063"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6859076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859080"><a href="/net/lookup_test.go.html#6859022">t</a></span><span class="op" id="6859081">.</span><span class="ident" id="6859082">Skip</span><span class="op" id="6859086">(</span><span class="string" id="6859087">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6859128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859135">cname</span><span class="op" id="6859140">,</span>&nbsp;<span class="ident" id="6859142">err</span>&nbsp;<span class="op" id="6859146">:=</span>&nbsp;<span class="ident" id="6859149"><a href="/net/lookup.go.html#2644276">LookupCNAME</a></span><span class="op" id="6859160">(</span><span class="string" id="6859161">&#34;www.iana.org&#34;</span><span class="op" id="6859175">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859178">if</span>&nbsp;<span class="ident" id="6859181"><a href="/net/lookup_test.go.html#6859142">err</a></span>&nbsp;<span class="op" id="6859185">!=</span>&nbsp;<span class="ident" id="6859188">nil</span>&nbsp;<span class="op" id="6859192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859196"><a href="/net/lookup_test.go.html#6859022">t</a></span><span class="op" id="6859197">.</span><span class="ident" id="6859198">Fatal</span><span class="op" id="6859203">(</span><span class="ident" id="6859204"><a href="/net/lookup_test.go.html#6859142">err</a></span><span class="op" id="6859207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859213">if</span>&nbsp;<span class="op" id="6859216">!</span><span class="ident" id="6859217"><a href="/net/lookup_test.go.html#6856106">strings</a></span><span class="op" id="6859224">.</span><span class="ident" id="6859225">HasSuffix</span><span class="op" id="6859234">(</span><span class="ident" id="6859235"><a href="/net/lookup_test.go.html#6859135">cname</a></span><span class="op" id="6859240">,</span>&nbsp;<span class="string" id="6859242">&#34;.icann.org.&#34;</span><span class="op" id="6859255">)</span>&nbsp;<span class="op" id="6859257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859261"><a href="/net/lookup_test.go.html#6859022">t</a></span><span class="op" id="6859262">.</span><span class="ident" id="6859263">Errorf</span><span class="op" id="6859269">(</span><span class="string" id="6859270">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;record&nbsp;containing&nbsp;.icann.org.&#34;</span><span class="op" id="6859316">,</span>&nbsp;<span class="ident" id="6859318"><a href="/net/lookup_test.go.html#6859135">cname</a></span><span class="op" id="6859323">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859326">}</span><br>
<span class="lineno"></span><span class="op" id="6859328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6859331">func</span>&nbsp;<span class="ident" id="6859336">TestLookupGoogleHost</span><span class="op" id="6859356">(</span><span class="ident" id="6859357">t</span>&nbsp;<span class="op" id="6859359">*</span><span class="ident" id="6859360"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6859367">.</span><span class="ident" id="6859368">T</span><span class="op" id="6859369">)</span>&nbsp;<span class="op" id="6859371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859374">if</span>&nbsp;<span class="ident" id="6859377"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6859384">.</span><span class="ident" id="6859385">Short</span><span class="op" id="6859390">(</span><span class="op" id="6859391">)</span>&nbsp;<span class="op" id="6859393">||</span>&nbsp;<span class="op" id="6859396">!</span><span class="op" id="6859397">*</span><span class="ident" id="6859398"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6859411">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859415"><a href="/net/lookup_test.go.html#6859357">t</a></span><span class="op" id="6859416">.</span><span class="ident" id="6859417">Skip</span><span class="op" id="6859421">(</span><span class="string" id="6859422">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6859463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859470">addrs</span><span class="op" id="6859475">,</span>&nbsp;<span class="ident" id="6859477">err</span>&nbsp;<span class="op" id="6859481">:=</span>&nbsp;<span class="ident" id="6859484"><a href="/net/lookup.go.html#2641898">LookupHost</a></span><span class="op" id="6859494">(</span><span class="string" id="6859495">&#34;google.com&#34;</span><span class="op" id="6859507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859510">if</span>&nbsp;<span class="ident" id="6859513"><a href="/net/lookup_test.go.html#6859477">err</a></span>&nbsp;<span class="op" id="6859517">!=</span>&nbsp;<span class="ident" id="6859520">nil</span>&nbsp;<span class="op" id="6859524">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859528"><a href="/net/lookup_test.go.html#6859357">t</a></span><span class="op" id="6859529">.</span><span class="ident" id="6859530">Fatal</span><span class="op" id="6859535">(</span><span class="ident" id="6859536"><a href="/net/lookup_test.go.html#6859477">err</a></span><span class="op" id="6859539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859545">if</span>&nbsp;<span class="builtinfunc" id="6859548">len</span><span class="op" id="6859551">(</span><span class="ident" id="6859552"><a href="/net/lookup_test.go.html#6859470">addrs</a></span><span class="op" id="6859557">)</span>&nbsp;<span class="op" id="6859559">==</span>&nbsp;<span class="num" id="6859562">0</span>&nbsp;<span class="op" id="6859564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859568"><a href="/net/lookup_test.go.html#6859357">t</a></span><span class="op" id="6859569">.</span><span class="ident" id="6859570">Error</span><span class="op" id="6859575">(</span><span class="string" id="6859576">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6859591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859594">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859597">for</span>&nbsp;<span class="ident" id="6859601">_</span><span class="op" id="6859602">,</span>&nbsp;<span class="ident" id="6859604">addr</span>&nbsp;<span class="op" id="6859609">:=</span>&nbsp;<span class="keyword" id="6859612">range</span>&nbsp;<span class="ident" id="6859618"><a href="/net/lookup_test.go.html#6859470">addrs</a></span>&nbsp;<span class="op" id="6859624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859628">if</span>&nbsp;<span class="ident" id="6859631"><a href="/net/ip.go.html#2617916">ParseIP</a></span><span class="op" id="6859638">(</span><span class="ident" id="6859639"><a href="/net/lookup_test.go.html#6859604">addr</a></span><span class="op" id="6859643">)</span>&nbsp;<span class="op" id="6859645">==</span>&nbsp;<span class="ident" id="6859648">nil</span>&nbsp;<span class="op" id="6859652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859657"><a href="/net/lookup_test.go.html#6859357">t</a></span><span class="op" id="6859658">.</span><span class="ident" id="6859659">Errorf</span><span class="op" id="6859665">(</span><span class="string" id="6859666">&#34;got&nbsp;%q;&nbsp;want&nbsp;a&nbsp;literal&nbsp;ip&nbsp;address&#34;</span><span class="op" id="6859701">,</span>&nbsp;<span class="ident" id="6859703"><a href="/net/lookup_test.go.html#6859604">addr</a></span><span class="op" id="6859707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859714">}</span><br>
<span class="lineno">175</span><span class="op" id="6859716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6859719">func</span>&nbsp;<span class="ident" id="6859724">TestLookupGoogleIP</span><span class="op" id="6859742">(</span><span class="ident" id="6859743">t</span>&nbsp;<span class="op" id="6859745">*</span><span class="ident" id="6859746"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6859753">.</span><span class="ident" id="6859754">T</span><span class="op" id="6859755">)</span>&nbsp;<span class="op" id="6859757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859760">if</span>&nbsp;<span class="ident" id="6859763"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6859770">.</span><span class="ident" id="6859771">Short</span><span class="op" id="6859776">(</span><span class="op" id="6859777">)</span>&nbsp;<span class="op" id="6859779">||</span>&nbsp;<span class="op" id="6859782">!</span><span class="op" id="6859783">*</span><span class="ident" id="6859784"><a href="/net/lookup_test.go.html#6856134">testExternal</a></span>&nbsp;<span class="op" id="6859797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859801"><a href="/net/lookup_test.go.html#6859743">t</a></span><span class="op" id="6859802">.</span><span class="ident" id="6859803">Skip</span><span class="op" id="6859807">(</span><span class="string" id="6859808">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6859849">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859856">ips</span><span class="op" id="6859859">,</span>&nbsp;<span class="ident" id="6859861">err</span>&nbsp;<span class="op" id="6859865">:=</span>&nbsp;<span class="ident" id="6859868"><a href="/net/lookup.go.html#2642100">LookupIP</a></span><span class="op" id="6859876">(</span><span class="string" id="6859877">&#34;google.com&#34;</span><span class="op" id="6859889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859892">if</span>&nbsp;<span class="ident" id="6859895"><a href="/net/lookup_test.go.html#6859861">err</a></span>&nbsp;<span class="op" id="6859899">!=</span>&nbsp;<span class="ident" id="6859902">nil</span>&nbsp;<span class="op" id="6859906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859910"><a href="/net/lookup_test.go.html#6859743">t</a></span><span class="op" id="6859911">.</span><span class="ident" id="6859912">Fatal</span><span class="op" id="6859917">(</span><span class="ident" id="6859918"><a href="/net/lookup_test.go.html#6859861">err</a></span><span class="op" id="6859921">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859927">if</span>&nbsp;<span class="builtinfunc" id="6859930">len</span><span class="op" id="6859933">(</span><span class="ident" id="6859934"><a href="/net/lookup_test.go.html#6859856">ips</a></span><span class="op" id="6859937">)</span>&nbsp;<span class="op" id="6859939">==</span>&nbsp;<span class="num" id="6859942">0</span>&nbsp;<span class="op" id="6859944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6859948"><a href="/net/lookup_test.go.html#6859743">t</a></span><span class="op" id="6859949">.</span><span class="ident" id="6859950">Error</span><span class="op" id="6859955">(</span><span class="string" id="6859956">&#34;got&nbsp;no&nbsp;record&#34;</span><span class="op" id="6859971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6859974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6859977">for</span>&nbsp;<span class="ident" id="6859981">_</span><span class="op" id="6859982">,</span>&nbsp;<span class="ident" id="6859984">ip</span>&nbsp;<span class="op" id="6859987">:=</span>&nbsp;<span class="keyword" id="6859990">range</span>&nbsp;<span class="ident" id="6859996"><a href="/net/lookup_test.go.html#6859856">ips</a></span>&nbsp;<span class="op" id="6860000">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6860004">if</span>&nbsp;<span class="ident" id="6860007"><a href="/net/lookup_test.go.html#6859984">ip</a></span><span class="op" id="6860009">.</span><span class="ident" id="6860010">To4</span><span class="op" id="6860013">(</span><span class="op" id="6860014">)</span>&nbsp;<span class="op" id="6860016">==</span>&nbsp;<span class="ident" id="6860019">nil</span>&nbsp;<span class="op" id="6860023">&amp;&amp;</span>&nbsp;<span class="ident" id="6860026"><a href="/net/lookup_test.go.html#6859984">ip</a></span><span class="op" id="6860028">.</span><span class="ident" id="6860029">To16</span><span class="op" id="6860033">(</span><span class="op" id="6860034">)</span>&nbsp;<span class="op" id="6860036">==</span>&nbsp;<span class="ident" id="6860039">nil</span>&nbsp;<span class="op" id="6860043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860048"><a href="/net/lookup_test.go.html#6859743">t</a></span><span class="op" id="6860049">.</span><span class="ident" id="6860050">Errorf</span><span class="op" id="6860056">(</span><span class="string" id="6860057">&#34;got&nbsp;%v;&nbsp;want&nbsp;an&nbsp;ip&nbsp;address&#34;</span><span class="op" id="6860085">,</span>&nbsp;<span class="ident" id="6860087"><a href="/net/lookup_test.go.html#6859984">ip</a></span><span class="op" id="6860089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860096">}</span><br>
<span class="lineno"></span><span class="op" id="6860098">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="6860101">var</span>&nbsp;<span class="ident" id="6860105">revAddrTests</span>&nbsp;<span class="op" id="6860118">=</span>&nbsp;<span class="op" id="6860120">[</span><span class="op" id="6860121">]</span><span class="keyword" id="6860122">struct</span>&nbsp;<span class="op" id="6860129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860132">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6860142">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860150">Reverse</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6860160">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6860168">ErrPrefix</span>&nbsp;<span class="builtintype" id="6860178">string</span><br>
<span class="lineno">200</span><span class="op" id="6860185">}</span><span class="op" id="6860186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860189">{</span><span class="string" id="6860190">&#34;1.2.3.4&#34;</span><span class="op" id="6860199">,</span>&nbsp;<span class="string" id="6860201">&#34;4.3.2.1.in-addr.arpa.&#34;</span><span class="op" id="6860224">,</span>&nbsp;<span class="string" id="6860226">&#34;&#34;</span><span class="op" id="6860228">}</span><span class="op" id="6860229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860232">{</span><span class="string" id="6860233">&#34;245.110.36.114&#34;</span><span class="op" id="6860249">,</span>&nbsp;<span class="string" id="6860251">&#34;114.36.110.245.in-addr.arpa.&#34;</span><span class="op" id="6860281">,</span>&nbsp;<span class="string" id="6860283">&#34;&#34;</span><span class="op" id="6860285">}</span><span class="op" id="6860286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860289">{</span><span class="string" id="6860290">&#34;::ffff:12.34.56.78&#34;</span><span class="op" id="6860310">,</span>&nbsp;<span class="string" id="6860312">&#34;78.56.34.12.in-addr.arpa.&#34;</span><span class="op" id="6860339">,</span>&nbsp;<span class="string" id="6860341">&#34;&#34;</span><span class="op" id="6860343">}</span><span class="op" id="6860344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860347">{</span><span class="string" id="6860348">&#34;::1&#34;</span><span class="op" id="6860353">,</span>&nbsp;<span class="string" id="6860355">&#34;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.&#34;</span><span class="op" id="6860430">,</span>&nbsp;<span class="string" id="6860432">&#34;&#34;</span><span class="op" id="6860434">}</span><span class="op" id="6860435">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860438">{</span><span class="string" id="6860439">&#34;1::&#34;</span><span class="op" id="6860444">,</span>&nbsp;<span class="string" id="6860446">&#34;0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.0.ip6.arpa.&#34;</span><span class="op" id="6860521">,</span>&nbsp;<span class="string" id="6860523">&#34;&#34;</span><span class="op" id="6860525">}</span><span class="op" id="6860526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860529">{</span><span class="string" id="6860530">&#34;1234:567::89a:bcde&#34;</span><span class="op" id="6860550">,</span>&nbsp;<span class="string" id="6860552">&#34;e.d.c.b.a.9.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="6860627">,</span>&nbsp;<span class="string" id="6860629">&#34;&#34;</span><span class="op" id="6860631">}</span><span class="op" id="6860632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860635">{</span><span class="string" id="6860636">&#34;1234:567:fefe:bcbc:adad:9e4a:89a:bcde&#34;</span><span class="op" id="6860675">,</span>&nbsp;<span class="string" id="6860677">&#34;e.d.c.b.a.9.8.0.a.4.e.9.d.a.d.a.c.b.c.b.e.f.e.f.7.6.5.0.4.3.2.1.ip6.arpa.&#34;</span><span class="op" id="6860752">,</span>&nbsp;<span class="string" id="6860754">&#34;&#34;</span><span class="op" id="6860756">}</span><span class="op" id="6860757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860760">{</span><span class="string" id="6860761">&#34;1.2.3&#34;</span><span class="op" id="6860768">,</span>&nbsp;<span class="string" id="6860770">&#34;&#34;</span><span class="op" id="6860772">,</span>&nbsp;<span class="string" id="6860774">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6860796">}</span><span class="op" id="6860797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860800">{</span><span class="string" id="6860801">&#34;1.2.3.4.5&#34;</span><span class="op" id="6860812">,</span>&nbsp;<span class="string" id="6860814">&#34;&#34;</span><span class="op" id="6860816">,</span>&nbsp;<span class="string" id="6860818">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6860840">}</span><span class="op" id="6860841">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860844">{</span><span class="string" id="6860845">&#34;1234:567:bcbca::89a:bcde&#34;</span><span class="op" id="6860871">,</span>&nbsp;<span class="string" id="6860873">&#34;&#34;</span><span class="op" id="6860875">,</span>&nbsp;<span class="string" id="6860877">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6860899">}</span><span class="op" id="6860900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6860903">{</span><span class="string" id="6860904">&#34;1234:567::bcbc:adad::89a:bcde&#34;</span><span class="op" id="6860935">,</span>&nbsp;<span class="string" id="6860937">&#34;&#34;</span><span class="op" id="6860939">,</span>&nbsp;<span class="string" id="6860941">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="6860963">}</span><span class="op" id="6860964">,</span><br>
<span class="lineno"></span><span class="op" id="6860966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6860969">func</span>&nbsp;<span class="ident" id="6860974">TestReverseAddress</span><span class="op" id="6860992">(</span><span class="ident" id="6860993">t</span>&nbsp;<span class="op" id="6860995">*</span><span class="ident" id="6860996"><a href="/net/lookup_test.go.html#6856117">testing</a></span><span class="op" id="6861003">.</span><span class="ident" id="6861004">T</span><span class="op" id="6861005">)</span>&nbsp;<span class="op" id="6861007">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861010">for</span>&nbsp;<span class="ident" id="6861014">i</span><span class="op" id="6861015">,</span>&nbsp;<span class="ident" id="6861017">tt</span>&nbsp;<span class="op" id="6861020">:=</span>&nbsp;<span class="keyword" id="6861023">range</span>&nbsp;<span class="ident" id="6861029"><a href="/net/lookup_test.go.html#6860105">revAddrTests</a></span>&nbsp;<span class="op" id="6861042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861046">a</span><span class="op" id="6861047">,</span>&nbsp;<span class="ident" id="6861049">err</span>&nbsp;<span class="op" id="6861053">:=</span>&nbsp;<span class="ident" id="6861056"><a href="/net/dnsclient.go.html#2527522">reverseaddr</a></span><span class="op" id="6861067">(</span><span class="ident" id="6861068"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861070">.</span><span class="ident" id="6861071">Addr</span><span class="op" id="6861075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861079">if</span>&nbsp;<span class="builtinfunc" id="6861082">len</span><span class="op" id="6861085">(</span><span class="ident" id="6861086"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861088">.</span><span class="ident" id="6861089">ErrPrefix</span><span class="op" id="6861098">)</span>&nbsp;<span class="op" id="6861100">&gt;</span>&nbsp;<span class="num" id="6861102">0</span>&nbsp;<span class="op" id="6861104">&amp;&amp;</span>&nbsp;<span class="ident" id="6861107"><a href="/net/lookup_test.go.html#6861049">err</a></span>&nbsp;<span class="op" id="6861111">==</span>&nbsp;<span class="ident" id="6861114">nil</span>&nbsp;<span class="op" id="6861118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861123"><a href="/net/lookup_test.go.html#6860993">t</a></span><span class="op" id="6861124">.</span><span class="ident" id="6861125">Errorf</span><span class="op" id="6861131">(</span><span class="string" id="6861132">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;&lt;nil&gt;&nbsp;(error)&#34;</span><span class="op" id="6861169">,</span>&nbsp;<span class="ident" id="6861171"><a href="/net/lookup_test.go.html#6861014">i</a></span><span class="op" id="6861172">,</span>&nbsp;<span class="ident" id="6861174"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861176">.</span><span class="ident" id="6861177">ErrPrefix</span><span class="op" id="6861186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861191">continue</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861206">if</span>&nbsp;<span class="builtinfunc" id="6861209">len</span><span class="op" id="6861212">(</span><span class="ident" id="6861213"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861215">.</span><span class="ident" id="6861216">ErrPrefix</span><span class="op" id="6861225">)</span>&nbsp;<span class="op" id="6861227">==</span>&nbsp;<span class="num" id="6861230">0</span>&nbsp;<span class="op" id="6861232">&amp;&amp;</span>&nbsp;<span class="ident" id="6861235"><a href="/net/lookup_test.go.html#6861049">err</a></span>&nbsp;<span class="op" id="6861239">!=</span>&nbsp;<span class="ident" id="6861242">nil</span>&nbsp;<span class="op" id="6861246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861251"><a href="/net/lookup_test.go.html#6860993">t</a></span><span class="op" id="6861252">.</span><span class="ident" id="6861253">Errorf</span><span class="op" id="6861259">(</span><span class="string" id="6861260">&#34;#%d:&nbsp;expected&nbsp;&lt;nil&gt;,&nbsp;got&nbsp;%q&nbsp;(error)&#34;</span><span class="op" id="6861297">,</span>&nbsp;<span class="ident" id="6861299"><a href="/net/lookup_test.go.html#6861014">i</a></span><span class="op" id="6861300">,</span>&nbsp;<span class="ident" id="6861302"><a href="/net/lookup_test.go.html#6861049">err</a></span><span class="op" id="6861305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861313">if</span>&nbsp;<span class="ident" id="6861316"><a href="/net/lookup_test.go.html#6861049">err</a></span>&nbsp;<span class="op" id="6861320">!=</span>&nbsp;<span class="ident" id="6861323">nil</span>&nbsp;<span class="op" id="6861327">&amp;&amp;</span>&nbsp;<span class="ident" id="6861330"><a href="/net/lookup_test.go.html#6861049">err</a></span><span class="op" id="6861333">.</span><span class="op" id="6861334">(</span><span class="op" id="6861335">*</span><span class="ident" id="6861336"><a href="/net/dnsclient.go.html#2526854">DNSError</a></span><span class="op" id="6861344">)</span><span class="op" id="6861345">.</span><span class="ident" id="6861346">Err</span>&nbsp;<span class="op" id="6861350">!=</span>&nbsp;<span class="ident" id="6861353"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861355">.</span><span class="ident" id="6861356">ErrPrefix</span>&nbsp;<span class="op" id="6861366">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861371"><a href="/net/lookup_test.go.html#6860993">t</a></span><span class="op" id="6861372">.</span><span class="ident" id="6861373">Errorf</span><span class="op" id="6861379">(</span><span class="string" id="6861380">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(mismatched&nbsp;error)&#34;</span><span class="op" id="6861425">,</span>&nbsp;<span class="ident" id="6861427"><a href="/net/lookup_test.go.html#6861014">i</a></span><span class="op" id="6861428">,</span>&nbsp;<span class="ident" id="6861430"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861432">.</span><span class="ident" id="6861433">ErrPrefix</span><span class="op" id="6861442">,</span>&nbsp;<span class="ident" id="6861444"><a href="/net/lookup_test.go.html#6861049">err</a></span><span class="op" id="6861447">.</span><span class="op" id="6861448">(</span><span class="op" id="6861449">*</span><span class="ident" id="6861450"><a href="/net/dnsclient.go.html#2526854">DNSError</a></span><span class="op" id="6861458">)</span><span class="op" id="6861459">.</span><span class="ident" id="6861460">Err</span><span class="op" id="6861463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861471">if</span>&nbsp;<span class="ident" id="6861474"><a href="/net/lookup_test.go.html#6861046">a</a></span>&nbsp;<span class="op" id="6861476">!=</span>&nbsp;<span class="ident" id="6861479"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861481">.</span><span class="ident" id="6861482">Reverse</span>&nbsp;<span class="op" id="6861490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861495"><a href="/net/lookup_test.go.html#6860993">t</a></span><span class="op" id="6861496">.</span><span class="ident" id="6861497">Errorf</span><span class="op" id="6861503">(</span><span class="string" id="6861504">&#34;#%d:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&nbsp;(reverse&nbsp;address)&#34;</span><span class="op" id="6861548">,</span>&nbsp;<span class="ident" id="6861550"><a href="/net/lookup_test.go.html#6861014">i</a></span><span class="op" id="6861551">,</span>&nbsp;<span class="ident" id="6861553"><a href="/net/lookup_test.go.html#6861017">tt</a></span><span class="op" id="6861555">.</span><span class="ident" id="6861556">Reverse</span><span class="op" id="6861563">,</span>&nbsp;<span class="ident" id="6861565"><a href="/net/lookup_test.go.html#6861046">a</a></span><span class="op" id="6861566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861570">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6861573">}</span><br>
<span class="lineno"></span><span class="op" id="6861575">}</span>
</div>
</body>
</html>
