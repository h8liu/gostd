<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5972646">package</span>&nbsp;<span class="ident" id="5972654">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5972661">//&nbsp;Interrupt&nbsp;defines&nbsp;the&nbsp;interrupt&nbsp;page</span><br>
<span class="lineno"></span><span class="keyword" id="5972701">type</span>&nbsp;<span class="ident" id="5972706">interrupt</span>&nbsp;<span class="keyword" id="5972716">struct</span>&nbsp;<span class="op" id="5972723">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5972726">p</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972731">*</span><span class="ident" id="5972732"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979913">page</a></span>&nbsp;&nbsp;<span class="comment" id="5972738">//&nbsp;the&nbsp;dma&nbsp;page&nbsp;for&nbsp;interrupt&nbsp;handler</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5972777">base</span>&nbsp;<span class="builtintype" id="5972782">uint32</span>&nbsp;<span class="comment" id="5972789">//&nbsp;dma&nbsp;offset</span><br>
<span class="lineno"></span><span class="op" id="5972803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5972806">//&nbsp;Number&nbsp;of&nbsp;interrupts</span><br>
<span class="lineno">10</span><span class="keyword" id="5972830">const</span>&nbsp;<span class="ident" id="5972836">Ninterrupt</span>&nbsp;<span class="op" id="5972847">=</span>&nbsp;<span class="num" id="5972849">256</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5972854">const</span>&nbsp;<span class="op" id="5972860">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5972863">intFlags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972876">=</span>&nbsp;<span class="num" id="5972878">0</span>&nbsp;&nbsp;<span class="comment" id="5972881">//&nbsp;flags,&nbsp;bit&nbsp;0&nbsp;is&nbsp;master&nbsp;enabling&nbsp;switch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5972924">intKernelSP</span>&nbsp;&nbsp;<span class="op" id="5972937">=</span>&nbsp;<span class="num" id="5972939">4</span>&nbsp;&nbsp;<span class="comment" id="5972942">//&nbsp;position&nbsp;of&nbsp;the&nbsp;handler&nbsp;stack&nbsp;base&nbsp;pointer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5972989">intHandlerPC</span>&nbsp;<span class="op" id="5973002">=</span>&nbsp;<span class="num" id="5973004">8</span>&nbsp;&nbsp;<span class="comment" id="5973007">//&nbsp;position&nbsp;of&nbsp;the&nbsp;handler&nbsp;start&nbsp;PC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973044">intSyscallPC</span>&nbsp;<span class="op" id="5973057">=</span>&nbsp;<span class="num" id="5973059">12</span>&nbsp;<span class="comment" id="5973062">//&nbsp;position&nbsp;of&nbsp;the&nbsp;syscall&nbsp;start&nbsp;PC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973099">intMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973112">=</span>&nbsp;<span class="num" id="5973114">32</span>&nbsp;<span class="comment" id="5973117">//&nbsp;interrupt&nbsp;enable&nbsp;mask&nbsp;bits&nbsp;offset&nbsp;(32&nbsp;bytes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973166">intPending</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5973179">=</span>&nbsp;<span class="num" id="5973181">64</span>&nbsp;<span class="comment" id="5973184">//&nbsp;interrupt&nbsp;pending&nbsp;bits&nbsp;offset&nbsp;(32&nbsp;bytes)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973230">intCtrlSize</span>&nbsp;<span class="op" id="5973242">=</span>&nbsp;<span class="num" id="5973244">128</span><br>
<span class="lineno"></span><span class="op" id="5973248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5973251">//&nbsp;NewInterrupt&nbsp;creates&nbsp;a&nbsp;interrupt&nbsp;on&nbsp;the&nbsp;given&nbsp;DMA&nbsp;page.</span><br>
<span class="lineno"></span><span class="keyword" id="5973310">func</span>&nbsp;<span class="ident" id="5973315">newInterrupt</span><span class="op" id="5973327">(</span><span class="ident" id="5973328">p</span>&nbsp;<span class="op" id="5973330">*</span><span class="ident" id="5973331"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979913">page</a></span><span class="op" id="5973335">,</span>&nbsp;<span class="ident" id="5973337">core</span>&nbsp;<span class="builtintype" id="5973342">byte</span><span class="op" id="5973346">)</span>&nbsp;<span class="op" id="5973348">*</span><span class="ident" id="5973349"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span>&nbsp;<span class="op" id="5973359">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973362">ret</span>&nbsp;<span class="op" id="5973366">:=</span>&nbsp;<span class="builtinfunc" id="5973369">new</span><span class="op" id="5973372">(</span><span class="ident" id="5973373"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973385"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973362">ret</a></span><span class="op" id="5973388">.</span><span class="ident" id="5973389">p</span>&nbsp;<span class="op" id="5973391">=</span>&nbsp;<span class="ident" id="5973393"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973328">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973396"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973362">ret</a></span><span class="op" id="5973399">.</span><span class="ident" id="5973400">base</span>&nbsp;<span class="op" id="5973405">=</span>&nbsp;<span class="builtintype" id="5973407">uint32</span><span class="op" id="5973413">(</span><span class="ident" id="5973414"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973337">core</a></span><span class="op" id="5973418">)</span>&nbsp;<span class="op" id="5973420">*</span>&nbsp;<span class="ident" id="5973422"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973230">intCtrlSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5973435">if</span>&nbsp;<span class="ident" id="5973438"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973362">ret</a></span><span class="op" id="5973441">.</span><span class="ident" id="5973442">base</span><span class="op" id="5973446">+</span><span class="ident" id="5973447"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973230">intCtrlSize</a></span>&nbsp;<span class="op" id="5973459">&gt;</span>&nbsp;<span class="ident" id="5973461"><a href="/lonnie.io/e8vm/arch8/page.go.html#5979836">PageSize</a></span>&nbsp;<span class="op" id="5973470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5973474">panic</span><span class="op" id="5973479">(</span><span class="string" id="5973480">&#34;bug&#34;</span><span class="op" id="5973485">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5973488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5973492">return</span>&nbsp;<span class="ident" id="5973499"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973362">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5973503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5973506">func</span>&nbsp;<span class="op" id="5973511">(</span><span class="ident" id="5973512">in</span>&nbsp;<span class="op" id="5973515">*</span><span class="ident" id="5973516"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973525">)</span>&nbsp;<span class="ident" id="5973527">readWord</span><span class="op" id="5973535">(</span><span class="ident" id="5973536">off</span>&nbsp;<span class="builtintype" id="5973540">uint32</span><span class="op" id="5973546">)</span>&nbsp;<span class="builtintype" id="5973548">uint32</span>&nbsp;<span class="op" id="5973555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5973558">return</span>&nbsp;<span class="ident" id="5973565"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973512">in</a></span><span class="op" id="5973567">.</span><span class="ident" id="5973568">p</span><span class="op" id="5973569">.</span><span class="ident" id="5973570">ReadWord</span><span class="op" id="5973578">(</span><span class="ident" id="5973579"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973512">in</a></span><span class="op" id="5973581">.</span><span class="ident" id="5973582">base</span>&nbsp;<span class="op" id="5973587">+</span>&nbsp;<span class="ident" id="5973589"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973536">off</a></span><span class="op" id="5973592">)</span><br>
<span class="lineno"></span><span class="op" id="5973594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5973597">func</span>&nbsp;<span class="op" id="5973602">(</span><span class="ident" id="5973603">in</span>&nbsp;<span class="op" id="5973606">*</span><span class="ident" id="5973607"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973616">)</span>&nbsp;<span class="ident" id="5973618">readByte</span><span class="op" id="5973626">(</span><span class="ident" id="5973627">off</span>&nbsp;<span class="builtintype" id="5973631">uint32</span><span class="op" id="5973637">)</span>&nbsp;<span class="builtintype" id="5973639">byte</span>&nbsp;<span class="op" id="5973644">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5973647">return</span>&nbsp;<span class="ident" id="5973654"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973603">in</a></span><span class="op" id="5973656">.</span><span class="ident" id="5973657">p</span><span class="op" id="5973658">.</span><span class="ident" id="5973659">ReadByte</span><span class="op" id="5973667">(</span><span class="ident" id="5973668"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973603">in</a></span><span class="op" id="5973670">.</span><span class="ident" id="5973671">base</span>&nbsp;<span class="op" id="5973676">+</span>&nbsp;<span class="ident" id="5973678"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973627">off</a></span><span class="op" id="5973681">)</span><br>
<span class="lineno"></span><span class="op" id="5973683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5973686">func</span>&nbsp;<span class="op" id="5973691">(</span><span class="ident" id="5973692">in</span>&nbsp;<span class="op" id="5973695">*</span><span class="ident" id="5973696"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973705">)</span>&nbsp;<span class="ident" id="5973707">writeWord</span><span class="op" id="5973716">(</span><span class="ident" id="5973717">off</span>&nbsp;<span class="builtintype" id="5973721">uint32</span><span class="op" id="5973727">,</span>&nbsp;<span class="ident" id="5973729">v</span>&nbsp;<span class="builtintype" id="5973731">uint32</span><span class="op" id="5973737">)</span>&nbsp;<span class="op" id="5973739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973742"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973692">in</a></span><span class="op" id="5973744">.</span><span class="ident" id="5973745">p</span><span class="op" id="5973746">.</span><span class="ident" id="5973747">WriteWord</span><span class="op" id="5973756">(</span><span class="ident" id="5973757"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973692">in</a></span><span class="op" id="5973759">.</span><span class="ident" id="5973760">base</span><span class="op" id="5973764">+</span><span class="ident" id="5973765"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973717">off</a></span><span class="op" id="5973768">,</span>&nbsp;<span class="ident" id="5973770"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973729">v</a></span><span class="op" id="5973771">)</span><br>
<span class="lineno">45</span><span class="op" id="5973773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5973776">func</span>&nbsp;<span class="op" id="5973781">(</span><span class="ident" id="5973782">in</span>&nbsp;<span class="op" id="5973785">*</span><span class="ident" id="5973786"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973795">)</span>&nbsp;<span class="ident" id="5973797">writeByte</span><span class="op" id="5973806">(</span><span class="ident" id="5973807">off</span>&nbsp;<span class="builtintype" id="5973811">uint32</span><span class="op" id="5973817">,</span>&nbsp;<span class="ident" id="5973819">v</span>&nbsp;<span class="builtintype" id="5973821">byte</span><span class="op" id="5973825">)</span>&nbsp;<span class="op" id="5973827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5973830"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973782">in</a></span><span class="op" id="5973832">.</span><span class="ident" id="5973833">p</span><span class="op" id="5973834">.</span><span class="ident" id="5973835">WriteByte</span><span class="op" id="5973844">(</span><span class="ident" id="5973845"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973782">in</a></span><span class="op" id="5973847">.</span><span class="ident" id="5973848">base</span><span class="op" id="5973852">+</span><span class="ident" id="5973853"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973807">off</a></span><span class="op" id="5973856">,</span>&nbsp;<span class="ident" id="5973858"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973819">v</a></span><span class="op" id="5973859">)</span><br>
<span class="lineno"></span><span class="op" id="5973861">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5973864">func</span>&nbsp;<span class="op" id="5973869">(</span><span class="ident" id="5973870">in</span>&nbsp;<span class="op" id="5973873">*</span><span class="ident" id="5973874"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973883">)</span>&nbsp;<span class="ident" id="5973885">kernelSP</span><span class="op" id="5973893">(</span><span class="op" id="5973894">)</span>&nbsp;<span class="builtintype" id="5973896">uint32</span>&nbsp;<span class="op" id="5973903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5973906">return</span>&nbsp;<span class="ident" id="5973913"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973870">in</a></span><span class="op" id="5973915">.</span><span class="ident" id="5973916">readWord</span><span class="op" id="5973924">(</span><span class="ident" id="5973925"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972924">intKernelSP</a></span><span class="op" id="5973936">)</span><br>
<span class="lineno"></span><span class="op" id="5973938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="5973941">func</span>&nbsp;<span class="op" id="5973946">(</span><span class="ident" id="5973947">in</span>&nbsp;<span class="op" id="5973950">*</span><span class="ident" id="5973951"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5973960">)</span>&nbsp;<span class="ident" id="5973962">handlerPC</span><span class="op" id="5973971">(</span><span class="op" id="5973972">)</span>&nbsp;<span class="builtintype" id="5973974">uint32</span>&nbsp;<span class="op" id="5973981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5973984">return</span>&nbsp;<span class="ident" id="5973991"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973947">in</a></span><span class="op" id="5973993">.</span><span class="ident" id="5973994">readWord</span><span class="op" id="5974002">(</span><span class="ident" id="5974003"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972989">intHandlerPC</a></span><span class="op" id="5974015">)</span><br>
<span class="lineno"></span><span class="op" id="5974017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5974020">func</span>&nbsp;<span class="op" id="5974025">(</span><span class="ident" id="5974026">in</span>&nbsp;<span class="op" id="5974029">*</span><span class="ident" id="5974030"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5974039">)</span>&nbsp;<span class="ident" id="5974041">syscallPC</span><span class="op" id="5974050">(</span><span class="op" id="5974051">)</span>&nbsp;<span class="builtintype" id="5974053">uint32</span>&nbsp;<span class="op" id="5974060">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5974063">return</span>&nbsp;<span class="ident" id="5974070"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974026">in</a></span><span class="op" id="5974072">.</span><span class="ident" id="5974073">readWord</span><span class="op" id="5974081">(</span><span class="ident" id="5974082"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973044">intSyscallPC</a></span><span class="op" id="5974094">)</span><br>
<span class="lineno"></span><span class="op" id="5974096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5974099">//&nbsp;Issue&nbsp;issues&nbsp;an&nbsp;interrupt.&nbsp;If&nbsp;the&nbsp;interrupt&nbsp;is&nbsp;already&nbsp;issued,</span><br>
<span class="lineno"></span><span class="comment" id="5974165">//&nbsp;this&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">65</span><span class="keyword" id="5974188">func</span>&nbsp;<span class="op" id="5974193">(</span><span class="ident" id="5974194">in</span>&nbsp;<span class="op" id="5974197">*</span><span class="ident" id="5974198"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5974207">)</span>&nbsp;<span class="ident" id="5974209">Issue</span><span class="op" id="5974214">(</span><span class="ident" id="5974215">i</span>&nbsp;<span class="builtintype" id="5974217">byte</span><span class="op" id="5974221">)</span>&nbsp;<span class="op" id="5974223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974226">off</span>&nbsp;<span class="op" id="5974230">:=</span>&nbsp;<span class="builtintype" id="5974233">uint32</span><span class="op" id="5974239">(</span><span class="ident" id="5974240"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974215">i</a></span><span class="op" id="5974241">/</span><span class="num" id="5974242">8</span><span class="op" id="5974243">)</span>&nbsp;<span class="op" id="5974245">+</span>&nbsp;<span class="ident" id="5974247"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973166">intPending</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974259">b</span>&nbsp;<span class="op" id="5974261">:=</span>&nbsp;<span class="ident" id="5974264"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974194">in</a></span><span class="op" id="5974266">.</span><span class="ident" id="5974267">readByte</span><span class="op" id="5974275">(</span><span class="ident" id="5974276"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974226">off</a></span><span class="op" id="5974279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974282"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974259">b</a></span>&nbsp;<span class="op" id="5974284">|=</span>&nbsp;<span class="num" id="5974287">0x1</span>&nbsp;<span class="op" id="5974291">&lt;&lt;</span>&nbsp;<span class="op" id="5974294">(</span><span class="ident" id="5974295"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974215">i</a></span>&nbsp;<span class="op" id="5974297">%</span>&nbsp;<span class="num" id="5974299">8</span><span class="op" id="5974300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974303"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974194">in</a></span><span class="op" id="5974305">.</span><span class="ident" id="5974306">writeByte</span><span class="op" id="5974315">(</span><span class="ident" id="5974316"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974226">off</a></span><span class="op" id="5974319">,</span>&nbsp;<span class="ident" id="5974321"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974259">b</a></span><span class="op" id="5974322">)</span><br>
<span class="lineno">70</span><span class="op" id="5974324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5974327">//&nbsp;Clear&nbsp;clears&nbsp;an&nbsp;interrupt.&nbsp;If&nbsp;the&nbsp;interrupt&nbsp;is&nbsp;already&nbsp;cleared,</span><br>
<span class="lineno"></span><span class="comment" id="5974394">//&nbsp;this&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno"></span><span class="keyword" id="5974417">func</span>&nbsp;<span class="op" id="5974422">(</span><span class="ident" id="5974423">in</span>&nbsp;<span class="op" id="5974426">*</span><span class="ident" id="5974427"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5974436">)</span>&nbsp;<span class="ident" id="5974438">Clear</span><span class="op" id="5974443">(</span><span class="ident" id="5974444">i</span>&nbsp;<span class="builtintype" id="5974446">byte</span><span class="op" id="5974450">)</span>&nbsp;<span class="op" id="5974452">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974455">off</span>&nbsp;<span class="op" id="5974459">:=</span>&nbsp;<span class="builtintype" id="5974462">uint32</span><span class="op" id="5974468">(</span><span class="ident" id="5974469"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974444">i</a></span><span class="op" id="5974470">/</span><span class="num" id="5974471">8</span><span class="op" id="5974472">)</span>&nbsp;<span class="op" id="5974474">+</span>&nbsp;<span class="ident" id="5974476"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973166">intPending</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974488">b</span>&nbsp;<span class="op" id="5974490">:=</span>&nbsp;<span class="ident" id="5974493"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974423">in</a></span><span class="op" id="5974495">.</span><span class="ident" id="5974496">readByte</span><span class="op" id="5974504">(</span><span class="ident" id="5974505"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974455">off</a></span><span class="op" id="5974508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974511"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974488">b</a></span>&nbsp;<span class="op" id="5974513">&amp;=</span>&nbsp;<span class="op" id="5974516">^</span><span class="op" id="5974517">(</span><span class="num" id="5974518">0x1</span>&nbsp;<span class="op" id="5974522">&lt;&lt;</span>&nbsp;<span class="op" id="5974525">(</span><span class="ident" id="5974526"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974444">i</a></span>&nbsp;<span class="op" id="5974528">%</span>&nbsp;<span class="num" id="5974530">8</span><span class="op" id="5974531">)</span><span class="op" id="5974532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974535"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974423">in</a></span><span class="op" id="5974537">.</span><span class="ident" id="5974538">writeByte</span><span class="op" id="5974547">(</span><span class="ident" id="5974548"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974455">off</a></span><span class="op" id="5974551">,</span>&nbsp;<span class="ident" id="5974553"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974488">b</a></span><span class="op" id="5974554">)</span><br>
<span class="lineno"></span><span class="op" id="5974556">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5974559">//&nbsp;Enable&nbsp;sets&nbsp;the&nbsp;interrupt&nbsp;enable&nbsp;bit&nbsp;in&nbsp;the&nbsp;flags.</span><br>
<span class="lineno"></span><span class="keyword" id="5974613">func</span>&nbsp;<span class="op" id="5974618">(</span><span class="ident" id="5974619">in</span>&nbsp;<span class="op" id="5974622">*</span><span class="ident" id="5974623"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5974632">)</span>&nbsp;<span class="ident" id="5974634">Enable</span><span class="op" id="5974640">(</span><span class="op" id="5974641">)</span>&nbsp;<span class="op" id="5974643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974646">b</span>&nbsp;<span class="op" id="5974648">:=</span>&nbsp;<span class="ident" id="5974651"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974619">in</a></span><span class="op" id="5974653">.</span><span class="ident" id="5974654">readByte</span><span class="op" id="5974662">(</span><span class="ident" id="5974663"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972863">intFlags</a></span><span class="op" id="5974671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974674"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974646">b</a></span>&nbsp;<span class="op" id="5974676">|=</span>&nbsp;<span class="num" id="5974679">0x1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974684"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974619">in</a></span><span class="op" id="5974686">.</span><span class="ident" id="5974687">writeByte</span><span class="op" id="5974696">(</span><span class="ident" id="5974697"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972863">intFlags</a></span><span class="op" id="5974705">,</span>&nbsp;<span class="ident" id="5974707"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974646">b</a></span><span class="op" id="5974708">)</span><br>
<span class="lineno"></span><span class="op" id="5974710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5974713">//&nbsp;Enabled&nbsp;tests&nbsp;if&nbsp;interrupt&nbsp;is&nbsp;enabled</span><br>
<span class="lineno"></span><span class="keyword" id="5974754">func</span>&nbsp;<span class="op" id="5974759">(</span><span class="ident" id="5974760">in</span>&nbsp;<span class="op" id="5974763">*</span><span class="ident" id="5974764"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5974773">)</span>&nbsp;<span class="ident" id="5974775">Enabled</span><span class="op" id="5974782">(</span><span class="op" id="5974783">)</span>&nbsp;<span class="builtintype" id="5974785">bool</span>&nbsp;<span class="op" id="5974790">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974793">b</span>&nbsp;<span class="op" id="5974795">:=</span>&nbsp;<span class="ident" id="5974798"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974760">in</a></span><span class="op" id="5974800">.</span><span class="ident" id="5974801">readByte</span><span class="op" id="5974809">(</span><span class="ident" id="5974810"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972863">intFlags</a></span><span class="op" id="5974818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5974821">return</span>&nbsp;<span class="op" id="5974828">(</span><span class="ident" id="5974829"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974793">b</a></span>&nbsp;<span class="op" id="5974831">&amp;</span>&nbsp;<span class="num" id="5974833">0x1</span><span class="op" id="5974836">)</span>&nbsp;<span class="op" id="5974838">!=</span>&nbsp;<span class="num" id="5974841">0</span><br>
<span class="lineno"></span><span class="op" id="5974843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5974846">//&nbsp;Disable&nbsp;clears&nbsp;the&nbsp;interrupt&nbsp;enable&nbsp;bit&nbsp;in&nbsp;the&nbsp;flags.</span><br>
<span class="lineno">95</span><span class="keyword" id="5974903">func</span>&nbsp;<span class="op" id="5974908">(</span><span class="ident" id="5974909">in</span>&nbsp;<span class="op" id="5974912">*</span><span class="ident" id="5974913"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5974922">)</span>&nbsp;<span class="ident" id="5974924">Disable</span><span class="op" id="5974931">(</span><span class="op" id="5974932">)</span>&nbsp;<span class="op" id="5974934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974937">b</span>&nbsp;<span class="op" id="5974939">:=</span>&nbsp;<span class="ident" id="5974942"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974909">in</a></span><span class="op" id="5974944">.</span><span class="ident" id="5974945">readByte</span><span class="op" id="5974953">(</span><span class="ident" id="5974954"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972863">intFlags</a></span><span class="op" id="5974962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974965"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974937">b</a></span>&nbsp;<span class="op" id="5974967">&amp;=</span>&nbsp;<span class="op" id="5974970">^</span><span class="builtintype" id="5974971">byte</span><span class="op" id="5974975">(</span><span class="num" id="5974976">0x1</span><span class="op" id="5974979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5974982"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974909">in</a></span><span class="op" id="5974984">.</span><span class="ident" id="5974985">writeByte</span><span class="op" id="5974994">(</span><span class="ident" id="5974995"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972863">intFlags</a></span><span class="op" id="5975003">,</span>&nbsp;<span class="ident" id="5975005"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5974937">b</a></span><span class="op" id="5975006">)</span><br>
<span class="lineno"></span><span class="op" id="5975008">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5975011">//&nbsp;EnableInt&nbsp;enables&nbsp;a&nbsp;particular&nbsp;interrupt&nbsp;by&nbsp;clearing&nbsp;the&nbsp;mask.</span><br>
<span class="lineno"></span><span class="keyword" id="5975077">func</span>&nbsp;<span class="op" id="5975082">(</span><span class="ident" id="5975083">in</span>&nbsp;<span class="op" id="5975086">*</span><span class="ident" id="5975087"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5975096">)</span>&nbsp;<span class="ident" id="5975098">EnableInt</span><span class="op" id="5975107">(</span><span class="ident" id="5975108">i</span>&nbsp;<span class="builtintype" id="5975110">byte</span><span class="op" id="5975114">)</span>&nbsp;<span class="op" id="5975116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975119">off</span>&nbsp;<span class="op" id="5975123">:=</span>&nbsp;<span class="builtintype" id="5975126">uint32</span><span class="op" id="5975132">(</span><span class="ident" id="5975133"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975108">i</a></span><span class="op" id="5975134">/</span><span class="num" id="5975135">8</span><span class="op" id="5975136">)</span>&nbsp;<span class="op" id="5975138">+</span>&nbsp;<span class="ident" id="5975140"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973099">intMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975149">b</span>&nbsp;<span class="op" id="5975151">:=</span>&nbsp;<span class="ident" id="5975154"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975083">in</a></span><span class="op" id="5975156">.</span><span class="ident" id="5975157">readByte</span><span class="op" id="5975165">(</span><span class="ident" id="5975166"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975119">off</a></span><span class="op" id="5975169">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975172"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975149">b</a></span>&nbsp;<span class="op" id="5975174">|=</span>&nbsp;<span class="num" id="5975177">0x1</span>&nbsp;<span class="op" id="5975181">&lt;&lt;</span>&nbsp;<span class="op" id="5975184">(</span><span class="ident" id="5975185"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975108">i</a></span>&nbsp;<span class="op" id="5975187">%</span>&nbsp;<span class="num" id="5975189">8</span><span class="op" id="5975190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975193"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975083">in</a></span><span class="op" id="5975195">.</span><span class="ident" id="5975196">writeByte</span><span class="op" id="5975205">(</span><span class="ident" id="5975206"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975119">off</a></span><span class="op" id="5975209">,</span>&nbsp;<span class="ident" id="5975211"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975149">b</a></span><span class="op" id="5975212">)</span><br>
<span class="lineno"></span><span class="op" id="5975214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5975217">//&nbsp;DisableInt&nbsp;disables&nbsp;a&nbsp;particular&nbsp;interrupt&nbsp;by&nbsp;setting&nbsp;the&nbsp;mask.</span><br>
<span class="lineno">110</span><span class="keyword" id="5975284">func</span>&nbsp;<span class="op" id="5975289">(</span><span class="ident" id="5975290">in</span>&nbsp;<span class="op" id="5975293">*</span><span class="ident" id="5975294"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5975303">)</span>&nbsp;<span class="ident" id="5975305">DisableInt</span><span class="op" id="5975315">(</span><span class="ident" id="5975316">i</span>&nbsp;<span class="builtintype" id="5975318">byte</span><span class="op" id="5975322">)</span>&nbsp;<span class="op" id="5975324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975327">off</span>&nbsp;<span class="op" id="5975331">:=</span>&nbsp;<span class="builtintype" id="5975334">uint32</span><span class="op" id="5975340">(</span><span class="ident" id="5975341"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975316">i</a></span><span class="op" id="5975342">/</span><span class="num" id="5975343">8</span><span class="op" id="5975344">)</span>&nbsp;<span class="op" id="5975346">+</span>&nbsp;<span class="ident" id="5975348"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973099">intMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975357">b</span>&nbsp;<span class="op" id="5975359">:=</span>&nbsp;<span class="ident" id="5975362"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975290">in</a></span><span class="op" id="5975364">.</span><span class="ident" id="5975365">readByte</span><span class="op" id="5975373">(</span><span class="ident" id="5975374"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975327">off</a></span><span class="op" id="5975377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975380"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975357">b</a></span>&nbsp;<span class="op" id="5975382">&amp;=</span>&nbsp;<span class="op" id="5975385">^</span><span class="op" id="5975386">(</span><span class="num" id="5975387">0x1</span>&nbsp;<span class="op" id="5975391">&lt;&lt;</span>&nbsp;<span class="op" id="5975394">(</span><span class="ident" id="5975395"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975316">i</a></span>&nbsp;<span class="op" id="5975397">%</span>&nbsp;<span class="num" id="5975399">8</span><span class="op" id="5975400">)</span><span class="op" id="5975401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975404"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975290">in</a></span><span class="op" id="5975406">.</span><span class="ident" id="5975407">writeByte</span><span class="op" id="5975416">(</span><span class="ident" id="5975417"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975327">off</a></span><span class="op" id="5975420">,</span>&nbsp;<span class="ident" id="5975422"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975357">b</a></span><span class="op" id="5975423">)</span><br>
<span class="lineno">115</span><span class="op" id="5975425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5975428">//&nbsp;Flags&nbsp;returns&nbsp;the&nbsp;flags&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5975461">func</span>&nbsp;<span class="op" id="5975466">(</span><span class="ident" id="5975467">in</span>&nbsp;<span class="op" id="5975470">*</span><span class="ident" id="5975471"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5975480">)</span>&nbsp;<span class="ident" id="5975482">Flags</span><span class="op" id="5975487">(</span><span class="op" id="5975488">)</span>&nbsp;<span class="builtintype" id="5975490">byte</span>&nbsp;<span class="op" id="5975495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975498">return</span>&nbsp;<span class="ident" id="5975505"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975467">in</a></span><span class="op" id="5975507">.</span><span class="ident" id="5975508">readByte</span><span class="op" id="5975516">(</span><span class="ident" id="5975517"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972863">intFlags</a></span><span class="op" id="5975525">)</span><br>
<span class="lineno">120</span><span class="op" id="5975527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5975530">//&nbsp;Poll&nbsp;looks&nbsp;for&nbsp;the&nbsp;next&nbsp;pending&nbsp;interrupt.</span><br>
<span class="lineno"></span><span class="keyword" id="5975576">func</span>&nbsp;<span class="op" id="5975581">(</span><span class="ident" id="5975582">in</span>&nbsp;<span class="op" id="5975585">*</span><span class="ident" id="5975586"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972706">interrupt</a></span><span class="op" id="5975595">)</span>&nbsp;<span class="ident" id="5975597">Poll</span><span class="op" id="5975601">(</span><span class="op" id="5975602">)</span>&nbsp;<span class="op" id="5975604">(</span><span class="builtintype" id="5975605">bool</span><span class="op" id="5975609">,</span>&nbsp;<span class="builtintype" id="5975611">byte</span><span class="op" id="5975615">)</span>&nbsp;<span class="op" id="5975617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975620">flag</span>&nbsp;<span class="op" id="5975625">:=</span>&nbsp;<span class="ident" id="5975628"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975582">in</a></span><span class="op" id="5975630">.</span><span class="ident" id="5975631">Flags</span><span class="op" id="5975636">(</span><span class="op" id="5975637">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975640">if</span>&nbsp;<span class="ident" id="5975643"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975620">flag</a></span><span class="op" id="5975647">&amp;</span><span class="num" id="5975648">0x1</span>&nbsp;<span class="op" id="5975652">==</span>&nbsp;<span class="num" id="5975655">0</span>&nbsp;<span class="op" id="5975657">{</span>&nbsp;<span class="comment" id="5975659">//&nbsp;interrupt&nbsp;is&nbsp;disabled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975686">return</span>&nbsp;<span class="builtintype" id="5975693">false</span><span class="op" id="5975698">,</span>&nbsp;<span class="num" id="5975700">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5975703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5975707">//&nbsp;search&nbsp;bits&nbsp;based&nbsp;on&nbsp;priorities.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5975744">//&nbsp;smaller&nbsp;is&nbsp;higher</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975766">for</span>&nbsp;<span class="ident" id="5975770">i</span>&nbsp;<span class="op" id="5975772">:=</span>&nbsp;<span class="builtintype" id="5975775">uint32</span><span class="op" id="5975781">(</span><span class="num" id="5975782">0</span><span class="op" id="5975783">)</span><span class="op" id="5975784">;</span>&nbsp;<span class="ident" id="5975786"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975770">i</a></span>&nbsp;<span class="op" id="5975788">&lt;</span>&nbsp;<span class="ident" id="5975790"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5972836">Ninterrupt</a></span><span class="op" id="5975800">/</span><span class="num" id="5975801">8</span><span class="op" id="5975802">;</span>&nbsp;<span class="ident" id="5975804"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975770">i</a></span><span class="op" id="5975805">++</span>&nbsp;<span class="op" id="5975808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975812">pending</span>&nbsp;<span class="op" id="5975820">:=</span>&nbsp;<span class="ident" id="5975823"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975582">in</a></span><span class="op" id="5975825">.</span><span class="ident" id="5975826">readByte</span><span class="op" id="5975834">(</span><span class="ident" id="5975835"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973166">intPending</a></span>&nbsp;<span class="op" id="5975846">+</span>&nbsp;<span class="ident" id="5975848"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975770">i</a></span><span class="op" id="5975849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975853">mask</span>&nbsp;<span class="op" id="5975858">:=</span>&nbsp;<span class="ident" id="5975861"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975582">in</a></span><span class="op" id="5975863">.</span><span class="ident" id="5975864">readByte</span><span class="op" id="5975872">(</span><span class="ident" id="5975873"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5973099">intMask</a></span>&nbsp;<span class="op" id="5975881">+</span>&nbsp;<span class="ident" id="5975883"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975770">i</a></span><span class="op" id="5975884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5975888"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975812">pending</a></span>&nbsp;<span class="op" id="5975896">&amp;=</span>&nbsp;<span class="ident" id="5975899"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975853">mask</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975906">if</span>&nbsp;<span class="ident" id="5975909"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975812">pending</a></span>&nbsp;<span class="op" id="5975917">==</span>&nbsp;<span class="num" id="5975920">0</span>&nbsp;<span class="op" id="5975922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975927">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5975938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975943">for</span>&nbsp;<span class="ident" id="5975947">b</span>&nbsp;<span class="op" id="5975949">:=</span>&nbsp;<span class="builtintype" id="5975952">byte</span><span class="op" id="5975956">(</span><span class="num" id="5975957">0</span><span class="op" id="5975958">)</span><span class="op" id="5975959">;</span>&nbsp;<span class="ident" id="5975961"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975947">b</a></span>&nbsp;<span class="op" id="5975963">&lt;</span>&nbsp;<span class="num" id="5975965">8</span><span class="op" id="5975966">;</span>&nbsp;<span class="ident" id="5975968"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975947">b</a></span><span class="op" id="5975969">++</span>&nbsp;<span class="op" id="5975972">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5975977">if</span>&nbsp;<span class="ident" id="5975980"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975812">pending</a></span><span class="op" id="5975987">&amp;</span><span class="op" id="5975988">(</span><span class="num" id="5975989">0x1</span><span class="op" id="5975992">&lt;&lt;</span><span class="ident" id="5975994"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975947">b</a></span><span class="op" id="5975995">)</span>&nbsp;<span class="op" id="5975997">==</span>&nbsp;<span class="num" id="5976000">0</span>&nbsp;<span class="op" id="5976002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5976008">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5976020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5976026">return</span>&nbsp;<span class="builtintype" id="5976033">true</span><span class="op" id="5976037">,</span>&nbsp;<span class="builtintype" id="5976039">byte</span><span class="op" id="5976043">(</span><span class="ident" id="5976044"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975770">i</a></span><span class="op" id="5976045">*</span><span class="num" id="5976046">8</span><span class="op" id="5976047">)</span>&nbsp;<span class="op" id="5976049">+</span>&nbsp;<span class="ident" id="5976051"><a href="/lonnie.io/e8vm/arch8/interrupt.go.html#5975947">b</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5976055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5976058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5976062">return</span>&nbsp;<span class="builtintype" id="5976069">false</span><span class="op" id="5976074">,</span>&nbsp;<span class="num" id="5976076">0</span><br>
<span class="lineno"></span><span class="op" id="5976078">}</span>
</div>
</body>
</html>
