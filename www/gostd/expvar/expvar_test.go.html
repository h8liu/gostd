<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>expvar</h2>
<ul>
<li><a href="/gostd/expvar/expvar.go.html">expvar.go</a></li>
<li><a href="/gostd/expvar/expvar_test.go.html">expvar_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6404841">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6404896">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6404950">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6405001">package</span>&nbsp;<span class="ident" id="6405009">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405017">import</span>&nbsp;<span class="op" id="6405024">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405027">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405036">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405053">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405074">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6405085">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6405095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6405098">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="6405143">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="6405170">func</span>&nbsp;<span class="ident" id="6405175">RemoveAll</span><span class="op" id="6405184">(</span><span class="op" id="6405185">)</span>&nbsp;<span class="op" id="6405187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405190">mutex</span><span class="op" id="6405195">.</span><span class="ident" id="6405196">Lock</span><span class="op" id="6405200">(</span><span class="op" id="6405201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405204">defer</span>&nbsp;<span class="ident" id="6405210">mutex</span><span class="op" id="6405215">.</span><span class="ident" id="6405216">Unlock</span><span class="op" id="6405222">(</span><span class="op" id="6405223">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405226">vars</span>&nbsp;<span class="op" id="6405231">=</span>&nbsp;<span class="builtinfunc" id="6405233">make</span><span class="op" id="6405237">(</span><span class="keyword" id="6405238">map</span><span class="op" id="6405241">[</span><span class="builtintype" id="6405242">string</span><span class="op" id="6405248">]</span><span class="ident" id="6405249">Var</span><span class="op" id="6405252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405255">varKeys</span>&nbsp;<span class="op" id="6405263">=</span>&nbsp;<span class="ident" id="6405265">nil</span><br>
<span class="lineno"></span><span class="op" id="6405269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6405272">func</span>&nbsp;<span class="ident" id="6405277">TestInt</span><span class="op" id="6405284">(</span><span class="ident" id="6405285">t</span>&nbsp;<span class="op" id="6405287">*</span><span class="ident" id="6405288">testing</span><span class="op" id="6405295">.</span><span class="ident" id="6405296">T</span><span class="op" id="6405297">)</span>&nbsp;<span class="op" id="6405299">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405302">RemoveAll</span><span class="op" id="6405311">(</span><span class="op" id="6405312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405315">reqs</span>&nbsp;<span class="op" id="6405320">:=</span>&nbsp;<span class="ident" id="6405323">NewInt</span><span class="op" id="6405329">(</span><span class="string" id="6405330">&#34;requests&#34;</span><span class="op" id="6405340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405343">if</span>&nbsp;<span class="ident" id="6405346">reqs</span><span class="op" id="6405350">.</span><span class="ident" id="6405351">i</span>&nbsp;<span class="op" id="6405353">!=</span>&nbsp;<span class="num" id="6405356">0</span>&nbsp;<span class="op" id="6405358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405362">t</span><span class="op" id="6405363">.</span><span class="ident" id="6405364">Errorf</span><span class="op" id="6405370">(</span><span class="string" id="6405371">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6405392">,</span>&nbsp;<span class="ident" id="6405394">reqs</span><span class="op" id="6405398">.</span><span class="ident" id="6405399">i</span><span class="op" id="6405400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405403">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405406">if</span>&nbsp;<span class="ident" id="6405409">reqs</span>&nbsp;<span class="op" id="6405414">!=</span>&nbsp;<span class="ident" id="6405417">Get</span><span class="op" id="6405420">(</span><span class="string" id="6405421">&#34;requests&#34;</span><span class="op" id="6405431">)</span><span class="op" id="6405432">.</span><span class="op" id="6405433">(</span><span class="op" id="6405434">*</span><span class="ident" id="6405435">Int</span><span class="op" id="6405438">)</span>&nbsp;<span class="op" id="6405440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405444">t</span><span class="op" id="6405445">.</span><span class="ident" id="6405446">Errorf</span><span class="op" id="6405452">(</span><span class="string" id="6405453">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6405468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405475">reqs</span><span class="op" id="6405479">.</span><span class="ident" id="6405480">Add</span><span class="op" id="6405483">(</span><span class="num" id="6405484">1</span><span class="op" id="6405485">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405488">reqs</span><span class="op" id="6405492">.</span><span class="ident" id="6405493">Add</span><span class="op" id="6405496">(</span><span class="num" id="6405497">3</span><span class="op" id="6405498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405501">if</span>&nbsp;<span class="ident" id="6405504">reqs</span><span class="op" id="6405508">.</span><span class="ident" id="6405509">i</span>&nbsp;<span class="op" id="6405511">!=</span>&nbsp;<span class="num" id="6405514">4</span>&nbsp;<span class="op" id="6405516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405520">t</span><span class="op" id="6405521">.</span><span class="ident" id="6405522">Errorf</span><span class="op" id="6405528">(</span><span class="string" id="6405529">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6405550">,</span>&nbsp;<span class="ident" id="6405552">reqs</span><span class="op" id="6405556">.</span><span class="ident" id="6405557">i</span><span class="op" id="6405558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405565">if</span>&nbsp;<span class="ident" id="6405568">s</span>&nbsp;<span class="op" id="6405570">:=</span>&nbsp;<span class="ident" id="6405573">reqs</span><span class="op" id="6405577">.</span><span class="ident" id="6405578">String</span><span class="op" id="6405584">(</span><span class="op" id="6405585">)</span><span class="op" id="6405586">;</span>&nbsp;<span class="ident" id="6405588">s</span>&nbsp;<span class="op" id="6405590">!=</span>&nbsp;<span class="string" id="6405593">&#34;4&#34;</span>&nbsp;<span class="op" id="6405597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405601">t</span><span class="op" id="6405602">.</span><span class="ident" id="6405603">Errorf</span><span class="op" id="6405609">(</span><span class="string" id="6405610">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="6405642">,</span>&nbsp;<span class="ident" id="6405644">s</span><span class="op" id="6405645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405652">reqs</span><span class="op" id="6405656">.</span><span class="ident" id="6405657">Set</span><span class="op" id="6405660">(</span><span class="op" id="6405661">-</span><span class="num" id="6405662">2</span><span class="op" id="6405663">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405666">if</span>&nbsp;<span class="ident" id="6405669">reqs</span><span class="op" id="6405673">.</span><span class="ident" id="6405674">i</span>&nbsp;<span class="op" id="6405676">!=</span>&nbsp;<span class="op" id="6405679">-</span><span class="num" id="6405680">2</span>&nbsp;<span class="op" id="6405682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405686">t</span><span class="op" id="6405687">.</span><span class="ident" id="6405688">Errorf</span><span class="op" id="6405694">(</span><span class="string" id="6405695">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="6405717">,</span>&nbsp;<span class="ident" id="6405719">reqs</span><span class="op" id="6405723">.</span><span class="ident" id="6405724">i</span><span class="op" id="6405725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405728">}</span><br>
<span class="lineno"></span><span class="op" id="6405730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6405733">func</span>&nbsp;<span class="ident" id="6405738">TestFloat</span><span class="op" id="6405747">(</span><span class="ident" id="6405748">t</span>&nbsp;<span class="op" id="6405750">*</span><span class="ident" id="6405751">testing</span><span class="op" id="6405758">.</span><span class="ident" id="6405759">T</span><span class="op" id="6405760">)</span>&nbsp;<span class="op" id="6405762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405765">RemoveAll</span><span class="op" id="6405774">(</span><span class="op" id="6405775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405778">reqs</span>&nbsp;<span class="op" id="6405783">:=</span>&nbsp;<span class="ident" id="6405786">NewFloat</span><span class="op" id="6405794">(</span><span class="string" id="6405795">&#34;requests-float&#34;</span><span class="op" id="6405811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405814">if</span>&nbsp;<span class="ident" id="6405817">reqs</span><span class="op" id="6405821">.</span><span class="ident" id="6405822">f</span>&nbsp;<span class="op" id="6405824">!=</span>&nbsp;<span class="num" id="6405827">0.0</span>&nbsp;<span class="op" id="6405831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405835">t</span><span class="op" id="6405836">.</span><span class="ident" id="6405837">Errorf</span><span class="op" id="6405843">(</span><span class="string" id="6405844">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="6405865">,</span>&nbsp;<span class="ident" id="6405867">reqs</span><span class="op" id="6405871">.</span><span class="ident" id="6405872">f</span><span class="op" id="6405873">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405879">if</span>&nbsp;<span class="ident" id="6405882">reqs</span>&nbsp;<span class="op" id="6405887">!=</span>&nbsp;<span class="ident" id="6405890">Get</span><span class="op" id="6405893">(</span><span class="string" id="6405894">&#34;requests-float&#34;</span><span class="op" id="6405910">)</span><span class="op" id="6405911">.</span><span class="op" id="6405912">(</span><span class="op" id="6405913">*</span><span class="ident" id="6405914">Float</span><span class="op" id="6405919">)</span>&nbsp;<span class="op" id="6405921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405925">t</span><span class="op" id="6405926">.</span><span class="ident" id="6405927">Errorf</span><span class="op" id="6405933">(</span><span class="string" id="6405934">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="6405949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6405952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405956">reqs</span><span class="op" id="6405960">.</span><span class="ident" id="6405961">Add</span><span class="op" id="6405964">(</span><span class="num" id="6405965">1.5</span><span class="op" id="6405968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6405971">reqs</span><span class="op" id="6405975">.</span><span class="ident" id="6405976">Add</span><span class="op" id="6405979">(</span><span class="num" id="6405980">1.25</span><span class="op" id="6405984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6405987">if</span>&nbsp;<span class="ident" id="6405990">reqs</span><span class="op" id="6405994">.</span><span class="ident" id="6405995">f</span>&nbsp;<span class="op" id="6405997">!=</span>&nbsp;<span class="num" id="6406000">2.75</span>&nbsp;<span class="op" id="6406005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406009">t</span><span class="op" id="6406010">.</span><span class="ident" id="6406011">Errorf</span><span class="op" id="6406017">(</span><span class="string" id="6406018">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="6406042">,</span>&nbsp;<span class="ident" id="6406044">reqs</span><span class="op" id="6406048">.</span><span class="ident" id="6406049">f</span><span class="op" id="6406050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406053">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406057">if</span>&nbsp;<span class="ident" id="6406060">s</span>&nbsp;<span class="op" id="6406062">:=</span>&nbsp;<span class="ident" id="6406065">reqs</span><span class="op" id="6406069">.</span><span class="ident" id="6406070">String</span><span class="op" id="6406076">(</span><span class="op" id="6406077">)</span><span class="op" id="6406078">;</span>&nbsp;<span class="ident" id="6406080">s</span>&nbsp;<span class="op" id="6406082">!=</span>&nbsp;<span class="string" id="6406085">&#34;2.75&#34;</span>&nbsp;<span class="op" id="6406092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406096">t</span><span class="op" id="6406097">.</span><span class="ident" id="6406098">Errorf</span><span class="op" id="6406104">(</span><span class="string" id="6406105">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="6406140">,</span>&nbsp;<span class="ident" id="6406142">s</span><span class="op" id="6406143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406150">reqs</span><span class="op" id="6406154">.</span><span class="ident" id="6406155">Add</span><span class="op" id="6406158">(</span><span class="op" id="6406159">-</span><span class="num" id="6406160">2</span><span class="op" id="6406161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406164">if</span>&nbsp;<span class="ident" id="6406167">reqs</span><span class="op" id="6406171">.</span><span class="ident" id="6406172">f</span>&nbsp;<span class="op" id="6406174">!=</span>&nbsp;<span class="num" id="6406177">0.75</span>&nbsp;<span class="op" id="6406182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406186">t</span><span class="op" id="6406187">.</span><span class="ident" id="6406188">Errorf</span><span class="op" id="6406194">(</span><span class="string" id="6406195">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="6406219">,</span>&nbsp;<span class="ident" id="6406221">reqs</span><span class="op" id="6406225">.</span><span class="ident" id="6406226">f</span><span class="op" id="6406227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406230">}</span><br>
<span class="lineno"></span><span class="op" id="6406232">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="6406235">func</span>&nbsp;<span class="ident" id="6406240">TestString</span><span class="op" id="6406250">(</span><span class="ident" id="6406251">t</span>&nbsp;<span class="op" id="6406253">*</span><span class="ident" id="6406254">testing</span><span class="op" id="6406261">.</span><span class="ident" id="6406262">T</span><span class="op" id="6406263">)</span>&nbsp;<span class="op" id="6406265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406268">RemoveAll</span><span class="op" id="6406277">(</span><span class="op" id="6406278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406281">name</span>&nbsp;<span class="op" id="6406286">:=</span>&nbsp;<span class="ident" id="6406289">NewString</span><span class="op" id="6406298">(</span><span class="string" id="6406299">&#34;my-name&#34;</span><span class="op" id="6406308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406311">if</span>&nbsp;<span class="ident" id="6406314">name</span><span class="op" id="6406318">.</span><span class="ident" id="6406319">s</span>&nbsp;<span class="op" id="6406321">!=</span>&nbsp;<span class="string" id="6406324">&#34;&#34;</span>&nbsp;<span class="op" id="6406327">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406331">t</span><span class="op" id="6406332">.</span><span class="ident" id="6406333">Errorf</span><span class="op" id="6406339">(</span><span class="string" id="6406340">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="6406364">,</span>&nbsp;<span class="ident" id="6406366">name</span><span class="op" id="6406370">.</span><span class="ident" id="6406371">s</span><span class="op" id="6406372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406379">name</span><span class="op" id="6406383">.</span><span class="ident" id="6406384">Set</span><span class="op" id="6406387">(</span><span class="string" id="6406388">&#34;Mike&#34;</span><span class="op" id="6406394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406397">if</span>&nbsp;<span class="ident" id="6406400">name</span><span class="op" id="6406404">.</span><span class="ident" id="6406405">s</span>&nbsp;<span class="op" id="6406407">!=</span>&nbsp;<span class="string" id="6406410">&#34;Mike&#34;</span>&nbsp;<span class="op" id="6406417">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406421">t</span><span class="op" id="6406422">.</span><span class="ident" id="6406423">Errorf</span><span class="op" id="6406429">(</span><span class="string" id="6406430">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="6406458">,</span>&nbsp;<span class="ident" id="6406460">name</span><span class="op" id="6406464">.</span><span class="ident" id="6406465">s</span><span class="op" id="6406466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406473">if</span>&nbsp;<span class="ident" id="6406476">s</span>&nbsp;<span class="op" id="6406478">:=</span>&nbsp;<span class="ident" id="6406481">name</span><span class="op" id="6406485">.</span><span class="ident" id="6406486">String</span><span class="op" id="6406492">(</span><span class="op" id="6406493">)</span><span class="op" id="6406494">;</span>&nbsp;<span class="ident" id="6406496">s</span>&nbsp;<span class="op" id="6406498">!=</span>&nbsp;<span class="string" id="6406501">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="6406512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406516">t</span><span class="op" id="6406517">.</span><span class="ident" id="6406518">Errorf</span><span class="op" id="6406524">(</span><span class="string" id="6406525">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="6406564">,</span>&nbsp;<span class="ident" id="6406566">s</span><span class="op" id="6406567">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406570">}</span><br>
<span class="lineno"></span><span class="op" id="6406572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6406575">func</span>&nbsp;<span class="ident" id="6406580">TestMapCounter</span><span class="op" id="6406594">(</span><span class="ident" id="6406595">t</span>&nbsp;<span class="op" id="6406597">*</span><span class="ident" id="6406598">testing</span><span class="op" id="6406605">.</span><span class="ident" id="6406606">T</span><span class="op" id="6406607">)</span>&nbsp;<span class="op" id="6406609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406612">RemoveAll</span><span class="op" id="6406621">(</span><span class="op" id="6406622">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406625">colors</span>&nbsp;<span class="op" id="6406632">:=</span>&nbsp;<span class="ident" id="6406635">NewMap</span><span class="op" id="6406641">(</span><span class="string" id="6406642">&#34;bike-shed-colors&#34;</span><span class="op" id="6406660">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406664">colors</span><span class="op" id="6406670">.</span><span class="ident" id="6406671">Add</span><span class="op" id="6406674">(</span><span class="string" id="6406675">&#34;red&#34;</span><span class="op" id="6406680">,</span>&nbsp;<span class="num" id="6406682">1</span><span class="op" id="6406683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406686">colors</span><span class="op" id="6406692">.</span><span class="ident" id="6406693">Add</span><span class="op" id="6406696">(</span><span class="string" id="6406697">&#34;red&#34;</span><span class="op" id="6406702">,</span>&nbsp;<span class="num" id="6406704">2</span><span class="op" id="6406705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406708">colors</span><span class="op" id="6406714">.</span><span class="ident" id="6406715">Add</span><span class="op" id="6406718">(</span><span class="string" id="6406719">&#34;blue&#34;</span><span class="op" id="6406725">,</span>&nbsp;<span class="num" id="6406727">4</span><span class="op" id="6406728">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406731">colors</span><span class="op" id="6406737">.</span><span class="ident" id="6406738">AddFloat</span><span class="op" id="6406746">(</span><span class="string" id="6406747">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6406763">,</span>&nbsp;<span class="num" id="6406765">4.125</span><span class="op" id="6406770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406773">if</span>&nbsp;<span class="ident" id="6406776">x</span>&nbsp;<span class="op" id="6406778">:=</span>&nbsp;<span class="ident" id="6406781">colors</span><span class="op" id="6406787">.</span><span class="ident" id="6406788">m</span><span class="op" id="6406789">[</span><span class="string" id="6406790">&#34;red&#34;</span><span class="op" id="6406795">]</span><span class="op" id="6406796">.</span><span class="op" id="6406797">(</span><span class="op" id="6406798">*</span><span class="ident" id="6406799">Int</span><span class="op" id="6406802">)</span><span class="op" id="6406803">.</span><span class="ident" id="6406804">i</span><span class="op" id="6406805">;</span>&nbsp;<span class="ident" id="6406807">x</span>&nbsp;<span class="op" id="6406809">!=</span>&nbsp;<span class="num" id="6406812">3</span>&nbsp;<span class="op" id="6406814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406818">t</span><span class="op" id="6406819">.</span><span class="ident" id="6406820">Errorf</span><span class="op" id="6406826">(</span><span class="string" id="6406827">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6406859">,</span>&nbsp;<span class="ident" id="6406861">x</span><span class="op" id="6406862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406868">if</span>&nbsp;<span class="ident" id="6406871">x</span>&nbsp;<span class="op" id="6406873">:=</span>&nbsp;<span class="ident" id="6406876">colors</span><span class="op" id="6406882">.</span><span class="ident" id="6406883">m</span><span class="op" id="6406884">[</span><span class="string" id="6406885">&#34;blue&#34;</span><span class="op" id="6406891">]</span><span class="op" id="6406892">.</span><span class="op" id="6406893">(</span><span class="op" id="6406894">*</span><span class="ident" id="6406895">Int</span><span class="op" id="6406898">)</span><span class="op" id="6406899">.</span><span class="ident" id="6406900">i</span><span class="op" id="6406901">;</span>&nbsp;<span class="ident" id="6406903">x</span>&nbsp;<span class="op" id="6406905">!=</span>&nbsp;<span class="num" id="6406908">4</span>&nbsp;<span class="op" id="6406910">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6406914">t</span><span class="op" id="6406915">.</span><span class="ident" id="6406916">Errorf</span><span class="op" id="6406922">(</span><span class="string" id="6406923">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="6406956">,</span>&nbsp;<span class="ident" id="6406958">x</span><span class="op" id="6406959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6406962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6406965">if</span>&nbsp;<span class="ident" id="6406968">x</span>&nbsp;<span class="op" id="6406970">:=</span>&nbsp;<span class="ident" id="6406973">colors</span><span class="op" id="6406979">.</span><span class="ident" id="6406980">m</span><span class="op" id="6406981">[</span><span class="string" id="6406982">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="6406998">]</span><span class="op" id="6406999">.</span><span class="op" id="6407000">(</span><span class="op" id="6407001">*</span><span class="ident" id="6407002">Float</span><span class="op" id="6407007">)</span><span class="op" id="6407008">.</span><span class="ident" id="6407009">f</span><span class="op" id="6407010">;</span>&nbsp;<span class="ident" id="6407012">x</span>&nbsp;<span class="op" id="6407014">!=</span>&nbsp;<span class="num" id="6407017">4.125</span>&nbsp;<span class="op" id="6407023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407027">t</span><span class="op" id="6407028">.</span><span class="ident" id="6407029">Errorf</span><span class="op" id="6407035">(</span><span class="string" id="6407036">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="6407081">,</span>&nbsp;<span class="ident" id="6407083">x</span><span class="op" id="6407084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407087">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6407091">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6407144">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407193">s</span>&nbsp;<span class="op" id="6407195">:=</span>&nbsp;<span class="ident" id="6407198">colors</span><span class="op" id="6407204">.</span><span class="ident" id="6407205">String</span><span class="op" id="6407211">(</span><span class="op" id="6407212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407215">var</span>&nbsp;<span class="ident" id="6407219">j</span>&nbsp;<span class="keyword" id="6407221">interface</span><span class="op" id="6407230">{</span><span class="op" id="6407231">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407234">err</span>&nbsp;<span class="op" id="6407238">:=</span>&nbsp;<span class="ident" id="6407241">json</span><span class="op" id="6407245">.</span><span class="ident" id="6407246">Unmarshal</span><span class="op" id="6407255">(</span><span class="op" id="6407256">[</span><span class="op" id="6407257">]</span><span class="builtintype" id="6407258">byte</span><span class="op" id="6407262">(</span><span class="ident" id="6407263">s</span><span class="op" id="6407264">)</span><span class="op" id="6407265">,</span>&nbsp;<span class="op" id="6407267">&amp;</span><span class="ident" id="6407268">j</span><span class="op" id="6407269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407272">if</span>&nbsp;<span class="ident" id="6407275">err</span>&nbsp;<span class="op" id="6407279">!=</span>&nbsp;<span class="ident" id="6407282">nil</span>&nbsp;<span class="op" id="6407286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407290">t</span><span class="op" id="6407291">.</span><span class="ident" id="6407292">Errorf</span><span class="op" id="6407298">(</span><span class="string" id="6407299">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="6407337">,</span>&nbsp;<span class="ident" id="6407339">err</span><span class="op" id="6407342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407348">m</span><span class="op" id="6407349">,</span>&nbsp;<span class="ident" id="6407351">ok</span>&nbsp;<span class="op" id="6407354">:=</span>&nbsp;<span class="ident" id="6407357">j</span><span class="op" id="6407358">.</span><span class="op" id="6407359">(</span><span class="keyword" id="6407360">map</span><span class="op" id="6407363">[</span><span class="builtintype" id="6407364">string</span><span class="op" id="6407370">]</span><span class="keyword" id="6407371">interface</span><span class="op" id="6407380">{</span><span class="op" id="6407381">}</span><span class="op" id="6407382">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407385">if</span>&nbsp;<span class="op" id="6407388">!</span><span class="ident" id="6407389">ok</span>&nbsp;<span class="op" id="6407392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407396">t</span><span class="op" id="6407397">.</span><span class="ident" id="6407398">Error</span><span class="op" id="6407403">(</span><span class="string" id="6407404">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="6407443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407449">red</span>&nbsp;<span class="op" id="6407453">:=</span>&nbsp;<span class="ident" id="6407456">m</span><span class="op" id="6407457">[</span><span class="string" id="6407458">&#34;red&#34;</span><span class="op" id="6407463">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407466">x</span><span class="op" id="6407467">,</span>&nbsp;<span class="ident" id="6407469">ok</span>&nbsp;<span class="op" id="6407472">:=</span>&nbsp;<span class="ident" id="6407475">red</span><span class="op" id="6407478">.</span><span class="op" id="6407479">(</span><span class="builtintype" id="6407480">float64</span><span class="op" id="6407487">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407490">if</span>&nbsp;<span class="op" id="6407493">!</span><span class="ident" id="6407494">ok</span>&nbsp;<span class="op" id="6407497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407501">t</span><span class="op" id="6407502">.</span><span class="ident" id="6407503">Error</span><span class="op" id="6407508">(</span><span class="string" id="6407509">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="6407538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407544">if</span>&nbsp;<span class="ident" id="6407547">x</span>&nbsp;<span class="op" id="6407549">!=</span>&nbsp;<span class="num" id="6407552">3</span>&nbsp;<span class="op" id="6407554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407558">t</span><span class="op" id="6407559">.</span><span class="ident" id="6407560">Errorf</span><span class="op" id="6407566">(</span><span class="string" id="6407567">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="6407585">,</span>&nbsp;<span class="ident" id="6407587">x</span><span class="op" id="6407588">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407591">}</span><br>
<span class="lineno"></span><span class="op" id="6407593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6407596">func</span>&nbsp;<span class="ident" id="6407601">TestFunc</span><span class="op" id="6407609">(</span><span class="ident" id="6407610">t</span>&nbsp;<span class="op" id="6407612">*</span><span class="ident" id="6407613">testing</span><span class="op" id="6407620">.</span><span class="ident" id="6407621">T</span><span class="op" id="6407622">)</span>&nbsp;<span class="op" id="6407624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407627">RemoveAll</span><span class="op" id="6407636">(</span><span class="op" id="6407637">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407640">var</span>&nbsp;<span class="ident" id="6407644">x</span>&nbsp;<span class="keyword" id="6407646">interface</span><span class="op" id="6407655">{</span><span class="op" id="6407656">}</span>&nbsp;<span class="op" id="6407658">=</span>&nbsp;<span class="op" id="6407660">[</span><span class="op" id="6407661">]</span><span class="builtintype" id="6407662">string</span><span class="op" id="6407668">{</span><span class="string" id="6407669">&#34;a&#34;</span><span class="op" id="6407672">,</span>&nbsp;<span class="string" id="6407674">&#34;b&#34;</span><span class="op" id="6407677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407680">f</span>&nbsp;<span class="op" id="6407682">:=</span>&nbsp;<span class="ident" id="6407685">Func</span><span class="op" id="6407689">(</span><span class="keyword" id="6407690">func</span><span class="op" id="6407694">(</span><span class="op" id="6407695">)</span>&nbsp;<span class="keyword" id="6407697">interface</span><span class="op" id="6407706">{</span><span class="op" id="6407707">}</span>&nbsp;<span class="op" id="6407709">{</span>&nbsp;<span class="keyword" id="6407711">return</span>&nbsp;<span class="ident" id="6407718">x</span>&nbsp;<span class="op" id="6407720">}</span><span class="op" id="6407721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407724">if</span>&nbsp;<span class="ident" id="6407727">s</span><span class="op" id="6407728">,</span>&nbsp;<span class="ident" id="6407730">exp</span>&nbsp;<span class="op" id="6407734">:=</span>&nbsp;<span class="ident" id="6407737">f</span><span class="op" id="6407738">.</span><span class="ident" id="6407739">String</span><span class="op" id="6407745">(</span><span class="op" id="6407746">)</span><span class="op" id="6407747">,</span>&nbsp;<span class="string" id="6407749">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="6407760">;</span>&nbsp;<span class="ident" id="6407762">s</span>&nbsp;<span class="op" id="6407764">!=</span>&nbsp;<span class="ident" id="6407767">exp</span>&nbsp;<span class="op" id="6407771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407775">t</span><span class="op" id="6407776">.</span><span class="ident" id="6407777">Errorf</span><span class="op" id="6407783">(</span><span class="string" id="6407784">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6407810">,</span>&nbsp;<span class="ident" id="6407812">s</span><span class="op" id="6407813">,</span>&nbsp;<span class="ident" id="6407815">exp</span><span class="op" id="6407818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407821">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407825">x</span>&nbsp;<span class="op" id="6407827">=</span>&nbsp;<span class="num" id="6407829">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407833">if</span>&nbsp;<span class="ident" id="6407836">s</span><span class="op" id="6407837">,</span>&nbsp;<span class="ident" id="6407839">exp</span>&nbsp;<span class="op" id="6407843">:=</span>&nbsp;<span class="ident" id="6407846">f</span><span class="op" id="6407847">.</span><span class="ident" id="6407848">String</span><span class="op" id="6407854">(</span><span class="op" id="6407855">)</span><span class="op" id="6407856">,</span>&nbsp;<span class="string" id="6407858">`17`</span><span class="op" id="6407862">;</span>&nbsp;<span class="ident" id="6407864">s</span>&nbsp;<span class="op" id="6407866">!=</span>&nbsp;<span class="ident" id="6407869">exp</span>&nbsp;<span class="op" id="6407873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407877">t</span><span class="op" id="6407878">.</span><span class="ident" id="6407879">Errorf</span><span class="op" id="6407885">(</span><span class="string" id="6407886">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="6407912">,</span>&nbsp;<span class="ident" id="6407914">s</span><span class="op" id="6407915">,</span>&nbsp;<span class="ident" id="6407917">exp</span><span class="op" id="6407920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6407923">}</span><br>
<span class="lineno">145</span><span class="op" id="6407925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6407928">func</span>&nbsp;<span class="ident" id="6407933">TestHandler</span><span class="op" id="6407944">(</span><span class="ident" id="6407945">t</span>&nbsp;<span class="op" id="6407947">*</span><span class="ident" id="6407948">testing</span><span class="op" id="6407955">.</span><span class="ident" id="6407956">T</span><span class="op" id="6407957">)</span>&nbsp;<span class="op" id="6407959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407962">RemoveAll</span><span class="op" id="6407971">(</span><span class="op" id="6407972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407975">m</span>&nbsp;<span class="op" id="6407977">:=</span>&nbsp;<span class="ident" id="6407980">NewMap</span><span class="op" id="6407986">(</span><span class="string" id="6407987">&#34;map1&#34;</span><span class="op" id="6407993">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6407996">m</span><span class="op" id="6407997">.</span><span class="ident" id="6407998">Add</span><span class="op" id="6408001">(</span><span class="string" id="6408002">&#34;a&#34;</span><span class="op" id="6408005">,</span>&nbsp;<span class="num" id="6408007">1</span><span class="op" id="6408008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408011">m</span><span class="op" id="6408012">.</span><span class="ident" id="6408013">Add</span><span class="op" id="6408016">(</span><span class="string" id="6408017">&#34;z&#34;</span><span class="op" id="6408020">,</span>&nbsp;<span class="num" id="6408022">2</span><span class="op" id="6408023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408026">m2</span>&nbsp;<span class="op" id="6408029">:=</span>&nbsp;<span class="ident" id="6408032">NewMap</span><span class="op" id="6408038">(</span><span class="string" id="6408039">&#34;map2&#34;</span><span class="op" id="6408045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408048">for</span>&nbsp;<span class="ident" id="6408052">i</span>&nbsp;<span class="op" id="6408054">:=</span>&nbsp;<span class="num" id="6408057">0</span><span class="op" id="6408058">;</span>&nbsp;<span class="ident" id="6408060">i</span>&nbsp;<span class="op" id="6408062">&lt;</span>&nbsp;<span class="num" id="6408064">9</span><span class="op" id="6408065">;</span>&nbsp;<span class="ident" id="6408067">i</span><span class="op" id="6408068">++</span>&nbsp;<span class="op" id="6408071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408075">m2</span><span class="op" id="6408077">.</span><span class="ident" id="6408078">Add</span><span class="op" id="6408081">(</span><span class="ident" id="6408082">strconv</span><span class="op" id="6408089">.</span><span class="ident" id="6408090">Itoa</span><span class="op" id="6408094">(</span><span class="ident" id="6408095">i</span><span class="op" id="6408096">)</span><span class="op" id="6408097">,</span>&nbsp;<span class="ident" id="6408099">int64</span><span class="op" id="6408104">(</span><span class="ident" id="6408105">i</span><span class="op" id="6408106">)</span><span class="op" id="6408107">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6408110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408113">rr</span>&nbsp;<span class="op" id="6408116">:=</span>&nbsp;<span class="ident" id="6408119">httptest</span><span class="op" id="6408127">.</span><span class="ident" id="6408128">NewRecorder</span><span class="op" id="6408139">(</span><span class="op" id="6408140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408143">rr</span><span class="op" id="6408145">.</span><span class="ident" id="6408146">Body</span>&nbsp;<span class="op" id="6408151">=</span>&nbsp;<span class="builtinfunc" id="6408153">new</span><span class="op" id="6408156">(</span><span class="ident" id="6408157">bytes</span><span class="op" id="6408162">.</span><span class="ident" id="6408163">Buffer</span><span class="op" id="6408169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408172">expvarHandler</span><span class="op" id="6408185">(</span><span class="ident" id="6408186">rr</span><span class="op" id="6408188">,</span>&nbsp;<span class="ident" id="6408190">nil</span><span class="op" id="6408193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408196">want</span>&nbsp;<span class="op" id="6408201">:=</span>&nbsp;<span class="string" id="6408204">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408319">if</span>&nbsp;<span class="ident" id="6408322">got</span>&nbsp;<span class="op" id="6408326">:=</span>&nbsp;<span class="ident" id="6408329">rr</span><span class="op" id="6408331">.</span><span class="ident" id="6408332">Body</span><span class="op" id="6408336">.</span><span class="ident" id="6408337">String</span><span class="op" id="6408343">(</span><span class="op" id="6408344">)</span><span class="op" id="6408345">;</span>&nbsp;<span class="ident" id="6408347">got</span>&nbsp;<span class="op" id="6408351">!=</span>&nbsp;<span class="ident" id="6408354">want</span>&nbsp;<span class="op" id="6408359">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408363">t</span><span class="op" id="6408364">.</span><span class="ident" id="6408365">Errorf</span><span class="op" id="6408371">(</span><span class="string" id="6408372">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="6408408">,</span>&nbsp;<span class="ident" id="6408410">got</span><span class="op" id="6408413">,</span>&nbsp;<span class="ident" id="6408415">want</span><span class="op" id="6408419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6408422">}</span><br>
<span class="lineno"></span><span class="op" id="6408424">}</span>
</div>
</body>
</html>
