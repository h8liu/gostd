<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html" class="current">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6613059">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6613114">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6613168">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6613219">package</span>&nbsp;<span class="ident" id="6613227">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6613232">import</span>&nbsp;<span class="op" id="6613239">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613242">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613251">&#34;flag&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613259">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613266">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613279">&#34;go/printer&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613293">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613305">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613318">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613324">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613341">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613351">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613362">&#34;testing&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613373">&#34;text/template&#34;</span><br>
<span class="lineno"></span><span class="op" id="6613389">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6613392">var</span>&nbsp;<span class="ident" id="6613396">update</span>&nbsp;<span class="op" id="6613403">=</span>&nbsp;<span class="ident" id="6613405"><a href="/gostd/go/doc/doc_test.go.html#6613251">flag</a></span><span class="op" id="6613409">.</span><span class="ident" id="6613410"><a href="/gostd/flag/flag.go.html#3948389">Bool</a></span><span class="op" id="6613414">(</span><span class="string" id="6613415">&#34;update&#34;</span><span class="op" id="6613423">,</span>&nbsp;<span class="builtintype" id="6613425">false</span><span class="op" id="6613430">,</span>&nbsp;<span class="string" id="6613432">&#34;update&nbsp;golden&nbsp;(.out)&nbsp;files&#34;</span><span class="op" id="6613460">)</span><br>
<span class="lineno"></span><span class="keyword" id="6613462">var</span>&nbsp;<span class="ident" id="6613466">files</span>&nbsp;<span class="op" id="6613472">=</span>&nbsp;<span class="ident" id="6613474"><a href="/gostd/go/doc/doc_test.go.html#6613251">flag</a></span><span class="op" id="6613478">.</span><span class="ident" id="6613479"><a href="/gostd/flag/flag.go.html#3954331">String</a></span><span class="op" id="6613485">(</span><span class="string" id="6613486">&#34;files&#34;</span><span class="op" id="6613493">,</span>&nbsp;<span class="string" id="6613495">&#34;&#34;</span><span class="op" id="6613497">,</span>&nbsp;<span class="string" id="6613499">&#34;consider&nbsp;only&nbsp;Go&nbsp;test&nbsp;files&nbsp;matching&nbsp;this&nbsp;regular&nbsp;expression&#34;</span><span class="op" id="6613561">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6613564">const</span>&nbsp;<span class="ident" id="6613570">dataDir</span>&nbsp;<span class="op" id="6613578">=</span>&nbsp;<span class="string" id="6613580">&#34;testdata&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6613592">var</span>&nbsp;<span class="ident" id="6613596">templateTxt</span>&nbsp;<span class="op" id="6613608">=</span>&nbsp;<span class="ident" id="6613610"><a href="/gostd/go/doc/doc_test.go.html#6613645">readTemplate</a></span><span class="op" id="6613622">(</span><span class="string" id="6613623">&#34;template.txt&#34;</span><span class="op" id="6613637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6613640">func</span>&nbsp;<span class="ident" id="6613645">readTemplate</span><span class="op" id="6613657">(</span><span class="ident" id="6613658">filename</span>&nbsp;<span class="builtintype" id="6613667">string</span><span class="op" id="6613673">)</span>&nbsp;<span class="op" id="6613675">*</span><span class="ident" id="6613676"><a href="/gostd/go/doc/doc_test.go.html#6613373">template</a></span><span class="op" id="6613684">.</span><span class="ident" id="6613685"><a href="/gostd/text/template/template.go.html#3739702">Template</a></span>&nbsp;<span class="op" id="6613694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6613697">t</span>&nbsp;<span class="op" id="6613699">:=</span>&nbsp;<span class="ident" id="6613702"><a href="/gostd/go/doc/doc_test.go.html#6613373">template</a></span><span class="op" id="6613710">.</span><span class="ident" id="6613711"><a href="/gostd/text/template/template.go.html#3739854">New</a></span><span class="op" id="6613714">(</span><span class="ident" id="6613715"><a href="/gostd/go/doc/doc_test.go.html#6613658">filename</a></span><span class="op" id="6613723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6613726"><a href="/gostd/go/doc/doc_test.go.html#6613697">t</a></span><span class="op" id="6613727">.</span><span class="ident" id="6613728"><a href="/gostd/text/template/template.go.html#3743134">Funcs</a></span><span class="op" id="6613733">(</span><span class="ident" id="6613734"><a href="/gostd/go/doc/doc_test.go.html#6613373">template</a></span><span class="op" id="6613742">.</span><span class="ident" id="6613743"><a href="/gostd/text/template/funcs.go.html#3720973">FuncMap</a></span><span class="op" id="6613750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613754">&#34;node&#34;</span><span class="op" id="6613760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6613766"><a href="/gostd/go/doc/doc_test.go.html#6613909">nodeFmt</a></span><span class="op" id="6613773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613777">&#34;synopsis&#34;</span><span class="op" id="6613787">:</span>&nbsp;<span class="ident" id="6613789"><a href="/gostd/go/doc/doc_test.go.html#6614104">synopsisFmt</a></span><span class="op" id="6613800">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6613804">&#34;indent&#34;</span><span class="op" id="6613812">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6613816"><a href="/gostd/go/doc/doc_test.go.html#6614403">indentFmt</a></span><span class="op" id="6613825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6613828">}</span><span class="op" id="6613829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6613832">return</span>&nbsp;<span class="ident" id="6613839"><a href="/gostd/go/doc/doc_test.go.html#6613373">template</a></span><span class="op" id="6613847">.</span><span class="ident" id="6613848"><a href="/gostd/text/template/helper.go.html#3735814">Must</a></span><span class="op" id="6613852">(</span><span class="ident" id="6613853"><a href="/gostd/go/doc/doc_test.go.html#6613697">t</a></span><span class="op" id="6613854">.</span><span class="ident" id="6613855"><a href="/gostd/text/template/helper.go.html#3736531">ParseFiles</a></span><span class="op" id="6613865">(</span><span class="ident" id="6613866"><a href="/gostd/go/doc/doc_test.go.html#6613324">filepath</a></span><span class="op" id="6613874">.</span><span class="ident" id="6613875"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="6613879">(</span><span class="ident" id="6613880"><a href="/gostd/go/doc/doc_test.go.html#6613570">dataDir</a></span><span class="op" id="6613887">,</span>&nbsp;<span class="ident" id="6613889"><a href="/gostd/go/doc/doc_test.go.html#6613658">filename</a></span><span class="op" id="6613897">)</span><span class="op" id="6613898">)</span><span class="op" id="6613899">)</span><br>
<span class="lineno"></span><span class="op" id="6613901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6613904">func</span>&nbsp;<span class="ident" id="6613909">nodeFmt</span><span class="op" id="6613916">(</span><span class="ident" id="6613917">node</span>&nbsp;<span class="keyword" id="6613922">interface</span><span class="op" id="6613931">{</span><span class="op" id="6613932">}</span><span class="op" id="6613933">,</span>&nbsp;<span class="ident" id="6613935">fset</span>&nbsp;<span class="op" id="6613940">*</span><span class="ident" id="6613941"><a href="/gostd/go/doc/doc_test.go.html#6613293">token</a></span><span class="op" id="6613946">.</span><span class="ident" id="6613947"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="6613954">)</span>&nbsp;<span class="builtintype" id="6613956">string</span>&nbsp;<span class="op" id="6613963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6613966">var</span>&nbsp;<span class="ident" id="6613970">buf</span>&nbsp;<span class="ident" id="6613974"><a href="/gostd/go/doc/doc_test.go.html#6613242">bytes</a></span><span class="op" id="6613979">.</span><span class="ident" id="6613980"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6613988"><a href="/gostd/go/doc/doc_test.go.html#6613279">printer</a></span><span class="op" id="6613995">.</span><span class="ident" id="6613996"><a href="/gostd/go/printer/printer.go.html#5879958">Fprint</a></span><span class="op" id="6614002">(</span><span class="op" id="6614003">&amp;</span><span class="ident" id="6614004"><a href="/gostd/go/doc/doc_test.go.html#6613970">buf</a></span><span class="op" id="6614007">,</span>&nbsp;<span class="ident" id="6614009"><a href="/gostd/go/doc/doc_test.go.html#6613935">fset</a></span><span class="op" id="6614013">,</span>&nbsp;<span class="ident" id="6614015"><a href="/gostd/go/doc/doc_test.go.html#6613917">node</a></span><span class="op" id="6614019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614022">return</span>&nbsp;<span class="ident" id="6614029"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614036">.</span><span class="ident" id="6614037"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="6614044">(</span><span class="ident" id="6614045"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614052">.</span><span class="ident" id="6614053"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="6614062">(</span><span class="ident" id="6614063"><a href="/gostd/go/doc/doc_test.go.html#6613970">buf</a></span><span class="op" id="6614066">.</span><span class="ident" id="6614067"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="6614073">(</span><span class="op" id="6614074">)</span><span class="op" id="6614075">)</span><span class="op" id="6614076">,</span>&nbsp;<span class="string" id="6614078">&#34;\n&#34;</span><span class="op" id="6614082">,</span>&nbsp;<span class="string" id="6614084">&#34;\n\t&#34;</span><span class="op" id="6614090">,</span>&nbsp;<span class="op" id="6614092">-</span><span class="num" id="6614093">1</span><span class="op" id="6614094">)</span><br>
<span class="lineno"></span><span class="op" id="6614096">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6614099">func</span>&nbsp;<span class="ident" id="6614104">synopsisFmt</span><span class="op" id="6614115">(</span><span class="ident" id="6614116">s</span>&nbsp;<span class="builtintype" id="6614118">string</span><span class="op" id="6614124">)</span>&nbsp;<span class="builtintype" id="6614126">string</span>&nbsp;<span class="op" id="6614133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614136">const</span>&nbsp;<span class="ident" id="6614142">n</span>&nbsp;<span class="op" id="6614144">=</span>&nbsp;<span class="num" id="6614146">64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614150">if</span>&nbsp;<span class="builtinfunc" id="6614153">len</span><span class="op" id="6614156">(</span><span class="ident" id="6614157"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span><span class="op" id="6614158">)</span>&nbsp;<span class="op" id="6614160">&gt;</span>&nbsp;<span class="ident" id="6614162"><a href="/gostd/go/doc/doc_test.go.html#6614142">n</a></span>&nbsp;<span class="op" id="6614164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6614168">//&nbsp;cut&nbsp;off&nbsp;excess&nbsp;text&nbsp;and&nbsp;go&nbsp;back&nbsp;to&nbsp;a&nbsp;word&nbsp;boundary</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614224"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span>&nbsp;<span class="op" id="6614226">=</span>&nbsp;<span class="ident" id="6614228"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span><span class="op" id="6614229">[</span><span class="num" id="6614230">0</span><span class="op" id="6614231">:</span><span class="ident" id="6614232"><a href="/gostd/go/doc/doc_test.go.html#6614142">n</a></span><span class="op" id="6614233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614237">if</span>&nbsp;<span class="ident" id="6614240">i</span>&nbsp;<span class="op" id="6614242">:=</span>&nbsp;<span class="ident" id="6614245"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614252">.</span><span class="ident" id="6614253"><a href="/gostd/strings/strings.go.html#2971110">LastIndexAny</a></span><span class="op" id="6614265">(</span><span class="ident" id="6614266"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span><span class="op" id="6614267">,</span>&nbsp;<span class="string" id="6614269">&#34;\t\n&nbsp;&#34;</span><span class="op" id="6614276">)</span><span class="op" id="6614277">;</span>&nbsp;<span class="ident" id="6614279"><a href="/gostd/go/doc/doc_test.go.html#6614240">i</a></span>&nbsp;<span class="op" id="6614281">&gt;=</span>&nbsp;<span class="num" id="6614284">0</span>&nbsp;<span class="op" id="6614286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614291"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span>&nbsp;<span class="op" id="6614293">=</span>&nbsp;<span class="ident" id="6614295"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span><span class="op" id="6614296">[</span><span class="num" id="6614297">0</span><span class="op" id="6614298">:</span><span class="ident" id="6614299"><a href="/gostd/go/doc/doc_test.go.html#6614240">i</a></span><span class="op" id="6614300">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6614304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614308"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span>&nbsp;<span class="op" id="6614310">=</span>&nbsp;<span class="ident" id="6614312"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614319">.</span><span class="ident" id="6614320"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="6614329">(</span><span class="ident" id="6614330"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span><span class="op" id="6614331">)</span>&nbsp;<span class="op" id="6614333">+</span>&nbsp;<span class="string" id="6614335">&#34;&nbsp;...&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6614343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614346">return</span>&nbsp;<span class="string" id="6614353">&#34;//&nbsp;&#34;</span>&nbsp;<span class="op" id="6614359">+</span>&nbsp;<span class="ident" id="6614361"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614368">.</span><span class="ident" id="6614369"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="6614376">(</span><span class="ident" id="6614377"><a href="/gostd/go/doc/doc_test.go.html#6614116">s</a></span><span class="op" id="6614378">,</span>&nbsp;<span class="string" id="6614380">&#34;\n&#34;</span><span class="op" id="6614384">,</span>&nbsp;<span class="string" id="6614386">&#34;&nbsp;&#34;</span><span class="op" id="6614389">,</span>&nbsp;<span class="op" id="6614391">-</span><span class="num" id="6614392">1</span><span class="op" id="6614393">)</span><br>
<span class="lineno"></span><span class="op" id="6614395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6614398">func</span>&nbsp;<span class="ident" id="6614403">indentFmt</span><span class="op" id="6614412">(</span><span class="ident" id="6614413">indent</span><span class="op" id="6614419">,</span>&nbsp;<span class="ident" id="6614421">s</span>&nbsp;<span class="builtintype" id="6614423">string</span><span class="op" id="6614429">)</span>&nbsp;<span class="builtintype" id="6614431">string</span>&nbsp;<span class="op" id="6614438">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614441">end</span>&nbsp;<span class="op" id="6614445">:=</span>&nbsp;<span class="string" id="6614448">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614452">if</span>&nbsp;<span class="ident" id="6614455"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614462">.</span><span class="ident" id="6614463"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="6614472">(</span><span class="ident" id="6614473"><a href="/gostd/go/doc/doc_test.go.html#6614421">s</a></span><span class="op" id="6614474">,</span>&nbsp;<span class="string" id="6614476">&#34;\n&#34;</span><span class="op" id="6614480">)</span>&nbsp;<span class="op" id="6614482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614486"><a href="/gostd/go/doc/doc_test.go.html#6614441">end</a></span>&nbsp;<span class="op" id="6614490">=</span>&nbsp;<span class="string" id="6614492">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614499"><a href="/gostd/go/doc/doc_test.go.html#6614421">s</a></span>&nbsp;<span class="op" id="6614501">=</span>&nbsp;<span class="ident" id="6614503"><a href="/gostd/go/doc/doc_test.go.html#6614421">s</a></span><span class="op" id="6614504">[</span><span class="op" id="6614505">:</span><span class="builtinfunc" id="6614506">len</span><span class="op" id="6614509">(</span><span class="ident" id="6614510"><a href="/gostd/go/doc/doc_test.go.html#6614421">s</a></span><span class="op" id="6614511">)</span><span class="op" id="6614512">-</span><span class="num" id="6614513">1</span><span class="op" id="6614514">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6614517">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614520">return</span>&nbsp;<span class="ident" id="6614527"><a href="/gostd/go/doc/doc_test.go.html#6614413">indent</a></span>&nbsp;<span class="op" id="6614534">+</span>&nbsp;<span class="ident" id="6614536"><a href="/gostd/go/doc/doc_test.go.html#6613351">strings</a></span><span class="op" id="6614543">.</span><span class="ident" id="6614544"><a href="/gostd/strings/strings.go.html#2983409">Replace</a></span><span class="op" id="6614551">(</span><span class="ident" id="6614552"><a href="/gostd/go/doc/doc_test.go.html#6614421">s</a></span><span class="op" id="6614553">,</span>&nbsp;<span class="string" id="6614555">&#34;\n&#34;</span><span class="op" id="6614559">,</span>&nbsp;<span class="string" id="6614561">&#34;\n&#34;</span><span class="op" id="6614565">+</span><span class="ident" id="6614566"><a href="/gostd/go/doc/doc_test.go.html#6614413">indent</a></span><span class="op" id="6614572">,</span>&nbsp;<span class="op" id="6614574">-</span><span class="num" id="6614575">1</span><span class="op" id="6614576">)</span>&nbsp;<span class="op" id="6614578">+</span>&nbsp;<span class="ident" id="6614580"><a href="/gostd/go/doc/doc_test.go.html#6614441">end</a></span><br>
<span class="lineno"></span><span class="op" id="6614584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6614587">func</span>&nbsp;<span class="ident" id="6614592">isGoFile</span><span class="op" id="6614600">(</span><span class="ident" id="6614601">fi</span>&nbsp;<span class="ident" id="6614604"><a href="/gostd/go/doc/doc_test.go.html#6613318">os</a></span><span class="op" id="6614606">.</span><span class="ident" id="6614607"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="6614615">)</span>&nbsp;<span class="builtintype" id="6614617">bool</span>&nbsp;<span class="op" id="6614622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614625">name</span>&nbsp;<span class="op" id="6614630">:=</span>&nbsp;<span class="ident" id="6614633"><a href="/gostd/go/doc/doc_test.go.html#6614601">fi</a></span><span class="op" id="6614635">.</span><span class="ident" id="6614636"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="6614640">(</span><span class="op" id="6614641">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614644">return</span>&nbsp;<span class="op" id="6614651">!</span><span class="ident" id="6614652"><a href="/gostd/go/doc/doc_test.go.html#6614601">fi</a></span><span class="op" id="6614654">.</span><span class="ident" id="6614655"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="6614660">(</span><span class="op" id="6614661">)</span>&nbsp;<span class="op" id="6614663">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6614668">len</span><span class="op" id="6614671">(</span><span class="ident" id="6614672"><a href="/gostd/go/doc/doc_test.go.html#6614625">name</a></span><span class="op" id="6614676">)</span>&nbsp;<span class="op" id="6614678">&gt;</span>&nbsp;<span class="num" id="6614680">0</span>&nbsp;<span class="op" id="6614682">&amp;&amp;</span>&nbsp;<span class="ident" id="6614685"><a href="/gostd/go/doc/doc_test.go.html#6614625">name</a></span><span class="op" id="6614689">[</span><span class="num" id="6614690">0</span><span class="op" id="6614691">]</span>&nbsp;<span class="op" id="6614693">!=</span>&nbsp;<span class="string" id="6614696">&#39;.&#39;</span>&nbsp;<span class="op" id="6614700">&amp;&amp;</span>&nbsp;<span class="comment" id="6614703">//&nbsp;ignore&nbsp;.files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614722"><a href="/gostd/go/doc/doc_test.go.html#6613324">filepath</a></span><span class="op" id="6614730">.</span><span class="ident" id="6614731"><a href="/gostd/path/filepath/path.go.html#3783932">Ext</a></span><span class="op" id="6614734">(</span><span class="ident" id="6614735"><a href="/gostd/go/doc/doc_test.go.html#6614625">name</a></span><span class="op" id="6614739">)</span>&nbsp;<span class="op" id="6614741">==</span>&nbsp;<span class="string" id="6614744">&#34;.go&#34;</span><br>
<span class="lineno"></span><span class="op" id="6614750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6614753">type</span>&nbsp;<span class="ident" id="6614758">bundle</span>&nbsp;<span class="keyword" id="6614765">struct</span>&nbsp;<span class="op" id="6614772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6614775">*</span><span class="ident" id="6614776"><a href="/gostd/go/doc/doc.go.html#3490467">Package</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614785">FSet</span>&nbsp;<span class="op" id="6614790">*</span><span class="ident" id="6614791"><a href="/gostd/go/doc/doc_test.go.html#6613293">token</a></span><span class="op" id="6614796">.</span><span class="ident" id="6614797"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><br>
<span class="lineno"></span><span class="op" id="6614805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="6614808">func</span>&nbsp;<span class="ident" id="6614813">test</span><span class="op" id="6614817">(</span><span class="ident" id="6614818">t</span>&nbsp;<span class="op" id="6614820">*</span><span class="ident" id="6614821"><a href="/gostd/go/doc/doc_test.go.html#6613362">testing</a></span><span class="op" id="6614828">.</span><span class="ident" id="6614829"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6614830">,</span>&nbsp;<span class="ident" id="6614832">mode</span>&nbsp;<span class="ident" id="6614837"><a href="/gostd/go/doc/doc.go.html#3492368">Mode</a></span><span class="op" id="6614841">)</span>&nbsp;<span class="op" id="6614843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6614846">//&nbsp;determine&nbsp;file&nbsp;filter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614872">filter</span>&nbsp;<span class="op" id="6614879">:=</span>&nbsp;<span class="ident" id="6614882"><a href="/gostd/go/doc/doc_test.go.html#6614592">isGoFile</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614892">if</span>&nbsp;<span class="op" id="6614895">*</span><span class="ident" id="6614896"><a href="/gostd/go/doc/doc_test.go.html#6613466">files</a></span>&nbsp;<span class="op" id="6614902">!=</span>&nbsp;<span class="string" id="6614905">&#34;&#34;</span>&nbsp;<span class="op" id="6614908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614912">rx</span><span class="op" id="6614914">,</span>&nbsp;<span class="ident" id="6614916">err</span>&nbsp;<span class="op" id="6614920">:=</span>&nbsp;<span class="ident" id="6614923"><a href="/gostd/go/doc/doc_test.go.html#6613341">regexp</a></span><span class="op" id="6614929">.</span><span class="ident" id="6614930"><a href="/gostd/regexp/regexp.go.html#3568489">Compile</a></span><span class="op" id="6614937">(</span><span class="op" id="6614938">*</span><span class="ident" id="6614939"><a href="/gostd/go/doc/doc_test.go.html#6613466">files</a></span><span class="op" id="6614944">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6614948">if</span>&nbsp;<span class="ident" id="6614951"><a href="/gostd/go/doc/doc_test.go.html#6614916">err</a></span>&nbsp;<span class="op" id="6614955">!=</span>&nbsp;<span class="builtintype" id="6614958">nil</span>&nbsp;<span class="op" id="6614962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614967"><a href="/gostd/go/doc/doc_test.go.html#6614818">t</a></span><span class="op" id="6614968">.</span><span class="ident" id="6614969"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6614974">(</span><span class="ident" id="6614975"><a href="/gostd/go/doc/doc_test.go.html#6614916">err</a></span><span class="op" id="6614978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6614982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6614986"><a href="/gostd/go/doc/doc_test.go.html#6614872">filter</a></span>&nbsp;<span class="op" id="6614993">=</span>&nbsp;<span class="keyword" id="6614995">func</span><span class="op" id="6614999">(</span><span class="ident" id="6615000">fi</span>&nbsp;<span class="ident" id="6615003"><a href="/gostd/go/doc/doc_test.go.html#6613318">os</a></span><span class="op" id="6615005">.</span><span class="ident" id="6615006"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="6615014">)</span>&nbsp;<span class="builtintype" id="6615016">bool</span>&nbsp;<span class="op" id="6615021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615026">return</span>&nbsp;<span class="ident" id="6615033"><a href="/gostd/go/doc/doc_test.go.html#6614592">isGoFile</a></span><span class="op" id="6615041">(</span><span class="ident" id="6615042"><a href="/gostd/go/doc/doc_test.go.html#6615000">fi</a></span><span class="op" id="6615044">)</span>&nbsp;<span class="op" id="6615046">&amp;&amp;</span>&nbsp;<span class="ident" id="6615049"><a href="/gostd/go/doc/doc_test.go.html#6614912">rx</a></span><span class="op" id="6615051">.</span><span class="ident" id="6615052"><a href="/gostd/regexp/regexp.go.html#3576314">MatchString</a></span><span class="op" id="6615063">(</span><span class="ident" id="6615064"><a href="/gostd/go/doc/doc_test.go.html#6615000">fi</a></span><span class="op" id="6615066">.</span><span class="ident" id="6615067"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="6615071">(</span><span class="op" id="6615072">)</span><span class="op" id="6615073">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6615084">//&nbsp;get&nbsp;packages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615101">fset</span>&nbsp;<span class="op" id="6615106">:=</span>&nbsp;<span class="ident" id="6615109"><a href="/gostd/go/doc/doc_test.go.html#6613293">token</a></span><span class="op" id="6615114">.</span><span class="ident" id="6615115"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="6615125">(</span><span class="op" id="6615126">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615129">pkgs</span><span class="op" id="6615133">,</span>&nbsp;<span class="ident" id="6615135">err</span>&nbsp;<span class="op" id="6615139">:=</span>&nbsp;<span class="ident" id="6615142"><a href="/gostd/go/doc/doc_test.go.html#6613266">parser</a></span><span class="op" id="6615148">.</span><span class="ident" id="6615149"><a href="/gostd/go/parser/interface.go.html#5954536">ParseDir</a></span><span class="op" id="6615157">(</span><span class="ident" id="6615158"><a href="/gostd/go/doc/doc_test.go.html#6615101">fset</a></span><span class="op" id="6615162">,</span>&nbsp;<span class="ident" id="6615164"><a href="/gostd/go/doc/doc_test.go.html#6613570">dataDir</a></span><span class="op" id="6615171">,</span>&nbsp;<span class="ident" id="6615173"><a href="/gostd/go/doc/doc_test.go.html#6614872">filter</a></span><span class="op" id="6615179">,</span>&nbsp;<span class="ident" id="6615181"><a href="/gostd/go/doc/doc_test.go.html#6613266">parser</a></span><span class="op" id="6615187">.</span><span class="ident" id="6615188"><a href="/gostd/go/parser/interface.go.html#5951730">ParseComments</a></span><span class="op" id="6615201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615204">if</span>&nbsp;<span class="ident" id="6615207"><a href="/gostd/go/doc/doc_test.go.html#6615135">err</a></span>&nbsp;<span class="op" id="6615211">!=</span>&nbsp;<span class="builtintype" id="6615214">nil</span>&nbsp;<span class="op" id="6615218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615222"><a href="/gostd/go/doc/doc_test.go.html#6614818">t</a></span><span class="op" id="6615223">.</span><span class="ident" id="6615224"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="6615229">(</span><span class="ident" id="6615230"><a href="/gostd/go/doc/doc_test.go.html#6615135">err</a></span><span class="op" id="6615233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6615240">//&nbsp;test&nbsp;packages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615258">for</span>&nbsp;<span class="ident" id="6615262">_</span><span class="op" id="6615263">,</span>&nbsp;<span class="ident" id="6615265">pkg</span>&nbsp;<span class="op" id="6615269">:=</span>&nbsp;<span class="keyword" id="6615272">range</span>&nbsp;<span class="ident" id="6615278"><a href="/gostd/go/doc/doc_test.go.html#6615129">pkgs</a></span>&nbsp;<span class="op" id="6615283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615287">importpath</span>&nbsp;<span class="op" id="6615298">:=</span>&nbsp;<span class="ident" id="6615301"><a href="/gostd/go/doc/doc_test.go.html#6613570">dataDir</a></span>&nbsp;<span class="op" id="6615309">+</span>&nbsp;<span class="string" id="6615311">&#34;/&#34;</span>&nbsp;<span class="op" id="6615315">+</span>&nbsp;<span class="ident" id="6615317"><a href="/gostd/go/doc/doc_test.go.html#6615265">pkg</a></span><span class="op" id="6615320">.</span><span class="ident" id="6615321"><a href="/gostd/go/ast/ast.go.html#3824656">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615328">doc</span>&nbsp;<span class="op" id="6615332">:=</span>&nbsp;<span class="ident" id="6615335"><a href="/gostd/go/doc/doc.go.html#3492759">New</a></span><span class="op" id="6615338">(</span><span class="ident" id="6615339"><a href="/gostd/go/doc/doc_test.go.html#6615265">pkg</a></span><span class="op" id="6615342">,</span>&nbsp;<span class="ident" id="6615344"><a href="/gostd/go/doc/doc_test.go.html#6615287">importpath</a></span><span class="op" id="6615354">,</span>&nbsp;<span class="ident" id="6615356"><a href="/gostd/go/doc/doc_test.go.html#6614832">mode</a></span><span class="op" id="6615360">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6615365">//&nbsp;golden&nbsp;files&nbsp;always&nbsp;use&nbsp;/&nbsp;in&nbsp;filenames&nbsp;-&nbsp;canonicalize&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615429">for</span>&nbsp;<span class="ident" id="6615433">i</span><span class="op" id="6615434">,</span>&nbsp;<span class="ident" id="6615436">filename</span>&nbsp;<span class="op" id="6615445">:=</span>&nbsp;<span class="keyword" id="6615448">range</span>&nbsp;<span class="ident" id="6615454"><a href="/gostd/go/doc/doc_test.go.html#6615328">doc</a></span><span class="op" id="6615457">.</span><span class="ident" id="6615458"><a href="/gostd/go/doc/doc.go.html#3490563">Filenames</a></span>&nbsp;<span class="op" id="6615468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615473"><a href="/gostd/go/doc/doc_test.go.html#6615328">doc</a></span><span class="op" id="6615476">.</span><span class="ident" id="6615477"><a href="/gostd/go/doc/doc.go.html#3490563">Filenames</a></span><span class="op" id="6615486">[</span><span class="ident" id="6615487"><a href="/gostd/go/doc/doc_test.go.html#6615433">i</a></span><span class="op" id="6615488">]</span>&nbsp;<span class="op" id="6615490">=</span>&nbsp;<span class="ident" id="6615492"><a href="/gostd/go/doc/doc_test.go.html#6613324">filepath</a></span><span class="op" id="6615500">.</span><span class="ident" id="6615501"><a href="/gostd/path/filepath/path.go.html#3782237">ToSlash</a></span><span class="op" id="6615508">(</span><span class="ident" id="6615509"><a href="/gostd/go/doc/doc_test.go.html#6615436">filename</a></span><span class="op" id="6615517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6615526">//&nbsp;print&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615551">var</span>&nbsp;<span class="ident" id="6615555">buf</span>&nbsp;<span class="ident" id="6615559"><a href="/gostd/go/doc/doc_test.go.html#6613242">bytes</a></span><span class="op" id="6615564">.</span><span class="ident" id="6615565"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615574">if</span>&nbsp;<span class="ident" id="6615577">err</span>&nbsp;<span class="op" id="6615581">:=</span>&nbsp;<span class="ident" id="6615584"><a href="/gostd/go/doc/doc_test.go.html#6613596">templateTxt</a></span><span class="op" id="6615595">.</span><span class="ident" id="6615596"><a href="/gostd/text/template/exec.go.html#3697581">Execute</a></span><span class="op" id="6615603">(</span><span class="op" id="6615604">&amp;</span><span class="ident" id="6615605"><a href="/gostd/go/doc/doc_test.go.html#6615555">buf</a></span><span class="op" id="6615608">,</span>&nbsp;<span class="ident" id="6615610"><a href="/gostd/go/doc/doc_test.go.html#6614758">bundle</a></span><span class="op" id="6615616">{</span><span class="ident" id="6615617"><a href="/gostd/go/doc/doc_test.go.html#6615328">doc</a></span><span class="op" id="6615620">,</span>&nbsp;<span class="ident" id="6615622"><a href="/gostd/go/doc/doc_test.go.html#6615101">fset</a></span><span class="op" id="6615626">}</span><span class="op" id="6615627">)</span><span class="op" id="6615628">;</span>&nbsp;<span class="ident" id="6615630"><a href="/gostd/go/doc/doc_test.go.html#6615577">err</a></span>&nbsp;<span class="op" id="6615634">!=</span>&nbsp;<span class="builtintype" id="6615637">nil</span>&nbsp;<span class="op" id="6615641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615646"><a href="/gostd/go/doc/doc_test.go.html#6614818">t</a></span><span class="op" id="6615647">.</span><span class="ident" id="6615648"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6615653">(</span><span class="ident" id="6615654"><a href="/gostd/go/doc/doc_test.go.html#6615577">err</a></span><span class="op" id="6615657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615662">continue</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615677">got</span>&nbsp;<span class="op" id="6615681">:=</span>&nbsp;<span class="ident" id="6615684"><a href="/gostd/go/doc/doc_test.go.html#6615555">buf</a></span><span class="op" id="6615687">.</span><span class="ident" id="6615688"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6615693">(</span><span class="op" id="6615694">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6615699">//&nbsp;update&nbsp;golden&nbsp;file&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615736">golden</span>&nbsp;<span class="op" id="6615743">:=</span>&nbsp;<span class="ident" id="6615746"><a href="/gostd/go/doc/doc_test.go.html#6613324">filepath</a></span><span class="op" id="6615754">.</span><span class="ident" id="6615755"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="6615759">(</span><span class="ident" id="6615760"><a href="/gostd/go/doc/doc_test.go.html#6613570">dataDir</a></span><span class="op" id="6615767">,</span>&nbsp;<span class="ident" id="6615769"><a href="/gostd/go/doc/doc_test.go.html#6613259">fmt</a></span><span class="op" id="6615772">.</span><span class="ident" id="6615773"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6615780">(</span><span class="string" id="6615781">&#34;%s.%d.golden&#34;</span><span class="op" id="6615795">,</span>&nbsp;<span class="ident" id="6615797"><a href="/gostd/go/doc/doc_test.go.html#6615265">pkg</a></span><span class="op" id="6615800">.</span><span class="ident" id="6615801"><a href="/gostd/go/ast/ast.go.html#3824656">Name</a></span><span class="op" id="6615805">,</span>&nbsp;<span class="ident" id="6615807"><a href="/gostd/go/doc/doc_test.go.html#6614832">mode</a></span><span class="op" id="6615811">)</span><span class="op" id="6615812">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615816">if</span>&nbsp;<span class="op" id="6615819">*</span><span class="ident" id="6615820"><a href="/gostd/go/doc/doc_test.go.html#6613396">update</a></span>&nbsp;<span class="op" id="6615827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615832">err</span>&nbsp;<span class="op" id="6615836">:=</span>&nbsp;<span class="ident" id="6615839"><a href="/gostd/go/doc/doc_test.go.html#6613305">ioutil</a></span><span class="op" id="6615845">.</span><span class="ident" id="6615846"><a href="/gostd/io/ioutil/ioutil.go.html#3766490">WriteFile</a></span><span class="op" id="6615855">(</span><span class="ident" id="6615856"><a href="/gostd/go/doc/doc_test.go.html#6615736">golden</a></span><span class="op" id="6615862">,</span>&nbsp;<span class="ident" id="6615864"><a href="/gostd/go/doc/doc_test.go.html#6615677">got</a></span><span class="op" id="6615867">,</span>&nbsp;<span class="num" id="6615869">0644</span><span class="op" id="6615873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615878">if</span>&nbsp;<span class="ident" id="6615881"><a href="/gostd/go/doc/doc_test.go.html#6615832">err</a></span>&nbsp;<span class="op" id="6615885">!=</span>&nbsp;<span class="builtintype" id="6615888">nil</span>&nbsp;<span class="op" id="6615892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615898"><a href="/gostd/go/doc/doc_test.go.html#6614818">t</a></span><span class="op" id="6615899">.</span><span class="ident" id="6615900"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6615905">(</span><span class="ident" id="6615906"><a href="/gostd/go/doc/doc_test.go.html#6615832">err</a></span><span class="op" id="6615909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615914">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615919">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6615930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6615935">//&nbsp;get&nbsp;golden&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6615956">want</span><span class="op" id="6615960">,</span>&nbsp;<span class="ident" id="6615962">err</span>&nbsp;<span class="op" id="6615966">:=</span>&nbsp;<span class="ident" id="6615969"><a href="/gostd/go/doc/doc_test.go.html#6613305">ioutil</a></span><span class="op" id="6615975">.</span><span class="ident" id="6615976"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="6615984">(</span><span class="ident" id="6615985"><a href="/gostd/go/doc/doc_test.go.html#6615736">golden</a></span><span class="op" id="6615991">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6615995">if</span>&nbsp;<span class="ident" id="6615998"><a href="/gostd/go/doc/doc_test.go.html#6615962">err</a></span>&nbsp;<span class="op" id="6616002">!=</span>&nbsp;<span class="builtintype" id="6616005">nil</span>&nbsp;<span class="op" id="6616009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616014"><a href="/gostd/go/doc/doc_test.go.html#6614818">t</a></span><span class="op" id="6616015">.</span><span class="ident" id="6616016"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="6616021">(</span><span class="ident" id="6616022"><a href="/gostd/go/doc/doc_test.go.html#6615962">err</a></span><span class="op" id="6616025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616030">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6616046">//&nbsp;compare</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616059">if</span>&nbsp;<span class="op" id="6616062">!</span><span class="ident" id="6616063"><a href="/gostd/go/doc/doc_test.go.html#6613242">bytes</a></span><span class="op" id="6616068">.</span><span class="ident" id="6616069"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="6616074">(</span><span class="ident" id="6616075"><a href="/gostd/go/doc/doc_test.go.html#6615677">got</a></span><span class="op" id="6616078">,</span>&nbsp;<span class="ident" id="6616080"><a href="/gostd/go/doc/doc_test.go.html#6615956">want</a></span><span class="op" id="6616084">)</span>&nbsp;<span class="op" id="6616086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616091"><a href="/gostd/go/doc/doc_test.go.html#6614818">t</a></span><span class="op" id="6616092">.</span><span class="ident" id="6616093"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6616099">(</span><span class="string" id="6616100">&#34;package&nbsp;%s\n\tgot:\n%s\n\twant:\n%s&#34;</span><span class="op" id="6616137">,</span>&nbsp;<span class="ident" id="6616139"><a href="/gostd/go/doc/doc_test.go.html#6615265">pkg</a></span><span class="op" id="6616142">.</span><span class="ident" id="6616143"><a href="/gostd/go/ast/ast.go.html#3824656">Name</a></span><span class="op" id="6616147">,</span>&nbsp;<span class="ident" id="6616149"><a href="/gostd/go/doc/doc_test.go.html#6615677">got</a></span><span class="op" id="6616152">,</span>&nbsp;<span class="ident" id="6616154"><a href="/gostd/go/doc/doc_test.go.html#6615956">want</a></span><span class="op" id="6616158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616165">}</span><br>
<span class="lineno">140</span><span class="op" id="6616167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616170">func</span>&nbsp;<span class="ident" id="6616175">Test</span><span class="op" id="6616179">(</span><span class="ident" id="6616180">t</span>&nbsp;<span class="op" id="6616182">*</span><span class="ident" id="6616183"><a href="/gostd/go/doc/doc_test.go.html#6613362">testing</a></span><span class="op" id="6616190">.</span><span class="ident" id="6616191"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6616192">)</span>&nbsp;<span class="op" id="6616194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616197"><a href="/gostd/go/doc/doc_test.go.html#6614813">test</a></span><span class="op" id="6616201">(</span><span class="ident" id="6616202"><a href="/gostd/go/doc/doc_test.go.html#6616180">t</a></span><span class="op" id="6616203">,</span>&nbsp;<span class="num" id="6616205">0</span><span class="op" id="6616206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616209"><a href="/gostd/go/doc/doc_test.go.html#6614813">test</a></span><span class="op" id="6616213">(</span><span class="ident" id="6616214"><a href="/gostd/go/doc/doc_test.go.html#6616180">t</a></span><span class="op" id="6616215">,</span>&nbsp;<span class="ident" id="6616217"><a href="/gostd/go/doc/doc.go.html#3492476">AllDecls</a></span><span class="op" id="6616225">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616228"><a href="/gostd/go/doc/doc_test.go.html#6614813">test</a></span><span class="op" id="6616232">(</span><span class="ident" id="6616233"><a href="/gostd/go/doc/doc_test.go.html#6616180">t</a></span><span class="op" id="6616234">,</span>&nbsp;<span class="ident" id="6616236"><a href="/gostd/go/doc/doc.go.html#3492600">AllMethods</a></span><span class="op" id="6616246">)</span><br>
<span class="lineno"></span><span class="op" id="6616248">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
