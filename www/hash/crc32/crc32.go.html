<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3112232">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3112287">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3112341">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3112392">//&nbsp;Package&nbsp;crc32&nbsp;implements&nbsp;the&nbsp;32-bit&nbsp;cyclic&nbsp;redundancy&nbsp;check,&nbsp;or&nbsp;CRC-32,</span><br>
<span class="lineno"></span><span class="comment" id="3112467">//&nbsp;checksum.&nbsp;See&nbsp;http://en.wikipedia.org/wiki/Cyclic_redundancy_check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="3112541">//&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="3112557">package</span>&nbsp;<span class="ident" id="3112565">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3112572">import</span>&nbsp;<span class="op" id="3112579">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112582">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3112590">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3112597">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3112600">//&nbsp;The&nbsp;size&nbsp;of&nbsp;a&nbsp;CRC-32&nbsp;checksum&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="3112643">const</span>&nbsp;<span class="ident" id="3112649">Size</span>&nbsp;<span class="op" id="3112654">=</span>&nbsp;<span class="num" id="3112656">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3112659">//&nbsp;Predefined&nbsp;polynomials.</span><br>
<span class="lineno"></span><span class="keyword" id="3112686">const</span>&nbsp;<span class="op" id="3112692">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3112695">//&nbsp;IEEE&nbsp;is&nbsp;by&nbsp;far&nbsp;and&nbsp;away&nbsp;the&nbsp;most&nbsp;common&nbsp;CRC-32&nbsp;polynomial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3112758">//&nbsp;Used&nbsp;by&nbsp;ethernet&nbsp;(IEEE&nbsp;802.3),&nbsp;v.42,&nbsp;fddi,&nbsp;gzip,&nbsp;zip,&nbsp;png,&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112825">IEEE</span>&nbsp;<span class="op" id="3112830">=</span>&nbsp;<span class="num" id="3112832">0xedb88320</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3112845">//&nbsp;Castagnoli&#39;s&nbsp;polynomial,&nbsp;used&nbsp;in&nbsp;iSCSI.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3112889">//&nbsp;Has&nbsp;better&nbsp;error&nbsp;detection&nbsp;characteristics&nbsp;than&nbsp;IEEE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3112947">//&nbsp;http://dx.doi.org/10.1109/26.231911</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3112987">Castagnoli</span>&nbsp;<span class="op" id="3112998">=</span>&nbsp;<span class="num" id="3113000">0x82f63b78</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3113013">//&nbsp;Koopman&#39;s&nbsp;polynomial.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3113039">//&nbsp;Also&nbsp;has&nbsp;better&nbsp;error&nbsp;detection&nbsp;characteristics&nbsp;than&nbsp;IEEE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3113102">//&nbsp;http://dx.doi.org/10.1109/DSN.2002.1028931</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113149">Koopman</span>&nbsp;<span class="op" id="3113157">=</span>&nbsp;<span class="num" id="3113159">0xeb31d82e</span><br>
<span class="lineno"></span><span class="op" id="3113170">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3113173">//&nbsp;Table&nbsp;is&nbsp;a&nbsp;256-word&nbsp;table&nbsp;representing&nbsp;the&nbsp;polynomial&nbsp;for&nbsp;efficient&nbsp;processing.</span><br>
<span class="lineno"></span><span class="keyword" id="3113256">type</span>&nbsp;<span class="ident" id="3113261">Table</span>&nbsp;<span class="op" id="3113267">[</span><span class="num" id="3113268">256</span><span class="op" id="3113271">]</span><span class="builtintype" id="3113272">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3113280">//&nbsp;castagnoliTable&nbsp;points&nbsp;to&nbsp;a&nbsp;lazily&nbsp;initialized&nbsp;Table&nbsp;for&nbsp;the&nbsp;Castagnoli</span><br>
<span class="lineno"></span><span class="comment" id="3113355">//&nbsp;polynomial.&nbsp;MakeTable&nbsp;will&nbsp;always&nbsp;return&nbsp;this&nbsp;value&nbsp;when&nbsp;asked&nbsp;to&nbsp;make&nbsp;a</span><br>
<span class="lineno">40</span><span class="comment" id="3113431">//&nbsp;Castagnoli&nbsp;table&nbsp;so&nbsp;we&nbsp;can&nbsp;compare&nbsp;against&nbsp;it&nbsp;to&nbsp;find&nbsp;when&nbsp;the&nbsp;caller&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3113507">//&nbsp;using&nbsp;this&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="3113533">var</span>&nbsp;<span class="ident" id="3113537">castagnoliTable</span>&nbsp;<span class="op" id="3113553">*</span><span class="ident" id="3113554"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><br>
<span class="lineno"></span><span class="keyword" id="3113560">var</span>&nbsp;<span class="ident" id="3113564">castagnoliOnce</span>&nbsp;<span class="ident" id="3113579"><a href="/hash/crc32/crc32.go.html#3112590">sync</a></span><span class="op" id="3113583">.</span><span class="ident" id="3113584">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="3113590">func</span>&nbsp;<span class="ident" id="3113595">castagnoliInit</span><span class="op" id="3113609">(</span><span class="op" id="3113610">)</span>&nbsp;<span class="op" id="3113612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113615"><a href="/hash/crc32/crc32.go.html#3113537">castagnoliTable</a></span>&nbsp;<span class="op" id="3113631">=</span>&nbsp;<span class="ident" id="3113633"><a href="/hash/crc32/crc32.go.html#3114087">makeTable</a></span><span class="op" id="3113642">(</span><span class="ident" id="3113643"><a href="/hash/crc32/crc32.go.html#3112987">Castagnoli</a></span><span class="op" id="3113653">)</span><br>
<span class="lineno"></span><span class="op" id="3113655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3113658">//&nbsp;IEEETable&nbsp;is&nbsp;the&nbsp;table&nbsp;for&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno">50</span><span class="keyword" id="3113709">var</span>&nbsp;<span class="ident" id="3113713">IEEETable</span>&nbsp;<span class="op" id="3113723">=</span>&nbsp;<span class="ident" id="3113725"><a href="/hash/crc32/crc32.go.html#3114087">makeTable</a></span><span class="op" id="3113734">(</span><span class="ident" id="3113735"><a href="/hash/crc32/crc32.go.html#3112825">IEEE</a></span><span class="op" id="3113739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3113742">//&nbsp;MakeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="3113816">func</span>&nbsp;<span class="ident" id="3113821">MakeTable</span><span class="op" id="3113830">(</span><span class="ident" id="3113831">poly</span>&nbsp;<span class="builtintype" id="3113836">uint32</span><span class="op" id="3113842">)</span>&nbsp;<span class="op" id="3113844">*</span><span class="ident" id="3113845"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span>&nbsp;<span class="op" id="3113851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113854">switch</span>&nbsp;<span class="ident" id="3113861"><a href="/hash/crc32/crc32.go.html#3113831">poly</a></span>&nbsp;<span class="op" id="3113866">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113869">case</span>&nbsp;<span class="ident" id="3113874"><a href="/hash/crc32/crc32.go.html#3112825">IEEE</a></span><span class="op" id="3113878">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113882">return</span>&nbsp;<span class="ident" id="3113889"><a href="/hash/crc32/crc32.go.html#3113713">IEEETable</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113900">case</span>&nbsp;<span class="ident" id="3113905"><a href="/hash/crc32/crc32.go.html#3112987">Castagnoli</a></span><span class="op" id="3113915">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3113919"><a href="/hash/crc32/crc32.go.html#3113564">castagnoliOnce</a></span><span class="op" id="3113933">.</span><span class="ident" id="3113934">Do</span><span class="op" id="3113936">(</span><span class="ident" id="3113937"><a href="/hash/crc32/crc32.go.html#3113595">castagnoliInit</a></span><span class="op" id="3113951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113955">return</span>&nbsp;<span class="ident" id="3113962"><a href="/hash/crc32/crc32.go.html#3113537">castagnoliTable</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3113979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3113982">return</span>&nbsp;<span class="ident" id="3113989"><a href="/hash/crc32/crc32.go.html#3114087">makeTable</a></span><span class="op" id="3113998">(</span><span class="ident" id="3113999"><a href="/hash/crc32/crc32.go.html#3113831">poly</a></span><span class="op" id="3114003">)</span><br>
<span class="lineno"></span><span class="op" id="3114005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3114008">//&nbsp;makeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno">65</span><span class="keyword" id="3114082">func</span>&nbsp;<span class="ident" id="3114087">makeTable</span><span class="op" id="3114096">(</span><span class="ident" id="3114097">poly</span>&nbsp;<span class="builtintype" id="3114102">uint32</span><span class="op" id="3114108">)</span>&nbsp;<span class="op" id="3114110">*</span><span class="ident" id="3114111"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span>&nbsp;<span class="op" id="3114117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114120">t</span>&nbsp;<span class="op" id="3114122">:=</span>&nbsp;<span class="builtinfunc" id="3114125">new</span><span class="op" id="3114128">(</span><span class="ident" id="3114129"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><span class="op" id="3114134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114137">for</span>&nbsp;<span class="ident" id="3114141">i</span>&nbsp;<span class="op" id="3114143">:=</span>&nbsp;<span class="num" id="3114146">0</span><span class="op" id="3114147">;</span>&nbsp;<span class="ident" id="3114149"><a href="/hash/crc32/crc32.go.html#3114141">i</a></span>&nbsp;<span class="op" id="3114151">&lt;</span>&nbsp;<span class="num" id="3114153">256</span><span class="op" id="3114156">;</span>&nbsp;<span class="ident" id="3114158"><a href="/hash/crc32/crc32.go.html#3114141">i</a></span><span class="op" id="3114159">++</span>&nbsp;<span class="op" id="3114162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114166">crc</span>&nbsp;<span class="op" id="3114170">:=</span>&nbsp;<span class="builtintype" id="3114173">uint32</span><span class="op" id="3114179">(</span><span class="ident" id="3114180"><a href="/hash/crc32/crc32.go.html#3114141">i</a></span><span class="op" id="3114181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114185">for</span>&nbsp;<span class="ident" id="3114189">j</span>&nbsp;<span class="op" id="3114191">:=</span>&nbsp;<span class="num" id="3114194">0</span><span class="op" id="3114195">;</span>&nbsp;<span class="ident" id="3114197"><a href="/hash/crc32/crc32.go.html#3114189">j</a></span>&nbsp;<span class="op" id="3114199">&lt;</span>&nbsp;<span class="num" id="3114201">8</span><span class="op" id="3114202">;</span>&nbsp;<span class="ident" id="3114204"><a href="/hash/crc32/crc32.go.html#3114189">j</a></span><span class="op" id="3114205">++</span>&nbsp;<span class="op" id="3114208">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114213">if</span>&nbsp;<span class="ident" id="3114216"><a href="/hash/crc32/crc32.go.html#3114166">crc</a></span><span class="op" id="3114219">&amp;</span><span class="num" id="3114220">1</span>&nbsp;<span class="op" id="3114222">==</span>&nbsp;<span class="num" id="3114225">1</span>&nbsp;<span class="op" id="3114227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114233"><a href="/hash/crc32/crc32.go.html#3114166">crc</a></span>&nbsp;<span class="op" id="3114237">=</span>&nbsp;<span class="op" id="3114239">(</span><span class="ident" id="3114240"><a href="/hash/crc32/crc32.go.html#3114166">crc</a></span>&nbsp;<span class="op" id="3114244">&gt;&gt;</span>&nbsp;<span class="num" id="3114247">1</span><span class="op" id="3114248">)</span>&nbsp;<span class="op" id="3114250">^</span>&nbsp;<span class="ident" id="3114252"><a href="/hash/crc32/crc32.go.html#3114097">poly</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114260">}</span>&nbsp;<span class="keyword" id="3114262">else</span>&nbsp;<span class="op" id="3114267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114273"><a href="/hash/crc32/crc32.go.html#3114166">crc</a></span>&nbsp;<span class="op" id="3114277">&gt;&gt;=</span>&nbsp;<span class="num" id="3114281">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114286">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114294"><a href="/hash/crc32/crc32.go.html#3114120">t</a></span><span class="op" id="3114295">[</span><span class="ident" id="3114296"><a href="/hash/crc32/crc32.go.html#3114141">i</a></span><span class="op" id="3114297">]</span>&nbsp;<span class="op" id="3114299">=</span>&nbsp;<span class="ident" id="3114301"><a href="/hash/crc32/crc32.go.html#3114166">crc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3114306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114309">return</span>&nbsp;<span class="ident" id="3114316"><a href="/hash/crc32/crc32.go.html#3114120">t</a></span><br>
<span class="lineno"></span><span class="op" id="3114318">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3114321">//&nbsp;digest&nbsp;represents&nbsp;the&nbsp;partial&nbsp;evaluation&nbsp;of&nbsp;a&nbsp;checksum.</span><br>
<span class="lineno"></span><span class="keyword" id="3114380">type</span>&nbsp;<span class="ident" id="3114385">digest</span>&nbsp;<span class="keyword" id="3114392">struct</span>&nbsp;<span class="op" id="3114399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114402">crc</span>&nbsp;<span class="builtintype" id="3114406">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114414">tab</span>&nbsp;<span class="op" id="3114418">*</span><span class="ident" id="3114419"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><br>
<span class="lineno">85</span><span class="op" id="3114425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3114428">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash32&nbsp;computing&nbsp;the&nbsp;CRC-32&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="3114491">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="3114541">func</span>&nbsp;<span class="ident" id="3114546">New</span><span class="op" id="3114549">(</span><span class="ident" id="3114550">tab</span>&nbsp;<span class="op" id="3114554">*</span><span class="ident" id="3114555"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><span class="op" id="3114560">)</span>&nbsp;<span class="ident" id="3114562"><a href="/hash/crc32/crc32.go.html#3112582">hash</a></span><span class="op" id="3114566">.</span><span class="ident" id="3114567">Hash32</span>&nbsp;<span class="op" id="3114574">{</span>&nbsp;<span class="keyword" id="3114576">return</span>&nbsp;<span class="op" id="3114583">&amp;</span><span class="ident" id="3114584"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3114590">{</span><span class="num" id="3114591">0</span><span class="op" id="3114592">,</span>&nbsp;<span class="ident" id="3114594"><a href="/hash/crc32/crc32.go.html#3114550">tab</a></span><span class="op" id="3114597">}</span>&nbsp;<span class="op" id="3114599">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3114602">//&nbsp;NewIEEE&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash32&nbsp;computing&nbsp;the&nbsp;CRC-32&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="3114669">//&nbsp;using&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="3114699">func</span>&nbsp;<span class="ident" id="3114704">NewIEEE</span><span class="op" id="3114711">(</span><span class="op" id="3114712">)</span>&nbsp;<span class="ident" id="3114714"><a href="/hash/crc32/crc32.go.html#3112582">hash</a></span><span class="op" id="3114718">.</span><span class="ident" id="3114719">Hash32</span>&nbsp;<span class="op" id="3114726">{</span>&nbsp;<span class="keyword" id="3114728">return</span>&nbsp;<span class="ident" id="3114735"><a href="/hash/crc32/crc32.go.html#3114546">New</a></span><span class="op" id="3114738">(</span><span class="ident" id="3114739"><a href="/hash/crc32/crc32.go.html#3113713">IEEETable</a></span><span class="op" id="3114748">)</span>&nbsp;<span class="op" id="3114750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="3114753">func</span>&nbsp;<span class="op" id="3114758">(</span><span class="ident" id="3114759">d</span>&nbsp;<span class="op" id="3114761">*</span><span class="ident" id="3114762"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3114768">)</span>&nbsp;<span class="ident" id="3114770">Size</span><span class="op" id="3114774">(</span><span class="op" id="3114775">)</span>&nbsp;<span class="builtintype" id="3114777">int</span>&nbsp;<span class="op" id="3114781">{</span>&nbsp;<span class="keyword" id="3114783">return</span>&nbsp;<span class="ident" id="3114790"><a href="/hash/crc32/crc32.go.html#3112649">Size</a></span>&nbsp;<span class="op" id="3114795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3114798">func</span>&nbsp;<span class="op" id="3114803">(</span><span class="ident" id="3114804">d</span>&nbsp;<span class="op" id="3114806">*</span><span class="ident" id="3114807"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3114813">)</span>&nbsp;<span class="ident" id="3114815">BlockSize</span><span class="op" id="3114824">(</span><span class="op" id="3114825">)</span>&nbsp;<span class="builtintype" id="3114827">int</span>&nbsp;<span class="op" id="3114831">{</span>&nbsp;<span class="keyword" id="3114833">return</span>&nbsp;<span class="num" id="3114840">1</span>&nbsp;<span class="op" id="3114842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3114845">func</span>&nbsp;<span class="op" id="3114850">(</span><span class="ident" id="3114851">d</span>&nbsp;<span class="op" id="3114853">*</span><span class="ident" id="3114854"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3114860">)</span>&nbsp;<span class="ident" id="3114862">Reset</span><span class="op" id="3114867">(</span><span class="op" id="3114868">)</span>&nbsp;<span class="op" id="3114870">{</span>&nbsp;<span class="ident" id="3114872"><a href="/hash/crc32/crc32.go.html#3114851">d</a></span><span class="op" id="3114873">.</span><span class="ident" id="3114874">crc</span>&nbsp;<span class="op" id="3114878">=</span>&nbsp;<span class="num" id="3114880">0</span>&nbsp;<span class="op" id="3114882">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="3114885">func</span>&nbsp;<span class="ident" id="3114890">update</span><span class="op" id="3114896">(</span><span class="ident" id="3114897">crc</span>&nbsp;<span class="builtintype" id="3114901">uint32</span><span class="op" id="3114907">,</span>&nbsp;<span class="ident" id="3114909">tab</span>&nbsp;<span class="op" id="3114913">*</span><span class="ident" id="3114914"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><span class="op" id="3114919">,</span>&nbsp;<span class="ident" id="3114921">p</span>&nbsp;<span class="op" id="3114923">[</span><span class="op" id="3114924">]</span><span class="builtintype" id="3114925">byte</span><span class="op" id="3114929">)</span>&nbsp;<span class="builtintype" id="3114931">uint32</span>&nbsp;<span class="op" id="3114938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114941"><a href="/hash/crc32/crc32.go.html#3114897">crc</a></span>&nbsp;<span class="op" id="3114945">=</span>&nbsp;<span class="op" id="3114947">^</span><span class="ident" id="3114948"><a href="/hash/crc32/crc32.go.html#3114897">crc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3114953">for</span>&nbsp;<span class="ident" id="3114957">_</span><span class="op" id="3114958">,</span>&nbsp;<span class="ident" id="3114960">v</span>&nbsp;<span class="op" id="3114962">:=</span>&nbsp;<span class="keyword" id="3114965">range</span>&nbsp;<span class="ident" id="3114971"><a href="/hash/crc32/crc32.go.html#3114921">p</a></span>&nbsp;<span class="op" id="3114973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3114977"><a href="/hash/crc32/crc32.go.html#3114897">crc</a></span>&nbsp;<span class="op" id="3114981">=</span>&nbsp;<span class="ident" id="3114983"><a href="/hash/crc32/crc32.go.html#3114909">tab</a></span><span class="op" id="3114986">[</span><span class="builtintype" id="3114987">byte</span><span class="op" id="3114991">(</span><span class="ident" id="3114992"><a href="/hash/crc32/crc32.go.html#3114897">crc</a></span><span class="op" id="3114995">)</span><span class="op" id="3114996">^</span><span class="ident" id="3114997"><a href="/hash/crc32/crc32.go.html#3114960">v</a></span><span class="op" id="3114998">]</span>&nbsp;<span class="op" id="3115000">^</span>&nbsp;<span class="op" id="3115002">(</span><span class="ident" id="3115003"><a href="/hash/crc32/crc32.go.html#3114897">crc</a></span>&nbsp;<span class="op" id="3115007">&gt;&gt;</span>&nbsp;<span class="num" id="3115010">8</span><span class="op" id="3115011">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3115014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115017">return</span>&nbsp;<span class="op" id="3115024">^</span><span class="ident" id="3115025"><a href="/hash/crc32/crc32.go.html#3114897">crc</a></span><br>
<span class="lineno"></span><span class="op" id="3115029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3115032">//&nbsp;Update&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;adding&nbsp;the&nbsp;bytes&nbsp;in&nbsp;p&nbsp;to&nbsp;the&nbsp;crc.</span><br>
<span class="lineno">110</span><span class="keyword" id="3115098">func</span>&nbsp;<span class="ident" id="3115103">Update</span><span class="op" id="3115109">(</span><span class="ident" id="3115110">crc</span>&nbsp;<span class="builtintype" id="3115114">uint32</span><span class="op" id="3115120">,</span>&nbsp;<span class="ident" id="3115122">tab</span>&nbsp;<span class="op" id="3115126">*</span><span class="ident" id="3115127"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><span class="op" id="3115132">,</span>&nbsp;<span class="ident" id="3115134">p</span>&nbsp;<span class="op" id="3115136">[</span><span class="op" id="3115137">]</span><span class="builtintype" id="3115138">byte</span><span class="op" id="3115142">)</span>&nbsp;<span class="builtintype" id="3115144">uint32</span>&nbsp;<span class="op" id="3115151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115154">if</span>&nbsp;<span class="ident" id="3115157"><a href="/hash/crc32/crc32.go.html#3115122">tab</a></span>&nbsp;<span class="op" id="3115161">==</span>&nbsp;<span class="ident" id="3115164"><a href="/hash/crc32/crc32.go.html#3113537">castagnoliTable</a></span>&nbsp;<span class="op" id="3115180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115184">return</span>&nbsp;<span class="ident" id="3115191"><a href="/hash/crc32/crc32_amd64x.go.html#3116436">updateCastagnoli</a></span><span class="op" id="3115207">(</span><span class="ident" id="3115208"><a href="/hash/crc32/crc32.go.html#3115110">crc</a></span><span class="op" id="3115211">,</span>&nbsp;<span class="ident" id="3115213"><a href="/hash/crc32/crc32.go.html#3115134">p</a></span><span class="op" id="3115214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3115217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115220">return</span>&nbsp;<span class="ident" id="3115227"><a href="/hash/crc32/crc32.go.html#3114890">update</a></span><span class="op" id="3115233">(</span><span class="ident" id="3115234"><a href="/hash/crc32/crc32.go.html#3115110">crc</a></span><span class="op" id="3115237">,</span>&nbsp;<span class="ident" id="3115239"><a href="/hash/crc32/crc32.go.html#3115122">tab</a></span><span class="op" id="3115242">,</span>&nbsp;<span class="ident" id="3115244"><a href="/hash/crc32/crc32.go.html#3115134">p</a></span><span class="op" id="3115245">)</span><br>
<span class="lineno">115</span><span class="op" id="3115247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115250">func</span>&nbsp;<span class="op" id="3115255">(</span><span class="ident" id="3115256">d</span>&nbsp;<span class="op" id="3115258">*</span><span class="ident" id="3115259"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3115265">)</span>&nbsp;<span class="ident" id="3115267">Write</span><span class="op" id="3115272">(</span><span class="ident" id="3115273">p</span>&nbsp;<span class="op" id="3115275">[</span><span class="op" id="3115276">]</span><span class="builtintype" id="3115277">byte</span><span class="op" id="3115281">)</span>&nbsp;<span class="op" id="3115283">(</span><span class="ident" id="3115284">n</span>&nbsp;<span class="builtintype" id="3115286">int</span><span class="op" id="3115289">,</span>&nbsp;<span class="ident" id="3115291">err</span>&nbsp;<span class="builtintype" id="3115295">error</span><span class="op" id="3115300">)</span>&nbsp;<span class="op" id="3115302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115305"><a href="/hash/crc32/crc32.go.html#3115256">d</a></span><span class="op" id="3115306">.</span><span class="ident" id="3115307">crc</span>&nbsp;<span class="op" id="3115311">=</span>&nbsp;<span class="ident" id="3115313"><a href="/hash/crc32/crc32.go.html#3115103">Update</a></span><span class="op" id="3115319">(</span><span class="ident" id="3115320"><a href="/hash/crc32/crc32.go.html#3115256">d</a></span><span class="op" id="3115321">.</span><span class="ident" id="3115322">crc</span><span class="op" id="3115325">,</span>&nbsp;<span class="ident" id="3115327"><a href="/hash/crc32/crc32.go.html#3115256">d</a></span><span class="op" id="3115328">.</span><span class="ident" id="3115329">tab</span><span class="op" id="3115332">,</span>&nbsp;<span class="ident" id="3115334"><a href="/hash/crc32/crc32.go.html#3115273">p</a></span><span class="op" id="3115335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115338">return</span>&nbsp;<span class="builtinfunc" id="3115345">len</span><span class="op" id="3115348">(</span><span class="ident" id="3115349"><a href="/hash/crc32/crc32.go.html#3115273">p</a></span><span class="op" id="3115350">)</span><span class="op" id="3115351">,</span>&nbsp;<span class="ident" id="3115353">nil</span><br>
<span class="lineno">120</span><span class="op" id="3115357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115360">func</span>&nbsp;<span class="op" id="3115365">(</span><span class="ident" id="3115366">d</span>&nbsp;<span class="op" id="3115368">*</span><span class="ident" id="3115369"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3115375">)</span>&nbsp;<span class="ident" id="3115377">Sum32</span><span class="op" id="3115382">(</span><span class="op" id="3115383">)</span>&nbsp;<span class="builtintype" id="3115385">uint32</span>&nbsp;<span class="op" id="3115392">{</span>&nbsp;<span class="keyword" id="3115394">return</span>&nbsp;<span class="ident" id="3115401"><a href="/hash/crc32/crc32.go.html#3115366">d</a></span><span class="op" id="3115402">.</span><span class="ident" id="3115403">crc</span>&nbsp;<span class="op" id="3115407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3115410">func</span>&nbsp;<span class="op" id="3115415">(</span><span class="ident" id="3115416">d</span>&nbsp;<span class="op" id="3115418">*</span><span class="ident" id="3115419"><a href="/hash/crc32/crc32.go.html#3114385">digest</a></span><span class="op" id="3115425">)</span>&nbsp;<span class="ident" id="3115427">Sum</span><span class="op" id="3115430">(</span><span class="ident" id="3115431">in</span>&nbsp;<span class="op" id="3115434">[</span><span class="op" id="3115435">]</span><span class="builtintype" id="3115436">byte</span><span class="op" id="3115440">)</span>&nbsp;<span class="op" id="3115442">[</span><span class="op" id="3115443">]</span><span class="builtintype" id="3115444">byte</span>&nbsp;<span class="op" id="3115449">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3115452">s</span>&nbsp;<span class="op" id="3115454">:=</span>&nbsp;<span class="ident" id="3115457"><a href="/hash/crc32/crc32.go.html#3115416">d</a></span><span class="op" id="3115458">.</span><span class="ident" id="3115459">Sum32</span><span class="op" id="3115464">(</span><span class="op" id="3115465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3115468">return</span>&nbsp;<span class="builtinfunc" id="3115475">append</span><span class="op" id="3115481">(</span><span class="ident" id="3115482"><a href="/hash/crc32/crc32.go.html#3115431">in</a></span><span class="op" id="3115484">,</span>&nbsp;<span class="builtintype" id="3115486">byte</span><span class="op" id="3115490">(</span><span class="ident" id="3115491"><a href="/hash/crc32/crc32.go.html#3115452">s</a></span><span class="op" id="3115492">&gt;&gt;</span><span class="num" id="3115494">24</span><span class="op" id="3115496">)</span><span class="op" id="3115497">,</span>&nbsp;<span class="builtintype" id="3115499">byte</span><span class="op" id="3115503">(</span><span class="ident" id="3115504"><a href="/hash/crc32/crc32.go.html#3115452">s</a></span><span class="op" id="3115505">&gt;&gt;</span><span class="num" id="3115507">16</span><span class="op" id="3115509">)</span><span class="op" id="3115510">,</span>&nbsp;<span class="builtintype" id="3115512">byte</span><span class="op" id="3115516">(</span><span class="ident" id="3115517"><a href="/hash/crc32/crc32.go.html#3115452">s</a></span><span class="op" id="3115518">&gt;&gt;</span><span class="num" id="3115520">8</span><span class="op" id="3115521">)</span><span class="op" id="3115522">,</span>&nbsp;<span class="builtintype" id="3115524">byte</span><span class="op" id="3115528">(</span><span class="ident" id="3115529"><a href="/hash/crc32/crc32.go.html#3115452">s</a></span><span class="op" id="3115530">)</span><span class="op" id="3115531">)</span><br>
<span class="lineno"></span><span class="op" id="3115533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3115536">//&nbsp;Checksum&nbsp;returns&nbsp;the&nbsp;CRC-32&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno">130</span><span class="comment" id="3115584">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="3115634">func</span>&nbsp;<span class="ident" id="3115639">Checksum</span><span class="op" id="3115647">(</span><span class="ident" id="3115648">data</span>&nbsp;<span class="op" id="3115653">[</span><span class="op" id="3115654">]</span><span class="builtintype" id="3115655">byte</span><span class="op" id="3115659">,</span>&nbsp;<span class="ident" id="3115661">tab</span>&nbsp;<span class="op" id="3115665">*</span><span class="ident" id="3115666"><a href="/hash/crc32/crc32.go.html#3113261">Table</a></span><span class="op" id="3115671">)</span>&nbsp;<span class="builtintype" id="3115673">uint32</span>&nbsp;<span class="op" id="3115680">{</span>&nbsp;<span class="keyword" id="3115682">return</span>&nbsp;<span class="ident" id="3115689"><a href="/hash/crc32/crc32.go.html#3115103">Update</a></span><span class="op" id="3115695">(</span><span class="num" id="3115696">0</span><span class="op" id="3115697">,</span>&nbsp;<span class="ident" id="3115699"><a href="/hash/crc32/crc32.go.html#3115661">tab</a></span><span class="op" id="3115702">,</span>&nbsp;<span class="ident" id="3115704"><a href="/hash/crc32/crc32.go.html#3115648">data</a></span><span class="op" id="3115708">)</span>&nbsp;<span class="op" id="3115710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3115713">//&nbsp;ChecksumIEEE&nbsp;returns&nbsp;the&nbsp;CRC-32&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="3115765">//&nbsp;using&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno">135</span><span class="keyword" id="3115795">func</span>&nbsp;<span class="ident" id="3115800">ChecksumIEEE</span><span class="op" id="3115812">(</span><span class="ident" id="3115813">data</span>&nbsp;<span class="op" id="3115818">[</span><span class="op" id="3115819">]</span><span class="builtintype" id="3115820">byte</span><span class="op" id="3115824">)</span>&nbsp;<span class="builtintype" id="3115826">uint32</span>&nbsp;<span class="op" id="3115833">{</span>&nbsp;<span class="keyword" id="3115835">return</span>&nbsp;<span class="ident" id="3115842"><a href="/hash/crc32/crc32.go.html#3114890">update</a></span><span class="op" id="3115848">(</span><span class="num" id="3115849">0</span><span class="op" id="3115850">,</span>&nbsp;<span class="ident" id="3115852"><a href="/hash/crc32/crc32.go.html#3113713">IEEETable</a></span><span class="op" id="3115861">,</span>&nbsp;<span class="ident" id="3115863"><a href="/hash/crc32/crc32.go.html#3115813">data</a></span><span class="op" id="3115867">)</span>&nbsp;<span class="op" id="3115869">}</span>
</div>
</body>
</html>
