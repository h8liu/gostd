<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/flate</h2>
<ul>
<li><a href="/gostd/compress/flate/copy.go.html">copy.go</a></li>
<li><a href="/gostd/compress/flate/copy_test.go.html">copy_test.go</a></li>
<li><a href="/gostd/compress/flate/deflate.go.html">deflate.go</a></li>
<li><a href="/gostd/compress/flate/deflate_test.go.html">deflate_test.go</a></li>
<li><a href="/gostd/compress/flate/fixedhuff.go.html">fixedhuff.go</a></li>
<li><a href="/gostd/compress/flate/flate_test.go.html">flate_test.go</a></li>
<li><a href="/gostd/compress/flate/huffman_bit_writer.go.html">huffman_bit_writer.go</a></li>
<li><a href="/gostd/compress/flate/huffman_code.go.html">huffman_code.go</a></li>
<li><a href="/gostd/compress/flate/inflate.go.html">inflate.go</a></li>
<li><a href="/gostd/compress/flate/inflate_test.go.html" class="current">inflate_test.go</a></li>
<li><a href="/gostd/compress/flate/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/flate/reverse_bits.go.html">reverse_bits.go</a></li>
<li><a href="/gostd/compress/flate/token.go.html">token.go</a></li>
<li><a href="/gostd/compress/flate/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7165075">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7165130">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7165184">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7165235">package</span>&nbsp;<span class="ident" id="7165243">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7165250">import</span>&nbsp;<span class="op" id="7165257">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7165260">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7165269">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7165275">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7165285">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7165288">func</span>&nbsp;<span class="ident" id="7165293">TestReset</span><span class="op" id="7165302">(</span><span class="ident" id="7165303">t</span>&nbsp;<span class="op" id="7165305">*</span><span class="ident" id="7165306">testing</span><span class="op" id="7165313">.</span><span class="ident" id="7165314">T</span><span class="op" id="7165315">)</span>&nbsp;<span class="op" id="7165317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165320">ss</span>&nbsp;<span class="op" id="7165323">:=</span>&nbsp;<span class="op" id="7165326">[</span><span class="op" id="7165327">]</span><span class="builtintype" id="7165328">string</span><span class="op" id="7165334">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7165338">&#34;lorem&nbsp;ipsum&nbsp;izzle&nbsp;fo&nbsp;rizzle&#34;</span><span class="op" id="7165367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7165371">&#34;the&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&#34;</span><span class="op" id="7165404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7165407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165411">deflated</span>&nbsp;<span class="op" id="7165420">:=</span>&nbsp;<span class="builtinfunc" id="7165423">make</span><span class="op" id="7165427">(</span><span class="op" id="7165428">[</span><span class="op" id="7165429">]</span><span class="ident" id="7165430">bytes</span><span class="op" id="7165435">.</span><span class="ident" id="7165436">Buffer</span><span class="op" id="7165442">,</span>&nbsp;<span class="num" id="7165444">2</span><span class="op" id="7165445">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7165448">for</span>&nbsp;<span class="ident" id="7165452">i</span><span class="op" id="7165453">,</span>&nbsp;<span class="ident" id="7165455">s</span>&nbsp;<span class="op" id="7165457">:=</span>&nbsp;<span class="keyword" id="7165460">range</span>&nbsp;<span class="ident" id="7165466">ss</span>&nbsp;<span class="op" id="7165469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165473">w</span><span class="op" id="7165474">,</span>&nbsp;<span class="ident" id="7165476">_</span>&nbsp;<span class="op" id="7165478">:=</span>&nbsp;<span class="ident" id="7165481">NewWriter</span><span class="op" id="7165490">(</span><span class="op" id="7165491">&amp;</span><span class="ident" id="7165492">deflated</span><span class="op" id="7165500">[</span><span class="ident" id="7165501">i</span><span class="op" id="7165502">]</span><span class="op" id="7165503">,</span>&nbsp;<span class="num" id="7165505">1</span><span class="op" id="7165506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165510">w</span><span class="op" id="7165511">.</span><span class="ident" id="7165512">Write</span><span class="op" id="7165517">(</span><span class="op" id="7165518">[</span><span class="op" id="7165519">]</span><span class="builtintype" id="7165520">byte</span><span class="op" id="7165524">(</span><span class="ident" id="7165525">s</span><span class="op" id="7165526">)</span><span class="op" id="7165527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165531">w</span><span class="op" id="7165532">.</span><span class="ident" id="7165533">Close</span><span class="op" id="7165538">(</span><span class="op" id="7165539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7165542">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165546">inflated</span>&nbsp;<span class="op" id="7165555">:=</span>&nbsp;<span class="builtinfunc" id="7165558">make</span><span class="op" id="7165562">(</span><span class="op" id="7165563">[</span><span class="op" id="7165564">]</span><span class="ident" id="7165565">bytes</span><span class="op" id="7165570">.</span><span class="ident" id="7165571">Buffer</span><span class="op" id="7165577">,</span>&nbsp;<span class="num" id="7165579">2</span><span class="op" id="7165580">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165584">f</span>&nbsp;<span class="op" id="7165586">:=</span>&nbsp;<span class="ident" id="7165589">NewReader</span><span class="op" id="7165598">(</span><span class="op" id="7165599">&amp;</span><span class="ident" id="7165600">deflated</span><span class="op" id="7165608">[</span><span class="num" id="7165609">0</span><span class="op" id="7165610">]</span><span class="op" id="7165611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165614">io</span><span class="op" id="7165616">.</span><span class="ident" id="7165617">Copy</span><span class="op" id="7165621">(</span><span class="op" id="7165622">&amp;</span><span class="ident" id="7165623">inflated</span><span class="op" id="7165631">[</span><span class="num" id="7165632">0</span><span class="op" id="7165633">]</span><span class="op" id="7165634">,</span>&nbsp;<span class="ident" id="7165636">f</span><span class="op" id="7165637">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165640">f</span><span class="op" id="7165641">.</span><span class="op" id="7165642">(</span><span class="ident" id="7165643">Resetter</span><span class="op" id="7165651">)</span><span class="op" id="7165652">.</span><span class="ident" id="7165653">Reset</span><span class="op" id="7165658">(</span><span class="op" id="7165659">&amp;</span><span class="ident" id="7165660">deflated</span><span class="op" id="7165668">[</span><span class="num" id="7165669">1</span><span class="op" id="7165670">]</span><span class="op" id="7165671">,</span>&nbsp;<span class="builtintype" id="7165673">nil</span><span class="op" id="7165676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165679">io</span><span class="op" id="7165681">.</span><span class="ident" id="7165682">Copy</span><span class="op" id="7165686">(</span><span class="op" id="7165687">&amp;</span><span class="ident" id="7165688">inflated</span><span class="op" id="7165696">[</span><span class="num" id="7165697">1</span><span class="op" id="7165698">]</span><span class="op" id="7165699">,</span>&nbsp;<span class="ident" id="7165701">f</span><span class="op" id="7165702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165705">f</span><span class="op" id="7165706">.</span><span class="ident" id="7165707">Close</span><span class="op" id="7165712">(</span><span class="op" id="7165713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7165717">for</span>&nbsp;<span class="ident" id="7165721">i</span><span class="op" id="7165722">,</span>&nbsp;<span class="ident" id="7165724">s</span>&nbsp;<span class="op" id="7165726">:=</span>&nbsp;<span class="keyword" id="7165729">range</span>&nbsp;<span class="ident" id="7165735">ss</span>&nbsp;<span class="op" id="7165738">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7165742">if</span>&nbsp;<span class="ident" id="7165745">s</span>&nbsp;<span class="op" id="7165747">!=</span>&nbsp;<span class="ident" id="7165750">inflated</span><span class="op" id="7165758">[</span><span class="ident" id="7165759">i</span><span class="op" id="7165760">]</span><span class="op" id="7165761">.</span><span class="ident" id="7165762">String</span><span class="op" id="7165768">(</span><span class="op" id="7165769">)</span>&nbsp;<span class="op" id="7165771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7165776">t</span><span class="op" id="7165777">.</span><span class="ident" id="7165778">Errorf</span><span class="op" id="7165784">(</span><span class="string" id="7165785">&#34;inflated[%d]:\ngot&nbsp;&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="7165818">,</span>&nbsp;<span class="ident" id="7165820">i</span><span class="op" id="7165821">,</span>&nbsp;<span class="ident" id="7165823">inflated</span><span class="op" id="7165831">[</span><span class="ident" id="7165832">i</span><span class="op" id="7165833">]</span><span class="op" id="7165834">,</span>&nbsp;<span class="ident" id="7165836">s</span><span class="op" id="7165837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7165841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7165844">}</span><br>
<span class="lineno"></span><span class="op" id="7165846">}</span>
</div>
</body>
</html>
