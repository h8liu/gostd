<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2982043">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2982098">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2982152">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2982203">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2982275">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2982291">package</span>&nbsp;<span class="ident" id="2982299">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2982305">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2982377">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2982450">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2982515">type</span>&nbsp;<span class="ident" id="2982520">Interface</span>&nbsp;<span class="keyword" id="2982530">interface</span>&nbsp;<span class="op" id="2982540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982543">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982596">Len</span><span class="op" id="2982599">(</span><span class="op" id="2982600">)</span>&nbsp;<span class="builtintype" id="2982602">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982607">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982649">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982706">Less</span><span class="op" id="2982710">(</span><span class="ident" id="2982711">i</span><span class="op" id="2982712">,</span>&nbsp;<span class="ident" id="2982714">j</span>&nbsp;<span class="builtintype" id="2982716">int</span><span class="op" id="2982719">)</span>&nbsp;<span class="builtintype" id="2982721">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2982727">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2982777">Swap</span><span class="op" id="2982781">(</span><span class="ident" id="2982782">i</span><span class="op" id="2982783">,</span>&nbsp;<span class="ident" id="2982785">j</span>&nbsp;<span class="builtintype" id="2982787">int</span><span class="op" id="2982790">)</span><br>
<span class="lineno">20</span><span class="op" id="2982792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2982795">func</span>&nbsp;<span class="ident" id="2982800">min</span><span class="op" id="2982803">(</span><span class="ident" id="2982804">a</span><span class="op" id="2982805">,</span>&nbsp;<span class="ident" id="2982807">b</span>&nbsp;<span class="builtintype" id="2982809">int</span><span class="op" id="2982812">)</span>&nbsp;<span class="builtintype" id="2982814">int</span>&nbsp;<span class="op" id="2982818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982821">if</span>&nbsp;<span class="ident" id="2982824">a</span>&nbsp;<span class="op" id="2982826">&lt;</span>&nbsp;<span class="ident" id="2982828">b</span>&nbsp;<span class="op" id="2982830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982834">return</span>&nbsp;<span class="ident" id="2982841">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2982844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982847">return</span>&nbsp;<span class="ident" id="2982854">b</span><br>
<span class="lineno"></span><span class="op" id="2982856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2982859">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2982877">func</span>&nbsp;<span class="ident" id="2982882">insertionSort</span><span class="op" id="2982895">(</span><span class="ident" id="2982896">data</span>&nbsp;<span class="ident" id="2982901">Interface</span><span class="op" id="2982910">,</span>&nbsp;<span class="ident" id="2982912">a</span><span class="op" id="2982913">,</span>&nbsp;<span class="ident" id="2982915">b</span>&nbsp;<span class="builtintype" id="2982917">int</span><span class="op" id="2982920">)</span>&nbsp;<span class="op" id="2982922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982925">for</span>&nbsp;<span class="ident" id="2982929">i</span>&nbsp;<span class="op" id="2982931">:=</span>&nbsp;<span class="ident" id="2982934">a</span>&nbsp;<span class="op" id="2982936">+</span>&nbsp;<span class="num" id="2982938">1</span><span class="op" id="2982939">;</span>&nbsp;<span class="ident" id="2982941">i</span>&nbsp;<span class="op" id="2982943">&lt;</span>&nbsp;<span class="ident" id="2982945">b</span><span class="op" id="2982946">;</span>&nbsp;<span class="ident" id="2982948">i</span><span class="op" id="2982949">++</span>&nbsp;<span class="op" id="2982952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2982956">for</span>&nbsp;<span class="ident" id="2982960">j</span>&nbsp;<span class="op" id="2982962">:=</span>&nbsp;<span class="ident" id="2982965">i</span><span class="op" id="2982966">;</span>&nbsp;<span class="ident" id="2982968">j</span>&nbsp;<span class="op" id="2982970">&gt;</span>&nbsp;<span class="ident" id="2982972">a</span>&nbsp;<span class="op" id="2982974">&amp;&amp;</span>&nbsp;<span class="ident" id="2982977">data</span><span class="op" id="2982981">.</span><span class="ident" id="2982982">Less</span><span class="op" id="2982986">(</span><span class="ident" id="2982987">j</span><span class="op" id="2982988">,</span>&nbsp;<span class="ident" id="2982990">j</span><span class="op" id="2982991">-</span><span class="num" id="2982992">1</span><span class="op" id="2982993">)</span><span class="op" id="2982994">;</span>&nbsp;<span class="ident" id="2982996">j</span><span class="op" id="2982997">--</span>&nbsp;<span class="op" id="2983000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983005">data</span><span class="op" id="2983009">.</span><span class="ident" id="2983010">Swap</span><span class="op" id="2983014">(</span><span class="ident" id="2983015">j</span><span class="op" id="2983016">,</span>&nbsp;<span class="ident" id="2983018">j</span><span class="op" id="2983019">-</span><span class="num" id="2983020">1</span><span class="op" id="2983021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983025">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983028">}</span><br>
<span class="lineno"></span><span class="op" id="2983030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2983033">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2983091">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2983161">func</span>&nbsp;<span class="ident" id="2983166">siftDown</span><span class="op" id="2983174">(</span><span class="ident" id="2983175">data</span>&nbsp;<span class="ident" id="2983180">Interface</span><span class="op" id="2983189">,</span>&nbsp;<span class="ident" id="2983191">lo</span><span class="op" id="2983193">,</span>&nbsp;<span class="ident" id="2983195">hi</span><span class="op" id="2983197">,</span>&nbsp;<span class="ident" id="2983199">first</span>&nbsp;<span class="builtintype" id="2983205">int</span><span class="op" id="2983208">)</span>&nbsp;<span class="op" id="2983210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983213">root</span>&nbsp;<span class="op" id="2983218">:=</span>&nbsp;<span class="ident" id="2983221">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983225">for</span>&nbsp;<span class="op" id="2983229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983233">child</span>&nbsp;<span class="op" id="2983239">:=</span>&nbsp;<span class="num" id="2983242">2</span><span class="op" id="2983243">*</span><span class="ident" id="2983244">root</span>&nbsp;<span class="op" id="2983249">+</span>&nbsp;<span class="num" id="2983251">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983255">if</span>&nbsp;<span class="ident" id="2983258">child</span>&nbsp;<span class="op" id="2983264">&gt;=</span>&nbsp;<span class="ident" id="2983267">hi</span>&nbsp;<span class="op" id="2983270">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983275">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983287">if</span>&nbsp;<span class="ident" id="2983290">child</span><span class="op" id="2983295">+</span><span class="num" id="2983296">1</span>&nbsp;<span class="op" id="2983298">&lt;</span>&nbsp;<span class="ident" id="2983300">hi</span>&nbsp;<span class="op" id="2983303">&amp;&amp;</span>&nbsp;<span class="ident" id="2983306">data</span><span class="op" id="2983310">.</span><span class="ident" id="2983311">Less</span><span class="op" id="2983315">(</span><span class="ident" id="2983316">first</span><span class="op" id="2983321">+</span><span class="ident" id="2983322">child</span><span class="op" id="2983327">,</span>&nbsp;<span class="ident" id="2983329">first</span><span class="op" id="2983334">+</span><span class="ident" id="2983335">child</span><span class="op" id="2983340">+</span><span class="num" id="2983341">1</span><span class="op" id="2983342">)</span>&nbsp;<span class="op" id="2983344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983349">child</span><span class="op" id="2983354">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983359">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983363">if</span>&nbsp;<span class="op" id="2983366">!</span><span class="ident" id="2983367">data</span><span class="op" id="2983371">.</span><span class="ident" id="2983372">Less</span><span class="op" id="2983376">(</span><span class="ident" id="2983377">first</span><span class="op" id="2983382">+</span><span class="ident" id="2983383">root</span><span class="op" id="2983387">,</span>&nbsp;<span class="ident" id="2983389">first</span><span class="op" id="2983394">+</span><span class="ident" id="2983395">child</span><span class="op" id="2983400">)</span>&nbsp;<span class="op" id="2983402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983407">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983420">data</span><span class="op" id="2983424">.</span><span class="ident" id="2983425">Swap</span><span class="op" id="2983429">(</span><span class="ident" id="2983430">first</span><span class="op" id="2983435">+</span><span class="ident" id="2983436">root</span><span class="op" id="2983440">,</span>&nbsp;<span class="ident" id="2983442">first</span><span class="op" id="2983447">+</span><span class="ident" id="2983448">child</span><span class="op" id="2983453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983457">root</span>&nbsp;<span class="op" id="2983462">=</span>&nbsp;<span class="ident" id="2983464">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983471">}</span><br>
<span class="lineno"></span><span class="op" id="2983473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2983476">func</span>&nbsp;<span class="ident" id="2983481">heapSort</span><span class="op" id="2983489">(</span><span class="ident" id="2983490">data</span>&nbsp;<span class="ident" id="2983495">Interface</span><span class="op" id="2983504">,</span>&nbsp;<span class="ident" id="2983506">a</span><span class="op" id="2983507">,</span>&nbsp;<span class="ident" id="2983509">b</span>&nbsp;<span class="builtintype" id="2983511">int</span><span class="op" id="2983514">)</span>&nbsp;<span class="op" id="2983516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983519">first</span>&nbsp;<span class="op" id="2983525">:=</span>&nbsp;<span class="ident" id="2983528">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983531">lo</span>&nbsp;<span class="op" id="2983534">:=</span>&nbsp;<span class="num" id="2983537">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983540">hi</span>&nbsp;<span class="op" id="2983543">:=</span>&nbsp;<span class="ident" id="2983546">b</span>&nbsp;<span class="op" id="2983548">-</span>&nbsp;<span class="ident" id="2983550">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983554">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983599">for</span>&nbsp;<span class="ident" id="2983603">i</span>&nbsp;<span class="op" id="2983605">:=</span>&nbsp;<span class="op" id="2983608">(</span><span class="ident" id="2983609">hi</span>&nbsp;<span class="op" id="2983612">-</span>&nbsp;<span class="num" id="2983614">1</span><span class="op" id="2983615">)</span>&nbsp;<span class="op" id="2983617">/</span>&nbsp;<span class="num" id="2983619">2</span><span class="op" id="2983620">;</span>&nbsp;<span class="ident" id="2983622">i</span>&nbsp;<span class="op" id="2983624">&gt;=</span>&nbsp;<span class="num" id="2983627">0</span><span class="op" id="2983628">;</span>&nbsp;<span class="ident" id="2983630">i</span><span class="op" id="2983631">--</span>&nbsp;<span class="op" id="2983634">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983638">siftDown</span><span class="op" id="2983646">(</span><span class="ident" id="2983647">data</span><span class="op" id="2983651">,</span>&nbsp;<span class="ident" id="2983653">i</span><span class="op" id="2983654">,</span>&nbsp;<span class="ident" id="2983656">hi</span><span class="op" id="2983658">,</span>&nbsp;<span class="ident" id="2983660">first</span><span class="op" id="2983665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2983672">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2983723">for</span>&nbsp;<span class="ident" id="2983727">i</span>&nbsp;<span class="op" id="2983729">:=</span>&nbsp;<span class="ident" id="2983732">hi</span>&nbsp;<span class="op" id="2983735">-</span>&nbsp;<span class="num" id="2983737">1</span><span class="op" id="2983738">;</span>&nbsp;<span class="ident" id="2983740">i</span>&nbsp;<span class="op" id="2983742">&gt;=</span>&nbsp;<span class="num" id="2983745">0</span><span class="op" id="2983746">;</span>&nbsp;<span class="ident" id="2983748">i</span><span class="op" id="2983749">--</span>&nbsp;<span class="op" id="2983752">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983756">data</span><span class="op" id="2983760">.</span><span class="ident" id="2983761">Swap</span><span class="op" id="2983765">(</span><span class="ident" id="2983766">first</span><span class="op" id="2983771">,</span>&nbsp;<span class="ident" id="2983773">first</span><span class="op" id="2983778">+</span><span class="ident" id="2983779">i</span><span class="op" id="2983780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2983784">siftDown</span><span class="op" id="2983792">(</span><span class="ident" id="2983793">data</span><span class="op" id="2983797">,</span>&nbsp;<span class="ident" id="2983799">lo</span><span class="op" id="2983801">,</span>&nbsp;<span class="ident" id="2983803">i</span><span class="op" id="2983804">,</span>&nbsp;<span class="ident" id="2983806">first</span><span class="op" id="2983811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2983814">}</span><br>
<span class="lineno"></span><span class="op" id="2983816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2983819">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2983864">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2983921">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2984015">func</span>&nbsp;<span class="ident" id="2984020">medianOfThree</span><span class="op" id="2984033">(</span><span class="ident" id="2984034">data</span>&nbsp;<span class="ident" id="2984039">Interface</span><span class="op" id="2984048">,</span>&nbsp;<span class="ident" id="2984050">a</span><span class="op" id="2984051">,</span>&nbsp;<span class="ident" id="2984053">b</span><span class="op" id="2984054">,</span>&nbsp;<span class="ident" id="2984056">c</span>&nbsp;<span class="builtintype" id="2984058">int</span><span class="op" id="2984061">)</span>&nbsp;<span class="op" id="2984063">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984066">m0</span>&nbsp;<span class="op" id="2984069">:=</span>&nbsp;<span class="ident" id="2984072">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984075">m1</span>&nbsp;<span class="op" id="2984078">:=</span>&nbsp;<span class="ident" id="2984081">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984084">m2</span>&nbsp;<span class="op" id="2984087">:=</span>&nbsp;<span class="ident" id="2984090">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984093">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984123">if</span>&nbsp;<span class="ident" id="2984126">data</span><span class="op" id="2984130">.</span><span class="ident" id="2984131">Less</span><span class="op" id="2984135">(</span><span class="ident" id="2984136">m1</span><span class="op" id="2984138">,</span>&nbsp;<span class="ident" id="2984140">m0</span><span class="op" id="2984142">)</span>&nbsp;<span class="op" id="2984144">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984148">data</span><span class="op" id="2984152">.</span><span class="ident" id="2984153">Swap</span><span class="op" id="2984157">(</span><span class="ident" id="2984158">m1</span><span class="op" id="2984160">,</span>&nbsp;<span class="ident" id="2984162">m0</span><span class="op" id="2984164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984170">if</span>&nbsp;<span class="ident" id="2984173">data</span><span class="op" id="2984177">.</span><span class="ident" id="2984178">Less</span><span class="op" id="2984182">(</span><span class="ident" id="2984183">m2</span><span class="op" id="2984185">,</span>&nbsp;<span class="ident" id="2984187">m1</span><span class="op" id="2984189">)</span>&nbsp;<span class="op" id="2984191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984195">data</span><span class="op" id="2984199">.</span><span class="ident" id="2984200">Swap</span><span class="op" id="2984204">(</span><span class="ident" id="2984205">m2</span><span class="op" id="2984207">,</span>&nbsp;<span class="ident" id="2984209">m1</span><span class="op" id="2984211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984214">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984217">if</span>&nbsp;<span class="ident" id="2984220">data</span><span class="op" id="2984224">.</span><span class="ident" id="2984225">Less</span><span class="op" id="2984229">(</span><span class="ident" id="2984230">m1</span><span class="op" id="2984232">,</span>&nbsp;<span class="ident" id="2984234">m0</span><span class="op" id="2984236">)</span>&nbsp;<span class="op" id="2984238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984242">data</span><span class="op" id="2984246">.</span><span class="ident" id="2984247">Swap</span><span class="op" id="2984251">(</span><span class="ident" id="2984252">m1</span><span class="op" id="2984254">,</span>&nbsp;<span class="ident" id="2984256">m0</span><span class="op" id="2984258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984264">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2984304">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2984307">func</span>&nbsp;<span class="ident" id="2984312">swapRange</span><span class="op" id="2984321">(</span><span class="ident" id="2984322">data</span>&nbsp;<span class="ident" id="2984327">Interface</span><span class="op" id="2984336">,</span>&nbsp;<span class="ident" id="2984338">a</span><span class="op" id="2984339">,</span>&nbsp;<span class="ident" id="2984341">b</span><span class="op" id="2984342">,</span>&nbsp;<span class="ident" id="2984344">n</span>&nbsp;<span class="builtintype" id="2984346">int</span><span class="op" id="2984349">)</span>&nbsp;<span class="op" id="2984351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984354">for</span>&nbsp;<span class="ident" id="2984358">i</span>&nbsp;<span class="op" id="2984360">:=</span>&nbsp;<span class="num" id="2984363">0</span><span class="op" id="2984364">;</span>&nbsp;<span class="ident" id="2984366">i</span>&nbsp;<span class="op" id="2984368">&lt;</span>&nbsp;<span class="ident" id="2984370">n</span><span class="op" id="2984371">;</span>&nbsp;<span class="ident" id="2984373">i</span><span class="op" id="2984374">++</span>&nbsp;<span class="op" id="2984377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984381">data</span><span class="op" id="2984385">.</span><span class="ident" id="2984386">Swap</span><span class="op" id="2984390">(</span><span class="ident" id="2984391">a</span><span class="op" id="2984392">+</span><span class="ident" id="2984393">i</span><span class="op" id="2984394">,</span>&nbsp;<span class="ident" id="2984396">b</span><span class="op" id="2984397">+</span><span class="ident" id="2984398">i</span><span class="op" id="2984399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984402">}</span><br>
<span class="lineno">100</span><span class="op" id="2984404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2984407">func</span>&nbsp;<span class="ident" id="2984412">doPivot</span><span class="op" id="2984419">(</span><span class="ident" id="2984420">data</span>&nbsp;<span class="ident" id="2984425">Interface</span><span class="op" id="2984434">,</span>&nbsp;<span class="ident" id="2984436">lo</span><span class="op" id="2984438">,</span>&nbsp;<span class="ident" id="2984440">hi</span>&nbsp;<span class="builtintype" id="2984443">int</span><span class="op" id="2984446">)</span>&nbsp;<span class="op" id="2984448">(</span><span class="ident" id="2984449">midlo</span><span class="op" id="2984454">,</span>&nbsp;<span class="ident" id="2984456">midhi</span>&nbsp;<span class="builtintype" id="2984462">int</span><span class="op" id="2984465">)</span>&nbsp;<span class="op" id="2984467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984470">m</span>&nbsp;<span class="op" id="2984472">:=</span>&nbsp;<span class="ident" id="2984475">lo</span>&nbsp;<span class="op" id="2984478">+</span>&nbsp;<span class="op" id="2984480">(</span><span class="ident" id="2984481">hi</span><span class="op" id="2984483">-</span><span class="ident" id="2984484">lo</span><span class="op" id="2984486">)</span><span class="op" id="2984487">/</span><span class="num" id="2984488">2</span>&nbsp;<span class="comment" id="2984490">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2984539">if</span>&nbsp;<span class="ident" id="2984542">hi</span><span class="op" id="2984544">-</span><span class="ident" id="2984545">lo</span>&nbsp;<span class="op" id="2984548">&gt;</span>&nbsp;<span class="num" id="2984550">40</span>&nbsp;<span class="op" id="2984553">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984557">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984617">s</span>&nbsp;<span class="op" id="2984619">:=</span>&nbsp;<span class="op" id="2984622">(</span><span class="ident" id="2984623">hi</span>&nbsp;<span class="op" id="2984626">-</span>&nbsp;<span class="ident" id="2984628">lo</span><span class="op" id="2984630">)</span>&nbsp;<span class="op" id="2984632">/</span>&nbsp;<span class="num" id="2984634">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984638">medianOfThree</span><span class="op" id="2984651">(</span><span class="ident" id="2984652">data</span><span class="op" id="2984656">,</span>&nbsp;<span class="ident" id="2984658">lo</span><span class="op" id="2984660">,</span>&nbsp;<span class="ident" id="2984662">lo</span><span class="op" id="2984664">+</span><span class="ident" id="2984665">s</span><span class="op" id="2984666">,</span>&nbsp;<span class="ident" id="2984668">lo</span><span class="op" id="2984670">+</span><span class="num" id="2984671">2</span><span class="op" id="2984672">*</span><span class="ident" id="2984673">s</span><span class="op" id="2984674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984678">medianOfThree</span><span class="op" id="2984691">(</span><span class="ident" id="2984692">data</span><span class="op" id="2984696">,</span>&nbsp;<span class="ident" id="2984698">m</span><span class="op" id="2984699">,</span>&nbsp;<span class="ident" id="2984701">m</span><span class="op" id="2984702">-</span><span class="ident" id="2984703">s</span><span class="op" id="2984704">,</span>&nbsp;<span class="ident" id="2984706">m</span><span class="op" id="2984707">+</span><span class="ident" id="2984708">s</span><span class="op" id="2984709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984713">medianOfThree</span><span class="op" id="2984726">(</span><span class="ident" id="2984727">data</span><span class="op" id="2984731">,</span>&nbsp;<span class="ident" id="2984733">hi</span><span class="op" id="2984735">-</span><span class="num" id="2984736">1</span><span class="op" id="2984737">,</span>&nbsp;<span class="ident" id="2984739">hi</span><span class="op" id="2984741">-</span><span class="num" id="2984742">1</span><span class="op" id="2984743">-</span><span class="ident" id="2984744">s</span><span class="op" id="2984745">,</span>&nbsp;<span class="ident" id="2984747">hi</span><span class="op" id="2984749">-</span><span class="num" id="2984750">1</span><span class="op" id="2984751">-</span><span class="num" id="2984752">2</span><span class="op" id="2984753">*</span><span class="ident" id="2984754">s</span><span class="op" id="2984755">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2984758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2984761">medianOfThree</span><span class="op" id="2984774">(</span><span class="ident" id="2984775">data</span><span class="op" id="2984779">,</span>&nbsp;<span class="ident" id="2984781">lo</span><span class="op" id="2984783">,</span>&nbsp;<span class="ident" id="2984785">m</span><span class="op" id="2984786">,</span>&nbsp;<span class="ident" id="2984788">hi</span><span class="op" id="2984790">-</span><span class="num" id="2984791">1</span><span class="op" id="2984792">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984796">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984816">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984861">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984891">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984920">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984955">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2984984">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985014">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985018">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985070">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985104">pivot</span>&nbsp;<span class="op" id="2985110">:=</span>&nbsp;<span class="ident" id="2985113">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985117">a</span><span class="op" id="2985118">,</span>&nbsp;<span class="ident" id="2985120">b</span><span class="op" id="2985121">,</span>&nbsp;<span class="ident" id="2985123">c</span><span class="op" id="2985124">,</span>&nbsp;<span class="ident" id="2985126">d</span>&nbsp;<span class="op" id="2985128">:=</span>&nbsp;<span class="ident" id="2985131">lo</span><span class="op" id="2985133">+</span><span class="num" id="2985134">1</span><span class="op" id="2985135">,</span>&nbsp;<span class="ident" id="2985137">lo</span><span class="op" id="2985139">+</span><span class="num" id="2985140">1</span><span class="op" id="2985141">,</span>&nbsp;<span class="ident" id="2985143">hi</span><span class="op" id="2985145">,</span>&nbsp;<span class="ident" id="2985147">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985151">for</span>&nbsp;<span class="op" id="2985155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985159">for</span>&nbsp;<span class="ident" id="2985163">b</span>&nbsp;<span class="op" id="2985165">&lt;</span>&nbsp;<span class="ident" id="2985167">c</span>&nbsp;<span class="op" id="2985169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985174">if</span>&nbsp;<span class="ident" id="2985177">data</span><span class="op" id="2985181">.</span><span class="ident" id="2985182">Less</span><span class="op" id="2985186">(</span><span class="ident" id="2985187">b</span><span class="op" id="2985188">,</span>&nbsp;<span class="ident" id="2985190">pivot</span><span class="op" id="2985195">)</span>&nbsp;<span class="op" id="2985197">{</span>&nbsp;<span class="comment" id="2985199">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985222">b</span><span class="op" id="2985223">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985229">}</span>&nbsp;<span class="keyword" id="2985231">else</span>&nbsp;<span class="keyword" id="2985236">if</span>&nbsp;<span class="op" id="2985239">!</span><span class="ident" id="2985240">data</span><span class="op" id="2985244">.</span><span class="ident" id="2985245">Less</span><span class="op" id="2985249">(</span><span class="ident" id="2985250">pivot</span><span class="op" id="2985255">,</span>&nbsp;<span class="ident" id="2985257">b</span><span class="op" id="2985258">)</span>&nbsp;<span class="op" id="2985260">{</span>&nbsp;<span class="comment" id="2985262">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985285">data</span><span class="op" id="2985289">.</span><span class="ident" id="2985290">Swap</span><span class="op" id="2985294">(</span><span class="ident" id="2985295">a</span><span class="op" id="2985296">,</span>&nbsp;<span class="ident" id="2985298">b</span><span class="op" id="2985299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985305">a</span><span class="op" id="2985306">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985313">b</span><span class="op" id="2985314">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985320">}</span>&nbsp;<span class="keyword" id="2985322">else</span>&nbsp;<span class="op" id="2985327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985333">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985350">for</span>&nbsp;<span class="ident" id="2985354">b</span>&nbsp;<span class="op" id="2985356">&lt;</span>&nbsp;<span class="ident" id="2985358">c</span>&nbsp;<span class="op" id="2985360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985365">if</span>&nbsp;<span class="ident" id="2985368">data</span><span class="op" id="2985372">.</span><span class="ident" id="2985373">Less</span><span class="op" id="2985377">(</span><span class="ident" id="2985378">pivot</span><span class="op" id="2985383">,</span>&nbsp;<span class="ident" id="2985385">c</span><span class="op" id="2985386">-</span><span class="num" id="2985387">1</span><span class="op" id="2985388">)</span>&nbsp;<span class="op" id="2985390">{</span>&nbsp;<span class="comment" id="2985392">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985417">c</span><span class="op" id="2985418">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985424">}</span>&nbsp;<span class="keyword" id="2985426">else</span>&nbsp;<span class="keyword" id="2985431">if</span>&nbsp;<span class="op" id="2985434">!</span><span class="ident" id="2985435">data</span><span class="op" id="2985439">.</span><span class="ident" id="2985440">Less</span><span class="op" id="2985444">(</span><span class="ident" id="2985445">c</span><span class="op" id="2985446">-</span><span class="num" id="2985447">1</span><span class="op" id="2985448">,</span>&nbsp;<span class="ident" id="2985450">pivot</span><span class="op" id="2985455">)</span>&nbsp;<span class="op" id="2985457">{</span>&nbsp;<span class="comment" id="2985459">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985484">data</span><span class="op" id="2985488">.</span><span class="ident" id="2985489">Swap</span><span class="op" id="2985493">(</span><span class="ident" id="2985494">c</span><span class="op" id="2985495">-</span><span class="num" id="2985496">1</span><span class="op" id="2985497">,</span>&nbsp;<span class="ident" id="2985499">d</span><span class="op" id="2985500">-</span><span class="num" id="2985501">1</span><span class="op" id="2985502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985508">c</span><span class="op" id="2985509">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985516">d</span><span class="op" id="2985517">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985523">}</span>&nbsp;<span class="keyword" id="2985525">else</span>&nbsp;<span class="op" id="2985530">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985536">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985553">if</span>&nbsp;<span class="ident" id="2985556">b</span>&nbsp;<span class="op" id="2985558">&gt;=</span>&nbsp;<span class="ident" id="2985561">c</span>&nbsp;<span class="op" id="2985563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985568">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985580">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985620">data</span><span class="op" id="2985624">.</span><span class="ident" id="2985625">Swap</span><span class="op" id="2985629">(</span><span class="ident" id="2985630">b</span><span class="op" id="2985631">,</span>&nbsp;<span class="ident" id="2985633">c</span><span class="op" id="2985634">-</span><span class="num" id="2985635">1</span><span class="op" id="2985636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985640">b</span><span class="op" id="2985641">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985646">c</span><span class="op" id="2985647">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985655">n</span>&nbsp;<span class="op" id="2985657">:=</span>&nbsp;<span class="ident" id="2985660">min</span><span class="op" id="2985663">(</span><span class="ident" id="2985664">b</span><span class="op" id="2985665">-</span><span class="ident" id="2985666">a</span><span class="op" id="2985667">,</span>&nbsp;<span class="ident" id="2985669">a</span><span class="op" id="2985670">-</span><span class="ident" id="2985671">lo</span><span class="op" id="2985673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985676">swapRange</span><span class="op" id="2985685">(</span><span class="ident" id="2985686">data</span><span class="op" id="2985690">,</span>&nbsp;<span class="ident" id="2985692">lo</span><span class="op" id="2985694">,</span>&nbsp;<span class="ident" id="2985696">b</span><span class="op" id="2985697">-</span><span class="ident" id="2985698">n</span><span class="op" id="2985699">,</span>&nbsp;<span class="ident" id="2985701">n</span><span class="op" id="2985702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985706">n</span>&nbsp;<span class="op" id="2985708">=</span>&nbsp;<span class="ident" id="2985710">min</span><span class="op" id="2985713">(</span><span class="ident" id="2985714">hi</span><span class="op" id="2985716">-</span><span class="ident" id="2985717">d</span><span class="op" id="2985718">,</span>&nbsp;<span class="ident" id="2985720">d</span><span class="op" id="2985721">-</span><span class="ident" id="2985722">c</span><span class="op" id="2985723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985726">swapRange</span><span class="op" id="2985735">(</span><span class="ident" id="2985736">data</span><span class="op" id="2985740">,</span>&nbsp;<span class="ident" id="2985742">c</span><span class="op" id="2985743">,</span>&nbsp;<span class="ident" id="2985745">hi</span><span class="op" id="2985747">-</span><span class="ident" id="2985748">n</span><span class="op" id="2985749">,</span>&nbsp;<span class="ident" id="2985751">n</span><span class="op" id="2985752">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985756">return</span>&nbsp;<span class="ident" id="2985763">lo</span>&nbsp;<span class="op" id="2985766">+</span>&nbsp;<span class="ident" id="2985768">b</span>&nbsp;<span class="op" id="2985770">-</span>&nbsp;<span class="ident" id="2985772">a</span><span class="op" id="2985773">,</span>&nbsp;<span class="ident" id="2985775">hi</span>&nbsp;<span class="op" id="2985778">-</span>&nbsp;<span class="op" id="2985780">(</span><span class="ident" id="2985781">d</span>&nbsp;<span class="op" id="2985783">-</span>&nbsp;<span class="ident" id="2985785">c</span><span class="op" id="2985786">)</span><br>
<span class="lineno"></span><span class="op" id="2985788">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2985791">func</span>&nbsp;<span class="ident" id="2985796">quickSort</span><span class="op" id="2985805">(</span><span class="ident" id="2985806">data</span>&nbsp;<span class="ident" id="2985811">Interface</span><span class="op" id="2985820">,</span>&nbsp;<span class="ident" id="2985822">a</span><span class="op" id="2985823">,</span>&nbsp;<span class="ident" id="2985825">b</span><span class="op" id="2985826">,</span>&nbsp;<span class="ident" id="2985828">maxDepth</span>&nbsp;<span class="builtintype" id="2985837">int</span><span class="op" id="2985840">)</span>&nbsp;<span class="op" id="2985842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985845">for</span>&nbsp;<span class="ident" id="2985849">b</span><span class="op" id="2985850">-</span><span class="ident" id="2985851">a</span>&nbsp;<span class="op" id="2985853">&gt;</span>&nbsp;<span class="num" id="2985855">7</span>&nbsp;<span class="op" id="2985857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985861">if</span>&nbsp;<span class="ident" id="2985864">maxDepth</span>&nbsp;<span class="op" id="2985873">==</span>&nbsp;<span class="num" id="2985876">0</span>&nbsp;<span class="op" id="2985878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985883">heapSort</span><span class="op" id="2985891">(</span><span class="ident" id="2985892">data</span><span class="op" id="2985896">,</span>&nbsp;<span class="ident" id="2985898">a</span><span class="op" id="2985899">,</span>&nbsp;<span class="ident" id="2985901">b</span><span class="op" id="2985902">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2985907">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2985916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985920">maxDepth</span><span class="op" id="2985928">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2985933">mlo</span><span class="op" id="2985936">,</span>&nbsp;<span class="ident" id="2985938">mhi</span>&nbsp;<span class="op" id="2985942">:=</span>&nbsp;<span class="ident" id="2985945">doPivot</span><span class="op" id="2985952">(</span><span class="ident" id="2985953">data</span><span class="op" id="2985957">,</span>&nbsp;<span class="ident" id="2985959">a</span><span class="op" id="2985960">,</span>&nbsp;<span class="ident" id="2985962">b</span><span class="op" id="2985963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2985967">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2986027">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986066">if</span>&nbsp;<span class="ident" id="2986069">mlo</span><span class="op" id="2986072">-</span><span class="ident" id="2986073">a</span>&nbsp;<span class="op" id="2986075">&lt;</span>&nbsp;<span class="ident" id="2986077">b</span><span class="op" id="2986078">-</span><span class="ident" id="2986079">mhi</span>&nbsp;<span class="op" id="2986083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986088">quickSort</span><span class="op" id="2986097">(</span><span class="ident" id="2986098">data</span><span class="op" id="2986102">,</span>&nbsp;<span class="ident" id="2986104">a</span><span class="op" id="2986105">,</span>&nbsp;<span class="ident" id="2986107">mlo</span><span class="op" id="2986110">,</span>&nbsp;<span class="ident" id="2986112">maxDepth</span><span class="op" id="2986120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986125">a</span>&nbsp;<span class="op" id="2986127">=</span>&nbsp;<span class="ident" id="2986129">mhi</span>&nbsp;<span class="comment" id="2986133">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986168">}</span>&nbsp;<span class="keyword" id="2986170">else</span>&nbsp;<span class="op" id="2986175">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986180">quickSort</span><span class="op" id="2986189">(</span><span class="ident" id="2986190">data</span><span class="op" id="2986194">,</span>&nbsp;<span class="ident" id="2986196">mhi</span><span class="op" id="2986199">,</span>&nbsp;<span class="ident" id="2986201">b</span><span class="op" id="2986202">,</span>&nbsp;<span class="ident" id="2986204">maxDepth</span><span class="op" id="2986212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986217">b</span>&nbsp;<span class="op" id="2986219">=</span>&nbsp;<span class="ident" id="2986221">mlo</span>&nbsp;<span class="comment" id="2986225">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986266">if</span>&nbsp;<span class="ident" id="2986269">b</span><span class="op" id="2986270">-</span><span class="ident" id="2986271">a</span>&nbsp;<span class="op" id="2986273">&gt;</span>&nbsp;<span class="num" id="2986275">1</span>&nbsp;<span class="op" id="2986277">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986281">insertionSort</span><span class="op" id="2986294">(</span><span class="ident" id="2986295">data</span><span class="op" id="2986299">,</span>&nbsp;<span class="ident" id="2986301">a</span><span class="op" id="2986302">,</span>&nbsp;<span class="ident" id="2986304">b</span><span class="op" id="2986305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986308">}</span><br>
<span class="lineno"></span><span class="op" id="2986310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2986313">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2986333">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2986407">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2986476">func</span>&nbsp;<span class="ident" id="2986481">Sort</span><span class="op" id="2986485">(</span><span class="ident" id="2986486">data</span>&nbsp;<span class="ident" id="2986491">Interface</span><span class="op" id="2986500">)</span>&nbsp;<span class="op" id="2986502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2986505">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986568">n</span>&nbsp;<span class="op" id="2986570">:=</span>&nbsp;<span class="ident" id="2986573">data</span><span class="op" id="2986577">.</span><span class="ident" id="2986578">Len</span><span class="op" id="2986581">(</span><span class="op" id="2986582">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986585">maxDepth</span>&nbsp;<span class="op" id="2986594">:=</span>&nbsp;<span class="num" id="2986597">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986600">for</span>&nbsp;<span class="ident" id="2986604">i</span>&nbsp;<span class="op" id="2986606">:=</span>&nbsp;<span class="ident" id="2986609">n</span><span class="op" id="2986610">;</span>&nbsp;<span class="ident" id="2986612">i</span>&nbsp;<span class="op" id="2986614">&gt;</span>&nbsp;<span class="num" id="2986616">0</span><span class="op" id="2986617">;</span>&nbsp;<span class="ident" id="2986619">i</span>&nbsp;<span class="op" id="2986621">&gt;&gt;=</span>&nbsp;<span class="num" id="2986625">1</span>&nbsp;<span class="op" id="2986627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986631">maxDepth</span><span class="op" id="2986639">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2986643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986646">maxDepth</span>&nbsp;<span class="op" id="2986655">*=</span>&nbsp;<span class="num" id="2986658">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986661">quickSort</span><span class="op" id="2986670">(</span><span class="ident" id="2986671">data</span><span class="op" id="2986675">,</span>&nbsp;<span class="num" id="2986677">0</span><span class="op" id="2986678">,</span>&nbsp;<span class="ident" id="2986680">n</span><span class="op" id="2986681">,</span>&nbsp;<span class="ident" id="2986683">maxDepth</span><span class="op" id="2986691">)</span><br>
<span class="lineno"></span><span class="op" id="2986693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2986696">type</span>&nbsp;<span class="ident" id="2986701">reverse</span>&nbsp;<span class="keyword" id="2986709">struct</span>&nbsp;<span class="op" id="2986716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2986719">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2986785">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2986823">Interface</span><br>
<span class="lineno"></span><span class="op" id="2986833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2986836">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2986911">func</span>&nbsp;<span class="op" id="2986916">(</span><span class="ident" id="2986917">r</span>&nbsp;<span class="ident" id="2986919">reverse</span><span class="op" id="2986926">)</span>&nbsp;<span class="ident" id="2986928">Less</span><span class="op" id="2986932">(</span><span class="ident" id="2986933">i</span><span class="op" id="2986934">,</span>&nbsp;<span class="ident" id="2986936">j</span>&nbsp;<span class="builtintype" id="2986938">int</span><span class="op" id="2986941">)</span>&nbsp;<span class="builtintype" id="2986943">bool</span>&nbsp;<span class="op" id="2986948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2986951">return</span>&nbsp;<span class="ident" id="2986958">r</span><span class="op" id="2986959">.</span><span class="ident" id="2986960">Interface</span><span class="op" id="2986969">.</span><span class="ident" id="2986970">Less</span><span class="op" id="2986974">(</span><span class="ident" id="2986975">j</span><span class="op" id="2986976">,</span>&nbsp;<span class="ident" id="2986978">i</span><span class="op" id="2986979">)</span><br>
<span class="lineno"></span><span class="op" id="2986981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2986984">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2987031">func</span>&nbsp;<span class="ident" id="2987036">Reverse</span><span class="op" id="2987043">(</span><span class="ident" id="2987044">data</span>&nbsp;<span class="ident" id="2987049">Interface</span><span class="op" id="2987058">)</span>&nbsp;<span class="ident" id="2987060">Interface</span>&nbsp;<span class="op" id="2987070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987073">return</span>&nbsp;<span class="op" id="2987080">&amp;</span><span class="ident" id="2987081">reverse</span><span class="op" id="2987088">{</span><span class="ident" id="2987089">data</span><span class="op" id="2987093">}</span><br>
<span class="lineno"></span><span class="op" id="2987095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2987098">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2987142">func</span>&nbsp;<span class="ident" id="2987147">IsSorted</span><span class="op" id="2987155">(</span><span class="ident" id="2987156">data</span>&nbsp;<span class="ident" id="2987161">Interface</span><span class="op" id="2987170">)</span>&nbsp;<span class="builtintype" id="2987172">bool</span>&nbsp;<span class="op" id="2987177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2987180">n</span>&nbsp;<span class="op" id="2987182">:=</span>&nbsp;<span class="ident" id="2987185">data</span><span class="op" id="2987189">.</span><span class="ident" id="2987190">Len</span><span class="op" id="2987193">(</span><span class="op" id="2987194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987197">for</span>&nbsp;<span class="ident" id="2987201">i</span>&nbsp;<span class="op" id="2987203">:=</span>&nbsp;<span class="ident" id="2987206">n</span>&nbsp;<span class="op" id="2987208">-</span>&nbsp;<span class="num" id="2987210">1</span><span class="op" id="2987211">;</span>&nbsp;<span class="ident" id="2987213">i</span>&nbsp;<span class="op" id="2987215">&gt;</span>&nbsp;<span class="num" id="2987217">0</span><span class="op" id="2987218">;</span>&nbsp;<span class="ident" id="2987220">i</span><span class="op" id="2987221">--</span>&nbsp;<span class="op" id="2987224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987228">if</span>&nbsp;<span class="ident" id="2987231">data</span><span class="op" id="2987235">.</span><span class="ident" id="2987236">Less</span><span class="op" id="2987240">(</span><span class="ident" id="2987241">i</span><span class="op" id="2987242">,</span>&nbsp;<span class="ident" id="2987244">i</span><span class="op" id="2987245">-</span><span class="num" id="2987246">1</span><span class="op" id="2987247">)</span>&nbsp;<span class="op" id="2987249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987254">return</span>&nbsp;<span class="ident" id="2987261">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2987272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2987275">return</span>&nbsp;<span class="ident" id="2987282">true</span><br>
<span class="lineno"></span><span class="op" id="2987287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2987290">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2987329">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2987414">type</span>&nbsp;<span class="ident" id="2987419">IntSlice</span>&nbsp;<span class="op" id="2987428">[</span><span class="op" id="2987429">]</span><span class="builtintype" id="2987430">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2987435">func</span>&nbsp;<span class="op" id="2987440">(</span><span class="ident" id="2987441">p</span>&nbsp;<span class="ident" id="2987443">IntSlice</span><span class="op" id="2987451">)</span>&nbsp;<span class="ident" id="2987453">Len</span><span class="op" id="2987456">(</span><span class="op" id="2987457">)</span>&nbsp;<span class="builtintype" id="2987459">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2987473">{</span>&nbsp;<span class="keyword" id="2987475">return</span>&nbsp;<span class="builtinfunc" id="2987482">len</span><span class="op" id="2987485">(</span><span class="ident" id="2987486">p</span><span class="op" id="2987487">)</span>&nbsp;<span class="op" id="2987489">}</span><br>
<span class="lineno"></span><span class="keyword" id="2987491">func</span>&nbsp;<span class="op" id="2987496">(</span><span class="ident" id="2987497">p</span>&nbsp;<span class="ident" id="2987499">IntSlice</span><span class="op" id="2987507">)</span>&nbsp;<span class="ident" id="2987509">Less</span><span class="op" id="2987513">(</span><span class="ident" id="2987514">i</span><span class="op" id="2987515">,</span>&nbsp;<span class="ident" id="2987517">j</span>&nbsp;<span class="builtintype" id="2987519">int</span><span class="op" id="2987522">)</span>&nbsp;<span class="builtintype" id="2987524">bool</span>&nbsp;<span class="op" id="2987529">{</span>&nbsp;<span class="keyword" id="2987531">return</span>&nbsp;<span class="ident" id="2987538">p</span><span class="op" id="2987539">[</span><span class="ident" id="2987540">i</span><span class="op" id="2987541">]</span>&nbsp;<span class="op" id="2987543">&lt;</span>&nbsp;<span class="ident" id="2987545">p</span><span class="op" id="2987546">[</span><span class="ident" id="2987547">j</span><span class="op" id="2987548">]</span>&nbsp;<span class="op" id="2987550">}</span><br>
<span class="lineno"></span><span class="keyword" id="2987552">func</span>&nbsp;<span class="op" id="2987557">(</span><span class="ident" id="2987558">p</span>&nbsp;<span class="ident" id="2987560">IntSlice</span><span class="op" id="2987568">)</span>&nbsp;<span class="ident" id="2987570">Swap</span><span class="op" id="2987574">(</span><span class="ident" id="2987575">i</span><span class="op" id="2987576">,</span>&nbsp;<span class="ident" id="2987578">j</span>&nbsp;<span class="builtintype" id="2987580">int</span><span class="op" id="2987583">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2987590">{</span>&nbsp;<span class="ident" id="2987592">p</span><span class="op" id="2987593">[</span><span class="ident" id="2987594">i</span><span class="op" id="2987595">]</span><span class="op" id="2987596">,</span>&nbsp;<span class="ident" id="2987598">p</span><span class="op" id="2987599">[</span><span class="ident" id="2987600">j</span><span class="op" id="2987601">]</span>&nbsp;<span class="op" id="2987603">=</span>&nbsp;<span class="ident" id="2987605">p</span><span class="op" id="2987606">[</span><span class="ident" id="2987607">j</span><span class="op" id="2987608">]</span><span class="op" id="2987609">,</span>&nbsp;<span class="ident" id="2987611">p</span><span class="op" id="2987612">[</span><span class="ident" id="2987613">i</span><span class="op" id="2987614">]</span>&nbsp;<span class="op" id="2987616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2987619">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2987652">func</span>&nbsp;<span class="op" id="2987657">(</span><span class="ident" id="2987658">p</span>&nbsp;<span class="ident" id="2987660">IntSlice</span><span class="op" id="2987668">)</span>&nbsp;<span class="ident" id="2987670">Sort</span><span class="op" id="2987674">(</span><span class="op" id="2987675">)</span>&nbsp;<span class="op" id="2987677">{</span>&nbsp;<span class="ident" id="2987679">Sort</span><span class="op" id="2987683">(</span><span class="ident" id="2987684">p</span><span class="op" id="2987685">)</span>&nbsp;<span class="op" id="2987687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2987690">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2987783">type</span>&nbsp;<span class="ident" id="2987788">Float64Slice</span>&nbsp;<span class="op" id="2987801">[</span><span class="op" id="2987802">]</span><span class="builtintype" id="2987803">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2987812">func</span>&nbsp;<span class="op" id="2987817">(</span><span class="ident" id="2987818">p</span>&nbsp;<span class="ident" id="2987820">Float64Slice</span><span class="op" id="2987832">)</span>&nbsp;<span class="ident" id="2987834">Len</span><span class="op" id="2987837">(</span><span class="op" id="2987838">)</span>&nbsp;<span class="builtintype" id="2987840">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2987854">{</span>&nbsp;<span class="keyword" id="2987856">return</span>&nbsp;<span class="builtinfunc" id="2987863">len</span><span class="op" id="2987866">(</span><span class="ident" id="2987867">p</span><span class="op" id="2987868">)</span>&nbsp;<span class="op" id="2987870">}</span><br>
<span class="lineno"></span><span class="keyword" id="2987872">func</span>&nbsp;<span class="op" id="2987877">(</span><span class="ident" id="2987878">p</span>&nbsp;<span class="ident" id="2987880">Float64Slice</span><span class="op" id="2987892">)</span>&nbsp;<span class="ident" id="2987894">Less</span><span class="op" id="2987898">(</span><span class="ident" id="2987899">i</span><span class="op" id="2987900">,</span>&nbsp;<span class="ident" id="2987902">j</span>&nbsp;<span class="builtintype" id="2987904">int</span><span class="op" id="2987907">)</span>&nbsp;<span class="builtintype" id="2987909">bool</span>&nbsp;<span class="op" id="2987914">{</span>&nbsp;<span class="keyword" id="2987916">return</span>&nbsp;<span class="ident" id="2987923">p</span><span class="op" id="2987924">[</span><span class="ident" id="2987925">i</span><span class="op" id="2987926">]</span>&nbsp;<span class="op" id="2987928">&lt;</span>&nbsp;<span class="ident" id="2987930">p</span><span class="op" id="2987931">[</span><span class="ident" id="2987932">j</span><span class="op" id="2987933">]</span>&nbsp;<span class="op" id="2987935">||</span>&nbsp;<span class="ident" id="2987938">isNaN</span><span class="op" id="2987943">(</span><span class="ident" id="2987944">p</span><span class="op" id="2987945">[</span><span class="ident" id="2987946">i</span><span class="op" id="2987947">]</span><span class="op" id="2987948">)</span>&nbsp;<span class="op" id="2987950">&amp;&amp;</span>&nbsp;<span class="op" id="2987953">!</span><span class="ident" id="2987954">isNaN</span><span class="op" id="2987959">(</span><span class="ident" id="2987960">p</span><span class="op" id="2987961">[</span><span class="ident" id="2987962">j</span><span class="op" id="2987963">]</span><span class="op" id="2987964">)</span>&nbsp;<span class="op" id="2987966">}</span><br>
<span class="lineno"></span><span class="keyword" id="2987968">func</span>&nbsp;<span class="op" id="2987973">(</span><span class="ident" id="2987974">p</span>&nbsp;<span class="ident" id="2987976">Float64Slice</span><span class="op" id="2987988">)</span>&nbsp;<span class="ident" id="2987990">Swap</span><span class="op" id="2987994">(</span><span class="ident" id="2987995">i</span><span class="op" id="2987996">,</span>&nbsp;<span class="ident" id="2987998">j</span>&nbsp;<span class="builtintype" id="2988000">int</span><span class="op" id="2988003">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2988010">{</span>&nbsp;<span class="ident" id="2988012">p</span><span class="op" id="2988013">[</span><span class="ident" id="2988014">i</span><span class="op" id="2988015">]</span><span class="op" id="2988016">,</span>&nbsp;<span class="ident" id="2988018">p</span><span class="op" id="2988019">[</span><span class="ident" id="2988020">j</span><span class="op" id="2988021">]</span>&nbsp;<span class="op" id="2988023">=</span>&nbsp;<span class="ident" id="2988025">p</span><span class="op" id="2988026">[</span><span class="ident" id="2988027">j</span><span class="op" id="2988028">]</span><span class="op" id="2988029">,</span>&nbsp;<span class="ident" id="2988031">p</span><span class="op" id="2988032">[</span><span class="ident" id="2988033">i</span><span class="op" id="2988034">]</span>&nbsp;<span class="op" id="2988036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988039">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2988115">func</span>&nbsp;<span class="ident" id="2988120">isNaN</span><span class="op" id="2988125">(</span><span class="ident" id="2988126">f</span>&nbsp;<span class="builtintype" id="2988128">float64</span><span class="op" id="2988135">)</span>&nbsp;<span class="builtintype" id="2988137">bool</span>&nbsp;<span class="op" id="2988142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2988145">return</span>&nbsp;<span class="ident" id="2988152">f</span>&nbsp;<span class="op" id="2988154">!=</span>&nbsp;<span class="ident" id="2988157">f</span><br>
<span class="lineno"></span><span class="op" id="2988159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988162">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2988195">func</span>&nbsp;<span class="op" id="2988200">(</span><span class="ident" id="2988201">p</span>&nbsp;<span class="ident" id="2988203">Float64Slice</span><span class="op" id="2988215">)</span>&nbsp;<span class="ident" id="2988217">Sort</span><span class="op" id="2988221">(</span><span class="op" id="2988222">)</span>&nbsp;<span class="op" id="2988224">{</span>&nbsp;<span class="ident" id="2988226">Sort</span><span class="op" id="2988230">(</span><span class="ident" id="2988231">p</span><span class="op" id="2988232">)</span>&nbsp;<span class="op" id="2988234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988237">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2988328">type</span>&nbsp;<span class="ident" id="2988333">StringSlice</span>&nbsp;<span class="op" id="2988345">[</span><span class="op" id="2988346">]</span><span class="builtintype" id="2988347">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2988355">func</span>&nbsp;<span class="op" id="2988360">(</span><span class="ident" id="2988361">p</span>&nbsp;<span class="ident" id="2988363">StringSlice</span><span class="op" id="2988374">)</span>&nbsp;<span class="ident" id="2988376">Len</span><span class="op" id="2988379">(</span><span class="op" id="2988380">)</span>&nbsp;<span class="builtintype" id="2988382">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2988396">{</span>&nbsp;<span class="keyword" id="2988398">return</span>&nbsp;<span class="builtinfunc" id="2988405">len</span><span class="op" id="2988408">(</span><span class="ident" id="2988409">p</span><span class="op" id="2988410">)</span>&nbsp;<span class="op" id="2988412">}</span><br>
<span class="lineno"></span><span class="keyword" id="2988414">func</span>&nbsp;<span class="op" id="2988419">(</span><span class="ident" id="2988420">p</span>&nbsp;<span class="ident" id="2988422">StringSlice</span><span class="op" id="2988433">)</span>&nbsp;<span class="ident" id="2988435">Less</span><span class="op" id="2988439">(</span><span class="ident" id="2988440">i</span><span class="op" id="2988441">,</span>&nbsp;<span class="ident" id="2988443">j</span>&nbsp;<span class="builtintype" id="2988445">int</span><span class="op" id="2988448">)</span>&nbsp;<span class="builtintype" id="2988450">bool</span>&nbsp;<span class="op" id="2988455">{</span>&nbsp;<span class="keyword" id="2988457">return</span>&nbsp;<span class="ident" id="2988464">p</span><span class="op" id="2988465">[</span><span class="ident" id="2988466">i</span><span class="op" id="2988467">]</span>&nbsp;<span class="op" id="2988469">&lt;</span>&nbsp;<span class="ident" id="2988471">p</span><span class="op" id="2988472">[</span><span class="ident" id="2988473">j</span><span class="op" id="2988474">]</span>&nbsp;<span class="op" id="2988476">}</span><br>
<span class="lineno"></span><span class="keyword" id="2988478">func</span>&nbsp;<span class="op" id="2988483">(</span><span class="ident" id="2988484">p</span>&nbsp;<span class="ident" id="2988486">StringSlice</span><span class="op" id="2988497">)</span>&nbsp;<span class="ident" id="2988499">Swap</span><span class="op" id="2988503">(</span><span class="ident" id="2988504">i</span><span class="op" id="2988505">,</span>&nbsp;<span class="ident" id="2988507">j</span>&nbsp;<span class="builtintype" id="2988509">int</span><span class="op" id="2988512">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2988519">{</span>&nbsp;<span class="ident" id="2988521">p</span><span class="op" id="2988522">[</span><span class="ident" id="2988523">i</span><span class="op" id="2988524">]</span><span class="op" id="2988525">,</span>&nbsp;<span class="ident" id="2988527">p</span><span class="op" id="2988528">[</span><span class="ident" id="2988529">j</span><span class="op" id="2988530">]</span>&nbsp;<span class="op" id="2988532">=</span>&nbsp;<span class="ident" id="2988534">p</span><span class="op" id="2988535">[</span><span class="ident" id="2988536">j</span><span class="op" id="2988537">]</span><span class="op" id="2988538">,</span>&nbsp;<span class="ident" id="2988540">p</span><span class="op" id="2988541">[</span><span class="ident" id="2988542">i</span><span class="op" id="2988543">]</span>&nbsp;<span class="op" id="2988545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988548">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2988581">func</span>&nbsp;<span class="op" id="2988586">(</span><span class="ident" id="2988587">p</span>&nbsp;<span class="ident" id="2988589">StringSlice</span><span class="op" id="2988600">)</span>&nbsp;<span class="ident" id="2988602">Sort</span><span class="op" id="2988606">(</span><span class="op" id="2988607">)</span>&nbsp;<span class="op" id="2988609">{</span>&nbsp;<span class="ident" id="2988611">Sort</span><span class="op" id="2988615">(</span><span class="ident" id="2988616">p</span><span class="op" id="2988617">)</span>&nbsp;<span class="op" id="2988619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988622">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988664">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2988715">func</span>&nbsp;<span class="ident" id="2988720">Ints</span><span class="op" id="2988724">(</span><span class="ident" id="2988725">a</span>&nbsp;<span class="op" id="2988727">[</span><span class="op" id="2988728">]</span><span class="builtintype" id="2988729">int</span><span class="op" id="2988732">)</span>&nbsp;<span class="op" id="2988734">{</span>&nbsp;<span class="ident" id="2988736">Sort</span><span class="op" id="2988740">(</span><span class="ident" id="2988741">IntSlice</span><span class="op" id="2988749">(</span><span class="ident" id="2988750">a</span><span class="op" id="2988751">)</span><span class="op" id="2988752">)</span>&nbsp;<span class="op" id="2988754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988757">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2988816">func</span>&nbsp;<span class="ident" id="2988821">Float64s</span><span class="op" id="2988829">(</span><span class="ident" id="2988830">a</span>&nbsp;<span class="op" id="2988832">[</span><span class="op" id="2988833">]</span><span class="builtintype" id="2988834">float64</span><span class="op" id="2988841">)</span>&nbsp;<span class="op" id="2988843">{</span>&nbsp;<span class="ident" id="2988845">Sort</span><span class="op" id="2988849">(</span><span class="ident" id="2988850">Float64Slice</span><span class="op" id="2988862">(</span><span class="ident" id="2988863">a</span><span class="op" id="2988864">)</span><span class="op" id="2988865">)</span>&nbsp;<span class="op" id="2988867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2988870">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2988927">func</span>&nbsp;<span class="ident" id="2988932">Strings</span><span class="op" id="2988939">(</span><span class="ident" id="2988940">a</span>&nbsp;<span class="op" id="2988942">[</span><span class="op" id="2988943">]</span><span class="builtintype" id="2988944">string</span><span class="op" id="2988950">)</span>&nbsp;<span class="op" id="2988952">{</span>&nbsp;<span class="ident" id="2988954">Sort</span><span class="op" id="2988958">(</span><span class="ident" id="2988959">StringSlice</span><span class="op" id="2988970">(</span><span class="ident" id="2988971">a</span><span class="op" id="2988972">)</span><span class="op" id="2988973">)</span>&nbsp;<span class="op" id="2988975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2988978">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2989056">func</span>&nbsp;<span class="ident" id="2989061">IntsAreSorted</span><span class="op" id="2989074">(</span><span class="ident" id="2989075">a</span>&nbsp;<span class="op" id="2989077">[</span><span class="op" id="2989078">]</span><span class="builtintype" id="2989079">int</span><span class="op" id="2989082">)</span>&nbsp;<span class="builtintype" id="2989084">bool</span>&nbsp;<span class="op" id="2989089">{</span>&nbsp;<span class="keyword" id="2989091">return</span>&nbsp;<span class="ident" id="2989098">IsSorted</span><span class="op" id="2989106">(</span><span class="ident" id="2989107">IntSlice</span><span class="op" id="2989115">(</span><span class="ident" id="2989116">a</span><span class="op" id="2989117">)</span><span class="op" id="2989118">)</span>&nbsp;<span class="op" id="2989120">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2989123">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2989209">func</span>&nbsp;<span class="ident" id="2989214">Float64sAreSorted</span><span class="op" id="2989231">(</span><span class="ident" id="2989232">a</span>&nbsp;<span class="op" id="2989234">[</span><span class="op" id="2989235">]</span><span class="builtintype" id="2989236">float64</span><span class="op" id="2989243">)</span>&nbsp;<span class="builtintype" id="2989245">bool</span>&nbsp;<span class="op" id="2989250">{</span>&nbsp;<span class="keyword" id="2989252">return</span>&nbsp;<span class="ident" id="2989259">IsSorted</span><span class="op" id="2989267">(</span><span class="ident" id="2989268">Float64Slice</span><span class="op" id="2989280">(</span><span class="ident" id="2989281">a</span><span class="op" id="2989282">)</span><span class="op" id="2989283">)</span>&nbsp;<span class="op" id="2989285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2989288">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2989372">func</span>&nbsp;<span class="ident" id="2989377">StringsAreSorted</span><span class="op" id="2989393">(</span><span class="ident" id="2989394">a</span>&nbsp;<span class="op" id="2989396">[</span><span class="op" id="2989397">]</span><span class="builtintype" id="2989398">string</span><span class="op" id="2989404">)</span>&nbsp;<span class="builtintype" id="2989406">bool</span>&nbsp;<span class="op" id="2989411">{</span>&nbsp;<span class="keyword" id="2989413">return</span>&nbsp;<span class="ident" id="2989420">IsSorted</span><span class="op" id="2989428">(</span><span class="ident" id="2989429">StringSlice</span><span class="op" id="2989440">(</span><span class="ident" id="2989441">a</span><span class="op" id="2989442">)</span><span class="op" id="2989443">)</span>&nbsp;<span class="op" id="2989445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2989448">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2989476">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2989552">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2989627">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2989690">//</span><br>
<span class="lineno"></span><span class="comment" id="2989693">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2989735">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2989807">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2989825">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2989879">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2989956">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2990028">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2990100">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2990155">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2990228">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2990279">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2990355">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2990429">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2990495">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2990572">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2990651">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2990729">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2990803">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2990851">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2990925">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2990974">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2991047">//</span><br>
<span class="lineno">315</span><span class="comment" id="2991050">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2991120">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2991176">func</span>&nbsp;<span class="ident" id="2991181">Stable</span><span class="op" id="2991187">(</span><span class="ident" id="2991188">data</span>&nbsp;<span class="ident" id="2991193">Interface</span><span class="op" id="2991202">)</span>&nbsp;<span class="op" id="2991204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991207">n</span>&nbsp;<span class="op" id="2991209">:=</span>&nbsp;<span class="ident" id="2991212">data</span><span class="op" id="2991216">.</span><span class="ident" id="2991217">Len</span><span class="op" id="2991220">(</span><span class="op" id="2991221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991224">blockSize</span>&nbsp;<span class="op" id="2991234">:=</span>&nbsp;<span class="num" id="2991237">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991241">a</span><span class="op" id="2991242">,</span>&nbsp;<span class="ident" id="2991244">b</span>&nbsp;<span class="op" id="2991246">:=</span>&nbsp;<span class="num" id="2991249">0</span><span class="op" id="2991250">,</span>&nbsp;<span class="ident" id="2991252">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2991263">for</span>&nbsp;<span class="ident" id="2991267">b</span>&nbsp;<span class="op" id="2991269">&lt;=</span>&nbsp;<span class="ident" id="2991272">n</span>&nbsp;<span class="op" id="2991274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991278">insertionSort</span><span class="op" id="2991291">(</span><span class="ident" id="2991292">data</span><span class="op" id="2991296">,</span>&nbsp;<span class="ident" id="2991298">a</span><span class="op" id="2991299">,</span>&nbsp;<span class="ident" id="2991301">b</span><span class="op" id="2991302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991306">a</span>&nbsp;<span class="op" id="2991308">=</span>&nbsp;<span class="ident" id="2991310">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991314">b</span>&nbsp;<span class="op" id="2991316">+=</span>&nbsp;<span class="ident" id="2991319">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2991330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991333">insertionSort</span><span class="op" id="2991346">(</span><span class="ident" id="2991347">data</span><span class="op" id="2991351">,</span>&nbsp;<span class="ident" id="2991353">a</span><span class="op" id="2991354">,</span>&nbsp;<span class="ident" id="2991356">n</span><span class="op" id="2991357">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2991361">for</span>&nbsp;<span class="ident" id="2991365">blockSize</span>&nbsp;<span class="op" id="2991375">&lt;</span>&nbsp;<span class="ident" id="2991377">n</span>&nbsp;<span class="op" id="2991379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991383">a</span><span class="op" id="2991384">,</span>&nbsp;<span class="ident" id="2991386">b</span>&nbsp;<span class="op" id="2991388">=</span>&nbsp;<span class="num" id="2991390">0</span><span class="op" id="2991391">,</span>&nbsp;<span class="num" id="2991393">2</span><span class="op" id="2991394">*</span><span class="ident" id="2991395">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2991407">for</span>&nbsp;<span class="ident" id="2991411">b</span>&nbsp;<span class="op" id="2991413">&lt;=</span>&nbsp;<span class="ident" id="2991416">n</span>&nbsp;<span class="op" id="2991418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991423">symMerge</span><span class="op" id="2991431">(</span><span class="ident" id="2991432">data</span><span class="op" id="2991436">,</span>&nbsp;<span class="ident" id="2991438">a</span><span class="op" id="2991439">,</span>&nbsp;<span class="ident" id="2991441">a</span><span class="op" id="2991442">+</span><span class="ident" id="2991443">blockSize</span><span class="op" id="2991452">,</span>&nbsp;<span class="ident" id="2991454">b</span><span class="op" id="2991455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991460">a</span>&nbsp;<span class="op" id="2991462">=</span>&nbsp;<span class="ident" id="2991464">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991469">b</span>&nbsp;<span class="op" id="2991471">+=</span>&nbsp;<span class="num" id="2991474">2</span>&nbsp;<span class="op" id="2991476">*</span>&nbsp;<span class="ident" id="2991478">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2991490">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991494">symMerge</span><span class="op" id="2991502">(</span><span class="ident" id="2991503">data</span><span class="op" id="2991507">,</span>&nbsp;<span class="ident" id="2991509">a</span><span class="op" id="2991510">,</span>&nbsp;<span class="ident" id="2991512">a</span><span class="op" id="2991513">+</span><span class="ident" id="2991514">blockSize</span><span class="op" id="2991523">,</span>&nbsp;<span class="ident" id="2991525">n</span><span class="op" id="2991526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2991530">blockSize</span>&nbsp;<span class="op" id="2991540">*=</span>&nbsp;<span class="num" id="2991543">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2991546">}</span><br>
<span class="lineno"></span><span class="op" id="2991548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2991551">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2991628">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2991705">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2991780">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2991855">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2991907">//</span><br>
<span class="lineno"></span><span class="comment" id="2991910">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2991951">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2992002">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2992063">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2992122">//</span><br>
<span class="lineno"></span><span class="comment" id="2992125">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2992200">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2992280">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2992357">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2992400">func</span>&nbsp;<span class="ident" id="2992405">symMerge</span><span class="op" id="2992413">(</span><span class="ident" id="2992414">data</span>&nbsp;<span class="ident" id="2992419">Interface</span><span class="op" id="2992428">,</span>&nbsp;<span class="ident" id="2992430">a</span><span class="op" id="2992431">,</span>&nbsp;<span class="ident" id="2992433">m</span><span class="op" id="2992434">,</span>&nbsp;<span class="ident" id="2992436">b</span>&nbsp;<span class="builtintype" id="2992438">int</span><span class="op" id="2992441">)</span>&nbsp;<span class="op" id="2992443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992446">if</span>&nbsp;<span class="ident" id="2992449">a</span>&nbsp;<span class="op" id="2992451">&gt;=</span>&nbsp;<span class="ident" id="2992454">m</span>&nbsp;<span class="op" id="2992456">||</span>&nbsp;<span class="ident" id="2992459">m</span>&nbsp;<span class="op" id="2992461">&gt;=</span>&nbsp;<span class="ident" id="2992464">b</span>&nbsp;<span class="op" id="2992466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992470">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992482">mid</span>&nbsp;<span class="op" id="2992486">:=</span>&nbsp;<span class="ident" id="2992489">a</span>&nbsp;<span class="op" id="2992491">+</span>&nbsp;<span class="op" id="2992493">(</span><span class="ident" id="2992494">b</span><span class="op" id="2992495">-</span><span class="ident" id="2992496">a</span><span class="op" id="2992497">)</span><span class="op" id="2992498">/</span><span class="num" id="2992499">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992502">n</span>&nbsp;<span class="op" id="2992504">:=</span>&nbsp;<span class="ident" id="2992507">mid</span>&nbsp;<span class="op" id="2992511">+</span>&nbsp;<span class="ident" id="2992513">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992516">start</span>&nbsp;<span class="op" id="2992522">:=</span>&nbsp;<span class="num" id="2992525">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992528">if</span>&nbsp;<span class="ident" id="2992531">m</span>&nbsp;<span class="op" id="2992533">&gt;</span>&nbsp;<span class="ident" id="2992535">mid</span>&nbsp;<span class="op" id="2992539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992543">start</span>&nbsp;<span class="op" id="2992549">=</span>&nbsp;<span class="ident" id="2992551">n</span>&nbsp;<span class="op" id="2992553">-</span>&nbsp;<span class="ident" id="2992555">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992559">r</span><span class="op" id="2992560">,</span>&nbsp;<span class="ident" id="2992562">p</span>&nbsp;<span class="op" id="2992564">:=</span>&nbsp;<span class="ident" id="2992567">mid</span><span class="op" id="2992570">,</span>&nbsp;<span class="ident" id="2992572">n</span><span class="op" id="2992573">-</span><span class="num" id="2992574">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992578">for</span>&nbsp;<span class="ident" id="2992582">start</span>&nbsp;<span class="op" id="2992588">&lt;</span>&nbsp;<span class="ident" id="2992590">r</span>&nbsp;<span class="op" id="2992592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992597">c</span>&nbsp;<span class="op" id="2992599">:=</span>&nbsp;<span class="ident" id="2992602">start</span>&nbsp;<span class="op" id="2992608">+</span>&nbsp;<span class="op" id="2992610">(</span><span class="ident" id="2992611">r</span><span class="op" id="2992612">-</span><span class="ident" id="2992613">start</span><span class="op" id="2992618">)</span><span class="op" id="2992619">/</span><span class="num" id="2992620">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992625">if</span>&nbsp;<span class="op" id="2992628">!</span><span class="ident" id="2992629">data</span><span class="op" id="2992633">.</span><span class="ident" id="2992634">Less</span><span class="op" id="2992638">(</span><span class="ident" id="2992639">p</span><span class="op" id="2992640">-</span><span class="ident" id="2992641">c</span><span class="op" id="2992642">,</span>&nbsp;<span class="ident" id="2992644">c</span><span class="op" id="2992645">)</span>&nbsp;<span class="op" id="2992647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992653">start</span>&nbsp;<span class="op" id="2992659">=</span>&nbsp;<span class="ident" id="2992661">c</span>&nbsp;<span class="op" id="2992663">+</span>&nbsp;<span class="num" id="2992665">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992670">}</span>&nbsp;<span class="keyword" id="2992672">else</span>&nbsp;<span class="op" id="2992677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992683">r</span>&nbsp;<span class="op" id="2992685">=</span>&nbsp;<span class="ident" id="2992687">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992699">}</span>&nbsp;<span class="keyword" id="2992701">else</span>&nbsp;<span class="op" id="2992706">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992710">start</span>&nbsp;<span class="op" id="2992716">=</span>&nbsp;<span class="ident" id="2992718">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992722">r</span><span class="op" id="2992723">,</span>&nbsp;<span class="ident" id="2992725">p</span>&nbsp;<span class="op" id="2992727">:=</span>&nbsp;<span class="ident" id="2992730">m</span><span class="op" id="2992731">,</span>&nbsp;<span class="ident" id="2992733">n</span><span class="op" id="2992734">-</span><span class="num" id="2992735">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992739">for</span>&nbsp;<span class="ident" id="2992743">start</span>&nbsp;<span class="op" id="2992749">&lt;</span>&nbsp;<span class="ident" id="2992751">r</span>&nbsp;<span class="op" id="2992753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992758">c</span>&nbsp;<span class="op" id="2992760">:=</span>&nbsp;<span class="ident" id="2992763">start</span>&nbsp;<span class="op" id="2992769">+</span>&nbsp;<span class="op" id="2992771">(</span><span class="ident" id="2992772">r</span><span class="op" id="2992773">-</span><span class="ident" id="2992774">start</span><span class="op" id="2992779">)</span><span class="op" id="2992780">/</span><span class="num" id="2992781">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2992786">if</span>&nbsp;<span class="op" id="2992789">!</span><span class="ident" id="2992790">data</span><span class="op" id="2992794">.</span><span class="ident" id="2992795">Less</span><span class="op" id="2992799">(</span><span class="ident" id="2992800">p</span><span class="op" id="2992801">-</span><span class="ident" id="2992802">c</span><span class="op" id="2992803">,</span>&nbsp;<span class="ident" id="2992805">c</span><span class="op" id="2992806">)</span>&nbsp;<span class="op" id="2992808">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992814">start</span>&nbsp;<span class="op" id="2992820">=</span>&nbsp;<span class="ident" id="2992822">c</span>&nbsp;<span class="op" id="2992824">+</span>&nbsp;<span class="num" id="2992826">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992831">}</span>&nbsp;<span class="keyword" id="2992833">else</span>&nbsp;<span class="op" id="2992838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992844">r</span>&nbsp;<span class="op" id="2992846">=</span>&nbsp;<span class="ident" id="2992848">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992857">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2992860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992863">end</span>&nbsp;<span class="op" id="2992867">:=</span>&nbsp;<span class="ident" id="2992870">n</span>&nbsp;<span class="op" id="2992872">-</span>&nbsp;<span class="ident" id="2992874">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992881">rotate</span><span class="op" id="2992887">(</span><span class="ident" id="2992888">data</span><span class="op" id="2992892">,</span>&nbsp;<span class="ident" id="2992894">start</span><span class="op" id="2992899">,</span>&nbsp;<span class="ident" id="2992901">m</span><span class="op" id="2992902">,</span>&nbsp;<span class="ident" id="2992904">end</span><span class="op" id="2992907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992910">symMerge</span><span class="op" id="2992918">(</span><span class="ident" id="2992919">data</span><span class="op" id="2992923">,</span>&nbsp;<span class="ident" id="2992925">a</span><span class="op" id="2992926">,</span>&nbsp;<span class="ident" id="2992928">start</span><span class="op" id="2992933">,</span>&nbsp;<span class="ident" id="2992935">mid</span><span class="op" id="2992938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2992941">symMerge</span><span class="op" id="2992949">(</span><span class="ident" id="2992950">data</span><span class="op" id="2992954">,</span>&nbsp;<span class="ident" id="2992956">mid</span><span class="op" id="2992959">,</span>&nbsp;<span class="ident" id="2992961">end</span><span class="op" id="2992964">,</span>&nbsp;<span class="ident" id="2992966">b</span><span class="op" id="2992967">)</span><br>
<span class="lineno">390</span><span class="op" id="2992969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2992972">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2993047">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2993102">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2993158">func</span>&nbsp;<span class="ident" id="2993163">rotate</span><span class="op" id="2993169">(</span><span class="ident" id="2993170">data</span>&nbsp;<span class="ident" id="2993175">Interface</span><span class="op" id="2993184">,</span>&nbsp;<span class="ident" id="2993186">a</span><span class="op" id="2993187">,</span>&nbsp;<span class="ident" id="2993189">m</span><span class="op" id="2993190">,</span>&nbsp;<span class="ident" id="2993192">b</span>&nbsp;<span class="builtintype" id="2993194">int</span><span class="op" id="2993197">)</span>&nbsp;<span class="op" id="2993199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993202">i</span>&nbsp;<span class="op" id="2993204">:=</span>&nbsp;<span class="ident" id="2993207">m</span>&nbsp;<span class="op" id="2993209">-</span>&nbsp;<span class="ident" id="2993211">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993214">if</span>&nbsp;<span class="ident" id="2993217">i</span>&nbsp;<span class="op" id="2993219">==</span>&nbsp;<span class="num" id="2993222">0</span>&nbsp;<span class="op" id="2993224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993228">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993236">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993239">j</span>&nbsp;<span class="op" id="2993241">:=</span>&nbsp;<span class="ident" id="2993244">b</span>&nbsp;<span class="op" id="2993246">-</span>&nbsp;<span class="ident" id="2993248">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993251">if</span>&nbsp;<span class="ident" id="2993254">j</span>&nbsp;<span class="op" id="2993256">==</span>&nbsp;<span class="num" id="2993259">0</span>&nbsp;<span class="op" id="2993261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993265">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993277">if</span>&nbsp;<span class="ident" id="2993280">i</span>&nbsp;<span class="op" id="2993282">==</span>&nbsp;<span class="ident" id="2993285">j</span>&nbsp;<span class="op" id="2993287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993291">swapRange</span><span class="op" id="2993300">(</span><span class="ident" id="2993301">data</span><span class="op" id="2993305">,</span>&nbsp;<span class="ident" id="2993307">a</span><span class="op" id="2993308">,</span>&nbsp;<span class="ident" id="2993310">m</span><span class="op" id="2993311">,</span>&nbsp;<span class="ident" id="2993313">i</span><span class="op" id="2993314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993318">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993330">p</span>&nbsp;<span class="op" id="2993332">:=</span>&nbsp;<span class="ident" id="2993335">a</span>&nbsp;<span class="op" id="2993337">+</span>&nbsp;<span class="ident" id="2993339">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993342">for</span>&nbsp;<span class="ident" id="2993346">i</span>&nbsp;<span class="op" id="2993348">!=</span>&nbsp;<span class="ident" id="2993351">j</span>&nbsp;<span class="op" id="2993353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2993357">if</span>&nbsp;<span class="ident" id="2993360">i</span>&nbsp;<span class="op" id="2993362">&gt;</span>&nbsp;<span class="ident" id="2993364">j</span>&nbsp;<span class="op" id="2993366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993371">swapRange</span><span class="op" id="2993380">(</span><span class="ident" id="2993381">data</span><span class="op" id="2993385">,</span>&nbsp;<span class="ident" id="2993387">p</span><span class="op" id="2993388">-</span><span class="ident" id="2993389">i</span><span class="op" id="2993390">,</span>&nbsp;<span class="ident" id="2993392">p</span><span class="op" id="2993393">,</span>&nbsp;<span class="ident" id="2993395">j</span><span class="op" id="2993396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993401">i</span>&nbsp;<span class="op" id="2993403">-=</span>&nbsp;<span class="ident" id="2993406">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993410">}</span>&nbsp;<span class="keyword" id="2993412">else</span>&nbsp;<span class="op" id="2993417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993422">swapRange</span><span class="op" id="2993431">(</span><span class="ident" id="2993432">data</span><span class="op" id="2993436">,</span>&nbsp;<span class="ident" id="2993438">p</span><span class="op" id="2993439">-</span><span class="ident" id="2993440">i</span><span class="op" id="2993441">,</span>&nbsp;<span class="ident" id="2993443">p</span><span class="op" id="2993444">+</span><span class="ident" id="2993445">j</span><span class="op" id="2993446">-</span><span class="ident" id="2993447">i</span><span class="op" id="2993448">,</span>&nbsp;<span class="ident" id="2993450">i</span><span class="op" id="2993451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993456">j</span>&nbsp;<span class="op" id="2993458">-=</span>&nbsp;<span class="ident" id="2993461">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2993468">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2993471">swapRange</span><span class="op" id="2993480">(</span><span class="ident" id="2993481">data</span><span class="op" id="2993485">,</span>&nbsp;<span class="ident" id="2993487">p</span><span class="op" id="2993488">-</span><span class="ident" id="2993489">i</span><span class="op" id="2993490">,</span>&nbsp;<span class="ident" id="2993492">p</span><span class="op" id="2993493">,</span>&nbsp;<span class="ident" id="2993495">i</span><span class="op" id="2993496">)</span><br>
<span class="lineno"></span><span class="op" id="2993498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2993501">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
