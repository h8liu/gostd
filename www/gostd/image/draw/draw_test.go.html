<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6861379">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6861434">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6861488">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6861539">package</span>&nbsp;<span class="ident" id="6861547">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6861553">import</span>&nbsp;<span class="op" id="6861560">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6861563">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6861572">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6861587">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6861600">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6861606">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6861616">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6861619">func</span>&nbsp;<span class="ident" id="6861624">eq</span><span class="op" id="6861626">(</span><span class="ident" id="6861627">c0</span><span class="op" id="6861629">,</span>&nbsp;<span class="ident" id="6861631">c1</span>&nbsp;<span class="ident" id="6861634">color</span><span class="op" id="6861639">.</span><span class="ident" id="6861640">Color</span><span class="op" id="6861645">)</span>&nbsp;<span class="builtintype" id="6861647">bool</span>&nbsp;<span class="op" id="6861652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861655">r0</span><span class="op" id="6861657">,</span>&nbsp;<span class="ident" id="6861659">g0</span><span class="op" id="6861661">,</span>&nbsp;<span class="ident" id="6861663">b0</span><span class="op" id="6861665">,</span>&nbsp;<span class="ident" id="6861667">a0</span>&nbsp;<span class="op" id="6861670">:=</span>&nbsp;<span class="ident" id="6861673">c0</span><span class="op" id="6861675">.</span><span class="ident" id="6861676">RGBA</span><span class="op" id="6861680">(</span><span class="op" id="6861681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6861684">r1</span><span class="op" id="6861686">,</span>&nbsp;<span class="ident" id="6861688">g1</span><span class="op" id="6861690">,</span>&nbsp;<span class="ident" id="6861692">b1</span><span class="op" id="6861694">,</span>&nbsp;<span class="ident" id="6861696">a1</span>&nbsp;<span class="op" id="6861699">:=</span>&nbsp;<span class="ident" id="6861702">c1</span><span class="op" id="6861704">.</span><span class="ident" id="6861705">RGBA</span><span class="op" id="6861709">(</span><span class="op" id="6861710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861713">return</span>&nbsp;<span class="ident" id="6861720">r0</span>&nbsp;<span class="op" id="6861723">==</span>&nbsp;<span class="ident" id="6861726">r1</span>&nbsp;<span class="op" id="6861729">&amp;&amp;</span>&nbsp;<span class="ident" id="6861732">g0</span>&nbsp;<span class="op" id="6861735">==</span>&nbsp;<span class="ident" id="6861738">g1</span>&nbsp;<span class="op" id="6861741">&amp;&amp;</span>&nbsp;<span class="ident" id="6861744">b0</span>&nbsp;<span class="op" id="6861747">==</span>&nbsp;<span class="ident" id="6861750">b1</span>&nbsp;<span class="op" id="6861753">&amp;&amp;</span>&nbsp;<span class="ident" id="6861756">a0</span>&nbsp;<span class="op" id="6861759">==</span>&nbsp;<span class="ident" id="6861762">a1</span><br>
<span class="lineno"></span><span class="op" id="6861765">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6861768">func</span>&nbsp;<span class="ident" id="6861773">fillBlue</span><span class="op" id="6861781">(</span><span class="ident" id="6861782">alpha</span>&nbsp;<span class="builtintype" id="6861788">int</span><span class="op" id="6861791">)</span>&nbsp;<span class="ident" id="6861793">image</span><span class="op" id="6861798">.</span><span class="ident" id="6861799">Image</span>&nbsp;<span class="op" id="6861805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861808">return</span>&nbsp;<span class="ident" id="6861815">image</span><span class="op" id="6861820">.</span><span class="ident" id="6861821">NewUniform</span><span class="op" id="6861831">(</span><span class="ident" id="6861832">color</span><span class="op" id="6861837">.</span><span class="ident" id="6861838">RGBA</span><span class="op" id="6861842">{</span><span class="num" id="6861843">0</span><span class="op" id="6861844">,</span>&nbsp;<span class="num" id="6861846">0</span><span class="op" id="6861847">,</span>&nbsp;<span class="builtintype" id="6861849">uint8</span><span class="op" id="6861854">(</span><span class="ident" id="6861855">alpha</span><span class="op" id="6861860">)</span><span class="op" id="6861861">,</span>&nbsp;<span class="builtintype" id="6861863">uint8</span><span class="op" id="6861868">(</span><span class="ident" id="6861869">alpha</span><span class="op" id="6861874">)</span><span class="op" id="6861875">}</span><span class="op" id="6861876">)</span><br>
<span class="lineno"></span><span class="op" id="6861878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6861881">func</span>&nbsp;<span class="ident" id="6861886">fillAlpha</span><span class="op" id="6861895">(</span><span class="ident" id="6861896">alpha</span>&nbsp;<span class="builtintype" id="6861902">int</span><span class="op" id="6861905">)</span>&nbsp;<span class="ident" id="6861907">image</span><span class="op" id="6861912">.</span><span class="ident" id="6861913">Image</span>&nbsp;<span class="op" id="6861919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6861922">return</span>&nbsp;<span class="ident" id="6861929">image</span><span class="op" id="6861934">.</span><span class="ident" id="6861935">NewUniform</span><span class="op" id="6861945">(</span><span class="ident" id="6861946">color</span><span class="op" id="6861951">.</span><span class="ident" id="6861952">Alpha</span><span class="op" id="6861957">{</span><span class="builtintype" id="6861958">uint8</span><span class="op" id="6861963">(</span><span class="ident" id="6861964">alpha</span><span class="op" id="6861969">)</span><span class="op" id="6861970">}</span><span class="op" id="6861971">)</span><br>
<span class="lineno"></span><span class="op" id="6861973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6861976">func</span>&nbsp;<span class="ident" id="6861981">vgradGreen</span><span class="op" id="6861991">(</span><span class="ident" id="6861992">alpha</span>&nbsp;<span class="builtintype" id="6861998">int</span><span class="op" id="6862001">)</span>&nbsp;<span class="ident" id="6862003">image</span><span class="op" id="6862008">.</span><span class="ident" id="6862009">Image</span>&nbsp;<span class="op" id="6862015">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862018">m</span>&nbsp;<span class="op" id="6862020">:=</span>&nbsp;<span class="ident" id="6862023">image</span><span class="op" id="6862028">.</span><span class="ident" id="6862029">NewRGBA</span><span class="op" id="6862036">(</span><span class="ident" id="6862037">image</span><span class="op" id="6862042">.</span><span class="ident" id="6862043">Rect</span><span class="op" id="6862047">(</span><span class="num" id="6862048">0</span><span class="op" id="6862049">,</span>&nbsp;<span class="num" id="6862051">0</span><span class="op" id="6862052">,</span>&nbsp;<span class="num" id="6862054">16</span><span class="op" id="6862056">,</span>&nbsp;<span class="num" id="6862058">16</span><span class="op" id="6862060">)</span><span class="op" id="6862061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862064">for</span>&nbsp;<span class="ident" id="6862068">y</span>&nbsp;<span class="op" id="6862070">:=</span>&nbsp;<span class="num" id="6862073">0</span><span class="op" id="6862074">;</span>&nbsp;<span class="ident" id="6862076">y</span>&nbsp;<span class="op" id="6862078">&lt;</span>&nbsp;<span class="num" id="6862080">16</span><span class="op" id="6862082">;</span>&nbsp;<span class="ident" id="6862084">y</span><span class="op" id="6862085">++</span>&nbsp;<span class="op" id="6862088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862092">for</span>&nbsp;<span class="ident" id="6862096">x</span>&nbsp;<span class="op" id="6862098">:=</span>&nbsp;<span class="num" id="6862101">0</span><span class="op" id="6862102">;</span>&nbsp;<span class="ident" id="6862104">x</span>&nbsp;<span class="op" id="6862106">&lt;</span>&nbsp;<span class="num" id="6862108">16</span><span class="op" id="6862110">;</span>&nbsp;<span class="ident" id="6862112">x</span><span class="op" id="6862113">++</span>&nbsp;<span class="op" id="6862116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862121">m</span><span class="op" id="6862122">.</span><span class="ident" id="6862123">Set</span><span class="op" id="6862126">(</span><span class="ident" id="6862127">x</span><span class="op" id="6862128">,</span>&nbsp;<span class="ident" id="6862130">y</span><span class="op" id="6862131">,</span>&nbsp;<span class="ident" id="6862133">color</span><span class="op" id="6862138">.</span><span class="ident" id="6862139">RGBA</span><span class="op" id="6862143">{</span><span class="num" id="6862144">0</span><span class="op" id="6862145">,</span>&nbsp;<span class="builtintype" id="6862147">uint8</span><span class="op" id="6862152">(</span><span class="ident" id="6862153">y</span>&nbsp;<span class="op" id="6862155">*</span>&nbsp;<span class="ident" id="6862157">alpha</span>&nbsp;<span class="op" id="6862163">/</span>&nbsp;<span class="num" id="6862165">15</span><span class="op" id="6862167">)</span><span class="op" id="6862168">,</span>&nbsp;<span class="num" id="6862170">0</span><span class="op" id="6862171">,</span>&nbsp;<span class="builtintype" id="6862173">uint8</span><span class="op" id="6862178">(</span><span class="ident" id="6862179">alpha</span><span class="op" id="6862184">)</span><span class="op" id="6862185">}</span><span class="op" id="6862186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862190">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862196">return</span>&nbsp;<span class="ident" id="6862203">m</span><br>
<span class="lineno"></span><span class="op" id="6862205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6862208">func</span>&nbsp;<span class="ident" id="6862213">vgradAlpha</span><span class="op" id="6862223">(</span><span class="ident" id="6862224">alpha</span>&nbsp;<span class="builtintype" id="6862230">int</span><span class="op" id="6862233">)</span>&nbsp;<span class="ident" id="6862235">image</span><span class="op" id="6862240">.</span><span class="ident" id="6862241">Image</span>&nbsp;<span class="op" id="6862247">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862250">m</span>&nbsp;<span class="op" id="6862252">:=</span>&nbsp;<span class="ident" id="6862255">image</span><span class="op" id="6862260">.</span><span class="ident" id="6862261">NewAlpha</span><span class="op" id="6862269">(</span><span class="ident" id="6862270">image</span><span class="op" id="6862275">.</span><span class="ident" id="6862276">Rect</span><span class="op" id="6862280">(</span><span class="num" id="6862281">0</span><span class="op" id="6862282">,</span>&nbsp;<span class="num" id="6862284">0</span><span class="op" id="6862285">,</span>&nbsp;<span class="num" id="6862287">16</span><span class="op" id="6862289">,</span>&nbsp;<span class="num" id="6862291">16</span><span class="op" id="6862293">)</span><span class="op" id="6862294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862297">for</span>&nbsp;<span class="ident" id="6862301">y</span>&nbsp;<span class="op" id="6862303">:=</span>&nbsp;<span class="num" id="6862306">0</span><span class="op" id="6862307">;</span>&nbsp;<span class="ident" id="6862309">y</span>&nbsp;<span class="op" id="6862311">&lt;</span>&nbsp;<span class="num" id="6862313">16</span><span class="op" id="6862315">;</span>&nbsp;<span class="ident" id="6862317">y</span><span class="op" id="6862318">++</span>&nbsp;<span class="op" id="6862321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862325">for</span>&nbsp;<span class="ident" id="6862329">x</span>&nbsp;<span class="op" id="6862331">:=</span>&nbsp;<span class="num" id="6862334">0</span><span class="op" id="6862335">;</span>&nbsp;<span class="ident" id="6862337">x</span>&nbsp;<span class="op" id="6862339">&lt;</span>&nbsp;<span class="num" id="6862341">16</span><span class="op" id="6862343">;</span>&nbsp;<span class="ident" id="6862345">x</span><span class="op" id="6862346">++</span>&nbsp;<span class="op" id="6862349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862354">m</span><span class="op" id="6862355">.</span><span class="ident" id="6862356">Set</span><span class="op" id="6862359">(</span><span class="ident" id="6862360">x</span><span class="op" id="6862361">,</span>&nbsp;<span class="ident" id="6862363">y</span><span class="op" id="6862364">,</span>&nbsp;<span class="ident" id="6862366">color</span><span class="op" id="6862371">.</span><span class="ident" id="6862372">Alpha</span><span class="op" id="6862377">{</span><span class="builtintype" id="6862378">uint8</span><span class="op" id="6862383">(</span><span class="ident" id="6862384">y</span>&nbsp;<span class="op" id="6862386">*</span>&nbsp;<span class="ident" id="6862388">alpha</span>&nbsp;<span class="op" id="6862394">/</span>&nbsp;<span class="num" id="6862396">15</span><span class="op" id="6862398">)</span><span class="op" id="6862399">}</span><span class="op" id="6862400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862404">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862410">return</span>&nbsp;<span class="ident" id="6862417">m</span><br>
<span class="lineno"></span><span class="op" id="6862419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6862422">func</span>&nbsp;<span class="ident" id="6862427">vgradGreenNRGBA</span><span class="op" id="6862442">(</span><span class="ident" id="6862443">alpha</span>&nbsp;<span class="builtintype" id="6862449">int</span><span class="op" id="6862452">)</span>&nbsp;<span class="ident" id="6862454">image</span><span class="op" id="6862459">.</span><span class="ident" id="6862460">Image</span>&nbsp;<span class="op" id="6862466">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862469">m</span>&nbsp;<span class="op" id="6862471">:=</span>&nbsp;<span class="ident" id="6862474">image</span><span class="op" id="6862479">.</span><span class="ident" id="6862480">NewNRGBA</span><span class="op" id="6862488">(</span><span class="ident" id="6862489">image</span><span class="op" id="6862494">.</span><span class="ident" id="6862495">Rect</span><span class="op" id="6862499">(</span><span class="num" id="6862500">0</span><span class="op" id="6862501">,</span>&nbsp;<span class="num" id="6862503">0</span><span class="op" id="6862504">,</span>&nbsp;<span class="num" id="6862506">16</span><span class="op" id="6862508">,</span>&nbsp;<span class="num" id="6862510">16</span><span class="op" id="6862512">)</span><span class="op" id="6862513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862516">for</span>&nbsp;<span class="ident" id="6862520">y</span>&nbsp;<span class="op" id="6862522">:=</span>&nbsp;<span class="num" id="6862525">0</span><span class="op" id="6862526">;</span>&nbsp;<span class="ident" id="6862528">y</span>&nbsp;<span class="op" id="6862530">&lt;</span>&nbsp;<span class="num" id="6862532">16</span><span class="op" id="6862534">;</span>&nbsp;<span class="ident" id="6862536">y</span><span class="op" id="6862537">++</span>&nbsp;<span class="op" id="6862540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862544">for</span>&nbsp;<span class="ident" id="6862548">x</span>&nbsp;<span class="op" id="6862550">:=</span>&nbsp;<span class="num" id="6862553">0</span><span class="op" id="6862554">;</span>&nbsp;<span class="ident" id="6862556">x</span>&nbsp;<span class="op" id="6862558">&lt;</span>&nbsp;<span class="num" id="6862560">16</span><span class="op" id="6862562">;</span>&nbsp;<span class="ident" id="6862564">x</span><span class="op" id="6862565">++</span>&nbsp;<span class="op" id="6862568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862573">m</span><span class="op" id="6862574">.</span><span class="ident" id="6862575">Set</span><span class="op" id="6862578">(</span><span class="ident" id="6862579">x</span><span class="op" id="6862580">,</span>&nbsp;<span class="ident" id="6862582">y</span><span class="op" id="6862583">,</span>&nbsp;<span class="ident" id="6862585">color</span><span class="op" id="6862590">.</span><span class="ident" id="6862591">RGBA</span><span class="op" id="6862595">{</span><span class="num" id="6862596">0</span><span class="op" id="6862597">,</span>&nbsp;<span class="builtintype" id="6862599">uint8</span><span class="op" id="6862604">(</span><span class="ident" id="6862605">y</span>&nbsp;<span class="op" id="6862607">*</span>&nbsp;<span class="num" id="6862609">0x11</span><span class="op" id="6862613">)</span><span class="op" id="6862614">,</span>&nbsp;<span class="num" id="6862616">0</span><span class="op" id="6862617">,</span>&nbsp;<span class="builtintype" id="6862619">uint8</span><span class="op" id="6862624">(</span><span class="ident" id="6862625">alpha</span><span class="op" id="6862630">)</span><span class="op" id="6862631">}</span><span class="op" id="6862632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862636">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862642">return</span>&nbsp;<span class="ident" id="6862649">m</span><br>
<span class="lineno"></span><span class="op" id="6862651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6862654">func</span>&nbsp;<span class="ident" id="6862659">vgradCr</span><span class="op" id="6862666">(</span><span class="op" id="6862667">)</span>&nbsp;<span class="ident" id="6862669">image</span><span class="op" id="6862674">.</span><span class="ident" id="6862675">Image</span>&nbsp;<span class="op" id="6862681">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862684">m</span>&nbsp;<span class="op" id="6862686">:=</span>&nbsp;<span class="op" id="6862689">&amp;</span><span class="ident" id="6862690">image</span><span class="op" id="6862695">.</span><span class="ident" id="6862696">YCbCr</span><span class="op" id="6862701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862705">Y</span><span class="op" id="6862706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6862721">make</span><span class="op" id="6862725">(</span><span class="op" id="6862726">[</span><span class="op" id="6862727">]</span><span class="builtintype" id="6862728">byte</span><span class="op" id="6862732">,</span>&nbsp;<span class="num" id="6862734">16</span><span class="op" id="6862736">*</span><span class="num" id="6862737">16</span><span class="op" id="6862739">)</span><span class="op" id="6862740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862744">Cb</span><span class="op" id="6862746">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6862760">make</span><span class="op" id="6862764">(</span><span class="op" id="6862765">[</span><span class="op" id="6862766">]</span><span class="builtintype" id="6862767">byte</span><span class="op" id="6862771">,</span>&nbsp;<span class="num" id="6862773">16</span><span class="op" id="6862775">*</span><span class="num" id="6862776">16</span><span class="op" id="6862778">)</span><span class="op" id="6862779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862783">Cr</span><span class="op" id="6862785">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6862799">make</span><span class="op" id="6862803">(</span><span class="op" id="6862804">[</span><span class="op" id="6862805">]</span><span class="builtintype" id="6862806">byte</span><span class="op" id="6862810">,</span>&nbsp;<span class="num" id="6862812">16</span><span class="op" id="6862814">*</span><span class="num" id="6862815">16</span><span class="op" id="6862817">)</span><span class="op" id="6862818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862822">YStride</span><span class="op" id="6862829">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6862838">16</span><span class="op" id="6862840">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862844">CStride</span><span class="op" id="6862851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6862860">16</span><span class="op" id="6862862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862866">SubsampleRatio</span><span class="op" id="6862880">:</span>&nbsp;<span class="ident" id="6862882">image</span><span class="op" id="6862887">.</span><span class="ident" id="6862888">YCbCrSubsampleRatio444</span><span class="op" id="6862910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6862914">Rect</span><span class="op" id="6862918">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6862930">image</span><span class="op" id="6862935">.</span><span class="ident" id="6862936">Rect</span><span class="op" id="6862940">(</span><span class="num" id="6862941">0</span><span class="op" id="6862942">,</span>&nbsp;<span class="num" id="6862944">0</span><span class="op" id="6862945">,</span>&nbsp;<span class="num" id="6862947">16</span><span class="op" id="6862949">,</span>&nbsp;<span class="num" id="6862951">16</span><span class="op" id="6862953">)</span><span class="op" id="6862954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6862957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862960">for</span>&nbsp;<span class="ident" id="6862964">y</span>&nbsp;<span class="op" id="6862966">:=</span>&nbsp;<span class="num" id="6862969">0</span><span class="op" id="6862970">;</span>&nbsp;<span class="ident" id="6862972">y</span>&nbsp;<span class="op" id="6862974">&lt;</span>&nbsp;<span class="num" id="6862976">16</span><span class="op" id="6862978">;</span>&nbsp;<span class="ident" id="6862980">y</span><span class="op" id="6862981">++</span>&nbsp;<span class="op" id="6862984">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6862988">for</span>&nbsp;<span class="ident" id="6862992">x</span>&nbsp;<span class="op" id="6862994">:=</span>&nbsp;<span class="num" id="6862997">0</span><span class="op" id="6862998">;</span>&nbsp;<span class="ident" id="6863000">x</span>&nbsp;<span class="op" id="6863002">&lt;</span>&nbsp;<span class="num" id="6863004">16</span><span class="op" id="6863006">;</span>&nbsp;<span class="ident" id="6863008">x</span><span class="op" id="6863009">++</span>&nbsp;<span class="op" id="6863012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863017">m</span><span class="op" id="6863018">.</span><span class="ident" id="6863019">Cr</span><span class="op" id="6863021">[</span><span class="ident" id="6863022">y</span><span class="op" id="6863023">*</span><span class="ident" id="6863024">m</span><span class="op" id="6863025">.</span><span class="ident" id="6863026">CStride</span><span class="op" id="6863033">+</span><span class="ident" id="6863034">x</span><span class="op" id="6863035">]</span>&nbsp;<span class="op" id="6863037">=</span>&nbsp;<span class="builtintype" id="6863039">uint8</span><span class="op" id="6863044">(</span><span class="ident" id="6863045">y</span>&nbsp;<span class="op" id="6863047">*</span>&nbsp;<span class="num" id="6863049">0x11</span><span class="op" id="6863053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863063">return</span>&nbsp;<span class="ident" id="6863070">m</span><br>
<span class="lineno">75</span><span class="op" id="6863072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6863075">func</span>&nbsp;<span class="ident" id="6863080">hgradRed</span><span class="op" id="6863088">(</span><span class="ident" id="6863089">alpha</span>&nbsp;<span class="builtintype" id="6863095">int</span><span class="op" id="6863098">)</span>&nbsp;<span class="ident" id="6863100">Image</span>&nbsp;<span class="op" id="6863106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863109">m</span>&nbsp;<span class="op" id="6863111">:=</span>&nbsp;<span class="ident" id="6863114">image</span><span class="op" id="6863119">.</span><span class="ident" id="6863120">NewRGBA</span><span class="op" id="6863127">(</span><span class="ident" id="6863128">image</span><span class="op" id="6863133">.</span><span class="ident" id="6863134">Rect</span><span class="op" id="6863138">(</span><span class="num" id="6863139">0</span><span class="op" id="6863140">,</span>&nbsp;<span class="num" id="6863142">0</span><span class="op" id="6863143">,</span>&nbsp;<span class="num" id="6863145">16</span><span class="op" id="6863147">,</span>&nbsp;<span class="num" id="6863149">16</span><span class="op" id="6863151">)</span><span class="op" id="6863152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863155">for</span>&nbsp;<span class="ident" id="6863159">y</span>&nbsp;<span class="op" id="6863161">:=</span>&nbsp;<span class="num" id="6863164">0</span><span class="op" id="6863165">;</span>&nbsp;<span class="ident" id="6863167">y</span>&nbsp;<span class="op" id="6863169">&lt;</span>&nbsp;<span class="num" id="6863171">16</span><span class="op" id="6863173">;</span>&nbsp;<span class="ident" id="6863175">y</span><span class="op" id="6863176">++</span>&nbsp;<span class="op" id="6863179">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863183">for</span>&nbsp;<span class="ident" id="6863187">x</span>&nbsp;<span class="op" id="6863189">:=</span>&nbsp;<span class="num" id="6863192">0</span><span class="op" id="6863193">;</span>&nbsp;<span class="ident" id="6863195">x</span>&nbsp;<span class="op" id="6863197">&lt;</span>&nbsp;<span class="num" id="6863199">16</span><span class="op" id="6863201">;</span>&nbsp;<span class="ident" id="6863203">x</span><span class="op" id="6863204">++</span>&nbsp;<span class="op" id="6863207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863212">m</span><span class="op" id="6863213">.</span><span class="ident" id="6863214">Set</span><span class="op" id="6863217">(</span><span class="ident" id="6863218">x</span><span class="op" id="6863219">,</span>&nbsp;<span class="ident" id="6863221">y</span><span class="op" id="6863222">,</span>&nbsp;<span class="ident" id="6863224">color</span><span class="op" id="6863229">.</span><span class="ident" id="6863230">RGBA</span><span class="op" id="6863234">{</span><span class="builtintype" id="6863235">uint8</span><span class="op" id="6863240">(</span><span class="ident" id="6863241">x</span>&nbsp;<span class="op" id="6863243">*</span>&nbsp;<span class="ident" id="6863245">alpha</span>&nbsp;<span class="op" id="6863251">/</span>&nbsp;<span class="num" id="6863253">15</span><span class="op" id="6863255">)</span><span class="op" id="6863256">,</span>&nbsp;<span class="num" id="6863258">0</span><span class="op" id="6863259">,</span>&nbsp;<span class="num" id="6863261">0</span><span class="op" id="6863262">,</span>&nbsp;<span class="builtintype" id="6863264">uint8</span><span class="op" id="6863269">(</span><span class="ident" id="6863270">alpha</span><span class="op" id="6863275">)</span><span class="op" id="6863276">}</span><span class="op" id="6863277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863287">return</span>&nbsp;<span class="ident" id="6863294">m</span><br>
<span class="lineno">85</span><span class="op" id="6863296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6863299">func</span>&nbsp;<span class="ident" id="6863304">gradYellow</span><span class="op" id="6863314">(</span><span class="ident" id="6863315">alpha</span>&nbsp;<span class="builtintype" id="6863321">int</span><span class="op" id="6863324">)</span>&nbsp;<span class="ident" id="6863326">Image</span>&nbsp;<span class="op" id="6863332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863335">m</span>&nbsp;<span class="op" id="6863337">:=</span>&nbsp;<span class="ident" id="6863340">image</span><span class="op" id="6863345">.</span><span class="ident" id="6863346">NewRGBA</span><span class="op" id="6863353">(</span><span class="ident" id="6863354">image</span><span class="op" id="6863359">.</span><span class="ident" id="6863360">Rect</span><span class="op" id="6863364">(</span><span class="num" id="6863365">0</span><span class="op" id="6863366">,</span>&nbsp;<span class="num" id="6863368">0</span><span class="op" id="6863369">,</span>&nbsp;<span class="num" id="6863371">16</span><span class="op" id="6863373">,</span>&nbsp;<span class="num" id="6863375">16</span><span class="op" id="6863377">)</span><span class="op" id="6863378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863381">for</span>&nbsp;<span class="ident" id="6863385">y</span>&nbsp;<span class="op" id="6863387">:=</span>&nbsp;<span class="num" id="6863390">0</span><span class="op" id="6863391">;</span>&nbsp;<span class="ident" id="6863393">y</span>&nbsp;<span class="op" id="6863395">&lt;</span>&nbsp;<span class="num" id="6863397">16</span><span class="op" id="6863399">;</span>&nbsp;<span class="ident" id="6863401">y</span><span class="op" id="6863402">++</span>&nbsp;<span class="op" id="6863405">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863409">for</span>&nbsp;<span class="ident" id="6863413">x</span>&nbsp;<span class="op" id="6863415">:=</span>&nbsp;<span class="num" id="6863418">0</span><span class="op" id="6863419">;</span>&nbsp;<span class="ident" id="6863421">x</span>&nbsp;<span class="op" id="6863423">&lt;</span>&nbsp;<span class="num" id="6863425">16</span><span class="op" id="6863427">;</span>&nbsp;<span class="ident" id="6863429">x</span><span class="op" id="6863430">++</span>&nbsp;<span class="op" id="6863433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863438">m</span><span class="op" id="6863439">.</span><span class="ident" id="6863440">Set</span><span class="op" id="6863443">(</span><span class="ident" id="6863444">x</span><span class="op" id="6863445">,</span>&nbsp;<span class="ident" id="6863447">y</span><span class="op" id="6863448">,</span>&nbsp;<span class="ident" id="6863450">color</span><span class="op" id="6863455">.</span><span class="ident" id="6863456">RGBA</span><span class="op" id="6863460">{</span><span class="builtintype" id="6863461">uint8</span><span class="op" id="6863466">(</span><span class="ident" id="6863467">x</span>&nbsp;<span class="op" id="6863469">*</span>&nbsp;<span class="ident" id="6863471">alpha</span>&nbsp;<span class="op" id="6863477">/</span>&nbsp;<span class="num" id="6863479">15</span><span class="op" id="6863481">)</span><span class="op" id="6863482">,</span>&nbsp;<span class="builtintype" id="6863484">uint8</span><span class="op" id="6863489">(</span><span class="ident" id="6863490">y</span>&nbsp;<span class="op" id="6863492">*</span>&nbsp;<span class="ident" id="6863494">alpha</span>&nbsp;<span class="op" id="6863500">/</span>&nbsp;<span class="num" id="6863502">15</span><span class="op" id="6863504">)</span><span class="op" id="6863505">,</span>&nbsp;<span class="num" id="6863507">0</span><span class="op" id="6863508">,</span>&nbsp;<span class="builtintype" id="6863510">uint8</span><span class="op" id="6863515">(</span><span class="ident" id="6863516">alpha</span><span class="op" id="6863521">)</span><span class="op" id="6863522">}</span><span class="op" id="6863523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6863533">return</span>&nbsp;<span class="ident" id="6863540">m</span><br>
<span class="lineno">95</span><span class="op" id="6863542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6863545">type</span>&nbsp;<span class="ident" id="6863550">drawTest</span>&nbsp;<span class="keyword" id="6863559">struct</span>&nbsp;<span class="op" id="6863566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863569">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6863578">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863586">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863595">image</span><span class="op" id="6863600">.</span><span class="ident" id="6863601">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863608">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863617">image</span><span class="op" id="6863622">.</span><span class="ident" id="6863623">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863630">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6863639">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6863643">expected</span>&nbsp;<span class="ident" id="6863652">color</span><span class="op" id="6863657">.</span><span class="ident" id="6863658">Color</span><br>
<span class="lineno"></span><span class="op" id="6863664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6863667">var</span>&nbsp;<span class="ident" id="6863671">drawTests</span>&nbsp;<span class="op" id="6863681">=</span>&nbsp;<span class="op" id="6863683">[</span><span class="op" id="6863684">]</span><span class="ident" id="6863685">drawTest</span><span class="op" id="6863693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863696">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863726">{</span><span class="string" id="6863727">&#34;nop&#34;</span><span class="op" id="6863732">,</span>&nbsp;<span class="ident" id="6863734">vgradGreen</span><span class="op" id="6863744">(</span><span class="num" id="6863745">255</span><span class="op" id="6863748">)</span><span class="op" id="6863749">,</span>&nbsp;<span class="ident" id="6863751">fillAlpha</span><span class="op" id="6863760">(</span><span class="num" id="6863761">0</span><span class="op" id="6863762">)</span><span class="op" id="6863763">,</span>&nbsp;<span class="ident" id="6863765">Over</span><span class="op" id="6863769">,</span>&nbsp;<span class="ident" id="6863771">color</span><span class="op" id="6863776">.</span><span class="ident" id="6863777">RGBA</span><span class="op" id="6863781">{</span><span class="num" id="6863782">136</span><span class="op" id="6863785">,</span>&nbsp;<span class="num" id="6863787">0</span><span class="op" id="6863788">,</span>&nbsp;<span class="num" id="6863790">0</span><span class="op" id="6863791">,</span>&nbsp;<span class="num" id="6863793">255</span><span class="op" id="6863796">}</span><span class="op" id="6863797">}</span><span class="op" id="6863798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6863801">{</span><span class="string" id="6863802">&#34;clear&#34;</span><span class="op" id="6863809">,</span>&nbsp;<span class="ident" id="6863811">vgradGreen</span><span class="op" id="6863821">(</span><span class="num" id="6863822">255</span><span class="op" id="6863825">)</span><span class="op" id="6863826">,</span>&nbsp;<span class="ident" id="6863828">fillAlpha</span><span class="op" id="6863837">(</span><span class="num" id="6863838">0</span><span class="op" id="6863839">)</span><span class="op" id="6863840">,</span>&nbsp;<span class="ident" id="6863842">Src</span><span class="op" id="6863845">,</span>&nbsp;<span class="ident" id="6863847">color</span><span class="op" id="6863852">.</span><span class="ident" id="6863853">RGBA</span><span class="op" id="6863857">{</span><span class="num" id="6863858">0</span><span class="op" id="6863859">,</span>&nbsp;<span class="num" id="6863861">0</span><span class="op" id="6863862">,</span>&nbsp;<span class="num" id="6863864">0</span><span class="op" id="6863865">,</span>&nbsp;<span class="num" id="6863867">0</span><span class="op" id="6863868">}</span><span class="op" id="6863869">}</span><span class="op" id="6863870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863873">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863927">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863952">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6863999">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864039">{</span><span class="string" id="6864040">&#34;fill&#34;</span><span class="op" id="6864046">,</span>&nbsp;<span class="ident" id="6864048">fillBlue</span><span class="op" id="6864056">(</span><span class="num" id="6864057">90</span><span class="op" id="6864059">)</span><span class="op" id="6864060">,</span>&nbsp;<span class="ident" id="6864062">fillAlpha</span><span class="op" id="6864071">(</span><span class="num" id="6864072">255</span><span class="op" id="6864075">)</span><span class="op" id="6864076">,</span>&nbsp;<span class="ident" id="6864078">Over</span><span class="op" id="6864082">,</span>&nbsp;<span class="ident" id="6864084">color</span><span class="op" id="6864089">.</span><span class="ident" id="6864090">RGBA</span><span class="op" id="6864094">{</span><span class="num" id="6864095">88</span><span class="op" id="6864097">,</span>&nbsp;<span class="num" id="6864099">0</span><span class="op" id="6864100">,</span>&nbsp;<span class="num" id="6864102">90</span><span class="op" id="6864104">,</span>&nbsp;<span class="num" id="6864106">255</span><span class="op" id="6864109">}</span><span class="op" id="6864110">}</span><span class="op" id="6864111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864114">{</span><span class="string" id="6864115">&#34;fillSrc&#34;</span><span class="op" id="6864124">,</span>&nbsp;<span class="ident" id="6864126">fillBlue</span><span class="op" id="6864134">(</span><span class="num" id="6864135">90</span><span class="op" id="6864137">)</span><span class="op" id="6864138">,</span>&nbsp;<span class="ident" id="6864140">fillAlpha</span><span class="op" id="6864149">(</span><span class="num" id="6864150">255</span><span class="op" id="6864153">)</span><span class="op" id="6864154">,</span>&nbsp;<span class="ident" id="6864156">Src</span><span class="op" id="6864159">,</span>&nbsp;<span class="ident" id="6864161">color</span><span class="op" id="6864166">.</span><span class="ident" id="6864167">RGBA</span><span class="op" id="6864171">{</span><span class="num" id="6864172">0</span><span class="op" id="6864173">,</span>&nbsp;<span class="num" id="6864175">0</span><span class="op" id="6864176">,</span>&nbsp;<span class="num" id="6864178">90</span><span class="op" id="6864180">,</span>&nbsp;<span class="num" id="6864182">90</span><span class="op" id="6864184">}</span><span class="op" id="6864185">}</span><span class="op" id="6864186">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864189">{</span><span class="string" id="6864190">&#34;fillAlpha&#34;</span><span class="op" id="6864201">,</span>&nbsp;<span class="ident" id="6864203">fillBlue</span><span class="op" id="6864211">(</span><span class="num" id="6864212">90</span><span class="op" id="6864214">)</span><span class="op" id="6864215">,</span>&nbsp;<span class="ident" id="6864217">fillAlpha</span><span class="op" id="6864226">(</span><span class="num" id="6864227">192</span><span class="op" id="6864230">)</span><span class="op" id="6864231">,</span>&nbsp;<span class="ident" id="6864233">Over</span><span class="op" id="6864237">,</span>&nbsp;<span class="ident" id="6864239">color</span><span class="op" id="6864244">.</span><span class="ident" id="6864245">RGBA</span><span class="op" id="6864249">{</span><span class="num" id="6864250">100</span><span class="op" id="6864253">,</span>&nbsp;<span class="num" id="6864255">0</span><span class="op" id="6864256">,</span>&nbsp;<span class="num" id="6864258">68</span><span class="op" id="6864260">,</span>&nbsp;<span class="num" id="6864262">255</span><span class="op" id="6864265">}</span><span class="op" id="6864266">}</span><span class="op" id="6864267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864270">{</span><span class="string" id="6864271">&#34;fillAlphaSrc&#34;</span><span class="op" id="6864285">,</span>&nbsp;<span class="ident" id="6864287">fillBlue</span><span class="op" id="6864295">(</span><span class="num" id="6864296">90</span><span class="op" id="6864298">)</span><span class="op" id="6864299">,</span>&nbsp;<span class="ident" id="6864301">fillAlpha</span><span class="op" id="6864310">(</span><span class="num" id="6864311">192</span><span class="op" id="6864314">)</span><span class="op" id="6864315">,</span>&nbsp;<span class="ident" id="6864317">Src</span><span class="op" id="6864320">,</span>&nbsp;<span class="ident" id="6864322">color</span><span class="op" id="6864327">.</span><span class="ident" id="6864328">RGBA</span><span class="op" id="6864332">{</span><span class="num" id="6864333">0</span><span class="op" id="6864334">,</span>&nbsp;<span class="num" id="6864336">0</span><span class="op" id="6864337">,</span>&nbsp;<span class="num" id="6864339">68</span><span class="op" id="6864341">,</span>&nbsp;<span class="num" id="6864343">68</span><span class="op" id="6864345">}</span><span class="op" id="6864346">}</span><span class="op" id="6864347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864350">{</span><span class="string" id="6864351">&#34;fillNil&#34;</span><span class="op" id="6864360">,</span>&nbsp;<span class="ident" id="6864362">fillBlue</span><span class="op" id="6864370">(</span><span class="num" id="6864371">90</span><span class="op" id="6864373">)</span><span class="op" id="6864374">,</span>&nbsp;<span class="ident" id="6864376">nil</span><span class="op" id="6864379">,</span>&nbsp;<span class="ident" id="6864381">Over</span><span class="op" id="6864385">,</span>&nbsp;<span class="ident" id="6864387">color</span><span class="op" id="6864392">.</span><span class="ident" id="6864393">RGBA</span><span class="op" id="6864397">{</span><span class="num" id="6864398">88</span><span class="op" id="6864400">,</span>&nbsp;<span class="num" id="6864402">0</span><span class="op" id="6864403">,</span>&nbsp;<span class="num" id="6864405">90</span><span class="op" id="6864407">,</span>&nbsp;<span class="num" id="6864409">255</span><span class="op" id="6864412">}</span><span class="op" id="6864413">}</span><span class="op" id="6864414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864417">{</span><span class="string" id="6864418">&#34;fillNilSrc&#34;</span><span class="op" id="6864430">,</span>&nbsp;<span class="ident" id="6864432">fillBlue</span><span class="op" id="6864440">(</span><span class="num" id="6864441">90</span><span class="op" id="6864443">)</span><span class="op" id="6864444">,</span>&nbsp;<span class="ident" id="6864446">nil</span><span class="op" id="6864449">,</span>&nbsp;<span class="ident" id="6864451">Src</span><span class="op" id="6864454">,</span>&nbsp;<span class="ident" id="6864456">color</span><span class="op" id="6864461">.</span><span class="ident" id="6864462">RGBA</span><span class="op" id="6864466">{</span><span class="num" id="6864467">0</span><span class="op" id="6864468">,</span>&nbsp;<span class="num" id="6864470">0</span><span class="op" id="6864471">,</span>&nbsp;<span class="num" id="6864473">90</span><span class="op" id="6864475">,</span>&nbsp;<span class="num" id="6864477">90</span><span class="op" id="6864479">}</span><span class="op" id="6864480">}</span><span class="op" id="6864481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6864484">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6864539">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6864564">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6864611">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864651">{</span><span class="string" id="6864652">&#34;copy&#34;</span><span class="op" id="6864658">,</span>&nbsp;<span class="ident" id="6864660">vgradGreen</span><span class="op" id="6864670">(</span><span class="num" id="6864671">90</span><span class="op" id="6864673">)</span><span class="op" id="6864674">,</span>&nbsp;<span class="ident" id="6864676">fillAlpha</span><span class="op" id="6864685">(</span><span class="num" id="6864686">255</span><span class="op" id="6864689">)</span><span class="op" id="6864690">,</span>&nbsp;<span class="ident" id="6864692">Over</span><span class="op" id="6864696">,</span>&nbsp;<span class="ident" id="6864698">color</span><span class="op" id="6864703">.</span><span class="ident" id="6864704">RGBA</span><span class="op" id="6864708">{</span><span class="num" id="6864709">88</span><span class="op" id="6864711">,</span>&nbsp;<span class="num" id="6864713">48</span><span class="op" id="6864715">,</span>&nbsp;<span class="num" id="6864717">0</span><span class="op" id="6864718">,</span>&nbsp;<span class="num" id="6864720">255</span><span class="op" id="6864723">}</span><span class="op" id="6864724">}</span><span class="op" id="6864725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864728">{</span><span class="string" id="6864729">&#34;copySrc&#34;</span><span class="op" id="6864738">,</span>&nbsp;<span class="ident" id="6864740">vgradGreen</span><span class="op" id="6864750">(</span><span class="num" id="6864751">90</span><span class="op" id="6864753">)</span><span class="op" id="6864754">,</span>&nbsp;<span class="ident" id="6864756">fillAlpha</span><span class="op" id="6864765">(</span><span class="num" id="6864766">255</span><span class="op" id="6864769">)</span><span class="op" id="6864770">,</span>&nbsp;<span class="ident" id="6864772">Src</span><span class="op" id="6864775">,</span>&nbsp;<span class="ident" id="6864777">color</span><span class="op" id="6864782">.</span><span class="ident" id="6864783">RGBA</span><span class="op" id="6864787">{</span><span class="num" id="6864788">0</span><span class="op" id="6864789">,</span>&nbsp;<span class="num" id="6864791">48</span><span class="op" id="6864793">,</span>&nbsp;<span class="num" id="6864795">0</span><span class="op" id="6864796">,</span>&nbsp;<span class="num" id="6864798">90</span><span class="op" id="6864800">}</span><span class="op" id="6864801">}</span><span class="op" id="6864802">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864805">{</span><span class="string" id="6864806">&#34;copyAlpha&#34;</span><span class="op" id="6864817">,</span>&nbsp;<span class="ident" id="6864819">vgradGreen</span><span class="op" id="6864829">(</span><span class="num" id="6864830">90</span><span class="op" id="6864832">)</span><span class="op" id="6864833">,</span>&nbsp;<span class="ident" id="6864835">fillAlpha</span><span class="op" id="6864844">(</span><span class="num" id="6864845">192</span><span class="op" id="6864848">)</span><span class="op" id="6864849">,</span>&nbsp;<span class="ident" id="6864851">Over</span><span class="op" id="6864855">,</span>&nbsp;<span class="ident" id="6864857">color</span><span class="op" id="6864862">.</span><span class="ident" id="6864863">RGBA</span><span class="op" id="6864867">{</span><span class="num" id="6864868">100</span><span class="op" id="6864871">,</span>&nbsp;<span class="num" id="6864873">36</span><span class="op" id="6864875">,</span>&nbsp;<span class="num" id="6864877">0</span><span class="op" id="6864878">,</span>&nbsp;<span class="num" id="6864880">255</span><span class="op" id="6864883">}</span><span class="op" id="6864884">}</span><span class="op" id="6864885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864888">{</span><span class="string" id="6864889">&#34;copyAlphaSrc&#34;</span><span class="op" id="6864903">,</span>&nbsp;<span class="ident" id="6864905">vgradGreen</span><span class="op" id="6864915">(</span><span class="num" id="6864916">90</span><span class="op" id="6864918">)</span><span class="op" id="6864919">,</span>&nbsp;<span class="ident" id="6864921">fillAlpha</span><span class="op" id="6864930">(</span><span class="num" id="6864931">192</span><span class="op" id="6864934">)</span><span class="op" id="6864935">,</span>&nbsp;<span class="ident" id="6864937">Src</span><span class="op" id="6864940">,</span>&nbsp;<span class="ident" id="6864942">color</span><span class="op" id="6864947">.</span><span class="ident" id="6864948">RGBA</span><span class="op" id="6864952">{</span><span class="num" id="6864953">0</span><span class="op" id="6864954">,</span>&nbsp;<span class="num" id="6864956">36</span><span class="op" id="6864958">,</span>&nbsp;<span class="num" id="6864960">0</span><span class="op" id="6864961">,</span>&nbsp;<span class="num" id="6864963">68</span><span class="op" id="6864965">}</span><span class="op" id="6864966">}</span><span class="op" id="6864967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6864970">{</span><span class="string" id="6864971">&#34;copyNil&#34;</span><span class="op" id="6864980">,</span>&nbsp;<span class="ident" id="6864982">vgradGreen</span><span class="op" id="6864992">(</span><span class="num" id="6864993">90</span><span class="op" id="6864995">)</span><span class="op" id="6864996">,</span>&nbsp;<span class="ident" id="6864998">nil</span><span class="op" id="6865001">,</span>&nbsp;<span class="ident" id="6865003">Over</span><span class="op" id="6865007">,</span>&nbsp;<span class="ident" id="6865009">color</span><span class="op" id="6865014">.</span><span class="ident" id="6865015">RGBA</span><span class="op" id="6865019">{</span><span class="num" id="6865020">88</span><span class="op" id="6865022">,</span>&nbsp;<span class="num" id="6865024">48</span><span class="op" id="6865026">,</span>&nbsp;<span class="num" id="6865028">0</span><span class="op" id="6865029">,</span>&nbsp;<span class="num" id="6865031">255</span><span class="op" id="6865034">}</span><span class="op" id="6865035">}</span><span class="op" id="6865036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865039">{</span><span class="string" id="6865040">&#34;copyNilSrc&#34;</span><span class="op" id="6865052">,</span>&nbsp;<span class="ident" id="6865054">vgradGreen</span><span class="op" id="6865064">(</span><span class="num" id="6865065">90</span><span class="op" id="6865067">)</span><span class="op" id="6865068">,</span>&nbsp;<span class="ident" id="6865070">nil</span><span class="op" id="6865073">,</span>&nbsp;<span class="ident" id="6865075">Src</span><span class="op" id="6865078">,</span>&nbsp;<span class="ident" id="6865080">color</span><span class="op" id="6865085">.</span><span class="ident" id="6865086">RGBA</span><span class="op" id="6865090">{</span><span class="num" id="6865091">0</span><span class="op" id="6865092">,</span>&nbsp;<span class="num" id="6865094">48</span><span class="op" id="6865096">,</span>&nbsp;<span class="num" id="6865098">0</span><span class="op" id="6865099">,</span>&nbsp;<span class="num" id="6865101">90</span><span class="op" id="6865103">}</span><span class="op" id="6865104">}</span><span class="op" id="6865105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865108">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865169">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865194">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865241">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865336">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865429">{</span><span class="string" id="6865430">&#34;nrgba&#34;</span><span class="op" id="6865437">,</span>&nbsp;<span class="ident" id="6865439">vgradGreenNRGBA</span><span class="op" id="6865454">(</span><span class="num" id="6865455">90</span><span class="op" id="6865457">)</span><span class="op" id="6865458">,</span>&nbsp;<span class="ident" id="6865460">fillAlpha</span><span class="op" id="6865469">(</span><span class="num" id="6865470">255</span><span class="op" id="6865473">)</span><span class="op" id="6865474">,</span>&nbsp;<span class="ident" id="6865476">Over</span><span class="op" id="6865480">,</span>&nbsp;<span class="ident" id="6865482">color</span><span class="op" id="6865487">.</span><span class="ident" id="6865488">RGBA</span><span class="op" id="6865492">{</span><span class="num" id="6865493">88</span><span class="op" id="6865495">,</span>&nbsp;<span class="num" id="6865497">46</span><span class="op" id="6865499">,</span>&nbsp;<span class="num" id="6865501">0</span><span class="op" id="6865502">,</span>&nbsp;<span class="num" id="6865504">255</span><span class="op" id="6865507">}</span><span class="op" id="6865508">}</span><span class="op" id="6865509">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865512">{</span><span class="string" id="6865513">&#34;nrgbaSrc&#34;</span><span class="op" id="6865523">,</span>&nbsp;<span class="ident" id="6865525">vgradGreenNRGBA</span><span class="op" id="6865540">(</span><span class="num" id="6865541">90</span><span class="op" id="6865543">)</span><span class="op" id="6865544">,</span>&nbsp;<span class="ident" id="6865546">fillAlpha</span><span class="op" id="6865555">(</span><span class="num" id="6865556">255</span><span class="op" id="6865559">)</span><span class="op" id="6865560">,</span>&nbsp;<span class="ident" id="6865562">Src</span><span class="op" id="6865565">,</span>&nbsp;<span class="ident" id="6865567">color</span><span class="op" id="6865572">.</span><span class="ident" id="6865573">RGBA</span><span class="op" id="6865577">{</span><span class="num" id="6865578">0</span><span class="op" id="6865579">,</span>&nbsp;<span class="num" id="6865581">46</span><span class="op" id="6865583">,</span>&nbsp;<span class="num" id="6865585">0</span><span class="op" id="6865586">,</span>&nbsp;<span class="num" id="6865588">90</span><span class="op" id="6865590">}</span><span class="op" id="6865591">}</span><span class="op" id="6865592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865595">{</span><span class="string" id="6865596">&#34;nrgbaAlpha&#34;</span><span class="op" id="6865608">,</span>&nbsp;<span class="ident" id="6865610">vgradGreenNRGBA</span><span class="op" id="6865625">(</span><span class="num" id="6865626">90</span><span class="op" id="6865628">)</span><span class="op" id="6865629">,</span>&nbsp;<span class="ident" id="6865631">fillAlpha</span><span class="op" id="6865640">(</span><span class="num" id="6865641">192</span><span class="op" id="6865644">)</span><span class="op" id="6865645">,</span>&nbsp;<span class="ident" id="6865647">Over</span><span class="op" id="6865651">,</span>&nbsp;<span class="ident" id="6865653">color</span><span class="op" id="6865658">.</span><span class="ident" id="6865659">RGBA</span><span class="op" id="6865663">{</span><span class="num" id="6865664">100</span><span class="op" id="6865667">,</span>&nbsp;<span class="num" id="6865669">34</span><span class="op" id="6865671">,</span>&nbsp;<span class="num" id="6865673">0</span><span class="op" id="6865674">,</span>&nbsp;<span class="num" id="6865676">255</span><span class="op" id="6865679">}</span><span class="op" id="6865680">}</span><span class="op" id="6865681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865684">{</span><span class="string" id="6865685">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="6865700">,</span>&nbsp;<span class="ident" id="6865702">vgradGreenNRGBA</span><span class="op" id="6865717">(</span><span class="num" id="6865718">90</span><span class="op" id="6865720">)</span><span class="op" id="6865721">,</span>&nbsp;<span class="ident" id="6865723">fillAlpha</span><span class="op" id="6865732">(</span><span class="num" id="6865733">192</span><span class="op" id="6865736">)</span><span class="op" id="6865737">,</span>&nbsp;<span class="ident" id="6865739">Src</span><span class="op" id="6865742">,</span>&nbsp;<span class="ident" id="6865744">color</span><span class="op" id="6865749">.</span><span class="ident" id="6865750">RGBA</span><span class="op" id="6865754">{</span><span class="num" id="6865755">0</span><span class="op" id="6865756">,</span>&nbsp;<span class="num" id="6865758">34</span><span class="op" id="6865760">,</span>&nbsp;<span class="num" id="6865762">0</span><span class="op" id="6865763">,</span>&nbsp;<span class="num" id="6865765">68</span><span class="op" id="6865767">}</span><span class="op" id="6865768">}</span><span class="op" id="6865769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865772">{</span><span class="string" id="6865773">&#34;nrgbaNil&#34;</span><span class="op" id="6865783">,</span>&nbsp;<span class="ident" id="6865785">vgradGreenNRGBA</span><span class="op" id="6865800">(</span><span class="num" id="6865801">90</span><span class="op" id="6865803">)</span><span class="op" id="6865804">,</span>&nbsp;<span class="ident" id="6865806">nil</span><span class="op" id="6865809">,</span>&nbsp;<span class="ident" id="6865811">Over</span><span class="op" id="6865815">,</span>&nbsp;<span class="ident" id="6865817">color</span><span class="op" id="6865822">.</span><span class="ident" id="6865823">RGBA</span><span class="op" id="6865827">{</span><span class="num" id="6865828">88</span><span class="op" id="6865830">,</span>&nbsp;<span class="num" id="6865832">46</span><span class="op" id="6865834">,</span>&nbsp;<span class="num" id="6865836">0</span><span class="op" id="6865837">,</span>&nbsp;<span class="num" id="6865839">255</span><span class="op" id="6865842">}</span><span class="op" id="6865843">}</span><span class="op" id="6865844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6865847">{</span><span class="string" id="6865848">&#34;nrgbaNilSrc&#34;</span><span class="op" id="6865861">,</span>&nbsp;<span class="ident" id="6865863">vgradGreenNRGBA</span><span class="op" id="6865878">(</span><span class="num" id="6865879">90</span><span class="op" id="6865881">)</span><span class="op" id="6865882">,</span>&nbsp;<span class="ident" id="6865884">nil</span><span class="op" id="6865887">,</span>&nbsp;<span class="ident" id="6865889">Src</span><span class="op" id="6865892">,</span>&nbsp;<span class="ident" id="6865894">color</span><span class="op" id="6865899">.</span><span class="ident" id="6865900">RGBA</span><span class="op" id="6865904">{</span><span class="num" id="6865905">0</span><span class="op" id="6865906">,</span>&nbsp;<span class="num" id="6865908">46</span><span class="op" id="6865910">,</span>&nbsp;<span class="num" id="6865912">0</span><span class="op" id="6865913">,</span>&nbsp;<span class="num" id="6865915">90</span><span class="op" id="6865917">}</span><span class="op" id="6865918">}</span><span class="op" id="6865919">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865922">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6865983">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866008">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866055">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866147">{</span><span class="string" id="6866148">&#34;ycbcr&#34;</span><span class="op" id="6866155">,</span>&nbsp;<span class="ident" id="6866157">vgradCr</span><span class="op" id="6866164">(</span><span class="op" id="6866165">)</span><span class="op" id="6866166">,</span>&nbsp;<span class="ident" id="6866168">fillAlpha</span><span class="op" id="6866177">(</span><span class="num" id="6866178">255</span><span class="op" id="6866181">)</span><span class="op" id="6866182">,</span>&nbsp;<span class="ident" id="6866184">Over</span><span class="op" id="6866188">,</span>&nbsp;<span class="ident" id="6866190">color</span><span class="op" id="6866195">.</span><span class="ident" id="6866196">RGBA</span><span class="op" id="6866200">{</span><span class="num" id="6866201">11</span><span class="op" id="6866203">,</span>&nbsp;<span class="num" id="6866205">38</span><span class="op" id="6866207">,</span>&nbsp;<span class="num" id="6866209">0</span><span class="op" id="6866210">,</span>&nbsp;<span class="num" id="6866212">255</span><span class="op" id="6866215">}</span><span class="op" id="6866216">}</span><span class="op" id="6866217">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866220">{</span><span class="string" id="6866221">&#34;ycbcrSrc&#34;</span><span class="op" id="6866231">,</span>&nbsp;<span class="ident" id="6866233">vgradCr</span><span class="op" id="6866240">(</span><span class="op" id="6866241">)</span><span class="op" id="6866242">,</span>&nbsp;<span class="ident" id="6866244">fillAlpha</span><span class="op" id="6866253">(</span><span class="num" id="6866254">255</span><span class="op" id="6866257">)</span><span class="op" id="6866258">,</span>&nbsp;<span class="ident" id="6866260">Src</span><span class="op" id="6866263">,</span>&nbsp;<span class="ident" id="6866265">color</span><span class="op" id="6866270">.</span><span class="ident" id="6866271">RGBA</span><span class="op" id="6866275">{</span><span class="num" id="6866276">11</span><span class="op" id="6866278">,</span>&nbsp;<span class="num" id="6866280">38</span><span class="op" id="6866282">,</span>&nbsp;<span class="num" id="6866284">0</span><span class="op" id="6866285">,</span>&nbsp;<span class="num" id="6866287">255</span><span class="op" id="6866290">}</span><span class="op" id="6866291">}</span><span class="op" id="6866292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866295">{</span><span class="string" id="6866296">&#34;ycbcrAlpha&#34;</span><span class="op" id="6866308">,</span>&nbsp;<span class="ident" id="6866310">vgradCr</span><span class="op" id="6866317">(</span><span class="op" id="6866318">)</span><span class="op" id="6866319">,</span>&nbsp;<span class="ident" id="6866321">fillAlpha</span><span class="op" id="6866330">(</span><span class="num" id="6866331">192</span><span class="op" id="6866334">)</span><span class="op" id="6866335">,</span>&nbsp;<span class="ident" id="6866337">Over</span><span class="op" id="6866341">,</span>&nbsp;<span class="ident" id="6866343">color</span><span class="op" id="6866348">.</span><span class="ident" id="6866349">RGBA</span><span class="op" id="6866353">{</span><span class="num" id="6866354">42</span><span class="op" id="6866356">,</span>&nbsp;<span class="num" id="6866358">28</span><span class="op" id="6866360">,</span>&nbsp;<span class="num" id="6866362">0</span><span class="op" id="6866363">,</span>&nbsp;<span class="num" id="6866365">255</span><span class="op" id="6866368">}</span><span class="op" id="6866369">}</span><span class="op" id="6866370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866373">{</span><span class="string" id="6866374">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="6866389">,</span>&nbsp;<span class="ident" id="6866391">vgradCr</span><span class="op" id="6866398">(</span><span class="op" id="6866399">)</span><span class="op" id="6866400">,</span>&nbsp;<span class="ident" id="6866402">fillAlpha</span><span class="op" id="6866411">(</span><span class="num" id="6866412">192</span><span class="op" id="6866415">)</span><span class="op" id="6866416">,</span>&nbsp;<span class="ident" id="6866418">Src</span><span class="op" id="6866421">,</span>&nbsp;<span class="ident" id="6866423">color</span><span class="op" id="6866428">.</span><span class="ident" id="6866429">RGBA</span><span class="op" id="6866433">{</span><span class="num" id="6866434">8</span><span class="op" id="6866435">,</span>&nbsp;<span class="num" id="6866437">28</span><span class="op" id="6866439">,</span>&nbsp;<span class="num" id="6866441">0</span><span class="op" id="6866442">,</span>&nbsp;<span class="num" id="6866444">192</span><span class="op" id="6866447">}</span><span class="op" id="6866448">}</span><span class="op" id="6866449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866452">{</span><span class="string" id="6866453">&#34;ycbcrNil&#34;</span><span class="op" id="6866463">,</span>&nbsp;<span class="ident" id="6866465">vgradCr</span><span class="op" id="6866472">(</span><span class="op" id="6866473">)</span><span class="op" id="6866474">,</span>&nbsp;<span class="ident" id="6866476">nil</span><span class="op" id="6866479">,</span>&nbsp;<span class="ident" id="6866481">Over</span><span class="op" id="6866485">,</span>&nbsp;<span class="ident" id="6866487">color</span><span class="op" id="6866492">.</span><span class="ident" id="6866493">RGBA</span><span class="op" id="6866497">{</span><span class="num" id="6866498">11</span><span class="op" id="6866500">,</span>&nbsp;<span class="num" id="6866502">38</span><span class="op" id="6866504">,</span>&nbsp;<span class="num" id="6866506">0</span><span class="op" id="6866507">,</span>&nbsp;<span class="num" id="6866509">255</span><span class="op" id="6866512">}</span><span class="op" id="6866513">}</span><span class="op" id="6866514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866517">{</span><span class="string" id="6866518">&#34;ycbcrNilSrc&#34;</span><span class="op" id="6866531">,</span>&nbsp;<span class="ident" id="6866533">vgradCr</span><span class="op" id="6866540">(</span><span class="op" id="6866541">)</span><span class="op" id="6866542">,</span>&nbsp;<span class="ident" id="6866544">nil</span><span class="op" id="6866547">,</span>&nbsp;<span class="ident" id="6866549">Src</span><span class="op" id="6866552">,</span>&nbsp;<span class="ident" id="6866554">color</span><span class="op" id="6866559">.</span><span class="ident" id="6866560">RGBA</span><span class="op" id="6866564">{</span><span class="num" id="6866565">11</span><span class="op" id="6866567">,</span>&nbsp;<span class="num" id="6866569">38</span><span class="op" id="6866571">,</span>&nbsp;<span class="num" id="6866573">0</span><span class="op" id="6866574">,</span>&nbsp;<span class="num" id="6866576">255</span><span class="op" id="6866579">}</span><span class="op" id="6866580">}</span><span class="op" id="6866581">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866584">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866623">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866648">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866695">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6866737">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866780">{</span><span class="string" id="6866781">&#34;generic&#34;</span><span class="op" id="6866790">,</span>&nbsp;<span class="ident" id="6866792">fillBlue</span><span class="op" id="6866800">(</span><span class="num" id="6866801">255</span><span class="op" id="6866804">)</span><span class="op" id="6866805">,</span>&nbsp;<span class="ident" id="6866807">vgradAlpha</span><span class="op" id="6866817">(</span><span class="num" id="6866818">192</span><span class="op" id="6866821">)</span><span class="op" id="6866822">,</span>&nbsp;<span class="ident" id="6866824">Over</span><span class="op" id="6866828">,</span>&nbsp;<span class="ident" id="6866830">color</span><span class="op" id="6866835">.</span><span class="ident" id="6866836">RGBA</span><span class="op" id="6866840">{</span><span class="num" id="6866841">81</span><span class="op" id="6866843">,</span>&nbsp;<span class="num" id="6866845">0</span><span class="op" id="6866846">,</span>&nbsp;<span class="num" id="6866848">102</span><span class="op" id="6866851">,</span>&nbsp;<span class="num" id="6866853">255</span><span class="op" id="6866856">}</span><span class="op" id="6866857">}</span><span class="op" id="6866858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6866861">{</span><span class="string" id="6866862">&#34;genericSrc&#34;</span><span class="op" id="6866874">,</span>&nbsp;<span class="ident" id="6866876">fillBlue</span><span class="op" id="6866884">(</span><span class="num" id="6866885">255</span><span class="op" id="6866888">)</span><span class="op" id="6866889">,</span>&nbsp;<span class="ident" id="6866891">vgradAlpha</span><span class="op" id="6866901">(</span><span class="num" id="6866902">192</span><span class="op" id="6866905">)</span><span class="op" id="6866906">,</span>&nbsp;<span class="ident" id="6866908">Src</span><span class="op" id="6866911">,</span>&nbsp;<span class="ident" id="6866913">color</span><span class="op" id="6866918">.</span><span class="ident" id="6866919">RGBA</span><span class="op" id="6866923">{</span><span class="num" id="6866924">0</span><span class="op" id="6866925">,</span>&nbsp;<span class="num" id="6866927">0</span><span class="op" id="6866928">,</span>&nbsp;<span class="num" id="6866930">102</span><span class="op" id="6866933">,</span>&nbsp;<span class="num" id="6866935">102</span><span class="op" id="6866938">}</span><span class="op" id="6866939">}</span><span class="op" id="6866940">,</span><br>
<span class="lineno"></span><span class="op" id="6866942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6866945">func</span>&nbsp;<span class="ident" id="6866950">makeGolden</span><span class="op" id="6866960">(</span><span class="ident" id="6866961">dst</span>&nbsp;<span class="ident" id="6866965">image</span><span class="op" id="6866970">.</span><span class="ident" id="6866971">Image</span><span class="op" id="6866976">,</span>&nbsp;<span class="ident" id="6866978">r</span>&nbsp;<span class="ident" id="6866980">image</span><span class="op" id="6866985">.</span><span class="ident" id="6866986">Rectangle</span><span class="op" id="6866995">,</span>&nbsp;<span class="ident" id="6866997">src</span>&nbsp;<span class="ident" id="6867001">image</span><span class="op" id="6867006">.</span><span class="ident" id="6867007">Image</span><span class="op" id="6867012">,</span>&nbsp;<span class="ident" id="6867014">sp</span>&nbsp;<span class="ident" id="6867017">image</span><span class="op" id="6867022">.</span><span class="ident" id="6867023">Point</span><span class="op" id="6867028">,</span>&nbsp;<span class="ident" id="6867030">mask</span>&nbsp;<span class="ident" id="6867035">image</span><span class="op" id="6867040">.</span><span class="ident" id="6867041">Image</span><span class="op" id="6867046">,</span>&nbsp;<span class="ident" id="6867048">mp</span>&nbsp;<span class="ident" id="6867051">image</span><span class="op" id="6867056">.</span><span class="ident" id="6867057">Point</span><span class="op" id="6867062">,</span>&nbsp;<span class="ident" id="6867064">op</span>&nbsp;<span class="ident" id="6867067">Op</span><span class="op" id="6867069">)</span>&nbsp;<span class="ident" id="6867071">image</span><span class="op" id="6867076">.</span><span class="ident" id="6867077">Image</span>&nbsp;<span class="op" id="6867083">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6867086">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6867161">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867231">b</span>&nbsp;<span class="op" id="6867233">:=</span>&nbsp;<span class="ident" id="6867236">dst</span><span class="op" id="6867239">.</span><span class="ident" id="6867240">Bounds</span><span class="op" id="6867246">(</span><span class="op" id="6867247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867250">sb</span>&nbsp;<span class="op" id="6867253">:=</span>&nbsp;<span class="ident" id="6867256">src</span><span class="op" id="6867259">.</span><span class="ident" id="6867260">Bounds</span><span class="op" id="6867266">(</span><span class="op" id="6867267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867270">mb</span>&nbsp;<span class="op" id="6867273">:=</span>&nbsp;<span class="ident" id="6867276">image</span><span class="op" id="6867281">.</span><span class="ident" id="6867282">Rect</span><span class="op" id="6867286">(</span><span class="op" id="6867287">-</span><span class="num" id="6867288">1e9</span><span class="op" id="6867291">,</span>&nbsp;<span class="op" id="6867293">-</span><span class="num" id="6867294">1e9</span><span class="op" id="6867297">,</span>&nbsp;<span class="num" id="6867299">1e9</span><span class="op" id="6867302">,</span>&nbsp;<span class="num" id="6867304">1e9</span><span class="op" id="6867307">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867310">if</span>&nbsp;<span class="ident" id="6867313">mask</span>&nbsp;<span class="op" id="6867318">!=</span>&nbsp;<span class="ident" id="6867321">nil</span>&nbsp;<span class="op" id="6867325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867329">mb</span>&nbsp;<span class="op" id="6867332">=</span>&nbsp;<span class="ident" id="6867334">mask</span><span class="op" id="6867338">.</span><span class="ident" id="6867339">Bounds</span><span class="op" id="6867345">(</span><span class="op" id="6867346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867352">golden</span>&nbsp;<span class="op" id="6867359">:=</span>&nbsp;<span class="ident" id="6867362">image</span><span class="op" id="6867367">.</span><span class="ident" id="6867368">NewRGBA</span><span class="op" id="6867375">(</span><span class="ident" id="6867376">image</span><span class="op" id="6867381">.</span><span class="ident" id="6867382">Rect</span><span class="op" id="6867386">(</span><span class="num" id="6867387">0</span><span class="op" id="6867388">,</span>&nbsp;<span class="num" id="6867390">0</span><span class="op" id="6867391">,</span>&nbsp;<span class="ident" id="6867393">b</span><span class="op" id="6867394">.</span><span class="ident" id="6867395">Max</span><span class="op" id="6867398">.</span><span class="ident" id="6867399">X</span><span class="op" id="6867400">,</span>&nbsp;<span class="ident" id="6867402">b</span><span class="op" id="6867403">.</span><span class="ident" id="6867404">Max</span><span class="op" id="6867407">.</span><span class="ident" id="6867408">Y</span><span class="op" id="6867409">)</span><span class="op" id="6867410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867413">for</span>&nbsp;<span class="ident" id="6867417">y</span>&nbsp;<span class="op" id="6867419">:=</span>&nbsp;<span class="ident" id="6867422">r</span><span class="op" id="6867423">.</span><span class="ident" id="6867424">Min</span><span class="op" id="6867427">.</span><span class="ident" id="6867428">Y</span><span class="op" id="6867429">;</span>&nbsp;<span class="ident" id="6867431">y</span>&nbsp;<span class="op" id="6867433">&lt;</span>&nbsp;<span class="ident" id="6867435">r</span><span class="op" id="6867436">.</span><span class="ident" id="6867437">Max</span><span class="op" id="6867440">.</span><span class="ident" id="6867441">Y</span><span class="op" id="6867442">;</span>&nbsp;<span class="ident" id="6867444">y</span><span class="op" id="6867445">++</span>&nbsp;<span class="op" id="6867448">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867452">sy</span>&nbsp;<span class="op" id="6867455">:=</span>&nbsp;<span class="ident" id="6867458">y</span>&nbsp;<span class="op" id="6867460">+</span>&nbsp;<span class="ident" id="6867462">sp</span><span class="op" id="6867464">.</span><span class="ident" id="6867465">Y</span>&nbsp;<span class="op" id="6867467">-</span>&nbsp;<span class="ident" id="6867469">r</span><span class="op" id="6867470">.</span><span class="ident" id="6867471">Min</span><span class="op" id="6867474">.</span><span class="ident" id="6867475">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867479">my</span>&nbsp;<span class="op" id="6867482">:=</span>&nbsp;<span class="ident" id="6867485">y</span>&nbsp;<span class="op" id="6867487">+</span>&nbsp;<span class="ident" id="6867489">mp</span><span class="op" id="6867491">.</span><span class="ident" id="6867492">Y</span>&nbsp;<span class="op" id="6867494">-</span>&nbsp;<span class="ident" id="6867496">r</span><span class="op" id="6867497">.</span><span class="ident" id="6867498">Min</span><span class="op" id="6867501">.</span><span class="ident" id="6867502">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867506">for</span>&nbsp;<span class="ident" id="6867510">x</span>&nbsp;<span class="op" id="6867512">:=</span>&nbsp;<span class="ident" id="6867515">r</span><span class="op" id="6867516">.</span><span class="ident" id="6867517">Min</span><span class="op" id="6867520">.</span><span class="ident" id="6867521">X</span><span class="op" id="6867522">;</span>&nbsp;<span class="ident" id="6867524">x</span>&nbsp;<span class="op" id="6867526">&lt;</span>&nbsp;<span class="ident" id="6867528">r</span><span class="op" id="6867529">.</span><span class="ident" id="6867530">Max</span><span class="op" id="6867533">.</span><span class="ident" id="6867534">X</span><span class="op" id="6867535">;</span>&nbsp;<span class="ident" id="6867537">x</span><span class="op" id="6867538">++</span>&nbsp;<span class="op" id="6867541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867546">if</span>&nbsp;<span class="op" id="6867549">!</span><span class="op" id="6867550">(</span><span class="ident" id="6867551">image</span><span class="op" id="6867556">.</span><span class="ident" id="6867557">Pt</span><span class="op" id="6867559">(</span><span class="ident" id="6867560">x</span><span class="op" id="6867561">,</span>&nbsp;<span class="ident" id="6867563">y</span><span class="op" id="6867564">)</span><span class="op" id="6867565">.</span><span class="ident" id="6867566">In</span><span class="op" id="6867568">(</span><span class="ident" id="6867569">b</span><span class="op" id="6867570">)</span><span class="op" id="6867571">)</span>&nbsp;<span class="op" id="6867573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867579">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867596">sx</span>&nbsp;<span class="op" id="6867599">:=</span>&nbsp;<span class="ident" id="6867602">x</span>&nbsp;<span class="op" id="6867604">+</span>&nbsp;<span class="ident" id="6867606">sp</span><span class="op" id="6867608">.</span><span class="ident" id="6867609">X</span>&nbsp;<span class="op" id="6867611">-</span>&nbsp;<span class="ident" id="6867613">r</span><span class="op" id="6867614">.</span><span class="ident" id="6867615">Min</span><span class="op" id="6867618">.</span><span class="ident" id="6867619">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867624">if</span>&nbsp;<span class="op" id="6867627">!</span><span class="op" id="6867628">(</span><span class="ident" id="6867629">image</span><span class="op" id="6867634">.</span><span class="ident" id="6867635">Pt</span><span class="op" id="6867637">(</span><span class="ident" id="6867638">sx</span><span class="op" id="6867640">,</span>&nbsp;<span class="ident" id="6867642">sy</span><span class="op" id="6867644">)</span><span class="op" id="6867645">.</span><span class="ident" id="6867646">In</span><span class="op" id="6867648">(</span><span class="ident" id="6867649">sb</span><span class="op" id="6867651">)</span><span class="op" id="6867652">)</span>&nbsp;<span class="op" id="6867654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867660">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867672">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867677">mx</span>&nbsp;<span class="op" id="6867680">:=</span>&nbsp;<span class="ident" id="6867683">x</span>&nbsp;<span class="op" id="6867685">+</span>&nbsp;<span class="ident" id="6867687">mp</span><span class="op" id="6867689">.</span><span class="ident" id="6867690">X</span>&nbsp;<span class="op" id="6867692">-</span>&nbsp;<span class="ident" id="6867694">r</span><span class="op" id="6867695">.</span><span class="ident" id="6867696">Min</span><span class="op" id="6867699">.</span><span class="ident" id="6867700">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867705">if</span>&nbsp;<span class="op" id="6867708">!</span><span class="op" id="6867709">(</span><span class="ident" id="6867710">image</span><span class="op" id="6867715">.</span><span class="ident" id="6867716">Pt</span><span class="op" id="6867718">(</span><span class="ident" id="6867719">mx</span><span class="op" id="6867721">,</span>&nbsp;<span class="ident" id="6867723">my</span><span class="op" id="6867725">)</span><span class="op" id="6867726">.</span><span class="ident" id="6867727">In</span><span class="op" id="6867729">(</span><span class="ident" id="6867730">mb</span><span class="op" id="6867732">)</span><span class="op" id="6867733">)</span>&nbsp;<span class="op" id="6867735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867741">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867759">const</span>&nbsp;<span class="ident" id="6867765">M</span>&nbsp;<span class="op" id="6867767">=</span>&nbsp;<span class="num" id="6867769">1</span><span class="op" id="6867770">&lt;&lt;</span><span class="num" id="6867772">16</span>&nbsp;<span class="op" id="6867775">-</span>&nbsp;<span class="num" id="6867777">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867782">var</span>&nbsp;<span class="ident" id="6867786">dr</span><span class="op" id="6867788">,</span>&nbsp;<span class="ident" id="6867790">dg</span><span class="op" id="6867792">,</span>&nbsp;<span class="ident" id="6867794">db</span><span class="op" id="6867796">,</span>&nbsp;<span class="ident" id="6867798">da</span>&nbsp;<span class="builtintype" id="6867801">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867811">if</span>&nbsp;<span class="ident" id="6867814">op</span>&nbsp;<span class="op" id="6867817">==</span>&nbsp;<span class="ident" id="6867820">Over</span>&nbsp;<span class="op" id="6867825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867831">dr</span><span class="op" id="6867833">,</span>&nbsp;<span class="ident" id="6867835">dg</span><span class="op" id="6867837">,</span>&nbsp;<span class="ident" id="6867839">db</span><span class="op" id="6867841">,</span>&nbsp;<span class="ident" id="6867843">da</span>&nbsp;<span class="op" id="6867846">=</span>&nbsp;<span class="ident" id="6867848">dst</span><span class="op" id="6867851">.</span><span class="ident" id="6867852">At</span><span class="op" id="6867854">(</span><span class="ident" id="6867855">x</span><span class="op" id="6867856">,</span>&nbsp;<span class="ident" id="6867858">y</span><span class="op" id="6867859">)</span><span class="op" id="6867860">.</span><span class="ident" id="6867861">RGBA</span><span class="op" id="6867865">(</span><span class="op" id="6867866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867871">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867876">sr</span><span class="op" id="6867878">,</span>&nbsp;<span class="ident" id="6867880">sg</span><span class="op" id="6867882">,</span>&nbsp;<span class="ident" id="6867884">sb</span><span class="op" id="6867886">,</span>&nbsp;<span class="ident" id="6867888">sa</span>&nbsp;<span class="op" id="6867891">:=</span>&nbsp;<span class="ident" id="6867894">src</span><span class="op" id="6867897">.</span><span class="ident" id="6867898">At</span><span class="op" id="6867900">(</span><span class="ident" id="6867901">sx</span><span class="op" id="6867903">,</span>&nbsp;<span class="ident" id="6867905">sy</span><span class="op" id="6867907">)</span><span class="op" id="6867908">.</span><span class="ident" id="6867909">RGBA</span><span class="op" id="6867913">(</span><span class="op" id="6867914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867919">ma</span>&nbsp;<span class="op" id="6867922">:=</span>&nbsp;<span class="builtintype" id="6867925">uint32</span><span class="op" id="6867931">(</span><span class="ident" id="6867932">M</span><span class="op" id="6867933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6867938">if</span>&nbsp;<span class="ident" id="6867941">mask</span>&nbsp;<span class="op" id="6867946">!=</span>&nbsp;<span class="ident" id="6867949">nil</span>&nbsp;<span class="op" id="6867953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6867959">_</span><span class="op" id="6867960">,</span>&nbsp;<span class="ident" id="6867962">_</span><span class="op" id="6867963">,</span>&nbsp;<span class="ident" id="6867965">_</span><span class="op" id="6867966">,</span>&nbsp;<span class="ident" id="6867968">ma</span>&nbsp;<span class="op" id="6867971">=</span>&nbsp;<span class="ident" id="6867973">mask</span><span class="op" id="6867977">.</span><span class="ident" id="6867978">At</span><span class="op" id="6867980">(</span><span class="ident" id="6867981">mx</span><span class="op" id="6867983">,</span>&nbsp;<span class="ident" id="6867985">my</span><span class="op" id="6867987">)</span><span class="op" id="6867988">.</span><span class="ident" id="6867989">RGBA</span><span class="op" id="6867993">(</span><span class="op" id="6867994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6867999">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868004">a</span>&nbsp;<span class="op" id="6868006">:=</span>&nbsp;<span class="ident" id="6868009">M</span>&nbsp;<span class="op" id="6868011">-</span>&nbsp;<span class="op" id="6868013">(</span><span class="ident" id="6868014">sa</span>&nbsp;<span class="op" id="6868017">*</span>&nbsp;<span class="ident" id="6868019">ma</span>&nbsp;<span class="op" id="6868022">/</span>&nbsp;<span class="ident" id="6868024">M</span><span class="op" id="6868025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868030">golden</span><span class="op" id="6868036">.</span><span class="ident" id="6868037">Set</span><span class="op" id="6868040">(</span><span class="ident" id="6868041">x</span><span class="op" id="6868042">,</span>&nbsp;<span class="ident" id="6868044">y</span><span class="op" id="6868045">,</span>&nbsp;<span class="ident" id="6868047">color</span><span class="op" id="6868052">.</span><span class="ident" id="6868053">RGBA64</span><span class="op" id="6868059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6868065">uint16</span><span class="op" id="6868071">(</span><span class="op" id="6868072">(</span><span class="ident" id="6868073">dr</span><span class="op" id="6868075">*</span><span class="ident" id="6868076">a</span>&nbsp;<span class="op" id="6868078">+</span>&nbsp;<span class="ident" id="6868080">sr</span><span class="op" id="6868082">*</span><span class="ident" id="6868083">ma</span><span class="op" id="6868085">)</span>&nbsp;<span class="op" id="6868087">/</span>&nbsp;<span class="ident" id="6868089">M</span><span class="op" id="6868090">)</span><span class="op" id="6868091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6868097">uint16</span><span class="op" id="6868103">(</span><span class="op" id="6868104">(</span><span class="ident" id="6868105">dg</span><span class="op" id="6868107">*</span><span class="ident" id="6868108">a</span>&nbsp;<span class="op" id="6868110">+</span>&nbsp;<span class="ident" id="6868112">sg</span><span class="op" id="6868114">*</span><span class="ident" id="6868115">ma</span><span class="op" id="6868117">)</span>&nbsp;<span class="op" id="6868119">/</span>&nbsp;<span class="ident" id="6868121">M</span><span class="op" id="6868122">)</span><span class="op" id="6868123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6868129">uint16</span><span class="op" id="6868135">(</span><span class="op" id="6868136">(</span><span class="ident" id="6868137">db</span><span class="op" id="6868139">*</span><span class="ident" id="6868140">a</span>&nbsp;<span class="op" id="6868142">+</span>&nbsp;<span class="ident" id="6868144">sb</span><span class="op" id="6868146">*</span><span class="ident" id="6868147">ma</span><span class="op" id="6868149">)</span>&nbsp;<span class="op" id="6868151">/</span>&nbsp;<span class="ident" id="6868153">M</span><span class="op" id="6868154">)</span><span class="op" id="6868155">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6868161">uint16</span><span class="op" id="6868167">(</span><span class="op" id="6868168">(</span><span class="ident" id="6868169">da</span><span class="op" id="6868171">*</span><span class="ident" id="6868172">a</span>&nbsp;<span class="op" id="6868174">+</span>&nbsp;<span class="ident" id="6868176">sa</span><span class="op" id="6868178">*</span><span class="ident" id="6868179">ma</span><span class="op" id="6868181">)</span>&nbsp;<span class="op" id="6868183">/</span>&nbsp;<span class="ident" id="6868185">M</span><span class="op" id="6868186">)</span><span class="op" id="6868187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868192">}</span><span class="op" id="6868193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868203">return</span>&nbsp;<span class="ident" id="6868210">golden</span><span class="op" id="6868216">.</span><span class="ident" id="6868217">SubImage</span><span class="op" id="6868225">(</span><span class="ident" id="6868226">b</span><span class="op" id="6868227">)</span><br>
<span class="lineno">205</span><span class="op" id="6868229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6868232">func</span>&nbsp;<span class="ident" id="6868237">TestDraw</span><span class="op" id="6868245">(</span><span class="ident" id="6868246">t</span>&nbsp;<span class="op" id="6868248">*</span><span class="ident" id="6868249">testing</span><span class="op" id="6868256">.</span><span class="ident" id="6868257">T</span><span class="op" id="6868258">)</span>&nbsp;<span class="op" id="6868260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868263">rr</span>&nbsp;<span class="op" id="6868266">:=</span>&nbsp;<span class="op" id="6868269">[</span><span class="op" id="6868270">]</span><span class="ident" id="6868271">image</span><span class="op" id="6868276">.</span><span class="ident" id="6868277">Rectangle</span><span class="op" id="6868286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868290">image</span><span class="op" id="6868295">.</span><span class="ident" id="6868296">Rect</span><span class="op" id="6868300">(</span><span class="num" id="6868301">0</span><span class="op" id="6868302">,</span>&nbsp;<span class="num" id="6868304">0</span><span class="op" id="6868305">,</span>&nbsp;<span class="num" id="6868307">0</span><span class="op" id="6868308">,</span>&nbsp;<span class="num" id="6868310">0</span><span class="op" id="6868311">)</span><span class="op" id="6868312">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868316">image</span><span class="op" id="6868321">.</span><span class="ident" id="6868322">Rect</span><span class="op" id="6868326">(</span><span class="num" id="6868327">0</span><span class="op" id="6868328">,</span>&nbsp;<span class="num" id="6868330">0</span><span class="op" id="6868331">,</span>&nbsp;<span class="num" id="6868333">16</span><span class="op" id="6868335">,</span>&nbsp;<span class="num" id="6868337">16</span><span class="op" id="6868339">)</span><span class="op" id="6868340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868344">image</span><span class="op" id="6868349">.</span><span class="ident" id="6868350">Rect</span><span class="op" id="6868354">(</span><span class="num" id="6868355">3</span><span class="op" id="6868356">,</span>&nbsp;<span class="num" id="6868358">5</span><span class="op" id="6868359">,</span>&nbsp;<span class="num" id="6868361">12</span><span class="op" id="6868363">,</span>&nbsp;<span class="num" id="6868365">10</span><span class="op" id="6868367">)</span><span class="op" id="6868368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868372">image</span><span class="op" id="6868377">.</span><span class="ident" id="6868378">Rect</span><span class="op" id="6868382">(</span><span class="num" id="6868383">0</span><span class="op" id="6868384">,</span>&nbsp;<span class="num" id="6868386">0</span><span class="op" id="6868387">,</span>&nbsp;<span class="num" id="6868389">9</span><span class="op" id="6868390">,</span>&nbsp;<span class="num" id="6868392">9</span><span class="op" id="6868393">)</span><span class="op" id="6868394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868398">image</span><span class="op" id="6868403">.</span><span class="ident" id="6868404">Rect</span><span class="op" id="6868408">(</span><span class="num" id="6868409">8</span><span class="op" id="6868410">,</span>&nbsp;<span class="num" id="6868412">8</span><span class="op" id="6868413">,</span>&nbsp;<span class="num" id="6868415">16</span><span class="op" id="6868417">,</span>&nbsp;<span class="num" id="6868419">16</span><span class="op" id="6868421">)</span><span class="op" id="6868422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868426">image</span><span class="op" id="6868431">.</span><span class="ident" id="6868432">Rect</span><span class="op" id="6868436">(</span><span class="num" id="6868437">8</span><span class="op" id="6868438">,</span>&nbsp;<span class="num" id="6868440">0</span><span class="op" id="6868441">,</span>&nbsp;<span class="num" id="6868443">9</span><span class="op" id="6868444">,</span>&nbsp;<span class="num" id="6868446">16</span><span class="op" id="6868448">)</span><span class="op" id="6868449">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868453">image</span><span class="op" id="6868458">.</span><span class="ident" id="6868459">Rect</span><span class="op" id="6868463">(</span><span class="num" id="6868464">0</span><span class="op" id="6868465">,</span>&nbsp;<span class="num" id="6868467">8</span><span class="op" id="6868468">,</span>&nbsp;<span class="num" id="6868470">16</span><span class="op" id="6868472">,</span>&nbsp;<span class="num" id="6868474">9</span><span class="op" id="6868475">)</span><span class="op" id="6868476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868480">image</span><span class="op" id="6868485">.</span><span class="ident" id="6868486">Rect</span><span class="op" id="6868490">(</span><span class="num" id="6868491">8</span><span class="op" id="6868492">,</span>&nbsp;<span class="num" id="6868494">8</span><span class="op" id="6868495">,</span>&nbsp;<span class="num" id="6868497">9</span><span class="op" id="6868498">,</span>&nbsp;<span class="num" id="6868500">9</span><span class="op" id="6868501">)</span><span class="op" id="6868502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868506">image</span><span class="op" id="6868511">.</span><span class="ident" id="6868512">Rect</span><span class="op" id="6868516">(</span><span class="num" id="6868517">8</span><span class="op" id="6868518">,</span>&nbsp;<span class="num" id="6868520">8</span><span class="op" id="6868521">,</span>&nbsp;<span class="num" id="6868523">8</span><span class="op" id="6868524">,</span>&nbsp;<span class="num" id="6868526">8</span><span class="op" id="6868527">)</span><span class="op" id="6868528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6868531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868534">for</span>&nbsp;<span class="ident" id="6868538">_</span><span class="op" id="6868539">,</span>&nbsp;<span class="ident" id="6868541">r</span>&nbsp;<span class="op" id="6868543">:=</span>&nbsp;<span class="keyword" id="6868546">range</span>&nbsp;<span class="ident" id="6868552">rr</span>&nbsp;<span class="op" id="6868555">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868558">loop</span><span class="op" id="6868562">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868566">for</span>&nbsp;<span class="ident" id="6868570">_</span><span class="op" id="6868571">,</span>&nbsp;<span class="ident" id="6868573">test</span>&nbsp;<span class="op" id="6868578">:=</span>&nbsp;<span class="keyword" id="6868581">range</span>&nbsp;<span class="ident" id="6868587">drawTests</span>&nbsp;<span class="op" id="6868597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868602">dst</span>&nbsp;<span class="op" id="6868606">:=</span>&nbsp;<span class="ident" id="6868609">hgradRed</span><span class="op" id="6868617">(</span><span class="num" id="6868618">255</span><span class="op" id="6868621">)</span><span class="op" id="6868622">.</span><span class="op" id="6868623">(</span><span class="op" id="6868624">*</span><span class="ident" id="6868625">image</span><span class="op" id="6868630">.</span><span class="ident" id="6868631">RGBA</span><span class="op" id="6868635">)</span><span class="op" id="6868636">.</span><span class="ident" id="6868637">SubImage</span><span class="op" id="6868645">(</span><span class="ident" id="6868646">r</span><span class="op" id="6868647">)</span><span class="op" id="6868648">.</span><span class="op" id="6868649">(</span><span class="ident" id="6868650">Image</span><span class="op" id="6868655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6868660">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868761">golden</span>&nbsp;<span class="op" id="6868768">:=</span>&nbsp;<span class="ident" id="6868771">makeGolden</span><span class="op" id="6868781">(</span><span class="ident" id="6868782">dst</span><span class="op" id="6868785">,</span>&nbsp;<span class="ident" id="6868787">image</span><span class="op" id="6868792">.</span><span class="ident" id="6868793">Rect</span><span class="op" id="6868797">(</span><span class="num" id="6868798">0</span><span class="op" id="6868799">,</span>&nbsp;<span class="num" id="6868801">0</span><span class="op" id="6868802">,</span>&nbsp;<span class="num" id="6868804">16</span><span class="op" id="6868806">,</span>&nbsp;<span class="num" id="6868808">16</span><span class="op" id="6868810">)</span><span class="op" id="6868811">,</span>&nbsp;<span class="ident" id="6868813">test</span><span class="op" id="6868817">.</span><span class="ident" id="6868818">src</span><span class="op" id="6868821">,</span>&nbsp;<span class="ident" id="6868823">image</span><span class="op" id="6868828">.</span><span class="ident" id="6868829">ZP</span><span class="op" id="6868831">,</span>&nbsp;<span class="ident" id="6868833">test</span><span class="op" id="6868837">.</span><span class="ident" id="6868838">mask</span><span class="op" id="6868842">,</span>&nbsp;<span class="ident" id="6868844">image</span><span class="op" id="6868849">.</span><span class="ident" id="6868850">ZP</span><span class="op" id="6868852">,</span>&nbsp;<span class="ident" id="6868854">test</span><span class="op" id="6868858">.</span><span class="ident" id="6868859">op</span><span class="op" id="6868861">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868866">b</span>&nbsp;<span class="op" id="6868868">:=</span>&nbsp;<span class="ident" id="6868871">dst</span><span class="op" id="6868874">.</span><span class="ident" id="6868875">Bounds</span><span class="op" id="6868881">(</span><span class="op" id="6868882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6868887">if</span>&nbsp;<span class="op" id="6868890">!</span><span class="ident" id="6868891">b</span><span class="op" id="6868892">.</span><span class="ident" id="6868893">Eq</span><span class="op" id="6868895">(</span><span class="ident" id="6868896">golden</span><span class="op" id="6868902">.</span><span class="ident" id="6868903">Bounds</span><span class="op" id="6868909">(</span><span class="op" id="6868910">)</span><span class="op" id="6868911">)</span>&nbsp;<span class="op" id="6868913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6868919">t</span><span class="op" id="6868920">.</span><span class="ident" id="6868921">Errorf</span><span class="op" id="6868927">(</span><span class="string" id="6868928">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6868961">,</span>&nbsp;<span class="ident" id="6868963">r</span><span class="op" id="6868964">,</span>&nbsp;<span class="ident" id="6868966">test</span><span class="op" id="6868970">.</span><span class="ident" id="6868971">desc</span><span class="op" id="6868975">,</span>&nbsp;<span class="ident" id="6868977">dst</span><span class="op" id="6868980">.</span><span class="ident" id="6868981">Bounds</span><span class="op" id="6868987">(</span><span class="op" id="6868988">)</span><span class="op" id="6868989">,</span>&nbsp;<span class="ident" id="6868991">golden</span><span class="op" id="6868997">.</span><span class="ident" id="6868998">Bounds</span><span class="op" id="6869004">(</span><span class="op" id="6869005">)</span><span class="op" id="6869006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869012">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869024">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6869029">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869126">DrawMask</span><span class="op" id="6869134">(</span><span class="ident" id="6869135">dst</span><span class="op" id="6869138">,</span>&nbsp;<span class="ident" id="6869140">image</span><span class="op" id="6869145">.</span><span class="ident" id="6869146">Rect</span><span class="op" id="6869150">(</span><span class="num" id="6869151">0</span><span class="op" id="6869152">,</span>&nbsp;<span class="num" id="6869154">0</span><span class="op" id="6869155">,</span>&nbsp;<span class="num" id="6869157">16</span><span class="op" id="6869159">,</span>&nbsp;<span class="num" id="6869161">16</span><span class="op" id="6869163">)</span><span class="op" id="6869164">,</span>&nbsp;<span class="ident" id="6869166">test</span><span class="op" id="6869170">.</span><span class="ident" id="6869171">src</span><span class="op" id="6869174">,</span>&nbsp;<span class="ident" id="6869176">image</span><span class="op" id="6869181">.</span><span class="ident" id="6869182">ZP</span><span class="op" id="6869184">,</span>&nbsp;<span class="ident" id="6869186">test</span><span class="op" id="6869190">.</span><span class="ident" id="6869191">mask</span><span class="op" id="6869195">,</span>&nbsp;<span class="ident" id="6869197">image</span><span class="op" id="6869202">.</span><span class="ident" id="6869203">ZP</span><span class="op" id="6869205">,</span>&nbsp;<span class="ident" id="6869207">test</span><span class="op" id="6869211">.</span><span class="ident" id="6869212">op</span><span class="op" id="6869214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869219">if</span>&nbsp;<span class="ident" id="6869222">image</span><span class="op" id="6869227">.</span><span class="ident" id="6869228">Pt</span><span class="op" id="6869230">(</span><span class="num" id="6869231">8</span><span class="op" id="6869232">,</span>&nbsp;<span class="num" id="6869234">8</span><span class="op" id="6869235">)</span><span class="op" id="6869236">.</span><span class="ident" id="6869237">In</span><span class="op" id="6869239">(</span><span class="ident" id="6869240">r</span><span class="op" id="6869241">)</span>&nbsp;<span class="op" id="6869243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6869249">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6869320">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869373">if</span>&nbsp;<span class="op" id="6869376">!</span><span class="ident" id="6869377">eq</span><span class="op" id="6869379">(</span><span class="ident" id="6869380">dst</span><span class="op" id="6869383">.</span><span class="ident" id="6869384">At</span><span class="op" id="6869386">(</span><span class="num" id="6869387">8</span><span class="op" id="6869388">,</span>&nbsp;<span class="num" id="6869390">8</span><span class="op" id="6869391">)</span><span class="op" id="6869392">,</span>&nbsp;<span class="ident" id="6869394">test</span><span class="op" id="6869398">.</span><span class="ident" id="6869399">expected</span><span class="op" id="6869407">)</span>&nbsp;<span class="op" id="6869409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869416">t</span><span class="op" id="6869417">.</span><span class="ident" id="6869418">Errorf</span><span class="op" id="6869424">(</span><span class="string" id="6869425">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6869461">,</span>&nbsp;<span class="ident" id="6869463">r</span><span class="op" id="6869464">,</span>&nbsp;<span class="ident" id="6869466">test</span><span class="op" id="6869470">.</span><span class="ident" id="6869471">desc</span><span class="op" id="6869475">,</span>&nbsp;<span class="ident" id="6869477">dst</span><span class="op" id="6869480">.</span><span class="ident" id="6869481">At</span><span class="op" id="6869483">(</span><span class="num" id="6869484">8</span><span class="op" id="6869485">,</span>&nbsp;<span class="num" id="6869487">8</span><span class="op" id="6869488">)</span><span class="op" id="6869489">,</span>&nbsp;<span class="ident" id="6869491">test</span><span class="op" id="6869495">.</span><span class="ident" id="6869496">expected</span><span class="op" id="6869504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869511">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869529">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6869534">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869602">for</span>&nbsp;<span class="ident" id="6869606">y</span>&nbsp;<span class="op" id="6869608">:=</span>&nbsp;<span class="ident" id="6869611">b</span><span class="op" id="6869612">.</span><span class="ident" id="6869613">Min</span><span class="op" id="6869616">.</span><span class="ident" id="6869617">Y</span><span class="op" id="6869618">;</span>&nbsp;<span class="ident" id="6869620">y</span>&nbsp;<span class="op" id="6869622">&lt;</span>&nbsp;<span class="ident" id="6869624">b</span><span class="op" id="6869625">.</span><span class="ident" id="6869626">Max</span><span class="op" id="6869629">.</span><span class="ident" id="6869630">Y</span><span class="op" id="6869631">;</span>&nbsp;<span class="ident" id="6869633">y</span><span class="op" id="6869634">++</span>&nbsp;<span class="op" id="6869637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869643">for</span>&nbsp;<span class="ident" id="6869647">x</span>&nbsp;<span class="op" id="6869649">:=</span>&nbsp;<span class="ident" id="6869652">b</span><span class="op" id="6869653">.</span><span class="ident" id="6869654">Min</span><span class="op" id="6869657">.</span><span class="ident" id="6869658">X</span><span class="op" id="6869659">;</span>&nbsp;<span class="ident" id="6869661">x</span>&nbsp;<span class="op" id="6869663">&lt;</span>&nbsp;<span class="ident" id="6869665">b</span><span class="op" id="6869666">.</span><span class="ident" id="6869667">Max</span><span class="op" id="6869670">.</span><span class="ident" id="6869671">X</span><span class="op" id="6869672">;</span>&nbsp;<span class="ident" id="6869674">x</span><span class="op" id="6869675">++</span>&nbsp;<span class="op" id="6869678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869685">if</span>&nbsp;<span class="op" id="6869688">!</span><span class="ident" id="6869689">eq</span><span class="op" id="6869691">(</span><span class="ident" id="6869692">dst</span><span class="op" id="6869695">.</span><span class="ident" id="6869696">At</span><span class="op" id="6869698">(</span><span class="ident" id="6869699">x</span><span class="op" id="6869700">,</span>&nbsp;<span class="ident" id="6869702">y</span><span class="op" id="6869703">)</span><span class="op" id="6869704">,</span>&nbsp;<span class="ident" id="6869706">golden</span><span class="op" id="6869712">.</span><span class="ident" id="6869713">At</span><span class="op" id="6869715">(</span><span class="ident" id="6869716">x</span><span class="op" id="6869717">,</span>&nbsp;<span class="ident" id="6869719">y</span><span class="op" id="6869720">)</span><span class="op" id="6869721">)</span>&nbsp;<span class="op" id="6869723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6869731">t</span><span class="op" id="6869732">.</span><span class="ident" id="6869733">Errorf</span><span class="op" id="6869739">(</span><span class="string" id="6869740">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6869786">,</span>&nbsp;<span class="ident" id="6869788">r</span><span class="op" id="6869789">,</span>&nbsp;<span class="ident" id="6869791">test</span><span class="op" id="6869795">.</span><span class="ident" id="6869796">desc</span><span class="op" id="6869800">,</span>&nbsp;<span class="ident" id="6869802">x</span><span class="op" id="6869803">,</span>&nbsp;<span class="ident" id="6869805">y</span><span class="op" id="6869806">,</span>&nbsp;<span class="ident" id="6869808">dst</span><span class="op" id="6869811">.</span><span class="ident" id="6869812">At</span><span class="op" id="6869814">(</span><span class="ident" id="6869815">x</span><span class="op" id="6869816">,</span>&nbsp;<span class="ident" id="6869818">y</span><span class="op" id="6869819">)</span><span class="op" id="6869820">,</span>&nbsp;<span class="ident" id="6869822">golden</span><span class="op" id="6869828">.</span><span class="ident" id="6869829">At</span><span class="op" id="6869831">(</span><span class="ident" id="6869832">x</span><span class="op" id="6869833">,</span>&nbsp;<span class="ident" id="6869835">y</span><span class="op" id="6869836">)</span><span class="op" id="6869837">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869845">continue</span>&nbsp;<span class="ident" id="6869854">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869879">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6869882">}</span><br>
<span class="lineno"></span><span class="op" id="6869884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6869887">func</span>&nbsp;<span class="ident" id="6869892">TestDrawOverlap</span><span class="op" id="6869907">(</span><span class="ident" id="6869908">t</span>&nbsp;<span class="op" id="6869910">*</span><span class="ident" id="6869911">testing</span><span class="op" id="6869918">.</span><span class="ident" id="6869919">T</span><span class="op" id="6869920">)</span>&nbsp;<span class="op" id="6869922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869925">for</span>&nbsp;<span class="ident" id="6869929">_</span><span class="op" id="6869930">,</span>&nbsp;<span class="ident" id="6869932">op</span>&nbsp;<span class="op" id="6869935">:=</span>&nbsp;<span class="keyword" id="6869938">range</span>&nbsp;<span class="op" id="6869944">[</span><span class="op" id="6869945">]</span><span class="ident" id="6869946">Op</span><span class="op" id="6869948">{</span><span class="ident" id="6869949">Over</span><span class="op" id="6869953">,</span>&nbsp;<span class="ident" id="6869955">Src</span><span class="op" id="6869958">}</span>&nbsp;<span class="op" id="6869960">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6869964">for</span>&nbsp;<span class="ident" id="6869968">yoff</span>&nbsp;<span class="op" id="6869973">:=</span>&nbsp;<span class="op" id="6869976">-</span><span class="num" id="6869977">2</span><span class="op" id="6869978">;</span>&nbsp;<span class="ident" id="6869980">yoff</span>&nbsp;<span class="op" id="6869985">&lt;=</span>&nbsp;<span class="num" id="6869988">2</span><span class="op" id="6869989">;</span>&nbsp;<span class="ident" id="6869991">yoff</span><span class="op" id="6869995">++</span>&nbsp;<span class="op" id="6869998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870002">loop</span><span class="op" id="6870006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870011">for</span>&nbsp;<span class="ident" id="6870015">xoff</span>&nbsp;<span class="op" id="6870020">:=</span>&nbsp;<span class="op" id="6870023">-</span><span class="num" id="6870024">2</span><span class="op" id="6870025">;</span>&nbsp;<span class="ident" id="6870027">xoff</span>&nbsp;<span class="op" id="6870032">&lt;=</span>&nbsp;<span class="num" id="6870035">2</span><span class="op" id="6870036">;</span>&nbsp;<span class="ident" id="6870038">xoff</span><span class="op" id="6870042">++</span>&nbsp;<span class="op" id="6870045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870051">m</span>&nbsp;<span class="op" id="6870053">:=</span>&nbsp;<span class="ident" id="6870056">gradYellow</span><span class="op" id="6870066">(</span><span class="num" id="6870067">127</span><span class="op" id="6870070">)</span><span class="op" id="6870071">.</span><span class="op" id="6870072">(</span><span class="op" id="6870073">*</span><span class="ident" id="6870074">image</span><span class="op" id="6870079">.</span><span class="ident" id="6870080">RGBA</span><span class="op" id="6870084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870090">dst</span>&nbsp;<span class="op" id="6870094">:=</span>&nbsp;<span class="ident" id="6870097">m</span><span class="op" id="6870098">.</span><span class="ident" id="6870099">SubImage</span><span class="op" id="6870107">(</span><span class="ident" id="6870108">image</span><span class="op" id="6870113">.</span><span class="ident" id="6870114">Rect</span><span class="op" id="6870118">(</span><span class="num" id="6870119">5</span><span class="op" id="6870120">,</span>&nbsp;<span class="num" id="6870122">5</span><span class="op" id="6870123">,</span>&nbsp;<span class="num" id="6870125">10</span><span class="op" id="6870127">,</span>&nbsp;<span class="num" id="6870129">10</span><span class="op" id="6870131">)</span><span class="op" id="6870132">)</span><span class="op" id="6870133">.</span><span class="op" id="6870134">(</span><span class="op" id="6870135">*</span><span class="ident" id="6870136">image</span><span class="op" id="6870141">.</span><span class="ident" id="6870142">RGBA</span><span class="op" id="6870146">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870152">src</span>&nbsp;<span class="op" id="6870156">:=</span>&nbsp;<span class="ident" id="6870159">m</span><span class="op" id="6870160">.</span><span class="ident" id="6870161">SubImage</span><span class="op" id="6870169">(</span><span class="ident" id="6870170">image</span><span class="op" id="6870175">.</span><span class="ident" id="6870176">Rect</span><span class="op" id="6870180">(</span><span class="num" id="6870181">5</span><span class="op" id="6870182">+</span><span class="ident" id="6870183">xoff</span><span class="op" id="6870187">,</span>&nbsp;<span class="num" id="6870189">5</span><span class="op" id="6870190">+</span><span class="ident" id="6870191">yoff</span><span class="op" id="6870195">,</span>&nbsp;<span class="num" id="6870197">10</span><span class="op" id="6870199">+</span><span class="ident" id="6870200">xoff</span><span class="op" id="6870204">,</span>&nbsp;<span class="num" id="6870206">10</span><span class="op" id="6870208">+</span><span class="ident" id="6870209">yoff</span><span class="op" id="6870213">)</span><span class="op" id="6870214">)</span><span class="op" id="6870215">.</span><span class="op" id="6870216">(</span><span class="op" id="6870217">*</span><span class="ident" id="6870218">image</span><span class="op" id="6870223">.</span><span class="ident" id="6870224">RGBA</span><span class="op" id="6870228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870234">b</span>&nbsp;<span class="op" id="6870236">:=</span>&nbsp;<span class="ident" id="6870239">dst</span><span class="op" id="6870242">.</span><span class="ident" id="6870243">Bounds</span><span class="op" id="6870249">(</span><span class="op" id="6870250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6870256">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870358">golden</span>&nbsp;<span class="op" id="6870365">:=</span>&nbsp;<span class="ident" id="6870368">makeGolden</span><span class="op" id="6870378">(</span><span class="ident" id="6870379">dst</span><span class="op" id="6870382">,</span>&nbsp;<span class="ident" id="6870384">b</span><span class="op" id="6870385">,</span>&nbsp;<span class="ident" id="6870387">src</span><span class="op" id="6870390">,</span>&nbsp;<span class="ident" id="6870392">src</span><span class="op" id="6870395">.</span><span class="ident" id="6870396">Bounds</span><span class="op" id="6870402">(</span><span class="op" id="6870403">)</span><span class="op" id="6870404">.</span><span class="ident" id="6870405">Min</span><span class="op" id="6870408">,</span>&nbsp;<span class="ident" id="6870410">nil</span><span class="op" id="6870413">,</span>&nbsp;<span class="ident" id="6870415">image</span><span class="op" id="6870420">.</span><span class="ident" id="6870421">ZP</span><span class="op" id="6870423">,</span>&nbsp;<span class="ident" id="6870425">op</span><span class="op" id="6870427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870433">if</span>&nbsp;<span class="op" id="6870436">!</span><span class="ident" id="6870437">b</span><span class="op" id="6870438">.</span><span class="ident" id="6870439">Eq</span><span class="op" id="6870441">(</span><span class="ident" id="6870442">golden</span><span class="op" id="6870448">.</span><span class="ident" id="6870449">Bounds</span><span class="op" id="6870455">(</span><span class="op" id="6870456">)</span><span class="op" id="6870457">)</span>&nbsp;<span class="op" id="6870459">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870466">t</span><span class="op" id="6870467">.</span><span class="ident" id="6870468">Errorf</span><span class="op" id="6870474">(</span><span class="string" id="6870475">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6870525">,</span>&nbsp;<span class="ident" id="6870527">xoff</span><span class="op" id="6870531">,</span>&nbsp;<span class="ident" id="6870533">yoff</span><span class="op" id="6870537">,</span>&nbsp;<span class="ident" id="6870539">dst</span><span class="op" id="6870542">.</span><span class="ident" id="6870543">Bounds</span><span class="op" id="6870549">(</span><span class="op" id="6870550">)</span><span class="op" id="6870551">,</span>&nbsp;<span class="ident" id="6870553">golden</span><span class="op" id="6870559">.</span><span class="ident" id="6870560">Bounds</span><span class="op" id="6870566">(</span><span class="op" id="6870567">)</span><span class="op" id="6870568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870575">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6870588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6870594">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870692">DrawMask</span><span class="op" id="6870700">(</span><span class="ident" id="6870701">dst</span><span class="op" id="6870704">,</span>&nbsp;<span class="ident" id="6870706">b</span><span class="op" id="6870707">,</span>&nbsp;<span class="ident" id="6870709">src</span><span class="op" id="6870712">,</span>&nbsp;<span class="ident" id="6870714">src</span><span class="op" id="6870717">.</span><span class="ident" id="6870718">Bounds</span><span class="op" id="6870724">(</span><span class="op" id="6870725">)</span><span class="op" id="6870726">.</span><span class="ident" id="6870727">Min</span><span class="op" id="6870730">,</span>&nbsp;<span class="ident" id="6870732">nil</span><span class="op" id="6870735">,</span>&nbsp;<span class="ident" id="6870737">image</span><span class="op" id="6870742">.</span><span class="ident" id="6870743">ZP</span><span class="op" id="6870745">,</span>&nbsp;<span class="ident" id="6870747">op</span><span class="op" id="6870749">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6870755">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870824">for</span>&nbsp;<span class="ident" id="6870828">y</span>&nbsp;<span class="op" id="6870830">:=</span>&nbsp;<span class="ident" id="6870833">b</span><span class="op" id="6870834">.</span><span class="ident" id="6870835">Min</span><span class="op" id="6870838">.</span><span class="ident" id="6870839">Y</span><span class="op" id="6870840">;</span>&nbsp;<span class="ident" id="6870842">y</span>&nbsp;<span class="op" id="6870844">&lt;</span>&nbsp;<span class="ident" id="6870846">b</span><span class="op" id="6870847">.</span><span class="ident" id="6870848">Max</span><span class="op" id="6870851">.</span><span class="ident" id="6870852">Y</span><span class="op" id="6870853">;</span>&nbsp;<span class="ident" id="6870855">y</span><span class="op" id="6870856">++</span>&nbsp;<span class="op" id="6870859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870866">for</span>&nbsp;<span class="ident" id="6870870">x</span>&nbsp;<span class="op" id="6870872">:=</span>&nbsp;<span class="ident" id="6870875">b</span><span class="op" id="6870876">.</span><span class="ident" id="6870877">Min</span><span class="op" id="6870880">.</span><span class="ident" id="6870881">X</span><span class="op" id="6870882">;</span>&nbsp;<span class="ident" id="6870884">x</span>&nbsp;<span class="op" id="6870886">&lt;</span>&nbsp;<span class="ident" id="6870888">b</span><span class="op" id="6870889">.</span><span class="ident" id="6870890">Max</span><span class="op" id="6870893">.</span><span class="ident" id="6870894">X</span><span class="op" id="6870895">;</span>&nbsp;<span class="ident" id="6870897">x</span><span class="op" id="6870898">++</span>&nbsp;<span class="op" id="6870901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6870909">if</span>&nbsp;<span class="op" id="6870912">!</span><span class="ident" id="6870913">eq</span><span class="op" id="6870915">(</span><span class="ident" id="6870916">dst</span><span class="op" id="6870919">.</span><span class="ident" id="6870920">At</span><span class="op" id="6870922">(</span><span class="ident" id="6870923">x</span><span class="op" id="6870924">,</span>&nbsp;<span class="ident" id="6870926">y</span><span class="op" id="6870927">)</span><span class="op" id="6870928">,</span>&nbsp;<span class="ident" id="6870930">golden</span><span class="op" id="6870936">.</span><span class="ident" id="6870937">At</span><span class="op" id="6870939">(</span><span class="ident" id="6870940">x</span><span class="op" id="6870941">,</span>&nbsp;<span class="ident" id="6870943">y</span><span class="op" id="6870944">)</span><span class="op" id="6870945">)</span>&nbsp;<span class="op" id="6870947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6870956">t</span><span class="op" id="6870957">.</span><span class="ident" id="6870958">Errorf</span><span class="op" id="6870964">(</span><span class="string" id="6870965">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6871028">,</span>&nbsp;<span class="ident" id="6871030">xoff</span><span class="op" id="6871034">,</span>&nbsp;<span class="ident" id="6871036">yoff</span><span class="op" id="6871040">,</span>&nbsp;<span class="ident" id="6871042">x</span><span class="op" id="6871043">,</span>&nbsp;<span class="ident" id="6871045">y</span><span class="op" id="6871046">,</span>&nbsp;<span class="ident" id="6871048">dst</span><span class="op" id="6871051">.</span><span class="ident" id="6871052">At</span><span class="op" id="6871054">(</span><span class="ident" id="6871055">x</span><span class="op" id="6871056">,</span>&nbsp;<span class="ident" id="6871058">y</span><span class="op" id="6871059">)</span><span class="op" id="6871060">,</span>&nbsp;<span class="ident" id="6871062">golden</span><span class="op" id="6871068">.</span><span class="ident" id="6871069">At</span><span class="op" id="6871071">(</span><span class="ident" id="6871072">x</span><span class="op" id="6871073">,</span>&nbsp;<span class="ident" id="6871075">y</span><span class="op" id="6871076">)</span><span class="op" id="6871077">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6871086">continue</span>&nbsp;<span class="ident" id="6871095">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871124">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871131">}</span><br>
<span class="lineno"></span><span class="op" id="6871133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6871136">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="6871208">func</span>&nbsp;<span class="ident" id="6871213">TestNonZeroSrcPt</span><span class="op" id="6871229">(</span><span class="ident" id="6871230">t</span>&nbsp;<span class="op" id="6871232">*</span><span class="ident" id="6871233">testing</span><span class="op" id="6871240">.</span><span class="ident" id="6871241">T</span><span class="op" id="6871242">)</span>&nbsp;<span class="op" id="6871244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871247">a</span>&nbsp;<span class="op" id="6871249">:=</span>&nbsp;<span class="ident" id="6871252">image</span><span class="op" id="6871257">.</span><span class="ident" id="6871258">NewRGBA</span><span class="op" id="6871265">(</span><span class="ident" id="6871266">image</span><span class="op" id="6871271">.</span><span class="ident" id="6871272">Rect</span><span class="op" id="6871276">(</span><span class="num" id="6871277">0</span><span class="op" id="6871278">,</span>&nbsp;<span class="num" id="6871280">0</span><span class="op" id="6871281">,</span>&nbsp;<span class="num" id="6871283">1</span><span class="op" id="6871284">,</span>&nbsp;<span class="num" id="6871286">1</span><span class="op" id="6871287">)</span><span class="op" id="6871288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871291">b</span>&nbsp;<span class="op" id="6871293">:=</span>&nbsp;<span class="ident" id="6871296">image</span><span class="op" id="6871301">.</span><span class="ident" id="6871302">NewRGBA</span><span class="op" id="6871309">(</span><span class="ident" id="6871310">image</span><span class="op" id="6871315">.</span><span class="ident" id="6871316">Rect</span><span class="op" id="6871320">(</span><span class="num" id="6871321">0</span><span class="op" id="6871322">,</span>&nbsp;<span class="num" id="6871324">0</span><span class="op" id="6871325">,</span>&nbsp;<span class="num" id="6871327">2</span><span class="op" id="6871328">,</span>&nbsp;<span class="num" id="6871330">2</span><span class="op" id="6871331">)</span><span class="op" id="6871332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871335">b</span><span class="op" id="6871336">.</span><span class="ident" id="6871337">Set</span><span class="op" id="6871340">(</span><span class="num" id="6871341">0</span><span class="op" id="6871342">,</span>&nbsp;<span class="num" id="6871344">0</span><span class="op" id="6871345">,</span>&nbsp;<span class="ident" id="6871347">color</span><span class="op" id="6871352">.</span><span class="ident" id="6871353">RGBA</span><span class="op" id="6871357">{</span><span class="num" id="6871358">0</span><span class="op" id="6871359">,</span>&nbsp;<span class="num" id="6871361">0</span><span class="op" id="6871362">,</span>&nbsp;<span class="num" id="6871364">0</span><span class="op" id="6871365">,</span>&nbsp;<span class="num" id="6871367">5</span><span class="op" id="6871368">}</span><span class="op" id="6871369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871372">b</span><span class="op" id="6871373">.</span><span class="ident" id="6871374">Set</span><span class="op" id="6871377">(</span><span class="num" id="6871378">1</span><span class="op" id="6871379">,</span>&nbsp;<span class="num" id="6871381">0</span><span class="op" id="6871382">,</span>&nbsp;<span class="ident" id="6871384">color</span><span class="op" id="6871389">.</span><span class="ident" id="6871390">RGBA</span><span class="op" id="6871394">{</span><span class="num" id="6871395">0</span><span class="op" id="6871396">,</span>&nbsp;<span class="num" id="6871398">0</span><span class="op" id="6871399">,</span>&nbsp;<span class="num" id="6871401">5</span><span class="op" id="6871402">,</span>&nbsp;<span class="num" id="6871404">5</span><span class="op" id="6871405">}</span><span class="op" id="6871406">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871409">b</span><span class="op" id="6871410">.</span><span class="ident" id="6871411">Set</span><span class="op" id="6871414">(</span><span class="num" id="6871415">0</span><span class="op" id="6871416">,</span>&nbsp;<span class="num" id="6871418">1</span><span class="op" id="6871419">,</span>&nbsp;<span class="ident" id="6871421">color</span><span class="op" id="6871426">.</span><span class="ident" id="6871427">RGBA</span><span class="op" id="6871431">{</span><span class="num" id="6871432">0</span><span class="op" id="6871433">,</span>&nbsp;<span class="num" id="6871435">5</span><span class="op" id="6871436">,</span>&nbsp;<span class="num" id="6871438">0</span><span class="op" id="6871439">,</span>&nbsp;<span class="num" id="6871441">5</span><span class="op" id="6871442">}</span><span class="op" id="6871443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871446">b</span><span class="op" id="6871447">.</span><span class="ident" id="6871448">Set</span><span class="op" id="6871451">(</span><span class="num" id="6871452">1</span><span class="op" id="6871453">,</span>&nbsp;<span class="num" id="6871455">1</span><span class="op" id="6871456">,</span>&nbsp;<span class="ident" id="6871458">color</span><span class="op" id="6871463">.</span><span class="ident" id="6871464">RGBA</span><span class="op" id="6871468">{</span><span class="num" id="6871469">5</span><span class="op" id="6871470">,</span>&nbsp;<span class="num" id="6871472">0</span><span class="op" id="6871473">,</span>&nbsp;<span class="num" id="6871475">0</span><span class="op" id="6871476">,</span>&nbsp;<span class="num" id="6871478">5</span><span class="op" id="6871479">}</span><span class="op" id="6871480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871483">Draw</span><span class="op" id="6871487">(</span><span class="ident" id="6871488">a</span><span class="op" id="6871489">,</span>&nbsp;<span class="ident" id="6871491">image</span><span class="op" id="6871496">.</span><span class="ident" id="6871497">Rect</span><span class="op" id="6871501">(</span><span class="num" id="6871502">0</span><span class="op" id="6871503">,</span>&nbsp;<span class="num" id="6871505">0</span><span class="op" id="6871506">,</span>&nbsp;<span class="num" id="6871508">1</span><span class="op" id="6871509">,</span>&nbsp;<span class="num" id="6871511">1</span><span class="op" id="6871512">)</span><span class="op" id="6871513">,</span>&nbsp;<span class="ident" id="6871515">b</span><span class="op" id="6871516">,</span>&nbsp;<span class="ident" id="6871518">image</span><span class="op" id="6871523">.</span><span class="ident" id="6871524">Pt</span><span class="op" id="6871526">(</span><span class="num" id="6871527">1</span><span class="op" id="6871528">,</span>&nbsp;<span class="num" id="6871530">1</span><span class="op" id="6871531">)</span><span class="op" id="6871532">,</span>&nbsp;<span class="ident" id="6871534">Over</span><span class="op" id="6871538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6871541">if</span>&nbsp;<span class="op" id="6871544">!</span><span class="ident" id="6871545">eq</span><span class="op" id="6871547">(</span><span class="ident" id="6871548">color</span><span class="op" id="6871553">.</span><span class="ident" id="6871554">RGBA</span><span class="op" id="6871558">{</span><span class="num" id="6871559">5</span><span class="op" id="6871560">,</span>&nbsp;<span class="num" id="6871562">0</span><span class="op" id="6871563">,</span>&nbsp;<span class="num" id="6871565">0</span><span class="op" id="6871566">,</span>&nbsp;<span class="num" id="6871568">5</span><span class="op" id="6871569">}</span><span class="op" id="6871570">,</span>&nbsp;<span class="ident" id="6871572">a</span><span class="op" id="6871573">.</span><span class="ident" id="6871574">At</span><span class="op" id="6871576">(</span><span class="num" id="6871577">0</span><span class="op" id="6871578">,</span>&nbsp;<span class="num" id="6871580">0</span><span class="op" id="6871581">)</span><span class="op" id="6871582">)</span>&nbsp;<span class="op" id="6871584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871588">t</span><span class="op" id="6871589">.</span><span class="ident" id="6871590">Errorf</span><span class="op" id="6871596">(</span><span class="string" id="6871597">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6871630">,</span>&nbsp;<span class="ident" id="6871632">color</span><span class="op" id="6871637">.</span><span class="ident" id="6871638">RGBA</span><span class="op" id="6871642">{</span><span class="num" id="6871643">5</span><span class="op" id="6871644">,</span>&nbsp;<span class="num" id="6871646">0</span><span class="op" id="6871647">,</span>&nbsp;<span class="num" id="6871649">0</span><span class="op" id="6871650">,</span>&nbsp;<span class="num" id="6871652">5</span><span class="op" id="6871653">}</span><span class="op" id="6871654">,</span>&nbsp;<span class="ident" id="6871656">a</span><span class="op" id="6871657">.</span><span class="ident" id="6871658">At</span><span class="op" id="6871660">(</span><span class="num" id="6871661">0</span><span class="op" id="6871662">,</span>&nbsp;<span class="num" id="6871664">0</span><span class="op" id="6871665">)</span><span class="op" id="6871666">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6871669">}</span><br>
<span class="lineno"></span><span class="op" id="6871671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6871674">func</span>&nbsp;<span class="ident" id="6871679">TestFill</span><span class="op" id="6871687">(</span><span class="ident" id="6871688">t</span>&nbsp;<span class="op" id="6871690">*</span><span class="ident" id="6871691">testing</span><span class="op" id="6871698">.</span><span class="ident" id="6871699">T</span><span class="op" id="6871700">)</span>&nbsp;<span class="op" id="6871702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871705">rr</span>&nbsp;<span class="op" id="6871708">:=</span>&nbsp;<span class="op" id="6871711">[</span><span class="op" id="6871712">]</span><span class="ident" id="6871713">image</span><span class="op" id="6871718">.</span><span class="ident" id="6871719">Rectangle</span><span class="op" id="6871728">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871732">image</span><span class="op" id="6871737">.</span><span class="ident" id="6871738">Rect</span><span class="op" id="6871742">(</span><span class="num" id="6871743">0</span><span class="op" id="6871744">,</span>&nbsp;<span class="num" id="6871746">0</span><span class="op" id="6871747">,</span>&nbsp;<span class="num" id="6871749">0</span><span class="op" id="6871750">,</span>&nbsp;<span class="num" id="6871752">0</span><span class="op" id="6871753">)</span><span class="op" id="6871754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871758">image</span><span class="op" id="6871763">.</span><span class="ident" id="6871764">Rect</span><span class="op" id="6871768">(</span><span class="num" id="6871769">0</span><span class="op" id="6871770">,</span>&nbsp;<span class="num" id="6871772">0</span><span class="op" id="6871773">,</span>&nbsp;<span class="num" id="6871775">40</span><span class="op" id="6871777">,</span>&nbsp;<span class="num" id="6871779">30</span><span class="op" id="6871781">)</span><span class="op" id="6871782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871786">image</span><span class="op" id="6871791">.</span><span class="ident" id="6871792">Rect</span><span class="op" id="6871796">(</span><span class="num" id="6871797">10</span><span class="op" id="6871799">,</span>&nbsp;<span class="num" id="6871801">0</span><span class="op" id="6871802">,</span>&nbsp;<span class="num" id="6871804">40</span><span class="op" id="6871806">,</span>&nbsp;<span class="num" id="6871808">30</span><span class="op" id="6871810">)</span><span class="op" id="6871811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871815">image</span><span class="op" id="6871820">.</span><span class="ident" id="6871821">Rect</span><span class="op" id="6871825">(</span><span class="num" id="6871826">0</span><span class="op" id="6871827">,</span>&nbsp;<span class="num" id="6871829">20</span><span class="op" id="6871831">,</span>&nbsp;<span class="num" id="6871833">40</span><span class="op" id="6871835">,</span>&nbsp;<span class="num" id="6871837">30</span><span class="op" id="6871839">)</span><span class="op" id="6871840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871844">image</span><span class="op" id="6871849">.</span><span class="ident" id="6871850">Rect</span><span class="op" id="6871854">(</span><span class="num" id="6871855">10</span><span class="op" id="6871857">,</span>&nbsp;<span class="num" id="6871859">20</span><span class="op" id="6871861">,</span>&nbsp;<span class="num" id="6871863">40</span><span class="op" id="6871865">,</span>&nbsp;<span class="num" id="6871867">30</span><span class="op" id="6871869">)</span><span class="op" id="6871870">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871874">image</span><span class="op" id="6871879">.</span><span class="ident" id="6871880">Rect</span><span class="op" id="6871884">(</span><span class="num" id="6871885">10</span><span class="op" id="6871887">,</span>&nbsp;<span class="num" id="6871889">20</span><span class="op" id="6871891">,</span>&nbsp;<span class="num" id="6871893">15</span><span class="op" id="6871895">,</span>&nbsp;<span class="num" id="6871897">25</span><span class="op" id="6871899">)</span><span class="op" id="6871900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871904">image</span><span class="op" id="6871909">.</span><span class="ident" id="6871910">Rect</span><span class="op" id="6871914">(</span><span class="num" id="6871915">10</span><span class="op" id="6871917">,</span>&nbsp;<span class="num" id="6871919">0</span><span class="op" id="6871920">,</span>&nbsp;<span class="num" id="6871922">35</span><span class="op" id="6871924">,</span>&nbsp;<span class="num" id="6871926">30</span><span class="op" id="6871928">)</span><span class="op" id="6871929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871933">image</span><span class="op" id="6871938">.</span><span class="ident" id="6871939">Rect</span><span class="op" id="6871943">(</span><span class="num" id="6871944">0</span><span class="op" id="6871945">,</span>&nbsp;<span class="num" id="6871947">15</span><span class="op" id="6871949">,</span>&nbsp;<span class="num" id="6871951">40</span><span class="op" id="6871953">,</span>&nbsp;<span class="num" id="6871955">16</span><span class="op" id="6871957">)</span><span class="op" id="6871958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871962">image</span><span class="op" id="6871967">.</span><span class="ident" id="6871968">Rect</span><span class="op" id="6871972">(</span><span class="num" id="6871973">24</span><span class="op" id="6871975">,</span>&nbsp;<span class="num" id="6871977">24</span><span class="op" id="6871979">,</span>&nbsp;<span class="num" id="6871981">25</span><span class="op" id="6871983">,</span>&nbsp;<span class="num" id="6871985">25</span><span class="op" id="6871987">)</span><span class="op" id="6871988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6871992">image</span><span class="op" id="6871997">.</span><span class="ident" id="6871998">Rect</span><span class="op" id="6872002">(</span><span class="num" id="6872003">23</span><span class="op" id="6872005">,</span>&nbsp;<span class="num" id="6872007">23</span><span class="op" id="6872009">,</span>&nbsp;<span class="num" id="6872011">26</span><span class="op" id="6872013">,</span>&nbsp;<span class="num" id="6872015">26</span><span class="op" id="6872017">)</span><span class="op" id="6872018">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872022">image</span><span class="op" id="6872027">.</span><span class="ident" id="6872028">Rect</span><span class="op" id="6872032">(</span><span class="num" id="6872033">22</span><span class="op" id="6872035">,</span>&nbsp;<span class="num" id="6872037">22</span><span class="op" id="6872039">,</span>&nbsp;<span class="num" id="6872041">27</span><span class="op" id="6872043">,</span>&nbsp;<span class="num" id="6872045">27</span><span class="op" id="6872047">)</span><span class="op" id="6872048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872052">image</span><span class="op" id="6872057">.</span><span class="ident" id="6872058">Rect</span><span class="op" id="6872062">(</span><span class="num" id="6872063">21</span><span class="op" id="6872065">,</span>&nbsp;<span class="num" id="6872067">21</span><span class="op" id="6872069">,</span>&nbsp;<span class="num" id="6872071">28</span><span class="op" id="6872073">,</span>&nbsp;<span class="num" id="6872075">28</span><span class="op" id="6872077">)</span><span class="op" id="6872078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872082">image</span><span class="op" id="6872087">.</span><span class="ident" id="6872088">Rect</span><span class="op" id="6872092">(</span><span class="num" id="6872093">20</span><span class="op" id="6872095">,</span>&nbsp;<span class="num" id="6872097">20</span><span class="op" id="6872099">,</span>&nbsp;<span class="num" id="6872101">29</span><span class="op" id="6872103">,</span>&nbsp;<span class="num" id="6872105">29</span><span class="op" id="6872107">)</span><span class="op" id="6872108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872114">for</span>&nbsp;<span class="ident" id="6872118">_</span><span class="op" id="6872119">,</span>&nbsp;<span class="ident" id="6872121">r</span>&nbsp;<span class="op" id="6872123">:=</span>&nbsp;<span class="keyword" id="6872126">range</span>&nbsp;<span class="ident" id="6872132">rr</span>&nbsp;<span class="op" id="6872135">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872139">m</span>&nbsp;<span class="op" id="6872141">:=</span>&nbsp;<span class="ident" id="6872144">image</span><span class="op" id="6872149">.</span><span class="ident" id="6872150">NewRGBA</span><span class="op" id="6872157">(</span><span class="ident" id="6872158">image</span><span class="op" id="6872163">.</span><span class="ident" id="6872164">Rect</span><span class="op" id="6872168">(</span><span class="num" id="6872169">0</span><span class="op" id="6872170">,</span>&nbsp;<span class="num" id="6872172">0</span><span class="op" id="6872173">,</span>&nbsp;<span class="num" id="6872175">40</span><span class="op" id="6872177">,</span>&nbsp;<span class="num" id="6872179">30</span><span class="op" id="6872181">)</span><span class="op" id="6872182">)</span><span class="op" id="6872183">.</span><span class="ident" id="6872184">SubImage</span><span class="op" id="6872192">(</span><span class="ident" id="6872193">r</span><span class="op" id="6872194">)</span><span class="op" id="6872195">.</span><span class="op" id="6872196">(</span><span class="op" id="6872197">*</span><span class="ident" id="6872198">image</span><span class="op" id="6872203">.</span><span class="ident" id="6872204">RGBA</span><span class="op" id="6872208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872212">b</span>&nbsp;<span class="op" id="6872214">:=</span>&nbsp;<span class="ident" id="6872217">m</span><span class="op" id="6872218">.</span><span class="ident" id="6872219">Bounds</span><span class="op" id="6872225">(</span><span class="op" id="6872226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872230">c</span>&nbsp;<span class="op" id="6872232">:=</span>&nbsp;<span class="ident" id="6872235">color</span><span class="op" id="6872240">.</span><span class="ident" id="6872241">RGBA</span><span class="op" id="6872245">{</span><span class="num" id="6872246">11</span><span class="op" id="6872248">,</span>&nbsp;<span class="num" id="6872250">0</span><span class="op" id="6872251">,</span>&nbsp;<span class="num" id="6872253">0</span><span class="op" id="6872254">,</span>&nbsp;<span class="num" id="6872256">255</span><span class="op" id="6872259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872263">src</span>&nbsp;<span class="op" id="6872267">:=</span>&nbsp;<span class="op" id="6872270">&amp;</span><span class="ident" id="6872271">image</span><span class="op" id="6872276">.</span><span class="ident" id="6872277">Uniform</span><span class="op" id="6872284">{</span><span class="ident" id="6872285">C</span><span class="op" id="6872286">:</span>&nbsp;<span class="ident" id="6872288">c</span><span class="op" id="6872289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872293">check</span>&nbsp;<span class="op" id="6872299">:=</span>&nbsp;<span class="keyword" id="6872302">func</span><span class="op" id="6872306">(</span><span class="ident" id="6872307">desc</span>&nbsp;<span class="builtintype" id="6872312">string</span><span class="op" id="6872318">)</span>&nbsp;<span class="op" id="6872320">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872325">for</span>&nbsp;<span class="ident" id="6872329">y</span>&nbsp;<span class="op" id="6872331">:=</span>&nbsp;<span class="ident" id="6872334">b</span><span class="op" id="6872335">.</span><span class="ident" id="6872336">Min</span><span class="op" id="6872339">.</span><span class="ident" id="6872340">Y</span><span class="op" id="6872341">;</span>&nbsp;<span class="ident" id="6872343">y</span>&nbsp;<span class="op" id="6872345">&lt;</span>&nbsp;<span class="ident" id="6872347">b</span><span class="op" id="6872348">.</span><span class="ident" id="6872349">Max</span><span class="op" id="6872352">.</span><span class="ident" id="6872353">Y</span><span class="op" id="6872354">;</span>&nbsp;<span class="ident" id="6872356">y</span><span class="op" id="6872357">++</span>&nbsp;<span class="op" id="6872360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872366">for</span>&nbsp;<span class="ident" id="6872370">x</span>&nbsp;<span class="op" id="6872372">:=</span>&nbsp;<span class="ident" id="6872375">b</span><span class="op" id="6872376">.</span><span class="ident" id="6872377">Min</span><span class="op" id="6872380">.</span><span class="ident" id="6872381">X</span><span class="op" id="6872382">;</span>&nbsp;<span class="ident" id="6872384">x</span>&nbsp;<span class="op" id="6872386">&lt;</span>&nbsp;<span class="ident" id="6872388">b</span><span class="op" id="6872389">.</span><span class="ident" id="6872390">Max</span><span class="op" id="6872393">.</span><span class="ident" id="6872394">X</span><span class="op" id="6872395">;</span>&nbsp;<span class="ident" id="6872397">x</span><span class="op" id="6872398">++</span>&nbsp;<span class="op" id="6872401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872408">if</span>&nbsp;<span class="op" id="6872411">!</span><span class="ident" id="6872412">eq</span><span class="op" id="6872414">(</span><span class="ident" id="6872415">c</span><span class="op" id="6872416">,</span>&nbsp;<span class="ident" id="6872418">m</span><span class="op" id="6872419">.</span><span class="ident" id="6872420">At</span><span class="op" id="6872422">(</span><span class="ident" id="6872423">x</span><span class="op" id="6872424">,</span>&nbsp;<span class="ident" id="6872426">y</span><span class="op" id="6872427">)</span><span class="op" id="6872428">)</span>&nbsp;<span class="op" id="6872430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872438">t</span><span class="op" id="6872439">.</span><span class="ident" id="6872440">Errorf</span><span class="op" id="6872446">(</span><span class="string" id="6872447">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6872506">,</span>&nbsp;<span class="ident" id="6872508">desc</span><span class="op" id="6872512">,</span>&nbsp;<span class="ident" id="6872514">x</span><span class="op" id="6872515">,</span>&nbsp;<span class="ident" id="6872517">y</span><span class="op" id="6872518">,</span>&nbsp;<span class="ident" id="6872520">r</span><span class="op" id="6872521">,</span>&nbsp;<span class="ident" id="6872523">c</span><span class="op" id="6872524">,</span>&nbsp;<span class="ident" id="6872526">m</span><span class="op" id="6872527">.</span><span class="ident" id="6872528">At</span><span class="op" id="6872530">(</span><span class="ident" id="6872531">x</span><span class="op" id="6872532">,</span>&nbsp;<span class="ident" id="6872534">y</span><span class="op" id="6872535">)</span><span class="op" id="6872536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872544">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6872575">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872604">for</span>&nbsp;<span class="ident" id="6872608">y</span>&nbsp;<span class="op" id="6872610">:=</span>&nbsp;<span class="ident" id="6872613">b</span><span class="op" id="6872614">.</span><span class="ident" id="6872615">Min</span><span class="op" id="6872618">.</span><span class="ident" id="6872619">Y</span><span class="op" id="6872620">;</span>&nbsp;<span class="ident" id="6872622">y</span>&nbsp;<span class="op" id="6872624">&lt;</span>&nbsp;<span class="ident" id="6872626">b</span><span class="op" id="6872627">.</span><span class="ident" id="6872628">Max</span><span class="op" id="6872631">.</span><span class="ident" id="6872632">Y</span><span class="op" id="6872633">;</span>&nbsp;<span class="ident" id="6872635">y</span><span class="op" id="6872636">++</span>&nbsp;<span class="op" id="6872639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872644">for</span>&nbsp;<span class="ident" id="6872648">x</span>&nbsp;<span class="op" id="6872650">:=</span>&nbsp;<span class="ident" id="6872653">b</span><span class="op" id="6872654">.</span><span class="ident" id="6872655">Min</span><span class="op" id="6872658">.</span><span class="ident" id="6872659">X</span><span class="op" id="6872660">;</span>&nbsp;<span class="ident" id="6872662">x</span>&nbsp;<span class="op" id="6872664">&lt;</span>&nbsp;<span class="ident" id="6872666">b</span><span class="op" id="6872667">.</span><span class="ident" id="6872668">Max</span><span class="op" id="6872671">.</span><span class="ident" id="6872672">X</span><span class="op" id="6872673">;</span>&nbsp;<span class="ident" id="6872675">x</span><span class="op" id="6872676">++</span>&nbsp;<span class="op" id="6872679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872685">DrawMask</span><span class="op" id="6872693">(</span><span class="ident" id="6872694">m</span><span class="op" id="6872695">,</span>&nbsp;<span class="ident" id="6872697">image</span><span class="op" id="6872702">.</span><span class="ident" id="6872703">Rect</span><span class="op" id="6872707">(</span><span class="ident" id="6872708">x</span><span class="op" id="6872709">,</span>&nbsp;<span class="ident" id="6872711">y</span><span class="op" id="6872712">,</span>&nbsp;<span class="ident" id="6872714">x</span><span class="op" id="6872715">+</span><span class="num" id="6872716">1</span><span class="op" id="6872717">,</span>&nbsp;<span class="ident" id="6872719">y</span><span class="op" id="6872720">+</span><span class="num" id="6872721">1</span><span class="op" id="6872722">)</span><span class="op" id="6872723">,</span>&nbsp;<span class="ident" id="6872725">src</span><span class="op" id="6872728">,</span>&nbsp;<span class="ident" id="6872730">image</span><span class="op" id="6872735">.</span><span class="ident" id="6872736">ZP</span><span class="op" id="6872738">,</span>&nbsp;<span class="ident" id="6872740">nil</span><span class="op" id="6872743">,</span>&nbsp;<span class="ident" id="6872745">image</span><span class="op" id="6872750">.</span><span class="ident" id="6872751">ZP</span><span class="op" id="6872753">,</span>&nbsp;<span class="ident" id="6872755">Src</span><span class="op" id="6872758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6872767">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872771">check</span><span class="op" id="6872776">(</span><span class="string" id="6872777">&#34;pixel&#34;</span><span class="op" id="6872784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6872788">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872815">c</span>&nbsp;<span class="op" id="6872817">=</span>&nbsp;<span class="ident" id="6872819">color</span><span class="op" id="6872824">.</span><span class="ident" id="6872825">RGBA</span><span class="op" id="6872829">{</span><span class="num" id="6872830">0</span><span class="op" id="6872831">,</span>&nbsp;<span class="num" id="6872833">22</span><span class="op" id="6872835">,</span>&nbsp;<span class="num" id="6872837">0</span><span class="op" id="6872838">,</span>&nbsp;<span class="num" id="6872840">255</span><span class="op" id="6872843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872847">src</span>&nbsp;<span class="op" id="6872851">=</span>&nbsp;<span class="op" id="6872853">&amp;</span><span class="ident" id="6872854">image</span><span class="op" id="6872859">.</span><span class="ident" id="6872860">Uniform</span><span class="op" id="6872867">{</span><span class="ident" id="6872868">C</span><span class="op" id="6872869">:</span>&nbsp;<span class="ident" id="6872871">c</span><span class="op" id="6872872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6872876">for</span>&nbsp;<span class="ident" id="6872880">y</span>&nbsp;<span class="op" id="6872882">:=</span>&nbsp;<span class="ident" id="6872885">b</span><span class="op" id="6872886">.</span><span class="ident" id="6872887">Min</span><span class="op" id="6872890">.</span><span class="ident" id="6872891">Y</span><span class="op" id="6872892">;</span>&nbsp;<span class="ident" id="6872894">y</span>&nbsp;<span class="op" id="6872896">&lt;</span>&nbsp;<span class="ident" id="6872898">b</span><span class="op" id="6872899">.</span><span class="ident" id="6872900">Max</span><span class="op" id="6872903">.</span><span class="ident" id="6872904">Y</span><span class="op" id="6872905">;</span>&nbsp;<span class="ident" id="6872907">y</span><span class="op" id="6872908">++</span>&nbsp;<span class="op" id="6872911">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6872916">DrawMask</span><span class="op" id="6872924">(</span><span class="ident" id="6872925">m</span><span class="op" id="6872926">,</span>&nbsp;<span class="ident" id="6872928">image</span><span class="op" id="6872933">.</span><span class="ident" id="6872934">Rect</span><span class="op" id="6872938">(</span><span class="ident" id="6872939">b</span><span class="op" id="6872940">.</span><span class="ident" id="6872941">Min</span><span class="op" id="6872944">.</span><span class="ident" id="6872945">X</span><span class="op" id="6872946">,</span>&nbsp;<span class="ident" id="6872948">y</span><span class="op" id="6872949">,</span>&nbsp;<span class="ident" id="6872951">b</span><span class="op" id="6872952">.</span><span class="ident" id="6872953">Max</span><span class="op" id="6872956">.</span><span class="ident" id="6872957">X</span><span class="op" id="6872958">,</span>&nbsp;<span class="ident" id="6872960">y</span><span class="op" id="6872961">+</span><span class="num" id="6872962">1</span><span class="op" id="6872963">)</span><span class="op" id="6872964">,</span>&nbsp;<span class="ident" id="6872966">src</span><span class="op" id="6872969">,</span>&nbsp;<span class="ident" id="6872971">image</span><span class="op" id="6872976">.</span><span class="ident" id="6872977">ZP</span><span class="op" id="6872979">,</span>&nbsp;<span class="ident" id="6872981">nil</span><span class="op" id="6872984">,</span>&nbsp;<span class="ident" id="6872986">image</span><span class="op" id="6872991">.</span><span class="ident" id="6872992">ZP</span><span class="op" id="6872994">,</span>&nbsp;<span class="ident" id="6872996">Src</span><span class="op" id="6872999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6873003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873007">check</span><span class="op" id="6873012">(</span><span class="string" id="6873013">&#34;row&#34;</span><span class="op" id="6873018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6873022">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873052">c</span>&nbsp;<span class="op" id="6873054">=</span>&nbsp;<span class="ident" id="6873056">color</span><span class="op" id="6873061">.</span><span class="ident" id="6873062">RGBA</span><span class="op" id="6873066">{</span><span class="num" id="6873067">0</span><span class="op" id="6873068">,</span>&nbsp;<span class="num" id="6873070">0</span><span class="op" id="6873071">,</span>&nbsp;<span class="num" id="6873073">33</span><span class="op" id="6873075">,</span>&nbsp;<span class="num" id="6873077">255</span><span class="op" id="6873080">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873084">src</span>&nbsp;<span class="op" id="6873088">=</span>&nbsp;<span class="op" id="6873090">&amp;</span><span class="ident" id="6873091">image</span><span class="op" id="6873096">.</span><span class="ident" id="6873097">Uniform</span><span class="op" id="6873104">{</span><span class="ident" id="6873105">C</span><span class="op" id="6873106">:</span>&nbsp;<span class="ident" id="6873108">c</span><span class="op" id="6873109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6873113">for</span>&nbsp;<span class="ident" id="6873117">x</span>&nbsp;<span class="op" id="6873119">:=</span>&nbsp;<span class="ident" id="6873122">b</span><span class="op" id="6873123">.</span><span class="ident" id="6873124">Min</span><span class="op" id="6873127">.</span><span class="ident" id="6873128">X</span><span class="op" id="6873129">;</span>&nbsp;<span class="ident" id="6873131">x</span>&nbsp;<span class="op" id="6873133">&lt;</span>&nbsp;<span class="ident" id="6873135">b</span><span class="op" id="6873136">.</span><span class="ident" id="6873137">Max</span><span class="op" id="6873140">.</span><span class="ident" id="6873141">X</span><span class="op" id="6873142">;</span>&nbsp;<span class="ident" id="6873144">x</span><span class="op" id="6873145">++</span>&nbsp;<span class="op" id="6873148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873153">DrawMask</span><span class="op" id="6873161">(</span><span class="ident" id="6873162">m</span><span class="op" id="6873163">,</span>&nbsp;<span class="ident" id="6873165">image</span><span class="op" id="6873170">.</span><span class="ident" id="6873171">Rect</span><span class="op" id="6873175">(</span><span class="ident" id="6873176">x</span><span class="op" id="6873177">,</span>&nbsp;<span class="ident" id="6873179">b</span><span class="op" id="6873180">.</span><span class="ident" id="6873181">Min</span><span class="op" id="6873184">.</span><span class="ident" id="6873185">Y</span><span class="op" id="6873186">,</span>&nbsp;<span class="ident" id="6873188">x</span><span class="op" id="6873189">+</span><span class="num" id="6873190">1</span><span class="op" id="6873191">,</span>&nbsp;<span class="ident" id="6873193">b</span><span class="op" id="6873194">.</span><span class="ident" id="6873195">Max</span><span class="op" id="6873198">.</span><span class="ident" id="6873199">Y</span><span class="op" id="6873200">)</span><span class="op" id="6873201">,</span>&nbsp;<span class="ident" id="6873203">src</span><span class="op" id="6873206">,</span>&nbsp;<span class="ident" id="6873208">image</span><span class="op" id="6873213">.</span><span class="ident" id="6873214">ZP</span><span class="op" id="6873216">,</span>&nbsp;<span class="ident" id="6873218">nil</span><span class="op" id="6873221">,</span>&nbsp;<span class="ident" id="6873223">image</span><span class="op" id="6873228">.</span><span class="ident" id="6873229">ZP</span><span class="op" id="6873231">,</span>&nbsp;<span class="ident" id="6873233">Src</span><span class="op" id="6873236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6873240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873244">check</span><span class="op" id="6873249">(</span><span class="string" id="6873250">&#34;column&#34;</span><span class="op" id="6873258">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6873262">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873297">c</span>&nbsp;<span class="op" id="6873299">=</span>&nbsp;<span class="ident" id="6873301">color</span><span class="op" id="6873306">.</span><span class="ident" id="6873307">RGBA</span><span class="op" id="6873311">{</span><span class="num" id="6873312">44</span><span class="op" id="6873314">,</span>&nbsp;<span class="num" id="6873316">55</span><span class="op" id="6873318">,</span>&nbsp;<span class="num" id="6873320">66</span><span class="op" id="6873322">,</span>&nbsp;<span class="num" id="6873324">77</span><span class="op" id="6873326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873330">src</span>&nbsp;<span class="op" id="6873334">=</span>&nbsp;<span class="op" id="6873336">&amp;</span><span class="ident" id="6873337">image</span><span class="op" id="6873342">.</span><span class="ident" id="6873343">Uniform</span><span class="op" id="6873350">{</span><span class="ident" id="6873351">C</span><span class="op" id="6873352">:</span>&nbsp;<span class="ident" id="6873354">c</span><span class="op" id="6873355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873359">DrawMask</span><span class="op" id="6873367">(</span><span class="ident" id="6873368">m</span><span class="op" id="6873369">,</span>&nbsp;<span class="ident" id="6873371">b</span><span class="op" id="6873372">,</span>&nbsp;<span class="ident" id="6873374">src</span><span class="op" id="6873377">,</span>&nbsp;<span class="ident" id="6873379">image</span><span class="op" id="6873384">.</span><span class="ident" id="6873385">ZP</span><span class="op" id="6873387">,</span>&nbsp;<span class="ident" id="6873389">nil</span><span class="op" id="6873392">,</span>&nbsp;<span class="ident" id="6873394">image</span><span class="op" id="6873399">.</span><span class="ident" id="6873400">ZP</span><span class="op" id="6873402">,</span>&nbsp;<span class="ident" id="6873404">Src</span><span class="op" id="6873407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873411">check</span><span class="op" id="6873416">(</span><span class="string" id="6873417">&#34;whole&#34;</span><span class="op" id="6873424">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6873427">}</span><br>
<span class="lineno"></span><span class="op" id="6873429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6873432">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="6873507">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="6873584">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="6873622">func</span>&nbsp;<span class="ident" id="6873627">TestFloydSteinbergCheckerboard</span><span class="op" id="6873657">(</span><span class="ident" id="6873658">t</span>&nbsp;<span class="op" id="6873660">*</span><span class="ident" id="6873661">testing</span><span class="op" id="6873668">.</span><span class="ident" id="6873669">T</span><span class="op" id="6873670">)</span>&nbsp;<span class="op" id="6873672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873675">b</span>&nbsp;<span class="op" id="6873677">:=</span>&nbsp;<span class="ident" id="6873680">image</span><span class="op" id="6873685">.</span><span class="ident" id="6873686">Rect</span><span class="op" id="6873690">(</span><span class="num" id="6873691">0</span><span class="op" id="6873692">,</span>&nbsp;<span class="num" id="6873694">0</span><span class="op" id="6873695">,</span>&nbsp;<span class="num" id="6873697">640</span><span class="op" id="6873700">,</span>&nbsp;<span class="num" id="6873702">480</span><span class="op" id="6873705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6873708">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873781">src</span>&nbsp;<span class="op" id="6873785">:=</span>&nbsp;<span class="op" id="6873788">&amp;</span><span class="ident" id="6873789">image</span><span class="op" id="6873794">.</span><span class="ident" id="6873795">Uniform</span><span class="op" id="6873802">{</span><span class="ident" id="6873803">color</span><span class="op" id="6873808">.</span><span class="ident" id="6873809">Gray16</span><span class="op" id="6873815">{</span><span class="num" id="6873816">0x7fff</span><span class="op" id="6873822">}</span><span class="op" id="6873823">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873826">dst</span>&nbsp;<span class="op" id="6873830">:=</span>&nbsp;<span class="ident" id="6873833">image</span><span class="op" id="6873838">.</span><span class="ident" id="6873839">NewPaletted</span><span class="op" id="6873850">(</span><span class="ident" id="6873851">b</span><span class="op" id="6873852">,</span>&nbsp;<span class="ident" id="6873854">color</span><span class="op" id="6873859">.</span><span class="ident" id="6873860">Palette</span><span class="op" id="6873867">{</span><span class="ident" id="6873868">color</span><span class="op" id="6873873">.</span><span class="ident" id="6873874">Black</span><span class="op" id="6873879">,</span>&nbsp;<span class="ident" id="6873881">color</span><span class="op" id="6873886">.</span><span class="ident" id="6873887">White</span><span class="op" id="6873892">}</span><span class="op" id="6873893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873896">FloydSteinberg</span><span class="op" id="6873910">.</span><span class="ident" id="6873911">Draw</span><span class="op" id="6873915">(</span><span class="ident" id="6873916">dst</span><span class="op" id="6873919">,</span>&nbsp;<span class="ident" id="6873921">b</span><span class="op" id="6873922">,</span>&nbsp;<span class="ident" id="6873924">src</span><span class="op" id="6873927">,</span>&nbsp;<span class="ident" id="6873929">image</span><span class="op" id="6873934">.</span><span class="ident" id="6873935">Point</span><span class="op" id="6873940">{</span><span class="op" id="6873941">}</span><span class="op" id="6873942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6873945">nErr</span>&nbsp;<span class="op" id="6873950">:=</span>&nbsp;<span class="num" id="6873953">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6873956">for</span>&nbsp;<span class="ident" id="6873960">y</span>&nbsp;<span class="op" id="6873962">:=</span>&nbsp;<span class="ident" id="6873965">b</span><span class="op" id="6873966">.</span><span class="ident" id="6873967">Min</span><span class="op" id="6873970">.</span><span class="ident" id="6873971">Y</span><span class="op" id="6873972">;</span>&nbsp;<span class="ident" id="6873974">y</span>&nbsp;<span class="op" id="6873976">&lt;</span>&nbsp;<span class="ident" id="6873978">b</span><span class="op" id="6873979">.</span><span class="ident" id="6873980">Max</span><span class="op" id="6873983">.</span><span class="ident" id="6873984">Y</span><span class="op" id="6873985">;</span>&nbsp;<span class="ident" id="6873987">y</span><span class="op" id="6873988">++</span>&nbsp;<span class="op" id="6873991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6873995">for</span>&nbsp;<span class="ident" id="6873999">x</span>&nbsp;<span class="op" id="6874001">:=</span>&nbsp;<span class="ident" id="6874004">b</span><span class="op" id="6874005">.</span><span class="ident" id="6874006">Min</span><span class="op" id="6874009">.</span><span class="ident" id="6874010">X</span><span class="op" id="6874011">;</span>&nbsp;<span class="ident" id="6874013">x</span>&nbsp;<span class="op" id="6874015">&lt;</span>&nbsp;<span class="ident" id="6874017">b</span><span class="op" id="6874018">.</span><span class="ident" id="6874019">Max</span><span class="op" id="6874022">.</span><span class="ident" id="6874023">X</span><span class="op" id="6874024">;</span>&nbsp;<span class="ident" id="6874026">x</span><span class="op" id="6874027">++</span>&nbsp;<span class="op" id="6874030">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874035">got</span>&nbsp;<span class="op" id="6874039">:=</span>&nbsp;<span class="ident" id="6874042">dst</span><span class="op" id="6874045">.</span><span class="ident" id="6874046">Pix</span><span class="op" id="6874049">[</span><span class="ident" id="6874050">dst</span><span class="op" id="6874053">.</span><span class="ident" id="6874054">PixOffset</span><span class="op" id="6874063">(</span><span class="ident" id="6874064">x</span><span class="op" id="6874065">,</span>&nbsp;<span class="ident" id="6874067">y</span><span class="op" id="6874068">)</span><span class="op" id="6874069">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874074">want</span>&nbsp;<span class="op" id="6874079">:=</span>&nbsp;<span class="builtintype" id="6874082">uint8</span><span class="op" id="6874087">(</span><span class="ident" id="6874088">x</span><span class="op" id="6874089">+</span><span class="ident" id="6874090">y</span><span class="op" id="6874091">)</span>&nbsp;<span class="op" id="6874093">%</span>&nbsp;<span class="num" id="6874095">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6874100">if</span>&nbsp;<span class="ident" id="6874103">got</span>&nbsp;<span class="op" id="6874107">!=</span>&nbsp;<span class="ident" id="6874110">want</span>&nbsp;<span class="op" id="6874115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874121">t</span><span class="op" id="6874122">.</span><span class="ident" id="6874123">Errorf</span><span class="op" id="6874129">(</span><span class="string" id="6874130">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6874160">,</span>&nbsp;<span class="ident" id="6874162">x</span><span class="op" id="6874163">,</span>&nbsp;<span class="ident" id="6874165">y</span><span class="op" id="6874166">,</span>&nbsp;<span class="ident" id="6874168">got</span><span class="op" id="6874171">,</span>&nbsp;<span class="ident" id="6874173">want</span><span class="op" id="6874177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6874183">if</span>&nbsp;<span class="ident" id="6874186">nErr</span><span class="op" id="6874190">++</span><span class="op" id="6874192">;</span>&nbsp;<span class="ident" id="6874194">nErr</span>&nbsp;<span class="op" id="6874199">==</span>&nbsp;<span class="num" id="6874202">10</span>&nbsp;<span class="op" id="6874205">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874212">t</span><span class="op" id="6874213">.</span><span class="ident" id="6874214">Fatal</span><span class="op" id="6874219">(</span><span class="string" id="6874220">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="6874246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874264">}</span><br>
<span class="lineno">380</span><span class="op" id="6874266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6874269">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="6874348">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="6874380">type</span>&nbsp;<span class="ident" id="6874385">embeddedPaletted</span>&nbsp;<span class="keyword" id="6874402">struct</span>&nbsp;<span class="op" id="6874409">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874412">*</span><span class="ident" id="6874413">image</span><span class="op" id="6874418">.</span><span class="ident" id="6874419">Paletted</span><br>
<span class="lineno"></span><span class="op" id="6874428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6874431">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6874501">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="6874553">func</span>&nbsp;<span class="ident" id="6874558">TestPaletted</span><span class="op" id="6874570">(</span><span class="ident" id="6874571">t</span>&nbsp;<span class="op" id="6874573">*</span><span class="ident" id="6874574">testing</span><span class="op" id="6874581">.</span><span class="ident" id="6874582">T</span><span class="op" id="6874583">)</span>&nbsp;<span class="op" id="6874585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874588">f</span><span class="op" id="6874589">,</span>&nbsp;<span class="ident" id="6874591">err</span>&nbsp;<span class="op" id="6874595">:=</span>&nbsp;<span class="ident" id="6874598">os</span><span class="op" id="6874600">.</span><span class="ident" id="6874601">Open</span><span class="op" id="6874605">(</span><span class="string" id="6874606">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6874633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6874636">if</span>&nbsp;<span class="ident" id="6874639">err</span>&nbsp;<span class="op" id="6874643">!=</span>&nbsp;<span class="ident" id="6874646">nil</span>&nbsp;<span class="op" id="6874650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874654">t</span><span class="op" id="6874655">.</span><span class="ident" id="6874656">Fatalf</span><span class="op" id="6874662">(</span><span class="string" id="6874663">&#34;open:&nbsp;%v&#34;</span><span class="op" id="6874673">,</span>&nbsp;<span class="ident" id="6874675">err</span><span class="op" id="6874678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874681">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6874684">defer</span>&nbsp;<span class="ident" id="6874690">f</span><span class="op" id="6874691">.</span><span class="ident" id="6874692">Close</span><span class="op" id="6874697">(</span><span class="op" id="6874698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874701">src</span><span class="op" id="6874704">,</span>&nbsp;<span class="ident" id="6874706">err</span>&nbsp;<span class="op" id="6874710">:=</span>&nbsp;<span class="ident" id="6874713">png</span><span class="op" id="6874716">.</span><span class="ident" id="6874717">Decode</span><span class="op" id="6874723">(</span><span class="ident" id="6874724">f</span><span class="op" id="6874725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6874728">if</span>&nbsp;<span class="ident" id="6874731">err</span>&nbsp;<span class="op" id="6874735">!=</span>&nbsp;<span class="ident" id="6874738">nil</span>&nbsp;<span class="op" id="6874742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874746">t</span><span class="op" id="6874747">.</span><span class="ident" id="6874748">Fatalf</span><span class="op" id="6874754">(</span><span class="string" id="6874755">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6874767">,</span>&nbsp;<span class="ident" id="6874769">err</span><span class="op" id="6874772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874775">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874778">b</span>&nbsp;<span class="op" id="6874780">:=</span>&nbsp;<span class="ident" id="6874783">src</span><span class="op" id="6874786">.</span><span class="ident" id="6874787">Bounds</span><span class="op" id="6874793">(</span><span class="op" id="6874794">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874798">cgaPalette</span>&nbsp;<span class="op" id="6874809">:=</span>&nbsp;<span class="ident" id="6874812">color</span><span class="op" id="6874817">.</span><span class="ident" id="6874818">Palette</span><span class="op" id="6874825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874829">color</span><span class="op" id="6874834">.</span><span class="ident" id="6874835">RGBA</span><span class="op" id="6874839">{</span><span class="num" id="6874840">0x00</span><span class="op" id="6874844">,</span>&nbsp;<span class="num" id="6874846">0x00</span><span class="op" id="6874850">,</span>&nbsp;<span class="num" id="6874852">0x00</span><span class="op" id="6874856">,</span>&nbsp;<span class="num" id="6874858">0xff</span><span class="op" id="6874862">}</span><span class="op" id="6874863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874867">color</span><span class="op" id="6874872">.</span><span class="ident" id="6874873">RGBA</span><span class="op" id="6874877">{</span><span class="num" id="6874878">0x55</span><span class="op" id="6874882">,</span>&nbsp;<span class="num" id="6874884">0xff</span><span class="op" id="6874888">,</span>&nbsp;<span class="num" id="6874890">0xff</span><span class="op" id="6874894">,</span>&nbsp;<span class="num" id="6874896">0xff</span><span class="op" id="6874900">}</span><span class="op" id="6874901">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874905">color</span><span class="op" id="6874910">.</span><span class="ident" id="6874911">RGBA</span><span class="op" id="6874915">{</span><span class="num" id="6874916">0xff</span><span class="op" id="6874920">,</span>&nbsp;<span class="num" id="6874922">0x55</span><span class="op" id="6874926">,</span>&nbsp;<span class="num" id="6874928">0xff</span><span class="op" id="6874932">,</span>&nbsp;<span class="num" id="6874934">0xff</span><span class="op" id="6874938">}</span><span class="op" id="6874939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874943">color</span><span class="op" id="6874948">.</span><span class="ident" id="6874949">RGBA</span><span class="op" id="6874953">{</span><span class="num" id="6874954">0xff</span><span class="op" id="6874958">,</span>&nbsp;<span class="num" id="6874960">0xff</span><span class="op" id="6874964">,</span>&nbsp;<span class="num" id="6874966">0xff</span><span class="op" id="6874970">,</span>&nbsp;<span class="num" id="6874972">0xff</span><span class="op" id="6874976">}</span><span class="op" id="6874977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6874980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6874983">drawers</span>&nbsp;<span class="op" id="6874991">:=</span>&nbsp;<span class="keyword" id="6874994">map</span><span class="op" id="6874997">[</span><span class="builtintype" id="6874998">string</span><span class="op" id="6875004">]</span><span class="ident" id="6875005">Drawer</span><span class="op" id="6875011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6875015">&#34;src&#34;</span><span class="op" id="6875020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6875034">Src</span><span class="op" id="6875037">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6875041">&#34;floyd-steinberg&#34;</span><span class="op" id="6875058">:</span>&nbsp;<span class="ident" id="6875060">FloydSteinberg</span><span class="op" id="6875074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6875077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6875080">loop</span><span class="op" id="6875084">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6875087">for</span>&nbsp;<span class="ident" id="6875091">dName</span><span class="op" id="6875096">,</span>&nbsp;<span class="ident" id="6875098">d</span>&nbsp;<span class="op" id="6875100">:=</span>&nbsp;<span class="keyword" id="6875103">range</span>&nbsp;<span class="ident" id="6875109">drawers</span>&nbsp;<span class="op" id="6875117">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6875121">dst0</span>&nbsp;<span class="op" id="6875126">:=</span>&nbsp;<span class="ident" id="6875129">image</span><span class="op" id="6875134">.</span><span class="ident" id="6875135">NewPaletted</span><span class="op" id="6875146">(</span><span class="ident" id="6875147">b</span><span class="op" id="6875148">,</span>&nbsp;<span class="ident" id="6875150">cgaPalette</span><span class="op" id="6875160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6875164">dst1</span>&nbsp;<span class="op" id="6875169">:=</span>&nbsp;<span class="ident" id="6875172">image</span><span class="op" id="6875177">.</span><span class="ident" id="6875178">NewPaletted</span><span class="op" id="6875189">(</span><span class="ident" id="6875190">b</span><span class="op" id="6875191">,</span>&nbsp;<span class="ident" id="6875193">cgaPalette</span><span class="op" id="6875203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6875207">d</span><span class="op" id="6875208">.</span><span class="ident" id="6875209">Draw</span><span class="op" id="6875213">(</span><span class="ident" id="6875214">dst0</span><span class="op" id="6875218">,</span>&nbsp;<span class="ident" id="6875220">b</span><span class="op" id="6875221">,</span>&nbsp;<span class="ident" id="6875223">src</span><span class="op" id="6875226">,</span>&nbsp;<span class="ident" id="6875228">image</span><span class="op" id="6875233">.</span><span class="ident" id="6875234">Point</span><span class="op" id="6875239">{</span><span class="op" id="6875240">}</span><span class="op" id="6875241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6875245">d</span><span class="op" id="6875246">.</span><span class="ident" id="6875247">Draw</span><span class="op" id="6875251">(</span><span class="ident" id="6875252">embeddedPaletted</span><span class="op" id="6875268">{</span><span class="ident" id="6875269">dst1</span><span class="op" id="6875273">}</span><span class="op" id="6875274">,</span>&nbsp;<span class="ident" id="6875276">b</span><span class="op" id="6875277">,</span>&nbsp;<span class="ident" id="6875279">src</span><span class="op" id="6875282">,</span>&nbsp;<span class="ident" id="6875284">image</span><span class="op" id="6875289">.</span><span class="ident" id="6875290">Point</span><span class="op" id="6875295">{</span><span class="op" id="6875296">}</span><span class="op" id="6875297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6875301">for</span>&nbsp;<span class="ident" id="6875305">y</span>&nbsp;<span class="op" id="6875307">:=</span>&nbsp;<span class="ident" id="6875310">b</span><span class="op" id="6875311">.</span><span class="ident" id="6875312">Min</span><span class="op" id="6875315">.</span><span class="ident" id="6875316">Y</span><span class="op" id="6875317">;</span>&nbsp;<span class="ident" id="6875319">y</span>&nbsp;<span class="op" id="6875321">&lt;</span>&nbsp;<span class="ident" id="6875323">b</span><span class="op" id="6875324">.</span><span class="ident" id="6875325">Max</span><span class="op" id="6875328">.</span><span class="ident" id="6875329">Y</span><span class="op" id="6875330">;</span>&nbsp;<span class="ident" id="6875332">y</span><span class="op" id="6875333">++</span>&nbsp;<span class="op" id="6875336">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6875341">for</span>&nbsp;<span class="ident" id="6875345">x</span>&nbsp;<span class="op" id="6875347">:=</span>&nbsp;<span class="ident" id="6875350">b</span><span class="op" id="6875351">.</span><span class="ident" id="6875352">Min</span><span class="op" id="6875355">.</span><span class="ident" id="6875356">X</span><span class="op" id="6875357">;</span>&nbsp;<span class="ident" id="6875359">x</span>&nbsp;<span class="op" id="6875361">&lt;</span>&nbsp;<span class="ident" id="6875363">b</span><span class="op" id="6875364">.</span><span class="ident" id="6875365">Max</span><span class="op" id="6875368">.</span><span class="ident" id="6875369">X</span><span class="op" id="6875370">;</span>&nbsp;<span class="ident" id="6875372">x</span><span class="op" id="6875373">++</span>&nbsp;<span class="op" id="6875376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6875382">if</span>&nbsp;<span class="op" id="6875385">!</span><span class="ident" id="6875386">eq</span><span class="op" id="6875388">(</span><span class="ident" id="6875389">dst0</span><span class="op" id="6875393">.</span><span class="ident" id="6875394">At</span><span class="op" id="6875396">(</span><span class="ident" id="6875397">x</span><span class="op" id="6875398">,</span>&nbsp;<span class="ident" id="6875400">y</span><span class="op" id="6875401">)</span><span class="op" id="6875402">,</span>&nbsp;<span class="ident" id="6875404">dst1</span><span class="op" id="6875408">.</span><span class="ident" id="6875409">At</span><span class="op" id="6875411">(</span><span class="ident" id="6875412">x</span><span class="op" id="6875413">,</span>&nbsp;<span class="ident" id="6875415">y</span><span class="op" id="6875416">)</span><span class="op" id="6875417">)</span>&nbsp;<span class="op" id="6875419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6875426">t</span><span class="op" id="6875427">.</span><span class="ident" id="6875428">Errorf</span><span class="op" id="6875434">(</span><span class="string" id="6875435">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6875466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6875474">dName</span><span class="op" id="6875479">,</span>&nbsp;<span class="ident" id="6875481">x</span><span class="op" id="6875482">,</span>&nbsp;<span class="ident" id="6875484">y</span><span class="op" id="6875485">,</span>&nbsp;<span class="ident" id="6875487">dst0</span><span class="op" id="6875491">.</span><span class="ident" id="6875492">At</span><span class="op" id="6875494">(</span><span class="ident" id="6875495">x</span><span class="op" id="6875496">,</span>&nbsp;<span class="ident" id="6875498">y</span><span class="op" id="6875499">)</span><span class="op" id="6875500">,</span>&nbsp;<span class="ident" id="6875502">dst1</span><span class="op" id="6875506">.</span><span class="ident" id="6875507">At</span><span class="op" id="6875509">(</span><span class="ident" id="6875510">x</span><span class="op" id="6875511">,</span>&nbsp;<span class="ident" id="6875513">y</span><span class="op" id="6875514">)</span><span class="op" id="6875515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6875522">continue</span>&nbsp;<span class="ident" id="6875531">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6875540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6875545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6875549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6875552">}</span><br>
<span class="lineno"></span><span class="op" id="6875554">}</span>
</div>
</body>
</html>
