<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/md5</h2>
<ul>
<li><a href="/gostd/crypto/md5/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5.go.html">md5.go</a></li>
<li><a href="/gostd/crypto/md5/md5_test.go.html" class="current">md5_test.go</a></li>
<li><a href="/gostd/crypto/md5/md5block.go.html">md5block.go</a></li>
<li><a href="/gostd/crypto/md5/md5block_decl.go.html">md5block_decl.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7966791">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7966846">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7966900">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7966951">package</span>&nbsp;<span class="ident" id="7966959">md5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7966964">import</span>&nbsp;<span class="op" id="7966971">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7966974">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7966989">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7966996">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7967002">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7967013">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="7967022">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7967025">type</span>&nbsp;<span class="ident" id="7967030">md5Test</span>&nbsp;<span class="keyword" id="7967038">struct</span>&nbsp;<span class="op" id="7967045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7967048">out</span>&nbsp;<span class="builtintype" id="7967052">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7967060">in</span>&nbsp;&nbsp;<span class="builtintype" id="7967064">string</span><br>
<span class="lineno"></span><span class="op" id="7967071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7967074">var</span>&nbsp;<span class="ident" id="7967078">golden</span>&nbsp;<span class="op" id="7967085">=</span>&nbsp;<span class="op" id="7967087">[</span><span class="op" id="7967088">]</span><span class="ident" id="7967089">md5Test</span><span class="op" id="7967096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967099">{</span><span class="string" id="7967100">&#34;d41d8cd98f00b204e9800998ecf8427e&#34;</span><span class="op" id="7967134">,</span>&nbsp;<span class="string" id="7967136">&#34;&#34;</span><span class="op" id="7967138">}</span><span class="op" id="7967139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967142">{</span><span class="string" id="7967143">&#34;0cc175b9c0f1b6a831c399e269772661&#34;</span><span class="op" id="7967177">,</span>&nbsp;<span class="string" id="7967179">&#34;a&#34;</span><span class="op" id="7967182">}</span><span class="op" id="7967183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967186">{</span><span class="string" id="7967187">&#34;187ef4436122d1cc2f40dc2b92f0eba0&#34;</span><span class="op" id="7967221">,</span>&nbsp;<span class="string" id="7967223">&#34;ab&#34;</span><span class="op" id="7967227">}</span><span class="op" id="7967228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967231">{</span><span class="string" id="7967232">&#34;900150983cd24fb0d6963f7d28e17f72&#34;</span><span class="op" id="7967266">,</span>&nbsp;<span class="string" id="7967268">&#34;abc&#34;</span><span class="op" id="7967273">}</span><span class="op" id="7967274">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967277">{</span><span class="string" id="7967278">&#34;e2fc714c4727ee9395f324cd2e7f331f&#34;</span><span class="op" id="7967312">,</span>&nbsp;<span class="string" id="7967314">&#34;abcd&#34;</span><span class="op" id="7967320">}</span><span class="op" id="7967321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967324">{</span><span class="string" id="7967325">&#34;ab56b4d92b40713acc5af89985d4b786&#34;</span><span class="op" id="7967359">,</span>&nbsp;<span class="string" id="7967361">&#34;abcde&#34;</span><span class="op" id="7967368">}</span><span class="op" id="7967369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967372">{</span><span class="string" id="7967373">&#34;e80b5017098950fc58aad83c8c14978e&#34;</span><span class="op" id="7967407">,</span>&nbsp;<span class="string" id="7967409">&#34;abcdef&#34;</span><span class="op" id="7967417">}</span><span class="op" id="7967418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967421">{</span><span class="string" id="7967422">&#34;7ac66c0f148de9519b8bd264312c4d64&#34;</span><span class="op" id="7967456">,</span>&nbsp;<span class="string" id="7967458">&#34;abcdefg&#34;</span><span class="op" id="7967467">}</span><span class="op" id="7967468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967471">{</span><span class="string" id="7967472">&#34;e8dc4081b13434b45189a720b77b6818&#34;</span><span class="op" id="7967506">,</span>&nbsp;<span class="string" id="7967508">&#34;abcdefgh&#34;</span><span class="op" id="7967518">}</span><span class="op" id="7967519">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967522">{</span><span class="string" id="7967523">&#34;8aa99b1f439ff71293e95357bac6fd94&#34;</span><span class="op" id="7967557">,</span>&nbsp;<span class="string" id="7967559">&#34;abcdefghi&#34;</span><span class="op" id="7967570">}</span><span class="op" id="7967571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967574">{</span><span class="string" id="7967575">&#34;a925576942e94b2ef57a066101b48876&#34;</span><span class="op" id="7967609">,</span>&nbsp;<span class="string" id="7967611">&#34;abcdefghij&#34;</span><span class="op" id="7967623">}</span><span class="op" id="7967624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967627">{</span><span class="string" id="7967628">&#34;d747fc1719c7eacb84058196cfe56d57&#34;</span><span class="op" id="7967662">,</span>&nbsp;<span class="string" id="7967664">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7967707">}</span><span class="op" id="7967708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967711">{</span><span class="string" id="7967712">&#34;bff2dcb37ef3a44ba43ab144768ca837&#34;</span><span class="op" id="7967746">,</span>&nbsp;<span class="string" id="7967748">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7967807">}</span><span class="op" id="7967808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967811">{</span><span class="string" id="7967812">&#34;0441015ecb54a7342d017ed1bcfdbea5&#34;</span><span class="op" id="7967846">,</span>&nbsp;<span class="string" id="7967848">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7967892">}</span><span class="op" id="7967893">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967896">{</span><span class="string" id="7967897">&#34;9e3cac8e9e9757a60c3ea391130d3689&#34;</span><span class="op" id="7967931">,</span>&nbsp;<span class="string" id="7967933">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7967992">}</span><span class="op" id="7967993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7967996">{</span><span class="string" id="7967997">&#34;a0f04459b031f916a59a35cc482dc039&#34;</span><span class="op" id="7968031">,</span>&nbsp;<span class="string" id="7968033">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7968093">}</span><span class="op" id="7968094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968097">{</span><span class="string" id="7968098">&#34;e7a48e0fe884faf31475d2a04b1362cc&#34;</span><span class="op" id="7968132">,</span>&nbsp;<span class="string" id="7968134">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7968163">}</span><span class="op" id="7968164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968167">{</span><span class="string" id="7968168">&#34;637d2fe925c07c113800509964fb0e06&#34;</span><span class="op" id="7968202">,</span>&nbsp;<span class="string" id="7968204">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7968273">}</span><span class="op" id="7968274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968277">{</span><span class="string" id="7968278">&#34;834a8d18d5c6562119cf4c7f5086cb71&#34;</span><span class="op" id="7968312">,</span>&nbsp;<span class="string" id="7968314">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7968373">}</span><span class="op" id="7968374">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968377">{</span><span class="string" id="7968378">&#34;de3a4d2fd6c73ec2db2abad23b444281&#34;</span><span class="op" id="7968412">,</span>&nbsp;<span class="string" id="7968414">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7968504">}</span><span class="op" id="7968505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968508">{</span><span class="string" id="7968509">&#34;acf203f997e2cf74ea3aff86985aefaf&#34;</span><span class="op" id="7968543">,</span>&nbsp;<span class="string" id="7968545">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7968622">}</span><span class="op" id="7968623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968626">{</span><span class="string" id="7968627">&#34;e1c1384cb4d2221dfdd7c795a4222c9a&#34;</span><span class="op" id="7968661">,</span>&nbsp;<span class="string" id="7968663">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7968689">}</span><span class="op" id="7968690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968693">{</span><span class="string" id="7968694">&#34;c90f3ddecc54f34228c063d7525bf644&#34;</span><span class="op" id="7968728">,</span>&nbsp;<span class="string" id="7968730">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7968781">}</span><span class="op" id="7968782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968785">{</span><span class="string" id="7968786">&#34;cdf7ab6c1fd49bd9933c43f3ea5af185&#34;</span><span class="op" id="7968820">,</span>&nbsp;<span class="string" id="7968822">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7968896">}</span><span class="op" id="7968897">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968900">{</span><span class="string" id="7968901">&#34;83bc85234942fc883c063cbd7f0ad5d0&#34;</span><span class="op" id="7968935">,</span>&nbsp;<span class="string" id="7968937">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7968985">}</span><span class="op" id="7968986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7968989">{</span><span class="string" id="7968990">&#34;277cbe255686b48dd7e8f389394d9299&#34;</span><span class="op" id="7969024">,</span>&nbsp;<span class="string" id="7969026">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7969098">}</span><span class="op" id="7969099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7969102">{</span><span class="string" id="7969103">&#34;fd3fb0a7ffb8af16603f3d3af98f8e1f&#34;</span><span class="op" id="7969137">,</span>&nbsp;<span class="string" id="7969139">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7969209">}</span><span class="op" id="7969210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7969213">{</span><span class="string" id="7969214">&#34;469b13a78ebf297ecda64d4723655154&#34;</span><span class="op" id="7969248">,</span>&nbsp;<span class="string" id="7969250">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7969284">}</span><span class="op" id="7969285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7969288">{</span><span class="string" id="7969289">&#34;63eb3a2f466410104731c4b037600110&#34;</span><span class="op" id="7969323">,</span>&nbsp;<span class="string" id="7969325">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7969415">}</span><span class="op" id="7969416">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7969419">{</span><span class="string" id="7969420">&#34;72c2ed7592debca1c90fc0100f931a2f&#34;</span><span class="op" id="7969454">,</span>&nbsp;<span class="string" id="7969456">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7969590">}</span><span class="op" id="7969591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7969594">{</span><span class="string" id="7969595">&#34;132f7619d33b523b1d9e5bd8e0928355&#34;</span><span class="op" id="7969629">,</span>&nbsp;<span class="string" id="7969631">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7969689">}</span><span class="op" id="7969690">,</span><br>
<span class="lineno"></span><span class="op" id="7969692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7969695">func</span>&nbsp;<span class="ident" id="7969700">TestGolden</span><span class="op" id="7969710">(</span><span class="ident" id="7969711">t</span>&nbsp;<span class="op" id="7969713">*</span><span class="ident" id="7969714">testing</span><span class="op" id="7969721">.</span><span class="ident" id="7969722">T</span><span class="op" id="7969723">)</span>&nbsp;<span class="op" id="7969725">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7969728">for</span>&nbsp;<span class="ident" id="7969732">i</span>&nbsp;<span class="op" id="7969734">:=</span>&nbsp;<span class="num" id="7969737">0</span><span class="op" id="7969738">;</span>&nbsp;<span class="ident" id="7969740">i</span>&nbsp;<span class="op" id="7969742">&lt;</span>&nbsp;<span class="builtinfunc" id="7969744">len</span><span class="op" id="7969747">(</span><span class="ident" id="7969748">golden</span><span class="op" id="7969754">)</span><span class="op" id="7969755">;</span>&nbsp;<span class="ident" id="7969757">i</span><span class="op" id="7969758">++</span>&nbsp;<span class="op" id="7969761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7969765">g</span>&nbsp;<span class="op" id="7969767">:=</span>&nbsp;<span class="ident" id="7969770">golden</span><span class="op" id="7969776">[</span><span class="ident" id="7969777">i</span><span class="op" id="7969778">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7969782">s</span>&nbsp;<span class="op" id="7969784">:=</span>&nbsp;<span class="ident" id="7969787">fmt</span><span class="op" id="7969790">.</span><span class="ident" id="7969791">Sprintf</span><span class="op" id="7969798">(</span><span class="string" id="7969799">&#34;%x&#34;</span><span class="op" id="7969803">,</span>&nbsp;<span class="ident" id="7969805">Sum</span><span class="op" id="7969808">(</span><span class="op" id="7969809">[</span><span class="op" id="7969810">]</span><span class="builtintype" id="7969811">byte</span><span class="op" id="7969815">(</span><span class="ident" id="7969816">g</span><span class="op" id="7969817">.</span><span class="ident" id="7969818">in</span><span class="op" id="7969820">)</span><span class="op" id="7969821">)</span><span class="op" id="7969822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7969826">if</span>&nbsp;<span class="ident" id="7969829">s</span>&nbsp;<span class="op" id="7969831">!=</span>&nbsp;<span class="ident" id="7969834">g</span><span class="op" id="7969835">.</span><span class="ident" id="7969836">out</span>&nbsp;<span class="op" id="7969840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7969845">t</span><span class="op" id="7969846">.</span><span class="ident" id="7969847">Fatalf</span><span class="op" id="7969853">(</span><span class="string" id="7969854">&#34;Sum&nbsp;function:&nbsp;md5(%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7969890">,</span>&nbsp;<span class="ident" id="7969892">g</span><span class="op" id="7969893">.</span><span class="ident" id="7969894">in</span><span class="op" id="7969896">,</span>&nbsp;<span class="ident" id="7969898">s</span><span class="op" id="7969899">,</span>&nbsp;<span class="ident" id="7969901">g</span><span class="op" id="7969902">.</span><span class="ident" id="7969903">out</span><span class="op" id="7969906">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7969910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7969914">c</span>&nbsp;<span class="op" id="7969916">:=</span>&nbsp;<span class="ident" id="7969919">New</span><span class="op" id="7969922">(</span><span class="op" id="7969923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7969927">buf</span>&nbsp;<span class="op" id="7969931">:=</span>&nbsp;<span class="builtinfunc" id="7969934">make</span><span class="op" id="7969938">(</span><span class="op" id="7969939">[</span><span class="op" id="7969940">]</span><span class="builtintype" id="7969941">byte</span><span class="op" id="7969945">,</span>&nbsp;<span class="builtinfunc" id="7969947">len</span><span class="op" id="7969950">(</span><span class="ident" id="7969951">g</span><span class="op" id="7969952">.</span><span class="ident" id="7969953">in</span><span class="op" id="7969955">)</span><span class="op" id="7969956">+</span><span class="num" id="7969957">4</span><span class="op" id="7969958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7969962">for</span>&nbsp;<span class="ident" id="7969966">j</span>&nbsp;<span class="op" id="7969968">:=</span>&nbsp;<span class="num" id="7969971">0</span><span class="op" id="7969972">;</span>&nbsp;<span class="ident" id="7969974">j</span>&nbsp;<span class="op" id="7969976">&lt;</span>&nbsp;<span class="num" id="7969978">3</span><span class="op" id="7969979">+</span><span class="num" id="7969980">4</span><span class="op" id="7969981">;</span>&nbsp;<span class="ident" id="7969983">j</span><span class="op" id="7969984">++</span>&nbsp;<span class="op" id="7969987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7969992">if</span>&nbsp;<span class="ident" id="7969995">j</span>&nbsp;<span class="op" id="7969997">&lt;</span>&nbsp;<span class="num" id="7969999">2</span>&nbsp;<span class="op" id="7970001">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970007">io</span><span class="op" id="7970009">.</span><span class="ident" id="7970010">WriteString</span><span class="op" id="7970021">(</span><span class="ident" id="7970022">c</span><span class="op" id="7970023">,</span>&nbsp;<span class="ident" id="7970025">g</span><span class="op" id="7970026">.</span><span class="ident" id="7970027">in</span><span class="op" id="7970029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970034">}</span>&nbsp;<span class="keyword" id="7970036">else</span>&nbsp;<span class="keyword" id="7970041">if</span>&nbsp;<span class="ident" id="7970044">j</span>&nbsp;<span class="op" id="7970046">==</span>&nbsp;<span class="num" id="7970049">2</span>&nbsp;<span class="op" id="7970051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970057">io</span><span class="op" id="7970059">.</span><span class="ident" id="7970060">WriteString</span><span class="op" id="7970071">(</span><span class="ident" id="7970072">c</span><span class="op" id="7970073">,</span>&nbsp;<span class="ident" id="7970075">g</span><span class="op" id="7970076">.</span><span class="ident" id="7970077">in</span><span class="op" id="7970079">[</span><span class="num" id="7970080">0</span><span class="op" id="7970081">:</span><span class="builtinfunc" id="7970082">len</span><span class="op" id="7970085">(</span><span class="ident" id="7970086">g</span><span class="op" id="7970087">.</span><span class="ident" id="7970088">in</span><span class="op" id="7970090">)</span><span class="op" id="7970091">/</span><span class="num" id="7970092">2</span><span class="op" id="7970093">]</span><span class="op" id="7970094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970100">c</span><span class="op" id="7970101">.</span><span class="ident" id="7970102">Sum</span><span class="op" id="7970105">(</span><span class="builtintype" id="7970106">nil</span><span class="op" id="7970109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970115">io</span><span class="op" id="7970117">.</span><span class="ident" id="7970118">WriteString</span><span class="op" id="7970129">(</span><span class="ident" id="7970130">c</span><span class="op" id="7970131">,</span>&nbsp;<span class="ident" id="7970133">g</span><span class="op" id="7970134">.</span><span class="ident" id="7970135">in</span><span class="op" id="7970137">[</span><span class="builtinfunc" id="7970138">len</span><span class="op" id="7970141">(</span><span class="ident" id="7970142">g</span><span class="op" id="7970143">.</span><span class="ident" id="7970144">in</span><span class="op" id="7970146">)</span><span class="op" id="7970147">/</span><span class="num" id="7970148">2</span><span class="op" id="7970149">:</span><span class="op" id="7970150">]</span><span class="op" id="7970151">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970156">}</span>&nbsp;<span class="keyword" id="7970158">else</span>&nbsp;<span class="keyword" id="7970163">if</span>&nbsp;<span class="ident" id="7970166">j</span>&nbsp;<span class="op" id="7970168">&gt;</span>&nbsp;<span class="num" id="7970170">2</span>&nbsp;<span class="op" id="7970172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7970178">//&nbsp;test&nbsp;unaligned&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970206">buf</span>&nbsp;<span class="op" id="7970210">=</span>&nbsp;<span class="ident" id="7970212">buf</span><span class="op" id="7970215">[</span><span class="num" id="7970216">1</span><span class="op" id="7970217">:</span><span class="op" id="7970218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7970224">copy</span><span class="op" id="7970228">(</span><span class="ident" id="7970229">buf</span><span class="op" id="7970232">,</span>&nbsp;<span class="ident" id="7970234">g</span><span class="op" id="7970235">.</span><span class="ident" id="7970236">in</span><span class="op" id="7970238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970244">c</span><span class="op" id="7970245">.</span><span class="ident" id="7970246">Write</span><span class="op" id="7970251">(</span><span class="ident" id="7970252">buf</span><span class="op" id="7970255">[</span><span class="op" id="7970256">:</span><span class="builtinfunc" id="7970257">len</span><span class="op" id="7970260">(</span><span class="ident" id="7970261">g</span><span class="op" id="7970262">.</span><span class="ident" id="7970263">in</span><span class="op" id="7970265">)</span><span class="op" id="7970266">]</span><span class="op" id="7970267">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970277">s</span>&nbsp;<span class="op" id="7970279">:=</span>&nbsp;<span class="ident" id="7970282">fmt</span><span class="op" id="7970285">.</span><span class="ident" id="7970286">Sprintf</span><span class="op" id="7970293">(</span><span class="string" id="7970294">&#34;%x&#34;</span><span class="op" id="7970298">,</span>&nbsp;<span class="ident" id="7970300">c</span><span class="op" id="7970301">.</span><span class="ident" id="7970302">Sum</span><span class="op" id="7970305">(</span><span class="builtintype" id="7970306">nil</span><span class="op" id="7970309">)</span><span class="op" id="7970310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970315">if</span>&nbsp;<span class="ident" id="7970318">s</span>&nbsp;<span class="op" id="7970320">!=</span>&nbsp;<span class="ident" id="7970323">g</span><span class="op" id="7970324">.</span><span class="ident" id="7970325">out</span>&nbsp;<span class="op" id="7970329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970335">t</span><span class="op" id="7970336">.</span><span class="ident" id="7970337">Fatalf</span><span class="op" id="7970343">(</span><span class="string" id="7970344">&#34;md5[%d](%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7970370">,</span>&nbsp;<span class="ident" id="7970372">j</span><span class="op" id="7970373">,</span>&nbsp;<span class="ident" id="7970375">g</span><span class="op" id="7970376">.</span><span class="ident" id="7970377">in</span><span class="op" id="7970379">,</span>&nbsp;<span class="ident" id="7970381">s</span><span class="op" id="7970382">,</span>&nbsp;<span class="ident" id="7970384">g</span><span class="op" id="7970385">.</span><span class="ident" id="7970386">out</span><span class="op" id="7970389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970394">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970399">c</span><span class="op" id="7970400">.</span><span class="ident" id="7970401">Reset</span><span class="op" id="7970406">(</span><span class="op" id="7970407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970414">}</span><br>
<span class="lineno"></span><span class="op" id="7970416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7970419">func</span>&nbsp;<span class="ident" id="7970424">TestLarge</span><span class="op" id="7970433">(</span><span class="ident" id="7970434">t</span>&nbsp;<span class="op" id="7970436">*</span><span class="ident" id="7970437">testing</span><span class="op" id="7970444">.</span><span class="ident" id="7970445">T</span><span class="op" id="7970446">)</span>&nbsp;<span class="op" id="7970448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970451">const</span>&nbsp;<span class="ident" id="7970457">N</span>&nbsp;<span class="op" id="7970459">=</span>&nbsp;<span class="num" id="7970461">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970468">ok</span>&nbsp;<span class="op" id="7970471">:=</span>&nbsp;<span class="string" id="7970474">&#34;2bb571599a4180e1d542f76904adc3df&#34;</span>&nbsp;<span class="comment" id="7970509">//&nbsp;md5sum&nbsp;of&nbsp;&#34;0123456789&#34;&nbsp;*&nbsp;1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970543">block</span>&nbsp;<span class="op" id="7970549">:=</span>&nbsp;<span class="builtinfunc" id="7970552">make</span><span class="op" id="7970556">(</span><span class="op" id="7970557">[</span><span class="op" id="7970558">]</span><span class="builtintype" id="7970559">byte</span><span class="op" id="7970563">,</span>&nbsp;<span class="num" id="7970565">10004</span><span class="op" id="7970570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970573">c</span>&nbsp;<span class="op" id="7970575">:=</span>&nbsp;<span class="ident" id="7970578">New</span><span class="op" id="7970581">(</span><span class="op" id="7970582">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970585">for</span>&nbsp;<span class="ident" id="7970589">offset</span>&nbsp;<span class="op" id="7970596">:=</span>&nbsp;<span class="num" id="7970599">0</span><span class="op" id="7970600">;</span>&nbsp;<span class="ident" id="7970602">offset</span>&nbsp;<span class="op" id="7970609">&lt;</span>&nbsp;<span class="num" id="7970611">4</span><span class="op" id="7970612">;</span>&nbsp;<span class="ident" id="7970614">offset</span><span class="op" id="7970620">++</span>&nbsp;<span class="op" id="7970623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970627">for</span>&nbsp;<span class="ident" id="7970631">i</span>&nbsp;<span class="op" id="7970633">:=</span>&nbsp;<span class="num" id="7970636">0</span><span class="op" id="7970637">;</span>&nbsp;<span class="ident" id="7970639">i</span>&nbsp;<span class="op" id="7970641">&lt;</span>&nbsp;<span class="ident" id="7970643">N</span><span class="op" id="7970644">;</span>&nbsp;<span class="ident" id="7970646">i</span><span class="op" id="7970647">++</span>&nbsp;<span class="op" id="7970650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970655">block</span><span class="op" id="7970660">[</span><span class="ident" id="7970661">offset</span><span class="op" id="7970667">+</span><span class="ident" id="7970668">i</span><span class="op" id="7970669">]</span>&nbsp;<span class="op" id="7970671">=</span>&nbsp;<span class="string" id="7970673">&#39;0&#39;</span>&nbsp;<span class="op" id="7970677">+</span>&nbsp;<span class="builtintype" id="7970679">byte</span><span class="op" id="7970683">(</span><span class="ident" id="7970684">i</span><span class="op" id="7970685">%</span><span class="num" id="7970686">10</span><span class="op" id="7970688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970696">for</span>&nbsp;<span class="ident" id="7970700">blockSize</span>&nbsp;<span class="op" id="7970710">:=</span>&nbsp;<span class="num" id="7970713">10</span><span class="op" id="7970715">;</span>&nbsp;<span class="ident" id="7970717">blockSize</span>&nbsp;<span class="op" id="7970727">&lt;=</span>&nbsp;<span class="ident" id="7970730">N</span><span class="op" id="7970731">;</span>&nbsp;<span class="ident" id="7970733">blockSize</span>&nbsp;<span class="op" id="7970743">*=</span>&nbsp;<span class="num" id="7970746">10</span>&nbsp;<span class="op" id="7970749">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970754">blocks</span>&nbsp;<span class="op" id="7970761">:=</span>&nbsp;<span class="ident" id="7970764">N</span>&nbsp;<span class="op" id="7970766">/</span>&nbsp;<span class="ident" id="7970768">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970781">b</span>&nbsp;<span class="op" id="7970783">:=</span>&nbsp;<span class="ident" id="7970786">block</span><span class="op" id="7970791">[</span><span class="ident" id="7970792">offset</span>&nbsp;<span class="op" id="7970799">:</span>&nbsp;<span class="ident" id="7970801">offset</span><span class="op" id="7970807">+</span><span class="ident" id="7970808">blockSize</span><span class="op" id="7970817">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970822">c</span><span class="op" id="7970823">.</span><span class="ident" id="7970824">Reset</span><span class="op" id="7970829">(</span><span class="op" id="7970830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970835">for</span>&nbsp;<span class="ident" id="7970839">i</span>&nbsp;<span class="op" id="7970841">:=</span>&nbsp;<span class="num" id="7970844">0</span><span class="op" id="7970845">;</span>&nbsp;<span class="ident" id="7970847">i</span>&nbsp;<span class="op" id="7970849">&lt;</span>&nbsp;<span class="ident" id="7970851">blocks</span><span class="op" id="7970857">;</span>&nbsp;<span class="ident" id="7970859">i</span><span class="op" id="7970860">++</span>&nbsp;<span class="op" id="7970863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970869">c</span><span class="op" id="7970870">.</span><span class="ident" id="7970871">Write</span><span class="op" id="7970876">(</span><span class="ident" id="7970877">b</span><span class="op" id="7970878">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7970883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970888">s</span>&nbsp;<span class="op" id="7970890">:=</span>&nbsp;<span class="ident" id="7970893">fmt</span><span class="op" id="7970896">.</span><span class="ident" id="7970897">Sprintf</span><span class="op" id="7970904">(</span><span class="string" id="7970905">&#34;%x&#34;</span><span class="op" id="7970909">,</span>&nbsp;<span class="ident" id="7970911">c</span><span class="op" id="7970912">.</span><span class="ident" id="7970913">Sum</span><span class="op" id="7970916">(</span><span class="builtintype" id="7970917">nil</span><span class="op" id="7970920">)</span><span class="op" id="7970921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7970926">if</span>&nbsp;<span class="ident" id="7970929">s</span>&nbsp;<span class="op" id="7970931">!=</span>&nbsp;<span class="ident" id="7970934">ok</span>&nbsp;<span class="op" id="7970937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7970943">t</span><span class="op" id="7970944">.</span><span class="ident" id="7970945">Fatalf</span><span class="op" id="7970951">(</span><span class="string" id="7970952">&#34;md5&nbsp;TestLarge&nbsp;offset=%d,&nbsp;blockSize=%d&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7971004">,</span>&nbsp;<span class="ident" id="7971006">offset</span><span class="op" id="7971012">,</span>&nbsp;<span class="ident" id="7971014">blockSize</span><span class="op" id="7971023">,</span>&nbsp;<span class="ident" id="7971025">s</span><span class="op" id="7971026">,</span>&nbsp;<span class="ident" id="7971028">ok</span><span class="op" id="7971030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971035">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971042">}</span><br>
<span class="lineno"></span><span class="op" id="7971044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7971047">//&nbsp;Tests&nbsp;that&nbsp;blockGeneric&nbsp;(pure&nbsp;Go)&nbsp;and&nbsp;block&nbsp;(in&nbsp;assembly&nbsp;for&nbsp;amd64,&nbsp;386,&nbsp;arm)&nbsp;match.</span><br>
<span class="lineno">110</span><span class="keyword" id="7971135">func</span>&nbsp;<span class="ident" id="7971140">TestBlockGeneric</span><span class="op" id="7971156">(</span><span class="ident" id="7971157">t</span>&nbsp;<span class="op" id="7971159">*</span><span class="ident" id="7971160">testing</span><span class="op" id="7971167">.</span><span class="ident" id="7971168">T</span><span class="op" id="7971169">)</span>&nbsp;<span class="op" id="7971171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971174">gen</span><span class="op" id="7971177">,</span>&nbsp;<span class="ident" id="7971179">asm</span>&nbsp;<span class="op" id="7971183">:=</span>&nbsp;<span class="ident" id="7971186">New</span><span class="op" id="7971189">(</span><span class="op" id="7971190">)</span><span class="op" id="7971191">.</span><span class="op" id="7971192">(</span><span class="op" id="7971193">*</span><span class="ident" id="7971194">digest</span><span class="op" id="7971200">)</span><span class="op" id="7971201">,</span>&nbsp;<span class="ident" id="7971203">New</span><span class="op" id="7971206">(</span><span class="op" id="7971207">)</span><span class="op" id="7971208">.</span><span class="op" id="7971209">(</span><span class="op" id="7971210">*</span><span class="ident" id="7971211">digest</span><span class="op" id="7971217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971220">buf</span>&nbsp;<span class="op" id="7971224">:=</span>&nbsp;<span class="builtinfunc" id="7971227">make</span><span class="op" id="7971231">(</span><span class="op" id="7971232">[</span><span class="op" id="7971233">]</span><span class="builtintype" id="7971234">byte</span><span class="op" id="7971238">,</span>&nbsp;<span class="ident" id="7971240">BlockSize</span><span class="op" id="7971249">*</span><span class="num" id="7971250">20</span><span class="op" id="7971252">)</span>&nbsp;<span class="comment" id="7971254">//&nbsp;arbitrary&nbsp;factor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971275">rand</span><span class="op" id="7971279">.</span><span class="ident" id="7971280">Read</span><span class="op" id="7971284">(</span><span class="ident" id="7971285">buf</span><span class="op" id="7971288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971291">blockGeneric</span><span class="op" id="7971303">(</span><span class="ident" id="7971304">gen</span><span class="op" id="7971307">,</span>&nbsp;<span class="ident" id="7971309">buf</span><span class="op" id="7971312">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971315">block</span><span class="op" id="7971320">(</span><span class="ident" id="7971321">asm</span><span class="op" id="7971324">,</span>&nbsp;<span class="ident" id="7971326">buf</span><span class="op" id="7971329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7971332">if</span>&nbsp;<span class="op" id="7971335">*</span><span class="ident" id="7971336">gen</span>&nbsp;<span class="op" id="7971340">!=</span>&nbsp;<span class="op" id="7971343">*</span><span class="ident" id="7971344">asm</span>&nbsp;<span class="op" id="7971348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971352">t</span><span class="op" id="7971353">.</span><span class="ident" id="7971354">Error</span><span class="op" id="7971359">(</span><span class="string" id="7971360">&#34;block&nbsp;and&nbsp;blockGeneric&nbsp;resulted&nbsp;in&nbsp;different&nbsp;states&#34;</span><span class="op" id="7971413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971416">}</span><br>
<span class="lineno"></span><span class="op" id="7971418">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7971421">var</span>&nbsp;<span class="ident" id="7971425">bench</span>&nbsp;<span class="op" id="7971431">=</span>&nbsp;<span class="ident" id="7971433">New</span><span class="op" id="7971436">(</span><span class="op" id="7971437">)</span><br>
<span class="lineno"></span><span class="keyword" id="7971439">var</span>&nbsp;<span class="ident" id="7971443">buf</span>&nbsp;<span class="op" id="7971447">=</span>&nbsp;<span class="builtinfunc" id="7971449">make</span><span class="op" id="7971453">(</span><span class="op" id="7971454">[</span><span class="op" id="7971455">]</span><span class="builtintype" id="7971456">byte</span><span class="op" id="7971460">,</span>&nbsp;<span class="num" id="7971462">8192</span><span class="op" id="7971466">+</span><span class="num" id="7971467">1</span><span class="op" id="7971468">)</span><br>
<span class="lineno"></span><span class="keyword" id="7971470">var</span>&nbsp;<span class="ident" id="7971474">sum</span>&nbsp;<span class="op" id="7971478">=</span>&nbsp;<span class="builtinfunc" id="7971480">make</span><span class="op" id="7971484">(</span><span class="op" id="7971485">[</span><span class="op" id="7971486">]</span><span class="builtintype" id="7971487">byte</span><span class="op" id="7971491">,</span>&nbsp;<span class="ident" id="7971493">bench</span><span class="op" id="7971498">.</span><span class="ident" id="7971499">Size</span><span class="op" id="7971503">(</span><span class="op" id="7971504">)</span><span class="op" id="7971505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7971508">func</span>&nbsp;<span class="ident" id="7971513">benchmarkSize</span><span class="op" id="7971526">(</span><span class="ident" id="7971527">b</span>&nbsp;<span class="op" id="7971529">*</span><span class="ident" id="7971530">testing</span><span class="op" id="7971537">.</span><span class="ident" id="7971538">B</span><span class="op" id="7971539">,</span>&nbsp;<span class="ident" id="7971541">size</span>&nbsp;<span class="builtintype" id="7971546">int</span><span class="op" id="7971549">,</span>&nbsp;<span class="ident" id="7971551">unaligned</span>&nbsp;<span class="builtintype" id="7971561">bool</span><span class="op" id="7971565">)</span>&nbsp;<span class="op" id="7971567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971570">b</span><span class="op" id="7971571">.</span><span class="ident" id="7971572">SetBytes</span><span class="op" id="7971580">(</span><span class="ident" id="7971581">int64</span><span class="op" id="7971586">(</span><span class="ident" id="7971587">size</span><span class="op" id="7971591">)</span><span class="op" id="7971592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971595">buf</span>&nbsp;<span class="op" id="7971599">:=</span>&nbsp;<span class="ident" id="7971602">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7971607">if</span>&nbsp;<span class="ident" id="7971610">unaligned</span>&nbsp;<span class="op" id="7971620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7971624">if</span>&nbsp;<span class="builtintype" id="7971627">uintptr</span><span class="op" id="7971634">(</span><span class="ident" id="7971635">unsafe</span><span class="op" id="7971641">.</span><span class="ident" id="7971642">Pointer</span><span class="op" id="7971649">(</span><span class="op" id="7971650">&amp;</span><span class="ident" id="7971651">buf</span><span class="op" id="7971654">[</span><span class="num" id="7971655">0</span><span class="op" id="7971656">]</span><span class="op" id="7971657">)</span><span class="op" id="7971658">)</span><span class="op" id="7971659">&amp;</span><span class="op" id="7971660">(</span><span class="ident" id="7971661">unsafe</span><span class="op" id="7971667">.</span><span class="ident" id="7971668">Alignof</span><span class="op" id="7971675">(</span><span class="builtintype" id="7971676">uint32</span><span class="op" id="7971682">(</span><span class="num" id="7971683">0</span><span class="op" id="7971684">)</span><span class="op" id="7971685">)</span><span class="op" id="7971686">-</span><span class="num" id="7971687">1</span><span class="op" id="7971688">)</span>&nbsp;<span class="op" id="7971690">==</span>&nbsp;<span class="num" id="7971693">0</span>&nbsp;<span class="op" id="7971695">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971700">buf</span>&nbsp;<span class="op" id="7971704">=</span>&nbsp;<span class="ident" id="7971706">buf</span><span class="op" id="7971709">[</span><span class="num" id="7971710">1</span><span class="op" id="7971711">:</span><span class="op" id="7971712">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971722">b</span><span class="op" id="7971723">.</span><span class="ident" id="7971724">ResetTimer</span><span class="op" id="7971734">(</span><span class="op" id="7971735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7971738">for</span>&nbsp;<span class="ident" id="7971742">i</span>&nbsp;<span class="op" id="7971744">:=</span>&nbsp;<span class="num" id="7971747">0</span><span class="op" id="7971748">;</span>&nbsp;<span class="ident" id="7971750">i</span>&nbsp;<span class="op" id="7971752">&lt;</span>&nbsp;<span class="ident" id="7971754">b</span><span class="op" id="7971755">.</span><span class="ident" id="7971756">N</span><span class="op" id="7971757">;</span>&nbsp;<span class="ident" id="7971759">i</span><span class="op" id="7971760">++</span>&nbsp;<span class="op" id="7971763">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971767">bench</span><span class="op" id="7971772">.</span><span class="ident" id="7971773">Reset</span><span class="op" id="7971778">(</span><span class="op" id="7971779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971783">bench</span><span class="op" id="7971788">.</span><span class="ident" id="7971789">Write</span><span class="op" id="7971794">(</span><span class="ident" id="7971795">buf</span><span class="op" id="7971798">[</span><span class="op" id="7971799">:</span><span class="ident" id="7971800">size</span><span class="op" id="7971804">]</span><span class="op" id="7971805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971809">bench</span><span class="op" id="7971814">.</span><span class="ident" id="7971815">Sum</span><span class="op" id="7971818">(</span><span class="ident" id="7971819">sum</span><span class="op" id="7971822">[</span><span class="op" id="7971823">:</span><span class="num" id="7971824">0</span><span class="op" id="7971825">]</span><span class="op" id="7971826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7971829">}</span><br>
<span class="lineno"></span><span class="op" id="7971831">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7971834">func</span>&nbsp;<span class="ident" id="7971839">BenchmarkHash8Bytes</span><span class="op" id="7971858">(</span><span class="ident" id="7971859">b</span>&nbsp;<span class="op" id="7971861">*</span><span class="ident" id="7971862">testing</span><span class="op" id="7971869">.</span><span class="ident" id="7971870">B</span><span class="op" id="7971871">)</span>&nbsp;<span class="op" id="7971873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971876">benchmarkSize</span><span class="op" id="7971889">(</span><span class="ident" id="7971890">b</span><span class="op" id="7971891">,</span>&nbsp;<span class="num" id="7971893">8</span><span class="op" id="7971894">,</span>&nbsp;<span class="builtintype" id="7971896">false</span><span class="op" id="7971901">)</span><br>
<span class="lineno"></span><span class="op" id="7971903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="7971906">func</span>&nbsp;<span class="ident" id="7971911">BenchmarkHash1K</span><span class="op" id="7971926">(</span><span class="ident" id="7971927">b</span>&nbsp;<span class="op" id="7971929">*</span><span class="ident" id="7971930">testing</span><span class="op" id="7971937">.</span><span class="ident" id="7971938">B</span><span class="op" id="7971939">)</span>&nbsp;<span class="op" id="7971941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7971944">benchmarkSize</span><span class="op" id="7971957">(</span><span class="ident" id="7971958">b</span><span class="op" id="7971959">,</span>&nbsp;<span class="num" id="7971961">1024</span><span class="op" id="7971965">,</span>&nbsp;<span class="builtintype" id="7971967">false</span><span class="op" id="7971972">)</span><br>
<span class="lineno"></span><span class="op" id="7971974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7971977">func</span>&nbsp;<span class="ident" id="7971982">BenchmarkHash8K</span><span class="op" id="7971997">(</span><span class="ident" id="7971998">b</span>&nbsp;<span class="op" id="7972000">*</span><span class="ident" id="7972001">testing</span><span class="op" id="7972008">.</span><span class="ident" id="7972009">B</span><span class="op" id="7972010">)</span>&nbsp;<span class="op" id="7972012">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7972015">benchmarkSize</span><span class="op" id="7972028">(</span><span class="ident" id="7972029">b</span><span class="op" id="7972030">,</span>&nbsp;<span class="num" id="7972032">8192</span><span class="op" id="7972036">,</span>&nbsp;<span class="builtintype" id="7972038">false</span><span class="op" id="7972043">)</span><br>
<span class="lineno"></span><span class="op" id="7972045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7972048">func</span>&nbsp;<span class="ident" id="7972053">BenchmarkHash8BytesUnaligned</span><span class="op" id="7972081">(</span><span class="ident" id="7972082">b</span>&nbsp;<span class="op" id="7972084">*</span><span class="ident" id="7972085">testing</span><span class="op" id="7972092">.</span><span class="ident" id="7972093">B</span><span class="op" id="7972094">)</span>&nbsp;<span class="op" id="7972096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7972099">benchmarkSize</span><span class="op" id="7972112">(</span><span class="ident" id="7972113">b</span><span class="op" id="7972114">,</span>&nbsp;<span class="num" id="7972116">8</span><span class="op" id="7972117">,</span>&nbsp;<span class="builtintype" id="7972119">true</span><span class="op" id="7972123">)</span><br>
<span class="lineno">155</span><span class="op" id="7972125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7972128">func</span>&nbsp;<span class="ident" id="7972133">BenchmarkHash1KUnaligned</span><span class="op" id="7972157">(</span><span class="ident" id="7972158">b</span>&nbsp;<span class="op" id="7972160">*</span><span class="ident" id="7972161">testing</span><span class="op" id="7972168">.</span><span class="ident" id="7972169">B</span><span class="op" id="7972170">)</span>&nbsp;<span class="op" id="7972172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7972175">benchmarkSize</span><span class="op" id="7972188">(</span><span class="ident" id="7972189">b</span><span class="op" id="7972190">,</span>&nbsp;<span class="num" id="7972192">1024</span><span class="op" id="7972196">,</span>&nbsp;<span class="builtintype" id="7972198">true</span><span class="op" id="7972202">)</span><br>
<span class="lineno"></span><span class="op" id="7972204">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7972207">func</span>&nbsp;<span class="ident" id="7972212">BenchmarkHash8KUnaligned</span><span class="op" id="7972236">(</span><span class="ident" id="7972237">b</span>&nbsp;<span class="op" id="7972239">*</span><span class="ident" id="7972240">testing</span><span class="op" id="7972247">.</span><span class="ident" id="7972248">B</span><span class="op" id="7972249">)</span>&nbsp;<span class="op" id="7972251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7972254">benchmarkSize</span><span class="op" id="7972267">(</span><span class="ident" id="7972268">b</span><span class="op" id="7972269">,</span>&nbsp;<span class="num" id="7972271">8192</span><span class="op" id="7972275">,</span>&nbsp;<span class="builtintype" id="7972277">true</span><span class="op" id="7972281">)</span><br>
<span class="lineno"></span><span class="op" id="7972283">}</span>
</div>
</body>
</html>
