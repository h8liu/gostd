<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5503689">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5503744">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5503798">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5503849">package</span>&nbsp;<span class="ident" id="5503857">driver</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5503865">import</span>&nbsp;<span class="op" id="5503872">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503875">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503882">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503893">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5503904">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5503911">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5503914">//&nbsp;ValueConverter&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;ConvertValue&nbsp;method.</span><br>
<span class="lineno">15</span><span class="comment" id="5503984">//</span><br>
<span class="lineno"></span><span class="comment" id="5503987">//&nbsp;Various&nbsp;implementations&nbsp;of&nbsp;ValueConverter&nbsp;are&nbsp;provided&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5504052">//&nbsp;driver&nbsp;package&nbsp;to&nbsp;provide&nbsp;consistent&nbsp;implementations&nbsp;of&nbsp;conversions</span><br>
<span class="lineno"></span><span class="comment" id="5504123">//&nbsp;between&nbsp;drivers.&nbsp;&nbsp;The&nbsp;ValueConverters&nbsp;have&nbsp;several&nbsp;uses:</span><br>
<span class="lineno"></span><span class="comment" id="5504183">//</span><br>
<span class="lineno">20</span><span class="comment" id="5504186">//&nbsp;&nbsp;*&nbsp;converting&nbsp;from&nbsp;the&nbsp;Value&nbsp;types&nbsp;as&nbsp;provided&nbsp;by&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5504255">//&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;database&nbsp;table&#39;s&nbsp;specific&nbsp;column&nbsp;type&nbsp;and&nbsp;making&nbsp;sure&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5504325">//&nbsp;&nbsp;&nbsp;&nbsp;fits,&nbsp;such&nbsp;as&nbsp;making&nbsp;sure&nbsp;a&nbsp;particular&nbsp;int64&nbsp;fits&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5504386">//&nbsp;&nbsp;&nbsp;&nbsp;table&#39;s&nbsp;uint16&nbsp;column.</span><br>
<span class="lineno"></span><span class="comment" id="5504415">//</span><br>
<span class="lineno">25</span><span class="comment" id="5504418">//&nbsp;&nbsp;*&nbsp;converting&nbsp;a&nbsp;value&nbsp;as&nbsp;given&nbsp;from&nbsp;the&nbsp;database&nbsp;into&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5504486">//&nbsp;&nbsp;&nbsp;&nbsp;driver&nbsp;Value&nbsp;types.</span><br>
<span class="lineno"></span><span class="comment" id="5504512">//</span><br>
<span class="lineno"></span><span class="comment" id="5504515">//&nbsp;&nbsp;*&nbsp;by&nbsp;the&nbsp;sql&nbsp;package,&nbsp;for&nbsp;converting&nbsp;from&nbsp;a&nbsp;driver&#39;s&nbsp;Value&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5504583">//&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;user&#39;s&nbsp;type&nbsp;in&nbsp;a&nbsp;scan.</span><br>
<span class="lineno">30</span><span class="keyword" id="5504617">type</span>&nbsp;<span class="ident" id="5504622">ValueConverter</span>&nbsp;<span class="keyword" id="5504637">interface</span>&nbsp;<span class="op" id="5504647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5504650">//&nbsp;ConvertValue&nbsp;converts&nbsp;a&nbsp;value&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504703">ConvertValue</span><span class="op" id="5504715">(</span><span class="ident" id="5504716">v</span>&nbsp;<span class="keyword" id="5504718">interface</span><span class="op" id="5504727">{</span><span class="op" id="5504728">}</span><span class="op" id="5504729">)</span>&nbsp;<span class="op" id="5504731">(</span><span class="ident" id="5504732">Value</span><span class="op" id="5504737">,</span>&nbsp;<span class="builtintype" id="5504739">error</span><span class="op" id="5504744">)</span><br>
<span class="lineno"></span><span class="op" id="5504746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5504749">//&nbsp;Valuer&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;Value&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5504804">//</span><br>
<span class="lineno"></span><span class="comment" id="5504807">//&nbsp;Types&nbsp;implementing&nbsp;Valuer&nbsp;interface&nbsp;are&nbsp;able&nbsp;to&nbsp;convert</span><br>
<span class="lineno"></span><span class="comment" id="5504866">//&nbsp;themselves&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="5504899">type</span>&nbsp;<span class="ident" id="5504904">Valuer</span>&nbsp;<span class="keyword" id="5504911">interface</span>&nbsp;<span class="op" id="5504921">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5504924">//&nbsp;Value&nbsp;returns&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5504958">Value</span><span class="op" id="5504963">(</span><span class="op" id="5504964">)</span>&nbsp;<span class="op" id="5504966">(</span><span class="ident" id="5504967">Value</span><span class="op" id="5504972">,</span>&nbsp;<span class="builtintype" id="5504974">error</span><span class="op" id="5504979">)</span><br>
<span class="lineno"></span><span class="op" id="5504981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5504984">//&nbsp;Bool&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;bools.</span><br>
<span class="lineno">45</span><span class="comment" id="5505049">//</span><br>
<span class="lineno"></span><span class="comment" id="5505052">//&nbsp;The&nbsp;conversion&nbsp;rules&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5505081">//&nbsp;&nbsp;-&nbsp;booleans&nbsp;are&nbsp;returned&nbsp;unchanged</span><br>
<span class="lineno"></span><span class="comment" id="5505119">//&nbsp;&nbsp;-&nbsp;for&nbsp;integer&nbsp;types,</span><br>
<span class="lineno"></span><span class="comment" id="5505144">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;is&nbsp;true</span><br>
<span class="lineno">50</span><span class="comment" id="5505163">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;is&nbsp;false,</span><br>
<span class="lineno"></span><span class="comment" id="5505184">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;integers&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5505221">//&nbsp;&nbsp;-&nbsp;for&nbsp;strings&nbsp;and&nbsp;[]byte,&nbsp;same&nbsp;rules&nbsp;as&nbsp;strconv.ParseBool</span><br>
<span class="lineno"></span><span class="comment" id="5505283">//&nbsp;&nbsp;-&nbsp;all&nbsp;other&nbsp;types&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="5505318">var</span>&nbsp;<span class="ident" id="5505322">Bool</span>&nbsp;<span class="ident" id="5505327">boolType</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5505337">type</span>&nbsp;<span class="ident" id="5505342">boolType</span>&nbsp;<span class="keyword" id="5505351">struct</span><span class="op" id="5505357">{</span><span class="op" id="5505358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5505361">var</span>&nbsp;<span class="ident" id="5505365">_</span>&nbsp;<span class="ident" id="5505367">ValueConverter</span>&nbsp;<span class="op" id="5505382">=</span>&nbsp;<span class="ident" id="5505384">boolType</span><span class="op" id="5505392">{</span><span class="op" id="5505393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5505396">func</span>&nbsp;<span class="op" id="5505401">(</span><span class="ident" id="5505402">boolType</span><span class="op" id="5505410">)</span>&nbsp;<span class="ident" id="5505412">String</span><span class="op" id="5505418">(</span><span class="op" id="5505419">)</span>&nbsp;<span class="builtintype" id="5505421">string</span>&nbsp;<span class="op" id="5505428">{</span>&nbsp;<span class="keyword" id="5505430">return</span>&nbsp;<span class="string" id="5505437">&#34;Bool&#34;</span>&nbsp;<span class="op" id="5505444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5505447">func</span>&nbsp;<span class="op" id="5505452">(</span><span class="ident" id="5505453">boolType</span><span class="op" id="5505461">)</span>&nbsp;<span class="ident" id="5505463">ConvertValue</span><span class="op" id="5505475">(</span><span class="ident" id="5505476">src</span>&nbsp;<span class="keyword" id="5505480">interface</span><span class="op" id="5505489">{</span><span class="op" id="5505490">}</span><span class="op" id="5505491">)</span>&nbsp;<span class="op" id="5505493">(</span><span class="ident" id="5505494">Value</span><span class="op" id="5505499">,</span>&nbsp;<span class="builtintype" id="5505501">error</span><span class="op" id="5505506">)</span>&nbsp;<span class="op" id="5505508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505511">switch</span>&nbsp;<span class="ident" id="5505518">s</span>&nbsp;<span class="op" id="5505520">:=</span>&nbsp;<span class="ident" id="5505523">src</span><span class="op" id="5505526">.</span><span class="op" id="5505527">(</span><span class="keyword" id="5505528">type</span><span class="op" id="5505532">)</span>&nbsp;<span class="op" id="5505534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505537">case</span>&nbsp;<span class="builtintype" id="5505542">bool</span><span class="op" id="5505546">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505550">return</span>&nbsp;<span class="ident" id="5505557">s</span><span class="op" id="5505558">,</span>&nbsp;<span class="ident" id="5505560">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505565">case</span>&nbsp;<span class="builtintype" id="5505570">string</span><span class="op" id="5505576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505580">b</span><span class="op" id="5505581">,</span>&nbsp;<span class="ident" id="5505583">err</span>&nbsp;<span class="op" id="5505587">:=</span>&nbsp;<span class="ident" id="5505590">strconv</span><span class="op" id="5505597">.</span><span class="ident" id="5505598">ParseBool</span><span class="op" id="5505607">(</span><span class="ident" id="5505608">s</span><span class="op" id="5505609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505613">if</span>&nbsp;<span class="ident" id="5505616">err</span>&nbsp;<span class="op" id="5505620">!=</span>&nbsp;<span class="ident" id="5505623">nil</span>&nbsp;<span class="op" id="5505627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505632">return</span>&nbsp;<span class="ident" id="5505639">nil</span><span class="op" id="5505642">,</span>&nbsp;<span class="ident" id="5505644">fmt</span><span class="op" id="5505647">.</span><span class="ident" id="5505648">Errorf</span><span class="op" id="5505654">(</span><span class="string" id="5505655">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5505703">,</span>&nbsp;<span class="ident" id="5505705">s</span><span class="op" id="5505706">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505714">return</span>&nbsp;<span class="ident" id="5505721">b</span><span class="op" id="5505722">,</span>&nbsp;<span class="ident" id="5505724">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505729">case</span>&nbsp;<span class="op" id="5505734">[</span><span class="op" id="5505735">]</span><span class="builtintype" id="5505736">byte</span><span class="op" id="5505740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505744">b</span><span class="op" id="5505745">,</span>&nbsp;<span class="ident" id="5505747">err</span>&nbsp;<span class="op" id="5505751">:=</span>&nbsp;<span class="ident" id="5505754">strconv</span><span class="op" id="5505761">.</span><span class="ident" id="5505762">ParseBool</span><span class="op" id="5505771">(</span><span class="builtintype" id="5505772">string</span><span class="op" id="5505778">(</span><span class="ident" id="5505779">s</span><span class="op" id="5505780">)</span><span class="op" id="5505781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505785">if</span>&nbsp;<span class="ident" id="5505788">err</span>&nbsp;<span class="op" id="5505792">!=</span>&nbsp;<span class="ident" id="5505795">nil</span>&nbsp;<span class="op" id="5505799">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505804">return</span>&nbsp;<span class="ident" id="5505811">nil</span><span class="op" id="5505814">,</span>&nbsp;<span class="ident" id="5505816">fmt</span><span class="op" id="5505819">.</span><span class="ident" id="5505820">Errorf</span><span class="op" id="5505826">(</span><span class="string" id="5505827">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5505875">,</span>&nbsp;<span class="ident" id="5505877">s</span><span class="op" id="5505878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505886">return</span>&nbsp;<span class="ident" id="5505893">b</span><span class="op" id="5505894">,</span>&nbsp;<span class="ident" id="5505896">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5505901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5505905">sv</span>&nbsp;<span class="op" id="5505908">:=</span>&nbsp;<span class="ident" id="5505911">reflect</span><span class="op" id="5505918">.</span><span class="ident" id="5505919">ValueOf</span><span class="op" id="5505926">(</span><span class="ident" id="5505927">src</span><span class="op" id="5505930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505933">switch</span>&nbsp;<span class="ident" id="5505940">sv</span><span class="op" id="5505942">.</span><span class="ident" id="5505943">Kind</span><span class="op" id="5505947">(</span><span class="op" id="5505948">)</span>&nbsp;<span class="op" id="5505950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5505953">case</span>&nbsp;<span class="ident" id="5505958">reflect</span><span class="op" id="5505965">.</span><span class="ident" id="5505966">Int</span><span class="op" id="5505969">,</span>&nbsp;<span class="ident" id="5505971">reflect</span><span class="op" id="5505978">.</span><span class="ident" id="5505979">Int8</span><span class="op" id="5505983">,</span>&nbsp;<span class="ident" id="5505985">reflect</span><span class="op" id="5505992">.</span><span class="ident" id="5505993">Int16</span><span class="op" id="5505998">,</span>&nbsp;<span class="ident" id="5506000">reflect</span><span class="op" id="5506007">.</span><span class="ident" id="5506008">Int32</span><span class="op" id="5506013">,</span>&nbsp;<span class="ident" id="5506015">reflect</span><span class="op" id="5506022">.</span><span class="ident" id="5506023">Int64</span><span class="op" id="5506028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506032">iv</span>&nbsp;<span class="op" id="5506035">:=</span>&nbsp;<span class="ident" id="5506038">sv</span><span class="op" id="5506040">.</span><span class="ident" id="5506041">Int</span><span class="op" id="5506044">(</span><span class="op" id="5506045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506049">if</span>&nbsp;<span class="ident" id="5506052">iv</span>&nbsp;<span class="op" id="5506055">==</span>&nbsp;<span class="num" id="5506058">1</span>&nbsp;<span class="op" id="5506060">||</span>&nbsp;<span class="ident" id="5506063">iv</span>&nbsp;<span class="op" id="5506066">==</span>&nbsp;<span class="num" id="5506069">0</span>&nbsp;<span class="op" id="5506071">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506076">return</span>&nbsp;<span class="ident" id="5506083">iv</span>&nbsp;<span class="op" id="5506086">==</span>&nbsp;<span class="num" id="5506089">1</span><span class="op" id="5506090">,</span>&nbsp;<span class="ident" id="5506092">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5506098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506102">return</span>&nbsp;<span class="ident" id="5506109">nil</span><span class="op" id="5506112">,</span>&nbsp;<span class="ident" id="5506114">fmt</span><span class="op" id="5506117">.</span><span class="ident" id="5506118">Errorf</span><span class="op" id="5506124">(</span><span class="string" id="5506125">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5506173">,</span>&nbsp;<span class="ident" id="5506175">iv</span><span class="op" id="5506177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506180">case</span>&nbsp;<span class="ident" id="5506185">reflect</span><span class="op" id="5506192">.</span><span class="ident" id="5506193">Uint</span><span class="op" id="5506197">,</span>&nbsp;<span class="ident" id="5506199">reflect</span><span class="op" id="5506206">.</span><span class="ident" id="5506207">Uint8</span><span class="op" id="5506212">,</span>&nbsp;<span class="ident" id="5506214">reflect</span><span class="op" id="5506221">.</span><span class="ident" id="5506222">Uint16</span><span class="op" id="5506228">,</span>&nbsp;<span class="ident" id="5506230">reflect</span><span class="op" id="5506237">.</span><span class="ident" id="5506238">Uint32</span><span class="op" id="5506244">,</span>&nbsp;<span class="ident" id="5506246">reflect</span><span class="op" id="5506253">.</span><span class="ident" id="5506254">Uint64</span><span class="op" id="5506260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506264">uv</span>&nbsp;<span class="op" id="5506267">:=</span>&nbsp;<span class="ident" id="5506270">sv</span><span class="op" id="5506272">.</span><span class="ident" id="5506273">Uint</span><span class="op" id="5506277">(</span><span class="op" id="5506278">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506282">if</span>&nbsp;<span class="ident" id="5506285">uv</span>&nbsp;<span class="op" id="5506288">==</span>&nbsp;<span class="num" id="5506291">1</span>&nbsp;<span class="op" id="5506293">||</span>&nbsp;<span class="ident" id="5506296">uv</span>&nbsp;<span class="op" id="5506299">==</span>&nbsp;<span class="num" id="5506302">0</span>&nbsp;<span class="op" id="5506304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506309">return</span>&nbsp;<span class="ident" id="5506316">uv</span>&nbsp;<span class="op" id="5506319">==</span>&nbsp;<span class="num" id="5506322">1</span><span class="op" id="5506323">,</span>&nbsp;<span class="ident" id="5506325">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5506331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506335">return</span>&nbsp;<span class="ident" id="5506342">nil</span><span class="op" id="5506345">,</span>&nbsp;<span class="ident" id="5506347">fmt</span><span class="op" id="5506350">.</span><span class="ident" id="5506351">Errorf</span><span class="op" id="5506357">(</span><span class="string" id="5506358">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5506406">,</span>&nbsp;<span class="ident" id="5506408">uv</span><span class="op" id="5506410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5506413">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506417">return</span>&nbsp;<span class="ident" id="5506424">nil</span><span class="op" id="5506427">,</span>&nbsp;<span class="ident" id="5506429">fmt</span><span class="op" id="5506432">.</span><span class="ident" id="5506433">Errorf</span><span class="op" id="5506439">(</span><span class="string" id="5506440">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%v&nbsp;(%T)&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5506493">,</span>&nbsp;<span class="ident" id="5506495">src</span><span class="op" id="5506498">,</span>&nbsp;<span class="ident" id="5506500">src</span><span class="op" id="5506503">)</span><br>
<span class="lineno"></span><span class="op" id="5506505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5506508">//&nbsp;Int32&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;int64,</span><br>
<span class="lineno">100</span><span class="comment" id="5506574">//&nbsp;respecting&nbsp;the&nbsp;limits&nbsp;of&nbsp;an&nbsp;int32&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5506618">var</span>&nbsp;<span class="ident" id="5506622">Int32</span>&nbsp;<span class="ident" id="5506628">int32Type</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5506639">type</span>&nbsp;<span class="ident" id="5506644">int32Type</span>&nbsp;<span class="keyword" id="5506654">struct</span><span class="op" id="5506660">{</span><span class="op" id="5506661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5506664">var</span>&nbsp;<span class="ident" id="5506668">_</span>&nbsp;<span class="ident" id="5506670">ValueConverter</span>&nbsp;<span class="op" id="5506685">=</span>&nbsp;<span class="ident" id="5506687">int32Type</span><span class="op" id="5506696">{</span><span class="op" id="5506697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5506700">func</span>&nbsp;<span class="op" id="5506705">(</span><span class="ident" id="5506706">int32Type</span><span class="op" id="5506715">)</span>&nbsp;<span class="ident" id="5506717">ConvertValue</span><span class="op" id="5506729">(</span><span class="ident" id="5506730">v</span>&nbsp;<span class="keyword" id="5506732">interface</span><span class="op" id="5506741">{</span><span class="op" id="5506742">}</span><span class="op" id="5506743">)</span>&nbsp;<span class="op" id="5506745">(</span><span class="ident" id="5506746">Value</span><span class="op" id="5506751">,</span>&nbsp;<span class="builtintype" id="5506753">error</span><span class="op" id="5506758">)</span>&nbsp;<span class="op" id="5506760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506763">rv</span>&nbsp;<span class="op" id="5506766">:=</span>&nbsp;<span class="ident" id="5506769">reflect</span><span class="op" id="5506776">.</span><span class="ident" id="5506777">ValueOf</span><span class="op" id="5506784">(</span><span class="ident" id="5506785">v</span><span class="op" id="5506786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506789">switch</span>&nbsp;<span class="ident" id="5506796">rv</span><span class="op" id="5506798">.</span><span class="ident" id="5506799">Kind</span><span class="op" id="5506803">(</span><span class="op" id="5506804">)</span>&nbsp;<span class="op" id="5506806">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506809">case</span>&nbsp;<span class="ident" id="5506814">reflect</span><span class="op" id="5506821">.</span><span class="ident" id="5506822">Int</span><span class="op" id="5506825">,</span>&nbsp;<span class="ident" id="5506827">reflect</span><span class="op" id="5506834">.</span><span class="ident" id="5506835">Int8</span><span class="op" id="5506839">,</span>&nbsp;<span class="ident" id="5506841">reflect</span><span class="op" id="5506848">.</span><span class="ident" id="5506849">Int16</span><span class="op" id="5506854">,</span>&nbsp;<span class="ident" id="5506856">reflect</span><span class="op" id="5506863">.</span><span class="ident" id="5506864">Int32</span><span class="op" id="5506869">,</span>&nbsp;<span class="ident" id="5506871">reflect</span><span class="op" id="5506878">.</span><span class="ident" id="5506879">Int64</span><span class="op" id="5506884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5506888">i64</span>&nbsp;<span class="op" id="5506892">:=</span>&nbsp;<span class="ident" id="5506895">rv</span><span class="op" id="5506897">.</span><span class="ident" id="5506898">Int</span><span class="op" id="5506901">(</span><span class="op" id="5506902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506906">if</span>&nbsp;<span class="ident" id="5506909">i64</span>&nbsp;<span class="op" id="5506913">&gt;</span>&nbsp;<span class="op" id="5506915">(</span><span class="num" id="5506916">1</span><span class="op" id="5506917">&lt;&lt;</span><span class="num" id="5506919">31</span><span class="op" id="5506921">)</span><span class="op" id="5506922">-</span><span class="num" id="5506923">1</span>&nbsp;<span class="op" id="5506925">||</span>&nbsp;<span class="ident" id="5506928">i64</span>&nbsp;<span class="op" id="5506932">&lt;</span>&nbsp;<span class="op" id="5506934">-</span><span class="op" id="5506935">(</span><span class="num" id="5506936">1</span><span class="op" id="5506937">&lt;&lt;</span><span class="num" id="5506939">31</span><span class="op" id="5506941">)</span>&nbsp;<span class="op" id="5506943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5506948">return</span>&nbsp;<span class="ident" id="5506955">nil</span><span class="op" id="5506958">,</span>&nbsp;<span class="ident" id="5506960">fmt</span><span class="op" id="5506963">.</span><span class="ident" id="5506964">Errorf</span><span class="op" id="5506970">(</span><span class="string" id="5506971">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5507009">,</span>&nbsp;<span class="ident" id="5507011">v</span><span class="op" id="5507012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5507016">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507020">return</span>&nbsp;<span class="ident" id="5507027">i64</span><span class="op" id="5507030">,</span>&nbsp;<span class="ident" id="5507032">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507037">case</span>&nbsp;<span class="ident" id="5507042">reflect</span><span class="op" id="5507049">.</span><span class="ident" id="5507050">Uint</span><span class="op" id="5507054">,</span>&nbsp;<span class="ident" id="5507056">reflect</span><span class="op" id="5507063">.</span><span class="ident" id="5507064">Uint8</span><span class="op" id="5507069">,</span>&nbsp;<span class="ident" id="5507071">reflect</span><span class="op" id="5507078">.</span><span class="ident" id="5507079">Uint16</span><span class="op" id="5507085">,</span>&nbsp;<span class="ident" id="5507087">reflect</span><span class="op" id="5507094">.</span><span class="ident" id="5507095">Uint32</span><span class="op" id="5507101">,</span>&nbsp;<span class="ident" id="5507103">reflect</span><span class="op" id="5507110">.</span><span class="ident" id="5507111">Uint64</span><span class="op" id="5507117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5507121">u64</span>&nbsp;<span class="op" id="5507125">:=</span>&nbsp;<span class="ident" id="5507128">rv</span><span class="op" id="5507130">.</span><span class="ident" id="5507131">Uint</span><span class="op" id="5507135">(</span><span class="op" id="5507136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507140">if</span>&nbsp;<span class="ident" id="5507143">u64</span>&nbsp;<span class="op" id="5507147">&gt;</span>&nbsp;<span class="op" id="5507149">(</span><span class="num" id="5507150">1</span><span class="op" id="5507151">&lt;&lt;</span><span class="num" id="5507153">31</span><span class="op" id="5507155">)</span><span class="op" id="5507156">-</span><span class="num" id="5507157">1</span>&nbsp;<span class="op" id="5507159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507164">return</span>&nbsp;<span class="ident" id="5507171">nil</span><span class="op" id="5507174">,</span>&nbsp;<span class="ident" id="5507176">fmt</span><span class="op" id="5507179">.</span><span class="ident" id="5507180">Errorf</span><span class="op" id="5507186">(</span><span class="string" id="5507187">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5507225">,</span>&nbsp;<span class="ident" id="5507227">v</span><span class="op" id="5507228">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5507232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507236">return</span>&nbsp;<span class="ident" id="5507243">int64</span><span class="op" id="5507248">(</span><span class="ident" id="5507249">u64</span><span class="op" id="5507252">)</span><span class="op" id="5507253">,</span>&nbsp;<span class="ident" id="5507255">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507260">case</span>&nbsp;<span class="ident" id="5507265">reflect</span><span class="op" id="5507272">.</span><span class="ident" id="5507273">String</span><span class="op" id="5507279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5507283">i</span><span class="op" id="5507284">,</span>&nbsp;<span class="ident" id="5507286">err</span>&nbsp;<span class="op" id="5507290">:=</span>&nbsp;<span class="ident" id="5507293">strconv</span><span class="op" id="5507300">.</span><span class="ident" id="5507301">Atoi</span><span class="op" id="5507305">(</span><span class="ident" id="5507306">rv</span><span class="op" id="5507308">.</span><span class="ident" id="5507309">String</span><span class="op" id="5507315">(</span><span class="op" id="5507316">)</span><span class="op" id="5507317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507321">if</span>&nbsp;<span class="ident" id="5507324">err</span>&nbsp;<span class="op" id="5507328">!=</span>&nbsp;<span class="ident" id="5507331">nil</span>&nbsp;<span class="op" id="5507335">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507340">return</span>&nbsp;<span class="ident" id="5507347">nil</span><span class="op" id="5507350">,</span>&nbsp;<span class="ident" id="5507352">fmt</span><span class="op" id="5507355">.</span><span class="ident" id="5507356">Errorf</span><span class="op" id="5507362">(</span><span class="string" id="5507363">&#34;sql/driver:&nbsp;value&nbsp;%q&nbsp;can&#39;t&nbsp;be&nbsp;converted&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5507413">,</span>&nbsp;<span class="ident" id="5507415">v</span><span class="op" id="5507416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5507420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507424">return</span>&nbsp;<span class="ident" id="5507431">int64</span><span class="op" id="5507436">(</span><span class="ident" id="5507437">i</span><span class="op" id="5507438">)</span><span class="op" id="5507439">,</span>&nbsp;<span class="ident" id="5507441">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5507446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507449">return</span>&nbsp;<span class="ident" id="5507456">nil</span><span class="op" id="5507459">,</span>&nbsp;<span class="ident" id="5507461">fmt</span><span class="op" id="5507464">.</span><span class="ident" id="5507465">Errorf</span><span class="op" id="5507471">(</span><span class="string" id="5507472">&#34;sql/driver:&nbsp;unsupported&nbsp;value&nbsp;%v&nbsp;(type&nbsp;%T)&nbsp;converting&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5507536">,</span>&nbsp;<span class="ident" id="5507538">v</span><span class="op" id="5507539">,</span>&nbsp;<span class="ident" id="5507541">v</span><span class="op" id="5507542">)</span><br>
<span class="lineno">130</span><span class="op" id="5507544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5507547">//&nbsp;String&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;its&nbsp;input&nbsp;to&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5507614">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;already&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte,&nbsp;it&#39;s&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="5507677">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;of&nbsp;another&nbsp;type,&nbsp;conversion&nbsp;to&nbsp;string&nbsp;is&nbsp;done</span><br>
<span class="lineno">135</span><span class="comment" id="5507742">//&nbsp;with&nbsp;fmt.Sprintf(&#34;%v&#34;,&nbsp;v).</span><br>
<span class="lineno"></span><span class="keyword" id="5507772">var</span>&nbsp;<span class="ident" id="5507776">String</span>&nbsp;<span class="ident" id="5507783">stringType</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5507795">type</span>&nbsp;<span class="ident" id="5507800">stringType</span>&nbsp;<span class="keyword" id="5507811">struct</span><span class="op" id="5507817">{</span><span class="op" id="5507818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="5507821">func</span>&nbsp;<span class="op" id="5507826">(</span><span class="ident" id="5507827">stringType</span><span class="op" id="5507837">)</span>&nbsp;<span class="ident" id="5507839">ConvertValue</span><span class="op" id="5507851">(</span><span class="ident" id="5507852">v</span>&nbsp;<span class="keyword" id="5507854">interface</span><span class="op" id="5507863">{</span><span class="op" id="5507864">}</span><span class="op" id="5507865">)</span>&nbsp;<span class="op" id="5507867">(</span><span class="ident" id="5507868">Value</span><span class="op" id="5507873">,</span>&nbsp;<span class="builtintype" id="5507875">error</span><span class="op" id="5507880">)</span>&nbsp;<span class="op" id="5507882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507885">switch</span>&nbsp;<span class="ident" id="5507892">v</span><span class="op" id="5507893">.</span><span class="op" id="5507894">(</span><span class="keyword" id="5507895">type</span><span class="op" id="5507899">)</span>&nbsp;<span class="op" id="5507901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507904">case</span>&nbsp;<span class="builtintype" id="5507909">string</span><span class="op" id="5507915">,</span>&nbsp;<span class="op" id="5507917">[</span><span class="op" id="5507918">]</span><span class="builtintype" id="5507919">byte</span><span class="op" id="5507923">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507927">return</span>&nbsp;<span class="ident" id="5507934">v</span><span class="op" id="5507935">,</span>&nbsp;<span class="ident" id="5507937">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5507942">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5507945">return</span>&nbsp;<span class="ident" id="5507952">fmt</span><span class="op" id="5507955">.</span><span class="ident" id="5507956">Sprintf</span><span class="op" id="5507963">(</span><span class="string" id="5507964">&#34;%v&#34;</span><span class="op" id="5507968">,</span>&nbsp;<span class="ident" id="5507970">v</span><span class="op" id="5507971">)</span><span class="op" id="5507972">,</span>&nbsp;<span class="ident" id="5507974">nil</span><br>
<span class="lineno"></span><span class="op" id="5507978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5507981">//&nbsp;Null&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;allowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5508046">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno">150</span><span class="keyword" id="5508108">type</span>&nbsp;<span class="ident" id="5508113">Null</span>&nbsp;<span class="keyword" id="5508118">struct</span>&nbsp;<span class="op" id="5508125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5508128">Converter</span>&nbsp;<span class="ident" id="5508138">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="5508153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5508156">func</span>&nbsp;<span class="op" id="5508161">(</span><span class="ident" id="5508162">n</span>&nbsp;<span class="ident" id="5508164">Null</span><span class="op" id="5508168">)</span>&nbsp;<span class="ident" id="5508170">ConvertValue</span><span class="op" id="5508182">(</span><span class="ident" id="5508183">v</span>&nbsp;<span class="keyword" id="5508185">interface</span><span class="op" id="5508194">{</span><span class="op" id="5508195">}</span><span class="op" id="5508196">)</span>&nbsp;<span class="op" id="5508198">(</span><span class="ident" id="5508199">Value</span><span class="op" id="5508204">,</span>&nbsp;<span class="builtintype" id="5508206">error</span><span class="op" id="5508211">)</span>&nbsp;<span class="op" id="5508213">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508216">if</span>&nbsp;<span class="ident" id="5508219">v</span>&nbsp;<span class="op" id="5508221">==</span>&nbsp;<span class="ident" id="5508224">nil</span>&nbsp;<span class="op" id="5508228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508232">return</span>&nbsp;<span class="ident" id="5508239">nil</span><span class="op" id="5508242">,</span>&nbsp;<span class="ident" id="5508244">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5508249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508252">return</span>&nbsp;<span class="ident" id="5508259">n</span><span class="op" id="5508260">.</span><span class="ident" id="5508261">Converter</span><span class="op" id="5508270">.</span><span class="ident" id="5508271">ConvertValue</span><span class="op" id="5508283">(</span><span class="ident" id="5508284">v</span><span class="op" id="5508285">)</span><br>
<span class="lineno"></span><span class="op" id="5508287">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="5508290">//&nbsp;NotNull&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;disallowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5508361">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno"></span><span class="keyword" id="5508423">type</span>&nbsp;<span class="ident" id="5508428">NotNull</span>&nbsp;<span class="keyword" id="5508436">struct</span>&nbsp;<span class="op" id="5508443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5508446">Converter</span>&nbsp;<span class="ident" id="5508456">ValueConverter</span><br>
<span class="lineno">165</span><span class="op" id="5508471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5508474">func</span>&nbsp;<span class="op" id="5508479">(</span><span class="ident" id="5508480">n</span>&nbsp;<span class="ident" id="5508482">NotNull</span><span class="op" id="5508489">)</span>&nbsp;<span class="ident" id="5508491">ConvertValue</span><span class="op" id="5508503">(</span><span class="ident" id="5508504">v</span>&nbsp;<span class="keyword" id="5508506">interface</span><span class="op" id="5508515">{</span><span class="op" id="5508516">}</span><span class="op" id="5508517">)</span>&nbsp;<span class="op" id="5508519">(</span><span class="ident" id="5508520">Value</span><span class="op" id="5508525">,</span>&nbsp;<span class="builtintype" id="5508527">error</span><span class="op" id="5508532">)</span>&nbsp;<span class="op" id="5508534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508537">if</span>&nbsp;<span class="ident" id="5508540">v</span>&nbsp;<span class="op" id="5508542">==</span>&nbsp;<span class="ident" id="5508545">nil</span>&nbsp;<span class="op" id="5508549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508553">return</span>&nbsp;<span class="ident" id="5508560">nil</span><span class="op" id="5508563">,</span>&nbsp;<span class="ident" id="5508565">fmt</span><span class="op" id="5508568">.</span><span class="ident" id="5508569">Errorf</span><span class="op" id="5508575">(</span><span class="string" id="5508576">&#34;nil&nbsp;value&nbsp;not&nbsp;allowed&#34;</span><span class="op" id="5508599">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5508602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508605">return</span>&nbsp;<span class="ident" id="5508612">n</span><span class="op" id="5508613">.</span><span class="ident" id="5508614">Converter</span><span class="op" id="5508623">.</span><span class="ident" id="5508624">ConvertValue</span><span class="op" id="5508636">(</span><span class="ident" id="5508637">v</span><span class="op" id="5508638">)</span><br>
<span class="lineno"></span><span class="op" id="5508640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5508643">//&nbsp;IsValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;parameter&nbsp;type.</span><br>
<span class="lineno">175</span><span class="comment" id="5508705">//&nbsp;Unlike&nbsp;IsScanValue,&nbsp;IsValue&nbsp;permits&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5508761">func</span>&nbsp;<span class="ident" id="5508766">IsValue</span><span class="op" id="5508773">(</span><span class="ident" id="5508774">v</span>&nbsp;<span class="keyword" id="5508776">interface</span><span class="op" id="5508785">{</span><span class="op" id="5508786">}</span><span class="op" id="5508787">)</span>&nbsp;<span class="builtintype" id="5508789">bool</span>&nbsp;<span class="op" id="5508794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508797">if</span>&nbsp;<span class="ident" id="5508800">IsScanValue</span><span class="op" id="5508811">(</span><span class="ident" id="5508812">v</span><span class="op" id="5508813">)</span>&nbsp;<span class="op" id="5508815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508819">return</span>&nbsp;<span class="builtintype" id="5508826">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5508832">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508835">if</span>&nbsp;<span class="ident" id="5508838">_</span><span class="op" id="5508839">,</span>&nbsp;<span class="ident" id="5508841">ok</span>&nbsp;<span class="op" id="5508844">:=</span>&nbsp;<span class="ident" id="5508847">v</span><span class="op" id="5508848">.</span><span class="op" id="5508849">(</span><span class="builtintype" id="5508850">string</span><span class="op" id="5508856">)</span><span class="op" id="5508857">;</span>&nbsp;<span class="ident" id="5508859">ok</span>&nbsp;<span class="op" id="5508862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508866">return</span>&nbsp;<span class="builtintype" id="5508873">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5508879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5508882">return</span>&nbsp;<span class="builtintype" id="5508889">false</span><br>
<span class="lineno"></span><span class="op" id="5508895">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="5508898">//&nbsp;IsScanValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;scan&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5508959">//&nbsp;Unlike&nbsp;IsValue,&nbsp;IsScanValue&nbsp;does&nbsp;not&nbsp;permit&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5509023">func</span>&nbsp;<span class="ident" id="5509028">IsScanValue</span><span class="op" id="5509039">(</span><span class="ident" id="5509040">v</span>&nbsp;<span class="keyword" id="5509042">interface</span><span class="op" id="5509051">{</span><span class="op" id="5509052">}</span><span class="op" id="5509053">)</span>&nbsp;<span class="builtintype" id="5509055">bool</span>&nbsp;<span class="op" id="5509060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509063">if</span>&nbsp;<span class="ident" id="5509066">v</span>&nbsp;<span class="op" id="5509068">==</span>&nbsp;<span class="ident" id="5509071">nil</span>&nbsp;<span class="op" id="5509075">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509079">return</span>&nbsp;<span class="builtintype" id="5509086">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5509092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509095">switch</span>&nbsp;<span class="ident" id="5509102">v</span><span class="op" id="5509103">.</span><span class="op" id="5509104">(</span><span class="keyword" id="5509105">type</span><span class="op" id="5509109">)</span>&nbsp;<span class="op" id="5509111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509114">case</span>&nbsp;<span class="ident" id="5509119">int64</span><span class="op" id="5509124">,</span>&nbsp;<span class="builtintype" id="5509126">float64</span><span class="op" id="5509133">,</span>&nbsp;<span class="op" id="5509135">[</span><span class="op" id="5509136">]</span><span class="builtintype" id="5509137">byte</span><span class="op" id="5509141">,</span>&nbsp;<span class="builtintype" id="5509143">bool</span><span class="op" id="5509147">,</span>&nbsp;<span class="ident" id="5509149">time</span><span class="op" id="5509153">.</span><span class="ident" id="5509154">Time</span><span class="op" id="5509158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509162">return</span>&nbsp;<span class="builtintype" id="5509169">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5509175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509178">return</span>&nbsp;<span class="builtintype" id="5509185">false</span><br>
<span class="lineno"></span><span class="op" id="5509191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5509194">//&nbsp;DefaultParameterConverter&nbsp;is&nbsp;the&nbsp;default&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">200</span><span class="comment" id="5509256">//&nbsp;ValueConverter&nbsp;that&#39;s&nbsp;used&nbsp;when&nbsp;a&nbsp;Stmt&nbsp;doesn&#39;t&nbsp;implement</span><br>
<span class="lineno"></span><span class="comment" id="5509316">//&nbsp;ColumnConverter.</span><br>
<span class="lineno"></span><span class="comment" id="5509336">//</span><br>
<span class="lineno"></span><span class="comment" id="5509339">//&nbsp;DefaultParameterConverter&nbsp;returns&nbsp;the&nbsp;given&nbsp;value&nbsp;directly&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5509404">//&nbsp;IsValue(value).&nbsp;&nbsp;Otherwise&nbsp;integer&nbsp;type&nbsp;are&nbsp;converted&nbsp;to</span><br>
<span class="lineno">205</span><span class="comment" id="5509464">//&nbsp;int64,&nbsp;floats&nbsp;to&nbsp;float64,&nbsp;and&nbsp;strings&nbsp;to&nbsp;[]byte.&nbsp;&nbsp;Other&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5509533">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5509546">var</span>&nbsp;<span class="ident" id="5509550">DefaultParameterConverter</span>&nbsp;<span class="ident" id="5509576">defaultConverter</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5509594">type</span>&nbsp;<span class="ident" id="5509599">defaultConverter</span>&nbsp;<span class="keyword" id="5509616">struct</span><span class="op" id="5509622">{</span><span class="op" id="5509623">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="5509626">var</span>&nbsp;<span class="ident" id="5509630">_</span>&nbsp;<span class="ident" id="5509632">ValueConverter</span>&nbsp;<span class="op" id="5509647">=</span>&nbsp;<span class="ident" id="5509649">defaultConverter</span><span class="op" id="5509665">{</span><span class="op" id="5509666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5509669">func</span>&nbsp;<span class="op" id="5509674">(</span><span class="ident" id="5509675">defaultConverter</span><span class="op" id="5509691">)</span>&nbsp;<span class="ident" id="5509693">ConvertValue</span><span class="op" id="5509705">(</span><span class="ident" id="5509706">v</span>&nbsp;<span class="keyword" id="5509708">interface</span><span class="op" id="5509717">{</span><span class="op" id="5509718">}</span><span class="op" id="5509719">)</span>&nbsp;<span class="op" id="5509721">(</span><span class="ident" id="5509722">Value</span><span class="op" id="5509727">,</span>&nbsp;<span class="builtintype" id="5509729">error</span><span class="op" id="5509734">)</span>&nbsp;<span class="op" id="5509736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509739">if</span>&nbsp;<span class="ident" id="5509742">IsValue</span><span class="op" id="5509749">(</span><span class="ident" id="5509750">v</span><span class="op" id="5509751">)</span>&nbsp;<span class="op" id="5509753">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509757">return</span>&nbsp;<span class="ident" id="5509764">v</span><span class="op" id="5509765">,</span>&nbsp;<span class="ident" id="5509767">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5509772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509776">if</span>&nbsp;<span class="ident" id="5509779">svi</span><span class="op" id="5509782">,</span>&nbsp;<span class="ident" id="5509784">ok</span>&nbsp;<span class="op" id="5509787">:=</span>&nbsp;<span class="ident" id="5509790">v</span><span class="op" id="5509791">.</span><span class="op" id="5509792">(</span><span class="ident" id="5509793">Valuer</span><span class="op" id="5509799">)</span><span class="op" id="5509800">;</span>&nbsp;<span class="ident" id="5509802">ok</span>&nbsp;<span class="op" id="5509805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5509809">sv</span><span class="op" id="5509811">,</span>&nbsp;<span class="ident" id="5509813">err</span>&nbsp;<span class="op" id="5509817">:=</span>&nbsp;<span class="ident" id="5509820">svi</span><span class="op" id="5509823">.</span><span class="ident" id="5509824">Value</span><span class="op" id="5509829">(</span><span class="op" id="5509830">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509834">if</span>&nbsp;<span class="ident" id="5509837">err</span>&nbsp;<span class="op" id="5509841">!=</span>&nbsp;<span class="ident" id="5509844">nil</span>&nbsp;<span class="op" id="5509848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509853">return</span>&nbsp;<span class="ident" id="5509860">nil</span><span class="op" id="5509863">,</span>&nbsp;<span class="ident" id="5509865">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5509871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509875">if</span>&nbsp;<span class="op" id="5509878">!</span><span class="ident" id="5509879">IsValue</span><span class="op" id="5509886">(</span><span class="ident" id="5509887">sv</span><span class="op" id="5509889">)</span>&nbsp;<span class="op" id="5509891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509896">return</span>&nbsp;<span class="ident" id="5509903">nil</span><span class="op" id="5509906">,</span>&nbsp;<span class="ident" id="5509908">fmt</span><span class="op" id="5509911">.</span><span class="ident" id="5509912">Errorf</span><span class="op" id="5509918">(</span><span class="string" id="5509919">&#34;non-Value&nbsp;type&nbsp;%T&nbsp;returned&nbsp;from&nbsp;Value&#34;</span><span class="op" id="5509958">,</span>&nbsp;<span class="ident" id="5509960">sv</span><span class="op" id="5509962">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5509966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5509970">return</span>&nbsp;<span class="ident" id="5509977">sv</span><span class="op" id="5509979">,</span>&nbsp;<span class="ident" id="5509981">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5509986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5509990">rv</span>&nbsp;<span class="op" id="5509993">:=</span>&nbsp;<span class="ident" id="5509996">reflect</span><span class="op" id="5510003">.</span><span class="ident" id="5510004">ValueOf</span><span class="op" id="5510011">(</span><span class="ident" id="5510012">v</span><span class="op" id="5510013">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510016">switch</span>&nbsp;<span class="ident" id="5510023">rv</span><span class="op" id="5510025">.</span><span class="ident" id="5510026">Kind</span><span class="op" id="5510030">(</span><span class="op" id="5510031">)</span>&nbsp;<span class="op" id="5510033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510036">case</span>&nbsp;<span class="ident" id="5510041">reflect</span><span class="op" id="5510048">.</span><span class="ident" id="5510049">Ptr</span><span class="op" id="5510052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5510056">//&nbsp;indirect&nbsp;pointers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510079">if</span>&nbsp;<span class="ident" id="5510082">rv</span><span class="op" id="5510084">.</span><span class="ident" id="5510085">IsNil</span><span class="op" id="5510090">(</span><span class="op" id="5510091">)</span>&nbsp;<span class="op" id="5510093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510098">return</span>&nbsp;<span class="ident" id="5510105">nil</span><span class="op" id="5510108">,</span>&nbsp;<span class="ident" id="5510110">nil</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5510116">}</span>&nbsp;<span class="keyword" id="5510118">else</span>&nbsp;<span class="op" id="5510123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510128">return</span>&nbsp;<span class="ident" id="5510135">defaultConverter</span><span class="op" id="5510151">{</span><span class="op" id="5510152">}</span><span class="op" id="5510153">.</span><span class="ident" id="5510154">ConvertValue</span><span class="op" id="5510166">(</span><span class="ident" id="5510167">rv</span><span class="op" id="5510169">.</span><span class="ident" id="5510170">Elem</span><span class="op" id="5510174">(</span><span class="op" id="5510175">)</span><span class="op" id="5510176">.</span><span class="ident" id="5510177">Interface</span><span class="op" id="5510186">(</span><span class="op" id="5510187">)</span><span class="op" id="5510188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5510192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510195">case</span>&nbsp;<span class="ident" id="5510200">reflect</span><span class="op" id="5510207">.</span><span class="ident" id="5510208">Int</span><span class="op" id="5510211">,</span>&nbsp;<span class="ident" id="5510213">reflect</span><span class="op" id="5510220">.</span><span class="ident" id="5510221">Int8</span><span class="op" id="5510225">,</span>&nbsp;<span class="ident" id="5510227">reflect</span><span class="op" id="5510234">.</span><span class="ident" id="5510235">Int16</span><span class="op" id="5510240">,</span>&nbsp;<span class="ident" id="5510242">reflect</span><span class="op" id="5510249">.</span><span class="ident" id="5510250">Int32</span><span class="op" id="5510255">,</span>&nbsp;<span class="ident" id="5510257">reflect</span><span class="op" id="5510264">.</span><span class="ident" id="5510265">Int64</span><span class="op" id="5510270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510274">return</span>&nbsp;<span class="ident" id="5510281">rv</span><span class="op" id="5510283">.</span><span class="ident" id="5510284">Int</span><span class="op" id="5510287">(</span><span class="op" id="5510288">)</span><span class="op" id="5510289">,</span>&nbsp;<span class="ident" id="5510291">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510296">case</span>&nbsp;<span class="ident" id="5510301">reflect</span><span class="op" id="5510308">.</span><span class="ident" id="5510309">Uint</span><span class="op" id="5510313">,</span>&nbsp;<span class="ident" id="5510315">reflect</span><span class="op" id="5510322">.</span><span class="ident" id="5510323">Uint8</span><span class="op" id="5510328">,</span>&nbsp;<span class="ident" id="5510330">reflect</span><span class="op" id="5510337">.</span><span class="ident" id="5510338">Uint16</span><span class="op" id="5510344">,</span>&nbsp;<span class="ident" id="5510346">reflect</span><span class="op" id="5510353">.</span><span class="ident" id="5510354">Uint32</span><span class="op" id="5510360">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510364">return</span>&nbsp;<span class="ident" id="5510371">int64</span><span class="op" id="5510376">(</span><span class="ident" id="5510377">rv</span><span class="op" id="5510379">.</span><span class="ident" id="5510380">Uint</span><span class="op" id="5510384">(</span><span class="op" id="5510385">)</span><span class="op" id="5510386">)</span><span class="op" id="5510387">,</span>&nbsp;<span class="ident" id="5510389">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510394">case</span>&nbsp;<span class="ident" id="5510399">reflect</span><span class="op" id="5510406">.</span><span class="ident" id="5510407">Uint64</span><span class="op" id="5510413">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5510417">u64</span>&nbsp;<span class="op" id="5510421">:=</span>&nbsp;<span class="ident" id="5510424">rv</span><span class="op" id="5510426">.</span><span class="ident" id="5510427">Uint</span><span class="op" id="5510431">(</span><span class="op" id="5510432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510436">if</span>&nbsp;<span class="ident" id="5510439">u64</span>&nbsp;<span class="op" id="5510443">&gt;=</span>&nbsp;<span class="num" id="5510446">1</span><span class="op" id="5510447">&lt;&lt;</span><span class="num" id="5510449">63</span>&nbsp;<span class="op" id="5510452">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510457">return</span>&nbsp;<span class="ident" id="5510464">nil</span><span class="op" id="5510467">,</span>&nbsp;<span class="ident" id="5510469">fmt</span><span class="op" id="5510472">.</span><span class="ident" id="5510473">Errorf</span><span class="op" id="5510479">(</span><span class="string" id="5510480">&#34;uint64&nbsp;values&nbsp;with&nbsp;high&nbsp;bit&nbsp;set&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5510531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5510535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510539">return</span>&nbsp;<span class="ident" id="5510546">int64</span><span class="op" id="5510551">(</span><span class="ident" id="5510552">u64</span><span class="op" id="5510555">)</span><span class="op" id="5510556">,</span>&nbsp;<span class="ident" id="5510558">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510563">case</span>&nbsp;<span class="ident" id="5510568">reflect</span><span class="op" id="5510575">.</span><span class="ident" id="5510576">Float32</span><span class="op" id="5510583">,</span>&nbsp;<span class="ident" id="5510585">reflect</span><span class="op" id="5510592">.</span><span class="ident" id="5510593">Float64</span><span class="op" id="5510600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510604">return</span>&nbsp;<span class="ident" id="5510611">rv</span><span class="op" id="5510613">.</span><span class="ident" id="5510614">Float</span><span class="op" id="5510619">(</span><span class="op" id="5510620">)</span><span class="op" id="5510621">,</span>&nbsp;<span class="ident" id="5510623">nil</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5510628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5510631">return</span>&nbsp;<span class="ident" id="5510638">nil</span><span class="op" id="5510641">,</span>&nbsp;<span class="ident" id="5510643">fmt</span><span class="op" id="5510646">.</span><span class="ident" id="5510647">Errorf</span><span class="op" id="5510653">(</span><span class="string" id="5510654">&#34;unsupported&nbsp;type&nbsp;%T,&nbsp;a&nbsp;%s&#34;</span><span class="op" id="5510681">,</span>&nbsp;<span class="ident" id="5510683">v</span><span class="op" id="5510684">,</span>&nbsp;<span class="ident" id="5510686">rv</span><span class="op" id="5510688">.</span><span class="ident" id="5510689">Kind</span><span class="op" id="5510693">(</span><span class="op" id="5510694">)</span><span class="op" id="5510695">)</span><br>
<span class="lineno"></span><span class="op" id="5510697">}</span>
</div>
</body>
</html>
