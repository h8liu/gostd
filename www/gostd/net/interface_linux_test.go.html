<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8233590">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8233646">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8233700">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8233751">package</span>&nbsp;<span class="ident" id="8233759">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8233764">import</span>&nbsp;<span class="op" id="8233771">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8233774">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8233781">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8233792">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8233802">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8233805">func</span>&nbsp;<span class="op" id="8233810">(</span><span class="ident" id="8233811">ti</span>&nbsp;<span class="op" id="8233814">*</span><span class="ident" id="8233815">testInterface</span><span class="op" id="8233828">)</span>&nbsp;<span class="ident" id="8233830">setBroadcast</span><span class="op" id="8233842">(</span><span class="ident" id="8233843">suffix</span>&nbsp;<span class="builtintype" id="8233850">int</span><span class="op" id="8233853">)</span>&nbsp;<span class="builtintype" id="8233855">error</span>&nbsp;<span class="op" id="8233861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233864">ti</span><span class="op" id="8233866">.</span><span class="ident" id="8233867">name</span>&nbsp;<span class="op" id="8233872">=</span>&nbsp;<span class="ident" id="8233874">fmt</span><span class="op" id="8233877">.</span><span class="ident" id="8233878">Sprintf</span><span class="op" id="8233885">(</span><span class="string" id="8233886">&#34;gotest%d&#34;</span><span class="op" id="8233896">,</span>&nbsp;<span class="ident" id="8233898">suffix</span><span class="op" id="8233904">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233907">xname</span><span class="op" id="8233912">,</span>&nbsp;<span class="ident" id="8233914">err</span>&nbsp;<span class="op" id="8233918">:=</span>&nbsp;<span class="ident" id="8233921">exec</span><span class="op" id="8233925">.</span><span class="ident" id="8233926">LookPath</span><span class="op" id="8233934">(</span><span class="string" id="8233935">&#34;ip&#34;</span><span class="op" id="8233939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233942">if</span>&nbsp;<span class="ident" id="8233945">err</span>&nbsp;<span class="op" id="8233949">!=</span>&nbsp;<span class="ident" id="8233952">nil</span>&nbsp;<span class="op" id="8233956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8233960">return</span>&nbsp;<span class="ident" id="8233967">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8233972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8233975">ti</span><span class="op" id="8233977">.</span><span class="ident" id="8233978">setupCmds</span>&nbsp;<span class="op" id="8233988">=</span>&nbsp;<span class="builtinfunc" id="8233990">append</span><span class="op" id="8233996">(</span><span class="ident" id="8233997">ti</span><span class="op" id="8233999">.</span><span class="ident" id="8234000">setupCmds</span><span class="op" id="8234009">,</span>&nbsp;<span class="op" id="8234011">&amp;</span><span class="ident" id="8234012">exec</span><span class="op" id="8234016">.</span><span class="ident" id="8234017">Cmd</span><span class="op" id="8234020">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234024">Path</span><span class="op" id="8234028">:</span>&nbsp;<span class="ident" id="8234030">xname</span><span class="op" id="8234035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234039">Args</span><span class="op" id="8234043">:</span>&nbsp;<span class="op" id="8234045">[</span><span class="op" id="8234046">]</span><span class="builtintype" id="8234047">string</span><span class="op" id="8234053">{</span><span class="string" id="8234054">&#34;ip&#34;</span><span class="op" id="8234058">,</span>&nbsp;<span class="string" id="8234060">&#34;link&#34;</span><span class="op" id="8234066">,</span>&nbsp;<span class="string" id="8234068">&#34;add&#34;</span><span class="op" id="8234073">,</span>&nbsp;<span class="ident" id="8234075">ti</span><span class="op" id="8234077">.</span><span class="ident" id="8234078">name</span><span class="op" id="8234082">,</span>&nbsp;<span class="string" id="8234084">&#34;type&#34;</span><span class="op" id="8234090">,</span>&nbsp;<span class="string" id="8234092">&#34;dummy&#34;</span><span class="op" id="8234099">}</span><span class="op" id="8234100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234103">}</span><span class="op" id="8234104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234107">ti</span><span class="op" id="8234109">.</span><span class="ident" id="8234110">teardownCmds</span>&nbsp;<span class="op" id="8234123">=</span>&nbsp;<span class="builtinfunc" id="8234125">append</span><span class="op" id="8234131">(</span><span class="ident" id="8234132">ti</span><span class="op" id="8234134">.</span><span class="ident" id="8234135">teardownCmds</span><span class="op" id="8234147">,</span>&nbsp;<span class="op" id="8234149">&amp;</span><span class="ident" id="8234150">exec</span><span class="op" id="8234154">.</span><span class="ident" id="8234155">Cmd</span><span class="op" id="8234158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234162">Path</span><span class="op" id="8234166">:</span>&nbsp;<span class="ident" id="8234168">xname</span><span class="op" id="8234173">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234177">Args</span><span class="op" id="8234181">:</span>&nbsp;<span class="op" id="8234183">[</span><span class="op" id="8234184">]</span><span class="builtintype" id="8234185">string</span><span class="op" id="8234191">{</span><span class="string" id="8234192">&#34;ip&#34;</span><span class="op" id="8234196">,</span>&nbsp;<span class="string" id="8234198">&#34;link&#34;</span><span class="op" id="8234204">,</span>&nbsp;<span class="string" id="8234206">&#34;delete&#34;</span><span class="op" id="8234214">,</span>&nbsp;<span class="ident" id="8234216">ti</span><span class="op" id="8234218">.</span><span class="ident" id="8234219">name</span><span class="op" id="8234223">,</span>&nbsp;<span class="string" id="8234225">&#34;type&#34;</span><span class="op" id="8234231">,</span>&nbsp;<span class="string" id="8234233">&#34;dummy&#34;</span><span class="op" id="8234240">}</span><span class="op" id="8234241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234244">}</span><span class="op" id="8234245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234248">return</span>&nbsp;<span class="ident" id="8234255">nil</span><br>
<span class="lineno"></span><span class="op" id="8234259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8234262">func</span>&nbsp;<span class="op" id="8234267">(</span><span class="ident" id="8234268">ti</span>&nbsp;<span class="op" id="8234271">*</span><span class="ident" id="8234272">testInterface</span><span class="op" id="8234285">)</span>&nbsp;<span class="ident" id="8234287">setPointToPoint</span><span class="op" id="8234302">(</span><span class="ident" id="8234303">suffix</span>&nbsp;<span class="builtintype" id="8234310">int</span><span class="op" id="8234313">,</span>&nbsp;<span class="ident" id="8234315">local</span><span class="op" id="8234320">,</span>&nbsp;<span class="ident" id="8234322">remote</span>&nbsp;<span class="builtintype" id="8234329">string</span><span class="op" id="8234335">)</span>&nbsp;<span class="builtintype" id="8234337">error</span>&nbsp;<span class="op" id="8234343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234346">ti</span><span class="op" id="8234348">.</span><span class="ident" id="8234349">name</span>&nbsp;<span class="op" id="8234354">=</span>&nbsp;<span class="ident" id="8234356">fmt</span><span class="op" id="8234359">.</span><span class="ident" id="8234360">Sprintf</span><span class="op" id="8234367">(</span><span class="string" id="8234368">&#34;gotest%d&#34;</span><span class="op" id="8234378">,</span>&nbsp;<span class="ident" id="8234380">suffix</span><span class="op" id="8234386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234389">ti</span><span class="op" id="8234391">.</span><span class="ident" id="8234392">local</span>&nbsp;<span class="op" id="8234398">=</span>&nbsp;<span class="ident" id="8234400">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234407">ti</span><span class="op" id="8234409">.</span><span class="ident" id="8234410">remote</span>&nbsp;<span class="op" id="8234417">=</span>&nbsp;<span class="ident" id="8234419">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234427">xname</span><span class="op" id="8234432">,</span>&nbsp;<span class="ident" id="8234434">err</span>&nbsp;<span class="op" id="8234438">:=</span>&nbsp;<span class="ident" id="8234441">exec</span><span class="op" id="8234445">.</span><span class="ident" id="8234446">LookPath</span><span class="op" id="8234454">(</span><span class="string" id="8234455">&#34;ip&#34;</span><span class="op" id="8234459">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234462">if</span>&nbsp;<span class="ident" id="8234465">err</span>&nbsp;<span class="op" id="8234469">!=</span>&nbsp;<span class="ident" id="8234472">nil</span>&nbsp;<span class="op" id="8234476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234480">return</span>&nbsp;<span class="ident" id="8234487">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234495">ti</span><span class="op" id="8234497">.</span><span class="ident" id="8234498">setupCmds</span>&nbsp;<span class="op" id="8234508">=</span>&nbsp;<span class="builtinfunc" id="8234510">append</span><span class="op" id="8234516">(</span><span class="ident" id="8234517">ti</span><span class="op" id="8234519">.</span><span class="ident" id="8234520">setupCmds</span><span class="op" id="8234529">,</span>&nbsp;<span class="op" id="8234531">&amp;</span><span class="ident" id="8234532">exec</span><span class="op" id="8234536">.</span><span class="ident" id="8234537">Cmd</span><span class="op" id="8234540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234544">Path</span><span class="op" id="8234548">:</span>&nbsp;<span class="ident" id="8234550">xname</span><span class="op" id="8234555">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234559">Args</span><span class="op" id="8234563">:</span>&nbsp;<span class="op" id="8234565">[</span><span class="op" id="8234566">]</span><span class="builtintype" id="8234567">string</span><span class="op" id="8234573">{</span><span class="string" id="8234574">&#34;ip&#34;</span><span class="op" id="8234578">,</span>&nbsp;<span class="string" id="8234580">&#34;tunnel&#34;</span><span class="op" id="8234588">,</span>&nbsp;<span class="string" id="8234590">&#34;add&#34;</span><span class="op" id="8234595">,</span>&nbsp;<span class="ident" id="8234597">ti</span><span class="op" id="8234599">.</span><span class="ident" id="8234600">name</span><span class="op" id="8234604">,</span>&nbsp;<span class="string" id="8234606">&#34;mode&#34;</span><span class="op" id="8234612">,</span>&nbsp;<span class="string" id="8234614">&#34;gre&#34;</span><span class="op" id="8234619">,</span>&nbsp;<span class="string" id="8234621">&#34;local&#34;</span><span class="op" id="8234628">,</span>&nbsp;<span class="ident" id="8234630">local</span><span class="op" id="8234635">,</span>&nbsp;<span class="string" id="8234637">&#34;remote&#34;</span><span class="op" id="8234645">,</span>&nbsp;<span class="ident" id="8234647">remote</span><span class="op" id="8234653">}</span><span class="op" id="8234654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234657">}</span><span class="op" id="8234658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234661">ti</span><span class="op" id="8234663">.</span><span class="ident" id="8234664">teardownCmds</span>&nbsp;<span class="op" id="8234677">=</span>&nbsp;<span class="builtinfunc" id="8234679">append</span><span class="op" id="8234685">(</span><span class="ident" id="8234686">ti</span><span class="op" id="8234688">.</span><span class="ident" id="8234689">teardownCmds</span><span class="op" id="8234701">,</span>&nbsp;<span class="op" id="8234703">&amp;</span><span class="ident" id="8234704">exec</span><span class="op" id="8234708">.</span><span class="ident" id="8234709">Cmd</span><span class="op" id="8234712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234716">Path</span><span class="op" id="8234720">:</span>&nbsp;<span class="ident" id="8234722">xname</span><span class="op" id="8234727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234731">Args</span><span class="op" id="8234735">:</span>&nbsp;<span class="op" id="8234737">[</span><span class="op" id="8234738">]</span><span class="builtintype" id="8234739">string</span><span class="op" id="8234745">{</span><span class="string" id="8234746">&#34;ip&#34;</span><span class="op" id="8234750">,</span>&nbsp;<span class="string" id="8234752">&#34;tunnel&#34;</span><span class="op" id="8234760">,</span>&nbsp;<span class="string" id="8234762">&#34;del&#34;</span><span class="op" id="8234767">,</span>&nbsp;<span class="ident" id="8234769">ti</span><span class="op" id="8234771">.</span><span class="ident" id="8234772">name</span><span class="op" id="8234776">,</span>&nbsp;<span class="string" id="8234778">&#34;mode&#34;</span><span class="op" id="8234784">,</span>&nbsp;<span class="string" id="8234786">&#34;gre&#34;</span><span class="op" id="8234791">,</span>&nbsp;<span class="string" id="8234793">&#34;local&#34;</span><span class="op" id="8234800">,</span>&nbsp;<span class="ident" id="8234802">local</span><span class="op" id="8234807">,</span>&nbsp;<span class="string" id="8234809">&#34;remote&#34;</span><span class="op" id="8234817">,</span>&nbsp;<span class="ident" id="8234819">remote</span><span class="op" id="8234825">}</span><span class="op" id="8234826">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234829">}</span><span class="op" id="8234830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234833">xname</span><span class="op" id="8234838">,</span>&nbsp;<span class="ident" id="8234840">err</span>&nbsp;<span class="op" id="8234844">=</span>&nbsp;<span class="ident" id="8234846">exec</span><span class="op" id="8234850">.</span><span class="ident" id="8234851">LookPath</span><span class="op" id="8234859">(</span><span class="string" id="8234860">&#34;ifconfig&#34;</span><span class="op" id="8234870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234873">if</span>&nbsp;<span class="ident" id="8234876">err</span>&nbsp;<span class="op" id="8234880">!=</span>&nbsp;<span class="ident" id="8234883">nil</span>&nbsp;<span class="op" id="8234887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8234891">return</span>&nbsp;<span class="ident" id="8234898">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8234903">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234906">ti</span><span class="op" id="8234908">.</span><span class="ident" id="8234909">setupCmds</span>&nbsp;<span class="op" id="8234919">=</span>&nbsp;<span class="builtinfunc" id="8234921">append</span><span class="op" id="8234927">(</span><span class="ident" id="8234928">ti</span><span class="op" id="8234930">.</span><span class="ident" id="8234931">setupCmds</span><span class="op" id="8234940">,</span>&nbsp;<span class="op" id="8234942">&amp;</span><span class="ident" id="8234943">exec</span><span class="op" id="8234947">.</span><span class="ident" id="8234948">Cmd</span><span class="op" id="8234951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234955">Path</span><span class="op" id="8234959">:</span>&nbsp;<span class="ident" id="8234961">xname</span><span class="op" id="8234966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8234970">Args</span><span class="op" id="8234974">:</span>&nbsp;<span class="op" id="8234976">[</span><span class="op" id="8234977">]</span><span class="builtintype" id="8234978">string</span><span class="op" id="8234984">{</span><span class="string" id="8234985">&#34;ifconfig&#34;</span><span class="op" id="8234995">,</span>&nbsp;<span class="ident" id="8234997">ti</span><span class="op" id="8234999">.</span><span class="ident" id="8235000">name</span><span class="op" id="8235004">,</span>&nbsp;<span class="string" id="8235006">&#34;inet&#34;</span><span class="op" id="8235012">,</span>&nbsp;<span class="ident" id="8235014">local</span><span class="op" id="8235019">,</span>&nbsp;<span class="string" id="8235021">&#34;dstaddr&#34;</span><span class="op" id="8235030">,</span>&nbsp;<span class="ident" id="8235032">remote</span><span class="op" id="8235038">}</span><span class="op" id="8235039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235042">}</span><span class="op" id="8235043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235046">return</span>&nbsp;<span class="ident" id="8235053">nil</span><br>
<span class="lineno">55</span><span class="op" id="8235057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8235060">const</span>&nbsp;<span class="op" id="8235066">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235069">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8235090">=</span>&nbsp;<span class="num" id="8235092">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235096">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8235117">=</span>&nbsp;<span class="num" id="8235119">18</span><br>
<span class="lineno">60</span><span class="op" id="8235122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8235125">var</span>&nbsp;<span class="op" id="8235129">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235132">igmpInterfaceTable</span>&nbsp;<span class="op" id="8235151">=</span>&nbsp;<span class="op" id="8235153">[</span><span class="op" id="8235154">]</span><span class="ident" id="8235155">Interface</span><span class="op" id="8235164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235168">{</span><span class="ident" id="8235169">Name</span><span class="op" id="8235173">:</span>&nbsp;<span class="string" id="8235175">&#34;lo&#34;</span><span class="op" id="8235179">}</span><span class="op" id="8235180">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235184">{</span><span class="ident" id="8235185">Name</span><span class="op" id="8235189">:</span>&nbsp;<span class="string" id="8235191">&#34;eth0&#34;</span><span class="op" id="8235197">}</span><span class="op" id="8235198">,</span>&nbsp;<span class="op" id="8235200">{</span><span class="ident" id="8235201">Name</span><span class="op" id="8235205">:</span>&nbsp;<span class="string" id="8235207">&#34;eth1&#34;</span><span class="op" id="8235213">}</span><span class="op" id="8235214">,</span>&nbsp;<span class="op" id="8235216">{</span><span class="ident" id="8235217">Name</span><span class="op" id="8235221">:</span>&nbsp;<span class="string" id="8235223">&#34;eth2&#34;</span><span class="op" id="8235229">}</span><span class="op" id="8235230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235234">{</span><span class="ident" id="8235235">Name</span><span class="op" id="8235239">:</span>&nbsp;<span class="string" id="8235241">&#34;eth0.100&#34;</span><span class="op" id="8235251">}</span><span class="op" id="8235252">,</span>&nbsp;<span class="op" id="8235254">{</span><span class="ident" id="8235255">Name</span><span class="op" id="8235259">:</span>&nbsp;<span class="string" id="8235261">&#34;eth0.101&#34;</span><span class="op" id="8235271">}</span><span class="op" id="8235272">,</span>&nbsp;<span class="op" id="8235274">{</span><span class="ident" id="8235275">Name</span><span class="op" id="8235279">:</span>&nbsp;<span class="string" id="8235281">&#34;eth0.102&#34;</span><span class="op" id="8235291">}</span><span class="op" id="8235292">,</span>&nbsp;<span class="op" id="8235294">{</span><span class="ident" id="8235295">Name</span><span class="op" id="8235299">:</span>&nbsp;<span class="string" id="8235301">&#34;eth0.103&#34;</span><span class="op" id="8235311">}</span><span class="op" id="8235312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235316">{</span><span class="ident" id="8235317">Name</span><span class="op" id="8235321">:</span>&nbsp;<span class="string" id="8235323">&#34;device1tap2&#34;</span><span class="op" id="8235336">}</span><span class="op" id="8235337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235343">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8235363">=</span>&nbsp;<span class="op" id="8235365">[</span><span class="op" id="8235366">]</span><span class="ident" id="8235367">Interface</span><span class="op" id="8235376">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235380">{</span><span class="ident" id="8235381">Name</span><span class="op" id="8235385">:</span>&nbsp;<span class="string" id="8235387">&#34;lo&#34;</span><span class="op" id="8235391">}</span><span class="op" id="8235392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235396">{</span><span class="ident" id="8235397">Name</span><span class="op" id="8235401">:</span>&nbsp;<span class="string" id="8235403">&#34;eth0&#34;</span><span class="op" id="8235409">}</span><span class="op" id="8235410">,</span>&nbsp;<span class="op" id="8235412">{</span><span class="ident" id="8235413">Name</span><span class="op" id="8235417">:</span>&nbsp;<span class="string" id="8235419">&#34;eth1&#34;</span><span class="op" id="8235425">}</span><span class="op" id="8235426">,</span>&nbsp;<span class="op" id="8235428">{</span><span class="ident" id="8235429">Name</span><span class="op" id="8235433">:</span>&nbsp;<span class="string" id="8235435">&#34;eth2&#34;</span><span class="op" id="8235441">}</span><span class="op" id="8235442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235446">{</span><span class="ident" id="8235447">Name</span><span class="op" id="8235451">:</span>&nbsp;<span class="string" id="8235453">&#34;eth0.100&#34;</span><span class="op" id="8235463">}</span><span class="op" id="8235464">,</span>&nbsp;<span class="op" id="8235466">{</span><span class="ident" id="8235467">Name</span><span class="op" id="8235471">:</span>&nbsp;<span class="string" id="8235473">&#34;eth0.101&#34;</span><span class="op" id="8235483">}</span><span class="op" id="8235484">,</span>&nbsp;<span class="op" id="8235486">{</span><span class="ident" id="8235487">Name</span><span class="op" id="8235491">:</span>&nbsp;<span class="string" id="8235493">&#34;eth0.102&#34;</span><span class="op" id="8235503">}</span><span class="op" id="8235504">,</span>&nbsp;<span class="op" id="8235506">{</span><span class="ident" id="8235507">Name</span><span class="op" id="8235511">:</span>&nbsp;<span class="string" id="8235513">&#34;eth0.103&#34;</span><span class="op" id="8235523">}</span><span class="op" id="8235524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235528">{</span><span class="ident" id="8235529">Name</span><span class="op" id="8235533">:</span>&nbsp;<span class="string" id="8235535">&#34;device1tap2&#34;</span><span class="op" id="8235548">}</span><span class="op" id="8235549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235553">{</span><span class="ident" id="8235554">Name</span><span class="op" id="8235558">:</span>&nbsp;<span class="string" id="8235560">&#34;pan0&#34;</span><span class="op" id="8235566">}</span><span class="op" id="8235567">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235570">}</span><br>
<span class="lineno"></span><span class="op" id="8235572">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8235575">func</span>&nbsp;<span class="ident" id="8235580">TestParseProcNet</span><span class="op" id="8235596">(</span><span class="ident" id="8235597">t</span>&nbsp;<span class="op" id="8235599">*</span><span class="ident" id="8235600">testing</span><span class="op" id="8235607">.</span><span class="ident" id="8235608">T</span><span class="op" id="8235609">)</span>&nbsp;<span class="op" id="8235611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235614">defer</span>&nbsp;<span class="keyword" id="8235620">func</span><span class="op" id="8235624">(</span><span class="op" id="8235625">)</span>&nbsp;<span class="op" id="8235627">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235631">if</span>&nbsp;<span class="ident" id="8235634">p</span>&nbsp;<span class="op" id="8235636">:=</span>&nbsp;<span class="builtinfunc" id="8235639">recover</span><span class="op" id="8235646">(</span><span class="op" id="8235647">)</span><span class="op" id="8235648">;</span>&nbsp;<span class="ident" id="8235650">p</span>&nbsp;<span class="op" id="8235652">!=</span>&nbsp;<span class="ident" id="8235655">nil</span>&nbsp;<span class="op" id="8235659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235664">t</span><span class="op" id="8235665">.</span><span class="ident" id="8235666">Fatalf</span><span class="op" id="8235672">(</span><span class="string" id="8235673">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="8235725">,</span>&nbsp;<span class="ident" id="8235727">p</span><span class="op" id="8235728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235735">}</span><span class="op" id="8235736">(</span><span class="op" id="8235737">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235741">var</span>&nbsp;<span class="ident" id="8235745">ifmat4</span>&nbsp;<span class="op" id="8235752">[</span><span class="op" id="8235753">]</span><span class="ident" id="8235754">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235760">for</span>&nbsp;<span class="ident" id="8235764">_</span><span class="op" id="8235765">,</span>&nbsp;<span class="ident" id="8235767">ifi</span>&nbsp;<span class="op" id="8235771">:=</span>&nbsp;<span class="keyword" id="8235774">range</span>&nbsp;<span class="ident" id="8235780">igmpInterfaceTable</span>&nbsp;<span class="op" id="8235799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235803">ifmat</span>&nbsp;<span class="op" id="8235809">:=</span>&nbsp;<span class="ident" id="8235812">parseProcNetIGMP</span><span class="op" id="8235828">(</span><span class="string" id="8235829">&#34;testdata/igmp&#34;</span><span class="op" id="8235844">,</span>&nbsp;<span class="op" id="8235846">&amp;</span><span class="ident" id="8235847">ifi</span><span class="op" id="8235850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235854">ifmat4</span>&nbsp;<span class="op" id="8235861">=</span>&nbsp;<span class="builtinfunc" id="8235863">append</span><span class="op" id="8235869">(</span><span class="ident" id="8235870">ifmat4</span><span class="op" id="8235876">,</span>&nbsp;<span class="ident" id="8235878">ifmat</span><span class="op" id="8235883">...</span><span class="op" id="8235886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8235889">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8235892">if</span>&nbsp;<span class="builtinfunc" id="8235895">len</span><span class="op" id="8235898">(</span><span class="ident" id="8235899">ifmat4</span><span class="op" id="8235905">)</span>&nbsp;<span class="op" id="8235907">!=</span>&nbsp;<span class="ident" id="8235910">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8235931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8235935">t</span><span class="op" id="8235936">.</span><span class="ident" id="8235937">Fatalf</span><span class="op" id="8235943">(</span><span class="string" id="8235944">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8235996">,</span>&nbsp;<span class="builtinfunc" id="8235998">len</span><span class="op" id="8236001">(</span><span class="ident" id="8236002">ifmat4</span><span class="op" id="8236008">)</span><span class="op" id="8236009">,</span>&nbsp;<span class="ident" id="8236011">numOfTestIPv4MCAddrs</span><span class="op" id="8236031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8236038">var</span>&nbsp;<span class="ident" id="8236042">ifmat6</span>&nbsp;<span class="op" id="8236049">[</span><span class="op" id="8236050">]</span><span class="ident" id="8236051">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8236057">for</span>&nbsp;<span class="ident" id="8236061">_</span><span class="op" id="8236062">,</span>&nbsp;<span class="ident" id="8236064">ifi</span>&nbsp;<span class="op" id="8236068">:=</span>&nbsp;<span class="keyword" id="8236071">range</span>&nbsp;<span class="ident" id="8236077">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8236097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8236101">ifmat</span>&nbsp;<span class="op" id="8236107">:=</span>&nbsp;<span class="ident" id="8236110">parseProcNetIGMP6</span><span class="op" id="8236127">(</span><span class="string" id="8236128">&#34;testdata/igmp6&#34;</span><span class="op" id="8236144">,</span>&nbsp;<span class="op" id="8236146">&amp;</span><span class="ident" id="8236147">ifi</span><span class="op" id="8236150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8236154">ifmat6</span>&nbsp;<span class="op" id="8236161">=</span>&nbsp;<span class="builtinfunc" id="8236163">append</span><span class="op" id="8236169">(</span><span class="ident" id="8236170">ifmat6</span><span class="op" id="8236176">,</span>&nbsp;<span class="ident" id="8236178">ifmat</span><span class="op" id="8236183">...</span><span class="op" id="8236186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8236192">if</span>&nbsp;<span class="builtinfunc" id="8236195">len</span><span class="op" id="8236198">(</span><span class="ident" id="8236199">ifmat6</span><span class="op" id="8236205">)</span>&nbsp;<span class="op" id="8236207">!=</span>&nbsp;<span class="ident" id="8236210">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8236231">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8236235">t</span><span class="op" id="8236236">.</span><span class="ident" id="8236237">Fatalf</span><span class="op" id="8236243">(</span><span class="string" id="8236244">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8236297">,</span>&nbsp;<span class="builtinfunc" id="8236299">len</span><span class="op" id="8236302">(</span><span class="ident" id="8236303">ifmat6</span><span class="op" id="8236309">)</span><span class="op" id="8236310">,</span>&nbsp;<span class="ident" id="8236312">numOfTestIPv6MCAddrs</span><span class="op" id="8236332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8236335">}</span><br>
<span class="lineno"></span><span class="op" id="8236337">}</span>
</div>
</body>
</html>
