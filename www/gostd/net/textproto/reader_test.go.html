<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7106285">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7106341">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7106395">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7106446">package</span>&nbsp;<span class="ident" id="7106454">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7106465">import</span>&nbsp;<span class="op" id="7106472">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106475">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106484">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106493">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106499">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106510">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7106521">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7106531">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7106534">type</span>&nbsp;<span class="ident" id="7106539">canonicalHeaderKeyTest</span>&nbsp;<span class="keyword" id="7106562">struct</span>&nbsp;<span class="op" id="7106569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7106572">in</span><span class="op" id="7106574">,</span>&nbsp;<span class="ident" id="7106576">out</span>&nbsp;<span class="builtintype" id="7106580">string</span><br>
<span class="lineno"></span><span class="op" id="7106587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7106590">var</span>&nbsp;<span class="ident" id="7106594">canonicalHeaderKeyTests</span>&nbsp;<span class="op" id="7106618">=</span>&nbsp;<span class="op" id="7106620">[</span><span class="op" id="7106621">]</span><span class="ident" id="7106622">canonicalHeaderKeyTest</span><span class="op" id="7106644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106647">{</span><span class="string" id="7106648">&#34;a-b-c&#34;</span><span class="op" id="7106655">,</span>&nbsp;<span class="string" id="7106657">&#34;A-B-C&#34;</span><span class="op" id="7106664">}</span><span class="op" id="7106665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106668">{</span><span class="string" id="7106669">&#34;a-1-c&#34;</span><span class="op" id="7106676">,</span>&nbsp;<span class="string" id="7106678">&#34;A-1-C&#34;</span><span class="op" id="7106685">}</span><span class="op" id="7106686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106689">{</span><span class="string" id="7106690">&#34;User-Agent&#34;</span><span class="op" id="7106702">,</span>&nbsp;<span class="string" id="7106704">&#34;User-Agent&#34;</span><span class="op" id="7106716">}</span><span class="op" id="7106717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106720">{</span><span class="string" id="7106721">&#34;uSER-aGENT&#34;</span><span class="op" id="7106733">,</span>&nbsp;<span class="string" id="7106735">&#34;User-Agent&#34;</span><span class="op" id="7106747">}</span><span class="op" id="7106748">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106751">{</span><span class="string" id="7106752">&#34;user-agent&#34;</span><span class="op" id="7106764">,</span>&nbsp;<span class="string" id="7106766">&#34;User-Agent&#34;</span><span class="op" id="7106778">}</span><span class="op" id="7106779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106782">{</span><span class="string" id="7106783">&#34;USER-AGENT&#34;</span><span class="op" id="7106795">,</span>&nbsp;<span class="string" id="7106797">&#34;User-Agent&#34;</span><span class="op" id="7106809">}</span><span class="op" id="7106810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106813">{</span><span class="string" id="7106814">&#34;üser-agenT&#34;</span><span class="op" id="7106827">,</span>&nbsp;<span class="string" id="7106829">&#34;üser-Agent&#34;</span><span class="op" id="7106842">}</span><span class="op" id="7106843">,</span>&nbsp;<span class="comment" id="7106845">//&nbsp;non-ASCII&nbsp;unchanged</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7106870">//&nbsp;This&nbsp;caused&nbsp;a&nbsp;panic&nbsp;due&nbsp;to&nbsp;mishandling&nbsp;of&nbsp;a&nbsp;space:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106925">{</span><span class="string" id="7106926">&#34;C&nbsp;Ontent-Transfer-Encoding&#34;</span><span class="op" id="7106954">,</span>&nbsp;<span class="string" id="7106956">&#34;C-Ontent-Transfer-Encoding&#34;</span><span class="op" id="7106984">}</span><span class="op" id="7106985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7106988">{</span><span class="string" id="7106989">&#34;foo&nbsp;bar&#34;</span><span class="op" id="7106998">,</span>&nbsp;<span class="string" id="7107000">&#34;Foo-Bar&#34;</span><span class="op" id="7107009">}</span><span class="op" id="7107010">,</span><br>
<span class="lineno"></span><span class="op" id="7107012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7107015">func</span>&nbsp;<span class="ident" id="7107020">TestCanonicalMIMEHeaderKey</span><span class="op" id="7107046">(</span><span class="ident" id="7107047">t</span>&nbsp;<span class="op" id="7107049">*</span><span class="ident" id="7107050">testing</span><span class="op" id="7107057">.</span><span class="ident" id="7107058">T</span><span class="op" id="7107059">)</span>&nbsp;<span class="op" id="7107061">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107064">for</span>&nbsp;<span class="ident" id="7107068">_</span><span class="op" id="7107069">,</span>&nbsp;<span class="ident" id="7107071">tt</span>&nbsp;<span class="op" id="7107074">:=</span>&nbsp;<span class="keyword" id="7107077">range</span>&nbsp;<span class="ident" id="7107083">canonicalHeaderKeyTests</span>&nbsp;<span class="op" id="7107107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107111">if</span>&nbsp;<span class="ident" id="7107114">s</span>&nbsp;<span class="op" id="7107116">:=</span>&nbsp;<span class="ident" id="7107119">CanonicalMIMEHeaderKey</span><span class="op" id="7107141">(</span><span class="ident" id="7107142">tt</span><span class="op" id="7107144">.</span><span class="ident" id="7107145">in</span><span class="op" id="7107147">)</span><span class="op" id="7107148">;</span>&nbsp;<span class="ident" id="7107150">s</span>&nbsp;<span class="op" id="7107152">!=</span>&nbsp;<span class="ident" id="7107155">tt</span><span class="op" id="7107157">.</span><span class="ident" id="7107158">out</span>&nbsp;<span class="op" id="7107162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107167">t</span><span class="op" id="7107168">.</span><span class="ident" id="7107169">Errorf</span><span class="op" id="7107175">(</span><span class="string" id="7107176">&#34;CanonicalMIMEHeaderKey(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7107218">,</span>&nbsp;<span class="ident" id="7107220">tt</span><span class="op" id="7107222">.</span><span class="ident" id="7107223">in</span><span class="op" id="7107225">,</span>&nbsp;<span class="ident" id="7107227">s</span><span class="op" id="7107228">,</span>&nbsp;<span class="ident" id="7107230">tt</span><span class="op" id="7107232">.</span><span class="ident" id="7107233">out</span><span class="op" id="7107236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107243">}</span><br>
<span class="lineno">40</span><span class="op" id="7107245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7107248">func</span>&nbsp;<span class="ident" id="7107253">reader</span><span class="op" id="7107259">(</span><span class="ident" id="7107260">s</span>&nbsp;<span class="builtintype" id="7107262">string</span><span class="op" id="7107268">)</span>&nbsp;<span class="op" id="7107270">*</span><span class="ident" id="7107271">Reader</span>&nbsp;<span class="op" id="7107278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107281">return</span>&nbsp;<span class="ident" id="7107288">NewReader</span><span class="op" id="7107297">(</span><span class="ident" id="7107298">bufio</span><span class="op" id="7107303">.</span><span class="ident" id="7107304">NewReader</span><span class="op" id="7107313">(</span><span class="ident" id="7107314">strings</span><span class="op" id="7107321">.</span><span class="ident" id="7107322">NewReader</span><span class="op" id="7107331">(</span><span class="ident" id="7107332">s</span><span class="op" id="7107333">)</span><span class="op" id="7107334">)</span><span class="op" id="7107335">)</span><br>
<span class="lineno"></span><span class="op" id="7107337">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="7107340">func</span>&nbsp;<span class="ident" id="7107345">TestReadLine</span><span class="op" id="7107357">(</span><span class="ident" id="7107358">t</span>&nbsp;<span class="op" id="7107360">*</span><span class="ident" id="7107361">testing</span><span class="op" id="7107368">.</span><span class="ident" id="7107369">T</span><span class="op" id="7107370">)</span>&nbsp;<span class="op" id="7107372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107375">r</span>&nbsp;<span class="op" id="7107377">:=</span>&nbsp;<span class="ident" id="7107380">reader</span><span class="op" id="7107386">(</span><span class="string" id="7107387">&#34;line1\nline2\n&#34;</span><span class="op" id="7107403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107406">s</span><span class="op" id="7107407">,</span>&nbsp;<span class="ident" id="7107409">err</span>&nbsp;<span class="op" id="7107413">:=</span>&nbsp;<span class="ident" id="7107416">r</span><span class="op" id="7107417">.</span><span class="ident" id="7107418">ReadLine</span><span class="op" id="7107426">(</span><span class="op" id="7107427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107430">if</span>&nbsp;<span class="ident" id="7107433">s</span>&nbsp;<span class="op" id="7107435">!=</span>&nbsp;<span class="string" id="7107438">&#34;line1&#34;</span>&nbsp;<span class="op" id="7107446">||</span>&nbsp;<span class="ident" id="7107449">err</span>&nbsp;<span class="op" id="7107453">!=</span>&nbsp;<span class="builtintype" id="7107456">nil</span>&nbsp;<span class="op" id="7107460">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107464">t</span><span class="op" id="7107465">.</span><span class="ident" id="7107466">Fatalf</span><span class="op" id="7107472">(</span><span class="string" id="7107473">&#34;Line&nbsp;1:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7107489">,</span>&nbsp;<span class="ident" id="7107491">s</span><span class="op" id="7107492">,</span>&nbsp;<span class="ident" id="7107494">err</span><span class="op" id="7107497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107503">s</span><span class="op" id="7107504">,</span>&nbsp;<span class="ident" id="7107506">err</span>&nbsp;<span class="op" id="7107510">=</span>&nbsp;<span class="ident" id="7107512">r</span><span class="op" id="7107513">.</span><span class="ident" id="7107514">ReadLine</span><span class="op" id="7107522">(</span><span class="op" id="7107523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107526">if</span>&nbsp;<span class="ident" id="7107529">s</span>&nbsp;<span class="op" id="7107531">!=</span>&nbsp;<span class="string" id="7107534">&#34;line2&#34;</span>&nbsp;<span class="op" id="7107542">||</span>&nbsp;<span class="ident" id="7107545">err</span>&nbsp;<span class="op" id="7107549">!=</span>&nbsp;<span class="builtintype" id="7107552">nil</span>&nbsp;<span class="op" id="7107556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107560">t</span><span class="op" id="7107561">.</span><span class="ident" id="7107562">Fatalf</span><span class="op" id="7107568">(</span><span class="string" id="7107569">&#34;Line&nbsp;2:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7107585">,</span>&nbsp;<span class="ident" id="7107587">s</span><span class="op" id="7107588">,</span>&nbsp;<span class="ident" id="7107590">err</span><span class="op" id="7107593">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107599">s</span><span class="op" id="7107600">,</span>&nbsp;<span class="ident" id="7107602">err</span>&nbsp;<span class="op" id="7107606">=</span>&nbsp;<span class="ident" id="7107608">r</span><span class="op" id="7107609">.</span><span class="ident" id="7107610">ReadLine</span><span class="op" id="7107618">(</span><span class="op" id="7107619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107622">if</span>&nbsp;<span class="ident" id="7107625">s</span>&nbsp;<span class="op" id="7107627">!=</span>&nbsp;<span class="string" id="7107630">&#34;&#34;</span>&nbsp;<span class="op" id="7107633">||</span>&nbsp;<span class="ident" id="7107636">err</span>&nbsp;<span class="op" id="7107640">!=</span>&nbsp;<span class="ident" id="7107643">io</span><span class="op" id="7107645">.</span><span class="ident" id="7107646">EOF</span>&nbsp;<span class="op" id="7107650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107654">t</span><span class="op" id="7107655">.</span><span class="ident" id="7107656">Fatalf</span><span class="op" id="7107662">(</span><span class="string" id="7107663">&#34;EOF:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7107676">,</span>&nbsp;<span class="ident" id="7107678">s</span><span class="op" id="7107679">,</span>&nbsp;<span class="ident" id="7107681">err</span><span class="op" id="7107684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107687">}</span><br>
<span class="lineno">60</span><span class="op" id="7107689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7107692">func</span>&nbsp;<span class="ident" id="7107697">TestReadContinuedLine</span><span class="op" id="7107718">(</span><span class="ident" id="7107719">t</span>&nbsp;<span class="op" id="7107721">*</span><span class="ident" id="7107722">testing</span><span class="op" id="7107729">.</span><span class="ident" id="7107730">T</span><span class="op" id="7107731">)</span>&nbsp;<span class="op" id="7107733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107736">r</span>&nbsp;<span class="op" id="7107738">:=</span>&nbsp;<span class="ident" id="7107741">reader</span><span class="op" id="7107747">(</span><span class="string" id="7107748">&#34;line1\nline\n&nbsp;2\nline3\n&#34;</span><span class="op" id="7107774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107777">s</span><span class="op" id="7107778">,</span>&nbsp;<span class="ident" id="7107780">err</span>&nbsp;<span class="op" id="7107784">:=</span>&nbsp;<span class="ident" id="7107787">r</span><span class="op" id="7107788">.</span><span class="ident" id="7107789">ReadContinuedLine</span><span class="op" id="7107806">(</span><span class="op" id="7107807">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107810">if</span>&nbsp;<span class="ident" id="7107813">s</span>&nbsp;<span class="op" id="7107815">!=</span>&nbsp;<span class="string" id="7107818">&#34;line1&#34;</span>&nbsp;<span class="op" id="7107826">||</span>&nbsp;<span class="ident" id="7107829">err</span>&nbsp;<span class="op" id="7107833">!=</span>&nbsp;<span class="builtintype" id="7107836">nil</span>&nbsp;<span class="op" id="7107840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107844">t</span><span class="op" id="7107845">.</span><span class="ident" id="7107846">Fatalf</span><span class="op" id="7107852">(</span><span class="string" id="7107853">&#34;Line&nbsp;1:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7107869">,</span>&nbsp;<span class="ident" id="7107871">s</span><span class="op" id="7107872">,</span>&nbsp;<span class="ident" id="7107874">err</span><span class="op" id="7107877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107883">s</span><span class="op" id="7107884">,</span>&nbsp;<span class="ident" id="7107886">err</span>&nbsp;<span class="op" id="7107890">=</span>&nbsp;<span class="ident" id="7107892">r</span><span class="op" id="7107893">.</span><span class="ident" id="7107894">ReadContinuedLine</span><span class="op" id="7107911">(</span><span class="op" id="7107912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7107915">if</span>&nbsp;<span class="ident" id="7107918">s</span>&nbsp;<span class="op" id="7107920">!=</span>&nbsp;<span class="string" id="7107923">&#34;line&nbsp;2&#34;</span>&nbsp;<span class="op" id="7107932">||</span>&nbsp;<span class="ident" id="7107935">err</span>&nbsp;<span class="op" id="7107939">!=</span>&nbsp;<span class="builtintype" id="7107942">nil</span>&nbsp;<span class="op" id="7107946">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107950">t</span><span class="op" id="7107951">.</span><span class="ident" id="7107952">Fatalf</span><span class="op" id="7107958">(</span><span class="string" id="7107959">&#34;Line&nbsp;2:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7107975">,</span>&nbsp;<span class="ident" id="7107977">s</span><span class="op" id="7107978">,</span>&nbsp;<span class="ident" id="7107980">err</span><span class="op" id="7107983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7107986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7107989">s</span><span class="op" id="7107990">,</span>&nbsp;<span class="ident" id="7107992">err</span>&nbsp;<span class="op" id="7107996">=</span>&nbsp;<span class="ident" id="7107998">r</span><span class="op" id="7107999">.</span><span class="ident" id="7108000">ReadContinuedLine</span><span class="op" id="7108017">(</span><span class="op" id="7108018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108021">if</span>&nbsp;<span class="ident" id="7108024">s</span>&nbsp;<span class="op" id="7108026">!=</span>&nbsp;<span class="string" id="7108029">&#34;line3&#34;</span>&nbsp;<span class="op" id="7108037">||</span>&nbsp;<span class="ident" id="7108040">err</span>&nbsp;<span class="op" id="7108044">!=</span>&nbsp;<span class="builtintype" id="7108047">nil</span>&nbsp;<span class="op" id="7108051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108055">t</span><span class="op" id="7108056">.</span><span class="ident" id="7108057">Fatalf</span><span class="op" id="7108063">(</span><span class="string" id="7108064">&#34;Line&nbsp;3:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7108080">,</span>&nbsp;<span class="ident" id="7108082">s</span><span class="op" id="7108083">,</span>&nbsp;<span class="ident" id="7108085">err</span><span class="op" id="7108088">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108094">s</span><span class="op" id="7108095">,</span>&nbsp;<span class="ident" id="7108097">err</span>&nbsp;<span class="op" id="7108101">=</span>&nbsp;<span class="ident" id="7108103">r</span><span class="op" id="7108104">.</span><span class="ident" id="7108105">ReadContinuedLine</span><span class="op" id="7108122">(</span><span class="op" id="7108123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108126">if</span>&nbsp;<span class="ident" id="7108129">s</span>&nbsp;<span class="op" id="7108131">!=</span>&nbsp;<span class="string" id="7108134">&#34;&#34;</span>&nbsp;<span class="op" id="7108137">||</span>&nbsp;<span class="ident" id="7108140">err</span>&nbsp;<span class="op" id="7108144">!=</span>&nbsp;<span class="ident" id="7108147">io</span><span class="op" id="7108149">.</span><span class="ident" id="7108150">EOF</span>&nbsp;<span class="op" id="7108154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108158">t</span><span class="op" id="7108159">.</span><span class="ident" id="7108160">Fatalf</span><span class="op" id="7108166">(</span><span class="string" id="7108167">&#34;EOF:&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7108180">,</span>&nbsp;<span class="ident" id="7108182">s</span><span class="op" id="7108183">,</span>&nbsp;<span class="ident" id="7108185">err</span><span class="op" id="7108188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108191">}</span><br>
<span class="lineno">80</span><span class="op" id="7108193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7108196">func</span>&nbsp;<span class="ident" id="7108201">TestReadCodeLine</span><span class="op" id="7108217">(</span><span class="ident" id="7108218">t</span>&nbsp;<span class="op" id="7108220">*</span><span class="ident" id="7108221">testing</span><span class="op" id="7108228">.</span><span class="ident" id="7108229">T</span><span class="op" id="7108230">)</span>&nbsp;<span class="op" id="7108232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108235">r</span>&nbsp;<span class="op" id="7108237">:=</span>&nbsp;<span class="ident" id="7108240">reader</span><span class="op" id="7108246">(</span><span class="string" id="7108247">&#34;123&nbsp;hi\n234&nbsp;bye\n345&nbsp;no&nbsp;way\n&#34;</span><span class="op" id="7108278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108281">code</span><span class="op" id="7108285">,</span>&nbsp;<span class="ident" id="7108287">msg</span><span class="op" id="7108290">,</span>&nbsp;<span class="ident" id="7108292">err</span>&nbsp;<span class="op" id="7108296">:=</span>&nbsp;<span class="ident" id="7108299">r</span><span class="op" id="7108300">.</span><span class="ident" id="7108301">ReadCodeLine</span><span class="op" id="7108313">(</span><span class="num" id="7108314">0</span><span class="op" id="7108315">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108318">if</span>&nbsp;<span class="ident" id="7108321">code</span>&nbsp;<span class="op" id="7108326">!=</span>&nbsp;<span class="num" id="7108329">123</span>&nbsp;<span class="op" id="7108333">||</span>&nbsp;<span class="ident" id="7108336">msg</span>&nbsp;<span class="op" id="7108340">!=</span>&nbsp;<span class="string" id="7108343">&#34;hi&#34;</span>&nbsp;<span class="op" id="7108348">||</span>&nbsp;<span class="ident" id="7108351">err</span>&nbsp;<span class="op" id="7108355">!=</span>&nbsp;<span class="builtintype" id="7108358">nil</span>&nbsp;<span class="op" id="7108362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108366">t</span><span class="op" id="7108367">.</span><span class="ident" id="7108368">Fatalf</span><span class="op" id="7108374">(</span><span class="string" id="7108375">&#34;Line&nbsp;1:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7108395">,</span>&nbsp;<span class="ident" id="7108397">code</span><span class="op" id="7108401">,</span>&nbsp;<span class="ident" id="7108403">msg</span><span class="op" id="7108406">,</span>&nbsp;<span class="ident" id="7108408">err</span><span class="op" id="7108411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108417">code</span><span class="op" id="7108421">,</span>&nbsp;<span class="ident" id="7108423">msg</span><span class="op" id="7108426">,</span>&nbsp;<span class="ident" id="7108428">err</span>&nbsp;<span class="op" id="7108432">=</span>&nbsp;<span class="ident" id="7108434">r</span><span class="op" id="7108435">.</span><span class="ident" id="7108436">ReadCodeLine</span><span class="op" id="7108448">(</span><span class="num" id="7108449">23</span><span class="op" id="7108451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108454">if</span>&nbsp;<span class="ident" id="7108457">code</span>&nbsp;<span class="op" id="7108462">!=</span>&nbsp;<span class="num" id="7108465">234</span>&nbsp;<span class="op" id="7108469">||</span>&nbsp;<span class="ident" id="7108472">msg</span>&nbsp;<span class="op" id="7108476">!=</span>&nbsp;<span class="string" id="7108479">&#34;bye&#34;</span>&nbsp;<span class="op" id="7108485">||</span>&nbsp;<span class="ident" id="7108488">err</span>&nbsp;<span class="op" id="7108492">!=</span>&nbsp;<span class="builtintype" id="7108495">nil</span>&nbsp;<span class="op" id="7108499">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108503">t</span><span class="op" id="7108504">.</span><span class="ident" id="7108505">Fatalf</span><span class="op" id="7108511">(</span><span class="string" id="7108512">&#34;Line&nbsp;2:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7108532">,</span>&nbsp;<span class="ident" id="7108534">code</span><span class="op" id="7108538">,</span>&nbsp;<span class="ident" id="7108540">msg</span><span class="op" id="7108543">,</span>&nbsp;<span class="ident" id="7108545">err</span><span class="op" id="7108548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108554">code</span><span class="op" id="7108558">,</span>&nbsp;<span class="ident" id="7108560">msg</span><span class="op" id="7108563">,</span>&nbsp;<span class="ident" id="7108565">err</span>&nbsp;<span class="op" id="7108569">=</span>&nbsp;<span class="ident" id="7108571">r</span><span class="op" id="7108572">.</span><span class="ident" id="7108573">ReadCodeLine</span><span class="op" id="7108585">(</span><span class="num" id="7108586">346</span><span class="op" id="7108589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108592">if</span>&nbsp;<span class="ident" id="7108595">code</span>&nbsp;<span class="op" id="7108600">!=</span>&nbsp;<span class="num" id="7108603">345</span>&nbsp;<span class="op" id="7108607">||</span>&nbsp;<span class="ident" id="7108610">msg</span>&nbsp;<span class="op" id="7108614">!=</span>&nbsp;<span class="string" id="7108617">&#34;no&nbsp;way&#34;</span>&nbsp;<span class="op" id="7108626">||</span>&nbsp;<span class="ident" id="7108629">err</span>&nbsp;<span class="op" id="7108633">==</span>&nbsp;<span class="builtintype" id="7108636">nil</span>&nbsp;<span class="op" id="7108640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108644">t</span><span class="op" id="7108645">.</span><span class="ident" id="7108646">Fatalf</span><span class="op" id="7108652">(</span><span class="string" id="7108653">&#34;Line&nbsp;3:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7108673">,</span>&nbsp;<span class="ident" id="7108675">code</span><span class="op" id="7108679">,</span>&nbsp;<span class="ident" id="7108681">msg</span><span class="op" id="7108684">,</span>&nbsp;<span class="ident" id="7108686">err</span><span class="op" id="7108689">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108695">if</span>&nbsp;<span class="ident" id="7108698">e</span><span class="op" id="7108699">,</span>&nbsp;<span class="ident" id="7108701">ok</span>&nbsp;<span class="op" id="7108704">:=</span>&nbsp;<span class="ident" id="7108707">err</span><span class="op" id="7108710">.</span><span class="op" id="7108711">(</span><span class="op" id="7108712">*</span><span class="ident" id="7108713">Error</span><span class="op" id="7108718">)</span><span class="op" id="7108719">;</span>&nbsp;<span class="op" id="7108721">!</span><span class="ident" id="7108722">ok</span>&nbsp;<span class="op" id="7108725">||</span>&nbsp;<span class="ident" id="7108728">e</span><span class="op" id="7108729">.</span><span class="ident" id="7108730">Code</span>&nbsp;<span class="op" id="7108735">!=</span>&nbsp;<span class="ident" id="7108738">code</span>&nbsp;<span class="op" id="7108743">||</span>&nbsp;<span class="ident" id="7108746">e</span><span class="op" id="7108747">.</span><span class="ident" id="7108748">Msg</span>&nbsp;<span class="op" id="7108752">!=</span>&nbsp;<span class="ident" id="7108755">msg</span>&nbsp;<span class="op" id="7108759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108763">t</span><span class="op" id="7108764">.</span><span class="ident" id="7108765">Fatalf</span><span class="op" id="7108771">(</span><span class="string" id="7108772">&#34;Line&nbsp;3:&nbsp;wrong&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7108798">,</span>&nbsp;<span class="ident" id="7108800">err</span><span class="op" id="7108803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108809">code</span><span class="op" id="7108813">,</span>&nbsp;<span class="ident" id="7108815">msg</span><span class="op" id="7108818">,</span>&nbsp;<span class="ident" id="7108820">err</span>&nbsp;<span class="op" id="7108824">=</span>&nbsp;<span class="ident" id="7108826">r</span><span class="op" id="7108827">.</span><span class="ident" id="7108828">ReadCodeLine</span><span class="op" id="7108840">(</span><span class="num" id="7108841">1</span><span class="op" id="7108842">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7108845">if</span>&nbsp;<span class="ident" id="7108848">code</span>&nbsp;<span class="op" id="7108853">!=</span>&nbsp;<span class="num" id="7108856">0</span>&nbsp;<span class="op" id="7108858">||</span>&nbsp;<span class="ident" id="7108861">msg</span>&nbsp;<span class="op" id="7108865">!=</span>&nbsp;<span class="string" id="7108868">&#34;&#34;</span>&nbsp;<span class="op" id="7108871">||</span>&nbsp;<span class="ident" id="7108874">err</span>&nbsp;<span class="op" id="7108878">!=</span>&nbsp;<span class="ident" id="7108881">io</span><span class="op" id="7108883">.</span><span class="ident" id="7108884">EOF</span>&nbsp;<span class="op" id="7108888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108892">t</span><span class="op" id="7108893">.</span><span class="ident" id="7108894">Fatalf</span><span class="op" id="7108900">(</span><span class="string" id="7108901">&#34;EOF:&nbsp;%d,&nbsp;%s,&nbsp;%v&#34;</span><span class="op" id="7108918">,</span>&nbsp;<span class="ident" id="7108920">code</span><span class="op" id="7108924">,</span>&nbsp;<span class="ident" id="7108926">msg</span><span class="op" id="7108929">,</span>&nbsp;<span class="ident" id="7108931">err</span><span class="op" id="7108934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7108937">}</span><br>
<span class="lineno"></span><span class="op" id="7108939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7108942">func</span>&nbsp;<span class="ident" id="7108947">TestReadDotLines</span><span class="op" id="7108963">(</span><span class="ident" id="7108964">t</span>&nbsp;<span class="op" id="7108966">*</span><span class="ident" id="7108967">testing</span><span class="op" id="7108974">.</span><span class="ident" id="7108975">T</span><span class="op" id="7108976">)</span>&nbsp;<span class="op" id="7108978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7108981">r</span>&nbsp;<span class="op" id="7108983">:=</span>&nbsp;<span class="ident" id="7108986">reader</span><span class="op" id="7108992">(</span><span class="string" id="7108993">&#34;dotlines\r\n.foo\r\n..bar\n...baz\nquux\r\n\r\n.\r\nanother\n&#34;</span><span class="op" id="7109056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109059">s</span><span class="op" id="7109060">,</span>&nbsp;<span class="ident" id="7109062">err</span>&nbsp;<span class="op" id="7109066">:=</span>&nbsp;<span class="ident" id="7109069">r</span><span class="op" id="7109070">.</span><span class="ident" id="7109071">ReadDotLines</span><span class="op" id="7109083">(</span><span class="op" id="7109084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109087">want</span>&nbsp;<span class="op" id="7109092">:=</span>&nbsp;<span class="op" id="7109095">[</span><span class="op" id="7109096">]</span><span class="builtintype" id="7109097">string</span><span class="op" id="7109103">{</span><span class="string" id="7109104">&#34;dotlines&#34;</span><span class="op" id="7109114">,</span>&nbsp;<span class="string" id="7109116">&#34;foo&#34;</span><span class="op" id="7109121">,</span>&nbsp;<span class="string" id="7109123">&#34;.bar&#34;</span><span class="op" id="7109129">,</span>&nbsp;<span class="string" id="7109131">&#34;..baz&#34;</span><span class="op" id="7109138">,</span>&nbsp;<span class="string" id="7109140">&#34;quux&#34;</span><span class="op" id="7109146">,</span>&nbsp;<span class="string" id="7109148">&#34;&#34;</span><span class="op" id="7109150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109153">if</span>&nbsp;<span class="op" id="7109156">!</span><span class="ident" id="7109157">reflect</span><span class="op" id="7109164">.</span><span class="ident" id="7109165">DeepEqual</span><span class="op" id="7109174">(</span><span class="ident" id="7109175">s</span><span class="op" id="7109176">,</span>&nbsp;<span class="ident" id="7109178">want</span><span class="op" id="7109182">)</span>&nbsp;<span class="op" id="7109184">||</span>&nbsp;<span class="ident" id="7109187">err</span>&nbsp;<span class="op" id="7109191">!=</span>&nbsp;<span class="builtintype" id="7109194">nil</span>&nbsp;<span class="op" id="7109198">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109202">t</span><span class="op" id="7109203">.</span><span class="ident" id="7109204">Fatalf</span><span class="op" id="7109210">(</span><span class="string" id="7109211">&#34;ReadDotLines:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="7109233">,</span>&nbsp;<span class="ident" id="7109235">s</span><span class="op" id="7109236">,</span>&nbsp;<span class="ident" id="7109238">err</span><span class="op" id="7109241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109248">s</span><span class="op" id="7109249">,</span>&nbsp;<span class="ident" id="7109251">err</span>&nbsp;<span class="op" id="7109255">=</span>&nbsp;<span class="ident" id="7109257">r</span><span class="op" id="7109258">.</span><span class="ident" id="7109259">ReadDotLines</span><span class="op" id="7109271">(</span><span class="op" id="7109272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109275">want</span>&nbsp;<span class="op" id="7109280">=</span>&nbsp;<span class="op" id="7109282">[</span><span class="op" id="7109283">]</span><span class="builtintype" id="7109284">string</span><span class="op" id="7109290">{</span><span class="string" id="7109291">&#34;another&#34;</span><span class="op" id="7109300">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109303">if</span>&nbsp;<span class="op" id="7109306">!</span><span class="ident" id="7109307">reflect</span><span class="op" id="7109314">.</span><span class="ident" id="7109315">DeepEqual</span><span class="op" id="7109324">(</span><span class="ident" id="7109325">s</span><span class="op" id="7109326">,</span>&nbsp;<span class="ident" id="7109328">want</span><span class="op" id="7109332">)</span>&nbsp;<span class="op" id="7109334">||</span>&nbsp;<span class="ident" id="7109337">err</span>&nbsp;<span class="op" id="7109341">!=</span>&nbsp;<span class="ident" id="7109344">io</span><span class="op" id="7109346">.</span><span class="ident" id="7109347">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7109364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109368">t</span><span class="op" id="7109369">.</span><span class="ident" id="7109370">Fatalf</span><span class="op" id="7109376">(</span><span class="string" id="7109377">&#34;ReadDotLines2:&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="7109400">,</span>&nbsp;<span class="ident" id="7109402">s</span><span class="op" id="7109403">,</span>&nbsp;<span class="ident" id="7109405">err</span><span class="op" id="7109408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109411">}</span><br>
<span class="lineno"></span><span class="op" id="7109413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="7109416">func</span>&nbsp;<span class="ident" id="7109421">TestReadDotBytes</span><span class="op" id="7109437">(</span><span class="ident" id="7109438">t</span>&nbsp;<span class="op" id="7109440">*</span><span class="ident" id="7109441">testing</span><span class="op" id="7109448">.</span><span class="ident" id="7109449">T</span><span class="op" id="7109450">)</span>&nbsp;<span class="op" id="7109452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109455">r</span>&nbsp;<span class="op" id="7109457">:=</span>&nbsp;<span class="ident" id="7109460">reader</span><span class="op" id="7109466">(</span><span class="string" id="7109467">&#34;dotlines\r\n.foo\r\n..bar\n...baz\nquux\r\n\r\n.\r\nanot.her\r\n&#34;</span><span class="op" id="7109533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109536">b</span><span class="op" id="7109537">,</span>&nbsp;<span class="ident" id="7109539">err</span>&nbsp;<span class="op" id="7109543">:=</span>&nbsp;<span class="ident" id="7109546">r</span><span class="op" id="7109547">.</span><span class="ident" id="7109548">ReadDotBytes</span><span class="op" id="7109560">(</span><span class="op" id="7109561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109564">want</span>&nbsp;<span class="op" id="7109569">:=</span>&nbsp;<span class="op" id="7109572">[</span><span class="op" id="7109573">]</span><span class="builtintype" id="7109574">byte</span><span class="op" id="7109578">(</span><span class="string" id="7109579">&#34;dotlines\nfoo\n.bar\n..baz\nquux\n\n&#34;</span><span class="op" id="7109617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109620">if</span>&nbsp;<span class="op" id="7109623">!</span><span class="ident" id="7109624">reflect</span><span class="op" id="7109631">.</span><span class="ident" id="7109632">DeepEqual</span><span class="op" id="7109641">(</span><span class="ident" id="7109642">b</span><span class="op" id="7109643">,</span>&nbsp;<span class="ident" id="7109645">want</span><span class="op" id="7109649">)</span>&nbsp;<span class="op" id="7109651">||</span>&nbsp;<span class="ident" id="7109654">err</span>&nbsp;<span class="op" id="7109658">!=</span>&nbsp;<span class="builtintype" id="7109661">nil</span>&nbsp;<span class="op" id="7109665">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109669">t</span><span class="op" id="7109670">.</span><span class="ident" id="7109671">Fatalf</span><span class="op" id="7109677">(</span><span class="string" id="7109678">&#34;ReadDotBytes:&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7109700">,</span>&nbsp;<span class="ident" id="7109702">b</span><span class="op" id="7109703">,</span>&nbsp;<span class="ident" id="7109705">err</span><span class="op" id="7109708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109715">b</span><span class="op" id="7109716">,</span>&nbsp;<span class="ident" id="7109718">err</span>&nbsp;<span class="op" id="7109722">=</span>&nbsp;<span class="ident" id="7109724">r</span><span class="op" id="7109725">.</span><span class="ident" id="7109726">ReadDotBytes</span><span class="op" id="7109738">(</span><span class="op" id="7109739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109742">want</span>&nbsp;<span class="op" id="7109747">=</span>&nbsp;<span class="op" id="7109749">[</span><span class="op" id="7109750">]</span><span class="builtintype" id="7109751">byte</span><span class="op" id="7109755">(</span><span class="string" id="7109756">&#34;anot.her\n&#34;</span><span class="op" id="7109768">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7109771">if</span>&nbsp;<span class="op" id="7109774">!</span><span class="ident" id="7109775">reflect</span><span class="op" id="7109782">.</span><span class="ident" id="7109783">DeepEqual</span><span class="op" id="7109792">(</span><span class="ident" id="7109793">b</span><span class="op" id="7109794">,</span>&nbsp;<span class="ident" id="7109796">want</span><span class="op" id="7109800">)</span>&nbsp;<span class="op" id="7109802">||</span>&nbsp;<span class="ident" id="7109805">err</span>&nbsp;<span class="op" id="7109809">!=</span>&nbsp;<span class="ident" id="7109812">io</span><span class="op" id="7109814">.</span><span class="ident" id="7109815">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7109832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109836">t</span><span class="op" id="7109837">.</span><span class="ident" id="7109838">Fatalf</span><span class="op" id="7109844">(</span><span class="string" id="7109845">&#34;ReadDotBytes2:&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7109868">,</span>&nbsp;<span class="ident" id="7109870">b</span><span class="op" id="7109871">,</span>&nbsp;<span class="ident" id="7109873">err</span><span class="op" id="7109876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7109879">}</span><br>
<span class="lineno"></span><span class="op" id="7109881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7109884">func</span>&nbsp;<span class="ident" id="7109889">TestReadMIMEHeader</span><span class="op" id="7109907">(</span><span class="ident" id="7109908">t</span>&nbsp;<span class="op" id="7109910">*</span><span class="ident" id="7109911">testing</span><span class="op" id="7109918">.</span><span class="ident" id="7109919">T</span><span class="op" id="7109920">)</span>&nbsp;<span class="op" id="7109922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7109925">r</span>&nbsp;<span class="op" id="7109927">:=</span>&nbsp;<span class="ident" id="7109930">reader</span><span class="op" id="7109936">(</span><span class="string" id="7109937">&#34;my-key:&nbsp;Value&nbsp;1&nbsp;&nbsp;\r\nLong-key:&nbsp;Even&nbsp;\n&nbsp;Longer&nbsp;Value\r\nmy-Key:&nbsp;Value&nbsp;2\r\n\n&#34;</span><span class="op" id="7110015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110018">m</span><span class="op" id="7110019">,</span>&nbsp;<span class="ident" id="7110021">err</span>&nbsp;<span class="op" id="7110025">:=</span>&nbsp;<span class="ident" id="7110028">r</span><span class="op" id="7110029">.</span><span class="ident" id="7110030">ReadMIMEHeader</span><span class="op" id="7110044">(</span><span class="op" id="7110045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110048">want</span>&nbsp;<span class="op" id="7110053">:=</span>&nbsp;<span class="ident" id="7110056">MIMEHeader</span><span class="op" id="7110066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7110070">&#34;My-Key&#34;</span><span class="op" id="7110078">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7110082">{</span><span class="string" id="7110083">&#34;Value&nbsp;1&#34;</span><span class="op" id="7110092">,</span>&nbsp;<span class="string" id="7110094">&#34;Value&nbsp;2&#34;</span><span class="op" id="7110103">}</span><span class="op" id="7110104">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7110108">&#34;Long-Key&#34;</span><span class="op" id="7110118">:</span>&nbsp;<span class="op" id="7110120">{</span><span class="string" id="7110121">&#34;Even&nbsp;Longer&nbsp;Value&#34;</span><span class="op" id="7110140">}</span><span class="op" id="7110141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110147">if</span>&nbsp;<span class="op" id="7110150">!</span><span class="ident" id="7110151">reflect</span><span class="op" id="7110158">.</span><span class="ident" id="7110159">DeepEqual</span><span class="op" id="7110168">(</span><span class="ident" id="7110169">m</span><span class="op" id="7110170">,</span>&nbsp;<span class="ident" id="7110172">want</span><span class="op" id="7110176">)</span>&nbsp;<span class="op" id="7110178">||</span>&nbsp;<span class="ident" id="7110181">err</span>&nbsp;<span class="op" id="7110185">!=</span>&nbsp;<span class="builtintype" id="7110188">nil</span>&nbsp;<span class="op" id="7110192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110196">t</span><span class="op" id="7110197">.</span><span class="ident" id="7110198">Fatalf</span><span class="op" id="7110204">(</span><span class="string" id="7110205">&#34;ReadMIMEHeader:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7110238">,</span>&nbsp;<span class="ident" id="7110240">m</span><span class="op" id="7110241">,</span>&nbsp;<span class="ident" id="7110243">err</span><span class="op" id="7110246">,</span>&nbsp;<span class="ident" id="7110248">want</span><span class="op" id="7110252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110255">}</span><br>
<span class="lineno">145</span><span class="op" id="7110257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7110260">func</span>&nbsp;<span class="ident" id="7110265">TestReadMIMEHeaderSingle</span><span class="op" id="7110289">(</span><span class="ident" id="7110290">t</span>&nbsp;<span class="op" id="7110292">*</span><span class="ident" id="7110293">testing</span><span class="op" id="7110300">.</span><span class="ident" id="7110301">T</span><span class="op" id="7110302">)</span>&nbsp;<span class="op" id="7110304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110307">r</span>&nbsp;<span class="op" id="7110309">:=</span>&nbsp;<span class="ident" id="7110312">reader</span><span class="op" id="7110318">(</span><span class="string" id="7110319">&#34;Foo:&nbsp;bar\n\n&#34;</span><span class="op" id="7110333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110336">m</span><span class="op" id="7110337">,</span>&nbsp;<span class="ident" id="7110339">err</span>&nbsp;<span class="op" id="7110343">:=</span>&nbsp;<span class="ident" id="7110346">r</span><span class="op" id="7110347">.</span><span class="ident" id="7110348">ReadMIMEHeader</span><span class="op" id="7110362">(</span><span class="op" id="7110363">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110366">want</span>&nbsp;<span class="op" id="7110371">:=</span>&nbsp;<span class="ident" id="7110374">MIMEHeader</span><span class="op" id="7110384">{</span><span class="string" id="7110385">&#34;Foo&#34;</span><span class="op" id="7110390">:</span>&nbsp;<span class="op" id="7110392">{</span><span class="string" id="7110393">&#34;bar&#34;</span><span class="op" id="7110398">}</span><span class="op" id="7110399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110402">if</span>&nbsp;<span class="op" id="7110405">!</span><span class="ident" id="7110406">reflect</span><span class="op" id="7110413">.</span><span class="ident" id="7110414">DeepEqual</span><span class="op" id="7110423">(</span><span class="ident" id="7110424">m</span><span class="op" id="7110425">,</span>&nbsp;<span class="ident" id="7110427">want</span><span class="op" id="7110431">)</span>&nbsp;<span class="op" id="7110433">||</span>&nbsp;<span class="ident" id="7110436">err</span>&nbsp;<span class="op" id="7110440">!=</span>&nbsp;<span class="builtintype" id="7110443">nil</span>&nbsp;<span class="op" id="7110447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110451">t</span><span class="op" id="7110452">.</span><span class="ident" id="7110453">Fatalf</span><span class="op" id="7110459">(</span><span class="string" id="7110460">&#34;ReadMIMEHeader:&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7110493">,</span>&nbsp;<span class="ident" id="7110495">m</span><span class="op" id="7110496">,</span>&nbsp;<span class="ident" id="7110498">err</span><span class="op" id="7110501">,</span>&nbsp;<span class="ident" id="7110503">want</span><span class="op" id="7110507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110510">}</span><br>
<span class="lineno"></span><span class="op" id="7110512">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="7110515">func</span>&nbsp;<span class="ident" id="7110520">TestLargeReadMIMEHeader</span><span class="op" id="7110543">(</span><span class="ident" id="7110544">t</span>&nbsp;<span class="op" id="7110546">*</span><span class="ident" id="7110547">testing</span><span class="op" id="7110554">.</span><span class="ident" id="7110555">T</span><span class="op" id="7110556">)</span>&nbsp;<span class="op" id="7110558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110561">data</span>&nbsp;<span class="op" id="7110566">:=</span>&nbsp;<span class="builtinfunc" id="7110569">make</span><span class="op" id="7110573">(</span><span class="op" id="7110574">[</span><span class="op" id="7110575">]</span><span class="builtintype" id="7110576">byte</span><span class="op" id="7110580">,</span>&nbsp;<span class="num" id="7110582">16</span><span class="op" id="7110584">*</span><span class="num" id="7110585">1024</span><span class="op" id="7110589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110592">for</span>&nbsp;<span class="ident" id="7110596">i</span>&nbsp;<span class="op" id="7110598">:=</span>&nbsp;<span class="num" id="7110601">0</span><span class="op" id="7110602">;</span>&nbsp;<span class="ident" id="7110604">i</span>&nbsp;<span class="op" id="7110606">&lt;</span>&nbsp;<span class="builtinfunc" id="7110608">len</span><span class="op" id="7110611">(</span><span class="ident" id="7110612">data</span><span class="op" id="7110616">)</span><span class="op" id="7110617">;</span>&nbsp;<span class="ident" id="7110619">i</span><span class="op" id="7110620">++</span>&nbsp;<span class="op" id="7110623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110627">data</span><span class="op" id="7110631">[</span><span class="ident" id="7110632">i</span><span class="op" id="7110633">]</span>&nbsp;<span class="op" id="7110635">=</span>&nbsp;<span class="string" id="7110637">&#39;x&#39;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110645">sdata</span>&nbsp;<span class="op" id="7110651">:=</span>&nbsp;<span class="builtintype" id="7110654">string</span><span class="op" id="7110660">(</span><span class="ident" id="7110661">data</span><span class="op" id="7110665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110668">r</span>&nbsp;<span class="op" id="7110670">:=</span>&nbsp;<span class="ident" id="7110673">reader</span><span class="op" id="7110679">(</span><span class="string" id="7110680">&#34;Cookie:&nbsp;&#34;</span>&nbsp;<span class="op" id="7110691">+</span>&nbsp;<span class="ident" id="7110693">sdata</span>&nbsp;<span class="op" id="7110699">+</span>&nbsp;<span class="string" id="7110701">&#34;\r\n\n&#34;</span><span class="op" id="7110709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110712">m</span><span class="op" id="7110713">,</span>&nbsp;<span class="ident" id="7110715">err</span>&nbsp;<span class="op" id="7110719">:=</span>&nbsp;<span class="ident" id="7110722">r</span><span class="op" id="7110723">.</span><span class="ident" id="7110724">ReadMIMEHeader</span><span class="op" id="7110738">(</span><span class="op" id="7110739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110742">if</span>&nbsp;<span class="ident" id="7110745">err</span>&nbsp;<span class="op" id="7110749">!=</span>&nbsp;<span class="builtintype" id="7110752">nil</span>&nbsp;<span class="op" id="7110756">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110760">t</span><span class="op" id="7110761">.</span><span class="ident" id="7110762">Fatalf</span><span class="op" id="7110768">(</span><span class="string" id="7110769">&#34;ReadMIMEHeader:&nbsp;%v&#34;</span><span class="op" id="7110789">,</span>&nbsp;<span class="ident" id="7110791">err</span><span class="op" id="7110794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110800">cookie</span>&nbsp;<span class="op" id="7110807">:=</span>&nbsp;<span class="ident" id="7110810">m</span><span class="op" id="7110811">.</span><span class="ident" id="7110812">Get</span><span class="op" id="7110815">(</span><span class="string" id="7110816">&#34;Cookie&#34;</span><span class="op" id="7110824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7110827">if</span>&nbsp;<span class="ident" id="7110830">cookie</span>&nbsp;<span class="op" id="7110837">!=</span>&nbsp;<span class="ident" id="7110840">sdata</span>&nbsp;<span class="op" id="7110846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7110850">t</span><span class="op" id="7110851">.</span><span class="ident" id="7110852">Fatalf</span><span class="op" id="7110858">(</span><span class="string" id="7110859">&#34;ReadMIMEHeader:&nbsp;%v&nbsp;bytes,&nbsp;want&nbsp;%v&nbsp;bytes&#34;</span><span class="op" id="7110900">,</span>&nbsp;<span class="builtinfunc" id="7110902">len</span><span class="op" id="7110905">(</span><span class="ident" id="7110906">cookie</span><span class="op" id="7110912">)</span><span class="op" id="7110913">,</span>&nbsp;<span class="builtinfunc" id="7110915">len</span><span class="op" id="7110918">(</span><span class="ident" id="7110919">sdata</span><span class="op" id="7110924">)</span><span class="op" id="7110925">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7110928">}</span><br>
<span class="lineno"></span><span class="op" id="7110930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7110933">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;read&nbsp;slightly-bogus&nbsp;MIME&nbsp;headers&nbsp;seen&nbsp;in&nbsp;the&nbsp;wild,</span><br>
<span class="lineno"></span><span class="comment" id="7111000">//&nbsp;with&nbsp;spaces&nbsp;before&nbsp;colons,&nbsp;and&nbsp;spaces&nbsp;in&nbsp;keys.</span><br>
<span class="lineno">175</span><span class="keyword" id="7111050">func</span>&nbsp;<span class="ident" id="7111055">TestReadMIMEHeaderNonCompliant</span><span class="op" id="7111085">(</span><span class="ident" id="7111086">t</span>&nbsp;<span class="op" id="7111088">*</span><span class="ident" id="7111089">testing</span><span class="op" id="7111096">.</span><span class="ident" id="7111097">T</span><span class="op" id="7111098">)</span>&nbsp;<span class="op" id="7111100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7111103">//&nbsp;Invalid&nbsp;HTTP&nbsp;response&nbsp;header&nbsp;as&nbsp;sent&nbsp;by&nbsp;an&nbsp;Axis&nbsp;security</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7111164">//&nbsp;camera:&nbsp;(this&nbsp;is&nbsp;handled&nbsp;by&nbsp;IE,&nbsp;Firefox,&nbsp;Chrome,&nbsp;curl,&nbsp;etc.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111229">r</span>&nbsp;<span class="op" id="7111231">:=</span>&nbsp;<span class="ident" id="7111234">reader</span><span class="op" id="7111240">(</span><span class="string" id="7111241">&#34;Foo:&nbsp;bar\r\n&#34;</span>&nbsp;<span class="op" id="7111256">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111260">&#34;Content-Language:&nbsp;en\r\n&#34;</span>&nbsp;<span class="op" id="7111287">+</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111291">&#34;SID&nbsp;:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7111305">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111309">&#34;Audio&nbsp;Mode&nbsp;:&nbsp;None\r\n&#34;</span>&nbsp;<span class="op" id="7111333">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111337">&#34;Privilege&nbsp;:&nbsp;127\r\n\r\n&#34;</span><span class="op" id="7111362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111365">m</span><span class="op" id="7111366">,</span>&nbsp;<span class="ident" id="7111368">err</span>&nbsp;<span class="op" id="7111372">:=</span>&nbsp;<span class="ident" id="7111375">r</span><span class="op" id="7111376">.</span><span class="ident" id="7111377">ReadMIMEHeader</span><span class="op" id="7111391">(</span><span class="op" id="7111392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111395">want</span>&nbsp;<span class="op" id="7111400">:=</span>&nbsp;<span class="ident" id="7111403">MIMEHeader</span><span class="op" id="7111413">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111417">&#34;Foo&#34;</span><span class="op" id="7111422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111437">{</span><span class="string" id="7111438">&#34;bar&#34;</span><span class="op" id="7111443">}</span><span class="op" id="7111444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111448">&#34;Content-Language&#34;</span><span class="op" id="7111466">:</span>&nbsp;<span class="op" id="7111468">{</span><span class="string" id="7111469">&#34;en&#34;</span><span class="op" id="7111473">}</span><span class="op" id="7111474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111478">&#34;Sid&#34;</span><span class="op" id="7111483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111498">{</span><span class="string" id="7111499">&#34;0&#34;</span><span class="op" id="7111502">}</span><span class="op" id="7111503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111507">&#34;Audio-Mode&#34;</span><span class="op" id="7111519">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111527">{</span><span class="string" id="7111528">&#34;None&#34;</span><span class="op" id="7111534">}</span><span class="op" id="7111535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111539">&#34;Privilege&#34;</span><span class="op" id="7111550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111559">{</span><span class="string" id="7111560">&#34;127&#34;</span><span class="op" id="7111565">}</span><span class="op" id="7111566">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7111572">if</span>&nbsp;<span class="op" id="7111575">!</span><span class="ident" id="7111576">reflect</span><span class="op" id="7111583">.</span><span class="ident" id="7111584">DeepEqual</span><span class="op" id="7111593">(</span><span class="ident" id="7111594">m</span><span class="op" id="7111595">,</span>&nbsp;<span class="ident" id="7111597">want</span><span class="op" id="7111601">)</span>&nbsp;<span class="op" id="7111603">||</span>&nbsp;<span class="ident" id="7111606">err</span>&nbsp;<span class="op" id="7111610">!=</span>&nbsp;<span class="builtintype" id="7111613">nil</span>&nbsp;<span class="op" id="7111617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111621">t</span><span class="op" id="7111622">.</span><span class="ident" id="7111623">Fatalf</span><span class="op" id="7111629">(</span><span class="string" id="7111630">&#34;ReadMIMEHeader&nbsp;=\n%v,&nbsp;%v;&nbsp;want:\n%v&#34;</span><span class="op" id="7111667">,</span>&nbsp;<span class="ident" id="7111669">m</span><span class="op" id="7111670">,</span>&nbsp;<span class="ident" id="7111672">err</span><span class="op" id="7111675">,</span>&nbsp;<span class="ident" id="7111677">want</span><span class="op" id="7111681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111684">}</span><br>
<span class="lineno"></span><span class="op" id="7111686">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7111689">type</span>&nbsp;<span class="ident" id="7111694">readResponseTest</span>&nbsp;<span class="keyword" id="7111711">struct</span>&nbsp;<span class="op" id="7111718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111721">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7111730">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111738">inCode</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7111747">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111752">wantCode</span>&nbsp;<span class="builtintype" id="7111761">int</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7111766">wantMsg</span>&nbsp;&nbsp;<span class="builtintype" id="7111775">string</span><br>
<span class="lineno"></span><span class="op" id="7111782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7111785">var</span>&nbsp;<span class="ident" id="7111789">readResponseTests</span>&nbsp;<span class="op" id="7111807">=</span>&nbsp;<span class="op" id="7111809">[</span><span class="op" id="7111810">]</span><span class="ident" id="7111811">readResponseTest</span><span class="op" id="7111827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7111830">{</span><span class="string" id="7111831">&#34;230-Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\n&#34;</span>&nbsp;<span class="op" id="7111884">+</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111888">&#34;Read&nbsp;the&nbsp;file&nbsp;README.txt,\n&#34;</span>&nbsp;<span class="op" id="7111918">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111922">&#34;230&nbsp;&nbsp;please&#34;</span><span class="op" id="7111935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111939">23</span><span class="op" id="7111941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7111945">230</span><span class="op" id="7111948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7111952">&#34;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\nRead&nbsp;the&nbsp;file&nbsp;README.txt,\n&nbsp;please&#34;</span><span class="op" id="7112034">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112037">}</span><span class="op" id="7112038">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112042">{</span><span class="string" id="7112043">&#34;230&nbsp;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply\n&#34;</span><span class="op" id="7112095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7112099">23</span><span class="op" id="7112101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7112105">230</span><span class="op" id="7112108">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7112112">&#34;Anonymous&nbsp;access&nbsp;granted,&nbsp;restrictions&nbsp;apply&#34;</span><span class="op" id="7112158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112161">}</span><span class="op" id="7112162">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112166">{</span><span class="string" id="7112167">&#34;400-A\n400-B\n400&nbsp;C&#34;</span><span class="op" id="7112188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7112192">4</span><span class="op" id="7112193">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7112197">400</span><span class="op" id="7112200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7112204">&#34;A\nB\nC&#34;</span><span class="op" id="7112213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112216">}</span><span class="op" id="7112217">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112221">{</span><span class="string" id="7112222">&#34;400-A\r\n400-B\r\n400&nbsp;C\r\n&#34;</span><span class="op" id="7112251">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7112255">4</span><span class="op" id="7112256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7112260">400</span><span class="op" id="7112263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7112267">&#34;A\nB\nC&#34;</span><span class="op" id="7112276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112279">}</span><span class="op" id="7112280">,</span><br>
<span class="lineno"></span><span class="op" id="7112282">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="7112285">//&nbsp;See&nbsp;http://www.ietf.org/rfc/rfc959.txt&nbsp;page&nbsp;36.</span><br>
<span class="lineno"></span><span class="keyword" id="7112336">func</span>&nbsp;<span class="ident" id="7112341">TestRFC959Lines</span><span class="op" id="7112356">(</span><span class="ident" id="7112357">t</span>&nbsp;<span class="op" id="7112359">*</span><span class="ident" id="7112360">testing</span><span class="op" id="7112367">.</span><span class="ident" id="7112368">T</span><span class="op" id="7112369">)</span>&nbsp;<span class="op" id="7112371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112374">for</span>&nbsp;<span class="ident" id="7112378">i</span><span class="op" id="7112379">,</span>&nbsp;<span class="ident" id="7112381">tt</span>&nbsp;<span class="op" id="7112384">:=</span>&nbsp;<span class="keyword" id="7112387">range</span>&nbsp;<span class="ident" id="7112393">readResponseTests</span>&nbsp;<span class="op" id="7112411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112415">r</span>&nbsp;<span class="op" id="7112417">:=</span>&nbsp;<span class="ident" id="7112420">reader</span><span class="op" id="7112426">(</span><span class="ident" id="7112427">tt</span><span class="op" id="7112429">.</span><span class="ident" id="7112430">in</span>&nbsp;<span class="op" id="7112433">+</span>&nbsp;<span class="string" id="7112435">&#34;\nFOLLOWING&nbsp;DATA&#34;</span><span class="op" id="7112453">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112457">code</span><span class="op" id="7112461">,</span>&nbsp;<span class="ident" id="7112463">msg</span><span class="op" id="7112466">,</span>&nbsp;<span class="ident" id="7112468">err</span>&nbsp;<span class="op" id="7112472">:=</span>&nbsp;<span class="ident" id="7112475">r</span><span class="op" id="7112476">.</span><span class="ident" id="7112477">ReadResponse</span><span class="op" id="7112489">(</span><span class="ident" id="7112490">tt</span><span class="op" id="7112492">.</span><span class="ident" id="7112493">inCode</span><span class="op" id="7112499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112503">if</span>&nbsp;<span class="ident" id="7112506">err</span>&nbsp;<span class="op" id="7112510">!=</span>&nbsp;<span class="builtintype" id="7112513">nil</span>&nbsp;<span class="op" id="7112517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112522">t</span><span class="op" id="7112523">.</span><span class="ident" id="7112524">Errorf</span><span class="op" id="7112530">(</span><span class="string" id="7112531">&#34;#%d:&nbsp;ReadResponse:&nbsp;%v&#34;</span><span class="op" id="7112554">,</span>&nbsp;<span class="ident" id="7112556">i</span><span class="op" id="7112557">,</span>&nbsp;<span class="ident" id="7112559">err</span><span class="op" id="7112562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112567">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112578">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112582">if</span>&nbsp;<span class="ident" id="7112585">code</span>&nbsp;<span class="op" id="7112590">!=</span>&nbsp;<span class="ident" id="7112593">tt</span><span class="op" id="7112595">.</span><span class="ident" id="7112596">wantCode</span>&nbsp;<span class="op" id="7112605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112610">t</span><span class="op" id="7112611">.</span><span class="ident" id="7112612">Errorf</span><span class="op" id="7112618">(</span><span class="string" id="7112619">&#34;#%d:&nbsp;code=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7112642">,</span>&nbsp;<span class="ident" id="7112644">i</span><span class="op" id="7112645">,</span>&nbsp;<span class="ident" id="7112647">code</span><span class="op" id="7112651">,</span>&nbsp;<span class="ident" id="7112653">tt</span><span class="op" id="7112655">.</span><span class="ident" id="7112656">wantCode</span><span class="op" id="7112664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112672">if</span>&nbsp;<span class="ident" id="7112675">msg</span>&nbsp;<span class="op" id="7112679">!=</span>&nbsp;<span class="ident" id="7112682">tt</span><span class="op" id="7112684">.</span><span class="ident" id="7112685">wantMsg</span>&nbsp;<span class="op" id="7112693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112698">t</span><span class="op" id="7112699">.</span><span class="ident" id="7112700">Errorf</span><span class="op" id="7112706">(</span><span class="string" id="7112707">&#34;#%d:&nbsp;msg=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7112729">,</span>&nbsp;<span class="ident" id="7112731">i</span><span class="op" id="7112732">,</span>&nbsp;<span class="ident" id="7112734">msg</span><span class="op" id="7112737">,</span>&nbsp;<span class="ident" id="7112739">tt</span><span class="op" id="7112741">.</span><span class="ident" id="7112742">wantMsg</span><span class="op" id="7112749">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112756">}</span><br>
<span class="lineno"></span><span class="op" id="7112758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7112761">func</span>&nbsp;<span class="ident" id="7112766">TestCommonHeaders</span><span class="op" id="7112783">(</span><span class="ident" id="7112784">t</span>&nbsp;<span class="op" id="7112786">*</span><span class="ident" id="7112787">testing</span><span class="op" id="7112794">.</span><span class="ident" id="7112795">T</span><span class="op" id="7112796">)</span>&nbsp;<span class="op" id="7112798">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112801">for</span>&nbsp;<span class="ident" id="7112805">h</span>&nbsp;<span class="op" id="7112807">:=</span>&nbsp;<span class="keyword" id="7112810">range</span>&nbsp;<span class="ident" id="7112816">commonHeader</span>&nbsp;<span class="op" id="7112829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7112833">if</span>&nbsp;<span class="ident" id="7112836">h</span>&nbsp;<span class="op" id="7112838">!=</span>&nbsp;<span class="ident" id="7112841">CanonicalMIMEHeaderKey</span><span class="op" id="7112863">(</span><span class="ident" id="7112864">h</span><span class="op" id="7112865">)</span>&nbsp;<span class="op" id="7112867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112872">t</span><span class="op" id="7112873">.</span><span class="ident" id="7112874">Errorf</span><span class="op" id="7112880">(</span><span class="string" id="7112881">&#34;Non-canonical&nbsp;header&nbsp;%q&nbsp;in&nbsp;commonHeader&#34;</span><span class="op" id="7112922">,</span>&nbsp;<span class="ident" id="7112924">h</span><span class="op" id="7112925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7112932">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112935">b</span>&nbsp;<span class="op" id="7112937">:=</span>&nbsp;<span class="op" id="7112940">[</span><span class="op" id="7112941">]</span><span class="builtintype" id="7112942">byte</span><span class="op" id="7112946">(</span><span class="string" id="7112947">&#34;content-Length&#34;</span><span class="op" id="7112963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112966">want</span>&nbsp;<span class="op" id="7112971">:=</span>&nbsp;<span class="string" id="7112974">&#34;Content-Length&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7112992">n</span>&nbsp;<span class="op" id="7112994">:=</span>&nbsp;<span class="ident" id="7112997">testing</span><span class="op" id="7113004">.</span><span class="ident" id="7113005">AllocsPerRun</span><span class="op" id="7113017">(</span><span class="num" id="7113018">200</span><span class="op" id="7113021">,</span>&nbsp;<span class="keyword" id="7113023">func</span><span class="op" id="7113027">(</span><span class="op" id="7113028">)</span>&nbsp;<span class="op" id="7113030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113034">if</span>&nbsp;<span class="ident" id="7113037">x</span>&nbsp;<span class="op" id="7113039">:=</span>&nbsp;<span class="ident" id="7113042">canonicalMIMEHeaderKey</span><span class="op" id="7113064">(</span><span class="ident" id="7113065">b</span><span class="op" id="7113066">)</span><span class="op" id="7113067">;</span>&nbsp;<span class="ident" id="7113069">x</span>&nbsp;<span class="op" id="7113071">!=</span>&nbsp;<span class="ident" id="7113074">want</span>&nbsp;<span class="op" id="7113079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113084">t</span><span class="op" id="7113085">.</span><span class="ident" id="7113086">Fatalf</span><span class="op" id="7113092">(</span><span class="string" id="7113093">&#34;canonicalMIMEHeaderKey(%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7113135">,</span>&nbsp;<span class="ident" id="7113137">b</span><span class="op" id="7113138">,</span>&nbsp;<span class="ident" id="7113140">x</span><span class="op" id="7113141">,</span>&nbsp;<span class="ident" id="7113143">want</span><span class="op" id="7113147">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113154">}</span><span class="op" id="7113155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7113158">if</span>&nbsp;<span class="ident" id="7113161">n</span>&nbsp;<span class="op" id="7113163">&gt;</span>&nbsp;<span class="num" id="7113165">0</span>&nbsp;<span class="op" id="7113167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7113171">t</span><span class="op" id="7113172">.</span><span class="ident" id="7113173">Errorf</span><span class="op" id="7113179">(</span><span class="string" id="7113180">&#34;canonicalMIMEHeaderKey&nbsp;allocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;0&#34;</span><span class="op" id="7113224">,</span>&nbsp;<span class="ident" id="7113226">n</span><span class="op" id="7113227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7113230">}</span><br>
<span class="lineno">265</span><span class="op" id="7113232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7113235">var</span>&nbsp;<span class="ident" id="7113239">clientHeaders</span>&nbsp;<span class="op" id="7113253">=</span>&nbsp;<span class="ident" id="7113255">strings</span><span class="op" id="7113262">.</span><span class="ident" id="7113263">Replace</span><span class="op" id="7113270">(</span><span class="string" id="7113271">`Host:&nbsp;golang.org<br>
<span class="lineno"></span>Connection:&nbsp;keep-alive<br>
<span class="lineno"></span>Cache-Control:&nbsp;max-age=0<br>
<span class="lineno">270</span>Accept:&nbsp;application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5<br>
<span class="lineno"></span>User-Agent:&nbsp;Mozilla/5.0&nbsp;(X11;&nbsp;U;&nbsp;Linux&nbsp;x86_64;&nbsp;en-US)&nbsp;AppleWebKit/534.3&nbsp;(KHTML,&nbsp;like&nbsp;Gecko)&nbsp;Chrome/6.0.472.63&nbsp;Safari/534.3<br>
<span class="lineno"></span>Accept-Encoding:&nbsp;gzip,deflate,sdch<br>
<span class="lineno"></span>Accept-Language:&nbsp;en-US,en;q=0.8,fr-CH;q=0.6<br>
<span class="lineno"></span>Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.3<br>
<span class="lineno">275</span>COOKIE:&nbsp;__utma=000000000.0000000000.0000000000.0000000000.0000000000.00;&nbsp;__utmb=000000000.0.00.0000000000;&nbsp;__utmc=000000000;&nbsp;__utmz=000000000.0000000000.00.0.utmcsr=code.google.com|utmccn=(referral)|utmcmd=referral|utmcct=/p/go/issues/detail<br>
<span class="lineno"></span>Non-Interned:&nbsp;test<br>
<span class="lineno"></span><br>
<span class="lineno"></span>`</span><span class="op" id="7113948">,</span>&nbsp;<span class="string" id="7113950">&#34;\n&#34;</span><span class="op" id="7113954">,</span>&nbsp;<span class="string" id="7113956">&#34;\r\n&#34;</span><span class="op" id="7113962">,</span>&nbsp;<span class="op" id="7113964">-</span><span class="num" id="7113965">1</span><span class="op" id="7113966">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="7113969">var</span>&nbsp;<span class="ident" id="7113973">serverHeaders</span>&nbsp;<span class="op" id="7113987">=</span>&nbsp;<span class="ident" id="7113989">strings</span><span class="op" id="7113996">.</span><span class="ident" id="7113997">Replace</span><span class="op" id="7114004">(</span><span class="string" id="7114005">`Content-Type:&nbsp;text/html;&nbsp;charset=utf-8<br>
<span class="lineno"></span>Content-Encoding:&nbsp;gzip<br>
<span class="lineno"></span>Date:&nbsp;Thu,&nbsp;27&nbsp;Sep&nbsp;2012&nbsp;09:03:33&nbsp;GMT<br>
<span class="lineno"></span>Server:&nbsp;Google&nbsp;Frontend<br>
<span class="lineno"></span>Cache-Control:&nbsp;private<br>
<span class="lineno">285</span>Content-Length:&nbsp;2298<br>
<span class="lineno"></span>VIA:&nbsp;1.1&nbsp;proxy.example.com:80&nbsp;(XXX/n.n.n-nnn)<br>
<span class="lineno"></span>Connection:&nbsp;Close<br>
<span class="lineno"></span>Non-Interned:&nbsp;test<br>
<span class="lineno"></span><br>
<span class="lineno">290</span>`</span><span class="op" id="7114257">,</span>&nbsp;<span class="string" id="7114259">&#34;\n&#34;</span><span class="op" id="7114263">,</span>&nbsp;<span class="string" id="7114265">&#34;\r\n&#34;</span><span class="op" id="7114271">,</span>&nbsp;<span class="op" id="7114273">-</span><span class="num" id="7114274">1</span><span class="op" id="7114275">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7114278">func</span>&nbsp;<span class="ident" id="7114283">BenchmarkReadMIMEHeader</span><span class="op" id="7114306">(</span><span class="ident" id="7114307">b</span>&nbsp;<span class="op" id="7114309">*</span><span class="ident" id="7114310">testing</span><span class="op" id="7114317">.</span><span class="ident" id="7114318">B</span><span class="op" id="7114319">)</span>&nbsp;<span class="op" id="7114321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114324">b</span><span class="op" id="7114325">.</span><span class="ident" id="7114326">ReportAllocs</span><span class="op" id="7114338">(</span><span class="op" id="7114339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114342">var</span>&nbsp;<span class="ident" id="7114346">buf</span>&nbsp;<span class="ident" id="7114350">bytes</span><span class="op" id="7114355">.</span><span class="ident" id="7114356">Buffer</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114364">br</span>&nbsp;<span class="op" id="7114367">:=</span>&nbsp;<span class="ident" id="7114370">bufio</span><span class="op" id="7114375">.</span><span class="ident" id="7114376">NewReader</span><span class="op" id="7114385">(</span><span class="op" id="7114386">&amp;</span><span class="ident" id="7114387">buf</span><span class="op" id="7114390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114393">r</span>&nbsp;<span class="op" id="7114395">:=</span>&nbsp;<span class="ident" id="7114398">NewReader</span><span class="op" id="7114407">(</span><span class="ident" id="7114408">br</span><span class="op" id="7114410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114413">for</span>&nbsp;<span class="ident" id="7114417">i</span>&nbsp;<span class="op" id="7114419">:=</span>&nbsp;<span class="num" id="7114422">0</span><span class="op" id="7114423">;</span>&nbsp;<span class="ident" id="7114425">i</span>&nbsp;<span class="op" id="7114427">&lt;</span>&nbsp;<span class="ident" id="7114429">b</span><span class="op" id="7114430">.</span><span class="ident" id="7114431">N</span><span class="op" id="7114432">;</span>&nbsp;<span class="ident" id="7114434">i</span><span class="op" id="7114435">++</span>&nbsp;<span class="op" id="7114438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114442">var</span>&nbsp;<span class="ident" id="7114446">want</span>&nbsp;<span class="builtintype" id="7114451">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114457">var</span>&nbsp;<span class="ident" id="7114461">find</span>&nbsp;<span class="builtintype" id="7114466">string</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114475">if</span>&nbsp;<span class="op" id="7114478">(</span><span class="ident" id="7114479">i</span>&nbsp;<span class="op" id="7114481">&amp;</span>&nbsp;<span class="num" id="7114483">1</span><span class="op" id="7114484">)</span>&nbsp;<span class="op" id="7114486">==</span>&nbsp;<span class="num" id="7114489">1</span>&nbsp;<span class="op" id="7114491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114496">buf</span><span class="op" id="7114499">.</span><span class="ident" id="7114500">WriteString</span><span class="op" id="7114511">(</span><span class="ident" id="7114512">clientHeaders</span><span class="op" id="7114525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114530">want</span>&nbsp;<span class="op" id="7114535">=</span>&nbsp;<span class="num" id="7114537">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114543">find</span>&nbsp;<span class="op" id="7114548">=</span>&nbsp;<span class="string" id="7114550">&#34;Cookie&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114561">}</span>&nbsp;<span class="keyword" id="7114563">else</span>&nbsp;<span class="op" id="7114568">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114573">buf</span><span class="op" id="7114576">.</span><span class="ident" id="7114577">WriteString</span><span class="op" id="7114588">(</span><span class="ident" id="7114589">serverHeaders</span><span class="op" id="7114602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114607">want</span>&nbsp;<span class="op" id="7114612">=</span>&nbsp;<span class="num" id="7114614">9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114619">find</span>&nbsp;<span class="op" id="7114624">=</span>&nbsp;<span class="string" id="7114626">&#34;Via&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114638">h</span><span class="op" id="7114639">,</span>&nbsp;<span class="ident" id="7114641">err</span>&nbsp;<span class="op" id="7114645">:=</span>&nbsp;<span class="ident" id="7114648">r</span><span class="op" id="7114649">.</span><span class="ident" id="7114650">ReadMIMEHeader</span><span class="op" id="7114664">(</span><span class="op" id="7114665">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114669">if</span>&nbsp;<span class="ident" id="7114672">err</span>&nbsp;<span class="op" id="7114676">!=</span>&nbsp;<span class="builtintype" id="7114679">nil</span>&nbsp;<span class="op" id="7114683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114688">b</span><span class="op" id="7114689">.</span><span class="ident" id="7114690">Fatal</span><span class="op" id="7114695">(</span><span class="ident" id="7114696">err</span><span class="op" id="7114699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114707">if</span>&nbsp;<span class="builtinfunc" id="7114710">len</span><span class="op" id="7114713">(</span><span class="ident" id="7114714">h</span><span class="op" id="7114715">)</span>&nbsp;<span class="op" id="7114717">!=</span>&nbsp;<span class="ident" id="7114720">want</span>&nbsp;<span class="op" id="7114725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114730">b</span><span class="op" id="7114731">.</span><span class="ident" id="7114732">Fatalf</span><span class="op" id="7114738">(</span><span class="string" id="7114739">&#34;wrong&nbsp;number&nbsp;of&nbsp;headers:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7114781">,</span>&nbsp;<span class="builtinfunc" id="7114783">len</span><span class="op" id="7114786">(</span><span class="ident" id="7114787">h</span><span class="op" id="7114788">)</span><span class="op" id="7114789">,</span>&nbsp;<span class="ident" id="7114791">want</span><span class="op" id="7114795">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114803">if</span>&nbsp;<span class="ident" id="7114806">_</span><span class="op" id="7114807">,</span>&nbsp;<span class="ident" id="7114809">ok</span>&nbsp;<span class="op" id="7114812">:=</span>&nbsp;<span class="ident" id="7114815">h</span><span class="op" id="7114816">[</span><span class="ident" id="7114817">find</span><span class="op" id="7114821">]</span><span class="op" id="7114822">;</span>&nbsp;<span class="op" id="7114824">!</span><span class="ident" id="7114825">ok</span>&nbsp;<span class="op" id="7114828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114833">b</span><span class="op" id="7114834">.</span><span class="ident" id="7114835">Fatalf</span><span class="op" id="7114841">(</span><span class="string" id="7114842">&#34;did&nbsp;not&nbsp;find&nbsp;key&nbsp;%s&#34;</span><span class="op" id="7114863">,</span>&nbsp;<span class="ident" id="7114865">find</span><span class="op" id="7114869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7114876">}</span><br>
<span class="lineno">320</span><span class="op" id="7114878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7114881">func</span>&nbsp;<span class="ident" id="7114886">BenchmarkUncommon</span><span class="op" id="7114903">(</span><span class="ident" id="7114904">b</span>&nbsp;<span class="op" id="7114906">*</span><span class="ident" id="7114907">testing</span><span class="op" id="7114914">.</span><span class="ident" id="7114915">B</span><span class="op" id="7114916">)</span>&nbsp;<span class="op" id="7114918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114921">b</span><span class="op" id="7114922">.</span><span class="ident" id="7114923">ReportAllocs</span><span class="op" id="7114935">(</span><span class="op" id="7114936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7114939">var</span>&nbsp;<span class="ident" id="7114943">buf</span>&nbsp;<span class="ident" id="7114947">bytes</span><span class="op" id="7114952">.</span><span class="ident" id="7114953">Buffer</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114961">br</span>&nbsp;<span class="op" id="7114964">:=</span>&nbsp;<span class="ident" id="7114967">bufio</span><span class="op" id="7114972">.</span><span class="ident" id="7114973">NewReader</span><span class="op" id="7114982">(</span><span class="op" id="7114983">&amp;</span><span class="ident" id="7114984">buf</span><span class="op" id="7114987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7114990">r</span>&nbsp;<span class="op" id="7114992">:=</span>&nbsp;<span class="ident" id="7114995">NewReader</span><span class="op" id="7115004">(</span><span class="ident" id="7115005">br</span><span class="op" id="7115007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115010">for</span>&nbsp;<span class="ident" id="7115014">i</span>&nbsp;<span class="op" id="7115016">:=</span>&nbsp;<span class="num" id="7115019">0</span><span class="op" id="7115020">;</span>&nbsp;<span class="ident" id="7115022">i</span>&nbsp;<span class="op" id="7115024">&lt;</span>&nbsp;<span class="ident" id="7115026">b</span><span class="op" id="7115027">.</span><span class="ident" id="7115028">N</span><span class="op" id="7115029">;</span>&nbsp;<span class="ident" id="7115031">i</span><span class="op" id="7115032">++</span>&nbsp;<span class="op" id="7115035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115039">buf</span><span class="op" id="7115042">.</span><span class="ident" id="7115043">WriteString</span><span class="op" id="7115054">(</span><span class="string" id="7115055">&#34;uncommon-header-for-benchmark:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7115099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115103">h</span><span class="op" id="7115104">,</span>&nbsp;<span class="ident" id="7115106">err</span>&nbsp;<span class="op" id="7115110">:=</span>&nbsp;<span class="ident" id="7115113">r</span><span class="op" id="7115114">.</span><span class="ident" id="7115115">ReadMIMEHeader</span><span class="op" id="7115129">(</span><span class="op" id="7115130">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115134">if</span>&nbsp;<span class="ident" id="7115137">err</span>&nbsp;<span class="op" id="7115141">!=</span>&nbsp;<span class="builtintype" id="7115144">nil</span>&nbsp;<span class="op" id="7115148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115153">b</span><span class="op" id="7115154">.</span><span class="ident" id="7115155">Fatal</span><span class="op" id="7115160">(</span><span class="ident" id="7115161">err</span><span class="op" id="7115164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115172">if</span>&nbsp;<span class="ident" id="7115175">_</span><span class="op" id="7115176">,</span>&nbsp;<span class="ident" id="7115178">ok</span>&nbsp;<span class="op" id="7115181">:=</span>&nbsp;<span class="ident" id="7115184">h</span><span class="op" id="7115185">[</span><span class="string" id="7115186">&#34;Uncommon-Header-For-Benchmark&#34;</span><span class="op" id="7115217">]</span><span class="op" id="7115218">;</span>&nbsp;<span class="op" id="7115220">!</span><span class="ident" id="7115221">ok</span>&nbsp;<span class="op" id="7115224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115229">b</span><span class="op" id="7115230">.</span><span class="ident" id="7115231">Fatal</span><span class="op" id="7115236">(</span><span class="string" id="7115237">&#34;Missing&nbsp;result&nbsp;header.&#34;</span><span class="op" id="7115261">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115268">}</span><br>
<span class="lineno"></span><span class="op" id="7115270">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
