<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1671448">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1671503">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1671557">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1671608">package</span>&nbsp;<span class="ident" id="1671616">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1671625">import</span>&nbsp;<span class="string" id="1671632">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1671642">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="1671714">var</span>&nbsp;<span class="ident" id="1671718">ErrRange</span>&nbsp;<span class="op" id="1671727">=</span>&nbsp;<span class="ident" id="1671729">errors</span><span class="op" id="1671735">.</span><span class="ident" id="1671736">New</span><span class="op" id="1671739">(</span><span class="string" id="1671740">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="1671760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1671763">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="1671851">var</span>&nbsp;<span class="ident" id="1671855">ErrSyntax</span>&nbsp;<span class="op" id="1671865">=</span>&nbsp;<span class="ident" id="1671867">errors</span><span class="op" id="1671873">.</span><span class="ident" id="1671874">New</span><span class="op" id="1671877">(</span><span class="string" id="1671878">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="1671894">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1671897">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="1671940">type</span>&nbsp;<span class="ident" id="1671945">NumError</span>&nbsp;<span class="keyword" id="1671954">struct</span>&nbsp;<span class="op" id="1671961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671964">Func</span>&nbsp;<span class="builtintype" id="1671969">string</span>&nbsp;<span class="comment" id="1671976">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672046">Num</span>&nbsp;&nbsp;<span class="builtintype" id="1672051">string</span>&nbsp;<span class="comment" id="1672058">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672072">Err</span>&nbsp;&nbsp;<span class="builtintype" id="1672077">error</span>&nbsp;&nbsp;<span class="comment" id="1672084">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="1672142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1672145">func</span>&nbsp;<span class="op" id="1672150">(</span><span class="ident" id="1672151">e</span>&nbsp;<span class="op" id="1672153">*</span><span class="ident" id="1672154">NumError</span><span class="op" id="1672162">)</span>&nbsp;<span class="ident" id="1672164">Error</span><span class="op" id="1672169">(</span><span class="op" id="1672170">)</span>&nbsp;<span class="builtintype" id="1672172">string</span>&nbsp;<span class="op" id="1672179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672182">return</span>&nbsp;<span class="string" id="1672189">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="1672200">+</span>&nbsp;<span class="ident" id="1672202">e</span><span class="op" id="1672203">.</span><span class="ident" id="1672204">Func</span>&nbsp;<span class="op" id="1672209">+</span>&nbsp;<span class="string" id="1672211">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1672216">+</span>&nbsp;<span class="string" id="1672218">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="1672229">+</span>&nbsp;<span class="ident" id="1672231">Quote</span><span class="op" id="1672236">(</span><span class="ident" id="1672237">e</span><span class="op" id="1672238">.</span><span class="ident" id="1672239">Num</span><span class="op" id="1672242">)</span>&nbsp;<span class="op" id="1672244">+</span>&nbsp;<span class="string" id="1672246">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1672251">+</span>&nbsp;<span class="ident" id="1672253">e</span><span class="op" id="1672254">.</span><span class="ident" id="1672255">Err</span><span class="op" id="1672258">.</span><span class="ident" id="1672259">Error</span><span class="op" id="1672264">(</span><span class="op" id="1672265">)</span><br>
<span class="lineno"></span><span class="op" id="1672267">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="1672270">func</span>&nbsp;<span class="ident" id="1672275">syntaxError</span><span class="op" id="1672286">(</span><span class="ident" id="1672287">fn</span><span class="op" id="1672289">,</span>&nbsp;<span class="ident" id="1672291">str</span>&nbsp;<span class="builtintype" id="1672295">string</span><span class="op" id="1672301">)</span>&nbsp;<span class="op" id="1672303">*</span><span class="ident" id="1672304">NumError</span>&nbsp;<span class="op" id="1672313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672316">return</span>&nbsp;<span class="op" id="1672323">&amp;</span><span class="ident" id="1672324">NumError</span><span class="op" id="1672332">{</span><span class="ident" id="1672333">fn</span><span class="op" id="1672335">,</span>&nbsp;<span class="ident" id="1672337">str</span><span class="op" id="1672340">,</span>&nbsp;<span class="ident" id="1672342">ErrSyntax</span><span class="op" id="1672351">}</span><br>
<span class="lineno"></span><span class="op" id="1672353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="1672356">func</span>&nbsp;<span class="ident" id="1672361">rangeError</span><span class="op" id="1672371">(</span><span class="ident" id="1672372">fn</span><span class="op" id="1672374">,</span>&nbsp;<span class="ident" id="1672376">str</span>&nbsp;<span class="builtintype" id="1672380">string</span><span class="op" id="1672386">)</span>&nbsp;<span class="op" id="1672388">*</span><span class="ident" id="1672389">NumError</span>&nbsp;<span class="op" id="1672398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672401">return</span>&nbsp;<span class="op" id="1672408">&amp;</span><span class="ident" id="1672409">NumError</span><span class="op" id="1672417">{</span><span class="ident" id="1672418">fn</span><span class="op" id="1672420">,</span>&nbsp;<span class="ident" id="1672422">str</span><span class="op" id="1672425">,</span>&nbsp;<span class="ident" id="1672427">ErrRange</span><span class="op" id="1672435">}</span><br>
<span class="lineno"></span><span class="op" id="1672437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1672440">const</span>&nbsp;<span class="ident" id="1672446">intSize</span>&nbsp;<span class="op" id="1672454">=</span>&nbsp;<span class="num" id="1672456">32</span>&nbsp;<span class="op" id="1672459">&lt;&lt;</span>&nbsp;<span class="op" id="1672462">(</span><span class="op" id="1672463">^</span><span class="builtintype" id="1672464">uint</span><span class="op" id="1672468">(</span><span class="num" id="1672469">0</span><span class="op" id="1672470">)</span>&nbsp;<span class="op" id="1672472">&gt;&gt;</span>&nbsp;<span class="num" id="1672475">63</span><span class="op" id="1672477">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1672480">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="1672536">const</span>&nbsp;<span class="ident" id="1672542">IntSize</span>&nbsp;<span class="op" id="1672550">=</span>&nbsp;<span class="ident" id="1672552">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1672561">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="1672617">func</span>&nbsp;<span class="ident" id="1672622">cutoff64</span><span class="op" id="1672630">(</span><span class="ident" id="1672631">base</span>&nbsp;<span class="builtintype" id="1672636">int</span><span class="op" id="1672639">)</span>&nbsp;<span class="ident" id="1672641">uint64</span>&nbsp;<span class="op" id="1672648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672651">if</span>&nbsp;<span class="ident" id="1672654">base</span>&nbsp;<span class="op" id="1672659">&lt;</span>&nbsp;<span class="num" id="1672661">2</span>&nbsp;<span class="op" id="1672663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672667">return</span>&nbsp;<span class="num" id="1672674">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1672677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672680">return</span>&nbsp;<span class="op" id="1672687">(</span><span class="num" id="1672688">1</span><span class="op" id="1672689">&lt;&lt;</span><span class="num" id="1672691">64</span><span class="op" id="1672693">-</span><span class="num" id="1672694">1</span><span class="op" id="1672695">)</span><span class="op" id="1672696">/</span><span class="ident" id="1672697">uint64</span><span class="op" id="1672703">(</span><span class="ident" id="1672704">base</span><span class="op" id="1672708">)</span>&nbsp;<span class="op" id="1672710">+</span>&nbsp;<span class="num" id="1672712">1</span><br>
<span class="lineno">45</span><span class="op" id="1672714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1672717">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="1672773">func</span>&nbsp;<span class="ident" id="1672778">ParseUint</span><span class="op" id="1672787">(</span><span class="ident" id="1672788">s</span>&nbsp;<span class="builtintype" id="1672790">string</span><span class="op" id="1672796">,</span>&nbsp;<span class="ident" id="1672798">base</span>&nbsp;<span class="builtintype" id="1672803">int</span><span class="op" id="1672806">,</span>&nbsp;<span class="ident" id="1672808">bitSize</span>&nbsp;<span class="builtintype" id="1672816">int</span><span class="op" id="1672819">)</span>&nbsp;<span class="op" id="1672821">(</span><span class="ident" id="1672822">n</span>&nbsp;<span class="ident" id="1672824">uint64</span><span class="op" id="1672830">,</span>&nbsp;<span class="ident" id="1672832">err</span>&nbsp;<span class="builtintype" id="1672836">error</span><span class="op" id="1672841">)</span>&nbsp;<span class="op" id="1672843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672846">var</span>&nbsp;<span class="ident" id="1672850">cutoff</span><span class="op" id="1672856">,</span>&nbsp;<span class="ident" id="1672858">maxVal</span>&nbsp;<span class="ident" id="1672865">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672874">if</span>&nbsp;<span class="ident" id="1672877">bitSize</span>&nbsp;<span class="op" id="1672885">==</span>&nbsp;<span class="num" id="1672888">0</span>&nbsp;<span class="op" id="1672890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672894">bitSize</span>&nbsp;<span class="op" id="1672902">=</span>&nbsp;<span class="builtintype" id="1672904">int</span><span class="op" id="1672907">(</span><span class="ident" id="1672908">IntSize</span><span class="op" id="1672915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1672918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672922">s0</span>&nbsp;<span class="op" id="1672925">:=</span>&nbsp;<span class="ident" id="1672928">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672931">switch</span>&nbsp;<span class="op" id="1672938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672941">case</span>&nbsp;<span class="builtinfunc" id="1672946">len</span><span class="op" id="1672949">(</span><span class="ident" id="1672950">s</span><span class="op" id="1672951">)</span>&nbsp;<span class="op" id="1672953">&lt;</span>&nbsp;<span class="num" id="1672955">1</span><span class="op" id="1672956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672960">err</span>&nbsp;<span class="op" id="1672964">=</span>&nbsp;<span class="ident" id="1672966">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672978">goto</span>&nbsp;<span class="ident" id="1672983">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672991">case</span>&nbsp;<span class="num" id="1672996">2</span>&nbsp;<span class="op" id="1672998">&lt;=</span>&nbsp;<span class="ident" id="1673001">base</span>&nbsp;<span class="op" id="1673006">&amp;&amp;</span>&nbsp;<span class="ident" id="1673009">base</span>&nbsp;<span class="op" id="1673014">&lt;=</span>&nbsp;<span class="num" id="1673017">36</span><span class="op" id="1673019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673023">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673054">case</span>&nbsp;<span class="ident" id="1673059">base</span>&nbsp;<span class="op" id="1673064">==</span>&nbsp;<span class="num" id="1673067">0</span><span class="op" id="1673068">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673072">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673105">switch</span>&nbsp;<span class="op" id="1673112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673116">case</span>&nbsp;<span class="ident" id="1673121">s</span><span class="op" id="1673122">[</span><span class="num" id="1673123">0</span><span class="op" id="1673124">]</span>&nbsp;<span class="op" id="1673126">==</span>&nbsp;<span class="string" id="1673129">&#39;0&#39;</span>&nbsp;<span class="op" id="1673133">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1673136">len</span><span class="op" id="1673139">(</span><span class="ident" id="1673140">s</span><span class="op" id="1673141">)</span>&nbsp;<span class="op" id="1673143">&gt;</span>&nbsp;<span class="num" id="1673145">1</span>&nbsp;<span class="op" id="1673147">&amp;&amp;</span>&nbsp;<span class="op" id="1673150">(</span><span class="ident" id="1673151">s</span><span class="op" id="1673152">[</span><span class="num" id="1673153">1</span><span class="op" id="1673154">]</span>&nbsp;<span class="op" id="1673156">==</span>&nbsp;<span class="string" id="1673159">&#39;x&#39;</span>&nbsp;<span class="op" id="1673163">||</span>&nbsp;<span class="ident" id="1673166">s</span><span class="op" id="1673167">[</span><span class="num" id="1673168">1</span><span class="op" id="1673169">]</span>&nbsp;<span class="op" id="1673171">==</span>&nbsp;<span class="string" id="1673174">&#39;X&#39;</span><span class="op" id="1673177">)</span><span class="op" id="1673178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673183">base</span>&nbsp;<span class="op" id="1673188">=</span>&nbsp;<span class="num" id="1673190">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673196">s</span>&nbsp;<span class="op" id="1673198">=</span>&nbsp;<span class="ident" id="1673200">s</span><span class="op" id="1673201">[</span><span class="num" id="1673202">2</span><span class="op" id="1673203">:</span><span class="op" id="1673204">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673209">if</span>&nbsp;<span class="builtinfunc" id="1673212">len</span><span class="op" id="1673215">(</span><span class="ident" id="1673216">s</span><span class="op" id="1673217">)</span>&nbsp;<span class="op" id="1673219">&lt;</span>&nbsp;<span class="num" id="1673221">1</span>&nbsp;<span class="op" id="1673223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673229">err</span>&nbsp;<span class="op" id="1673233">=</span>&nbsp;<span class="ident" id="1673235">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673249">goto</span>&nbsp;<span class="ident" id="1673254">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673267">case</span>&nbsp;<span class="ident" id="1673272">s</span><span class="op" id="1673273">[</span><span class="num" id="1673274">0</span><span class="op" id="1673275">]</span>&nbsp;<span class="op" id="1673277">==</span>&nbsp;<span class="string" id="1673280">&#39;0&#39;</span><span class="op" id="1673283">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673288">base</span>&nbsp;<span class="op" id="1673293">=</span>&nbsp;<span class="num" id="1673295">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673299">default</span><span class="op" id="1673306">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673311">base</span>&nbsp;<span class="op" id="1673316">=</span>&nbsp;<span class="num" id="1673318">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673327">default</span><span class="op" id="1673334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673338">err</span>&nbsp;<span class="op" id="1673342">=</span>&nbsp;<span class="ident" id="1673344">errors</span><span class="op" id="1673350">.</span><span class="ident" id="1673351">New</span><span class="op" id="1673354">(</span><span class="string" id="1673355">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="1673371">+</span>&nbsp;<span class="ident" id="1673373">Itoa</span><span class="op" id="1673377">(</span><span class="ident" id="1673378">base</span><span class="op" id="1673382">)</span><span class="op" id="1673383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673387">goto</span>&nbsp;<span class="ident" id="1673392">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673403">n</span>&nbsp;<span class="op" id="1673405">=</span>&nbsp;<span class="num" id="1673407">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673410">cutoff</span>&nbsp;<span class="op" id="1673417">=</span>&nbsp;<span class="ident" id="1673419">cutoff64</span><span class="op" id="1673427">(</span><span class="ident" id="1673428">base</span><span class="op" id="1673432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673435">maxVal</span>&nbsp;<span class="op" id="1673442">=</span>&nbsp;<span class="num" id="1673444">1</span><span class="op" id="1673445">&lt;&lt;</span><span class="builtintype" id="1673447">uint</span><span class="op" id="1673451">(</span><span class="ident" id="1673452">bitSize</span><span class="op" id="1673459">)</span>&nbsp;<span class="op" id="1673461">-</span>&nbsp;<span class="num" id="1673463">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673467">for</span>&nbsp;<span class="ident" id="1673471">i</span>&nbsp;<span class="op" id="1673473">:=</span>&nbsp;<span class="num" id="1673476">0</span><span class="op" id="1673477">;</span>&nbsp;<span class="ident" id="1673479">i</span>&nbsp;<span class="op" id="1673481">&lt;</span>&nbsp;<span class="builtinfunc" id="1673483">len</span><span class="op" id="1673486">(</span><span class="ident" id="1673487">s</span><span class="op" id="1673488">)</span><span class="op" id="1673489">;</span>&nbsp;<span class="ident" id="1673491">i</span><span class="op" id="1673492">++</span>&nbsp;<span class="op" id="1673495">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673499">var</span>&nbsp;<span class="ident" id="1673503">v</span>&nbsp;<span class="builtintype" id="1673505">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673512">d</span>&nbsp;<span class="op" id="1673514">:=</span>&nbsp;<span class="ident" id="1673517">s</span><span class="op" id="1673518">[</span><span class="ident" id="1673519">i</span><span class="op" id="1673520">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673524">switch</span>&nbsp;<span class="op" id="1673531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673535">case</span>&nbsp;<span class="string" id="1673540">&#39;0&#39;</span>&nbsp;<span class="op" id="1673544">&lt;=</span>&nbsp;<span class="ident" id="1673547">d</span>&nbsp;<span class="op" id="1673549">&amp;&amp;</span>&nbsp;<span class="ident" id="1673552">d</span>&nbsp;<span class="op" id="1673554">&lt;=</span>&nbsp;<span class="string" id="1673557">&#39;9&#39;</span><span class="op" id="1673560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673565">v</span>&nbsp;<span class="op" id="1673567">=</span>&nbsp;<span class="ident" id="1673569">d</span>&nbsp;<span class="op" id="1673571">-</span>&nbsp;<span class="string" id="1673573">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673579">case</span>&nbsp;<span class="string" id="1673584">&#39;a&#39;</span>&nbsp;<span class="op" id="1673588">&lt;=</span>&nbsp;<span class="ident" id="1673591">d</span>&nbsp;<span class="op" id="1673593">&amp;&amp;</span>&nbsp;<span class="ident" id="1673596">d</span>&nbsp;<span class="op" id="1673598">&lt;=</span>&nbsp;<span class="string" id="1673601">&#39;z&#39;</span><span class="op" id="1673604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673609">v</span>&nbsp;<span class="op" id="1673611">=</span>&nbsp;<span class="ident" id="1673613">d</span>&nbsp;<span class="op" id="1673615">-</span>&nbsp;<span class="string" id="1673617">&#39;a&#39;</span>&nbsp;<span class="op" id="1673621">+</span>&nbsp;<span class="num" id="1673623">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673628">case</span>&nbsp;<span class="string" id="1673633">&#39;A&#39;</span>&nbsp;<span class="op" id="1673637">&lt;=</span>&nbsp;<span class="ident" id="1673640">d</span>&nbsp;<span class="op" id="1673642">&amp;&amp;</span>&nbsp;<span class="ident" id="1673645">d</span>&nbsp;<span class="op" id="1673647">&lt;=</span>&nbsp;<span class="string" id="1673650">&#39;Z&#39;</span><span class="op" id="1673653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673658">v</span>&nbsp;<span class="op" id="1673660">=</span>&nbsp;<span class="ident" id="1673662">d</span>&nbsp;<span class="op" id="1673664">-</span>&nbsp;<span class="string" id="1673666">&#39;A&#39;</span>&nbsp;<span class="op" id="1673670">+</span>&nbsp;<span class="num" id="1673672">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673677">default</span><span class="op" id="1673684">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673689">n</span>&nbsp;<span class="op" id="1673691">=</span>&nbsp;<span class="num" id="1673693">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673698">err</span>&nbsp;<span class="op" id="1673702">=</span>&nbsp;<span class="ident" id="1673704">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673717">goto</span>&nbsp;<span class="ident" id="1673722">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673734">if</span>&nbsp;<span class="builtintype" id="1673737">int</span><span class="op" id="1673740">(</span><span class="ident" id="1673741">v</span><span class="op" id="1673742">)</span>&nbsp;<span class="op" id="1673744">&gt;=</span>&nbsp;<span class="ident" id="1673747">base</span>&nbsp;<span class="op" id="1673752">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673757">n</span>&nbsp;<span class="op" id="1673759">=</span>&nbsp;<span class="num" id="1673761">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673766">err</span>&nbsp;<span class="op" id="1673770">=</span>&nbsp;<span class="ident" id="1673772">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673785">goto</span>&nbsp;<span class="ident" id="1673790">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673803">if</span>&nbsp;<span class="ident" id="1673806">n</span>&nbsp;<span class="op" id="1673808">&gt;=</span>&nbsp;<span class="ident" id="1673811">cutoff</span>&nbsp;<span class="op" id="1673818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673823">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673846">n</span>&nbsp;<span class="op" id="1673848">=</span>&nbsp;<span class="num" id="1673850">1</span><span class="op" id="1673851">&lt;&lt;</span><span class="num" id="1673853">64</span>&nbsp;<span class="op" id="1673856">-</span>&nbsp;<span class="num" id="1673858">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673863">err</span>&nbsp;<span class="op" id="1673867">=</span>&nbsp;<span class="ident" id="1673869">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673881">goto</span>&nbsp;<span class="ident" id="1673886">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673898">n</span>&nbsp;<span class="op" id="1673900">*=</span>&nbsp;<span class="ident" id="1673903">uint64</span><span class="op" id="1673909">(</span><span class="ident" id="1673910">base</span><span class="op" id="1673914">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673919">n1</span>&nbsp;<span class="op" id="1673922">:=</span>&nbsp;<span class="ident" id="1673925">n</span>&nbsp;<span class="op" id="1673927">+</span>&nbsp;<span class="ident" id="1673929">uint64</span><span class="op" id="1673935">(</span><span class="ident" id="1673936">v</span><span class="op" id="1673937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673941">if</span>&nbsp;<span class="ident" id="1673944">n1</span>&nbsp;<span class="op" id="1673947">&lt;</span>&nbsp;<span class="ident" id="1673949">n</span>&nbsp;<span class="op" id="1673951">||</span>&nbsp;<span class="ident" id="1673954">n1</span>&nbsp;<span class="op" id="1673957">&gt;</span>&nbsp;<span class="ident" id="1673959">maxVal</span>&nbsp;<span class="op" id="1673966">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673971">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673991">n</span>&nbsp;<span class="op" id="1673993">=</span>&nbsp;<span class="num" id="1673995">1</span><span class="op" id="1673996">&lt;&lt;</span><span class="num" id="1673998">64</span>&nbsp;<span class="op" id="1674001">-</span>&nbsp;<span class="num" id="1674003">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674008">err</span>&nbsp;<span class="op" id="1674012">=</span>&nbsp;<span class="ident" id="1674014">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674026">goto</span>&nbsp;<span class="ident" id="1674031">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1674039">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674043">n</span>&nbsp;<span class="op" id="1674045">=</span>&nbsp;<span class="ident" id="1674047">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1674051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674055">return</span>&nbsp;<span class="ident" id="1674062">n</span><span class="op" id="1674063">,</span>&nbsp;<span class="ident" id="1674065">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="1674070">Error</span><span class="op" id="1674075">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674078">return</span>&nbsp;<span class="ident" id="1674085">n</span><span class="op" id="1674086">,</span>&nbsp;<span class="op" id="1674088">&amp;</span><span class="ident" id="1674089">NumError</span><span class="op" id="1674097">{</span><span class="string" id="1674098">&#34;ParseUint&#34;</span><span class="op" id="1674109">,</span>&nbsp;<span class="ident" id="1674111">s0</span><span class="op" id="1674113">,</span>&nbsp;<span class="ident" id="1674115">err</span><span class="op" id="1674118">}</span><br>
<span class="lineno"></span><span class="op" id="1674120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1674123">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="1674189">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1674254">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="1674318">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="1674349">//</span><br>
<span class="lineno"></span><span class="comment" id="1674352">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="1674403">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="1674469">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="1674522">//</span><br>
<span class="lineno"></span><span class="comment" id="1674525">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="1674590">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="1674653">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="1674713">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="1674775">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1674839">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1674897">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="1674930">func</span>&nbsp;<span class="ident" id="1674935">ParseInt</span><span class="op" id="1674943">(</span><span class="ident" id="1674944">s</span>&nbsp;<span class="builtintype" id="1674946">string</span><span class="op" id="1674952">,</span>&nbsp;<span class="ident" id="1674954">base</span>&nbsp;<span class="builtintype" id="1674959">int</span><span class="op" id="1674962">,</span>&nbsp;<span class="ident" id="1674964">bitSize</span>&nbsp;<span class="builtintype" id="1674972">int</span><span class="op" id="1674975">)</span>&nbsp;<span class="op" id="1674977">(</span><span class="ident" id="1674978">i</span>&nbsp;<span class="ident" id="1674980">int64</span><span class="op" id="1674985">,</span>&nbsp;<span class="ident" id="1674987">err</span>&nbsp;<span class="builtintype" id="1674991">error</span><span class="op" id="1674996">)</span>&nbsp;<span class="op" id="1674998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675001">const</span>&nbsp;<span class="ident" id="1675007">fnParseInt</span>&nbsp;<span class="op" id="1675018">=</span>&nbsp;<span class="string" id="1675020">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675033">if</span>&nbsp;<span class="ident" id="1675036">bitSize</span>&nbsp;<span class="op" id="1675044">==</span>&nbsp;<span class="num" id="1675047">0</span>&nbsp;<span class="op" id="1675049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675053">bitSize</span>&nbsp;<span class="op" id="1675061">=</span>&nbsp;<span class="builtintype" id="1675063">int</span><span class="op" id="1675066">(</span><span class="ident" id="1675067">IntSize</span><span class="op" id="1675074">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1675081">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675103">if</span>&nbsp;<span class="builtinfunc" id="1675106">len</span><span class="op" id="1675109">(</span><span class="ident" id="1675110">s</span><span class="op" id="1675111">)</span>&nbsp;<span class="op" id="1675113">==</span>&nbsp;<span class="num" id="1675116">0</span>&nbsp;<span class="op" id="1675118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675122">return</span>&nbsp;<span class="num" id="1675129">0</span><span class="op" id="1675130">,</span>&nbsp;<span class="ident" id="1675132">syntaxError</span><span class="op" id="1675143">(</span><span class="ident" id="1675144">fnParseInt</span><span class="op" id="1675154">,</span>&nbsp;<span class="ident" id="1675156">s</span><span class="op" id="1675157">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1675164">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675191">s0</span>&nbsp;<span class="op" id="1675194">:=</span>&nbsp;<span class="ident" id="1675197">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675200">neg</span>&nbsp;<span class="op" id="1675204">:=</span>&nbsp;<span class="builtintype" id="1675207">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675214">if</span>&nbsp;<span class="ident" id="1675217">s</span><span class="op" id="1675218">[</span><span class="num" id="1675219">0</span><span class="op" id="1675220">]</span>&nbsp;<span class="op" id="1675222">==</span>&nbsp;<span class="string" id="1675225">&#39;+&#39;</span>&nbsp;<span class="op" id="1675229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675233">s</span>&nbsp;<span class="op" id="1675235">=</span>&nbsp;<span class="ident" id="1675237">s</span><span class="op" id="1675238">[</span><span class="num" id="1675239">1</span><span class="op" id="1675240">:</span><span class="op" id="1675241">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675244">}</span>&nbsp;<span class="keyword" id="1675246">else</span>&nbsp;<span class="keyword" id="1675251">if</span>&nbsp;<span class="ident" id="1675254">s</span><span class="op" id="1675255">[</span><span class="num" id="1675256">0</span><span class="op" id="1675257">]</span>&nbsp;<span class="op" id="1675259">==</span>&nbsp;<span class="string" id="1675262">&#39;-&#39;</span>&nbsp;<span class="op" id="1675266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675270">neg</span>&nbsp;<span class="op" id="1675274">=</span>&nbsp;<span class="builtintype" id="1675276">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675283">s</span>&nbsp;<span class="op" id="1675285">=</span>&nbsp;<span class="ident" id="1675287">s</span><span class="op" id="1675288">[</span><span class="num" id="1675289">1</span><span class="op" id="1675290">:</span><span class="op" id="1675291">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1675298">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675336">var</span>&nbsp;<span class="ident" id="1675340">un</span>&nbsp;<span class="ident" id="1675343">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675351">un</span><span class="op" id="1675353">,</span>&nbsp;<span class="ident" id="1675355">err</span>&nbsp;<span class="op" id="1675359">=</span>&nbsp;<span class="ident" id="1675361">ParseUint</span><span class="op" id="1675370">(</span><span class="ident" id="1675371">s</span><span class="op" id="1675372">,</span>&nbsp;<span class="ident" id="1675374">base</span><span class="op" id="1675378">,</span>&nbsp;<span class="ident" id="1675380">bitSize</span><span class="op" id="1675387">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675390">if</span>&nbsp;<span class="ident" id="1675393">err</span>&nbsp;<span class="op" id="1675397">!=</span>&nbsp;<span class="ident" id="1675400">nil</span>&nbsp;<span class="op" id="1675404">&amp;&amp;</span>&nbsp;<span class="ident" id="1675407">err</span><span class="op" id="1675410">.</span><span class="op" id="1675411">(</span><span class="op" id="1675412">*</span><span class="ident" id="1675413">NumError</span><span class="op" id="1675421">)</span><span class="op" id="1675422">.</span><span class="ident" id="1675423">Err</span>&nbsp;<span class="op" id="1675427">!=</span>&nbsp;<span class="ident" id="1675430">ErrRange</span>&nbsp;<span class="op" id="1675439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675443">err</span><span class="op" id="1675446">.</span><span class="op" id="1675447">(</span><span class="op" id="1675448">*</span><span class="ident" id="1675449">NumError</span><span class="op" id="1675457">)</span><span class="op" id="1675458">.</span><span class="ident" id="1675459">Func</span>&nbsp;<span class="op" id="1675464">=</span>&nbsp;<span class="ident" id="1675466">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675479">err</span><span class="op" id="1675482">.</span><span class="op" id="1675483">(</span><span class="op" id="1675484">*</span><span class="ident" id="1675485">NumError</span><span class="op" id="1675493">)</span><span class="op" id="1675494">.</span><span class="ident" id="1675495">Num</span>&nbsp;<span class="op" id="1675499">=</span>&nbsp;<span class="ident" id="1675501">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675506">return</span>&nbsp;<span class="num" id="1675513">0</span><span class="op" id="1675514">,</span>&nbsp;<span class="ident" id="1675516">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675521">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675524">cutoff</span>&nbsp;<span class="op" id="1675531">:=</span>&nbsp;<span class="ident" id="1675534">uint64</span><span class="op" id="1675540">(</span><span class="num" id="1675541">1</span>&nbsp;<span class="op" id="1675543">&lt;&lt;</span>&nbsp;<span class="builtintype" id="1675546">uint</span><span class="op" id="1675550">(</span><span class="ident" id="1675551">bitSize</span><span class="op" id="1675558">-</span><span class="num" id="1675559">1</span><span class="op" id="1675560">)</span><span class="op" id="1675561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675564">if</span>&nbsp;<span class="op" id="1675567">!</span><span class="ident" id="1675568">neg</span>&nbsp;<span class="op" id="1675572">&amp;&amp;</span>&nbsp;<span class="ident" id="1675575">un</span>&nbsp;<span class="op" id="1675578">&gt;=</span>&nbsp;<span class="ident" id="1675581">cutoff</span>&nbsp;<span class="op" id="1675588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675592">return</span>&nbsp;<span class="ident" id="1675599">int64</span><span class="op" id="1675604">(</span><span class="ident" id="1675605">cutoff</span>&nbsp;<span class="op" id="1675612">-</span>&nbsp;<span class="num" id="1675614">1</span><span class="op" id="1675615">)</span><span class="op" id="1675616">,</span>&nbsp;<span class="ident" id="1675618">rangeError</span><span class="op" id="1675628">(</span><span class="ident" id="1675629">fnParseInt</span><span class="op" id="1675639">,</span>&nbsp;<span class="ident" id="1675641">s0</span><span class="op" id="1675643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675649">if</span>&nbsp;<span class="ident" id="1675652">neg</span>&nbsp;<span class="op" id="1675656">&amp;&amp;</span>&nbsp;<span class="ident" id="1675659">un</span>&nbsp;<span class="op" id="1675662">&gt;</span>&nbsp;<span class="ident" id="1675664">cutoff</span>&nbsp;<span class="op" id="1675671">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675675">return</span>&nbsp;<span class="op" id="1675682">-</span><span class="ident" id="1675683">int64</span><span class="op" id="1675688">(</span><span class="ident" id="1675689">cutoff</span><span class="op" id="1675695">)</span><span class="op" id="1675696">,</span>&nbsp;<span class="ident" id="1675698">rangeError</span><span class="op" id="1675708">(</span><span class="ident" id="1675709">fnParseInt</span><span class="op" id="1675719">,</span>&nbsp;<span class="ident" id="1675721">s0</span><span class="op" id="1675723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675729">n</span>&nbsp;<span class="op" id="1675731">:=</span>&nbsp;<span class="ident" id="1675734">int64</span><span class="op" id="1675739">(</span><span class="ident" id="1675740">un</span><span class="op" id="1675742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675745">if</span>&nbsp;<span class="ident" id="1675748">neg</span>&nbsp;<span class="op" id="1675752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675756">n</span>&nbsp;<span class="op" id="1675758">=</span>&nbsp;<span class="op" id="1675760">-</span><span class="ident" id="1675761">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675767">return</span>&nbsp;<span class="ident" id="1675774">n</span><span class="op" id="1675775">,</span>&nbsp;<span class="ident" id="1675777">nil</span><br>
<span class="lineno"></span><span class="op" id="1675781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1675784">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="1675829">func</span>&nbsp;<span class="ident" id="1675834">Atoi</span><span class="op" id="1675838">(</span><span class="ident" id="1675839">s</span>&nbsp;<span class="builtintype" id="1675841">string</span><span class="op" id="1675847">)</span>&nbsp;<span class="op" id="1675849">(</span><span class="ident" id="1675850">i</span>&nbsp;<span class="builtintype" id="1675852">int</span><span class="op" id="1675855">,</span>&nbsp;<span class="ident" id="1675857">err</span>&nbsp;<span class="builtintype" id="1675861">error</span><span class="op" id="1675866">)</span>&nbsp;<span class="op" id="1675868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675871">i64</span><span class="op" id="1675874">,</span>&nbsp;<span class="ident" id="1675876">err</span>&nbsp;<span class="op" id="1675880">:=</span>&nbsp;<span class="ident" id="1675883">ParseInt</span><span class="op" id="1675891">(</span><span class="ident" id="1675892">s</span><span class="op" id="1675893">,</span>&nbsp;<span class="num" id="1675895">10</span><span class="op" id="1675897">,</span>&nbsp;<span class="num" id="1675899">0</span><span class="op" id="1675900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675903">return</span>&nbsp;<span class="builtintype" id="1675910">int</span><span class="op" id="1675913">(</span><span class="ident" id="1675914">i64</span><span class="op" id="1675917">)</span><span class="op" id="1675918">,</span>&nbsp;<span class="ident" id="1675920">err</span><br>
<span class="lineno"></span><span class="op" id="1675924">}</span>
</div>
</body>
</html>
