<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6397111">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6397167">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6397221">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6397272">//&nbsp;Package&nbsp;plan9obj&nbsp;implements&nbsp;access&nbsp;to&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6397340">package</span>&nbsp;<span class="ident" id="6397348">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6397358">import</span>&nbsp;<span class="op" id="6397365">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6397368">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6397387">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6397397">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6397404">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6397410">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6397415">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6397418">//&nbsp;A&nbsp;FileHeader&nbsp;represents&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="6397473">type</span>&nbsp;<span class="ident" id="6397478">FileHeader</span>&nbsp;<span class="keyword" id="6397489">struct</span>&nbsp;<span class="op" id="6397496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397499">Magic</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6397511">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397519">Bss</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6397531">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397539">Entry</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397551">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397559">PtrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6397571">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397576">LoadAddress</span>&nbsp;<span class="ident" id="6397588">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397596">HdrSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397608">uint64</span><br>
<span class="lineno"></span><span class="op" id="6397615">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6397618">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6397666">type</span>&nbsp;<span class="ident" id="6397671">File</span>&nbsp;<span class="keyword" id="6397676">struct</span>&nbsp;<span class="op" id="6397683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397686">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397698">Sections</span>&nbsp;<span class="op" id="6397707">[</span><span class="op" id="6397708">]</span><span class="op" id="6397709">*</span><span class="ident" id="6397710">Section</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397719">closer</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6397728">io</span><span class="op" id="6397730">.</span><span class="ident" id="6397731">Closer</span><br>
<span class="lineno"></span><span class="op" id="6397738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6397741">//&nbsp;A&nbsp;SectionHeader&nbsp;represents&nbsp;a&nbsp;single&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="6397809">//&nbsp;This&nbsp;structure&nbsp;doesn&#39;t&nbsp;exist&nbsp;on-disk,&nbsp;but&nbsp;eases&nbsp;navigation</span><br>
<span class="lineno">35</span><span class="comment" id="6397871">//&nbsp;through&nbsp;the&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6397899">type</span>&nbsp;<span class="ident" id="6397904">SectionHeader</span>&nbsp;<span class="keyword" id="6397918">struct</span>&nbsp;<span class="op" id="6397925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397928">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6397935">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397943">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6397950">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6397958">Offset</span>&nbsp;<span class="builtintype" id="6397965">uint32</span><br>
<span class="lineno">40</span><span class="op" id="6397972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6397975">//&nbsp;A&nbsp;Section&nbsp;represents&nbsp;a&nbsp;single&nbsp;section&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6398040">type</span>&nbsp;<span class="ident" id="6398045">Section</span>&nbsp;<span class="keyword" id="6398053">struct</span>&nbsp;<span class="op" id="6398060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398063">SectionHeader</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6398079">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6398117">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6398157">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6398192">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6398240">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6398290">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398314">io</span><span class="op" id="6398316">.</span><span class="ident" id="6398317">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398327">sr</span>&nbsp;<span class="op" id="6398330">*</span><span class="ident" id="6398331">io</span><span class="op" id="6398333">.</span><span class="ident" id="6398334">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6398348">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6398351">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6398419">func</span>&nbsp;<span class="op" id="6398424">(</span><span class="ident" id="6398425">s</span>&nbsp;<span class="op" id="6398427">*</span><span class="ident" id="6398428">Section</span><span class="op" id="6398435">)</span>&nbsp;<span class="ident" id="6398437">Data</span><span class="op" id="6398441">(</span><span class="op" id="6398442">)</span>&nbsp;<span class="op" id="6398444">(</span><span class="op" id="6398445">[</span><span class="op" id="6398446">]</span><span class="builtintype" id="6398447">byte</span><span class="op" id="6398451">,</span>&nbsp;<span class="builtintype" id="6398453">error</span><span class="op" id="6398458">)</span>&nbsp;<span class="op" id="6398460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398463">dat</span>&nbsp;<span class="op" id="6398467">:=</span>&nbsp;<span class="builtinfunc" id="6398470">make</span><span class="op" id="6398474">(</span><span class="op" id="6398475">[</span><span class="op" id="6398476">]</span><span class="builtintype" id="6398477">byte</span><span class="op" id="6398481">,</span>&nbsp;<span class="ident" id="6398483">s</span><span class="op" id="6398484">.</span><span class="ident" id="6398485">sr</span><span class="op" id="6398487">.</span><span class="ident" id="6398488">Size</span><span class="op" id="6398492">(</span><span class="op" id="6398493">)</span><span class="op" id="6398494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398497">n</span><span class="op" id="6398498">,</span>&nbsp;<span class="ident" id="6398500">err</span>&nbsp;<span class="op" id="6398504">:=</span>&nbsp;<span class="ident" id="6398507">s</span><span class="op" id="6398508">.</span><span class="ident" id="6398509">sr</span><span class="op" id="6398511">.</span><span class="ident" id="6398512">ReadAt</span><span class="op" id="6398518">(</span><span class="ident" id="6398519">dat</span><span class="op" id="6398522">,</span>&nbsp;<span class="num" id="6398524">0</span><span class="op" id="6398525">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6398528">if</span>&nbsp;<span class="ident" id="6398531">n</span>&nbsp;<span class="op" id="6398533">==</span>&nbsp;<span class="builtinfunc" id="6398536">len</span><span class="op" id="6398539">(</span><span class="ident" id="6398540">dat</span><span class="op" id="6398543">)</span>&nbsp;<span class="op" id="6398545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398549">err</span>&nbsp;<span class="op" id="6398553">=</span>&nbsp;<span class="builtintype" id="6398555">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6398560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6398563">return</span>&nbsp;<span class="ident" id="6398570">dat</span><span class="op" id="6398573">[</span><span class="num" id="6398574">0</span><span class="op" id="6398575">:</span><span class="ident" id="6398576">n</span><span class="op" id="6398577">]</span><span class="op" id="6398578">,</span>&nbsp;<span class="ident" id="6398580">err</span><br>
<span class="lineno"></span><span class="op" id="6398584">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="6398587">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6398654">func</span>&nbsp;<span class="op" id="6398659">(</span><span class="ident" id="6398660">s</span>&nbsp;<span class="op" id="6398662">*</span><span class="ident" id="6398663">Section</span><span class="op" id="6398670">)</span>&nbsp;<span class="ident" id="6398672">Open</span><span class="op" id="6398676">(</span><span class="op" id="6398677">)</span>&nbsp;<span class="ident" id="6398679">io</span><span class="op" id="6398681">.</span><span class="ident" id="6398682">ReadSeeker</span>&nbsp;<span class="op" id="6398693">{</span>&nbsp;<span class="keyword" id="6398695">return</span>&nbsp;<span class="ident" id="6398702">io</span><span class="op" id="6398704">.</span><span class="ident" id="6398705">NewSectionReader</span><span class="op" id="6398721">(</span><span class="ident" id="6398722">s</span><span class="op" id="6398723">.</span><span class="ident" id="6398724">sr</span><span class="op" id="6398726">,</span>&nbsp;<span class="num" id="6398728">0</span><span class="op" id="6398729">,</span>&nbsp;<span class="num" id="6398731">1</span><span class="op" id="6398732">&lt;&lt;</span><span class="num" id="6398734">63</span><span class="op" id="6398736">-</span><span class="num" id="6398737">1</span><span class="op" id="6398738">)</span>&nbsp;<span class="op" id="6398740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6398743">//&nbsp;A&nbsp;Symbol&nbsp;represents&nbsp;an&nbsp;entry&nbsp;in&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;symbol&nbsp;table&nbsp;section.</span><br>
<span class="lineno">70</span><span class="keyword" id="6398815">type</span>&nbsp;<span class="ident" id="6398820">Sym</span>&nbsp;<span class="keyword" id="6398824">struct</span>&nbsp;<span class="op" id="6398831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398834">Value</span>&nbsp;<span class="ident" id="6398840">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398848">Type</span>&nbsp;&nbsp;<span class="builtintype" id="6398854">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6398860">Name</span>&nbsp;&nbsp;<span class="builtintype" id="6398866">string</span><br>
<span class="lineno"></span><span class="op" id="6398873">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6398876">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="6398907">//&nbsp;formatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6398970">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6399021">type</span>&nbsp;<span class="ident" id="6399026">formatError</span>&nbsp;<span class="keyword" id="6399038">struct</span>&nbsp;<span class="op" id="6399045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399048">off</span>&nbsp;<span class="builtintype" id="6399052">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399057">msg</span>&nbsp;<span class="builtintype" id="6399061">string</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399069">val</span>&nbsp;<span class="keyword" id="6399073">interface</span><span class="op" id="6399082">{</span><span class="op" id="6399083">}</span><br>
<span class="lineno"></span><span class="op" id="6399085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6399088">func</span>&nbsp;<span class="op" id="6399093">(</span><span class="ident" id="6399094">e</span>&nbsp;<span class="op" id="6399096">*</span><span class="ident" id="6399097">formatError</span><span class="op" id="6399108">)</span>&nbsp;<span class="ident" id="6399110">Error</span><span class="op" id="6399115">(</span><span class="op" id="6399116">)</span>&nbsp;<span class="builtintype" id="6399118">string</span>&nbsp;<span class="op" id="6399125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399128">msg</span>&nbsp;<span class="op" id="6399132">:=</span>&nbsp;<span class="ident" id="6399135">e</span><span class="op" id="6399136">.</span><span class="ident" id="6399137">msg</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399142">if</span>&nbsp;<span class="ident" id="6399145">e</span><span class="op" id="6399146">.</span><span class="ident" id="6399147">val</span>&nbsp;<span class="op" id="6399151">!=</span>&nbsp;<span class="builtintype" id="6399154">nil</span>&nbsp;<span class="op" id="6399158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399162">msg</span>&nbsp;<span class="op" id="6399166">+=</span>&nbsp;<span class="ident" id="6399169">fmt</span><span class="op" id="6399172">.</span><span class="ident" id="6399173">Sprintf</span><span class="op" id="6399180">(</span><span class="string" id="6399181">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6399188">,</span>&nbsp;<span class="ident" id="6399190">e</span><span class="op" id="6399191">.</span><span class="ident" id="6399192">val</span><span class="op" id="6399195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6399198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399201">msg</span>&nbsp;<span class="op" id="6399205">+=</span>&nbsp;<span class="ident" id="6399208">fmt</span><span class="op" id="6399211">.</span><span class="ident" id="6399212">Sprintf</span><span class="op" id="6399219">(</span><span class="string" id="6399220">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6399244">,</span>&nbsp;<span class="ident" id="6399246">e</span><span class="op" id="6399247">.</span><span class="ident" id="6399248">off</span><span class="op" id="6399251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399254">return</span>&nbsp;<span class="ident" id="6399261">msg</span><br>
<span class="lineno">95</span><span class="op" id="6399265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6399268">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6399361">func</span>&nbsp;<span class="ident" id="6399366">Open</span><span class="op" id="6399370">(</span><span class="ident" id="6399371">name</span>&nbsp;<span class="builtintype" id="6399376">string</span><span class="op" id="6399382">)</span>&nbsp;<span class="op" id="6399384">(</span><span class="op" id="6399385">*</span><span class="ident" id="6399386">File</span><span class="op" id="6399390">,</span>&nbsp;<span class="builtintype" id="6399392">error</span><span class="op" id="6399397">)</span>&nbsp;<span class="op" id="6399399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399402">f</span><span class="op" id="6399403">,</span>&nbsp;<span class="ident" id="6399405">err</span>&nbsp;<span class="op" id="6399409">:=</span>&nbsp;<span class="ident" id="6399412">os</span><span class="op" id="6399414">.</span><span class="ident" id="6399415">Open</span><span class="op" id="6399419">(</span><span class="ident" id="6399420">name</span><span class="op" id="6399424">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399427">if</span>&nbsp;<span class="ident" id="6399430">err</span>&nbsp;<span class="op" id="6399434">!=</span>&nbsp;<span class="builtintype" id="6399437">nil</span>&nbsp;<span class="op" id="6399441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399445">return</span>&nbsp;<span class="builtintype" id="6399452">nil</span><span class="op" id="6399455">,</span>&nbsp;<span class="ident" id="6399457">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6399462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399465">ff</span><span class="op" id="6399467">,</span>&nbsp;<span class="ident" id="6399469">err</span>&nbsp;<span class="op" id="6399473">:=</span>&nbsp;<span class="ident" id="6399476">NewFile</span><span class="op" id="6399483">(</span><span class="ident" id="6399484">f</span><span class="op" id="6399485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399488">if</span>&nbsp;<span class="ident" id="6399491">err</span>&nbsp;<span class="op" id="6399495">!=</span>&nbsp;<span class="builtintype" id="6399498">nil</span>&nbsp;<span class="op" id="6399502">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399506">f</span><span class="op" id="6399507">.</span><span class="ident" id="6399508">Close</span><span class="op" id="6399513">(</span><span class="op" id="6399514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399518">return</span>&nbsp;<span class="builtintype" id="6399525">nil</span><span class="op" id="6399528">,</span>&nbsp;<span class="ident" id="6399530">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6399535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399538">ff</span><span class="op" id="6399540">.</span><span class="ident" id="6399541">closer</span>&nbsp;<span class="op" id="6399548">=</span>&nbsp;<span class="ident" id="6399550">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399553">return</span>&nbsp;<span class="ident" id="6399560">ff</span><span class="op" id="6399562">,</span>&nbsp;<span class="builtintype" id="6399564">nil</span><br>
<span class="lineno">110</span><span class="op" id="6399568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6399571">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6399597">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6399664">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">115</span><span class="keyword" id="6399688">func</span>&nbsp;<span class="op" id="6399693">(</span><span class="ident" id="6399694">f</span>&nbsp;<span class="op" id="6399696">*</span><span class="ident" id="6399697">File</span><span class="op" id="6399701">)</span>&nbsp;<span class="ident" id="6399703">Close</span><span class="op" id="6399708">(</span><span class="op" id="6399709">)</span>&nbsp;<span class="builtintype" id="6399711">error</span>&nbsp;<span class="op" id="6399717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399720">var</span>&nbsp;<span class="ident" id="6399724">err</span>&nbsp;<span class="builtintype" id="6399728">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399735">if</span>&nbsp;<span class="ident" id="6399738">f</span><span class="op" id="6399739">.</span><span class="ident" id="6399740">closer</span>&nbsp;<span class="op" id="6399747">!=</span>&nbsp;<span class="builtintype" id="6399750">nil</span>&nbsp;<span class="op" id="6399754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399758">err</span>&nbsp;<span class="op" id="6399762">=</span>&nbsp;<span class="ident" id="6399764">f</span><span class="op" id="6399765">.</span><span class="ident" id="6399766">closer</span><span class="op" id="6399772">.</span><span class="ident" id="6399773">Close</span><span class="op" id="6399778">(</span><span class="op" id="6399779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399783">f</span><span class="op" id="6399784">.</span><span class="ident" id="6399785">closer</span>&nbsp;<span class="op" id="6399792">=</span>&nbsp;<span class="builtintype" id="6399794">nil</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6399799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399802">return</span>&nbsp;<span class="ident" id="6399809">err</span><br>
<span class="lineno"></span><span class="op" id="6399813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6399816">func</span>&nbsp;<span class="ident" id="6399821">parseMagic</span><span class="op" id="6399831">(</span><span class="ident" id="6399832">magic</span>&nbsp;<span class="op" id="6399838">[</span><span class="op" id="6399839">]</span><span class="builtintype" id="6399840">byte</span><span class="op" id="6399844">)</span>&nbsp;<span class="op" id="6399846">(</span><span class="builtintype" id="6399847">uint32</span><span class="op" id="6399853">,</span>&nbsp;<span class="builtintype" id="6399855">error</span><span class="op" id="6399860">)</span>&nbsp;<span class="op" id="6399862">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6399865">m</span>&nbsp;<span class="op" id="6399867">:=</span>&nbsp;<span class="ident" id="6399870">binary</span><span class="op" id="6399876">.</span><span class="ident" id="6399877">BigEndian</span><span class="op" id="6399886">.</span><span class="ident" id="6399887">Uint32</span><span class="op" id="6399893">(</span><span class="ident" id="6399894">magic</span><span class="op" id="6399899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399902">switch</span>&nbsp;<span class="ident" id="6399909">m</span>&nbsp;<span class="op" id="6399911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399914">case</span>&nbsp;<span class="ident" id="6399919">Magic386</span><span class="op" id="6399927">,</span>&nbsp;<span class="ident" id="6399929">MagicAMD64</span><span class="op" id="6399939">,</span>&nbsp;<span class="ident" id="6399941">MagicARM</span><span class="op" id="6399949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399953">return</span>&nbsp;<span class="ident" id="6399960">m</span><span class="op" id="6399961">,</span>&nbsp;<span class="builtintype" id="6399963">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6399968">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6399971">return</span>&nbsp;<span class="num" id="6399978">0</span><span class="op" id="6399979">,</span>&nbsp;<span class="op" id="6399981">&amp;</span><span class="ident" id="6399982">formatError</span><span class="op" id="6399993">{</span><span class="num" id="6399994">0</span><span class="op" id="6399995">,</span>&nbsp;<span class="string" id="6399997">&#34;bad&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6400015">,</span>&nbsp;<span class="ident" id="6400017">magic</span><span class="op" id="6400022">}</span><br>
<span class="lineno"></span><span class="op" id="6400024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6400027">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno"></span><span class="comment" id="6400112">//&nbsp;The&nbsp;Plan&nbsp;9&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno">135</span><span class="keyword" id="6400185">func</span>&nbsp;<span class="ident" id="6400190">NewFile</span><span class="op" id="6400197">(</span><span class="ident" id="6400198">r</span>&nbsp;<span class="ident" id="6400200">io</span><span class="op" id="6400202">.</span><span class="ident" id="6400203">ReaderAt</span><span class="op" id="6400211">)</span>&nbsp;<span class="op" id="6400213">(</span><span class="op" id="6400214">*</span><span class="ident" id="6400215">File</span><span class="op" id="6400219">,</span>&nbsp;<span class="builtintype" id="6400221">error</span><span class="op" id="6400226">)</span>&nbsp;<span class="op" id="6400228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400231">sr</span>&nbsp;<span class="op" id="6400234">:=</span>&nbsp;<span class="ident" id="6400237">io</span><span class="op" id="6400239">.</span><span class="ident" id="6400240">NewSectionReader</span><span class="op" id="6400256">(</span><span class="ident" id="6400257">r</span><span class="op" id="6400258">,</span>&nbsp;<span class="num" id="6400260">0</span><span class="op" id="6400261">,</span>&nbsp;<span class="num" id="6400263">1</span><span class="op" id="6400264">&lt;&lt;</span><span class="num" id="6400266">63</span><span class="op" id="6400268">-</span><span class="num" id="6400269">1</span><span class="op" id="6400270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6400273">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Plan&nbsp;9&nbsp;magic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400306">var</span>&nbsp;<span class="ident" id="6400310">magic</span>&nbsp;<span class="op" id="6400316">[</span><span class="num" id="6400317">4</span><span class="op" id="6400318">]</span><span class="builtintype" id="6400319">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400325">if</span>&nbsp;<span class="ident" id="6400328">_</span><span class="op" id="6400329">,</span>&nbsp;<span class="ident" id="6400331">err</span>&nbsp;<span class="op" id="6400335">:=</span>&nbsp;<span class="ident" id="6400338">r</span><span class="op" id="6400339">.</span><span class="ident" id="6400340">ReadAt</span><span class="op" id="6400346">(</span><span class="ident" id="6400347">magic</span><span class="op" id="6400352">[</span><span class="op" id="6400353">:</span><span class="op" id="6400354">]</span><span class="op" id="6400355">,</span>&nbsp;<span class="num" id="6400357">0</span><span class="op" id="6400358">)</span><span class="op" id="6400359">;</span>&nbsp;<span class="ident" id="6400361">err</span>&nbsp;<span class="op" id="6400365">!=</span>&nbsp;<span class="builtintype" id="6400368">nil</span>&nbsp;<span class="op" id="6400372">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400376">return</span>&nbsp;<span class="builtintype" id="6400383">nil</span><span class="op" id="6400386">,</span>&nbsp;<span class="ident" id="6400388">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400396">_</span><span class="op" id="6400397">,</span>&nbsp;<span class="ident" id="6400399">err</span>&nbsp;<span class="op" id="6400403">:=</span>&nbsp;<span class="ident" id="6400406">parseMagic</span><span class="op" id="6400416">(</span><span class="ident" id="6400417">magic</span><span class="op" id="6400422">[</span><span class="op" id="6400423">:</span><span class="op" id="6400424">]</span><span class="op" id="6400425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400428">if</span>&nbsp;<span class="ident" id="6400431">err</span>&nbsp;<span class="op" id="6400435">!=</span>&nbsp;<span class="builtintype" id="6400438">nil</span>&nbsp;<span class="op" id="6400442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400446">return</span>&nbsp;<span class="builtintype" id="6400453">nil</span><span class="op" id="6400456">,</span>&nbsp;<span class="ident" id="6400458">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400467">ph</span>&nbsp;<span class="op" id="6400470">:=</span>&nbsp;<span class="builtinfunc" id="6400473">new</span><span class="op" id="6400476">(</span><span class="ident" id="6400477">prog</span><span class="op" id="6400481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400484">if</span>&nbsp;<span class="ident" id="6400487">err</span>&nbsp;<span class="op" id="6400491">:=</span>&nbsp;<span class="ident" id="6400494">binary</span><span class="op" id="6400500">.</span><span class="ident" id="6400501">Read</span><span class="op" id="6400505">(</span><span class="ident" id="6400506">sr</span><span class="op" id="6400508">,</span>&nbsp;<span class="ident" id="6400510">binary</span><span class="op" id="6400516">.</span><span class="ident" id="6400517">BigEndian</span><span class="op" id="6400526">,</span>&nbsp;<span class="ident" id="6400528">ph</span><span class="op" id="6400530">)</span><span class="op" id="6400531">;</span>&nbsp;<span class="ident" id="6400533">err</span>&nbsp;<span class="op" id="6400537">!=</span>&nbsp;<span class="builtintype" id="6400540">nil</span>&nbsp;<span class="op" id="6400544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400548">return</span>&nbsp;<span class="builtintype" id="6400555">nil</span><span class="op" id="6400558">,</span>&nbsp;<span class="ident" id="6400560">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400569">f</span>&nbsp;<span class="op" id="6400571">:=</span>&nbsp;<span class="op" id="6400574">&amp;</span><span class="ident" id="6400575">File</span><span class="op" id="6400579">{</span><span class="ident" id="6400580">FileHeader</span><span class="op" id="6400590">:</span>&nbsp;<span class="ident" id="6400592">FileHeader</span><span class="op" id="6400602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400606">Magic</span><span class="op" id="6400611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400619">ph</span><span class="op" id="6400621">.</span><span class="ident" id="6400622">Magic</span><span class="op" id="6400627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400631">Bss</span><span class="op" id="6400634">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400644">ph</span><span class="op" id="6400646">.</span><span class="ident" id="6400647">Bss</span><span class="op" id="6400650">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400654">Entry</span><span class="op" id="6400659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400667">uint64</span><span class="op" id="6400673">(</span><span class="ident" id="6400674">ph</span><span class="op" id="6400676">.</span><span class="ident" id="6400677">Entry</span><span class="op" id="6400682">)</span><span class="op" id="6400683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400687">PtrSize</span><span class="op" id="6400694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6400700">4</span><span class="op" id="6400701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400705">LoadAddress</span><span class="op" id="6400716">:</span>&nbsp;<span class="num" id="6400718">0x1000</span><span class="op" id="6400724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400728">HdrSize</span><span class="op" id="6400735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6400741">4</span>&nbsp;<span class="op" id="6400743">*</span>&nbsp;<span class="num" id="6400745">8</span><span class="op" id="6400746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400749">}</span><span class="op" id="6400750">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400754">if</span>&nbsp;<span class="ident" id="6400757">ph</span><span class="op" id="6400759">.</span><span class="ident" id="6400760">Magic</span><span class="op" id="6400765">&amp;</span><span class="ident" id="6400766">Magic64</span>&nbsp;<span class="op" id="6400774">!=</span>&nbsp;<span class="num" id="6400777">0</span>&nbsp;<span class="op" id="6400779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400783">if</span>&nbsp;<span class="ident" id="6400786">err</span>&nbsp;<span class="op" id="6400790">:=</span>&nbsp;<span class="ident" id="6400793">binary</span><span class="op" id="6400799">.</span><span class="ident" id="6400800">Read</span><span class="op" id="6400804">(</span><span class="ident" id="6400805">sr</span><span class="op" id="6400807">,</span>&nbsp;<span class="ident" id="6400809">binary</span><span class="op" id="6400815">.</span><span class="ident" id="6400816">BigEndian</span><span class="op" id="6400825">,</span>&nbsp;<span class="op" id="6400827">&amp;</span><span class="ident" id="6400828">f</span><span class="op" id="6400829">.</span><span class="ident" id="6400830">Entry</span><span class="op" id="6400835">)</span><span class="op" id="6400836">;</span>&nbsp;<span class="ident" id="6400838">err</span>&nbsp;<span class="op" id="6400842">!=</span>&nbsp;<span class="builtintype" id="6400845">nil</span>&nbsp;<span class="op" id="6400849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400854">return</span>&nbsp;<span class="builtintype" id="6400861">nil</span><span class="op" id="6400864">,</span>&nbsp;<span class="ident" id="6400866">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400872">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400876">f</span><span class="op" id="6400877">.</span><span class="ident" id="6400878">PtrSize</span>&nbsp;<span class="op" id="6400886">=</span>&nbsp;<span class="num" id="6400888">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400892">f</span><span class="op" id="6400893">.</span><span class="ident" id="6400894">LoadAddress</span>&nbsp;<span class="op" id="6400906">=</span>&nbsp;<span class="num" id="6400908">0x200000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400919">f</span><span class="op" id="6400920">.</span><span class="ident" id="6400921">HdrSize</span>&nbsp;<span class="op" id="6400929">+=</span>&nbsp;<span class="num" id="6400932">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6400939">var</span>&nbsp;<span class="ident" id="6400943">sects</span>&nbsp;<span class="op" id="6400949">=</span>&nbsp;<span class="op" id="6400951">[</span><span class="op" id="6400952">]</span><span class="keyword" id="6400953">struct</span>&nbsp;<span class="op" id="6400960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400964">name</span>&nbsp;<span class="builtintype" id="6400969">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6400978">size</span>&nbsp;<span class="builtintype" id="6400983">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400991">}</span><span class="op" id="6400992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6400996">{</span><span class="string" id="6400997">&#34;text&#34;</span><span class="op" id="6401003">,</span>&nbsp;<span class="ident" id="6401005">ph</span><span class="op" id="6401007">.</span><span class="ident" id="6401008">Text</span><span class="op" id="6401012">}</span><span class="op" id="6401013">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401017">{</span><span class="string" id="6401018">&#34;data&#34;</span><span class="op" id="6401024">,</span>&nbsp;<span class="ident" id="6401026">ph</span><span class="op" id="6401028">.</span><span class="ident" id="6401029">Data</span><span class="op" id="6401033">}</span><span class="op" id="6401034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401038">{</span><span class="string" id="6401039">&#34;syms&#34;</span><span class="op" id="6401045">,</span>&nbsp;<span class="ident" id="6401047">ph</span><span class="op" id="6401049">.</span><span class="ident" id="6401050">Syms</span><span class="op" id="6401054">}</span><span class="op" id="6401055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401059">{</span><span class="string" id="6401060">&#34;spsz&#34;</span><span class="op" id="6401066">,</span>&nbsp;<span class="ident" id="6401068">ph</span><span class="op" id="6401070">.</span><span class="ident" id="6401071">Spsz</span><span class="op" id="6401075">}</span><span class="op" id="6401076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401080">{</span><span class="string" id="6401081">&#34;pcsz&#34;</span><span class="op" id="6401087">,</span>&nbsp;<span class="ident" id="6401089">ph</span><span class="op" id="6401091">.</span><span class="ident" id="6401092">Pcsz</span><span class="op" id="6401096">}</span><span class="op" id="6401097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401100">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401104">f</span><span class="op" id="6401105">.</span><span class="ident" id="6401106">Sections</span>&nbsp;<span class="op" id="6401115">=</span>&nbsp;<span class="builtinfunc" id="6401117">make</span><span class="op" id="6401121">(</span><span class="op" id="6401122">[</span><span class="op" id="6401123">]</span><span class="op" id="6401124">*</span><span class="ident" id="6401125">Section</span><span class="op" id="6401132">,</span>&nbsp;<span class="num" id="6401134">5</span><span class="op" id="6401135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401139">off</span>&nbsp;<span class="op" id="6401143">:=</span>&nbsp;<span class="builtintype" id="6401146">uint32</span><span class="op" id="6401152">(</span><span class="ident" id="6401153">f</span><span class="op" id="6401154">.</span><span class="ident" id="6401155">HdrSize</span><span class="op" id="6401162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401166">for</span>&nbsp;<span class="ident" id="6401170">i</span><span class="op" id="6401171">,</span>&nbsp;<span class="ident" id="6401173">sect</span>&nbsp;<span class="op" id="6401178">:=</span>&nbsp;<span class="keyword" id="6401181">range</span>&nbsp;<span class="ident" id="6401187">sects</span>&nbsp;<span class="op" id="6401193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401197">s</span>&nbsp;<span class="op" id="6401199">:=</span>&nbsp;<span class="builtinfunc" id="6401202">new</span><span class="op" id="6401205">(</span><span class="ident" id="6401206">Section</span><span class="op" id="6401213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401217">s</span><span class="op" id="6401218">.</span><span class="ident" id="6401219">SectionHeader</span>&nbsp;<span class="op" id="6401233">=</span>&nbsp;<span class="ident" id="6401235">SectionHeader</span><span class="op" id="6401248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401253">Name</span><span class="op" id="6401257">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6401261">sect</span><span class="op" id="6401265">.</span><span class="ident" id="6401266">name</span><span class="op" id="6401270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401275">Size</span><span class="op" id="6401279">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6401283">sect</span><span class="op" id="6401287">.</span><span class="ident" id="6401288">size</span><span class="op" id="6401292">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401297">Offset</span><span class="op" id="6401303">:</span>&nbsp;<span class="ident" id="6401305">off</span><span class="op" id="6401308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401316">off</span>&nbsp;<span class="op" id="6401320">+=</span>&nbsp;<span class="ident" id="6401323">sect</span><span class="op" id="6401327">.</span><span class="ident" id="6401328">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401335">s</span><span class="op" id="6401336">.</span><span class="ident" id="6401337">sr</span>&nbsp;<span class="op" id="6401340">=</span>&nbsp;<span class="ident" id="6401342">io</span><span class="op" id="6401344">.</span><span class="ident" id="6401345">NewSectionReader</span><span class="op" id="6401361">(</span><span class="ident" id="6401362">r</span><span class="op" id="6401363">,</span>&nbsp;<span class="ident" id="6401365">int64</span><span class="op" id="6401370">(</span><span class="ident" id="6401371">s</span><span class="op" id="6401372">.</span><span class="ident" id="6401373">Offset</span><span class="op" id="6401379">)</span><span class="op" id="6401380">,</span>&nbsp;<span class="ident" id="6401382">int64</span><span class="op" id="6401387">(</span><span class="ident" id="6401388">s</span><span class="op" id="6401389">.</span><span class="ident" id="6401390">Size</span><span class="op" id="6401394">)</span><span class="op" id="6401395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401399">s</span><span class="op" id="6401400">.</span><span class="ident" id="6401401">ReaderAt</span>&nbsp;<span class="op" id="6401410">=</span>&nbsp;<span class="ident" id="6401412">s</span><span class="op" id="6401413">.</span><span class="ident" id="6401414">sr</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401419">f</span><span class="op" id="6401420">.</span><span class="ident" id="6401421">Sections</span><span class="op" id="6401429">[</span><span class="ident" id="6401430">i</span><span class="op" id="6401431">]</span>&nbsp;<span class="op" id="6401433">=</span>&nbsp;<span class="ident" id="6401435">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401442">return</span>&nbsp;<span class="ident" id="6401449">f</span><span class="op" id="6401450">,</span>&nbsp;<span class="builtintype" id="6401452">nil</span><br>
<span class="lineno"></span><span class="op" id="6401456">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="6401459">func</span>&nbsp;<span class="ident" id="6401464">walksymtab</span><span class="op" id="6401474">(</span><span class="ident" id="6401475">data</span>&nbsp;<span class="op" id="6401480">[</span><span class="op" id="6401481">]</span><span class="builtintype" id="6401482">byte</span><span class="op" id="6401486">,</span>&nbsp;<span class="ident" id="6401488">ptrsz</span>&nbsp;<span class="builtintype" id="6401494">int</span><span class="op" id="6401497">,</span>&nbsp;<span class="ident" id="6401499">fn</span>&nbsp;<span class="keyword" id="6401502">func</span><span class="op" id="6401506">(</span><span class="ident" id="6401507">sym</span><span class="op" id="6401510">)</span>&nbsp;<span class="builtintype" id="6401512">error</span><span class="op" id="6401517">)</span>&nbsp;<span class="builtintype" id="6401519">error</span>&nbsp;<span class="op" id="6401525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401528">var</span>&nbsp;<span class="ident" id="6401532">order</span>&nbsp;<span class="ident" id="6401538">binary</span><span class="op" id="6401544">.</span><span class="ident" id="6401545">ByteOrder</span>&nbsp;<span class="op" id="6401555">=</span>&nbsp;<span class="ident" id="6401557">binary</span><span class="op" id="6401563">.</span><span class="ident" id="6401564">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401575">var</span>&nbsp;<span class="ident" id="6401579">s</span>&nbsp;<span class="ident" id="6401581">sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401586">p</span>&nbsp;<span class="op" id="6401588">:=</span>&nbsp;<span class="ident" id="6401591">data</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401597">for</span>&nbsp;<span class="builtinfunc" id="6401601">len</span><span class="op" id="6401604">(</span><span class="ident" id="6401605">p</span><span class="op" id="6401606">)</span>&nbsp;<span class="op" id="6401608">&gt;=</span>&nbsp;<span class="num" id="6401611">4</span>&nbsp;<span class="op" id="6401613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6401617">//&nbsp;Symbol&nbsp;type,&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401642">if</span>&nbsp;<span class="builtinfunc" id="6401645">len</span><span class="op" id="6401648">(</span><span class="ident" id="6401649">p</span><span class="op" id="6401650">)</span>&nbsp;<span class="op" id="6401652">&lt;</span>&nbsp;<span class="ident" id="6401654">ptrsz</span>&nbsp;<span class="op" id="6401660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401665">return</span>&nbsp;<span class="op" id="6401672">&amp;</span><span class="ident" id="6401673">formatError</span><span class="op" id="6401684">{</span><span class="builtinfunc" id="6401685">len</span><span class="op" id="6401688">(</span><span class="ident" id="6401689">data</span><span class="op" id="6401693">)</span><span class="op" id="6401694">,</span>&nbsp;<span class="string" id="6401696">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="6401712">,</span>&nbsp;<span class="builtintype" id="6401714">nil</span><span class="op" id="6401717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401721">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6401725">//&nbsp;fixed-width&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401748">if</span>&nbsp;<span class="ident" id="6401751">ptrsz</span>&nbsp;<span class="op" id="6401757">==</span>&nbsp;<span class="num" id="6401760">8</span>&nbsp;<span class="op" id="6401762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401767">s</span><span class="op" id="6401768">.</span><span class="ident" id="6401769">value</span>&nbsp;<span class="op" id="6401775">=</span>&nbsp;<span class="ident" id="6401777">order</span><span class="op" id="6401782">.</span><span class="ident" id="6401783">Uint64</span><span class="op" id="6401789">(</span><span class="ident" id="6401790">p</span><span class="op" id="6401791">[</span><span class="num" id="6401792">0</span><span class="op" id="6401793">:</span><span class="num" id="6401794">8</span><span class="op" id="6401795">]</span><span class="op" id="6401796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401801">p</span>&nbsp;<span class="op" id="6401803">=</span>&nbsp;<span class="ident" id="6401805">p</span><span class="op" id="6401806">[</span><span class="num" id="6401807">8</span><span class="op" id="6401808">:</span><span class="op" id="6401809">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401813">}</span>&nbsp;<span class="keyword" id="6401815">else</span>&nbsp;<span class="op" id="6401820">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401825">s</span><span class="op" id="6401826">.</span><span class="ident" id="6401827">value</span>&nbsp;<span class="op" id="6401833">=</span>&nbsp;<span class="ident" id="6401835">uint64</span><span class="op" id="6401841">(</span><span class="ident" id="6401842">order</span><span class="op" id="6401847">.</span><span class="ident" id="6401848">Uint32</span><span class="op" id="6401854">(</span><span class="ident" id="6401855">p</span><span class="op" id="6401856">[</span><span class="num" id="6401857">0</span><span class="op" id="6401858">:</span><span class="num" id="6401859">4</span><span class="op" id="6401860">]</span><span class="op" id="6401861">)</span><span class="op" id="6401862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401867">p</span>&nbsp;<span class="op" id="6401869">=</span>&nbsp;<span class="ident" id="6401871">p</span><span class="op" id="6401872">[</span><span class="num" id="6401873">4</span><span class="op" id="6401874">:</span><span class="op" id="6401875">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6401879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401884">var</span>&nbsp;<span class="ident" id="6401888">typ</span>&nbsp;<span class="builtintype" id="6401892">byte</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401899">typ</span>&nbsp;<span class="op" id="6401903">=</span>&nbsp;<span class="ident" id="6401905">p</span><span class="op" id="6401906">[</span><span class="num" id="6401907">0</span><span class="op" id="6401908">]</span>&nbsp;<span class="op" id="6401910">&amp;</span>&nbsp;<span class="num" id="6401912">0x7F</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401919">s</span><span class="op" id="6401920">.</span><span class="ident" id="6401921">typ</span>&nbsp;<span class="op" id="6401925">=</span>&nbsp;<span class="ident" id="6401927">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6401933">p</span>&nbsp;<span class="op" id="6401935">=</span>&nbsp;<span class="ident" id="6401937">p</span><span class="op" id="6401938">[</span><span class="num" id="6401939">1</span><span class="op" id="6401940">:</span><span class="op" id="6401941">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6401946">//&nbsp;Name.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401957">var</span>&nbsp;<span class="ident" id="6401961">i</span>&nbsp;<span class="builtintype" id="6401963">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401969">var</span>&nbsp;<span class="ident" id="6401973">nnul</span>&nbsp;<span class="builtintype" id="6401978">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6401984">for</span>&nbsp;<span class="ident" id="6401988">i</span>&nbsp;<span class="op" id="6401990">=</span>&nbsp;<span class="num" id="6401992">0</span><span class="op" id="6401993">;</span>&nbsp;<span class="ident" id="6401995">i</span>&nbsp;<span class="op" id="6401997">&lt;</span>&nbsp;<span class="builtinfunc" id="6401999">len</span><span class="op" id="6402002">(</span><span class="ident" id="6402003">p</span><span class="op" id="6402004">)</span><span class="op" id="6402005">;</span>&nbsp;<span class="ident" id="6402007">i</span><span class="op" id="6402008">++</span>&nbsp;<span class="op" id="6402011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402016">if</span>&nbsp;<span class="ident" id="6402019">p</span><span class="op" id="6402020">[</span><span class="ident" id="6402021">i</span><span class="op" id="6402022">]</span>&nbsp;<span class="op" id="6402024">==</span>&nbsp;<span class="num" id="6402027">0</span>&nbsp;<span class="op" id="6402029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402035">nnul</span>&nbsp;<span class="op" id="6402040">=</span>&nbsp;<span class="num" id="6402042">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402048">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402065">switch</span>&nbsp;<span class="ident" id="6402072">typ</span>&nbsp;<span class="op" id="6402076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402080">case</span>&nbsp;<span class="string" id="6402085">&#39;z&#39;</span><span class="op" id="6402088">,</span>&nbsp;<span class="string" id="6402090">&#39;Z&#39;</span><span class="op" id="6402093">:</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402098">p</span>&nbsp;<span class="op" id="6402100">=</span>&nbsp;<span class="ident" id="6402102">p</span><span class="op" id="6402103">[</span><span class="ident" id="6402104">i</span><span class="op" id="6402105">+</span><span class="ident" id="6402106">nnul</span><span class="op" id="6402110">:</span><span class="op" id="6402111">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402116">for</span>&nbsp;<span class="ident" id="6402120">i</span>&nbsp;<span class="op" id="6402122">=</span>&nbsp;<span class="num" id="6402124">0</span><span class="op" id="6402125">;</span>&nbsp;<span class="ident" id="6402127">i</span><span class="op" id="6402128">+</span><span class="num" id="6402129">2</span>&nbsp;<span class="op" id="6402131">&lt;=</span>&nbsp;<span class="builtinfunc" id="6402134">len</span><span class="op" id="6402137">(</span><span class="ident" id="6402138">p</span><span class="op" id="6402139">)</span><span class="op" id="6402140">;</span>&nbsp;<span class="ident" id="6402142">i</span>&nbsp;<span class="op" id="6402144">+=</span>&nbsp;<span class="num" id="6402147">2</span>&nbsp;<span class="op" id="6402149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402155">if</span>&nbsp;<span class="ident" id="6402158">p</span><span class="op" id="6402159">[</span><span class="ident" id="6402160">i</span><span class="op" id="6402161">]</span>&nbsp;<span class="op" id="6402163">==</span>&nbsp;<span class="num" id="6402166">0</span>&nbsp;<span class="op" id="6402168">&amp;&amp;</span>&nbsp;<span class="ident" id="6402171">p</span><span class="op" id="6402172">[</span><span class="ident" id="6402173">i</span><span class="op" id="6402174">+</span><span class="num" id="6402175">1</span><span class="op" id="6402176">]</span>&nbsp;<span class="op" id="6402178">==</span>&nbsp;<span class="num" id="6402181">0</span>&nbsp;<span class="op" id="6402183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402190">nnul</span>&nbsp;<span class="op" id="6402195">=</span>&nbsp;<span class="num" id="6402197">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402204">break</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402227">if</span>&nbsp;<span class="builtinfunc" id="6402230">len</span><span class="op" id="6402233">(</span><span class="ident" id="6402234">p</span><span class="op" id="6402235">)</span>&nbsp;<span class="op" id="6402237">&lt;</span>&nbsp;<span class="ident" id="6402239">i</span><span class="op" id="6402240">+</span><span class="ident" id="6402241">nnul</span>&nbsp;<span class="op" id="6402246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402251">return</span>&nbsp;<span class="op" id="6402258">&amp;</span><span class="ident" id="6402259">formatError</span><span class="op" id="6402270">{</span><span class="builtinfunc" id="6402271">len</span><span class="op" id="6402274">(</span><span class="ident" id="6402275">data</span><span class="op" id="6402279">)</span><span class="op" id="6402280">,</span>&nbsp;<span class="string" id="6402282">&#34;unexpected&nbsp;EOF&#34;</span><span class="op" id="6402298">,</span>&nbsp;<span class="builtintype" id="6402300">nil</span><span class="op" id="6402303">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402311">s</span><span class="op" id="6402312">.</span><span class="ident" id="6402313">name</span>&nbsp;<span class="op" id="6402318">=</span>&nbsp;<span class="ident" id="6402320">p</span><span class="op" id="6402321">[</span><span class="num" id="6402322">0</span><span class="op" id="6402323">:</span><span class="ident" id="6402324">i</span><span class="op" id="6402325">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402329">i</span>&nbsp;<span class="op" id="6402331">+=</span>&nbsp;<span class="ident" id="6402334">nnul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402341">p</span>&nbsp;<span class="op" id="6402343">=</span>&nbsp;<span class="ident" id="6402345">p</span><span class="op" id="6402346">[</span><span class="ident" id="6402347">i</span><span class="op" id="6402348">:</span><span class="op" id="6402349">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402354">fn</span><span class="op" id="6402356">(</span><span class="ident" id="6402357">s</span><span class="op" id="6402358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402364">return</span>&nbsp;<span class="builtintype" id="6402371">nil</span><br>
<span class="lineno"></span><span class="op" id="6402375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="comment" id="6402378">//&nbsp;NewTable&nbsp;decodes&nbsp;the&nbsp;Go&nbsp;symbol&nbsp;table&nbsp;in&nbsp;data,</span><br>
<span class="lineno"></span><span class="comment" id="6402427">//&nbsp;returning&nbsp;an&nbsp;in-memory&nbsp;representation.</span><br>
<span class="lineno"></span><span class="keyword" id="6402469">func</span>&nbsp;<span class="ident" id="6402474">newTable</span><span class="op" id="6402482">(</span><span class="ident" id="6402483">symtab</span>&nbsp;<span class="op" id="6402490">[</span><span class="op" id="6402491">]</span><span class="builtintype" id="6402492">byte</span><span class="op" id="6402496">,</span>&nbsp;<span class="ident" id="6402498">ptrsz</span>&nbsp;<span class="builtintype" id="6402504">int</span><span class="op" id="6402507">)</span>&nbsp;<span class="op" id="6402509">(</span><span class="op" id="6402510">[</span><span class="op" id="6402511">]</span><span class="ident" id="6402512">Sym</span><span class="op" id="6402515">,</span>&nbsp;<span class="builtintype" id="6402517">error</span><span class="op" id="6402522">)</span>&nbsp;<span class="op" id="6402524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402527">var</span>&nbsp;<span class="ident" id="6402531">n</span>&nbsp;<span class="builtintype" id="6402533">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402538">err</span>&nbsp;<span class="op" id="6402542">:=</span>&nbsp;<span class="ident" id="6402545">walksymtab</span><span class="op" id="6402555">(</span><span class="ident" id="6402556">symtab</span><span class="op" id="6402562">,</span>&nbsp;<span class="ident" id="6402564">ptrsz</span><span class="op" id="6402569">,</span>&nbsp;<span class="keyword" id="6402571">func</span><span class="op" id="6402575">(</span><span class="ident" id="6402576">s</span>&nbsp;<span class="ident" id="6402578">sym</span><span class="op" id="6402581">)</span>&nbsp;<span class="builtintype" id="6402583">error</span>&nbsp;<span class="op" id="6402589">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402593">n</span><span class="op" id="6402594">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402599">return</span>&nbsp;<span class="builtintype" id="6402606">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402611">}</span><span class="op" id="6402612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402615">if</span>&nbsp;<span class="ident" id="6402618">err</span>&nbsp;<span class="op" id="6402622">!=</span>&nbsp;<span class="builtintype" id="6402625">nil</span>&nbsp;<span class="op" id="6402629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402633">return</span>&nbsp;<span class="builtintype" id="6402640">nil</span><span class="op" id="6402643">,</span>&nbsp;<span class="ident" id="6402645">err</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6402650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402654">fname</span>&nbsp;<span class="op" id="6402660">:=</span>&nbsp;<span class="builtinfunc" id="6402663">make</span><span class="op" id="6402667">(</span><span class="keyword" id="6402668">map</span><span class="op" id="6402671">[</span><span class="builtintype" id="6402672">uint16</span><span class="op" id="6402678">]</span><span class="builtintype" id="6402679">string</span><span class="op" id="6402685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402688">syms</span>&nbsp;<span class="op" id="6402693">:=</span>&nbsp;<span class="builtinfunc" id="6402696">make</span><span class="op" id="6402700">(</span><span class="op" id="6402701">[</span><span class="op" id="6402702">]</span><span class="ident" id="6402703">Sym</span><span class="op" id="6402706">,</span>&nbsp;<span class="num" id="6402708">0</span><span class="op" id="6402709">,</span>&nbsp;<span class="ident" id="6402711">n</span><span class="op" id="6402712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402715">err</span>&nbsp;<span class="op" id="6402719">=</span>&nbsp;<span class="ident" id="6402721">walksymtab</span><span class="op" id="6402731">(</span><span class="ident" id="6402732">symtab</span><span class="op" id="6402738">,</span>&nbsp;<span class="ident" id="6402740">ptrsz</span><span class="op" id="6402745">,</span>&nbsp;<span class="keyword" id="6402747">func</span><span class="op" id="6402751">(</span><span class="ident" id="6402752">s</span>&nbsp;<span class="ident" id="6402754">sym</span><span class="op" id="6402757">)</span>&nbsp;<span class="builtintype" id="6402759">error</span>&nbsp;<span class="op" id="6402765">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402769">n</span>&nbsp;<span class="op" id="6402771">:=</span>&nbsp;<span class="builtinfunc" id="6402774">len</span><span class="op" id="6402777">(</span><span class="ident" id="6402778">syms</span><span class="op" id="6402782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402786">syms</span>&nbsp;<span class="op" id="6402791">=</span>&nbsp;<span class="ident" id="6402793">syms</span><span class="op" id="6402797">[</span><span class="num" id="6402798">0</span>&nbsp;<span class="op" id="6402800">:</span>&nbsp;<span class="ident" id="6402802">n</span><span class="op" id="6402803">+</span><span class="num" id="6402804">1</span><span class="op" id="6402805">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402809">ts</span>&nbsp;<span class="op" id="6402812">:=</span>&nbsp;<span class="op" id="6402815">&amp;</span><span class="ident" id="6402816">syms</span><span class="op" id="6402820">[</span><span class="ident" id="6402821">n</span><span class="op" id="6402822">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402826">ts</span><span class="op" id="6402828">.</span><span class="ident" id="6402829">Type</span>&nbsp;<span class="op" id="6402834">=</span>&nbsp;<span class="builtintype" id="6402836">rune</span><span class="op" id="6402840">(</span><span class="ident" id="6402841">s</span><span class="op" id="6402842">.</span><span class="ident" id="6402843">typ</span><span class="op" id="6402846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402850">ts</span><span class="op" id="6402852">.</span><span class="ident" id="6402853">Value</span>&nbsp;<span class="op" id="6402859">=</span>&nbsp;<span class="ident" id="6402861">s</span><span class="op" id="6402862">.</span><span class="ident" id="6402863">value</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402871">switch</span>&nbsp;<span class="ident" id="6402878">s</span><span class="op" id="6402879">.</span><span class="ident" id="6402880">typ</span>&nbsp;<span class="op" id="6402884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402888">default</span><span class="op" id="6402895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402900">ts</span><span class="op" id="6402902">.</span><span class="ident" id="6402903">Name</span>&nbsp;<span class="op" id="6402908">=</span>&nbsp;<span class="builtintype" id="6402910">string</span><span class="op" id="6402916">(</span><span class="ident" id="6402917">s</span><span class="op" id="6402918">.</span><span class="ident" id="6402919">name</span><span class="op" id="6402923">[</span><span class="op" id="6402924">:</span><span class="op" id="6402925">]</span><span class="op" id="6402926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402930">case</span>&nbsp;<span class="string" id="6402935">&#39;z&#39;</span><span class="op" id="6402938">,</span>&nbsp;<span class="string" id="6402940">&#39;Z&#39;</span><span class="op" id="6402943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6402948">for</span>&nbsp;<span class="ident" id="6402952">i</span>&nbsp;<span class="op" id="6402954">:=</span>&nbsp;<span class="num" id="6402957">0</span><span class="op" id="6402958">;</span>&nbsp;<span class="ident" id="6402960">i</span>&nbsp;<span class="op" id="6402962">&lt;</span>&nbsp;<span class="builtinfunc" id="6402964">len</span><span class="op" id="6402967">(</span><span class="ident" id="6402968">s</span><span class="op" id="6402969">.</span><span class="ident" id="6402970">name</span><span class="op" id="6402974">)</span><span class="op" id="6402975">;</span>&nbsp;<span class="ident" id="6402977">i</span>&nbsp;<span class="op" id="6402979">+=</span>&nbsp;<span class="num" id="6402982">2</span>&nbsp;<span class="op" id="6402984">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6402990">eltIdx</span>&nbsp;<span class="op" id="6402997">:=</span>&nbsp;<span class="ident" id="6403000">binary</span><span class="op" id="6403006">.</span><span class="ident" id="6403007">BigEndian</span><span class="op" id="6403016">.</span><span class="ident" id="6403017">Uint16</span><span class="op" id="6403023">(</span><span class="ident" id="6403024">s</span><span class="op" id="6403025">.</span><span class="ident" id="6403026">name</span><span class="op" id="6403030">[</span><span class="ident" id="6403031">i</span>&nbsp;<span class="op" id="6403033">:</span>&nbsp;<span class="ident" id="6403035">i</span><span class="op" id="6403036">+</span><span class="num" id="6403037">2</span><span class="op" id="6403038">]</span><span class="op" id="6403039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6403045">elt</span><span class="op" id="6403048">,</span>&nbsp;<span class="ident" id="6403050">ok</span>&nbsp;<span class="op" id="6403053">:=</span>&nbsp;<span class="ident" id="6403056">fname</span><span class="op" id="6403061">[</span><span class="ident" id="6403062">eltIdx</span><span class="op" id="6403068">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403074">if</span>&nbsp;<span class="op" id="6403077">!</span><span class="ident" id="6403078">ok</span>&nbsp;<span class="op" id="6403081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403088">return</span>&nbsp;<span class="op" id="6403095">&amp;</span><span class="ident" id="6403096">formatError</span><span class="op" id="6403107">{</span><span class="op" id="6403108">-</span><span class="num" id="6403109">1</span><span class="op" id="6403110">,</span>&nbsp;<span class="string" id="6403112">&#34;bad&nbsp;filename&nbsp;code&#34;</span><span class="op" id="6403131">,</span>&nbsp;<span class="ident" id="6403133">eltIdx</span><span class="op" id="6403139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403145">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403151">if</span>&nbsp;<span class="ident" id="6403154">n</span>&nbsp;<span class="op" id="6403156">:=</span>&nbsp;<span class="builtinfunc" id="6403159">len</span><span class="op" id="6403162">(</span><span class="ident" id="6403163">ts</span><span class="op" id="6403165">.</span><span class="ident" id="6403166">Name</span><span class="op" id="6403170">)</span><span class="op" id="6403171">;</span>&nbsp;<span class="ident" id="6403173">n</span>&nbsp;<span class="op" id="6403175">&gt;</span>&nbsp;<span class="num" id="6403177">0</span>&nbsp;<span class="op" id="6403179">&amp;&amp;</span>&nbsp;<span class="ident" id="6403182">ts</span><span class="op" id="6403184">.</span><span class="ident" id="6403185">Name</span><span class="op" id="6403189">[</span><span class="ident" id="6403190">n</span><span class="op" id="6403191">-</span><span class="num" id="6403192">1</span><span class="op" id="6403193">]</span>&nbsp;<span class="op" id="6403195">!=</span>&nbsp;<span class="string" id="6403198">&#39;/&#39;</span>&nbsp;<span class="op" id="6403202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6403209">ts</span><span class="op" id="6403211">.</span><span class="ident" id="6403212">Name</span>&nbsp;<span class="op" id="6403217">+=</span>&nbsp;<span class="string" id="6403220">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6403234">ts</span><span class="op" id="6403236">.</span><span class="ident" id="6403237">Name</span>&nbsp;<span class="op" id="6403242">+=</span>&nbsp;<span class="ident" id="6403245">elt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403252">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403260">switch</span>&nbsp;<span class="ident" id="6403267">s</span><span class="op" id="6403268">.</span><span class="ident" id="6403269">typ</span>&nbsp;<span class="op" id="6403273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403277">case</span>&nbsp;<span class="string" id="6403282">&#39;f&#39;</span><span class="op" id="6403285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6403290">fname</span><span class="op" id="6403295">[</span><span class="builtintype" id="6403296">uint16</span><span class="op" id="6403302">(</span><span class="ident" id="6403303">s</span><span class="op" id="6403304">.</span><span class="ident" id="6403305">value</span><span class="op" id="6403310">)</span><span class="op" id="6403311">]</span>&nbsp;<span class="op" id="6403313">=</span>&nbsp;<span class="ident" id="6403315">ts</span><span class="op" id="6403317">.</span><span class="ident" id="6403318">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403325">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403329">return</span>&nbsp;<span class="builtintype" id="6403336">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403341">}</span><span class="op" id="6403342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403345">if</span>&nbsp;<span class="ident" id="6403348">err</span>&nbsp;<span class="op" id="6403352">!=</span>&nbsp;<span class="builtintype" id="6403355">nil</span>&nbsp;<span class="op" id="6403359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403363">return</span>&nbsp;<span class="builtintype" id="6403370">nil</span><span class="op" id="6403373">,</span>&nbsp;<span class="ident" id="6403375">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403380">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403384">return</span>&nbsp;<span class="ident" id="6403391">syms</span><span class="op" id="6403395">,</span>&nbsp;<span class="builtintype" id="6403397">nil</span><br>
<span class="lineno"></span><span class="op" id="6403401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6403404">//&nbsp;Symbols&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;table&nbsp;for&nbsp;f.</span><br>
<span class="lineno">305</span><span class="keyword" id="6403447">func</span>&nbsp;<span class="op" id="6403452">(</span><span class="ident" id="6403453">f</span>&nbsp;<span class="op" id="6403455">*</span><span class="ident" id="6403456">File</span><span class="op" id="6403460">)</span>&nbsp;<span class="ident" id="6403462">Symbols</span><span class="op" id="6403469">(</span><span class="op" id="6403470">)</span>&nbsp;<span class="op" id="6403472">(</span><span class="op" id="6403473">[</span><span class="op" id="6403474">]</span><span class="ident" id="6403475">Sym</span><span class="op" id="6403478">,</span>&nbsp;<span class="builtintype" id="6403480">error</span><span class="op" id="6403485">)</span>&nbsp;<span class="op" id="6403487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6403490">symtabSection</span>&nbsp;<span class="op" id="6403504">:=</span>&nbsp;<span class="ident" id="6403507">f</span><span class="op" id="6403508">.</span><span class="ident" id="6403509">Section</span><span class="op" id="6403516">(</span><span class="string" id="6403517">&#34;syms&#34;</span><span class="op" id="6403523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403526">if</span>&nbsp;<span class="ident" id="6403529">symtabSection</span>&nbsp;<span class="op" id="6403543">==</span>&nbsp;<span class="builtintype" id="6403546">nil</span>&nbsp;<span class="op" id="6403550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403554">return</span>&nbsp;<span class="builtintype" id="6403561">nil</span><span class="op" id="6403564">,</span>&nbsp;<span class="ident" id="6403566">errors</span><span class="op" id="6403572">.</span><span class="ident" id="6403573">New</span><span class="op" id="6403576">(</span><span class="string" id="6403577">&#34;no&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="6403596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403599">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6403603">symtab</span><span class="op" id="6403609">,</span>&nbsp;<span class="ident" id="6403611">err</span>&nbsp;<span class="op" id="6403615">:=</span>&nbsp;<span class="ident" id="6403618">symtabSection</span><span class="op" id="6403631">.</span><span class="ident" id="6403632">Data</span><span class="op" id="6403636">(</span><span class="op" id="6403637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403640">if</span>&nbsp;<span class="ident" id="6403643">err</span>&nbsp;<span class="op" id="6403647">!=</span>&nbsp;<span class="builtintype" id="6403650">nil</span>&nbsp;<span class="op" id="6403654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403658">return</span>&nbsp;<span class="builtintype" id="6403665">nil</span><span class="op" id="6403668">,</span>&nbsp;<span class="ident" id="6403670">errors</span><span class="op" id="6403676">.</span><span class="ident" id="6403677">New</span><span class="op" id="6403680">(</span><span class="string" id="6403681">&#34;cannot&nbsp;load&nbsp;symbol&nbsp;section&#34;</span><span class="op" id="6403709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403712">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403716">return</span>&nbsp;<span class="ident" id="6403723">newTable</span><span class="op" id="6403731">(</span><span class="ident" id="6403732">symtab</span><span class="op" id="6403738">,</span>&nbsp;<span class="ident" id="6403740">f</span><span class="op" id="6403741">.</span><span class="ident" id="6403742">PtrSize</span><span class="op" id="6403749">)</span><br>
<span class="lineno"></span><span class="op" id="6403751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6403754">//&nbsp;Section&nbsp;returns&nbsp;a&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno">320</span><span class="comment" id="6403822">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6403841">func</span>&nbsp;<span class="op" id="6403846">(</span><span class="ident" id="6403847">f</span>&nbsp;<span class="op" id="6403849">*</span><span class="ident" id="6403850">File</span><span class="op" id="6403854">)</span>&nbsp;<span class="ident" id="6403856">Section</span><span class="op" id="6403863">(</span><span class="ident" id="6403864">name</span>&nbsp;<span class="builtintype" id="6403869">string</span><span class="op" id="6403875">)</span>&nbsp;<span class="op" id="6403877">*</span><span class="ident" id="6403878">Section</span>&nbsp;<span class="op" id="6403886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403889">for</span>&nbsp;<span class="ident" id="6403893">_</span><span class="op" id="6403894">,</span>&nbsp;<span class="ident" id="6403896">s</span>&nbsp;<span class="op" id="6403898">:=</span>&nbsp;<span class="keyword" id="6403901">range</span>&nbsp;<span class="ident" id="6403907">f</span><span class="op" id="6403908">.</span><span class="ident" id="6403909">Sections</span>&nbsp;<span class="op" id="6403918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403922">if</span>&nbsp;<span class="ident" id="6403925">s</span><span class="op" id="6403926">.</span><span class="ident" id="6403927">Name</span>&nbsp;<span class="op" id="6403932">==</span>&nbsp;<span class="ident" id="6403935">name</span>&nbsp;<span class="op" id="6403940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403945">return</span>&nbsp;<span class="ident" id="6403952">s</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6403959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6403962">return</span>&nbsp;<span class="builtintype" id="6403969">nil</span><br>
<span class="lineno"></span><span class="op" id="6403973">}</span>
</div>
</body>
</html>
