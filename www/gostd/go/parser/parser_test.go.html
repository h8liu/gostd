<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html" class="current">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8295499">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8295554">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8295608">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8295659">package</span>&nbsp;<span class="ident" id="8295667">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295675">import</span>&nbsp;<span class="op" id="8295682">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295685">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295694">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295701">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295711">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295723">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295729">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295740">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8295750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295753">var</span>&nbsp;<span class="ident" id="8295757">fset</span>&nbsp;<span class="op" id="8295762">=</span>&nbsp;<span class="ident" id="8295764">token</span><span class="op" id="8295769">.</span><span class="ident" id="8295770">NewFileSet</span><span class="op" id="8295780">(</span><span class="op" id="8295781">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295784">var</span>&nbsp;<span class="ident" id="8295788">validFiles</span>&nbsp;<span class="op" id="8295799">=</span>&nbsp;<span class="op" id="8295801">[</span><span class="op" id="8295802">]</span><span class="builtintype" id="8295803">string</span><span class="op" id="8295809">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295812">&#34;parser.go&#34;</span><span class="op" id="8295823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295826">&#34;parser_test.go&#34;</span><span class="op" id="8295842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295845">&#34;error_test.go&#34;</span><span class="op" id="8295860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8295863">&#34;short_test.go&#34;</span><span class="op" id="8295878">,</span><br>
<span class="lineno"></span><span class="op" id="8295880">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8295883">func</span>&nbsp;<span class="ident" id="8295888">TestParse</span><span class="op" id="8295897">(</span><span class="ident" id="8295898">t</span>&nbsp;<span class="op" id="8295900">*</span><span class="ident" id="8295901">testing</span><span class="op" id="8295908">.</span><span class="ident" id="8295909">T</span><span class="op" id="8295910">)</span>&nbsp;<span class="op" id="8295912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295915">for</span>&nbsp;<span class="ident" id="8295919">_</span><span class="op" id="8295920">,</span>&nbsp;<span class="ident" id="8295922">filename</span>&nbsp;<span class="op" id="8295931">:=</span>&nbsp;<span class="keyword" id="8295934">range</span>&nbsp;<span class="ident" id="8295940">validFiles</span>&nbsp;<span class="op" id="8295951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295955">_</span><span class="op" id="8295956">,</span>&nbsp;<span class="ident" id="8295958">err</span>&nbsp;<span class="op" id="8295962">:=</span>&nbsp;<span class="ident" id="8295965">ParseFile</span><span class="op" id="8295974">(</span><span class="ident" id="8295975">fset</span><span class="op" id="8295979">,</span>&nbsp;<span class="ident" id="8295981">filename</span><span class="op" id="8295989">,</span>&nbsp;<span class="ident" id="8295991">nil</span><span class="op" id="8295994">,</span>&nbsp;<span class="ident" id="8295996">DeclarationErrors</span><span class="op" id="8296013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296017">if</span>&nbsp;<span class="ident" id="8296020">err</span>&nbsp;<span class="op" id="8296024">!=</span>&nbsp;<span class="ident" id="8296027">nil</span>&nbsp;<span class="op" id="8296031">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296036">t</span><span class="op" id="8296037">.</span><span class="ident" id="8296038">Fatalf</span><span class="op" id="8296044">(</span><span class="string" id="8296045">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="8296064">,</span>&nbsp;<span class="ident" id="8296066">filename</span><span class="op" id="8296074">,</span>&nbsp;<span class="ident" id="8296076">err</span><span class="op" id="8296079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296086">}</span><br>
<span class="lineno"></span><span class="op" id="8296088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8296091">func</span>&nbsp;<span class="ident" id="8296096">nameFilter</span><span class="op" id="8296106">(</span><span class="ident" id="8296107">filename</span>&nbsp;<span class="builtintype" id="8296116">string</span><span class="op" id="8296122">)</span>&nbsp;<span class="builtintype" id="8296124">bool</span>&nbsp;<span class="op" id="8296129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296132">switch</span>&nbsp;<span class="ident" id="8296139">filename</span>&nbsp;<span class="op" id="8296148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296151">case</span>&nbsp;<span class="string" id="8296156">&#34;parser.go&#34;</span><span class="op" id="8296167">,</span>&nbsp;<span class="string" id="8296169">&#34;interface.go&#34;</span><span class="op" id="8296183">,</span>&nbsp;<span class="string" id="8296185">&#34;parser_test.go&#34;</span><span class="op" id="8296201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296205">return</span>&nbsp;<span class="builtintype" id="8296212">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296218">case</span>&nbsp;<span class="string" id="8296223">&#34;parser.go.orig&#34;</span><span class="op" id="8296239">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296243">return</span>&nbsp;<span class="builtintype" id="8296250">true</span>&nbsp;<span class="comment" id="8296255">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296303">return</span>&nbsp;<span class="builtintype" id="8296310">false</span><br>
<span class="lineno"></span><span class="op" id="8296316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8296319">func</span>&nbsp;<span class="ident" id="8296324">dirFilter</span><span class="op" id="8296333">(</span><span class="ident" id="8296334">f</span>&nbsp;<span class="ident" id="8296336">os</span><span class="op" id="8296338">.</span><span class="ident" id="8296339">FileInfo</span><span class="op" id="8296347">)</span>&nbsp;<span class="builtintype" id="8296349">bool</span>&nbsp;<span class="op" id="8296354">{</span>&nbsp;<span class="keyword" id="8296356">return</span>&nbsp;<span class="ident" id="8296363">nameFilter</span><span class="op" id="8296373">(</span><span class="ident" id="8296374">f</span><span class="op" id="8296375">.</span><span class="ident" id="8296376">Name</span><span class="op" id="8296380">(</span><span class="op" id="8296381">)</span><span class="op" id="8296382">)</span>&nbsp;<span class="op" id="8296384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8296387">func</span>&nbsp;<span class="ident" id="8296392">TestParseDir</span><span class="op" id="8296404">(</span><span class="ident" id="8296405">t</span>&nbsp;<span class="op" id="8296407">*</span><span class="ident" id="8296408">testing</span><span class="op" id="8296415">.</span><span class="ident" id="8296416">T</span><span class="op" id="8296417">)</span>&nbsp;<span class="op" id="8296419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296422">path</span>&nbsp;<span class="op" id="8296427">:=</span>&nbsp;<span class="string" id="8296430">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296435">pkgs</span><span class="op" id="8296439">,</span>&nbsp;<span class="ident" id="8296441">err</span>&nbsp;<span class="op" id="8296445">:=</span>&nbsp;<span class="ident" id="8296448">ParseDir</span><span class="op" id="8296456">(</span><span class="ident" id="8296457">fset</span><span class="op" id="8296461">,</span>&nbsp;<span class="ident" id="8296463">path</span><span class="op" id="8296467">,</span>&nbsp;<span class="ident" id="8296469">dirFilter</span><span class="op" id="8296478">,</span>&nbsp;<span class="num" id="8296480">0</span><span class="op" id="8296481">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296484">if</span>&nbsp;<span class="ident" id="8296487">err</span>&nbsp;<span class="op" id="8296491">!=</span>&nbsp;<span class="ident" id="8296494">nil</span>&nbsp;<span class="op" id="8296498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296502">t</span><span class="op" id="8296503">.</span><span class="ident" id="8296504">Fatalf</span><span class="op" id="8296510">(</span><span class="string" id="8296511">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="8296529">,</span>&nbsp;<span class="ident" id="8296531">path</span><span class="op" id="8296535">,</span>&nbsp;<span class="ident" id="8296537">err</span><span class="op" id="8296540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296546">if</span>&nbsp;<span class="ident" id="8296549">n</span>&nbsp;<span class="op" id="8296551">:=</span>&nbsp;<span class="builtinfunc" id="8296554">len</span><span class="op" id="8296557">(</span><span class="ident" id="8296558">pkgs</span><span class="op" id="8296562">)</span><span class="op" id="8296563">;</span>&nbsp;<span class="ident" id="8296565">n</span>&nbsp;<span class="op" id="8296567">!=</span>&nbsp;<span class="num" id="8296570">1</span>&nbsp;<span class="op" id="8296572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296576">t</span><span class="op" id="8296577">.</span><span class="ident" id="8296578">Errorf</span><span class="op" id="8296584">(</span><span class="string" id="8296585">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="8296610">,</span>&nbsp;<span class="ident" id="8296612">n</span><span class="op" id="8296613">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296619">pkg</span>&nbsp;<span class="op" id="8296623">:=</span>&nbsp;<span class="ident" id="8296626">pkgs</span><span class="op" id="8296630">[</span><span class="string" id="8296631">&#34;parser&#34;</span><span class="op" id="8296639">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296642">if</span>&nbsp;<span class="ident" id="8296645">pkg</span>&nbsp;<span class="op" id="8296649">==</span>&nbsp;<span class="ident" id="8296652">nil</span>&nbsp;<span class="op" id="8296656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296660">t</span><span class="op" id="8296661">.</span><span class="ident" id="8296662">Errorf</span><span class="op" id="8296668">(</span><span class="string" id="8296669">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="8296697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296701">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296712">if</span>&nbsp;<span class="ident" id="8296715">n</span>&nbsp;<span class="op" id="8296717">:=</span>&nbsp;<span class="builtinfunc" id="8296720">len</span><span class="op" id="8296723">(</span><span class="ident" id="8296724">pkg</span><span class="op" id="8296727">.</span><span class="ident" id="8296728">Files</span><span class="op" id="8296733">)</span><span class="op" id="8296734">;</span>&nbsp;<span class="ident" id="8296736">n</span>&nbsp;<span class="op" id="8296738">!=</span>&nbsp;<span class="num" id="8296741">3</span>&nbsp;<span class="op" id="8296743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296747">t</span><span class="op" id="8296748">.</span><span class="ident" id="8296749">Errorf</span><span class="op" id="8296755">(</span><span class="string" id="8296756">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="8296786">,</span>&nbsp;<span class="ident" id="8296788">n</span><span class="op" id="8296789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296795">for</span>&nbsp;<span class="ident" id="8296799">filename</span>&nbsp;<span class="op" id="8296808">:=</span>&nbsp;<span class="keyword" id="8296811">range</span>&nbsp;<span class="ident" id="8296817">pkg</span><span class="op" id="8296820">.</span><span class="ident" id="8296821">Files</span>&nbsp;<span class="op" id="8296827">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296831">if</span>&nbsp;<span class="op" id="8296834">!</span><span class="ident" id="8296835">nameFilter</span><span class="op" id="8296845">(</span><span class="ident" id="8296846">filename</span><span class="op" id="8296854">)</span>&nbsp;<span class="op" id="8296856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296861">t</span><span class="op" id="8296862">.</span><span class="ident" id="8296863">Errorf</span><span class="op" id="8296869">(</span><span class="string" id="8296870">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="8296899">,</span>&nbsp;<span class="ident" id="8296901">filename</span><span class="op" id="8296909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296916">}</span><br>
<span class="lineno"></span><span class="op" id="8296918">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8296921">func</span>&nbsp;<span class="ident" id="8296926">TestParseExpr</span><span class="op" id="8296939">(</span><span class="ident" id="8296940">t</span>&nbsp;<span class="op" id="8296942">*</span><span class="ident" id="8296943">testing</span><span class="op" id="8296950">.</span><span class="ident" id="8296951">T</span><span class="op" id="8296952">)</span>&nbsp;<span class="op" id="8296954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8296957">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8296985">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297019">src</span>&nbsp;<span class="op" id="8297023">:=</span>&nbsp;<span class="string" id="8297026">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297035">x</span><span class="op" id="8297036">,</span>&nbsp;<span class="ident" id="8297038">err</span>&nbsp;<span class="op" id="8297042">:=</span>&nbsp;<span class="ident" id="8297045">ParseExpr</span><span class="op" id="8297054">(</span><span class="ident" id="8297055">src</span><span class="op" id="8297058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297061">if</span>&nbsp;<span class="ident" id="8297064">err</span>&nbsp;<span class="op" id="8297068">!=</span>&nbsp;<span class="ident" id="8297071">nil</span>&nbsp;<span class="op" id="8297075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297079">t</span><span class="op" id="8297080">.</span><span class="ident" id="8297081">Errorf</span><span class="op" id="8297087">(</span><span class="string" id="8297088">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8297107">,</span>&nbsp;<span class="ident" id="8297109">src</span><span class="op" id="8297112">,</span>&nbsp;<span class="ident" id="8297114">err</span><span class="op" id="8297117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297123">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297140">if</span>&nbsp;<span class="ident" id="8297143">_</span><span class="op" id="8297144">,</span>&nbsp;<span class="ident" id="8297146">ok</span>&nbsp;<span class="op" id="8297149">:=</span>&nbsp;<span class="ident" id="8297152">x</span><span class="op" id="8297153">.</span><span class="op" id="8297154">(</span><span class="op" id="8297155">*</span><span class="ident" id="8297156">ast</span><span class="op" id="8297159">.</span><span class="ident" id="8297160">BinaryExpr</span><span class="op" id="8297170">)</span><span class="op" id="8297171">;</span>&nbsp;<span class="op" id="8297173">!</span><span class="ident" id="8297174">ok</span>&nbsp;<span class="op" id="8297177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297181">t</span><span class="op" id="8297182">.</span><span class="ident" id="8297183">Errorf</span><span class="op" id="8297189">(</span><span class="string" id="8297190">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="8297235">,</span>&nbsp;<span class="ident" id="8297237">src</span><span class="op" id="8297240">,</span>&nbsp;<span class="ident" id="8297242">x</span><span class="op" id="8297243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297250">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297278">src</span>&nbsp;<span class="op" id="8297282">=</span>&nbsp;<span class="string" id="8297284">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297302">x</span><span class="op" id="8297303">,</span>&nbsp;<span class="ident" id="8297305">err</span>&nbsp;<span class="op" id="8297309">=</span>&nbsp;<span class="ident" id="8297311">ParseExpr</span><span class="op" id="8297320">(</span><span class="ident" id="8297321">src</span><span class="op" id="8297324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297327">if</span>&nbsp;<span class="ident" id="8297330">err</span>&nbsp;<span class="op" id="8297334">!=</span>&nbsp;<span class="ident" id="8297337">nil</span>&nbsp;<span class="op" id="8297341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297345">t</span><span class="op" id="8297346">.</span><span class="ident" id="8297347">Errorf</span><span class="op" id="8297353">(</span><span class="string" id="8297354">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8297373">,</span>&nbsp;<span class="ident" id="8297375">src</span><span class="op" id="8297378">,</span>&nbsp;<span class="ident" id="8297380">err</span><span class="op" id="8297383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297386">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297389">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297406">if</span>&nbsp;<span class="ident" id="8297409">_</span><span class="op" id="8297410">,</span>&nbsp;<span class="ident" id="8297412">ok</span>&nbsp;<span class="op" id="8297415">:=</span>&nbsp;<span class="ident" id="8297418">x</span><span class="op" id="8297419">.</span><span class="op" id="8297420">(</span><span class="op" id="8297421">*</span><span class="ident" id="8297422">ast</span><span class="op" id="8297425">.</span><span class="ident" id="8297426">StructType</span><span class="op" id="8297436">)</span><span class="op" id="8297437">;</span>&nbsp;<span class="op" id="8297439">!</span><span class="ident" id="8297440">ok</span>&nbsp;<span class="op" id="8297443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297447">t</span><span class="op" id="8297448">.</span><span class="ident" id="8297449">Errorf</span><span class="op" id="8297455">(</span><span class="string" id="8297456">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="8297501">,</span>&nbsp;<span class="ident" id="8297503">src</span><span class="op" id="8297506">,</span>&nbsp;<span class="ident" id="8297508">x</span><span class="op" id="8297509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297516">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297542">src</span>&nbsp;<span class="op" id="8297546">=</span>&nbsp;<span class="string" id="8297548">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297557">if</span>&nbsp;<span class="ident" id="8297560">_</span><span class="op" id="8297561">,</span>&nbsp;<span class="ident" id="8297563">err</span>&nbsp;<span class="op" id="8297567">:=</span>&nbsp;<span class="ident" id="8297570">ParseExpr</span><span class="op" id="8297579">(</span><span class="ident" id="8297580">src</span><span class="op" id="8297583">)</span><span class="op" id="8297584">;</span>&nbsp;<span class="ident" id="8297586">err</span>&nbsp;<span class="op" id="8297590">==</span>&nbsp;<span class="ident" id="8297593">nil</span>&nbsp;<span class="op" id="8297597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297601">t</span><span class="op" id="8297602">.</span><span class="ident" id="8297603">Errorf</span><span class="op" id="8297609">(</span><span class="string" id="8297610">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8297639">,</span>&nbsp;<span class="ident" id="8297641">src</span><span class="op" id="8297644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297647">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297651">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297710">src</span>&nbsp;<span class="op" id="8297714">=</span>&nbsp;<span class="string" id="8297716">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297729">if</span>&nbsp;<span class="ident" id="8297732">_</span><span class="op" id="8297733">,</span>&nbsp;<span class="ident" id="8297735">err</span>&nbsp;<span class="op" id="8297739">:=</span>&nbsp;<span class="ident" id="8297742">ParseExpr</span><span class="op" id="8297751">(</span><span class="ident" id="8297752">src</span><span class="op" id="8297755">)</span><span class="op" id="8297756">;</span>&nbsp;<span class="ident" id="8297758">err</span>&nbsp;<span class="op" id="8297762">==</span>&nbsp;<span class="ident" id="8297765">nil</span>&nbsp;<span class="op" id="8297769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297773">t</span><span class="op" id="8297774">.</span><span class="ident" id="8297775">Errorf</span><span class="op" id="8297781">(</span><span class="string" id="8297782">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8297811">,</span>&nbsp;<span class="ident" id="8297813">src</span><span class="op" id="8297816">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297823">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297886">src</span>&nbsp;<span class="op" id="8297890">=</span>&nbsp;<span class="string" id="8297892">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297903">if</span>&nbsp;<span class="ident" id="8297906">_</span><span class="op" id="8297907">,</span>&nbsp;<span class="ident" id="8297909">err</span>&nbsp;<span class="op" id="8297913">:=</span>&nbsp;<span class="ident" id="8297916">ParseExpr</span><span class="op" id="8297925">(</span><span class="ident" id="8297926">src</span><span class="op" id="8297929">)</span><span class="op" id="8297930">;</span>&nbsp;<span class="ident" id="8297932">err</span>&nbsp;<span class="op" id="8297936">!=</span>&nbsp;<span class="ident" id="8297939">nil</span>&nbsp;<span class="op" id="8297943">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297947">t</span><span class="op" id="8297948">.</span><span class="ident" id="8297949">Errorf</span><span class="op" id="8297955">(</span><span class="string" id="8297956">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8297985">,</span>&nbsp;<span class="ident" id="8297987">src</span><span class="op" id="8297990">,</span>&nbsp;<span class="ident" id="8297992">err</span><span class="op" id="8297995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298001">src</span>&nbsp;<span class="op" id="8298005">=</span>&nbsp;<span class="string" id="8298007">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298017">if</span>&nbsp;<span class="ident" id="8298020">_</span><span class="op" id="8298021">,</span>&nbsp;<span class="ident" id="8298023">err</span>&nbsp;<span class="op" id="8298027">:=</span>&nbsp;<span class="ident" id="8298030">ParseExpr</span><span class="op" id="8298039">(</span><span class="ident" id="8298040">src</span><span class="op" id="8298043">)</span><span class="op" id="8298044">;</span>&nbsp;<span class="ident" id="8298046">err</span>&nbsp;<span class="op" id="8298050">==</span>&nbsp;<span class="ident" id="8298053">nil</span>&nbsp;<span class="op" id="8298057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298061">t</span><span class="op" id="8298062">.</span><span class="ident" id="8298063">Errorf</span><span class="op" id="8298069">(</span><span class="string" id="8298070">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8298099">,</span>&nbsp;<span class="ident" id="8298101">src</span><span class="op" id="8298104">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8298111">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298164">const</span>&nbsp;<span class="ident" id="8298170">validExpr</span>&nbsp;<span class="op" id="8298180">=</span>&nbsp;<span class="string" id="8298182">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298191">const</span>&nbsp;<span class="ident" id="8298197">anything</span>&nbsp;<span class="op" id="8298206">=</span>&nbsp;<span class="string" id="8298208">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298221">for</span>&nbsp;<span class="ident" id="8298225">_</span><span class="op" id="8298226">,</span>&nbsp;<span class="ident" id="8298228">c</span>&nbsp;<span class="op" id="8298230">:=</span>&nbsp;<span class="keyword" id="8298233">range</span>&nbsp;<span class="string" id="8298239">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="8298248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298252">src</span>&nbsp;<span class="op" id="8298256">:=</span>&nbsp;<span class="ident" id="8298259">validExpr</span>&nbsp;<span class="op" id="8298269">+</span>&nbsp;<span class="builtintype" id="8298271">string</span><span class="op" id="8298277">(</span><span class="ident" id="8298278">c</span><span class="op" id="8298279">)</span>&nbsp;<span class="op" id="8298281">+</span>&nbsp;<span class="ident" id="8298283">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298294">if</span>&nbsp;<span class="ident" id="8298297">_</span><span class="op" id="8298298">,</span>&nbsp;<span class="ident" id="8298300">err</span>&nbsp;<span class="op" id="8298304">:=</span>&nbsp;<span class="ident" id="8298307">ParseExpr</span><span class="op" id="8298316">(</span><span class="ident" id="8298317">src</span><span class="op" id="8298320">)</span><span class="op" id="8298321">;</span>&nbsp;<span class="ident" id="8298323">err</span>&nbsp;<span class="op" id="8298327">==</span>&nbsp;<span class="ident" id="8298330">nil</span>&nbsp;<span class="op" id="8298334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298339">t</span><span class="op" id="8298340">.</span><span class="ident" id="8298341">Errorf</span><span class="op" id="8298347">(</span><span class="string" id="8298348">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8298377">,</span>&nbsp;<span class="ident" id="8298379">src</span><span class="op" id="8298382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298386">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8298393">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298422">for</span>&nbsp;<span class="ident" id="8298426">_</span><span class="op" id="8298427">,</span>&nbsp;<span class="ident" id="8298429">src</span>&nbsp;<span class="op" id="8298433">:=</span>&nbsp;<span class="keyword" id="8298436">range</span>&nbsp;<span class="ident" id="8298442">valids</span>&nbsp;<span class="op" id="8298449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298453">ParseExpr</span><span class="op" id="8298462">(</span><span class="ident" id="8298463">src</span><span class="op" id="8298466">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298469">}</span><br>
<span class="lineno"></span><span class="op" id="8298471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8298474">func</span>&nbsp;<span class="ident" id="8298479">TestColonEqualsScope</span><span class="op" id="8298499">(</span><span class="ident" id="8298500">t</span>&nbsp;<span class="op" id="8298502">*</span><span class="ident" id="8298503">testing</span><span class="op" id="8298510">.</span><span class="ident" id="8298511">T</span><span class="op" id="8298512">)</span>&nbsp;<span class="op" id="8298514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298517">f</span><span class="op" id="8298518">,</span>&nbsp;<span class="ident" id="8298520">err</span>&nbsp;<span class="op" id="8298524">:=</span>&nbsp;<span class="ident" id="8298527">ParseFile</span><span class="op" id="8298536">(</span><span class="ident" id="8298537">fset</span><span class="op" id="8298541">,</span>&nbsp;<span class="string" id="8298543">&#34;&#34;</span><span class="op" id="8298545">,</span>&nbsp;<span class="string" id="8298547">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8298591">,</span>&nbsp;<span class="num" id="8298593">0</span><span class="op" id="8298594">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298597">if</span>&nbsp;<span class="ident" id="8298600">err</span>&nbsp;<span class="op" id="8298604">!=</span>&nbsp;<span class="ident" id="8298607">nil</span>&nbsp;<span class="op" id="8298611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298615">t</span><span class="op" id="8298616">.</span><span class="ident" id="8298617">Fatal</span><span class="op" id="8298622">(</span><span class="ident" id="8298623">err</span><span class="op" id="8298626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8298633">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298684">as</span>&nbsp;<span class="op" id="8298687">:=</span>&nbsp;<span class="ident" id="8298690">f</span><span class="op" id="8298691">.</span><span class="ident" id="8298692">Decls</span><span class="op" id="8298697">[</span><span class="num" id="8298698">0</span><span class="op" id="8298699">]</span><span class="op" id="8298700">.</span><span class="op" id="8298701">(</span><span class="op" id="8298702">*</span><span class="ident" id="8298703">ast</span><span class="op" id="8298706">.</span><span class="ident" id="8298707">FuncDecl</span><span class="op" id="8298715">)</span><span class="op" id="8298716">.</span><span class="ident" id="8298717">Body</span><span class="op" id="8298721">.</span><span class="ident" id="8298722">List</span><span class="op" id="8298726">[</span><span class="num" id="8298727">0</span><span class="op" id="8298728">]</span><span class="op" id="8298729">.</span><span class="op" id="8298730">(</span><span class="op" id="8298731">*</span><span class="ident" id="8298732">ast</span><span class="op" id="8298735">.</span><span class="ident" id="8298736">AssignStmt</span><span class="op" id="8298746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298749">for</span>&nbsp;<span class="ident" id="8298753">_</span><span class="op" id="8298754">,</span>&nbsp;<span class="ident" id="8298756">v</span>&nbsp;<span class="op" id="8298758">:=</span>&nbsp;<span class="keyword" id="8298761">range</span>&nbsp;<span class="ident" id="8298767">as</span><span class="op" id="8298769">.</span><span class="ident" id="8298770">Rhs</span>&nbsp;<span class="op" id="8298774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298778">id</span>&nbsp;<span class="op" id="8298781">:=</span>&nbsp;<span class="ident" id="8298784">v</span><span class="op" id="8298785">.</span><span class="op" id="8298786">(</span><span class="op" id="8298787">*</span><span class="ident" id="8298788">ast</span><span class="op" id="8298791">.</span><span class="ident" id="8298792">Ident</span><span class="op" id="8298797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298801">if</span>&nbsp;<span class="ident" id="8298804">id</span><span class="op" id="8298806">.</span><span class="ident" id="8298807">Obj</span>&nbsp;<span class="op" id="8298811">!=</span>&nbsp;<span class="ident" id="8298814">nil</span>&nbsp;<span class="op" id="8298818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298823">t</span><span class="op" id="8298824">.</span><span class="ident" id="8298825">Errorf</span><span class="op" id="8298831">(</span><span class="string" id="8298832">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8298860">,</span>&nbsp;<span class="ident" id="8298862">id</span><span class="op" id="8298864">.</span><span class="ident" id="8298865">Name</span><span class="op" id="8298869">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298879">for</span>&nbsp;<span class="ident" id="8298883">_</span><span class="op" id="8298884">,</span>&nbsp;<span class="ident" id="8298886">v</span>&nbsp;<span class="op" id="8298888">:=</span>&nbsp;<span class="keyword" id="8298891">range</span>&nbsp;<span class="ident" id="8298897">as</span><span class="op" id="8298899">.</span><span class="ident" id="8298900">Lhs</span>&nbsp;<span class="op" id="8298904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298908">id</span>&nbsp;<span class="op" id="8298911">:=</span>&nbsp;<span class="ident" id="8298914">v</span><span class="op" id="8298915">.</span><span class="op" id="8298916">(</span><span class="op" id="8298917">*</span><span class="ident" id="8298918">ast</span><span class="op" id="8298921">.</span><span class="ident" id="8298922">Ident</span><span class="op" id="8298927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298931">if</span>&nbsp;<span class="ident" id="8298934">id</span><span class="op" id="8298936">.</span><span class="ident" id="8298937">Obj</span>&nbsp;<span class="op" id="8298941">==</span>&nbsp;<span class="ident" id="8298944">nil</span>&nbsp;<span class="op" id="8298948">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298953">t</span><span class="op" id="8298954">.</span><span class="ident" id="8298955">Errorf</span><span class="op" id="8298961">(</span><span class="string" id="8298962">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8298996">,</span>&nbsp;<span class="ident" id="8298998">id</span><span class="op" id="8299000">.</span><span class="ident" id="8299001">Name</span><span class="op" id="8299005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299012">}</span><br>
<span class="lineno"></span><span class="op" id="8299014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8299017">func</span>&nbsp;<span class="ident" id="8299022">TestVarScope</span><span class="op" id="8299034">(</span><span class="ident" id="8299035">t</span>&nbsp;<span class="op" id="8299037">*</span><span class="ident" id="8299038">testing</span><span class="op" id="8299045">.</span><span class="ident" id="8299046">T</span><span class="op" id="8299047">)</span>&nbsp;<span class="op" id="8299049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299052">f</span><span class="op" id="8299053">,</span>&nbsp;<span class="ident" id="8299055">err</span>&nbsp;<span class="op" id="8299059">:=</span>&nbsp;<span class="ident" id="8299062">ParseFile</span><span class="op" id="8299071">(</span><span class="ident" id="8299072">fset</span><span class="op" id="8299076">,</span>&nbsp;<span class="string" id="8299078">&#34;&#34;</span><span class="op" id="8299080">,</span>&nbsp;<span class="string" id="8299082">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8299129">,</span>&nbsp;<span class="num" id="8299131">0</span><span class="op" id="8299132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299135">if</span>&nbsp;<span class="ident" id="8299138">err</span>&nbsp;<span class="op" id="8299142">!=</span>&nbsp;<span class="ident" id="8299145">nil</span>&nbsp;<span class="op" id="8299149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299153">t</span><span class="op" id="8299154">.</span><span class="ident" id="8299155">Fatal</span><span class="op" id="8299160">(</span><span class="ident" id="8299161">err</span><span class="op" id="8299164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299167">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8299171">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299222">as</span>&nbsp;<span class="op" id="8299225">:=</span>&nbsp;<span class="ident" id="8299228">f</span><span class="op" id="8299229">.</span><span class="ident" id="8299230">Decls</span><span class="op" id="8299235">[</span><span class="num" id="8299236">0</span><span class="op" id="8299237">]</span><span class="op" id="8299238">.</span><span class="op" id="8299239">(</span><span class="op" id="8299240">*</span><span class="ident" id="8299241">ast</span><span class="op" id="8299244">.</span><span class="ident" id="8299245">FuncDecl</span><span class="op" id="8299253">)</span><span class="op" id="8299254">.</span><span class="ident" id="8299255">Body</span><span class="op" id="8299259">.</span><span class="ident" id="8299260">List</span><span class="op" id="8299264">[</span><span class="num" id="8299265">0</span><span class="op" id="8299266">]</span><span class="op" id="8299267">.</span><span class="op" id="8299268">(</span><span class="op" id="8299269">*</span><span class="ident" id="8299270">ast</span><span class="op" id="8299273">.</span><span class="ident" id="8299274">DeclStmt</span><span class="op" id="8299282">)</span><span class="op" id="8299283">.</span><span class="ident" id="8299284">Decl</span><span class="op" id="8299288">.</span><span class="op" id="8299289">(</span><span class="op" id="8299290">*</span><span class="ident" id="8299291">ast</span><span class="op" id="8299294">.</span><span class="ident" id="8299295">GenDecl</span><span class="op" id="8299302">)</span><span class="op" id="8299303">.</span><span class="ident" id="8299304">Specs</span><span class="op" id="8299309">[</span><span class="num" id="8299310">0</span><span class="op" id="8299311">]</span><span class="op" id="8299312">.</span><span class="op" id="8299313">(</span><span class="op" id="8299314">*</span><span class="ident" id="8299315">ast</span><span class="op" id="8299318">.</span><span class="ident" id="8299319">ValueSpec</span><span class="op" id="8299328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299331">for</span>&nbsp;<span class="ident" id="8299335">_</span><span class="op" id="8299336">,</span>&nbsp;<span class="ident" id="8299338">v</span>&nbsp;<span class="op" id="8299340">:=</span>&nbsp;<span class="keyword" id="8299343">range</span>&nbsp;<span class="ident" id="8299349">as</span><span class="op" id="8299351">.</span><span class="ident" id="8299352">Values</span>&nbsp;<span class="op" id="8299359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299363">id</span>&nbsp;<span class="op" id="8299366">:=</span>&nbsp;<span class="ident" id="8299369">v</span><span class="op" id="8299370">.</span><span class="op" id="8299371">(</span><span class="op" id="8299372">*</span><span class="ident" id="8299373">ast</span><span class="op" id="8299376">.</span><span class="ident" id="8299377">Ident</span><span class="op" id="8299382">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299386">if</span>&nbsp;<span class="ident" id="8299389">id</span><span class="op" id="8299391">.</span><span class="ident" id="8299392">Obj</span>&nbsp;<span class="op" id="8299396">!=</span>&nbsp;<span class="ident" id="8299399">nil</span>&nbsp;<span class="op" id="8299403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299408">t</span><span class="op" id="8299409">.</span><span class="ident" id="8299410">Errorf</span><span class="op" id="8299416">(</span><span class="string" id="8299417">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8299445">,</span>&nbsp;<span class="ident" id="8299447">id</span><span class="op" id="8299449">.</span><span class="ident" id="8299450">Name</span><span class="op" id="8299454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299464">for</span>&nbsp;<span class="ident" id="8299468">_</span><span class="op" id="8299469">,</span>&nbsp;<span class="ident" id="8299471">id</span>&nbsp;<span class="op" id="8299474">:=</span>&nbsp;<span class="keyword" id="8299477">range</span>&nbsp;<span class="ident" id="8299483">as</span><span class="op" id="8299485">.</span><span class="ident" id="8299486">Names</span>&nbsp;<span class="op" id="8299492">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299496">if</span>&nbsp;<span class="ident" id="8299499">id</span><span class="op" id="8299501">.</span><span class="ident" id="8299502">Obj</span>&nbsp;<span class="op" id="8299506">==</span>&nbsp;<span class="ident" id="8299509">nil</span>&nbsp;<span class="op" id="8299513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299518">t</span><span class="op" id="8299519">.</span><span class="ident" id="8299520">Errorf</span><span class="op" id="8299526">(</span><span class="string" id="8299527">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8299561">,</span>&nbsp;<span class="ident" id="8299563">id</span><span class="op" id="8299565">.</span><span class="ident" id="8299566">Name</span><span class="op" id="8299570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299577">}</span><br>
<span class="lineno"></span><span class="op" id="8299579">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="8299582">func</span>&nbsp;<span class="ident" id="8299587">TestObjects</span><span class="op" id="8299598">(</span><span class="ident" id="8299599">t</span>&nbsp;<span class="op" id="8299601">*</span><span class="ident" id="8299602">testing</span><span class="op" id="8299609">.</span><span class="ident" id="8299610">T</span><span class="op" id="8299611">)</span>&nbsp;<span class="op" id="8299613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299616">const</span>&nbsp;<span class="ident" id="8299622">src</span>&nbsp;<span class="op" id="8299626">=</span>&nbsp;<span class="string" id="8299628">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299719">f</span><span class="op" id="8299720">,</span>&nbsp;<span class="ident" id="8299722">err</span>&nbsp;<span class="op" id="8299726">:=</span>&nbsp;<span class="ident" id="8299729">ParseFile</span><span class="op" id="8299738">(</span><span class="ident" id="8299739">fset</span><span class="op" id="8299743">,</span>&nbsp;<span class="string" id="8299745">&#34;&#34;</span><span class="op" id="8299747">,</span>&nbsp;<span class="ident" id="8299749">src</span><span class="op" id="8299752">,</span>&nbsp;<span class="num" id="8299754">0</span><span class="op" id="8299755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299758">if</span>&nbsp;<span class="ident" id="8299761">err</span>&nbsp;<span class="op" id="8299765">!=</span>&nbsp;<span class="ident" id="8299768">nil</span>&nbsp;<span class="op" id="8299772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299776">t</span><span class="op" id="8299777">.</span><span class="ident" id="8299778">Fatal</span><span class="op" id="8299783">(</span><span class="ident" id="8299784">err</span><span class="op" id="8299787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299790">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299794">objects</span>&nbsp;<span class="op" id="8299802">:=</span>&nbsp;<span class="keyword" id="8299805">map</span><span class="op" id="8299808">[</span><span class="builtintype" id="8299809">string</span><span class="op" id="8299815">]</span><span class="ident" id="8299816">ast</span><span class="op" id="8299819">.</span><span class="ident" id="8299820">ObjKind</span><span class="op" id="8299827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299831">&#34;p&#34;</span><span class="op" id="8299834">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8299838">ast</span><span class="op" id="8299841">.</span><span class="ident" id="8299842">Bad</span><span class="op" id="8299845">,</span>&nbsp;<span class="comment" id="8299847">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299867">&#34;fmt&#34;</span><span class="op" id="8299872">:</span>&nbsp;<span class="ident" id="8299874">ast</span><span class="op" id="8299877">.</span><span class="ident" id="8299878">Bad</span><span class="op" id="8299881">,</span>&nbsp;<span class="comment" id="8299883">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299905">&#34;pi&#34;</span><span class="op" id="8299909">:</span>&nbsp;&nbsp;<span class="ident" id="8299912">ast</span><span class="op" id="8299915">.</span><span class="ident" id="8299916">Con</span><span class="op" id="8299919">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299923">&#34;T&#34;</span><span class="op" id="8299926">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8299930">ast</span><span class="op" id="8299933">.</span><span class="ident" id="8299934">Typ</span><span class="op" id="8299937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299941">&#34;x&#34;</span><span class="op" id="8299944">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8299948">ast</span><span class="op" id="8299951">.</span><span class="ident" id="8299952">Var</span><span class="op" id="8299955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299959">&#34;int&#34;</span><span class="op" id="8299964">:</span>&nbsp;<span class="ident" id="8299966">ast</span><span class="op" id="8299969">.</span><span class="ident" id="8299970">Bad</span><span class="op" id="8299973">,</span>&nbsp;<span class="comment" id="8299975">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8299997">&#34;f&#34;</span><span class="op" id="8300000">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8300004">ast</span><span class="op" id="8300007">.</span><span class="ident" id="8300008">Fun</span><span class="op" id="8300011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300015">&#34;L&#34;</span><span class="op" id="8300018">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8300022">ast</span><span class="op" id="8300025">.</span><span class="ident" id="8300026">Lbl</span><span class="op" id="8300029">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300036">ast</span><span class="op" id="8300039">.</span><span class="ident" id="8300040">Inspect</span><span class="op" id="8300047">(</span><span class="ident" id="8300048">f</span><span class="op" id="8300049">,</span>&nbsp;<span class="keyword" id="8300051">func</span><span class="op" id="8300055">(</span><span class="ident" id="8300056">n</span>&nbsp;<span class="ident" id="8300058">ast</span><span class="op" id="8300061">.</span><span class="ident" id="8300062">Node</span><span class="op" id="8300066">)</span>&nbsp;<span class="builtintype" id="8300068">bool</span>&nbsp;<span class="op" id="8300073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300077">if</span>&nbsp;<span class="ident" id="8300080">ident</span><span class="op" id="8300085">,</span>&nbsp;<span class="ident" id="8300087">ok</span>&nbsp;<span class="op" id="8300090">:=</span>&nbsp;<span class="ident" id="8300093">n</span><span class="op" id="8300094">.</span><span class="op" id="8300095">(</span><span class="op" id="8300096">*</span><span class="ident" id="8300097">ast</span><span class="op" id="8300100">.</span><span class="ident" id="8300101">Ident</span><span class="op" id="8300106">)</span><span class="op" id="8300107">;</span>&nbsp;<span class="ident" id="8300109">ok</span>&nbsp;<span class="op" id="8300112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300117">obj</span>&nbsp;<span class="op" id="8300121">:=</span>&nbsp;<span class="ident" id="8300124">ident</span><span class="op" id="8300129">.</span><span class="ident" id="8300130">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300137">if</span>&nbsp;<span class="ident" id="8300140">obj</span>&nbsp;<span class="op" id="8300144">==</span>&nbsp;<span class="ident" id="8300147">nil</span>&nbsp;<span class="op" id="8300151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300157">if</span>&nbsp;<span class="ident" id="8300160">objects</span><span class="op" id="8300167">[</span><span class="ident" id="8300168">ident</span><span class="op" id="8300173">.</span><span class="ident" id="8300174">Name</span><span class="op" id="8300178">]</span>&nbsp;<span class="op" id="8300180">!=</span>&nbsp;<span class="ident" id="8300183">ast</span><span class="op" id="8300186">.</span><span class="ident" id="8300187">Bad</span>&nbsp;<span class="op" id="8300191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300198">t</span><span class="op" id="8300199">.</span><span class="ident" id="8300200">Errorf</span><span class="op" id="8300206">(</span><span class="string" id="8300207">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="8300225">,</span>&nbsp;<span class="ident" id="8300227">ident</span><span class="op" id="8300232">.</span><span class="ident" id="8300233">Name</span><span class="op" id="8300237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300249">return</span>&nbsp;<span class="builtintype" id="8300256">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300269">if</span>&nbsp;<span class="ident" id="8300272">obj</span><span class="op" id="8300275">.</span><span class="ident" id="8300276">Name</span>&nbsp;<span class="op" id="8300281">!=</span>&nbsp;<span class="ident" id="8300284">ident</span><span class="op" id="8300289">.</span><span class="ident" id="8300290">Name</span>&nbsp;<span class="op" id="8300295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300301">t</span><span class="op" id="8300302">.</span><span class="ident" id="8300303">Errorf</span><span class="op" id="8300309">(</span><span class="string" id="8300310">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8300361">,</span>&nbsp;<span class="ident" id="8300363">obj</span><span class="op" id="8300366">.</span><span class="ident" id="8300367">Name</span><span class="op" id="8300371">,</span>&nbsp;<span class="ident" id="8300373">ident</span><span class="op" id="8300378">.</span><span class="ident" id="8300379">Name</span><span class="op" id="8300383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300393">kind</span>&nbsp;<span class="op" id="8300398">:=</span>&nbsp;<span class="ident" id="8300401">objects</span><span class="op" id="8300408">[</span><span class="ident" id="8300409">ident</span><span class="op" id="8300414">.</span><span class="ident" id="8300415">Name</span><span class="op" id="8300419">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300424">if</span>&nbsp;<span class="ident" id="8300427">obj</span><span class="op" id="8300430">.</span><span class="ident" id="8300431">Kind</span>&nbsp;<span class="op" id="8300436">!=</span>&nbsp;<span class="ident" id="8300439">kind</span>&nbsp;<span class="op" id="8300444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300450">t</span><span class="op" id="8300451">.</span><span class="ident" id="8300452">Errorf</span><span class="op" id="8300458">(</span><span class="string" id="8300459">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8300487">,</span>&nbsp;<span class="ident" id="8300489">ident</span><span class="op" id="8300494">.</span><span class="ident" id="8300495">Name</span><span class="op" id="8300499">,</span>&nbsp;<span class="ident" id="8300501">obj</span><span class="op" id="8300504">.</span><span class="ident" id="8300505">Kind</span><span class="op" id="8300509">,</span>&nbsp;<span class="ident" id="8300511">kind</span><span class="op" id="8300515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300528">return</span>&nbsp;<span class="builtintype" id="8300535">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300541">}</span><span class="op" id="8300542">)</span><br>
<span class="lineno"></span><span class="op" id="8300544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8300547">func</span>&nbsp;<span class="ident" id="8300552">TestUnresolved</span><span class="op" id="8300566">(</span><span class="ident" id="8300567">t</span>&nbsp;<span class="op" id="8300569">*</span><span class="ident" id="8300570">testing</span><span class="op" id="8300577">.</span><span class="ident" id="8300578">T</span><span class="op" id="8300579">)</span>&nbsp;<span class="op" id="8300581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300584">f</span><span class="op" id="8300585">,</span>&nbsp;<span class="ident" id="8300587">err</span>&nbsp;<span class="op" id="8300591">:=</span>&nbsp;<span class="ident" id="8300594">ParseFile</span><span class="op" id="8300603">(</span><span class="ident" id="8300604">fset</span><span class="op" id="8300608">,</span>&nbsp;<span class="string" id="8300610">&#34;&#34;</span><span class="op" id="8300612">,</span>&nbsp;<span class="string" id="8300614">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="8301092">,</span>&nbsp;<span class="num" id="8301094">0</span><span class="op" id="8301095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301098">if</span>&nbsp;<span class="ident" id="8301101">err</span>&nbsp;<span class="op" id="8301105">!=</span>&nbsp;<span class="ident" id="8301108">nil</span>&nbsp;<span class="op" id="8301112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301116">t</span><span class="op" id="8301117">.</span><span class="ident" id="8301118">Fatal</span><span class="op" id="8301123">(</span><span class="ident" id="8301124">err</span><span class="op" id="8301127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301130">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301134">want</span>&nbsp;<span class="op" id="8301139">:=</span>&nbsp;<span class="string" id="8301142">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8301149">+</span>&nbsp;<span class="comment" id="8301151">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301160">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8301178">+</span>&nbsp;<span class="comment" id="8301180">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301189">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8301202">+</span>&nbsp;<span class="comment" id="8301204">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301213">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8301224">+</span>&nbsp;<span class="comment" id="8301226">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301235">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8301246">+</span>&nbsp;<span class="comment" id="8301248">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301257">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301262">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8301269">+</span>&nbsp;<span class="comment" id="8301271">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301280">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8301298">+</span>&nbsp;<span class="comment" id="8301300">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301309">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8301322">+</span>&nbsp;<span class="comment" id="8301324">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301333">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8301344">+</span>&nbsp;<span class="comment" id="8301346">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301355">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8301366">+</span>&nbsp;<span class="comment" id="8301368">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301377">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301382">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8301389">+</span>&nbsp;<span class="comment" id="8301391">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301400">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8301412">+</span>&nbsp;<span class="comment" id="8301414">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301423">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8301436">+</span>&nbsp;<span class="comment" id="8301438">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301447">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301452">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8301459">+</span>&nbsp;<span class="comment" id="8301461">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301470">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8301488">+</span>&nbsp;<span class="comment" id="8301490">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301499">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="8301508">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301517">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301552">var</span>&nbsp;<span class="ident" id="8301556">buf</span>&nbsp;<span class="ident" id="8301560">bytes</span><span class="op" id="8301565">.</span><span class="ident" id="8301566">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301574">for</span>&nbsp;<span class="ident" id="8301578">_</span><span class="op" id="8301579">,</span>&nbsp;<span class="ident" id="8301581">u</span>&nbsp;<span class="op" id="8301583">:=</span>&nbsp;<span class="keyword" id="8301586">range</span>&nbsp;<span class="ident" id="8301592">f</span><span class="op" id="8301593">.</span><span class="ident" id="8301594">Unresolved</span>&nbsp;<span class="op" id="8301605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301609">buf</span><span class="op" id="8301612">.</span><span class="ident" id="8301613">WriteString</span><span class="op" id="8301624">(</span><span class="ident" id="8301625">u</span><span class="op" id="8301626">.</span><span class="ident" id="8301627">Name</span><span class="op" id="8301631">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301635">buf</span><span class="op" id="8301638">.</span><span class="ident" id="8301639">WriteByte</span><span class="op" id="8301648">(</span><span class="string" id="8301649">&#39;&nbsp;&#39;</span><span class="op" id="8301652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301658">got</span>&nbsp;<span class="op" id="8301662">:=</span>&nbsp;<span class="ident" id="8301665">buf</span><span class="op" id="8301668">.</span><span class="ident" id="8301669">String</span><span class="op" id="8301675">(</span><span class="op" id="8301676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301680">if</span>&nbsp;<span class="ident" id="8301683">got</span>&nbsp;<span class="op" id="8301687">!=</span>&nbsp;<span class="ident" id="8301690">want</span>&nbsp;<span class="op" id="8301695">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301699">t</span><span class="op" id="8301700">.</span><span class="ident" id="8301701">Errorf</span><span class="op" id="8301707">(</span><span class="string" id="8301708">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="8301730">,</span>&nbsp;<span class="ident" id="8301732">got</span><span class="op" id="8301735">,</span>&nbsp;<span class="ident" id="8301737">want</span><span class="op" id="8301741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301744">}</span><br>
<span class="lineno"></span><span class="op" id="8301746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8301749">var</span>&nbsp;<span class="ident" id="8301753">imports</span>&nbsp;<span class="op" id="8301761">=</span>&nbsp;<span class="keyword" id="8301763">map</span><span class="op" id="8301766">[</span><span class="builtintype" id="8301767">string</span><span class="op" id="8301773">]</span><span class="builtintype" id="8301774">bool</span><span class="op" id="8301778">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301781">`&#34;a&#34;`</span><span class="op" id="8301786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8301795">true</span><span class="op" id="8301799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301802">&#34;`a`&#34;</span><span class="op" id="8301807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8301816">true</span><span class="op" id="8301820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301823">`&#34;a/b&#34;`</span><span class="op" id="8301830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8301837">true</span><span class="op" id="8301841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301844">`&#34;a.b&#34;`</span><span class="op" id="8301851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8301858">true</span><span class="op" id="8301862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301865">`&#34;m\x61th&#34;`</span><span class="op" id="8301876">:</span>&nbsp;&nbsp;<span class="builtintype" id="8301879">true</span><span class="op" id="8301883">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301886">`&#34;greek/&#34;`</span><span class="op" id="8301900">:</span>&nbsp;<span class="builtintype" id="8301902">true</span><span class="op" id="8301906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8301909">`&#34;&#34;`</span><span class="op" id="8301913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8301923">false</span><span class="op" id="8301928">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301932">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301984">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8302038">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8302081">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8302126">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302179">`&#34;\x00&#34;`</span><span class="op" id="8302187">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302193">false</span><span class="op" id="8302198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302201">&#34;`\x00`&#34;</span><span class="op" id="8302209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302215">false</span><span class="op" id="8302220">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302223">`&#34;\x7f&#34;`</span><span class="op" id="8302231">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302237">false</span><span class="op" id="8302242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302245">&#34;`\x7f`&#34;</span><span class="op" id="8302253">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302259">false</span><span class="op" id="8302264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302267">`&#34;a!&#34;`</span><span class="op" id="8302273">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302281">false</span><span class="op" id="8302286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302289">&#34;`a!`&#34;</span><span class="op" id="8302295">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302303">false</span><span class="op" id="8302308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302311">`&#34;a&nbsp;b&#34;`</span><span class="op" id="8302318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302325">false</span><span class="op" id="8302330">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302333">&#34;`a&nbsp;b`&#34;</span><span class="op" id="8302340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302347">false</span><span class="op" id="8302352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302355">`&#34;a\\b&#34;`</span><span class="op" id="8302363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302369">false</span><span class="op" id="8302374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302377">&#34;`a\\b`&#34;</span><span class="op" id="8302385">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302391">false</span><span class="op" id="8302396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302399">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="8302408">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302413">false</span><span class="op" id="8302418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302421">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="8302430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302435">false</span><span class="op" id="8302440">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302443">`&#34;\x80\x80&#34;`</span><span class="op" id="8302455">:</span>&nbsp;<span class="builtintype" id="8302457">false</span><span class="op" id="8302462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302465">&#34;`\x80\x80`&#34;</span><span class="op" id="8302477">:</span>&nbsp;<span class="builtintype" id="8302479">false</span><span class="op" id="8302484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302487">`&#34;\xFFFD&#34;`</span><span class="op" id="8302497">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302501">false</span><span class="op" id="8302506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8302509">&#34;`\xFFFD`&#34;</span><span class="op" id="8302519">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302523">false</span><span class="op" id="8302528">,</span><br>
<span class="lineno"></span><span class="op" id="8302530">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="8302533">func</span>&nbsp;<span class="ident" id="8302538">TestImports</span><span class="op" id="8302549">(</span><span class="ident" id="8302550">t</span>&nbsp;<span class="op" id="8302552">*</span><span class="ident" id="8302553">testing</span><span class="op" id="8302560">.</span><span class="ident" id="8302561">T</span><span class="op" id="8302562">)</span>&nbsp;<span class="op" id="8302564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302567">for</span>&nbsp;<span class="ident" id="8302571">path</span><span class="op" id="8302575">,</span>&nbsp;<span class="ident" id="8302577">isValid</span>&nbsp;<span class="op" id="8302585">:=</span>&nbsp;<span class="keyword" id="8302588">range</span>&nbsp;<span class="ident" id="8302594">imports</span>&nbsp;<span class="op" id="8302602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302606">src</span>&nbsp;<span class="op" id="8302610">:=</span>&nbsp;<span class="ident" id="8302613">fmt</span><span class="op" id="8302616">.</span><span class="ident" id="8302617">Sprintf</span><span class="op" id="8302624">(</span><span class="string" id="8302625">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="8302647">,</span>&nbsp;<span class="ident" id="8302649">path</span><span class="op" id="8302653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302657">_</span><span class="op" id="8302658">,</span>&nbsp;<span class="ident" id="8302660">err</span>&nbsp;<span class="op" id="8302664">:=</span>&nbsp;<span class="ident" id="8302667">ParseFile</span><span class="op" id="8302676">(</span><span class="ident" id="8302677">fset</span><span class="op" id="8302681">,</span>&nbsp;<span class="string" id="8302683">&#34;&#34;</span><span class="op" id="8302685">,</span>&nbsp;<span class="ident" id="8302687">src</span><span class="op" id="8302690">,</span>&nbsp;<span class="num" id="8302692">0</span><span class="op" id="8302693">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302697">switch</span>&nbsp;<span class="op" id="8302704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302708">case</span>&nbsp;<span class="ident" id="8302713">err</span>&nbsp;<span class="op" id="8302717">!=</span>&nbsp;<span class="ident" id="8302720">nil</span>&nbsp;<span class="op" id="8302724">&amp;&amp;</span>&nbsp;<span class="ident" id="8302727">isValid</span><span class="op" id="8302734">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302739">t</span><span class="op" id="8302740">.</span><span class="ident" id="8302741">Errorf</span><span class="op" id="8302747">(</span><span class="string" id="8302748">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="8302790">,</span>&nbsp;<span class="ident" id="8302792">src</span><span class="op" id="8302795">,</span>&nbsp;<span class="ident" id="8302797">err</span><span class="op" id="8302800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302804">case</span>&nbsp;<span class="ident" id="8302809">err</span>&nbsp;<span class="op" id="8302813">==</span>&nbsp;<span class="ident" id="8302816">nil</span>&nbsp;<span class="op" id="8302820">&amp;&amp;</span>&nbsp;<span class="op" id="8302823">!</span><span class="ident" id="8302824">isValid</span><span class="op" id="8302831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302836">t</span><span class="op" id="8302837">.</span><span class="ident" id="8302838">Errorf</span><span class="op" id="8302844">(</span><span class="string" id="8302845">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="8302888">,</span>&nbsp;<span class="ident" id="8302890">src</span><span class="op" id="8302893">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302900">}</span><br>
<span class="lineno"></span><span class="op" id="8302902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8302905">func</span>&nbsp;<span class="ident" id="8302910">TestCommentGroups</span><span class="op" id="8302927">(</span><span class="ident" id="8302928">t</span>&nbsp;<span class="op" id="8302930">*</span><span class="ident" id="8302931">testing</span><span class="op" id="8302938">.</span><span class="ident" id="8302939">T</span><span class="op" id="8302940">)</span>&nbsp;<span class="op" id="8302942">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302945">f</span><span class="op" id="8302946">,</span>&nbsp;<span class="ident" id="8302948">err</span>&nbsp;<span class="op" id="8302952">:=</span>&nbsp;<span class="ident" id="8302955">ParseFile</span><span class="op" id="8302964">(</span><span class="ident" id="8302965">fset</span><span class="op" id="8302969">,</span>&nbsp;<span class="string" id="8302971">&#34;&#34;</span><span class="op" id="8302973">,</span>&nbsp;<span class="string" id="8302975">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8303287">,</span>&nbsp;<span class="ident" id="8303289">ParseComments</span><span class="op" id="8303302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303305">if</span>&nbsp;<span class="ident" id="8303308">err</span>&nbsp;<span class="op" id="8303312">!=</span>&nbsp;<span class="ident" id="8303315">nil</span>&nbsp;<span class="op" id="8303319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303323">t</span><span class="op" id="8303324">.</span><span class="ident" id="8303325">Fatal</span><span class="op" id="8303330">(</span><span class="ident" id="8303331">err</span><span class="op" id="8303334">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303340">expected</span>&nbsp;<span class="op" id="8303349">:=</span>&nbsp;<span class="op" id="8303352">[</span><span class="op" id="8303353">]</span><span class="op" id="8303354">[</span><span class="op" id="8303355">]</span><span class="builtintype" id="8303356">string</span><span class="op" id="8303362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303366">{</span><span class="string" id="8303367">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="8303377">,</span>&nbsp;<span class="string" id="8303379">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="8303389">,</span>&nbsp;<span class="string" id="8303391">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="8303401">,</span>&nbsp;<span class="string" id="8303403">&#34;//&nbsp;1d&#34;</span><span class="op" id="8303410">}</span><span class="op" id="8303411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303415">{</span><span class="string" id="8303416">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="8303427">,</span>&nbsp;<span class="string" id="8303429">&#34;//&nbsp;2b&#34;</span><span class="op" id="8303436">}</span><span class="op" id="8303437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303441">{</span><span class="string" id="8303442">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="8303452">,</span>&nbsp;<span class="string" id="8303454">&#34;//&nbsp;3b&#34;</span><span class="op" id="8303461">,</span>&nbsp;<span class="string" id="8303463">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="8303473">}</span><span class="op" id="8303474">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303478">{</span><span class="string" id="8303479">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="8303507">}</span><span class="op" id="8303508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303512">{</span><span class="string" id="8303513">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="8303542">}</span><span class="op" id="8303543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303547">{</span><span class="string" id="8303548">&#34;//&nbsp;Output:&#34;</span><span class="op" id="8303560">,</span>&nbsp;<span class="string" id="8303562">&#34;//&nbsp;3&#34;</span><span class="op" id="8303568">,</span>&nbsp;<span class="string" id="8303570">&#34;//&nbsp;5&#34;</span><span class="op" id="8303576">}</span><span class="op" id="8303577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303583">if</span>&nbsp;<span class="builtinfunc" id="8303586">len</span><span class="op" id="8303589">(</span><span class="ident" id="8303590">f</span><span class="op" id="8303591">.</span><span class="ident" id="8303592">Comments</span><span class="op" id="8303600">)</span>&nbsp;<span class="op" id="8303602">!=</span>&nbsp;<span class="builtinfunc" id="8303605">len</span><span class="op" id="8303608">(</span><span class="ident" id="8303609">expected</span><span class="op" id="8303617">)</span>&nbsp;<span class="op" id="8303619">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303623">t</span><span class="op" id="8303624">.</span><span class="ident" id="8303625">Fatalf</span><span class="op" id="8303631">(</span><span class="string" id="8303632">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8303668">,</span>&nbsp;<span class="builtinfunc" id="8303670">len</span><span class="op" id="8303673">(</span><span class="ident" id="8303674">f</span><span class="op" id="8303675">.</span><span class="ident" id="8303676">Comments</span><span class="op" id="8303684">)</span><span class="op" id="8303685">,</span>&nbsp;<span class="builtinfunc" id="8303687">len</span><span class="op" id="8303690">(</span><span class="ident" id="8303691">expected</span><span class="op" id="8303699">)</span><span class="op" id="8303700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303706">for</span>&nbsp;<span class="ident" id="8303710">i</span><span class="op" id="8303711">,</span>&nbsp;<span class="ident" id="8303713">exp</span>&nbsp;<span class="op" id="8303717">:=</span>&nbsp;<span class="keyword" id="8303720">range</span>&nbsp;<span class="ident" id="8303726">expected</span>&nbsp;<span class="op" id="8303735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303739">got</span>&nbsp;<span class="op" id="8303743">:=</span>&nbsp;<span class="ident" id="8303746">f</span><span class="op" id="8303747">.</span><span class="ident" id="8303748">Comments</span><span class="op" id="8303756">[</span><span class="ident" id="8303757">i</span><span class="op" id="8303758">]</span><span class="op" id="8303759">.</span><span class="ident" id="8303760">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303767">if</span>&nbsp;<span class="builtinfunc" id="8303770">len</span><span class="op" id="8303773">(</span><span class="ident" id="8303774">got</span><span class="op" id="8303777">)</span>&nbsp;<span class="op" id="8303779">!=</span>&nbsp;<span class="builtinfunc" id="8303782">len</span><span class="op" id="8303785">(</span><span class="ident" id="8303786">exp</span><span class="op" id="8303789">)</span>&nbsp;<span class="op" id="8303791">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303796">t</span><span class="op" id="8303797">.</span><span class="ident" id="8303798">Errorf</span><span class="op" id="8303804">(</span><span class="string" id="8303805">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8303847">,</span>&nbsp;<span class="builtinfunc" id="8303849">len</span><span class="op" id="8303852">(</span><span class="ident" id="8303853">got</span><span class="op" id="8303856">)</span><span class="op" id="8303857">,</span>&nbsp;<span class="ident" id="8303859">i</span><span class="op" id="8303860">,</span>&nbsp;<span class="builtinfunc" id="8303862">len</span><span class="op" id="8303865">(</span><span class="ident" id="8303866">exp</span><span class="op" id="8303869">)</span><span class="op" id="8303870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303875">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303890">for</span>&nbsp;<span class="ident" id="8303894">j</span><span class="op" id="8303895">,</span>&nbsp;<span class="ident" id="8303897">exp</span>&nbsp;<span class="op" id="8303901">:=</span>&nbsp;<span class="keyword" id="8303904">range</span>&nbsp;<span class="ident" id="8303910">exp</span>&nbsp;<span class="op" id="8303914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303919">got</span>&nbsp;<span class="op" id="8303923">:=</span>&nbsp;<span class="ident" id="8303926">got</span><span class="op" id="8303929">[</span><span class="ident" id="8303930">j</span><span class="op" id="8303931">]</span><span class="op" id="8303932">.</span><span class="ident" id="8303933">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303941">if</span>&nbsp;<span class="ident" id="8303944">got</span>&nbsp;<span class="op" id="8303948">!=</span>&nbsp;<span class="ident" id="8303951">exp</span>&nbsp;<span class="op" id="8303955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303961">t</span><span class="op" id="8303962">.</span><span class="ident" id="8303963">Errorf</span><span class="op" id="8303969">(</span><span class="string" id="8303970">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8304003">,</span>&nbsp;<span class="ident" id="8304005">got</span><span class="op" id="8304008">,</span>&nbsp;<span class="ident" id="8304010">i</span><span class="op" id="8304011">,</span>&nbsp;<span class="ident" id="8304013">exp</span><span class="op" id="8304016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304028">}</span><br>
<span class="lineno">375</span><span class="op" id="8304030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304033">func</span>&nbsp;<span class="ident" id="8304038">getField</span><span class="op" id="8304046">(</span><span class="ident" id="8304047">file</span>&nbsp;<span class="op" id="8304052">*</span><span class="ident" id="8304053">ast</span><span class="op" id="8304056">.</span><span class="ident" id="8304057">File</span><span class="op" id="8304061">,</span>&nbsp;<span class="ident" id="8304063">fieldname</span>&nbsp;<span class="builtintype" id="8304073">string</span><span class="op" id="8304079">)</span>&nbsp;<span class="op" id="8304081">*</span><span class="ident" id="8304082">ast</span><span class="op" id="8304085">.</span><span class="ident" id="8304086">Field</span>&nbsp;<span class="op" id="8304092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304095">parts</span>&nbsp;<span class="op" id="8304101">:=</span>&nbsp;<span class="ident" id="8304104">strings</span><span class="op" id="8304111">.</span><span class="ident" id="8304112">Split</span><span class="op" id="8304117">(</span><span class="ident" id="8304118">fieldname</span><span class="op" id="8304127">,</span>&nbsp;<span class="string" id="8304129">&#34;.&#34;</span><span class="op" id="8304132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304135">for</span>&nbsp;<span class="ident" id="8304139">_</span><span class="op" id="8304140">,</span>&nbsp;<span class="ident" id="8304142">d</span>&nbsp;<span class="op" id="8304144">:=</span>&nbsp;<span class="keyword" id="8304147">range</span>&nbsp;<span class="ident" id="8304153">file</span><span class="op" id="8304157">.</span><span class="ident" id="8304158">Decls</span>&nbsp;<span class="op" id="8304164">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304168">if</span>&nbsp;<span class="ident" id="8304171">d</span><span class="op" id="8304172">,</span>&nbsp;<span class="ident" id="8304174">ok</span>&nbsp;<span class="op" id="8304177">:=</span>&nbsp;<span class="ident" id="8304180">d</span><span class="op" id="8304181">.</span><span class="op" id="8304182">(</span><span class="op" id="8304183">*</span><span class="ident" id="8304184">ast</span><span class="op" id="8304187">.</span><span class="ident" id="8304188">GenDecl</span><span class="op" id="8304195">)</span><span class="op" id="8304196">;</span>&nbsp;<span class="ident" id="8304198">ok</span>&nbsp;<span class="op" id="8304201">&amp;&amp;</span>&nbsp;<span class="ident" id="8304204">d</span><span class="op" id="8304205">.</span><span class="ident" id="8304206">Tok</span>&nbsp;<span class="op" id="8304210">==</span>&nbsp;<span class="ident" id="8304213">token</span><span class="op" id="8304218">.</span><span class="ident" id="8304219">TYPE</span>&nbsp;<span class="op" id="8304224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304229">for</span>&nbsp;<span class="ident" id="8304233">_</span><span class="op" id="8304234">,</span>&nbsp;<span class="ident" id="8304236">s</span>&nbsp;<span class="op" id="8304238">:=</span>&nbsp;<span class="keyword" id="8304241">range</span>&nbsp;<span class="ident" id="8304247">d</span><span class="op" id="8304248">.</span><span class="ident" id="8304249">Specs</span>&nbsp;<span class="op" id="8304255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304261">if</span>&nbsp;<span class="ident" id="8304264">s</span><span class="op" id="8304265">,</span>&nbsp;<span class="ident" id="8304267">ok</span>&nbsp;<span class="op" id="8304270">:=</span>&nbsp;<span class="ident" id="8304273">s</span><span class="op" id="8304274">.</span><span class="op" id="8304275">(</span><span class="op" id="8304276">*</span><span class="ident" id="8304277">ast</span><span class="op" id="8304280">.</span><span class="ident" id="8304281">TypeSpec</span><span class="op" id="8304289">)</span><span class="op" id="8304290">;</span>&nbsp;<span class="ident" id="8304292">ok</span>&nbsp;<span class="op" id="8304295">&amp;&amp;</span>&nbsp;<span class="ident" id="8304298">s</span><span class="op" id="8304299">.</span><span class="ident" id="8304300">Name</span><span class="op" id="8304304">.</span><span class="ident" id="8304305">Name</span>&nbsp;<span class="op" id="8304310">==</span>&nbsp;<span class="ident" id="8304313">parts</span><span class="op" id="8304318">[</span><span class="num" id="8304319">0</span><span class="op" id="8304320">]</span>&nbsp;<span class="op" id="8304322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304329">if</span>&nbsp;<span class="ident" id="8304332">s</span><span class="op" id="8304333">,</span>&nbsp;<span class="ident" id="8304335">ok</span>&nbsp;<span class="op" id="8304338">:=</span>&nbsp;<span class="ident" id="8304341">s</span><span class="op" id="8304342">.</span><span class="ident" id="8304343">Type</span><span class="op" id="8304347">.</span><span class="op" id="8304348">(</span><span class="op" id="8304349">*</span><span class="ident" id="8304350">ast</span><span class="op" id="8304353">.</span><span class="ident" id="8304354">StructType</span><span class="op" id="8304364">)</span><span class="op" id="8304365">;</span>&nbsp;<span class="ident" id="8304367">ok</span>&nbsp;<span class="op" id="8304370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304378">for</span>&nbsp;<span class="ident" id="8304382">_</span><span class="op" id="8304383">,</span>&nbsp;<span class="ident" id="8304385">f</span>&nbsp;<span class="op" id="8304387">:=</span>&nbsp;<span class="keyword" id="8304390">range</span>&nbsp;<span class="ident" id="8304396">s</span><span class="op" id="8304397">.</span><span class="ident" id="8304398">Fields</span><span class="op" id="8304404">.</span><span class="ident" id="8304405">List</span>&nbsp;<span class="op" id="8304410">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304419">for</span>&nbsp;<span class="ident" id="8304423">_</span><span class="op" id="8304424">,</span>&nbsp;<span class="ident" id="8304426">name</span>&nbsp;<span class="op" id="8304431">:=</span>&nbsp;<span class="keyword" id="8304434">range</span>&nbsp;<span class="ident" id="8304440">f</span><span class="op" id="8304441">.</span><span class="ident" id="8304442">Names</span>&nbsp;<span class="op" id="8304448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304458">if</span>&nbsp;<span class="ident" id="8304461">name</span><span class="op" id="8304465">.</span><span class="ident" id="8304466">Name</span>&nbsp;<span class="op" id="8304471">==</span>&nbsp;<span class="ident" id="8304474">parts</span><span class="op" id="8304479">[</span><span class="num" id="8304480">1</span><span class="op" id="8304481">]</span>&nbsp;<span class="op" id="8304483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304494">return</span>&nbsp;<span class="ident" id="8304501">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304520">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304550">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304556">return</span>&nbsp;<span class="ident" id="8304563">nil</span><br>
<span class="lineno"></span><span class="op" id="8304567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8304570">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="8304644">func</span>&nbsp;<span class="ident" id="8304649">commentText</span><span class="op" id="8304660">(</span><span class="ident" id="8304661">c</span>&nbsp;<span class="op" id="8304663">*</span><span class="ident" id="8304664">ast</span><span class="op" id="8304667">.</span><span class="ident" id="8304668">CommentGroup</span><span class="op" id="8304680">)</span>&nbsp;<span class="builtintype" id="8304682">string</span>&nbsp;<span class="op" id="8304689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304692">var</span>&nbsp;<span class="ident" id="8304696">buf</span>&nbsp;<span class="ident" id="8304700">bytes</span><span class="op" id="8304705">.</span><span class="ident" id="8304706">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304714">if</span>&nbsp;<span class="ident" id="8304717">c</span>&nbsp;<span class="op" id="8304719">!=</span>&nbsp;<span class="ident" id="8304722">nil</span>&nbsp;<span class="op" id="8304726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304730">for</span>&nbsp;<span class="ident" id="8304734">_</span><span class="op" id="8304735">,</span>&nbsp;<span class="ident" id="8304737">c</span>&nbsp;<span class="op" id="8304739">:=</span>&nbsp;<span class="keyword" id="8304742">range</span>&nbsp;<span class="ident" id="8304748">c</span><span class="op" id="8304749">.</span><span class="ident" id="8304750">List</span>&nbsp;<span class="op" id="8304755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304760">buf</span><span class="op" id="8304763">.</span><span class="ident" id="8304764">WriteString</span><span class="op" id="8304775">(</span><span class="ident" id="8304776">c</span><span class="op" id="8304777">.</span><span class="ident" id="8304778">Text</span><span class="op" id="8304782">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304792">return</span>&nbsp;<span class="ident" id="8304799">buf</span><span class="op" id="8304802">.</span><span class="ident" id="8304803">String</span><span class="op" id="8304809">(</span><span class="op" id="8304810">)</span><br>
<span class="lineno"></span><span class="op" id="8304812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8304815">func</span>&nbsp;<span class="ident" id="8304820">checkFieldComments</span><span class="op" id="8304838">(</span><span class="ident" id="8304839">t</span>&nbsp;<span class="op" id="8304841">*</span><span class="ident" id="8304842">testing</span><span class="op" id="8304849">.</span><span class="ident" id="8304850">T</span><span class="op" id="8304851">,</span>&nbsp;<span class="ident" id="8304853">file</span>&nbsp;<span class="op" id="8304858">*</span><span class="ident" id="8304859">ast</span><span class="op" id="8304862">.</span><span class="ident" id="8304863">File</span><span class="op" id="8304867">,</span>&nbsp;<span class="ident" id="8304869">fieldname</span><span class="op" id="8304878">,</span>&nbsp;<span class="ident" id="8304880">lead</span><span class="op" id="8304884">,</span>&nbsp;<span class="ident" id="8304886">line</span>&nbsp;<span class="builtintype" id="8304891">string</span><span class="op" id="8304897">)</span>&nbsp;<span class="op" id="8304899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304902">f</span>&nbsp;<span class="op" id="8304904">:=</span>&nbsp;<span class="ident" id="8304907">getField</span><span class="op" id="8304915">(</span><span class="ident" id="8304916">file</span><span class="op" id="8304920">,</span>&nbsp;<span class="ident" id="8304922">fieldname</span><span class="op" id="8304931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304934">if</span>&nbsp;<span class="ident" id="8304937">f</span>&nbsp;<span class="op" id="8304939">==</span>&nbsp;<span class="ident" id="8304942">nil</span>&nbsp;<span class="op" id="8304946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304950">t</span><span class="op" id="8304951">.</span><span class="ident" id="8304952">Fatalf</span><span class="op" id="8304958">(</span><span class="string" id="8304959">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="8304980">,</span>&nbsp;<span class="ident" id="8304982">fieldname</span><span class="op" id="8304991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304994">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304997">if</span>&nbsp;<span class="ident" id="8305000">got</span>&nbsp;<span class="op" id="8305004">:=</span>&nbsp;<span class="ident" id="8305007">commentText</span><span class="op" id="8305018">(</span><span class="ident" id="8305019">f</span><span class="op" id="8305020">.</span><span class="ident" id="8305021">Doc</span><span class="op" id="8305024">)</span><span class="op" id="8305025">;</span>&nbsp;<span class="ident" id="8305027">got</span>&nbsp;<span class="op" id="8305031">!=</span>&nbsp;<span class="ident" id="8305034">lead</span>&nbsp;<span class="op" id="8305039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305043">t</span><span class="op" id="8305044">.</span><span class="ident" id="8305045">Errorf</span><span class="op" id="8305051">(</span><span class="string" id="8305052">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8305086">,</span>&nbsp;<span class="ident" id="8305088">got</span><span class="op" id="8305091">,</span>&nbsp;<span class="ident" id="8305093">lead</span><span class="op" id="8305097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305103">if</span>&nbsp;<span class="ident" id="8305106">got</span>&nbsp;<span class="op" id="8305110">:=</span>&nbsp;<span class="ident" id="8305113">commentText</span><span class="op" id="8305124">(</span><span class="ident" id="8305125">f</span><span class="op" id="8305126">.</span><span class="ident" id="8305127">Comment</span><span class="op" id="8305134">)</span><span class="op" id="8305135">;</span>&nbsp;<span class="ident" id="8305137">got</span>&nbsp;<span class="op" id="8305141">!=</span>&nbsp;<span class="ident" id="8305144">line</span>&nbsp;<span class="op" id="8305149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305153">t</span><span class="op" id="8305154">.</span><span class="ident" id="8305155">Errorf</span><span class="op" id="8305161">(</span><span class="string" id="8305162">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8305196">,</span>&nbsp;<span class="ident" id="8305198">got</span><span class="op" id="8305201">,</span>&nbsp;<span class="ident" id="8305203">line</span><span class="op" id="8305207">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305210">}</span><br>
<span class="lineno"></span><span class="op" id="8305212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305215">func</span>&nbsp;<span class="ident" id="8305220">TestLeadAndLineComments</span><span class="op" id="8305243">(</span><span class="ident" id="8305244">t</span>&nbsp;<span class="op" id="8305246">*</span><span class="ident" id="8305247">testing</span><span class="op" id="8305254">.</span><span class="ident" id="8305255">T</span><span class="op" id="8305256">)</span>&nbsp;<span class="op" id="8305258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305261">f</span><span class="op" id="8305262">,</span>&nbsp;<span class="ident" id="8305264">err</span>&nbsp;<span class="op" id="8305268">:=</span>&nbsp;<span class="ident" id="8305271">ParseFile</span><span class="op" id="8305280">(</span><span class="ident" id="8305281">fset</span><span class="op" id="8305285">,</span>&nbsp;<span class="string" id="8305287">&#34;&#34;</span><span class="op" id="8305289">,</span>&nbsp;<span class="string" id="8305291">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8305483">,</span>&nbsp;<span class="ident" id="8305485">ParseComments</span><span class="op" id="8305498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305501">if</span>&nbsp;<span class="ident" id="8305504">err</span>&nbsp;<span class="op" id="8305508">!=</span>&nbsp;<span class="ident" id="8305511">nil</span>&nbsp;<span class="op" id="8305515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305519">t</span><span class="op" id="8305520">.</span><span class="ident" id="8305521">Fatal</span><span class="op" id="8305526">(</span><span class="ident" id="8305527">err</span><span class="op" id="8305530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305533">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305536">checkFieldComments</span><span class="op" id="8305554">(</span><span class="ident" id="8305555">t</span><span class="op" id="8305556">,</span>&nbsp;<span class="ident" id="8305558">f</span><span class="op" id="8305559">,</span>&nbsp;<span class="string" id="8305561">&#34;T.F1&#34;</span><span class="op" id="8305567">,</span>&nbsp;<span class="string" id="8305569">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8305594">,</span>&nbsp;<span class="string" id="8305596">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8305621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305624">checkFieldComments</span><span class="op" id="8305642">(</span><span class="ident" id="8305643">t</span><span class="op" id="8305644">,</span>&nbsp;<span class="ident" id="8305646">f</span><span class="op" id="8305647">,</span>&nbsp;<span class="string" id="8305649">&#34;T.F2&#34;</span><span class="op" id="8305655">,</span>&nbsp;<span class="string" id="8305657">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8305679">,</span>&nbsp;<span class="string" id="8305681">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8305701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305704">checkFieldComments</span><span class="op" id="8305722">(</span><span class="ident" id="8305723">t</span><span class="op" id="8305724">,</span>&nbsp;<span class="ident" id="8305726">f</span><span class="op" id="8305727">,</span>&nbsp;<span class="string" id="8305729">&#34;T.f3&#34;</span><span class="op" id="8305735">,</span>&nbsp;<span class="string" id="8305737">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="8305757">,</span>&nbsp;<span class="string" id="8305759">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8305779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305782">ast</span><span class="op" id="8305785">.</span><span class="ident" id="8305786">FileExports</span><span class="op" id="8305797">(</span><span class="ident" id="8305798">f</span><span class="op" id="8305799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305802">checkFieldComments</span><span class="op" id="8305820">(</span><span class="ident" id="8305821">t</span><span class="op" id="8305822">,</span>&nbsp;<span class="ident" id="8305824">f</span><span class="op" id="8305825">,</span>&nbsp;<span class="string" id="8305827">&#34;T.F1&#34;</span><span class="op" id="8305833">,</span>&nbsp;<span class="string" id="8305835">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8305860">,</span>&nbsp;<span class="string" id="8305862">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8305887">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305890">checkFieldComments</span><span class="op" id="8305908">(</span><span class="ident" id="8305909">t</span><span class="op" id="8305910">,</span>&nbsp;<span class="ident" id="8305912">f</span><span class="op" id="8305913">,</span>&nbsp;<span class="string" id="8305915">&#34;T.F2&#34;</span><span class="op" id="8305921">,</span>&nbsp;<span class="string" id="8305923">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8305945">,</span>&nbsp;<span class="string" id="8305947">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8305967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305970">if</span>&nbsp;<span class="ident" id="8305973">getField</span><span class="op" id="8305981">(</span><span class="ident" id="8305982">f</span><span class="op" id="8305983">,</span>&nbsp;<span class="string" id="8305985">&#34;T.f3&#34;</span><span class="op" id="8305991">)</span>&nbsp;<span class="op" id="8305993">!=</span>&nbsp;<span class="ident" id="8305996">nil</span>&nbsp;<span class="op" id="8306000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306004">t</span><span class="op" id="8306005">.</span><span class="ident" id="8306006">Error</span><span class="op" id="8306011">(</span><span class="string" id="8306012">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="8306039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306042">}</span><br>
<span class="lineno"></span><span class="op" id="8306044">}</span>
</div>
</body>
</html>
