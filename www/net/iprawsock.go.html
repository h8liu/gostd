<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2618945">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2619001">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2619055">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2619106">package</span>&nbsp;<span class="ident" id="2619114">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2619119">//&nbsp;IPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;an&nbsp;IP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="2619172">type</span>&nbsp;<span class="ident" id="2619177">IPAddr</span>&nbsp;<span class="keyword" id="2619184">struct</span>&nbsp;<span class="op" id="2619191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619194">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2619199"><a href="/net/ip.go.html#2604330">IP</a></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619203">Zone</span>&nbsp;<span class="builtintype" id="2619208">string</span>&nbsp;<span class="comment" id="2619215">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="2619246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2619249">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;ip&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2619302">func</span>&nbsp;<span class="op" id="2619307">(</span><span class="ident" id="2619308">a</span>&nbsp;<span class="op" id="2619310">*</span><span class="ident" id="2619311"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2619317">)</span>&nbsp;<span class="ident" id="2619319">Network</span><span class="op" id="2619326">(</span><span class="op" id="2619327">)</span>&nbsp;<span class="builtintype" id="2619329">string</span>&nbsp;<span class="op" id="2619336">{</span>&nbsp;<span class="keyword" id="2619338">return</span>&nbsp;<span class="string" id="2619345">&#34;ip&#34;</span>&nbsp;<span class="op" id="2619350">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="2619353">func</span>&nbsp;<span class="op" id="2619358">(</span><span class="ident" id="2619359">a</span>&nbsp;<span class="op" id="2619361">*</span><span class="ident" id="2619362"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2619368">)</span>&nbsp;<span class="ident" id="2619370">String</span><span class="op" id="2619376">(</span><span class="op" id="2619377">)</span>&nbsp;<span class="builtintype" id="2619379">string</span>&nbsp;<span class="op" id="2619386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619389">if</span>&nbsp;<span class="ident" id="2619392"><a href="/net/iprawsock.go.html#2619359">a</a></span>&nbsp;<span class="op" id="2619394">==</span>&nbsp;<span class="ident" id="2619397">nil</span>&nbsp;<span class="op" id="2619401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619405">return</span>&nbsp;<span class="string" id="2619412">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619421">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619424">if</span>&nbsp;<span class="ident" id="2619427"><a href="/net/iprawsock.go.html#2619359">a</a></span><span class="op" id="2619428">.</span><span class="ident" id="2619429">Zone</span>&nbsp;<span class="op" id="2619434">!=</span>&nbsp;<span class="string" id="2619437">&#34;&#34;</span>&nbsp;<span class="op" id="2619440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619444">return</span>&nbsp;<span class="ident" id="2619451"><a href="/net/iprawsock.go.html#2619359">a</a></span><span class="op" id="2619452">.</span><span class="ident" id="2619453">IP</span><span class="op" id="2619455">.</span><span class="ident" id="2619456">String</span><span class="op" id="2619462">(</span><span class="op" id="2619463">)</span>&nbsp;<span class="op" id="2619465">+</span>&nbsp;<span class="string" id="2619467">&#34;%&#34;</span>&nbsp;<span class="op" id="2619471">+</span>&nbsp;<span class="ident" id="2619473"><a href="/net/iprawsock.go.html#2619359">a</a></span><span class="op" id="2619474">.</span><span class="ident" id="2619475">Zone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619484">return</span>&nbsp;<span class="ident" id="2619491"><a href="/net/iprawsock.go.html#2619359">a</a></span><span class="op" id="2619492">.</span><span class="ident" id="2619493">IP</span><span class="op" id="2619495">.</span><span class="ident" id="2619496">String</span><span class="op" id="2619502">(</span><span class="op" id="2619503">)</span><br>
<span class="lineno"></span><span class="op" id="2619505">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2619508">func</span>&nbsp;<span class="op" id="2619513">(</span><span class="ident" id="2619514">a</span>&nbsp;<span class="op" id="2619516">*</span><span class="ident" id="2619517"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2619523">)</span>&nbsp;<span class="ident" id="2619525">toAddr</span><span class="op" id="2619531">(</span><span class="op" id="2619532">)</span>&nbsp;<span class="ident" id="2619534"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2619539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619542">if</span>&nbsp;<span class="ident" id="2619545"><a href="/net/iprawsock.go.html#2619514">a</a></span>&nbsp;<span class="op" id="2619547">==</span>&nbsp;<span class="ident" id="2619550">nil</span>&nbsp;<span class="op" id="2619554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619558">return</span>&nbsp;<span class="ident" id="2619565">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619570">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619573">return</span>&nbsp;<span class="ident" id="2619580"><a href="/net/iprawsock.go.html#2619514">a</a></span><br>
<span class="lineno"></span><span class="op" id="2619582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2619585">//&nbsp;ResolveIPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;an&nbsp;IP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2619653">//&nbsp;&#34;ipv6-host%zone&#34;&nbsp;and&nbsp;resolves&nbsp;the&nbsp;domain&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,</span><br>
<span class="lineno">35</span><span class="comment" id="2619722">//&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;&nbsp;or&nbsp;&#34;ip6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2619761">func</span>&nbsp;<span class="ident" id="2619766">ResolveIPAddr</span><span class="op" id="2619779">(</span><span class="ident" id="2619780">net</span><span class="op" id="2619783">,</span>&nbsp;<span class="ident" id="2619785">addr</span>&nbsp;<span class="builtintype" id="2619790">string</span><span class="op" id="2619796">)</span>&nbsp;<span class="op" id="2619798">(</span><span class="op" id="2619799">*</span><span class="ident" id="2619800"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2619806">,</span>&nbsp;<span class="builtintype" id="2619808">error</span><span class="op" id="2619813">)</span>&nbsp;<span class="op" id="2619815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619818">if</span>&nbsp;<span class="ident" id="2619821"><a href="/net/iprawsock.go.html#2619780">net</a></span>&nbsp;<span class="op" id="2619825">==</span>&nbsp;<span class="string" id="2619828">&#34;&#34;</span>&nbsp;<span class="op" id="2619831">{</span>&nbsp;<span class="comment" id="2619833">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619887"><a href="/net/iprawsock.go.html#2619780">net</a></span>&nbsp;<span class="op" id="2619891">=</span>&nbsp;<span class="string" id="2619893">&#34;ip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619899">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619902">afnet</span><span class="op" id="2619907">,</span>&nbsp;<span class="ident" id="2619909">_</span><span class="op" id="2619910">,</span>&nbsp;<span class="ident" id="2619912">err</span>&nbsp;<span class="op" id="2619916">:=</span>&nbsp;<span class="ident" id="2619919"><a href="/net/dial.go.html#2519499">parseNetwork</a></span><span class="op" id="2619931">(</span><span class="ident" id="2619932"><a href="/net/iprawsock.go.html#2619780">net</a></span><span class="op" id="2619935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619938">if</span>&nbsp;<span class="ident" id="2619941"><a href="/net/iprawsock.go.html#2619912">err</a></span>&nbsp;<span class="op" id="2619945">!=</span>&nbsp;<span class="ident" id="2619948">nil</span>&nbsp;<span class="op" id="2619952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619956">return</span>&nbsp;<span class="ident" id="2619963">nil</span><span class="op" id="2619966">,</span>&nbsp;<span class="ident" id="2619968"><a href="/net/iprawsock.go.html#2619912">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619976">switch</span>&nbsp;<span class="ident" id="2619983"><a href="/net/iprawsock.go.html#2619902">afnet</a></span>&nbsp;<span class="op" id="2619989">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619992">case</span>&nbsp;<span class="string" id="2619997">&#34;ip&#34;</span><span class="op" id="2620001">,</span>&nbsp;<span class="string" id="2620003">&#34;ip4&#34;</span><span class="op" id="2620008">,</span>&nbsp;<span class="string" id="2620010">&#34;ip6&#34;</span><span class="op" id="2620015">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620018">default</span><span class="op" id="2620025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620029">return</span>&nbsp;<span class="ident" id="2620036">nil</span><span class="op" id="2620039">,</span>&nbsp;<span class="ident" id="2620041"><a href="/net/net.go.html#2661008">UnknownNetworkError</a></span><span class="op" id="2620060">(</span><span class="ident" id="2620061"><a href="/net/iprawsock.go.html#2619780">net</a></span><span class="op" id="2620064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620070">a</span><span class="op" id="2620071">,</span>&nbsp;<span class="ident" id="2620073"><a href="/net/iprawsock.go.html#2619912">err</a></span>&nbsp;<span class="op" id="2620077">:=</span>&nbsp;<span class="ident" id="2620080"><a href="/net/ipsock.go.html#2633734">resolveInternetAddr</a></span><span class="op" id="2620099">(</span><span class="ident" id="2620100"><a href="/net/iprawsock.go.html#2619902">afnet</a></span><span class="op" id="2620105">,</span>&nbsp;<span class="ident" id="2620107"><a href="/net/iprawsock.go.html#2619785">addr</a></span><span class="op" id="2620111">,</span>&nbsp;<span class="ident" id="2620113"><a href="/net/net.go.html#2660335">noDeadline</a></span><span class="op" id="2620123">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620126">if</span>&nbsp;<span class="ident" id="2620129"><a href="/net/iprawsock.go.html#2619912">err</a></span>&nbsp;<span class="op" id="2620133">!=</span>&nbsp;<span class="ident" id="2620136">nil</span>&nbsp;<span class="op" id="2620140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620144">return</span>&nbsp;<span class="ident" id="2620151">nil</span><span class="op" id="2620154">,</span>&nbsp;<span class="ident" id="2620156"><a href="/net/iprawsock.go.html#2619912">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620164">return</span>&nbsp;<span class="ident" id="2620171"><a href="/net/iprawsock.go.html#2620070">a</a></span><span class="op" id="2620172">.</span><span class="ident" id="2620173">toAddr</span><span class="op" id="2620179">(</span><span class="op" id="2620180">)</span><span class="op" id="2620181">.</span><span class="op" id="2620182">(</span><span class="op" id="2620183">*</span><span class="ident" id="2620184"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2620190">)</span><span class="op" id="2620191">,</span>&nbsp;<span class="ident" id="2620193">nil</span><br>
<span class="lineno"></span><span class="op" id="2620197">}</span>
</div>
</body>
</html>
