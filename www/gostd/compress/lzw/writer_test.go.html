<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7474037">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7474092">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7474146">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7474197">package</span>&nbsp;<span class="ident" id="7474205">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7474210">import</span>&nbsp;<span class="op" id="7474217">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474220">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474226">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474239">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474245">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474256">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7474266">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7474269">var</span>&nbsp;<span class="ident" id="7474273">filenames</span>&nbsp;<span class="op" id="7474283">=</span>&nbsp;<span class="op" id="7474285">[</span><span class="op" id="7474286">]</span><span class="builtintype" id="7474287">string</span><span class="op" id="7474293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474296">&#34;../testdata/e.txt&#34;</span><span class="op" id="7474315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7474318">&#34;../testdata/pi.txt&#34;</span><span class="op" id="7474338">,</span><br>
<span class="lineno"></span><span class="op" id="7474340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7474343">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="7474421">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="7474488">func</span>&nbsp;<span class="ident" id="7474493">testFile</span><span class="op" id="7474501">(</span><span class="ident" id="7474502">t</span>&nbsp;<span class="op" id="7474504">*</span><span class="ident" id="7474505">testing</span><span class="op" id="7474512">.</span><span class="ident" id="7474513">T</span><span class="op" id="7474514">,</span>&nbsp;<span class="ident" id="7474516">fn</span>&nbsp;<span class="builtintype" id="7474519">string</span><span class="op" id="7474525">,</span>&nbsp;<span class="ident" id="7474527">order</span>&nbsp;<span class="ident" id="7474533">Order</span><span class="op" id="7474538">,</span>&nbsp;<span class="ident" id="7474540">litWidth</span>&nbsp;<span class="builtintype" id="7474549">int</span><span class="op" id="7474552">)</span>&nbsp;<span class="op" id="7474554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7474557">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7474594">golden</span><span class="op" id="7474600">,</span>&nbsp;<span class="ident" id="7474602">err</span>&nbsp;<span class="op" id="7474606">:=</span>&nbsp;<span class="ident" id="7474609">os</span><span class="op" id="7474611">.</span><span class="ident" id="7474612">Open</span><span class="op" id="7474616">(</span><span class="ident" id="7474617">fn</span><span class="op" id="7474619">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7474622">if</span>&nbsp;<span class="ident" id="7474625">err</span>&nbsp;<span class="op" id="7474629">!=</span>&nbsp;<span class="ident" id="7474632">nil</span>&nbsp;<span class="op" id="7474636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7474640">t</span><span class="op" id="7474641">.</span><span class="ident" id="7474642">Errorf</span><span class="op" id="7474648">(</span><span class="string" id="7474649">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7474680">,</span>&nbsp;<span class="ident" id="7474682">fn</span><span class="op" id="7474684">,</span>&nbsp;<span class="ident" id="7474686">order</span><span class="op" id="7474691">,</span>&nbsp;<span class="ident" id="7474693">litWidth</span><span class="op" id="7474701">,</span>&nbsp;<span class="ident" id="7474703">err</span><span class="op" id="7474706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7474710">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7474718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7474721">defer</span>&nbsp;<span class="ident" id="7474727">golden</span><span class="op" id="7474733">.</span><span class="ident" id="7474734">Close</span><span class="op" id="7474739">(</span><span class="op" id="7474740">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7474744">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7474864">raw</span><span class="op" id="7474867">,</span>&nbsp;<span class="ident" id="7474869">err</span>&nbsp;<span class="op" id="7474873">:=</span>&nbsp;<span class="ident" id="7474876">os</span><span class="op" id="7474878">.</span><span class="ident" id="7474879">Open</span><span class="op" id="7474883">(</span><span class="ident" id="7474884">fn</span><span class="op" id="7474886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7474889">if</span>&nbsp;<span class="ident" id="7474892">err</span>&nbsp;<span class="op" id="7474896">!=</span>&nbsp;<span class="ident" id="7474899">nil</span>&nbsp;<span class="op" id="7474903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7474907">t</span><span class="op" id="7474908">.</span><span class="ident" id="7474909">Errorf</span><span class="op" id="7474915">(</span><span class="string" id="7474916">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7474947">,</span>&nbsp;<span class="ident" id="7474949">fn</span><span class="op" id="7474951">,</span>&nbsp;<span class="ident" id="7474953">order</span><span class="op" id="7474958">,</span>&nbsp;<span class="ident" id="7474960">litWidth</span><span class="op" id="7474968">,</span>&nbsp;<span class="ident" id="7474970">err</span><span class="op" id="7474973">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7474977">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7474985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7474989">piper</span><span class="op" id="7474994">,</span>&nbsp;<span class="ident" id="7474996">pipew</span>&nbsp;<span class="op" id="7475002">:=</span>&nbsp;<span class="ident" id="7475005">io</span><span class="op" id="7475007">.</span><span class="ident" id="7475008">Pipe</span><span class="op" id="7475012">(</span><span class="op" id="7475013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475016">defer</span>&nbsp;<span class="ident" id="7475022">piper</span><span class="op" id="7475027">.</span><span class="ident" id="7475028">Close</span><span class="op" id="7475033">(</span><span class="op" id="7475034">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475037">go</span>&nbsp;<span class="keyword" id="7475040">func</span><span class="op" id="7475044">(</span><span class="op" id="7475045">)</span>&nbsp;<span class="op" id="7475047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475051">defer</span>&nbsp;<span class="ident" id="7475057">raw</span><span class="op" id="7475060">.</span><span class="ident" id="7475061">Close</span><span class="op" id="7475066">(</span><span class="op" id="7475067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475071">defer</span>&nbsp;<span class="ident" id="7475077">pipew</span><span class="op" id="7475082">.</span><span class="ident" id="7475083">Close</span><span class="op" id="7475088">(</span><span class="op" id="7475089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475093">lzww</span>&nbsp;<span class="op" id="7475098">:=</span>&nbsp;<span class="ident" id="7475101">NewWriter</span><span class="op" id="7475110">(</span><span class="ident" id="7475111">pipew</span><span class="op" id="7475116">,</span>&nbsp;<span class="ident" id="7475118">order</span><span class="op" id="7475123">,</span>&nbsp;<span class="ident" id="7475125">litWidth</span><span class="op" id="7475133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475137">defer</span>&nbsp;<span class="ident" id="7475143">lzww</span><span class="op" id="7475147">.</span><span class="ident" id="7475148">Close</span><span class="op" id="7475153">(</span><span class="op" id="7475154">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475158">var</span>&nbsp;<span class="ident" id="7475162">b</span>&nbsp;<span class="op" id="7475164">[</span><span class="num" id="7475165">4096</span><span class="op" id="7475169">]</span><span class="builtintype" id="7475170">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475177">for</span>&nbsp;<span class="op" id="7475181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475186">n</span><span class="op" id="7475187">,</span>&nbsp;<span class="ident" id="7475189">err0</span>&nbsp;<span class="op" id="7475194">:=</span>&nbsp;<span class="ident" id="7475197">raw</span><span class="op" id="7475200">.</span><span class="ident" id="7475201">Read</span><span class="op" id="7475205">(</span><span class="ident" id="7475206">b</span><span class="op" id="7475207">[</span><span class="op" id="7475208">:</span><span class="op" id="7475209">]</span><span class="op" id="7475210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475215">if</span>&nbsp;<span class="ident" id="7475218">err0</span>&nbsp;<span class="op" id="7475223">!=</span>&nbsp;<span class="ident" id="7475226">nil</span>&nbsp;<span class="op" id="7475230">&amp;&amp;</span>&nbsp;<span class="ident" id="7475233">err0</span>&nbsp;<span class="op" id="7475238">!=</span>&nbsp;<span class="ident" id="7475241">io</span><span class="op" id="7475243">.</span><span class="ident" id="7475244">EOF</span>&nbsp;<span class="op" id="7475248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475254">t</span><span class="op" id="7475255">.</span><span class="ident" id="7475256">Errorf</span><span class="op" id="7475262">(</span><span class="string" id="7475263">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7475294">,</span>&nbsp;<span class="ident" id="7475296">fn</span><span class="op" id="7475298">,</span>&nbsp;<span class="ident" id="7475300">order</span><span class="op" id="7475305">,</span>&nbsp;<span class="ident" id="7475307">litWidth</span><span class="op" id="7475315">,</span>&nbsp;<span class="ident" id="7475317">err0</span><span class="op" id="7475321">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475327">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475342">_</span><span class="op" id="7475343">,</span>&nbsp;<span class="ident" id="7475345">err1</span>&nbsp;<span class="op" id="7475350">:=</span>&nbsp;<span class="ident" id="7475353">lzww</span><span class="op" id="7475357">.</span><span class="ident" id="7475358">Write</span><span class="op" id="7475363">(</span><span class="ident" id="7475364">b</span><span class="op" id="7475365">[</span><span class="op" id="7475366">:</span><span class="ident" id="7475367">n</span><span class="op" id="7475368">]</span><span class="op" id="7475369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475374">if</span>&nbsp;<span class="ident" id="7475377">err1</span>&nbsp;<span class="op" id="7475382">!=</span>&nbsp;<span class="ident" id="7475385">nil</span>&nbsp;<span class="op" id="7475389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475395">t</span><span class="op" id="7475396">.</span><span class="ident" id="7475397">Errorf</span><span class="op" id="7475403">(</span><span class="string" id="7475404">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7475435">,</span>&nbsp;<span class="ident" id="7475437">fn</span><span class="op" id="7475439">,</span>&nbsp;<span class="ident" id="7475441">order</span><span class="op" id="7475446">,</span>&nbsp;<span class="ident" id="7475448">litWidth</span><span class="op" id="7475456">,</span>&nbsp;<span class="ident" id="7475458">err1</span><span class="op" id="7475462">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475468">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475483">if</span>&nbsp;<span class="ident" id="7475486">err0</span>&nbsp;<span class="op" id="7475491">==</span>&nbsp;<span class="ident" id="7475494">io</span><span class="op" id="7475496">.</span><span class="ident" id="7475497">EOF</span>&nbsp;<span class="op" id="7475501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475507">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475516">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475523">}</span><span class="op" id="7475524">(</span><span class="op" id="7475525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475528">lzwr</span>&nbsp;<span class="op" id="7475533">:=</span>&nbsp;<span class="ident" id="7475536">NewReader</span><span class="op" id="7475545">(</span><span class="ident" id="7475546">piper</span><span class="op" id="7475551">,</span>&nbsp;<span class="ident" id="7475553">order</span><span class="op" id="7475558">,</span>&nbsp;<span class="ident" id="7475560">litWidth</span><span class="op" id="7475568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475571">defer</span>&nbsp;<span class="ident" id="7475577">lzwr</span><span class="op" id="7475581">.</span><span class="ident" id="7475582">Close</span><span class="op" id="7475587">(</span><span class="op" id="7475588">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7475592">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475613">b0</span><span class="op" id="7475615">,</span>&nbsp;<span class="ident" id="7475617">err0</span>&nbsp;<span class="op" id="7475622">:=</span>&nbsp;<span class="ident" id="7475625">ioutil</span><span class="op" id="7475631">.</span><span class="ident" id="7475632">ReadAll</span><span class="op" id="7475639">(</span><span class="ident" id="7475640">golden</span><span class="op" id="7475646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475649">b1</span><span class="op" id="7475651">,</span>&nbsp;<span class="ident" id="7475653">err1</span>&nbsp;<span class="op" id="7475658">:=</span>&nbsp;<span class="ident" id="7475661">ioutil</span><span class="op" id="7475667">.</span><span class="ident" id="7475668">ReadAll</span><span class="op" id="7475675">(</span><span class="ident" id="7475676">lzwr</span><span class="op" id="7475680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475683">if</span>&nbsp;<span class="ident" id="7475686">err0</span>&nbsp;<span class="op" id="7475691">!=</span>&nbsp;<span class="ident" id="7475694">nil</span>&nbsp;<span class="op" id="7475698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475702">t</span><span class="op" id="7475703">.</span><span class="ident" id="7475704">Errorf</span><span class="op" id="7475710">(</span><span class="string" id="7475711">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7475742">,</span>&nbsp;<span class="ident" id="7475744">fn</span><span class="op" id="7475746">,</span>&nbsp;<span class="ident" id="7475748">order</span><span class="op" id="7475753">,</span>&nbsp;<span class="ident" id="7475755">litWidth</span><span class="op" id="7475763">,</span>&nbsp;<span class="ident" id="7475765">err0</span><span class="op" id="7475769">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475773">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475784">if</span>&nbsp;<span class="ident" id="7475787">err1</span>&nbsp;<span class="op" id="7475792">!=</span>&nbsp;<span class="ident" id="7475795">nil</span>&nbsp;<span class="op" id="7475799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475803">t</span><span class="op" id="7475804">.</span><span class="ident" id="7475805">Errorf</span><span class="op" id="7475811">(</span><span class="string" id="7475812">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7475843">,</span>&nbsp;<span class="ident" id="7475845">fn</span><span class="op" id="7475847">,</span>&nbsp;<span class="ident" id="7475849">order</span><span class="op" id="7475854">,</span>&nbsp;<span class="ident" id="7475856">litWidth</span><span class="op" id="7475864">,</span>&nbsp;<span class="ident" id="7475866">err1</span><span class="op" id="7475870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475874">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7475882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7475885">if</span>&nbsp;<span class="builtinfunc" id="7475888">len</span><span class="op" id="7475891">(</span><span class="ident" id="7475892">b1</span><span class="op" id="7475894">)</span>&nbsp;<span class="op" id="7475896">!=</span>&nbsp;<span class="builtinfunc" id="7475899">len</span><span class="op" id="7475902">(</span><span class="ident" id="7475903">b0</span><span class="op" id="7475905">)</span>&nbsp;<span class="op" id="7475907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7475911">t</span><span class="op" id="7475912">.</span><span class="ident" id="7475913">Errorf</span><span class="op" id="7475919">(</span><span class="string" id="7475920">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="7475973">,</span>&nbsp;<span class="ident" id="7475975">fn</span><span class="op" id="7475977">,</span>&nbsp;<span class="ident" id="7475979">order</span><span class="op" id="7475984">,</span>&nbsp;<span class="ident" id="7475986">litWidth</span><span class="op" id="7475994">,</span>&nbsp;<span class="builtinfunc" id="7475996">len</span><span class="op" id="7475999">(</span><span class="ident" id="7476000">b1</span><span class="op" id="7476002">)</span><span class="op" id="7476003">,</span>&nbsp;<span class="builtinfunc" id="7476005">len</span><span class="op" id="7476008">(</span><span class="ident" id="7476009">b0</span><span class="op" id="7476011">)</span><span class="op" id="7476012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476016">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476024">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476027">for</span>&nbsp;<span class="ident" id="7476031">i</span>&nbsp;<span class="op" id="7476033">:=</span>&nbsp;<span class="num" id="7476036">0</span><span class="op" id="7476037">;</span>&nbsp;<span class="ident" id="7476039">i</span>&nbsp;<span class="op" id="7476041">&lt;</span>&nbsp;<span class="builtinfunc" id="7476043">len</span><span class="op" id="7476046">(</span><span class="ident" id="7476047">b0</span><span class="op" id="7476049">)</span><span class="op" id="7476050">;</span>&nbsp;<span class="ident" id="7476052">i</span><span class="op" id="7476053">++</span>&nbsp;<span class="op" id="7476056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476060">if</span>&nbsp;<span class="ident" id="7476063">b1</span><span class="op" id="7476065">[</span><span class="ident" id="7476066">i</span><span class="op" id="7476067">]</span>&nbsp;<span class="op" id="7476069">!=</span>&nbsp;<span class="ident" id="7476072">b0</span><span class="op" id="7476074">[</span><span class="ident" id="7476075">i</span><span class="op" id="7476076">]</span>&nbsp;<span class="op" id="7476078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476083">t</span><span class="op" id="7476084">.</span><span class="ident" id="7476085">Errorf</span><span class="op" id="7476091">(</span><span class="string" id="7476092">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="7476155">,</span>&nbsp;<span class="ident" id="7476157">fn</span><span class="op" id="7476159">,</span>&nbsp;<span class="ident" id="7476161">order</span><span class="op" id="7476166">,</span>&nbsp;<span class="ident" id="7476168">litWidth</span><span class="op" id="7476176">,</span>&nbsp;<span class="ident" id="7476178">i</span><span class="op" id="7476179">,</span>&nbsp;<span class="ident" id="7476181">b1</span><span class="op" id="7476183">[</span><span class="ident" id="7476184">i</span><span class="op" id="7476185">]</span><span class="op" id="7476186">,</span>&nbsp;<span class="ident" id="7476188">b0</span><span class="op" id="7476190">[</span><span class="ident" id="7476191">i</span><span class="op" id="7476192">]</span><span class="op" id="7476193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476198">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476207">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476210">}</span><br>
<span class="lineno"></span><span class="op" id="7476212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7476215">func</span>&nbsp;<span class="ident" id="7476220">TestWriter</span><span class="op" id="7476230">(</span><span class="ident" id="7476231">t</span>&nbsp;<span class="op" id="7476233">*</span><span class="ident" id="7476234">testing</span><span class="op" id="7476241">.</span><span class="ident" id="7476242">T</span><span class="op" id="7476243">)</span>&nbsp;<span class="op" id="7476245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476248">for</span>&nbsp;<span class="ident" id="7476252">_</span><span class="op" id="7476253">,</span>&nbsp;<span class="ident" id="7476255">filename</span>&nbsp;<span class="op" id="7476264">:=</span>&nbsp;<span class="keyword" id="7476267">range</span>&nbsp;<span class="ident" id="7476273">filenames</span>&nbsp;<span class="op" id="7476283">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476287">for</span>&nbsp;<span class="ident" id="7476291">_</span><span class="op" id="7476292">,</span>&nbsp;<span class="ident" id="7476294">order</span>&nbsp;<span class="op" id="7476300">:=</span>&nbsp;<span class="keyword" id="7476303">range</span>&nbsp;<span class="op" id="7476309">[</span><span class="op" id="7476310">...</span><span class="op" id="7476313">]</span><span class="ident" id="7476314">Order</span><span class="op" id="7476319">{</span><span class="ident" id="7476320">LSB</span><span class="op" id="7476323">,</span>&nbsp;<span class="ident" id="7476325">MSB</span><span class="op" id="7476328">}</span>&nbsp;<span class="op" id="7476330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7476335">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476415">for</span>&nbsp;<span class="ident" id="7476419">_</span><span class="op" id="7476420">,</span>&nbsp;<span class="ident" id="7476422">litWidth</span>&nbsp;<span class="op" id="7476431">:=</span>&nbsp;<span class="keyword" id="7476434">range</span>&nbsp;<span class="op" id="7476440">[</span><span class="op" id="7476441">...</span><span class="op" id="7476444">]</span><span class="builtintype" id="7476445">int</span><span class="op" id="7476448">{</span><span class="num" id="7476449">6</span><span class="op" id="7476450">,</span>&nbsp;<span class="num" id="7476452">7</span><span class="op" id="7476453">,</span>&nbsp;<span class="num" id="7476455">8</span><span class="op" id="7476456">}</span>&nbsp;<span class="op" id="7476458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476464">testFile</span><span class="op" id="7476472">(</span><span class="ident" id="7476473">t</span><span class="op" id="7476474">,</span>&nbsp;<span class="ident" id="7476476">filename</span><span class="op" id="7476484">,</span>&nbsp;<span class="ident" id="7476486">order</span><span class="op" id="7476491">,</span>&nbsp;<span class="ident" id="7476493">litWidth</span><span class="op" id="7476501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476506">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476513">}</span><br>
<span class="lineno"></span><span class="op" id="7476515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7476518">func</span>&nbsp;<span class="ident" id="7476523">TestWriterReturnValues</span><span class="op" id="7476545">(</span><span class="ident" id="7476546">t</span>&nbsp;<span class="op" id="7476548">*</span><span class="ident" id="7476549">testing</span><span class="op" id="7476556">.</span><span class="ident" id="7476557">T</span><span class="op" id="7476558">)</span>&nbsp;<span class="op" id="7476560">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476563">w</span>&nbsp;<span class="op" id="7476565">:=</span>&nbsp;<span class="ident" id="7476568">NewWriter</span><span class="op" id="7476577">(</span><span class="ident" id="7476578">ioutil</span><span class="op" id="7476584">.</span><span class="ident" id="7476585">Discard</span><span class="op" id="7476592">,</span>&nbsp;<span class="ident" id="7476594">LSB</span><span class="op" id="7476597">,</span>&nbsp;<span class="num" id="7476599">8</span><span class="op" id="7476600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476603">n</span><span class="op" id="7476604">,</span>&nbsp;<span class="ident" id="7476606">err</span>&nbsp;<span class="op" id="7476610">:=</span>&nbsp;<span class="ident" id="7476613">w</span><span class="op" id="7476614">.</span><span class="ident" id="7476615">Write</span><span class="op" id="7476620">(</span><span class="op" id="7476621">[</span><span class="op" id="7476622">]</span><span class="builtintype" id="7476623">byte</span><span class="op" id="7476627">(</span><span class="string" id="7476628">&#34;asdf&#34;</span><span class="op" id="7476634">)</span><span class="op" id="7476635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476638">if</span>&nbsp;<span class="ident" id="7476641">n</span>&nbsp;<span class="op" id="7476643">!=</span>&nbsp;<span class="num" id="7476646">4</span>&nbsp;<span class="op" id="7476648">||</span>&nbsp;<span class="ident" id="7476651">err</span>&nbsp;<span class="op" id="7476655">!=</span>&nbsp;<span class="ident" id="7476658">nil</span>&nbsp;<span class="op" id="7476662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476666">t</span><span class="op" id="7476667">.</span><span class="ident" id="7476668">Errorf</span><span class="op" id="7476674">(</span><span class="string" id="7476675">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="7476700">,</span>&nbsp;<span class="ident" id="7476702">n</span><span class="op" id="7476703">,</span>&nbsp;<span class="ident" id="7476705">err</span><span class="op" id="7476708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476711">}</span><br>
<span class="lineno">105</span><span class="op" id="7476713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7476716">func</span>&nbsp;<span class="ident" id="7476721">benchmarkEncoder</span><span class="op" id="7476737">(</span><span class="ident" id="7476738">b</span>&nbsp;<span class="op" id="7476740">*</span><span class="ident" id="7476741">testing</span><span class="op" id="7476748">.</span><span class="ident" id="7476749">B</span><span class="op" id="7476750">,</span>&nbsp;<span class="ident" id="7476752">n</span>&nbsp;<span class="builtintype" id="7476754">int</span><span class="op" id="7476757">)</span>&nbsp;<span class="op" id="7476759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476762">b</span><span class="op" id="7476763">.</span><span class="ident" id="7476764">StopTimer</span><span class="op" id="7476773">(</span><span class="op" id="7476774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476777">b</span><span class="op" id="7476778">.</span><span class="ident" id="7476779">SetBytes</span><span class="op" id="7476787">(</span><span class="ident" id="7476788">int64</span><span class="op" id="7476793">(</span><span class="ident" id="7476794">n</span><span class="op" id="7476795">)</span><span class="op" id="7476796">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476799">buf0</span><span class="op" id="7476803">,</span>&nbsp;<span class="ident" id="7476805">err</span>&nbsp;<span class="op" id="7476809">:=</span>&nbsp;<span class="ident" id="7476812">ioutil</span><span class="op" id="7476818">.</span><span class="ident" id="7476819">ReadFile</span><span class="op" id="7476827">(</span><span class="string" id="7476828">&#34;../testdata/e.txt&#34;</span><span class="op" id="7476847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476850">if</span>&nbsp;<span class="ident" id="7476853">err</span>&nbsp;<span class="op" id="7476857">!=</span>&nbsp;<span class="ident" id="7476860">nil</span>&nbsp;<span class="op" id="7476864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476868">b</span><span class="op" id="7476869">.</span><span class="ident" id="7476870">Fatal</span><span class="op" id="7476875">(</span><span class="ident" id="7476876">err</span><span class="op" id="7476879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476885">if</span>&nbsp;<span class="builtinfunc" id="7476888">len</span><span class="op" id="7476891">(</span><span class="ident" id="7476892">buf0</span><span class="op" id="7476896">)</span>&nbsp;<span class="op" id="7476898">==</span>&nbsp;<span class="num" id="7476901">0</span>&nbsp;<span class="op" id="7476903">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476907">b</span><span class="op" id="7476908">.</span><span class="ident" id="7476909">Fatalf</span><span class="op" id="7476915">(</span><span class="string" id="7476916">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="7476939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7476942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7476945">buf1</span>&nbsp;<span class="op" id="7476950">:=</span>&nbsp;<span class="builtinfunc" id="7476953">make</span><span class="op" id="7476957">(</span><span class="op" id="7476958">[</span><span class="op" id="7476959">]</span><span class="builtintype" id="7476960">byte</span><span class="op" id="7476964">,</span>&nbsp;<span class="ident" id="7476966">n</span><span class="op" id="7476967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7476970">for</span>&nbsp;<span class="ident" id="7476974">i</span>&nbsp;<span class="op" id="7476976">:=</span>&nbsp;<span class="num" id="7476979">0</span><span class="op" id="7476980">;</span>&nbsp;<span class="ident" id="7476982">i</span>&nbsp;<span class="op" id="7476984">&lt;</span>&nbsp;<span class="ident" id="7476986">n</span><span class="op" id="7476987">;</span>&nbsp;<span class="ident" id="7476989">i</span>&nbsp;<span class="op" id="7476991">+=</span>&nbsp;<span class="builtinfunc" id="7476994">len</span><span class="op" id="7476997">(</span><span class="ident" id="7476998">buf0</span><span class="op" id="7477002">)</span>&nbsp;<span class="op" id="7477004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7477008">if</span>&nbsp;<span class="builtinfunc" id="7477011">len</span><span class="op" id="7477014">(</span><span class="ident" id="7477015">buf0</span><span class="op" id="7477019">)</span>&nbsp;<span class="op" id="7477021">&gt;</span>&nbsp;<span class="ident" id="7477023">n</span><span class="op" id="7477024">-</span><span class="ident" id="7477025">i</span>&nbsp;<span class="op" id="7477027">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477032">buf0</span>&nbsp;<span class="op" id="7477037">=</span>&nbsp;<span class="ident" id="7477039">buf0</span><span class="op" id="7477043">[</span><span class="op" id="7477044">:</span><span class="ident" id="7477045">n</span><span class="op" id="7477046">-</span><span class="ident" id="7477047">i</span><span class="op" id="7477048">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7477052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7477056">copy</span><span class="op" id="7477060">(</span><span class="ident" id="7477061">buf1</span><span class="op" id="7477065">[</span><span class="ident" id="7477066">i</span><span class="op" id="7477067">:</span><span class="op" id="7477068">]</span><span class="op" id="7477069">,</span>&nbsp;<span class="ident" id="7477071">buf0</span><span class="op" id="7477075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7477078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477081">buf0</span>&nbsp;<span class="op" id="7477086">=</span>&nbsp;<span class="ident" id="7477088">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477093">runtime</span><span class="op" id="7477100">.</span><span class="ident" id="7477101">GC</span><span class="op" id="7477103">(</span><span class="op" id="7477104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477107">b</span><span class="op" id="7477108">.</span><span class="ident" id="7477109">StartTimer</span><span class="op" id="7477119">(</span><span class="op" id="7477120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7477123">for</span>&nbsp;<span class="ident" id="7477127">i</span>&nbsp;<span class="op" id="7477129">:=</span>&nbsp;<span class="num" id="7477132">0</span><span class="op" id="7477133">;</span>&nbsp;<span class="ident" id="7477135">i</span>&nbsp;<span class="op" id="7477137">&lt;</span>&nbsp;<span class="ident" id="7477139">b</span><span class="op" id="7477140">.</span><span class="ident" id="7477141">N</span><span class="op" id="7477142">;</span>&nbsp;<span class="ident" id="7477144">i</span><span class="op" id="7477145">++</span>&nbsp;<span class="op" id="7477148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477152">w</span>&nbsp;<span class="op" id="7477154">:=</span>&nbsp;<span class="ident" id="7477157">NewWriter</span><span class="op" id="7477166">(</span><span class="ident" id="7477167">ioutil</span><span class="op" id="7477173">.</span><span class="ident" id="7477174">Discard</span><span class="op" id="7477181">,</span>&nbsp;<span class="ident" id="7477183">LSB</span><span class="op" id="7477186">,</span>&nbsp;<span class="num" id="7477188">8</span><span class="op" id="7477189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477193">w</span><span class="op" id="7477194">.</span><span class="ident" id="7477195">Write</span><span class="op" id="7477200">(</span><span class="ident" id="7477201">buf1</span><span class="op" id="7477205">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477209">w</span><span class="op" id="7477210">.</span><span class="ident" id="7477211">Close</span><span class="op" id="7477216">(</span><span class="op" id="7477217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7477220">}</span><br>
<span class="lineno"></span><span class="op" id="7477222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7477225">func</span>&nbsp;<span class="ident" id="7477230">BenchmarkEncoder1e4</span><span class="op" id="7477249">(</span><span class="ident" id="7477250">b</span>&nbsp;<span class="op" id="7477252">*</span><span class="ident" id="7477253">testing</span><span class="op" id="7477260">.</span><span class="ident" id="7477261">B</span><span class="op" id="7477262">)</span>&nbsp;<span class="op" id="7477264">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477267">benchmarkEncoder</span><span class="op" id="7477283">(</span><span class="ident" id="7477284">b</span><span class="op" id="7477285">,</span>&nbsp;<span class="num" id="7477287">1e4</span><span class="op" id="7477290">)</span><br>
<span class="lineno"></span><span class="op" id="7477292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7477295">func</span>&nbsp;<span class="ident" id="7477300">BenchmarkEncoder1e5</span><span class="op" id="7477319">(</span><span class="ident" id="7477320">b</span>&nbsp;<span class="op" id="7477322">*</span><span class="ident" id="7477323">testing</span><span class="op" id="7477330">.</span><span class="ident" id="7477331">B</span><span class="op" id="7477332">)</span>&nbsp;<span class="op" id="7477334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477337">benchmarkEncoder</span><span class="op" id="7477353">(</span><span class="ident" id="7477354">b</span><span class="op" id="7477355">,</span>&nbsp;<span class="num" id="7477357">1e5</span><span class="op" id="7477360">)</span><br>
<span class="lineno">140</span><span class="op" id="7477362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7477365">func</span>&nbsp;<span class="ident" id="7477370">BenchmarkEncoder1e6</span><span class="op" id="7477389">(</span><span class="ident" id="7477390">b</span>&nbsp;<span class="op" id="7477392">*</span><span class="ident" id="7477393">testing</span><span class="op" id="7477400">.</span><span class="ident" id="7477401">B</span><span class="op" id="7477402">)</span>&nbsp;<span class="op" id="7477404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7477407">benchmarkEncoder</span><span class="op" id="7477423">(</span><span class="ident" id="7477424">b</span><span class="op" id="7477425">,</span>&nbsp;<span class="num" id="7477427">1e6</span><span class="op" id="7477430">)</span><br>
<span class="lineno"></span><span class="op" id="7477432">}</span>
</div>
</body>
</html>
