<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4977534">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4977589">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4977643">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4977694">package</span>&nbsp;<span class="ident" id="4977702">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4977707">import</span>&nbsp;<span class="op" id="4977714">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4977717">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4977726">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4977736">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4977742">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4977753">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4977760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4977763">//&nbsp;tooBig&nbsp;provides&nbsp;a&nbsp;sanity&nbsp;check&nbsp;for&nbsp;sizes;&nbsp;used&nbsp;in&nbsp;several&nbsp;places.</span><br>
<span class="lineno"></span><span class="comment" id="4977832">//&nbsp;Upper&nbsp;limit&nbsp;of&nbsp;1GB,&nbsp;allowing&nbsp;room&nbsp;to&nbsp;grow&nbsp;a&nbsp;little&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="4977904">//&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;adjustable?</span><br>
<span class="lineno"></span><span class="keyword" id="4977935">const</span>&nbsp;<span class="ident" id="4977941">tooBig</span>&nbsp;<span class="op" id="4977948">=</span>&nbsp;<span class="num" id="4977950">1</span>&nbsp;<span class="op" id="4977952">&lt;&lt;</span>&nbsp;<span class="num" id="4977955">30</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4977959">//&nbsp;A&nbsp;Decoder&nbsp;manages&nbsp;the&nbsp;receipt&nbsp;of&nbsp;type&nbsp;and&nbsp;data&nbsp;information&nbsp;read&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4978035">//&nbsp;remote&nbsp;side&nbsp;of&nbsp;a&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="4978067">type</span>&nbsp;<span class="ident" id="4978072">Decoder</span>&nbsp;<span class="keyword" id="4978080">struct</span>&nbsp;<span class="op" id="4978087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978090">mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4978103">sync</span><span class="op" id="4978107">.</span><span class="ident" id="4978108">Mutex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978143">//&nbsp;each&nbsp;item&nbsp;must&nbsp;be&nbsp;received&nbsp;atomically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978185">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4978198">io</span><span class="op" id="4978200">.</span><span class="ident" id="4978201">Reader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978238">//&nbsp;source&nbsp;of&nbsp;the&nbsp;data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978261">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4978274">decBuffer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978314">//&nbsp;buffer&nbsp;for&nbsp;more&nbsp;efficient&nbsp;i/o&nbsp;from&nbsp;r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978355">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4978368">map</span><span class="op" id="4978371">[</span><span class="ident" id="4978372">typeId</span><span class="op" id="4978378">]</span><span class="op" id="4978379">*</span><span class="ident" id="4978380">wireType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978408">//&nbsp;map&nbsp;from&nbsp;remote&nbsp;ID&nbsp;to&nbsp;local&nbsp;description</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978452">decoderCache</span>&nbsp;<span class="keyword" id="4978465">map</span><span class="op" id="4978468">[</span><span class="ident" id="4978469">reflect</span><span class="op" id="4978476">.</span><span class="ident" id="4978477">Type</span><span class="op" id="4978481">]</span><span class="keyword" id="4978482">map</span><span class="op" id="4978485">[</span><span class="ident" id="4978486">typeId</span><span class="op" id="4978492">]</span><span class="op" id="4978493">*</span><span class="op" id="4978494">*</span><span class="ident" id="4978495">decEngine</span>&nbsp;<span class="comment" id="4978505">//&nbsp;cache&nbsp;of&nbsp;compiled&nbsp;engines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978535">ignorerCache</span>&nbsp;<span class="keyword" id="4978548">map</span><span class="op" id="4978551">[</span><span class="ident" id="4978552">typeId</span><span class="op" id="4978558">]</span><span class="op" id="4978559">*</span><span class="op" id="4978560">*</span><span class="ident" id="4978561">decEngine</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978588">//&nbsp;ditto&nbsp;for&nbsp;ignored&nbsp;objects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978618">freeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4978631">*</span><span class="ident" id="4978632">decoderState</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978671">//&nbsp;list&nbsp;of&nbsp;free&nbsp;decoderStates;&nbsp;avoids&nbsp;reallocation</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978723">countBuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4978736">[</span><span class="op" id="4978737">]</span><span class="builtintype" id="4978738">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4978776">//&nbsp;used&nbsp;for&nbsp;decoding&nbsp;integers&nbsp;while&nbsp;parsing&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4978830">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4978843">error</span><br>
<span class="lineno"></span><span class="op" id="4978849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4978852">//&nbsp;NewDecoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;decoder&nbsp;that&nbsp;reads&nbsp;from&nbsp;the&nbsp;io.Reader.</span><br>
<span class="lineno">35</span><span class="comment" id="4978919">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,&nbsp;it&nbsp;will&nbsp;be&nbsp;wrapped&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4978990">//&nbsp;bufio.Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4979007">func</span>&nbsp;<span class="ident" id="4979012">NewDecoder</span><span class="op" id="4979022">(</span><span class="ident" id="4979023">r</span>&nbsp;<span class="ident" id="4979025">io</span><span class="op" id="4979027">.</span><span class="ident" id="4979028">Reader</span><span class="op" id="4979034">)</span>&nbsp;<span class="op" id="4979036">*</span><span class="ident" id="4979037">Decoder</span>&nbsp;<span class="op" id="4979045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979048">dec</span>&nbsp;<span class="op" id="4979052">:=</span>&nbsp;<span class="builtinfunc" id="4979055">new</span><span class="op" id="4979058">(</span><span class="ident" id="4979059">Decoder</span><span class="op" id="4979066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4979069">//&nbsp;We&nbsp;use&nbsp;the&nbsp;ability&nbsp;to&nbsp;read&nbsp;bytes&nbsp;as&nbsp;a&nbsp;plausible&nbsp;surrogate&nbsp;for&nbsp;buffering.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979146">if</span>&nbsp;<span class="ident" id="4979149">_</span><span class="op" id="4979150">,</span>&nbsp;<span class="ident" id="4979152">ok</span>&nbsp;<span class="op" id="4979155">:=</span>&nbsp;<span class="ident" id="4979158">r</span><span class="op" id="4979159">.</span><span class="op" id="4979160">(</span><span class="ident" id="4979161">io</span><span class="op" id="4979163">.</span><span class="ident" id="4979164">ByteReader</span><span class="op" id="4979174">)</span><span class="op" id="4979175">;</span>&nbsp;<span class="op" id="4979177">!</span><span class="ident" id="4979178">ok</span>&nbsp;<span class="op" id="4979181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979185">r</span>&nbsp;<span class="op" id="4979187">=</span>&nbsp;<span class="ident" id="4979189">bufio</span><span class="op" id="4979194">.</span><span class="ident" id="4979195">NewReader</span><span class="op" id="4979204">(</span><span class="ident" id="4979205">r</span><span class="op" id="4979206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4979209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979212">dec</span><span class="op" id="4979215">.</span><span class="ident" id="4979216">r</span>&nbsp;<span class="op" id="4979218">=</span>&nbsp;<span class="ident" id="4979220">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979223">dec</span><span class="op" id="4979226">.</span><span class="ident" id="4979227">wireType</span>&nbsp;<span class="op" id="4979236">=</span>&nbsp;<span class="builtinfunc" id="4979238">make</span><span class="op" id="4979242">(</span><span class="keyword" id="4979243">map</span><span class="op" id="4979246">[</span><span class="ident" id="4979247">typeId</span><span class="op" id="4979253">]</span><span class="op" id="4979254">*</span><span class="ident" id="4979255">wireType</span><span class="op" id="4979263">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979266">dec</span><span class="op" id="4979269">.</span><span class="ident" id="4979270">decoderCache</span>&nbsp;<span class="op" id="4979283">=</span>&nbsp;<span class="builtinfunc" id="4979285">make</span><span class="op" id="4979289">(</span><span class="keyword" id="4979290">map</span><span class="op" id="4979293">[</span><span class="ident" id="4979294">reflect</span><span class="op" id="4979301">.</span><span class="ident" id="4979302">Type</span><span class="op" id="4979306">]</span><span class="keyword" id="4979307">map</span><span class="op" id="4979310">[</span><span class="ident" id="4979311">typeId</span><span class="op" id="4979317">]</span><span class="op" id="4979318">*</span><span class="op" id="4979319">*</span><span class="ident" id="4979320">decEngine</span><span class="op" id="4979329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979332">dec</span><span class="op" id="4979335">.</span><span class="ident" id="4979336">ignorerCache</span>&nbsp;<span class="op" id="4979349">=</span>&nbsp;<span class="builtinfunc" id="4979351">make</span><span class="op" id="4979355">(</span><span class="keyword" id="4979356">map</span><span class="op" id="4979359">[</span><span class="ident" id="4979360">typeId</span><span class="op" id="4979366">]</span><span class="op" id="4979367">*</span><span class="op" id="4979368">*</span><span class="ident" id="4979369">decEngine</span><span class="op" id="4979378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979381">dec</span><span class="op" id="4979384">.</span><span class="ident" id="4979385">countBuf</span>&nbsp;<span class="op" id="4979394">=</span>&nbsp;<span class="builtinfunc" id="4979396">make</span><span class="op" id="4979400">(</span><span class="op" id="4979401">[</span><span class="op" id="4979402">]</span><span class="builtintype" id="4979403">byte</span><span class="op" id="4979407">,</span>&nbsp;<span class="num" id="4979409">9</span><span class="op" id="4979410">)</span>&nbsp;<span class="comment" id="4979412">//&nbsp;counts&nbsp;may&nbsp;be&nbsp;uint64s&nbsp;(unlikely!),&nbsp;require&nbsp;9&nbsp;bytes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979468">return</span>&nbsp;<span class="ident" id="4979475">dec</span><br>
<span class="lineno">50</span><span class="op" id="4979479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4979482">//&nbsp;recvType&nbsp;loads&nbsp;the&nbsp;definition&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4979526">func</span>&nbsp;<span class="op" id="4979531">(</span><span class="ident" id="4979532">dec</span>&nbsp;<span class="op" id="4979536">*</span><span class="ident" id="4979537">Decoder</span><span class="op" id="4979544">)</span>&nbsp;<span class="ident" id="4979546">recvType</span><span class="op" id="4979554">(</span><span class="ident" id="4979555">id</span>&nbsp;<span class="ident" id="4979558">typeId</span><span class="op" id="4979564">)</span>&nbsp;<span class="op" id="4979566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4979569">//&nbsp;Have&nbsp;we&nbsp;already&nbsp;seen&nbsp;this&nbsp;type?&nbsp;&nbsp;That&#39;s&nbsp;an&nbsp;error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979622">if</span>&nbsp;<span class="ident" id="4979625">id</span>&nbsp;<span class="op" id="4979628">&lt;</span>&nbsp;<span class="ident" id="4979630">firstUserId</span>&nbsp;<span class="op" id="4979642">||</span>&nbsp;<span class="ident" id="4979645">dec</span><span class="op" id="4979648">.</span><span class="ident" id="4979649">wireType</span><span class="op" id="4979657">[</span><span class="ident" id="4979658">id</span><span class="op" id="4979660">]</span>&nbsp;<span class="op" id="4979662">!=</span>&nbsp;<span class="ident" id="4979665">nil</span>&nbsp;<span class="op" id="4979669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979673">dec</span><span class="op" id="4979676">.</span><span class="ident" id="4979677">err</span>&nbsp;<span class="op" id="4979681">=</span>&nbsp;<span class="ident" id="4979683">errors</span><span class="op" id="4979689">.</span><span class="ident" id="4979690">New</span><span class="op" id="4979693">(</span><span class="string" id="4979694">&#34;gob:&nbsp;duplicate&nbsp;type&nbsp;received&#34;</span><span class="op" id="4979724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979728">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4979736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4979740">//&nbsp;Type:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979750">wire</span>&nbsp;<span class="op" id="4979755">:=</span>&nbsp;<span class="builtinfunc" id="4979758">new</span><span class="op" id="4979761">(</span><span class="ident" id="4979762">wireType</span><span class="op" id="4979770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979773">dec</span><span class="op" id="4979776">.</span><span class="ident" id="4979777">decodeValue</span><span class="op" id="4979788">(</span><span class="ident" id="4979789">tWireType</span><span class="op" id="4979798">,</span>&nbsp;<span class="ident" id="4979800">reflect</span><span class="op" id="4979807">.</span><span class="ident" id="4979808">ValueOf</span><span class="op" id="4979815">(</span><span class="ident" id="4979816">wire</span><span class="op" id="4979820">)</span><span class="op" id="4979821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979824">if</span>&nbsp;<span class="ident" id="4979827">dec</span><span class="op" id="4979830">.</span><span class="ident" id="4979831">err</span>&nbsp;<span class="op" id="4979835">!=</span>&nbsp;<span class="ident" id="4979838">nil</span>&nbsp;<span class="op" id="4979842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4979846">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4979854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4979857">//&nbsp;Remember&nbsp;we&#39;ve&nbsp;seen&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4979892">dec</span><span class="op" id="4979895">.</span><span class="ident" id="4979896">wireType</span><span class="op" id="4979904">[</span><span class="ident" id="4979905">id</span><span class="op" id="4979907">]</span>&nbsp;<span class="op" id="4979909">=</span>&nbsp;<span class="ident" id="4979911">wire</span><br>
<span class="lineno"></span><span class="op" id="4979916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="4979919">var</span>&nbsp;<span class="ident" id="4979923">errBadCount</span>&nbsp;<span class="op" id="4979935">=</span>&nbsp;<span class="ident" id="4979937">errors</span><span class="op" id="4979943">.</span><span class="ident" id="4979944">New</span><span class="op" id="4979947">(</span><span class="string" id="4979948">&#34;invalid&nbsp;message&nbsp;length&#34;</span><span class="op" id="4979972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4979975">//&nbsp;recvMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;count-delimited&nbsp;item&nbsp;from&nbsp;the&nbsp;input.&nbsp;It&nbsp;is&nbsp;the&nbsp;converse</span><br>
<span class="lineno"></span><span class="comment" id="4980061">//&nbsp;of&nbsp;Encoder.writeMessage.&nbsp;It&nbsp;returns&nbsp;false&nbsp;on&nbsp;EOF&nbsp;or&nbsp;other&nbsp;error&nbsp;reading&nbsp;the&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="4980149">func</span>&nbsp;<span class="op" id="4980154">(</span><span class="ident" id="4980155">dec</span>&nbsp;<span class="op" id="4980159">*</span><span class="ident" id="4980160">Decoder</span><span class="op" id="4980167">)</span>&nbsp;<span class="ident" id="4980169">recvMessage</span><span class="op" id="4980180">(</span><span class="op" id="4980181">)</span>&nbsp;<span class="builtintype" id="4980183">bool</span>&nbsp;<span class="op" id="4980188">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4980191">//&nbsp;Read&nbsp;a&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980209">nbytes</span><span class="op" id="4980215">,</span>&nbsp;<span class="ident" id="4980217">_</span><span class="op" id="4980218">,</span>&nbsp;<span class="ident" id="4980220">err</span>&nbsp;<span class="op" id="4980224">:=</span>&nbsp;<span class="ident" id="4980227">decodeUintReader</span><span class="op" id="4980243">(</span><span class="ident" id="4980244">dec</span><span class="op" id="4980247">.</span><span class="ident" id="4980248">r</span><span class="op" id="4980249">,</span>&nbsp;<span class="ident" id="4980251">dec</span><span class="op" id="4980254">.</span><span class="ident" id="4980255">countBuf</span><span class="op" id="4980263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980266">if</span>&nbsp;<span class="ident" id="4980269">err</span>&nbsp;<span class="op" id="4980273">!=</span>&nbsp;<span class="ident" id="4980276">nil</span>&nbsp;<span class="op" id="4980280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980284">dec</span><span class="op" id="4980287">.</span><span class="ident" id="4980288">err</span>&nbsp;<span class="op" id="4980292">=</span>&nbsp;<span class="ident" id="4980294">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980300">return</span>&nbsp;<span class="builtintype" id="4980307">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4980314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980317">if</span>&nbsp;<span class="ident" id="4980320">nbytes</span>&nbsp;<span class="op" id="4980327">&gt;=</span>&nbsp;<span class="ident" id="4980330">tooBig</span>&nbsp;<span class="op" id="4980337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980341">dec</span><span class="op" id="4980344">.</span><span class="ident" id="4980345">err</span>&nbsp;<span class="op" id="4980349">=</span>&nbsp;<span class="ident" id="4980351">errBadCount</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980365">return</span>&nbsp;<span class="builtintype" id="4980372">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4980379">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980382">dec</span><span class="op" id="4980385">.</span><span class="ident" id="4980386">readMessage</span><span class="op" id="4980397">(</span><span class="builtintype" id="4980398">int</span><span class="op" id="4980401">(</span><span class="ident" id="4980402">nbytes</span><span class="op" id="4980408">)</span><span class="op" id="4980409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980412">return</span>&nbsp;<span class="ident" id="4980419">dec</span><span class="op" id="4980422">.</span><span class="ident" id="4980423">err</span>&nbsp;<span class="op" id="4980427">==</span>&nbsp;<span class="ident" id="4980430">nil</span><br>
<span class="lineno"></span><span class="op" id="4980434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4980437">//&nbsp;readMessage&nbsp;reads&nbsp;the&nbsp;next&nbsp;nbytes&nbsp;bytes&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">90</span><span class="keyword" id="4980496">func</span>&nbsp;<span class="op" id="4980501">(</span><span class="ident" id="4980502">dec</span>&nbsp;<span class="op" id="4980506">*</span><span class="ident" id="4980507">Decoder</span><span class="op" id="4980514">)</span>&nbsp;<span class="ident" id="4980516">readMessage</span><span class="op" id="4980527">(</span><span class="ident" id="4980528">nbytes</span>&nbsp;<span class="builtintype" id="4980535">int</span><span class="op" id="4980538">)</span>&nbsp;<span class="op" id="4980540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980543">if</span>&nbsp;<span class="ident" id="4980546">dec</span><span class="op" id="4980549">.</span><span class="ident" id="4980550">buf</span><span class="op" id="4980553">.</span><span class="ident" id="4980554">Len</span><span class="op" id="4980557">(</span><span class="op" id="4980558">)</span>&nbsp;<span class="op" id="4980560">!=</span>&nbsp;<span class="num" id="4980563">0</span>&nbsp;<span class="op" id="4980565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4980569">//&nbsp;The&nbsp;buffer&nbsp;should&nbsp;always&nbsp;be&nbsp;empty&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4980613">panic</span><span class="op" id="4980618">(</span><span class="string" id="4980619">&#34;non-empty&nbsp;decoder&nbsp;buffer&#34;</span><span class="op" id="4980645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4980648">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4980651">//&nbsp;Read&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980669">dec</span><span class="op" id="4980672">.</span><span class="ident" id="4980673">buf</span><span class="op" id="4980676">.</span><span class="ident" id="4980677">Size</span><span class="op" id="4980681">(</span><span class="ident" id="4980682">nbytes</span><span class="op" id="4980688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980691">_</span><span class="op" id="4980692">,</span>&nbsp;<span class="ident" id="4980694">dec</span><span class="op" id="4980697">.</span><span class="ident" id="4980698">err</span>&nbsp;<span class="op" id="4980702">=</span>&nbsp;<span class="ident" id="4980704">io</span><span class="op" id="4980706">.</span><span class="ident" id="4980707">ReadFull</span><span class="op" id="4980715">(</span><span class="ident" id="4980716">dec</span><span class="op" id="4980719">.</span><span class="ident" id="4980720">r</span><span class="op" id="4980721">,</span>&nbsp;<span class="ident" id="4980723">dec</span><span class="op" id="4980726">.</span><span class="ident" id="4980727">buf</span><span class="op" id="4980730">.</span><span class="ident" id="4980731">Bytes</span><span class="op" id="4980736">(</span><span class="op" id="4980737">)</span><span class="op" id="4980738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980741">if</span>&nbsp;<span class="ident" id="4980744">dec</span><span class="op" id="4980747">.</span><span class="ident" id="4980748">err</span>&nbsp;<span class="op" id="4980752">!=</span>&nbsp;<span class="ident" id="4980755">nil</span>&nbsp;<span class="op" id="4980759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980763">if</span>&nbsp;<span class="ident" id="4980766">dec</span><span class="op" id="4980769">.</span><span class="ident" id="4980770">err</span>&nbsp;<span class="op" id="4980774">==</span>&nbsp;<span class="ident" id="4980777">io</span><span class="op" id="4980779">.</span><span class="ident" id="4980780">EOF</span>&nbsp;<span class="op" id="4980784">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980789">dec</span><span class="op" id="4980792">.</span><span class="ident" id="4980793">err</span>&nbsp;<span class="op" id="4980797">=</span>&nbsp;<span class="ident" id="4980799">io</span><span class="op" id="4980801">.</span><span class="ident" id="4980802">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4980821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4980824">}</span><br>
<span class="lineno"></span><span class="op" id="4980826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4980829">//&nbsp;toInt&nbsp;turns&nbsp;an&nbsp;encoded&nbsp;uint64&nbsp;into&nbsp;an&nbsp;int,&nbsp;according&nbsp;to&nbsp;the&nbsp;marshaling&nbsp;rules.</span><br>
<span class="lineno"></span><span class="keyword" id="4980910">func</span>&nbsp;<span class="ident" id="4980915">toInt</span><span class="op" id="4980920">(</span><span class="ident" id="4980921">x</span>&nbsp;<span class="ident" id="4980923">uint64</span><span class="op" id="4980929">)</span>&nbsp;<span class="ident" id="4980931">int64</span>&nbsp;<span class="op" id="4980937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980940">i</span>&nbsp;<span class="op" id="4980942">:=</span>&nbsp;<span class="ident" id="4980945">int64</span><span class="op" id="4980950">(</span><span class="ident" id="4980951">x</span>&nbsp;<span class="op" id="4980953">&gt;&gt;</span>&nbsp;<span class="num" id="4980956">1</span><span class="op" id="4980957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980960">if</span>&nbsp;<span class="ident" id="4980963">x</span><span class="op" id="4980964">&amp;</span><span class="num" id="4980965">1</span>&nbsp;<span class="op" id="4980967">!=</span>&nbsp;<span class="num" id="4980970">0</span>&nbsp;<span class="op" id="4980972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4980976">i</span>&nbsp;<span class="op" id="4980978">=</span>&nbsp;<span class="op" id="4980980">^</span><span class="ident" id="4980981">i</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4980984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4980987">return</span>&nbsp;<span class="ident" id="4980994">i</span><br>
<span class="lineno"></span><span class="op" id="4980996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4980999">func</span>&nbsp;<span class="op" id="4981004">(</span><span class="ident" id="4981005">dec</span>&nbsp;<span class="op" id="4981009">*</span><span class="ident" id="4981010">Decoder</span><span class="op" id="4981017">)</span>&nbsp;<span class="ident" id="4981019">nextInt</span><span class="op" id="4981026">(</span><span class="op" id="4981027">)</span>&nbsp;<span class="ident" id="4981029">int64</span>&nbsp;<span class="op" id="4981035">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4981038">n</span><span class="op" id="4981039">,</span>&nbsp;<span class="ident" id="4981041">_</span><span class="op" id="4981042">,</span>&nbsp;<span class="ident" id="4981044">err</span>&nbsp;<span class="op" id="4981048">:=</span>&nbsp;<span class="ident" id="4981051">decodeUintReader</span><span class="op" id="4981067">(</span><span class="op" id="4981068">&amp;</span><span class="ident" id="4981069">dec</span><span class="op" id="4981072">.</span><span class="ident" id="4981073">buf</span><span class="op" id="4981076">,</span>&nbsp;<span class="ident" id="4981078">dec</span><span class="op" id="4981081">.</span><span class="ident" id="4981082">countBuf</span><span class="op" id="4981090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981093">if</span>&nbsp;<span class="ident" id="4981096">err</span>&nbsp;<span class="op" id="4981100">!=</span>&nbsp;<span class="ident" id="4981103">nil</span>&nbsp;<span class="op" id="4981107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4981111">dec</span><span class="op" id="4981114">.</span><span class="ident" id="4981115">err</span>&nbsp;<span class="op" id="4981119">=</span>&nbsp;<span class="ident" id="4981121">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4981126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981129">return</span>&nbsp;<span class="ident" id="4981136">toInt</span><span class="op" id="4981141">(</span><span class="ident" id="4981142">n</span><span class="op" id="4981143">)</span><br>
<span class="lineno">120</span><span class="op" id="4981145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4981148">func</span>&nbsp;<span class="op" id="4981153">(</span><span class="ident" id="4981154">dec</span>&nbsp;<span class="op" id="4981158">*</span><span class="ident" id="4981159">Decoder</span><span class="op" id="4981166">)</span>&nbsp;<span class="ident" id="4981168">nextUint</span><span class="op" id="4981176">(</span><span class="op" id="4981177">)</span>&nbsp;<span class="ident" id="4981179">uint64</span>&nbsp;<span class="op" id="4981186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4981189">n</span><span class="op" id="4981190">,</span>&nbsp;<span class="ident" id="4981192">_</span><span class="op" id="4981193">,</span>&nbsp;<span class="ident" id="4981195">err</span>&nbsp;<span class="op" id="4981199">:=</span>&nbsp;<span class="ident" id="4981202">decodeUintReader</span><span class="op" id="4981218">(</span><span class="op" id="4981219">&amp;</span><span class="ident" id="4981220">dec</span><span class="op" id="4981223">.</span><span class="ident" id="4981224">buf</span><span class="op" id="4981227">,</span>&nbsp;<span class="ident" id="4981229">dec</span><span class="op" id="4981232">.</span><span class="ident" id="4981233">countBuf</span><span class="op" id="4981241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981244">if</span>&nbsp;<span class="ident" id="4981247">err</span>&nbsp;<span class="op" id="4981251">!=</span>&nbsp;<span class="ident" id="4981254">nil</span>&nbsp;<span class="op" id="4981258">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4981262">dec</span><span class="op" id="4981265">.</span><span class="ident" id="4981266">err</span>&nbsp;<span class="op" id="4981270">=</span>&nbsp;<span class="ident" id="4981272">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4981277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981280">return</span>&nbsp;<span class="ident" id="4981287">n</span><br>
<span class="lineno"></span><span class="op" id="4981289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4981292">//&nbsp;decodeTypeSequence&nbsp;parses:</span><br>
<span class="lineno"></span><span class="comment" id="4981322">//&nbsp;TypeSequence</span><br>
<span class="lineno"></span><span class="comment" id="4981338">//&nbsp;&nbsp;&nbsp;&nbsp(TypeDefinition&nbsp;DelimitedTypeDefinition*)?</span><br>
<span class="lineno"></span><span class="comment" id="4981384">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;type&nbsp;id&nbsp;of&nbsp;the&nbsp;next&nbsp;value.&nbsp;&nbsp;It&nbsp;returns&nbsp;-1&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="4981448">//&nbsp;EOF.&nbsp;&nbsp;Upon&nbsp;return,&nbsp;the&nbsp;remainder&nbsp;of&nbsp;dec.buf&nbsp;is&nbsp;the&nbsp;value&nbsp;to&nbsp;be</span><br>
<span class="lineno">135</span><span class="comment" id="4981514">//&nbsp;decoded.&nbsp;&nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4981579">//&nbsp;resetting&nbsp;that&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="4981605">func</span>&nbsp;<span class="op" id="4981610">(</span><span class="ident" id="4981611">dec</span>&nbsp;<span class="op" id="4981615">*</span><span class="ident" id="4981616">Decoder</span><span class="op" id="4981623">)</span>&nbsp;<span class="ident" id="4981625">decodeTypeSequence</span><span class="op" id="4981643">(</span><span class="ident" id="4981644">isInterface</span>&nbsp;<span class="builtintype" id="4981656">bool</span><span class="op" id="4981660">)</span>&nbsp;<span class="ident" id="4981662">typeId</span>&nbsp;<span class="op" id="4981669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981672">for</span>&nbsp;<span class="ident" id="4981676">dec</span><span class="op" id="4981679">.</span><span class="ident" id="4981680">err</span>&nbsp;<span class="op" id="4981684">==</span>&nbsp;<span class="ident" id="4981687">nil</span>&nbsp;<span class="op" id="4981691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981695">if</span>&nbsp;<span class="ident" id="4981698">dec</span><span class="op" id="4981701">.</span><span class="ident" id="4981702">buf</span><span class="op" id="4981705">.</span><span class="ident" id="4981706">Len</span><span class="op" id="4981709">(</span><span class="op" id="4981710">)</span>&nbsp;<span class="op" id="4981712">==</span>&nbsp;<span class="num" id="4981715">0</span>&nbsp;<span class="op" id="4981717">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981722">if</span>&nbsp;<span class="op" id="4981725">!</span><span class="ident" id="4981726">dec</span><span class="op" id="4981729">.</span><span class="ident" id="4981730">recvMessage</span><span class="op" id="4981741">(</span><span class="op" id="4981742">)</span>&nbsp;<span class="op" id="4981744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981750">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4981759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4981763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4981767">//&nbsp;Receive&nbsp;a&nbsp;type&nbsp;id.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4981791">id</span>&nbsp;<span class="op" id="4981794">:=</span>&nbsp;<span class="ident" id="4981797">typeId</span><span class="op" id="4981803">(</span><span class="ident" id="4981804">dec</span><span class="op" id="4981807">.</span><span class="ident" id="4981808">nextInt</span><span class="op" id="4981815">(</span><span class="op" id="4981816">)</span><span class="op" id="4981817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981821">if</span>&nbsp;<span class="ident" id="4981824">id</span>&nbsp;<span class="op" id="4981827">&gt;=</span>&nbsp;<span class="num" id="4981830">0</span>&nbsp;<span class="op" id="4981832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4981837">//&nbsp;Value&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4981858">return</span>&nbsp;<span class="ident" id="4981865">id</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4981870">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4981874">//&nbsp;Type&nbsp;definition&nbsp;for&nbsp;(-id)&nbsp;follows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4981914">dec</span><span class="op" id="4981917">.</span><span class="ident" id="4981918">recvType</span><span class="op" id="4981926">(</span><span class="op" id="4981927">-</span><span class="ident" id="4981928">id</span><span class="op" id="4981930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4981934">//&nbsp;When&nbsp;decoding&nbsp;an&nbsp;interface,&nbsp;after&nbsp;a&nbsp;type&nbsp;there&nbsp;may&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4981995">//&nbsp;DelimitedValue&nbsp;still&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;&nbsp;Skip&nbsp;its&nbsp;count.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4982053">//&nbsp;(Alternatively,&nbsp;the&nbsp;buffer&nbsp;is&nbsp;empty&nbsp;and&nbsp;the&nbsp;byte&nbsp;count</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4982113">//&nbsp;will&nbsp;be&nbsp;absorbed&nbsp;by&nbsp;recvMessage.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982152">if</span>&nbsp;<span class="ident" id="4982155">dec</span><span class="op" id="4982158">.</span><span class="ident" id="4982159">buf</span><span class="op" id="4982162">.</span><span class="ident" id="4982163">Len</span><span class="op" id="4982166">(</span><span class="op" id="4982167">)</span>&nbsp;<span class="op" id="4982169">&gt;</span>&nbsp;<span class="num" id="4982171">0</span>&nbsp;<span class="op" id="4982173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982178">if</span>&nbsp;<span class="op" id="4982181">!</span><span class="ident" id="4982182">isInterface</span>&nbsp;<span class="op" id="4982194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4982200">dec</span><span class="op" id="4982203">.</span><span class="ident" id="4982204">err</span>&nbsp;<span class="op" id="4982208">=</span>&nbsp;<span class="ident" id="4982210">errors</span><span class="op" id="4982216">.</span><span class="ident" id="4982217">New</span><span class="op" id="4982220">(</span><span class="string" id="4982221">&#34;extra&nbsp;data&nbsp;in&nbsp;buffer&#34;</span><span class="op" id="4982243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982249">break</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4982258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4982263">dec</span><span class="op" id="4982266">.</span><span class="ident" id="4982267">nextUint</span><span class="op" id="4982275">(</span><span class="op" id="4982276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4982280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4982283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982286">return</span>&nbsp;<span class="op" id="4982293">-</span><span class="num" id="4982294">1</span><br>
<span class="lineno">165</span><span class="op" id="4982296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4982299">//&nbsp;Decode&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream&nbsp;and&nbsp;stores</span><br>
<span class="lineno"></span><span class="comment" id="4982363">//&nbsp;it&nbsp;in&nbsp;the&nbsp;data&nbsp;represented&nbsp;by&nbsp;the&nbsp;empty&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4982423">//&nbsp;If&nbsp;e&nbsp;is&nbsp;nil,&nbsp;the&nbsp;value&nbsp;will&nbsp;be&nbsp;discarded.&nbsp;Otherwise,</span><br>
<span class="lineno">170</span><span class="comment" id="4982479">//&nbsp;the&nbsp;value&nbsp;underlying&nbsp;e&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4982530">//&nbsp;correct&nbsp;type&nbsp;for&nbsp;the&nbsp;next&nbsp;data&nbsp;item&nbsp;received.</span><br>
<span class="lineno"></span><span class="comment" id="4982579">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;Decode&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4982632">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4982654">func</span>&nbsp;<span class="op" id="4982659">(</span><span class="ident" id="4982660">dec</span>&nbsp;<span class="op" id="4982664">*</span><span class="ident" id="4982665">Decoder</span><span class="op" id="4982672">)</span>&nbsp;<span class="ident" id="4982674">Decode</span><span class="op" id="4982680">(</span><span class="ident" id="4982681">e</span>&nbsp;<span class="keyword" id="4982683">interface</span><span class="op" id="4982692">{</span><span class="op" id="4982693">}</span><span class="op" id="4982694">)</span>&nbsp;<span class="builtintype" id="4982696">error</span>&nbsp;<span class="op" id="4982702">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982705">if</span>&nbsp;<span class="ident" id="4982708">e</span>&nbsp;<span class="op" id="4982710">==</span>&nbsp;<span class="ident" id="4982713">nil</span>&nbsp;<span class="op" id="4982717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982721">return</span>&nbsp;<span class="ident" id="4982728">dec</span><span class="op" id="4982731">.</span><span class="ident" id="4982732">DecodeValue</span><span class="op" id="4982743">(</span><span class="ident" id="4982744">reflect</span><span class="op" id="4982751">.</span><span class="ident" id="4982752">Value</span><span class="op" id="4982757">{</span><span class="op" id="4982758">}</span><span class="op" id="4982759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4982762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4982765">value</span>&nbsp;<span class="op" id="4982771">:=</span>&nbsp;<span class="ident" id="4982774">reflect</span><span class="op" id="4982781">.</span><span class="ident" id="4982782">ValueOf</span><span class="op" id="4982789">(</span><span class="ident" id="4982790">e</span><span class="op" id="4982791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4982794">//&nbsp;If&nbsp;e&nbsp;represents&nbsp;a&nbsp;value&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;pointer,&nbsp;the&nbsp;answer&nbsp;won&#39;t</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4982864">//&nbsp;get&nbsp;back&nbsp;to&nbsp;the&nbsp;caller.&nbsp;&nbsp;Make&nbsp;sure&nbsp;it&#39;s&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4982919">if</span>&nbsp;<span class="ident" id="4982922">value</span><span class="op" id="4982927">.</span><span class="ident" id="4982928">Type</span><span class="op" id="4982932">(</span><span class="op" id="4982933">)</span><span class="op" id="4982934">.</span><span class="ident" id="4982935">Kind</span><span class="op" id="4982939">(</span><span class="op" id="4982940">)</span>&nbsp;<span class="op" id="4982942">!=</span>&nbsp;<span class="ident" id="4982945">reflect</span><span class="op" id="4982952">.</span><span class="ident" id="4982953">Ptr</span>&nbsp;<span class="op" id="4982957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4982961">dec</span><span class="op" id="4982964">.</span><span class="ident" id="4982965">err</span>&nbsp;<span class="op" id="4982969">=</span>&nbsp;<span class="ident" id="4982971">errors</span><span class="op" id="4982977">.</span><span class="ident" id="4982978">New</span><span class="op" id="4982981">(</span><span class="string" id="4982982">&#34;gob:&nbsp;attempt&nbsp;to&nbsp;decode&nbsp;into&nbsp;a&nbsp;non-pointer&#34;</span><span class="op" id="4983025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983029">return</span>&nbsp;<span class="ident" id="4983036">dec</span><span class="op" id="4983039">.</span><span class="ident" id="4983040">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4983045">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983048">return</span>&nbsp;<span class="ident" id="4983055">dec</span><span class="op" id="4983058">.</span><span class="ident" id="4983059">DecodeValue</span><span class="op" id="4983070">(</span><span class="ident" id="4983071">value</span><span class="op" id="4983076">)</span><br>
<span class="lineno"></span><span class="op" id="4983078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4983081">//&nbsp;DecodeValue&nbsp;reads&nbsp;the&nbsp;next&nbsp;value&nbsp;from&nbsp;the&nbsp;input&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="4983140">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;reflect.Value&nbsp;(v.Kind()&nbsp;==&nbsp;Invalid),&nbsp;DecodeValue&nbsp;discards&nbsp;the&nbsp;value.</span><br>
<span class="lineno">190</span><span class="comment" id="4983229">//&nbsp;Otherwise,&nbsp;it&nbsp;stores&nbsp;the&nbsp;value&nbsp;into&nbsp;v.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;v&nbsp;must&nbsp;represent</span><br>
<span class="lineno"></span><span class="comment" id="4983303">//&nbsp;a&nbsp;non-nil&nbsp;pointer&nbsp;to&nbsp;data&nbsp;or&nbsp;be&nbsp;an&nbsp;assignable&nbsp;reflect.Value&nbsp;(v.CanSet())</span><br>
<span class="lineno"></span><span class="comment" id="4983379">//&nbsp;If&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;EOF,&nbsp;DecodeValue&nbsp;returns&nbsp;io.EOF&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4983437">//&nbsp;does&nbsp;not&nbsp;modify&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="4983459">func</span>&nbsp;<span class="op" id="4983464">(</span><span class="ident" id="4983465">dec</span>&nbsp;<span class="op" id="4983469">*</span><span class="ident" id="4983470">Decoder</span><span class="op" id="4983477">)</span>&nbsp;<span class="ident" id="4983479">DecodeValue</span><span class="op" id="4983490">(</span><span class="ident" id="4983491">v</span>&nbsp;<span class="ident" id="4983493">reflect</span><span class="op" id="4983500">.</span><span class="ident" id="4983501">Value</span><span class="op" id="4983506">)</span>&nbsp;<span class="builtintype" id="4983508">error</span>&nbsp;<span class="op" id="4983514">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983517">if</span>&nbsp;<span class="ident" id="4983520">v</span><span class="op" id="4983521">.</span><span class="ident" id="4983522">IsValid</span><span class="op" id="4983529">(</span><span class="op" id="4983530">)</span>&nbsp;<span class="op" id="4983532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983536">if</span>&nbsp;<span class="ident" id="4983539">v</span><span class="op" id="4983540">.</span><span class="ident" id="4983541">Kind</span><span class="op" id="4983545">(</span><span class="op" id="4983546">)</span>&nbsp;<span class="op" id="4983548">==</span>&nbsp;<span class="ident" id="4983551">reflect</span><span class="op" id="4983558">.</span><span class="ident" id="4983559">Ptr</span>&nbsp;<span class="op" id="4983563">&amp;&amp;</span>&nbsp;<span class="op" id="4983566">!</span><span class="ident" id="4983567">v</span><span class="op" id="4983568">.</span><span class="ident" id="4983569">IsNil</span><span class="op" id="4983574">(</span><span class="op" id="4983575">)</span>&nbsp;<span class="op" id="4983577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4983582">//&nbsp;That&#39;s&nbsp;okay,&nbsp;we&#39;ll&nbsp;store&nbsp;through&nbsp;the&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4983633">}</span>&nbsp;<span class="keyword" id="4983635">else</span>&nbsp;<span class="keyword" id="4983640">if</span>&nbsp;<span class="op" id="4983643">!</span><span class="ident" id="4983644">v</span><span class="op" id="4983645">.</span><span class="ident" id="4983646">CanSet</span><span class="op" id="4983652">(</span><span class="op" id="4983653">)</span>&nbsp;<span class="op" id="4983655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983660">return</span>&nbsp;<span class="ident" id="4983667">errors</span><span class="op" id="4983673">.</span><span class="ident" id="4983674">New</span><span class="op" id="4983677">(</span><span class="string" id="4983678">&#34;gob:&nbsp;DecodeValue&nbsp;of&nbsp;unassignable&nbsp;value&#34;</span><span class="op" id="4983718">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4983722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4983725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4983728">//&nbsp;Make&nbsp;sure&nbsp;we&#39;re&nbsp;single-threaded&nbsp;through&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4983778">dec</span><span class="op" id="4983781">.</span><span class="ident" id="4983782">mutex</span><span class="op" id="4983787">.</span><span class="ident" id="4983788">Lock</span><span class="op" id="4983792">(</span><span class="op" id="4983793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983796">defer</span>&nbsp;<span class="ident" id="4983802">dec</span><span class="op" id="4983805">.</span><span class="ident" id="4983806">mutex</span><span class="op" id="4983811">.</span><span class="ident" id="4983812">Unlock</span><span class="op" id="4983818">(</span><span class="op" id="4983819">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4983823">dec</span><span class="op" id="4983826">.</span><span class="ident" id="4983827">buf</span><span class="op" id="4983830">.</span><span class="ident" id="4983831">Reset</span><span class="op" id="4983836">(</span><span class="op" id="4983837">)</span>&nbsp;<span class="comment" id="4983839">//&nbsp;In&nbsp;case&nbsp;data&nbsp;lingers&nbsp;from&nbsp;previous&nbsp;invocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4983890">dec</span><span class="op" id="4983893">.</span><span class="ident" id="4983894">err</span>&nbsp;<span class="op" id="4983898">=</span>&nbsp;<span class="ident" id="4983900">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4983905">id</span>&nbsp;<span class="op" id="4983908">:=</span>&nbsp;<span class="ident" id="4983911">dec</span><span class="op" id="4983914">.</span><span class="ident" id="4983915">decodeTypeSequence</span><span class="op" id="4983933">(</span><span class="builtintype" id="4983934">false</span><span class="op" id="4983939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983942">if</span>&nbsp;<span class="ident" id="4983945">dec</span><span class="op" id="4983948">.</span><span class="ident" id="4983949">err</span>&nbsp;<span class="op" id="4983953">==</span>&nbsp;<span class="ident" id="4983956">nil</span>&nbsp;<span class="op" id="4983960">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4983964">dec</span><span class="op" id="4983967">.</span><span class="ident" id="4983968">decodeValue</span><span class="op" id="4983979">(</span><span class="ident" id="4983980">id</span><span class="op" id="4983982">,</span>&nbsp;<span class="ident" id="4983984">v</span><span class="op" id="4983985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4983988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4983991">return</span>&nbsp;<span class="ident" id="4983998">dec</span><span class="op" id="4984001">.</span><span class="ident" id="4984002">err</span><br>
<span class="lineno"></span><span class="op" id="4984006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="4984009">//&nbsp;If&nbsp;debug.go&nbsp;is&nbsp;compiled&nbsp;into&nbsp;the&nbsp;program&nbsp;,&nbsp;debugFunc&nbsp;prints&nbsp;a&nbsp;human-readable</span><br>
<span class="lineno"></span><span class="comment" id="4984089">//&nbsp;representation&nbsp;of&nbsp;the&nbsp;gob&nbsp;data&nbsp;read&nbsp;from&nbsp;r&nbsp;by&nbsp;calling&nbsp;that&nbsp;file&#39;s&nbsp;Debug&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="4984174">//&nbsp;Otherwise&nbsp;it&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4984198">var</span>&nbsp;<span class="ident" id="4984202">debugFunc</span>&nbsp;<span class="keyword" id="4984212">func</span><span class="op" id="4984216">(</span><span class="ident" id="4984217">io</span><span class="op" id="4984219">.</span><span class="ident" id="4984220">Reader</span><span class="op" id="4984226">)</span>
</div>
</body>
</html>
