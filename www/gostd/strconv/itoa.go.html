<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html" class="current">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2296406">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2296461">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2296515">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2296566">package</span>&nbsp;<span class="ident" id="2296574">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2296583">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2296655">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2296729">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2296756">func</span>&nbsp;<span class="ident" id="2296761">FormatUint</span><span class="op" id="2296771">(</span><span class="ident" id="2296772">i</span>&nbsp;<span class="ident" id="2296774">uint64</span><span class="op" id="2296780">,</span>&nbsp;<span class="ident" id="2296782">base</span>&nbsp;<span class="builtintype" id="2296787">int</span><span class="op" id="2296790">)</span>&nbsp;<span class="builtintype" id="2296792">string</span>&nbsp;<span class="op" id="2296799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2296802">_</span><span class="op" id="2296803">,</span>&nbsp;<span class="ident" id="2296805">s</span>&nbsp;<span class="op" id="2296807">:=</span>&nbsp;<span class="ident" id="2296810">formatBits</span><span class="op" id="2296820">(</span><span class="ident" id="2296821">nil</span><span class="op" id="2296824">,</span>&nbsp;<span class="ident" id="2296826">i</span><span class="op" id="2296827">,</span>&nbsp;<span class="ident" id="2296829">base</span><span class="op" id="2296833">,</span>&nbsp;<span class="builtintype" id="2296835">false</span><span class="op" id="2296840">,</span>&nbsp;<span class="builtintype" id="2296842">false</span><span class="op" id="2296847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2296850">return</span>&nbsp;<span class="ident" id="2296857">s</span><br>
<span class="lineno"></span><span class="op" id="2296859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2296862">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2296933">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2297007">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2297034">func</span>&nbsp;<span class="ident" id="2297039">FormatInt</span><span class="op" id="2297048">(</span><span class="ident" id="2297049">i</span>&nbsp;<span class="ident" id="2297051">int64</span><span class="op" id="2297056">,</span>&nbsp;<span class="ident" id="2297058">base</span>&nbsp;<span class="builtintype" id="2297063">int</span><span class="op" id="2297066">)</span>&nbsp;<span class="builtintype" id="2297068">string</span>&nbsp;<span class="op" id="2297075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2297078">_</span><span class="op" id="2297079">,</span>&nbsp;<span class="ident" id="2297081">s</span>&nbsp;<span class="op" id="2297083">:=</span>&nbsp;<span class="ident" id="2297086">formatBits</span><span class="op" id="2297096">(</span><span class="ident" id="2297097">nil</span><span class="op" id="2297100">,</span>&nbsp;<span class="ident" id="2297102">uint64</span><span class="op" id="2297108">(</span><span class="ident" id="2297109">i</span><span class="op" id="2297110">)</span><span class="op" id="2297111">,</span>&nbsp;<span class="ident" id="2297113">base</span><span class="op" id="2297117">,</span>&nbsp;<span class="ident" id="2297119">i</span>&nbsp;<span class="op" id="2297121">&lt;</span>&nbsp;<span class="num" id="2297123">0</span><span class="op" id="2297124">,</span>&nbsp;<span class="builtintype" id="2297126">false</span><span class="op" id="2297131">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2297134">return</span>&nbsp;<span class="ident" id="2297141">s</span><br>
<span class="lineno"></span><span class="op" id="2297143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2297146">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2297189">func</span>&nbsp;<span class="ident" id="2297194">Itoa</span><span class="op" id="2297198">(</span><span class="ident" id="2297199">i</span>&nbsp;<span class="builtintype" id="2297201">int</span><span class="op" id="2297204">)</span>&nbsp;<span class="builtintype" id="2297206">string</span>&nbsp;<span class="op" id="2297213">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2297216">return</span>&nbsp;<span class="ident" id="2297223">FormatInt</span><span class="op" id="2297232">(</span><span class="ident" id="2297233">int64</span><span class="op" id="2297238">(</span><span class="ident" id="2297239">i</span><span class="op" id="2297240">)</span><span class="op" id="2297241">,</span>&nbsp;<span class="num" id="2297243">10</span><span class="op" id="2297245">)</span><br>
<span class="lineno"></span><span class="op" id="2297247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2297250">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2297305">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2297375">func</span>&nbsp;<span class="ident" id="2297380">AppendInt</span><span class="op" id="2297389">(</span><span class="ident" id="2297390">dst</span>&nbsp;<span class="op" id="2297394">[</span><span class="op" id="2297395">]</span><span class="builtintype" id="2297396">byte</span><span class="op" id="2297400">,</span>&nbsp;<span class="ident" id="2297402">i</span>&nbsp;<span class="ident" id="2297404">int64</span><span class="op" id="2297409">,</span>&nbsp;<span class="ident" id="2297411">base</span>&nbsp;<span class="builtintype" id="2297416">int</span><span class="op" id="2297419">)</span>&nbsp;<span class="op" id="2297421">[</span><span class="op" id="2297422">]</span><span class="builtintype" id="2297423">byte</span>&nbsp;<span class="op" id="2297428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2297431">dst</span><span class="op" id="2297434">,</span>&nbsp;<span class="ident" id="2297436">_</span>&nbsp;<span class="op" id="2297438">=</span>&nbsp;<span class="ident" id="2297440">formatBits</span><span class="op" id="2297450">(</span><span class="ident" id="2297451">dst</span><span class="op" id="2297454">,</span>&nbsp;<span class="ident" id="2297456">uint64</span><span class="op" id="2297462">(</span><span class="ident" id="2297463">i</span><span class="op" id="2297464">)</span><span class="op" id="2297465">,</span>&nbsp;<span class="ident" id="2297467">base</span><span class="op" id="2297471">,</span>&nbsp;<span class="ident" id="2297473">i</span>&nbsp;<span class="op" id="2297475">&lt;</span>&nbsp;<span class="num" id="2297477">0</span><span class="op" id="2297478">,</span>&nbsp;<span class="builtintype" id="2297480">true</span><span class="op" id="2297484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2297487">return</span>&nbsp;<span class="ident" id="2297494">dst</span><br>
<span class="lineno"></span><span class="op" id="2297498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2297501">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2297566">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2297637">func</span>&nbsp;<span class="ident" id="2297642">AppendUint</span><span class="op" id="2297652">(</span><span class="ident" id="2297653">dst</span>&nbsp;<span class="op" id="2297657">[</span><span class="op" id="2297658">]</span><span class="builtintype" id="2297659">byte</span><span class="op" id="2297663">,</span>&nbsp;<span class="ident" id="2297665">i</span>&nbsp;<span class="ident" id="2297667">uint64</span><span class="op" id="2297673">,</span>&nbsp;<span class="ident" id="2297675">base</span>&nbsp;<span class="builtintype" id="2297680">int</span><span class="op" id="2297683">)</span>&nbsp;<span class="op" id="2297685">[</span><span class="op" id="2297686">]</span><span class="builtintype" id="2297687">byte</span>&nbsp;<span class="op" id="2297692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2297695">dst</span><span class="op" id="2297698">,</span>&nbsp;<span class="ident" id="2297700">_</span>&nbsp;<span class="op" id="2297702">=</span>&nbsp;<span class="ident" id="2297704">formatBits</span><span class="op" id="2297714">(</span><span class="ident" id="2297715">dst</span><span class="op" id="2297718">,</span>&nbsp;<span class="ident" id="2297720">i</span><span class="op" id="2297721">,</span>&nbsp;<span class="ident" id="2297723">base</span><span class="op" id="2297727">,</span>&nbsp;<span class="builtintype" id="2297729">false</span><span class="op" id="2297734">,</span>&nbsp;<span class="builtintype" id="2297736">true</span><span class="op" id="2297740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2297743">return</span>&nbsp;<span class="ident" id="2297750">dst</span><br>
<span class="lineno">40</span><span class="op" id="2297754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2297757">const</span>&nbsp;<span class="op" id="2297763">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2297766">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2297775">=</span>&nbsp;<span class="string" id="2297777">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2297817">digits01</span>&nbsp;<span class="op" id="2297826">=</span>&nbsp;<span class="string" id="2297828">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2297932">digits10</span>&nbsp;<span class="op" id="2297941">=</span>&nbsp;<span class="string" id="2297943">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2298046">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2298049">var</span>&nbsp;<span class="ident" id="2298053">shifts</span>&nbsp;<span class="op" id="2298060">=</span>&nbsp;<span class="op" id="2298062">[</span><span class="builtinfunc" id="2298063">len</span><span class="op" id="2298066">(</span><span class="ident" id="2298067">digits</span><span class="op" id="2298073">)</span>&nbsp;<span class="op" id="2298075">+</span>&nbsp;<span class="num" id="2298077">1</span><span class="op" id="2298078">]</span><span class="builtintype" id="2298079">uint</span><span class="op" id="2298083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2298086">1</span>&nbsp;<span class="op" id="2298088">&lt;&lt;</span>&nbsp;<span class="num" id="2298091">1</span><span class="op" id="2298092">:</span>&nbsp;<span class="num" id="2298094">1</span><span class="op" id="2298095">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2298098">1</span>&nbsp;<span class="op" id="2298100">&lt;&lt;</span>&nbsp;<span class="num" id="2298103">2</span><span class="op" id="2298104">:</span>&nbsp;<span class="num" id="2298106">2</span><span class="op" id="2298107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2298110">1</span>&nbsp;<span class="op" id="2298112">&lt;&lt;</span>&nbsp;<span class="num" id="2298115">3</span><span class="op" id="2298116">:</span>&nbsp;<span class="num" id="2298118">3</span><span class="op" id="2298119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2298122">1</span>&nbsp;<span class="op" id="2298124">&lt;&lt;</span>&nbsp;<span class="num" id="2298127">4</span><span class="op" id="2298128">:</span>&nbsp;<span class="num" id="2298130">4</span><span class="op" id="2298131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2298134">1</span>&nbsp;<span class="op" id="2298136">&lt;&lt;</span>&nbsp;<span class="num" id="2298139">5</span><span class="op" id="2298140">:</span>&nbsp;<span class="num" id="2298142">5</span><span class="op" id="2298143">,</span><br>
<span class="lineno"></span><span class="op" id="2298145">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2298148">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2298221">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2298291">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2298361">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2298433">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2298464">//</span><br>
<span class="lineno"></span><span class="keyword" id="2298467">func</span>&nbsp;<span class="ident" id="2298472">formatBits</span><span class="op" id="2298482">(</span><span class="ident" id="2298483">dst</span>&nbsp;<span class="op" id="2298487">[</span><span class="op" id="2298488">]</span><span class="builtintype" id="2298489">byte</span><span class="op" id="2298493">,</span>&nbsp;<span class="ident" id="2298495">u</span>&nbsp;<span class="ident" id="2298497">uint64</span><span class="op" id="2298503">,</span>&nbsp;<span class="ident" id="2298505">base</span>&nbsp;<span class="builtintype" id="2298510">int</span><span class="op" id="2298513">,</span>&nbsp;<span class="ident" id="2298515">neg</span><span class="op" id="2298518">,</span>&nbsp;<span class="ident" id="2298520">append_</span>&nbsp;<span class="builtintype" id="2298528">bool</span><span class="op" id="2298532">)</span>&nbsp;<span class="op" id="2298534">(</span><span class="ident" id="2298535">d</span>&nbsp;<span class="op" id="2298537">[</span><span class="op" id="2298538">]</span><span class="builtintype" id="2298539">byte</span><span class="op" id="2298543">,</span>&nbsp;<span class="ident" id="2298545">s</span>&nbsp;<span class="builtintype" id="2298547">string</span><span class="op" id="2298553">)</span>&nbsp;<span class="op" id="2298555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2298558">if</span>&nbsp;<span class="ident" id="2298561">base</span>&nbsp;<span class="op" id="2298566">&lt;</span>&nbsp;<span class="num" id="2298568">2</span>&nbsp;<span class="op" id="2298570">||</span>&nbsp;<span class="ident" id="2298573">base</span>&nbsp;<span class="op" id="2298578">&gt;</span>&nbsp;<span class="builtinfunc" id="2298580">len</span><span class="op" id="2298583">(</span><span class="ident" id="2298584">digits</span><span class="op" id="2298590">)</span>&nbsp;<span class="op" id="2298592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2298596">panic</span><span class="op" id="2298601">(</span><span class="string" id="2298602">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2298645">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2298648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2298651">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2298689">var</span>&nbsp;<span class="ident" id="2298693">a</span>&nbsp;<span class="op" id="2298695">[</span><span class="num" id="2298696">64</span>&nbsp;<span class="op" id="2298699">+</span>&nbsp;<span class="num" id="2298701">1</span><span class="op" id="2298702">]</span><span class="builtintype" id="2298703">byte</span>&nbsp;<span class="comment" id="2298708">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2298749">i</span>&nbsp;<span class="op" id="2298751">:=</span>&nbsp;<span class="builtinfunc" id="2298754">len</span><span class="op" id="2298757">(</span><span class="ident" id="2298758">a</span><span class="op" id="2298759">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2298763">if</span>&nbsp;<span class="ident" id="2298766">neg</span>&nbsp;<span class="op" id="2298770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2298774">u</span>&nbsp;<span class="op" id="2298776">=</span>&nbsp;<span class="op" id="2298778">-</span><span class="ident" id="2298779">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2298782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2298786">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2298803">if</span>&nbsp;<span class="ident" id="2298806">base</span>&nbsp;<span class="op" id="2298811">==</span>&nbsp;<span class="num" id="2298814">10</span>&nbsp;<span class="op" id="2298817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2298821">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2298873">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2298930">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2298951">for</span>&nbsp;<span class="ident" id="2298955">u</span>&nbsp;<span class="op" id="2298957">&gt;=</span>&nbsp;<span class="num" id="2298960">100</span>&nbsp;<span class="op" id="2298964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2298969">i</span>&nbsp;<span class="op" id="2298971">-=</span>&nbsp;<span class="num" id="2298974">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2298979">q</span>&nbsp;<span class="op" id="2298981">:=</span>&nbsp;<span class="ident" id="2298984">u</span>&nbsp;<span class="op" id="2298986">/</span>&nbsp;<span class="num" id="2298988">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2298995">j</span>&nbsp;<span class="op" id="2298997">:=</span>&nbsp;<span class="builtintype" id="2299000">uintptr</span><span class="op" id="2299007">(</span><span class="ident" id="2299008">u</span>&nbsp;<span class="op" id="2299010">-</span>&nbsp;<span class="ident" id="2299012">q</span><span class="op" id="2299013">*</span><span class="num" id="2299014">100</span><span class="op" id="2299017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299022">a</span><span class="op" id="2299023">[</span><span class="ident" id="2299024">i</span><span class="op" id="2299025">+</span><span class="num" id="2299026">1</span><span class="op" id="2299027">]</span>&nbsp;<span class="op" id="2299029">=</span>&nbsp;<span class="ident" id="2299031">digits01</span><span class="op" id="2299039">[</span><span class="ident" id="2299040">j</span><span class="op" id="2299041">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299046">a</span><span class="op" id="2299047">[</span><span class="ident" id="2299048">i</span><span class="op" id="2299049">+</span><span class="num" id="2299050">0</span><span class="op" id="2299051">]</span>&nbsp;<span class="op" id="2299053">=</span>&nbsp;<span class="ident" id="2299055">digits10</span><span class="op" id="2299063">[</span><span class="ident" id="2299064">j</span><span class="op" id="2299065">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299070">u</span>&nbsp;<span class="op" id="2299072">=</span>&nbsp;<span class="ident" id="2299074">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299082">if</span>&nbsp;<span class="ident" id="2299085">u</span>&nbsp;<span class="op" id="2299087">&gt;=</span>&nbsp;<span class="num" id="2299090">10</span>&nbsp;<span class="op" id="2299093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299098">i</span><span class="op" id="2299099">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299105">q</span>&nbsp;<span class="op" id="2299107">:=</span>&nbsp;<span class="ident" id="2299110">u</span>&nbsp;<span class="op" id="2299112">/</span>&nbsp;<span class="num" id="2299114">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299120">a</span><span class="op" id="2299121">[</span><span class="ident" id="2299122">i</span><span class="op" id="2299123">]</span>&nbsp;<span class="op" id="2299125">=</span>&nbsp;<span class="ident" id="2299127">digits</span><span class="op" id="2299133">[</span><span class="builtintype" id="2299134">uintptr</span><span class="op" id="2299141">(</span><span class="ident" id="2299142">u</span><span class="op" id="2299143">-</span><span class="ident" id="2299144">q</span><span class="op" id="2299145">*</span><span class="num" id="2299146">10</span><span class="op" id="2299148">)</span><span class="op" id="2299149">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299154">u</span>&nbsp;<span class="op" id="2299156">=</span>&nbsp;<span class="ident" id="2299158">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299166">}</span>&nbsp;<span class="keyword" id="2299168">else</span>&nbsp;<span class="keyword" id="2299173">if</span>&nbsp;<span class="ident" id="2299176">s</span>&nbsp;<span class="op" id="2299178">:=</span>&nbsp;<span class="ident" id="2299181">shifts</span><span class="op" id="2299187">[</span><span class="ident" id="2299188">base</span><span class="op" id="2299192">]</span><span class="op" id="2299193">;</span>&nbsp;<span class="ident" id="2299195">s</span>&nbsp;<span class="op" id="2299197">&gt;</span>&nbsp;<span class="num" id="2299199">0</span>&nbsp;<span class="op" id="2299201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2299205">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299270">b</span>&nbsp;<span class="op" id="2299272">:=</span>&nbsp;<span class="ident" id="2299275">uint64</span><span class="op" id="2299281">(</span><span class="ident" id="2299282">base</span><span class="op" id="2299286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299290">m</span>&nbsp;<span class="op" id="2299292">:=</span>&nbsp;<span class="builtintype" id="2299295">uintptr</span><span class="op" id="2299302">(</span><span class="ident" id="2299303">b</span><span class="op" id="2299304">)</span>&nbsp;<span class="op" id="2299306">-</span>&nbsp;<span class="num" id="2299308">1</span>&nbsp;<span class="comment" id="2299310">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299327">for</span>&nbsp;<span class="ident" id="2299331">u</span>&nbsp;<span class="op" id="2299333">&gt;=</span>&nbsp;<span class="ident" id="2299336">b</span>&nbsp;<span class="op" id="2299338">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299343">i</span><span class="op" id="2299344">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299350">a</span><span class="op" id="2299351">[</span><span class="ident" id="2299352">i</span><span class="op" id="2299353">]</span>&nbsp;<span class="op" id="2299355">=</span>&nbsp;<span class="ident" id="2299357">digits</span><span class="op" id="2299363">[</span><span class="builtintype" id="2299364">uintptr</span><span class="op" id="2299371">(</span><span class="ident" id="2299372">u</span><span class="op" id="2299373">)</span><span class="op" id="2299374">&amp;</span><span class="ident" id="2299375">m</span><span class="op" id="2299376">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299381">u</span>&nbsp;<span class="op" id="2299383">&gt;&gt;=</span>&nbsp;<span class="ident" id="2299387">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299395">}</span>&nbsp;<span class="keyword" id="2299397">else</span>&nbsp;<span class="op" id="2299402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2299406">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299424">b</span>&nbsp;<span class="op" id="2299426">:=</span>&nbsp;<span class="ident" id="2299429">uint64</span><span class="op" id="2299435">(</span><span class="ident" id="2299436">base</span><span class="op" id="2299440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299444">for</span>&nbsp;<span class="ident" id="2299448">u</span>&nbsp;<span class="op" id="2299450">&gt;=</span>&nbsp;<span class="ident" id="2299453">b</span>&nbsp;<span class="op" id="2299455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299460">i</span><span class="op" id="2299461">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299467">a</span><span class="op" id="2299468">[</span><span class="ident" id="2299469">i</span><span class="op" id="2299470">]</span>&nbsp;<span class="op" id="2299472">=</span>&nbsp;<span class="ident" id="2299474">digits</span><span class="op" id="2299480">[</span><span class="builtintype" id="2299481">uintptr</span><span class="op" id="2299488">(</span><span class="ident" id="2299489">u</span><span class="op" id="2299490">%</span><span class="ident" id="2299491">b</span><span class="op" id="2299492">)</span><span class="op" id="2299493">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299498">u</span>&nbsp;<span class="op" id="2299500">/=</span>&nbsp;<span class="ident" id="2299503">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2299514">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299527">i</span><span class="op" id="2299528">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299532">a</span><span class="op" id="2299533">[</span><span class="ident" id="2299534">i</span><span class="op" id="2299535">]</span>&nbsp;<span class="op" id="2299537">=</span>&nbsp;<span class="ident" id="2299539">digits</span><span class="op" id="2299545">[</span><span class="builtintype" id="2299546">uintptr</span><span class="op" id="2299553">(</span><span class="ident" id="2299554">u</span><span class="op" id="2299555">)</span><span class="op" id="2299556">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2299560">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299581">if</span>&nbsp;<span class="ident" id="2299584">neg</span>&nbsp;<span class="op" id="2299588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299592">i</span><span class="op" id="2299593">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299598">a</span><span class="op" id="2299599">[</span><span class="ident" id="2299600">i</span><span class="op" id="2299601">]</span>&nbsp;<span class="op" id="2299603">=</span>&nbsp;<span class="string" id="2299605">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299614">if</span>&nbsp;<span class="ident" id="2299617">append_</span>&nbsp;<span class="op" id="2299625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299629">d</span>&nbsp;<span class="op" id="2299631">=</span>&nbsp;<span class="builtinfunc" id="2299633">append</span><span class="op" id="2299639">(</span><span class="ident" id="2299640">dst</span><span class="op" id="2299643">,</span>&nbsp;<span class="ident" id="2299645">a</span><span class="op" id="2299646">[</span><span class="ident" id="2299647">i</span><span class="op" id="2299648">:</span><span class="op" id="2299649">]</span><span class="op" id="2299650">...</span><span class="op" id="2299653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299657">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2299665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2299668">s</span>&nbsp;<span class="op" id="2299670">=</span>&nbsp;<span class="builtintype" id="2299672">string</span><span class="op" id="2299678">(</span><span class="ident" id="2299679">a</span><span class="op" id="2299680">[</span><span class="ident" id="2299681">i</span><span class="op" id="2299682">:</span><span class="op" id="2299683">]</span><span class="op" id="2299684">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2299687">return</span><br>
<span class="lineno"></span><span class="op" id="2299694">}</span>
</div>
</body>
</html>
