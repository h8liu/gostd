<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2947464">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2947519">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2947573">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2947624">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="2947675">package</span>&nbsp;<span class="ident" id="2947683">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2947690">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="2947767">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="2947799">type</span>&nbsp;<span class="ident" id="2947804">Color</span>&nbsp;<span class="keyword" id="2947810">interface</span>&nbsp;<span class="op" id="2947820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947823">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947898">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2947974">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2948050">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948064">RGBA</span><span class="op" id="2948068">(</span><span class="op" id="2948069">)</span>&nbsp;<span class="op" id="2948071">(</span><span class="ident" id="2948072">r</span><span class="op" id="2948073">,</span>&nbsp;<span class="ident" id="2948075">g</span><span class="op" id="2948076">,</span>&nbsp;<span class="ident" id="2948078">b</span><span class="op" id="2948079">,</span>&nbsp;<span class="ident" id="2948081">a</span>&nbsp;<span class="builtintype" id="2948083">uint32</span><span class="op" id="2948089">)</span><br>
<span class="lineno"></span><span class="op" id="2948091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2948094">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="2948161">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="2948218">type</span>&nbsp;<span class="ident" id="2948223">RGBA</span>&nbsp;<span class="keyword" id="2948228">struct</span>&nbsp;<span class="op" id="2948235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948238">R</span><span class="op" id="2948239">,</span>&nbsp;<span class="ident" id="2948241">G</span><span class="op" id="2948242">,</span>&nbsp;<span class="ident" id="2948244">B</span><span class="op" id="2948245">,</span>&nbsp;<span class="ident" id="2948247">A</span>&nbsp;<span class="builtintype" id="2948249">uint8</span><br>
<span class="lineno"></span><span class="op" id="2948255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2948258">func</span>&nbsp;<span class="op" id="2948263">(</span><span class="ident" id="2948264">c</span>&nbsp;<span class="ident" id="2948266">RGBA</span><span class="op" id="2948270">)</span>&nbsp;<span class="ident" id="2948272">RGBA</span><span class="op" id="2948276">(</span><span class="op" id="2948277">)</span>&nbsp;<span class="op" id="2948279">(</span><span class="ident" id="2948280">r</span><span class="op" id="2948281">,</span>&nbsp;<span class="ident" id="2948283">g</span><span class="op" id="2948284">,</span>&nbsp;<span class="ident" id="2948286">b</span><span class="op" id="2948287">,</span>&nbsp;<span class="ident" id="2948289">a</span>&nbsp;<span class="builtintype" id="2948291">uint32</span><span class="op" id="2948297">)</span>&nbsp;<span class="op" id="2948299">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948302">r</span>&nbsp;<span class="op" id="2948304">=</span>&nbsp;<span class="builtintype" id="2948306">uint32</span><span class="op" id="2948312">(</span><span class="ident" id="2948313">c</span><span class="op" id="2948314">.</span><span class="ident" id="2948315">R</span><span class="op" id="2948316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948319">r</span>&nbsp;<span class="op" id="2948321">|=</span>&nbsp;<span class="ident" id="2948324">r</span>&nbsp;<span class="op" id="2948326">&lt;&lt;</span>&nbsp;<span class="num" id="2948329">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948332">g</span>&nbsp;<span class="op" id="2948334">=</span>&nbsp;<span class="builtintype" id="2948336">uint32</span><span class="op" id="2948342">(</span><span class="ident" id="2948343">c</span><span class="op" id="2948344">.</span><span class="ident" id="2948345">G</span><span class="op" id="2948346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948349">g</span>&nbsp;<span class="op" id="2948351">|=</span>&nbsp;<span class="ident" id="2948354">g</span>&nbsp;<span class="op" id="2948356">&lt;&lt;</span>&nbsp;<span class="num" id="2948359">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948362">b</span>&nbsp;<span class="op" id="2948364">=</span>&nbsp;<span class="builtintype" id="2948366">uint32</span><span class="op" id="2948372">(</span><span class="ident" id="2948373">c</span><span class="op" id="2948374">.</span><span class="ident" id="2948375">B</span><span class="op" id="2948376">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948379">b</span>&nbsp;<span class="op" id="2948381">|=</span>&nbsp;<span class="ident" id="2948384">b</span>&nbsp;<span class="op" id="2948386">&lt;&lt;</span>&nbsp;<span class="num" id="2948389">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948392">a</span>&nbsp;<span class="op" id="2948394">=</span>&nbsp;<span class="builtintype" id="2948396">uint32</span><span class="op" id="2948402">(</span><span class="ident" id="2948403">c</span><span class="op" id="2948404">.</span><span class="ident" id="2948405">A</span><span class="op" id="2948406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948409">a</span>&nbsp;<span class="op" id="2948411">|=</span>&nbsp;<span class="ident" id="2948414">a</span>&nbsp;<span class="op" id="2948416">&lt;&lt;</span>&nbsp;<span class="num" id="2948419">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948422">return</span><br>
<span class="lineno"></span><span class="op" id="2948429">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2948432">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="2948489">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="2948547">type</span>&nbsp;<span class="ident" id="2948552">RGBA64</span>&nbsp;<span class="keyword" id="2948559">struct</span>&nbsp;<span class="op" id="2948566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948569">R</span><span class="op" id="2948570">,</span>&nbsp;<span class="ident" id="2948572">G</span><span class="op" id="2948573">,</span>&nbsp;<span class="ident" id="2948575">B</span><span class="op" id="2948576">,</span>&nbsp;<span class="ident" id="2948578">A</span>&nbsp;<span class="builtintype" id="2948580">uint16</span><br>
<span class="lineno">40</span><span class="op" id="2948587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2948590">func</span>&nbsp;<span class="op" id="2948595">(</span><span class="ident" id="2948596">c</span>&nbsp;<span class="ident" id="2948598">RGBA64</span><span class="op" id="2948604">)</span>&nbsp;<span class="ident" id="2948606">RGBA</span><span class="op" id="2948610">(</span><span class="op" id="2948611">)</span>&nbsp;<span class="op" id="2948613">(</span><span class="ident" id="2948614">r</span><span class="op" id="2948615">,</span>&nbsp;<span class="ident" id="2948617">g</span><span class="op" id="2948618">,</span>&nbsp;<span class="ident" id="2948620">b</span><span class="op" id="2948621">,</span>&nbsp;<span class="ident" id="2948623">a</span>&nbsp;<span class="builtintype" id="2948625">uint32</span><span class="op" id="2948631">)</span>&nbsp;<span class="op" id="2948633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2948636">return</span>&nbsp;<span class="builtintype" id="2948643">uint32</span><span class="op" id="2948649">(</span><span class="ident" id="2948650">c</span><span class="op" id="2948651">.</span><span class="ident" id="2948652">R</span><span class="op" id="2948653">)</span><span class="op" id="2948654">,</span>&nbsp;<span class="builtintype" id="2948656">uint32</span><span class="op" id="2948662">(</span><span class="ident" id="2948663">c</span><span class="op" id="2948664">.</span><span class="ident" id="2948665">G</span><span class="op" id="2948666">)</span><span class="op" id="2948667">,</span>&nbsp;<span class="builtintype" id="2948669">uint32</span><span class="op" id="2948675">(</span><span class="ident" id="2948676">c</span><span class="op" id="2948677">.</span><span class="ident" id="2948678">B</span><span class="op" id="2948679">)</span><span class="op" id="2948680">,</span>&nbsp;<span class="builtintype" id="2948682">uint32</span><span class="op" id="2948688">(</span><span class="ident" id="2948689">c</span><span class="op" id="2948690">.</span><span class="ident" id="2948691">A</span><span class="op" id="2948692">)</span><br>
<span class="lineno"></span><span class="op" id="2948694">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2948697">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2948757">type</span>&nbsp;<span class="ident" id="2948762">NRGBA</span>&nbsp;<span class="keyword" id="2948768">struct</span>&nbsp;<span class="op" id="2948775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948778">R</span><span class="op" id="2948779">,</span>&nbsp;<span class="ident" id="2948781">G</span><span class="op" id="2948782">,</span>&nbsp;<span class="ident" id="2948784">B</span><span class="op" id="2948785">,</span>&nbsp;<span class="ident" id="2948787">A</span>&nbsp;<span class="builtintype" id="2948789">uint8</span><br>
<span class="lineno"></span><span class="op" id="2948795">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="2948798">func</span>&nbsp;<span class="op" id="2948803">(</span><span class="ident" id="2948804">c</span>&nbsp;<span class="ident" id="2948806">NRGBA</span><span class="op" id="2948811">)</span>&nbsp;<span class="ident" id="2948813">RGBA</span><span class="op" id="2948817">(</span><span class="op" id="2948818">)</span>&nbsp;<span class="op" id="2948820">(</span><span class="ident" id="2948821">r</span><span class="op" id="2948822">,</span>&nbsp;<span class="ident" id="2948824">g</span><span class="op" id="2948825">,</span>&nbsp;<span class="ident" id="2948827">b</span><span class="op" id="2948828">,</span>&nbsp;<span class="ident" id="2948830">a</span>&nbsp;<span class="builtintype" id="2948832">uint32</span><span class="op" id="2948838">)</span>&nbsp;<span class="op" id="2948840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948843">r</span>&nbsp;<span class="op" id="2948845">=</span>&nbsp;<span class="builtintype" id="2948847">uint32</span><span class="op" id="2948853">(</span><span class="ident" id="2948854">c</span><span class="op" id="2948855">.</span><span class="ident" id="2948856">R</span><span class="op" id="2948857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948860">r</span>&nbsp;<span class="op" id="2948862">|=</span>&nbsp;<span class="ident" id="2948865">r</span>&nbsp;<span class="op" id="2948867">&lt;&lt;</span>&nbsp;<span class="num" id="2948870">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948873">r</span>&nbsp;<span class="op" id="2948875">*=</span>&nbsp;<span class="builtintype" id="2948878">uint32</span><span class="op" id="2948884">(</span><span class="ident" id="2948885">c</span><span class="op" id="2948886">.</span><span class="ident" id="2948887">A</span><span class="op" id="2948888">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948891">r</span>&nbsp;<span class="op" id="2948893">/=</span>&nbsp;<span class="num" id="2948896">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948902">g</span>&nbsp;<span class="op" id="2948904">=</span>&nbsp;<span class="builtintype" id="2948906">uint32</span><span class="op" id="2948912">(</span><span class="ident" id="2948913">c</span><span class="op" id="2948914">.</span><span class="ident" id="2948915">G</span><span class="op" id="2948916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948919">g</span>&nbsp;<span class="op" id="2948921">|=</span>&nbsp;<span class="ident" id="2948924">g</span>&nbsp;<span class="op" id="2948926">&lt;&lt;</span>&nbsp;<span class="num" id="2948929">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948932">g</span>&nbsp;<span class="op" id="2948934">*=</span>&nbsp;<span class="builtintype" id="2948937">uint32</span><span class="op" id="2948943">(</span><span class="ident" id="2948944">c</span><span class="op" id="2948945">.</span><span class="ident" id="2948946">A</span><span class="op" id="2948947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948950">g</span>&nbsp;<span class="op" id="2948952">/=</span>&nbsp;<span class="num" id="2948955">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948961">b</span>&nbsp;<span class="op" id="2948963">=</span>&nbsp;<span class="builtintype" id="2948965">uint32</span><span class="op" id="2948971">(</span><span class="ident" id="2948972">c</span><span class="op" id="2948973">.</span><span class="ident" id="2948974">B</span><span class="op" id="2948975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948978">b</span>&nbsp;<span class="op" id="2948980">|=</span>&nbsp;<span class="ident" id="2948983">b</span>&nbsp;<span class="op" id="2948985">&lt;&lt;</span>&nbsp;<span class="num" id="2948988">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2948991">b</span>&nbsp;<span class="op" id="2948993">*=</span>&nbsp;<span class="builtintype" id="2948996">uint32</span><span class="op" id="2949002">(</span><span class="ident" id="2949003">c</span><span class="op" id="2949004">.</span><span class="ident" id="2949005">A</span><span class="op" id="2949006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949009">b</span>&nbsp;<span class="op" id="2949011">/=</span>&nbsp;<span class="num" id="2949014">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949020">a</span>&nbsp;<span class="op" id="2949022">=</span>&nbsp;<span class="builtintype" id="2949024">uint32</span><span class="op" id="2949030">(</span><span class="ident" id="2949031">c</span><span class="op" id="2949032">.</span><span class="ident" id="2949033">A</span><span class="op" id="2949034">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949037">a</span>&nbsp;<span class="op" id="2949039">|=</span>&nbsp;<span class="ident" id="2949042">a</span>&nbsp;<span class="op" id="2949044">&lt;&lt;</span>&nbsp;<span class="num" id="2949047">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949050">return</span><br>
<span class="lineno"></span><span class="op" id="2949057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949060">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="2949122">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="2949180">type</span>&nbsp;<span class="ident" id="2949185">NRGBA64</span>&nbsp;<span class="keyword" id="2949193">struct</span>&nbsp;<span class="op" id="2949200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949203">R</span><span class="op" id="2949204">,</span>&nbsp;<span class="ident" id="2949206">G</span><span class="op" id="2949207">,</span>&nbsp;<span class="ident" id="2949209">B</span><span class="op" id="2949210">,</span>&nbsp;<span class="ident" id="2949212">A</span>&nbsp;<span class="builtintype" id="2949214">uint16</span><br>
<span class="lineno"></span><span class="op" id="2949221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="2949224">func</span>&nbsp;<span class="op" id="2949229">(</span><span class="ident" id="2949230">c</span>&nbsp;<span class="ident" id="2949232">NRGBA64</span><span class="op" id="2949239">)</span>&nbsp;<span class="ident" id="2949241">RGBA</span><span class="op" id="2949245">(</span><span class="op" id="2949246">)</span>&nbsp;<span class="op" id="2949248">(</span><span class="ident" id="2949249">r</span><span class="op" id="2949250">,</span>&nbsp;<span class="ident" id="2949252">g</span><span class="op" id="2949253">,</span>&nbsp;<span class="ident" id="2949255">b</span><span class="op" id="2949256">,</span>&nbsp;<span class="ident" id="2949258">a</span>&nbsp;<span class="builtintype" id="2949260">uint32</span><span class="op" id="2949266">)</span>&nbsp;<span class="op" id="2949268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949271">r</span>&nbsp;<span class="op" id="2949273">=</span>&nbsp;<span class="builtintype" id="2949275">uint32</span><span class="op" id="2949281">(</span><span class="ident" id="2949282">c</span><span class="op" id="2949283">.</span><span class="ident" id="2949284">R</span><span class="op" id="2949285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949288">r</span>&nbsp;<span class="op" id="2949290">*=</span>&nbsp;<span class="builtintype" id="2949293">uint32</span><span class="op" id="2949299">(</span><span class="ident" id="2949300">c</span><span class="op" id="2949301">.</span><span class="ident" id="2949302">A</span><span class="op" id="2949303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949306">r</span>&nbsp;<span class="op" id="2949308">/=</span>&nbsp;<span class="num" id="2949311">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949319">g</span>&nbsp;<span class="op" id="2949321">=</span>&nbsp;<span class="builtintype" id="2949323">uint32</span><span class="op" id="2949329">(</span><span class="ident" id="2949330">c</span><span class="op" id="2949331">.</span><span class="ident" id="2949332">G</span><span class="op" id="2949333">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949336">g</span>&nbsp;<span class="op" id="2949338">*=</span>&nbsp;<span class="builtintype" id="2949341">uint32</span><span class="op" id="2949347">(</span><span class="ident" id="2949348">c</span><span class="op" id="2949349">.</span><span class="ident" id="2949350">A</span><span class="op" id="2949351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949354">g</span>&nbsp;<span class="op" id="2949356">/=</span>&nbsp;<span class="num" id="2949359">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949367">b</span>&nbsp;<span class="op" id="2949369">=</span>&nbsp;<span class="builtintype" id="2949371">uint32</span><span class="op" id="2949377">(</span><span class="ident" id="2949378">c</span><span class="op" id="2949379">.</span><span class="ident" id="2949380">B</span><span class="op" id="2949381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949384">b</span>&nbsp;<span class="op" id="2949386">*=</span>&nbsp;<span class="builtintype" id="2949389">uint32</span><span class="op" id="2949395">(</span><span class="ident" id="2949396">c</span><span class="op" id="2949397">.</span><span class="ident" id="2949398">A</span><span class="op" id="2949399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949402">b</span>&nbsp;<span class="op" id="2949404">/=</span>&nbsp;<span class="num" id="2949407">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949415">a</span>&nbsp;<span class="op" id="2949417">=</span>&nbsp;<span class="builtintype" id="2949419">uint32</span><span class="op" id="2949425">(</span><span class="ident" id="2949426">c</span><span class="op" id="2949427">.</span><span class="ident" id="2949428">A</span><span class="op" id="2949429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949432">return</span><br>
<span class="lineno"></span><span class="op" id="2949439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2949442">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="2949484">type</span>&nbsp;<span class="ident" id="2949489">Alpha</span>&nbsp;<span class="keyword" id="2949495">struct</span>&nbsp;<span class="op" id="2949502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949505">A</span>&nbsp;<span class="builtintype" id="2949507">uint8</span><br>
<span class="lineno"></span><span class="op" id="2949513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2949516">func</span>&nbsp;<span class="op" id="2949521">(</span><span class="ident" id="2949522">c</span>&nbsp;<span class="ident" id="2949524">Alpha</span><span class="op" id="2949529">)</span>&nbsp;<span class="ident" id="2949531">RGBA</span><span class="op" id="2949535">(</span><span class="op" id="2949536">)</span>&nbsp;<span class="op" id="2949538">(</span><span class="ident" id="2949539">r</span><span class="op" id="2949540">,</span>&nbsp;<span class="ident" id="2949542">g</span><span class="op" id="2949543">,</span>&nbsp;<span class="ident" id="2949545">b</span><span class="op" id="2949546">,</span>&nbsp;<span class="ident" id="2949548">a</span>&nbsp;<span class="builtintype" id="2949550">uint32</span><span class="op" id="2949556">)</span>&nbsp;<span class="op" id="2949558">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949561">a</span>&nbsp;<span class="op" id="2949563">=</span>&nbsp;<span class="builtintype" id="2949565">uint32</span><span class="op" id="2949571">(</span><span class="ident" id="2949572">c</span><span class="op" id="2949573">.</span><span class="ident" id="2949574">A</span><span class="op" id="2949575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949578">a</span>&nbsp;<span class="op" id="2949580">|=</span>&nbsp;<span class="ident" id="2949583">a</span>&nbsp;<span class="op" id="2949585">&lt;&lt;</span>&nbsp;<span class="num" id="2949588">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949591">return</span>&nbsp;<span class="ident" id="2949598">a</span><span class="op" id="2949599">,</span>&nbsp;<span class="ident" id="2949601">a</span><span class="op" id="2949602">,</span>&nbsp;<span class="ident" id="2949604">a</span><span class="op" id="2949605">,</span>&nbsp;<span class="ident" id="2949607">a</span><br>
<span class="lineno"></span><span class="op" id="2949609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="2949612">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2949656">type</span>&nbsp;<span class="ident" id="2949661">Alpha16</span>&nbsp;<span class="keyword" id="2949669">struct</span>&nbsp;<span class="op" id="2949676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949679">A</span>&nbsp;<span class="builtintype" id="2949681">uint16</span><br>
<span class="lineno"></span><span class="op" id="2949688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="2949691">func</span>&nbsp;<span class="op" id="2949696">(</span><span class="ident" id="2949697">c</span>&nbsp;<span class="ident" id="2949699">Alpha16</span><span class="op" id="2949706">)</span>&nbsp;<span class="ident" id="2949708">RGBA</span><span class="op" id="2949712">(</span><span class="op" id="2949713">)</span>&nbsp;<span class="op" id="2949715">(</span><span class="ident" id="2949716">r</span><span class="op" id="2949717">,</span>&nbsp;<span class="ident" id="2949719">g</span><span class="op" id="2949720">,</span>&nbsp;<span class="ident" id="2949722">b</span><span class="op" id="2949723">,</span>&nbsp;<span class="ident" id="2949725">a</span>&nbsp;<span class="builtintype" id="2949727">uint32</span><span class="op" id="2949733">)</span>&nbsp;<span class="op" id="2949735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949738">a</span>&nbsp;<span class="op" id="2949740">=</span>&nbsp;<span class="builtintype" id="2949742">uint32</span><span class="op" id="2949748">(</span><span class="ident" id="2949749">c</span><span class="op" id="2949750">.</span><span class="ident" id="2949751">A</span><span class="op" id="2949752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949755">return</span>&nbsp;<span class="ident" id="2949762">a</span><span class="op" id="2949763">,</span>&nbsp;<span class="ident" id="2949765">a</span><span class="op" id="2949766">,</span>&nbsp;<span class="ident" id="2949768">a</span><span class="op" id="2949769">,</span>&nbsp;<span class="ident" id="2949771">a</span><br>
<span class="lineno"></span><span class="op" id="2949773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="2949776">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2949821">type</span>&nbsp;<span class="ident" id="2949826">Gray</span>&nbsp;<span class="keyword" id="2949831">struct</span>&nbsp;<span class="op" id="2949838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949841">Y</span>&nbsp;<span class="builtintype" id="2949843">uint8</span><br>
<span class="lineno"></span><span class="op" id="2949849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2949852">func</span>&nbsp;<span class="op" id="2949857">(</span><span class="ident" id="2949858">c</span>&nbsp;<span class="ident" id="2949860">Gray</span><span class="op" id="2949864">)</span>&nbsp;<span class="ident" id="2949866">RGBA</span><span class="op" id="2949870">(</span><span class="op" id="2949871">)</span>&nbsp;<span class="op" id="2949873">(</span><span class="ident" id="2949874">r</span><span class="op" id="2949875">,</span>&nbsp;<span class="ident" id="2949877">g</span><span class="op" id="2949878">,</span>&nbsp;<span class="ident" id="2949880">b</span><span class="op" id="2949881">,</span>&nbsp;<span class="ident" id="2949883">a</span>&nbsp;<span class="builtintype" id="2949885">uint32</span><span class="op" id="2949891">)</span>&nbsp;<span class="op" id="2949893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949896">y</span>&nbsp;<span class="op" id="2949898">:=</span>&nbsp;<span class="builtintype" id="2949901">uint32</span><span class="op" id="2949907">(</span><span class="ident" id="2949908">c</span><span class="op" id="2949909">.</span><span class="ident" id="2949910">Y</span><span class="op" id="2949911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2949914">y</span>&nbsp;<span class="op" id="2949916">|=</span>&nbsp;<span class="ident" id="2949919">y</span>&nbsp;<span class="op" id="2949921">&lt;&lt;</span>&nbsp;<span class="num" id="2949924">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2949927">return</span>&nbsp;<span class="ident" id="2949934">y</span><span class="op" id="2949935">,</span>&nbsp;<span class="ident" id="2949937">y</span><span class="op" id="2949938">,</span>&nbsp;<span class="ident" id="2949940">y</span><span class="op" id="2949941">,</span>&nbsp;<span class="num" id="2949943">0xffff</span><br>
<span class="lineno"></span><span class="op" id="2949950">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="2949953">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="2950000">type</span>&nbsp;<span class="ident" id="2950005">Gray16</span>&nbsp;<span class="keyword" id="2950012">struct</span>&nbsp;<span class="op" id="2950019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950022">Y</span>&nbsp;<span class="builtintype" id="2950024">uint16</span><br>
<span class="lineno"></span><span class="op" id="2950031">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="2950034">func</span>&nbsp;<span class="op" id="2950039">(</span><span class="ident" id="2950040">c</span>&nbsp;<span class="ident" id="2950042">Gray16</span><span class="op" id="2950048">)</span>&nbsp;<span class="ident" id="2950050">RGBA</span><span class="op" id="2950054">(</span><span class="op" id="2950055">)</span>&nbsp;<span class="op" id="2950057">(</span><span class="ident" id="2950058">r</span><span class="op" id="2950059">,</span>&nbsp;<span class="ident" id="2950061">g</span><span class="op" id="2950062">,</span>&nbsp;<span class="ident" id="2950064">b</span><span class="op" id="2950065">,</span>&nbsp;<span class="ident" id="2950067">a</span>&nbsp;<span class="builtintype" id="2950069">uint32</span><span class="op" id="2950075">)</span>&nbsp;<span class="op" id="2950077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950080">y</span>&nbsp;<span class="op" id="2950082">:=</span>&nbsp;<span class="builtintype" id="2950085">uint32</span><span class="op" id="2950091">(</span><span class="ident" id="2950092">c</span><span class="op" id="2950093">.</span><span class="ident" id="2950094">Y</span><span class="op" id="2950095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950098">return</span>&nbsp;<span class="ident" id="2950105">y</span><span class="op" id="2950106">,</span>&nbsp;<span class="ident" id="2950108">y</span><span class="op" id="2950109">,</span>&nbsp;<span class="ident" id="2950111">y</span><span class="op" id="2950112">,</span>&nbsp;<span class="num" id="2950114">0xffff</span><br>
<span class="lineno"></span><span class="op" id="2950121">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="2950124">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="2950203">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="2950220">type</span>&nbsp;<span class="ident" id="2950225">Model</span>&nbsp;<span class="keyword" id="2950231">interface</span>&nbsp;<span class="op" id="2950241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950244">Convert</span><span class="op" id="2950251">(</span><span class="ident" id="2950252">c</span>&nbsp;<span class="ident" id="2950254">Color</span><span class="op" id="2950259">)</span>&nbsp;<span class="ident" id="2950261">Color</span><br>
<span class="lineno">135</span><span class="op" id="2950267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2950270">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2950343">func</span>&nbsp;<span class="ident" id="2950348">ModelFunc</span><span class="op" id="2950357">(</span><span class="ident" id="2950358">f</span>&nbsp;<span class="keyword" id="2950360">func</span><span class="op" id="2950364">(</span><span class="ident" id="2950365">Color</span><span class="op" id="2950370">)</span>&nbsp;<span class="ident" id="2950372">Color</span><span class="op" id="2950377">)</span>&nbsp;<span class="ident" id="2950379">Model</span>&nbsp;<span class="op" id="2950385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950388">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950437">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950486">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950536">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2950586">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950616">return</span>&nbsp;<span class="op" id="2950623">&amp;</span><span class="ident" id="2950624">modelFunc</span><span class="op" id="2950633">{</span><span class="ident" id="2950634">f</span><span class="op" id="2950635">}</span><br>
<span class="lineno">145</span><span class="op" id="2950637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2950640">type</span>&nbsp;<span class="ident" id="2950645">modelFunc</span>&nbsp;<span class="keyword" id="2950655">struct</span>&nbsp;<span class="op" id="2950662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950665">f</span>&nbsp;<span class="keyword" id="2950667">func</span><span class="op" id="2950671">(</span><span class="ident" id="2950672">Color</span><span class="op" id="2950677">)</span>&nbsp;<span class="ident" id="2950679">Color</span><br>
<span class="lineno"></span><span class="op" id="2950685">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="2950688">func</span>&nbsp;<span class="op" id="2950693">(</span><span class="ident" id="2950694">m</span>&nbsp;<span class="op" id="2950696">*</span><span class="ident" id="2950697">modelFunc</span><span class="op" id="2950706">)</span>&nbsp;<span class="ident" id="2950708">Convert</span><span class="op" id="2950715">(</span><span class="ident" id="2950716">c</span>&nbsp;<span class="ident" id="2950718">Color</span><span class="op" id="2950723">)</span>&nbsp;<span class="ident" id="2950725">Color</span>&nbsp;<span class="op" id="2950731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2950734">return</span>&nbsp;<span class="ident" id="2950741">m</span><span class="op" id="2950742">.</span><span class="ident" id="2950743">f</span><span class="op" id="2950744">(</span><span class="ident" id="2950745">c</span><span class="op" id="2950746">)</span><br>
<span class="lineno"></span><span class="op" id="2950748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2950751">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2950791">var</span>&nbsp;<span class="op" id="2950795">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950798">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2950811">Model</span>&nbsp;<span class="op" id="2950817">=</span>&nbsp;<span class="ident" id="2950819">ModelFunc</span><span class="op" id="2950828">(</span><span class="ident" id="2950829">rgbaModel</span><span class="op" id="2950838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950841">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="2950854">Model</span>&nbsp;<span class="op" id="2950860">=</span>&nbsp;<span class="ident" id="2950862">ModelFunc</span><span class="op" id="2950871">(</span><span class="ident" id="2950872">rgba64Model</span><span class="op" id="2950883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950886">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2950899">Model</span>&nbsp;<span class="op" id="2950905">=</span>&nbsp;<span class="ident" id="2950907">ModelFunc</span><span class="op" id="2950916">(</span><span class="ident" id="2950917">nrgbaModel</span><span class="op" id="2950927">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950930">NRGBA64Model</span>&nbsp;<span class="ident" id="2950943">Model</span>&nbsp;<span class="op" id="2950949">=</span>&nbsp;<span class="ident" id="2950951">ModelFunc</span><span class="op" id="2950960">(</span><span class="ident" id="2950961">nrgba64Model</span><span class="op" id="2950973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2950976">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2950989">Model</span>&nbsp;<span class="op" id="2950995">=</span>&nbsp;<span class="ident" id="2950997">ModelFunc</span><span class="op" id="2951006">(</span><span class="ident" id="2951007">alphaModel</span><span class="op" id="2951017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951020">Alpha16Model</span>&nbsp;<span class="ident" id="2951033">Model</span>&nbsp;<span class="op" id="2951039">=</span>&nbsp;<span class="ident" id="2951041">ModelFunc</span><span class="op" id="2951050">(</span><span class="ident" id="2951051">alpha16Model</span><span class="op" id="2951063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951066">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2951079">Model</span>&nbsp;<span class="op" id="2951085">=</span>&nbsp;<span class="ident" id="2951087">ModelFunc</span><span class="op" id="2951096">(</span><span class="ident" id="2951097">grayModel</span><span class="op" id="2951106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951109">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="2951122">Model</span>&nbsp;<span class="op" id="2951128">=</span>&nbsp;<span class="ident" id="2951130">ModelFunc</span><span class="op" id="2951139">(</span><span class="ident" id="2951140">gray16Model</span><span class="op" id="2951151">)</span><br>
<span class="lineno">165</span><span class="op" id="2951153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2951156">func</span>&nbsp;<span class="ident" id="2951161">rgbaModel</span><span class="op" id="2951170">(</span><span class="ident" id="2951171">c</span>&nbsp;<span class="ident" id="2951173">Color</span><span class="op" id="2951178">)</span>&nbsp;<span class="ident" id="2951180">Color</span>&nbsp;<span class="op" id="2951186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951189">if</span>&nbsp;<span class="ident" id="2951192">_</span><span class="op" id="2951193">,</span>&nbsp;<span class="ident" id="2951195">ok</span>&nbsp;<span class="op" id="2951198">:=</span>&nbsp;<span class="ident" id="2951201">c</span><span class="op" id="2951202">.</span><span class="op" id="2951203">(</span><span class="ident" id="2951204">RGBA</span><span class="op" id="2951208">)</span><span class="op" id="2951209">;</span>&nbsp;<span class="ident" id="2951211">ok</span>&nbsp;<span class="op" id="2951214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951218">return</span>&nbsp;<span class="ident" id="2951225">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951231">r</span><span class="op" id="2951232">,</span>&nbsp;<span class="ident" id="2951234">g</span><span class="op" id="2951235">,</span>&nbsp;<span class="ident" id="2951237">b</span><span class="op" id="2951238">,</span>&nbsp;<span class="ident" id="2951240">a</span>&nbsp;<span class="op" id="2951242">:=</span>&nbsp;<span class="ident" id="2951245">c</span><span class="op" id="2951246">.</span><span class="ident" id="2951247">RGBA</span><span class="op" id="2951251">(</span><span class="op" id="2951252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951255">return</span>&nbsp;<span class="ident" id="2951262">RGBA</span><span class="op" id="2951266">{</span><span class="builtintype" id="2951267">uint8</span><span class="op" id="2951272">(</span><span class="ident" id="2951273">r</span>&nbsp;<span class="op" id="2951275">&gt;&gt;</span>&nbsp;<span class="num" id="2951278">8</span><span class="op" id="2951279">)</span><span class="op" id="2951280">,</span>&nbsp;<span class="builtintype" id="2951282">uint8</span><span class="op" id="2951287">(</span><span class="ident" id="2951288">g</span>&nbsp;<span class="op" id="2951290">&gt;&gt;</span>&nbsp;<span class="num" id="2951293">8</span><span class="op" id="2951294">)</span><span class="op" id="2951295">,</span>&nbsp;<span class="builtintype" id="2951297">uint8</span><span class="op" id="2951302">(</span><span class="ident" id="2951303">b</span>&nbsp;<span class="op" id="2951305">&gt;&gt;</span>&nbsp;<span class="num" id="2951308">8</span><span class="op" id="2951309">)</span><span class="op" id="2951310">,</span>&nbsp;<span class="builtintype" id="2951312">uint8</span><span class="op" id="2951317">(</span><span class="ident" id="2951318">a</span>&nbsp;<span class="op" id="2951320">&gt;&gt;</span>&nbsp;<span class="num" id="2951323">8</span><span class="op" id="2951324">)</span><span class="op" id="2951325">}</span><br>
<span class="lineno"></span><span class="op" id="2951327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2951330">func</span>&nbsp;<span class="ident" id="2951335">rgba64Model</span><span class="op" id="2951346">(</span><span class="ident" id="2951347">c</span>&nbsp;<span class="ident" id="2951349">Color</span><span class="op" id="2951354">)</span>&nbsp;<span class="ident" id="2951356">Color</span>&nbsp;<span class="op" id="2951362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951365">if</span>&nbsp;<span class="ident" id="2951368">_</span><span class="op" id="2951369">,</span>&nbsp;<span class="ident" id="2951371">ok</span>&nbsp;<span class="op" id="2951374">:=</span>&nbsp;<span class="ident" id="2951377">c</span><span class="op" id="2951378">.</span><span class="op" id="2951379">(</span><span class="ident" id="2951380">RGBA64</span><span class="op" id="2951386">)</span><span class="op" id="2951387">;</span>&nbsp;<span class="ident" id="2951389">ok</span>&nbsp;<span class="op" id="2951392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951396">return</span>&nbsp;<span class="ident" id="2951403">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951409">r</span><span class="op" id="2951410">,</span>&nbsp;<span class="ident" id="2951412">g</span><span class="op" id="2951413">,</span>&nbsp;<span class="ident" id="2951415">b</span><span class="op" id="2951416">,</span>&nbsp;<span class="ident" id="2951418">a</span>&nbsp;<span class="op" id="2951420">:=</span>&nbsp;<span class="ident" id="2951423">c</span><span class="op" id="2951424">.</span><span class="ident" id="2951425">RGBA</span><span class="op" id="2951429">(</span><span class="op" id="2951430">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951433">return</span>&nbsp;<span class="ident" id="2951440">RGBA64</span><span class="op" id="2951446">{</span><span class="builtintype" id="2951447">uint16</span><span class="op" id="2951453">(</span><span class="ident" id="2951454">r</span><span class="op" id="2951455">)</span><span class="op" id="2951456">,</span>&nbsp;<span class="builtintype" id="2951458">uint16</span><span class="op" id="2951464">(</span><span class="ident" id="2951465">g</span><span class="op" id="2951466">)</span><span class="op" id="2951467">,</span>&nbsp;<span class="builtintype" id="2951469">uint16</span><span class="op" id="2951475">(</span><span class="ident" id="2951476">b</span><span class="op" id="2951477">)</span><span class="op" id="2951478">,</span>&nbsp;<span class="builtintype" id="2951480">uint16</span><span class="op" id="2951486">(</span><span class="ident" id="2951487">a</span><span class="op" id="2951488">)</span><span class="op" id="2951489">}</span><br>
<span class="lineno"></span><span class="op" id="2951491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2951494">func</span>&nbsp;<span class="ident" id="2951499">nrgbaModel</span><span class="op" id="2951509">(</span><span class="ident" id="2951510">c</span>&nbsp;<span class="ident" id="2951512">Color</span><span class="op" id="2951517">)</span>&nbsp;<span class="ident" id="2951519">Color</span>&nbsp;<span class="op" id="2951525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951528">if</span>&nbsp;<span class="ident" id="2951531">_</span><span class="op" id="2951532">,</span>&nbsp;<span class="ident" id="2951534">ok</span>&nbsp;<span class="op" id="2951537">:=</span>&nbsp;<span class="ident" id="2951540">c</span><span class="op" id="2951541">.</span><span class="op" id="2951542">(</span><span class="ident" id="2951543">NRGBA</span><span class="op" id="2951548">)</span><span class="op" id="2951549">;</span>&nbsp;<span class="ident" id="2951551">ok</span>&nbsp;<span class="op" id="2951554">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951558">return</span>&nbsp;<span class="ident" id="2951565">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951571">r</span><span class="op" id="2951572">,</span>&nbsp;<span class="ident" id="2951574">g</span><span class="op" id="2951575">,</span>&nbsp;<span class="ident" id="2951577">b</span><span class="op" id="2951578">,</span>&nbsp;<span class="ident" id="2951580">a</span>&nbsp;<span class="op" id="2951582">:=</span>&nbsp;<span class="ident" id="2951585">c</span><span class="op" id="2951586">.</span><span class="ident" id="2951587">RGBA</span><span class="op" id="2951591">(</span><span class="op" id="2951592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951595">if</span>&nbsp;<span class="ident" id="2951598">a</span>&nbsp;<span class="op" id="2951600">==</span>&nbsp;<span class="num" id="2951603">0xffff</span>&nbsp;<span class="op" id="2951610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951614">return</span>&nbsp;<span class="ident" id="2951621">NRGBA</span><span class="op" id="2951626">{</span><span class="builtintype" id="2951627">uint8</span><span class="op" id="2951632">(</span><span class="ident" id="2951633">r</span>&nbsp;<span class="op" id="2951635">&gt;&gt;</span>&nbsp;<span class="num" id="2951638">8</span><span class="op" id="2951639">)</span><span class="op" id="2951640">,</span>&nbsp;<span class="builtintype" id="2951642">uint8</span><span class="op" id="2951647">(</span><span class="ident" id="2951648">g</span>&nbsp;<span class="op" id="2951650">&gt;&gt;</span>&nbsp;<span class="num" id="2951653">8</span><span class="op" id="2951654">)</span><span class="op" id="2951655">,</span>&nbsp;<span class="builtintype" id="2951657">uint8</span><span class="op" id="2951662">(</span><span class="ident" id="2951663">b</span>&nbsp;<span class="op" id="2951665">&gt;&gt;</span>&nbsp;<span class="num" id="2951668">8</span><span class="op" id="2951669">)</span><span class="op" id="2951670">,</span>&nbsp;<span class="num" id="2951672">0xff</span><span class="op" id="2951676">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951682">if</span>&nbsp;<span class="ident" id="2951685">a</span>&nbsp;<span class="op" id="2951687">==</span>&nbsp;<span class="num" id="2951690">0</span>&nbsp;<span class="op" id="2951692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951696">return</span>&nbsp;<span class="ident" id="2951703">NRGBA</span><span class="op" id="2951708">{</span><span class="num" id="2951709">0</span><span class="op" id="2951710">,</span>&nbsp;<span class="num" id="2951712">0</span><span class="op" id="2951713">,</span>&nbsp;<span class="num" id="2951715">0</span><span class="op" id="2951716">,</span>&nbsp;<span class="num" id="2951718">0</span><span class="op" id="2951719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2951722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2951725">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951826">r</span>&nbsp;<span class="op" id="2951828">=</span>&nbsp;<span class="op" id="2951830">(</span><span class="ident" id="2951831">r</span>&nbsp;<span class="op" id="2951833">*</span>&nbsp;<span class="num" id="2951835">0xffff</span><span class="op" id="2951841">)</span>&nbsp;<span class="op" id="2951843">/</span>&nbsp;<span class="ident" id="2951845">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951848">g</span>&nbsp;<span class="op" id="2951850">=</span>&nbsp;<span class="op" id="2951852">(</span><span class="ident" id="2951853">g</span>&nbsp;<span class="op" id="2951855">*</span>&nbsp;<span class="num" id="2951857">0xffff</span><span class="op" id="2951863">)</span>&nbsp;<span class="op" id="2951865">/</span>&nbsp;<span class="ident" id="2951867">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2951870">b</span>&nbsp;<span class="op" id="2951872">=</span>&nbsp;<span class="op" id="2951874">(</span><span class="ident" id="2951875">b</span>&nbsp;<span class="op" id="2951877">*</span>&nbsp;<span class="num" id="2951879">0xffff</span><span class="op" id="2951885">)</span>&nbsp;<span class="op" id="2951887">/</span>&nbsp;<span class="ident" id="2951889">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2951892">return</span>&nbsp;<span class="ident" id="2951899">NRGBA</span><span class="op" id="2951904">{</span><span class="builtintype" id="2951905">uint8</span><span class="op" id="2951910">(</span><span class="ident" id="2951911">r</span>&nbsp;<span class="op" id="2951913">&gt;&gt;</span>&nbsp;<span class="num" id="2951916">8</span><span class="op" id="2951917">)</span><span class="op" id="2951918">,</span>&nbsp;<span class="builtintype" id="2951920">uint8</span><span class="op" id="2951925">(</span><span class="ident" id="2951926">g</span>&nbsp;<span class="op" id="2951928">&gt;&gt;</span>&nbsp;<span class="num" id="2951931">8</span><span class="op" id="2951932">)</span><span class="op" id="2951933">,</span>&nbsp;<span class="builtintype" id="2951935">uint8</span><span class="op" id="2951940">(</span><span class="ident" id="2951941">b</span>&nbsp;<span class="op" id="2951943">&gt;&gt;</span>&nbsp;<span class="num" id="2951946">8</span><span class="op" id="2951947">)</span><span class="op" id="2951948">,</span>&nbsp;<span class="builtintype" id="2951950">uint8</span><span class="op" id="2951955">(</span><span class="ident" id="2951956">a</span>&nbsp;<span class="op" id="2951958">&gt;&gt;</span>&nbsp;<span class="num" id="2951961">8</span><span class="op" id="2951962">)</span><span class="op" id="2951963">}</span><br>
<span class="lineno"></span><span class="op" id="2951965">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="2951968">func</span>&nbsp;<span class="ident" id="2951973">nrgba64Model</span><span class="op" id="2951985">(</span><span class="ident" id="2951986">c</span>&nbsp;<span class="ident" id="2951988">Color</span><span class="op" id="2951993">)</span>&nbsp;<span class="ident" id="2951995">Color</span>&nbsp;<span class="op" id="2952001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952004">if</span>&nbsp;<span class="ident" id="2952007">_</span><span class="op" id="2952008">,</span>&nbsp;<span class="ident" id="2952010">ok</span>&nbsp;<span class="op" id="2952013">:=</span>&nbsp;<span class="ident" id="2952016">c</span><span class="op" id="2952017">.</span><span class="op" id="2952018">(</span><span class="ident" id="2952019">NRGBA64</span><span class="op" id="2952026">)</span><span class="op" id="2952027">;</span>&nbsp;<span class="ident" id="2952029">ok</span>&nbsp;<span class="op" id="2952032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952036">return</span>&nbsp;<span class="ident" id="2952043">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952046">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952049">r</span><span class="op" id="2952050">,</span>&nbsp;<span class="ident" id="2952052">g</span><span class="op" id="2952053">,</span>&nbsp;<span class="ident" id="2952055">b</span><span class="op" id="2952056">,</span>&nbsp;<span class="ident" id="2952058">a</span>&nbsp;<span class="op" id="2952060">:=</span>&nbsp;<span class="ident" id="2952063">c</span><span class="op" id="2952064">.</span><span class="ident" id="2952065">RGBA</span><span class="op" id="2952069">(</span><span class="op" id="2952070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952073">if</span>&nbsp;<span class="ident" id="2952076">a</span>&nbsp;<span class="op" id="2952078">==</span>&nbsp;<span class="num" id="2952081">0xffff</span>&nbsp;<span class="op" id="2952088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952092">return</span>&nbsp;<span class="ident" id="2952099">NRGBA64</span><span class="op" id="2952106">{</span><span class="builtintype" id="2952107">uint16</span><span class="op" id="2952113">(</span><span class="ident" id="2952114">r</span><span class="op" id="2952115">)</span><span class="op" id="2952116">,</span>&nbsp;<span class="builtintype" id="2952118">uint16</span><span class="op" id="2952124">(</span><span class="ident" id="2952125">g</span><span class="op" id="2952126">)</span><span class="op" id="2952127">,</span>&nbsp;<span class="builtintype" id="2952129">uint16</span><span class="op" id="2952135">(</span><span class="ident" id="2952136">b</span><span class="op" id="2952137">)</span><span class="op" id="2952138">,</span>&nbsp;<span class="num" id="2952140">0xffff</span><span class="op" id="2952146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952152">if</span>&nbsp;<span class="ident" id="2952155">a</span>&nbsp;<span class="op" id="2952157">==</span>&nbsp;<span class="num" id="2952160">0</span>&nbsp;<span class="op" id="2952162">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952166">return</span>&nbsp;<span class="ident" id="2952173">NRGBA64</span><span class="op" id="2952180">{</span><span class="num" id="2952181">0</span><span class="op" id="2952182">,</span>&nbsp;<span class="num" id="2952184">0</span><span class="op" id="2952185">,</span>&nbsp;<span class="num" id="2952187">0</span><span class="op" id="2952188">,</span>&nbsp;<span class="num" id="2952190">0</span><span class="op" id="2952191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2952197">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952298">r</span>&nbsp;<span class="op" id="2952300">=</span>&nbsp;<span class="op" id="2952302">(</span><span class="ident" id="2952303">r</span>&nbsp;<span class="op" id="2952305">*</span>&nbsp;<span class="num" id="2952307">0xffff</span><span class="op" id="2952313">)</span>&nbsp;<span class="op" id="2952315">/</span>&nbsp;<span class="ident" id="2952317">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952320">g</span>&nbsp;<span class="op" id="2952322">=</span>&nbsp;<span class="op" id="2952324">(</span><span class="ident" id="2952325">g</span>&nbsp;<span class="op" id="2952327">*</span>&nbsp;<span class="num" id="2952329">0xffff</span><span class="op" id="2952335">)</span>&nbsp;<span class="op" id="2952337">/</span>&nbsp;<span class="ident" id="2952339">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952342">b</span>&nbsp;<span class="op" id="2952344">=</span>&nbsp;<span class="op" id="2952346">(</span><span class="ident" id="2952347">b</span>&nbsp;<span class="op" id="2952349">*</span>&nbsp;<span class="num" id="2952351">0xffff</span><span class="op" id="2952357">)</span>&nbsp;<span class="op" id="2952359">/</span>&nbsp;<span class="ident" id="2952361">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952364">return</span>&nbsp;<span class="ident" id="2952371">NRGBA64</span><span class="op" id="2952378">{</span><span class="builtintype" id="2952379">uint16</span><span class="op" id="2952385">(</span><span class="ident" id="2952386">r</span><span class="op" id="2952387">)</span><span class="op" id="2952388">,</span>&nbsp;<span class="builtintype" id="2952390">uint16</span><span class="op" id="2952396">(</span><span class="ident" id="2952397">g</span><span class="op" id="2952398">)</span><span class="op" id="2952399">,</span>&nbsp;<span class="builtintype" id="2952401">uint16</span><span class="op" id="2952407">(</span><span class="ident" id="2952408">b</span><span class="op" id="2952409">)</span><span class="op" id="2952410">,</span>&nbsp;<span class="builtintype" id="2952412">uint16</span><span class="op" id="2952418">(</span><span class="ident" id="2952419">a</span><span class="op" id="2952420">)</span><span class="op" id="2952421">}</span><br>
<span class="lineno"></span><span class="op" id="2952423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2952426">func</span>&nbsp;<span class="ident" id="2952431">alphaModel</span><span class="op" id="2952441">(</span><span class="ident" id="2952442">c</span>&nbsp;<span class="ident" id="2952444">Color</span><span class="op" id="2952449">)</span>&nbsp;<span class="ident" id="2952451">Color</span>&nbsp;<span class="op" id="2952457">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952460">if</span>&nbsp;<span class="ident" id="2952463">_</span><span class="op" id="2952464">,</span>&nbsp;<span class="ident" id="2952466">ok</span>&nbsp;<span class="op" id="2952469">:=</span>&nbsp;<span class="ident" id="2952472">c</span><span class="op" id="2952473">.</span><span class="op" id="2952474">(</span><span class="ident" id="2952475">Alpha</span><span class="op" id="2952480">)</span><span class="op" id="2952481">;</span>&nbsp;<span class="ident" id="2952483">ok</span>&nbsp;<span class="op" id="2952486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952490">return</span>&nbsp;<span class="ident" id="2952497">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952503">_</span><span class="op" id="2952504">,</span>&nbsp;<span class="ident" id="2952506">_</span><span class="op" id="2952507">,</span>&nbsp;<span class="ident" id="2952509">_</span><span class="op" id="2952510">,</span>&nbsp;<span class="ident" id="2952512">a</span>&nbsp;<span class="op" id="2952514">:=</span>&nbsp;<span class="ident" id="2952517">c</span><span class="op" id="2952518">.</span><span class="ident" id="2952519">RGBA</span><span class="op" id="2952523">(</span><span class="op" id="2952524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952527">return</span>&nbsp;<span class="ident" id="2952534">Alpha</span><span class="op" id="2952539">{</span><span class="builtintype" id="2952540">uint8</span><span class="op" id="2952545">(</span><span class="ident" id="2952546">a</span>&nbsp;<span class="op" id="2952548">&gt;&gt;</span>&nbsp;<span class="num" id="2952551">8</span><span class="op" id="2952552">)</span><span class="op" id="2952553">}</span><br>
<span class="lineno">225</span><span class="op" id="2952555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2952558">func</span>&nbsp;<span class="ident" id="2952563">alpha16Model</span><span class="op" id="2952575">(</span><span class="ident" id="2952576">c</span>&nbsp;<span class="ident" id="2952578">Color</span><span class="op" id="2952583">)</span>&nbsp;<span class="ident" id="2952585">Color</span>&nbsp;<span class="op" id="2952591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952594">if</span>&nbsp;<span class="ident" id="2952597">_</span><span class="op" id="2952598">,</span>&nbsp;<span class="ident" id="2952600">ok</span>&nbsp;<span class="op" id="2952603">:=</span>&nbsp;<span class="ident" id="2952606">c</span><span class="op" id="2952607">.</span><span class="op" id="2952608">(</span><span class="ident" id="2952609">Alpha16</span><span class="op" id="2952616">)</span><span class="op" id="2952617">;</span>&nbsp;<span class="ident" id="2952619">ok</span>&nbsp;<span class="op" id="2952622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952626">return</span>&nbsp;<span class="ident" id="2952633">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952639">_</span><span class="op" id="2952640">,</span>&nbsp;<span class="ident" id="2952642">_</span><span class="op" id="2952643">,</span>&nbsp;<span class="ident" id="2952645">_</span><span class="op" id="2952646">,</span>&nbsp;<span class="ident" id="2952648">a</span>&nbsp;<span class="op" id="2952650">:=</span>&nbsp;<span class="ident" id="2952653">c</span><span class="op" id="2952654">.</span><span class="ident" id="2952655">RGBA</span><span class="op" id="2952659">(</span><span class="op" id="2952660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952663">return</span>&nbsp;<span class="ident" id="2952670">Alpha16</span><span class="op" id="2952677">{</span><span class="builtintype" id="2952678">uint16</span><span class="op" id="2952684">(</span><span class="ident" id="2952685">a</span><span class="op" id="2952686">)</span><span class="op" id="2952687">}</span><br>
<span class="lineno"></span><span class="op" id="2952689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2952692">func</span>&nbsp;<span class="ident" id="2952697">grayModel</span><span class="op" id="2952706">(</span><span class="ident" id="2952707">c</span>&nbsp;<span class="ident" id="2952709">Color</span><span class="op" id="2952714">)</span>&nbsp;<span class="ident" id="2952716">Color</span>&nbsp;<span class="op" id="2952722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952725">if</span>&nbsp;<span class="ident" id="2952728">_</span><span class="op" id="2952729">,</span>&nbsp;<span class="ident" id="2952731">ok</span>&nbsp;<span class="op" id="2952734">:=</span>&nbsp;<span class="ident" id="2952737">c</span><span class="op" id="2952738">.</span><span class="op" id="2952739">(</span><span class="ident" id="2952740">Gray</span><span class="op" id="2952744">)</span><span class="op" id="2952745">;</span>&nbsp;<span class="ident" id="2952747">ok</span>&nbsp;<span class="op" id="2952750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952754">return</span>&nbsp;<span class="ident" id="2952761">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952767">r</span><span class="op" id="2952768">,</span>&nbsp;<span class="ident" id="2952770">g</span><span class="op" id="2952771">,</span>&nbsp;<span class="ident" id="2952773">b</span><span class="op" id="2952774">,</span>&nbsp;<span class="ident" id="2952776">_</span>&nbsp;<span class="op" id="2952778">:=</span>&nbsp;<span class="ident" id="2952781">c</span><span class="op" id="2952782">.</span><span class="ident" id="2952783">RGBA</span><span class="op" id="2952787">(</span><span class="op" id="2952788">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952791">y</span>&nbsp;<span class="op" id="2952793">:=</span>&nbsp;<span class="op" id="2952796">(</span><span class="num" id="2952797">299</span><span class="op" id="2952800">*</span><span class="ident" id="2952801">r</span>&nbsp;<span class="op" id="2952803">+</span>&nbsp;<span class="num" id="2952805">587</span><span class="op" id="2952808">*</span><span class="ident" id="2952809">g</span>&nbsp;<span class="op" id="2952811">+</span>&nbsp;<span class="num" id="2952813">114</span><span class="op" id="2952816">*</span><span class="ident" id="2952817">b</span>&nbsp;<span class="op" id="2952819">+</span>&nbsp;<span class="num" id="2952821">500</span><span class="op" id="2952824">)</span>&nbsp;<span class="op" id="2952826">/</span>&nbsp;<span class="num" id="2952828">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952834">return</span>&nbsp;<span class="ident" id="2952841">Gray</span><span class="op" id="2952845">{</span><span class="builtintype" id="2952846">uint8</span><span class="op" id="2952851">(</span><span class="ident" id="2952852">y</span>&nbsp;<span class="op" id="2952854">&gt;&gt;</span>&nbsp;<span class="num" id="2952857">8</span><span class="op" id="2952858">)</span><span class="op" id="2952859">}</span><br>
<span class="lineno"></span><span class="op" id="2952861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2952864">func</span>&nbsp;<span class="ident" id="2952869">gray16Model</span><span class="op" id="2952880">(</span><span class="ident" id="2952881">c</span>&nbsp;<span class="ident" id="2952883">Color</span><span class="op" id="2952888">)</span>&nbsp;<span class="ident" id="2952890">Color</span>&nbsp;<span class="op" id="2952896">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952899">if</span>&nbsp;<span class="ident" id="2952902">_</span><span class="op" id="2952903">,</span>&nbsp;<span class="ident" id="2952905">ok</span>&nbsp;<span class="op" id="2952908">:=</span>&nbsp;<span class="ident" id="2952911">c</span><span class="op" id="2952912">.</span><span class="op" id="2952913">(</span><span class="ident" id="2952914">Gray16</span><span class="op" id="2952920">)</span><span class="op" id="2952921">;</span>&nbsp;<span class="ident" id="2952923">ok</span>&nbsp;<span class="op" id="2952926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2952930">return</span>&nbsp;<span class="ident" id="2952937">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2952940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952943">r</span><span class="op" id="2952944">,</span>&nbsp;<span class="ident" id="2952946">g</span><span class="op" id="2952947">,</span>&nbsp;<span class="ident" id="2952949">b</span><span class="op" id="2952950">,</span>&nbsp;<span class="ident" id="2952952">_</span>&nbsp;<span class="op" id="2952954">:=</span>&nbsp;<span class="ident" id="2952957">c</span><span class="op" id="2952958">.</span><span class="ident" id="2952959">RGBA</span><span class="op" id="2952963">(</span><span class="op" id="2952964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2952967">y</span>&nbsp;<span class="op" id="2952969">:=</span>&nbsp;<span class="op" id="2952972">(</span><span class="num" id="2952973">299</span><span class="op" id="2952976">*</span><span class="ident" id="2952977">r</span>&nbsp;<span class="op" id="2952979">+</span>&nbsp;<span class="num" id="2952981">587</span><span class="op" id="2952984">*</span><span class="ident" id="2952985">g</span>&nbsp;<span class="op" id="2952987">+</span>&nbsp;<span class="num" id="2952989">114</span><span class="op" id="2952992">*</span><span class="ident" id="2952993">b</span>&nbsp;<span class="op" id="2952995">+</span>&nbsp;<span class="num" id="2952997">500</span><span class="op" id="2953000">)</span>&nbsp;<span class="op" id="2953002">/</span>&nbsp;<span class="num" id="2953004">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953010">return</span>&nbsp;<span class="ident" id="2953017">Gray16</span><span class="op" id="2953023">{</span><span class="builtintype" id="2953024">uint16</span><span class="op" id="2953030">(</span><span class="ident" id="2953031">y</span><span class="op" id="2953032">)</span><span class="op" id="2953033">}</span><br>
<span class="lineno"></span><span class="op" id="2953035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953038">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="2953073">type</span>&nbsp;<span class="ident" id="2953078">Palette</span>&nbsp;<span class="op" id="2953086">[</span><span class="op" id="2953087">]</span><span class="ident" id="2953088">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2953095">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2953171">func</span>&nbsp;<span class="op" id="2953176">(</span><span class="ident" id="2953177">p</span>&nbsp;<span class="ident" id="2953179">Palette</span><span class="op" id="2953186">)</span>&nbsp;<span class="ident" id="2953188">Convert</span><span class="op" id="2953195">(</span><span class="ident" id="2953196">c</span>&nbsp;<span class="ident" id="2953198">Color</span><span class="op" id="2953203">)</span>&nbsp;<span class="ident" id="2953205">Color</span>&nbsp;<span class="op" id="2953211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953214">if</span>&nbsp;<span class="builtinfunc" id="2953217">len</span><span class="op" id="2953220">(</span><span class="ident" id="2953221">p</span><span class="op" id="2953222">)</span>&nbsp;<span class="op" id="2953224">==</span>&nbsp;<span class="num" id="2953227">0</span>&nbsp;<span class="op" id="2953229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953233">return</span>&nbsp;<span class="ident" id="2953240">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953248">return</span>&nbsp;<span class="ident" id="2953255">p</span><span class="op" id="2953256">[</span><span class="ident" id="2953257">p</span><span class="op" id="2953258">.</span><span class="ident" id="2953259">Index</span><span class="op" id="2953264">(</span><span class="ident" id="2953265">c</span><span class="op" id="2953266">)</span><span class="op" id="2953267">]</span><br>
<span class="lineno"></span><span class="op" id="2953269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953272">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="2953346">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="2953362">func</span>&nbsp;<span class="op" id="2953367">(</span><span class="ident" id="2953368">p</span>&nbsp;<span class="ident" id="2953370">Palette</span><span class="op" id="2953377">)</span>&nbsp;<span class="ident" id="2953379">Index</span><span class="op" id="2953384">(</span><span class="ident" id="2953385">c</span>&nbsp;<span class="ident" id="2953387">Color</span><span class="op" id="2953392">)</span>&nbsp;<span class="builtintype" id="2953394">int</span>&nbsp;<span class="op" id="2953398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953401">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953468">cr</span><span class="op" id="2953470">,</span>&nbsp;<span class="ident" id="2953472">cg</span><span class="op" id="2953474">,</span>&nbsp;<span class="ident" id="2953476">cb</span><span class="op" id="2953478">,</span>&nbsp;<span class="ident" id="2953480">_</span>&nbsp;<span class="op" id="2953482">:=</span>&nbsp;<span class="ident" id="2953485">c</span><span class="op" id="2953486">.</span><span class="ident" id="2953487">RGBA</span><span class="op" id="2953491">(</span><span class="op" id="2953492">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953495">ret</span><span class="op" id="2953498">,</span>&nbsp;<span class="ident" id="2953500">bestSSD</span>&nbsp;<span class="op" id="2953508">:=</span>&nbsp;<span class="num" id="2953511">0</span><span class="op" id="2953512">,</span>&nbsp;<span class="builtintype" id="2953514">uint32</span><span class="op" id="2953520">(</span><span class="num" id="2953521">1</span><span class="op" id="2953522">&lt;&lt;</span><span class="num" id="2953524">32</span><span class="op" id="2953526">-</span><span class="num" id="2953527">1</span><span class="op" id="2953528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953531">for</span>&nbsp;<span class="ident" id="2953535">i</span><span class="op" id="2953536">,</span>&nbsp;<span class="ident" id="2953538">v</span>&nbsp;<span class="op" id="2953540">:=</span>&nbsp;<span class="keyword" id="2953543">range</span>&nbsp;<span class="ident" id="2953549">p</span>&nbsp;<span class="op" id="2953551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953555">vr</span><span class="op" id="2953557">,</span>&nbsp;<span class="ident" id="2953559">vg</span><span class="op" id="2953561">,</span>&nbsp;<span class="ident" id="2953563">vb</span><span class="op" id="2953565">,</span>&nbsp;<span class="ident" id="2953567">_</span>&nbsp;<span class="op" id="2953569">:=</span>&nbsp;<span class="ident" id="2953572">v</span><span class="op" id="2953573">.</span><span class="ident" id="2953574">RGBA</span><span class="op" id="2953578">(</span><span class="op" id="2953579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953583">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2953644">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953673">delta</span>&nbsp;<span class="op" id="2953679">:=</span>&nbsp;<span class="op" id="2953682">(</span><span class="builtintype" id="2953683">int32</span><span class="op" id="2953688">(</span><span class="ident" id="2953689">cr</span><span class="op" id="2953691">)</span>&nbsp;<span class="op" id="2953693">-</span>&nbsp;<span class="builtintype" id="2953695">int32</span><span class="op" id="2953700">(</span><span class="ident" id="2953701">vr</span><span class="op" id="2953703">)</span><span class="op" id="2953704">)</span>&nbsp;<span class="op" id="2953706">&gt;&gt;</span>&nbsp;<span class="num" id="2953709">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953713">ssd</span>&nbsp;<span class="op" id="2953717">:=</span>&nbsp;<span class="builtintype" id="2953720">uint32</span><span class="op" id="2953726">(</span><span class="ident" id="2953727">delta</span>&nbsp;<span class="op" id="2953733">*</span>&nbsp;<span class="ident" id="2953735">delta</span><span class="op" id="2953740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953744">delta</span>&nbsp;<span class="op" id="2953750">=</span>&nbsp;<span class="op" id="2953752">(</span><span class="builtintype" id="2953753">int32</span><span class="op" id="2953758">(</span><span class="ident" id="2953759">cg</span><span class="op" id="2953761">)</span>&nbsp;<span class="op" id="2953763">-</span>&nbsp;<span class="builtintype" id="2953765">int32</span><span class="op" id="2953770">(</span><span class="ident" id="2953771">vg</span><span class="op" id="2953773">)</span><span class="op" id="2953774">)</span>&nbsp;<span class="op" id="2953776">&gt;&gt;</span>&nbsp;<span class="num" id="2953779">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953783">ssd</span>&nbsp;<span class="op" id="2953787">+=</span>&nbsp;<span class="builtintype" id="2953790">uint32</span><span class="op" id="2953796">(</span><span class="ident" id="2953797">delta</span>&nbsp;<span class="op" id="2953803">*</span>&nbsp;<span class="ident" id="2953805">delta</span><span class="op" id="2953810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953814">delta</span>&nbsp;<span class="op" id="2953820">=</span>&nbsp;<span class="op" id="2953822">(</span><span class="builtintype" id="2953823">int32</span><span class="op" id="2953828">(</span><span class="ident" id="2953829">cb</span><span class="op" id="2953831">)</span>&nbsp;<span class="op" id="2953833">-</span>&nbsp;<span class="builtintype" id="2953835">int32</span><span class="op" id="2953840">(</span><span class="ident" id="2953841">vb</span><span class="op" id="2953843">)</span><span class="op" id="2953844">)</span>&nbsp;<span class="op" id="2953846">&gt;&gt;</span>&nbsp;<span class="num" id="2953849">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953853">ssd</span>&nbsp;<span class="op" id="2953857">+=</span>&nbsp;<span class="builtintype" id="2953860">uint32</span><span class="op" id="2953866">(</span><span class="ident" id="2953867">delta</span>&nbsp;<span class="op" id="2953873">*</span>&nbsp;<span class="ident" id="2953875">delta</span><span class="op" id="2953880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953884">if</span>&nbsp;<span class="ident" id="2953887">ssd</span>&nbsp;<span class="op" id="2953891">&lt;</span>&nbsp;<span class="ident" id="2953893">bestSSD</span>&nbsp;<span class="op" id="2953901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953906">if</span>&nbsp;<span class="ident" id="2953909">ssd</span>&nbsp;<span class="op" id="2953913">==</span>&nbsp;<span class="num" id="2953916">0</span>&nbsp;<span class="op" id="2953918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953924">return</span>&nbsp;<span class="ident" id="2953931">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953936">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953941">ret</span><span class="op" id="2953944">,</span>&nbsp;<span class="ident" id="2953946">bestSSD</span>&nbsp;<span class="op" id="2953954">=</span>&nbsp;<span class="ident" id="2953956">i</span><span class="op" id="2953957">,</span>&nbsp;<span class="ident" id="2953959">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953971">return</span>&nbsp;<span class="ident" id="2953978">ret</span><br>
<span class="lineno"></span><span class="op" id="2953982">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="2953985">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="2954005">var</span>&nbsp;<span class="op" id="2954009">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954012">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954024">=</span>&nbsp;<span class="ident" id="2954026">Gray16</span><span class="op" id="2954032">{</span><span class="num" id="2954033">0</span><span class="op" id="2954034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954037">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954049">=</span>&nbsp;<span class="ident" id="2954051">Gray16</span><span class="op" id="2954057">{</span><span class="num" id="2954058">0xffff</span><span class="op" id="2954064">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954067">Transparent</span>&nbsp;<span class="op" id="2954079">=</span>&nbsp;<span class="ident" id="2954081">Alpha16</span><span class="op" id="2954088">{</span><span class="num" id="2954089">0</span><span class="op" id="2954090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954093">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2954105">=</span>&nbsp;<span class="ident" id="2954107">Alpha16</span><span class="op" id="2954114">{</span><span class="num" id="2954115">0xffff</span><span class="op" id="2954121">}</span><br>
<span class="lineno"></span><span class="op" id="2954123">)</span>
</div>
</body>
</html>
