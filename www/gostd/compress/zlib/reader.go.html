<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/zlib</h2>
<ul>
<li><a href="/gostd/compress/zlib/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/compress/zlib/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/compress/zlib/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/zlib/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/zlib/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5704389">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5704444">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5704498">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5704549">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;w&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;w.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;w.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;r,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;io.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;r.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5704992">package</span>&nbsp;<span class="ident" id="5705000">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5705006">import</span>&nbsp;<span class="op" id="5705013">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5705016">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5705025">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5705043">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5705053">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5705061">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5705077">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5705082">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5705085">const</span>&nbsp;<span class="ident" id="5705091">zlibDeflate</span>&nbsp;<span class="op" id="5705103">=</span>&nbsp;<span class="num" id="5705105">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5705108">var</span>&nbsp;<span class="op" id="5705112">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5705115">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705196">ErrChecksum</span>&nbsp;<span class="op" id="5705208">=</span>&nbsp;<span class="ident" id="5705210"><a href="/gostd/compress/zlib/reader.go.html#5705043">errors</a></span><span class="op" id="5705216">.</span><span class="ident" id="5705217"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5705220">(</span><span class="string" id="5705221">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5705245">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5705248">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705333">ErrDictionary</span>&nbsp;<span class="op" id="5705347">=</span>&nbsp;<span class="ident" id="5705349"><a href="/gostd/compress/zlib/reader.go.html#5705043">errors</a></span><span class="op" id="5705355">.</span><span class="ident" id="5705356"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5705359">(</span><span class="string" id="5705360">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5705386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5705389">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705466">ErrHeader</span>&nbsp;<span class="op" id="5705476">=</span>&nbsp;<span class="ident" id="5705478"><a href="/gostd/compress/zlib/reader.go.html#5705043">errors</a></span><span class="op" id="5705484">.</span><span class="ident" id="5705485"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5705488">(</span><span class="string" id="5705489">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5705511">)</span><br>
<span class="lineno"></span><span class="op" id="5705513">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5705516">type</span>&nbsp;<span class="ident" id="5705521">reader</span>&nbsp;<span class="keyword" id="5705528">struct</span>&nbsp;<span class="op" id="5705535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705538">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705551"><a href="/gostd/compress/zlib/reader.go.html#5705025">flate</a></span><span class="op" id="5705556">.</span><span class="ident" id="5705557"><a href="/gostd/compress/flate/inflate.go.html#4840236">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705565">decompressor</span>&nbsp;<span class="ident" id="5705578"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5705580">.</span><span class="ident" id="5705581"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705593">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705606"><a href="/gostd/compress/zlib/reader.go.html#5705053">hash</a></span><span class="op" id="5705610">.</span><span class="ident" id="5705611"><a href="/gostd/hash/hash.go.html#3014832">Hash32</a></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705619">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5705632">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705639">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5705652">[</span><span class="num" id="5705653">4</span><span class="op" id="5705654">]</span><span class="builtintype" id="5705655">byte</span><br>
<span class="lineno"></span><span class="op" id="5705660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5705663">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5705737">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5705812">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5705848">type</span>&nbsp;<span class="ident" id="5705853">Resetter</span>&nbsp;<span class="keyword" id="5705862">interface</span>&nbsp;<span class="op" id="5705872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5705875">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5705949">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5705994">Reset</span><span class="op" id="5705999">(</span><span class="ident" id="5706000">r</span>&nbsp;<span class="ident" id="5706002"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5706004">.</span><span class="ident" id="5706005"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5706011">,</span>&nbsp;<span class="ident" id="5706013">dict</span>&nbsp;<span class="op" id="5706018">[</span><span class="op" id="5706019">]</span><span class="builtintype" id="5706020">byte</span><span class="op" id="5706024">)</span>&nbsp;<span class="builtintype" id="5706026">error</span><br>
<span class="lineno"></span><span class="op" id="5706032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5706035">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5706074">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5706145">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5706227">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5706307">//</span><br>
<span class="lineno"></span><span class="comment" id="5706310">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5706376">func</span>&nbsp;<span class="ident" id="5706381">NewReader</span><span class="op" id="5706390">(</span><span class="ident" id="5706391">r</span>&nbsp;<span class="ident" id="5706393"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5706395">.</span><span class="ident" id="5706396"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5706402">)</span>&nbsp;<span class="op" id="5706404">(</span><span class="ident" id="5706405"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5706407">.</span><span class="ident" id="5706408"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="5706418">,</span>&nbsp;<span class="builtintype" id="5706420">error</span><span class="op" id="5706425">)</span>&nbsp;<span class="op" id="5706427">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5706430">return</span>&nbsp;<span class="ident" id="5706437"><a href="/gostd/compress/zlib/reader.go.html#5706787">NewReaderDict</a></span><span class="op" id="5706450">(</span><span class="ident" id="5706451"><a href="/gostd/compress/zlib/reader.go.html#5706391">r</a></span><span class="op" id="5706452">,</span>&nbsp;<span class="builtintype" id="5706454">nil</span><span class="op" id="5706457">)</span><br>
<span class="lineno"></span><span class="op" id="5706459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5706462">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5706527">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5706612">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5706709">//</span><br>
<span class="lineno"></span><span class="comment" id="5706712">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5706782">func</span>&nbsp;<span class="ident" id="5706787">NewReaderDict</span><span class="op" id="5706800">(</span><span class="ident" id="5706801">r</span>&nbsp;<span class="ident" id="5706803"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5706805">.</span><span class="ident" id="5706806"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5706812">,</span>&nbsp;<span class="ident" id="5706814">dict</span>&nbsp;<span class="op" id="5706819">[</span><span class="op" id="5706820">]</span><span class="builtintype" id="5706821">byte</span><span class="op" id="5706825">)</span>&nbsp;<span class="op" id="5706827">(</span><span class="ident" id="5706828"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5706830">.</span><span class="ident" id="5706831"><a href="/gostd/io/io.go.html#1423414">ReadCloser</a></span><span class="op" id="5706841">,</span>&nbsp;<span class="builtintype" id="5706843">error</span><span class="op" id="5706848">)</span>&nbsp;<span class="op" id="5706850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5706853">z</span>&nbsp;<span class="op" id="5706855">:=</span>&nbsp;<span class="builtinfunc" id="5706858">new</span><span class="op" id="5706861">(</span><span class="ident" id="5706862"><a href="/gostd/compress/zlib/reader.go.html#5705521">reader</a></span><span class="op" id="5706868">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5706871">err</span>&nbsp;<span class="op" id="5706875">:=</span>&nbsp;<span class="ident" id="5706878"><a href="/gostd/compress/zlib/reader.go.html#5706853">z</a></span><span class="op" id="5706879">.</span><span class="ident" id="5706880"><a href="/gostd/compress/zlib/reader.go.html#5707809">Reset</a></span><span class="op" id="5706885">(</span><span class="ident" id="5706886"><a href="/gostd/compress/zlib/reader.go.html#5706801">r</a></span><span class="op" id="5706887">,</span>&nbsp;<span class="ident" id="5706889"><a href="/gostd/compress/zlib/reader.go.html#5706814">dict</a></span><span class="op" id="5706893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5706896">if</span>&nbsp;<span class="ident" id="5706899"><a href="/gostd/compress/zlib/reader.go.html#5706871">err</a></span>&nbsp;<span class="op" id="5706903">!=</span>&nbsp;<span class="builtintype" id="5706906">nil</span>&nbsp;<span class="op" id="5706910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5706914">return</span>&nbsp;<span class="builtintype" id="5706921">nil</span><span class="op" id="5706924">,</span>&nbsp;<span class="ident" id="5706926"><a href="/gostd/compress/zlib/reader.go.html#5706871">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5706931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5706934">return</span>&nbsp;<span class="ident" id="5706941"><a href="/gostd/compress/zlib/reader.go.html#5706853">z</a></span><span class="op" id="5706942">,</span>&nbsp;<span class="builtintype" id="5706944">nil</span><br>
<span class="lineno">85</span><span class="op" id="5706948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5706951">func</span>&nbsp;<span class="op" id="5706956">(</span><span class="ident" id="5706957">z</span>&nbsp;<span class="op" id="5706959">*</span><span class="ident" id="5706960"><a href="/gostd/compress/zlib/reader.go.html#5705521">reader</a></span><span class="op" id="5706966">)</span>&nbsp;<span class="ident" id="5706968">Read</span><span class="op" id="5706972">(</span><span class="ident" id="5706973">p</span>&nbsp;<span class="op" id="5706975">[</span><span class="op" id="5706976">]</span><span class="builtintype" id="5706977">byte</span><span class="op" id="5706981">)</span>&nbsp;<span class="op" id="5706983">(</span><span class="ident" id="5706984">n</span>&nbsp;<span class="builtintype" id="5706986">int</span><span class="op" id="5706989">,</span>&nbsp;<span class="ident" id="5706991">err</span>&nbsp;<span class="builtintype" id="5706995">error</span><span class="op" id="5707000">)</span>&nbsp;<span class="op" id="5707002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707005">if</span>&nbsp;<span class="ident" id="5707008"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707009">.</span><span class="ident" id="5707010"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span>&nbsp;<span class="op" id="5707014">!=</span>&nbsp;<span class="builtintype" id="5707017">nil</span>&nbsp;<span class="op" id="5707021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707025">return</span>&nbsp;<span class="num" id="5707032">0</span><span class="op" id="5707033">,</span>&nbsp;<span class="ident" id="5707035"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707036">.</span><span class="ident" id="5707037"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707045">if</span>&nbsp;<span class="builtinfunc" id="5707048">len</span><span class="op" id="5707051">(</span><span class="ident" id="5707052"><a href="/gostd/compress/zlib/reader.go.html#5706973">p</a></span><span class="op" id="5707053">)</span>&nbsp;<span class="op" id="5707055">==</span>&nbsp;<span class="num" id="5707058">0</span>&nbsp;<span class="op" id="5707060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707064">return</span>&nbsp;<span class="num" id="5707071">0</span><span class="op" id="5707072">,</span>&nbsp;<span class="builtintype" id="5707074">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707083"><a href="/gostd/compress/zlib/reader.go.html#5706984">n</a></span><span class="op" id="5707084">,</span>&nbsp;<span class="ident" id="5707086"><a href="/gostd/compress/zlib/reader.go.html#5706991">err</a></span>&nbsp;<span class="op" id="5707090">=</span>&nbsp;<span class="ident" id="5707092"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707093">.</span><span class="ident" id="5707094"><a href="/gostd/compress/zlib/reader.go.html#5705565">decompressor</a></span><span class="op" id="5707106">.</span><span class="ident" id="5707107"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="5707111">(</span><span class="ident" id="5707112"><a href="/gostd/compress/zlib/reader.go.html#5706973">p</a></span><span class="op" id="5707113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707116"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707117">.</span><span class="ident" id="5707118"><a href="/gostd/compress/zlib/reader.go.html#5705593">digest</a></span><span class="op" id="5707124">.</span><span class="ident" id="5707125"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5707130">(</span><span class="ident" id="5707131"><a href="/gostd/compress/zlib/reader.go.html#5706973">p</a></span><span class="op" id="5707132">[</span><span class="num" id="5707133">0</span><span class="op" id="5707134">:</span><span class="ident" id="5707135"><a href="/gostd/compress/zlib/reader.go.html#5706984">n</a></span><span class="op" id="5707136">]</span><span class="op" id="5707137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707140">if</span>&nbsp;<span class="ident" id="5707143"><a href="/gostd/compress/zlib/reader.go.html#5706984">n</a></span>&nbsp;<span class="op" id="5707145">!=</span>&nbsp;<span class="num" id="5707148">0</span>&nbsp;<span class="op" id="5707150">||</span>&nbsp;<span class="ident" id="5707153"><a href="/gostd/compress/zlib/reader.go.html#5706991">err</a></span>&nbsp;<span class="op" id="5707157">!=</span>&nbsp;<span class="ident" id="5707160"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5707162">.</span><span class="ident" id="5707163"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="5707167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707171"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707172">.</span><span class="ident" id="5707173"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span>&nbsp;<span class="op" id="5707177">=</span>&nbsp;<span class="ident" id="5707179"><a href="/gostd/compress/zlib/reader.go.html#5706991">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707185">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5707197">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707232">if</span>&nbsp;<span class="ident" id="5707235">_</span><span class="op" id="5707236">,</span>&nbsp;<span class="ident" id="5707238">err</span>&nbsp;<span class="op" id="5707242">:=</span>&nbsp;<span class="ident" id="5707245"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5707247">.</span><span class="ident" id="5707248"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5707256">(</span><span class="ident" id="5707257"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707258">.</span><span class="ident" id="5707259"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span><span class="op" id="5707260">,</span>&nbsp;<span class="ident" id="5707262"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707263">.</span><span class="ident" id="5707264"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5707271">[</span><span class="num" id="5707272">0</span><span class="op" id="5707273">:</span><span class="num" id="5707274">4</span><span class="op" id="5707275">]</span><span class="op" id="5707276">)</span><span class="op" id="5707277">;</span>&nbsp;<span class="ident" id="5707279"><a href="/gostd/compress/zlib/reader.go.html#5707238">err</a></span>&nbsp;<span class="op" id="5707283">!=</span>&nbsp;<span class="builtintype" id="5707286">nil</span>&nbsp;<span class="op" id="5707290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707294"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707295">.</span><span class="ident" id="5707296"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span>&nbsp;<span class="op" id="5707300">=</span>&nbsp;<span class="ident" id="5707302"><a href="/gostd/compress/zlib/reader.go.html#5707238">err</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707308">return</span>&nbsp;<span class="num" id="5707315">0</span><span class="op" id="5707316">,</span>&nbsp;<span class="ident" id="5707318"><a href="/gostd/compress/zlib/reader.go.html#5707238">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5707326">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707385">checksum</span>&nbsp;<span class="op" id="5707394">:=</span>&nbsp;<span class="builtintype" id="5707397">uint32</span><span class="op" id="5707403">(</span><span class="ident" id="5707404"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707405">.</span><span class="ident" id="5707406"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5707413">[</span><span class="num" id="5707414">0</span><span class="op" id="5707415">]</span><span class="op" id="5707416">)</span><span class="op" id="5707417">&lt;&lt;</span><span class="num" id="5707419">24</span>&nbsp;<span class="op" id="5707422">|</span>&nbsp;<span class="builtintype" id="5707424">uint32</span><span class="op" id="5707430">(</span><span class="ident" id="5707431"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707432">.</span><span class="ident" id="5707433"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5707440">[</span><span class="num" id="5707441">1</span><span class="op" id="5707442">]</span><span class="op" id="5707443">)</span><span class="op" id="5707444">&lt;&lt;</span><span class="num" id="5707446">16</span>&nbsp;<span class="op" id="5707449">|</span>&nbsp;<span class="builtintype" id="5707451">uint32</span><span class="op" id="5707457">(</span><span class="ident" id="5707458"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707459">.</span><span class="ident" id="5707460"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5707467">[</span><span class="num" id="5707468">2</span><span class="op" id="5707469">]</span><span class="op" id="5707470">)</span><span class="op" id="5707471">&lt;&lt;</span><span class="num" id="5707473">8</span>&nbsp;<span class="op" id="5707475">|</span>&nbsp;<span class="builtintype" id="5707477">uint32</span><span class="op" id="5707483">(</span><span class="ident" id="5707484"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707485">.</span><span class="ident" id="5707486"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5707493">[</span><span class="num" id="5707494">3</span><span class="op" id="5707495">]</span><span class="op" id="5707496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707499">if</span>&nbsp;<span class="ident" id="5707502"><a href="/gostd/compress/zlib/reader.go.html#5707385">checksum</a></span>&nbsp;<span class="op" id="5707511">!=</span>&nbsp;<span class="ident" id="5707514"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707515">.</span><span class="ident" id="5707516"><a href="/gostd/compress/zlib/reader.go.html#5705593">digest</a></span><span class="op" id="5707522">.</span><span class="ident" id="5707523"><a href="/gostd/hash/hash.go.html#3014858">Sum32</a></span><span class="op" id="5707528">(</span><span class="op" id="5707529">)</span>&nbsp;<span class="op" id="5707531">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707535"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707536">.</span><span class="ident" id="5707537"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span>&nbsp;<span class="op" id="5707541">=</span>&nbsp;<span class="ident" id="5707543"><a href="/gostd/compress/zlib/reader.go.html#5705196">ErrChecksum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707557">return</span>&nbsp;<span class="num" id="5707564">0</span><span class="op" id="5707565">,</span>&nbsp;<span class="ident" id="5707567"><a href="/gostd/compress/zlib/reader.go.html#5706957">z</a></span><span class="op" id="5707568">.</span><span class="ident" id="5707569"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707577">return</span><br>
<span class="lineno"></span><span class="op" id="5707584">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5707587">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5707673">func</span>&nbsp;<span class="op" id="5707678">(</span><span class="ident" id="5707679">z</span>&nbsp;<span class="op" id="5707681">*</span><span class="ident" id="5707682"><a href="/gostd/compress/zlib/reader.go.html#5705521">reader</a></span><span class="op" id="5707688">)</span>&nbsp;<span class="ident" id="5707690">Close</span><span class="op" id="5707695">(</span><span class="op" id="5707696">)</span>&nbsp;<span class="builtintype" id="5707698">error</span>&nbsp;<span class="op" id="5707704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707707">if</span>&nbsp;<span class="ident" id="5707710"><a href="/gostd/compress/zlib/reader.go.html#5707679">z</a></span><span class="op" id="5707711">.</span><span class="ident" id="5707712"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span>&nbsp;<span class="op" id="5707716">!=</span>&nbsp;<span class="builtintype" id="5707719">nil</span>&nbsp;<span class="op" id="5707723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707727">return</span>&nbsp;<span class="ident" id="5707734"><a href="/gostd/compress/zlib/reader.go.html#5707679">z</a></span><span class="op" id="5707735">.</span><span class="ident" id="5707736"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707744"><a href="/gostd/compress/zlib/reader.go.html#5707679">z</a></span><span class="op" id="5707745">.</span><span class="ident" id="5707746"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span>&nbsp;<span class="op" id="5707750">=</span>&nbsp;<span class="ident" id="5707752"><a href="/gostd/compress/zlib/reader.go.html#5707679">z</a></span><span class="op" id="5707753">.</span><span class="ident" id="5707754"><a href="/gostd/compress/zlib/reader.go.html#5705565">decompressor</a></span><span class="op" id="5707766">.</span><span class="ident" id="5707767"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="5707772">(</span><span class="op" id="5707773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707776">return</span>&nbsp;<span class="ident" id="5707783"><a href="/gostd/compress/zlib/reader.go.html#5707679">z</a></span><span class="op" id="5707784">.</span><span class="ident" id="5707785"><a href="/gostd/compress/zlib/reader.go.html#5705619">err</a></span><br>
<span class="lineno"></span><span class="op" id="5707789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5707792">func</span>&nbsp;<span class="op" id="5707797">(</span><span class="ident" id="5707798">z</span>&nbsp;<span class="op" id="5707800">*</span><span class="ident" id="5707801"><a href="/gostd/compress/zlib/reader.go.html#5705521">reader</a></span><span class="op" id="5707807">)</span>&nbsp;<span class="ident" id="5707809">Reset</span><span class="op" id="5707814">(</span><span class="ident" id="5707815">r</span>&nbsp;<span class="ident" id="5707817"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5707819">.</span><span class="ident" id="5707820"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5707826">,</span>&nbsp;<span class="ident" id="5707828">dict</span>&nbsp;<span class="op" id="5707833">[</span><span class="op" id="5707834">]</span><span class="builtintype" id="5707835">byte</span><span class="op" id="5707839">)</span>&nbsp;<span class="builtintype" id="5707841">error</span>&nbsp;<span class="op" id="5707847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707850">if</span>&nbsp;<span class="ident" id="5707853">fr</span><span class="op" id="5707855">,</span>&nbsp;<span class="ident" id="5707857">ok</span>&nbsp;<span class="op" id="5707860">:=</span>&nbsp;<span class="ident" id="5707863"><a href="/gostd/compress/zlib/reader.go.html#5707815">r</a></span><span class="op" id="5707864">.</span><span class="op" id="5707865">(</span><span class="ident" id="5707866"><a href="/gostd/compress/zlib/reader.go.html#5705025">flate</a></span><span class="op" id="5707871">.</span><span class="ident" id="5707872"><a href="/gostd/compress/flate/inflate.go.html#4840236">Reader</a></span><span class="op" id="5707878">)</span><span class="op" id="5707879">;</span>&nbsp;<span class="ident" id="5707881"><a href="/gostd/compress/zlib/reader.go.html#5707857">ok</a></span>&nbsp;<span class="op" id="5707884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707888"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5707889">.</span><span class="ident" id="5707890"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span>&nbsp;<span class="op" id="5707892">=</span>&nbsp;<span class="ident" id="5707894"><a href="/gostd/compress/zlib/reader.go.html#5707853">fr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707898">}</span>&nbsp;<span class="keyword" id="5707900">else</span>&nbsp;<span class="op" id="5707905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707909"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5707910">.</span><span class="ident" id="5707911"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span>&nbsp;<span class="op" id="5707913">=</span>&nbsp;<span class="ident" id="5707915"><a href="/gostd/compress/zlib/reader.go.html#5705016">bufio</a></span><span class="op" id="5707920">.</span><span class="ident" id="5707921"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="5707930">(</span><span class="ident" id="5707931"><a href="/gostd/compress/zlib/reader.go.html#5707815">r</a></span><span class="op" id="5707932">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5707935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5707938">_</span><span class="op" id="5707939">,</span>&nbsp;<span class="ident" id="5707941">err</span>&nbsp;<span class="op" id="5707945">:=</span>&nbsp;<span class="ident" id="5707948"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5707950">.</span><span class="ident" id="5707951"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5707959">(</span><span class="ident" id="5707960"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5707961">.</span><span class="ident" id="5707962"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span><span class="op" id="5707963">,</span>&nbsp;<span class="ident" id="5707965"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5707966">.</span><span class="ident" id="5707967"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5707974">[</span><span class="num" id="5707975">0</span><span class="op" id="5707976">:</span><span class="num" id="5707977">2</span><span class="op" id="5707978">]</span><span class="op" id="5707979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5707982">if</span>&nbsp;<span class="ident" id="5707985"><a href="/gostd/compress/zlib/reader.go.html#5707941">err</a></span>&nbsp;<span class="op" id="5707989">!=</span>&nbsp;<span class="builtintype" id="5707992">nil</span>&nbsp;<span class="op" id="5707996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708000">return</span>&nbsp;<span class="ident" id="5708007"><a href="/gostd/compress/zlib/reader.go.html#5707941">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708012">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708015">h</span>&nbsp;<span class="op" id="5708017">:=</span>&nbsp;<span class="builtintype" id="5708020">uint</span><span class="op" id="5708024">(</span><span class="ident" id="5708025"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708026">.</span><span class="ident" id="5708027"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708034">[</span><span class="num" id="5708035">0</span><span class="op" id="5708036">]</span><span class="op" id="5708037">)</span><span class="op" id="5708038">&lt;&lt;</span><span class="num" id="5708040">8</span>&nbsp;<span class="op" id="5708042">|</span>&nbsp;<span class="builtintype" id="5708044">uint</span><span class="op" id="5708048">(</span><span class="ident" id="5708049"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708050">.</span><span class="ident" id="5708051"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708058">[</span><span class="num" id="5708059">1</span><span class="op" id="5708060">]</span><span class="op" id="5708061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708064">if</span>&nbsp;<span class="op" id="5708067">(</span><span class="ident" id="5708068"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708069">.</span><span class="ident" id="5708070"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708077">[</span><span class="num" id="5708078">0</span><span class="op" id="5708079">]</span><span class="op" id="5708080">&amp;</span><span class="num" id="5708081">0x0f</span>&nbsp;<span class="op" id="5708086">!=</span>&nbsp;<span class="ident" id="5708089"><a href="/gostd/compress/zlib/reader.go.html#5705091">zlibDeflate</a></span><span class="op" id="5708100">)</span>&nbsp;<span class="op" id="5708102">||</span>&nbsp;<span class="op" id="5708105">(</span><span class="ident" id="5708106"><a href="/gostd/compress/zlib/reader.go.html#5708015">h</a></span><span class="op" id="5708107">%</span><span class="num" id="5708108">31</span>&nbsp;<span class="op" id="5708111">!=</span>&nbsp;<span class="num" id="5708114">0</span><span class="op" id="5708115">)</span>&nbsp;<span class="op" id="5708117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708121">return</span>&nbsp;<span class="ident" id="5708128"><a href="/gostd/compress/zlib/reader.go.html#5705466">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708142">haveDict</span>&nbsp;<span class="op" id="5708151">:=</span>&nbsp;<span class="ident" id="5708154"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708155">.</span><span class="ident" id="5708156"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708163">[</span><span class="num" id="5708164">1</span><span class="op" id="5708165">]</span><span class="op" id="5708166">&amp;</span><span class="num" id="5708167">0x20</span>&nbsp;<span class="op" id="5708172">!=</span>&nbsp;<span class="num" id="5708175">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708178">if</span>&nbsp;<span class="ident" id="5708181"><a href="/gostd/compress/zlib/reader.go.html#5708142">haveDict</a></span>&nbsp;<span class="op" id="5708190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708194">_</span><span class="op" id="5708195">,</span>&nbsp;<span class="ident" id="5708197"><a href="/gostd/compress/zlib/reader.go.html#5707941">err</a></span>&nbsp;<span class="op" id="5708201">=</span>&nbsp;<span class="ident" id="5708203"><a href="/gostd/compress/zlib/reader.go.html#5705077">io</a></span><span class="op" id="5708205">.</span><span class="ident" id="5708206"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="5708214">(</span><span class="ident" id="5708215"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708216">.</span><span class="ident" id="5708217"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span><span class="op" id="5708218">,</span>&nbsp;<span class="ident" id="5708220"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708221">.</span><span class="ident" id="5708222"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708229">[</span><span class="num" id="5708230">0</span><span class="op" id="5708231">:</span><span class="num" id="5708232">4</span><span class="op" id="5708233">]</span><span class="op" id="5708234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708238">if</span>&nbsp;<span class="ident" id="5708241"><a href="/gostd/compress/zlib/reader.go.html#5707941">err</a></span>&nbsp;<span class="op" id="5708245">!=</span>&nbsp;<span class="builtintype" id="5708248">nil</span>&nbsp;<span class="op" id="5708252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708257">return</span>&nbsp;<span class="ident" id="5708264"><a href="/gostd/compress/zlib/reader.go.html#5707941">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708270">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708274">checksum</span>&nbsp;<span class="op" id="5708283">:=</span>&nbsp;<span class="builtintype" id="5708286">uint32</span><span class="op" id="5708292">(</span><span class="ident" id="5708293"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708294">.</span><span class="ident" id="5708295"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708302">[</span><span class="num" id="5708303">0</span><span class="op" id="5708304">]</span><span class="op" id="5708305">)</span><span class="op" id="5708306">&lt;&lt;</span><span class="num" id="5708308">24</span>&nbsp;<span class="op" id="5708311">|</span>&nbsp;<span class="builtintype" id="5708313">uint32</span><span class="op" id="5708319">(</span><span class="ident" id="5708320"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708321">.</span><span class="ident" id="5708322"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708329">[</span><span class="num" id="5708330">1</span><span class="op" id="5708331">]</span><span class="op" id="5708332">)</span><span class="op" id="5708333">&lt;&lt;</span><span class="num" id="5708335">16</span>&nbsp;<span class="op" id="5708338">|</span>&nbsp;<span class="builtintype" id="5708340">uint32</span><span class="op" id="5708346">(</span><span class="ident" id="5708347"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708348">.</span><span class="ident" id="5708349"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708356">[</span><span class="num" id="5708357">2</span><span class="op" id="5708358">]</span><span class="op" id="5708359">)</span><span class="op" id="5708360">&lt;&lt;</span><span class="num" id="5708362">8</span>&nbsp;<span class="op" id="5708364">|</span>&nbsp;<span class="builtintype" id="5708366">uint32</span><span class="op" id="5708372">(</span><span class="ident" id="5708373"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708374">.</span><span class="ident" id="5708375"><a href="/gostd/compress/zlib/reader.go.html#5705639">scratch</a></span><span class="op" id="5708382">[</span><span class="num" id="5708383">3</span><span class="op" id="5708384">]</span><span class="op" id="5708385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708389">if</span>&nbsp;<span class="ident" id="5708392"><a href="/gostd/compress/zlib/reader.go.html#5708274">checksum</a></span>&nbsp;<span class="op" id="5708401">!=</span>&nbsp;<span class="ident" id="5708404"><a href="/gostd/compress/zlib/reader.go.html#5705061">adler32</a></span><span class="op" id="5708411">.</span><span class="ident" id="5708412"><a href="/gostd/hash/adler32/adler32.go.html#3146102">Checksum</a></span><span class="op" id="5708420">(</span><span class="ident" id="5708421"><a href="/gostd/compress/zlib/reader.go.html#5707828">dict</a></span><span class="op" id="5708425">)</span>&nbsp;<span class="op" id="5708427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708432">return</span>&nbsp;<span class="ident" id="5708439"><a href="/gostd/compress/zlib/reader.go.html#5705333">ErrDictionary</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708458">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708461">if</span>&nbsp;<span class="ident" id="5708464"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708465">.</span><span class="ident" id="5708466"><a href="/gostd/compress/zlib/reader.go.html#5705565">decompressor</a></span>&nbsp;<span class="op" id="5708479">==</span>&nbsp;<span class="builtintype" id="5708482">nil</span>&nbsp;<span class="op" id="5708486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708490">if</span>&nbsp;<span class="ident" id="5708493"><a href="/gostd/compress/zlib/reader.go.html#5708142">haveDict</a></span>&nbsp;<span class="op" id="5708502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708507"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708508">.</span><span class="ident" id="5708509"><a href="/gostd/compress/zlib/reader.go.html#5705565">decompressor</a></span>&nbsp;<span class="op" id="5708522">=</span>&nbsp;<span class="ident" id="5708524"><a href="/gostd/compress/zlib/reader.go.html#5705025">flate</a></span><span class="op" id="5708529">.</span><span class="ident" id="5708530"><a href="/gostd/compress/flate/inflate.go.html#4851168">NewReaderDict</a></span><span class="op" id="5708543">(</span><span class="ident" id="5708544"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708545">.</span><span class="ident" id="5708546"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span><span class="op" id="5708547">,</span>&nbsp;<span class="ident" id="5708549"><a href="/gostd/compress/zlib/reader.go.html#5707828">dict</a></span><span class="op" id="5708553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708557">}</span>&nbsp;<span class="keyword" id="5708559">else</span>&nbsp;<span class="op" id="5708564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708569"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708570">.</span><span class="ident" id="5708571"><a href="/gostd/compress/zlib/reader.go.html#5705565">decompressor</a></span>&nbsp;<span class="op" id="5708584">=</span>&nbsp;<span class="ident" id="5708586"><a href="/gostd/compress/zlib/reader.go.html#5705025">flate</a></span><span class="op" id="5708591">.</span><span class="ident" id="5708592"><a href="/gostd/compress/flate/inflate.go.html#4850562">NewReader</a></span><span class="op" id="5708601">(</span><span class="ident" id="5708602"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708603">.</span><span class="ident" id="5708604"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span><span class="op" id="5708605">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708612">}</span>&nbsp;<span class="keyword" id="5708614">else</span>&nbsp;<span class="op" id="5708619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708623"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708624">.</span><span class="ident" id="5708625"><a href="/gostd/compress/zlib/reader.go.html#5705565">decompressor</a></span><span class="op" id="5708637">.</span><span class="op" id="5708638">(</span><span class="ident" id="5708639"><a href="/gostd/compress/zlib/reader.go.html#5705025">flate</a></span><span class="op" id="5708644">.</span><span class="ident" id="5708645"><a href="/gostd/compress/flate/inflate.go.html#4836467">Resetter</a></span><span class="op" id="5708653">)</span><span class="op" id="5708654">.</span><span class="ident" id="5708655"><a href="/gostd/compress/flate/inflate.go.html#4836608">Reset</a></span><span class="op" id="5708660">(</span><span class="ident" id="5708661"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708662">.</span><span class="ident" id="5708663"><a href="/gostd/compress/zlib/reader.go.html#5705538">r</a></span><span class="op" id="5708664">,</span>&nbsp;<span class="ident" id="5708666"><a href="/gostd/compress/zlib/reader.go.html#5707828">dict</a></span><span class="op" id="5708670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5708673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5708676"><a href="/gostd/compress/zlib/reader.go.html#5707798">z</a></span><span class="op" id="5708677">.</span><span class="ident" id="5708678"><a href="/gostd/compress/zlib/reader.go.html#5705593">digest</a></span>&nbsp;<span class="op" id="5708685">=</span>&nbsp;<span class="ident" id="5708687"><a href="/gostd/compress/zlib/reader.go.html#5705061">adler32</a></span><span class="op" id="5708694">.</span><span class="ident" id="5708695"><a href="/gostd/hash/adler32/adler32.go.html#3145280">New</a></span><span class="op" id="5708698">(</span><span class="op" id="5708699">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5708702">return</span>&nbsp;<span class="builtintype" id="5708709">nil</span><br>
<span class="lineno"></span><span class="op" id="5708713">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
