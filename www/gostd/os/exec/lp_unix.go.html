<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4851803">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4851859">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4851913">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4851964">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4852034">package</span>&nbsp;<span class="ident" id="4852042">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4852048">import</span>&nbsp;<span class="op" id="4852055">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4852058">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4852068">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4852074">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4852084">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4852087">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4852177">var</span>&nbsp;<span class="ident" id="4852181">ErrNotFound</span>&nbsp;<span class="op" id="4852193">=</span>&nbsp;<span class="ident" id="4852195">errors</span><span class="op" id="4852201">.</span><span class="ident" id="4852202">New</span><span class="op" id="4852205">(</span><span class="string" id="4852206">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="4852242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4852245">func</span>&nbsp;<span class="ident" id="4852250">findExecutable</span><span class="op" id="4852264">(</span><span class="ident" id="4852265">file</span>&nbsp;<span class="builtintype" id="4852270">string</span><span class="op" id="4852276">)</span>&nbsp;<span class="builtintype" id="4852278">error</span>&nbsp;<span class="op" id="4852284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852287">d</span><span class="op" id="4852288">,</span>&nbsp;<span class="ident" id="4852290">err</span>&nbsp;<span class="op" id="4852294">:=</span>&nbsp;<span class="ident" id="4852297">os</span><span class="op" id="4852299">.</span><span class="ident" id="4852300">Stat</span><span class="op" id="4852304">(</span><span class="ident" id="4852305">file</span><span class="op" id="4852309">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852312">if</span>&nbsp;<span class="ident" id="4852315">err</span>&nbsp;<span class="op" id="4852319">!=</span>&nbsp;<span class="ident" id="4852322">nil</span>&nbsp;<span class="op" id="4852326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852330">return</span>&nbsp;<span class="ident" id="4852337">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4852342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852345">if</span>&nbsp;<span class="ident" id="4852348">m</span>&nbsp;<span class="op" id="4852350">:=</span>&nbsp;<span class="ident" id="4852353">d</span><span class="op" id="4852354">.</span><span class="ident" id="4852355">Mode</span><span class="op" id="4852359">(</span><span class="op" id="4852360">)</span><span class="op" id="4852361">;</span>&nbsp;<span class="op" id="4852363">!</span><span class="ident" id="4852364">m</span><span class="op" id="4852365">.</span><span class="ident" id="4852366">IsDir</span><span class="op" id="4852371">(</span><span class="op" id="4852372">)</span>&nbsp;<span class="op" id="4852374">&amp;&amp;</span>&nbsp;<span class="ident" id="4852377">m</span><span class="op" id="4852378">&amp;</span><span class="num" id="4852379">0111</span>&nbsp;<span class="op" id="4852384">!=</span>&nbsp;<span class="num" id="4852387">0</span>&nbsp;<span class="op" id="4852389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852393">return</span>&nbsp;<span class="ident" id="4852400">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4852405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852408">return</span>&nbsp;<span class="ident" id="4852415">os</span><span class="op" id="4852417">.</span><span class="ident" id="4852418">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="4852432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4852435">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="4852492">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="4852554">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="4852635">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="4852718">func</span>&nbsp;<span class="ident" id="4852723">LookPath</span><span class="op" id="4852731">(</span><span class="ident" id="4852732">file</span>&nbsp;<span class="builtintype" id="4852737">string</span><span class="op" id="4852743">)</span>&nbsp;<span class="op" id="4852745">(</span><span class="builtintype" id="4852746">string</span><span class="op" id="4852752">,</span>&nbsp;<span class="builtintype" id="4852754">error</span><span class="op" id="4852759">)</span>&nbsp;<span class="op" id="4852761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4852764">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4852824">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4852886">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4852937">if</span>&nbsp;<span class="ident" id="4852940">strings</span><span class="op" id="4852947">.</span><span class="ident" id="4852948">Contains</span><span class="op" id="4852956">(</span><span class="ident" id="4852957">file</span><span class="op" id="4852961">,</span>&nbsp;<span class="string" id="4852963">&#34;/&#34;</span><span class="op" id="4852966">)</span>&nbsp;<span class="op" id="4852968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4852972">err</span>&nbsp;<span class="op" id="4852976">:=</span>&nbsp;<span class="ident" id="4852979">findExecutable</span><span class="op" id="4852993">(</span><span class="ident" id="4852994">file</span><span class="op" id="4852998">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853002">if</span>&nbsp;<span class="ident" id="4853005">err</span>&nbsp;<span class="op" id="4853009">==</span>&nbsp;<span class="ident" id="4853012">nil</span>&nbsp;<span class="op" id="4853016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853021">return</span>&nbsp;<span class="ident" id="4853028">file</span><span class="op" id="4853032">,</span>&nbsp;<span class="ident" id="4853034">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853044">return</span>&nbsp;<span class="string" id="4853051">&#34;&#34;</span><span class="op" id="4853053">,</span>&nbsp;<span class="op" id="4853055">&amp;</span><span class="ident" id="4853056">Error</span><span class="op" id="4853061">{</span><span class="ident" id="4853062">file</span><span class="op" id="4853066">,</span>&nbsp;<span class="ident" id="4853068">err</span><span class="op" id="4853071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853074">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853077">pathenv</span>&nbsp;<span class="op" id="4853085">:=</span>&nbsp;<span class="ident" id="4853088">os</span><span class="op" id="4853090">.</span><span class="ident" id="4853091">Getenv</span><span class="op" id="4853097">(</span><span class="string" id="4853098">&#34;PATH&#34;</span><span class="op" id="4853104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853107">if</span>&nbsp;<span class="ident" id="4853110">pathenv</span>&nbsp;<span class="op" id="4853118">==</span>&nbsp;<span class="string" id="4853121">&#34;&#34;</span>&nbsp;<span class="op" id="4853124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853128">return</span>&nbsp;<span class="string" id="4853135">&#34;&#34;</span><span class="op" id="4853137">,</span>&nbsp;<span class="op" id="4853139">&amp;</span><span class="ident" id="4853140">Error</span><span class="op" id="4853145">{</span><span class="ident" id="4853146">file</span><span class="op" id="4853150">,</span>&nbsp;<span class="ident" id="4853152">ErrNotFound</span><span class="op" id="4853163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853169">for</span>&nbsp;<span class="ident" id="4853173">_</span><span class="op" id="4853174">,</span>&nbsp;<span class="ident" id="4853176">dir</span>&nbsp;<span class="op" id="4853180">:=</span>&nbsp;<span class="keyword" id="4853183">range</span>&nbsp;<span class="ident" id="4853189">strings</span><span class="op" id="4853196">.</span><span class="ident" id="4853197">Split</span><span class="op" id="4853202">(</span><span class="ident" id="4853203">pathenv</span><span class="op" id="4853210">,</span>&nbsp;<span class="string" id="4853212">&#34;:&#34;</span><span class="op" id="4853215">)</span>&nbsp;<span class="op" id="4853217">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853221">if</span>&nbsp;<span class="ident" id="4853224">dir</span>&nbsp;<span class="op" id="4853228">==</span>&nbsp;<span class="string" id="4853231">&#34;&#34;</span>&nbsp;<span class="op" id="4853234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4853239">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853293">dir</span>&nbsp;<span class="op" id="4853297">=</span>&nbsp;<span class="string" id="4853299">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4853309">path</span>&nbsp;<span class="op" id="4853314">:=</span>&nbsp;<span class="ident" id="4853317">dir</span>&nbsp;<span class="op" id="4853321">+</span>&nbsp;<span class="string" id="4853323">&#34;/&#34;</span>&nbsp;<span class="op" id="4853327">+</span>&nbsp;<span class="ident" id="4853329">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853336">if</span>&nbsp;<span class="ident" id="4853339">err</span>&nbsp;<span class="op" id="4853343">:=</span>&nbsp;<span class="ident" id="4853346">findExecutable</span><span class="op" id="4853360">(</span><span class="ident" id="4853361">path</span><span class="op" id="4853365">)</span><span class="op" id="4853366">;</span>&nbsp;<span class="ident" id="4853368">err</span>&nbsp;<span class="op" id="4853372">==</span>&nbsp;<span class="ident" id="4853375">nil</span>&nbsp;<span class="op" id="4853379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853384">return</span>&nbsp;<span class="ident" id="4853391">path</span><span class="op" id="4853395">,</span>&nbsp;<span class="ident" id="4853397">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4853406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4853409">return</span>&nbsp;<span class="string" id="4853416">&#34;&#34;</span><span class="op" id="4853418">,</span>&nbsp;<span class="op" id="4853420">&amp;</span><span class="ident" id="4853421">Error</span><span class="op" id="4853426">{</span><span class="ident" id="4853427">file</span><span class="op" id="4853431">,</span>&nbsp;<span class="ident" id="4853433">ErrNotFound</span><span class="op" id="4853444">}</span><br>
<span class="lineno">60</span><span class="op" id="4853446">}</span>
</div>
</body>
</html>
