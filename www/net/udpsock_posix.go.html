<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1517962">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1518018">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1518072">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1518123">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1518201">package</span>&nbsp;<span class="ident" id="1518209">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1518214">import</span>&nbsp;<span class="op" id="1518221">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1518224">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1518235">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="1518242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1518245">func</span>&nbsp;<span class="ident" id="1518250">sockaddrToUDP</span><span class="op" id="1518263">(</span><span class="ident" id="1518264">sa</span>&nbsp;<span class="ident" id="1518267"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518274">.</span><span class="ident" id="1518275">Sockaddr</span><span class="op" id="1518283">)</span>&nbsp;<span class="ident" id="1518285"><a href="/net/net.go.html#1465097">Addr</a></span>&nbsp;<span class="op" id="1518290">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518293">switch</span>&nbsp;<span class="ident" id="1518300">sa</span>&nbsp;<span class="op" id="1518303">:=</span>&nbsp;<span class="ident" id="1518306"><a href="/net/udpsock_posix.go.html#1518264">sa</a></span><span class="op" id="1518308">.</span><span class="op" id="1518309">(</span><span class="keyword" id="1518310">type</span><span class="op" id="1518314">)</span>&nbsp;<span class="op" id="1518316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518319">case</span>&nbsp;<span class="op" id="1518324">*</span><span class="ident" id="1518325"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518332">.</span><span class="ident" id="1518333">SockaddrInet4</span><span class="op" id="1518346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518350">return</span>&nbsp;<span class="op" id="1518357">&amp;</span><span class="ident" id="1518358"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1518365">{</span><span class="ident" id="1518366">IP</span><span class="op" id="1518368">:</span>&nbsp;<span class="ident" id="1518370"><a href="/net/udpsock_posix.go.html#1518300">sa</a></span><span class="op" id="1518372">.</span><span class="ident" id="1518373">Addr</span><span class="op" id="1518377">[</span><span class="num" id="1518378">0</span><span class="op" id="1518379">:</span><span class="op" id="1518380">]</span><span class="op" id="1518381">,</span>&nbsp;<span class="ident" id="1518383">Port</span><span class="op" id="1518387">:</span>&nbsp;<span class="ident" id="1518389"><a href="/net/udpsock_posix.go.html#1518300">sa</a></span><span class="op" id="1518391">.</span><span class="ident" id="1518392">Port</span><span class="op" id="1518396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518399">case</span>&nbsp;<span class="op" id="1518404">*</span><span class="ident" id="1518405"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518412">.</span><span class="ident" id="1518413">SockaddrInet6</span><span class="op" id="1518426">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518430">return</span>&nbsp;<span class="op" id="1518437">&amp;</span><span class="ident" id="1518438"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1518445">{</span><span class="ident" id="1518446">IP</span><span class="op" id="1518448">:</span>&nbsp;<span class="ident" id="1518450"><a href="/net/udpsock_posix.go.html#1518300">sa</a></span><span class="op" id="1518452">.</span><span class="ident" id="1518453">Addr</span><span class="op" id="1518457">[</span><span class="num" id="1518458">0</span><span class="op" id="1518459">:</span><span class="op" id="1518460">]</span><span class="op" id="1518461">,</span>&nbsp;<span class="ident" id="1518463">Port</span><span class="op" id="1518467">:</span>&nbsp;<span class="ident" id="1518469"><a href="/net/udpsock_posix.go.html#1518300">sa</a></span><span class="op" id="1518471">.</span><span class="ident" id="1518472">Port</span><span class="op" id="1518476">,</span>&nbsp;<span class="ident" id="1518478">Zone</span><span class="op" id="1518482">:</span>&nbsp;<span class="ident" id="1518484"><a href="/net/ipsock.go.html#1448067">zoneToString</a></span><span class="op" id="1518496">(</span><span class="builtintype" id="1518497">int</span><span class="op" id="1518500">(</span><span class="ident" id="1518501"><a href="/net/udpsock_posix.go.html#1518300">sa</a></span><span class="op" id="1518503">.</span><span class="ident" id="1518504">ZoneId</span><span class="op" id="1518510">)</span><span class="op" id="1518511">)</span><span class="op" id="1518512">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1518515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518518">return</span>&nbsp;<span class="ident" id="1518525">nil</span><br>
<span class="lineno"></span><span class="op" id="1518529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1518532">func</span>&nbsp;<span class="op" id="1518537">(</span><span class="ident" id="1518538">a</span>&nbsp;<span class="op" id="1518540">*</span><span class="ident" id="1518541"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1518548">)</span>&nbsp;<span class="ident" id="1518550">family</span><span class="op" id="1518556">(</span><span class="op" id="1518557">)</span>&nbsp;<span class="builtintype" id="1518559">int</span>&nbsp;<span class="op" id="1518563">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518566">if</span>&nbsp;<span class="ident" id="1518569"><a href="/net/udpsock_posix.go.html#1518538">a</a></span>&nbsp;<span class="op" id="1518571">==</span>&nbsp;<span class="ident" id="1518574">nil</span>&nbsp;<span class="op" id="1518578">||</span>&nbsp;<span class="builtinfunc" id="1518581">len</span><span class="op" id="1518584">(</span><span class="ident" id="1518585"><a href="/net/udpsock_posix.go.html#1518538">a</a></span><span class="op" id="1518586">.</span><span class="ident" id="1518587">IP</span><span class="op" id="1518589">)</span>&nbsp;<span class="op" id="1518591">&lt;=</span>&nbsp;<span class="ident" id="1518594"><a href="/net/ip.go.html#1416769">IPv4len</a></span>&nbsp;<span class="op" id="1518602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518606">return</span>&nbsp;<span class="ident" id="1518613"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518620">.</span><span class="ident" id="1518621">AF_INET</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1518630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518633">if</span>&nbsp;<span class="ident" id="1518636"><a href="/net/udpsock_posix.go.html#1518538">a</a></span><span class="op" id="1518637">.</span><span class="ident" id="1518638">IP</span><span class="op" id="1518640">.</span><span class="ident" id="1518641">To4</span><span class="op" id="1518644">(</span><span class="op" id="1518645">)</span>&nbsp;<span class="op" id="1518647">!=</span>&nbsp;<span class="ident" id="1518650">nil</span>&nbsp;<span class="op" id="1518654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518658">return</span>&nbsp;<span class="ident" id="1518665"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518672">.</span><span class="ident" id="1518673">AF_INET</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1518682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518685">return</span>&nbsp;<span class="ident" id="1518692"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518699">.</span><span class="ident" id="1518700">AF_INET6</span><br>
<span class="lineno"></span><span class="op" id="1518709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1518712">func</span>&nbsp;<span class="op" id="1518717">(</span><span class="ident" id="1518718">a</span>&nbsp;<span class="op" id="1518720">*</span><span class="ident" id="1518721"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1518728">)</span>&nbsp;<span class="ident" id="1518730">isWildcard</span><span class="op" id="1518740">(</span><span class="op" id="1518741">)</span>&nbsp;<span class="builtintype" id="1518743">bool</span>&nbsp;<span class="op" id="1518748">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518751">if</span>&nbsp;<span class="ident" id="1518754"><a href="/net/udpsock_posix.go.html#1518718">a</a></span>&nbsp;<span class="op" id="1518756">==</span>&nbsp;<span class="ident" id="1518759">nil</span>&nbsp;<span class="op" id="1518763">||</span>&nbsp;<span class="ident" id="1518766"><a href="/net/udpsock_posix.go.html#1518718">a</a></span><span class="op" id="1518767">.</span><span class="ident" id="1518768">IP</span>&nbsp;<span class="op" id="1518771">==</span>&nbsp;<span class="ident" id="1518774">nil</span>&nbsp;<span class="op" id="1518778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518782">return</span>&nbsp;<span class="builtintype" id="1518789">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1518795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518798">return</span>&nbsp;<span class="ident" id="1518805"><a href="/net/udpsock_posix.go.html#1518718">a</a></span><span class="op" id="1518806">.</span><span class="ident" id="1518807">IP</span><span class="op" id="1518809">.</span><span class="ident" id="1518810">IsUnspecified</span><span class="op" id="1518823">(</span><span class="op" id="1518824">)</span><br>
<span class="lineno"></span><span class="op" id="1518826">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1518829">func</span>&nbsp;<span class="op" id="1518834">(</span><span class="ident" id="1518835">a</span>&nbsp;<span class="op" id="1518837">*</span><span class="ident" id="1518838"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1518845">)</span>&nbsp;<span class="ident" id="1518847">sockaddr</span><span class="op" id="1518855">(</span><span class="ident" id="1518856">family</span>&nbsp;<span class="builtintype" id="1518863">int</span><span class="op" id="1518866">)</span>&nbsp;<span class="op" id="1518868">(</span><span class="ident" id="1518869"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1518876">.</span><span class="ident" id="1518877">Sockaddr</span><span class="op" id="1518885">,</span>&nbsp;<span class="builtintype" id="1518887">error</span><span class="op" id="1518892">)</span>&nbsp;<span class="op" id="1518894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518897">if</span>&nbsp;<span class="ident" id="1518900"><a href="/net/udpsock_posix.go.html#1518835">a</a></span>&nbsp;<span class="op" id="1518902">==</span>&nbsp;<span class="ident" id="1518905">nil</span>&nbsp;<span class="op" id="1518909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518913">return</span>&nbsp;<span class="ident" id="1518920">nil</span><span class="op" id="1518923">,</span>&nbsp;<span class="ident" id="1518925">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1518930">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1518933">return</span>&nbsp;<span class="ident" id="1518940"><a href="/net/ipsock_posix.go.html#1453030">ipToSockaddr</a></span><span class="op" id="1518952">(</span><span class="ident" id="1518953"><a href="/net/udpsock_posix.go.html#1518856">family</a></span><span class="op" id="1518959">,</span>&nbsp;<span class="ident" id="1518961"><a href="/net/udpsock_posix.go.html#1518835">a</a></span><span class="op" id="1518962">.</span><span class="ident" id="1518963">IP</span><span class="op" id="1518965">,</span>&nbsp;<span class="ident" id="1518967"><a href="/net/udpsock_posix.go.html#1518835">a</a></span><span class="op" id="1518968">.</span><span class="ident" id="1518969">Port</span><span class="op" id="1518973">,</span>&nbsp;<span class="ident" id="1518975"><a href="/net/udpsock_posix.go.html#1518835">a</a></span><span class="op" id="1518976">.</span><span class="ident" id="1518977">Zone</span><span class="op" id="1518981">)</span><br>
<span class="lineno"></span><span class="op" id="1518983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1518986">//&nbsp;UDPConn&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;and&nbsp;PacketConn&nbsp;interfaces</span><br>
<span class="lineno"></span><span class="comment" id="1519057">//&nbsp;for&nbsp;UDP&nbsp;network&nbsp;connections.</span><br>
<span class="lineno">50</span><span class="keyword" id="1519089">type</span>&nbsp;<span class="ident" id="1519094">UDPConn</span>&nbsp;<span class="keyword" id="1519102">struct</span>&nbsp;<span class="op" id="1519109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1519112"><a href="/net/net.go.html#1467102">conn</a></span><br>
<span class="lineno"></span><span class="op" id="1519117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1519120">func</span>&nbsp;<span class="ident" id="1519125">newUDPConn</span><span class="op" id="1519135">(</span><span class="ident" id="1519136">fd</span>&nbsp;<span class="op" id="1519139">*</span><span class="ident" id="1519140"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1519145">)</span>&nbsp;<span class="op" id="1519147">*</span><span class="ident" id="1519148"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span>&nbsp;<span class="op" id="1519156">{</span>&nbsp;<span class="keyword" id="1519158">return</span>&nbsp;<span class="op" id="1519165">&amp;</span><span class="ident" id="1519166"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1519173">{</span><span class="ident" id="1519174"><a href="/net/net.go.html#1467102">conn</a></span><span class="op" id="1519178">{</span><span class="ident" id="1519179"><a href="/net/udpsock_posix.go.html#1519136">fd</a></span><span class="op" id="1519181">}</span><span class="op" id="1519182">}</span>&nbsp;<span class="op" id="1519184">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="1519187">//&nbsp;ReadFromUDP&nbsp;reads&nbsp;a&nbsp;UDP&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="1519257">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="1519328">//&nbsp;that&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span><span class="comment" id="1519355">//</span><br>
<span class="lineno">60</span><span class="comment" id="1519358">//&nbsp;ReadFromUDP&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="1519422">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1519489">//&nbsp;SetReadDeadline.</span><br>
<span class="lineno"></span><span class="keyword" id="1519509">func</span>&nbsp;<span class="op" id="1519514">(</span><span class="ident" id="1519515">c</span>&nbsp;<span class="op" id="1519517">*</span><span class="ident" id="1519518"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1519525">)</span>&nbsp;<span class="ident" id="1519527">ReadFromUDP</span><span class="op" id="1519538">(</span><span class="ident" id="1519539">b</span>&nbsp;<span class="op" id="1519541">[</span><span class="op" id="1519542">]</span><span class="builtintype" id="1519543">byte</span><span class="op" id="1519547">)</span>&nbsp;<span class="op" id="1519549">(</span><span class="ident" id="1519550">n</span>&nbsp;<span class="builtintype" id="1519552">int</span><span class="op" id="1519555">,</span>&nbsp;<span class="ident" id="1519557">addr</span>&nbsp;<span class="op" id="1519562">*</span><span class="ident" id="1519563"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1519570">,</span>&nbsp;<span class="ident" id="1519572">err</span>&nbsp;<span class="builtintype" id="1519576">error</span><span class="op" id="1519581">)</span>&nbsp;<span class="op" id="1519583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519586">if</span>&nbsp;<span class="op" id="1519589">!</span><span class="ident" id="1519590"><a href="/net/udpsock_posix.go.html#1519515">c</a></span><span class="op" id="1519591">.</span><span class="ident" id="1519592">ok</span><span class="op" id="1519594">(</span><span class="op" id="1519595">)</span>&nbsp;<span class="op" id="1519597">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519601">return</span>&nbsp;<span class="num" id="1519608">0</span><span class="op" id="1519609">,</span>&nbsp;<span class="ident" id="1519611">nil</span><span class="op" id="1519614">,</span>&nbsp;<span class="ident" id="1519616"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1519623">.</span><span class="ident" id="1519624">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1519632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1519635"><a href="/net/udpsock_posix.go.html#1519550">n</a></span><span class="op" id="1519636">,</span>&nbsp;<span class="ident" id="1519638">sa</span><span class="op" id="1519640">,</span>&nbsp;<span class="ident" id="1519642"><a href="/net/udpsock_posix.go.html#1519572">err</a></span>&nbsp;<span class="op" id="1519646">:=</span>&nbsp;<span class="ident" id="1519649"><a href="/net/udpsock_posix.go.html#1519515">c</a></span><span class="op" id="1519650">.</span><span class="ident" id="1519651">fd</span><span class="op" id="1519653">.</span><span class="ident" id="1519654">readFrom</span><span class="op" id="1519662">(</span><span class="ident" id="1519663"><a href="/net/udpsock_posix.go.html#1519539">b</a></span><span class="op" id="1519664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519667">switch</span>&nbsp;<span class="ident" id="1519674">sa</span>&nbsp;<span class="op" id="1519677">:=</span>&nbsp;<span class="ident" id="1519680"><a href="/net/udpsock_posix.go.html#1519638">sa</a></span><span class="op" id="1519682">.</span><span class="op" id="1519683">(</span><span class="keyword" id="1519684">type</span><span class="op" id="1519688">)</span>&nbsp;<span class="op" id="1519690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519693">case</span>&nbsp;<span class="op" id="1519698">*</span><span class="ident" id="1519699"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1519706">.</span><span class="ident" id="1519707">SockaddrInet4</span><span class="op" id="1519720">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1519724"><a href="/net/udpsock_posix.go.html#1519557">addr</a></span>&nbsp;<span class="op" id="1519729">=</span>&nbsp;<span class="op" id="1519731">&amp;</span><span class="ident" id="1519732"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1519739">{</span><span class="ident" id="1519740">IP</span><span class="op" id="1519742">:</span>&nbsp;<span class="ident" id="1519744"><a href="/net/udpsock_posix.go.html#1519674">sa</a></span><span class="op" id="1519746">.</span><span class="ident" id="1519747">Addr</span><span class="op" id="1519751">[</span><span class="num" id="1519752">0</span><span class="op" id="1519753">:</span><span class="op" id="1519754">]</span><span class="op" id="1519755">,</span>&nbsp;<span class="ident" id="1519757">Port</span><span class="op" id="1519761">:</span>&nbsp;<span class="ident" id="1519763"><a href="/net/udpsock_posix.go.html#1519674">sa</a></span><span class="op" id="1519765">.</span><span class="ident" id="1519766">Port</span><span class="op" id="1519770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519773">case</span>&nbsp;<span class="op" id="1519778">*</span><span class="ident" id="1519779"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1519786">.</span><span class="ident" id="1519787">SockaddrInet6</span><span class="op" id="1519800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1519804"><a href="/net/udpsock_posix.go.html#1519557">addr</a></span>&nbsp;<span class="op" id="1519809">=</span>&nbsp;<span class="op" id="1519811">&amp;</span><span class="ident" id="1519812"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1519819">{</span><span class="ident" id="1519820">IP</span><span class="op" id="1519822">:</span>&nbsp;<span class="ident" id="1519824"><a href="/net/udpsock_posix.go.html#1519674">sa</a></span><span class="op" id="1519826">.</span><span class="ident" id="1519827">Addr</span><span class="op" id="1519831">[</span><span class="num" id="1519832">0</span><span class="op" id="1519833">:</span><span class="op" id="1519834">]</span><span class="op" id="1519835">,</span>&nbsp;<span class="ident" id="1519837">Port</span><span class="op" id="1519841">:</span>&nbsp;<span class="ident" id="1519843"><a href="/net/udpsock_posix.go.html#1519674">sa</a></span><span class="op" id="1519845">.</span><span class="ident" id="1519846">Port</span><span class="op" id="1519850">,</span>&nbsp;<span class="ident" id="1519852">Zone</span><span class="op" id="1519856">:</span>&nbsp;<span class="ident" id="1519858"><a href="/net/ipsock.go.html#1448067">zoneToString</a></span><span class="op" id="1519870">(</span><span class="builtintype" id="1519871">int</span><span class="op" id="1519874">(</span><span class="ident" id="1519875"><a href="/net/udpsock_posix.go.html#1519674">sa</a></span><span class="op" id="1519877">.</span><span class="ident" id="1519878">ZoneId</span><span class="op" id="1519884">)</span><span class="op" id="1519885">)</span><span class="op" id="1519886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1519889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519892">return</span><br>
<span class="lineno">75</span><span class="op" id="1519899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1519902">//&nbsp;ReadFrom&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1519957">func</span>&nbsp;<span class="op" id="1519962">(</span><span class="ident" id="1519963">c</span>&nbsp;<span class="op" id="1519965">*</span><span class="ident" id="1519966"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1519973">)</span>&nbsp;<span class="ident" id="1519975">ReadFrom</span><span class="op" id="1519983">(</span><span class="ident" id="1519984">b</span>&nbsp;<span class="op" id="1519986">[</span><span class="op" id="1519987">]</span><span class="builtintype" id="1519988">byte</span><span class="op" id="1519992">)</span>&nbsp;<span class="op" id="1519994">(</span><span class="builtintype" id="1519995">int</span><span class="op" id="1519998">,</span>&nbsp;<span class="ident" id="1520000"><a href="/net/net.go.html#1465097">Addr</a></span><span class="op" id="1520004">,</span>&nbsp;<span class="builtintype" id="1520006">error</span><span class="op" id="1520011">)</span>&nbsp;<span class="op" id="1520013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520016">if</span>&nbsp;<span class="op" id="1520019">!</span><span class="ident" id="1520020"><a href="/net/udpsock_posix.go.html#1519963">c</a></span><span class="op" id="1520021">.</span><span class="ident" id="1520022">ok</span><span class="op" id="1520024">(</span><span class="op" id="1520025">)</span>&nbsp;<span class="op" id="1520027">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520031">return</span>&nbsp;<span class="num" id="1520038">0</span><span class="op" id="1520039">,</span>&nbsp;<span class="ident" id="1520041">nil</span><span class="op" id="1520044">,</span>&nbsp;<span class="ident" id="1520046"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1520053">.</span><span class="ident" id="1520054">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1520062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1520065">n</span><span class="op" id="1520066">,</span>&nbsp;<span class="ident" id="1520068">addr</span><span class="op" id="1520072">,</span>&nbsp;<span class="ident" id="1520074">err</span>&nbsp;<span class="op" id="1520078">:=</span>&nbsp;<span class="ident" id="1520081"><a href="/net/udpsock_posix.go.html#1519963">c</a></span><span class="op" id="1520082">.</span><span class="ident" id="1520083">ReadFromUDP</span><span class="op" id="1520094">(</span><span class="ident" id="1520095"><a href="/net/udpsock_posix.go.html#1519984">b</a></span><span class="op" id="1520096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520099">return</span>&nbsp;<span class="ident" id="1520106"><a href="/net/udpsock_posix.go.html#1520065">n</a></span><span class="op" id="1520107">,</span>&nbsp;<span class="ident" id="1520109"><a href="/net/udpsock_posix.go.html#1520068">addr</a></span><span class="op" id="1520113">.</span><span class="ident" id="1520114">toAddr</span><span class="op" id="1520120">(</span><span class="op" id="1520121">)</span><span class="op" id="1520122">,</span>&nbsp;<span class="ident" id="1520124"><a href="/net/udpsock_posix.go.html#1520074">err</a></span><br>
<span class="lineno"></span><span class="op" id="1520128">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="1520131">//&nbsp;ReadMsgUDP&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1520199">//&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;into&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="1520267">//&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b,&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;oob,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1520335">//&nbsp;flags&nbsp;that&nbsp;were&nbsp;set&nbsp;on&nbsp;the&nbsp;packet&nbsp;and&nbsp;the&nbsp;source&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="1520402">//&nbsp;packet.</span><br>
<span class="lineno"></span><span class="keyword" id="1520413">func</span>&nbsp;<span class="op" id="1520418">(</span><span class="ident" id="1520419">c</span>&nbsp;<span class="op" id="1520421">*</span><span class="ident" id="1520422"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1520429">)</span>&nbsp;<span class="ident" id="1520431">ReadMsgUDP</span><span class="op" id="1520441">(</span><span class="ident" id="1520442">b</span><span class="op" id="1520443">,</span>&nbsp;<span class="ident" id="1520445">oob</span>&nbsp;<span class="op" id="1520449">[</span><span class="op" id="1520450">]</span><span class="builtintype" id="1520451">byte</span><span class="op" id="1520455">)</span>&nbsp;<span class="op" id="1520457">(</span><span class="ident" id="1520458">n</span><span class="op" id="1520459">,</span>&nbsp;<span class="ident" id="1520461">oobn</span><span class="op" id="1520465">,</span>&nbsp;<span class="ident" id="1520467">flags</span>&nbsp;<span class="builtintype" id="1520473">int</span><span class="op" id="1520476">,</span>&nbsp;<span class="ident" id="1520478">addr</span>&nbsp;<span class="op" id="1520483">*</span><span class="ident" id="1520484"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1520491">,</span>&nbsp;<span class="ident" id="1520493">err</span>&nbsp;<span class="builtintype" id="1520497">error</span><span class="op" id="1520502">)</span>&nbsp;<span class="op" id="1520504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520507">if</span>&nbsp;<span class="op" id="1520510">!</span><span class="ident" id="1520511"><a href="/net/udpsock_posix.go.html#1520419">c</a></span><span class="op" id="1520512">.</span><span class="ident" id="1520513">ok</span><span class="op" id="1520515">(</span><span class="op" id="1520516">)</span>&nbsp;<span class="op" id="1520518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520522">return</span>&nbsp;<span class="num" id="1520529">0</span><span class="op" id="1520530">,</span>&nbsp;<span class="num" id="1520532">0</span><span class="op" id="1520533">,</span>&nbsp;<span class="num" id="1520535">0</span><span class="op" id="1520536">,</span>&nbsp;<span class="ident" id="1520538">nil</span><span class="op" id="1520541">,</span>&nbsp;<span class="ident" id="1520543"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1520550">.</span><span class="ident" id="1520551">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1520559">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520562">var</span>&nbsp;<span class="ident" id="1520566">sa</span>&nbsp;<span class="ident" id="1520569"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1520576">.</span><span class="ident" id="1520577">Sockaddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1520587"><a href="/net/udpsock_posix.go.html#1520458">n</a></span><span class="op" id="1520588">,</span>&nbsp;<span class="ident" id="1520590"><a href="/net/udpsock_posix.go.html#1520461">oobn</a></span><span class="op" id="1520594">,</span>&nbsp;<span class="ident" id="1520596"><a href="/net/udpsock_posix.go.html#1520467">flags</a></span><span class="op" id="1520601">,</span>&nbsp;<span class="ident" id="1520603"><a href="/net/udpsock_posix.go.html#1520566">sa</a></span><span class="op" id="1520605">,</span>&nbsp;<span class="ident" id="1520607"><a href="/net/udpsock_posix.go.html#1520493">err</a></span>&nbsp;<span class="op" id="1520611">=</span>&nbsp;<span class="ident" id="1520613"><a href="/net/udpsock_posix.go.html#1520419">c</a></span><span class="op" id="1520614">.</span><span class="ident" id="1520615">fd</span><span class="op" id="1520617">.</span><span class="ident" id="1520618">readMsg</span><span class="op" id="1520625">(</span><span class="ident" id="1520626"><a href="/net/udpsock_posix.go.html#1520442">b</a></span><span class="op" id="1520627">,</span>&nbsp;<span class="ident" id="1520629"><a href="/net/udpsock_posix.go.html#1520445">oob</a></span><span class="op" id="1520632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520635">switch</span>&nbsp;<span class="ident" id="1520642">sa</span>&nbsp;<span class="op" id="1520645">:=</span>&nbsp;<span class="ident" id="1520648"><a href="/net/udpsock_posix.go.html#1520566">sa</a></span><span class="op" id="1520650">.</span><span class="op" id="1520651">(</span><span class="keyword" id="1520652">type</span><span class="op" id="1520656">)</span>&nbsp;<span class="op" id="1520658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520661">case</span>&nbsp;<span class="op" id="1520666">*</span><span class="ident" id="1520667"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1520674">.</span><span class="ident" id="1520675">SockaddrInet4</span><span class="op" id="1520688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1520692"><a href="/net/udpsock_posix.go.html#1520478">addr</a></span>&nbsp;<span class="op" id="1520697">=</span>&nbsp;<span class="op" id="1520699">&amp;</span><span class="ident" id="1520700"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1520707">{</span><span class="ident" id="1520708">IP</span><span class="op" id="1520710">:</span>&nbsp;<span class="ident" id="1520712"><a href="/net/udpsock_posix.go.html#1520642">sa</a></span><span class="op" id="1520714">.</span><span class="ident" id="1520715">Addr</span><span class="op" id="1520719">[</span><span class="num" id="1520720">0</span><span class="op" id="1520721">:</span><span class="op" id="1520722">]</span><span class="op" id="1520723">,</span>&nbsp;<span class="ident" id="1520725">Port</span><span class="op" id="1520729">:</span>&nbsp;<span class="ident" id="1520731"><a href="/net/udpsock_posix.go.html#1520642">sa</a></span><span class="op" id="1520733">.</span><span class="ident" id="1520734">Port</span><span class="op" id="1520738">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520741">case</span>&nbsp;<span class="op" id="1520746">*</span><span class="ident" id="1520747"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1520754">.</span><span class="ident" id="1520755">SockaddrInet6</span><span class="op" id="1520768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1520772"><a href="/net/udpsock_posix.go.html#1520478">addr</a></span>&nbsp;<span class="op" id="1520777">=</span>&nbsp;<span class="op" id="1520779">&amp;</span><span class="ident" id="1520780"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1520787">{</span><span class="ident" id="1520788">IP</span><span class="op" id="1520790">:</span>&nbsp;<span class="ident" id="1520792"><a href="/net/udpsock_posix.go.html#1520642">sa</a></span><span class="op" id="1520794">.</span><span class="ident" id="1520795">Addr</span><span class="op" id="1520799">[</span><span class="num" id="1520800">0</span><span class="op" id="1520801">:</span><span class="op" id="1520802">]</span><span class="op" id="1520803">,</span>&nbsp;<span class="ident" id="1520805">Port</span><span class="op" id="1520809">:</span>&nbsp;<span class="ident" id="1520811"><a href="/net/udpsock_posix.go.html#1520642">sa</a></span><span class="op" id="1520813">.</span><span class="ident" id="1520814">Port</span><span class="op" id="1520818">,</span>&nbsp;<span class="ident" id="1520820">Zone</span><span class="op" id="1520824">:</span>&nbsp;<span class="ident" id="1520826"><a href="/net/ipsock.go.html#1448067">zoneToString</a></span><span class="op" id="1520838">(</span><span class="builtintype" id="1520839">int</span><span class="op" id="1520842">(</span><span class="ident" id="1520843"><a href="/net/udpsock_posix.go.html#1520642">sa</a></span><span class="op" id="1520845">.</span><span class="ident" id="1520846">ZoneId</span><span class="op" id="1520852">)</span><span class="op" id="1520853">)</span><span class="op" id="1520854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1520857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520860">return</span><br>
<span class="lineno"></span><span class="op" id="1520867">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span><span class="comment" id="1520870">//&nbsp;WriteToUDP&nbsp;writes&nbsp;a&nbsp;UDP&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload</span><br>
<span class="lineno"></span><span class="comment" id="1520939">//&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="1520950">//</span><br>
<span class="lineno"></span><span class="comment" id="1520953">//&nbsp;WriteToUDP&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno">110</span><span class="comment" id="1521016">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1521083">//&nbsp;SetWriteDeadline.&nbsp;&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts</span><br>
<span class="lineno"></span><span class="comment" id="1521152">//&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span><span class="keyword" id="1521165">func</span>&nbsp;<span class="op" id="1521170">(</span><span class="ident" id="1521171">c</span>&nbsp;<span class="op" id="1521173">*</span><span class="ident" id="1521174"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1521181">)</span>&nbsp;<span class="ident" id="1521183">WriteToUDP</span><span class="op" id="1521193">(</span><span class="ident" id="1521194">b</span>&nbsp;<span class="op" id="1521196">[</span><span class="op" id="1521197">]</span><span class="builtintype" id="1521198">byte</span><span class="op" id="1521202">,</span>&nbsp;<span class="ident" id="1521204">addr</span>&nbsp;<span class="op" id="1521209">*</span><span class="ident" id="1521210"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1521217">)</span>&nbsp;<span class="op" id="1521219">(</span><span class="builtintype" id="1521220">int</span><span class="op" id="1521223">,</span>&nbsp;<span class="builtintype" id="1521225">error</span><span class="op" id="1521230">)</span>&nbsp;<span class="op" id="1521232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521235">if</span>&nbsp;<span class="op" id="1521238">!</span><span class="ident" id="1521239"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521240">.</span><span class="ident" id="1521241">ok</span><span class="op" id="1521243">(</span><span class="op" id="1521244">)</span>&nbsp;<span class="op" id="1521246">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521250">return</span>&nbsp;<span class="num" id="1521257">0</span><span class="op" id="1521258">,</span>&nbsp;<span class="ident" id="1521260"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1521267">.</span><span class="ident" id="1521268">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1521276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521279">if</span>&nbsp;<span class="ident" id="1521282"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521283">.</span><span class="ident" id="1521284">fd</span><span class="op" id="1521286">.</span><span class="ident" id="1521287">isConnected</span>&nbsp;<span class="op" id="1521299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521303">return</span>&nbsp;<span class="num" id="1521310">0</span><span class="op" id="1521311">,</span>&nbsp;<span class="op" id="1521313">&amp;</span><span class="ident" id="1521314"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1521321">{</span><span class="string" id="1521322">&#34;write&#34;</span><span class="op" id="1521329">,</span>&nbsp;<span class="ident" id="1521331"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521332">.</span><span class="ident" id="1521333">fd</span><span class="op" id="1521335">.</span><span class="ident" id="1521336">net</span><span class="op" id="1521339">,</span>&nbsp;<span class="ident" id="1521341"><a href="/net/udpsock_posix.go.html#1521204">addr</a></span><span class="op" id="1521345">,</span>&nbsp;<span class="ident" id="1521347"><a href="/net/net.go.html#1472233">ErrWriteToConnected</a></span><span class="op" id="1521366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1521369">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521372">if</span>&nbsp;<span class="ident" id="1521375"><a href="/net/udpsock_posix.go.html#1521204">addr</a></span>&nbsp;<span class="op" id="1521380">==</span>&nbsp;<span class="ident" id="1521383">nil</span>&nbsp;<span class="op" id="1521387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521391">return</span>&nbsp;<span class="num" id="1521398">0</span><span class="op" id="1521399">,</span>&nbsp;<span class="op" id="1521401">&amp;</span><span class="ident" id="1521402"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1521409">{</span><span class="ident" id="1521410">Op</span><span class="op" id="1521412">:</span>&nbsp;<span class="string" id="1521414">&#34;write&#34;</span><span class="op" id="1521421">,</span>&nbsp;<span class="ident" id="1521423">Net</span><span class="op" id="1521426">:</span>&nbsp;<span class="ident" id="1521428"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521429">.</span><span class="ident" id="1521430">fd</span><span class="op" id="1521432">.</span><span class="ident" id="1521433">net</span><span class="op" id="1521436">,</span>&nbsp;<span class="ident" id="1521438">Addr</span><span class="op" id="1521442">:</span>&nbsp;<span class="ident" id="1521444">nil</span><span class="op" id="1521447">,</span>&nbsp;<span class="ident" id="1521449">Err</span><span class="op" id="1521452">:</span>&nbsp;<span class="ident" id="1521454"><a href="/net/net.go.html#1472020">errMissingAddress</a></span><span class="op" id="1521471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1521474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1521477">sa</span><span class="op" id="1521479">,</span>&nbsp;<span class="ident" id="1521481">err</span>&nbsp;<span class="op" id="1521485">:=</span>&nbsp;<span class="ident" id="1521488"><a href="/net/udpsock_posix.go.html#1521204">addr</a></span><span class="op" id="1521492">.</span><span class="ident" id="1521493">sockaddr</span><span class="op" id="1521501">(</span><span class="ident" id="1521502"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521503">.</span><span class="ident" id="1521504">fd</span><span class="op" id="1521506">.</span><span class="ident" id="1521507">family</span><span class="op" id="1521513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521516">if</span>&nbsp;<span class="ident" id="1521519"><a href="/net/udpsock_posix.go.html#1521481">err</a></span>&nbsp;<span class="op" id="1521523">!=</span>&nbsp;<span class="ident" id="1521526">nil</span>&nbsp;<span class="op" id="1521530">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521534">return</span>&nbsp;<span class="num" id="1521541">0</span><span class="op" id="1521542">,</span>&nbsp;<span class="op" id="1521544">&amp;</span><span class="ident" id="1521545"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1521552">{</span><span class="string" id="1521553">&#34;write&#34;</span><span class="op" id="1521560">,</span>&nbsp;<span class="ident" id="1521562"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521563">.</span><span class="ident" id="1521564">fd</span><span class="op" id="1521566">.</span><span class="ident" id="1521567">net</span><span class="op" id="1521570">,</span>&nbsp;<span class="ident" id="1521572"><a href="/net/udpsock_posix.go.html#1521204">addr</a></span><span class="op" id="1521576">,</span>&nbsp;<span class="ident" id="1521578"><a href="/net/udpsock_posix.go.html#1521481">err</a></span><span class="op" id="1521581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1521584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521587">return</span>&nbsp;<span class="ident" id="1521594"><a href="/net/udpsock_posix.go.html#1521171">c</a></span><span class="op" id="1521595">.</span><span class="ident" id="1521596">fd</span><span class="op" id="1521598">.</span><span class="ident" id="1521599">writeTo</span><span class="op" id="1521606">(</span><span class="ident" id="1521607"><a href="/net/udpsock_posix.go.html#1521194">b</a></span><span class="op" id="1521608">,</span>&nbsp;<span class="ident" id="1521610"><a href="/net/udpsock_posix.go.html#1521477">sa</a></span><span class="op" id="1521612">)</span><br>
<span class="lineno"></span><span class="op" id="1521614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="1521617">//&nbsp;WriteTo&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="1521670">func</span>&nbsp;<span class="op" id="1521675">(</span><span class="ident" id="1521676">c</span>&nbsp;<span class="op" id="1521678">*</span><span class="ident" id="1521679"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1521686">)</span>&nbsp;<span class="ident" id="1521688">WriteTo</span><span class="op" id="1521695">(</span><span class="ident" id="1521696">b</span>&nbsp;<span class="op" id="1521698">[</span><span class="op" id="1521699">]</span><span class="builtintype" id="1521700">byte</span><span class="op" id="1521704">,</span>&nbsp;<span class="ident" id="1521706">addr</span>&nbsp;<span class="ident" id="1521711"><a href="/net/net.go.html#1465097">Addr</a></span><span class="op" id="1521715">)</span>&nbsp;<span class="op" id="1521717">(</span><span class="builtintype" id="1521718">int</span><span class="op" id="1521721">,</span>&nbsp;<span class="builtintype" id="1521723">error</span><span class="op" id="1521728">)</span>&nbsp;<span class="op" id="1521730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521733">if</span>&nbsp;<span class="op" id="1521736">!</span><span class="ident" id="1521737"><a href="/net/udpsock_posix.go.html#1521676">c</a></span><span class="op" id="1521738">.</span><span class="ident" id="1521739">ok</span><span class="op" id="1521741">(</span><span class="op" id="1521742">)</span>&nbsp;<span class="op" id="1521744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521748">return</span>&nbsp;<span class="num" id="1521755">0</span><span class="op" id="1521756">,</span>&nbsp;<span class="ident" id="1521758"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1521765">.</span><span class="ident" id="1521766">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1521774">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1521777">a</span><span class="op" id="1521778">,</span>&nbsp;<span class="ident" id="1521780">ok</span>&nbsp;<span class="op" id="1521783">:=</span>&nbsp;<span class="ident" id="1521786"><a href="/net/udpsock_posix.go.html#1521706">addr</a></span><span class="op" id="1521790">.</span><span class="op" id="1521791">(</span><span class="op" id="1521792">*</span><span class="ident" id="1521793"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1521800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521803">if</span>&nbsp;<span class="op" id="1521806">!</span><span class="ident" id="1521807"><a href="/net/udpsock_posix.go.html#1521780">ok</a></span>&nbsp;<span class="op" id="1521810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521814">return</span>&nbsp;<span class="num" id="1521821">0</span><span class="op" id="1521822">,</span>&nbsp;<span class="op" id="1521824">&amp;</span><span class="ident" id="1521825"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1521832">{</span><span class="string" id="1521833">&#34;write&#34;</span><span class="op" id="1521840">,</span>&nbsp;<span class="ident" id="1521842"><a href="/net/udpsock_posix.go.html#1521676">c</a></span><span class="op" id="1521843">.</span><span class="ident" id="1521844">fd</span><span class="op" id="1521846">.</span><span class="ident" id="1521847">net</span><span class="op" id="1521850">,</span>&nbsp;<span class="ident" id="1521852"><a href="/net/udpsock_posix.go.html#1521706">addr</a></span><span class="op" id="1521856">,</span>&nbsp;<span class="ident" id="1521858"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1521865">.</span><span class="ident" id="1521866">EINVAL</span><span class="op" id="1521872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1521875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1521878">return</span>&nbsp;<span class="ident" id="1521885"><a href="/net/udpsock_posix.go.html#1521676">c</a></span><span class="op" id="1521886">.</span><span class="ident" id="1521887">WriteToUDP</span><span class="op" id="1521897">(</span><span class="ident" id="1521898"><a href="/net/udpsock_posix.go.html#1521696">b</a></span><span class="op" id="1521899">,</span>&nbsp;<span class="ident" id="1521901"><a href="/net/udpsock_posix.go.html#1521777">a</a></span><span class="op" id="1521902">)</span><br>
<span class="lineno">140</span><span class="op" id="1521904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1521907">//&nbsp;WriteMsgUDP&nbsp;writes&nbsp;a&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="1521978">//&nbsp;b&nbsp;and&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;from&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1522045">//&nbsp;number&nbsp;of&nbsp;payload&nbsp;and&nbsp;out-of-band&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno">145</span><span class="keyword" id="1522097">func</span>&nbsp;<span class="op" id="1522102">(</span><span class="ident" id="1522103">c</span>&nbsp;<span class="op" id="1522105">*</span><span class="ident" id="1522106"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1522113">)</span>&nbsp;<span class="ident" id="1522115">WriteMsgUDP</span><span class="op" id="1522126">(</span><span class="ident" id="1522127">b</span><span class="op" id="1522128">,</span>&nbsp;<span class="ident" id="1522130">oob</span>&nbsp;<span class="op" id="1522134">[</span><span class="op" id="1522135">]</span><span class="builtintype" id="1522136">byte</span><span class="op" id="1522140">,</span>&nbsp;<span class="ident" id="1522142">addr</span>&nbsp;<span class="op" id="1522147">*</span><span class="ident" id="1522148"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1522155">)</span>&nbsp;<span class="op" id="1522157">(</span><span class="ident" id="1522158">n</span><span class="op" id="1522159">,</span>&nbsp;<span class="ident" id="1522161">oobn</span>&nbsp;<span class="builtintype" id="1522166">int</span><span class="op" id="1522169">,</span>&nbsp;<span class="ident" id="1522171">err</span>&nbsp;<span class="builtintype" id="1522175">error</span><span class="op" id="1522180">)</span>&nbsp;<span class="op" id="1522182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522185">if</span>&nbsp;<span class="op" id="1522188">!</span><span class="ident" id="1522189"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522190">.</span><span class="ident" id="1522191">ok</span><span class="op" id="1522193">(</span><span class="op" id="1522194">)</span>&nbsp;<span class="op" id="1522196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522200">return</span>&nbsp;<span class="num" id="1522207">0</span><span class="op" id="1522208">,</span>&nbsp;<span class="num" id="1522210">0</span><span class="op" id="1522211">,</span>&nbsp;<span class="ident" id="1522213"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1522220">.</span><span class="ident" id="1522221">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1522229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522232">if</span>&nbsp;<span class="ident" id="1522235"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522236">.</span><span class="ident" id="1522237">fd</span><span class="op" id="1522239">.</span><span class="ident" id="1522240">isConnected</span>&nbsp;<span class="op" id="1522252">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522256">return</span>&nbsp;<span class="num" id="1522263">0</span><span class="op" id="1522264">,</span>&nbsp;<span class="num" id="1522266">0</span><span class="op" id="1522267">,</span>&nbsp;<span class="op" id="1522269">&amp;</span><span class="ident" id="1522270"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1522277">{</span><span class="string" id="1522278">&#34;write&#34;</span><span class="op" id="1522285">,</span>&nbsp;<span class="ident" id="1522287"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522288">.</span><span class="ident" id="1522289">fd</span><span class="op" id="1522291">.</span><span class="ident" id="1522292">net</span><span class="op" id="1522295">,</span>&nbsp;<span class="ident" id="1522297"><a href="/net/udpsock_posix.go.html#1522142">addr</a></span><span class="op" id="1522301">,</span>&nbsp;<span class="ident" id="1522303"><a href="/net/net.go.html#1472233">ErrWriteToConnected</a></span><span class="op" id="1522322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1522325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522328">if</span>&nbsp;<span class="ident" id="1522331"><a href="/net/udpsock_posix.go.html#1522142">addr</a></span>&nbsp;<span class="op" id="1522336">==</span>&nbsp;<span class="ident" id="1522339">nil</span>&nbsp;<span class="op" id="1522343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522347">return</span>&nbsp;<span class="num" id="1522354">0</span><span class="op" id="1522355">,</span>&nbsp;<span class="num" id="1522357">0</span><span class="op" id="1522358">,</span>&nbsp;<span class="op" id="1522360">&amp;</span><span class="ident" id="1522361"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1522368">{</span><span class="ident" id="1522369">Op</span><span class="op" id="1522371">:</span>&nbsp;<span class="string" id="1522373">&#34;write&#34;</span><span class="op" id="1522380">,</span>&nbsp;<span class="ident" id="1522382">Net</span><span class="op" id="1522385">:</span>&nbsp;<span class="ident" id="1522387"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522388">.</span><span class="ident" id="1522389">fd</span><span class="op" id="1522391">.</span><span class="ident" id="1522392">net</span><span class="op" id="1522395">,</span>&nbsp;<span class="ident" id="1522397">Addr</span><span class="op" id="1522401">:</span>&nbsp;<span class="ident" id="1522403">nil</span><span class="op" id="1522406">,</span>&nbsp;<span class="ident" id="1522408">Err</span><span class="op" id="1522411">:</span>&nbsp;<span class="ident" id="1522413"><a href="/net/net.go.html#1472020">errMissingAddress</a></span><span class="op" id="1522430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1522433">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1522436">sa</span><span class="op" id="1522438">,</span>&nbsp;<span class="ident" id="1522440"><a href="/net/udpsock_posix.go.html#1522171">err</a></span>&nbsp;<span class="op" id="1522444">:=</span>&nbsp;<span class="ident" id="1522447"><a href="/net/udpsock_posix.go.html#1522142">addr</a></span><span class="op" id="1522451">.</span><span class="ident" id="1522452">sockaddr</span><span class="op" id="1522460">(</span><span class="ident" id="1522461"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522462">.</span><span class="ident" id="1522463">fd</span><span class="op" id="1522465">.</span><span class="ident" id="1522466">family</span><span class="op" id="1522472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522475">if</span>&nbsp;<span class="ident" id="1522478"><a href="/net/udpsock_posix.go.html#1522171">err</a></span>&nbsp;<span class="op" id="1522482">!=</span>&nbsp;<span class="ident" id="1522485">nil</span>&nbsp;<span class="op" id="1522489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522493">return</span>&nbsp;<span class="num" id="1522500">0</span><span class="op" id="1522501">,</span>&nbsp;<span class="num" id="1522503">0</span><span class="op" id="1522504">,</span>&nbsp;<span class="op" id="1522506">&amp;</span><span class="ident" id="1522507"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1522514">{</span><span class="string" id="1522515">&#34;write&#34;</span><span class="op" id="1522522">,</span>&nbsp;<span class="ident" id="1522524"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522525">.</span><span class="ident" id="1522526">fd</span><span class="op" id="1522528">.</span><span class="ident" id="1522529">net</span><span class="op" id="1522532">,</span>&nbsp;<span class="ident" id="1522534"><a href="/net/udpsock_posix.go.html#1522142">addr</a></span><span class="op" id="1522538">,</span>&nbsp;<span class="ident" id="1522540"><a href="/net/udpsock_posix.go.html#1522171">err</a></span><span class="op" id="1522543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1522546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522549">return</span>&nbsp;<span class="ident" id="1522556"><a href="/net/udpsock_posix.go.html#1522103">c</a></span><span class="op" id="1522557">.</span><span class="ident" id="1522558">fd</span><span class="op" id="1522560">.</span><span class="ident" id="1522561">writeMsg</span><span class="op" id="1522569">(</span><span class="ident" id="1522570"><a href="/net/udpsock_posix.go.html#1522127">b</a></span><span class="op" id="1522571">,</span>&nbsp;<span class="ident" id="1522573"><a href="/net/udpsock_posix.go.html#1522130">oob</a></span><span class="op" id="1522576">,</span>&nbsp;<span class="ident" id="1522578"><a href="/net/udpsock_posix.go.html#1522436">sa</a></span><span class="op" id="1522580">)</span><br>
<span class="lineno">160</span><span class="op" id="1522582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1522585">//&nbsp;DialUDP&nbsp;connects&nbsp;to&nbsp;the&nbsp;remote&nbsp;address&nbsp;raddr&nbsp;on&nbsp;the&nbsp;network&nbsp;net,</span><br>
<span class="lineno"></span><span class="comment" id="1522653">//&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;,&nbsp;or&nbsp;&#34;udp6&#34;.&nbsp;&nbsp;If&nbsp;laddr&nbsp;is&nbsp;not&nbsp;nil,&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1522724">//&nbsp;used&nbsp;as&nbsp;the&nbsp;local&nbsp;address&nbsp;for&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">165</span><span class="keyword" id="1522773">func</span>&nbsp;<span class="ident" id="1522778">DialUDP</span><span class="op" id="1522785">(</span><span class="ident" id="1522786">net</span>&nbsp;<span class="builtintype" id="1522790">string</span><span class="op" id="1522796">,</span>&nbsp;<span class="ident" id="1522798">laddr</span><span class="op" id="1522803">,</span>&nbsp;<span class="ident" id="1522805">raddr</span>&nbsp;<span class="op" id="1522811">*</span><span class="ident" id="1522812"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1522819">)</span>&nbsp;<span class="op" id="1522821">(</span><span class="op" id="1522822">*</span><span class="ident" id="1522823"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1522830">,</span>&nbsp;<span class="builtintype" id="1522832">error</span><span class="op" id="1522837">)</span>&nbsp;<span class="op" id="1522839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522842">switch</span>&nbsp;<span class="ident" id="1522849"><a href="/net/udpsock_posix.go.html#1522786">net</a></span>&nbsp;<span class="op" id="1522853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522856">case</span>&nbsp;<span class="string" id="1522861">&#34;udp&#34;</span><span class="op" id="1522866">,</span>&nbsp;<span class="string" id="1522868">&#34;udp4&#34;</span><span class="op" id="1522874">,</span>&nbsp;<span class="string" id="1522876">&#34;udp6&#34;</span><span class="op" id="1522882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522885">default</span><span class="op" id="1522892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522896">return</span>&nbsp;<span class="ident" id="1522903">nil</span><span class="op" id="1522906">,</span>&nbsp;<span class="op" id="1522908">&amp;</span><span class="ident" id="1522909"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1522916">{</span><span class="ident" id="1522917">Op</span><span class="op" id="1522919">:</span>&nbsp;<span class="string" id="1522921">&#34;dial&#34;</span><span class="op" id="1522927">,</span>&nbsp;<span class="ident" id="1522929">Net</span><span class="op" id="1522932">:</span>&nbsp;<span class="ident" id="1522934"><a href="/net/udpsock_posix.go.html#1522786">net</a></span><span class="op" id="1522937">,</span>&nbsp;<span class="ident" id="1522939">Addr</span><span class="op" id="1522943">:</span>&nbsp;<span class="ident" id="1522945"><a href="/net/udpsock_posix.go.html#1522805">raddr</a></span><span class="op" id="1522950">,</span>&nbsp;<span class="ident" id="1522952">Err</span><span class="op" id="1522955">:</span>&nbsp;<span class="ident" id="1522957"><a href="/net/net.go.html#1473867">UnknownNetworkError</a></span><span class="op" id="1522976">(</span><span class="ident" id="1522977"><a href="/net/udpsock_posix.go.html#1522786">net</a></span><span class="op" id="1522980">)</span><span class="op" id="1522981">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1522984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1522987">if</span>&nbsp;<span class="ident" id="1522990"><a href="/net/udpsock_posix.go.html#1522805">raddr</a></span>&nbsp;<span class="op" id="1522996">==</span>&nbsp;<span class="ident" id="1522999">nil</span>&nbsp;<span class="op" id="1523003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523007">return</span>&nbsp;<span class="ident" id="1523014">nil</span><span class="op" id="1523017">,</span>&nbsp;<span class="op" id="1523019">&amp;</span><span class="ident" id="1523020"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1523027">{</span><span class="ident" id="1523028">Op</span><span class="op" id="1523030">:</span>&nbsp;<span class="string" id="1523032">&#34;dial&#34;</span><span class="op" id="1523038">,</span>&nbsp;<span class="ident" id="1523040">Net</span><span class="op" id="1523043">:</span>&nbsp;<span class="ident" id="1523045"><a href="/net/udpsock_posix.go.html#1522786">net</a></span><span class="op" id="1523048">,</span>&nbsp;<span class="ident" id="1523050">Addr</span><span class="op" id="1523054">:</span>&nbsp;<span class="ident" id="1523056">nil</span><span class="op" id="1523059">,</span>&nbsp;<span class="ident" id="1523061">Err</span><span class="op" id="1523064">:</span>&nbsp;<span class="ident" id="1523066"><a href="/net/net.go.html#1472020">errMissingAddress</a></span><span class="op" id="1523083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1523086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523089">return</span>&nbsp;<span class="ident" id="1523096"><a href="/net/udpsock_posix.go.html#1523143">dialUDP</a></span><span class="op" id="1523103">(</span><span class="ident" id="1523104"><a href="/net/udpsock_posix.go.html#1522786">net</a></span><span class="op" id="1523107">,</span>&nbsp;<span class="ident" id="1523109"><a href="/net/udpsock_posix.go.html#1522798">laddr</a></span><span class="op" id="1523114">,</span>&nbsp;<span class="ident" id="1523116"><a href="/net/udpsock_posix.go.html#1522805">raddr</a></span><span class="op" id="1523121">,</span>&nbsp;<span class="ident" id="1523123"><a href="/net/net.go.html#1473194">noDeadline</a></span><span class="op" id="1523133">)</span><br>
<span class="lineno">175</span><span class="op" id="1523135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1523138">func</span>&nbsp;<span class="ident" id="1523143">dialUDP</span><span class="op" id="1523150">(</span><span class="ident" id="1523151">net</span>&nbsp;<span class="builtintype" id="1523155">string</span><span class="op" id="1523161">,</span>&nbsp;<span class="ident" id="1523163">laddr</span><span class="op" id="1523168">,</span>&nbsp;<span class="ident" id="1523170">raddr</span>&nbsp;<span class="op" id="1523176">*</span><span class="ident" id="1523177"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1523184">,</span>&nbsp;<span class="ident" id="1523186">deadline</span>&nbsp;<span class="ident" id="1523195"><a href="/net/udpsock_posix.go.html#1518235">time</a></span><span class="op" id="1523199">.</span><span class="ident" id="1523200">Time</span><span class="op" id="1523204">)</span>&nbsp;<span class="op" id="1523206">(</span><span class="op" id="1523207">*</span><span class="ident" id="1523208"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1523215">,</span>&nbsp;<span class="builtintype" id="1523217">error</span><span class="op" id="1523222">)</span>&nbsp;<span class="op" id="1523224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1523227">fd</span><span class="op" id="1523229">,</span>&nbsp;<span class="ident" id="1523231">err</span>&nbsp;<span class="op" id="1523235">:=</span>&nbsp;<span class="ident" id="1523238"><a href="/net/ipsock_posix.go.html#1452753">internetSocket</a></span><span class="op" id="1523252">(</span><span class="ident" id="1523253"><a href="/net/udpsock_posix.go.html#1523151">net</a></span><span class="op" id="1523256">,</span>&nbsp;<span class="ident" id="1523258"><a href="/net/udpsock_posix.go.html#1523163">laddr</a></span><span class="op" id="1523263">,</span>&nbsp;<span class="ident" id="1523265"><a href="/net/udpsock_posix.go.html#1523170">raddr</a></span><span class="op" id="1523270">,</span>&nbsp;<span class="ident" id="1523272"><a href="/net/udpsock_posix.go.html#1523186">deadline</a></span><span class="op" id="1523280">,</span>&nbsp;<span class="ident" id="1523282"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1523289">.</span><span class="ident" id="1523290">SOCK_DGRAM</span><span class="op" id="1523300">,</span>&nbsp;<span class="num" id="1523302">0</span><span class="op" id="1523303">,</span>&nbsp;<span class="string" id="1523305">&#34;dial&#34;</span><span class="op" id="1523311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523314">if</span>&nbsp;<span class="ident" id="1523317"><a href="/net/udpsock_posix.go.html#1523231">err</a></span>&nbsp;<span class="op" id="1523321">!=</span>&nbsp;<span class="ident" id="1523324">nil</span>&nbsp;<span class="op" id="1523328">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523332">return</span>&nbsp;<span class="ident" id="1523339">nil</span><span class="op" id="1523342">,</span>&nbsp;<span class="op" id="1523344">&amp;</span><span class="ident" id="1523345"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1523352">{</span><span class="ident" id="1523353">Op</span><span class="op" id="1523355">:</span>&nbsp;<span class="string" id="1523357">&#34;dial&#34;</span><span class="op" id="1523363">,</span>&nbsp;<span class="ident" id="1523365">Net</span><span class="op" id="1523368">:</span>&nbsp;<span class="ident" id="1523370"><a href="/net/udpsock_posix.go.html#1523151">net</a></span><span class="op" id="1523373">,</span>&nbsp;<span class="ident" id="1523375">Addr</span><span class="op" id="1523379">:</span>&nbsp;<span class="ident" id="1523381"><a href="/net/udpsock_posix.go.html#1523170">raddr</a></span><span class="op" id="1523386">,</span>&nbsp;<span class="ident" id="1523388">Err</span><span class="op" id="1523391">:</span>&nbsp;<span class="ident" id="1523393"><a href="/net/udpsock_posix.go.html#1523231">err</a></span><span class="op" id="1523396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1523399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523402">return</span>&nbsp;<span class="ident" id="1523409"><a href="/net/udpsock_posix.go.html#1519125">newUDPConn</a></span><span class="op" id="1523419">(</span><span class="ident" id="1523420"><a href="/net/udpsock_posix.go.html#1523227">fd</a></span><span class="op" id="1523422">)</span><span class="op" id="1523423">,</span>&nbsp;<span class="ident" id="1523425">nil</span><br>
<span class="lineno"></span><span class="op" id="1523429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="1523432">//&nbsp;ListenUDP&nbsp;listens&nbsp;for&nbsp;incoming&nbsp;UDP&nbsp;packets&nbsp;addressed&nbsp;to&nbsp;the&nbsp;local</span><br>
<span class="lineno"></span><span class="comment" id="1523501">//&nbsp;address&nbsp;laddr.&nbsp;&nbsp;Net&nbsp;must&nbsp;be&nbsp;&#34;udp&#34;,&nbsp;&#34;udp4&#34;,&nbsp;or&nbsp;&#34;udp6&#34;.&nbsp;&nbsp;If&nbsp;laddr&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="1523572">//&nbsp;a&nbsp;port&nbsp;of&nbsp;0,&nbsp;ListenUDP&nbsp;will&nbsp;choose&nbsp;an&nbsp;available&nbsp;port.</span><br>
<span class="lineno"></span><span class="comment" id="1523629">//&nbsp;The&nbsp;LocalAddr&nbsp;method&nbsp;of&nbsp;the&nbsp;returned&nbsp;UDPConn&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1523692">//&nbsp;discover&nbsp;the&nbsp;port.&nbsp;&nbsp;The&nbsp;returned&nbsp;connection&#39;s&nbsp;ReadFrom&nbsp;and&nbsp;WriteTo</span><br>
<span class="lineno">190</span><span class="comment" id="1523762">//&nbsp;methods&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;receive&nbsp;and&nbsp;send&nbsp;UDP&nbsp;packets&nbsp;with&nbsp;per-packet</span><br>
<span class="lineno"></span><span class="comment" id="1523833">//&nbsp;addressing.</span><br>
<span class="lineno"></span><span class="keyword" id="1523848">func</span>&nbsp;<span class="ident" id="1523853">ListenUDP</span><span class="op" id="1523862">(</span><span class="ident" id="1523863">net</span>&nbsp;<span class="builtintype" id="1523867">string</span><span class="op" id="1523873">,</span>&nbsp;<span class="ident" id="1523875">laddr</span>&nbsp;<span class="op" id="1523881">*</span><span class="ident" id="1523882"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1523889">)</span>&nbsp;<span class="op" id="1523891">(</span><span class="op" id="1523892">*</span><span class="ident" id="1523893"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1523900">,</span>&nbsp;<span class="builtintype" id="1523902">error</span><span class="op" id="1523907">)</span>&nbsp;<span class="op" id="1523909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523912">switch</span>&nbsp;<span class="ident" id="1523919"><a href="/net/udpsock_posix.go.html#1523863">net</a></span>&nbsp;<span class="op" id="1523923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523926">case</span>&nbsp;<span class="string" id="1523931">&#34;udp&#34;</span><span class="op" id="1523936">,</span>&nbsp;<span class="string" id="1523938">&#34;udp4&#34;</span><span class="op" id="1523944">,</span>&nbsp;<span class="string" id="1523946">&#34;udp6&#34;</span><span class="op" id="1523952">:</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523955">default</span><span class="op" id="1523962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1523966">return</span>&nbsp;<span class="ident" id="1523973">nil</span><span class="op" id="1523976">,</span>&nbsp;<span class="op" id="1523978">&amp;</span><span class="ident" id="1523979"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1523986">{</span><span class="ident" id="1523987">Op</span><span class="op" id="1523989">:</span>&nbsp;<span class="string" id="1523991">&#34;listen&#34;</span><span class="op" id="1523999">,</span>&nbsp;<span class="ident" id="1524001">Net</span><span class="op" id="1524004">:</span>&nbsp;<span class="ident" id="1524006"><a href="/net/udpsock_posix.go.html#1523863">net</a></span><span class="op" id="1524009">,</span>&nbsp;<span class="ident" id="1524011">Addr</span><span class="op" id="1524015">:</span>&nbsp;<span class="ident" id="1524017"><a href="/net/udpsock_posix.go.html#1523875">laddr</a></span><span class="op" id="1524022">,</span>&nbsp;<span class="ident" id="1524024">Err</span><span class="op" id="1524027">:</span>&nbsp;<span class="ident" id="1524029"><a href="/net/net.go.html#1473867">UnknownNetworkError</a></span><span class="op" id="1524048">(</span><span class="ident" id="1524049"><a href="/net/udpsock_posix.go.html#1523863">net</a></span><span class="op" id="1524052">)</span><span class="op" id="1524053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1524056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524059">if</span>&nbsp;<span class="ident" id="1524062"><a href="/net/udpsock_posix.go.html#1523875">laddr</a></span>&nbsp;<span class="op" id="1524068">==</span>&nbsp;<span class="ident" id="1524071">nil</span>&nbsp;<span class="op" id="1524075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1524079"><a href="/net/udpsock_posix.go.html#1523875">laddr</a></span>&nbsp;<span class="op" id="1524085">=</span>&nbsp;<span class="op" id="1524087">&amp;</span><span class="ident" id="1524088"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1524095">{</span><span class="op" id="1524096">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1524099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1524102">fd</span><span class="op" id="1524104">,</span>&nbsp;<span class="ident" id="1524106">err</span>&nbsp;<span class="op" id="1524110">:=</span>&nbsp;<span class="ident" id="1524113"><a href="/net/ipsock_posix.go.html#1452753">internetSocket</a></span><span class="op" id="1524127">(</span><span class="ident" id="1524128"><a href="/net/udpsock_posix.go.html#1523863">net</a></span><span class="op" id="1524131">,</span>&nbsp;<span class="ident" id="1524133"><a href="/net/udpsock_posix.go.html#1523875">laddr</a></span><span class="op" id="1524138">,</span>&nbsp;<span class="ident" id="1524140">nil</span><span class="op" id="1524143">,</span>&nbsp;<span class="ident" id="1524145"><a href="/net/net.go.html#1473194">noDeadline</a></span><span class="op" id="1524155">,</span>&nbsp;<span class="ident" id="1524157"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1524164">.</span><span class="ident" id="1524165">SOCK_DGRAM</span><span class="op" id="1524175">,</span>&nbsp;<span class="num" id="1524177">0</span><span class="op" id="1524178">,</span>&nbsp;<span class="string" id="1524180">&#34;listen&#34;</span><span class="op" id="1524188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524191">if</span>&nbsp;<span class="ident" id="1524194"><a href="/net/udpsock_posix.go.html#1524106">err</a></span>&nbsp;<span class="op" id="1524198">!=</span>&nbsp;<span class="ident" id="1524201">nil</span>&nbsp;<span class="op" id="1524205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524209">return</span>&nbsp;<span class="ident" id="1524216">nil</span><span class="op" id="1524219">,</span>&nbsp;<span class="op" id="1524221">&amp;</span><span class="ident" id="1524222"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1524229">{</span><span class="ident" id="1524230">Op</span><span class="op" id="1524232">:</span>&nbsp;<span class="string" id="1524234">&#34;listen&#34;</span><span class="op" id="1524242">,</span>&nbsp;<span class="ident" id="1524244">Net</span><span class="op" id="1524247">:</span>&nbsp;<span class="ident" id="1524249"><a href="/net/udpsock_posix.go.html#1523863">net</a></span><span class="op" id="1524252">,</span>&nbsp;<span class="ident" id="1524254">Addr</span><span class="op" id="1524258">:</span>&nbsp;<span class="ident" id="1524260"><a href="/net/udpsock_posix.go.html#1523875">laddr</a></span><span class="op" id="1524265">,</span>&nbsp;<span class="ident" id="1524267">Err</span><span class="op" id="1524270">:</span>&nbsp;<span class="ident" id="1524272"><a href="/net/udpsock_posix.go.html#1524106">err</a></span><span class="op" id="1524275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1524278">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524281">return</span>&nbsp;<span class="ident" id="1524288"><a href="/net/udpsock_posix.go.html#1519125">newUDPConn</a></span><span class="op" id="1524298">(</span><span class="ident" id="1524299"><a href="/net/udpsock_posix.go.html#1524102">fd</a></span><span class="op" id="1524301">)</span><span class="op" id="1524302">,</span>&nbsp;<span class="ident" id="1524304">nil</span><br>
<span class="lineno"></span><span class="op" id="1524308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1524311">//&nbsp;ListenMulticastUDP&nbsp;listens&nbsp;for&nbsp;incoming&nbsp;multicast&nbsp;UDP&nbsp;packets</span><br>
<span class="lineno"></span><span class="comment" id="1524376">//&nbsp;addressed&nbsp;to&nbsp;the&nbsp;group&nbsp;address&nbsp;gaddr&nbsp;on&nbsp;ifi,&nbsp;which&nbsp;specifies&nbsp;the</span><br>
<span class="lineno">210</span><span class="comment" id="1524444">//&nbsp;interface&nbsp;to&nbsp;join.&nbsp;&nbsp;ListenMulticastUDP&nbsp;uses&nbsp;default&nbsp;multicast</span><br>
<span class="lineno"></span><span class="comment" id="1524509">//&nbsp;interface&nbsp;if&nbsp;ifi&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1524537">func</span>&nbsp;<span class="ident" id="1524542">ListenMulticastUDP</span><span class="op" id="1524560">(</span><span class="ident" id="1524561">net</span>&nbsp;<span class="builtintype" id="1524565">string</span><span class="op" id="1524571">,</span>&nbsp;<span class="ident" id="1524573">ifi</span>&nbsp;<span class="op" id="1524577">*</span><span class="ident" id="1524578"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1524587">,</span>&nbsp;<span class="ident" id="1524589">gaddr</span>&nbsp;<span class="op" id="1524595">*</span><span class="ident" id="1524596"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1524603">)</span>&nbsp;<span class="op" id="1524605">(</span><span class="op" id="1524606">*</span><span class="ident" id="1524607"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1524614">,</span>&nbsp;<span class="builtintype" id="1524616">error</span><span class="op" id="1524621">)</span>&nbsp;<span class="op" id="1524623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524626">switch</span>&nbsp;<span class="ident" id="1524633"><a href="/net/udpsock_posix.go.html#1524561">net</a></span>&nbsp;<span class="op" id="1524637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524640">case</span>&nbsp;<span class="string" id="1524645">&#34;udp&#34;</span><span class="op" id="1524650">,</span>&nbsp;<span class="string" id="1524652">&#34;udp4&#34;</span><span class="op" id="1524658">,</span>&nbsp;<span class="string" id="1524660">&#34;udp6&#34;</span><span class="op" id="1524666">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524669">default</span><span class="op" id="1524676">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524680">return</span>&nbsp;<span class="ident" id="1524687">nil</span><span class="op" id="1524690">,</span>&nbsp;<span class="op" id="1524692">&amp;</span><span class="ident" id="1524693"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1524700">{</span><span class="ident" id="1524701">Op</span><span class="op" id="1524703">:</span>&nbsp;<span class="string" id="1524705">&#34;listen&#34;</span><span class="op" id="1524713">,</span>&nbsp;<span class="ident" id="1524715">Net</span><span class="op" id="1524718">:</span>&nbsp;<span class="ident" id="1524720"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1524723">,</span>&nbsp;<span class="ident" id="1524725">Addr</span><span class="op" id="1524729">:</span>&nbsp;<span class="ident" id="1524731"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1524736">,</span>&nbsp;<span class="ident" id="1524738">Err</span><span class="op" id="1524741">:</span>&nbsp;<span class="ident" id="1524743"><a href="/net/net.go.html#1473867">UnknownNetworkError</a></span><span class="op" id="1524762">(</span><span class="ident" id="1524763"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1524766">)</span><span class="op" id="1524767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1524770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524773">if</span>&nbsp;<span class="ident" id="1524776"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span>&nbsp;<span class="op" id="1524782">==</span>&nbsp;<span class="ident" id="1524785">nil</span>&nbsp;<span class="op" id="1524789">||</span>&nbsp;<span class="ident" id="1524792"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1524797">.</span><span class="ident" id="1524798">IP</span>&nbsp;<span class="op" id="1524801">==</span>&nbsp;<span class="ident" id="1524804">nil</span>&nbsp;<span class="op" id="1524808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524812">return</span>&nbsp;<span class="ident" id="1524819">nil</span><span class="op" id="1524822">,</span>&nbsp;<span class="op" id="1524824">&amp;</span><span class="ident" id="1524825"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1524832">{</span><span class="ident" id="1524833">Op</span><span class="op" id="1524835">:</span>&nbsp;<span class="string" id="1524837">&#34;listen&#34;</span><span class="op" id="1524845">,</span>&nbsp;<span class="ident" id="1524847">Net</span><span class="op" id="1524850">:</span>&nbsp;<span class="ident" id="1524852"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1524855">,</span>&nbsp;<span class="ident" id="1524857">Addr</span><span class="op" id="1524861">:</span>&nbsp;<span class="ident" id="1524863">nil</span><span class="op" id="1524866">,</span>&nbsp;<span class="ident" id="1524868">Err</span><span class="op" id="1524871">:</span>&nbsp;<span class="ident" id="1524873"><a href="/net/net.go.html#1472020">errMissingAddress</a></span><span class="op" id="1524890">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1524893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1524896">fd</span><span class="op" id="1524898">,</span>&nbsp;<span class="ident" id="1524900">err</span>&nbsp;<span class="op" id="1524904">:=</span>&nbsp;<span class="ident" id="1524907"><a href="/net/ipsock_posix.go.html#1452753">internetSocket</a></span><span class="op" id="1524921">(</span><span class="ident" id="1524922"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1524925">,</span>&nbsp;<span class="ident" id="1524927"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1524932">,</span>&nbsp;<span class="ident" id="1524934">nil</span><span class="op" id="1524937">,</span>&nbsp;<span class="ident" id="1524939"><a href="/net/net.go.html#1473194">noDeadline</a></span><span class="op" id="1524949">,</span>&nbsp;<span class="ident" id="1524951"><a href="/net/udpsock_posix.go.html#1518224">syscall</a></span><span class="op" id="1524958">.</span><span class="ident" id="1524959">SOCK_DGRAM</span><span class="op" id="1524969">,</span>&nbsp;<span class="num" id="1524971">0</span><span class="op" id="1524972">,</span>&nbsp;<span class="string" id="1524974">&#34;listen&#34;</span><span class="op" id="1524982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1524985">if</span>&nbsp;<span class="ident" id="1524988"><a href="/net/udpsock_posix.go.html#1524900">err</a></span>&nbsp;<span class="op" id="1524992">!=</span>&nbsp;<span class="ident" id="1524995">nil</span>&nbsp;<span class="op" id="1524999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525003">return</span>&nbsp;<span class="ident" id="1525010">nil</span><span class="op" id="1525013">,</span>&nbsp;<span class="op" id="1525015">&amp;</span><span class="ident" id="1525016"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1525023">{</span><span class="ident" id="1525024">Op</span><span class="op" id="1525026">:</span>&nbsp;<span class="string" id="1525028">&#34;listen&#34;</span><span class="op" id="1525036">,</span>&nbsp;<span class="ident" id="1525038">Net</span><span class="op" id="1525041">:</span>&nbsp;<span class="ident" id="1525043"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1525046">,</span>&nbsp;<span class="ident" id="1525048">Addr</span><span class="op" id="1525052">:</span>&nbsp;<span class="ident" id="1525054"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1525059">,</span>&nbsp;<span class="ident" id="1525061">Err</span><span class="op" id="1525064">:</span>&nbsp;<span class="ident" id="1525066"><a href="/net/udpsock_posix.go.html#1524900">err</a></span><span class="op" id="1525069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525072">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1525075">c</span>&nbsp;<span class="op" id="1525077">:=</span>&nbsp;<span class="ident" id="1525080"><a href="/net/udpsock_posix.go.html#1519125">newUDPConn</a></span><span class="op" id="1525090">(</span><span class="ident" id="1525091"><a href="/net/udpsock_posix.go.html#1524896">fd</a></span><span class="op" id="1525093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525096">if</span>&nbsp;<span class="ident" id="1525099">ip4</span>&nbsp;<span class="op" id="1525103">:=</span>&nbsp;<span class="ident" id="1525106"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1525111">.</span><span class="ident" id="1525112">IP</span><span class="op" id="1525114">.</span><span class="ident" id="1525115">To4</span><span class="op" id="1525118">(</span><span class="op" id="1525119">)</span><span class="op" id="1525120">;</span>&nbsp;<span class="ident" id="1525122"><a href="/net/udpsock_posix.go.html#1525099">ip4</a></span>&nbsp;<span class="op" id="1525126">!=</span>&nbsp;<span class="ident" id="1525129">nil</span>&nbsp;<span class="op" id="1525133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525137">if</span>&nbsp;<span class="ident" id="1525140">err</span>&nbsp;<span class="op" id="1525144">:=</span>&nbsp;<span class="ident" id="1525147"><a href="/net/udpsock_posix.go.html#1525503">listenIPv4MulticastUDP</a></span><span class="op" id="1525169">(</span><span class="ident" id="1525170"><a href="/net/udpsock_posix.go.html#1525075">c</a></span><span class="op" id="1525171">,</span>&nbsp;<span class="ident" id="1525173"><a href="/net/udpsock_posix.go.html#1524573">ifi</a></span><span class="op" id="1525176">,</span>&nbsp;<span class="ident" id="1525178"><a href="/net/udpsock_posix.go.html#1525099">ip4</a></span><span class="op" id="1525181">)</span><span class="op" id="1525182">;</span>&nbsp;<span class="ident" id="1525184"><a href="/net/udpsock_posix.go.html#1525140">err</a></span>&nbsp;<span class="op" id="1525188">!=</span>&nbsp;<span class="ident" id="1525191">nil</span>&nbsp;<span class="op" id="1525195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1525200"><a href="/net/udpsock_posix.go.html#1525075">c</a></span><span class="op" id="1525201">.</span><span class="ident" id="1525202">Close</span><span class="op" id="1525207">(</span><span class="op" id="1525208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525213">return</span>&nbsp;<span class="ident" id="1525220">nil</span><span class="op" id="1525223">,</span>&nbsp;<span class="op" id="1525225">&amp;</span><span class="ident" id="1525226"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1525233">{</span><span class="ident" id="1525234">Op</span><span class="op" id="1525236">:</span>&nbsp;<span class="string" id="1525238">&#34;listen&#34;</span><span class="op" id="1525246">,</span>&nbsp;<span class="ident" id="1525248">Net</span><span class="op" id="1525251">:</span>&nbsp;<span class="ident" id="1525253"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1525256">,</span>&nbsp;<span class="ident" id="1525258">Addr</span><span class="op" id="1525262">:</span>&nbsp;<span class="op" id="1525264">&amp;</span><span class="ident" id="1525265"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1525271">{</span><span class="ident" id="1525272">IP</span><span class="op" id="1525274">:</span>&nbsp;<span class="ident" id="1525276"><a href="/net/udpsock_posix.go.html#1525099">ip4</a></span><span class="op" id="1525279">}</span><span class="op" id="1525280">,</span>&nbsp;<span class="ident" id="1525282">Err</span><span class="op" id="1525285">:</span>&nbsp;<span class="ident" id="1525287"><a href="/net/udpsock_posix.go.html#1525140">err</a></span><span class="op" id="1525290">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525297">}</span>&nbsp;<span class="keyword" id="1525299">else</span>&nbsp;<span class="op" id="1525304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525308">if</span>&nbsp;<span class="ident" id="1525311">err</span>&nbsp;<span class="op" id="1525315">:=</span>&nbsp;<span class="ident" id="1525318"><a href="/net/udpsock_posix.go.html#1525839">listenIPv6MulticastUDP</a></span><span class="op" id="1525340">(</span><span class="ident" id="1525341"><a href="/net/udpsock_posix.go.html#1525075">c</a></span><span class="op" id="1525342">,</span>&nbsp;<span class="ident" id="1525344"><a href="/net/udpsock_posix.go.html#1524573">ifi</a></span><span class="op" id="1525347">,</span>&nbsp;<span class="ident" id="1525349"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1525354">.</span><span class="ident" id="1525355">IP</span><span class="op" id="1525357">)</span><span class="op" id="1525358">;</span>&nbsp;<span class="ident" id="1525360"><a href="/net/udpsock_posix.go.html#1525311">err</a></span>&nbsp;<span class="op" id="1525364">!=</span>&nbsp;<span class="ident" id="1525367">nil</span>&nbsp;<span class="op" id="1525371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1525376"><a href="/net/udpsock_posix.go.html#1525075">c</a></span><span class="op" id="1525377">.</span><span class="ident" id="1525378">Close</span><span class="op" id="1525383">(</span><span class="op" id="1525384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525389">return</span>&nbsp;<span class="ident" id="1525396">nil</span><span class="op" id="1525399">,</span>&nbsp;<span class="op" id="1525401">&amp;</span><span class="ident" id="1525402"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1525409">{</span><span class="ident" id="1525410">Op</span><span class="op" id="1525412">:</span>&nbsp;<span class="string" id="1525414">&#34;listen&#34;</span><span class="op" id="1525422">,</span>&nbsp;<span class="ident" id="1525424">Net</span><span class="op" id="1525427">:</span>&nbsp;<span class="ident" id="1525429"><a href="/net/udpsock_posix.go.html#1524561">net</a></span><span class="op" id="1525432">,</span>&nbsp;<span class="ident" id="1525434">Addr</span><span class="op" id="1525438">:</span>&nbsp;<span class="op" id="1525440">&amp;</span><span class="ident" id="1525441"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1525447">{</span><span class="ident" id="1525448">IP</span><span class="op" id="1525450">:</span>&nbsp;<span class="ident" id="1525452"><a href="/net/udpsock_posix.go.html#1524589">gaddr</a></span><span class="op" id="1525457">.</span><span class="ident" id="1525458">IP</span><span class="op" id="1525460">}</span><span class="op" id="1525461">,</span>&nbsp;<span class="ident" id="1525463">Err</span><span class="op" id="1525466">:</span>&nbsp;<span class="ident" id="1525468"><a href="/net/udpsock_posix.go.html#1525311">err</a></span><span class="op" id="1525471">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525481">return</span>&nbsp;<span class="ident" id="1525488"><a href="/net/udpsock_posix.go.html#1525075">c</a></span><span class="op" id="1525489">,</span>&nbsp;<span class="ident" id="1525491">nil</span><br>
<span class="lineno"></span><span class="op" id="1525495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="1525498">func</span>&nbsp;<span class="ident" id="1525503">listenIPv4MulticastUDP</span><span class="op" id="1525525">(</span><span class="ident" id="1525526">c</span>&nbsp;<span class="op" id="1525528">*</span><span class="ident" id="1525529"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1525536">,</span>&nbsp;<span class="ident" id="1525538">ifi</span>&nbsp;<span class="op" id="1525542">*</span><span class="ident" id="1525543"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1525552">,</span>&nbsp;<span class="ident" id="1525554">ip</span>&nbsp;<span class="ident" id="1525557"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="1525559">)</span>&nbsp;<span class="builtintype" id="1525561">error</span>&nbsp;<span class="op" id="1525567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525570">if</span>&nbsp;<span class="ident" id="1525573"><a href="/net/udpsock_posix.go.html#1525538">ifi</a></span>&nbsp;<span class="op" id="1525577">!=</span>&nbsp;<span class="ident" id="1525580">nil</span>&nbsp;<span class="op" id="1525584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525588">if</span>&nbsp;<span class="ident" id="1525591">err</span>&nbsp;<span class="op" id="1525595">:=</span>&nbsp;<span class="ident" id="1525598"><a href="/net/sockoptip_linux.go.html#1501882">setIPv4MulticastInterface</a></span><span class="op" id="1525623">(</span><span class="ident" id="1525624"><a href="/net/udpsock_posix.go.html#1525526">c</a></span><span class="op" id="1525625">.</span><span class="ident" id="1525626">fd</span><span class="op" id="1525628">,</span>&nbsp;<span class="ident" id="1525630"><a href="/net/udpsock_posix.go.html#1525538">ifi</a></span><span class="op" id="1525633">)</span><span class="op" id="1525634">;</span>&nbsp;<span class="ident" id="1525636"><a href="/net/udpsock_posix.go.html#1525591">err</a></span>&nbsp;<span class="op" id="1525640">!=</span>&nbsp;<span class="ident" id="1525643">nil</span>&nbsp;<span class="op" id="1525647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525652">return</span>&nbsp;<span class="ident" id="1525659"><a href="/net/udpsock_posix.go.html#1525591">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525665">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525671">if</span>&nbsp;<span class="ident" id="1525674">err</span>&nbsp;<span class="op" id="1525678">:=</span>&nbsp;<span class="ident" id="1525681"><a href="/net/sockoptip_linux.go.html#1502246">setIPv4MulticastLoopback</a></span><span class="op" id="1525705">(</span><span class="ident" id="1525706"><a href="/net/udpsock_posix.go.html#1525526">c</a></span><span class="op" id="1525707">.</span><span class="ident" id="1525708">fd</span><span class="op" id="1525710">,</span>&nbsp;<span class="builtintype" id="1525712">false</span><span class="op" id="1525717">)</span><span class="op" id="1525718">;</span>&nbsp;<span class="ident" id="1525720"><a href="/net/udpsock_posix.go.html#1525674">err</a></span>&nbsp;<span class="op" id="1525724">!=</span>&nbsp;<span class="ident" id="1525727">nil</span>&nbsp;<span class="op" id="1525731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525735">return</span>&nbsp;<span class="ident" id="1525742"><a href="/net/udpsock_posix.go.html#1525674">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525750">if</span>&nbsp;<span class="ident" id="1525753">err</span>&nbsp;<span class="op" id="1525757">:=</span>&nbsp;<span class="ident" id="1525760"><a href="/net/sockoptip_posix.go.html#1502779">joinIPv4Group</a></span><span class="op" id="1525773">(</span><span class="ident" id="1525774"><a href="/net/udpsock_posix.go.html#1525526">c</a></span><span class="op" id="1525775">.</span><span class="ident" id="1525776">fd</span><span class="op" id="1525778">,</span>&nbsp;<span class="ident" id="1525780"><a href="/net/udpsock_posix.go.html#1525538">ifi</a></span><span class="op" id="1525783">,</span>&nbsp;<span class="ident" id="1525785"><a href="/net/udpsock_posix.go.html#1525554">ip</a></span><span class="op" id="1525787">)</span><span class="op" id="1525788">;</span>&nbsp;<span class="ident" id="1525790"><a href="/net/udpsock_posix.go.html#1525753">err</a></span>&nbsp;<span class="op" id="1525794">!=</span>&nbsp;<span class="ident" id="1525797">nil</span>&nbsp;<span class="op" id="1525801">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525805">return</span>&nbsp;<span class="ident" id="1525812"><a href="/net/udpsock_posix.go.html#1525753">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1525817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525820">return</span>&nbsp;<span class="ident" id="1525827">nil</span><br>
<span class="lineno"></span><span class="op" id="1525831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1525834">func</span>&nbsp;<span class="ident" id="1525839">listenIPv6MulticastUDP</span><span class="op" id="1525861">(</span><span class="ident" id="1525862">c</span>&nbsp;<span class="op" id="1525864">*</span><span class="ident" id="1525865"><a href="/net/udpsock_posix.go.html#1519094">UDPConn</a></span><span class="op" id="1525872">,</span>&nbsp;<span class="ident" id="1525874">ifi</span>&nbsp;<span class="op" id="1525878">*</span><span class="ident" id="1525879"><a href="/net/interface.go.html#1406383">Interface</a></span><span class="op" id="1525888">,</span>&nbsp;<span class="ident" id="1525890">ip</span>&nbsp;<span class="ident" id="1525893"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="1525895">)</span>&nbsp;<span class="builtintype" id="1525897">error</span>&nbsp;<span class="op" id="1525903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525906">if</span>&nbsp;<span class="ident" id="1525909"><a href="/net/udpsock_posix.go.html#1525874">ifi</a></span>&nbsp;<span class="op" id="1525913">!=</span>&nbsp;<span class="ident" id="1525916">nil</span>&nbsp;<span class="op" id="1525920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525924">if</span>&nbsp;<span class="ident" id="1525927">err</span>&nbsp;<span class="op" id="1525931">:=</span>&nbsp;<span class="ident" id="1525934"><a href="/net/sockoptip_posix.go.html#1503193">setIPv6MulticastInterface</a></span><span class="op" id="1525959">(</span><span class="ident" id="1525960"><a href="/net/udpsock_posix.go.html#1525862">c</a></span><span class="op" id="1525961">.</span><span class="ident" id="1525962">fd</span><span class="op" id="1525964">,</span>&nbsp;<span class="ident" id="1525966"><a href="/net/udpsock_posix.go.html#1525874">ifi</a></span><span class="op" id="1525969">)</span><span class="op" id="1525970">;</span>&nbsp;<span class="ident" id="1525972"><a href="/net/udpsock_posix.go.html#1525927">err</a></span>&nbsp;<span class="op" id="1525976">!=</span>&nbsp;<span class="ident" id="1525979">nil</span>&nbsp;<span class="op" id="1525983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1525988">return</span>&nbsp;<span class="ident" id="1525995"><a href="/net/udpsock_posix.go.html#1525927">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1526001">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1526004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526007">if</span>&nbsp;<span class="ident" id="1526010">err</span>&nbsp;<span class="op" id="1526014">:=</span>&nbsp;<span class="ident" id="1526017"><a href="/net/sockoptip_posix.go.html#1503507">setIPv6MulticastLoopback</a></span><span class="op" id="1526041">(</span><span class="ident" id="1526042"><a href="/net/udpsock_posix.go.html#1525862">c</a></span><span class="op" id="1526043">.</span><span class="ident" id="1526044">fd</span><span class="op" id="1526046">,</span>&nbsp;<span class="builtintype" id="1526048">false</span><span class="op" id="1526053">)</span><span class="op" id="1526054">;</span>&nbsp;<span class="ident" id="1526056"><a href="/net/udpsock_posix.go.html#1526010">err</a></span>&nbsp;<span class="op" id="1526060">!=</span>&nbsp;<span class="ident" id="1526063">nil</span>&nbsp;<span class="op" id="1526067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526071">return</span>&nbsp;<span class="ident" id="1526078"><a href="/net/udpsock_posix.go.html#1526010">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1526083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526086">if</span>&nbsp;<span class="ident" id="1526089">err</span>&nbsp;<span class="op" id="1526093">:=</span>&nbsp;<span class="ident" id="1526096"><a href="/net/sockoptip_posix.go.html#1503776">joinIPv6Group</a></span><span class="op" id="1526109">(</span><span class="ident" id="1526110"><a href="/net/udpsock_posix.go.html#1525862">c</a></span><span class="op" id="1526111">.</span><span class="ident" id="1526112">fd</span><span class="op" id="1526114">,</span>&nbsp;<span class="ident" id="1526116"><a href="/net/udpsock_posix.go.html#1525874">ifi</a></span><span class="op" id="1526119">,</span>&nbsp;<span class="ident" id="1526121"><a href="/net/udpsock_posix.go.html#1525890">ip</a></span><span class="op" id="1526123">)</span><span class="op" id="1526124">;</span>&nbsp;<span class="ident" id="1526126"><a href="/net/udpsock_posix.go.html#1526089">err</a></span>&nbsp;<span class="op" id="1526130">!=</span>&nbsp;<span class="ident" id="1526133">nil</span>&nbsp;<span class="op" id="1526137">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526141">return</span>&nbsp;<span class="ident" id="1526148"><a href="/net/udpsock_posix.go.html#1526089">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1526153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1526156">return</span>&nbsp;<span class="ident" id="1526163">nil</span><br>
<span class="lineno"></span><span class="op" id="1526167">}</span>
</div>
</body>
</html>
