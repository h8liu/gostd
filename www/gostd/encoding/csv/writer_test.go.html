<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6680634">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6680689">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6680743">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6680794">package</span>&nbsp;<span class="ident" id="6680802">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6680807">import</span>&nbsp;<span class="op" id="6680814">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6680817">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6680826">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6680836">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6680846">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6680849">var</span>&nbsp;<span class="ident" id="6680853">writeTests</span>&nbsp;<span class="op" id="6680864">=</span>&nbsp;<span class="op" id="6680866">[</span><span class="op" id="6680867">]</span><span class="keyword" id="6680868">struct</span>&nbsp;<span class="op" id="6680875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6680878">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6680886">[</span><span class="op" id="6680887">]</span><span class="op" id="6680888">[</span><span class="op" id="6680889">]</span><span class="builtintype" id="6680890">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6680898">Output</span>&nbsp;&nbsp;<span class="builtintype" id="6680906">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6680914">UseCRLF</span>&nbsp;<span class="builtintype" id="6680922">bool</span><br>
<span class="lineno"></span><span class="op" id="6680927">}</span><span class="op" id="6680928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6680931">{</span><span class="ident" id="6680932">Input</span><span class="op" id="6680937">:</span>&nbsp;<span class="op" id="6680939">[</span><span class="op" id="6680940">]</span><span class="op" id="6680941">[</span><span class="op" id="6680942">]</span><span class="builtintype" id="6680943">string</span><span class="op" id="6680949">{</span><span class="op" id="6680950">{</span><span class="string" id="6680951">&#34;abc&#34;</span><span class="op" id="6680956">}</span><span class="op" id="6680957">}</span><span class="op" id="6680958">,</span>&nbsp;<span class="ident" id="6680960">Output</span><span class="op" id="6680966">:</span>&nbsp;<span class="string" id="6680968">&#34;abc\n&#34;</span><span class="op" id="6680975">}</span><span class="op" id="6680976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6680979">{</span><span class="ident" id="6680980">Input</span><span class="op" id="6680985">:</span>&nbsp;<span class="op" id="6680987">[</span><span class="op" id="6680988">]</span><span class="op" id="6680989">[</span><span class="op" id="6680990">]</span><span class="builtintype" id="6680991">string</span><span class="op" id="6680997">{</span><span class="op" id="6680998">{</span><span class="string" id="6680999">&#34;abc&#34;</span><span class="op" id="6681004">}</span><span class="op" id="6681005">}</span><span class="op" id="6681006">,</span>&nbsp;<span class="ident" id="6681008">Output</span><span class="op" id="6681014">:</span>&nbsp;<span class="string" id="6681016">&#34;abc\r\n&#34;</span><span class="op" id="6681025">,</span>&nbsp;<span class="ident" id="6681027">UseCRLF</span><span class="op" id="6681034">:</span>&nbsp;<span class="builtintype" id="6681036">true</span><span class="op" id="6681040">}</span><span class="op" id="6681041">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681044">{</span><span class="ident" id="6681045">Input</span><span class="op" id="6681050">:</span>&nbsp;<span class="op" id="6681052">[</span><span class="op" id="6681053">]</span><span class="op" id="6681054">[</span><span class="op" id="6681055">]</span><span class="builtintype" id="6681056">string</span><span class="op" id="6681062">{</span><span class="op" id="6681063">{</span><span class="string" id="6681064">`&#34;abc&#34;`</span><span class="op" id="6681071">}</span><span class="op" id="6681072">}</span><span class="op" id="6681073">,</span>&nbsp;<span class="ident" id="6681075">Output</span><span class="op" id="6681081">:</span>&nbsp;<span class="string" id="6681083">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6681095">+</span>&nbsp;<span class="string" id="6681097">&#34;\n&#34;</span><span class="op" id="6681101">}</span><span class="op" id="6681102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681105">{</span><span class="ident" id="6681106">Input</span><span class="op" id="6681111">:</span>&nbsp;<span class="op" id="6681113">[</span><span class="op" id="6681114">]</span><span class="op" id="6681115">[</span><span class="op" id="6681116">]</span><span class="builtintype" id="6681117">string</span><span class="op" id="6681123">{</span><span class="op" id="6681124">{</span><span class="string" id="6681125">`a&#34;b`</span><span class="op" id="6681130">}</span><span class="op" id="6681131">}</span><span class="op" id="6681132">,</span>&nbsp;<span class="ident" id="6681134">Output</span><span class="op" id="6681140">:</span>&nbsp;<span class="string" id="6681142">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="6681151">+</span>&nbsp;<span class="string" id="6681153">&#34;\n&#34;</span><span class="op" id="6681157">}</span><span class="op" id="6681158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681161">{</span><span class="ident" id="6681162">Input</span><span class="op" id="6681167">:</span>&nbsp;<span class="op" id="6681169">[</span><span class="op" id="6681170">]</span><span class="op" id="6681171">[</span><span class="op" id="6681172">]</span><span class="builtintype" id="6681173">string</span><span class="op" id="6681179">{</span><span class="op" id="6681180">{</span><span class="string" id="6681181">`&#34;a&#34;b&#34;`</span><span class="op" id="6681188">}</span><span class="op" id="6681189">}</span><span class="op" id="6681190">,</span>&nbsp;<span class="ident" id="6681192">Output</span><span class="op" id="6681198">:</span>&nbsp;<span class="string" id="6681200">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6681213">+</span>&nbsp;<span class="string" id="6681215">&#34;\n&#34;</span><span class="op" id="6681219">}</span><span class="op" id="6681220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681223">{</span><span class="ident" id="6681224">Input</span><span class="op" id="6681229">:</span>&nbsp;<span class="op" id="6681231">[</span><span class="op" id="6681232">]</span><span class="op" id="6681233">[</span><span class="op" id="6681234">]</span><span class="builtintype" id="6681235">string</span><span class="op" id="6681241">{</span><span class="op" id="6681242">{</span><span class="string" id="6681243">&#34;&nbsp;abc&#34;</span><span class="op" id="6681249">}</span><span class="op" id="6681250">}</span><span class="op" id="6681251">,</span>&nbsp;<span class="ident" id="6681253">Output</span><span class="op" id="6681259">:</span>&nbsp;<span class="string" id="6681261">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="6681270">+</span>&nbsp;<span class="string" id="6681272">&#34;\n&#34;</span><span class="op" id="6681276">}</span><span class="op" id="6681277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681280">{</span><span class="ident" id="6681281">Input</span><span class="op" id="6681286">:</span>&nbsp;<span class="op" id="6681288">[</span><span class="op" id="6681289">]</span><span class="op" id="6681290">[</span><span class="op" id="6681291">]</span><span class="builtintype" id="6681292">string</span><span class="op" id="6681298">{</span><span class="op" id="6681299">{</span><span class="string" id="6681300">&#34;abc,def&#34;</span><span class="op" id="6681309">}</span><span class="op" id="6681310">}</span><span class="op" id="6681311">,</span>&nbsp;<span class="ident" id="6681313">Output</span><span class="op" id="6681319">:</span>&nbsp;<span class="string" id="6681321">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="6681333">+</span>&nbsp;<span class="string" id="6681335">&#34;\n&#34;</span><span class="op" id="6681339">}</span><span class="op" id="6681340">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681343">{</span><span class="ident" id="6681344">Input</span><span class="op" id="6681349">:</span>&nbsp;<span class="op" id="6681351">[</span><span class="op" id="6681352">]</span><span class="op" id="6681353">[</span><span class="op" id="6681354">]</span><span class="builtintype" id="6681355">string</span><span class="op" id="6681361">{</span><span class="op" id="6681362">{</span><span class="string" id="6681363">&#34;abc&#34;</span><span class="op" id="6681368">,</span>&nbsp;<span class="string" id="6681370">&#34;def&#34;</span><span class="op" id="6681375">}</span><span class="op" id="6681376">}</span><span class="op" id="6681377">,</span>&nbsp;<span class="ident" id="6681379">Output</span><span class="op" id="6681385">:</span>&nbsp;<span class="string" id="6681387">&#34;abc,def\n&#34;</span><span class="op" id="6681398">}</span><span class="op" id="6681399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681402">{</span><span class="ident" id="6681403">Input</span><span class="op" id="6681408">:</span>&nbsp;<span class="op" id="6681410">[</span><span class="op" id="6681411">]</span><span class="op" id="6681412">[</span><span class="op" id="6681413">]</span><span class="builtintype" id="6681414">string</span><span class="op" id="6681420">{</span><span class="op" id="6681421">{</span><span class="string" id="6681422">&#34;abc&#34;</span><span class="op" id="6681427">}</span><span class="op" id="6681428">,</span>&nbsp;<span class="op" id="6681430">{</span><span class="string" id="6681431">&#34;def&#34;</span><span class="op" id="6681436">}</span><span class="op" id="6681437">}</span><span class="op" id="6681438">,</span>&nbsp;<span class="ident" id="6681440">Output</span><span class="op" id="6681446">:</span>&nbsp;<span class="string" id="6681448">&#34;abc\ndef\n&#34;</span><span class="op" id="6681460">}</span><span class="op" id="6681461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681464">{</span><span class="ident" id="6681465">Input</span><span class="op" id="6681470">:</span>&nbsp;<span class="op" id="6681472">[</span><span class="op" id="6681473">]</span><span class="op" id="6681474">[</span><span class="op" id="6681475">]</span><span class="builtintype" id="6681476">string</span><span class="op" id="6681482">{</span><span class="op" id="6681483">{</span><span class="string" id="6681484">&#34;abc\ndef&#34;</span><span class="op" id="6681494">}</span><span class="op" id="6681495">}</span><span class="op" id="6681496">,</span>&nbsp;<span class="ident" id="6681498">Output</span><span class="op" id="6681504">:</span>&nbsp;<span class="string" id="6681506">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="6681522">}</span><span class="op" id="6681523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681526">{</span><span class="ident" id="6681527">Input</span><span class="op" id="6681532">:</span>&nbsp;<span class="op" id="6681534">[</span><span class="op" id="6681535">]</span><span class="op" id="6681536">[</span><span class="op" id="6681537">]</span><span class="builtintype" id="6681538">string</span><span class="op" id="6681544">{</span><span class="op" id="6681545">{</span><span class="string" id="6681546">&#34;abc\ndef&#34;</span><span class="op" id="6681556">}</span><span class="op" id="6681557">}</span><span class="op" id="6681558">,</span>&nbsp;<span class="ident" id="6681560">Output</span><span class="op" id="6681566">:</span>&nbsp;<span class="string" id="6681568">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="6681588">,</span>&nbsp;<span class="ident" id="6681590">UseCRLF</span><span class="op" id="6681597">:</span>&nbsp;<span class="builtintype" id="6681599">true</span><span class="op" id="6681603">}</span><span class="op" id="6681604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681607">{</span><span class="ident" id="6681608">Input</span><span class="op" id="6681613">:</span>&nbsp;<span class="op" id="6681615">[</span><span class="op" id="6681616">]</span><span class="op" id="6681617">[</span><span class="op" id="6681618">]</span><span class="builtintype" id="6681619">string</span><span class="op" id="6681625">{</span><span class="op" id="6681626">{</span><span class="string" id="6681627">&#34;abc\rdef&#34;</span><span class="op" id="6681637">}</span><span class="op" id="6681638">}</span><span class="op" id="6681639">,</span>&nbsp;<span class="ident" id="6681641">Output</span><span class="op" id="6681647">:</span>&nbsp;<span class="string" id="6681649">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="6681665">,</span>&nbsp;<span class="ident" id="6681667">UseCRLF</span><span class="op" id="6681674">:</span>&nbsp;<span class="builtintype" id="6681676">true</span><span class="op" id="6681680">}</span><span class="op" id="6681681">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681684">{</span><span class="ident" id="6681685">Input</span><span class="op" id="6681690">:</span>&nbsp;<span class="op" id="6681692">[</span><span class="op" id="6681693">]</span><span class="op" id="6681694">[</span><span class="op" id="6681695">]</span><span class="builtintype" id="6681696">string</span><span class="op" id="6681702">{</span><span class="op" id="6681703">{</span><span class="string" id="6681704">&#34;abc\rdef&#34;</span><span class="op" id="6681714">}</span><span class="op" id="6681715">}</span><span class="op" id="6681716">,</span>&nbsp;<span class="ident" id="6681718">Output</span><span class="op" id="6681724">:</span>&nbsp;<span class="string" id="6681726">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="6681742">,</span>&nbsp;<span class="ident" id="6681744">UseCRLF</span><span class="op" id="6681751">:</span>&nbsp;<span class="builtintype" id="6681753">false</span><span class="op" id="6681758">}</span><span class="op" id="6681759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681762">{</span><span class="ident" id="6681763">Input</span><span class="op" id="6681768">:</span>&nbsp;<span class="op" id="6681770">[</span><span class="op" id="6681771">]</span><span class="op" id="6681772">[</span><span class="op" id="6681773">]</span><span class="builtintype" id="6681774">string</span><span class="op" id="6681780">{</span><span class="op" id="6681781">{</span><span class="string" id="6681782">&#34;&#34;</span><span class="op" id="6681784">}</span><span class="op" id="6681785">}</span><span class="op" id="6681786">,</span>&nbsp;<span class="ident" id="6681788">Output</span><span class="op" id="6681794">:</span>&nbsp;<span class="string" id="6681796">&#34;\n&#34;</span><span class="op" id="6681800">}</span><span class="op" id="6681801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681804">{</span><span class="ident" id="6681805">Input</span><span class="op" id="6681810">:</span>&nbsp;<span class="op" id="6681812">[</span><span class="op" id="6681813">]</span><span class="op" id="6681814">[</span><span class="op" id="6681815">]</span><span class="builtintype" id="6681816">string</span><span class="op" id="6681822">{</span><span class="op" id="6681823">{</span><span class="string" id="6681824">&#34;&#34;</span><span class="op" id="6681826">,</span>&nbsp;<span class="string" id="6681828">&#34;&#34;</span><span class="op" id="6681830">}</span><span class="op" id="6681831">}</span><span class="op" id="6681832">,</span>&nbsp;<span class="ident" id="6681834">Output</span><span class="op" id="6681840">:</span>&nbsp;<span class="string" id="6681842">&#34;,\n&#34;</span><span class="op" id="6681847">}</span><span class="op" id="6681848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681851">{</span><span class="ident" id="6681852">Input</span><span class="op" id="6681857">:</span>&nbsp;<span class="op" id="6681859">[</span><span class="op" id="6681860">]</span><span class="op" id="6681861">[</span><span class="op" id="6681862">]</span><span class="builtintype" id="6681863">string</span><span class="op" id="6681869">{</span><span class="op" id="6681870">{</span><span class="string" id="6681871">&#34;&#34;</span><span class="op" id="6681873">,</span>&nbsp;<span class="string" id="6681875">&#34;&#34;</span><span class="op" id="6681877">,</span>&nbsp;<span class="string" id="6681879">&#34;&#34;</span><span class="op" id="6681881">}</span><span class="op" id="6681882">}</span><span class="op" id="6681883">,</span>&nbsp;<span class="ident" id="6681885">Output</span><span class="op" id="6681891">:</span>&nbsp;<span class="string" id="6681893">&#34;,,\n&#34;</span><span class="op" id="6681899">}</span><span class="op" id="6681900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681903">{</span><span class="ident" id="6681904">Input</span><span class="op" id="6681909">:</span>&nbsp;<span class="op" id="6681911">[</span><span class="op" id="6681912">]</span><span class="op" id="6681913">[</span><span class="op" id="6681914">]</span><span class="builtintype" id="6681915">string</span><span class="op" id="6681921">{</span><span class="op" id="6681922">{</span><span class="string" id="6681923">&#34;&#34;</span><span class="op" id="6681925">,</span>&nbsp;<span class="string" id="6681927">&#34;&#34;</span><span class="op" id="6681929">,</span>&nbsp;<span class="string" id="6681931">&#34;a&#34;</span><span class="op" id="6681934">}</span><span class="op" id="6681935">}</span><span class="op" id="6681936">,</span>&nbsp;<span class="ident" id="6681938">Output</span><span class="op" id="6681944">:</span>&nbsp;<span class="string" id="6681946">&#34;,,a\n&#34;</span><span class="op" id="6681953">}</span><span class="op" id="6681954">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6681957">{</span><span class="ident" id="6681958">Input</span><span class="op" id="6681963">:</span>&nbsp;<span class="op" id="6681965">[</span><span class="op" id="6681966">]</span><span class="op" id="6681967">[</span><span class="op" id="6681968">]</span><span class="builtintype" id="6681969">string</span><span class="op" id="6681975">{</span><span class="op" id="6681976">{</span><span class="string" id="6681977">&#34;&#34;</span><span class="op" id="6681979">,</span>&nbsp;<span class="string" id="6681981">&#34;a&#34;</span><span class="op" id="6681984">,</span>&nbsp;<span class="string" id="6681986">&#34;&#34;</span><span class="op" id="6681988">}</span><span class="op" id="6681989">}</span><span class="op" id="6681990">,</span>&nbsp;<span class="ident" id="6681992">Output</span><span class="op" id="6681998">:</span>&nbsp;<span class="string" id="6682000">&#34;,a,\n&#34;</span><span class="op" id="6682007">}</span><span class="op" id="6682008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682011">{</span><span class="ident" id="6682012">Input</span><span class="op" id="6682017">:</span>&nbsp;<span class="op" id="6682019">[</span><span class="op" id="6682020">]</span><span class="op" id="6682021">[</span><span class="op" id="6682022">]</span><span class="builtintype" id="6682023">string</span><span class="op" id="6682029">{</span><span class="op" id="6682030">{</span><span class="string" id="6682031">&#34;&#34;</span><span class="op" id="6682033">,</span>&nbsp;<span class="string" id="6682035">&#34;a&#34;</span><span class="op" id="6682038">,</span>&nbsp;<span class="string" id="6682040">&#34;a&#34;</span><span class="op" id="6682043">}</span><span class="op" id="6682044">}</span><span class="op" id="6682045">,</span>&nbsp;<span class="ident" id="6682047">Output</span><span class="op" id="6682053">:</span>&nbsp;<span class="string" id="6682055">&#34;,a,a\n&#34;</span><span class="op" id="6682063">}</span><span class="op" id="6682064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682067">{</span><span class="ident" id="6682068">Input</span><span class="op" id="6682073">:</span>&nbsp;<span class="op" id="6682075">[</span><span class="op" id="6682076">]</span><span class="op" id="6682077">[</span><span class="op" id="6682078">]</span><span class="builtintype" id="6682079">string</span><span class="op" id="6682085">{</span><span class="op" id="6682086">{</span><span class="string" id="6682087">&#34;a&#34;</span><span class="op" id="6682090">,</span>&nbsp;<span class="string" id="6682092">&#34;&#34;</span><span class="op" id="6682094">,</span>&nbsp;<span class="string" id="6682096">&#34;&#34;</span><span class="op" id="6682098">}</span><span class="op" id="6682099">}</span><span class="op" id="6682100">,</span>&nbsp;<span class="ident" id="6682102">Output</span><span class="op" id="6682108">:</span>&nbsp;<span class="string" id="6682110">&#34;a,,\n&#34;</span><span class="op" id="6682117">}</span><span class="op" id="6682118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682121">{</span><span class="ident" id="6682122">Input</span><span class="op" id="6682127">:</span>&nbsp;<span class="op" id="6682129">[</span><span class="op" id="6682130">]</span><span class="op" id="6682131">[</span><span class="op" id="6682132">]</span><span class="builtintype" id="6682133">string</span><span class="op" id="6682139">{</span><span class="op" id="6682140">{</span><span class="string" id="6682141">&#34;a&#34;</span><span class="op" id="6682144">,</span>&nbsp;<span class="string" id="6682146">&#34;&#34;</span><span class="op" id="6682148">,</span>&nbsp;<span class="string" id="6682150">&#34;a&#34;</span><span class="op" id="6682153">}</span><span class="op" id="6682154">}</span><span class="op" id="6682155">,</span>&nbsp;<span class="ident" id="6682157">Output</span><span class="op" id="6682163">:</span>&nbsp;<span class="string" id="6682165">&#34;a,,a\n&#34;</span><span class="op" id="6682173">}</span><span class="op" id="6682174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682177">{</span><span class="ident" id="6682178">Input</span><span class="op" id="6682183">:</span>&nbsp;<span class="op" id="6682185">[</span><span class="op" id="6682186">]</span><span class="op" id="6682187">[</span><span class="op" id="6682188">]</span><span class="builtintype" id="6682189">string</span><span class="op" id="6682195">{</span><span class="op" id="6682196">{</span><span class="string" id="6682197">&#34;a&#34;</span><span class="op" id="6682200">,</span>&nbsp;<span class="string" id="6682202">&#34;a&#34;</span><span class="op" id="6682205">,</span>&nbsp;<span class="string" id="6682207">&#34;&#34;</span><span class="op" id="6682209">}</span><span class="op" id="6682210">}</span><span class="op" id="6682211">,</span>&nbsp;<span class="ident" id="6682213">Output</span><span class="op" id="6682219">:</span>&nbsp;<span class="string" id="6682221">&#34;a,a,\n&#34;</span><span class="op" id="6682229">}</span><span class="op" id="6682230">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682233">{</span><span class="ident" id="6682234">Input</span><span class="op" id="6682239">:</span>&nbsp;<span class="op" id="6682241">[</span><span class="op" id="6682242">]</span><span class="op" id="6682243">[</span><span class="op" id="6682244">]</span><span class="builtintype" id="6682245">string</span><span class="op" id="6682251">{</span><span class="op" id="6682252">{</span><span class="string" id="6682253">&#34;a&#34;</span><span class="op" id="6682256">,</span>&nbsp;<span class="string" id="6682258">&#34;a&#34;</span><span class="op" id="6682261">,</span>&nbsp;<span class="string" id="6682263">&#34;a&#34;</span><span class="op" id="6682266">}</span><span class="op" id="6682267">}</span><span class="op" id="6682268">,</span>&nbsp;<span class="ident" id="6682270">Output</span><span class="op" id="6682276">:</span>&nbsp;<span class="string" id="6682278">&#34;a,a,a\n&#34;</span><span class="op" id="6682287">}</span><span class="op" id="6682288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682291">{</span><span class="ident" id="6682292">Input</span><span class="op" id="6682297">:</span>&nbsp;<span class="op" id="6682299">[</span><span class="op" id="6682300">]</span><span class="op" id="6682301">[</span><span class="op" id="6682302">]</span><span class="builtintype" id="6682303">string</span><span class="op" id="6682309">{</span><span class="op" id="6682310">{</span><span class="string" id="6682311">`\.`</span><span class="op" id="6682315">}</span><span class="op" id="6682316">}</span><span class="op" id="6682317">,</span>&nbsp;<span class="ident" id="6682319">Output</span><span class="op" id="6682325">:</span>&nbsp;<span class="string" id="6682327">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="6682338">}</span><span class="op" id="6682339">,</span><br>
<span class="lineno"></span><span class="op" id="6682341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6682344">func</span>&nbsp;<span class="ident" id="6682349">TestWrite</span><span class="op" id="6682358">(</span><span class="ident" id="6682359">t</span>&nbsp;<span class="op" id="6682361">*</span><span class="ident" id="6682362">testing</span><span class="op" id="6682369">.</span><span class="ident" id="6682370">T</span><span class="op" id="6682371">)</span>&nbsp;<span class="op" id="6682373">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6682376">for</span>&nbsp;<span class="ident" id="6682380">n</span><span class="op" id="6682381">,</span>&nbsp;<span class="ident" id="6682383">tt</span>&nbsp;<span class="op" id="6682386">:=</span>&nbsp;<span class="keyword" id="6682389">range</span>&nbsp;<span class="ident" id="6682395">writeTests</span>&nbsp;<span class="op" id="6682406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682410">b</span>&nbsp;<span class="op" id="6682412">:=</span>&nbsp;<span class="op" id="6682415">&amp;</span><span class="ident" id="6682416">bytes</span><span class="op" id="6682421">.</span><span class="ident" id="6682422">Buffer</span><span class="op" id="6682428">{</span><span class="op" id="6682429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682433">f</span>&nbsp;<span class="op" id="6682435">:=</span>&nbsp;<span class="ident" id="6682438">NewWriter</span><span class="op" id="6682447">(</span><span class="ident" id="6682448">b</span><span class="op" id="6682449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682453">f</span><span class="op" id="6682454">.</span><span class="ident" id="6682455">UseCRLF</span>&nbsp;<span class="op" id="6682463">=</span>&nbsp;<span class="ident" id="6682465">tt</span><span class="op" id="6682467">.</span><span class="ident" id="6682468">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682478">err</span>&nbsp;<span class="op" id="6682482">:=</span>&nbsp;<span class="ident" id="6682485">f</span><span class="op" id="6682486">.</span><span class="ident" id="6682487">WriteAll</span><span class="op" id="6682495">(</span><span class="ident" id="6682496">tt</span><span class="op" id="6682498">.</span><span class="ident" id="6682499">Input</span><span class="op" id="6682504">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6682508">if</span>&nbsp;<span class="ident" id="6682511">err</span>&nbsp;<span class="op" id="6682515">!=</span>&nbsp;<span class="ident" id="6682518">nil</span>&nbsp;<span class="op" id="6682522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682527">t</span><span class="op" id="6682528">.</span><span class="ident" id="6682529">Errorf</span><span class="op" id="6682535">(</span><span class="string" id="6682536">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6682560">,</span>&nbsp;<span class="ident" id="6682562">err</span><span class="op" id="6682565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682573">out</span>&nbsp;<span class="op" id="6682577">:=</span>&nbsp;<span class="ident" id="6682580">b</span><span class="op" id="6682581">.</span><span class="ident" id="6682582">String</span><span class="op" id="6682588">(</span><span class="op" id="6682589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6682593">if</span>&nbsp;<span class="ident" id="6682596">out</span>&nbsp;<span class="op" id="6682600">!=</span>&nbsp;<span class="ident" id="6682603">tt</span><span class="op" id="6682605">.</span><span class="ident" id="6682606">Output</span>&nbsp;<span class="op" id="6682613">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682618">t</span><span class="op" id="6682619">.</span><span class="ident" id="6682620">Errorf</span><span class="op" id="6682626">(</span><span class="string" id="6682627">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6682648">,</span>&nbsp;<span class="ident" id="6682650">n</span><span class="op" id="6682651">,</span>&nbsp;<span class="ident" id="6682653">out</span><span class="op" id="6682656">,</span>&nbsp;<span class="ident" id="6682658">tt</span><span class="op" id="6682660">.</span><span class="ident" id="6682661">Output</span><span class="op" id="6682667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682674">}</span><br>
<span class="lineno"></span><span class="op" id="6682676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6682679">type</span>&nbsp;<span class="ident" id="6682684">errorWriter</span>&nbsp;<span class="keyword" id="6682696">struct</span><span class="op" id="6682702">{</span><span class="op" id="6682703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6682706">func</span>&nbsp;<span class="op" id="6682711">(</span><span class="ident" id="6682712">e</span>&nbsp;<span class="ident" id="6682714">errorWriter</span><span class="op" id="6682725">)</span>&nbsp;<span class="ident" id="6682727">Write</span><span class="op" id="6682732">(</span><span class="ident" id="6682733">b</span>&nbsp;<span class="op" id="6682735">[</span><span class="op" id="6682736">]</span><span class="builtintype" id="6682737">byte</span><span class="op" id="6682741">)</span>&nbsp;<span class="op" id="6682743">(</span><span class="builtintype" id="6682744">int</span><span class="op" id="6682747">,</span>&nbsp;<span class="builtintype" id="6682749">error</span><span class="op" id="6682754">)</span>&nbsp;<span class="op" id="6682756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6682759">return</span>&nbsp;<span class="num" id="6682766">0</span><span class="op" id="6682767">,</span>&nbsp;<span class="ident" id="6682769">errors</span><span class="op" id="6682775">.</span><span class="ident" id="6682776">New</span><span class="op" id="6682779">(</span><span class="string" id="6682780">&#34;Test&#34;</span><span class="op" id="6682786">)</span><br>
<span class="lineno"></span><span class="op" id="6682788">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6682791">func</span>&nbsp;<span class="ident" id="6682796">TestError</span><span class="op" id="6682805">(</span><span class="ident" id="6682806">t</span>&nbsp;<span class="op" id="6682808">*</span><span class="ident" id="6682809">testing</span><span class="op" id="6682816">.</span><span class="ident" id="6682817">T</span><span class="op" id="6682818">)</span>&nbsp;<span class="op" id="6682820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682823">b</span>&nbsp;<span class="op" id="6682825">:=</span>&nbsp;<span class="op" id="6682828">&amp;</span><span class="ident" id="6682829">bytes</span><span class="op" id="6682834">.</span><span class="ident" id="6682835">Buffer</span><span class="op" id="6682841">{</span><span class="op" id="6682842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682845">f</span>&nbsp;<span class="op" id="6682847">:=</span>&nbsp;<span class="ident" id="6682850">NewWriter</span><span class="op" id="6682859">(</span><span class="ident" id="6682860">b</span><span class="op" id="6682861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682864">f</span><span class="op" id="6682865">.</span><span class="ident" id="6682866">Write</span><span class="op" id="6682871">(</span><span class="op" id="6682872">[</span><span class="op" id="6682873">]</span><span class="builtintype" id="6682874">string</span><span class="op" id="6682880">{</span><span class="string" id="6682881">&#34;abc&#34;</span><span class="op" id="6682886">}</span><span class="op" id="6682887">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682890">f</span><span class="op" id="6682891">.</span><span class="ident" id="6682892">Flush</span><span class="op" id="6682897">(</span><span class="op" id="6682898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682901">err</span>&nbsp;<span class="op" id="6682905">:=</span>&nbsp;<span class="ident" id="6682908">f</span><span class="op" id="6682909">.</span><span class="ident" id="6682910">Error</span><span class="op" id="6682915">(</span><span class="op" id="6682916">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6682920">if</span>&nbsp;<span class="ident" id="6682923">err</span>&nbsp;<span class="op" id="6682927">!=</span>&nbsp;<span class="ident" id="6682930">nil</span>&nbsp;<span class="op" id="6682934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682938">t</span><span class="op" id="6682939">.</span><span class="ident" id="6682940">Errorf</span><span class="op" id="6682946">(</span><span class="string" id="6682947">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6682971">,</span>&nbsp;<span class="ident" id="6682973">err</span><span class="op" id="6682976">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6682979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6682983">f</span>&nbsp;<span class="op" id="6682985">=</span>&nbsp;<span class="ident" id="6682987">NewWriter</span><span class="op" id="6682996">(</span><span class="ident" id="6682997">errorWriter</span><span class="op" id="6683008">{</span><span class="op" id="6683009">}</span><span class="op" id="6683010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6683013">f</span><span class="op" id="6683014">.</span><span class="ident" id="6683015">Write</span><span class="op" id="6683020">(</span><span class="op" id="6683021">[</span><span class="op" id="6683022">]</span><span class="builtintype" id="6683023">string</span><span class="op" id="6683029">{</span><span class="string" id="6683030">&#34;abc&#34;</span><span class="op" id="6683035">}</span><span class="op" id="6683036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6683039">f</span><span class="op" id="6683040">.</span><span class="ident" id="6683041">Flush</span><span class="op" id="6683046">(</span><span class="op" id="6683047">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6683050">err</span>&nbsp;<span class="op" id="6683054">=</span>&nbsp;<span class="ident" id="6683056">f</span><span class="op" id="6683057">.</span><span class="ident" id="6683058">Error</span><span class="op" id="6683063">(</span><span class="op" id="6683064">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6683068">if</span>&nbsp;<span class="ident" id="6683071">err</span>&nbsp;<span class="op" id="6683075">==</span>&nbsp;<span class="ident" id="6683078">nil</span>&nbsp;<span class="op" id="6683082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6683086">t</span><span class="op" id="6683087">.</span><span class="ident" id="6683088">Error</span><span class="op" id="6683093">(</span><span class="string" id="6683094">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="6683119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6683122">}</span><br>
<span class="lineno">85</span><span class="op" id="6683124">}</span>
</div>
</body>
</html>
