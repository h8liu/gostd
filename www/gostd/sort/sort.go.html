<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3173180">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3173235">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3173289">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3173340">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="3173412">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="3173428">package</span>&nbsp;<span class="ident" id="3173436">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3173442">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="3173514">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3173587">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="3173652">type</span>&nbsp;<span class="ident" id="3173657">Interface</span>&nbsp;<span class="keyword" id="3173667">interface</span>&nbsp;<span class="op" id="3173677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3173680">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3173733">Len</span><span class="op" id="3173736">(</span><span class="op" id="3173737">)</span>&nbsp;<span class="builtintype" id="3173739">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3173744">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3173786">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3173843">Less</span><span class="op" id="3173847">(</span><span class="ident" id="3173848">i</span><span class="op" id="3173849">,</span>&nbsp;<span class="ident" id="3173851">j</span>&nbsp;<span class="builtintype" id="3173853">int</span><span class="op" id="3173856">)</span>&nbsp;<span class="builtintype" id="3173858">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3173864">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3173914">Swap</span><span class="op" id="3173918">(</span><span class="ident" id="3173919">i</span><span class="op" id="3173920">,</span>&nbsp;<span class="ident" id="3173922">j</span>&nbsp;<span class="builtintype" id="3173924">int</span><span class="op" id="3173927">)</span><br>
<span class="lineno">20</span><span class="op" id="3173929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3173932">func</span>&nbsp;<span class="ident" id="3173937">min</span><span class="op" id="3173940">(</span><span class="ident" id="3173941">a</span><span class="op" id="3173942">,</span>&nbsp;<span class="ident" id="3173944">b</span>&nbsp;<span class="builtintype" id="3173946">int</span><span class="op" id="3173949">)</span>&nbsp;<span class="builtintype" id="3173951">int</span>&nbsp;<span class="op" id="3173955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3173958">if</span>&nbsp;<span class="ident" id="3173961">a</span>&nbsp;<span class="op" id="3173963">&lt;</span>&nbsp;<span class="ident" id="3173965">b</span>&nbsp;<span class="op" id="3173967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3173971">return</span>&nbsp;<span class="ident" id="3173978">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3173981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3173984">return</span>&nbsp;<span class="ident" id="3173991">b</span><br>
<span class="lineno"></span><span class="op" id="3173993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3173996">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="3174014">func</span>&nbsp;<span class="ident" id="3174019">insertionSort</span><span class="op" id="3174032">(</span><span class="ident" id="3174033">data</span>&nbsp;<span class="ident" id="3174038">Interface</span><span class="op" id="3174047">,</span>&nbsp;<span class="ident" id="3174049">a</span><span class="op" id="3174050">,</span>&nbsp;<span class="ident" id="3174052">b</span>&nbsp;<span class="builtintype" id="3174054">int</span><span class="op" id="3174057">)</span>&nbsp;<span class="op" id="3174059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174062">for</span>&nbsp;<span class="ident" id="3174066">i</span>&nbsp;<span class="op" id="3174068">:=</span>&nbsp;<span class="ident" id="3174071">a</span>&nbsp;<span class="op" id="3174073">+</span>&nbsp;<span class="num" id="3174075">1</span><span class="op" id="3174076">;</span>&nbsp;<span class="ident" id="3174078">i</span>&nbsp;<span class="op" id="3174080">&lt;</span>&nbsp;<span class="ident" id="3174082">b</span><span class="op" id="3174083">;</span>&nbsp;<span class="ident" id="3174085">i</span><span class="op" id="3174086">++</span>&nbsp;<span class="op" id="3174089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174093">for</span>&nbsp;<span class="ident" id="3174097">j</span>&nbsp;<span class="op" id="3174099">:=</span>&nbsp;<span class="ident" id="3174102">i</span><span class="op" id="3174103">;</span>&nbsp;<span class="ident" id="3174105">j</span>&nbsp;<span class="op" id="3174107">&gt;</span>&nbsp;<span class="ident" id="3174109">a</span>&nbsp;<span class="op" id="3174111">&amp;&amp;</span>&nbsp;<span class="ident" id="3174114">data</span><span class="op" id="3174118">.</span><span class="ident" id="3174119">Less</span><span class="op" id="3174123">(</span><span class="ident" id="3174124">j</span><span class="op" id="3174125">,</span>&nbsp;<span class="ident" id="3174127">j</span><span class="op" id="3174128">-</span><span class="num" id="3174129">1</span><span class="op" id="3174130">)</span><span class="op" id="3174131">;</span>&nbsp;<span class="ident" id="3174133">j</span><span class="op" id="3174134">--</span>&nbsp;<span class="op" id="3174137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174142">data</span><span class="op" id="3174146">.</span><span class="ident" id="3174147">Swap</span><span class="op" id="3174151">(</span><span class="ident" id="3174152">j</span><span class="op" id="3174153">,</span>&nbsp;<span class="ident" id="3174155">j</span><span class="op" id="3174156">-</span><span class="num" id="3174157">1</span><span class="op" id="3174158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174162">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174165">}</span><br>
<span class="lineno"></span><span class="op" id="3174167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3174170">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="3174228">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="3174298">func</span>&nbsp;<span class="ident" id="3174303">siftDown</span><span class="op" id="3174311">(</span><span class="ident" id="3174312">data</span>&nbsp;<span class="ident" id="3174317">Interface</span><span class="op" id="3174326">,</span>&nbsp;<span class="ident" id="3174328">lo</span><span class="op" id="3174330">,</span>&nbsp;<span class="ident" id="3174332">hi</span><span class="op" id="3174334">,</span>&nbsp;<span class="ident" id="3174336">first</span>&nbsp;<span class="builtintype" id="3174342">int</span><span class="op" id="3174345">)</span>&nbsp;<span class="op" id="3174347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174350">root</span>&nbsp;<span class="op" id="3174355">:=</span>&nbsp;<span class="ident" id="3174358">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174362">for</span>&nbsp;<span class="op" id="3174366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174370">child</span>&nbsp;<span class="op" id="3174376">:=</span>&nbsp;<span class="num" id="3174379">2</span><span class="op" id="3174380">*</span><span class="ident" id="3174381">root</span>&nbsp;<span class="op" id="3174386">+</span>&nbsp;<span class="num" id="3174388">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174392">if</span>&nbsp;<span class="ident" id="3174395">child</span>&nbsp;<span class="op" id="3174401">&gt;=</span>&nbsp;<span class="ident" id="3174404">hi</span>&nbsp;<span class="op" id="3174407">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174412">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174424">if</span>&nbsp;<span class="ident" id="3174427">child</span><span class="op" id="3174432">+</span><span class="num" id="3174433">1</span>&nbsp;<span class="op" id="3174435">&lt;</span>&nbsp;<span class="ident" id="3174437">hi</span>&nbsp;<span class="op" id="3174440">&amp;&amp;</span>&nbsp;<span class="ident" id="3174443">data</span><span class="op" id="3174447">.</span><span class="ident" id="3174448">Less</span><span class="op" id="3174452">(</span><span class="ident" id="3174453">first</span><span class="op" id="3174458">+</span><span class="ident" id="3174459">child</span><span class="op" id="3174464">,</span>&nbsp;<span class="ident" id="3174466">first</span><span class="op" id="3174471">+</span><span class="ident" id="3174472">child</span><span class="op" id="3174477">+</span><span class="num" id="3174478">1</span><span class="op" id="3174479">)</span>&nbsp;<span class="op" id="3174481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174486">child</span><span class="op" id="3174491">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174496">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174500">if</span>&nbsp;<span class="op" id="3174503">!</span><span class="ident" id="3174504">data</span><span class="op" id="3174508">.</span><span class="ident" id="3174509">Less</span><span class="op" id="3174513">(</span><span class="ident" id="3174514">first</span><span class="op" id="3174519">+</span><span class="ident" id="3174520">root</span><span class="op" id="3174524">,</span>&nbsp;<span class="ident" id="3174526">first</span><span class="op" id="3174531">+</span><span class="ident" id="3174532">child</span><span class="op" id="3174537">)</span>&nbsp;<span class="op" id="3174539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174544">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174557">data</span><span class="op" id="3174561">.</span><span class="ident" id="3174562">Swap</span><span class="op" id="3174566">(</span><span class="ident" id="3174567">first</span><span class="op" id="3174572">+</span><span class="ident" id="3174573">root</span><span class="op" id="3174577">,</span>&nbsp;<span class="ident" id="3174579">first</span><span class="op" id="3174584">+</span><span class="ident" id="3174585">child</span><span class="op" id="3174590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174594">root</span>&nbsp;<span class="op" id="3174599">=</span>&nbsp;<span class="ident" id="3174601">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174608">}</span><br>
<span class="lineno"></span><span class="op" id="3174610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3174613">func</span>&nbsp;<span class="ident" id="3174618">heapSort</span><span class="op" id="3174626">(</span><span class="ident" id="3174627">data</span>&nbsp;<span class="ident" id="3174632">Interface</span><span class="op" id="3174641">,</span>&nbsp;<span class="ident" id="3174643">a</span><span class="op" id="3174644">,</span>&nbsp;<span class="ident" id="3174646">b</span>&nbsp;<span class="builtintype" id="3174648">int</span><span class="op" id="3174651">)</span>&nbsp;<span class="op" id="3174653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174656">first</span>&nbsp;<span class="op" id="3174662">:=</span>&nbsp;<span class="ident" id="3174665">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174668">lo</span>&nbsp;<span class="op" id="3174671">:=</span>&nbsp;<span class="num" id="3174674">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174677">hi</span>&nbsp;<span class="op" id="3174680">:=</span>&nbsp;<span class="ident" id="3174683">b</span>&nbsp;<span class="op" id="3174685">-</span>&nbsp;<span class="ident" id="3174687">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3174691">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174736">for</span>&nbsp;<span class="ident" id="3174740">i</span>&nbsp;<span class="op" id="3174742">:=</span>&nbsp;<span class="op" id="3174745">(</span><span class="ident" id="3174746">hi</span>&nbsp;<span class="op" id="3174749">-</span>&nbsp;<span class="num" id="3174751">1</span><span class="op" id="3174752">)</span>&nbsp;<span class="op" id="3174754">/</span>&nbsp;<span class="num" id="3174756">2</span><span class="op" id="3174757">;</span>&nbsp;<span class="ident" id="3174759">i</span>&nbsp;<span class="op" id="3174761">&gt;=</span>&nbsp;<span class="num" id="3174764">0</span><span class="op" id="3174765">;</span>&nbsp;<span class="ident" id="3174767">i</span><span class="op" id="3174768">--</span>&nbsp;<span class="op" id="3174771">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174775">siftDown</span><span class="op" id="3174783">(</span><span class="ident" id="3174784">data</span><span class="op" id="3174788">,</span>&nbsp;<span class="ident" id="3174790">i</span><span class="op" id="3174791">,</span>&nbsp;<span class="ident" id="3174793">hi</span><span class="op" id="3174795">,</span>&nbsp;<span class="ident" id="3174797">first</span><span class="op" id="3174802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3174809">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3174860">for</span>&nbsp;<span class="ident" id="3174864">i</span>&nbsp;<span class="op" id="3174866">:=</span>&nbsp;<span class="ident" id="3174869">hi</span>&nbsp;<span class="op" id="3174872">-</span>&nbsp;<span class="num" id="3174874">1</span><span class="op" id="3174875">;</span>&nbsp;<span class="ident" id="3174877">i</span>&nbsp;<span class="op" id="3174879">&gt;=</span>&nbsp;<span class="num" id="3174882">0</span><span class="op" id="3174883">;</span>&nbsp;<span class="ident" id="3174885">i</span><span class="op" id="3174886">--</span>&nbsp;<span class="op" id="3174889">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174893">data</span><span class="op" id="3174897">.</span><span class="ident" id="3174898">Swap</span><span class="op" id="3174902">(</span><span class="ident" id="3174903">first</span><span class="op" id="3174908">,</span>&nbsp;<span class="ident" id="3174910">first</span><span class="op" id="3174915">+</span><span class="ident" id="3174916">i</span><span class="op" id="3174917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3174921">siftDown</span><span class="op" id="3174929">(</span><span class="ident" id="3174930">data</span><span class="op" id="3174934">,</span>&nbsp;<span class="ident" id="3174936">lo</span><span class="op" id="3174938">,</span>&nbsp;<span class="ident" id="3174940">i</span><span class="op" id="3174941">,</span>&nbsp;<span class="ident" id="3174943">first</span><span class="op" id="3174948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3174951">}</span><br>
<span class="lineno"></span><span class="op" id="3174953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="3174956">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="3175001">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3175058">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="3175152">func</span>&nbsp;<span class="ident" id="3175157">medianOfThree</span><span class="op" id="3175170">(</span><span class="ident" id="3175171">data</span>&nbsp;<span class="ident" id="3175176">Interface</span><span class="op" id="3175185">,</span>&nbsp;<span class="ident" id="3175187">a</span><span class="op" id="3175188">,</span>&nbsp;<span class="ident" id="3175190">b</span><span class="op" id="3175191">,</span>&nbsp;<span class="ident" id="3175193">c</span>&nbsp;<span class="builtintype" id="3175195">int</span><span class="op" id="3175198">)</span>&nbsp;<span class="op" id="3175200">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175203">m0</span>&nbsp;<span class="op" id="3175206">:=</span>&nbsp;<span class="ident" id="3175209">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175212">m1</span>&nbsp;<span class="op" id="3175215">:=</span>&nbsp;<span class="ident" id="3175218">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175221">m2</span>&nbsp;<span class="op" id="3175224">:=</span>&nbsp;<span class="ident" id="3175227">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3175230">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3175260">if</span>&nbsp;<span class="ident" id="3175263">data</span><span class="op" id="3175267">.</span><span class="ident" id="3175268">Less</span><span class="op" id="3175272">(</span><span class="ident" id="3175273">m1</span><span class="op" id="3175275">,</span>&nbsp;<span class="ident" id="3175277">m0</span><span class="op" id="3175279">)</span>&nbsp;<span class="op" id="3175281">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175285">data</span><span class="op" id="3175289">.</span><span class="ident" id="3175290">Swap</span><span class="op" id="3175294">(</span><span class="ident" id="3175295">m1</span><span class="op" id="3175297">,</span>&nbsp;<span class="ident" id="3175299">m0</span><span class="op" id="3175301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3175304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3175307">if</span>&nbsp;<span class="ident" id="3175310">data</span><span class="op" id="3175314">.</span><span class="ident" id="3175315">Less</span><span class="op" id="3175319">(</span><span class="ident" id="3175320">m2</span><span class="op" id="3175322">,</span>&nbsp;<span class="ident" id="3175324">m1</span><span class="op" id="3175326">)</span>&nbsp;<span class="op" id="3175328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175332">data</span><span class="op" id="3175336">.</span><span class="ident" id="3175337">Swap</span><span class="op" id="3175341">(</span><span class="ident" id="3175342">m2</span><span class="op" id="3175344">,</span>&nbsp;<span class="ident" id="3175346">m1</span><span class="op" id="3175348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3175351">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3175354">if</span>&nbsp;<span class="ident" id="3175357">data</span><span class="op" id="3175361">.</span><span class="ident" id="3175362">Less</span><span class="op" id="3175366">(</span><span class="ident" id="3175367">m1</span><span class="op" id="3175369">,</span>&nbsp;<span class="ident" id="3175371">m0</span><span class="op" id="3175373">)</span>&nbsp;<span class="op" id="3175375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175379">data</span><span class="op" id="3175383">.</span><span class="ident" id="3175384">Swap</span><span class="op" id="3175388">(</span><span class="ident" id="3175389">m1</span><span class="op" id="3175391">,</span>&nbsp;<span class="ident" id="3175393">m0</span><span class="op" id="3175395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3175398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3175401">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="3175441">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="3175444">func</span>&nbsp;<span class="ident" id="3175449">swapRange</span><span class="op" id="3175458">(</span><span class="ident" id="3175459">data</span>&nbsp;<span class="ident" id="3175464">Interface</span><span class="op" id="3175473">,</span>&nbsp;<span class="ident" id="3175475">a</span><span class="op" id="3175476">,</span>&nbsp;<span class="ident" id="3175478">b</span><span class="op" id="3175479">,</span>&nbsp;<span class="ident" id="3175481">n</span>&nbsp;<span class="builtintype" id="3175483">int</span><span class="op" id="3175486">)</span>&nbsp;<span class="op" id="3175488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3175491">for</span>&nbsp;<span class="ident" id="3175495">i</span>&nbsp;<span class="op" id="3175497">:=</span>&nbsp;<span class="num" id="3175500">0</span><span class="op" id="3175501">;</span>&nbsp;<span class="ident" id="3175503">i</span>&nbsp;<span class="op" id="3175505">&lt;</span>&nbsp;<span class="ident" id="3175507">n</span><span class="op" id="3175508">;</span>&nbsp;<span class="ident" id="3175510">i</span><span class="op" id="3175511">++</span>&nbsp;<span class="op" id="3175514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175518">data</span><span class="op" id="3175522">.</span><span class="ident" id="3175523">Swap</span><span class="op" id="3175527">(</span><span class="ident" id="3175528">a</span><span class="op" id="3175529">+</span><span class="ident" id="3175530">i</span><span class="op" id="3175531">,</span>&nbsp;<span class="ident" id="3175533">b</span><span class="op" id="3175534">+</span><span class="ident" id="3175535">i</span><span class="op" id="3175536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3175539">}</span><br>
<span class="lineno">100</span><span class="op" id="3175541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3175544">func</span>&nbsp;<span class="ident" id="3175549">doPivot</span><span class="op" id="3175556">(</span><span class="ident" id="3175557">data</span>&nbsp;<span class="ident" id="3175562">Interface</span><span class="op" id="3175571">,</span>&nbsp;<span class="ident" id="3175573">lo</span><span class="op" id="3175575">,</span>&nbsp;<span class="ident" id="3175577">hi</span>&nbsp;<span class="builtintype" id="3175580">int</span><span class="op" id="3175583">)</span>&nbsp;<span class="op" id="3175585">(</span><span class="ident" id="3175586">midlo</span><span class="op" id="3175591">,</span>&nbsp;<span class="ident" id="3175593">midhi</span>&nbsp;<span class="builtintype" id="3175599">int</span><span class="op" id="3175602">)</span>&nbsp;<span class="op" id="3175604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175607">m</span>&nbsp;<span class="op" id="3175609">:=</span>&nbsp;<span class="ident" id="3175612">lo</span>&nbsp;<span class="op" id="3175615">+</span>&nbsp;<span class="op" id="3175617">(</span><span class="ident" id="3175618">hi</span><span class="op" id="3175620">-</span><span class="ident" id="3175621">lo</span><span class="op" id="3175623">)</span><span class="op" id="3175624">/</span><span class="num" id="3175625">2</span>&nbsp;<span class="comment" id="3175627">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3175676">if</span>&nbsp;<span class="ident" id="3175679">hi</span><span class="op" id="3175681">-</span><span class="ident" id="3175682">lo</span>&nbsp;<span class="op" id="3175685">&gt;</span>&nbsp;<span class="num" id="3175687">40</span>&nbsp;<span class="op" id="3175690">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3175694">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175754">s</span>&nbsp;<span class="op" id="3175756">:=</span>&nbsp;<span class="op" id="3175759">(</span><span class="ident" id="3175760">hi</span>&nbsp;<span class="op" id="3175763">-</span>&nbsp;<span class="ident" id="3175765">lo</span><span class="op" id="3175767">)</span>&nbsp;<span class="op" id="3175769">/</span>&nbsp;<span class="num" id="3175771">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175775">medianOfThree</span><span class="op" id="3175788">(</span><span class="ident" id="3175789">data</span><span class="op" id="3175793">,</span>&nbsp;<span class="ident" id="3175795">lo</span><span class="op" id="3175797">,</span>&nbsp;<span class="ident" id="3175799">lo</span><span class="op" id="3175801">+</span><span class="ident" id="3175802">s</span><span class="op" id="3175803">,</span>&nbsp;<span class="ident" id="3175805">lo</span><span class="op" id="3175807">+</span><span class="num" id="3175808">2</span><span class="op" id="3175809">*</span><span class="ident" id="3175810">s</span><span class="op" id="3175811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175815">medianOfThree</span><span class="op" id="3175828">(</span><span class="ident" id="3175829">data</span><span class="op" id="3175833">,</span>&nbsp;<span class="ident" id="3175835">m</span><span class="op" id="3175836">,</span>&nbsp;<span class="ident" id="3175838">m</span><span class="op" id="3175839">-</span><span class="ident" id="3175840">s</span><span class="op" id="3175841">,</span>&nbsp;<span class="ident" id="3175843">m</span><span class="op" id="3175844">+</span><span class="ident" id="3175845">s</span><span class="op" id="3175846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175850">medianOfThree</span><span class="op" id="3175863">(</span><span class="ident" id="3175864">data</span><span class="op" id="3175868">,</span>&nbsp;<span class="ident" id="3175870">hi</span><span class="op" id="3175872">-</span><span class="num" id="3175873">1</span><span class="op" id="3175874">,</span>&nbsp;<span class="ident" id="3175876">hi</span><span class="op" id="3175878">-</span><span class="num" id="3175879">1</span><span class="op" id="3175880">-</span><span class="ident" id="3175881">s</span><span class="op" id="3175882">,</span>&nbsp;<span class="ident" id="3175884">hi</span><span class="op" id="3175886">-</span><span class="num" id="3175887">1</span><span class="op" id="3175888">-</span><span class="num" id="3175889">2</span><span class="op" id="3175890">*</span><span class="ident" id="3175891">s</span><span class="op" id="3175892">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3175895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3175898">medianOfThree</span><span class="op" id="3175911">(</span><span class="ident" id="3175912">data</span><span class="op" id="3175916">,</span>&nbsp;<span class="ident" id="3175918">lo</span><span class="op" id="3175920">,</span>&nbsp;<span class="ident" id="3175922">m</span><span class="op" id="3175923">,</span>&nbsp;<span class="ident" id="3175925">hi</span><span class="op" id="3175927">-</span><span class="num" id="3175928">1</span><span class="op" id="3175929">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3175933">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3175953">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3175998">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176028">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176057">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176092">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176121">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176151">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176155">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176207">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176241">pivot</span>&nbsp;<span class="op" id="3176247">:=</span>&nbsp;<span class="ident" id="3176250">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176254">a</span><span class="op" id="3176255">,</span>&nbsp;<span class="ident" id="3176257">b</span><span class="op" id="3176258">,</span>&nbsp;<span class="ident" id="3176260">c</span><span class="op" id="3176261">,</span>&nbsp;<span class="ident" id="3176263">d</span>&nbsp;<span class="op" id="3176265">:=</span>&nbsp;<span class="ident" id="3176268">lo</span><span class="op" id="3176270">+</span><span class="num" id="3176271">1</span><span class="op" id="3176272">,</span>&nbsp;<span class="ident" id="3176274">lo</span><span class="op" id="3176276">+</span><span class="num" id="3176277">1</span><span class="op" id="3176278">,</span>&nbsp;<span class="ident" id="3176280">hi</span><span class="op" id="3176282">,</span>&nbsp;<span class="ident" id="3176284">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176288">for</span>&nbsp;<span class="op" id="3176292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176296">for</span>&nbsp;<span class="ident" id="3176300">b</span>&nbsp;<span class="op" id="3176302">&lt;</span>&nbsp;<span class="ident" id="3176304">c</span>&nbsp;<span class="op" id="3176306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176311">if</span>&nbsp;<span class="ident" id="3176314">data</span><span class="op" id="3176318">.</span><span class="ident" id="3176319">Less</span><span class="op" id="3176323">(</span><span class="ident" id="3176324">b</span><span class="op" id="3176325">,</span>&nbsp;<span class="ident" id="3176327">pivot</span><span class="op" id="3176332">)</span>&nbsp;<span class="op" id="3176334">{</span>&nbsp;<span class="comment" id="3176336">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176359">b</span><span class="op" id="3176360">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176366">}</span>&nbsp;<span class="keyword" id="3176368">else</span>&nbsp;<span class="keyword" id="3176373">if</span>&nbsp;<span class="op" id="3176376">!</span><span class="ident" id="3176377">data</span><span class="op" id="3176381">.</span><span class="ident" id="3176382">Less</span><span class="op" id="3176386">(</span><span class="ident" id="3176387">pivot</span><span class="op" id="3176392">,</span>&nbsp;<span class="ident" id="3176394">b</span><span class="op" id="3176395">)</span>&nbsp;<span class="op" id="3176397">{</span>&nbsp;<span class="comment" id="3176399">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176422">data</span><span class="op" id="3176426">.</span><span class="ident" id="3176427">Swap</span><span class="op" id="3176431">(</span><span class="ident" id="3176432">a</span><span class="op" id="3176433">,</span>&nbsp;<span class="ident" id="3176435">b</span><span class="op" id="3176436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176442">a</span><span class="op" id="3176443">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176450">b</span><span class="op" id="3176451">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176457">}</span>&nbsp;<span class="keyword" id="3176459">else</span>&nbsp;<span class="op" id="3176464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176470">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176487">for</span>&nbsp;<span class="ident" id="3176491">b</span>&nbsp;<span class="op" id="3176493">&lt;</span>&nbsp;<span class="ident" id="3176495">c</span>&nbsp;<span class="op" id="3176497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176502">if</span>&nbsp;<span class="ident" id="3176505">data</span><span class="op" id="3176509">.</span><span class="ident" id="3176510">Less</span><span class="op" id="3176514">(</span><span class="ident" id="3176515">pivot</span><span class="op" id="3176520">,</span>&nbsp;<span class="ident" id="3176522">c</span><span class="op" id="3176523">-</span><span class="num" id="3176524">1</span><span class="op" id="3176525">)</span>&nbsp;<span class="op" id="3176527">{</span>&nbsp;<span class="comment" id="3176529">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176554">c</span><span class="op" id="3176555">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176561">}</span>&nbsp;<span class="keyword" id="3176563">else</span>&nbsp;<span class="keyword" id="3176568">if</span>&nbsp;<span class="op" id="3176571">!</span><span class="ident" id="3176572">data</span><span class="op" id="3176576">.</span><span class="ident" id="3176577">Less</span><span class="op" id="3176581">(</span><span class="ident" id="3176582">c</span><span class="op" id="3176583">-</span><span class="num" id="3176584">1</span><span class="op" id="3176585">,</span>&nbsp;<span class="ident" id="3176587">pivot</span><span class="op" id="3176592">)</span>&nbsp;<span class="op" id="3176594">{</span>&nbsp;<span class="comment" id="3176596">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176621">data</span><span class="op" id="3176625">.</span><span class="ident" id="3176626">Swap</span><span class="op" id="3176630">(</span><span class="ident" id="3176631">c</span><span class="op" id="3176632">-</span><span class="num" id="3176633">1</span><span class="op" id="3176634">,</span>&nbsp;<span class="ident" id="3176636">d</span><span class="op" id="3176637">-</span><span class="num" id="3176638">1</span><span class="op" id="3176639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176645">c</span><span class="op" id="3176646">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176653">d</span><span class="op" id="3176654">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176660">}</span>&nbsp;<span class="keyword" id="3176662">else</span>&nbsp;<span class="op" id="3176667">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176673">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176690">if</span>&nbsp;<span class="ident" id="3176693">b</span>&nbsp;<span class="op" id="3176695">&gt;=</span>&nbsp;<span class="ident" id="3176698">c</span>&nbsp;<span class="op" id="3176700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176705">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3176717">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176757">data</span><span class="op" id="3176761">.</span><span class="ident" id="3176762">Swap</span><span class="op" id="3176766">(</span><span class="ident" id="3176767">b</span><span class="op" id="3176768">,</span>&nbsp;<span class="ident" id="3176770">c</span><span class="op" id="3176771">-</span><span class="num" id="3176772">1</span><span class="op" id="3176773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176777">b</span><span class="op" id="3176778">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176783">c</span><span class="op" id="3176784">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3176788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176792">n</span>&nbsp;<span class="op" id="3176794">:=</span>&nbsp;<span class="ident" id="3176797">min</span><span class="op" id="3176800">(</span><span class="ident" id="3176801">b</span><span class="op" id="3176802">-</span><span class="ident" id="3176803">a</span><span class="op" id="3176804">,</span>&nbsp;<span class="ident" id="3176806">a</span><span class="op" id="3176807">-</span><span class="ident" id="3176808">lo</span><span class="op" id="3176810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176813">swapRange</span><span class="op" id="3176822">(</span><span class="ident" id="3176823">data</span><span class="op" id="3176827">,</span>&nbsp;<span class="ident" id="3176829">lo</span><span class="op" id="3176831">,</span>&nbsp;<span class="ident" id="3176833">b</span><span class="op" id="3176834">-</span><span class="ident" id="3176835">n</span><span class="op" id="3176836">,</span>&nbsp;<span class="ident" id="3176838">n</span><span class="op" id="3176839">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176843">n</span>&nbsp;<span class="op" id="3176845">=</span>&nbsp;<span class="ident" id="3176847">min</span><span class="op" id="3176850">(</span><span class="ident" id="3176851">hi</span><span class="op" id="3176853">-</span><span class="ident" id="3176854">d</span><span class="op" id="3176855">,</span>&nbsp;<span class="ident" id="3176857">d</span><span class="op" id="3176858">-</span><span class="ident" id="3176859">c</span><span class="op" id="3176860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3176863">swapRange</span><span class="op" id="3176872">(</span><span class="ident" id="3176873">data</span><span class="op" id="3176877">,</span>&nbsp;<span class="ident" id="3176879">c</span><span class="op" id="3176880">,</span>&nbsp;<span class="ident" id="3176882">hi</span><span class="op" id="3176884">-</span><span class="ident" id="3176885">n</span><span class="op" id="3176886">,</span>&nbsp;<span class="ident" id="3176888">n</span><span class="op" id="3176889">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176893">return</span>&nbsp;<span class="ident" id="3176900">lo</span>&nbsp;<span class="op" id="3176903">+</span>&nbsp;<span class="ident" id="3176905">b</span>&nbsp;<span class="op" id="3176907">-</span>&nbsp;<span class="ident" id="3176909">a</span><span class="op" id="3176910">,</span>&nbsp;<span class="ident" id="3176912">hi</span>&nbsp;<span class="op" id="3176915">-</span>&nbsp;<span class="op" id="3176917">(</span><span class="ident" id="3176918">d</span>&nbsp;<span class="op" id="3176920">-</span>&nbsp;<span class="ident" id="3176922">c</span><span class="op" id="3176923">)</span><br>
<span class="lineno"></span><span class="op" id="3176925">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="3176928">func</span>&nbsp;<span class="ident" id="3176933">quickSort</span><span class="op" id="3176942">(</span><span class="ident" id="3176943">data</span>&nbsp;<span class="ident" id="3176948">Interface</span><span class="op" id="3176957">,</span>&nbsp;<span class="ident" id="3176959">a</span><span class="op" id="3176960">,</span>&nbsp;<span class="ident" id="3176962">b</span><span class="op" id="3176963">,</span>&nbsp;<span class="ident" id="3176965">maxDepth</span>&nbsp;<span class="builtintype" id="3176974">int</span><span class="op" id="3176977">)</span>&nbsp;<span class="op" id="3176979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176982">for</span>&nbsp;<span class="ident" id="3176986">b</span><span class="op" id="3176987">-</span><span class="ident" id="3176988">a</span>&nbsp;<span class="op" id="3176990">&gt;</span>&nbsp;<span class="num" id="3176992">7</span>&nbsp;<span class="op" id="3176994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3176998">if</span>&nbsp;<span class="ident" id="3177001">maxDepth</span>&nbsp;<span class="op" id="3177010">==</span>&nbsp;<span class="num" id="3177013">0</span>&nbsp;<span class="op" id="3177015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177020">heapSort</span><span class="op" id="3177028">(</span><span class="ident" id="3177029">data</span><span class="op" id="3177033">,</span>&nbsp;<span class="ident" id="3177035">a</span><span class="op" id="3177036">,</span>&nbsp;<span class="ident" id="3177038">b</span><span class="op" id="3177039">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177044">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177057">maxDepth</span><span class="op" id="3177065">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177070">mlo</span><span class="op" id="3177073">,</span>&nbsp;<span class="ident" id="3177075">mhi</span>&nbsp;<span class="op" id="3177079">:=</span>&nbsp;<span class="ident" id="3177082">doPivot</span><span class="op" id="3177089">(</span><span class="ident" id="3177090">data</span><span class="op" id="3177094">,</span>&nbsp;<span class="ident" id="3177096">a</span><span class="op" id="3177097">,</span>&nbsp;<span class="ident" id="3177099">b</span><span class="op" id="3177100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3177104">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3177164">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177203">if</span>&nbsp;<span class="ident" id="3177206">mlo</span><span class="op" id="3177209">-</span><span class="ident" id="3177210">a</span>&nbsp;<span class="op" id="3177212">&lt;</span>&nbsp;<span class="ident" id="3177214">b</span><span class="op" id="3177215">-</span><span class="ident" id="3177216">mhi</span>&nbsp;<span class="op" id="3177220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177225">quickSort</span><span class="op" id="3177234">(</span><span class="ident" id="3177235">data</span><span class="op" id="3177239">,</span>&nbsp;<span class="ident" id="3177241">a</span><span class="op" id="3177242">,</span>&nbsp;<span class="ident" id="3177244">mlo</span><span class="op" id="3177247">,</span>&nbsp;<span class="ident" id="3177249">maxDepth</span><span class="op" id="3177257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177262">a</span>&nbsp;<span class="op" id="3177264">=</span>&nbsp;<span class="ident" id="3177266">mhi</span>&nbsp;<span class="comment" id="3177270">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177305">}</span>&nbsp;<span class="keyword" id="3177307">else</span>&nbsp;<span class="op" id="3177312">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177317">quickSort</span><span class="op" id="3177326">(</span><span class="ident" id="3177327">data</span><span class="op" id="3177331">,</span>&nbsp;<span class="ident" id="3177333">mhi</span><span class="op" id="3177336">,</span>&nbsp;<span class="ident" id="3177338">b</span><span class="op" id="3177339">,</span>&nbsp;<span class="ident" id="3177341">maxDepth</span><span class="op" id="3177349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177354">b</span>&nbsp;<span class="op" id="3177356">=</span>&nbsp;<span class="ident" id="3177358">mlo</span>&nbsp;<span class="comment" id="3177362">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177403">if</span>&nbsp;<span class="ident" id="3177406">b</span><span class="op" id="3177407">-</span><span class="ident" id="3177408">a</span>&nbsp;<span class="op" id="3177410">&gt;</span>&nbsp;<span class="num" id="3177412">1</span>&nbsp;<span class="op" id="3177414">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177418">insertionSort</span><span class="op" id="3177431">(</span><span class="ident" id="3177432">data</span><span class="op" id="3177436">,</span>&nbsp;<span class="ident" id="3177438">a</span><span class="op" id="3177439">,</span>&nbsp;<span class="ident" id="3177441">b</span><span class="op" id="3177442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177445">}</span><br>
<span class="lineno"></span><span class="op" id="3177447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3177450">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="3177470">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3177544">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="3177613">func</span>&nbsp;<span class="ident" id="3177618">Sort</span><span class="op" id="3177622">(</span><span class="ident" id="3177623">data</span>&nbsp;<span class="ident" id="3177628">Interface</span><span class="op" id="3177637">)</span>&nbsp;<span class="op" id="3177639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3177642">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177705">n</span>&nbsp;<span class="op" id="3177707">:=</span>&nbsp;<span class="ident" id="3177710">data</span><span class="op" id="3177714">.</span><span class="ident" id="3177715">Len</span><span class="op" id="3177718">(</span><span class="op" id="3177719">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177722">maxDepth</span>&nbsp;<span class="op" id="3177731">:=</span>&nbsp;<span class="num" id="3177734">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3177737">for</span>&nbsp;<span class="ident" id="3177741">i</span>&nbsp;<span class="op" id="3177743">:=</span>&nbsp;<span class="ident" id="3177746">n</span><span class="op" id="3177747">;</span>&nbsp;<span class="ident" id="3177749">i</span>&nbsp;<span class="op" id="3177751">&gt;</span>&nbsp;<span class="num" id="3177753">0</span><span class="op" id="3177754">;</span>&nbsp;<span class="ident" id="3177756">i</span>&nbsp;<span class="op" id="3177758">&gt;&gt;=</span>&nbsp;<span class="num" id="3177762">1</span>&nbsp;<span class="op" id="3177764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177768">maxDepth</span><span class="op" id="3177776">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3177780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177783">maxDepth</span>&nbsp;<span class="op" id="3177792">*=</span>&nbsp;<span class="num" id="3177795">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177798">quickSort</span><span class="op" id="3177807">(</span><span class="ident" id="3177808">data</span><span class="op" id="3177812">,</span>&nbsp;<span class="num" id="3177814">0</span><span class="op" id="3177815">,</span>&nbsp;<span class="ident" id="3177817">n</span><span class="op" id="3177818">,</span>&nbsp;<span class="ident" id="3177820">maxDepth</span><span class="op" id="3177828">)</span><br>
<span class="lineno"></span><span class="op" id="3177830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3177833">type</span>&nbsp;<span class="ident" id="3177838">reverse</span>&nbsp;<span class="keyword" id="3177846">struct</span>&nbsp;<span class="op" id="3177853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3177856">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3177922">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3177960">Interface</span><br>
<span class="lineno"></span><span class="op" id="3177970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3177973">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="3178048">func</span>&nbsp;<span class="op" id="3178053">(</span><span class="ident" id="3178054">r</span>&nbsp;<span class="ident" id="3178056">reverse</span><span class="op" id="3178063">)</span>&nbsp;<span class="ident" id="3178065">Less</span><span class="op" id="3178069">(</span><span class="ident" id="3178070">i</span><span class="op" id="3178071">,</span>&nbsp;<span class="ident" id="3178073">j</span>&nbsp;<span class="builtintype" id="3178075">int</span><span class="op" id="3178078">)</span>&nbsp;<span class="builtintype" id="3178080">bool</span>&nbsp;<span class="op" id="3178085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178088">return</span>&nbsp;<span class="ident" id="3178095">r</span><span class="op" id="3178096">.</span><span class="ident" id="3178097">Interface</span><span class="op" id="3178106">.</span><span class="ident" id="3178107">Less</span><span class="op" id="3178111">(</span><span class="ident" id="3178112">j</span><span class="op" id="3178113">,</span>&nbsp;<span class="ident" id="3178115">i</span><span class="op" id="3178116">)</span><br>
<span class="lineno"></span><span class="op" id="3178118">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178121">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="3178168">func</span>&nbsp;<span class="ident" id="3178173">Reverse</span><span class="op" id="3178180">(</span><span class="ident" id="3178181">data</span>&nbsp;<span class="ident" id="3178186">Interface</span><span class="op" id="3178195">)</span>&nbsp;<span class="ident" id="3178197">Interface</span>&nbsp;<span class="op" id="3178207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178210">return</span>&nbsp;<span class="op" id="3178217">&amp;</span><span class="ident" id="3178218">reverse</span><span class="op" id="3178225">{</span><span class="ident" id="3178226">data</span><span class="op" id="3178230">}</span><br>
<span class="lineno"></span><span class="op" id="3178232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178235">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="3178279">func</span>&nbsp;<span class="ident" id="3178284">IsSorted</span><span class="op" id="3178292">(</span><span class="ident" id="3178293">data</span>&nbsp;<span class="ident" id="3178298">Interface</span><span class="op" id="3178307">)</span>&nbsp;<span class="builtintype" id="3178309">bool</span>&nbsp;<span class="op" id="3178314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3178317">n</span>&nbsp;<span class="op" id="3178319">:=</span>&nbsp;<span class="ident" id="3178322">data</span><span class="op" id="3178326">.</span><span class="ident" id="3178327">Len</span><span class="op" id="3178330">(</span><span class="op" id="3178331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178334">for</span>&nbsp;<span class="ident" id="3178338">i</span>&nbsp;<span class="op" id="3178340">:=</span>&nbsp;<span class="ident" id="3178343">n</span>&nbsp;<span class="op" id="3178345">-</span>&nbsp;<span class="num" id="3178347">1</span><span class="op" id="3178348">;</span>&nbsp;<span class="ident" id="3178350">i</span>&nbsp;<span class="op" id="3178352">&gt;</span>&nbsp;<span class="num" id="3178354">0</span><span class="op" id="3178355">;</span>&nbsp;<span class="ident" id="3178357">i</span><span class="op" id="3178358">--</span>&nbsp;<span class="op" id="3178361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178365">if</span>&nbsp;<span class="ident" id="3178368">data</span><span class="op" id="3178372">.</span><span class="ident" id="3178373">Less</span><span class="op" id="3178377">(</span><span class="ident" id="3178378">i</span><span class="op" id="3178379">,</span>&nbsp;<span class="ident" id="3178381">i</span><span class="op" id="3178382">-</span><span class="num" id="3178383">1</span><span class="op" id="3178384">)</span>&nbsp;<span class="op" id="3178386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178391">return</span>&nbsp;<span class="builtintype" id="3178398">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3178406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3178409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3178412">return</span>&nbsp;<span class="builtintype" id="3178419">true</span><br>
<span class="lineno"></span><span class="op" id="3178424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="3178427">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178466">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3178551">type</span>&nbsp;<span class="ident" id="3178556">IntSlice</span>&nbsp;<span class="op" id="3178565">[</span><span class="op" id="3178566">]</span><span class="builtintype" id="3178567">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3178572">func</span>&nbsp;<span class="op" id="3178577">(</span><span class="ident" id="3178578">p</span>&nbsp;<span class="ident" id="3178580">IntSlice</span><span class="op" id="3178588">)</span>&nbsp;<span class="ident" id="3178590">Len</span><span class="op" id="3178593">(</span><span class="op" id="3178594">)</span>&nbsp;<span class="builtintype" id="3178596">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3178610">{</span>&nbsp;<span class="keyword" id="3178612">return</span>&nbsp;<span class="builtinfunc" id="3178619">len</span><span class="op" id="3178622">(</span><span class="ident" id="3178623">p</span><span class="op" id="3178624">)</span>&nbsp;<span class="op" id="3178626">}</span><br>
<span class="lineno"></span><span class="keyword" id="3178628">func</span>&nbsp;<span class="op" id="3178633">(</span><span class="ident" id="3178634">p</span>&nbsp;<span class="ident" id="3178636">IntSlice</span><span class="op" id="3178644">)</span>&nbsp;<span class="ident" id="3178646">Less</span><span class="op" id="3178650">(</span><span class="ident" id="3178651">i</span><span class="op" id="3178652">,</span>&nbsp;<span class="ident" id="3178654">j</span>&nbsp;<span class="builtintype" id="3178656">int</span><span class="op" id="3178659">)</span>&nbsp;<span class="builtintype" id="3178661">bool</span>&nbsp;<span class="op" id="3178666">{</span>&nbsp;<span class="keyword" id="3178668">return</span>&nbsp;<span class="ident" id="3178675">p</span><span class="op" id="3178676">[</span><span class="ident" id="3178677">i</span><span class="op" id="3178678">]</span>&nbsp;<span class="op" id="3178680">&lt;</span>&nbsp;<span class="ident" id="3178682">p</span><span class="op" id="3178683">[</span><span class="ident" id="3178684">j</span><span class="op" id="3178685">]</span>&nbsp;<span class="op" id="3178687">}</span><br>
<span class="lineno"></span><span class="keyword" id="3178689">func</span>&nbsp;<span class="op" id="3178694">(</span><span class="ident" id="3178695">p</span>&nbsp;<span class="ident" id="3178697">IntSlice</span><span class="op" id="3178705">)</span>&nbsp;<span class="ident" id="3178707">Swap</span><span class="op" id="3178711">(</span><span class="ident" id="3178712">i</span><span class="op" id="3178713">,</span>&nbsp;<span class="ident" id="3178715">j</span>&nbsp;<span class="builtintype" id="3178717">int</span><span class="op" id="3178720">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3178727">{</span>&nbsp;<span class="ident" id="3178729">p</span><span class="op" id="3178730">[</span><span class="ident" id="3178731">i</span><span class="op" id="3178732">]</span><span class="op" id="3178733">,</span>&nbsp;<span class="ident" id="3178735">p</span><span class="op" id="3178736">[</span><span class="ident" id="3178737">j</span><span class="op" id="3178738">]</span>&nbsp;<span class="op" id="3178740">=</span>&nbsp;<span class="ident" id="3178742">p</span><span class="op" id="3178743">[</span><span class="ident" id="3178744">j</span><span class="op" id="3178745">]</span><span class="op" id="3178746">,</span>&nbsp;<span class="ident" id="3178748">p</span><span class="op" id="3178749">[</span><span class="ident" id="3178750">i</span><span class="op" id="3178751">]</span>&nbsp;<span class="op" id="3178753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178756">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="3178789">func</span>&nbsp;<span class="op" id="3178794">(</span><span class="ident" id="3178795">p</span>&nbsp;<span class="ident" id="3178797">IntSlice</span><span class="op" id="3178805">)</span>&nbsp;<span class="ident" id="3178807">Sort</span><span class="op" id="3178811">(</span><span class="op" id="3178812">)</span>&nbsp;<span class="op" id="3178814">{</span>&nbsp;<span class="ident" id="3178816">Sort</span><span class="op" id="3178820">(</span><span class="ident" id="3178821">p</span><span class="op" id="3178822">)</span>&nbsp;<span class="op" id="3178824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3178827">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3178920">type</span>&nbsp;<span class="ident" id="3178925">Float64Slice</span>&nbsp;<span class="op" id="3178938">[</span><span class="op" id="3178939">]</span><span class="builtintype" id="3178940">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="3178949">func</span>&nbsp;<span class="op" id="3178954">(</span><span class="ident" id="3178955">p</span>&nbsp;<span class="ident" id="3178957">Float64Slice</span><span class="op" id="3178969">)</span>&nbsp;<span class="ident" id="3178971">Len</span><span class="op" id="3178974">(</span><span class="op" id="3178975">)</span>&nbsp;<span class="builtintype" id="3178977">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3178991">{</span>&nbsp;<span class="keyword" id="3178993">return</span>&nbsp;<span class="builtinfunc" id="3179000">len</span><span class="op" id="3179003">(</span><span class="ident" id="3179004">p</span><span class="op" id="3179005">)</span>&nbsp;<span class="op" id="3179007">}</span><br>
<span class="lineno"></span><span class="keyword" id="3179009">func</span>&nbsp;<span class="op" id="3179014">(</span><span class="ident" id="3179015">p</span>&nbsp;<span class="ident" id="3179017">Float64Slice</span><span class="op" id="3179029">)</span>&nbsp;<span class="ident" id="3179031">Less</span><span class="op" id="3179035">(</span><span class="ident" id="3179036">i</span><span class="op" id="3179037">,</span>&nbsp;<span class="ident" id="3179039">j</span>&nbsp;<span class="builtintype" id="3179041">int</span><span class="op" id="3179044">)</span>&nbsp;<span class="builtintype" id="3179046">bool</span>&nbsp;<span class="op" id="3179051">{</span>&nbsp;<span class="keyword" id="3179053">return</span>&nbsp;<span class="ident" id="3179060">p</span><span class="op" id="3179061">[</span><span class="ident" id="3179062">i</span><span class="op" id="3179063">]</span>&nbsp;<span class="op" id="3179065">&lt;</span>&nbsp;<span class="ident" id="3179067">p</span><span class="op" id="3179068">[</span><span class="ident" id="3179069">j</span><span class="op" id="3179070">]</span>&nbsp;<span class="op" id="3179072">||</span>&nbsp;<span class="ident" id="3179075">isNaN</span><span class="op" id="3179080">(</span><span class="ident" id="3179081">p</span><span class="op" id="3179082">[</span><span class="ident" id="3179083">i</span><span class="op" id="3179084">]</span><span class="op" id="3179085">)</span>&nbsp;<span class="op" id="3179087">&amp;&amp;</span>&nbsp;<span class="op" id="3179090">!</span><span class="ident" id="3179091">isNaN</span><span class="op" id="3179096">(</span><span class="ident" id="3179097">p</span><span class="op" id="3179098">[</span><span class="ident" id="3179099">j</span><span class="op" id="3179100">]</span><span class="op" id="3179101">)</span>&nbsp;<span class="op" id="3179103">}</span><br>
<span class="lineno"></span><span class="keyword" id="3179105">func</span>&nbsp;<span class="op" id="3179110">(</span><span class="ident" id="3179111">p</span>&nbsp;<span class="ident" id="3179113">Float64Slice</span><span class="op" id="3179125">)</span>&nbsp;<span class="ident" id="3179127">Swap</span><span class="op" id="3179131">(</span><span class="ident" id="3179132">i</span><span class="op" id="3179133">,</span>&nbsp;<span class="ident" id="3179135">j</span>&nbsp;<span class="builtintype" id="3179137">int</span><span class="op" id="3179140">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3179147">{</span>&nbsp;<span class="ident" id="3179149">p</span><span class="op" id="3179150">[</span><span class="ident" id="3179151">i</span><span class="op" id="3179152">]</span><span class="op" id="3179153">,</span>&nbsp;<span class="ident" id="3179155">p</span><span class="op" id="3179156">[</span><span class="ident" id="3179157">j</span><span class="op" id="3179158">]</span>&nbsp;<span class="op" id="3179160">=</span>&nbsp;<span class="ident" id="3179162">p</span><span class="op" id="3179163">[</span><span class="ident" id="3179164">j</span><span class="op" id="3179165">]</span><span class="op" id="3179166">,</span>&nbsp;<span class="ident" id="3179168">p</span><span class="op" id="3179169">[</span><span class="ident" id="3179170">i</span><span class="op" id="3179171">]</span>&nbsp;<span class="op" id="3179173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179176">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="3179252">func</span>&nbsp;<span class="ident" id="3179257">isNaN</span><span class="op" id="3179262">(</span><span class="ident" id="3179263">f</span>&nbsp;<span class="builtintype" id="3179265">float64</span><span class="op" id="3179272">)</span>&nbsp;<span class="builtintype" id="3179274">bool</span>&nbsp;<span class="op" id="3179279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3179282">return</span>&nbsp;<span class="ident" id="3179289">f</span>&nbsp;<span class="op" id="3179291">!=</span>&nbsp;<span class="ident" id="3179294">f</span><br>
<span class="lineno"></span><span class="op" id="3179296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179299">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="3179332">func</span>&nbsp;<span class="op" id="3179337">(</span><span class="ident" id="3179338">p</span>&nbsp;<span class="ident" id="3179340">Float64Slice</span><span class="op" id="3179352">)</span>&nbsp;<span class="ident" id="3179354">Sort</span><span class="op" id="3179358">(</span><span class="op" id="3179359">)</span>&nbsp;<span class="op" id="3179361">{</span>&nbsp;<span class="ident" id="3179363">Sort</span><span class="op" id="3179367">(</span><span class="ident" id="3179368">p</span><span class="op" id="3179369">)</span>&nbsp;<span class="op" id="3179371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179374">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3179465">type</span>&nbsp;<span class="ident" id="3179470">StringSlice</span>&nbsp;<span class="op" id="3179482">[</span><span class="op" id="3179483">]</span><span class="builtintype" id="3179484">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3179492">func</span>&nbsp;<span class="op" id="3179497">(</span><span class="ident" id="3179498">p</span>&nbsp;<span class="ident" id="3179500">StringSlice</span><span class="op" id="3179511">)</span>&nbsp;<span class="ident" id="3179513">Len</span><span class="op" id="3179516">(</span><span class="op" id="3179517">)</span>&nbsp;<span class="builtintype" id="3179519">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3179533">{</span>&nbsp;<span class="keyword" id="3179535">return</span>&nbsp;<span class="builtinfunc" id="3179542">len</span><span class="op" id="3179545">(</span><span class="ident" id="3179546">p</span><span class="op" id="3179547">)</span>&nbsp;<span class="op" id="3179549">}</span><br>
<span class="lineno"></span><span class="keyword" id="3179551">func</span>&nbsp;<span class="op" id="3179556">(</span><span class="ident" id="3179557">p</span>&nbsp;<span class="ident" id="3179559">StringSlice</span><span class="op" id="3179570">)</span>&nbsp;<span class="ident" id="3179572">Less</span><span class="op" id="3179576">(</span><span class="ident" id="3179577">i</span><span class="op" id="3179578">,</span>&nbsp;<span class="ident" id="3179580">j</span>&nbsp;<span class="builtintype" id="3179582">int</span><span class="op" id="3179585">)</span>&nbsp;<span class="builtintype" id="3179587">bool</span>&nbsp;<span class="op" id="3179592">{</span>&nbsp;<span class="keyword" id="3179594">return</span>&nbsp;<span class="ident" id="3179601">p</span><span class="op" id="3179602">[</span><span class="ident" id="3179603">i</span><span class="op" id="3179604">]</span>&nbsp;<span class="op" id="3179606">&lt;</span>&nbsp;<span class="ident" id="3179608">p</span><span class="op" id="3179609">[</span><span class="ident" id="3179610">j</span><span class="op" id="3179611">]</span>&nbsp;<span class="op" id="3179613">}</span><br>
<span class="lineno"></span><span class="keyword" id="3179615">func</span>&nbsp;<span class="op" id="3179620">(</span><span class="ident" id="3179621">p</span>&nbsp;<span class="ident" id="3179623">StringSlice</span><span class="op" id="3179634">)</span>&nbsp;<span class="ident" id="3179636">Swap</span><span class="op" id="3179640">(</span><span class="ident" id="3179641">i</span><span class="op" id="3179642">,</span>&nbsp;<span class="ident" id="3179644">j</span>&nbsp;<span class="builtintype" id="3179646">int</span><span class="op" id="3179649">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3179656">{</span>&nbsp;<span class="ident" id="3179658">p</span><span class="op" id="3179659">[</span><span class="ident" id="3179660">i</span><span class="op" id="3179661">]</span><span class="op" id="3179662">,</span>&nbsp;<span class="ident" id="3179664">p</span><span class="op" id="3179665">[</span><span class="ident" id="3179666">j</span><span class="op" id="3179667">]</span>&nbsp;<span class="op" id="3179669">=</span>&nbsp;<span class="ident" id="3179671">p</span><span class="op" id="3179672">[</span><span class="ident" id="3179673">j</span><span class="op" id="3179674">]</span><span class="op" id="3179675">,</span>&nbsp;<span class="ident" id="3179677">p</span><span class="op" id="3179678">[</span><span class="ident" id="3179679">i</span><span class="op" id="3179680">]</span>&nbsp;<span class="op" id="3179682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179685">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="3179718">func</span>&nbsp;<span class="op" id="3179723">(</span><span class="ident" id="3179724">p</span>&nbsp;<span class="ident" id="3179726">StringSlice</span><span class="op" id="3179737">)</span>&nbsp;<span class="ident" id="3179739">Sort</span><span class="op" id="3179743">(</span><span class="op" id="3179744">)</span>&nbsp;<span class="op" id="3179746">{</span>&nbsp;<span class="ident" id="3179748">Sort</span><span class="op" id="3179752">(</span><span class="ident" id="3179753">p</span><span class="op" id="3179754">)</span>&nbsp;<span class="op" id="3179756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179759">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179801">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="3179852">func</span>&nbsp;<span class="ident" id="3179857">Ints</span><span class="op" id="3179861">(</span><span class="ident" id="3179862">a</span>&nbsp;<span class="op" id="3179864">[</span><span class="op" id="3179865">]</span><span class="builtintype" id="3179866">int</span><span class="op" id="3179869">)</span>&nbsp;<span class="op" id="3179871">{</span>&nbsp;<span class="ident" id="3179873">Sort</span><span class="op" id="3179877">(</span><span class="ident" id="3179878">IntSlice</span><span class="op" id="3179886">(</span><span class="ident" id="3179887">a</span><span class="op" id="3179888">)</span><span class="op" id="3179889">)</span>&nbsp;<span class="op" id="3179891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3179894">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3179953">func</span>&nbsp;<span class="ident" id="3179958">Float64s</span><span class="op" id="3179966">(</span><span class="ident" id="3179967">a</span>&nbsp;<span class="op" id="3179969">[</span><span class="op" id="3179970">]</span><span class="builtintype" id="3179971">float64</span><span class="op" id="3179978">)</span>&nbsp;<span class="op" id="3179980">{</span>&nbsp;<span class="ident" id="3179982">Sort</span><span class="op" id="3179986">(</span><span class="ident" id="3179987">Float64Slice</span><span class="op" id="3179999">(</span><span class="ident" id="3180000">a</span><span class="op" id="3180001">)</span><span class="op" id="3180002">)</span>&nbsp;<span class="op" id="3180004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="3180007">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3180064">func</span>&nbsp;<span class="ident" id="3180069">Strings</span><span class="op" id="3180076">(</span><span class="ident" id="3180077">a</span>&nbsp;<span class="op" id="3180079">[</span><span class="op" id="3180080">]</span><span class="builtintype" id="3180081">string</span><span class="op" id="3180087">)</span>&nbsp;<span class="op" id="3180089">{</span>&nbsp;<span class="ident" id="3180091">Sort</span><span class="op" id="3180095">(</span><span class="ident" id="3180096">StringSlice</span><span class="op" id="3180107">(</span><span class="ident" id="3180108">a</span><span class="op" id="3180109">)</span><span class="op" id="3180110">)</span>&nbsp;<span class="op" id="3180112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3180115">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3180193">func</span>&nbsp;<span class="ident" id="3180198">IntsAreSorted</span><span class="op" id="3180211">(</span><span class="ident" id="3180212">a</span>&nbsp;<span class="op" id="3180214">[</span><span class="op" id="3180215">]</span><span class="builtintype" id="3180216">int</span><span class="op" id="3180219">)</span>&nbsp;<span class="builtintype" id="3180221">bool</span>&nbsp;<span class="op" id="3180226">{</span>&nbsp;<span class="keyword" id="3180228">return</span>&nbsp;<span class="ident" id="3180235">IsSorted</span><span class="op" id="3180243">(</span><span class="ident" id="3180244">IntSlice</span><span class="op" id="3180252">(</span><span class="ident" id="3180253">a</span><span class="op" id="3180254">)</span><span class="op" id="3180255">)</span>&nbsp;<span class="op" id="3180257">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="3180260">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3180346">func</span>&nbsp;<span class="ident" id="3180351">Float64sAreSorted</span><span class="op" id="3180368">(</span><span class="ident" id="3180369">a</span>&nbsp;<span class="op" id="3180371">[</span><span class="op" id="3180372">]</span><span class="builtintype" id="3180373">float64</span><span class="op" id="3180380">)</span>&nbsp;<span class="builtintype" id="3180382">bool</span>&nbsp;<span class="op" id="3180387">{</span>&nbsp;<span class="keyword" id="3180389">return</span>&nbsp;<span class="ident" id="3180396">IsSorted</span><span class="op" id="3180404">(</span><span class="ident" id="3180405">Float64Slice</span><span class="op" id="3180417">(</span><span class="ident" id="3180418">a</span><span class="op" id="3180419">)</span><span class="op" id="3180420">)</span>&nbsp;<span class="op" id="3180422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3180425">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="3180509">func</span>&nbsp;<span class="ident" id="3180514">StringsAreSorted</span><span class="op" id="3180530">(</span><span class="ident" id="3180531">a</span>&nbsp;<span class="op" id="3180533">[</span><span class="op" id="3180534">]</span><span class="builtintype" id="3180535">string</span><span class="op" id="3180541">)</span>&nbsp;<span class="builtintype" id="3180543">bool</span>&nbsp;<span class="op" id="3180548">{</span>&nbsp;<span class="keyword" id="3180550">return</span>&nbsp;<span class="ident" id="3180557">IsSorted</span><span class="op" id="3180565">(</span><span class="ident" id="3180566">StringSlice</span><span class="op" id="3180577">(</span><span class="ident" id="3180578">a</span><span class="op" id="3180579">)</span><span class="op" id="3180580">)</span>&nbsp;<span class="op" id="3180582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3180585">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="3180613">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3180689">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="3180764">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="3180827">//</span><br>
<span class="lineno"></span><span class="comment" id="3180830">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="3180872">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="3180944">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="3180962">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="3181016">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="3181093">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="3181165">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="3181237">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="3181292">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3181365">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="3181416">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="3181492">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="3181566">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="3181632">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="3181709">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3181788">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="3181866">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="3181940">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="3181988">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="3182062">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3182111">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="3182184">//</span><br>
<span class="lineno">315</span><span class="comment" id="3182187">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3182257">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="3182313">func</span>&nbsp;<span class="ident" id="3182318">Stable</span><span class="op" id="3182324">(</span><span class="ident" id="3182325">data</span>&nbsp;<span class="ident" id="3182330">Interface</span><span class="op" id="3182339">)</span>&nbsp;<span class="op" id="3182341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182344">n</span>&nbsp;<span class="op" id="3182346">:=</span>&nbsp;<span class="ident" id="3182349">data</span><span class="op" id="3182353">.</span><span class="ident" id="3182354">Len</span><span class="op" id="3182357">(</span><span class="op" id="3182358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182361">blockSize</span>&nbsp;<span class="op" id="3182371">:=</span>&nbsp;<span class="num" id="3182374">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182378">a</span><span class="op" id="3182379">,</span>&nbsp;<span class="ident" id="3182381">b</span>&nbsp;<span class="op" id="3182383">:=</span>&nbsp;<span class="num" id="3182386">0</span><span class="op" id="3182387">,</span>&nbsp;<span class="ident" id="3182389">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182400">for</span>&nbsp;<span class="ident" id="3182404">b</span>&nbsp;<span class="op" id="3182406">&lt;=</span>&nbsp;<span class="ident" id="3182409">n</span>&nbsp;<span class="op" id="3182411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182415">insertionSort</span><span class="op" id="3182428">(</span><span class="ident" id="3182429">data</span><span class="op" id="3182433">,</span>&nbsp;<span class="ident" id="3182435">a</span><span class="op" id="3182436">,</span>&nbsp;<span class="ident" id="3182438">b</span><span class="op" id="3182439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182443">a</span>&nbsp;<span class="op" id="3182445">=</span>&nbsp;<span class="ident" id="3182447">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182451">b</span>&nbsp;<span class="op" id="3182453">+=</span>&nbsp;<span class="ident" id="3182456">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182470">insertionSort</span><span class="op" id="3182483">(</span><span class="ident" id="3182484">data</span><span class="op" id="3182488">,</span>&nbsp;<span class="ident" id="3182490">a</span><span class="op" id="3182491">,</span>&nbsp;<span class="ident" id="3182493">n</span><span class="op" id="3182494">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182498">for</span>&nbsp;<span class="ident" id="3182502">blockSize</span>&nbsp;<span class="op" id="3182512">&lt;</span>&nbsp;<span class="ident" id="3182514">n</span>&nbsp;<span class="op" id="3182516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182520">a</span><span class="op" id="3182521">,</span>&nbsp;<span class="ident" id="3182523">b</span>&nbsp;<span class="op" id="3182525">=</span>&nbsp;<span class="num" id="3182527">0</span><span class="op" id="3182528">,</span>&nbsp;<span class="num" id="3182530">2</span><span class="op" id="3182531">*</span><span class="ident" id="3182532">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3182544">for</span>&nbsp;<span class="ident" id="3182548">b</span>&nbsp;<span class="op" id="3182550">&lt;=</span>&nbsp;<span class="ident" id="3182553">n</span>&nbsp;<span class="op" id="3182555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182560">symMerge</span><span class="op" id="3182568">(</span><span class="ident" id="3182569">data</span><span class="op" id="3182573">,</span>&nbsp;<span class="ident" id="3182575">a</span><span class="op" id="3182576">,</span>&nbsp;<span class="ident" id="3182578">a</span><span class="op" id="3182579">+</span><span class="ident" id="3182580">blockSize</span><span class="op" id="3182589">,</span>&nbsp;<span class="ident" id="3182591">b</span><span class="op" id="3182592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182597">a</span>&nbsp;<span class="op" id="3182599">=</span>&nbsp;<span class="ident" id="3182601">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182606">b</span>&nbsp;<span class="op" id="3182608">+=</span>&nbsp;<span class="num" id="3182611">2</span>&nbsp;<span class="op" id="3182613">*</span>&nbsp;<span class="ident" id="3182615">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182627">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182631">symMerge</span><span class="op" id="3182639">(</span><span class="ident" id="3182640">data</span><span class="op" id="3182644">,</span>&nbsp;<span class="ident" id="3182646">a</span><span class="op" id="3182647">,</span>&nbsp;<span class="ident" id="3182649">a</span><span class="op" id="3182650">+</span><span class="ident" id="3182651">blockSize</span><span class="op" id="3182660">,</span>&nbsp;<span class="ident" id="3182662">n</span><span class="op" id="3182663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3182667">blockSize</span>&nbsp;<span class="op" id="3182677">*=</span>&nbsp;<span class="num" id="3182680">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3182683">}</span><br>
<span class="lineno"></span><span class="op" id="3182685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="3182688">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="3182765">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="3182842">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="3182917">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3182992">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="3183044">//</span><br>
<span class="lineno"></span><span class="comment" id="3183047">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="3183088">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="3183139">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="3183200">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="3183259">//</span><br>
<span class="lineno"></span><span class="comment" id="3183262">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3183337">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="3183417">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="3183494">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="3183537">func</span>&nbsp;<span class="ident" id="3183542">symMerge</span><span class="op" id="3183550">(</span><span class="ident" id="3183551">data</span>&nbsp;<span class="ident" id="3183556">Interface</span><span class="op" id="3183565">,</span>&nbsp;<span class="ident" id="3183567">a</span><span class="op" id="3183568">,</span>&nbsp;<span class="ident" id="3183570">m</span><span class="op" id="3183571">,</span>&nbsp;<span class="ident" id="3183573">b</span>&nbsp;<span class="builtintype" id="3183575">int</span><span class="op" id="3183578">)</span>&nbsp;<span class="op" id="3183580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183583">if</span>&nbsp;<span class="ident" id="3183586">a</span>&nbsp;<span class="op" id="3183588">&gt;=</span>&nbsp;<span class="ident" id="3183591">m</span>&nbsp;<span class="op" id="3183593">||</span>&nbsp;<span class="ident" id="3183596">m</span>&nbsp;<span class="op" id="3183598">&gt;=</span>&nbsp;<span class="ident" id="3183601">b</span>&nbsp;<span class="op" id="3183603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183607">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183619">mid</span>&nbsp;<span class="op" id="3183623">:=</span>&nbsp;<span class="ident" id="3183626">a</span>&nbsp;<span class="op" id="3183628">+</span>&nbsp;<span class="op" id="3183630">(</span><span class="ident" id="3183631">b</span><span class="op" id="3183632">-</span><span class="ident" id="3183633">a</span><span class="op" id="3183634">)</span><span class="op" id="3183635">/</span><span class="num" id="3183636">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183639">n</span>&nbsp;<span class="op" id="3183641">:=</span>&nbsp;<span class="ident" id="3183644">mid</span>&nbsp;<span class="op" id="3183648">+</span>&nbsp;<span class="ident" id="3183650">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183653">start</span>&nbsp;<span class="op" id="3183659">:=</span>&nbsp;<span class="num" id="3183662">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183665">if</span>&nbsp;<span class="ident" id="3183668">m</span>&nbsp;<span class="op" id="3183670">&gt;</span>&nbsp;<span class="ident" id="3183672">mid</span>&nbsp;<span class="op" id="3183676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183680">start</span>&nbsp;<span class="op" id="3183686">=</span>&nbsp;<span class="ident" id="3183688">n</span>&nbsp;<span class="op" id="3183690">-</span>&nbsp;<span class="ident" id="3183692">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183696">r</span><span class="op" id="3183697">,</span>&nbsp;<span class="ident" id="3183699">p</span>&nbsp;<span class="op" id="3183701">:=</span>&nbsp;<span class="ident" id="3183704">mid</span><span class="op" id="3183707">,</span>&nbsp;<span class="ident" id="3183709">n</span><span class="op" id="3183710">-</span><span class="num" id="3183711">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183715">for</span>&nbsp;<span class="ident" id="3183719">start</span>&nbsp;<span class="op" id="3183725">&lt;</span>&nbsp;<span class="ident" id="3183727">r</span>&nbsp;<span class="op" id="3183729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183734">c</span>&nbsp;<span class="op" id="3183736">:=</span>&nbsp;<span class="ident" id="3183739">start</span>&nbsp;<span class="op" id="3183745">+</span>&nbsp;<span class="op" id="3183747">(</span><span class="ident" id="3183748">r</span><span class="op" id="3183749">-</span><span class="ident" id="3183750">start</span><span class="op" id="3183755">)</span><span class="op" id="3183756">/</span><span class="num" id="3183757">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183762">if</span>&nbsp;<span class="op" id="3183765">!</span><span class="ident" id="3183766">data</span><span class="op" id="3183770">.</span><span class="ident" id="3183771">Less</span><span class="op" id="3183775">(</span><span class="ident" id="3183776">p</span><span class="op" id="3183777">-</span><span class="ident" id="3183778">c</span><span class="op" id="3183779">,</span>&nbsp;<span class="ident" id="3183781">c</span><span class="op" id="3183782">)</span>&nbsp;<span class="op" id="3183784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183790">start</span>&nbsp;<span class="op" id="3183796">=</span>&nbsp;<span class="ident" id="3183798">c</span>&nbsp;<span class="op" id="3183800">+</span>&nbsp;<span class="num" id="3183802">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183807">}</span>&nbsp;<span class="keyword" id="3183809">else</span>&nbsp;<span class="op" id="3183814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183820">r</span>&nbsp;<span class="op" id="3183822">=</span>&nbsp;<span class="ident" id="3183824">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183836">}</span>&nbsp;<span class="keyword" id="3183838">else</span>&nbsp;<span class="op" id="3183843">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183847">start</span>&nbsp;<span class="op" id="3183853">=</span>&nbsp;<span class="ident" id="3183855">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183859">r</span><span class="op" id="3183860">,</span>&nbsp;<span class="ident" id="3183862">p</span>&nbsp;<span class="op" id="3183864">:=</span>&nbsp;<span class="ident" id="3183867">m</span><span class="op" id="3183868">,</span>&nbsp;<span class="ident" id="3183870">n</span><span class="op" id="3183871">-</span><span class="num" id="3183872">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183876">for</span>&nbsp;<span class="ident" id="3183880">start</span>&nbsp;<span class="op" id="3183886">&lt;</span>&nbsp;<span class="ident" id="3183888">r</span>&nbsp;<span class="op" id="3183890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183895">c</span>&nbsp;<span class="op" id="3183897">:=</span>&nbsp;<span class="ident" id="3183900">start</span>&nbsp;<span class="op" id="3183906">+</span>&nbsp;<span class="op" id="3183908">(</span><span class="ident" id="3183909">r</span><span class="op" id="3183910">-</span><span class="ident" id="3183911">start</span><span class="op" id="3183916">)</span><span class="op" id="3183917">/</span><span class="num" id="3183918">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3183923">if</span>&nbsp;<span class="op" id="3183926">!</span><span class="ident" id="3183927">data</span><span class="op" id="3183931">.</span><span class="ident" id="3183932">Less</span><span class="op" id="3183936">(</span><span class="ident" id="3183937">p</span><span class="op" id="3183938">-</span><span class="ident" id="3183939">c</span><span class="op" id="3183940">,</span>&nbsp;<span class="ident" id="3183942">c</span><span class="op" id="3183943">)</span>&nbsp;<span class="op" id="3183945">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183951">start</span>&nbsp;<span class="op" id="3183957">=</span>&nbsp;<span class="ident" id="3183959">c</span>&nbsp;<span class="op" id="3183961">+</span>&nbsp;<span class="num" id="3183963">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183968">}</span>&nbsp;<span class="keyword" id="3183970">else</span>&nbsp;<span class="op" id="3183975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3183981">r</span>&nbsp;<span class="op" id="3183983">=</span>&nbsp;<span class="ident" id="3183985">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183994">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3183997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184000">end</span>&nbsp;<span class="op" id="3184004">:=</span>&nbsp;<span class="ident" id="3184007">n</span>&nbsp;<span class="op" id="3184009">-</span>&nbsp;<span class="ident" id="3184011">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184018">rotate</span><span class="op" id="3184024">(</span><span class="ident" id="3184025">data</span><span class="op" id="3184029">,</span>&nbsp;<span class="ident" id="3184031">start</span><span class="op" id="3184036">,</span>&nbsp;<span class="ident" id="3184038">m</span><span class="op" id="3184039">,</span>&nbsp;<span class="ident" id="3184041">end</span><span class="op" id="3184044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184047">symMerge</span><span class="op" id="3184055">(</span><span class="ident" id="3184056">data</span><span class="op" id="3184060">,</span>&nbsp;<span class="ident" id="3184062">a</span><span class="op" id="3184063">,</span>&nbsp;<span class="ident" id="3184065">start</span><span class="op" id="3184070">,</span>&nbsp;<span class="ident" id="3184072">mid</span><span class="op" id="3184075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184078">symMerge</span><span class="op" id="3184086">(</span><span class="ident" id="3184087">data</span><span class="op" id="3184091">,</span>&nbsp;<span class="ident" id="3184093">mid</span><span class="op" id="3184096">,</span>&nbsp;<span class="ident" id="3184098">end</span><span class="op" id="3184101">,</span>&nbsp;<span class="ident" id="3184103">b</span><span class="op" id="3184104">)</span><br>
<span class="lineno">390</span><span class="op" id="3184106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3184109">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="3184184">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="3184239">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="3184295">func</span>&nbsp;<span class="ident" id="3184300">rotate</span><span class="op" id="3184306">(</span><span class="ident" id="3184307">data</span>&nbsp;<span class="ident" id="3184312">Interface</span><span class="op" id="3184321">,</span>&nbsp;<span class="ident" id="3184323">a</span><span class="op" id="3184324">,</span>&nbsp;<span class="ident" id="3184326">m</span><span class="op" id="3184327">,</span>&nbsp;<span class="ident" id="3184329">b</span>&nbsp;<span class="builtintype" id="3184331">int</span><span class="op" id="3184334">)</span>&nbsp;<span class="op" id="3184336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184339">i</span>&nbsp;<span class="op" id="3184341">:=</span>&nbsp;<span class="ident" id="3184344">m</span>&nbsp;<span class="op" id="3184346">-</span>&nbsp;<span class="ident" id="3184348">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184351">if</span>&nbsp;<span class="ident" id="3184354">i</span>&nbsp;<span class="op" id="3184356">==</span>&nbsp;<span class="num" id="3184359">0</span>&nbsp;<span class="op" id="3184361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184365">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184373">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184376">j</span>&nbsp;<span class="op" id="3184378">:=</span>&nbsp;<span class="ident" id="3184381">b</span>&nbsp;<span class="op" id="3184383">-</span>&nbsp;<span class="ident" id="3184385">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184388">if</span>&nbsp;<span class="ident" id="3184391">j</span>&nbsp;<span class="op" id="3184393">==</span>&nbsp;<span class="num" id="3184396">0</span>&nbsp;<span class="op" id="3184398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184402">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184414">if</span>&nbsp;<span class="ident" id="3184417">i</span>&nbsp;<span class="op" id="3184419">==</span>&nbsp;<span class="ident" id="3184422">j</span>&nbsp;<span class="op" id="3184424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184428">swapRange</span><span class="op" id="3184437">(</span><span class="ident" id="3184438">data</span><span class="op" id="3184442">,</span>&nbsp;<span class="ident" id="3184444">a</span><span class="op" id="3184445">,</span>&nbsp;<span class="ident" id="3184447">m</span><span class="op" id="3184448">,</span>&nbsp;<span class="ident" id="3184450">i</span><span class="op" id="3184451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184455">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184467">p</span>&nbsp;<span class="op" id="3184469">:=</span>&nbsp;<span class="ident" id="3184472">a</span>&nbsp;<span class="op" id="3184474">+</span>&nbsp;<span class="ident" id="3184476">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184479">for</span>&nbsp;<span class="ident" id="3184483">i</span>&nbsp;<span class="op" id="3184485">!=</span>&nbsp;<span class="ident" id="3184488">j</span>&nbsp;<span class="op" id="3184490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3184494">if</span>&nbsp;<span class="ident" id="3184497">i</span>&nbsp;<span class="op" id="3184499">&gt;</span>&nbsp;<span class="ident" id="3184501">j</span>&nbsp;<span class="op" id="3184503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184508">swapRange</span><span class="op" id="3184517">(</span><span class="ident" id="3184518">data</span><span class="op" id="3184522">,</span>&nbsp;<span class="ident" id="3184524">p</span><span class="op" id="3184525">-</span><span class="ident" id="3184526">i</span><span class="op" id="3184527">,</span>&nbsp;<span class="ident" id="3184529">p</span><span class="op" id="3184530">,</span>&nbsp;<span class="ident" id="3184532">j</span><span class="op" id="3184533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184538">i</span>&nbsp;<span class="op" id="3184540">-=</span>&nbsp;<span class="ident" id="3184543">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184547">}</span>&nbsp;<span class="keyword" id="3184549">else</span>&nbsp;<span class="op" id="3184554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184559">swapRange</span><span class="op" id="3184568">(</span><span class="ident" id="3184569">data</span><span class="op" id="3184573">,</span>&nbsp;<span class="ident" id="3184575">p</span><span class="op" id="3184576">-</span><span class="ident" id="3184577">i</span><span class="op" id="3184578">,</span>&nbsp;<span class="ident" id="3184580">p</span><span class="op" id="3184581">+</span><span class="ident" id="3184582">j</span><span class="op" id="3184583">-</span><span class="ident" id="3184584">i</span><span class="op" id="3184585">,</span>&nbsp;<span class="ident" id="3184587">i</span><span class="op" id="3184588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184593">j</span>&nbsp;<span class="op" id="3184595">-=</span>&nbsp;<span class="ident" id="3184598">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3184605">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3184608">swapRange</span><span class="op" id="3184617">(</span><span class="ident" id="3184618">data</span><span class="op" id="3184622">,</span>&nbsp;<span class="ident" id="3184624">p</span><span class="op" id="3184625">-</span><span class="ident" id="3184626">i</span><span class="op" id="3184627">,</span>&nbsp;<span class="ident" id="3184629">p</span><span class="op" id="3184630">,</span>&nbsp;<span class="ident" id="3184632">i</span><span class="op" id="3184633">)</span><br>
<span class="lineno"></span><span class="op" id="3184635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3184638">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
