<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html" class="current">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6050369">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6050424">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6050478">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6050529">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6050562">package</span>&nbsp;<span class="ident" id="6050570">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6050578">import</span>&nbsp;<span class="op" id="6050585">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6050588">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6050598">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6050604">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6050607">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6050676">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6050722">func</span>&nbsp;<span class="ident" id="6050727">unixSyslog</span><span class="op" id="6050737">(</span><span class="op" id="6050738">)</span>&nbsp;<span class="op" id="6050740">(</span><span class="ident" id="6050741">conn</span>&nbsp;<span class="ident" id="6050746">serverConn</span><span class="op" id="6050756">,</span>&nbsp;<span class="ident" id="6050758">err</span>&nbsp;<span class="builtintype" id="6050762">error</span><span class="op" id="6050767">)</span>&nbsp;<span class="op" id="6050769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050772">logTypes</span>&nbsp;<span class="op" id="6050781">:=</span>&nbsp;<span class="op" id="6050784">[</span><span class="op" id="6050785">]</span><span class="builtintype" id="6050786">string</span><span class="op" id="6050792">{</span><span class="string" id="6050793">&#34;unixgram&#34;</span><span class="op" id="6050803">,</span>&nbsp;<span class="string" id="6050805">&#34;unix&#34;</span><span class="op" id="6050811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050814">logPaths</span>&nbsp;<span class="op" id="6050823">:=</span>&nbsp;<span class="op" id="6050826">[</span><span class="op" id="6050827">]</span><span class="builtintype" id="6050828">string</span><span class="op" id="6050834">{</span><span class="string" id="6050835">&#34;/dev/log&#34;</span><span class="op" id="6050845">,</span>&nbsp;<span class="string" id="6050847">&#34;/var/run/syslog&#34;</span><span class="op" id="6050864">,</span>&nbsp;<span class="string" id="6050866">&#34;/var/run/log&#34;</span><span class="op" id="6050880">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050883">for</span>&nbsp;<span class="ident" id="6050887">_</span><span class="op" id="6050888">,</span>&nbsp;<span class="ident" id="6050890">network</span>&nbsp;<span class="op" id="6050898">:=</span>&nbsp;<span class="keyword" id="6050901">range</span>&nbsp;<span class="ident" id="6050907">logTypes</span>&nbsp;<span class="op" id="6050916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050920">for</span>&nbsp;<span class="ident" id="6050924">_</span><span class="op" id="6050925">,</span>&nbsp;<span class="ident" id="6050927">path</span>&nbsp;<span class="op" id="6050932">:=</span>&nbsp;<span class="keyword" id="6050935">range</span>&nbsp;<span class="ident" id="6050941">logPaths</span>&nbsp;<span class="op" id="6050950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050955">conn</span><span class="op" id="6050959">,</span>&nbsp;<span class="ident" id="6050961">err</span>&nbsp;<span class="op" id="6050965">:=</span>&nbsp;<span class="ident" id="6050968">net</span><span class="op" id="6050971">.</span><span class="ident" id="6050972">Dial</span><span class="op" id="6050976">(</span><span class="ident" id="6050977">network</span><span class="op" id="6050984">,</span>&nbsp;<span class="ident" id="6050986">path</span><span class="op" id="6050990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050995">if</span>&nbsp;<span class="ident" id="6050998">err</span>&nbsp;<span class="op" id="6051002">!=</span>&nbsp;<span class="builtintype" id="6051005">nil</span>&nbsp;<span class="op" id="6051009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051015">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051027">}</span>&nbsp;<span class="keyword" id="6051029">else</span>&nbsp;<span class="op" id="6051034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051040">return</span>&nbsp;<span class="op" id="6051047">&amp;</span><span class="ident" id="6051048">netConn</span><span class="op" id="6051055">{</span><span class="ident" id="6051056">conn</span><span class="op" id="6051060">:</span>&nbsp;<span class="ident" id="6051062">conn</span><span class="op" id="6051066">,</span>&nbsp;<span class="ident" id="6051068">local</span><span class="op" id="6051073">:</span>&nbsp;<span class="builtintype" id="6051075">true</span><span class="op" id="6051079">}</span><span class="op" id="6051080">,</span>&nbsp;<span class="builtintype" id="6051082">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051096">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051099">return</span>&nbsp;<span class="builtintype" id="6051106">nil</span><span class="op" id="6051109">,</span>&nbsp;<span class="ident" id="6051111">errors</span><span class="op" id="6051117">.</span><span class="ident" id="6051118">New</span><span class="op" id="6051121">(</span><span class="string" id="6051122">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6051150">)</span><br>
<span class="lineno"></span><span class="op" id="6051152">}</span>
</div>
</body>
</html>
