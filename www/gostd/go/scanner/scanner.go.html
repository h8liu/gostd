<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html" class="current">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2955207">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2955262">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2955316">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2955367">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="2955427">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="2955486">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2955532">//</span><br>
<span class="lineno"></span><span class="keyword" id="2955535">package</span>&nbsp;<span class="ident" id="2955543">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2955552">import</span>&nbsp;<span class="op" id="2955559">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955562">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955571">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955578">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955590">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955607">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955618">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2955629">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="2955644">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="2955647">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2955720">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2955793">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2955867">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="2955891">//</span><br>
<span class="lineno"></span><span class="keyword" id="2955894">type</span>&nbsp;<span class="ident" id="2955899">ErrorHandler</span>&nbsp;<span class="keyword" id="2955912">func</span><span class="op" id="2955916">(</span><span class="ident" id="2955917">pos</span>&nbsp;<span class="ident" id="2955921">token</span><span class="op" id="2955926">.</span><span class="ident" id="2955927">Position</span><span class="op" id="2955935">,</span>&nbsp;<span class="ident" id="2955937">msg</span>&nbsp;<span class="builtintype" id="2955941">string</span><span class="op" id="2955947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2955950">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="2956015">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="2956077">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="2956135">//</span><br>
<span class="lineno"></span><span class="keyword" id="2956138">type</span>&nbsp;<span class="ident" id="2956143">Scanner</span>&nbsp;<span class="keyword" id="2956151">struct</span>&nbsp;<span class="op" id="2956158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956161">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956181">file</span>&nbsp;<span class="op" id="2956186">*</span><span class="ident" id="2956187">token</span><span class="op" id="2956192">.</span><span class="ident" id="2956193">File</span>&nbsp;&nbsp;<span class="comment" id="2956199">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956222">dir</span>&nbsp;&nbsp;<span class="builtintype" id="2956227">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2956240">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956277">src</span>&nbsp;&nbsp;<span class="op" id="2956282">[</span><span class="op" id="2956283">]</span><span class="builtintype" id="2956284">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2956295">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956306">err</span>&nbsp;&nbsp;<span class="ident" id="2956311">ErrorHandler</span>&nbsp;<span class="comment" id="2956324">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956352">mode</span>&nbsp;<span class="ident" id="2956357">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2956370">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956389">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956408">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2956419">rune</span>&nbsp;<span class="comment" id="2956424">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956446">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2956457">int</span>&nbsp;&nbsp;<span class="comment" id="2956462">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956483">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2956494">int</span>&nbsp;&nbsp;<span class="comment" id="2956499">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956553">lineOffset</span>&nbsp;<span class="builtintype" id="2956564">int</span>&nbsp;&nbsp;<span class="comment" id="2956569">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956593">insertSemi</span>&nbsp;<span class="builtintype" id="2956604">bool</span>&nbsp;<span class="comment" id="2956609">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956653">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956685">ErrorCount</span>&nbsp;<span class="builtintype" id="2956696">int</span>&nbsp;<span class="comment" id="2956700">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="2956732">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="2956735">const</span>&nbsp;<span class="ident" id="2956741">bom</span>&nbsp;<span class="op" id="2956745">=</span>&nbsp;<span class="num" id="2956747">0xFEFF</span>&nbsp;<span class="comment" id="2956754">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2956814">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="2956855">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="2956886">//</span><br>
<span class="lineno"></span><span class="keyword" id="2956889">func</span>&nbsp;<span class="op" id="2956894">(</span><span class="ident" id="2956895">s</span>&nbsp;<span class="op" id="2956897">*</span><span class="ident" id="2956898">Scanner</span><span class="op" id="2956905">)</span>&nbsp;<span class="ident" id="2956907">next</span><span class="op" id="2956911">(</span><span class="op" id="2956912">)</span>&nbsp;<span class="op" id="2956914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956917">if</span>&nbsp;<span class="ident" id="2956920">s</span><span class="op" id="2956921">.</span><span class="ident" id="2956922">rdOffset</span>&nbsp;<span class="op" id="2956931">&lt;</span>&nbsp;<span class="builtinfunc" id="2956933">len</span><span class="op" id="2956936">(</span><span class="ident" id="2956937">s</span><span class="op" id="2956938">.</span><span class="ident" id="2956939">src</span><span class="op" id="2956942">)</span>&nbsp;<span class="op" id="2956944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956948">s</span><span class="op" id="2956949">.</span><span class="ident" id="2956950">offset</span>&nbsp;<span class="op" id="2956957">=</span>&nbsp;<span class="ident" id="2956959">s</span><span class="op" id="2956960">.</span><span class="ident" id="2956961">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956972">if</span>&nbsp;<span class="ident" id="2956975">s</span><span class="op" id="2956976">.</span><span class="ident" id="2956977">ch</span>&nbsp;<span class="op" id="2956980">==</span>&nbsp;<span class="string" id="2956983">&#39;\n&#39;</span>&nbsp;<span class="op" id="2956988">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956993">s</span><span class="op" id="2956994">.</span><span class="ident" id="2956995">lineOffset</span>&nbsp;<span class="op" id="2957006">=</span>&nbsp;<span class="ident" id="2957008">s</span><span class="op" id="2957009">.</span><span class="ident" id="2957010">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957020">s</span><span class="op" id="2957021">.</span><span class="ident" id="2957022">file</span><span class="op" id="2957026">.</span><span class="ident" id="2957027">AddLine</span><span class="op" id="2957034">(</span><span class="ident" id="2957035">s</span><span class="op" id="2957036">.</span><span class="ident" id="2957037">offset</span><span class="op" id="2957043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957051">r</span><span class="op" id="2957052">,</span>&nbsp;<span class="ident" id="2957054">w</span>&nbsp;<span class="op" id="2957056">:=</span>&nbsp;<span class="builtintype" id="2957059">rune</span><span class="op" id="2957063">(</span><span class="ident" id="2957064">s</span><span class="op" id="2957065">.</span><span class="ident" id="2957066">src</span><span class="op" id="2957069">[</span><span class="ident" id="2957070">s</span><span class="op" id="2957071">.</span><span class="ident" id="2957072">rdOffset</span><span class="op" id="2957080">]</span><span class="op" id="2957081">)</span><span class="op" id="2957082">,</span>&nbsp;<span class="num" id="2957084">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957088">switch</span>&nbsp;<span class="op" id="2957095">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957099">case</span>&nbsp;<span class="ident" id="2957104">r</span>&nbsp;<span class="op" id="2957106">==</span>&nbsp;<span class="num" id="2957109">0</span><span class="op" id="2957110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957115">s</span><span class="op" id="2957116">.</span><span class="builtintype" id="2957117">error</span><span class="op" id="2957122">(</span><span class="ident" id="2957123">s</span><span class="op" id="2957124">.</span><span class="ident" id="2957125">offset</span><span class="op" id="2957131">,</span>&nbsp;<span class="string" id="2957133">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="2957156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957160">case</span>&nbsp;<span class="ident" id="2957165">r</span>&nbsp;<span class="op" id="2957167">&gt;=</span>&nbsp;<span class="num" id="2957170">0x80</span><span class="op" id="2957174">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2957179">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957195">r</span><span class="op" id="2957196">,</span>&nbsp;<span class="ident" id="2957198">w</span>&nbsp;<span class="op" id="2957200">=</span>&nbsp;<span class="ident" id="2957202">utf8</span><span class="op" id="2957206">.</span><span class="ident" id="2957207">DecodeRune</span><span class="op" id="2957217">(</span><span class="ident" id="2957218">s</span><span class="op" id="2957219">.</span><span class="ident" id="2957220">src</span><span class="op" id="2957223">[</span><span class="ident" id="2957224">s</span><span class="op" id="2957225">.</span><span class="ident" id="2957226">rdOffset</span><span class="op" id="2957234">:</span><span class="op" id="2957235">]</span><span class="op" id="2957236">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957241">if</span>&nbsp;<span class="ident" id="2957244">r</span>&nbsp;<span class="op" id="2957246">==</span>&nbsp;<span class="ident" id="2957249">utf8</span><span class="op" id="2957253">.</span><span class="ident" id="2957254">RuneError</span>&nbsp;<span class="op" id="2957264">&amp;&amp;</span>&nbsp;<span class="ident" id="2957267">w</span>&nbsp;<span class="op" id="2957269">==</span>&nbsp;<span class="num" id="2957272">1</span>&nbsp;<span class="op" id="2957274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957280">s</span><span class="op" id="2957281">.</span><span class="builtintype" id="2957282">error</span><span class="op" id="2957287">(</span><span class="ident" id="2957288">s</span><span class="op" id="2957289">.</span><span class="ident" id="2957290">offset</span><span class="op" id="2957296">,</span>&nbsp;<span class="string" id="2957298">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="2957322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957327">}</span>&nbsp;<span class="keyword" id="2957329">else</span>&nbsp;<span class="keyword" id="2957334">if</span>&nbsp;<span class="ident" id="2957337">r</span>&nbsp;<span class="op" id="2957339">==</span>&nbsp;<span class="ident" id="2957342">bom</span>&nbsp;<span class="op" id="2957346">&amp;&amp;</span>&nbsp;<span class="ident" id="2957349">s</span><span class="op" id="2957350">.</span><span class="ident" id="2957351">offset</span>&nbsp;<span class="op" id="2957358">&gt;</span>&nbsp;<span class="num" id="2957360">0</span>&nbsp;<span class="op" id="2957362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957368">s</span><span class="op" id="2957369">.</span><span class="builtintype" id="2957370">error</span><span class="op" id="2957375">(</span><span class="ident" id="2957376">s</span><span class="op" id="2957377">.</span><span class="ident" id="2957378">offset</span><span class="op" id="2957384">,</span>&nbsp;<span class="string" id="2957386">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="2957411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957416">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957424">s</span><span class="op" id="2957425">.</span><span class="ident" id="2957426">rdOffset</span>&nbsp;<span class="op" id="2957435">+=</span>&nbsp;<span class="ident" id="2957438">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957442">s</span><span class="op" id="2957443">.</span><span class="ident" id="2957444">ch</span>&nbsp;<span class="op" id="2957447">=</span>&nbsp;<span class="ident" id="2957449">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957452">}</span>&nbsp;<span class="keyword" id="2957454">else</span>&nbsp;<span class="op" id="2957459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957463">s</span><span class="op" id="2957464">.</span><span class="ident" id="2957465">offset</span>&nbsp;<span class="op" id="2957472">=</span>&nbsp;<span class="builtinfunc" id="2957474">len</span><span class="op" id="2957477">(</span><span class="ident" id="2957478">s</span><span class="op" id="2957479">.</span><span class="ident" id="2957480">src</span><span class="op" id="2957483">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957487">if</span>&nbsp;<span class="ident" id="2957490">s</span><span class="op" id="2957491">.</span><span class="ident" id="2957492">ch</span>&nbsp;<span class="op" id="2957495">==</span>&nbsp;<span class="string" id="2957498">&#39;\n&#39;</span>&nbsp;<span class="op" id="2957503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957508">s</span><span class="op" id="2957509">.</span><span class="ident" id="2957510">lineOffset</span>&nbsp;<span class="op" id="2957521">=</span>&nbsp;<span class="ident" id="2957523">s</span><span class="op" id="2957524">.</span><span class="ident" id="2957525">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957535">s</span><span class="op" id="2957536">.</span><span class="ident" id="2957537">file</span><span class="op" id="2957541">.</span><span class="ident" id="2957542">AddLine</span><span class="op" id="2957549">(</span><span class="ident" id="2957550">s</span><span class="op" id="2957551">.</span><span class="ident" id="2957552">offset</span><span class="op" id="2957558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957566">s</span><span class="op" id="2957567">.</span><span class="ident" id="2957568">ch</span>&nbsp;<span class="op" id="2957571">=</span>&nbsp;<span class="op" id="2957573">-</span><span class="num" id="2957574">1</span>&nbsp;<span class="comment" id="2957576">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957584">}</span><br>
<span class="lineno"></span><span class="op" id="2957586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2957589">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="2957631">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="2957665">//</span><br>
<span class="lineno"></span><span class="keyword" id="2957668">type</span>&nbsp;<span class="ident" id="2957673">Mode</span>&nbsp;<span class="builtintype" id="2957678">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2957684">const</span>&nbsp;<span class="op" id="2957690">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957693">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2957709">Mode</span>&nbsp;<span class="op" id="2957714">=</span>&nbsp;<span class="num" id="2957716">1</span>&nbsp;<span class="op" id="2957718">&lt;&lt;</span>&nbsp;<span class="ident" id="2957721">iota</span>&nbsp;<span class="comment" id="2957726">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957764">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2957797">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="2957858">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2957861">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2957932">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="2958003">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="2958075">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2958145">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2958216">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="2958271">//</span><br>
<span class="lineno">105</span><span class="comment" id="2958274">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2958345">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="2958415">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2958489">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="2958529">//</span><br>
<span class="lineno">110</span><span class="comment" id="2958532">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="2958607">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2958623">//</span><br>
<span class="lineno"></span><span class="keyword" id="2958626">func</span>&nbsp;<span class="op" id="2958631">(</span><span class="ident" id="2958632">s</span>&nbsp;<span class="op" id="2958634">*</span><span class="ident" id="2958635">Scanner</span><span class="op" id="2958642">)</span>&nbsp;<span class="ident" id="2958644">Init</span><span class="op" id="2958648">(</span><span class="ident" id="2958649">file</span>&nbsp;<span class="op" id="2958654">*</span><span class="ident" id="2958655">token</span><span class="op" id="2958660">.</span><span class="ident" id="2958661">File</span><span class="op" id="2958665">,</span>&nbsp;<span class="ident" id="2958667">src</span>&nbsp;<span class="op" id="2958671">[</span><span class="op" id="2958672">]</span><span class="builtintype" id="2958673">byte</span><span class="op" id="2958677">,</span>&nbsp;<span class="ident" id="2958679">err</span>&nbsp;<span class="ident" id="2958683">ErrorHandler</span><span class="op" id="2958695">,</span>&nbsp;<span class="ident" id="2958697">mode</span>&nbsp;<span class="ident" id="2958702">Mode</span><span class="op" id="2958706">)</span>&nbsp;<span class="op" id="2958708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2958711">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958779">if</span>&nbsp;<span class="ident" id="2958782">file</span><span class="op" id="2958786">.</span><span class="ident" id="2958787">Size</span><span class="op" id="2958791">(</span><span class="op" id="2958792">)</span>&nbsp;<span class="op" id="2958794">!=</span>&nbsp;<span class="builtinfunc" id="2958797">len</span><span class="op" id="2958800">(</span><span class="ident" id="2958801">src</span><span class="op" id="2958804">)</span>&nbsp;<span class="op" id="2958806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2958810">panic</span><span class="op" id="2958815">(</span><span class="ident" id="2958816">fmt</span><span class="op" id="2958819">.</span><span class="ident" id="2958820">Sprintf</span><span class="op" id="2958827">(</span><span class="string" id="2958828">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="2958872">,</span>&nbsp;<span class="ident" id="2958874">file</span><span class="op" id="2958878">.</span><span class="ident" id="2958879">Size</span><span class="op" id="2958883">(</span><span class="op" id="2958884">)</span><span class="op" id="2958885">,</span>&nbsp;<span class="builtinfunc" id="2958887">len</span><span class="op" id="2958890">(</span><span class="ident" id="2958891">src</span><span class="op" id="2958894">)</span><span class="op" id="2958895">)</span><span class="op" id="2958896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958902">s</span><span class="op" id="2958903">.</span><span class="ident" id="2958904">file</span>&nbsp;<span class="op" id="2958909">=</span>&nbsp;<span class="ident" id="2958911">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958917">s</span><span class="op" id="2958918">.</span><span class="ident" id="2958919">dir</span><span class="op" id="2958922">,</span>&nbsp;<span class="ident" id="2958924">_</span>&nbsp;<span class="op" id="2958926">=</span>&nbsp;<span class="ident" id="2958928">filepath</span><span class="op" id="2958936">.</span><span class="ident" id="2958937">Split</span><span class="op" id="2958942">(</span><span class="ident" id="2958943">file</span><span class="op" id="2958947">.</span><span class="ident" id="2958948">Name</span><span class="op" id="2958952">(</span><span class="op" id="2958953">)</span><span class="op" id="2958954">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958957">s</span><span class="op" id="2958958">.</span><span class="ident" id="2958959">src</span>&nbsp;<span class="op" id="2958963">=</span>&nbsp;<span class="ident" id="2958965">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958970">s</span><span class="op" id="2958971">.</span><span class="ident" id="2958972">err</span>&nbsp;<span class="op" id="2958976">=</span>&nbsp;<span class="ident" id="2958978">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958983">s</span><span class="op" id="2958984">.</span><span class="ident" id="2958985">mode</span>&nbsp;<span class="op" id="2958990">=</span>&nbsp;<span class="ident" id="2958992">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958999">s</span><span class="op" id="2959000">.</span><span class="ident" id="2959001">ch</span>&nbsp;<span class="op" id="2959004">=</span>&nbsp;<span class="string" id="2959006">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959011">s</span><span class="op" id="2959012">.</span><span class="ident" id="2959013">offset</span>&nbsp;<span class="op" id="2959020">=</span>&nbsp;<span class="num" id="2959022">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959025">s</span><span class="op" id="2959026">.</span><span class="ident" id="2959027">rdOffset</span>&nbsp;<span class="op" id="2959036">=</span>&nbsp;<span class="num" id="2959038">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959041">s</span><span class="op" id="2959042">.</span><span class="ident" id="2959043">lineOffset</span>&nbsp;<span class="op" id="2959054">=</span>&nbsp;<span class="num" id="2959056">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959059">s</span><span class="op" id="2959060">.</span><span class="ident" id="2959061">insertSemi</span>&nbsp;<span class="op" id="2959072">=</span>&nbsp;<span class="builtintype" id="2959074">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959081">s</span><span class="op" id="2959082">.</span><span class="ident" id="2959083">ErrorCount</span>&nbsp;<span class="op" id="2959094">=</span>&nbsp;<span class="num" id="2959096">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959100">s</span><span class="op" id="2959101">.</span><span class="ident" id="2959102">next</span><span class="op" id="2959106">(</span><span class="op" id="2959107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959110">if</span>&nbsp;<span class="ident" id="2959113">s</span><span class="op" id="2959114">.</span><span class="ident" id="2959115">ch</span>&nbsp;<span class="op" id="2959118">==</span>&nbsp;<span class="ident" id="2959121">bom</span>&nbsp;<span class="op" id="2959125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959129">s</span><span class="op" id="2959130">.</span><span class="ident" id="2959131">next</span><span class="op" id="2959135">(</span><span class="op" id="2959136">)</span>&nbsp;<span class="comment" id="2959138">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959171">}</span><br>
<span class="lineno">135</span><span class="op" id="2959173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2959176">func</span>&nbsp;<span class="op" id="2959181">(</span><span class="ident" id="2959182">s</span>&nbsp;<span class="op" id="2959184">*</span><span class="ident" id="2959185">Scanner</span><span class="op" id="2959192">)</span>&nbsp;<span class="builtintype" id="2959194">error</span><span class="op" id="2959199">(</span><span class="ident" id="2959200">offs</span>&nbsp;<span class="builtintype" id="2959205">int</span><span class="op" id="2959208">,</span>&nbsp;<span class="ident" id="2959210">msg</span>&nbsp;<span class="builtintype" id="2959214">string</span><span class="op" id="2959220">)</span>&nbsp;<span class="op" id="2959222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959225">if</span>&nbsp;<span class="ident" id="2959228">s</span><span class="op" id="2959229">.</span><span class="ident" id="2959230">err</span>&nbsp;<span class="op" id="2959234">!=</span>&nbsp;<span class="ident" id="2959237">nil</span>&nbsp;<span class="op" id="2959241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959245">s</span><span class="op" id="2959246">.</span><span class="ident" id="2959247">err</span><span class="op" id="2959250">(</span><span class="ident" id="2959251">s</span><span class="op" id="2959252">.</span><span class="ident" id="2959253">file</span><span class="op" id="2959257">.</span><span class="ident" id="2959258">Position</span><span class="op" id="2959266">(</span><span class="ident" id="2959267">s</span><span class="op" id="2959268">.</span><span class="ident" id="2959269">file</span><span class="op" id="2959273">.</span><span class="ident" id="2959274">Pos</span><span class="op" id="2959277">(</span><span class="ident" id="2959278">offs</span><span class="op" id="2959282">)</span><span class="op" id="2959283">)</span><span class="op" id="2959284">,</span>&nbsp;<span class="ident" id="2959286">msg</span><span class="op" id="2959289">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959295">s</span><span class="op" id="2959296">.</span><span class="ident" id="2959297">ErrorCount</span><span class="op" id="2959307">++</span><br>
<span class="lineno"></span><span class="op" id="2959310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2959313">var</span>&nbsp;<span class="ident" id="2959317">prefix</span>&nbsp;<span class="op" id="2959324">=</span>&nbsp;<span class="op" id="2959326">[</span><span class="op" id="2959327">]</span><span class="builtintype" id="2959328">byte</span><span class="op" id="2959332">(</span><span class="string" id="2959333">&#34;//line&nbsp;&#34;</span><span class="op" id="2959342">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="2959345">func</span>&nbsp;<span class="op" id="2959350">(</span><span class="ident" id="2959351">s</span>&nbsp;<span class="op" id="2959353">*</span><span class="ident" id="2959354">Scanner</span><span class="op" id="2959361">)</span>&nbsp;<span class="ident" id="2959363">interpretLineComment</span><span class="op" id="2959383">(</span><span class="ident" id="2959384">text</span>&nbsp;<span class="op" id="2959389">[</span><span class="op" id="2959390">]</span><span class="builtintype" id="2959391">byte</span><span class="op" id="2959395">)</span>&nbsp;<span class="op" id="2959397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959400">if</span>&nbsp;<span class="ident" id="2959403">bytes</span><span class="op" id="2959408">.</span><span class="ident" id="2959409">HasPrefix</span><span class="op" id="2959418">(</span><span class="ident" id="2959419">text</span><span class="op" id="2959423">,</span>&nbsp;<span class="ident" id="2959425">prefix</span><span class="op" id="2959431">)</span>&nbsp;<span class="op" id="2959433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2959437">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959479">if</span>&nbsp;<span class="ident" id="2959482">i</span>&nbsp;<span class="op" id="2959484">:=</span>&nbsp;<span class="ident" id="2959487">bytes</span><span class="op" id="2959492">.</span><span class="ident" id="2959493">LastIndex</span><span class="op" id="2959502">(</span><span class="ident" id="2959503">text</span><span class="op" id="2959507">,</span>&nbsp;<span class="op" id="2959509">[</span><span class="op" id="2959510">]</span><span class="builtintype" id="2959511">byte</span><span class="op" id="2959515">{</span><span class="string" id="2959516">&#39;:&#39;</span><span class="op" id="2959519">}</span><span class="op" id="2959520">)</span><span class="op" id="2959521">;</span>&nbsp;<span class="ident" id="2959523">i</span>&nbsp;<span class="op" id="2959525">&gt;</span>&nbsp;<span class="num" id="2959527">0</span>&nbsp;<span class="op" id="2959529">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959534">if</span>&nbsp;<span class="ident" id="2959537">line</span><span class="op" id="2959541">,</span>&nbsp;<span class="ident" id="2959543">err</span>&nbsp;<span class="op" id="2959547">:=</span>&nbsp;<span class="ident" id="2959550">strconv</span><span class="op" id="2959557">.</span><span class="ident" id="2959558">Atoi</span><span class="op" id="2959562">(</span><span class="builtintype" id="2959563">string</span><span class="op" id="2959569">(</span><span class="ident" id="2959570">text</span><span class="op" id="2959574">[</span><span class="ident" id="2959575">i</span><span class="op" id="2959576">+</span><span class="num" id="2959577">1</span><span class="op" id="2959578">:</span><span class="op" id="2959579">]</span><span class="op" id="2959580">)</span><span class="op" id="2959581">)</span><span class="op" id="2959582">;</span>&nbsp;<span class="ident" id="2959584">err</span>&nbsp;<span class="op" id="2959588">==</span>&nbsp;<span class="ident" id="2959591">nil</span>&nbsp;<span class="op" id="2959595">&amp;&amp;</span>&nbsp;<span class="ident" id="2959598">line</span>&nbsp;<span class="op" id="2959603">&gt;</span>&nbsp;<span class="num" id="2959605">0</span>&nbsp;<span class="op" id="2959607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2959613">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959655">filename</span>&nbsp;<span class="op" id="2959664">:=</span>&nbsp;<span class="builtintype" id="2959667">string</span><span class="op" id="2959673">(</span><span class="ident" id="2959674">bytes</span><span class="op" id="2959679">.</span><span class="ident" id="2959680">TrimSpace</span><span class="op" id="2959689">(</span><span class="ident" id="2959690">text</span><span class="op" id="2959694">[</span><span class="builtinfunc" id="2959695">len</span><span class="op" id="2959698">(</span><span class="ident" id="2959699">prefix</span><span class="op" id="2959705">)</span><span class="op" id="2959706">:</span><span class="ident" id="2959707">i</span><span class="op" id="2959708">]</span><span class="op" id="2959709">)</span><span class="op" id="2959710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959716">if</span>&nbsp;<span class="ident" id="2959719">filename</span>&nbsp;<span class="op" id="2959728">!=</span>&nbsp;<span class="string" id="2959731">&#34;&#34;</span>&nbsp;<span class="op" id="2959734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959741">filename</span>&nbsp;<span class="op" id="2959750">=</span>&nbsp;<span class="ident" id="2959752">filepath</span><span class="op" id="2959760">.</span><span class="ident" id="2959761">Clean</span><span class="op" id="2959766">(</span><span class="ident" id="2959767">filename</span><span class="op" id="2959775">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2959782">if</span>&nbsp;<span class="op" id="2959785">!</span><span class="ident" id="2959786">filepath</span><span class="op" id="2959794">.</span><span class="ident" id="2959795">IsAbs</span><span class="op" id="2959800">(</span><span class="ident" id="2959801">filename</span><span class="op" id="2959809">)</span>&nbsp;<span class="op" id="2959811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2959819">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959872">filename</span>&nbsp;<span class="op" id="2959881">=</span>&nbsp;<span class="ident" id="2959883">filepath</span><span class="op" id="2959891">.</span><span class="ident" id="2959892">Join</span><span class="op" id="2959896">(</span><span class="ident" id="2959897">s</span><span class="op" id="2959898">.</span><span class="ident" id="2959899">dir</span><span class="op" id="2959902">,</span>&nbsp;<span class="ident" id="2959904">filename</span><span class="op" id="2959912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2959925">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2959931">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2959962">s</span><span class="op" id="2959963">.</span><span class="ident" id="2959964">file</span><span class="op" id="2959968">.</span><span class="ident" id="2959969">AddLineInfo</span><span class="op" id="2959980">(</span><span class="ident" id="2959981">s</span><span class="op" id="2959982">.</span><span class="ident" id="2959983">lineOffset</span><span class="op" id="2959993">+</span><span class="builtinfunc" id="2959994">len</span><span class="op" id="2959997">(</span><span class="ident" id="2959998">text</span><span class="op" id="2960002">)</span><span class="op" id="2960003">+</span><span class="num" id="2960004">1</span><span class="op" id="2960005">,</span>&nbsp;<span class="ident" id="2960007">filename</span><span class="op" id="2960015">,</span>&nbsp;<span class="ident" id="2960017">line</span><span class="op" id="2960021">)</span>&nbsp;<span class="comment" id="2960023">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960084">}</span><br>
<span class="lineno">165</span><span class="op" id="2960086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2960089">func</span>&nbsp;<span class="op" id="2960094">(</span><span class="ident" id="2960095">s</span>&nbsp;<span class="op" id="2960097">*</span><span class="ident" id="2960098">Scanner</span><span class="op" id="2960105">)</span>&nbsp;<span class="ident" id="2960107">scanComment</span><span class="op" id="2960118">(</span><span class="op" id="2960119">)</span>&nbsp;<span class="builtintype" id="2960121">string</span>&nbsp;<span class="op" id="2960128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960131">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960192">offs</span>&nbsp;<span class="op" id="2960197">:=</span>&nbsp;<span class="ident" id="2960200">s</span><span class="op" id="2960201">.</span><span class="ident" id="2960202">offset</span>&nbsp;<span class="op" id="2960209">-</span>&nbsp;<span class="num" id="2960211">1</span>&nbsp;<span class="comment" id="2960213">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960241">hasCR</span>&nbsp;<span class="op" id="2960247">:=</span>&nbsp;<span class="builtintype" id="2960250">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960258">if</span>&nbsp;<span class="ident" id="2960261">s</span><span class="op" id="2960262">.</span><span class="ident" id="2960263">ch</span>&nbsp;<span class="op" id="2960266">==</span>&nbsp;<span class="string" id="2960269">&#39;/&#39;</span>&nbsp;<span class="op" id="2960273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960277">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960296">s</span><span class="op" id="2960297">.</span><span class="ident" id="2960298">next</span><span class="op" id="2960302">(</span><span class="op" id="2960303">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960307">for</span>&nbsp;<span class="ident" id="2960311">s</span><span class="op" id="2960312">.</span><span class="ident" id="2960313">ch</span>&nbsp;<span class="op" id="2960316">!=</span>&nbsp;<span class="string" id="2960319">&#39;\n&#39;</span>&nbsp;<span class="op" id="2960324">&amp;&amp;</span>&nbsp;<span class="ident" id="2960327">s</span><span class="op" id="2960328">.</span><span class="ident" id="2960329">ch</span>&nbsp;<span class="op" id="2960332">&gt;=</span>&nbsp;<span class="num" id="2960335">0</span>&nbsp;<span class="op" id="2960337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960342">if</span>&nbsp;<span class="ident" id="2960345">s</span><span class="op" id="2960346">.</span><span class="ident" id="2960347">ch</span>&nbsp;<span class="op" id="2960350">==</span>&nbsp;<span class="string" id="2960353">&#39;\r&#39;</span>&nbsp;<span class="op" id="2960358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960364">hasCR</span>&nbsp;<span class="op" id="2960370">=</span>&nbsp;<span class="builtintype" id="2960372">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960385">s</span><span class="op" id="2960386">.</span><span class="ident" id="2960387">next</span><span class="op" id="2960391">(</span><span class="op" id="2960392">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960400">if</span>&nbsp;<span class="ident" id="2960403">offs</span>&nbsp;<span class="op" id="2960408">==</span>&nbsp;<span class="ident" id="2960411">s</span><span class="op" id="2960412">.</span><span class="ident" id="2960413">lineOffset</span>&nbsp;<span class="op" id="2960424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960429">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960487">s</span><span class="op" id="2960488">.</span><span class="ident" id="2960489">interpretLineComment</span><span class="op" id="2960509">(</span><span class="ident" id="2960510">s</span><span class="op" id="2960511">.</span><span class="ident" id="2960512">src</span><span class="op" id="2960515">[</span><span class="ident" id="2960516">offs</span><span class="op" id="2960520">:</span><span class="ident" id="2960521">s</span><span class="op" id="2960522">.</span><span class="ident" id="2960523">offset</span><span class="op" id="2960529">]</span><span class="op" id="2960530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960534">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960538">goto</span>&nbsp;<span class="ident" id="2960543">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960553">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960574">s</span><span class="op" id="2960575">.</span><span class="ident" id="2960576">next</span><span class="op" id="2960580">(</span><span class="op" id="2960581">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960584">for</span>&nbsp;<span class="ident" id="2960588">s</span><span class="op" id="2960589">.</span><span class="ident" id="2960590">ch</span>&nbsp;<span class="op" id="2960593">&gt;=</span>&nbsp;<span class="num" id="2960596">0</span>&nbsp;<span class="op" id="2960598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960602">ch</span>&nbsp;<span class="op" id="2960605">:=</span>&nbsp;<span class="ident" id="2960608">s</span><span class="op" id="2960609">.</span><span class="ident" id="2960610">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960615">if</span>&nbsp;<span class="ident" id="2960618">ch</span>&nbsp;<span class="op" id="2960621">==</span>&nbsp;<span class="string" id="2960624">&#39;\r&#39;</span>&nbsp;<span class="op" id="2960629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960634">hasCR</span>&nbsp;<span class="op" id="2960640">=</span>&nbsp;<span class="builtintype" id="2960642">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960649">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960653">s</span><span class="op" id="2960654">.</span><span class="ident" id="2960655">next</span><span class="op" id="2960659">(</span><span class="op" id="2960660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960664">if</span>&nbsp;<span class="ident" id="2960667">ch</span>&nbsp;<span class="op" id="2960670">==</span>&nbsp;<span class="string" id="2960673">&#39;*&#39;</span>&nbsp;<span class="op" id="2960677">&amp;&amp;</span>&nbsp;<span class="ident" id="2960680">s</span><span class="op" id="2960681">.</span><span class="ident" id="2960682">ch</span>&nbsp;<span class="op" id="2960685">==</span>&nbsp;<span class="string" id="2960688">&#39;/&#39;</span>&nbsp;<span class="op" id="2960692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960697">s</span><span class="op" id="2960698">.</span><span class="ident" id="2960699">next</span><span class="op" id="2960703">(</span><span class="op" id="2960704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960709">goto</span>&nbsp;<span class="ident" id="2960714">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960721">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960728">s</span><span class="op" id="2960729">.</span><span class="builtintype" id="2960730">error</span><span class="op" id="2960735">(</span><span class="ident" id="2960736">offs</span><span class="op" id="2960740">,</span>&nbsp;<span class="string" id="2960742">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="2960766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="2960769">exit</span><span class="op" id="2960773">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960776">lit</span>&nbsp;<span class="op" id="2960780">:=</span>&nbsp;<span class="ident" id="2960783">s</span><span class="op" id="2960784">.</span><span class="ident" id="2960785">src</span><span class="op" id="2960788">[</span><span class="ident" id="2960789">offs</span><span class="op" id="2960793">:</span><span class="ident" id="2960794">s</span><span class="op" id="2960795">.</span><span class="ident" id="2960796">offset</span><span class="op" id="2960802">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960805">if</span>&nbsp;<span class="ident" id="2960808">hasCR</span>&nbsp;<span class="op" id="2960814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2960818">lit</span>&nbsp;<span class="op" id="2960822">=</span>&nbsp;<span class="ident" id="2960824">stripCR</span><span class="op" id="2960831">(</span><span class="ident" id="2960832">lit</span><span class="op" id="2960835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2960838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960842">return</span>&nbsp;<span class="builtintype" id="2960849">string</span><span class="op" id="2960855">(</span><span class="ident" id="2960856">lit</span><span class="op" id="2960859">)</span><br>
<span class="lineno"></span><span class="op" id="2960861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2960864">func</span>&nbsp;<span class="op" id="2960869">(</span><span class="ident" id="2960870">s</span>&nbsp;<span class="op" id="2960872">*</span><span class="ident" id="2960873">Scanner</span><span class="op" id="2960880">)</span>&nbsp;<span class="ident" id="2960882">findLineEnd</span><span class="op" id="2960893">(</span><span class="op" id="2960894">)</span>&nbsp;<span class="builtintype" id="2960896">bool</span>&nbsp;<span class="op" id="2960901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960904">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2960938">defer</span>&nbsp;<span class="keyword" id="2960944">func</span><span class="op" id="2960948">(</span><span class="ident" id="2960949">offs</span>&nbsp;<span class="builtintype" id="2960954">int</span><span class="op" id="2960957">)</span>&nbsp;<span class="op" id="2960959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2960963">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961029">s</span><span class="op" id="2961030">.</span><span class="ident" id="2961031">ch</span>&nbsp;<span class="op" id="2961034">=</span>&nbsp;<span class="string" id="2961036">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961042">s</span><span class="op" id="2961043">.</span><span class="ident" id="2961044">offset</span>&nbsp;<span class="op" id="2961051">=</span>&nbsp;<span class="ident" id="2961053">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961060">s</span><span class="op" id="2961061">.</span><span class="ident" id="2961062">rdOffset</span>&nbsp;<span class="op" id="2961071">=</span>&nbsp;<span class="ident" id="2961073">offs</span>&nbsp;<span class="op" id="2961078">+</span>&nbsp;<span class="num" id="2961080">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961084">s</span><span class="op" id="2961085">.</span><span class="ident" id="2961086">next</span><span class="op" id="2961090">(</span><span class="op" id="2961091">)</span>&nbsp;<span class="comment" id="2961093">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961123">}</span><span class="op" id="2961124">(</span><span class="ident" id="2961125">s</span><span class="op" id="2961126">.</span><span class="ident" id="2961127">offset</span>&nbsp;<span class="op" id="2961134">-</span>&nbsp;<span class="num" id="2961136">1</span><span class="op" id="2961137">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2961141">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961208">for</span>&nbsp;<span class="ident" id="2961212">s</span><span class="op" id="2961213">.</span><span class="ident" id="2961214">ch</span>&nbsp;<span class="op" id="2961217">==</span>&nbsp;<span class="string" id="2961220">&#39;/&#39;</span>&nbsp;<span class="op" id="2961224">||</span>&nbsp;<span class="ident" id="2961227">s</span><span class="op" id="2961228">.</span><span class="ident" id="2961229">ch</span>&nbsp;<span class="op" id="2961232">==</span>&nbsp;<span class="string" id="2961235">&#39;*&#39;</span>&nbsp;<span class="op" id="2961239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961243">if</span>&nbsp;<span class="ident" id="2961246">s</span><span class="op" id="2961247">.</span><span class="ident" id="2961248">ch</span>&nbsp;<span class="op" id="2961251">==</span>&nbsp;<span class="string" id="2961254">&#39;/&#39;</span>&nbsp;<span class="op" id="2961258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2961263">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961309">return</span>&nbsp;<span class="builtintype" id="2961316">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961323">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2961327">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961367">s</span><span class="op" id="2961368">.</span><span class="ident" id="2961369">next</span><span class="op" id="2961373">(</span><span class="op" id="2961374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961378">for</span>&nbsp;<span class="ident" id="2961382">s</span><span class="op" id="2961383">.</span><span class="ident" id="2961384">ch</span>&nbsp;<span class="op" id="2961387">&gt;=</span>&nbsp;<span class="num" id="2961390">0</span>&nbsp;<span class="op" id="2961392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961397">ch</span>&nbsp;<span class="op" id="2961400">:=</span>&nbsp;<span class="ident" id="2961403">s</span><span class="op" id="2961404">.</span><span class="ident" id="2961405">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961411">if</span>&nbsp;<span class="ident" id="2961414">ch</span>&nbsp;<span class="op" id="2961417">==</span>&nbsp;<span class="string" id="2961420">&#39;\n&#39;</span>&nbsp;<span class="op" id="2961425">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961431">return</span>&nbsp;<span class="builtintype" id="2961438">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961451">s</span><span class="op" id="2961452">.</span><span class="ident" id="2961453">next</span><span class="op" id="2961457">(</span><span class="op" id="2961458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961463">if</span>&nbsp;<span class="ident" id="2961466">ch</span>&nbsp;<span class="op" id="2961469">==</span>&nbsp;<span class="string" id="2961472">&#39;*&#39;</span>&nbsp;<span class="op" id="2961476">&amp;&amp;</span>&nbsp;<span class="ident" id="2961479">s</span><span class="op" id="2961480">.</span><span class="ident" id="2961481">ch</span>&nbsp;<span class="op" id="2961484">==</span>&nbsp;<span class="string" id="2961487">&#39;/&#39;</span>&nbsp;<span class="op" id="2961491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961497">s</span><span class="op" id="2961498">.</span><span class="ident" id="2961499">next</span><span class="op" id="2961503">(</span><span class="op" id="2961504">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961510">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961527">s</span><span class="op" id="2961528">.</span><span class="ident" id="2961529">skipWhitespace</span><span class="op" id="2961543">(</span><span class="op" id="2961544">)</span>&nbsp;<span class="comment" id="2961546">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961571">if</span>&nbsp;<span class="ident" id="2961574">s</span><span class="op" id="2961575">.</span><span class="ident" id="2961576">ch</span>&nbsp;<span class="op" id="2961579">&lt;</span>&nbsp;<span class="num" id="2961581">0</span>&nbsp;<span class="op" id="2961583">||</span>&nbsp;<span class="ident" id="2961586">s</span><span class="op" id="2961587">.</span><span class="ident" id="2961588">ch</span>&nbsp;<span class="op" id="2961591">==</span>&nbsp;<span class="string" id="2961594">&#39;\n&#39;</span>&nbsp;<span class="op" id="2961599">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961604">return</span>&nbsp;<span class="builtintype" id="2961611">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961622">if</span>&nbsp;<span class="ident" id="2961625">s</span><span class="op" id="2961626">.</span><span class="ident" id="2961627">ch</span>&nbsp;<span class="op" id="2961630">!=</span>&nbsp;<span class="string" id="2961633">&#39;/&#39;</span>&nbsp;<span class="op" id="2961637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2961642">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961666">return</span>&nbsp;<span class="builtintype" id="2961673">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2961685">s</span><span class="op" id="2961686">.</span><span class="ident" id="2961687">next</span><span class="op" id="2961691">(</span><span class="op" id="2961692">)</span>&nbsp;<span class="comment" id="2961694">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2961710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961714">return</span>&nbsp;<span class="builtintype" id="2961721">false</span><br>
<span class="lineno">255</span><span class="op" id="2961727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2961730">func</span>&nbsp;<span class="ident" id="2961735">isLetter</span><span class="op" id="2961743">(</span><span class="ident" id="2961744">ch</span>&nbsp;<span class="builtintype" id="2961747">rune</span><span class="op" id="2961751">)</span>&nbsp;<span class="builtintype" id="2961753">bool</span>&nbsp;<span class="op" id="2961758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961761">return</span>&nbsp;<span class="string" id="2961768">&#39;a&#39;</span>&nbsp;<span class="op" id="2961772">&lt;=</span>&nbsp;<span class="ident" id="2961775">ch</span>&nbsp;<span class="op" id="2961778">&amp;&amp;</span>&nbsp;<span class="ident" id="2961781">ch</span>&nbsp;<span class="op" id="2961784">&lt;=</span>&nbsp;<span class="string" id="2961787">&#39;z&#39;</span>&nbsp;<span class="op" id="2961791">||</span>&nbsp;<span class="string" id="2961794">&#39;A&#39;</span>&nbsp;<span class="op" id="2961798">&lt;=</span>&nbsp;<span class="ident" id="2961801">ch</span>&nbsp;<span class="op" id="2961804">&amp;&amp;</span>&nbsp;<span class="ident" id="2961807">ch</span>&nbsp;<span class="op" id="2961810">&lt;=</span>&nbsp;<span class="string" id="2961813">&#39;Z&#39;</span>&nbsp;<span class="op" id="2961817">||</span>&nbsp;<span class="ident" id="2961820">ch</span>&nbsp;<span class="op" id="2961823">==</span>&nbsp;<span class="string" id="2961826">&#39;_&#39;</span>&nbsp;<span class="op" id="2961830">||</span>&nbsp;<span class="ident" id="2961833">ch</span>&nbsp;<span class="op" id="2961836">&gt;=</span>&nbsp;<span class="num" id="2961839">0x80</span>&nbsp;<span class="op" id="2961844">&amp;&amp;</span>&nbsp;<span class="ident" id="2961847">unicode</span><span class="op" id="2961854">.</span><span class="ident" id="2961855">IsLetter</span><span class="op" id="2961863">(</span><span class="ident" id="2961864">ch</span><span class="op" id="2961866">)</span><br>
<span class="lineno"></span><span class="op" id="2961868">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="2961871">func</span>&nbsp;<span class="ident" id="2961876">isDigit</span><span class="op" id="2961883">(</span><span class="ident" id="2961884">ch</span>&nbsp;<span class="builtintype" id="2961887">rune</span><span class="op" id="2961891">)</span>&nbsp;<span class="builtintype" id="2961893">bool</span>&nbsp;<span class="op" id="2961898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2961901">return</span>&nbsp;<span class="string" id="2961908">&#39;0&#39;</span>&nbsp;<span class="op" id="2961912">&lt;=</span>&nbsp;<span class="ident" id="2961915">ch</span>&nbsp;<span class="op" id="2961918">&amp;&amp;</span>&nbsp;<span class="ident" id="2961921">ch</span>&nbsp;<span class="op" id="2961924">&lt;=</span>&nbsp;<span class="string" id="2961927">&#39;9&#39;</span>&nbsp;<span class="op" id="2961931">||</span>&nbsp;<span class="ident" id="2961934">ch</span>&nbsp;<span class="op" id="2961937">&gt;=</span>&nbsp;<span class="num" id="2961940">0x80</span>&nbsp;<span class="op" id="2961945">&amp;&amp;</span>&nbsp;<span class="ident" id="2961948">unicode</span><span class="op" id="2961955">.</span><span class="ident" id="2961956">IsDigit</span><span class="op" id="2961963">(</span><span class="ident" id="2961964">ch</span><span class="op" id="2961966">)</span><br>
<span class="lineno"></span><span class="op" id="2961968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="2961971">func</span>&nbsp;<span class="op" id="2961976">(</span><span class="ident" id="2961977">s</span>&nbsp;<span class="op" id="2961979">*</span><span class="ident" id="2961980">Scanner</span><span class="op" id="2961987">)</span>&nbsp;<span class="ident" id="2961989">scanIdentifier</span><span class="op" id="2962003">(</span><span class="op" id="2962004">)</span>&nbsp;<span class="builtintype" id="2962006">string</span>&nbsp;<span class="op" id="2962013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962016">offs</span>&nbsp;<span class="op" id="2962021">:=</span>&nbsp;<span class="ident" id="2962024">s</span><span class="op" id="2962025">.</span><span class="ident" id="2962026">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962034">for</span>&nbsp;<span class="ident" id="2962038">isLetter</span><span class="op" id="2962046">(</span><span class="ident" id="2962047">s</span><span class="op" id="2962048">.</span><span class="ident" id="2962049">ch</span><span class="op" id="2962051">)</span>&nbsp;<span class="op" id="2962053">||</span>&nbsp;<span class="ident" id="2962056">isDigit</span><span class="op" id="2962063">(</span><span class="ident" id="2962064">s</span><span class="op" id="2962065">.</span><span class="ident" id="2962066">ch</span><span class="op" id="2962068">)</span>&nbsp;<span class="op" id="2962070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962074">s</span><span class="op" id="2962075">.</span><span class="ident" id="2962076">next</span><span class="op" id="2962080">(</span><span class="op" id="2962081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962084">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962087">return</span>&nbsp;<span class="builtintype" id="2962094">string</span><span class="op" id="2962100">(</span><span class="ident" id="2962101">s</span><span class="op" id="2962102">.</span><span class="ident" id="2962103">src</span><span class="op" id="2962106">[</span><span class="ident" id="2962107">offs</span><span class="op" id="2962111">:</span><span class="ident" id="2962112">s</span><span class="op" id="2962113">.</span><span class="ident" id="2962114">offset</span><span class="op" id="2962120">]</span><span class="op" id="2962121">)</span><br>
<span class="lineno"></span><span class="op" id="2962123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2962126">func</span>&nbsp;<span class="ident" id="2962131">digitVal</span><span class="op" id="2962139">(</span><span class="ident" id="2962140">ch</span>&nbsp;<span class="builtintype" id="2962143">rune</span><span class="op" id="2962147">)</span>&nbsp;<span class="builtintype" id="2962149">int</span>&nbsp;<span class="op" id="2962153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962156">switch</span>&nbsp;<span class="op" id="2962163">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962166">case</span>&nbsp;<span class="string" id="2962171">&#39;0&#39;</span>&nbsp;<span class="op" id="2962175">&lt;=</span>&nbsp;<span class="ident" id="2962178">ch</span>&nbsp;<span class="op" id="2962181">&amp;&amp;</span>&nbsp;<span class="ident" id="2962184">ch</span>&nbsp;<span class="op" id="2962187">&lt;=</span>&nbsp;<span class="string" id="2962190">&#39;9&#39;</span><span class="op" id="2962193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962197">return</span>&nbsp;<span class="builtintype" id="2962204">int</span><span class="op" id="2962207">(</span><span class="ident" id="2962208">ch</span>&nbsp;<span class="op" id="2962211">-</span>&nbsp;<span class="string" id="2962213">&#39;0&#39;</span><span class="op" id="2962216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962219">case</span>&nbsp;<span class="string" id="2962224">&#39;a&#39;</span>&nbsp;<span class="op" id="2962228">&lt;=</span>&nbsp;<span class="ident" id="2962231">ch</span>&nbsp;<span class="op" id="2962234">&amp;&amp;</span>&nbsp;<span class="ident" id="2962237">ch</span>&nbsp;<span class="op" id="2962240">&lt;=</span>&nbsp;<span class="string" id="2962243">&#39;f&#39;</span><span class="op" id="2962246">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962250">return</span>&nbsp;<span class="builtintype" id="2962257">int</span><span class="op" id="2962260">(</span><span class="ident" id="2962261">ch</span>&nbsp;<span class="op" id="2962264">-</span>&nbsp;<span class="string" id="2962266">&#39;a&#39;</span>&nbsp;<span class="op" id="2962270">+</span>&nbsp;<span class="num" id="2962272">10</span><span class="op" id="2962274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962277">case</span>&nbsp;<span class="string" id="2962282">&#39;A&#39;</span>&nbsp;<span class="op" id="2962286">&lt;=</span>&nbsp;<span class="ident" id="2962289">ch</span>&nbsp;<span class="op" id="2962292">&amp;&amp;</span>&nbsp;<span class="ident" id="2962295">ch</span>&nbsp;<span class="op" id="2962298">&lt;=</span>&nbsp;<span class="string" id="2962301">&#39;F&#39;</span><span class="op" id="2962304">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962308">return</span>&nbsp;<span class="builtintype" id="2962315">int</span><span class="op" id="2962318">(</span><span class="ident" id="2962319">ch</span>&nbsp;<span class="op" id="2962322">-</span>&nbsp;<span class="string" id="2962324">&#39;A&#39;</span>&nbsp;<span class="op" id="2962328">+</span>&nbsp;<span class="num" id="2962330">10</span><span class="op" id="2962332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962338">return</span>&nbsp;<span class="num" id="2962345">16</span>&nbsp;<span class="comment" id="2962348">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="2962383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="2962386">func</span>&nbsp;<span class="op" id="2962391">(</span><span class="ident" id="2962392">s</span>&nbsp;<span class="op" id="2962394">*</span><span class="ident" id="2962395">Scanner</span><span class="op" id="2962402">)</span>&nbsp;<span class="ident" id="2962404">scanMantissa</span><span class="op" id="2962416">(</span><span class="ident" id="2962417">base</span>&nbsp;<span class="builtintype" id="2962422">int</span><span class="op" id="2962425">)</span>&nbsp;<span class="op" id="2962427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962430">for</span>&nbsp;<span class="ident" id="2962434">digitVal</span><span class="op" id="2962442">(</span><span class="ident" id="2962443">s</span><span class="op" id="2962444">.</span><span class="ident" id="2962445">ch</span><span class="op" id="2962447">)</span>&nbsp;<span class="op" id="2962449">&lt;</span>&nbsp;<span class="ident" id="2962451">base</span>&nbsp;<span class="op" id="2962456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962460">s</span><span class="op" id="2962461">.</span><span class="ident" id="2962462">next</span><span class="op" id="2962466">(</span><span class="op" id="2962467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962470">}</span><br>
<span class="lineno"></span><span class="op" id="2962472">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="2962475">func</span>&nbsp;<span class="op" id="2962480">(</span><span class="ident" id="2962481">s</span>&nbsp;<span class="op" id="2962483">*</span><span class="ident" id="2962484">Scanner</span><span class="op" id="2962491">)</span>&nbsp;<span class="ident" id="2962493">scanNumber</span><span class="op" id="2962503">(</span><span class="ident" id="2962504">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="2962521">bool</span><span class="op" id="2962525">)</span>&nbsp;<span class="op" id="2962527">(</span><span class="ident" id="2962528">token</span><span class="op" id="2962533">.</span><span class="ident" id="2962534">Token</span><span class="op" id="2962539">,</span>&nbsp;<span class="builtintype" id="2962541">string</span><span class="op" id="2962547">)</span>&nbsp;<span class="op" id="2962549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962552">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962576">offs</span>&nbsp;<span class="op" id="2962581">:=</span>&nbsp;<span class="ident" id="2962584">s</span><span class="op" id="2962585">.</span><span class="ident" id="2962586">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962594">tok</span>&nbsp;<span class="op" id="2962598">:=</span>&nbsp;<span class="ident" id="2962601">token</span><span class="op" id="2962606">.</span><span class="ident" id="2962607">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962613">if</span>&nbsp;<span class="ident" id="2962616">seenDecimalPoint</span>&nbsp;<span class="op" id="2962633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962637">offs</span><span class="op" id="2962641">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962646">tok</span>&nbsp;<span class="op" id="2962650">=</span>&nbsp;<span class="ident" id="2962652">token</span><span class="op" id="2962657">.</span><span class="ident" id="2962658">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962666">s</span><span class="op" id="2962667">.</span><span class="ident" id="2962668">scanMantissa</span><span class="op" id="2962680">(</span><span class="num" id="2962681">10</span><span class="op" id="2962683">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962687">goto</span>&nbsp;<span class="ident" id="2962692">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962706">if</span>&nbsp;<span class="ident" id="2962709">s</span><span class="op" id="2962710">.</span><span class="ident" id="2962711">ch</span>&nbsp;<span class="op" id="2962714">==</span>&nbsp;<span class="string" id="2962717">&#39;0&#39;</span>&nbsp;<span class="op" id="2962721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962725">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962743">offs</span>&nbsp;<span class="op" id="2962748">:=</span>&nbsp;<span class="ident" id="2962751">s</span><span class="op" id="2962752">.</span><span class="ident" id="2962753">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962762">s</span><span class="op" id="2962763">.</span><span class="ident" id="2962764">next</span><span class="op" id="2962768">(</span><span class="op" id="2962769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962773">if</span>&nbsp;<span class="ident" id="2962776">s</span><span class="op" id="2962777">.</span><span class="ident" id="2962778">ch</span>&nbsp;<span class="op" id="2962781">==</span>&nbsp;<span class="string" id="2962784">&#39;x&#39;</span>&nbsp;<span class="op" id="2962788">||</span>&nbsp;<span class="ident" id="2962791">s</span><span class="op" id="2962792">.</span><span class="ident" id="2962793">ch</span>&nbsp;<span class="op" id="2962796">==</span>&nbsp;<span class="string" id="2962799">&#39;X&#39;</span>&nbsp;<span class="op" id="2962803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962808">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962830">s</span><span class="op" id="2962831">.</span><span class="ident" id="2962832">next</span><span class="op" id="2962836">(</span><span class="op" id="2962837">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962842">s</span><span class="op" id="2962843">.</span><span class="ident" id="2962844">scanMantissa</span><span class="op" id="2962856">(</span><span class="num" id="2962857">16</span><span class="op" id="2962859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2962864">if</span>&nbsp;<span class="ident" id="2962867">s</span><span class="op" id="2962868">.</span><span class="ident" id="2962869">offset</span><span class="op" id="2962875">-</span><span class="ident" id="2962876">offs</span>&nbsp;<span class="op" id="2962881">&lt;=</span>&nbsp;<span class="num" id="2962884">2</span>&nbsp;<span class="op" id="2962886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962892">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2962925">s</span><span class="op" id="2962926">.</span><span class="builtintype" id="2962927">error</span><span class="op" id="2962932">(</span><span class="ident" id="2962933">offs</span><span class="op" id="2962937">,</span>&nbsp;<span class="string" id="2962939">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="2962967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962972">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2962976">}</span>&nbsp;<span class="keyword" id="2962978">else</span>&nbsp;<span class="op" id="2962983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2962988">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963013">seenDecimalDigit</span>&nbsp;<span class="op" id="2963030">:=</span>&nbsp;<span class="builtintype" id="2963033">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963042">s</span><span class="op" id="2963043">.</span><span class="ident" id="2963044">scanMantissa</span><span class="op" id="2963056">(</span><span class="num" id="2963057">8</span><span class="op" id="2963058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963063">if</span>&nbsp;<span class="ident" id="2963066">s</span><span class="op" id="2963067">.</span><span class="ident" id="2963068">ch</span>&nbsp;<span class="op" id="2963071">==</span>&nbsp;<span class="string" id="2963074">&#39;8&#39;</span>&nbsp;<span class="op" id="2963078">||</span>&nbsp;<span class="ident" id="2963081">s</span><span class="op" id="2963082">.</span><span class="ident" id="2963083">ch</span>&nbsp;<span class="op" id="2963086">==</span>&nbsp;<span class="string" id="2963089">&#39;9&#39;</span>&nbsp;<span class="op" id="2963093">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963099">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963133">seenDecimalDigit</span>&nbsp;<span class="op" id="2963150">=</span>&nbsp;<span class="builtintype" id="2963152">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963161">s</span><span class="op" id="2963162">.</span><span class="ident" id="2963163">scanMantissa</span><span class="op" id="2963175">(</span><span class="num" id="2963176">10</span><span class="op" id="2963178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963188">if</span>&nbsp;<span class="ident" id="2963191">s</span><span class="op" id="2963192">.</span><span class="ident" id="2963193">ch</span>&nbsp;<span class="op" id="2963196">==</span>&nbsp;<span class="string" id="2963199">&#39;.&#39;</span>&nbsp;<span class="op" id="2963203">||</span>&nbsp;<span class="ident" id="2963206">s</span><span class="op" id="2963207">.</span><span class="ident" id="2963208">ch</span>&nbsp;<span class="op" id="2963211">==</span>&nbsp;<span class="string" id="2963214">&#39;e&#39;</span>&nbsp;<span class="op" id="2963218">||</span>&nbsp;<span class="ident" id="2963221">s</span><span class="op" id="2963222">.</span><span class="ident" id="2963223">ch</span>&nbsp;<span class="op" id="2963226">==</span>&nbsp;<span class="string" id="2963229">&#39;E&#39;</span>&nbsp;<span class="op" id="2963233">||</span>&nbsp;<span class="ident" id="2963236">s</span><span class="op" id="2963237">.</span><span class="ident" id="2963238">ch</span>&nbsp;<span class="op" id="2963241">==</span>&nbsp;<span class="string" id="2963244">&#39;i&#39;</span>&nbsp;<span class="op" id="2963248">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963254">goto</span>&nbsp;<span class="ident" id="2963259">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963276">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963292">if</span>&nbsp;<span class="ident" id="2963295">seenDecimalDigit</span>&nbsp;<span class="op" id="2963312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963318">s</span><span class="op" id="2963319">.</span><span class="builtintype" id="2963320">error</span><span class="op" id="2963325">(</span><span class="ident" id="2963326">offs</span><span class="op" id="2963330">,</span>&nbsp;<span class="string" id="2963332">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="2963354">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963367">goto</span>&nbsp;<span class="ident" id="2963372">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2963382">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963407">s</span><span class="op" id="2963408">.</span><span class="ident" id="2963409">scanMantissa</span><span class="op" id="2963421">(</span><span class="num" id="2963422">10</span><span class="op" id="2963424">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="2963427">fraction</span><span class="op" id="2963435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963438">if</span>&nbsp;<span class="ident" id="2963441">s</span><span class="op" id="2963442">.</span><span class="ident" id="2963443">ch</span>&nbsp;<span class="op" id="2963446">==</span>&nbsp;<span class="string" id="2963449">&#39;.&#39;</span>&nbsp;<span class="op" id="2963453">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963457">tok</span>&nbsp;<span class="op" id="2963461">=</span>&nbsp;<span class="ident" id="2963463">token</span><span class="op" id="2963468">.</span><span class="ident" id="2963469">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963477">s</span><span class="op" id="2963478">.</span><span class="ident" id="2963479">next</span><span class="op" id="2963483">(</span><span class="op" id="2963484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963488">s</span><span class="op" id="2963489">.</span><span class="ident" id="2963490">scanMantissa</span><span class="op" id="2963502">(</span><span class="num" id="2963503">10</span><span class="op" id="2963505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="2963511">exponent</span><span class="op" id="2963519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963522">if</span>&nbsp;<span class="ident" id="2963525">s</span><span class="op" id="2963526">.</span><span class="ident" id="2963527">ch</span>&nbsp;<span class="op" id="2963530">==</span>&nbsp;<span class="string" id="2963533">&#39;e&#39;</span>&nbsp;<span class="op" id="2963537">||</span>&nbsp;<span class="ident" id="2963540">s</span><span class="op" id="2963541">.</span><span class="ident" id="2963542">ch</span>&nbsp;<span class="op" id="2963545">==</span>&nbsp;<span class="string" id="2963548">&#39;E&#39;</span>&nbsp;<span class="op" id="2963552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963556">tok</span>&nbsp;<span class="op" id="2963560">=</span>&nbsp;<span class="ident" id="2963562">token</span><span class="op" id="2963567">.</span><span class="ident" id="2963568">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963576">s</span><span class="op" id="2963577">.</span><span class="ident" id="2963578">next</span><span class="op" id="2963582">(</span><span class="op" id="2963583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963587">if</span>&nbsp;<span class="ident" id="2963590">s</span><span class="op" id="2963591">.</span><span class="ident" id="2963592">ch</span>&nbsp;<span class="op" id="2963595">==</span>&nbsp;<span class="string" id="2963598">&#39;-&#39;</span>&nbsp;<span class="op" id="2963602">||</span>&nbsp;<span class="ident" id="2963605">s</span><span class="op" id="2963606">.</span><span class="ident" id="2963607">ch</span>&nbsp;<span class="op" id="2963610">==</span>&nbsp;<span class="string" id="2963613">&#39;+&#39;</span>&nbsp;<span class="op" id="2963617">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963622">s</span><span class="op" id="2963623">.</span><span class="ident" id="2963624">next</span><span class="op" id="2963628">(</span><span class="op" id="2963629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963637">s</span><span class="op" id="2963638">.</span><span class="ident" id="2963639">scanMantissa</span><span class="op" id="2963651">(</span><span class="num" id="2963652">10</span><span class="op" id="2963654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963661">if</span>&nbsp;<span class="ident" id="2963664">s</span><span class="op" id="2963665">.</span><span class="ident" id="2963666">ch</span>&nbsp;<span class="op" id="2963669">==</span>&nbsp;<span class="string" id="2963672">&#39;i&#39;</span>&nbsp;<span class="op" id="2963676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963680">tok</span>&nbsp;<span class="op" id="2963684">=</span>&nbsp;<span class="ident" id="2963686">token</span><span class="op" id="2963691">.</span><span class="ident" id="2963692">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2963699">s</span><span class="op" id="2963700">.</span><span class="ident" id="2963701">next</span><span class="op" id="2963705">(</span><span class="op" id="2963706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2963709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="2963712">exit</span><span class="op" id="2963716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2963719">return</span>&nbsp;<span class="ident" id="2963726">tok</span><span class="op" id="2963729">,</span>&nbsp;<span class="builtintype" id="2963731">string</span><span class="op" id="2963737">(</span><span class="ident" id="2963738">s</span><span class="op" id="2963739">.</span><span class="ident" id="2963740">src</span><span class="op" id="2963743">[</span><span class="ident" id="2963744">offs</span><span class="op" id="2963748">:</span><span class="ident" id="2963749">s</span><span class="op" id="2963750">.</span><span class="ident" id="2963751">offset</span><span class="op" id="2963757">]</span><span class="op" id="2963758">)</span><br>
<span class="lineno"></span><span class="op" id="2963760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2963763">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="2963830">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="2963901">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="2963966">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="2963986">func</span>&nbsp;<span class="op" id="2963991">(</span><span class="ident" id="2963992">s</span>&nbsp;<span class="op" id="2963994">*</span><span class="ident" id="2963995">Scanner</span><span class="op" id="2964002">)</span>&nbsp;<span class="ident" id="2964004">scanEscape</span><span class="op" id="2964014">(</span><span class="ident" id="2964015">quote</span>&nbsp;<span class="builtintype" id="2964021">rune</span><span class="op" id="2964025">)</span>&nbsp;<span class="builtintype" id="2964027">bool</span>&nbsp;<span class="op" id="2964032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964035">offs</span>&nbsp;<span class="op" id="2964040">:=</span>&nbsp;<span class="ident" id="2964043">s</span><span class="op" id="2964044">.</span><span class="ident" id="2964045">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964054">var</span>&nbsp;<span class="ident" id="2964058">n</span>&nbsp;<span class="builtintype" id="2964060">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964065">var</span>&nbsp;<span class="ident" id="2964069">base</span><span class="op" id="2964073">,</span>&nbsp;<span class="ident" id="2964075">max</span>&nbsp;<span class="builtintype" id="2964079">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964087">switch</span>&nbsp;<span class="ident" id="2964094">s</span><span class="op" id="2964095">.</span><span class="ident" id="2964096">ch</span>&nbsp;<span class="op" id="2964099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964102">case</span>&nbsp;<span class="string" id="2964107">&#39;a&#39;</span><span class="op" id="2964110">,</span>&nbsp;<span class="string" id="2964112">&#39;b&#39;</span><span class="op" id="2964115">,</span>&nbsp;<span class="string" id="2964117">&#39;f&#39;</span><span class="op" id="2964120">,</span>&nbsp;<span class="string" id="2964122">&#39;n&#39;</span><span class="op" id="2964125">,</span>&nbsp;<span class="string" id="2964127">&#39;r&#39;</span><span class="op" id="2964130">,</span>&nbsp;<span class="string" id="2964132">&#39;t&#39;</span><span class="op" id="2964135">,</span>&nbsp;<span class="string" id="2964137">&#39;v&#39;</span><span class="op" id="2964140">,</span>&nbsp;<span class="string" id="2964142">&#39;\\&#39;</span><span class="op" id="2964146">,</span>&nbsp;<span class="ident" id="2964148">quote</span><span class="op" id="2964153">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964157">s</span><span class="op" id="2964158">.</span><span class="ident" id="2964159">next</span><span class="op" id="2964163">(</span><span class="op" id="2964164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964168">return</span>&nbsp;<span class="builtintype" id="2964175">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964181">case</span>&nbsp;<span class="string" id="2964186">&#39;0&#39;</span><span class="op" id="2964189">,</span>&nbsp;<span class="string" id="2964191">&#39;1&#39;</span><span class="op" id="2964194">,</span>&nbsp;<span class="string" id="2964196">&#39;2&#39;</span><span class="op" id="2964199">,</span>&nbsp;<span class="string" id="2964201">&#39;3&#39;</span><span class="op" id="2964204">,</span>&nbsp;<span class="string" id="2964206">&#39;4&#39;</span><span class="op" id="2964209">,</span>&nbsp;<span class="string" id="2964211">&#39;5&#39;</span><span class="op" id="2964214">,</span>&nbsp;<span class="string" id="2964216">&#39;6&#39;</span><span class="op" id="2964219">,</span>&nbsp;<span class="string" id="2964221">&#39;7&#39;</span><span class="op" id="2964224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964228">n</span><span class="op" id="2964229">,</span>&nbsp;<span class="ident" id="2964231">base</span><span class="op" id="2964235">,</span>&nbsp;<span class="ident" id="2964237">max</span>&nbsp;<span class="op" id="2964241">=</span>&nbsp;<span class="num" id="2964243">3</span><span class="op" id="2964244">,</span>&nbsp;<span class="num" id="2964246">8</span><span class="op" id="2964247">,</span>&nbsp;<span class="num" id="2964249">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964254">case</span>&nbsp;<span class="string" id="2964259">&#39;x&#39;</span><span class="op" id="2964262">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964266">s</span><span class="op" id="2964267">.</span><span class="ident" id="2964268">next</span><span class="op" id="2964272">(</span><span class="op" id="2964273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964277">n</span><span class="op" id="2964278">,</span>&nbsp;<span class="ident" id="2964280">base</span><span class="op" id="2964284">,</span>&nbsp;<span class="ident" id="2964286">max</span>&nbsp;<span class="op" id="2964290">=</span>&nbsp;<span class="num" id="2964292">2</span><span class="op" id="2964293">,</span>&nbsp;<span class="num" id="2964295">16</span><span class="op" id="2964297">,</span>&nbsp;<span class="num" id="2964299">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964304">case</span>&nbsp;<span class="string" id="2964309">&#39;u&#39;</span><span class="op" id="2964312">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964316">s</span><span class="op" id="2964317">.</span><span class="ident" id="2964318">next</span><span class="op" id="2964322">(</span><span class="op" id="2964323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964327">n</span><span class="op" id="2964328">,</span>&nbsp;<span class="ident" id="2964330">base</span><span class="op" id="2964334">,</span>&nbsp;<span class="ident" id="2964336">max</span>&nbsp;<span class="op" id="2964340">=</span>&nbsp;<span class="num" id="2964342">4</span><span class="op" id="2964343">,</span>&nbsp;<span class="num" id="2964345">16</span><span class="op" id="2964347">,</span>&nbsp;<span class="ident" id="2964349">unicode</span><span class="op" id="2964356">.</span><span class="ident" id="2964357">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964366">case</span>&nbsp;<span class="string" id="2964371">&#39;U&#39;</span><span class="op" id="2964374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964378">s</span><span class="op" id="2964379">.</span><span class="ident" id="2964380">next</span><span class="op" id="2964384">(</span><span class="op" id="2964385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964389">n</span><span class="op" id="2964390">,</span>&nbsp;<span class="ident" id="2964392">base</span><span class="op" id="2964396">,</span>&nbsp;<span class="ident" id="2964398">max</span>&nbsp;<span class="op" id="2964402">=</span>&nbsp;<span class="num" id="2964404">8</span><span class="op" id="2964405">,</span>&nbsp;<span class="num" id="2964407">16</span><span class="op" id="2964409">,</span>&nbsp;<span class="ident" id="2964411">unicode</span><span class="op" id="2964418">.</span><span class="ident" id="2964419">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964428">default</span><span class="op" id="2964435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964439">msg</span>&nbsp;<span class="op" id="2964443">:=</span>&nbsp;<span class="string" id="2964446">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964474">if</span>&nbsp;<span class="ident" id="2964477">s</span><span class="op" id="2964478">.</span><span class="ident" id="2964479">ch</span>&nbsp;<span class="op" id="2964482">&lt;</span>&nbsp;<span class="num" id="2964484">0</span>&nbsp;<span class="op" id="2964486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964491">msg</span>&nbsp;<span class="op" id="2964495">=</span>&nbsp;<span class="string" id="2964497">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964536">s</span><span class="op" id="2964537">.</span><span class="builtintype" id="2964538">error</span><span class="op" id="2964543">(</span><span class="ident" id="2964544">offs</span><span class="op" id="2964548">,</span>&nbsp;<span class="ident" id="2964550">msg</span><span class="op" id="2964553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964557">return</span>&nbsp;<span class="builtintype" id="2964564">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964575">var</span>&nbsp;<span class="ident" id="2964579">x</span>&nbsp;<span class="builtintype" id="2964581">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964589">for</span>&nbsp;<span class="ident" id="2964593">n</span>&nbsp;<span class="op" id="2964595">&gt;</span>&nbsp;<span class="num" id="2964597">0</span>&nbsp;<span class="op" id="2964599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964603">d</span>&nbsp;<span class="op" id="2964605">:=</span>&nbsp;<span class="builtintype" id="2964608">uint32</span><span class="op" id="2964614">(</span><span class="ident" id="2964615">digitVal</span><span class="op" id="2964623">(</span><span class="ident" id="2964624">s</span><span class="op" id="2964625">.</span><span class="ident" id="2964626">ch</span><span class="op" id="2964628">)</span><span class="op" id="2964629">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964633">if</span>&nbsp;<span class="ident" id="2964636">d</span>&nbsp;<span class="op" id="2964638">&gt;=</span>&nbsp;<span class="ident" id="2964641">base</span>&nbsp;<span class="op" id="2964646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964651">msg</span>&nbsp;<span class="op" id="2964655">:=</span>&nbsp;<span class="ident" id="2964658">fmt</span><span class="op" id="2964661">.</span><span class="ident" id="2964662">Sprintf</span><span class="op" id="2964669">(</span><span class="string" id="2964670">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="2964712">,</span>&nbsp;<span class="ident" id="2964714">s</span><span class="op" id="2964715">.</span><span class="ident" id="2964716">ch</span><span class="op" id="2964718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964723">if</span>&nbsp;<span class="ident" id="2964726">s</span><span class="op" id="2964727">.</span><span class="ident" id="2964728">ch</span>&nbsp;<span class="op" id="2964731">&lt;</span>&nbsp;<span class="num" id="2964733">0</span>&nbsp;<span class="op" id="2964735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964741">msg</span>&nbsp;<span class="op" id="2964745">=</span>&nbsp;<span class="string" id="2964747">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964783">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964788">s</span><span class="op" id="2964789">.</span><span class="builtintype" id="2964790">error</span><span class="op" id="2964795">(</span><span class="ident" id="2964796">s</span><span class="op" id="2964797">.</span><span class="ident" id="2964798">offset</span><span class="op" id="2964804">,</span>&nbsp;<span class="ident" id="2964806">msg</span><span class="op" id="2964809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964814">return</span>&nbsp;<span class="builtintype" id="2964821">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964833">x</span>&nbsp;<span class="op" id="2964835">=</span>&nbsp;<span class="ident" id="2964837">x</span><span class="op" id="2964838">*</span><span class="ident" id="2964839">base</span>&nbsp;<span class="op" id="2964844">+</span>&nbsp;<span class="ident" id="2964846">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964850">s</span><span class="op" id="2964851">.</span><span class="ident" id="2964852">next</span><span class="op" id="2964856">(</span><span class="op" id="2964857">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964861">n</span><span class="op" id="2964862">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964870">if</span>&nbsp;<span class="ident" id="2964873">x</span>&nbsp;<span class="op" id="2964875">&gt;</span>&nbsp;<span class="ident" id="2964877">max</span>&nbsp;<span class="op" id="2964881">||</span>&nbsp;<span class="num" id="2964884">0xD800</span>&nbsp;<span class="op" id="2964891">&lt;=</span>&nbsp;<span class="ident" id="2964894">x</span>&nbsp;<span class="op" id="2964896">&amp;&amp;</span>&nbsp;<span class="ident" id="2964899">x</span>&nbsp;<span class="op" id="2964901">&lt;</span>&nbsp;<span class="num" id="2964903">0xE000</span>&nbsp;<span class="op" id="2964910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2964914">s</span><span class="op" id="2964915">.</span><span class="builtintype" id="2964916">error</span><span class="op" id="2964921">(</span><span class="ident" id="2964922">offs</span><span class="op" id="2964926">,</span>&nbsp;<span class="string" id="2964928">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="2964975">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964979">return</span>&nbsp;<span class="builtintype" id="2964986">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2964993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2964997">return</span>&nbsp;<span class="builtintype" id="2965004">true</span><br>
<span class="lineno"></span><span class="op" id="2965009">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="2965012">func</span>&nbsp;<span class="op" id="2965017">(</span><span class="ident" id="2965018">s</span>&nbsp;<span class="op" id="2965020">*</span><span class="ident" id="2965021">Scanner</span><span class="op" id="2965028">)</span>&nbsp;<span class="ident" id="2965030">scanRune</span><span class="op" id="2965038">(</span><span class="op" id="2965039">)</span>&nbsp;<span class="builtintype" id="2965041">string</span>&nbsp;<span class="op" id="2965048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965051">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965085">offs</span>&nbsp;<span class="op" id="2965090">:=</span>&nbsp;<span class="ident" id="2965093">s</span><span class="op" id="2965094">.</span><span class="ident" id="2965095">offset</span>&nbsp;<span class="op" id="2965102">-</span>&nbsp;<span class="num" id="2965104">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965108">valid</span>&nbsp;<span class="op" id="2965114">:=</span>&nbsp;<span class="builtintype" id="2965117">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965123">n</span>&nbsp;<span class="op" id="2965125">:=</span>&nbsp;<span class="num" id="2965128">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965131">for</span>&nbsp;<span class="op" id="2965135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965139">ch</span>&nbsp;<span class="op" id="2965142">:=</span>&nbsp;<span class="ident" id="2965145">s</span><span class="op" id="2965146">.</span><span class="ident" id="2965147">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965152">if</span>&nbsp;<span class="ident" id="2965155">ch</span>&nbsp;<span class="op" id="2965158">==</span>&nbsp;<span class="string" id="2965161">&#39;\n&#39;</span>&nbsp;<span class="op" id="2965166">||</span>&nbsp;<span class="ident" id="2965169">ch</span>&nbsp;<span class="op" id="2965172">&lt;</span>&nbsp;<span class="num" id="2965174">0</span>&nbsp;<span class="op" id="2965176">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965181">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965234">if</span>&nbsp;<span class="ident" id="2965237">valid</span>&nbsp;<span class="op" id="2965243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965249">s</span><span class="op" id="2965250">.</span><span class="builtintype" id="2965251">error</span><span class="op" id="2965256">(</span><span class="ident" id="2965257">offs</span><span class="op" id="2965261">,</span>&nbsp;<span class="string" id="2965263">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="2965292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965298">valid</span>&nbsp;<span class="op" id="2965304">=</span>&nbsp;<span class="builtintype" id="2965306">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965315">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965320">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965332">s</span><span class="op" id="2965333">.</span><span class="ident" id="2965334">next</span><span class="op" id="2965338">(</span><span class="op" id="2965339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965343">if</span>&nbsp;<span class="ident" id="2965346">ch</span>&nbsp;<span class="op" id="2965349">==</span>&nbsp;<span class="string" id="2965352">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="2965357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965362">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965374">n</span><span class="op" id="2965375">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965380">if</span>&nbsp;<span class="ident" id="2965383">ch</span>&nbsp;<span class="op" id="2965386">==</span>&nbsp;<span class="string" id="2965389">&#39;\\&#39;</span>&nbsp;<span class="op" id="2965394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965399">if</span>&nbsp;<span class="op" id="2965402">!</span><span class="ident" id="2965403">s</span><span class="op" id="2965404">.</span><span class="ident" id="2965405">scanEscape</span><span class="op" id="2965415">(</span><span class="string" id="2965416">&#39;\&#39;&#39;</span><span class="op" id="2965420">)</span>&nbsp;<span class="op" id="2965422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965428">valid</span>&nbsp;<span class="op" id="2965434">=</span>&nbsp;<span class="builtintype" id="2965436">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965450">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965496">if</span>&nbsp;<span class="ident" id="2965499">valid</span>&nbsp;<span class="op" id="2965505">&amp;&amp;</span>&nbsp;<span class="ident" id="2965508">n</span>&nbsp;<span class="op" id="2965510">!=</span>&nbsp;<span class="num" id="2965513">1</span>&nbsp;<span class="op" id="2965515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965519">s</span><span class="op" id="2965520">.</span><span class="builtintype" id="2965521">error</span><span class="op" id="2965526">(</span><span class="ident" id="2965527">offs</span><span class="op" id="2965531">,</span>&nbsp;<span class="string" id="2965533">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="2965555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965562">return</span>&nbsp;<span class="builtintype" id="2965569">string</span><span class="op" id="2965575">(</span><span class="ident" id="2965576">s</span><span class="op" id="2965577">.</span><span class="ident" id="2965578">src</span><span class="op" id="2965581">[</span><span class="ident" id="2965582">offs</span><span class="op" id="2965586">:</span><span class="ident" id="2965587">s</span><span class="op" id="2965588">.</span><span class="ident" id="2965589">offset</span><span class="op" id="2965595">]</span><span class="op" id="2965596">)</span><br>
<span class="lineno">455</span><span class="op" id="2965598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2965601">func</span>&nbsp;<span class="op" id="2965606">(</span><span class="ident" id="2965607">s</span>&nbsp;<span class="op" id="2965609">*</span><span class="ident" id="2965610">Scanner</span><span class="op" id="2965617">)</span>&nbsp;<span class="ident" id="2965619">scanString</span><span class="op" id="2965629">(</span><span class="op" id="2965630">)</span>&nbsp;<span class="builtintype" id="2965632">string</span>&nbsp;<span class="op" id="2965639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2965642">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965675">offs</span>&nbsp;<span class="op" id="2965680">:=</span>&nbsp;<span class="ident" id="2965683">s</span><span class="op" id="2965684">.</span><span class="ident" id="2965685">offset</span>&nbsp;<span class="op" id="2965692">-</span>&nbsp;<span class="num" id="2965694">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965698">for</span>&nbsp;<span class="op" id="2965702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965706">ch</span>&nbsp;<span class="op" id="2965709">:=</span>&nbsp;<span class="ident" id="2965712">s</span><span class="op" id="2965713">.</span><span class="ident" id="2965714">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965719">if</span>&nbsp;<span class="ident" id="2965722">ch</span>&nbsp;<span class="op" id="2965725">==</span>&nbsp;<span class="string" id="2965728">&#39;\n&#39;</span>&nbsp;<span class="op" id="2965733">||</span>&nbsp;<span class="ident" id="2965736">ch</span>&nbsp;<span class="op" id="2965739">&lt;</span>&nbsp;<span class="num" id="2965741">0</span>&nbsp;<span class="op" id="2965743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965748">s</span><span class="op" id="2965749">.</span><span class="builtintype" id="2965750">error</span><span class="op" id="2965755">(</span><span class="ident" id="2965756">offs</span><span class="op" id="2965760">,</span>&nbsp;<span class="string" id="2965762">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="2965793">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965798">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965810">s</span><span class="op" id="2965811">.</span><span class="ident" id="2965812">next</span><span class="op" id="2965816">(</span><span class="op" id="2965817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965821">if</span>&nbsp;<span class="ident" id="2965824">ch</span>&nbsp;<span class="op" id="2965827">==</span>&nbsp;<span class="string" id="2965830">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="2965834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965839">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965851">if</span>&nbsp;<span class="ident" id="2965854">ch</span>&nbsp;<span class="op" id="2965857">==</span>&nbsp;<span class="string" id="2965860">&#39;\\&#39;</span>&nbsp;<span class="op" id="2965865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965870">s</span><span class="op" id="2965871">.</span><span class="ident" id="2965872">scanEscape</span><span class="op" id="2965882">(</span><span class="string" id="2965883">&#39;&#34;&#39;</span><span class="op" id="2965886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2965893">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2965897">return</span>&nbsp;<span class="builtintype" id="2965904">string</span><span class="op" id="2965910">(</span><span class="ident" id="2965911">s</span><span class="op" id="2965912">.</span><span class="ident" id="2965913">src</span><span class="op" id="2965916">[</span><span class="ident" id="2965917">offs</span><span class="op" id="2965921">:</span><span class="ident" id="2965922">s</span><span class="op" id="2965923">.</span><span class="ident" id="2965924">offset</span><span class="op" id="2965930">]</span><span class="op" id="2965931">)</span><br>
<span class="lineno"></span><span class="op" id="2965933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2965936">func</span>&nbsp;<span class="ident" id="2965941">stripCR</span><span class="op" id="2965948">(</span><span class="ident" id="2965949">b</span>&nbsp;<span class="op" id="2965951">[</span><span class="op" id="2965952">]</span><span class="builtintype" id="2965953">byte</span><span class="op" id="2965957">)</span>&nbsp;<span class="op" id="2965959">[</span><span class="op" id="2965960">]</span><span class="builtintype" id="2965961">byte</span>&nbsp;<span class="op" id="2965966">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965969">c</span>&nbsp;<span class="op" id="2965971">:=</span>&nbsp;<span class="builtinfunc" id="2965974">make</span><span class="op" id="2965978">(</span><span class="op" id="2965979">[</span><span class="op" id="2965980">]</span><span class="builtintype" id="2965981">byte</span><span class="op" id="2965985">,</span>&nbsp;<span class="builtinfunc" id="2965987">len</span><span class="op" id="2965990">(</span><span class="ident" id="2965991">b</span><span class="op" id="2965992">)</span><span class="op" id="2965993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2965996">i</span>&nbsp;<span class="op" id="2965998">:=</span>&nbsp;<span class="num" id="2966001">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966004">for</span>&nbsp;<span class="ident" id="2966008">_</span><span class="op" id="2966009">,</span>&nbsp;<span class="ident" id="2966011">ch</span>&nbsp;<span class="op" id="2966014">:=</span>&nbsp;<span class="keyword" id="2966017">range</span>&nbsp;<span class="ident" id="2966023">b</span>&nbsp;<span class="op" id="2966025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966029">if</span>&nbsp;<span class="ident" id="2966032">ch</span>&nbsp;<span class="op" id="2966035">!=</span>&nbsp;<span class="string" id="2966038">&#39;\r&#39;</span>&nbsp;<span class="op" id="2966043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966048">c</span><span class="op" id="2966049">[</span><span class="ident" id="2966050">i</span><span class="op" id="2966051">]</span>&nbsp;<span class="op" id="2966053">=</span>&nbsp;<span class="ident" id="2966055">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966061">i</span><span class="op" id="2966062">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966073">return</span>&nbsp;<span class="ident" id="2966080">c</span><span class="op" id="2966081">[</span><span class="op" id="2966082">:</span><span class="ident" id="2966083">i</span><span class="op" id="2966084">]</span><br>
<span class="lineno"></span><span class="op" id="2966086">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="2966089">func</span>&nbsp;<span class="op" id="2966094">(</span><span class="ident" id="2966095">s</span>&nbsp;<span class="op" id="2966097">*</span><span class="ident" id="2966098">Scanner</span><span class="op" id="2966105">)</span>&nbsp;<span class="ident" id="2966107">scanRawString</span><span class="op" id="2966120">(</span><span class="op" id="2966121">)</span>&nbsp;<span class="builtintype" id="2966123">string</span>&nbsp;<span class="op" id="2966130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2966133">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966166">offs</span>&nbsp;<span class="op" id="2966171">:=</span>&nbsp;<span class="ident" id="2966174">s</span><span class="op" id="2966175">.</span><span class="ident" id="2966176">offset</span>&nbsp;<span class="op" id="2966183">-</span>&nbsp;<span class="num" id="2966185">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966189">hasCR</span>&nbsp;<span class="op" id="2966195">:=</span>&nbsp;<span class="builtintype" id="2966198">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966205">for</span>&nbsp;<span class="op" id="2966209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966213">ch</span>&nbsp;<span class="op" id="2966216">:=</span>&nbsp;<span class="ident" id="2966219">s</span><span class="op" id="2966220">.</span><span class="ident" id="2966221">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966226">if</span>&nbsp;<span class="ident" id="2966229">ch</span>&nbsp;<span class="op" id="2966232">&lt;</span>&nbsp;<span class="num" id="2966234">0</span>&nbsp;<span class="op" id="2966236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966241">s</span><span class="op" id="2966242">.</span><span class="builtintype" id="2966243">error</span><span class="op" id="2966248">(</span><span class="ident" id="2966249">offs</span><span class="op" id="2966253">,</span>&nbsp;<span class="string" id="2966255">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="2966290">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966295">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966307">s</span><span class="op" id="2966308">.</span><span class="ident" id="2966309">next</span><span class="op" id="2966313">(</span><span class="op" id="2966314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966318">if</span>&nbsp;<span class="ident" id="2966321">ch</span>&nbsp;<span class="op" id="2966324">==</span>&nbsp;<span class="string" id="2966327">&#39;`&#39;</span>&nbsp;<span class="op" id="2966331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966336">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966348">if</span>&nbsp;<span class="ident" id="2966351">ch</span>&nbsp;<span class="op" id="2966354">==</span>&nbsp;<span class="string" id="2966357">&#39;\r&#39;</span>&nbsp;<span class="op" id="2966362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966367">hasCR</span>&nbsp;<span class="op" id="2966373">=</span>&nbsp;<span class="builtintype" id="2966375">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966385">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966389">lit</span>&nbsp;<span class="op" id="2966393">:=</span>&nbsp;<span class="ident" id="2966396">s</span><span class="op" id="2966397">.</span><span class="ident" id="2966398">src</span><span class="op" id="2966401">[</span><span class="ident" id="2966402">offs</span><span class="op" id="2966406">:</span><span class="ident" id="2966407">s</span><span class="op" id="2966408">.</span><span class="ident" id="2966409">offset</span><span class="op" id="2966415">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966418">if</span>&nbsp;<span class="ident" id="2966421">hasCR</span>&nbsp;<span class="op" id="2966427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966431">lit</span>&nbsp;<span class="op" id="2966435">=</span>&nbsp;<span class="ident" id="2966437">stripCR</span><span class="op" id="2966444">(</span><span class="ident" id="2966445">lit</span><span class="op" id="2966448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966451">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966455">return</span>&nbsp;<span class="builtintype" id="2966462">string</span><span class="op" id="2966468">(</span><span class="ident" id="2966469">lit</span><span class="op" id="2966472">)</span><br>
<span class="lineno"></span><span class="op" id="2966474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2966477">func</span>&nbsp;<span class="op" id="2966482">(</span><span class="ident" id="2966483">s</span>&nbsp;<span class="op" id="2966485">*</span><span class="ident" id="2966486">Scanner</span><span class="op" id="2966493">)</span>&nbsp;<span class="ident" id="2966495">skipWhitespace</span><span class="op" id="2966509">(</span><span class="op" id="2966510">)</span>&nbsp;<span class="op" id="2966512">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2966515">for</span>&nbsp;<span class="ident" id="2966519">s</span><span class="op" id="2966520">.</span><span class="ident" id="2966521">ch</span>&nbsp;<span class="op" id="2966524">==</span>&nbsp;<span class="string" id="2966527">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="2966531">||</span>&nbsp;<span class="ident" id="2966534">s</span><span class="op" id="2966535">.</span><span class="ident" id="2966536">ch</span>&nbsp;<span class="op" id="2966539">==</span>&nbsp;<span class="string" id="2966542">&#39;\t&#39;</span>&nbsp;<span class="op" id="2966547">||</span>&nbsp;<span class="ident" id="2966550">s</span><span class="op" id="2966551">.</span><span class="ident" id="2966552">ch</span>&nbsp;<span class="op" id="2966555">==</span>&nbsp;<span class="string" id="2966558">&#39;\n&#39;</span>&nbsp;<span class="op" id="2966563">&amp;&amp;</span>&nbsp;<span class="op" id="2966566">!</span><span class="ident" id="2966567">s</span><span class="op" id="2966568">.</span><span class="ident" id="2966569">insertSemi</span>&nbsp;<span class="op" id="2966580">||</span>&nbsp;<span class="ident" id="2966583">s</span><span class="op" id="2966584">.</span><span class="ident" id="2966585">ch</span>&nbsp;<span class="op" id="2966588">==</span>&nbsp;<span class="string" id="2966591">&#39;\r&#39;</span>&nbsp;<span class="op" id="2966596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2966600">s</span><span class="op" id="2966601">.</span><span class="ident" id="2966602">next</span><span class="op" id="2966606">(</span><span class="op" id="2966607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2966610">}</span><br>
<span class="lineno"></span><span class="op" id="2966612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="2966615">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="2966686">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="2966758">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="2966821">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="2966890">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="2966957">func</span>&nbsp;<span class="op" id="2966962">(</span><span class="ident" id="2966963">s</span>&nbsp;<span class="op" id="2966965">*</span><span class="ident" id="2966966">Scanner</span><span class="op" id="2966973">)</span>&nbsp;<span class="ident" id="2966975">switch2</span><span class="op" id="2966982">(</span><span class="ident" id="2966983">tok0</span><span class="op" id="2966987">,</span>&nbsp;<span class="ident" id="2966989">tok1</span>&nbsp;<span class="ident" id="2966994">token</span><span class="op" id="2966999">.</span><span class="ident" id="2967000">Token</span><span class="op" id="2967005">)</span>&nbsp;<span class="ident" id="2967007">token</span><span class="op" id="2967012">.</span><span class="ident" id="2967013">Token</span>&nbsp;<span class="op" id="2967019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967022">if</span>&nbsp;<span class="ident" id="2967025">s</span><span class="op" id="2967026">.</span><span class="ident" id="2967027">ch</span>&nbsp;<span class="op" id="2967030">==</span>&nbsp;<span class="string" id="2967033">&#39;=&#39;</span>&nbsp;<span class="op" id="2967037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967041">s</span><span class="op" id="2967042">.</span><span class="ident" id="2967043">next</span><span class="op" id="2967047">(</span><span class="op" id="2967048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967052">return</span>&nbsp;<span class="ident" id="2967059">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967068">return</span>&nbsp;<span class="ident" id="2967075">tok0</span><br>
<span class="lineno"></span><span class="op" id="2967080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2967083">func</span>&nbsp;<span class="op" id="2967088">(</span><span class="ident" id="2967089">s</span>&nbsp;<span class="op" id="2967091">*</span><span class="ident" id="2967092">Scanner</span><span class="op" id="2967099">)</span>&nbsp;<span class="ident" id="2967101">switch3</span><span class="op" id="2967108">(</span><span class="ident" id="2967109">tok0</span><span class="op" id="2967113">,</span>&nbsp;<span class="ident" id="2967115">tok1</span>&nbsp;<span class="ident" id="2967120">token</span><span class="op" id="2967125">.</span><span class="ident" id="2967126">Token</span><span class="op" id="2967131">,</span>&nbsp;<span class="ident" id="2967133">ch2</span>&nbsp;<span class="builtintype" id="2967137">rune</span><span class="op" id="2967141">,</span>&nbsp;<span class="ident" id="2967143">tok2</span>&nbsp;<span class="ident" id="2967148">token</span><span class="op" id="2967153">.</span><span class="ident" id="2967154">Token</span><span class="op" id="2967159">)</span>&nbsp;<span class="ident" id="2967161">token</span><span class="op" id="2967166">.</span><span class="ident" id="2967167">Token</span>&nbsp;<span class="op" id="2967173">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967176">if</span>&nbsp;<span class="ident" id="2967179">s</span><span class="op" id="2967180">.</span><span class="ident" id="2967181">ch</span>&nbsp;<span class="op" id="2967184">==</span>&nbsp;<span class="string" id="2967187">&#39;=&#39;</span>&nbsp;<span class="op" id="2967191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967195">s</span><span class="op" id="2967196">.</span><span class="ident" id="2967197">next</span><span class="op" id="2967201">(</span><span class="op" id="2967202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967206">return</span>&nbsp;<span class="ident" id="2967213">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967222">if</span>&nbsp;<span class="ident" id="2967225">s</span><span class="op" id="2967226">.</span><span class="ident" id="2967227">ch</span>&nbsp;<span class="op" id="2967230">==</span>&nbsp;<span class="ident" id="2967233">ch2</span>&nbsp;<span class="op" id="2967237">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967241">s</span><span class="op" id="2967242">.</span><span class="ident" id="2967243">next</span><span class="op" id="2967247">(</span><span class="op" id="2967248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967252">return</span>&nbsp;<span class="ident" id="2967259">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967268">return</span>&nbsp;<span class="ident" id="2967275">tok0</span><br>
<span class="lineno"></span><span class="op" id="2967280">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="2967283">func</span>&nbsp;<span class="op" id="2967288">(</span><span class="ident" id="2967289">s</span>&nbsp;<span class="op" id="2967291">*</span><span class="ident" id="2967292">Scanner</span><span class="op" id="2967299">)</span>&nbsp;<span class="ident" id="2967301">switch4</span><span class="op" id="2967308">(</span><span class="ident" id="2967309">tok0</span><span class="op" id="2967313">,</span>&nbsp;<span class="ident" id="2967315">tok1</span>&nbsp;<span class="ident" id="2967320">token</span><span class="op" id="2967325">.</span><span class="ident" id="2967326">Token</span><span class="op" id="2967331">,</span>&nbsp;<span class="ident" id="2967333">ch2</span>&nbsp;<span class="builtintype" id="2967337">rune</span><span class="op" id="2967341">,</span>&nbsp;<span class="ident" id="2967343">tok2</span><span class="op" id="2967347">,</span>&nbsp;<span class="ident" id="2967349">tok3</span>&nbsp;<span class="ident" id="2967354">token</span><span class="op" id="2967359">.</span><span class="ident" id="2967360">Token</span><span class="op" id="2967365">)</span>&nbsp;<span class="ident" id="2967367">token</span><span class="op" id="2967372">.</span><span class="ident" id="2967373">Token</span>&nbsp;<span class="op" id="2967379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967382">if</span>&nbsp;<span class="ident" id="2967385">s</span><span class="op" id="2967386">.</span><span class="ident" id="2967387">ch</span>&nbsp;<span class="op" id="2967390">==</span>&nbsp;<span class="string" id="2967393">&#39;=&#39;</span>&nbsp;<span class="op" id="2967397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967401">s</span><span class="op" id="2967402">.</span><span class="ident" id="2967403">next</span><span class="op" id="2967407">(</span><span class="op" id="2967408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967412">return</span>&nbsp;<span class="ident" id="2967419">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967428">if</span>&nbsp;<span class="ident" id="2967431">s</span><span class="op" id="2967432">.</span><span class="ident" id="2967433">ch</span>&nbsp;<span class="op" id="2967436">==</span>&nbsp;<span class="ident" id="2967439">ch2</span>&nbsp;<span class="op" id="2967443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967447">s</span><span class="op" id="2967448">.</span><span class="ident" id="2967449">next</span><span class="op" id="2967453">(</span><span class="op" id="2967454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967458">if</span>&nbsp;<span class="ident" id="2967461">s</span><span class="op" id="2967462">.</span><span class="ident" id="2967463">ch</span>&nbsp;<span class="op" id="2967466">==</span>&nbsp;<span class="string" id="2967469">&#39;=&#39;</span>&nbsp;<span class="op" id="2967473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2967478">s</span><span class="op" id="2967479">.</span><span class="ident" id="2967480">next</span><span class="op" id="2967484">(</span><span class="op" id="2967485">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967490">return</span>&nbsp;<span class="ident" id="2967497">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967508">return</span>&nbsp;<span class="ident" id="2967515">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2967521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2967524">return</span>&nbsp;<span class="ident" id="2967531">tok0</span><br>
<span class="lineno">565</span><span class="op" id="2967536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2967539">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="2967611">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2967683">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="2967697">//</span><br>
<span class="lineno"></span><span class="comment" id="2967700">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="2967776">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="2967854">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2967886">//</span><br>
<span class="lineno">575</span><span class="comment" id="2967889">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="2967963">//</span><br>
<span class="lineno"></span><span class="comment" id="2967966">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="2968029">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="2968098">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="2968164">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="2968175">//</span><br>
<span class="lineno"></span><span class="comment" id="2968178">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2968247">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="2968271">//</span><br>
<span class="lineno">585</span><span class="comment" id="2968274">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2968335">//</span><br>
<span class="lineno"></span><span class="comment" id="2968338">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2968402">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="2968465">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="2968528">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="2968590">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="2968652">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="2968705">//</span><br>
<span class="lineno"></span><span class="comment" id="2968708">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="2968768">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2968828">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="2968866">//</span><br>
<span class="lineno"></span><span class="keyword" id="2968869">func</span>&nbsp;<span class="op" id="2968874">(</span><span class="ident" id="2968875">s</span>&nbsp;<span class="op" id="2968877">*</span><span class="ident" id="2968878">Scanner</span><span class="op" id="2968885">)</span>&nbsp;<span class="ident" id="2968887">Scan</span><span class="op" id="2968891">(</span><span class="op" id="2968892">)</span>&nbsp;<span class="op" id="2968894">(</span><span class="ident" id="2968895">pos</span>&nbsp;<span class="ident" id="2968899">token</span><span class="op" id="2968904">.</span><span class="ident" id="2968905">Pos</span><span class="op" id="2968908">,</span>&nbsp;<span class="ident" id="2968910">tok</span>&nbsp;<span class="ident" id="2968914">token</span><span class="op" id="2968919">.</span><span class="ident" id="2968920">Token</span><span class="op" id="2968925">,</span>&nbsp;<span class="ident" id="2968927">lit</span>&nbsp;<span class="builtintype" id="2968931">string</span><span class="op" id="2968937">)</span>&nbsp;<span class="op" id="2968939">{</span><br>
<span class="lineno"></span><span class="ident" id="2968941">scanAgain</span><span class="op" id="2968950">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968953">s</span><span class="op" id="2968954">.</span><span class="ident" id="2968955">skipWhitespace</span><span class="op" id="2968969">(</span><span class="op" id="2968970">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2968974">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2968998">pos</span>&nbsp;<span class="op" id="2969002">=</span>&nbsp;<span class="ident" id="2969004">s</span><span class="op" id="2969005">.</span><span class="ident" id="2969006">file</span><span class="op" id="2969010">.</span><span class="ident" id="2969011">Pos</span><span class="op" id="2969014">(</span><span class="ident" id="2969015">s</span><span class="op" id="2969016">.</span><span class="ident" id="2969017">offset</span><span class="op" id="2969023">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969027">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969053">insertSemi</span>&nbsp;<span class="op" id="2969064">:=</span>&nbsp;<span class="builtintype" id="2969067">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969074">switch</span>&nbsp;<span class="ident" id="2969081">ch</span>&nbsp;<span class="op" id="2969084">:=</span>&nbsp;<span class="ident" id="2969087">s</span><span class="op" id="2969088">.</span><span class="ident" id="2969089">ch</span><span class="op" id="2969091">;</span>&nbsp;<span class="op" id="2969093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969096">case</span>&nbsp;<span class="ident" id="2969101">isLetter</span><span class="op" id="2969109">(</span><span class="ident" id="2969110">ch</span><span class="op" id="2969112">)</span><span class="op" id="2969113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969117">lit</span>&nbsp;<span class="op" id="2969121">=</span>&nbsp;<span class="ident" id="2969123">s</span><span class="op" id="2969124">.</span><span class="ident" id="2969125">scanIdentifier</span><span class="op" id="2969139">(</span><span class="op" id="2969140">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969144">if</span>&nbsp;<span class="builtinfunc" id="2969147">len</span><span class="op" id="2969150">(</span><span class="ident" id="2969151">lit</span><span class="op" id="2969154">)</span>&nbsp;<span class="op" id="2969156">&gt;</span>&nbsp;<span class="num" id="2969158">1</span>&nbsp;<span class="op" id="2969160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969165">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969232">tok</span>&nbsp;<span class="op" id="2969236">=</span>&nbsp;<span class="ident" id="2969238">token</span><span class="op" id="2969243">.</span><span class="ident" id="2969244">Lookup</span><span class="op" id="2969250">(</span><span class="ident" id="2969251">lit</span><span class="op" id="2969254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969259">switch</span>&nbsp;<span class="ident" id="2969266">tok</span>&nbsp;<span class="op" id="2969270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969275">case</span>&nbsp;<span class="ident" id="2969280">token</span><span class="op" id="2969285">.</span><span class="ident" id="2969286">IDENT</span><span class="op" id="2969291">,</span>&nbsp;<span class="ident" id="2969293">token</span><span class="op" id="2969298">.</span><span class="ident" id="2969299">BREAK</span><span class="op" id="2969304">,</span>&nbsp;<span class="ident" id="2969306">token</span><span class="op" id="2969311">.</span><span class="ident" id="2969312">CONTINUE</span><span class="op" id="2969320">,</span>&nbsp;<span class="ident" id="2969322">token</span><span class="op" id="2969327">.</span><span class="ident" id="2969328">FALLTHROUGH</span><span class="op" id="2969339">,</span>&nbsp;<span class="ident" id="2969341">token</span><span class="op" id="2969346">.</span><span class="ident" id="2969347">RETURN</span><span class="op" id="2969353">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969359">insertSemi</span>&nbsp;<span class="op" id="2969370">=</span>&nbsp;<span class="builtintype" id="2969372">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969384">}</span>&nbsp;<span class="keyword" id="2969386">else</span>&nbsp;<span class="op" id="2969391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969396">insertSemi</span>&nbsp;<span class="op" id="2969407">=</span>&nbsp;<span class="builtintype" id="2969409">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969417">tok</span>&nbsp;<span class="op" id="2969421">=</span>&nbsp;<span class="ident" id="2969423">token</span><span class="op" id="2969428">.</span><span class="ident" id="2969429">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969440">case</span>&nbsp;<span class="string" id="2969445">&#39;0&#39;</span>&nbsp;<span class="op" id="2969449">&lt;=</span>&nbsp;<span class="ident" id="2969452">ch</span>&nbsp;<span class="op" id="2969455">&amp;&amp;</span>&nbsp;<span class="ident" id="2969458">ch</span>&nbsp;<span class="op" id="2969461">&lt;=</span>&nbsp;<span class="string" id="2969464">&#39;9&#39;</span><span class="op" id="2969467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969471">insertSemi</span>&nbsp;<span class="op" id="2969482">=</span>&nbsp;<span class="builtintype" id="2969484">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969491">tok</span><span class="op" id="2969494">,</span>&nbsp;<span class="ident" id="2969496">lit</span>&nbsp;<span class="op" id="2969500">=</span>&nbsp;<span class="ident" id="2969502">s</span><span class="op" id="2969503">.</span><span class="ident" id="2969504">scanNumber</span><span class="op" id="2969514">(</span><span class="builtintype" id="2969515">false</span><span class="op" id="2969520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969523">default</span><span class="op" id="2969530">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969534">s</span><span class="op" id="2969535">.</span><span class="ident" id="2969536">next</span><span class="op" id="2969540">(</span><span class="op" id="2969541">)</span>&nbsp;<span class="comment" id="2969543">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969569">switch</span>&nbsp;<span class="ident" id="2969576">ch</span>&nbsp;<span class="op" id="2969579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969583">case</span>&nbsp;<span class="op" id="2969588">-</span><span class="num" id="2969589">1</span><span class="op" id="2969590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969595">if</span>&nbsp;<span class="ident" id="2969598">s</span><span class="op" id="2969599">.</span><span class="ident" id="2969600">insertSemi</span>&nbsp;<span class="op" id="2969611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969617">s</span><span class="op" id="2969618">.</span><span class="ident" id="2969619">insertSemi</span>&nbsp;<span class="op" id="2969630">=</span>&nbsp;<span class="builtintype" id="2969632">false</span>&nbsp;<span class="comment" id="2969638">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969658">return</span>&nbsp;<span class="ident" id="2969665">pos</span><span class="op" id="2969668">,</span>&nbsp;<span class="ident" id="2969670">token</span><span class="op" id="2969675">.</span><span class="ident" id="2969676">SEMICOLON</span><span class="op" id="2969685">,</span>&nbsp;<span class="string" id="2969687">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2969695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969700">tok</span>&nbsp;<span class="op" id="2969704">=</span>&nbsp;<span class="ident" id="2969706">token</span><span class="op" id="2969711">.</span><span class="ident" id="2969712">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969718">case</span>&nbsp;<span class="string" id="2969723">&#39;\n&#39;</span><span class="op" id="2969727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969732">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969777">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2969823">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969853">s</span><span class="op" id="2969854">.</span><span class="ident" id="2969855">insertSemi</span>&nbsp;<span class="op" id="2969866">=</span>&nbsp;<span class="builtintype" id="2969868">false</span>&nbsp;<span class="comment" id="2969874">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969897">return</span>&nbsp;<span class="ident" id="2969904">pos</span><span class="op" id="2969907">,</span>&nbsp;<span class="ident" id="2969909">token</span><span class="op" id="2969914">.</span><span class="ident" id="2969915">SEMICOLON</span><span class="op" id="2969924">,</span>&nbsp;<span class="string" id="2969926">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2969933">case</span>&nbsp;<span class="string" id="2969938">&#39;&#34;&#39;</span><span class="op" id="2969941">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969946">insertSemi</span>&nbsp;<span class="op" id="2969957">=</span>&nbsp;<span class="builtintype" id="2969959">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969967">tok</span>&nbsp;<span class="op" id="2969971">=</span>&nbsp;<span class="ident" id="2969973">token</span><span class="op" id="2969978">.</span><span class="ident" id="2969979">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2969989">lit</span>&nbsp;<span class="op" id="2969993">=</span>&nbsp;<span class="ident" id="2969995">s</span><span class="op" id="2969996">.</span><span class="ident" id="2969997">scanString</span><span class="op" id="2970007">(</span><span class="op" id="2970008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970012">case</span>&nbsp;<span class="string" id="2970017">&#39;\&#39;&#39;</span><span class="op" id="2970021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970026">insertSemi</span>&nbsp;<span class="op" id="2970037">=</span>&nbsp;<span class="builtintype" id="2970039">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970047">tok</span>&nbsp;<span class="op" id="2970051">=</span>&nbsp;<span class="ident" id="2970053">token</span><span class="op" id="2970058">.</span><span class="ident" id="2970059">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970067">lit</span>&nbsp;<span class="op" id="2970071">=</span>&nbsp;<span class="ident" id="2970073">s</span><span class="op" id="2970074">.</span><span class="ident" id="2970075">scanRune</span><span class="op" id="2970083">(</span><span class="op" id="2970084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970088">case</span>&nbsp;<span class="string" id="2970093">&#39;`&#39;</span><span class="op" id="2970096">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970101">insertSemi</span>&nbsp;<span class="op" id="2970112">=</span>&nbsp;<span class="builtintype" id="2970114">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970122">tok</span>&nbsp;<span class="op" id="2970126">=</span>&nbsp;<span class="ident" id="2970128">token</span><span class="op" id="2970133">.</span><span class="ident" id="2970134">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970144">lit</span>&nbsp;<span class="op" id="2970148">=</span>&nbsp;<span class="ident" id="2970150">s</span><span class="op" id="2970151">.</span><span class="ident" id="2970152">scanRawString</span><span class="op" id="2970165">(</span><span class="op" id="2970166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970170">case</span>&nbsp;<span class="string" id="2970175">&#39;:&#39;</span><span class="op" id="2970178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970183">tok</span>&nbsp;<span class="op" id="2970187">=</span>&nbsp;<span class="ident" id="2970189">s</span><span class="op" id="2970190">.</span><span class="ident" id="2970191">switch2</span><span class="op" id="2970198">(</span><span class="ident" id="2970199">token</span><span class="op" id="2970204">.</span><span class="ident" id="2970205">COLON</span><span class="op" id="2970210">,</span>&nbsp;<span class="ident" id="2970212">token</span><span class="op" id="2970217">.</span><span class="ident" id="2970218">DEFINE</span><span class="op" id="2970224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970228">case</span>&nbsp;<span class="string" id="2970233">&#39;.&#39;</span><span class="op" id="2970236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970241">if</span>&nbsp;<span class="string" id="2970244">&#39;0&#39;</span>&nbsp;<span class="op" id="2970248">&lt;=</span>&nbsp;<span class="ident" id="2970251">s</span><span class="op" id="2970252">.</span><span class="ident" id="2970253">ch</span>&nbsp;<span class="op" id="2970256">&amp;&amp;</span>&nbsp;<span class="ident" id="2970259">s</span><span class="op" id="2970260">.</span><span class="ident" id="2970261">ch</span>&nbsp;<span class="op" id="2970264">&lt;=</span>&nbsp;<span class="string" id="2970267">&#39;9&#39;</span>&nbsp;<span class="op" id="2970271">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970277">insertSemi</span>&nbsp;<span class="op" id="2970288">=</span>&nbsp;<span class="builtintype" id="2970290">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970299">tok</span><span class="op" id="2970302">,</span>&nbsp;<span class="ident" id="2970304">lit</span>&nbsp;<span class="op" id="2970308">=</span>&nbsp;<span class="ident" id="2970310">s</span><span class="op" id="2970311">.</span><span class="ident" id="2970312">scanNumber</span><span class="op" id="2970322">(</span><span class="builtintype" id="2970323">true</span><span class="op" id="2970327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970332">}</span>&nbsp;<span class="keyword" id="2970334">else</span>&nbsp;<span class="keyword" id="2970339">if</span>&nbsp;<span class="ident" id="2970342">s</span><span class="op" id="2970343">.</span><span class="ident" id="2970344">ch</span>&nbsp;<span class="op" id="2970347">==</span>&nbsp;<span class="string" id="2970350">&#39;.&#39;</span>&nbsp;<span class="op" id="2970354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970360">s</span><span class="op" id="2970361">.</span><span class="ident" id="2970362">next</span><span class="op" id="2970366">(</span><span class="op" id="2970367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970373">if</span>&nbsp;<span class="ident" id="2970376">s</span><span class="op" id="2970377">.</span><span class="ident" id="2970378">ch</span>&nbsp;<span class="op" id="2970381">==</span>&nbsp;<span class="string" id="2970384">&#39;.&#39;</span>&nbsp;<span class="op" id="2970388">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970395">s</span><span class="op" id="2970396">.</span><span class="ident" id="2970397">next</span><span class="op" id="2970401">(</span><span class="op" id="2970402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970409">tok</span>&nbsp;<span class="op" id="2970413">=</span>&nbsp;<span class="ident" id="2970415">token</span><span class="op" id="2970420">.</span><span class="ident" id="2970421">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970439">}</span>&nbsp;<span class="keyword" id="2970441">else</span>&nbsp;<span class="op" id="2970446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970452">tok</span>&nbsp;<span class="op" id="2970456">=</span>&nbsp;<span class="ident" id="2970458">token</span><span class="op" id="2970463">.</span><span class="ident" id="2970464">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970478">case</span>&nbsp;<span class="string" id="2970483">&#39;,&#39;</span><span class="op" id="2970486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970491">tok</span>&nbsp;<span class="op" id="2970495">=</span>&nbsp;<span class="ident" id="2970497">token</span><span class="op" id="2970502">.</span><span class="ident" id="2970503">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970511">case</span>&nbsp;<span class="string" id="2970516">&#39;;&#39;</span><span class="op" id="2970519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970524">tok</span>&nbsp;<span class="op" id="2970528">=</span>&nbsp;<span class="ident" id="2970530">token</span><span class="op" id="2970535">.</span><span class="ident" id="2970536">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970549">lit</span>&nbsp;<span class="op" id="2970553">=</span>&nbsp;<span class="string" id="2970555">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970561">case</span>&nbsp;<span class="string" id="2970566">&#39;(&#39;</span><span class="op" id="2970569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970574">tok</span>&nbsp;<span class="op" id="2970578">=</span>&nbsp;<span class="ident" id="2970580">token</span><span class="op" id="2970585">.</span><span class="ident" id="2970586">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970595">case</span>&nbsp;<span class="string" id="2970600">&#39;)&#39;</span><span class="op" id="2970603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970608">insertSemi</span>&nbsp;<span class="op" id="2970619">=</span>&nbsp;<span class="builtintype" id="2970621">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970629">tok</span>&nbsp;<span class="op" id="2970633">=</span>&nbsp;<span class="ident" id="2970635">token</span><span class="op" id="2970640">.</span><span class="ident" id="2970641">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970650">case</span>&nbsp;<span class="string" id="2970655">&#39;[&#39;</span><span class="op" id="2970658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970663">tok</span>&nbsp;<span class="op" id="2970667">=</span>&nbsp;<span class="ident" id="2970669">token</span><span class="op" id="2970674">.</span><span class="ident" id="2970675">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970684">case</span>&nbsp;<span class="string" id="2970689">&#39;]&#39;</span><span class="op" id="2970692">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970697">insertSemi</span>&nbsp;<span class="op" id="2970708">=</span>&nbsp;<span class="builtintype" id="2970710">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970718">tok</span>&nbsp;<span class="op" id="2970722">=</span>&nbsp;<span class="ident" id="2970724">token</span><span class="op" id="2970729">.</span><span class="ident" id="2970730">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970739">case</span>&nbsp;<span class="string" id="2970744">&#39;{&#39;</span><span class="op" id="2970747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970752">tok</span>&nbsp;<span class="op" id="2970756">=</span>&nbsp;<span class="ident" id="2970758">token</span><span class="op" id="2970763">.</span><span class="ident" id="2970764">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970773">case</span>&nbsp;<span class="string" id="2970778">&#39;}&#39;</span><span class="op" id="2970781">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970786">insertSemi</span>&nbsp;<span class="op" id="2970797">=</span>&nbsp;<span class="builtintype" id="2970799">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970807">tok</span>&nbsp;<span class="op" id="2970811">=</span>&nbsp;<span class="ident" id="2970813">token</span><span class="op" id="2970818">.</span><span class="ident" id="2970819">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970828">case</span>&nbsp;<span class="string" id="2970833">&#39;+&#39;</span><span class="op" id="2970836">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970841">tok</span>&nbsp;<span class="op" id="2970845">=</span>&nbsp;<span class="ident" id="2970847">s</span><span class="op" id="2970848">.</span><span class="ident" id="2970849">switch3</span><span class="op" id="2970856">(</span><span class="ident" id="2970857">token</span><span class="op" id="2970862">.</span><span class="ident" id="2970863">ADD</span><span class="op" id="2970866">,</span>&nbsp;<span class="ident" id="2970868">token</span><span class="op" id="2970873">.</span><span class="ident" id="2970874">ADD_ASSIGN</span><span class="op" id="2970884">,</span>&nbsp;<span class="string" id="2970886">&#39;+&#39;</span><span class="op" id="2970889">,</span>&nbsp;<span class="ident" id="2970891">token</span><span class="op" id="2970896">.</span><span class="ident" id="2970897">INC</span><span class="op" id="2970900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970905">if</span>&nbsp;<span class="ident" id="2970908">tok</span>&nbsp;<span class="op" id="2970912">==</span>&nbsp;<span class="ident" id="2970915">token</span><span class="op" id="2970920">.</span><span class="ident" id="2970921">INC</span>&nbsp;<span class="op" id="2970925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970931">insertSemi</span>&nbsp;<span class="op" id="2970942">=</span>&nbsp;<span class="builtintype" id="2970944">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2970952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2970956">case</span>&nbsp;<span class="string" id="2970961">&#39;-&#39;</span><span class="op" id="2970964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2970969">tok</span>&nbsp;<span class="op" id="2970973">=</span>&nbsp;<span class="ident" id="2970975">s</span><span class="op" id="2970976">.</span><span class="ident" id="2970977">switch3</span><span class="op" id="2970984">(</span><span class="ident" id="2970985">token</span><span class="op" id="2970990">.</span><span class="ident" id="2970991">SUB</span><span class="op" id="2970994">,</span>&nbsp;<span class="ident" id="2970996">token</span><span class="op" id="2971001">.</span><span class="ident" id="2971002">SUB_ASSIGN</span><span class="op" id="2971012">,</span>&nbsp;<span class="string" id="2971014">&#39;-&#39;</span><span class="op" id="2971017">,</span>&nbsp;<span class="ident" id="2971019">token</span><span class="op" id="2971024">.</span><span class="ident" id="2971025">DEC</span><span class="op" id="2971028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971033">if</span>&nbsp;<span class="ident" id="2971036">tok</span>&nbsp;<span class="op" id="2971040">==</span>&nbsp;<span class="ident" id="2971043">token</span><span class="op" id="2971048">.</span><span class="ident" id="2971049">DEC</span>&nbsp;<span class="op" id="2971053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971059">insertSemi</span>&nbsp;<span class="op" id="2971070">=</span>&nbsp;<span class="builtintype" id="2971072">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971084">case</span>&nbsp;<span class="string" id="2971089">&#39;*&#39;</span><span class="op" id="2971092">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971097">tok</span>&nbsp;<span class="op" id="2971101">=</span>&nbsp;<span class="ident" id="2971103">s</span><span class="op" id="2971104">.</span><span class="ident" id="2971105">switch2</span><span class="op" id="2971112">(</span><span class="ident" id="2971113">token</span><span class="op" id="2971118">.</span><span class="ident" id="2971119">MUL</span><span class="op" id="2971122">,</span>&nbsp;<span class="ident" id="2971124">token</span><span class="op" id="2971129">.</span><span class="ident" id="2971130">MUL_ASSIGN</span><span class="op" id="2971140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971144">case</span>&nbsp;<span class="string" id="2971149">&#39;/&#39;</span><span class="op" id="2971152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971157">if</span>&nbsp;<span class="ident" id="2971160">s</span><span class="op" id="2971161">.</span><span class="ident" id="2971162">ch</span>&nbsp;<span class="op" id="2971165">==</span>&nbsp;<span class="string" id="2971168">&#39;/&#39;</span>&nbsp;<span class="op" id="2971172">||</span>&nbsp;<span class="ident" id="2971175">s</span><span class="op" id="2971176">.</span><span class="ident" id="2971177">ch</span>&nbsp;<span class="op" id="2971180">==</span>&nbsp;<span class="string" id="2971183">&#39;*&#39;</span>&nbsp;<span class="op" id="2971187">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2971193">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971208">if</span>&nbsp;<span class="ident" id="2971211">s</span><span class="op" id="2971212">.</span><span class="ident" id="2971213">insertSemi</span>&nbsp;<span class="op" id="2971224">&amp;&amp;</span>&nbsp;<span class="ident" id="2971227">s</span><span class="op" id="2971228">.</span><span class="ident" id="2971229">findLineEnd</span><span class="op" id="2971240">(</span><span class="op" id="2971241">)</span>&nbsp;<span class="op" id="2971243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2971250">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971305">s</span><span class="op" id="2971306">.</span><span class="ident" id="2971307">ch</span>&nbsp;<span class="op" id="2971310">=</span>&nbsp;<span class="string" id="2971312">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971321">s</span><span class="op" id="2971322">.</span><span class="ident" id="2971323">offset</span>&nbsp;<span class="op" id="2971330">=</span>&nbsp;<span class="ident" id="2971332">s</span><span class="op" id="2971333">.</span><span class="ident" id="2971334">file</span><span class="op" id="2971338">.</span><span class="ident" id="2971339">Offset</span><span class="op" id="2971345">(</span><span class="ident" id="2971346">pos</span><span class="op" id="2971349">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971356">s</span><span class="op" id="2971357">.</span><span class="ident" id="2971358">rdOffset</span>&nbsp;<span class="op" id="2971367">=</span>&nbsp;<span class="ident" id="2971369">s</span><span class="op" id="2971370">.</span><span class="ident" id="2971371">offset</span>&nbsp;<span class="op" id="2971378">+</span>&nbsp;<span class="num" id="2971380">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971387">s</span><span class="op" id="2971388">.</span><span class="ident" id="2971389">insertSemi</span>&nbsp;<span class="op" id="2971400">=</span>&nbsp;<span class="builtintype" id="2971402">false</span>&nbsp;<span class="comment" id="2971408">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971433">return</span>&nbsp;<span class="ident" id="2971440">pos</span><span class="op" id="2971443">,</span>&nbsp;<span class="ident" id="2971445">token</span><span class="op" id="2971450">.</span><span class="ident" id="2971451">SEMICOLON</span><span class="op" id="2971460">,</span>&nbsp;<span class="string" id="2971462">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971477">lit</span>&nbsp;<span class="op" id="2971481">=</span>&nbsp;<span class="ident" id="2971483">s</span><span class="op" id="2971484">.</span><span class="ident" id="2971485">scanComment</span><span class="op" id="2971496">(</span><span class="op" id="2971497">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971503">if</span>&nbsp;<span class="ident" id="2971506">s</span><span class="op" id="2971507">.</span><span class="ident" id="2971508">mode</span><span class="op" id="2971512">&amp;</span><span class="ident" id="2971513">ScanComments</span>&nbsp;<span class="op" id="2971526">==</span>&nbsp;<span class="num" id="2971529">0</span>&nbsp;<span class="op" id="2971531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2971538">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971559">s</span><span class="op" id="2971560">.</span><span class="ident" id="2971561">insertSemi</span>&nbsp;<span class="op" id="2971572">=</span>&nbsp;<span class="builtintype" id="2971574">false</span>&nbsp;<span class="comment" id="2971580">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971605">goto</span>&nbsp;<span class="ident" id="2971610">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971624">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971630">tok</span>&nbsp;<span class="op" id="2971634">=</span>&nbsp;<span class="ident" id="2971636">token</span><span class="op" id="2971641">.</span><span class="ident" id="2971642">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971653">}</span>&nbsp;<span class="keyword" id="2971655">else</span>&nbsp;<span class="op" id="2971660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971666">tok</span>&nbsp;<span class="op" id="2971670">=</span>&nbsp;<span class="ident" id="2971672">s</span><span class="op" id="2971673">.</span><span class="ident" id="2971674">switch2</span><span class="op" id="2971681">(</span><span class="ident" id="2971682">token</span><span class="op" id="2971687">.</span><span class="ident" id="2971688">QUO</span><span class="op" id="2971691">,</span>&nbsp;<span class="ident" id="2971693">token</span><span class="op" id="2971698">.</span><span class="ident" id="2971699">QUO_ASSIGN</span><span class="op" id="2971709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971718">case</span>&nbsp;<span class="string" id="2971723">&#39;%&#39;</span><span class="op" id="2971726">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971731">tok</span>&nbsp;<span class="op" id="2971735">=</span>&nbsp;<span class="ident" id="2971737">s</span><span class="op" id="2971738">.</span><span class="ident" id="2971739">switch2</span><span class="op" id="2971746">(</span><span class="ident" id="2971747">token</span><span class="op" id="2971752">.</span><span class="ident" id="2971753">REM</span><span class="op" id="2971756">,</span>&nbsp;<span class="ident" id="2971758">token</span><span class="op" id="2971763">.</span><span class="ident" id="2971764">REM_ASSIGN</span><span class="op" id="2971774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971778">case</span>&nbsp;<span class="string" id="2971783">&#39;^&#39;</span><span class="op" id="2971786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971791">tok</span>&nbsp;<span class="op" id="2971795">=</span>&nbsp;<span class="ident" id="2971797">s</span><span class="op" id="2971798">.</span><span class="ident" id="2971799">switch2</span><span class="op" id="2971806">(</span><span class="ident" id="2971807">token</span><span class="op" id="2971812">.</span><span class="ident" id="2971813">XOR</span><span class="op" id="2971816">,</span>&nbsp;<span class="ident" id="2971818">token</span><span class="op" id="2971823">.</span><span class="ident" id="2971824">XOR_ASSIGN</span><span class="op" id="2971834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971838">case</span>&nbsp;<span class="string" id="2971843">&#39;&lt;&#39;</span><span class="op" id="2971846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971851">if</span>&nbsp;<span class="ident" id="2971854">s</span><span class="op" id="2971855">.</span><span class="ident" id="2971856">ch</span>&nbsp;<span class="op" id="2971859">==</span>&nbsp;<span class="string" id="2971862">&#39;-&#39;</span>&nbsp;<span class="op" id="2971866">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971872">s</span><span class="op" id="2971873">.</span><span class="ident" id="2971874">next</span><span class="op" id="2971878">(</span><span class="op" id="2971879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971885">tok</span>&nbsp;<span class="op" id="2971889">=</span>&nbsp;<span class="ident" id="2971891">token</span><span class="op" id="2971896">.</span><span class="ident" id="2971897">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971906">}</span>&nbsp;<span class="keyword" id="2971908">else</span>&nbsp;<span class="op" id="2971913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2971919">tok</span>&nbsp;<span class="op" id="2971923">=</span>&nbsp;<span class="ident" id="2971925">s</span><span class="op" id="2971926">.</span><span class="ident" id="2971927">switch4</span><span class="op" id="2971934">(</span><span class="ident" id="2971935">token</span><span class="op" id="2971940">.</span><span class="ident" id="2971941">LSS</span><span class="op" id="2971944">,</span>&nbsp;<span class="ident" id="2971946">token</span><span class="op" id="2971951">.</span><span class="ident" id="2971952">LEQ</span><span class="op" id="2971955">,</span>&nbsp;<span class="string" id="2971957">&#39;&lt;&#39;</span><span class="op" id="2971960">,</span>&nbsp;<span class="ident" id="2971962">token</span><span class="op" id="2971967">.</span><span class="ident" id="2971968">SHL</span><span class="op" id="2971971">,</span>&nbsp;<span class="ident" id="2971973">token</span><span class="op" id="2971978">.</span><span class="ident" id="2971979">SHL_ASSIGN</span><span class="op" id="2971989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2971994">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2971998">case</span>&nbsp;<span class="string" id="2972003">&#39;&gt;&#39;</span><span class="op" id="2972006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972011">tok</span>&nbsp;<span class="op" id="2972015">=</span>&nbsp;<span class="ident" id="2972017">s</span><span class="op" id="2972018">.</span><span class="ident" id="2972019">switch4</span><span class="op" id="2972026">(</span><span class="ident" id="2972027">token</span><span class="op" id="2972032">.</span><span class="ident" id="2972033">GTR</span><span class="op" id="2972036">,</span>&nbsp;<span class="ident" id="2972038">token</span><span class="op" id="2972043">.</span><span class="ident" id="2972044">GEQ</span><span class="op" id="2972047">,</span>&nbsp;<span class="string" id="2972049">&#39;&gt;&#39;</span><span class="op" id="2972052">,</span>&nbsp;<span class="ident" id="2972054">token</span><span class="op" id="2972059">.</span><span class="ident" id="2972060">SHR</span><span class="op" id="2972063">,</span>&nbsp;<span class="ident" id="2972065">token</span><span class="op" id="2972070">.</span><span class="ident" id="2972071">SHR_ASSIGN</span><span class="op" id="2972081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972085">case</span>&nbsp;<span class="string" id="2972090">&#39;=&#39;</span><span class="op" id="2972093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972098">tok</span>&nbsp;<span class="op" id="2972102">=</span>&nbsp;<span class="ident" id="2972104">s</span><span class="op" id="2972105">.</span><span class="ident" id="2972106">switch2</span><span class="op" id="2972113">(</span><span class="ident" id="2972114">token</span><span class="op" id="2972119">.</span><span class="ident" id="2972120">ASSIGN</span><span class="op" id="2972126">,</span>&nbsp;<span class="ident" id="2972128">token</span><span class="op" id="2972133">.</span><span class="ident" id="2972134">EQL</span><span class="op" id="2972137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972141">case</span>&nbsp;<span class="string" id="2972146">&#39;!&#39;</span><span class="op" id="2972149">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972154">tok</span>&nbsp;<span class="op" id="2972158">=</span>&nbsp;<span class="ident" id="2972160">s</span><span class="op" id="2972161">.</span><span class="ident" id="2972162">switch2</span><span class="op" id="2972169">(</span><span class="ident" id="2972170">token</span><span class="op" id="2972175">.</span><span class="ident" id="2972176">NOT</span><span class="op" id="2972179">,</span>&nbsp;<span class="ident" id="2972181">token</span><span class="op" id="2972186">.</span><span class="ident" id="2972187">NEQ</span><span class="op" id="2972190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972194">case</span>&nbsp;<span class="string" id="2972199">&#39;&amp;&#39;</span><span class="op" id="2972202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972207">if</span>&nbsp;<span class="ident" id="2972210">s</span><span class="op" id="2972211">.</span><span class="ident" id="2972212">ch</span>&nbsp;<span class="op" id="2972215">==</span>&nbsp;<span class="string" id="2972218">&#39;^&#39;</span>&nbsp;<span class="op" id="2972222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972228">s</span><span class="op" id="2972229">.</span><span class="ident" id="2972230">next</span><span class="op" id="2972234">(</span><span class="op" id="2972235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972241">tok</span>&nbsp;<span class="op" id="2972245">=</span>&nbsp;<span class="ident" id="2972247">s</span><span class="op" id="2972248">.</span><span class="ident" id="2972249">switch2</span><span class="op" id="2972256">(</span><span class="ident" id="2972257">token</span><span class="op" id="2972262">.</span><span class="ident" id="2972263">AND_NOT</span><span class="op" id="2972270">,</span>&nbsp;<span class="ident" id="2972272">token</span><span class="op" id="2972277">.</span><span class="ident" id="2972278">AND_NOT_ASSIGN</span><span class="op" id="2972292">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972297">}</span>&nbsp;<span class="keyword" id="2972299">else</span>&nbsp;<span class="op" id="2972304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972310">tok</span>&nbsp;<span class="op" id="2972314">=</span>&nbsp;<span class="ident" id="2972316">s</span><span class="op" id="2972317">.</span><span class="ident" id="2972318">switch3</span><span class="op" id="2972325">(</span><span class="ident" id="2972326">token</span><span class="op" id="2972331">.</span><span class="ident" id="2972332">AND</span><span class="op" id="2972335">,</span>&nbsp;<span class="ident" id="2972337">token</span><span class="op" id="2972342">.</span><span class="ident" id="2972343">AND_ASSIGN</span><span class="op" id="2972353">,</span>&nbsp;<span class="string" id="2972355">&#39;&amp;&#39;</span><span class="op" id="2972358">,</span>&nbsp;<span class="ident" id="2972360">token</span><span class="op" id="2972365">.</span><span class="ident" id="2972366">LAND</span><span class="op" id="2972370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972379">case</span>&nbsp;<span class="string" id="2972384">&#39;|&#39;</span><span class="op" id="2972387">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972392">tok</span>&nbsp;<span class="op" id="2972396">=</span>&nbsp;<span class="ident" id="2972398">s</span><span class="op" id="2972399">.</span><span class="ident" id="2972400">switch3</span><span class="op" id="2972407">(</span><span class="ident" id="2972408">token</span><span class="op" id="2972413">.</span><span class="ident" id="2972414">OR</span><span class="op" id="2972416">,</span>&nbsp;<span class="ident" id="2972418">token</span><span class="op" id="2972423">.</span><span class="ident" id="2972424">OR_ASSIGN</span><span class="op" id="2972433">,</span>&nbsp;<span class="string" id="2972435">&#39;|&#39;</span><span class="op" id="2972438">,</span>&nbsp;<span class="ident" id="2972440">token</span><span class="op" id="2972445">.</span><span class="ident" id="2972446">LOR</span><span class="op" id="2972449">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972453">default</span><span class="op" id="2972460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2972465">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972515">if</span>&nbsp;<span class="ident" id="2972518">ch</span>&nbsp;<span class="op" id="2972521">!=</span>&nbsp;<span class="ident" id="2972524">bom</span>&nbsp;<span class="op" id="2972528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972534">s</span><span class="op" id="2972535">.</span><span class="builtintype" id="2972536">error</span><span class="op" id="2972541">(</span><span class="ident" id="2972542">s</span><span class="op" id="2972543">.</span><span class="ident" id="2972544">file</span><span class="op" id="2972548">.</span><span class="ident" id="2972549">Offset</span><span class="op" id="2972555">(</span><span class="ident" id="2972556">pos</span><span class="op" id="2972559">)</span><span class="op" id="2972560">,</span>&nbsp;<span class="ident" id="2972562">fmt</span><span class="op" id="2972565">.</span><span class="ident" id="2972566">Sprintf</span><span class="op" id="2972573">(</span><span class="string" id="2972574">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="2972597">,</span>&nbsp;<span class="ident" id="2972599">ch</span><span class="op" id="2972601">)</span><span class="op" id="2972602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972607">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972612">insertSemi</span>&nbsp;<span class="op" id="2972623">=</span>&nbsp;<span class="ident" id="2972625">s</span><span class="op" id="2972626">.</span><span class="ident" id="2972627">insertSemi</span>&nbsp;<span class="comment" id="2972638">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972669">tok</span>&nbsp;<span class="op" id="2972673">=</span>&nbsp;<span class="ident" id="2972675">token</span><span class="op" id="2972680">.</span><span class="ident" id="2972681">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972692">lit</span>&nbsp;<span class="op" id="2972696">=</span>&nbsp;<span class="builtintype" id="2972698">string</span><span class="op" id="2972704">(</span><span class="ident" id="2972705">ch</span><span class="op" id="2972707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972714">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972717">if</span>&nbsp;<span class="ident" id="2972720">s</span><span class="op" id="2972721">.</span><span class="ident" id="2972722">mode</span><span class="op" id="2972726">&amp;</span><span class="ident" id="2972727">dontInsertSemis</span>&nbsp;<span class="op" id="2972743">==</span>&nbsp;<span class="num" id="2972746">0</span>&nbsp;<span class="op" id="2972748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2972752">s</span><span class="op" id="2972753">.</span><span class="ident" id="2972754">insertSemi</span>&nbsp;<span class="op" id="2972765">=</span>&nbsp;<span class="ident" id="2972767">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2972779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2972783">return</span><br>
<span class="lineno">760</span><span class="op" id="2972790">}</span>
</div>
</body>
</html>
