<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4958362">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4958418">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4958472">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4958523">package</span>&nbsp;<span class="ident" id="4958531">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4958536">import</span>&nbsp;<span class="op" id="4958543">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4958546">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4958553">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4958564">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4958575">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4958582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4958585">//&nbsp;typeInfo&nbsp;holds&nbsp;details&nbsp;for&nbsp;the&nbsp;xml&nbsp;representation&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno">15</span><span class="keyword" id="4958649">type</span>&nbsp;<span class="ident" id="4958654">typeInfo</span>&nbsp;<span class="keyword" id="4958663">struct</span>&nbsp;<span class="op" id="4958670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958673">xmlname</span>&nbsp;<span class="op" id="4958681">*</span><span class="ident" id="4958682"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958693">fields</span>&nbsp;&nbsp;<span class="op" id="4958701">[</span><span class="op" id="4958702">]</span><span class="ident" id="4958703"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><br>
<span class="lineno"></span><span class="op" id="4958713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4958716">//&nbsp;fieldInfo&nbsp;holds&nbsp;details&nbsp;for&nbsp;the&nbsp;xml&nbsp;representation&nbsp;of&nbsp;a&nbsp;single&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="4958789">type</span>&nbsp;<span class="ident" id="4958794">fieldInfo</span>&nbsp;<span class="keyword" id="4958804">struct</span>&nbsp;<span class="op" id="4958811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958814">idx</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4958822">[</span><span class="op" id="4958823">]</span><span class="builtintype" id="4958824">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958829">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4958837">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958845">xmlns</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4958853">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958861">flags</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4958869"><a href="/encoding/xml/typeinfo.go.html#4958906">fieldFlags</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958881">parents</span>&nbsp;<span class="op" id="4958889">[</span><span class="op" id="4958890">]</span><span class="builtintype" id="4958891">string</span><br>
<span class="lineno"></span><span class="op" id="4958898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4958901">type</span>&nbsp;<span class="ident" id="4958906">fieldFlags</span>&nbsp;<span class="builtintype" id="4958917">int</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="4958922">const</span>&nbsp;<span class="op" id="4958928">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958931">fElement</span>&nbsp;<span class="ident" id="4958940"><a href="/encoding/xml/typeinfo.go.html#4958906">fieldFlags</a></span>&nbsp;<span class="op" id="4958951">=</span>&nbsp;<span class="num" id="4958953">1</span>&nbsp;<span class="op" id="4958955">&lt;&lt;</span>&nbsp;<span class="ident" id="4958958">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958964">fAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958971">fCharData</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958982">fInnerXml</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4958993">fComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959003">fAny</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959010">fOmitEmpty</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959023">fMode</span>&nbsp;<span class="op" id="4959029">=</span>&nbsp;<span class="ident" id="4959031"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span>&nbsp;<span class="op" id="4959040">|</span>&nbsp;<span class="ident" id="4959042"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span>&nbsp;<span class="op" id="4959048">|</span>&nbsp;<span class="ident" id="4959050"><a href="/encoding/xml/typeinfo.go.html#4958971">fCharData</a></span>&nbsp;<span class="op" id="4959060">|</span>&nbsp;<span class="ident" id="4959062"><a href="/encoding/xml/typeinfo.go.html#4958982">fInnerXml</a></span>&nbsp;<span class="op" id="4959072">|</span>&nbsp;<span class="ident" id="4959074"><a href="/encoding/xml/typeinfo.go.html#4958993">fComment</a></span>&nbsp;<span class="op" id="4959083">|</span>&nbsp;<span class="ident" id="4959085"><a href="/encoding/xml/typeinfo.go.html#4959003">fAny</a></span><br>
<span class="lineno"></span><span class="op" id="4959090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4959093">var</span>&nbsp;<span class="ident" id="4959097">tinfoMap</span>&nbsp;<span class="op" id="4959106">=</span>&nbsp;<span class="builtinfunc" id="4959108">make</span><span class="op" id="4959112">(</span><span class="keyword" id="4959113">map</span><span class="op" id="4959116">[</span><span class="ident" id="4959117"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4959124">.</span><span class="ident" id="4959125">Type</span><span class="op" id="4959129">]</span><span class="op" id="4959130">*</span><span class="ident" id="4959131"><a href="/encoding/xml/typeinfo.go.html#4958654">typeInfo</a></span><span class="op" id="4959139">)</span><br>
<span class="lineno">45</span><span class="keyword" id="4959141">var</span>&nbsp;<span class="ident" id="4959145">tinfoLock</span>&nbsp;<span class="ident" id="4959155"><a href="/encoding/xml/typeinfo.go.html#4958575">sync</a></span><span class="op" id="4959159">.</span><span class="ident" id="4959160">RWMutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4959169">var</span>&nbsp;<span class="ident" id="4959173">nameType</span>&nbsp;<span class="op" id="4959182">=</span>&nbsp;<span class="ident" id="4959184"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4959191">.</span><span class="ident" id="4959192">TypeOf</span><span class="op" id="4959198">(</span><span class="ident" id="4959199"><a href="/encoding/xml/xml.go.html#4968861">Name</a></span><span class="op" id="4959203">{</span><span class="op" id="4959204">}</span><span class="op" id="4959205">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4959208">//&nbsp;getTypeInfo&nbsp;returns&nbsp;the&nbsp;typeInfo&nbsp;structure&nbsp;with&nbsp;details&nbsp;necessary</span><br>
<span class="lineno">50</span><span class="comment" id="4959277">//&nbsp;for&nbsp;marshalling&nbsp;and&nbsp;unmarshalling&nbsp;typ.</span><br>
<span class="lineno"></span><span class="keyword" id="4959319">func</span>&nbsp;<span class="ident" id="4959324">getTypeInfo</span><span class="op" id="4959335">(</span><span class="ident" id="4959336">typ</span>&nbsp;<span class="ident" id="4959340"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4959347">.</span><span class="ident" id="4959348">Type</span><span class="op" id="4959352">)</span>&nbsp;<span class="op" id="4959354">(</span><span class="op" id="4959355">*</span><span class="ident" id="4959356"><a href="/encoding/xml/typeinfo.go.html#4958654">typeInfo</a></span><span class="op" id="4959364">,</span>&nbsp;<span class="builtintype" id="4959366">error</span><span class="op" id="4959371">)</span>&nbsp;<span class="op" id="4959373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959376"><a href="/encoding/xml/typeinfo.go.html#4959145">tinfoLock</a></span><span class="op" id="4959385">.</span><span class="ident" id="4959386">RLock</span><span class="op" id="4959391">(</span><span class="op" id="4959392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959395">tinfo</span><span class="op" id="4959400">,</span>&nbsp;<span class="ident" id="4959402">ok</span>&nbsp;<span class="op" id="4959405">:=</span>&nbsp;<span class="ident" id="4959408"><a href="/encoding/xml/typeinfo.go.html#4959097">tinfoMap</a></span><span class="op" id="4959416">[</span><span class="ident" id="4959417"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4959420">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959423"><a href="/encoding/xml/typeinfo.go.html#4959145">tinfoLock</a></span><span class="op" id="4959432">.</span><span class="ident" id="4959433">RUnlock</span><span class="op" id="4959440">(</span><span class="op" id="4959441">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959444">if</span>&nbsp;<span class="ident" id="4959447"><a href="/encoding/xml/typeinfo.go.html#4959402">ok</a></span>&nbsp;<span class="op" id="4959450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959454">return</span>&nbsp;<span class="ident" id="4959461"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4959466">,</span>&nbsp;<span class="ident" id="4959468">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4959473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959476"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span>&nbsp;<span class="op" id="4959482">=</span>&nbsp;<span class="op" id="4959484">&amp;</span><span class="ident" id="4959485"><a href="/encoding/xml/typeinfo.go.html#4958654">typeInfo</a></span><span class="op" id="4959493">{</span><span class="op" id="4959494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959497">if</span>&nbsp;<span class="ident" id="4959500"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4959503">.</span><span class="ident" id="4959504">Kind</span><span class="op" id="4959508">(</span><span class="op" id="4959509">)</span>&nbsp;<span class="op" id="4959511">==</span>&nbsp;<span class="ident" id="4959514"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4959521">.</span><span class="ident" id="4959522">Struct</span>&nbsp;<span class="op" id="4959529">&amp;&amp;</span>&nbsp;<span class="ident" id="4959532"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span>&nbsp;<span class="op" id="4959536">!=</span>&nbsp;<span class="ident" id="4959539"><a href="/encoding/xml/typeinfo.go.html#4959173">nameType</a></span>&nbsp;<span class="op" id="4959548">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959552">n</span>&nbsp;<span class="op" id="4959554">:=</span>&nbsp;<span class="ident" id="4959557"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4959560">.</span><span class="ident" id="4959561">NumField</span><span class="op" id="4959569">(</span><span class="op" id="4959570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959574">for</span>&nbsp;<span class="ident" id="4959578">i</span>&nbsp;<span class="op" id="4959580">:=</span>&nbsp;<span class="num" id="4959583">0</span><span class="op" id="4959584">;</span>&nbsp;<span class="ident" id="4959586"><a href="/encoding/xml/typeinfo.go.html#4959578">i</a></span>&nbsp;<span class="op" id="4959588">&lt;</span>&nbsp;<span class="ident" id="4959590"><a href="/encoding/xml/typeinfo.go.html#4959552">n</a></span><span class="op" id="4959591">;</span>&nbsp;<span class="ident" id="4959593"><a href="/encoding/xml/typeinfo.go.html#4959578">i</a></span><span class="op" id="4959594">++</span>&nbsp;<span class="op" id="4959597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959602">f</span>&nbsp;<span class="op" id="4959604">:=</span>&nbsp;<span class="ident" id="4959607"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4959610">.</span><span class="ident" id="4959611">Field</span><span class="op" id="4959616">(</span><span class="ident" id="4959617"><a href="/encoding/xml/typeinfo.go.html#4959578">i</a></span><span class="op" id="4959618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959623">if</span>&nbsp;<span class="ident" id="4959626"><a href="/encoding/xml/typeinfo.go.html#4959602">f</a></span><span class="op" id="4959627">.</span><span class="ident" id="4959628">PkgPath</span>&nbsp;<span class="op" id="4959636">!=</span>&nbsp;<span class="string" id="4959639">&#34;&#34;</span>&nbsp;<span class="op" id="4959642">||</span>&nbsp;<span class="ident" id="4959645"><a href="/encoding/xml/typeinfo.go.html#4959602">f</a></span><span class="op" id="4959646">.</span><span class="ident" id="4959647">Tag</span><span class="op" id="4959650">.</span><span class="ident" id="4959651">Get</span><span class="op" id="4959654">(</span><span class="string" id="4959655">&#34;xml&#34;</span><span class="op" id="4959660">)</span>&nbsp;<span class="op" id="4959662">==</span>&nbsp;<span class="string" id="4959665">&#34;-&#34;</span>&nbsp;<span class="op" id="4959669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959675">continue</span>&nbsp;<span class="comment" id="4959684">//&nbsp;Private&nbsp;field</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4959704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4959710">//&nbsp;For&nbsp;embedded&nbsp;structs,&nbsp;embed&nbsp;its&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959756">if</span>&nbsp;<span class="ident" id="4959759"><a href="/encoding/xml/typeinfo.go.html#4959602">f</a></span><span class="op" id="4959760">.</span><span class="ident" id="4959761">Anonymous</span>&nbsp;<span class="op" id="4959771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959777">t</span>&nbsp;<span class="op" id="4959779">:=</span>&nbsp;<span class="ident" id="4959782"><a href="/encoding/xml/typeinfo.go.html#4959602">f</a></span><span class="op" id="4959783">.</span><span class="ident" id="4959784">Type</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959793">if</span>&nbsp;<span class="ident" id="4959796"><a href="/encoding/xml/typeinfo.go.html#4959777">t</a></span><span class="op" id="4959797">.</span><span class="ident" id="4959798">Kind</span><span class="op" id="4959802">(</span><span class="op" id="4959803">)</span>&nbsp;<span class="op" id="4959805">==</span>&nbsp;<span class="ident" id="4959808"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4959815">.</span><span class="ident" id="4959816">Ptr</span>&nbsp;<span class="op" id="4959820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959827"><a href="/encoding/xml/typeinfo.go.html#4959777">t</a></span>&nbsp;<span class="op" id="4959829">=</span>&nbsp;<span class="ident" id="4959831"><a href="/encoding/xml/typeinfo.go.html#4959777">t</a></span><span class="op" id="4959832">.</span><span class="ident" id="4959833">Elem</span><span class="op" id="4959837">(</span><span class="op" id="4959838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4959844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959850">if</span>&nbsp;<span class="ident" id="4959853"><a href="/encoding/xml/typeinfo.go.html#4959777">t</a></span><span class="op" id="4959854">.</span><span class="ident" id="4959855">Kind</span><span class="op" id="4959859">(</span><span class="op" id="4959860">)</span>&nbsp;<span class="op" id="4959862">==</span>&nbsp;<span class="ident" id="4959865"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4959872">.</span><span class="ident" id="4959873">Struct</span>&nbsp;<span class="op" id="4959880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4959887">inner</span><span class="op" id="4959892">,</span>&nbsp;<span class="ident" id="4959894">err</span>&nbsp;<span class="op" id="4959898">:=</span>&nbsp;<span class="ident" id="4959901"><a href="/encoding/xml/typeinfo.go.html#4959324">getTypeInfo</a></span><span class="op" id="4959912">(</span><span class="ident" id="4959913"><a href="/encoding/xml/typeinfo.go.html#4959777">t</a></span><span class="op" id="4959914">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959921">if</span>&nbsp;<span class="ident" id="4959924"><a href="/encoding/xml/typeinfo.go.html#4959894">err</a></span>&nbsp;<span class="op" id="4959928">!=</span>&nbsp;<span class="ident" id="4959931">nil</span>&nbsp;<span class="op" id="4959935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959943">return</span>&nbsp;<span class="ident" id="4959950">nil</span><span class="op" id="4959953">,</span>&nbsp;<span class="ident" id="4959955"><a href="/encoding/xml/typeinfo.go.html#4959894">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4959964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4959971">if</span>&nbsp;<span class="ident" id="4959974"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4959979">.</span><span class="ident" id="4959980">xmlname</span>&nbsp;<span class="op" id="4959988">==</span>&nbsp;<span class="ident" id="4959991">nil</span>&nbsp;<span class="op" id="4959995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960003"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4960008">.</span><span class="ident" id="4960009">xmlname</span>&nbsp;<span class="op" id="4960017">=</span>&nbsp;<span class="ident" id="4960019"><a href="/encoding/xml/typeinfo.go.html#4959887">inner</a></span><span class="op" id="4960024">.</span><span class="ident" id="4960025">xmlname</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960045">for</span>&nbsp;<span class="ident" id="4960049">_</span><span class="op" id="4960050">,</span>&nbsp;<span class="ident" id="4960052">finfo</span>&nbsp;<span class="op" id="4960058">:=</span>&nbsp;<span class="keyword" id="4960061">range</span>&nbsp;<span class="ident" id="4960067"><a href="/encoding/xml/typeinfo.go.html#4959887">inner</a></span><span class="op" id="4960072">.</span><span class="ident" id="4960073">fields</span>&nbsp;<span class="op" id="4960080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960088"><a href="/encoding/xml/typeinfo.go.html#4960052">finfo</a></span><span class="op" id="4960093">.</span><span class="ident" id="4960094">idx</span>&nbsp;<span class="op" id="4960098">=</span>&nbsp;<span class="builtinfunc" id="4960100">append</span><span class="op" id="4960106">(</span><span class="op" id="4960107">[</span><span class="op" id="4960108">]</span><span class="builtintype" id="4960109">int</span><span class="op" id="4960112">{</span><span class="ident" id="4960113"><a href="/encoding/xml/typeinfo.go.html#4959578">i</a></span><span class="op" id="4960114">}</span><span class="op" id="4960115">,</span>&nbsp;<span class="ident" id="4960117"><a href="/encoding/xml/typeinfo.go.html#4960052">finfo</a></span><span class="op" id="4960122">.</span><span class="ident" id="4960123">idx</span><span class="op" id="4960126">...</span><span class="op" id="4960129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960137">if</span>&nbsp;<span class="ident" id="4960140">err</span>&nbsp;<span class="op" id="4960144">:=</span>&nbsp;<span class="ident" id="4960147"><a href="/encoding/xml/typeinfo.go.html#4965007">addFieldInfo</a></span><span class="op" id="4960159">(</span><span class="ident" id="4960160"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4960163">,</span>&nbsp;<span class="ident" id="4960165"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4960170">,</span>&nbsp;<span class="op" id="4960172">&amp;</span><span class="ident" id="4960173"><a href="/encoding/xml/typeinfo.go.html#4960052">finfo</a></span><span class="op" id="4960178">)</span><span class="op" id="4960179">;</span>&nbsp;<span class="ident" id="4960181"><a href="/encoding/xml/typeinfo.go.html#4960140">err</a></span>&nbsp;<span class="op" id="4960185">!=</span>&nbsp;<span class="ident" id="4960188">nil</span>&nbsp;<span class="op" id="4960192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960201">return</span>&nbsp;<span class="ident" id="4960208">nil</span><span class="op" id="4960211">,</span>&nbsp;<span class="ident" id="4960213"><a href="/encoding/xml/typeinfo.go.html#4960140">err</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960237">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960255">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960261">finfo</span><span class="op" id="4960266">,</span>&nbsp;<span class="ident" id="4960268">err</span>&nbsp;<span class="op" id="4960272">:=</span>&nbsp;<span class="ident" id="4960275"><a href="/encoding/xml/typeinfo.go.html#4960716">structFieldInfo</a></span><span class="op" id="4960290">(</span><span class="ident" id="4960291"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4960294">,</span>&nbsp;<span class="op" id="4960296">&amp;</span><span class="ident" id="4960297"><a href="/encoding/xml/typeinfo.go.html#4959602">f</a></span><span class="op" id="4960298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960303">if</span>&nbsp;<span class="ident" id="4960306"><a href="/encoding/xml/typeinfo.go.html#4960268">err</a></span>&nbsp;<span class="op" id="4960310">!=</span>&nbsp;<span class="ident" id="4960313">nil</span>&nbsp;<span class="op" id="4960317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960323">return</span>&nbsp;<span class="ident" id="4960330">nil</span><span class="op" id="4960333">,</span>&nbsp;<span class="ident" id="4960335"><a href="/encoding/xml/typeinfo.go.html#4960268">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960342">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960348">if</span>&nbsp;<span class="ident" id="4960351"><a href="/encoding/xml/typeinfo.go.html#4959602">f</a></span><span class="op" id="4960352">.</span><span class="ident" id="4960353">Name</span>&nbsp;<span class="op" id="4960358">==</span>&nbsp;<span class="string" id="4960361">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="4960371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960377"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4960382">.</span><span class="ident" id="4960383">xmlname</span>&nbsp;<span class="op" id="4960391">=</span>&nbsp;<span class="ident" id="4960393"><a href="/encoding/xml/typeinfo.go.html#4960261">finfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960403">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960415">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4960421">//&nbsp;Add&nbsp;the&nbsp;field&nbsp;if&nbsp;it&nbsp;doesn&#39;t&nbsp;conflict&nbsp;with&nbsp;other&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960483">if</span>&nbsp;<span class="ident" id="4960486">err</span>&nbsp;<span class="op" id="4960490">:=</span>&nbsp;<span class="ident" id="4960493"><a href="/encoding/xml/typeinfo.go.html#4965007">addFieldInfo</a></span><span class="op" id="4960505">(</span><span class="ident" id="4960506"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4960509">,</span>&nbsp;<span class="ident" id="4960511"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4960516">,</span>&nbsp;<span class="ident" id="4960518"><a href="/encoding/xml/typeinfo.go.html#4960261">finfo</a></span><span class="op" id="4960523">)</span><span class="op" id="4960524">;</span>&nbsp;<span class="ident" id="4960526"><a href="/encoding/xml/typeinfo.go.html#4960486">err</a></span>&nbsp;<span class="op" id="4960530">!=</span>&nbsp;<span class="ident" id="4960533">nil</span>&nbsp;<span class="op" id="4960537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960543">return</span>&nbsp;<span class="ident" id="4960550">nil</span><span class="op" id="4960553">,</span>&nbsp;<span class="ident" id="4960555"><a href="/encoding/xml/typeinfo.go.html#4960486">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960562">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960572"><a href="/encoding/xml/typeinfo.go.html#4959145">tinfoLock</a></span><span class="op" id="4960581">.</span><span class="ident" id="4960582">Lock</span><span class="op" id="4960586">(</span><span class="op" id="4960587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960590"><a href="/encoding/xml/typeinfo.go.html#4959097">tinfoMap</a></span><span class="op" id="4960598">[</span><span class="ident" id="4960599"><a href="/encoding/xml/typeinfo.go.html#4959336">typ</a></span><span class="op" id="4960602">]</span>&nbsp;<span class="op" id="4960604">=</span>&nbsp;<span class="ident" id="4960606"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960613"><a href="/encoding/xml/typeinfo.go.html#4959145">tinfoLock</a></span><span class="op" id="4960622">.</span><span class="ident" id="4960623">Unlock</span><span class="op" id="4960629">(</span><span class="op" id="4960630">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960633">return</span>&nbsp;<span class="ident" id="4960640"><a href="/encoding/xml/typeinfo.go.html#4959395">tinfo</a></span><span class="op" id="4960645">,</span>&nbsp;<span class="ident" id="4960647">nil</span><br>
<span class="lineno"></span><span class="op" id="4960651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4960654">//&nbsp;structFieldInfo&nbsp;builds&nbsp;and&nbsp;returns&nbsp;a&nbsp;fieldInfo&nbsp;for&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="4960711">func</span>&nbsp;<span class="ident" id="4960716">structFieldInfo</span><span class="op" id="4960731">(</span><span class="ident" id="4960732">typ</span>&nbsp;<span class="ident" id="4960736"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4960743">.</span><span class="ident" id="4960744">Type</span><span class="op" id="4960748">,</span>&nbsp;<span class="ident" id="4960750">f</span>&nbsp;<span class="op" id="4960752">*</span><span class="ident" id="4960753"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4960760">.</span><span class="ident" id="4960761">StructField</span><span class="op" id="4960772">)</span>&nbsp;<span class="op" id="4960774">(</span><span class="op" id="4960775">*</span><span class="ident" id="4960776"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4960785">,</span>&nbsp;<span class="builtintype" id="4960787">error</span><span class="op" id="4960792">)</span>&nbsp;<span class="op" id="4960794">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960797">finfo</span>&nbsp;<span class="op" id="4960803">:=</span>&nbsp;<span class="op" id="4960806">&amp;</span><span class="ident" id="4960807"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4960816">{</span><span class="ident" id="4960817">idx</span><span class="op" id="4960820">:</span>&nbsp;<span class="ident" id="4960822"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4960823">.</span><span class="ident" id="4960824">Index</span><span class="op" id="4960829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4960833">//&nbsp;Split&nbsp;the&nbsp;tag&nbsp;from&nbsp;the&nbsp;xml&nbsp;namespace&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960888">tag</span>&nbsp;<span class="op" id="4960892">:=</span>&nbsp;<span class="ident" id="4960895"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4960896">.</span><span class="ident" id="4960897">Tag</span><span class="op" id="4960900">.</span><span class="ident" id="4960901">Get</span><span class="op" id="4960904">(</span><span class="string" id="4960905">&#34;xml&#34;</span><span class="op" id="4960910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4960913">if</span>&nbsp;<span class="ident" id="4960916">i</span>&nbsp;<span class="op" id="4960918">:=</span>&nbsp;<span class="ident" id="4960921"><a href="/encoding/xml/typeinfo.go.html#4958564">strings</a></span><span class="op" id="4960928">.</span><span class="ident" id="4960929">Index</span><span class="op" id="4960934">(</span><span class="ident" id="4960935"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><span class="op" id="4960938">,</span>&nbsp;<span class="string" id="4960940">&#34;&nbsp;&#34;</span><span class="op" id="4960943">)</span><span class="op" id="4960944">;</span>&nbsp;<span class="ident" id="4960946"><a href="/encoding/xml/typeinfo.go.html#4960916">i</a></span>&nbsp;<span class="op" id="4960948">&gt;=</span>&nbsp;<span class="num" id="4960951">0</span>&nbsp;<span class="op" id="4960953">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4960957"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4960962">.</span><span class="ident" id="4960963">xmlns</span><span class="op" id="4960968">,</span>&nbsp;<span class="ident" id="4960970"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span>&nbsp;<span class="op" id="4960974">=</span>&nbsp;<span class="ident" id="4960976"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><span class="op" id="4960979">[</span><span class="op" id="4960980">:</span><span class="ident" id="4960981"><a href="/encoding/xml/typeinfo.go.html#4960916">i</a></span><span class="op" id="4960982">]</span><span class="op" id="4960983">,</span>&nbsp;<span class="ident" id="4960985"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><span class="op" id="4960988">[</span><span class="ident" id="4960989"><a href="/encoding/xml/typeinfo.go.html#4960916">i</a></span><span class="op" id="4960990">+</span><span class="num" id="4960991">1</span><span class="op" id="4960992">:</span><span class="op" id="4960993">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4960996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4961000">//&nbsp;Parse&nbsp;flags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961017">tokens</span>&nbsp;<span class="op" id="4961024">:=</span>&nbsp;<span class="ident" id="4961027"><a href="/encoding/xml/typeinfo.go.html#4958564">strings</a></span><span class="op" id="4961034">.</span><span class="ident" id="4961035">Split</span><span class="op" id="4961040">(</span><span class="ident" id="4961041"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><span class="op" id="4961044">,</span>&nbsp;<span class="string" id="4961046">&#34;,&#34;</span><span class="op" id="4961049">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961052">if</span>&nbsp;<span class="builtinfunc" id="4961055">len</span><span class="op" id="4961058">(</span><span class="ident" id="4961059"><a href="/encoding/xml/typeinfo.go.html#4961017">tokens</a></span><span class="op" id="4961065">)</span>&nbsp;<span class="op" id="4961067">==</span>&nbsp;<span class="num" id="4961070">1</span>&nbsp;<span class="op" id="4961072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961076"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961081">.</span><span class="ident" id="4961082">flags</span>&nbsp;<span class="op" id="4961088">=</span>&nbsp;<span class="ident" id="4961090"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961100">}</span>&nbsp;<span class="keyword" id="4961102">else</span>&nbsp;<span class="op" id="4961107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961111"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span>&nbsp;<span class="op" id="4961115">=</span>&nbsp;<span class="ident" id="4961117"><a href="/encoding/xml/typeinfo.go.html#4961017">tokens</a></span><span class="op" id="4961123">[</span><span class="num" id="4961124">0</span><span class="op" id="4961125">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961129">for</span>&nbsp;<span class="ident" id="4961133">_</span><span class="op" id="4961134">,</span>&nbsp;<span class="ident" id="4961136">flag</span>&nbsp;<span class="op" id="4961141">:=</span>&nbsp;<span class="keyword" id="4961144">range</span>&nbsp;<span class="ident" id="4961150"><a href="/encoding/xml/typeinfo.go.html#4961017">tokens</a></span><span class="op" id="4961156">[</span><span class="num" id="4961157">1</span><span class="op" id="4961158">:</span><span class="op" id="4961159">]</span>&nbsp;<span class="op" id="4961161">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961166">switch</span>&nbsp;<span class="ident" id="4961173"><a href="/encoding/xml/typeinfo.go.html#4961136">flag</a></span>&nbsp;<span class="op" id="4961178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961183">case</span>&nbsp;<span class="string" id="4961188">&#34;attr&#34;</span><span class="op" id="4961194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961200"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961205">.</span><span class="ident" id="4961206">flags</span>&nbsp;<span class="op" id="4961212">|=</span>&nbsp;<span class="ident" id="4961215"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961224">case</span>&nbsp;<span class="string" id="4961229">&#34;chardata&#34;</span><span class="op" id="4961239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961245"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961250">.</span><span class="ident" id="4961251">flags</span>&nbsp;<span class="op" id="4961257">|=</span>&nbsp;<span class="ident" id="4961260"><a href="/encoding/xml/typeinfo.go.html#4958971">fCharData</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961273">case</span>&nbsp;<span class="string" id="4961278">&#34;innerxml&#34;</span><span class="op" id="4961288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961294"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961299">.</span><span class="ident" id="4961300">flags</span>&nbsp;<span class="op" id="4961306">|=</span>&nbsp;<span class="ident" id="4961309"><a href="/encoding/xml/typeinfo.go.html#4958982">fInnerXml</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961322">case</span>&nbsp;<span class="string" id="4961327">&#34;comment&#34;</span><span class="op" id="4961336">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961342"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961347">.</span><span class="ident" id="4961348">flags</span>&nbsp;<span class="op" id="4961354">|=</span>&nbsp;<span class="ident" id="4961357"><a href="/encoding/xml/typeinfo.go.html#4958993">fComment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961369">case</span>&nbsp;<span class="string" id="4961374">&#34;any&#34;</span><span class="op" id="4961379">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961385"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961390">.</span><span class="ident" id="4961391">flags</span>&nbsp;<span class="op" id="4961397">|=</span>&nbsp;<span class="ident" id="4961400"><a href="/encoding/xml/typeinfo.go.html#4959003">fAny</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961408">case</span>&nbsp;<span class="string" id="4961413">&#34;omitempty&#34;</span><span class="op" id="4961424">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961430"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961435">.</span><span class="ident" id="4961436">flags</span>&nbsp;<span class="op" id="4961442">|=</span>&nbsp;<span class="ident" id="4961445"><a href="/encoding/xml/typeinfo.go.html#4959010">fOmitEmpty</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961463">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4961468">//&nbsp;Validate&nbsp;the&nbsp;flags&nbsp;used.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961498">valid</span>&nbsp;<span class="op" id="4961504">:=</span>&nbsp;<span class="builtintype" id="4961507">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961514">switch</span>&nbsp;<span class="ident" id="4961521">mode</span>&nbsp;<span class="op" id="4961526">:=</span>&nbsp;<span class="ident" id="4961529"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961534">.</span><span class="ident" id="4961535">flags</span>&nbsp;<span class="op" id="4961541">&amp;</span>&nbsp;<span class="ident" id="4961543"><a href="/encoding/xml/typeinfo.go.html#4959023">fMode</a></span><span class="op" id="4961548">;</span>&nbsp;<span class="ident" id="4961550"><a href="/encoding/xml/typeinfo.go.html#4961521">mode</a></span>&nbsp;<span class="op" id="4961555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961559">case</span>&nbsp;<span class="num" id="4961564">0</span><span class="op" id="4961565">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961570"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961575">.</span><span class="ident" id="4961576">flags</span>&nbsp;<span class="op" id="4961582">|=</span>&nbsp;<span class="ident" id="4961585"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961596">case</span>&nbsp;<span class="ident" id="4961601"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span><span class="op" id="4961606">,</span>&nbsp;<span class="ident" id="4961608"><a href="/encoding/xml/typeinfo.go.html#4958971">fCharData</a></span><span class="op" id="4961617">,</span>&nbsp;<span class="ident" id="4961619"><a href="/encoding/xml/typeinfo.go.html#4958982">fInnerXml</a></span><span class="op" id="4961628">,</span>&nbsp;<span class="ident" id="4961630"><a href="/encoding/xml/typeinfo.go.html#4958993">fComment</a></span><span class="op" id="4961638">,</span>&nbsp;<span class="ident" id="4961640"><a href="/encoding/xml/typeinfo.go.html#4959003">fAny</a></span><span class="op" id="4961644">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961649">if</span>&nbsp;<span class="ident" id="4961652"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4961653">.</span><span class="ident" id="4961654">Name</span>&nbsp;<span class="op" id="4961659">==</span>&nbsp;<span class="string" id="4961662">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="4961672">||</span>&nbsp;<span class="ident" id="4961675"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span>&nbsp;<span class="op" id="4961679">!=</span>&nbsp;<span class="string" id="4961682">&#34;&#34;</span>&nbsp;<span class="op" id="4961685">&amp;&amp;</span>&nbsp;<span class="ident" id="4961688"><a href="/encoding/xml/typeinfo.go.html#4961521">mode</a></span>&nbsp;<span class="op" id="4961693">!=</span>&nbsp;<span class="ident" id="4961696"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span>&nbsp;<span class="op" id="4961702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961708"><a href="/encoding/xml/typeinfo.go.html#4961498">valid</a></span>&nbsp;<span class="op" id="4961714">=</span>&nbsp;<span class="builtintype" id="4961716">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961725">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961729">default</span><span class="op" id="4961736">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4961741">//&nbsp;This&nbsp;will&nbsp;also&nbsp;catch&nbsp;multiple&nbsp;modes&nbsp;in&nbsp;a&nbsp;single&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961802"><a href="/encoding/xml/typeinfo.go.html#4961498">valid</a></span>&nbsp;<span class="op" id="4961808">=</span>&nbsp;<span class="builtintype" id="4961810">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961822">if</span>&nbsp;<span class="ident" id="4961825"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961830">.</span><span class="ident" id="4961831">flags</span><span class="op" id="4961836">&amp;</span><span class="ident" id="4961837"><a href="/encoding/xml/typeinfo.go.html#4959023">fMode</a></span>&nbsp;<span class="op" id="4961843">==</span>&nbsp;<span class="ident" id="4961846"><a href="/encoding/xml/typeinfo.go.html#4959003">fAny</a></span>&nbsp;<span class="op" id="4961851">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961856"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961861">.</span><span class="ident" id="4961862">flags</span>&nbsp;<span class="op" id="4961868">|=</span>&nbsp;<span class="ident" id="4961871"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961886">if</span>&nbsp;<span class="ident" id="4961889"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961894">.</span><span class="ident" id="4961895">flags</span><span class="op" id="4961900">&amp;</span><span class="ident" id="4961901"><a href="/encoding/xml/typeinfo.go.html#4959010">fOmitEmpty</a></span>&nbsp;<span class="op" id="4961912">!=</span>&nbsp;<span class="num" id="4961915">0</span>&nbsp;<span class="op" id="4961917">&amp;&amp;</span>&nbsp;<span class="ident" id="4961920"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4961925">.</span><span class="ident" id="4961926">flags</span><span class="op" id="4961931">&amp;</span><span class="op" id="4961932">(</span><span class="ident" id="4961933"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span><span class="op" id="4961941">|</span><span class="ident" id="4961942"><a href="/encoding/xml/typeinfo.go.html#4958964">fAttr</a></span><span class="op" id="4961947">)</span>&nbsp;<span class="op" id="4961949">==</span>&nbsp;<span class="num" id="4961952">0</span>&nbsp;<span class="op" id="4961954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4961959"><a href="/encoding/xml/typeinfo.go.html#4961498">valid</a></span>&nbsp;<span class="op" id="4961965">=</span>&nbsp;<span class="builtintype" id="4961967">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4961975">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961979">if</span>&nbsp;<span class="op" id="4961982">!</span><span class="ident" id="4961983"><a href="/encoding/xml/typeinfo.go.html#4961498">valid</a></span>&nbsp;<span class="op" id="4961989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4961994">return</span>&nbsp;<span class="ident" id="4962001">nil</span><span class="op" id="4962004">,</span>&nbsp;<span class="ident" id="4962006"><a href="/encoding/xml/typeinfo.go.html#4958546">fmt</a></span><span class="op" id="4962009">.</span><span class="ident" id="4962010">Errorf</span><span class="op" id="4962016">(</span><span class="string" id="4962017">&#34;xml:&nbsp;invalid&nbsp;tag&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s:&nbsp;%q&#34;</span><span class="op" id="4962062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962068"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962069">.</span><span class="ident" id="4962070">Name</span><span class="op" id="4962074">,</span>&nbsp;<span class="ident" id="4962076"><a href="/encoding/xml/typeinfo.go.html#4960732">typ</a></span><span class="op" id="4962079">,</span>&nbsp;<span class="ident" id="4962081"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962082">.</span><span class="ident" id="4962083">Tag</span><span class="op" id="4962086">.</span><span class="ident" id="4962087">Get</span><span class="op" id="4962090">(</span><span class="string" id="4962091">&#34;xml&#34;</span><span class="op" id="4962096">)</span><span class="op" id="4962097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962104">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962108">//&nbsp;Use&nbsp;of&nbsp;xmlns&nbsp;without&nbsp;a&nbsp;name&nbsp;is&nbsp;not&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962156">if</span>&nbsp;<span class="ident" id="4962159"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962164">.</span><span class="ident" id="4962165">xmlns</span>&nbsp;<span class="op" id="4962171">!=</span>&nbsp;<span class="string" id="4962174">&#34;&#34;</span>&nbsp;<span class="op" id="4962177">&amp;&amp;</span>&nbsp;<span class="ident" id="4962180"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span>&nbsp;<span class="op" id="4962184">==</span>&nbsp;<span class="string" id="4962187">&#34;&#34;</span>&nbsp;<span class="op" id="4962190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962194">return</span>&nbsp;<span class="ident" id="4962201">nil</span><span class="op" id="4962204">,</span>&nbsp;<span class="ident" id="4962206"><a href="/encoding/xml/typeinfo.go.html#4958546">fmt</a></span><span class="op" id="4962209">.</span><span class="ident" id="4962210">Errorf</span><span class="op" id="4962216">(</span><span class="string" id="4962217">&#34;xml:&nbsp;namespace&nbsp;without&nbsp;name&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s:&nbsp;%q&#34;</span><span class="op" id="4962273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962278"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962279">.</span><span class="ident" id="4962280">Name</span><span class="op" id="4962284">,</span>&nbsp;<span class="ident" id="4962286"><a href="/encoding/xml/typeinfo.go.html#4960732">typ</a></span><span class="op" id="4962289">,</span>&nbsp;<span class="ident" id="4962291"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962292">.</span><span class="ident" id="4962293">Tag</span><span class="op" id="4962296">.</span><span class="ident" id="4962297">Get</span><span class="op" id="4962300">(</span><span class="string" id="4962301">&#34;xml&#34;</span><span class="op" id="4962306">)</span><span class="op" id="4962307">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962314">if</span>&nbsp;<span class="ident" id="4962317"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962318">.</span><span class="ident" id="4962319">Name</span>&nbsp;<span class="op" id="4962324">==</span>&nbsp;<span class="string" id="4962327">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="4962337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962341">//&nbsp;The&nbsp;XMLName&nbsp;field&nbsp;records&nbsp;the&nbsp;XML&nbsp;element&nbsp;name.&nbsp;Don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962400">//&nbsp;process&nbsp;it&nbsp;as&nbsp;usual&nbsp;because&nbsp;its&nbsp;name&nbsp;should&nbsp;default&nbsp;to</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962460">//&nbsp;empty&nbsp;rather&nbsp;than&nbsp;to&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962502"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962507">.</span><span class="ident" id="4962508">name</span>&nbsp;<span class="op" id="4962513">=</span>&nbsp;<span class="ident" id="4962515"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962521">return</span>&nbsp;<span class="ident" id="4962528"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962533">,</span>&nbsp;<span class="ident" id="4962535">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962544">if</span>&nbsp;<span class="ident" id="4962547"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span>&nbsp;<span class="op" id="4962551">==</span>&nbsp;<span class="string" id="4962554">&#34;&#34;</span>&nbsp;<span class="op" id="4962557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962561">//&nbsp;If&nbsp;the&nbsp;name&nbsp;part&nbsp;of&nbsp;the&nbsp;tag&nbsp;is&nbsp;completely&nbsp;empty,&nbsp;get</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962619">//&nbsp;default&nbsp;from&nbsp;XMLName&nbsp;of&nbsp;underlying&nbsp;struct&nbsp;if&nbsp;feasible,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962679">//&nbsp;or&nbsp;field&nbsp;name&nbsp;otherwise.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962709">if</span>&nbsp;<span class="ident" id="4962712">xmlname</span>&nbsp;<span class="op" id="4962720">:=</span>&nbsp;<span class="ident" id="4962723"><a href="/encoding/xml/typeinfo.go.html#4963998">lookupXMLName</a></span><span class="op" id="4962736">(</span><span class="ident" id="4962737"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962738">.</span><span class="ident" id="4962739">Type</span><span class="op" id="4962743">)</span><span class="op" id="4962744">;</span>&nbsp;<span class="ident" id="4962746"><a href="/encoding/xml/typeinfo.go.html#4962712">xmlname</a></span>&nbsp;<span class="op" id="4962754">!=</span>&nbsp;<span class="ident" id="4962757">nil</span>&nbsp;<span class="op" id="4962761">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962766"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962771">.</span><span class="ident" id="4962772">xmlns</span><span class="op" id="4962777">,</span>&nbsp;<span class="ident" id="4962779"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962784">.</span><span class="ident" id="4962785">name</span>&nbsp;<span class="op" id="4962790">=</span>&nbsp;<span class="ident" id="4962792"><a href="/encoding/xml/typeinfo.go.html#4962712">xmlname</a></span><span class="op" id="4962799">.</span><span class="ident" id="4962800">xmlns</span><span class="op" id="4962805">,</span>&nbsp;<span class="ident" id="4962807"><a href="/encoding/xml/typeinfo.go.html#4962712">xmlname</a></span><span class="op" id="4962814">.</span><span class="ident" id="4962815">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962822">}</span>&nbsp;<span class="keyword" id="4962824">else</span>&nbsp;<span class="op" id="4962829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962834"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962839">.</span><span class="ident" id="4962840">name</span>&nbsp;<span class="op" id="4962845">=</span>&nbsp;<span class="ident" id="4962847"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962848">.</span><span class="ident" id="4962849">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962860">return</span>&nbsp;<span class="ident" id="4962867"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4962872">,</span>&nbsp;<span class="ident" id="4962874">nil</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4962879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4962883">//&nbsp;Prepare&nbsp;field&nbsp;name&nbsp;and&nbsp;parents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962919">parents</span>&nbsp;<span class="op" id="4962927">:=</span>&nbsp;<span class="ident" id="4962930"><a href="/encoding/xml/typeinfo.go.html#4958564">strings</a></span><span class="op" id="4962937">.</span><span class="ident" id="4962938">Split</span><span class="op" id="4962943">(</span><span class="ident" id="4962944"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><span class="op" id="4962947">,</span>&nbsp;<span class="string" id="4962949">&#34;&gt;&#34;</span><span class="op" id="4962952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4962955">if</span>&nbsp;<span class="ident" id="4962958"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4962965">[</span><span class="num" id="4962966">0</span><span class="op" id="4962967">]</span>&nbsp;<span class="op" id="4962969">==</span>&nbsp;<span class="string" id="4962972">&#34;&#34;</span>&nbsp;<span class="op" id="4962975">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4962979"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4962986">[</span><span class="num" id="4962987">0</span><span class="op" id="4962988">]</span>&nbsp;<span class="op" id="4962990">=</span>&nbsp;<span class="ident" id="4962992"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4962993">.</span><span class="ident" id="4962994">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963003">if</span>&nbsp;<span class="ident" id="4963006"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963013">[</span><span class="builtinfunc" id="4963014">len</span><span class="op" id="4963017">(</span><span class="ident" id="4963018"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963025">)</span><span class="op" id="4963026">-</span><span class="num" id="4963027">1</span><span class="op" id="4963028">]</span>&nbsp;<span class="op" id="4963030">==</span>&nbsp;<span class="string" id="4963033">&#34;&#34;</span>&nbsp;<span class="op" id="4963036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963040">return</span>&nbsp;<span class="ident" id="4963047">nil</span><span class="op" id="4963050">,</span>&nbsp;<span class="ident" id="4963052"><a href="/encoding/xml/typeinfo.go.html#4958546">fmt</a></span><span class="op" id="4963055">.</span><span class="ident" id="4963056">Errorf</span><span class="op" id="4963062">(</span><span class="string" id="4963063">&#34;xml:&nbsp;trailing&nbsp;&#39;&gt;&#39;&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4963105">,</span>&nbsp;<span class="ident" id="4963107"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4963108">.</span><span class="ident" id="4963109">Name</span><span class="op" id="4963113">,</span>&nbsp;<span class="ident" id="4963115"><a href="/encoding/xml/typeinfo.go.html#4960732">typ</a></span><span class="op" id="4963118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963121">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963124"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963129">.</span><span class="ident" id="4963130">name</span>&nbsp;<span class="op" id="4963135">=</span>&nbsp;<span class="ident" id="4963137"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963144">[</span><span class="builtinfunc" id="4963145">len</span><span class="op" id="4963148">(</span><span class="ident" id="4963149"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963156">)</span><span class="op" id="4963157">-</span><span class="num" id="4963158">1</span><span class="op" id="4963159">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963162">if</span>&nbsp;<span class="builtinfunc" id="4963165">len</span><span class="op" id="4963168">(</span><span class="ident" id="4963169"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963176">)</span>&nbsp;<span class="op" id="4963178">&gt;</span>&nbsp;<span class="num" id="4963180">1</span>&nbsp;<span class="op" id="4963182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963186">if</span>&nbsp;<span class="op" id="4963189">(</span><span class="ident" id="4963190"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963195">.</span><span class="ident" id="4963196">flags</span>&nbsp;<span class="op" id="4963202">&amp;</span>&nbsp;<span class="ident" id="4963204"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span><span class="op" id="4963212">)</span>&nbsp;<span class="op" id="4963214">==</span>&nbsp;<span class="num" id="4963217">0</span>&nbsp;<span class="op" id="4963219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963224">return</span>&nbsp;<span class="ident" id="4963231">nil</span><span class="op" id="4963234">,</span>&nbsp;<span class="ident" id="4963236"><a href="/encoding/xml/typeinfo.go.html#4958546">fmt</a></span><span class="op" id="4963239">.</span><span class="ident" id="4963240">Errorf</span><span class="op" id="4963246">(</span><span class="string" id="4963247">&#34;xml:&nbsp;%s&nbsp;chain&nbsp;not&nbsp;valid&nbsp;with&nbsp;%s&nbsp;flag&#34;</span><span class="op" id="4963285">,</span>&nbsp;<span class="ident" id="4963287"><a href="/encoding/xml/typeinfo.go.html#4960888">tag</a></span><span class="op" id="4963290">,</span>&nbsp;<span class="ident" id="4963292"><a href="/encoding/xml/typeinfo.go.html#4958564">strings</a></span><span class="op" id="4963299">.</span><span class="ident" id="4963300">Join</span><span class="op" id="4963304">(</span><span class="ident" id="4963305"><a href="/encoding/xml/typeinfo.go.html#4961017">tokens</a></span><span class="op" id="4963311">[</span><span class="num" id="4963312">1</span><span class="op" id="4963313">:</span><span class="op" id="4963314">]</span><span class="op" id="4963315">,</span>&nbsp;<span class="string" id="4963317">&#34;,&#34;</span><span class="op" id="4963320">)</span><span class="op" id="4963321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963325">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963329"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963334">.</span><span class="ident" id="4963335">parents</span>&nbsp;<span class="op" id="4963343">=</span>&nbsp;<span class="ident" id="4963345"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963352">[</span><span class="op" id="4963353">:</span><span class="builtinfunc" id="4963354">len</span><span class="op" id="4963357">(</span><span class="ident" id="4963358"><a href="/encoding/xml/typeinfo.go.html#4962919">parents</a></span><span class="op" id="4963365">)</span><span class="op" id="4963366">-</span><span class="num" id="4963367">1</span><span class="op" id="4963368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4963375">//&nbsp;If&nbsp;the&nbsp;field&nbsp;type&nbsp;has&nbsp;an&nbsp;XMLName&nbsp;field,&nbsp;the&nbsp;names&nbsp;must&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4963440">//&nbsp;so&nbsp;that&nbsp;the&nbsp;behavior&nbsp;of&nbsp;both&nbsp;marshalling&nbsp;and&nbsp;unmarshalling</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4963503">//&nbsp;is&nbsp;straightforward&nbsp;and&nbsp;unambiguous.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963543">if</span>&nbsp;<span class="ident" id="4963546"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963551">.</span><span class="ident" id="4963552">flags</span><span class="op" id="4963557">&amp;</span><span class="ident" id="4963558"><a href="/encoding/xml/typeinfo.go.html#4958931">fElement</a></span>&nbsp;<span class="op" id="4963567">!=</span>&nbsp;<span class="num" id="4963570">0</span>&nbsp;<span class="op" id="4963572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963576">ftyp</span>&nbsp;<span class="op" id="4963581">:=</span>&nbsp;<span class="ident" id="4963584"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4963585">.</span><span class="ident" id="4963586">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963593">xmlname</span>&nbsp;<span class="op" id="4963601">:=</span>&nbsp;<span class="ident" id="4963604"><a href="/encoding/xml/typeinfo.go.html#4963998">lookupXMLName</a></span><span class="op" id="4963617">(</span><span class="ident" id="4963618"><a href="/encoding/xml/typeinfo.go.html#4963576">ftyp</a></span><span class="op" id="4963622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963626">if</span>&nbsp;<span class="ident" id="4963629"><a href="/encoding/xml/typeinfo.go.html#4963593">xmlname</a></span>&nbsp;<span class="op" id="4963637">!=</span>&nbsp;<span class="ident" id="4963640">nil</span>&nbsp;<span class="op" id="4963644">&amp;&amp;</span>&nbsp;<span class="ident" id="4963647"><a href="/encoding/xml/typeinfo.go.html#4963593">xmlname</a></span><span class="op" id="4963654">.</span><span class="ident" id="4963655">name</span>&nbsp;<span class="op" id="4963660">!=</span>&nbsp;<span class="ident" id="4963663"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963668">.</span><span class="ident" id="4963669">name</span>&nbsp;<span class="op" id="4963674">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963679">return</span>&nbsp;<span class="ident" id="4963686">nil</span><span class="op" id="4963689">,</span>&nbsp;<span class="ident" id="4963691"><a href="/encoding/xml/typeinfo.go.html#4958546">fmt</a></span><span class="op" id="4963694">.</span><span class="ident" id="4963695">Errorf</span><span class="op" id="4963701">(</span><span class="string" id="4963702">&#34;xml:&nbsp;name&nbsp;%q&nbsp;in&nbsp;tag&nbsp;of&nbsp;%s.%s&nbsp;conflicts&nbsp;with&nbsp;name&nbsp;%q&nbsp;in&nbsp;%s.XMLName&#34;</span><span class="op" id="4963769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4963775"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963780">.</span><span class="ident" id="4963781">name</span><span class="op" id="4963785">,</span>&nbsp;<span class="ident" id="4963787"><a href="/encoding/xml/typeinfo.go.html#4960732">typ</a></span><span class="op" id="4963790">,</span>&nbsp;<span class="ident" id="4963792"><a href="/encoding/xml/typeinfo.go.html#4960750">f</a></span><span class="op" id="4963793">.</span><span class="ident" id="4963794">Name</span><span class="op" id="4963798">,</span>&nbsp;<span class="ident" id="4963800"><a href="/encoding/xml/typeinfo.go.html#4963593">xmlname</a></span><span class="op" id="4963807">.</span><span class="ident" id="4963808">name</span><span class="op" id="4963812">,</span>&nbsp;<span class="ident" id="4963814"><a href="/encoding/xml/typeinfo.go.html#4963576">ftyp</a></span><span class="op" id="4963818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4963825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4963828">return</span>&nbsp;<span class="ident" id="4963835"><a href="/encoding/xml/typeinfo.go.html#4960797">finfo</a></span><span class="op" id="4963840">,</span>&nbsp;<span class="ident" id="4963842">nil</span><br>
<span class="lineno">225</span><span class="op" id="4963846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4963849">//&nbsp;lookupXMLName&nbsp;returns&nbsp;the&nbsp;fieldInfo&nbsp;for&nbsp;typ&#39;s&nbsp;XMLName&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="4963912">//&nbsp;in&nbsp;case&nbsp;it&nbsp;exists&nbsp;and&nbsp;has&nbsp;a&nbsp;valid&nbsp;xml&nbsp;field&nbsp;tag,&nbsp;otherwise</span><br>
<span class="lineno"></span><span class="comment" id="4963974">//&nbsp;it&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno">230</span><span class="keyword" id="4963993">func</span>&nbsp;<span class="ident" id="4963998">lookupXMLName</span><span class="op" id="4964011">(</span><span class="ident" id="4964012">typ</span>&nbsp;<span class="ident" id="4964016"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4964023">.</span><span class="ident" id="4964024">Type</span><span class="op" id="4964028">)</span>&nbsp;<span class="op" id="4964030">(</span><span class="ident" id="4964031">xmlname</span>&nbsp;<span class="op" id="4964039">*</span><span class="ident" id="4964040"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4964049">)</span>&nbsp;<span class="op" id="4964051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964054">for</span>&nbsp;<span class="ident" id="4964058"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span><span class="op" id="4964061">.</span><span class="ident" id="4964062">Kind</span><span class="op" id="4964066">(</span><span class="op" id="4964067">)</span>&nbsp;<span class="op" id="4964069">==</span>&nbsp;<span class="ident" id="4964072"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4964079">.</span><span class="ident" id="4964080">Ptr</span>&nbsp;<span class="op" id="4964084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4964088"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span>&nbsp;<span class="op" id="4964092">=</span>&nbsp;<span class="ident" id="4964094"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span><span class="op" id="4964097">.</span><span class="ident" id="4964098">Elem</span><span class="op" id="4964102">(</span><span class="op" id="4964103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4964106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964109">if</span>&nbsp;<span class="ident" id="4964112"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span><span class="op" id="4964115">.</span><span class="ident" id="4964116">Kind</span><span class="op" id="4964120">(</span><span class="op" id="4964121">)</span>&nbsp;<span class="op" id="4964123">!=</span>&nbsp;<span class="ident" id="4964126"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4964133">.</span><span class="ident" id="4964134">Struct</span>&nbsp;<span class="op" id="4964141">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964145">return</span>&nbsp;<span class="ident" id="4964152">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4964157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964160">for</span>&nbsp;<span class="ident" id="4964164">i</span><span class="op" id="4964165">,</span>&nbsp;<span class="ident" id="4964167">n</span>&nbsp;<span class="op" id="4964169">:=</span>&nbsp;<span class="num" id="4964172">0</span><span class="op" id="4964173">,</span>&nbsp;<span class="ident" id="4964175"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span><span class="op" id="4964178">.</span><span class="ident" id="4964179">NumField</span><span class="op" id="4964187">(</span><span class="op" id="4964188">)</span><span class="op" id="4964189">;</span>&nbsp;<span class="ident" id="4964191"><a href="/encoding/xml/typeinfo.go.html#4964164">i</a></span>&nbsp;<span class="op" id="4964193">&lt;</span>&nbsp;<span class="ident" id="4964195"><a href="/encoding/xml/typeinfo.go.html#4964167">n</a></span><span class="op" id="4964196">;</span>&nbsp;<span class="ident" id="4964198"><a href="/encoding/xml/typeinfo.go.html#4964164">i</a></span><span class="op" id="4964199">++</span>&nbsp;<span class="op" id="4964202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4964206">f</span>&nbsp;<span class="op" id="4964208">:=</span>&nbsp;<span class="ident" id="4964211"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span><span class="op" id="4964214">.</span><span class="ident" id="4964215">Field</span><span class="op" id="4964220">(</span><span class="ident" id="4964221"><a href="/encoding/xml/typeinfo.go.html#4964164">i</a></span><span class="op" id="4964222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964226">if</span>&nbsp;<span class="ident" id="4964229"><a href="/encoding/xml/typeinfo.go.html#4964206">f</a></span><span class="op" id="4964230">.</span><span class="ident" id="4964231">Name</span>&nbsp;<span class="op" id="4964236">!=</span>&nbsp;<span class="string" id="4964239">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="4964249">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964254">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4964265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4964269">finfo</span><span class="op" id="4964274">,</span>&nbsp;<span class="ident" id="4964276">err</span>&nbsp;<span class="op" id="4964280">:=</span>&nbsp;<span class="ident" id="4964283"><a href="/encoding/xml/typeinfo.go.html#4960716">structFieldInfo</a></span><span class="op" id="4964298">(</span><span class="ident" id="4964299"><a href="/encoding/xml/typeinfo.go.html#4964012">typ</a></span><span class="op" id="4964302">,</span>&nbsp;<span class="op" id="4964304">&amp;</span><span class="ident" id="4964305"><a href="/encoding/xml/typeinfo.go.html#4964206">f</a></span><span class="op" id="4964306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964310">if</span>&nbsp;<span class="ident" id="4964313"><a href="/encoding/xml/typeinfo.go.html#4964269">finfo</a></span><span class="op" id="4964318">.</span><span class="ident" id="4964319">name</span>&nbsp;<span class="op" id="4964324">!=</span>&nbsp;<span class="string" id="4964327">&#34;&#34;</span>&nbsp;<span class="op" id="4964330">&amp;&amp;</span>&nbsp;<span class="ident" id="4964333"><a href="/encoding/xml/typeinfo.go.html#4964276">err</a></span>&nbsp;<span class="op" id="4964337">==</span>&nbsp;<span class="ident" id="4964340">nil</span>&nbsp;<span class="op" id="4964344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964349">return</span>&nbsp;<span class="ident" id="4964356"><a href="/encoding/xml/typeinfo.go.html#4964269">finfo</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4964364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4964368">//&nbsp;Also&nbsp;consider&nbsp;errors&nbsp;as&nbsp;a&nbsp;non-existent&nbsp;field&nbsp;tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4964422">//&nbsp;and&nbsp;let&nbsp;getTypeInfo&nbsp;itself&nbsp;report&nbsp;the&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964472">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4964479">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964482">return</span>&nbsp;<span class="ident" id="4964489">nil</span><br>
<span class="lineno"></span><span class="op" id="4964493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4964496">func</span>&nbsp;<span class="ident" id="4964501">min</span><span class="op" id="4964504">(</span><span class="ident" id="4964505">a</span><span class="op" id="4964506">,</span>&nbsp;<span class="ident" id="4964508">b</span>&nbsp;<span class="builtintype" id="4964510">int</span><span class="op" id="4964513">)</span>&nbsp;<span class="builtintype" id="4964515">int</span>&nbsp;<span class="op" id="4964519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964522">if</span>&nbsp;<span class="ident" id="4964525"><a href="/encoding/xml/typeinfo.go.html#4964505">a</a></span>&nbsp;<span class="op" id="4964527">&lt;=</span>&nbsp;<span class="ident" id="4964530"><a href="/encoding/xml/typeinfo.go.html#4964508">b</a></span>&nbsp;<span class="op" id="4964532">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964536">return</span>&nbsp;<span class="ident" id="4964543"><a href="/encoding/xml/typeinfo.go.html#4964505">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4964546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4964549">return</span>&nbsp;<span class="ident" id="4964556"><a href="/encoding/xml/typeinfo.go.html#4964508">b</a></span><br>
<span class="lineno"></span><span class="op" id="4964558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4964561">//&nbsp;addFieldInfo&nbsp;adds&nbsp;finfo&nbsp;to&nbsp;tinfo.fields&nbsp;if&nbsp;there&nbsp;are&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="4964620">//&nbsp;conflicts,&nbsp;or&nbsp;if&nbsp;conflicts&nbsp;arise&nbsp;from&nbsp;previous&nbsp;fields&nbsp;that&nbsp;were</span><br>
<span class="lineno"></span><span class="comment" id="4964687">//&nbsp;obtained&nbsp;from&nbsp;deeper&nbsp;embedded&nbsp;structures&nbsp;than&nbsp;finfo.&nbsp;In&nbsp;the&nbsp;latter</span><br>
<span class="lineno"></span><span class="comment" id="4964757">//&nbsp;case,&nbsp;the&nbsp;conflicting&nbsp;entries&nbsp;are&nbsp;dropped.</span><br>
<span class="lineno"></span><span class="comment" id="4964803">//&nbsp;A&nbsp;conflict&nbsp;occurs&nbsp;when&nbsp;the&nbsp;path&nbsp;(parent&nbsp;+&nbsp;name)&nbsp;to&nbsp;a&nbsp;field&nbsp;is</span><br>
<span class="lineno">265</span><span class="comment" id="4964868">//&nbsp;itself&nbsp;a&nbsp;prefix&nbsp;of&nbsp;another&nbsp;path,&nbsp;or&nbsp;when&nbsp;two&nbsp;paths&nbsp;match&nbsp;exactly.</span><br>
<span class="lineno"></span><span class="comment" id="4964937">//&nbsp;It&nbsp;is&nbsp;okay&nbsp;for&nbsp;field&nbsp;paths&nbsp;to&nbsp;share&nbsp;a&nbsp;common,&nbsp;shorter&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="4965002">func</span>&nbsp;<span class="ident" id="4965007">addFieldInfo</span><span class="op" id="4965019">(</span><span class="ident" id="4965020">typ</span>&nbsp;<span class="ident" id="4965024"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4965031">.</span><span class="ident" id="4965032">Type</span><span class="op" id="4965036">,</span>&nbsp;<span class="ident" id="4965038">tinfo</span>&nbsp;<span class="op" id="4965044">*</span><span class="ident" id="4965045"><a href="/encoding/xml/typeinfo.go.html#4958654">typeInfo</a></span><span class="op" id="4965053">,</span>&nbsp;<span class="ident" id="4965055">newf</span>&nbsp;<span class="op" id="4965060">*</span><span class="ident" id="4965061"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4965070">)</span>&nbsp;<span class="builtintype" id="4965072">error</span>&nbsp;<span class="op" id="4965078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965081">var</span>&nbsp;<span class="ident" id="4965085">conflicts</span>&nbsp;<span class="op" id="4965095">[</span><span class="op" id="4965096">]</span><span class="builtintype" id="4965097">int</span><br>
<span class="lineno"></span><span class="ident" id="4965101">Loop</span><span class="op" id="4965105">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965108">//&nbsp;First,&nbsp;figure&nbsp;all&nbsp;conflicts.&nbsp;Most&nbsp;working&nbsp;code&nbsp;will&nbsp;have&nbsp;none.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965175">for</span>&nbsp;<span class="ident" id="4965179">i</span>&nbsp;<span class="op" id="4965181">:=</span>&nbsp;<span class="keyword" id="4965184">range</span>&nbsp;<span class="ident" id="4965190"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4965195">.</span><span class="ident" id="4965196">fields</span>&nbsp;<span class="op" id="4965203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965207">oldf</span>&nbsp;<span class="op" id="4965212">:=</span>&nbsp;<span class="op" id="4965215">&amp;</span><span class="ident" id="4965216"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4965221">.</span><span class="ident" id="4965222">fields</span><span class="op" id="4965228">[</span><span class="ident" id="4965229"><a href="/encoding/xml/typeinfo.go.html#4965179">i</a></span><span class="op" id="4965230">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965234">if</span>&nbsp;<span class="ident" id="4965237"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965241">.</span><span class="ident" id="4965242">flags</span><span class="op" id="4965247">&amp;</span><span class="ident" id="4965248"><a href="/encoding/xml/typeinfo.go.html#4959023">fMode</a></span>&nbsp;<span class="op" id="4965254">!=</span>&nbsp;<span class="ident" id="4965257"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965261">.</span><span class="ident" id="4965262">flags</span><span class="op" id="4965267">&amp;</span><span class="ident" id="4965268"><a href="/encoding/xml/typeinfo.go.html#4959023">fMode</a></span>&nbsp;<span class="op" id="4965274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965279">continue</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965294">if</span>&nbsp;<span class="ident" id="4965297"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965301">.</span><span class="ident" id="4965302">xmlns</span>&nbsp;<span class="op" id="4965308">!=</span>&nbsp;<span class="string" id="4965311">&#34;&#34;</span>&nbsp;<span class="op" id="4965314">&amp;&amp;</span>&nbsp;<span class="ident" id="4965317"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965321">.</span><span class="ident" id="4965322">xmlns</span>&nbsp;<span class="op" id="4965328">!=</span>&nbsp;<span class="string" id="4965331">&#34;&#34;</span>&nbsp;<span class="op" id="4965334">&amp;&amp;</span>&nbsp;<span class="ident" id="4965337"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965341">.</span><span class="ident" id="4965342">xmlns</span>&nbsp;<span class="op" id="4965348">!=</span>&nbsp;<span class="ident" id="4965351"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965355">.</span><span class="ident" id="4965356">xmlns</span>&nbsp;<span class="op" id="4965362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965367">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965382">minl</span>&nbsp;<span class="op" id="4965387">:=</span>&nbsp;<span class="ident" id="4965390"><a href="/encoding/xml/typeinfo.go.html#4964501">min</a></span><span class="op" id="4965393">(</span><span class="builtinfunc" id="4965394">len</span><span class="op" id="4965397">(</span><span class="ident" id="4965398"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965402">.</span><span class="ident" id="4965403">parents</span><span class="op" id="4965410">)</span><span class="op" id="4965411">,</span>&nbsp;<span class="builtinfunc" id="4965413">len</span><span class="op" id="4965416">(</span><span class="ident" id="4965417"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965421">.</span><span class="ident" id="4965422">parents</span><span class="op" id="4965429">)</span><span class="op" id="4965430">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965434">for</span>&nbsp;<span class="ident" id="4965438">p</span>&nbsp;<span class="op" id="4965440">:=</span>&nbsp;<span class="num" id="4965443">0</span><span class="op" id="4965444">;</span>&nbsp;<span class="ident" id="4965446"><a href="/encoding/xml/typeinfo.go.html#4965438">p</a></span>&nbsp;<span class="op" id="4965448">&lt;</span>&nbsp;<span class="ident" id="4965450"><a href="/encoding/xml/typeinfo.go.html#4965382">minl</a></span><span class="op" id="4965454">;</span>&nbsp;<span class="ident" id="4965456"><a href="/encoding/xml/typeinfo.go.html#4965438">p</a></span><span class="op" id="4965457">++</span>&nbsp;<span class="op" id="4965460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965465">if</span>&nbsp;<span class="ident" id="4965468"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965472">.</span><span class="ident" id="4965473">parents</span><span class="op" id="4965480">[</span><span class="ident" id="4965481"><a href="/encoding/xml/typeinfo.go.html#4965438">p</a></span><span class="op" id="4965482">]</span>&nbsp;<span class="op" id="4965484">!=</span>&nbsp;<span class="ident" id="4965487"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965491">.</span><span class="ident" id="4965492">parents</span><span class="op" id="4965499">[</span><span class="ident" id="4965500"><a href="/encoding/xml/typeinfo.go.html#4965438">p</a></span><span class="op" id="4965501">]</span>&nbsp;<span class="op" id="4965503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965509">continue</span>&nbsp;<span class="ident" id="4965518">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965530">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965534">if</span>&nbsp;<span class="builtinfunc" id="4965537">len</span><span class="op" id="4965540">(</span><span class="ident" id="4965541"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965545">.</span><span class="ident" id="4965546">parents</span><span class="op" id="4965553">)</span>&nbsp;<span class="op" id="4965555">&gt;</span>&nbsp;<span class="builtinfunc" id="4965557">len</span><span class="op" id="4965560">(</span><span class="ident" id="4965561"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965565">.</span><span class="ident" id="4965566">parents</span><span class="op" id="4965573">)</span>&nbsp;<span class="op" id="4965575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965580">if</span>&nbsp;<span class="ident" id="4965583"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965587">.</span><span class="ident" id="4965588">parents</span><span class="op" id="4965595">[</span><span class="builtinfunc" id="4965596">len</span><span class="op" id="4965599">(</span><span class="ident" id="4965600"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965604">.</span><span class="ident" id="4965605">parents</span><span class="op" id="4965612">)</span><span class="op" id="4965613">]</span>&nbsp;<span class="op" id="4965615">==</span>&nbsp;<span class="ident" id="4965618"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965622">.</span><span class="ident" id="4965623">name</span>&nbsp;<span class="op" id="4965628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965634"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span>&nbsp;<span class="op" id="4965644">=</span>&nbsp;<span class="builtinfunc" id="4965646">append</span><span class="op" id="4965652">(</span><span class="ident" id="4965653"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span><span class="op" id="4965662">,</span>&nbsp;<span class="ident" id="4965664"><a href="/encoding/xml/typeinfo.go.html#4965179">i</a></span><span class="op" id="4965665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965674">}</span>&nbsp;<span class="keyword" id="4965676">else</span>&nbsp;<span class="keyword" id="4965681">if</span>&nbsp;<span class="builtinfunc" id="4965684">len</span><span class="op" id="4965687">(</span><span class="ident" id="4965688"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965692">.</span><span class="ident" id="4965693">parents</span><span class="op" id="4965700">)</span>&nbsp;<span class="op" id="4965702">&lt;</span>&nbsp;<span class="builtinfunc" id="4965704">len</span><span class="op" id="4965707">(</span><span class="ident" id="4965708"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965712">.</span><span class="ident" id="4965713">parents</span><span class="op" id="4965720">)</span>&nbsp;<span class="op" id="4965722">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965727">if</span>&nbsp;<span class="ident" id="4965730"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965734">.</span><span class="ident" id="4965735">parents</span><span class="op" id="4965742">[</span><span class="builtinfunc" id="4965743">len</span><span class="op" id="4965746">(</span><span class="ident" id="4965747"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965751">.</span><span class="ident" id="4965752">parents</span><span class="op" id="4965759">)</span><span class="op" id="4965760">]</span>&nbsp;<span class="op" id="4965762">==</span>&nbsp;<span class="ident" id="4965765"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965769">.</span><span class="ident" id="4965770">name</span>&nbsp;<span class="op" id="4965775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965781"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span>&nbsp;<span class="op" id="4965791">=</span>&nbsp;<span class="builtinfunc" id="4965793">append</span><span class="op" id="4965799">(</span><span class="ident" id="4965800"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span><span class="op" id="4965809">,</span>&nbsp;<span class="ident" id="4965811"><a href="/encoding/xml/typeinfo.go.html#4965179">i</a></span><span class="op" id="4965812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965821">}</span>&nbsp;<span class="keyword" id="4965823">else</span>&nbsp;<span class="op" id="4965828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965833">if</span>&nbsp;<span class="ident" id="4965836"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4965840">.</span><span class="ident" id="4965841">name</span>&nbsp;<span class="op" id="4965846">==</span>&nbsp;<span class="ident" id="4965849"><a href="/encoding/xml/typeinfo.go.html#4965207">oldf</a></span><span class="op" id="4965853">.</span><span class="ident" id="4965854">name</span>&nbsp;<span class="op" id="4965859">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965865"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span>&nbsp;<span class="op" id="4965875">=</span>&nbsp;<span class="builtinfunc" id="4965877">append</span><span class="op" id="4965883">(</span><span class="ident" id="4965884"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span><span class="op" id="4965893">,</span>&nbsp;<span class="ident" id="4965895"><a href="/encoding/xml/typeinfo.go.html#4965179">i</a></span><span class="op" id="4965896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4965908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965911">//&nbsp;Without&nbsp;conflicts,&nbsp;add&nbsp;the&nbsp;new&nbsp;field&nbsp;and&nbsp;return.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4965964">if</span>&nbsp;<span class="ident" id="4965967"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span>&nbsp;<span class="op" id="4965977">==</span>&nbsp;<span class="ident" id="4965980">nil</span>&nbsp;<span class="op" id="4965984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965988"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4965993">.</span><span class="ident" id="4965994">fields</span>&nbsp;<span class="op" id="4966001">=</span>&nbsp;<span class="builtinfunc" id="4966003">append</span><span class="op" id="4966009">(</span><span class="ident" id="4966010"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966015">.</span><span class="ident" id="4966016">fields</span><span class="op" id="4966022">,</span>&nbsp;<span class="op" id="4966024">*</span><span class="ident" id="4966025"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4966029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966033">return</span>&nbsp;<span class="ident" id="4966040">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4966049">//&nbsp;If&nbsp;any&nbsp;conflict&nbsp;is&nbsp;shallower,&nbsp;ignore&nbsp;the&nbsp;new&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4966105">//&nbsp;This&nbsp;matches&nbsp;the&nbsp;Go&nbsp;field&nbsp;resolution&nbsp;on&nbsp;embedding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966160">for</span>&nbsp;<span class="ident" id="4966164">_</span><span class="op" id="4966165">,</span>&nbsp;<span class="ident" id="4966167">i</span>&nbsp;<span class="op" id="4966169">:=</span>&nbsp;<span class="keyword" id="4966172">range</span>&nbsp;<span class="ident" id="4966178"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span>&nbsp;<span class="op" id="4966188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966192">if</span>&nbsp;<span class="builtinfunc" id="4966195">len</span><span class="op" id="4966198">(</span><span class="ident" id="4966199"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966204">.</span><span class="ident" id="4966205">fields</span><span class="op" id="4966211">[</span><span class="ident" id="4966212"><a href="/encoding/xml/typeinfo.go.html#4966167">i</a></span><span class="op" id="4966213">]</span><span class="op" id="4966214">.</span><span class="ident" id="4966215">idx</span><span class="op" id="4966218">)</span>&nbsp;<span class="op" id="4966220">&lt;</span>&nbsp;<span class="builtinfunc" id="4966222">len</span><span class="op" id="4966225">(</span><span class="ident" id="4966226"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4966230">.</span><span class="ident" id="4966231">idx</span><span class="op" id="4966234">)</span>&nbsp;<span class="op" id="4966236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966241">return</span>&nbsp;<span class="ident" id="4966248">nil</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4966261">//&nbsp;Otherwise,&nbsp;if&nbsp;any&nbsp;of&nbsp;them&nbsp;is&nbsp;at&nbsp;the&nbsp;same&nbsp;depth&nbsp;level,&nbsp;it&#39;s&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966334">for</span>&nbsp;<span class="ident" id="4966338">_</span><span class="op" id="4966339">,</span>&nbsp;<span class="ident" id="4966341">i</span>&nbsp;<span class="op" id="4966343">:=</span>&nbsp;<span class="keyword" id="4966346">range</span>&nbsp;<span class="ident" id="4966352"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span>&nbsp;<span class="op" id="4966362">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966366">oldf</span>&nbsp;<span class="op" id="4966371">:=</span>&nbsp;<span class="op" id="4966374">&amp;</span><span class="ident" id="4966375"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966380">.</span><span class="ident" id="4966381">fields</span><span class="op" id="4966387">[</span><span class="ident" id="4966388"><a href="/encoding/xml/typeinfo.go.html#4966341">i</a></span><span class="op" id="4966389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966393">if</span>&nbsp;<span class="builtinfunc" id="4966396">len</span><span class="op" id="4966399">(</span><span class="ident" id="4966400"><a href="/encoding/xml/typeinfo.go.html#4966366">oldf</a></span><span class="op" id="4966404">.</span><span class="ident" id="4966405">idx</span><span class="op" id="4966408">)</span>&nbsp;<span class="op" id="4966410">==</span>&nbsp;<span class="builtinfunc" id="4966413">len</span><span class="op" id="4966416">(</span><span class="ident" id="4966417"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4966421">.</span><span class="ident" id="4966422">idx</span><span class="op" id="4966425">)</span>&nbsp;<span class="op" id="4966427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966432">f1</span>&nbsp;<span class="op" id="4966435">:=</span>&nbsp;<span class="ident" id="4966438"><a href="/encoding/xml/typeinfo.go.html#4965020">typ</a></span><span class="op" id="4966441">.</span><span class="ident" id="4966442">FieldByIndex</span><span class="op" id="4966454">(</span><span class="ident" id="4966455"><a href="/encoding/xml/typeinfo.go.html#4966366">oldf</a></span><span class="op" id="4966459">.</span><span class="ident" id="4966460">idx</span><span class="op" id="4966463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966468">f2</span>&nbsp;<span class="op" id="4966471">:=</span>&nbsp;<span class="ident" id="4966474"><a href="/encoding/xml/typeinfo.go.html#4965020">typ</a></span><span class="op" id="4966477">.</span><span class="ident" id="4966478">FieldByIndex</span><span class="op" id="4966490">(</span><span class="ident" id="4966491"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4966495">.</span><span class="ident" id="4966496">idx</span><span class="op" id="4966499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966504">return</span>&nbsp;<span class="op" id="4966511">&amp;</span><span class="ident" id="4966512"><a href="/encoding/xml/typeinfo.go.html#4967088">TagPathError</a></span><span class="op" id="4966524">{</span><span class="ident" id="4966525"><a href="/encoding/xml/typeinfo.go.html#4965020">typ</a></span><span class="op" id="4966528">,</span>&nbsp;<span class="ident" id="4966530"><a href="/encoding/xml/typeinfo.go.html#4966432">f1</a></span><span class="op" id="4966532">.</span><span class="ident" id="4966533">Name</span><span class="op" id="4966537">,</span>&nbsp;<span class="ident" id="4966539"><a href="/encoding/xml/typeinfo.go.html#4966432">f1</a></span><span class="op" id="4966541">.</span><span class="ident" id="4966542">Tag</span><span class="op" id="4966545">.</span><span class="ident" id="4966546">Get</span><span class="op" id="4966549">(</span><span class="string" id="4966550">&#34;xml&#34;</span><span class="op" id="4966555">)</span><span class="op" id="4966556">,</span>&nbsp;<span class="ident" id="4966558"><a href="/encoding/xml/typeinfo.go.html#4966468">f2</a></span><span class="op" id="4966560">.</span><span class="ident" id="4966561">Name</span><span class="op" id="4966565">,</span>&nbsp;<span class="ident" id="4966567"><a href="/encoding/xml/typeinfo.go.html#4966468">f2</a></span><span class="op" id="4966569">.</span><span class="ident" id="4966570">Tag</span><span class="op" id="4966573">.</span><span class="ident" id="4966574">Get</span><span class="op" id="4966577">(</span><span class="string" id="4966578">&#34;xml&#34;</span><span class="op" id="4966583">)</span><span class="op" id="4966584">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4966595">//&nbsp;Otherwise,&nbsp;the&nbsp;new&nbsp;field&nbsp;is&nbsp;shallower,&nbsp;and&nbsp;thus&nbsp;takes&nbsp;precedence,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4966665">//&nbsp;so&nbsp;drop&nbsp;the&nbsp;conflicting&nbsp;fields&nbsp;from&nbsp;tinfo&nbsp;and&nbsp;append&nbsp;the&nbsp;new&nbsp;one.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966735">for</span>&nbsp;<span class="ident" id="4966739">c</span>&nbsp;<span class="op" id="4966741">:=</span>&nbsp;<span class="builtinfunc" id="4966744">len</span><span class="op" id="4966747">(</span><span class="ident" id="4966748"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span><span class="op" id="4966757">)</span>&nbsp;<span class="op" id="4966759">-</span>&nbsp;<span class="num" id="4966761">1</span><span class="op" id="4966762">;</span>&nbsp;<span class="ident" id="4966764"><a href="/encoding/xml/typeinfo.go.html#4966739">c</a></span>&nbsp;<span class="op" id="4966766">&gt;=</span>&nbsp;<span class="num" id="4966769">0</span><span class="op" id="4966770">;</span>&nbsp;<span class="ident" id="4966772"><a href="/encoding/xml/typeinfo.go.html#4966739">c</a></span><span class="op" id="4966773">--</span>&nbsp;<span class="op" id="4966776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966780">i</span>&nbsp;<span class="op" id="4966782">:=</span>&nbsp;<span class="ident" id="4966785"><a href="/encoding/xml/typeinfo.go.html#4965085">conflicts</a></span><span class="op" id="4966794">[</span><span class="ident" id="4966795"><a href="/encoding/xml/typeinfo.go.html#4966739">c</a></span><span class="op" id="4966796">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4966800">copy</span><span class="op" id="4966804">(</span><span class="ident" id="4966805"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966810">.</span><span class="ident" id="4966811">fields</span><span class="op" id="4966817">[</span><span class="ident" id="4966818"><a href="/encoding/xml/typeinfo.go.html#4966780">i</a></span><span class="op" id="4966819">:</span><span class="op" id="4966820">]</span><span class="op" id="4966821">,</span>&nbsp;<span class="ident" id="4966823"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966828">.</span><span class="ident" id="4966829">fields</span><span class="op" id="4966835">[</span><span class="ident" id="4966836"><a href="/encoding/xml/typeinfo.go.html#4966780">i</a></span><span class="op" id="4966837">+</span><span class="num" id="4966838">1</span><span class="op" id="4966839">:</span><span class="op" id="4966840">]</span><span class="op" id="4966841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966845"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966850">.</span><span class="ident" id="4966851">fields</span>&nbsp;<span class="op" id="4966858">=</span>&nbsp;<span class="ident" id="4966860"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966865">.</span><span class="ident" id="4966866">fields</span><span class="op" id="4966872">[</span><span class="op" id="4966873">:</span><span class="builtinfunc" id="4966874">len</span><span class="op" id="4966877">(</span><span class="ident" id="4966878"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966883">.</span><span class="ident" id="4966884">fields</span><span class="op" id="4966890">)</span><span class="op" id="4966891">-</span><span class="num" id="4966892">1</span><span class="op" id="4966893">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966896">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966899"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966904">.</span><span class="ident" id="4966905">fields</span>&nbsp;<span class="op" id="4966912">=</span>&nbsp;<span class="builtinfunc" id="4966914">append</span><span class="op" id="4966920">(</span><span class="ident" id="4966921"><a href="/encoding/xml/typeinfo.go.html#4965038">tinfo</a></span><span class="op" id="4966926">.</span><span class="ident" id="4966927">fields</span><span class="op" id="4966933">,</span>&nbsp;<span class="op" id="4966935">*</span><span class="ident" id="4966936"><a href="/encoding/xml/typeinfo.go.html#4965055">newf</a></span><span class="op" id="4966940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966943">return</span>&nbsp;<span class="ident" id="4966950">nil</span><br>
<span class="lineno"></span><span class="op" id="4966954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4966957">//&nbsp;A&nbsp;TagPathError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process</span><br>
<span class="lineno">335</span><span class="comment" id="4967024">//&nbsp;caused&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;field&nbsp;tags&nbsp;with&nbsp;conflicting&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="4967083">type</span>&nbsp;<span class="ident" id="4967088">TagPathError</span>&nbsp;<span class="keyword" id="4967101">struct</span>&nbsp;<span class="op" id="4967108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967111">Struct</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4967124"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4967131">.</span><span class="ident" id="4967132">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967138">Field1</span><span class="op" id="4967144">,</span>&nbsp;<span class="ident" id="4967146">Tag1</span>&nbsp;<span class="builtintype" id="4967151">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967159">Field2</span><span class="op" id="4967165">,</span>&nbsp;<span class="ident" id="4967167">Tag2</span>&nbsp;<span class="builtintype" id="4967172">string</span><br>
<span class="lineno">340</span><span class="op" id="4967179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4967182">func</span>&nbsp;<span class="op" id="4967187">(</span><span class="ident" id="4967188">e</span>&nbsp;<span class="op" id="4967190">*</span><span class="ident" id="4967191"><a href="/encoding/xml/typeinfo.go.html#4967088">TagPathError</a></span><span class="op" id="4967203">)</span>&nbsp;<span class="ident" id="4967205">Error</span><span class="op" id="4967210">(</span><span class="op" id="4967211">)</span>&nbsp;<span class="builtintype" id="4967213">string</span>&nbsp;<span class="op" id="4967220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967223">return</span>&nbsp;<span class="ident" id="4967230"><a href="/encoding/xml/typeinfo.go.html#4958546">fmt</a></span><span class="op" id="4967233">.</span><span class="ident" id="4967234">Sprintf</span><span class="op" id="4967241">(</span><span class="string" id="4967242">&#34;%s&nbsp;field&nbsp;%q&nbsp;with&nbsp;tag&nbsp;%q&nbsp;conflicts&nbsp;with&nbsp;field&nbsp;%q&nbsp;with&nbsp;tag&nbsp;%q&#34;</span><span class="op" id="4967303">,</span>&nbsp;<span class="ident" id="4967305"><a href="/encoding/xml/typeinfo.go.html#4967188">e</a></span><span class="op" id="4967306">.</span><span class="ident" id="4967307">Struct</span><span class="op" id="4967313">,</span>&nbsp;<span class="ident" id="4967315"><a href="/encoding/xml/typeinfo.go.html#4967188">e</a></span><span class="op" id="4967316">.</span><span class="ident" id="4967317">Field1</span><span class="op" id="4967323">,</span>&nbsp;<span class="ident" id="4967325"><a href="/encoding/xml/typeinfo.go.html#4967188">e</a></span><span class="op" id="4967326">.</span><span class="ident" id="4967327">Tag1</span><span class="op" id="4967331">,</span>&nbsp;<span class="ident" id="4967333"><a href="/encoding/xml/typeinfo.go.html#4967188">e</a></span><span class="op" id="4967334">.</span><span class="ident" id="4967335">Field2</span><span class="op" id="4967341">,</span>&nbsp;<span class="ident" id="4967343"><a href="/encoding/xml/typeinfo.go.html#4967188">e</a></span><span class="op" id="4967344">.</span><span class="ident" id="4967345">Tag2</span><span class="op" id="4967349">)</span><br>
<span class="lineno"></span><span class="op" id="4967351">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="comment" id="4967354">//&nbsp;value&nbsp;returns&nbsp;v&#39;s&nbsp;field&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;finfo.</span><br>
<span class="lineno"></span><span class="comment" id="4967411">//&nbsp;It&#39;s&nbsp;equivalent&nbsp;to&nbsp;v.FieldByIndex(finfo.idx),&nbsp;but&nbsp;initializes</span><br>
<span class="lineno"></span><span class="comment" id="4967476">//&nbsp;and&nbsp;dereferences&nbsp;pointers&nbsp;as&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="4967519">func</span>&nbsp;<span class="op" id="4967524">(</span><span class="ident" id="4967525">finfo</span>&nbsp;<span class="op" id="4967531">*</span><span class="ident" id="4967532"><a href="/encoding/xml/typeinfo.go.html#4958794">fieldInfo</a></span><span class="op" id="4967541">)</span>&nbsp;<span class="ident" id="4967543">value</span><span class="op" id="4967548">(</span><span class="ident" id="4967549">v</span>&nbsp;<span class="ident" id="4967551"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4967558">.</span><span class="ident" id="4967559">Value</span><span class="op" id="4967564">)</span>&nbsp;<span class="ident" id="4967566"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4967573">.</span><span class="ident" id="4967574">Value</span>&nbsp;<span class="op" id="4967580">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967583">for</span>&nbsp;<span class="ident" id="4967587">i</span><span class="op" id="4967588">,</span>&nbsp;<span class="ident" id="4967590">x</span>&nbsp;<span class="op" id="4967592">:=</span>&nbsp;<span class="keyword" id="4967595">range</span>&nbsp;<span class="ident" id="4967601"><a href="/encoding/xml/typeinfo.go.html#4967525">finfo</a></span><span class="op" id="4967606">.</span><span class="ident" id="4967607">idx</span>&nbsp;<span class="op" id="4967611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967615">if</span>&nbsp;<span class="ident" id="4967618"><a href="/encoding/xml/typeinfo.go.html#4967587">i</a></span>&nbsp;<span class="op" id="4967620">&gt;</span>&nbsp;<span class="num" id="4967622">0</span>&nbsp;<span class="op" id="4967624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967629">t</span>&nbsp;<span class="op" id="4967631">:=</span>&nbsp;<span class="ident" id="4967634"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><span class="op" id="4967635">.</span><span class="ident" id="4967636">Type</span><span class="op" id="4967640">(</span><span class="op" id="4967641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967646">if</span>&nbsp;<span class="ident" id="4967649"><a href="/encoding/xml/typeinfo.go.html#4967629">t</a></span><span class="op" id="4967650">.</span><span class="ident" id="4967651">Kind</span><span class="op" id="4967655">(</span><span class="op" id="4967656">)</span>&nbsp;<span class="op" id="4967658">==</span>&nbsp;<span class="ident" id="4967661"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4967668">.</span><span class="ident" id="4967669">Ptr</span>&nbsp;<span class="op" id="4967673">&amp;&amp;</span>&nbsp;<span class="ident" id="4967676"><a href="/encoding/xml/typeinfo.go.html#4967629">t</a></span><span class="op" id="4967677">.</span><span class="ident" id="4967678">Elem</span><span class="op" id="4967682">(</span><span class="op" id="4967683">)</span><span class="op" id="4967684">.</span><span class="ident" id="4967685">Kind</span><span class="op" id="4967689">(</span><span class="op" id="4967690">)</span>&nbsp;<span class="op" id="4967692">==</span>&nbsp;<span class="ident" id="4967695"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4967702">.</span><span class="ident" id="4967703">Struct</span>&nbsp;<span class="op" id="4967710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967716">if</span>&nbsp;<span class="ident" id="4967719"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><span class="op" id="4967720">.</span><span class="ident" id="4967721">IsNil</span><span class="op" id="4967726">(</span><span class="op" id="4967727">)</span>&nbsp;<span class="op" id="4967729">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967736"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><span class="op" id="4967737">.</span><span class="ident" id="4967738">Set</span><span class="op" id="4967741">(</span><span class="ident" id="4967742"><a href="/encoding/xml/typeinfo.go.html#4958553">reflect</a></span><span class="op" id="4967749">.</span><span class="ident" id="4967750">New</span><span class="op" id="4967753">(</span><span class="ident" id="4967754"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><span class="op" id="4967755">.</span><span class="ident" id="4967756">Type</span><span class="op" id="4967760">(</span><span class="op" id="4967761">)</span><span class="op" id="4967762">.</span><span class="ident" id="4967763">Elem</span><span class="op" id="4967767">(</span><span class="op" id="4967768">)</span><span class="op" id="4967769">)</span><span class="op" id="4967770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967782"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span>&nbsp;<span class="op" id="4967784">=</span>&nbsp;<span class="ident" id="4967786"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><span class="op" id="4967787">.</span><span class="ident" id="4967788">Elem</span><span class="op" id="4967792">(</span><span class="op" id="4967793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967802">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967806"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span>&nbsp;<span class="op" id="4967808">=</span>&nbsp;<span class="ident" id="4967810"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><span class="op" id="4967811">.</span><span class="ident" id="4967812">Field</span><span class="op" id="4967817">(</span><span class="ident" id="4967818"><a href="/encoding/xml/typeinfo.go.html#4967590">x</a></span><span class="op" id="4967819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967825">return</span>&nbsp;<span class="ident" id="4967832"><a href="/encoding/xml/typeinfo.go.html#4967549">v</a></span><br>
<span class="lineno"></span><span class="op" id="4967834">}</span>
</div>
</body>
</html>
