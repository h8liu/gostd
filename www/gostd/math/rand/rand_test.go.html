<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6474320">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6474375">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6474429">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6474480">package</span>&nbsp;<span class="ident" id="6474488">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6474494">import</span>&nbsp;<span class="op" id="6474501">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6474504">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6474514">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6474521">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6474529">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6474539">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6474542">const</span>&nbsp;<span class="op" id="6474548">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474551">numTestSamples</span>&nbsp;<span class="op" id="6474566">=</span>&nbsp;<span class="num" id="6474568">10000</span><br>
<span class="lineno"></span><span class="op" id="6474574">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6474577">type</span>&nbsp;<span class="ident" id="6474582">statsResults</span>&nbsp;<span class="keyword" id="6474595">struct</span>&nbsp;<span class="op" id="6474602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474605">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6474617">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474626">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6474638">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474647">closeEnough</span>&nbsp;<span class="builtintype" id="6474659">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474668">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6474680">float64</span><br>
<span class="lineno"></span><span class="op" id="6474688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6474691">func</span>&nbsp;<span class="ident" id="6474696">max</span><span class="op" id="6474699">(</span><span class="ident" id="6474700">a</span><span class="op" id="6474701">,</span>&nbsp;<span class="ident" id="6474703">b</span>&nbsp;<span class="builtintype" id="6474705">float64</span><span class="op" id="6474712">)</span>&nbsp;<span class="builtintype" id="6474714">float64</span>&nbsp;<span class="op" id="6474722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474725">if</span>&nbsp;<span class="ident" id="6474728">a</span>&nbsp;<span class="op" id="6474730">&gt;</span>&nbsp;<span class="ident" id="6474732">b</span>&nbsp;<span class="op" id="6474734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474738">return</span>&nbsp;<span class="ident" id="6474745">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474751">return</span>&nbsp;<span class="ident" id="6474758">b</span><br>
<span class="lineno">30</span><span class="op" id="6474760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6474763">func</span>&nbsp;<span class="ident" id="6474768">nearEqual</span><span class="op" id="6474777">(</span><span class="ident" id="6474778">a</span><span class="op" id="6474779">,</span>&nbsp;<span class="ident" id="6474781">b</span><span class="op" id="6474782">,</span>&nbsp;<span class="ident" id="6474784">closeEnough</span><span class="op" id="6474795">,</span>&nbsp;<span class="ident" id="6474797">maxError</span>&nbsp;<span class="builtintype" id="6474806">float64</span><span class="op" id="6474813">)</span>&nbsp;<span class="builtintype" id="6474815">bool</span>&nbsp;<span class="op" id="6474820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6474823">absDiff</span>&nbsp;<span class="op" id="6474831">:=</span>&nbsp;<span class="ident" id="6474834">math</span><span class="op" id="6474838">.</span><span class="ident" id="6474839">Abs</span><span class="op" id="6474842">(</span><span class="ident" id="6474843">a</span>&nbsp;<span class="op" id="6474845">-</span>&nbsp;<span class="ident" id="6474847">b</span><span class="op" id="6474848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474851">if</span>&nbsp;<span class="ident" id="6474854">absDiff</span>&nbsp;<span class="op" id="6474862">&lt;</span>&nbsp;<span class="ident" id="6474864">closeEnough</span>&nbsp;<span class="op" id="6474876">{</span>&nbsp;<span class="comment" id="6474878">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474948">return</span>&nbsp;<span class="builtintype" id="6474955">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6474961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6474964">return</span>&nbsp;<span class="ident" id="6474971">absDiff</span><span class="op" id="6474978">/</span><span class="ident" id="6474979">max</span><span class="op" id="6474982">(</span><span class="ident" id="6474983">math</span><span class="op" id="6474987">.</span><span class="ident" id="6474988">Abs</span><span class="op" id="6474991">(</span><span class="ident" id="6474992">a</span><span class="op" id="6474993">)</span><span class="op" id="6474994">,</span>&nbsp;<span class="ident" id="6474996">math</span><span class="op" id="6475000">.</span><span class="ident" id="6475001">Abs</span><span class="op" id="6475004">(</span><span class="ident" id="6475005">b</span><span class="op" id="6475006">)</span><span class="op" id="6475007">)</span>&nbsp;<span class="op" id="6475009">&lt;</span>&nbsp;<span class="ident" id="6475011">maxError</span><br>
<span class="lineno"></span><span class="op" id="6475020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6475023">var</span>&nbsp;<span class="ident" id="6475027">testSeeds</span>&nbsp;<span class="op" id="6475037">=</span>&nbsp;<span class="op" id="6475039">[</span><span class="op" id="6475040">]</span><span class="ident" id="6475041">int64</span><span class="op" id="6475046">{</span><span class="num" id="6475047">1</span><span class="op" id="6475048">,</span>&nbsp;<span class="num" id="6475050">1754801282</span><span class="op" id="6475060">,</span>&nbsp;<span class="num" id="6475062">1698661970</span><span class="op" id="6475072">,</span>&nbsp;<span class="num" id="6475074">1550503961</span><span class="op" id="6475084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6475087">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6475161">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="6475194">func</span>&nbsp;<span class="op" id="6475199">(</span><span class="ident" id="6475200">this</span>&nbsp;<span class="op" id="6475205">*</span><span class="ident" id="6475206">statsResults</span><span class="op" id="6475218">)</span>&nbsp;<span class="ident" id="6475220">checkSimilarDistribution</span><span class="op" id="6475244">(</span><span class="ident" id="6475245">expected</span>&nbsp;<span class="op" id="6475254">*</span><span class="ident" id="6475255">statsResults</span><span class="op" id="6475267">)</span>&nbsp;<span class="builtintype" id="6475269">error</span>&nbsp;<span class="op" id="6475275">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475278">if</span>&nbsp;<span class="op" id="6475281">!</span><span class="ident" id="6475282">nearEqual</span><span class="op" id="6475291">(</span><span class="ident" id="6475292">this</span><span class="op" id="6475296">.</span><span class="ident" id="6475297">mean</span><span class="op" id="6475301">,</span>&nbsp;<span class="ident" id="6475303">expected</span><span class="op" id="6475311">.</span><span class="ident" id="6475312">mean</span><span class="op" id="6475316">,</span>&nbsp;<span class="ident" id="6475318">expected</span><span class="op" id="6475326">.</span><span class="ident" id="6475327">closeEnough</span><span class="op" id="6475338">,</span>&nbsp;<span class="ident" id="6475340">expected</span><span class="op" id="6475348">.</span><span class="ident" id="6475349">maxError</span><span class="op" id="6475357">)</span>&nbsp;<span class="op" id="6475359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475363">s</span>&nbsp;<span class="op" id="6475365">:=</span>&nbsp;<span class="ident" id="6475368">fmt</span><span class="op" id="6475371">.</span><span class="ident" id="6475372">Sprintf</span><span class="op" id="6475379">(</span><span class="string" id="6475380">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="6475418">,</span>&nbsp;<span class="ident" id="6475420">this</span><span class="op" id="6475424">.</span><span class="ident" id="6475425">mean</span><span class="op" id="6475429">,</span>&nbsp;<span class="ident" id="6475431">expected</span><span class="op" id="6475439">.</span><span class="ident" id="6475440">mean</span><span class="op" id="6475444">,</span>&nbsp;<span class="ident" id="6475446">expected</span><span class="op" id="6475454">.</span><span class="ident" id="6475455">closeEnough</span><span class="op" id="6475466">,</span>&nbsp;<span class="ident" id="6475468">expected</span><span class="op" id="6475476">.</span><span class="ident" id="6475477">maxError</span><span class="op" id="6475485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475489">fmt</span><span class="op" id="6475492">.</span><span class="ident" id="6475493">Println</span><span class="op" id="6475500">(</span><span class="ident" id="6475501">s</span><span class="op" id="6475502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475506">return</span>&nbsp;<span class="ident" id="6475513">errors</span><span class="op" id="6475519">.</span><span class="ident" id="6475520">New</span><span class="op" id="6475523">(</span><span class="ident" id="6475524">s</span><span class="op" id="6475525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475528">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475531">if</span>&nbsp;<span class="op" id="6475534">!</span><span class="ident" id="6475535">nearEqual</span><span class="op" id="6475544">(</span><span class="ident" id="6475545">this</span><span class="op" id="6475549">.</span><span class="ident" id="6475550">stddev</span><span class="op" id="6475556">,</span>&nbsp;<span class="ident" id="6475558">expected</span><span class="op" id="6475566">.</span><span class="ident" id="6475567">stddev</span><span class="op" id="6475573">,</span>&nbsp;<span class="num" id="6475575">0</span><span class="op" id="6475576">,</span>&nbsp;<span class="ident" id="6475578">expected</span><span class="op" id="6475586">.</span><span class="ident" id="6475587">maxError</span><span class="op" id="6475595">)</span>&nbsp;<span class="op" id="6475597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475601">s</span>&nbsp;<span class="op" id="6475603">:=</span>&nbsp;<span class="ident" id="6475606">fmt</span><span class="op" id="6475609">.</span><span class="ident" id="6475610">Sprintf</span><span class="op" id="6475617">(</span><span class="string" id="6475618">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="6475658">,</span>&nbsp;<span class="ident" id="6475660">this</span><span class="op" id="6475664">.</span><span class="ident" id="6475665">stddev</span><span class="op" id="6475671">,</span>&nbsp;<span class="ident" id="6475673">expected</span><span class="op" id="6475681">.</span><span class="ident" id="6475682">stddev</span><span class="op" id="6475688">,</span>&nbsp;<span class="ident" id="6475690">expected</span><span class="op" id="6475698">.</span><span class="ident" id="6475699">closeEnough</span><span class="op" id="6475710">,</span>&nbsp;<span class="ident" id="6475712">expected</span><span class="op" id="6475720">.</span><span class="ident" id="6475721">maxError</span><span class="op" id="6475729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475733">fmt</span><span class="op" id="6475736">.</span><span class="ident" id="6475737">Println</span><span class="op" id="6475744">(</span><span class="ident" id="6475745">s</span><span class="op" id="6475746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475750">return</span>&nbsp;<span class="ident" id="6475757">errors</span><span class="op" id="6475763">.</span><span class="ident" id="6475764">New</span><span class="op" id="6475767">(</span><span class="ident" id="6475768">s</span><span class="op" id="6475769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475772">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475775">return</span>&nbsp;<span class="ident" id="6475782">nil</span><br>
<span class="lineno"></span><span class="op" id="6475786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6475789">func</span>&nbsp;<span class="ident" id="6475794">getStatsResults</span><span class="op" id="6475809">(</span><span class="ident" id="6475810">samples</span>&nbsp;<span class="op" id="6475818">[</span><span class="op" id="6475819">]</span><span class="builtintype" id="6475820">float64</span><span class="op" id="6475827">)</span>&nbsp;<span class="op" id="6475829">*</span><span class="ident" id="6475830">statsResults</span>&nbsp;<span class="op" id="6475843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475846">res</span>&nbsp;<span class="op" id="6475850">:=</span>&nbsp;<span class="builtinfunc" id="6475853">new</span><span class="op" id="6475856">(</span><span class="ident" id="6475857">statsResults</span><span class="op" id="6475869">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475872">var</span>&nbsp;<span class="ident" id="6475876">sum</span><span class="op" id="6475879">,</span>&nbsp;<span class="ident" id="6475881">squaresum</span>&nbsp;<span class="builtintype" id="6475891">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6475900">for</span>&nbsp;<span class="ident" id="6475904">_</span><span class="op" id="6475905">,</span>&nbsp;<span class="ident" id="6475907">s</span>&nbsp;<span class="op" id="6475909">:=</span>&nbsp;<span class="keyword" id="6475912">range</span>&nbsp;<span class="ident" id="6475918">samples</span>&nbsp;<span class="op" id="6475926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475930">sum</span>&nbsp;<span class="op" id="6475934">+=</span>&nbsp;<span class="ident" id="6475937">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475941">squaresum</span>&nbsp;<span class="op" id="6475951">+=</span>&nbsp;<span class="ident" id="6475954">s</span>&nbsp;<span class="op" id="6475956">*</span>&nbsp;<span class="ident" id="6475958">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6475961">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6475964">res</span><span class="op" id="6475967">.</span><span class="ident" id="6475968">mean</span>&nbsp;<span class="op" id="6475973">=</span>&nbsp;<span class="ident" id="6475975">sum</span>&nbsp;<span class="op" id="6475979">/</span>&nbsp;<span class="builtintype" id="6475981">float64</span><span class="op" id="6475988">(</span><span class="builtinfunc" id="6475989">len</span><span class="op" id="6475992">(</span><span class="ident" id="6475993">samples</span><span class="op" id="6476000">)</span><span class="op" id="6476001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476004">res</span><span class="op" id="6476007">.</span><span class="ident" id="6476008">stddev</span>&nbsp;<span class="op" id="6476015">=</span>&nbsp;<span class="ident" id="6476017">math</span><span class="op" id="6476021">.</span><span class="ident" id="6476022">Sqrt</span><span class="op" id="6476026">(</span><span class="ident" id="6476027">squaresum</span><span class="op" id="6476036">/</span><span class="builtintype" id="6476037">float64</span><span class="op" id="6476044">(</span><span class="builtinfunc" id="6476045">len</span><span class="op" id="6476048">(</span><span class="ident" id="6476049">samples</span><span class="op" id="6476056">)</span><span class="op" id="6476057">)</span>&nbsp;<span class="op" id="6476059">-</span>&nbsp;<span class="ident" id="6476061">res</span><span class="op" id="6476064">.</span><span class="ident" id="6476065">mean</span><span class="op" id="6476069">*</span><span class="ident" id="6476070">res</span><span class="op" id="6476073">.</span><span class="ident" id="6476074">mean</span><span class="op" id="6476078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476081">return</span>&nbsp;<span class="ident" id="6476088">res</span><br>
<span class="lineno"></span><span class="op" id="6476092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="6476095">func</span>&nbsp;<span class="ident" id="6476100">checkSampleDistribution</span><span class="op" id="6476123">(</span><span class="ident" id="6476124">t</span>&nbsp;<span class="op" id="6476126">*</span><span class="ident" id="6476127">testing</span><span class="op" id="6476134">.</span><span class="ident" id="6476135">T</span><span class="op" id="6476136">,</span>&nbsp;<span class="ident" id="6476138">samples</span>&nbsp;<span class="op" id="6476146">[</span><span class="op" id="6476147">]</span><span class="builtintype" id="6476148">float64</span><span class="op" id="6476155">,</span>&nbsp;<span class="ident" id="6476157">expected</span>&nbsp;<span class="op" id="6476166">*</span><span class="ident" id="6476167">statsResults</span><span class="op" id="6476179">)</span>&nbsp;<span class="op" id="6476181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476184">actual</span>&nbsp;<span class="op" id="6476191">:=</span>&nbsp;<span class="ident" id="6476194">getStatsResults</span><span class="op" id="6476209">(</span><span class="ident" id="6476210">samples</span><span class="op" id="6476217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476220">err</span>&nbsp;<span class="op" id="6476224">:=</span>&nbsp;<span class="ident" id="6476227">actual</span><span class="op" id="6476233">.</span><span class="ident" id="6476234">checkSimilarDistribution</span><span class="op" id="6476258">(</span><span class="ident" id="6476259">expected</span><span class="op" id="6476267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476270">if</span>&nbsp;<span class="ident" id="6476273">err</span>&nbsp;<span class="op" id="6476277">!=</span>&nbsp;<span class="ident" id="6476280">nil</span>&nbsp;<span class="op" id="6476284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476288">t</span><span class="op" id="6476289">.</span><span class="ident" id="6476290">Errorf</span><span class="op" id="6476296">(</span><span class="ident" id="6476297">err</span><span class="op" id="6476300">.</span><span class="ident" id="6476301">Error</span><span class="op" id="6476306">(</span><span class="op" id="6476307">)</span><span class="op" id="6476308">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476311">}</span><br>
<span class="lineno"></span><span class="op" id="6476313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6476316">func</span>&nbsp;<span class="ident" id="6476321">checkSampleSliceDistributions</span><span class="op" id="6476350">(</span><span class="ident" id="6476351">t</span>&nbsp;<span class="op" id="6476353">*</span><span class="ident" id="6476354">testing</span><span class="op" id="6476361">.</span><span class="ident" id="6476362">T</span><span class="op" id="6476363">,</span>&nbsp;<span class="ident" id="6476365">samples</span>&nbsp;<span class="op" id="6476373">[</span><span class="op" id="6476374">]</span><span class="builtintype" id="6476375">float64</span><span class="op" id="6476382">,</span>&nbsp;<span class="ident" id="6476384">nslices</span>&nbsp;<span class="builtintype" id="6476392">int</span><span class="op" id="6476395">,</span>&nbsp;<span class="ident" id="6476397">expected</span>&nbsp;<span class="op" id="6476406">*</span><span class="ident" id="6476407">statsResults</span><span class="op" id="6476419">)</span>&nbsp;<span class="op" id="6476421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476424">chunk</span>&nbsp;<span class="op" id="6476430">:=</span>&nbsp;<span class="builtinfunc" id="6476433">len</span><span class="op" id="6476436">(</span><span class="ident" id="6476437">samples</span><span class="op" id="6476444">)</span>&nbsp;<span class="op" id="6476446">/</span>&nbsp;<span class="ident" id="6476448">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476457">for</span>&nbsp;<span class="ident" id="6476461">i</span>&nbsp;<span class="op" id="6476463">:=</span>&nbsp;<span class="num" id="6476466">0</span><span class="op" id="6476467">;</span>&nbsp;<span class="ident" id="6476469">i</span>&nbsp;<span class="op" id="6476471">&lt;</span>&nbsp;<span class="ident" id="6476473">nslices</span><span class="op" id="6476480">;</span>&nbsp;<span class="ident" id="6476482">i</span><span class="op" id="6476483">++</span>&nbsp;<span class="op" id="6476486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476490">low</span>&nbsp;<span class="op" id="6476494">:=</span>&nbsp;<span class="ident" id="6476497">i</span>&nbsp;<span class="op" id="6476499">*</span>&nbsp;<span class="ident" id="6476501">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476509">var</span>&nbsp;<span class="ident" id="6476513">high</span>&nbsp;<span class="builtintype" id="6476518">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476524">if</span>&nbsp;<span class="ident" id="6476527">i</span>&nbsp;<span class="op" id="6476529">==</span>&nbsp;<span class="ident" id="6476532">nslices</span><span class="op" id="6476539">-</span><span class="num" id="6476540">1</span>&nbsp;<span class="op" id="6476542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476547">high</span>&nbsp;<span class="op" id="6476552">=</span>&nbsp;<span class="builtinfunc" id="6476554">len</span><span class="op" id="6476557">(</span><span class="ident" id="6476558">samples</span><span class="op" id="6476565">)</span>&nbsp;<span class="op" id="6476567">-</span>&nbsp;<span class="num" id="6476569">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476573">}</span>&nbsp;<span class="keyword" id="6476575">else</span>&nbsp;<span class="op" id="6476580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476585">high</span>&nbsp;<span class="op" id="6476590">=</span>&nbsp;<span class="op" id="6476592">(</span><span class="ident" id="6476593">i</span>&nbsp;<span class="op" id="6476595">+</span>&nbsp;<span class="num" id="6476597">1</span><span class="op" id="6476598">)</span>&nbsp;<span class="op" id="6476600">*</span>&nbsp;<span class="ident" id="6476602">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476614">checkSampleDistribution</span><span class="op" id="6476637">(</span><span class="ident" id="6476638">t</span><span class="op" id="6476639">,</span>&nbsp;<span class="ident" id="6476641">samples</span><span class="op" id="6476648">[</span><span class="ident" id="6476649">low</span><span class="op" id="6476652">:</span><span class="ident" id="6476653">high</span><span class="op" id="6476657">]</span><span class="op" id="6476658">,</span>&nbsp;<span class="ident" id="6476660">expected</span><span class="op" id="6476668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476671">}</span><br>
<span class="lineno">90</span><span class="op" id="6476673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6476676">//</span><br>
<span class="lineno"></span><span class="comment" id="6476679">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6476708">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="6476712">func</span>&nbsp;<span class="ident" id="6476717">generateNormalSamples</span><span class="op" id="6476738">(</span><span class="ident" id="6476739">nsamples</span>&nbsp;<span class="builtintype" id="6476748">int</span><span class="op" id="6476751">,</span>&nbsp;<span class="ident" id="6476753">mean</span><span class="op" id="6476757">,</span>&nbsp;<span class="ident" id="6476759">stddev</span>&nbsp;<span class="builtintype" id="6476766">float64</span><span class="op" id="6476773">,</span>&nbsp;<span class="ident" id="6476775">seed</span>&nbsp;<span class="ident" id="6476780">int64</span><span class="op" id="6476785">)</span>&nbsp;<span class="op" id="6476787">[</span><span class="op" id="6476788">]</span><span class="builtintype" id="6476789">float64</span>&nbsp;<span class="op" id="6476797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476800">r</span>&nbsp;<span class="op" id="6476802">:=</span>&nbsp;<span class="ident" id="6476805">New</span><span class="op" id="6476808">(</span><span class="ident" id="6476809">NewSource</span><span class="op" id="6476818">(</span><span class="ident" id="6476819">seed</span><span class="op" id="6476823">)</span><span class="op" id="6476824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476827">samples</span>&nbsp;<span class="op" id="6476835">:=</span>&nbsp;<span class="builtinfunc" id="6476838">make</span><span class="op" id="6476842">(</span><span class="op" id="6476843">[</span><span class="op" id="6476844">]</span><span class="builtintype" id="6476845">float64</span><span class="op" id="6476852">,</span>&nbsp;<span class="ident" id="6476854">nsamples</span><span class="op" id="6476862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476865">for</span>&nbsp;<span class="ident" id="6476869">i</span>&nbsp;<span class="op" id="6476871">:=</span>&nbsp;<span class="keyword" id="6476874">range</span>&nbsp;<span class="ident" id="6476880">samples</span>&nbsp;<span class="op" id="6476888">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6476892">samples</span><span class="op" id="6476899">[</span><span class="ident" id="6476900">i</span><span class="op" id="6476901">]</span>&nbsp;<span class="op" id="6476903">=</span>&nbsp;<span class="ident" id="6476905">r</span><span class="op" id="6476906">.</span><span class="ident" id="6476907">NormFloat64</span><span class="op" id="6476918">(</span><span class="op" id="6476919">)</span><span class="op" id="6476920">*</span><span class="ident" id="6476921">stddev</span>&nbsp;<span class="op" id="6476928">+</span>&nbsp;<span class="ident" id="6476930">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6476936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6476939">return</span>&nbsp;<span class="ident" id="6476946">samples</span><br>
<span class="lineno"></span><span class="op" id="6476954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6476957">func</span>&nbsp;<span class="ident" id="6476962">testNormalDistribution</span><span class="op" id="6476984">(</span><span class="ident" id="6476985">t</span>&nbsp;<span class="op" id="6476987">*</span><span class="ident" id="6476988">testing</span><span class="op" id="6476995">.</span><span class="ident" id="6476996">T</span><span class="op" id="6476997">,</span>&nbsp;<span class="ident" id="6476999">nsamples</span>&nbsp;<span class="builtintype" id="6477008">int</span><span class="op" id="6477011">,</span>&nbsp;<span class="ident" id="6477013">mean</span><span class="op" id="6477017">,</span>&nbsp;<span class="ident" id="6477019">stddev</span>&nbsp;<span class="builtintype" id="6477026">float64</span><span class="op" id="6477033">,</span>&nbsp;<span class="ident" id="6477035">seed</span>&nbsp;<span class="ident" id="6477040">int64</span><span class="op" id="6477045">)</span>&nbsp;<span class="op" id="6477047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6477050">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477147">samples</span>&nbsp;<span class="op" id="6477155">:=</span>&nbsp;<span class="ident" id="6477158">generateNormalSamples</span><span class="op" id="6477179">(</span><span class="ident" id="6477180">nsamples</span><span class="op" id="6477188">,</span>&nbsp;<span class="ident" id="6477190">mean</span><span class="op" id="6477194">,</span>&nbsp;<span class="ident" id="6477196">stddev</span><span class="op" id="6477202">,</span>&nbsp;<span class="ident" id="6477204">seed</span><span class="op" id="6477208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477211">errorScale</span>&nbsp;<span class="op" id="6477222">:=</span>&nbsp;<span class="ident" id="6477225">max</span><span class="op" id="6477228">(</span><span class="num" id="6477229">1.0</span><span class="op" id="6477232">,</span>&nbsp;<span class="ident" id="6477234">stddev</span><span class="op" id="6477240">)</span>&nbsp;<span class="comment" id="6477242">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477271">expected</span>&nbsp;<span class="op" id="6477280">:=</span>&nbsp;<span class="op" id="6477283">&amp;</span><span class="ident" id="6477284">statsResults</span><span class="op" id="6477296">{</span><span class="ident" id="6477297">mean</span><span class="op" id="6477301">,</span>&nbsp;<span class="ident" id="6477303">stddev</span><span class="op" id="6477309">,</span>&nbsp;<span class="num" id="6477311">0.10</span>&nbsp;<span class="op" id="6477316">*</span>&nbsp;<span class="ident" id="6477318">errorScale</span><span class="op" id="6477328">,</span>&nbsp;<span class="num" id="6477330">0.08</span>&nbsp;<span class="op" id="6477335">*</span>&nbsp;<span class="ident" id="6477337">errorScale</span><span class="op" id="6477347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6477351">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477420">checkSampleDistribution</span><span class="op" id="6477443">(</span><span class="ident" id="6477444">t</span><span class="op" id="6477445">,</span>&nbsp;<span class="ident" id="6477447">samples</span><span class="op" id="6477454">,</span>&nbsp;<span class="ident" id="6477456">expected</span><span class="op" id="6477464">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6477468">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477543">checkSampleSliceDistributions</span><span class="op" id="6477572">(</span><span class="ident" id="6477573">t</span><span class="op" id="6477574">,</span>&nbsp;<span class="ident" id="6477576">samples</span><span class="op" id="6477583">,</span>&nbsp;<span class="num" id="6477585">2</span><span class="op" id="6477586">,</span>&nbsp;<span class="ident" id="6477588">expected</span><span class="op" id="6477596">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6477600">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477674">checkSampleSliceDistributions</span><span class="op" id="6477703">(</span><span class="ident" id="6477704">t</span><span class="op" id="6477705">,</span>&nbsp;<span class="ident" id="6477707">samples</span><span class="op" id="6477714">,</span>&nbsp;<span class="num" id="6477716">7</span><span class="op" id="6477717">,</span>&nbsp;<span class="ident" id="6477719">expected</span><span class="op" id="6477727">)</span><br>
<span class="lineno">120</span><span class="op" id="6477729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6477732">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6477749">func</span>&nbsp;<span class="ident" id="6477754">TestStandardNormalValues</span><span class="op" id="6477778">(</span><span class="ident" id="6477779">t</span>&nbsp;<span class="op" id="6477781">*</span><span class="ident" id="6477782">testing</span><span class="op" id="6477789">.</span><span class="ident" id="6477790">T</span><span class="op" id="6477791">)</span>&nbsp;<span class="op" id="6477793">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477796">for</span>&nbsp;<span class="ident" id="6477800">_</span><span class="op" id="6477801">,</span>&nbsp;<span class="ident" id="6477803">seed</span>&nbsp;<span class="op" id="6477808">:=</span>&nbsp;<span class="keyword" id="6477811">range</span>&nbsp;<span class="ident" id="6477817">testSeeds</span>&nbsp;<span class="op" id="6477827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477831">testNormalDistribution</span><span class="op" id="6477853">(</span><span class="ident" id="6477854">t</span><span class="op" id="6477855">,</span>&nbsp;<span class="ident" id="6477857">numTestSamples</span><span class="op" id="6477871">,</span>&nbsp;<span class="num" id="6477873">0</span><span class="op" id="6477874">,</span>&nbsp;<span class="num" id="6477876">1</span><span class="op" id="6477877">,</span>&nbsp;<span class="ident" id="6477879">seed</span><span class="op" id="6477883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6477886">}</span><br>
<span class="lineno"></span><span class="op" id="6477888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="6477891">func</span>&nbsp;<span class="ident" id="6477896">TestNonStandardNormalValues</span><span class="op" id="6477923">(</span><span class="ident" id="6477924">t</span>&nbsp;<span class="op" id="6477926">*</span><span class="ident" id="6477927">testing</span><span class="op" id="6477934">.</span><span class="ident" id="6477935">T</span><span class="op" id="6477936">)</span>&nbsp;<span class="op" id="6477938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477941">sdmax</span>&nbsp;<span class="op" id="6477947">:=</span>&nbsp;<span class="num" id="6477950">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477958">mmax</span>&nbsp;<span class="op" id="6477963">:=</span>&nbsp;<span class="num" id="6477966">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6477974">if</span>&nbsp;<span class="ident" id="6477977">testing</span><span class="op" id="6477984">.</span><span class="ident" id="6477985">Short</span><span class="op" id="6477990">(</span><span class="op" id="6477991">)</span>&nbsp;<span class="op" id="6477993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6477997">sdmax</span>&nbsp;<span class="op" id="6478003">=</span>&nbsp;<span class="num" id="6478005">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478009">mmax</span>&nbsp;<span class="op" id="6478014">=</span>&nbsp;<span class="num" id="6478016">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478022">for</span>&nbsp;<span class="ident" id="6478026">sd</span>&nbsp;<span class="op" id="6478029">:=</span>&nbsp;<span class="num" id="6478032">0.5</span><span class="op" id="6478035">;</span>&nbsp;<span class="ident" id="6478037">sd</span>&nbsp;<span class="op" id="6478040">&lt;</span>&nbsp;<span class="ident" id="6478042">sdmax</span><span class="op" id="6478047">;</span>&nbsp;<span class="ident" id="6478049">sd</span>&nbsp;<span class="op" id="6478052">*=</span>&nbsp;<span class="num" id="6478055">2</span>&nbsp;<span class="op" id="6478057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478061">for</span>&nbsp;<span class="ident" id="6478065">m</span>&nbsp;<span class="op" id="6478067">:=</span>&nbsp;<span class="num" id="6478070">0.5</span><span class="op" id="6478073">;</span>&nbsp;<span class="ident" id="6478075">m</span>&nbsp;<span class="op" id="6478077">&lt;</span>&nbsp;<span class="ident" id="6478079">mmax</span><span class="op" id="6478083">;</span>&nbsp;<span class="ident" id="6478085">m</span>&nbsp;<span class="op" id="6478087">*=</span>&nbsp;<span class="num" id="6478090">2</span>&nbsp;<span class="op" id="6478092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478097">for</span>&nbsp;<span class="ident" id="6478101">_</span><span class="op" id="6478102">,</span>&nbsp;<span class="ident" id="6478104">seed</span>&nbsp;<span class="op" id="6478109">:=</span>&nbsp;<span class="keyword" id="6478112">range</span>&nbsp;<span class="ident" id="6478118">testSeeds</span>&nbsp;<span class="op" id="6478128">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478134">testNormalDistribution</span><span class="op" id="6478156">(</span><span class="ident" id="6478157">t</span><span class="op" id="6478158">,</span>&nbsp;<span class="ident" id="6478160">numTestSamples</span><span class="op" id="6478174">,</span>&nbsp;<span class="ident" id="6478176">m</span><span class="op" id="6478177">,</span>&nbsp;<span class="ident" id="6478179">sd</span><span class="op" id="6478181">,</span>&nbsp;<span class="ident" id="6478183">seed</span><span class="op" id="6478187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478193">if</span>&nbsp;<span class="ident" id="6478196">testing</span><span class="op" id="6478203">.</span><span class="ident" id="6478204">Short</span><span class="op" id="6478209">(</span><span class="op" id="6478210">)</span>&nbsp;<span class="op" id="6478212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478219">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478234">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478241">}</span><br>
<span class="lineno"></span><span class="op" id="6478243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6478246">//</span><br>
<span class="lineno">150</span><span class="comment" id="6478249">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6478283">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6478287">func</span>&nbsp;<span class="ident" id="6478292">generateExponentialSamples</span><span class="op" id="6478318">(</span><span class="ident" id="6478319">nsamples</span>&nbsp;<span class="builtintype" id="6478328">int</span><span class="op" id="6478331">,</span>&nbsp;<span class="ident" id="6478333">rate</span>&nbsp;<span class="builtintype" id="6478338">float64</span><span class="op" id="6478345">,</span>&nbsp;<span class="ident" id="6478347">seed</span>&nbsp;<span class="ident" id="6478352">int64</span><span class="op" id="6478357">)</span>&nbsp;<span class="op" id="6478359">[</span><span class="op" id="6478360">]</span><span class="builtintype" id="6478361">float64</span>&nbsp;<span class="op" id="6478369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478372">r</span>&nbsp;<span class="op" id="6478374">:=</span>&nbsp;<span class="ident" id="6478377">New</span><span class="op" id="6478380">(</span><span class="ident" id="6478381">NewSource</span><span class="op" id="6478390">(</span><span class="ident" id="6478391">seed</span><span class="op" id="6478395">)</span><span class="op" id="6478396">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478399">samples</span>&nbsp;<span class="op" id="6478407">:=</span>&nbsp;<span class="builtinfunc" id="6478410">make</span><span class="op" id="6478414">(</span><span class="op" id="6478415">[</span><span class="op" id="6478416">]</span><span class="builtintype" id="6478417">float64</span><span class="op" id="6478424">,</span>&nbsp;<span class="ident" id="6478426">nsamples</span><span class="op" id="6478434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478437">for</span>&nbsp;<span class="ident" id="6478441">i</span>&nbsp;<span class="op" id="6478443">:=</span>&nbsp;<span class="keyword" id="6478446">range</span>&nbsp;<span class="ident" id="6478452">samples</span>&nbsp;<span class="op" id="6478460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478464">samples</span><span class="op" id="6478471">[</span><span class="ident" id="6478472">i</span><span class="op" id="6478473">]</span>&nbsp;<span class="op" id="6478475">=</span>&nbsp;<span class="ident" id="6478477">r</span><span class="op" id="6478478">.</span><span class="ident" id="6478479">ExpFloat64</span><span class="op" id="6478489">(</span><span class="op" id="6478490">)</span>&nbsp;<span class="op" id="6478492">/</span>&nbsp;<span class="ident" id="6478494">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6478500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6478503">return</span>&nbsp;<span class="ident" id="6478510">samples</span><br>
<span class="lineno">160</span><span class="op" id="6478518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6478521">func</span>&nbsp;<span class="ident" id="6478526">testExponentialDistribution</span><span class="op" id="6478553">(</span><span class="ident" id="6478554">t</span>&nbsp;<span class="op" id="6478556">*</span><span class="ident" id="6478557">testing</span><span class="op" id="6478564">.</span><span class="ident" id="6478565">T</span><span class="op" id="6478566">,</span>&nbsp;<span class="ident" id="6478568">nsamples</span>&nbsp;<span class="builtintype" id="6478577">int</span><span class="op" id="6478580">,</span>&nbsp;<span class="ident" id="6478582">rate</span>&nbsp;<span class="builtintype" id="6478587">float64</span><span class="op" id="6478594">,</span>&nbsp;<span class="ident" id="6478596">seed</span>&nbsp;<span class="ident" id="6478601">int64</span><span class="op" id="6478606">)</span>&nbsp;<span class="op" id="6478608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478611">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478690">mean</span>&nbsp;<span class="op" id="6478695">:=</span>&nbsp;<span class="num" id="6478698">1</span>&nbsp;<span class="op" id="6478700">/</span>&nbsp;<span class="ident" id="6478702">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478708">stddev</span>&nbsp;<span class="op" id="6478715">:=</span>&nbsp;<span class="ident" id="6478718">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478725">samples</span>&nbsp;<span class="op" id="6478733">:=</span>&nbsp;<span class="ident" id="6478736">generateExponentialSamples</span><span class="op" id="6478762">(</span><span class="ident" id="6478763">nsamples</span><span class="op" id="6478771">,</span>&nbsp;<span class="ident" id="6478773">rate</span><span class="op" id="6478777">,</span>&nbsp;<span class="ident" id="6478779">seed</span><span class="op" id="6478783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478786">errorScale</span>&nbsp;<span class="op" id="6478797">:=</span>&nbsp;<span class="ident" id="6478800">max</span><span class="op" id="6478803">(</span><span class="num" id="6478804">1.0</span><span class="op" id="6478807">,</span>&nbsp;<span class="num" id="6478809">1</span><span class="op" id="6478810">/</span><span class="ident" id="6478811">rate</span><span class="op" id="6478815">)</span>&nbsp;<span class="comment" id="6478817">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6478863">expected</span>&nbsp;<span class="op" id="6478872">:=</span>&nbsp;<span class="op" id="6478875">&amp;</span><span class="ident" id="6478876">statsResults</span><span class="op" id="6478888">{</span><span class="ident" id="6478889">mean</span><span class="op" id="6478893">,</span>&nbsp;<span class="ident" id="6478895">stddev</span><span class="op" id="6478901">,</span>&nbsp;<span class="num" id="6478903">0.10</span>&nbsp;<span class="op" id="6478908">*</span>&nbsp;<span class="ident" id="6478910">errorScale</span><span class="op" id="6478920">,</span>&nbsp;<span class="num" id="6478922">0.20</span>&nbsp;<span class="op" id="6478927">*</span>&nbsp;<span class="ident" id="6478929">errorScale</span><span class="op" id="6478939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6478943">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479012">checkSampleDistribution</span><span class="op" id="6479035">(</span><span class="ident" id="6479036">t</span><span class="op" id="6479037">,</span>&nbsp;<span class="ident" id="6479039">samples</span><span class="op" id="6479046">,</span>&nbsp;<span class="ident" id="6479048">expected</span><span class="op" id="6479056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479060">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479135">checkSampleSliceDistributions</span><span class="op" id="6479164">(</span><span class="ident" id="6479165">t</span><span class="op" id="6479166">,</span>&nbsp;<span class="ident" id="6479168">samples</span><span class="op" id="6479175">,</span>&nbsp;<span class="num" id="6479177">2</span><span class="op" id="6479178">,</span>&nbsp;<span class="ident" id="6479180">expected</span><span class="op" id="6479188">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6479192">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479266">checkSampleSliceDistributions</span><span class="op" id="6479295">(</span><span class="ident" id="6479296">t</span><span class="op" id="6479297">,</span>&nbsp;<span class="ident" id="6479299">samples</span><span class="op" id="6479306">,</span>&nbsp;<span class="num" id="6479308">7</span><span class="op" id="6479309">,</span>&nbsp;<span class="ident" id="6479311">expected</span><span class="op" id="6479319">)</span><br>
<span class="lineno">180</span><span class="op" id="6479321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6479324">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6479341">func</span>&nbsp;<span class="ident" id="6479346">TestStandardExponentialValues</span><span class="op" id="6479375">(</span><span class="ident" id="6479376">t</span>&nbsp;<span class="op" id="6479378">*</span><span class="ident" id="6479379">testing</span><span class="op" id="6479386">.</span><span class="ident" id="6479387">T</span><span class="op" id="6479388">)</span>&nbsp;<span class="op" id="6479390">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479393">for</span>&nbsp;<span class="ident" id="6479397">_</span><span class="op" id="6479398">,</span>&nbsp;<span class="ident" id="6479400">seed</span>&nbsp;<span class="op" id="6479405">:=</span>&nbsp;<span class="keyword" id="6479408">range</span>&nbsp;<span class="ident" id="6479414">testSeeds</span>&nbsp;<span class="op" id="6479424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479428">testExponentialDistribution</span><span class="op" id="6479455">(</span><span class="ident" id="6479456">t</span><span class="op" id="6479457">,</span>&nbsp;<span class="ident" id="6479459">numTestSamples</span><span class="op" id="6479473">,</span>&nbsp;<span class="num" id="6479475">1</span><span class="op" id="6479476">,</span>&nbsp;<span class="ident" id="6479478">seed</span><span class="op" id="6479482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479485">}</span><br>
<span class="lineno"></span><span class="op" id="6479487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="6479490">func</span>&nbsp;<span class="ident" id="6479495">TestNonStandardExponentialValues</span><span class="op" id="6479527">(</span><span class="ident" id="6479528">t</span>&nbsp;<span class="op" id="6479530">*</span><span class="ident" id="6479531">testing</span><span class="op" id="6479538">.</span><span class="ident" id="6479539">T</span><span class="op" id="6479540">)</span>&nbsp;<span class="op" id="6479542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479545">for</span>&nbsp;<span class="ident" id="6479549">rate</span>&nbsp;<span class="op" id="6479554">:=</span>&nbsp;<span class="num" id="6479557">0.05</span><span class="op" id="6479561">;</span>&nbsp;<span class="ident" id="6479563">rate</span>&nbsp;<span class="op" id="6479568">&lt;</span>&nbsp;<span class="num" id="6479570">10</span><span class="op" id="6479572">;</span>&nbsp;<span class="ident" id="6479574">rate</span>&nbsp;<span class="op" id="6479579">*=</span>&nbsp;<span class="num" id="6479582">2</span>&nbsp;<span class="op" id="6479584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479588">for</span>&nbsp;<span class="ident" id="6479592">_</span><span class="op" id="6479593">,</span>&nbsp;<span class="ident" id="6479595">seed</span>&nbsp;<span class="op" id="6479600">:=</span>&nbsp;<span class="keyword" id="6479603">range</span>&nbsp;<span class="ident" id="6479609">testSeeds</span>&nbsp;<span class="op" id="6479619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479624">testExponentialDistribution</span><span class="op" id="6479651">(</span><span class="ident" id="6479652">t</span><span class="op" id="6479653">,</span>&nbsp;<span class="ident" id="6479655">numTestSamples</span><span class="op" id="6479669">,</span>&nbsp;<span class="ident" id="6479671">rate</span><span class="op" id="6479675">,</span>&nbsp;<span class="ident" id="6479677">seed</span><span class="op" id="6479681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479686">if</span>&nbsp;<span class="ident" id="6479689">testing</span><span class="op" id="6479696">.</span><span class="ident" id="6479697">Short</span><span class="op" id="6479702">(</span><span class="op" id="6479703">)</span>&nbsp;<span class="op" id="6479705">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479711">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479727">}</span><br>
<span class="lineno"></span><span class="op" id="6479729">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="6479732">//</span><br>
<span class="lineno"></span><span class="comment" id="6479735">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="6479761">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="6479765">func</span>&nbsp;<span class="ident" id="6479770">initNorm</span><span class="op" id="6479778">(</span><span class="op" id="6479779">)</span>&nbsp;<span class="op" id="6479781">(</span><span class="ident" id="6479782">testKn</span>&nbsp;<span class="op" id="6479789">[</span><span class="op" id="6479790">]</span><span class="builtintype" id="6479791">uint32</span><span class="op" id="6479797">,</span>&nbsp;<span class="ident" id="6479799">testWn</span><span class="op" id="6479805">,</span>&nbsp;<span class="ident" id="6479807">testFn</span>&nbsp;<span class="op" id="6479814">[</span><span class="op" id="6479815">]</span><span class="builtintype" id="6479816">float32</span><span class="op" id="6479823">)</span>&nbsp;<span class="op" id="6479825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479828">const</span>&nbsp;<span class="ident" id="6479834">m1</span>&nbsp;<span class="op" id="6479837">=</span>&nbsp;<span class="num" id="6479839">1</span>&nbsp;<span class="op" id="6479841">&lt;&lt;</span>&nbsp;<span class="num" id="6479844">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6479848">var</span>&nbsp;<span class="op" id="6479852">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479856">dn</span>&nbsp;<span class="builtintype" id="6479859">float64</span>&nbsp;<span class="op" id="6479867">=</span>&nbsp;<span class="ident" id="6479869">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479874">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6479885">=</span>&nbsp;<span class="ident" id="6479887">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479892">vn</span>&nbsp;<span class="builtintype" id="6479895">float64</span>&nbsp;<span class="op" id="6479903">=</span>&nbsp;<span class="num" id="6479905">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6479926">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479930">testKn</span>&nbsp;<span class="op" id="6479937">=</span>&nbsp;<span class="builtinfunc" id="6479939">make</span><span class="op" id="6479943">(</span><span class="op" id="6479944">[</span><span class="op" id="6479945">]</span><span class="builtintype" id="6479946">uint32</span><span class="op" id="6479952">,</span>&nbsp;<span class="num" id="6479954">128</span><span class="op" id="6479957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479960">testWn</span>&nbsp;<span class="op" id="6479967">=</span>&nbsp;<span class="builtinfunc" id="6479969">make</span><span class="op" id="6479973">(</span><span class="op" id="6479974">[</span><span class="op" id="6479975">]</span><span class="builtintype" id="6479976">float32</span><span class="op" id="6479983">,</span>&nbsp;<span class="num" id="6479985">128</span><span class="op" id="6479988">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6479991">testFn</span>&nbsp;<span class="op" id="6479998">=</span>&nbsp;<span class="builtinfunc" id="6480000">make</span><span class="op" id="6480004">(</span><span class="op" id="6480005">[</span><span class="op" id="6480006">]</span><span class="builtintype" id="6480007">float32</span><span class="op" id="6480014">,</span>&nbsp;<span class="num" id="6480016">128</span><span class="op" id="6480019">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480023">q</span>&nbsp;<span class="op" id="6480025">:=</span>&nbsp;<span class="ident" id="6480028">vn</span>&nbsp;<span class="op" id="6480031">/</span>&nbsp;<span class="ident" id="6480033">math</span><span class="op" id="6480037">.</span><span class="ident" id="6480038">Exp</span><span class="op" id="6480041">(</span><span class="op" id="6480042">-</span><span class="num" id="6480043">0.5</span><span class="op" id="6480046">*</span><span class="ident" id="6480047">dn</span><span class="op" id="6480049">*</span><span class="ident" id="6480050">dn</span><span class="op" id="6480052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480055">testKn</span><span class="op" id="6480061">[</span><span class="num" id="6480062">0</span><span class="op" id="6480063">]</span>&nbsp;<span class="op" id="6480065">=</span>&nbsp;<span class="builtintype" id="6480067">uint32</span><span class="op" id="6480073">(</span><span class="op" id="6480074">(</span><span class="ident" id="6480075">dn</span>&nbsp;<span class="op" id="6480078">/</span>&nbsp;<span class="ident" id="6480080">q</span><span class="op" id="6480081">)</span>&nbsp;<span class="op" id="6480083">*</span>&nbsp;<span class="ident" id="6480085">m1</span><span class="op" id="6480087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480090">testKn</span><span class="op" id="6480096">[</span><span class="num" id="6480097">1</span><span class="op" id="6480098">]</span>&nbsp;<span class="op" id="6480100">=</span>&nbsp;<span class="num" id="6480102">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480105">testWn</span><span class="op" id="6480111">[</span><span class="num" id="6480112">0</span><span class="op" id="6480113">]</span>&nbsp;<span class="op" id="6480115">=</span>&nbsp;<span class="builtintype" id="6480117">float32</span><span class="op" id="6480124">(</span><span class="ident" id="6480125">q</span>&nbsp;<span class="op" id="6480127">/</span>&nbsp;<span class="ident" id="6480129">m1</span><span class="op" id="6480131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480134">testWn</span><span class="op" id="6480140">[</span><span class="num" id="6480141">127</span><span class="op" id="6480144">]</span>&nbsp;<span class="op" id="6480146">=</span>&nbsp;<span class="builtintype" id="6480148">float32</span><span class="op" id="6480155">(</span><span class="ident" id="6480156">dn</span>&nbsp;<span class="op" id="6480159">/</span>&nbsp;<span class="ident" id="6480161">m1</span><span class="op" id="6480163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480166">testFn</span><span class="op" id="6480172">[</span><span class="num" id="6480173">0</span><span class="op" id="6480174">]</span>&nbsp;<span class="op" id="6480176">=</span>&nbsp;<span class="num" id="6480178">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480183">testFn</span><span class="op" id="6480189">[</span><span class="num" id="6480190">127</span><span class="op" id="6480193">]</span>&nbsp;<span class="op" id="6480195">=</span>&nbsp;<span class="builtintype" id="6480197">float32</span><span class="op" id="6480204">(</span><span class="ident" id="6480205">math</span><span class="op" id="6480209">.</span><span class="ident" id="6480210">Exp</span><span class="op" id="6480213">(</span><span class="op" id="6480214">-</span><span class="num" id="6480215">0.5</span>&nbsp;<span class="op" id="6480219">*</span>&nbsp;<span class="ident" id="6480221">dn</span>&nbsp;<span class="op" id="6480224">*</span>&nbsp;<span class="ident" id="6480226">dn</span><span class="op" id="6480228">)</span><span class="op" id="6480229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6480232">for</span>&nbsp;<span class="ident" id="6480236">i</span>&nbsp;<span class="op" id="6480238">:=</span>&nbsp;<span class="num" id="6480241">126</span><span class="op" id="6480244">;</span>&nbsp;<span class="ident" id="6480246">i</span>&nbsp;<span class="op" id="6480248">&gt;=</span>&nbsp;<span class="num" id="6480251">1</span><span class="op" id="6480252">;</span>&nbsp;<span class="ident" id="6480254">i</span><span class="op" id="6480255">--</span>&nbsp;<span class="op" id="6480258">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480262">dn</span>&nbsp;<span class="op" id="6480265">=</span>&nbsp;<span class="ident" id="6480267">math</span><span class="op" id="6480271">.</span><span class="ident" id="6480272">Sqrt</span><span class="op" id="6480276">(</span><span class="op" id="6480277">-</span><span class="num" id="6480278">2.0</span>&nbsp;<span class="op" id="6480282">*</span>&nbsp;<span class="ident" id="6480284">math</span><span class="op" id="6480288">.</span><span class="ident" id="6480289">Log</span><span class="op" id="6480292">(</span><span class="ident" id="6480293">vn</span><span class="op" id="6480295">/</span><span class="ident" id="6480296">dn</span><span class="op" id="6480298">+</span><span class="ident" id="6480299">math</span><span class="op" id="6480303">.</span><span class="ident" id="6480304">Exp</span><span class="op" id="6480307">(</span><span class="op" id="6480308">-</span><span class="num" id="6480309">0.5</span><span class="op" id="6480312">*</span><span class="ident" id="6480313">dn</span><span class="op" id="6480315">*</span><span class="ident" id="6480316">dn</span><span class="op" id="6480318">)</span><span class="op" id="6480319">)</span><span class="op" id="6480320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480324">testKn</span><span class="op" id="6480330">[</span><span class="ident" id="6480331">i</span><span class="op" id="6480332">+</span><span class="num" id="6480333">1</span><span class="op" id="6480334">]</span>&nbsp;<span class="op" id="6480336">=</span>&nbsp;<span class="builtintype" id="6480338">uint32</span><span class="op" id="6480344">(</span><span class="op" id="6480345">(</span><span class="ident" id="6480346">dn</span>&nbsp;<span class="op" id="6480349">/</span>&nbsp;<span class="ident" id="6480351">tn</span><span class="op" id="6480353">)</span>&nbsp;<span class="op" id="6480355">*</span>&nbsp;<span class="ident" id="6480357">m1</span><span class="op" id="6480359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480363">tn</span>&nbsp;<span class="op" id="6480366">=</span>&nbsp;<span class="ident" id="6480368">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480373">testFn</span><span class="op" id="6480379">[</span><span class="ident" id="6480380">i</span><span class="op" id="6480381">]</span>&nbsp;<span class="op" id="6480383">=</span>&nbsp;<span class="builtintype" id="6480385">float32</span><span class="op" id="6480392">(</span><span class="ident" id="6480393">math</span><span class="op" id="6480397">.</span><span class="ident" id="6480398">Exp</span><span class="op" id="6480401">(</span><span class="op" id="6480402">-</span><span class="num" id="6480403">0.5</span>&nbsp;<span class="op" id="6480407">*</span>&nbsp;<span class="ident" id="6480409">dn</span>&nbsp;<span class="op" id="6480412">*</span>&nbsp;<span class="ident" id="6480414">dn</span><span class="op" id="6480416">)</span><span class="op" id="6480417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480421">testWn</span><span class="op" id="6480427">[</span><span class="ident" id="6480428">i</span><span class="op" id="6480429">]</span>&nbsp;<span class="op" id="6480431">=</span>&nbsp;<span class="builtintype" id="6480433">float32</span><span class="op" id="6480440">(</span><span class="ident" id="6480441">dn</span>&nbsp;<span class="op" id="6480444">/</span>&nbsp;<span class="ident" id="6480446">m1</span><span class="op" id="6480448">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6480454">return</span><br>
<span class="lineno"></span><span class="op" id="6480461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6480464">func</span>&nbsp;<span class="ident" id="6480469">initExp</span><span class="op" id="6480476">(</span><span class="op" id="6480477">)</span>&nbsp;<span class="op" id="6480479">(</span><span class="ident" id="6480480">testKe</span>&nbsp;<span class="op" id="6480487">[</span><span class="op" id="6480488">]</span><span class="builtintype" id="6480489">uint32</span><span class="op" id="6480495">,</span>&nbsp;<span class="ident" id="6480497">testWe</span><span class="op" id="6480503">,</span>&nbsp;<span class="ident" id="6480505">testFe</span>&nbsp;<span class="op" id="6480512">[</span><span class="op" id="6480513">]</span><span class="builtintype" id="6480514">float32</span><span class="op" id="6480521">)</span>&nbsp;<span class="op" id="6480523">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6480526">const</span>&nbsp;<span class="ident" id="6480532">m2</span>&nbsp;<span class="op" id="6480535">=</span>&nbsp;<span class="num" id="6480537">1</span>&nbsp;<span class="op" id="6480539">&lt;&lt;</span>&nbsp;<span class="num" id="6480542">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6480546">var</span>&nbsp;<span class="op" id="6480550">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480554">de</span>&nbsp;<span class="builtintype" id="6480557">float64</span>&nbsp;<span class="op" id="6480565">=</span>&nbsp;<span class="ident" id="6480567">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480572">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6480583">=</span>&nbsp;<span class="ident" id="6480585">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480590">ve</span>&nbsp;<span class="builtintype" id="6480593">float64</span>&nbsp;<span class="op" id="6480601">=</span>&nbsp;<span class="num" id="6480603">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6480629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480633">testKe</span>&nbsp;<span class="op" id="6480640">=</span>&nbsp;<span class="builtinfunc" id="6480642">make</span><span class="op" id="6480646">(</span><span class="op" id="6480647">[</span><span class="op" id="6480648">]</span><span class="builtintype" id="6480649">uint32</span><span class="op" id="6480655">,</span>&nbsp;<span class="num" id="6480657">256</span><span class="op" id="6480660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480663">testWe</span>&nbsp;<span class="op" id="6480670">=</span>&nbsp;<span class="builtinfunc" id="6480672">make</span><span class="op" id="6480676">(</span><span class="op" id="6480677">[</span><span class="op" id="6480678">]</span><span class="builtintype" id="6480679">float32</span><span class="op" id="6480686">,</span>&nbsp;<span class="num" id="6480688">256</span><span class="op" id="6480691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480694">testFe</span>&nbsp;<span class="op" id="6480701">=</span>&nbsp;<span class="builtinfunc" id="6480703">make</span><span class="op" id="6480707">(</span><span class="op" id="6480708">[</span><span class="op" id="6480709">]</span><span class="builtintype" id="6480710">float32</span><span class="op" id="6480717">,</span>&nbsp;<span class="num" id="6480719">256</span><span class="op" id="6480722">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480726">q</span>&nbsp;<span class="op" id="6480728">:=</span>&nbsp;<span class="ident" id="6480731">ve</span>&nbsp;<span class="op" id="6480734">/</span>&nbsp;<span class="ident" id="6480736">math</span><span class="op" id="6480740">.</span><span class="ident" id="6480741">Exp</span><span class="op" id="6480744">(</span><span class="op" id="6480745">-</span><span class="ident" id="6480746">de</span><span class="op" id="6480748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480751">testKe</span><span class="op" id="6480757">[</span><span class="num" id="6480758">0</span><span class="op" id="6480759">]</span>&nbsp;<span class="op" id="6480761">=</span>&nbsp;<span class="builtintype" id="6480763">uint32</span><span class="op" id="6480769">(</span><span class="op" id="6480770">(</span><span class="ident" id="6480771">de</span>&nbsp;<span class="op" id="6480774">/</span>&nbsp;<span class="ident" id="6480776">q</span><span class="op" id="6480777">)</span>&nbsp;<span class="op" id="6480779">*</span>&nbsp;<span class="ident" id="6480781">m2</span><span class="op" id="6480783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480786">testKe</span><span class="op" id="6480792">[</span><span class="num" id="6480793">1</span><span class="op" id="6480794">]</span>&nbsp;<span class="op" id="6480796">=</span>&nbsp;<span class="num" id="6480798">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480801">testWe</span><span class="op" id="6480807">[</span><span class="num" id="6480808">0</span><span class="op" id="6480809">]</span>&nbsp;<span class="op" id="6480811">=</span>&nbsp;<span class="builtintype" id="6480813">float32</span><span class="op" id="6480820">(</span><span class="ident" id="6480821">q</span>&nbsp;<span class="op" id="6480823">/</span>&nbsp;<span class="ident" id="6480825">m2</span><span class="op" id="6480827">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480830">testWe</span><span class="op" id="6480836">[</span><span class="num" id="6480837">255</span><span class="op" id="6480840">]</span>&nbsp;<span class="op" id="6480842">=</span>&nbsp;<span class="builtintype" id="6480844">float32</span><span class="op" id="6480851">(</span><span class="ident" id="6480852">de</span>&nbsp;<span class="op" id="6480855">/</span>&nbsp;<span class="ident" id="6480857">m2</span><span class="op" id="6480859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480862">testFe</span><span class="op" id="6480868">[</span><span class="num" id="6480869">0</span><span class="op" id="6480870">]</span>&nbsp;<span class="op" id="6480872">=</span>&nbsp;<span class="num" id="6480874">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480879">testFe</span><span class="op" id="6480885">[</span><span class="num" id="6480886">255</span><span class="op" id="6480889">]</span>&nbsp;<span class="op" id="6480891">=</span>&nbsp;<span class="builtintype" id="6480893">float32</span><span class="op" id="6480900">(</span><span class="ident" id="6480901">math</span><span class="op" id="6480905">.</span><span class="ident" id="6480906">Exp</span><span class="op" id="6480909">(</span><span class="op" id="6480910">-</span><span class="ident" id="6480911">de</span><span class="op" id="6480913">)</span><span class="op" id="6480914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6480917">for</span>&nbsp;<span class="ident" id="6480921">i</span>&nbsp;<span class="op" id="6480923">:=</span>&nbsp;<span class="num" id="6480926">254</span><span class="op" id="6480929">;</span>&nbsp;<span class="ident" id="6480931">i</span>&nbsp;<span class="op" id="6480933">&gt;=</span>&nbsp;<span class="num" id="6480936">1</span><span class="op" id="6480937">;</span>&nbsp;<span class="ident" id="6480939">i</span><span class="op" id="6480940">--</span>&nbsp;<span class="op" id="6480943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480947">de</span>&nbsp;<span class="op" id="6480950">=</span>&nbsp;<span class="op" id="6480952">-</span><span class="ident" id="6480953">math</span><span class="op" id="6480957">.</span><span class="ident" id="6480958">Log</span><span class="op" id="6480961">(</span><span class="ident" id="6480962">ve</span><span class="op" id="6480964">/</span><span class="ident" id="6480965">de</span>&nbsp;<span class="op" id="6480968">+</span>&nbsp;<span class="ident" id="6480970">math</span><span class="op" id="6480974">.</span><span class="ident" id="6480975">Exp</span><span class="op" id="6480978">(</span><span class="op" id="6480979">-</span><span class="ident" id="6480980">de</span><span class="op" id="6480982">)</span><span class="op" id="6480983">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6480987">testKe</span><span class="op" id="6480993">[</span><span class="ident" id="6480994">i</span><span class="op" id="6480995">+</span><span class="num" id="6480996">1</span><span class="op" id="6480997">]</span>&nbsp;<span class="op" id="6480999">=</span>&nbsp;<span class="builtintype" id="6481001">uint32</span><span class="op" id="6481007">(</span><span class="op" id="6481008">(</span><span class="ident" id="6481009">de</span>&nbsp;<span class="op" id="6481012">/</span>&nbsp;<span class="ident" id="6481014">te</span><span class="op" id="6481016">)</span>&nbsp;<span class="op" id="6481018">*</span>&nbsp;<span class="ident" id="6481020">m2</span><span class="op" id="6481022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481026">te</span>&nbsp;<span class="op" id="6481029">=</span>&nbsp;<span class="ident" id="6481031">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481036">testFe</span><span class="op" id="6481042">[</span><span class="ident" id="6481043">i</span><span class="op" id="6481044">]</span>&nbsp;<span class="op" id="6481046">=</span>&nbsp;<span class="builtintype" id="6481048">float32</span><span class="op" id="6481055">(</span><span class="ident" id="6481056">math</span><span class="op" id="6481060">.</span><span class="ident" id="6481061">Exp</span><span class="op" id="6481064">(</span><span class="op" id="6481065">-</span><span class="ident" id="6481066">de</span><span class="op" id="6481068">)</span><span class="op" id="6481069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481073">testWe</span><span class="op" id="6481079">[</span><span class="ident" id="6481080">i</span><span class="op" id="6481081">]</span>&nbsp;<span class="op" id="6481083">=</span>&nbsp;<span class="builtintype" id="6481085">float32</span><span class="op" id="6481092">(</span><span class="ident" id="6481093">de</span>&nbsp;<span class="op" id="6481096">/</span>&nbsp;<span class="ident" id="6481098">m2</span><span class="op" id="6481100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481103">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481106">return</span><br>
<span class="lineno"></span><span class="op" id="6481113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6481116">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="6481184">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="6481248">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="6481266">func</span>&nbsp;<span class="ident" id="6481271">compareUint32Slices</span><span class="op" id="6481290">(</span><span class="ident" id="6481291">s1</span><span class="op" id="6481293">,</span>&nbsp;<span class="ident" id="6481295">s2</span>&nbsp;<span class="op" id="6481298">[</span><span class="op" id="6481299">]</span><span class="builtintype" id="6481300">uint32</span><span class="op" id="6481306">)</span>&nbsp;<span class="builtintype" id="6481308">int</span>&nbsp;<span class="op" id="6481312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481315">if</span>&nbsp;<span class="builtinfunc" id="6481318">len</span><span class="op" id="6481321">(</span><span class="ident" id="6481322">s1</span><span class="op" id="6481324">)</span>&nbsp;<span class="op" id="6481326">!=</span>&nbsp;<span class="builtinfunc" id="6481329">len</span><span class="op" id="6481332">(</span><span class="ident" id="6481333">s2</span><span class="op" id="6481335">)</span>&nbsp;<span class="op" id="6481337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481341">if</span>&nbsp;<span class="builtinfunc" id="6481344">len</span><span class="op" id="6481347">(</span><span class="ident" id="6481348">s1</span><span class="op" id="6481350">)</span>&nbsp;<span class="op" id="6481352">&gt;</span>&nbsp;<span class="builtinfunc" id="6481354">len</span><span class="op" id="6481357">(</span><span class="ident" id="6481358">s2</span><span class="op" id="6481360">)</span>&nbsp;<span class="op" id="6481362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481367">return</span>&nbsp;<span class="builtinfunc" id="6481374">len</span><span class="op" id="6481377">(</span><span class="ident" id="6481378">s2</span><span class="op" id="6481380">)</span>&nbsp;<span class="op" id="6481382">+</span>&nbsp;<span class="num" id="6481384">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481392">return</span>&nbsp;<span class="builtinfunc" id="6481399">len</span><span class="op" id="6481402">(</span><span class="ident" id="6481403">s1</span><span class="op" id="6481405">)</span>&nbsp;<span class="op" id="6481407">+</span>&nbsp;<span class="num" id="6481409">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481415">for</span>&nbsp;<span class="ident" id="6481419">i</span>&nbsp;<span class="op" id="6481421">:=</span>&nbsp;<span class="keyword" id="6481424">range</span>&nbsp;<span class="ident" id="6481430">s1</span>&nbsp;<span class="op" id="6481433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481437">if</span>&nbsp;<span class="ident" id="6481440">s1</span><span class="op" id="6481442">[</span><span class="ident" id="6481443">i</span><span class="op" id="6481444">]</span>&nbsp;<span class="op" id="6481446">!=</span>&nbsp;<span class="ident" id="6481449">s2</span><span class="op" id="6481451">[</span><span class="ident" id="6481452">i</span><span class="op" id="6481453">]</span>&nbsp;<span class="op" id="6481455">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481460">return</span>&nbsp;<span class="ident" id="6481467">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481477">return</span>&nbsp;<span class="op" id="6481484">-</span><span class="num" id="6481485">1</span><br>
<span class="lineno"></span><span class="op" id="6481487">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="6481490">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="6481559">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="6481623">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="6481641">func</span>&nbsp;<span class="ident" id="6481646">compareFloat32Slices</span><span class="op" id="6481666">(</span><span class="ident" id="6481667">s1</span><span class="op" id="6481669">,</span>&nbsp;<span class="ident" id="6481671">s2</span>&nbsp;<span class="op" id="6481674">[</span><span class="op" id="6481675">]</span><span class="builtintype" id="6481676">float32</span><span class="op" id="6481683">)</span>&nbsp;<span class="builtintype" id="6481685">int</span>&nbsp;<span class="op" id="6481689">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481692">if</span>&nbsp;<span class="builtinfunc" id="6481695">len</span><span class="op" id="6481698">(</span><span class="ident" id="6481699">s1</span><span class="op" id="6481701">)</span>&nbsp;<span class="op" id="6481703">!=</span>&nbsp;<span class="builtinfunc" id="6481706">len</span><span class="op" id="6481709">(</span><span class="ident" id="6481710">s2</span><span class="op" id="6481712">)</span>&nbsp;<span class="op" id="6481714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481718">if</span>&nbsp;<span class="builtinfunc" id="6481721">len</span><span class="op" id="6481724">(</span><span class="ident" id="6481725">s1</span><span class="op" id="6481727">)</span>&nbsp;<span class="op" id="6481729">&gt;</span>&nbsp;<span class="builtinfunc" id="6481731">len</span><span class="op" id="6481734">(</span><span class="ident" id="6481735">s2</span><span class="op" id="6481737">)</span>&nbsp;<span class="op" id="6481739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481744">return</span>&nbsp;<span class="builtinfunc" id="6481751">len</span><span class="op" id="6481754">(</span><span class="ident" id="6481755">s2</span><span class="op" id="6481757">)</span>&nbsp;<span class="op" id="6481759">+</span>&nbsp;<span class="num" id="6481761">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481769">return</span>&nbsp;<span class="builtinfunc" id="6481776">len</span><span class="op" id="6481779">(</span><span class="ident" id="6481780">s1</span><span class="op" id="6481782">)</span>&nbsp;<span class="op" id="6481784">+</span>&nbsp;<span class="num" id="6481786">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481792">for</span>&nbsp;<span class="ident" id="6481796">i</span>&nbsp;<span class="op" id="6481798">:=</span>&nbsp;<span class="keyword" id="6481801">range</span>&nbsp;<span class="ident" id="6481807">s1</span>&nbsp;<span class="op" id="6481810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481814">if</span>&nbsp;<span class="op" id="6481817">!</span><span class="ident" id="6481818">nearEqual</span><span class="op" id="6481827">(</span><span class="builtintype" id="6481828">float64</span><span class="op" id="6481835">(</span><span class="ident" id="6481836">s1</span><span class="op" id="6481838">[</span><span class="ident" id="6481839">i</span><span class="op" id="6481840">]</span><span class="op" id="6481841">)</span><span class="op" id="6481842">,</span>&nbsp;<span class="builtintype" id="6481844">float64</span><span class="op" id="6481851">(</span><span class="ident" id="6481852">s2</span><span class="op" id="6481854">[</span><span class="ident" id="6481855">i</span><span class="op" id="6481856">]</span><span class="op" id="6481857">)</span><span class="op" id="6481858">,</span>&nbsp;<span class="num" id="6481860">0</span><span class="op" id="6481861">,</span>&nbsp;<span class="num" id="6481863">1e-7</span><span class="op" id="6481867">)</span>&nbsp;<span class="op" id="6481869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481874">return</span>&nbsp;<span class="ident" id="6481881">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481885">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6481888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481891">return</span>&nbsp;<span class="op" id="6481898">-</span><span class="num" id="6481899">1</span><br>
<span class="lineno"></span><span class="op" id="6481901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6481904">func</span>&nbsp;<span class="ident" id="6481909">TestNormTables</span><span class="op" id="6481923">(</span><span class="ident" id="6481924">t</span>&nbsp;<span class="op" id="6481926">*</span><span class="ident" id="6481927">testing</span><span class="op" id="6481934">.</span><span class="ident" id="6481935">T</span><span class="op" id="6481936">)</span>&nbsp;<span class="op" id="6481938">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6481941">testKn</span><span class="op" id="6481947">,</span>&nbsp;<span class="ident" id="6481949">testWn</span><span class="op" id="6481955">,</span>&nbsp;<span class="ident" id="6481957">testFn</span>&nbsp;<span class="op" id="6481964">:=</span>&nbsp;<span class="ident" id="6481967">initNorm</span><span class="op" id="6481975">(</span><span class="op" id="6481976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6481979">if</span>&nbsp;<span class="ident" id="6481982">i</span>&nbsp;<span class="op" id="6481984">:=</span>&nbsp;<span class="ident" id="6481987">compareUint32Slices</span><span class="op" id="6482006">(</span><span class="ident" id="6482007">kn</span><span class="op" id="6482009">[</span><span class="num" id="6482010">0</span><span class="op" id="6482011">:</span><span class="op" id="6482012">]</span><span class="op" id="6482013">,</span>&nbsp;<span class="ident" id="6482015">testKn</span><span class="op" id="6482021">)</span><span class="op" id="6482022">;</span>&nbsp;<span class="ident" id="6482024">i</span>&nbsp;<span class="op" id="6482026">&gt;=</span>&nbsp;<span class="num" id="6482029">0</span>&nbsp;<span class="op" id="6482031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482035">t</span><span class="op" id="6482036">.</span><span class="ident" id="6482037">Errorf</span><span class="op" id="6482043">(</span><span class="string" id="6482044">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6482080">,</span>&nbsp;<span class="ident" id="6482082">i</span><span class="op" id="6482083">,</span>&nbsp;<span class="ident" id="6482085">kn</span><span class="op" id="6482087">[</span><span class="ident" id="6482088">i</span><span class="op" id="6482089">]</span><span class="op" id="6482090">,</span>&nbsp;<span class="ident" id="6482092">testKn</span><span class="op" id="6482098">[</span><span class="ident" id="6482099">i</span><span class="op" id="6482100">]</span><span class="op" id="6482101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482107">if</span>&nbsp;<span class="ident" id="6482110">i</span>&nbsp;<span class="op" id="6482112">:=</span>&nbsp;<span class="ident" id="6482115">compareFloat32Slices</span><span class="op" id="6482135">(</span><span class="ident" id="6482136">wn</span><span class="op" id="6482138">[</span><span class="num" id="6482139">0</span><span class="op" id="6482140">:</span><span class="op" id="6482141">]</span><span class="op" id="6482142">,</span>&nbsp;<span class="ident" id="6482144">testWn</span><span class="op" id="6482150">)</span><span class="op" id="6482151">;</span>&nbsp;<span class="ident" id="6482153">i</span>&nbsp;<span class="op" id="6482155">&gt;=</span>&nbsp;<span class="num" id="6482158">0</span>&nbsp;<span class="op" id="6482160">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482164">t</span><span class="op" id="6482165">.</span><span class="ident" id="6482166">Errorf</span><span class="op" id="6482172">(</span><span class="string" id="6482173">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6482209">,</span>&nbsp;<span class="ident" id="6482211">i</span><span class="op" id="6482212">,</span>&nbsp;<span class="ident" id="6482214">wn</span><span class="op" id="6482216">[</span><span class="ident" id="6482217">i</span><span class="op" id="6482218">]</span><span class="op" id="6482219">,</span>&nbsp;<span class="ident" id="6482221">testWn</span><span class="op" id="6482227">[</span><span class="ident" id="6482228">i</span><span class="op" id="6482229">]</span><span class="op" id="6482230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482236">if</span>&nbsp;<span class="ident" id="6482239">i</span>&nbsp;<span class="op" id="6482241">:=</span>&nbsp;<span class="ident" id="6482244">compareFloat32Slices</span><span class="op" id="6482264">(</span><span class="ident" id="6482265">fn</span><span class="op" id="6482267">[</span><span class="num" id="6482268">0</span><span class="op" id="6482269">:</span><span class="op" id="6482270">]</span><span class="op" id="6482271">,</span>&nbsp;<span class="ident" id="6482273">testFn</span><span class="op" id="6482279">)</span><span class="op" id="6482280">;</span>&nbsp;<span class="ident" id="6482282">i</span>&nbsp;<span class="op" id="6482284">&gt;=</span>&nbsp;<span class="num" id="6482287">0</span>&nbsp;<span class="op" id="6482289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482293">t</span><span class="op" id="6482294">.</span><span class="ident" id="6482295">Errorf</span><span class="op" id="6482301">(</span><span class="string" id="6482302">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6482338">,</span>&nbsp;<span class="ident" id="6482340">i</span><span class="op" id="6482341">,</span>&nbsp;<span class="ident" id="6482343">fn</span><span class="op" id="6482345">[</span><span class="ident" id="6482346">i</span><span class="op" id="6482347">]</span><span class="op" id="6482348">,</span>&nbsp;<span class="ident" id="6482350">testFn</span><span class="op" id="6482356">[</span><span class="ident" id="6482357">i</span><span class="op" id="6482358">]</span><span class="op" id="6482359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482362">}</span><br>
<span class="lineno">310</span><span class="op" id="6482364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6482367">func</span>&nbsp;<span class="ident" id="6482372">TestExpTables</span><span class="op" id="6482385">(</span><span class="ident" id="6482386">t</span>&nbsp;<span class="op" id="6482388">*</span><span class="ident" id="6482389">testing</span><span class="op" id="6482396">.</span><span class="ident" id="6482397">T</span><span class="op" id="6482398">)</span>&nbsp;<span class="op" id="6482400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482403">testKe</span><span class="op" id="6482409">,</span>&nbsp;<span class="ident" id="6482411">testWe</span><span class="op" id="6482417">,</span>&nbsp;<span class="ident" id="6482419">testFe</span>&nbsp;<span class="op" id="6482426">:=</span>&nbsp;<span class="ident" id="6482429">initExp</span><span class="op" id="6482436">(</span><span class="op" id="6482437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482440">if</span>&nbsp;<span class="ident" id="6482443">i</span>&nbsp;<span class="op" id="6482445">:=</span>&nbsp;<span class="ident" id="6482448">compareUint32Slices</span><span class="op" id="6482467">(</span><span class="ident" id="6482468">ke</span><span class="op" id="6482470">[</span><span class="num" id="6482471">0</span><span class="op" id="6482472">:</span><span class="op" id="6482473">]</span><span class="op" id="6482474">,</span>&nbsp;<span class="ident" id="6482476">testKe</span><span class="op" id="6482482">)</span><span class="op" id="6482483">;</span>&nbsp;<span class="ident" id="6482485">i</span>&nbsp;<span class="op" id="6482487">&gt;=</span>&nbsp;<span class="num" id="6482490">0</span>&nbsp;<span class="op" id="6482492">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482496">t</span><span class="op" id="6482497">.</span><span class="ident" id="6482498">Errorf</span><span class="op" id="6482504">(</span><span class="string" id="6482505">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6482541">,</span>&nbsp;<span class="ident" id="6482543">i</span><span class="op" id="6482544">,</span>&nbsp;<span class="ident" id="6482546">ke</span><span class="op" id="6482548">[</span><span class="ident" id="6482549">i</span><span class="op" id="6482550">]</span><span class="op" id="6482551">,</span>&nbsp;<span class="ident" id="6482553">testKe</span><span class="op" id="6482559">[</span><span class="ident" id="6482560">i</span><span class="op" id="6482561">]</span><span class="op" id="6482562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482568">if</span>&nbsp;<span class="ident" id="6482571">i</span>&nbsp;<span class="op" id="6482573">:=</span>&nbsp;<span class="ident" id="6482576">compareFloat32Slices</span><span class="op" id="6482596">(</span><span class="ident" id="6482597">we</span><span class="op" id="6482599">[</span><span class="num" id="6482600">0</span><span class="op" id="6482601">:</span><span class="op" id="6482602">]</span><span class="op" id="6482603">,</span>&nbsp;<span class="ident" id="6482605">testWe</span><span class="op" id="6482611">)</span><span class="op" id="6482612">;</span>&nbsp;<span class="ident" id="6482614">i</span>&nbsp;<span class="op" id="6482616">&gt;=</span>&nbsp;<span class="num" id="6482619">0</span>&nbsp;<span class="op" id="6482621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482625">t</span><span class="op" id="6482626">.</span><span class="ident" id="6482627">Errorf</span><span class="op" id="6482633">(</span><span class="string" id="6482634">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6482670">,</span>&nbsp;<span class="ident" id="6482672">i</span><span class="op" id="6482673">,</span>&nbsp;<span class="ident" id="6482675">we</span><span class="op" id="6482677">[</span><span class="ident" id="6482678">i</span><span class="op" id="6482679">]</span><span class="op" id="6482680">,</span>&nbsp;<span class="ident" id="6482682">testWe</span><span class="op" id="6482688">[</span><span class="ident" id="6482689">i</span><span class="op" id="6482690">]</span><span class="op" id="6482691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482694">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482697">if</span>&nbsp;<span class="ident" id="6482700">i</span>&nbsp;<span class="op" id="6482702">:=</span>&nbsp;<span class="ident" id="6482705">compareFloat32Slices</span><span class="op" id="6482725">(</span><span class="ident" id="6482726">fe</span><span class="op" id="6482728">[</span><span class="num" id="6482729">0</span><span class="op" id="6482730">:</span><span class="op" id="6482731">]</span><span class="op" id="6482732">,</span>&nbsp;<span class="ident" id="6482734">testFe</span><span class="op" id="6482740">)</span><span class="op" id="6482741">;</span>&nbsp;<span class="ident" id="6482743">i</span>&nbsp;<span class="op" id="6482745">&gt;=</span>&nbsp;<span class="num" id="6482748">0</span>&nbsp;<span class="op" id="6482750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482754">t</span><span class="op" id="6482755">.</span><span class="ident" id="6482756">Errorf</span><span class="op" id="6482762">(</span><span class="string" id="6482763">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6482799">,</span>&nbsp;<span class="ident" id="6482801">i</span><span class="op" id="6482802">,</span>&nbsp;<span class="ident" id="6482804">fe</span><span class="op" id="6482806">[</span><span class="ident" id="6482807">i</span><span class="op" id="6482808">]</span><span class="op" id="6482809">,</span>&nbsp;<span class="ident" id="6482811">testFe</span><span class="op" id="6482817">[</span><span class="ident" id="6482818">i</span><span class="op" id="6482819">]</span><span class="op" id="6482820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6482823">}</span><br>
<span class="lineno"></span><span class="op" id="6482825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="6482828">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="6482900">func</span>&nbsp;<span class="ident" id="6482905">TestFloat32</span><span class="op" id="6482916">(</span><span class="ident" id="6482917">t</span>&nbsp;<span class="op" id="6482919">*</span><span class="ident" id="6482920">testing</span><span class="op" id="6482927">.</span><span class="ident" id="6482928">T</span><span class="op" id="6482929">)</span>&nbsp;<span class="op" id="6482931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482934">r</span>&nbsp;<span class="op" id="6482936">:=</span>&nbsp;<span class="ident" id="6482939">New</span><span class="op" id="6482942">(</span><span class="ident" id="6482943">NewSource</span><span class="op" id="6482952">(</span><span class="num" id="6482953">1</span><span class="op" id="6482954">)</span><span class="op" id="6482955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6482958">for</span>&nbsp;<span class="ident" id="6482962">ct</span>&nbsp;<span class="op" id="6482965">:=</span>&nbsp;<span class="num" id="6482968">0</span><span class="op" id="6482969">;</span>&nbsp;<span class="ident" id="6482971">ct</span>&nbsp;<span class="op" id="6482974">&lt;</span>&nbsp;<span class="num" id="6482976">10e6</span><span class="op" id="6482980">;</span>&nbsp;<span class="ident" id="6482982">ct</span><span class="op" id="6482984">++</span>&nbsp;<span class="op" id="6482987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6482991">f</span>&nbsp;<span class="op" id="6482993">:=</span>&nbsp;<span class="ident" id="6482996">r</span><span class="op" id="6482997">.</span><span class="ident" id="6482998">Float32</span><span class="op" id="6483005">(</span><span class="op" id="6483006">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483010">if</span>&nbsp;<span class="ident" id="6483013">f</span>&nbsp;<span class="op" id="6483015">&gt;=</span>&nbsp;<span class="num" id="6483018">1</span>&nbsp;<span class="op" id="6483020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483025">t</span><span class="op" id="6483026">.</span><span class="ident" id="6483027">Fatal</span><span class="op" id="6483032">(</span><span class="string" id="6483033">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="6483074">,</span>&nbsp;<span class="ident" id="6483076">ct</span><span class="op" id="6483078">,</span>&nbsp;<span class="string" id="6483080">&#34;f:&#34;</span><span class="op" id="6483084">,</span>&nbsp;<span class="ident" id="6483086">f</span><span class="op" id="6483087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483094">}</span><br>
<span class="lineno"></span><span class="op" id="6483096">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="6483099">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6483114">func</span>&nbsp;<span class="ident" id="6483119">BenchmarkInt63Threadsafe</span><span class="op" id="6483143">(</span><span class="ident" id="6483144">b</span>&nbsp;<span class="op" id="6483146">*</span><span class="ident" id="6483147">testing</span><span class="op" id="6483154">.</span><span class="ident" id="6483155">B</span><span class="op" id="6483156">)</span>&nbsp;<span class="op" id="6483158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483161">for</span>&nbsp;<span class="ident" id="6483165">n</span>&nbsp;<span class="op" id="6483167">:=</span>&nbsp;<span class="ident" id="6483170">b</span><span class="op" id="6483171">.</span><span class="ident" id="6483172">N</span><span class="op" id="6483173">;</span>&nbsp;<span class="ident" id="6483175">n</span>&nbsp;<span class="op" id="6483177">&gt;</span>&nbsp;<span class="num" id="6483179">0</span><span class="op" id="6483180">;</span>&nbsp;<span class="ident" id="6483182">n</span><span class="op" id="6483183">--</span>&nbsp;<span class="op" id="6483186">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483190">Int63</span><span class="op" id="6483195">(</span><span class="op" id="6483196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483199">}</span><br>
<span class="lineno"></span><span class="op" id="6483201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6483204">func</span>&nbsp;<span class="ident" id="6483209">BenchmarkInt63Unthreadsafe</span><span class="op" id="6483235">(</span><span class="ident" id="6483236">b</span>&nbsp;<span class="op" id="6483238">*</span><span class="ident" id="6483239">testing</span><span class="op" id="6483246">.</span><span class="ident" id="6483247">B</span><span class="op" id="6483248">)</span>&nbsp;<span class="op" id="6483250">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483253">r</span>&nbsp;<span class="op" id="6483255">:=</span>&nbsp;<span class="ident" id="6483258">New</span><span class="op" id="6483261">(</span><span class="ident" id="6483262">NewSource</span><span class="op" id="6483271">(</span><span class="num" id="6483272">1</span><span class="op" id="6483273">)</span><span class="op" id="6483274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483277">for</span>&nbsp;<span class="ident" id="6483281">n</span>&nbsp;<span class="op" id="6483283">:=</span>&nbsp;<span class="ident" id="6483286">b</span><span class="op" id="6483287">.</span><span class="ident" id="6483288">N</span><span class="op" id="6483289">;</span>&nbsp;<span class="ident" id="6483291">n</span>&nbsp;<span class="op" id="6483293">&gt;</span>&nbsp;<span class="num" id="6483295">0</span><span class="op" id="6483296">;</span>&nbsp;<span class="ident" id="6483298">n</span><span class="op" id="6483299">--</span>&nbsp;<span class="op" id="6483302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483306">r</span><span class="op" id="6483307">.</span><span class="ident" id="6483308">Int63</span><span class="op" id="6483313">(</span><span class="op" id="6483314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483317">}</span><br>
<span class="lineno"></span><span class="op" id="6483319">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="6483322">func</span>&nbsp;<span class="ident" id="6483327">BenchmarkIntn1000</span><span class="op" id="6483344">(</span><span class="ident" id="6483345">b</span>&nbsp;<span class="op" id="6483347">*</span><span class="ident" id="6483348">testing</span><span class="op" id="6483355">.</span><span class="ident" id="6483356">B</span><span class="op" id="6483357">)</span>&nbsp;<span class="op" id="6483359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483362">r</span>&nbsp;<span class="op" id="6483364">:=</span>&nbsp;<span class="ident" id="6483367">New</span><span class="op" id="6483370">(</span><span class="ident" id="6483371">NewSource</span><span class="op" id="6483380">(</span><span class="num" id="6483381">1</span><span class="op" id="6483382">)</span><span class="op" id="6483383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483386">for</span>&nbsp;<span class="ident" id="6483390">n</span>&nbsp;<span class="op" id="6483392">:=</span>&nbsp;<span class="ident" id="6483395">b</span><span class="op" id="6483396">.</span><span class="ident" id="6483397">N</span><span class="op" id="6483398">;</span>&nbsp;<span class="ident" id="6483400">n</span>&nbsp;<span class="op" id="6483402">&gt;</span>&nbsp;<span class="num" id="6483404">0</span><span class="op" id="6483405">;</span>&nbsp;<span class="ident" id="6483407">n</span><span class="op" id="6483408">--</span>&nbsp;<span class="op" id="6483411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483415">r</span><span class="op" id="6483416">.</span><span class="ident" id="6483417">Intn</span><span class="op" id="6483421">(</span><span class="num" id="6483422">1000</span><span class="op" id="6483426">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483429">}</span><br>
<span class="lineno"></span><span class="op" id="6483431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6483434">func</span>&nbsp;<span class="ident" id="6483439">BenchmarkInt63n1000</span><span class="op" id="6483458">(</span><span class="ident" id="6483459">b</span>&nbsp;<span class="op" id="6483461">*</span><span class="ident" id="6483462">testing</span><span class="op" id="6483469">.</span><span class="ident" id="6483470">B</span><span class="op" id="6483471">)</span>&nbsp;<span class="op" id="6483473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483476">r</span>&nbsp;<span class="op" id="6483478">:=</span>&nbsp;<span class="ident" id="6483481">New</span><span class="op" id="6483484">(</span><span class="ident" id="6483485">NewSource</span><span class="op" id="6483494">(</span><span class="num" id="6483495">1</span><span class="op" id="6483496">)</span><span class="op" id="6483497">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483500">for</span>&nbsp;<span class="ident" id="6483504">n</span>&nbsp;<span class="op" id="6483506">:=</span>&nbsp;<span class="ident" id="6483509">b</span><span class="op" id="6483510">.</span><span class="ident" id="6483511">N</span><span class="op" id="6483512">;</span>&nbsp;<span class="ident" id="6483514">n</span>&nbsp;<span class="op" id="6483516">&gt;</span>&nbsp;<span class="num" id="6483518">0</span><span class="op" id="6483519">;</span>&nbsp;<span class="ident" id="6483521">n</span><span class="op" id="6483522">--</span>&nbsp;<span class="op" id="6483525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483529">r</span><span class="op" id="6483530">.</span><span class="ident" id="6483531">Int63n</span><span class="op" id="6483537">(</span><span class="num" id="6483538">1000</span><span class="op" id="6483542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483545">}</span><br>
<span class="lineno"></span><span class="op" id="6483547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="6483550">func</span>&nbsp;<span class="ident" id="6483555">BenchmarkInt31n1000</span><span class="op" id="6483574">(</span><span class="ident" id="6483575">b</span>&nbsp;<span class="op" id="6483577">*</span><span class="ident" id="6483578">testing</span><span class="op" id="6483585">.</span><span class="ident" id="6483586">B</span><span class="op" id="6483587">)</span>&nbsp;<span class="op" id="6483589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483592">r</span>&nbsp;<span class="op" id="6483594">:=</span>&nbsp;<span class="ident" id="6483597">New</span><span class="op" id="6483600">(</span><span class="ident" id="6483601">NewSource</span><span class="op" id="6483610">(</span><span class="num" id="6483611">1</span><span class="op" id="6483612">)</span><span class="op" id="6483613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483616">for</span>&nbsp;<span class="ident" id="6483620">n</span>&nbsp;<span class="op" id="6483622">:=</span>&nbsp;<span class="ident" id="6483625">b</span><span class="op" id="6483626">.</span><span class="ident" id="6483627">N</span><span class="op" id="6483628">;</span>&nbsp;<span class="ident" id="6483630">n</span>&nbsp;<span class="op" id="6483632">&gt;</span>&nbsp;<span class="num" id="6483634">0</span><span class="op" id="6483635">;</span>&nbsp;<span class="ident" id="6483637">n</span><span class="op" id="6483638">--</span>&nbsp;<span class="op" id="6483641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483645">r</span><span class="op" id="6483646">.</span><span class="ident" id="6483647">Int31n</span><span class="op" id="6483653">(</span><span class="num" id="6483654">1000</span><span class="op" id="6483658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483661">}</span><br>
<span class="lineno">370</span><span class="op" id="6483663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6483666">func</span>&nbsp;<span class="ident" id="6483671">BenchmarkFloat32</span><span class="op" id="6483687">(</span><span class="ident" id="6483688">b</span>&nbsp;<span class="op" id="6483690">*</span><span class="ident" id="6483691">testing</span><span class="op" id="6483698">.</span><span class="ident" id="6483699">B</span><span class="op" id="6483700">)</span>&nbsp;<span class="op" id="6483702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483705">r</span>&nbsp;<span class="op" id="6483707">:=</span>&nbsp;<span class="ident" id="6483710">New</span><span class="op" id="6483713">(</span><span class="ident" id="6483714">NewSource</span><span class="op" id="6483723">(</span><span class="num" id="6483724">1</span><span class="op" id="6483725">)</span><span class="op" id="6483726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483729">for</span>&nbsp;<span class="ident" id="6483733">n</span>&nbsp;<span class="op" id="6483735">:=</span>&nbsp;<span class="ident" id="6483738">b</span><span class="op" id="6483739">.</span><span class="ident" id="6483740">N</span><span class="op" id="6483741">;</span>&nbsp;<span class="ident" id="6483743">n</span>&nbsp;<span class="op" id="6483745">&gt;</span>&nbsp;<span class="num" id="6483747">0</span><span class="op" id="6483748">;</span>&nbsp;<span class="ident" id="6483750">n</span><span class="op" id="6483751">--</span>&nbsp;<span class="op" id="6483754">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483758">r</span><span class="op" id="6483759">.</span><span class="ident" id="6483760">Float32</span><span class="op" id="6483767">(</span><span class="op" id="6483768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483771">}</span><br>
<span class="lineno"></span><span class="op" id="6483773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6483776">func</span>&nbsp;<span class="ident" id="6483781">BenchmarkFloat64</span><span class="op" id="6483797">(</span><span class="ident" id="6483798">b</span>&nbsp;<span class="op" id="6483800">*</span><span class="ident" id="6483801">testing</span><span class="op" id="6483808">.</span><span class="ident" id="6483809">B</span><span class="op" id="6483810">)</span>&nbsp;<span class="op" id="6483812">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483815">r</span>&nbsp;<span class="op" id="6483817">:=</span>&nbsp;<span class="ident" id="6483820">New</span><span class="op" id="6483823">(</span><span class="ident" id="6483824">NewSource</span><span class="op" id="6483833">(</span><span class="num" id="6483834">1</span><span class="op" id="6483835">)</span><span class="op" id="6483836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483839">for</span>&nbsp;<span class="ident" id="6483843">n</span>&nbsp;<span class="op" id="6483845">:=</span>&nbsp;<span class="ident" id="6483848">b</span><span class="op" id="6483849">.</span><span class="ident" id="6483850">N</span><span class="op" id="6483851">;</span>&nbsp;<span class="ident" id="6483853">n</span>&nbsp;<span class="op" id="6483855">&gt;</span>&nbsp;<span class="num" id="6483857">0</span><span class="op" id="6483858">;</span>&nbsp;<span class="ident" id="6483860">n</span><span class="op" id="6483861">--</span>&nbsp;<span class="op" id="6483864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483868">r</span><span class="op" id="6483869">.</span><span class="ident" id="6483870">Float64</span><span class="op" id="6483877">(</span><span class="op" id="6483878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483881">}</span><br>
<span class="lineno"></span><span class="op" id="6483883">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="6483886">func</span>&nbsp;<span class="ident" id="6483891">BenchmarkPerm3</span><span class="op" id="6483905">(</span><span class="ident" id="6483906">b</span>&nbsp;<span class="op" id="6483908">*</span><span class="ident" id="6483909">testing</span><span class="op" id="6483916">.</span><span class="ident" id="6483917">B</span><span class="op" id="6483918">)</span>&nbsp;<span class="op" id="6483920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483923">r</span>&nbsp;<span class="op" id="6483925">:=</span>&nbsp;<span class="ident" id="6483928">New</span><span class="op" id="6483931">(</span><span class="ident" id="6483932">NewSource</span><span class="op" id="6483941">(</span><span class="num" id="6483942">1</span><span class="op" id="6483943">)</span><span class="op" id="6483944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6483947">for</span>&nbsp;<span class="ident" id="6483951">n</span>&nbsp;<span class="op" id="6483953">:=</span>&nbsp;<span class="ident" id="6483956">b</span><span class="op" id="6483957">.</span><span class="ident" id="6483958">N</span><span class="op" id="6483959">;</span>&nbsp;<span class="ident" id="6483961">n</span>&nbsp;<span class="op" id="6483963">&gt;</span>&nbsp;<span class="num" id="6483965">0</span><span class="op" id="6483966">;</span>&nbsp;<span class="ident" id="6483968">n</span><span class="op" id="6483969">--</span>&nbsp;<span class="op" id="6483972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6483976">r</span><span class="op" id="6483977">.</span><span class="ident" id="6483978">Perm</span><span class="op" id="6483982">(</span><span class="num" id="6483983">3</span><span class="op" id="6483984">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6483987">}</span><br>
<span class="lineno"></span><span class="op" id="6483989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6483992">func</span>&nbsp;<span class="ident" id="6483997">BenchmarkPerm30</span><span class="op" id="6484012">(</span><span class="ident" id="6484013">b</span>&nbsp;<span class="op" id="6484015">*</span><span class="ident" id="6484016">testing</span><span class="op" id="6484023">.</span><span class="ident" id="6484024">B</span><span class="op" id="6484025">)</span>&nbsp;<span class="op" id="6484027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484030">r</span>&nbsp;<span class="op" id="6484032">:=</span>&nbsp;<span class="ident" id="6484035">New</span><span class="op" id="6484038">(</span><span class="ident" id="6484039">NewSource</span><span class="op" id="6484048">(</span><span class="num" id="6484049">1</span><span class="op" id="6484050">)</span><span class="op" id="6484051">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6484054">for</span>&nbsp;<span class="ident" id="6484058">n</span>&nbsp;<span class="op" id="6484060">:=</span>&nbsp;<span class="ident" id="6484063">b</span><span class="op" id="6484064">.</span><span class="ident" id="6484065">N</span><span class="op" id="6484066">;</span>&nbsp;<span class="ident" id="6484068">n</span>&nbsp;<span class="op" id="6484070">&gt;</span>&nbsp;<span class="num" id="6484072">0</span><span class="op" id="6484073">;</span>&nbsp;<span class="ident" id="6484075">n</span><span class="op" id="6484076">--</span>&nbsp;<span class="op" id="6484079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6484083">r</span><span class="op" id="6484084">.</span><span class="ident" id="6484085">Perm</span><span class="op" id="6484089">(</span><span class="num" id="6484090">30</span><span class="op" id="6484092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6484095">}</span><br>
<span class="lineno"></span><span class="op" id="6484097">}</span>
</div>
</body>
</html>
