<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5284573">package</span>&nbsp;<span class="ident" id="5284581">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5284588">import</span>&nbsp;<span class="op" id="5284595">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5284598">&#34;io&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5284604">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5284611">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5284616">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284619">//&nbsp;Console&nbsp;is&nbsp;a&nbsp;simple&nbsp;console&nbsp;that&nbsp;can&nbsp;output/input&nbsp;a&nbsp;single</span><br>
<span class="lineno">10</span><span class="comment" id="5284681">//&nbsp;byte&nbsp;at&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="keyword" id="5284699">type</span>&nbsp;<span class="ident" id="5284704">console</span>&nbsp;<span class="keyword" id="5284712">struct</span>&nbsp;<span class="op" id="5284719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284722">intBus</span>&nbsp;<span class="ident" id="5284729"><a href="/lonnie.io/e8vm/arch8/int_bus.go.html#5297167">intBus</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284737">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5284744">*</span><span class="ident" id="5284745"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284752">Core</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5284759">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284765">IntIn</span>&nbsp;&nbsp;<span class="builtintype" id="5284772">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284778">IntOut</span>&nbsp;<span class="builtintype" id="5284785">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284792">Output</span>&nbsp;<span class="ident" id="5284799"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284598">io</a></span><span class="op" id="5284801">.</span><span class="ident" id="5284802">Writer</span><br>
<span class="lineno">20</span><span class="op" id="5284809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5284812">//&nbsp;NewConsole&nbsp;creates&nbsp;a&nbsp;new&nbsp;simple&nbsp;console.</span><br>
<span class="lineno"></span><span class="keyword" id="5284856">func</span>&nbsp;<span class="ident" id="5284861">newConsole</span><span class="op" id="5284871">(</span><span class="ident" id="5284872">p</span>&nbsp;<span class="op" id="5284874">*</span><span class="ident" id="5284875"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><span class="op" id="5284879">,</span>&nbsp;<span class="ident" id="5284881">i</span>&nbsp;<span class="ident" id="5284883"><a href="/lonnie.io/e8vm/arch8/int_bus.go.html#5297167">intBus</a></span><span class="op" id="5284889">)</span>&nbsp;<span class="op" id="5284891">*</span><span class="ident" id="5284892"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284704">console</a></span>&nbsp;<span class="op" id="5284900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284903">ret</span>&nbsp;<span class="op" id="5284907">:=</span>&nbsp;<span class="builtinfunc" id="5284910">new</span><span class="op" id="5284913">(</span><span class="ident" id="5284914"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284704">console</a></span><span class="op" id="5284921">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284924"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><span class="op" id="5284927">.</span><span class="ident" id="5284928">intBus</span>&nbsp;<span class="op" id="5284935">=</span>&nbsp;<span class="ident" id="5284937"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284881">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284940"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><span class="op" id="5284943">.</span><span class="ident" id="5284944">p</span>&nbsp;<span class="op" id="5284946">=</span>&nbsp;<span class="ident" id="5284948"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284872">p</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284952"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><span class="op" id="5284955">.</span><span class="ident" id="5284956">Core</span>&nbsp;<span class="op" id="5284961">=</span>&nbsp;<span class="num" id="5284963">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284966"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><span class="op" id="5284969">.</span><span class="ident" id="5284970">IntIn</span>&nbsp;<span class="op" id="5284976">=</span>&nbsp;<span class="num" id="5284978">8</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284981"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><span class="op" id="5284984">.</span><span class="ident" id="5284985">IntOut</span>&nbsp;<span class="op" id="5284992">=</span>&nbsp;<span class="num" id="5284994">9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284998"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><span class="op" id="5285001">.</span><span class="ident" id="5285002">Output</span>&nbsp;<span class="op" id="5285009">=</span>&nbsp;<span class="ident" id="5285011"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284611">os</a></span><span class="op" id="5285013">.</span><span class="ident" id="5285014">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5285022">return</span>&nbsp;<span class="ident" id="5285029"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284903">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5285033">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5285036">var</span>&nbsp;<span class="ident" id="5285040">_</span>&nbsp;<span class="ident" id="5285042"><a href="/lonnie.io/e8vm/arch8/device.go.html#5290204">device</a></span>&nbsp;<span class="op" id="5285049">=</span>&nbsp;<span class="builtinfunc" id="5285051">new</span><span class="op" id="5285054">(</span><span class="ident" id="5285055"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284704">console</a></span><span class="op" id="5285062">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5285065">const</span>&nbsp;<span class="op" id="5285071">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285074">consoleBase</span>&nbsp;<span class="op" id="5285086">=</span>&nbsp;<span class="num" id="5285088">0</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285092">consoleOut</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5285108">=</span>&nbsp;<span class="ident" id="5285110"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285074">consoleBase</a></span>&nbsp;<span class="op" id="5285122">+</span>&nbsp;<span class="num" id="5285124">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285127">consoleOutValid</span>&nbsp;<span class="op" id="5285143">=</span>&nbsp;<span class="ident" id="5285145"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285074">consoleBase</a></span>&nbsp;<span class="op" id="5285157">+</span>&nbsp;<span class="num" id="5285159">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285162">consoleIn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5285178">=</span>&nbsp;<span class="ident" id="5285180"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285074">consoleBase</a></span>&nbsp;<span class="op" id="5285192">+</span>&nbsp;<span class="num" id="5285194">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285197">consoleInValid</span>&nbsp;&nbsp;<span class="op" id="5285213">=</span>&nbsp;<span class="ident" id="5285215"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285074">consoleBase</a></span>&nbsp;<span class="op" id="5285227">+</span>&nbsp;<span class="num" id="5285229">3</span><br>
<span class="lineno">45</span><span class="op" id="5285231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5285234">func</span>&nbsp;<span class="op" id="5285239">(</span><span class="ident" id="5285240">c</span>&nbsp;<span class="op" id="5285242">*</span><span class="ident" id="5285243"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284704">console</a></span><span class="op" id="5285250">)</span>&nbsp;<span class="ident" id="5285252">interrupt</span><span class="op" id="5285261">(</span><span class="ident" id="5285262">code</span>&nbsp;<span class="builtintype" id="5285267">byte</span><span class="op" id="5285271">)</span>&nbsp;<span class="op" id="5285273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285276"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285240">c</a></span><span class="op" id="5285277">.</span><span class="ident" id="5285278">intBus</span><span class="op" id="5285284">.</span><span class="ident" id="5285285">Interrupt</span><span class="op" id="5285294">(</span><span class="ident" id="5285295"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285262">code</a></span><span class="op" id="5285299">,</span>&nbsp;<span class="ident" id="5285301"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285240">c</a></span><span class="op" id="5285302">.</span><span class="ident" id="5285303">Core</span><span class="op" id="5285307">)</span><br>
<span class="lineno"></span><span class="op" id="5285309">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="5285312">//&nbsp;Tick&nbsp;flushes&nbsp;the&nbsp;buffered&nbsp;byte&nbsp;to&nbsp;the&nbsp;console.</span><br>
<span class="lineno"></span><span class="keyword" id="5285362">func</span>&nbsp;<span class="op" id="5285367">(</span><span class="ident" id="5285368">c</span>&nbsp;<span class="op" id="5285370">*</span><span class="ident" id="5285371"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284704">console</a></span><span class="op" id="5285378">)</span>&nbsp;<span class="ident" id="5285380">Tick</span><span class="op" id="5285384">(</span><span class="op" id="5285385">)</span>&nbsp;<span class="op" id="5285387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285390">outValid</span>&nbsp;<span class="op" id="5285399">:=</span>&nbsp;<span class="ident" id="5285402"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285368">c</a></span><span class="op" id="5285403">.</span><span class="ident" id="5285404">p</span><span class="op" id="5285405">.</span><span class="ident" id="5285406">ReadByte</span><span class="op" id="5285414">(</span><span class="ident" id="5285415"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285127">consoleOutValid</a></span><span class="op" id="5285430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5285433">if</span>&nbsp;<span class="ident" id="5285436"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285390">outValid</a></span>&nbsp;<span class="op" id="5285445">!=</span>&nbsp;<span class="num" id="5285448">0</span>&nbsp;<span class="op" id="5285450">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285454">out</span>&nbsp;<span class="op" id="5285458">:=</span>&nbsp;<span class="ident" id="5285461"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285368">c</a></span><span class="op" id="5285462">.</span><span class="ident" id="5285463">p</span><span class="op" id="5285464">.</span><span class="ident" id="5285465">ReadByte</span><span class="op" id="5285473">(</span><span class="ident" id="5285474"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285092">consoleOut</a></span><span class="op" id="5285484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285488">_</span><span class="op" id="5285489">,</span>&nbsp;<span class="ident" id="5285491">e</span>&nbsp;<span class="op" id="5285493">:=</span>&nbsp;<span class="ident" id="5285496"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285368">c</a></span><span class="op" id="5285497">.</span><span class="ident" id="5285498">Output</span><span class="op" id="5285504">.</span><span class="ident" id="5285505">Write</span><span class="op" id="5285510">(</span><span class="op" id="5285511">[</span><span class="op" id="5285512">]</span><span class="builtintype" id="5285513">byte</span><span class="op" id="5285517">{</span><span class="ident" id="5285518"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285454">out</a></span><span class="op" id="5285521">}</span><span class="op" id="5285522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5285526">if</span>&nbsp;<span class="ident" id="5285529"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285491">e</a></span>&nbsp;<span class="op" id="5285531">!=</span>&nbsp;<span class="ident" id="5285534">nil</span>&nbsp;<span class="op" id="5285538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285543"><a href="/lonnie.io/e8vm/arch8/console.go.html#5284604">log</a></span><span class="op" id="5285546">.</span><span class="ident" id="5285547">Print</span><span class="op" id="5285552">(</span><span class="ident" id="5285553"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285491">e</a></span><span class="op" id="5285554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5285558">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285562"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285368">c</a></span><span class="op" id="5285563">.</span><span class="ident" id="5285564">p</span><span class="op" id="5285565">.</span><span class="ident" id="5285566">WriteByte</span><span class="op" id="5285575">(</span><span class="ident" id="5285576"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285127">consoleOutValid</a></span><span class="op" id="5285591">,</span>&nbsp;<span class="num" id="5285593">0</span><span class="op" id="5285594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5285598"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285368">c</a></span><span class="op" id="5285599">.</span><span class="ident" id="5285600">interrupt</span><span class="op" id="5285609">(</span><span class="ident" id="5285610"><a href="/lonnie.io/e8vm/arch8/console.go.html#5285368">c</a></span><span class="op" id="5285611">.</span><span class="ident" id="5285612">IntOut</span><span class="op" id="5285618">)</span>&nbsp;<span class="comment" id="5285620">//&nbsp;out&nbsp;available</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5285638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5285642">//&nbsp;TODO:&nbsp;input&nbsp;part</span><br>
<span class="lineno">65</span><span class="op" id="5285662">}</span>
</div>
</body>
</html>
