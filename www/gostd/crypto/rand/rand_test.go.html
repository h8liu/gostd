<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7580130">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7580186">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7580240">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7580291">package</span>&nbsp;<span class="ident" id="7580299">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7580305">import</span>&nbsp;<span class="op" id="7580312">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7580315">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7580324">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7580342">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7580348">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7580358">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7580361">func</span>&nbsp;<span class="ident" id="7580366">TestRead</span><span class="op" id="7580374">(</span><span class="ident" id="7580375">t</span>&nbsp;<span class="op" id="7580377">*</span><span class="ident" id="7580378"><a href="/gostd/crypto/rand/rand_test.go.html#7580348">testing</a></span><span class="op" id="7580385">.</span><span class="ident" id="7580386"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7580387">)</span>&nbsp;<span class="op" id="7580389">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580392">var</span>&nbsp;<span class="ident" id="7580396">n</span>&nbsp;<span class="builtintype" id="7580398">int</span>&nbsp;<span class="op" id="7580402">=</span>&nbsp;<span class="num" id="7580404">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580409">if</span>&nbsp;<span class="ident" id="7580412"><a href="/gostd/crypto/rand/rand_test.go.html#7580348">testing</a></span><span class="op" id="7580419">.</span><span class="ident" id="7580420"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7580425">(</span><span class="op" id="7580426">)</span>&nbsp;<span class="op" id="7580428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580432"><a href="/gostd/crypto/rand/rand_test.go.html#7580396">n</a></span>&nbsp;<span class="op" id="7580434">=</span>&nbsp;<span class="num" id="7580436">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7580441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580444">b</span>&nbsp;<span class="op" id="7580446">:=</span>&nbsp;<span class="builtinfunc" id="7580449">make</span><span class="op" id="7580453">(</span><span class="op" id="7580454">[</span><span class="op" id="7580455">]</span><span class="builtintype" id="7580456">byte</span><span class="op" id="7580460">,</span>&nbsp;<span class="ident" id="7580462"><a href="/gostd/crypto/rand/rand_test.go.html#7580396">n</a></span><span class="op" id="7580463">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580466"><a href="/gostd/crypto/rand/rand_test.go.html#7580396">n</a></span><span class="op" id="7580467">,</span>&nbsp;<span class="ident" id="7580469">err</span>&nbsp;<span class="op" id="7580473">:=</span>&nbsp;<span class="ident" id="7580476"><a href="/gostd/crypto/rand/rand_test.go.html#7580342">io</a></span><span class="op" id="7580478">.</span><span class="ident" id="7580479"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="7580487">(</span><span class="ident" id="7580488"><a href="/gostd/crypto/rand/rand.go.html#4355686">Reader</a></span><span class="op" id="7580494">,</span>&nbsp;<span class="ident" id="7580496"><a href="/gostd/crypto/rand/rand_test.go.html#7580444">b</a></span><span class="op" id="7580497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580500">if</span>&nbsp;<span class="ident" id="7580503"><a href="/gostd/crypto/rand/rand_test.go.html#7580396">n</a></span>&nbsp;<span class="op" id="7580505">!=</span>&nbsp;<span class="builtinfunc" id="7580508">len</span><span class="op" id="7580511">(</span><span class="ident" id="7580512"><a href="/gostd/crypto/rand/rand_test.go.html#7580444">b</a></span><span class="op" id="7580513">)</span>&nbsp;<span class="op" id="7580515">||</span>&nbsp;<span class="ident" id="7580518"><a href="/gostd/crypto/rand/rand_test.go.html#7580469">err</a></span>&nbsp;<span class="op" id="7580522">!=</span>&nbsp;<span class="builtintype" id="7580525">nil</span>&nbsp;<span class="op" id="7580529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580533"><a href="/gostd/crypto/rand/rand_test.go.html#7580375">t</a></span><span class="op" id="7580534">.</span><span class="ident" id="7580535"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7580541">(</span><span class="string" id="7580542">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7580566">,</span>&nbsp;<span class="ident" id="7580568"><a href="/gostd/crypto/rand/rand_test.go.html#7580396">n</a></span><span class="op" id="7580569">,</span>&nbsp;<span class="ident" id="7580571"><a href="/gostd/crypto/rand/rand_test.go.html#7580469">err</a></span><span class="op" id="7580574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7580577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580581">var</span>&nbsp;<span class="ident" id="7580585">z</span>&nbsp;<span class="ident" id="7580587"><a href="/gostd/crypto/rand/rand_test.go.html#7580315">bytes</a></span><span class="op" id="7580592">.</span><span class="ident" id="7580593"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580601">f</span><span class="op" id="7580602">,</span>&nbsp;<span class="ident" id="7580604">_</span>&nbsp;<span class="op" id="7580606">:=</span>&nbsp;<span class="ident" id="7580609"><a href="/gostd/crypto/rand/rand_test.go.html#7580324">flate</a></span><span class="op" id="7580614">.</span><span class="ident" id="7580615"><a href="/gostd/compress/flate/deflate.go.html#4804908">NewWriter</a></span><span class="op" id="7580624">(</span><span class="op" id="7580625">&amp;</span><span class="ident" id="7580626"><a href="/gostd/crypto/rand/rand_test.go.html#7580585">z</a></span><span class="op" id="7580627">,</span>&nbsp;<span class="num" id="7580629">5</span><span class="op" id="7580630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580633"><a href="/gostd/crypto/rand/rand_test.go.html#7580601">f</a></span><span class="op" id="7580634">.</span><span class="ident" id="7580635"><a href="/gostd/compress/flate/deflate.go.html#4806202">Write</a></span><span class="op" id="7580640">(</span><span class="ident" id="7580641"><a href="/gostd/crypto/rand/rand_test.go.html#7580444">b</a></span><span class="op" id="7580642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580645"><a href="/gostd/crypto/rand/rand_test.go.html#7580601">f</a></span><span class="op" id="7580646">.</span><span class="ident" id="7580647"><a href="/gostd/compress/flate/deflate.go.html#4806882">Close</a></span><span class="op" id="7580652">(</span><span class="op" id="7580653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580656">if</span>&nbsp;<span class="ident" id="7580659"><a href="/gostd/crypto/rand/rand_test.go.html#7580585">z</a></span><span class="op" id="7580660">.</span><span class="ident" id="7580661"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7580664">(</span><span class="op" id="7580665">)</span>&nbsp;<span class="op" id="7580667">&lt;</span>&nbsp;<span class="builtinfunc" id="7580669">len</span><span class="op" id="7580672">(</span><span class="ident" id="7580673"><a href="/gostd/crypto/rand/rand_test.go.html#7580444">b</a></span><span class="op" id="7580674">)</span><span class="op" id="7580675">*</span><span class="num" id="7580676">99</span><span class="op" id="7580678">/</span><span class="num" id="7580679">100</span>&nbsp;<span class="op" id="7580683">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580687"><a href="/gostd/crypto/rand/rand_test.go.html#7580375">t</a></span><span class="op" id="7580688">.</span><span class="ident" id="7580689"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7580695">(</span><span class="string" id="7580696">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="7580717">,</span>&nbsp;<span class="builtinfunc" id="7580719">len</span><span class="op" id="7580722">(</span><span class="ident" id="7580723"><a href="/gostd/crypto/rand/rand_test.go.html#7580444">b</a></span><span class="op" id="7580724">)</span><span class="op" id="7580725">,</span>&nbsp;<span class="ident" id="7580727"><a href="/gostd/crypto/rand/rand_test.go.html#7580585">z</a></span><span class="op" id="7580728">.</span><span class="ident" id="7580729"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="7580732">(</span><span class="op" id="7580733">)</span><span class="op" id="7580734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7580737">}</span><br>
<span class="lineno"></span><span class="op" id="7580739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7580742">func</span>&nbsp;<span class="ident" id="7580747">TestReadEmpty</span><span class="op" id="7580760">(</span><span class="ident" id="7580761">t</span>&nbsp;<span class="op" id="7580763">*</span><span class="ident" id="7580764"><a href="/gostd/crypto/rand/rand_test.go.html#7580348">testing</a></span><span class="op" id="7580771">.</span><span class="ident" id="7580772"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7580773">)</span>&nbsp;<span class="op" id="7580775">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580778">n</span><span class="op" id="7580779">,</span>&nbsp;<span class="ident" id="7580781">err</span>&nbsp;<span class="op" id="7580785">:=</span>&nbsp;<span class="ident" id="7580788"><a href="/gostd/crypto/rand/rand.go.html#4355686">Reader</a></span><span class="op" id="7580794">.</span><span class="ident" id="7580795"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7580799">(</span><span class="builtinfunc" id="7580800">make</span><span class="op" id="7580804">(</span><span class="op" id="7580805">[</span><span class="op" id="7580806">]</span><span class="builtintype" id="7580807">byte</span><span class="op" id="7580811">,</span>&nbsp;<span class="num" id="7580813">0</span><span class="op" id="7580814">)</span><span class="op" id="7580815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580818">if</span>&nbsp;<span class="ident" id="7580821"><a href="/gostd/crypto/rand/rand_test.go.html#7580778">n</a></span>&nbsp;<span class="op" id="7580823">!=</span>&nbsp;<span class="num" id="7580826">0</span>&nbsp;<span class="op" id="7580828">||</span>&nbsp;<span class="ident" id="7580831"><a href="/gostd/crypto/rand/rand_test.go.html#7580781">err</a></span>&nbsp;<span class="op" id="7580835">!=</span>&nbsp;<span class="builtintype" id="7580838">nil</span>&nbsp;<span class="op" id="7580842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580846"><a href="/gostd/crypto/rand/rand_test.go.html#7580761">t</a></span><span class="op" id="7580847">.</span><span class="ident" id="7580848"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7580854">(</span><span class="string" id="7580855">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7580887">,</span>&nbsp;<span class="ident" id="7580889"><a href="/gostd/crypto/rand/rand_test.go.html#7580778">n</a></span><span class="op" id="7580890">,</span>&nbsp;<span class="ident" id="7580892"><a href="/gostd/crypto/rand/rand_test.go.html#7580781">err</a></span><span class="op" id="7580895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7580898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580901"><a href="/gostd/crypto/rand/rand_test.go.html#7580778">n</a></span><span class="op" id="7580902">,</span>&nbsp;<span class="ident" id="7580904"><a href="/gostd/crypto/rand/rand_test.go.html#7580781">err</a></span>&nbsp;<span class="op" id="7580908">=</span>&nbsp;<span class="ident" id="7580910"><a href="/gostd/crypto/rand/rand.go.html#4355686">Reader</a></span><span class="op" id="7580916">.</span><span class="ident" id="7580917"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7580921">(</span><span class="builtintype" id="7580922">nil</span><span class="op" id="7580925">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7580928">if</span>&nbsp;<span class="ident" id="7580931"><a href="/gostd/crypto/rand/rand_test.go.html#7580778">n</a></span>&nbsp;<span class="op" id="7580933">!=</span>&nbsp;<span class="num" id="7580936">0</span>&nbsp;<span class="op" id="7580938">||</span>&nbsp;<span class="ident" id="7580941"><a href="/gostd/crypto/rand/rand_test.go.html#7580781">err</a></span>&nbsp;<span class="op" id="7580945">!=</span>&nbsp;<span class="builtintype" id="7580948">nil</span>&nbsp;<span class="op" id="7580952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7580956"><a href="/gostd/crypto/rand/rand_test.go.html#7580761">t</a></span><span class="op" id="7580957">.</span><span class="ident" id="7580958"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7580964">(</span><span class="string" id="7580965">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7580985">,</span>&nbsp;<span class="ident" id="7580987"><a href="/gostd/crypto/rand/rand_test.go.html#7580778">n</a></span><span class="op" id="7580988">,</span>&nbsp;<span class="ident" id="7580990"><a href="/gostd/crypto/rand/rand_test.go.html#7580781">err</a></span><span class="op" id="7580993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7580996">}</span><br>
<span class="lineno"></span><span class="op" id="7580998">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
