<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7736626">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7736682">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7736736">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7736787">package</span>&nbsp;<span class="ident" id="7736795">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736802">import</span>&nbsp;<span class="op" id="7736809">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736812">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736818">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736824">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736841">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736852">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736863">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7736874">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7736884">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7736887">func</span>&nbsp;<span class="ident" id="7736892">TestMatch</span><span class="op" id="7736901">(</span><span class="ident" id="7736902">t</span>&nbsp;<span class="op" id="7736904">*</span><span class="ident" id="7736905"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7736912">.</span><span class="ident" id="7736913">T</span><span class="op" id="7736914">)</span>&nbsp;<span class="op" id="7736916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736919">ctxt</span>&nbsp;<span class="op" id="7736924">:=</span>&nbsp;<span class="ident" id="7736927"><a href="/go/build/build.go.html#6433773">Default</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736936">what</span>&nbsp;<span class="op" id="7736941">:=</span>&nbsp;<span class="string" id="7736944">&#34;default&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7736955">match</span>&nbsp;<span class="op" id="7736961">:=</span>&nbsp;<span class="keyword" id="7736964">func</span><span class="op" id="7736968">(</span><span class="ident" id="7736969">tag</span>&nbsp;<span class="builtintype" id="7736973">string</span><span class="op" id="7736979">,</span>&nbsp;<span class="ident" id="7736981">want</span>&nbsp;<span class="keyword" id="7736986">map</span><span class="op" id="7736989">[</span><span class="builtintype" id="7736990">string</span><span class="op" id="7736996">]</span><span class="builtintype" id="7736997">bool</span><span class="op" id="7737001">)</span>&nbsp;<span class="op" id="7737003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737007">m</span>&nbsp;<span class="op" id="7737009">:=</span>&nbsp;<span class="builtinfunc" id="7737012">make</span><span class="op" id="7737016">(</span><span class="keyword" id="7737017">map</span><span class="op" id="7737020">[</span><span class="builtintype" id="7737021">string</span><span class="op" id="7737027">]</span><span class="builtintype" id="7737028">bool</span><span class="op" id="7737032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737036">if</span>&nbsp;<span class="op" id="7737039">!</span><span class="ident" id="7737040"><a href="/go/build/build_test.go.html#7736919">ctxt</a></span><span class="op" id="7737044">.</span><span class="ident" id="7737045">match</span><span class="op" id="7737050">(</span><span class="ident" id="7737051"><a href="/go/build/build_test.go.html#7736969">tag</a></span><span class="op" id="7737054">,</span>&nbsp;<span class="ident" id="7737056"><a href="/go/build/build_test.go.html#7737007">m</a></span><span class="op" id="7737057">)</span>&nbsp;<span class="op" id="7737059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737064"><a href="/go/build/build_test.go.html#7736902">t</a></span><span class="op" id="7737065">.</span><span class="ident" id="7737066">Errorf</span><span class="op" id="7737072">(</span><span class="string" id="7737073">&#34;%s&nbsp;context&nbsp;should&nbsp;match&nbsp;%s,&nbsp;does&nbsp;not&#34;</span><span class="op" id="7737111">,</span>&nbsp;<span class="ident" id="7737113"><a href="/go/build/build_test.go.html#7736936">what</a></span><span class="op" id="7737117">,</span>&nbsp;<span class="ident" id="7737119"><a href="/go/build/build_test.go.html#7736969">tag</a></span><span class="op" id="7737122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737126">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737130">if</span>&nbsp;<span class="op" id="7737133">!</span><span class="ident" id="7737134"><a href="/go/build/build_test.go.html#7736841">reflect</a></span><span class="op" id="7737141">.</span><span class="ident" id="7737142">DeepEqual</span><span class="op" id="7737151">(</span><span class="ident" id="7737152"><a href="/go/build/build_test.go.html#7737007">m</a></span><span class="op" id="7737153">,</span>&nbsp;<span class="ident" id="7737155"><a href="/go/build/build_test.go.html#7736981">want</a></span><span class="op" id="7737159">)</span>&nbsp;<span class="op" id="7737161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737166"><a href="/go/build/build_test.go.html#7736902">t</a></span><span class="op" id="7737167">.</span><span class="ident" id="7737168">Errorf</span><span class="op" id="7737174">(</span><span class="string" id="7737175">&#34;%s&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7737198">,</span>&nbsp;<span class="ident" id="7737200"><a href="/go/build/build_test.go.html#7736969">tag</a></span><span class="op" id="7737203">,</span>&nbsp;<span class="ident" id="7737205"><a href="/go/build/build_test.go.html#7737007">m</a></span><span class="op" id="7737206">,</span>&nbsp;<span class="ident" id="7737208"><a href="/go/build/build_test.go.html#7736981">want</a></span><span class="op" id="7737212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737222">nomatch</span>&nbsp;<span class="op" id="7737230">:=</span>&nbsp;<span class="keyword" id="7737233">func</span><span class="op" id="7737237">(</span><span class="ident" id="7737238">tag</span>&nbsp;<span class="builtintype" id="7737242">string</span><span class="op" id="7737248">,</span>&nbsp;<span class="ident" id="7737250">want</span>&nbsp;<span class="keyword" id="7737255">map</span><span class="op" id="7737258">[</span><span class="builtintype" id="7737259">string</span><span class="op" id="7737265">]</span><span class="builtintype" id="7737266">bool</span><span class="op" id="7737270">)</span>&nbsp;<span class="op" id="7737272">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737276">m</span>&nbsp;<span class="op" id="7737278">:=</span>&nbsp;<span class="builtinfunc" id="7737281">make</span><span class="op" id="7737285">(</span><span class="keyword" id="7737286">map</span><span class="op" id="7737289">[</span><span class="builtintype" id="7737290">string</span><span class="op" id="7737296">]</span><span class="builtintype" id="7737297">bool</span><span class="op" id="7737301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737305">if</span>&nbsp;<span class="ident" id="7737308"><a href="/go/build/build_test.go.html#7736919">ctxt</a></span><span class="op" id="7737312">.</span><span class="ident" id="7737313">match</span><span class="op" id="7737318">(</span><span class="ident" id="7737319"><a href="/go/build/build_test.go.html#7737238">tag</a></span><span class="op" id="7737322">,</span>&nbsp;<span class="ident" id="7737324"><a href="/go/build/build_test.go.html#7737276">m</a></span><span class="op" id="7737325">)</span>&nbsp;<span class="op" id="7737327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737332"><a href="/go/build/build_test.go.html#7736902">t</a></span><span class="op" id="7737333">.</span><span class="ident" id="7737334">Errorf</span><span class="op" id="7737340">(</span><span class="string" id="7737341">&#34;%s&nbsp;context&nbsp;should&nbsp;NOT&nbsp;match&nbsp;%s,&nbsp;does&#34;</span><span class="op" id="7737379">,</span>&nbsp;<span class="ident" id="7737381"><a href="/go/build/build_test.go.html#7736936">what</a></span><span class="op" id="7737385">,</span>&nbsp;<span class="ident" id="7737387"><a href="/go/build/build_test.go.html#7737238">tag</a></span><span class="op" id="7737390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7737398">if</span>&nbsp;<span class="op" id="7737401">!</span><span class="ident" id="7737402"><a href="/go/build/build_test.go.html#7736841">reflect</a></span><span class="op" id="7737409">.</span><span class="ident" id="7737410">DeepEqual</span><span class="op" id="7737419">(</span><span class="ident" id="7737420"><a href="/go/build/build_test.go.html#7737276">m</a></span><span class="op" id="7737421">,</span>&nbsp;<span class="ident" id="7737423"><a href="/go/build/build_test.go.html#7737250">want</a></span><span class="op" id="7737427">)</span>&nbsp;<span class="op" id="7737429">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737434"><a href="/go/build/build_test.go.html#7736902">t</a></span><span class="op" id="7737435">.</span><span class="ident" id="7737436">Errorf</span><span class="op" id="7737442">(</span><span class="string" id="7737443">&#34;%s&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7737466">,</span>&nbsp;<span class="ident" id="7737468"><a href="/go/build/build_test.go.html#7737238">tag</a></span><span class="op" id="7737471">,</span>&nbsp;<span class="ident" id="7737473"><a href="/go/build/build_test.go.html#7737276">m</a></span><span class="op" id="7737474">,</span>&nbsp;<span class="ident" id="7737476"><a href="/go/build/build_test.go.html#7737250">want</a></span><span class="op" id="7737480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7737487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737491"><a href="/go/build/build_test.go.html#7736955">match</a></span><span class="op" id="7737496">(</span><span class="ident" id="7737497"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737504">.</span><span class="ident" id="7737505">GOOS</span><span class="op" id="7737509">+</span><span class="string" id="7737510">&#34;,&#34;</span><span class="op" id="7737513">+</span><span class="ident" id="7737514"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737521">.</span><span class="ident" id="7737522">GOARCH</span><span class="op" id="7737528">,</span>&nbsp;<span class="keyword" id="7737530">map</span><span class="op" id="7737533">[</span><span class="builtintype" id="7737534">string</span><span class="op" id="7737540">]</span><span class="builtintype" id="7737541">bool</span><span class="op" id="7737545">{</span><span class="ident" id="7737546"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737553">.</span><span class="ident" id="7737554">GOOS</span><span class="op" id="7737558">:</span>&nbsp;<span class="builtintype" id="7737560">true</span><span class="op" id="7737564">,</span>&nbsp;<span class="ident" id="7737566"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737573">.</span><span class="ident" id="7737574">GOARCH</span><span class="op" id="7737580">:</span>&nbsp;<span class="builtintype" id="7737582">true</span><span class="op" id="7737586">}</span><span class="op" id="7737587">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737590"><a href="/go/build/build_test.go.html#7736955">match</a></span><span class="op" id="7737595">(</span><span class="ident" id="7737596"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737603">.</span><span class="ident" id="7737604">GOOS</span><span class="op" id="7737608">+</span><span class="string" id="7737609">&#34;,&#34;</span><span class="op" id="7737612">+</span><span class="ident" id="7737613"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737620">.</span><span class="ident" id="7737621">GOARCH</span><span class="op" id="7737627">+</span><span class="string" id="7737628">&#34;,!foo&#34;</span><span class="op" id="7737635">,</span>&nbsp;<span class="keyword" id="7737637">map</span><span class="op" id="7737640">[</span><span class="builtintype" id="7737641">string</span><span class="op" id="7737647">]</span><span class="builtintype" id="7737648">bool</span><span class="op" id="7737652">{</span><span class="ident" id="7737653"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737660">.</span><span class="ident" id="7737661">GOOS</span><span class="op" id="7737665">:</span>&nbsp;<span class="builtintype" id="7737667">true</span><span class="op" id="7737671">,</span>&nbsp;<span class="ident" id="7737673"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737680">.</span><span class="ident" id="7737681">GOARCH</span><span class="op" id="7737687">:</span>&nbsp;<span class="builtintype" id="7737689">true</span><span class="op" id="7737693">,</span>&nbsp;<span class="string" id="7737695">&#34;foo&#34;</span><span class="op" id="7737700">:</span>&nbsp;<span class="builtintype" id="7737702">true</span><span class="op" id="7737706">}</span><span class="op" id="7737707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737710"><a href="/go/build/build_test.go.html#7737222">nomatch</a></span><span class="op" id="7737717">(</span><span class="ident" id="7737718"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737725">.</span><span class="ident" id="7737726">GOOS</span><span class="op" id="7737730">+</span><span class="string" id="7737731">&#34;,&#34;</span><span class="op" id="7737734">+</span><span class="ident" id="7737735"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737742">.</span><span class="ident" id="7737743">GOARCH</span><span class="op" id="7737749">+</span><span class="string" id="7737750">&#34;,foo&#34;</span><span class="op" id="7737756">,</span>&nbsp;<span class="keyword" id="7737758">map</span><span class="op" id="7737761">[</span><span class="builtintype" id="7737762">string</span><span class="op" id="7737768">]</span><span class="builtintype" id="7737769">bool</span><span class="op" id="7737773">{</span><span class="ident" id="7737774"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737781">.</span><span class="ident" id="7737782">GOOS</span><span class="op" id="7737786">:</span>&nbsp;<span class="builtintype" id="7737788">true</span><span class="op" id="7737792">,</span>&nbsp;<span class="ident" id="7737794"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737801">.</span><span class="ident" id="7737802">GOARCH</span><span class="op" id="7737808">:</span>&nbsp;<span class="builtintype" id="7737810">true</span><span class="op" id="7737814">,</span>&nbsp;<span class="string" id="7737816">&#34;foo&#34;</span><span class="op" id="7737821">:</span>&nbsp;<span class="builtintype" id="7737823">true</span><span class="op" id="7737827">}</span><span class="op" id="7737828">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737832"><a href="/go/build/build_test.go.html#7736936">what</a></span>&nbsp;<span class="op" id="7737837">=</span>&nbsp;<span class="string" id="7737839">&#34;modified&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737851"><a href="/go/build/build_test.go.html#7736919">ctxt</a></span><span class="op" id="7737855">.</span><span class="ident" id="7737856">BuildTags</span>&nbsp;<span class="op" id="7737866">=</span>&nbsp;<span class="op" id="7737868">[</span><span class="op" id="7737869">]</span><span class="builtintype" id="7737870">string</span><span class="op" id="7737876">{</span><span class="string" id="7737877">&#34;foo&#34;</span><span class="op" id="7737882">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737885"><a href="/go/build/build_test.go.html#7736955">match</a></span><span class="op" id="7737890">(</span><span class="ident" id="7737891"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737898">.</span><span class="ident" id="7737899">GOOS</span><span class="op" id="7737903">+</span><span class="string" id="7737904">&#34;,&#34;</span><span class="op" id="7737907">+</span><span class="ident" id="7737908"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737915">.</span><span class="ident" id="7737916">GOARCH</span><span class="op" id="7737922">,</span>&nbsp;<span class="keyword" id="7737924">map</span><span class="op" id="7737927">[</span><span class="builtintype" id="7737928">string</span><span class="op" id="7737934">]</span><span class="builtintype" id="7737935">bool</span><span class="op" id="7737939">{</span><span class="ident" id="7737940"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737947">.</span><span class="ident" id="7737948">GOOS</span><span class="op" id="7737952">:</span>&nbsp;<span class="builtintype" id="7737954">true</span><span class="op" id="7737958">,</span>&nbsp;<span class="ident" id="7737960"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737967">.</span><span class="ident" id="7737968">GOARCH</span><span class="op" id="7737974">:</span>&nbsp;<span class="builtintype" id="7737976">true</span><span class="op" id="7737980">}</span><span class="op" id="7737981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7737984"><a href="/go/build/build_test.go.html#7736955">match</a></span><span class="op" id="7737989">(</span><span class="ident" id="7737990"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7737997">.</span><span class="ident" id="7737998">GOOS</span><span class="op" id="7738002">+</span><span class="string" id="7738003">&#34;,&#34;</span><span class="op" id="7738006">+</span><span class="ident" id="7738007"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738014">.</span><span class="ident" id="7738015">GOARCH</span><span class="op" id="7738021">+</span><span class="string" id="7738022">&#34;,foo&#34;</span><span class="op" id="7738028">,</span>&nbsp;<span class="keyword" id="7738030">map</span><span class="op" id="7738033">[</span><span class="builtintype" id="7738034">string</span><span class="op" id="7738040">]</span><span class="builtintype" id="7738041">bool</span><span class="op" id="7738045">{</span><span class="ident" id="7738046"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738053">.</span><span class="ident" id="7738054">GOOS</span><span class="op" id="7738058">:</span>&nbsp;<span class="builtintype" id="7738060">true</span><span class="op" id="7738064">,</span>&nbsp;<span class="ident" id="7738066"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738073">.</span><span class="ident" id="7738074">GOARCH</span><span class="op" id="7738080">:</span>&nbsp;<span class="builtintype" id="7738082">true</span><span class="op" id="7738086">,</span>&nbsp;<span class="string" id="7738088">&#34;foo&#34;</span><span class="op" id="7738093">:</span>&nbsp;<span class="builtintype" id="7738095">true</span><span class="op" id="7738099">}</span><span class="op" id="7738100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738103"><a href="/go/build/build_test.go.html#7737222">nomatch</a></span><span class="op" id="7738110">(</span><span class="ident" id="7738111"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738118">.</span><span class="ident" id="7738119">GOOS</span><span class="op" id="7738123">+</span><span class="string" id="7738124">&#34;,&#34;</span><span class="op" id="7738127">+</span><span class="ident" id="7738128"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738135">.</span><span class="ident" id="7738136">GOARCH</span><span class="op" id="7738142">+</span><span class="string" id="7738143">&#34;,!foo&#34;</span><span class="op" id="7738150">,</span>&nbsp;<span class="keyword" id="7738152">map</span><span class="op" id="7738155">[</span><span class="builtintype" id="7738156">string</span><span class="op" id="7738162">]</span><span class="builtintype" id="7738163">bool</span><span class="op" id="7738167">{</span><span class="ident" id="7738168"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738175">.</span><span class="ident" id="7738176">GOOS</span><span class="op" id="7738180">:</span>&nbsp;<span class="builtintype" id="7738182">true</span><span class="op" id="7738186">,</span>&nbsp;<span class="ident" id="7738188"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738195">.</span><span class="ident" id="7738196">GOARCH</span><span class="op" id="7738202">:</span>&nbsp;<span class="builtintype" id="7738204">true</span><span class="op" id="7738208">,</span>&nbsp;<span class="string" id="7738210">&#34;foo&#34;</span><span class="op" id="7738215">:</span>&nbsp;<span class="builtintype" id="7738217">true</span><span class="op" id="7738221">}</span><span class="op" id="7738222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738225"><a href="/go/build/build_test.go.html#7736955">match</a></span><span class="op" id="7738230">(</span><span class="ident" id="7738231"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738238">.</span><span class="ident" id="7738239">GOOS</span><span class="op" id="7738243">+</span><span class="string" id="7738244">&#34;,&#34;</span><span class="op" id="7738247">+</span><span class="ident" id="7738248"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738255">.</span><span class="ident" id="7738256">GOARCH</span><span class="op" id="7738262">+</span><span class="string" id="7738263">&#34;,!bar&#34;</span><span class="op" id="7738270">,</span>&nbsp;<span class="keyword" id="7738272">map</span><span class="op" id="7738275">[</span><span class="builtintype" id="7738276">string</span><span class="op" id="7738282">]</span><span class="builtintype" id="7738283">bool</span><span class="op" id="7738287">{</span><span class="ident" id="7738288"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738295">.</span><span class="ident" id="7738296">GOOS</span><span class="op" id="7738300">:</span>&nbsp;<span class="builtintype" id="7738302">true</span><span class="op" id="7738306">,</span>&nbsp;<span class="ident" id="7738308"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738315">.</span><span class="ident" id="7738316">GOARCH</span><span class="op" id="7738322">:</span>&nbsp;<span class="builtintype" id="7738324">true</span><span class="op" id="7738328">,</span>&nbsp;<span class="string" id="7738330">&#34;bar&#34;</span><span class="op" id="7738335">:</span>&nbsp;<span class="builtintype" id="7738337">true</span><span class="op" id="7738341">}</span><span class="op" id="7738342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738345"><a href="/go/build/build_test.go.html#7737222">nomatch</a></span><span class="op" id="7738352">(</span><span class="ident" id="7738353"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738360">.</span><span class="ident" id="7738361">GOOS</span><span class="op" id="7738365">+</span><span class="string" id="7738366">&#34;,&#34;</span><span class="op" id="7738369">+</span><span class="ident" id="7738370"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738377">.</span><span class="ident" id="7738378">GOARCH</span><span class="op" id="7738384">+</span><span class="string" id="7738385">&#34;,bar&#34;</span><span class="op" id="7738391">,</span>&nbsp;<span class="keyword" id="7738393">map</span><span class="op" id="7738396">[</span><span class="builtintype" id="7738397">string</span><span class="op" id="7738403">]</span><span class="builtintype" id="7738404">bool</span><span class="op" id="7738408">{</span><span class="ident" id="7738409"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738416">.</span><span class="ident" id="7738417">GOOS</span><span class="op" id="7738421">:</span>&nbsp;<span class="builtintype" id="7738423">true</span><span class="op" id="7738427">,</span>&nbsp;<span class="ident" id="7738429"><a href="/go/build/build_test.go.html#7736852">runtime</a></span><span class="op" id="7738436">.</span><span class="ident" id="7738437">GOARCH</span><span class="op" id="7738443">:</span>&nbsp;<span class="builtintype" id="7738445">true</span><span class="op" id="7738449">,</span>&nbsp;<span class="string" id="7738451">&#34;bar&#34;</span><span class="op" id="7738456">:</span>&nbsp;<span class="builtintype" id="7738458">true</span><span class="op" id="7738462">}</span><span class="op" id="7738463">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738466"><a href="/go/build/build_test.go.html#7737222">nomatch</a></span><span class="op" id="7738473">(</span><span class="string" id="7738474">&#34;!&#34;</span><span class="op" id="7738477">,</span>&nbsp;<span class="keyword" id="7738479">map</span><span class="op" id="7738482">[</span><span class="builtintype" id="7738483">string</span><span class="op" id="7738489">]</span><span class="builtintype" id="7738490">bool</span><span class="op" id="7738494">{</span><span class="op" id="7738495">}</span><span class="op" id="7738496">)</span><br>
<span class="lineno"></span><span class="op" id="7738498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7738501">func</span>&nbsp;<span class="ident" id="7738506">TestDotSlashImport</span><span class="op" id="7738524">(</span><span class="ident" id="7738525">t</span>&nbsp;<span class="op" id="7738527">*</span><span class="ident" id="7738528"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7738535">.</span><span class="ident" id="7738536">T</span><span class="op" id="7738537">)</span>&nbsp;<span class="op" id="7738539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738542">p</span><span class="op" id="7738543">,</span>&nbsp;<span class="ident" id="7738545">err</span>&nbsp;<span class="op" id="7738549">:=</span>&nbsp;<span class="ident" id="7738552"><a href="/go/build/build.go.html#6454678">ImportDir</a></span><span class="op" id="7738561">(</span><span class="string" id="7738562">&#34;testdata/other&#34;</span><span class="op" id="7738578">,</span>&nbsp;<span class="num" id="7738580">0</span><span class="op" id="7738581">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738584">if</span>&nbsp;<span class="ident" id="7738587"><a href="/go/build/build_test.go.html#7738545">err</a></span>&nbsp;<span class="op" id="7738591">!=</span>&nbsp;<span class="ident" id="7738594">nil</span>&nbsp;<span class="op" id="7738598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738602"><a href="/go/build/build_test.go.html#7738525">t</a></span><span class="op" id="7738603">.</span><span class="ident" id="7738604">Fatal</span><span class="op" id="7738609">(</span><span class="ident" id="7738610"><a href="/go/build/build_test.go.html#7738545">err</a></span><span class="op" id="7738613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738619">if</span>&nbsp;<span class="builtinfunc" id="7738622">len</span><span class="op" id="7738625">(</span><span class="ident" id="7738626"><a href="/go/build/build_test.go.html#7738542">p</a></span><span class="op" id="7738627">.</span><span class="ident" id="7738628">Imports</span><span class="op" id="7738635">)</span>&nbsp;<span class="op" id="7738637">!=</span>&nbsp;<span class="num" id="7738640">1</span>&nbsp;<span class="op" id="7738642">||</span>&nbsp;<span class="ident" id="7738645"><a href="/go/build/build_test.go.html#7738542">p</a></span><span class="op" id="7738646">.</span><span class="ident" id="7738647">Imports</span><span class="op" id="7738654">[</span><span class="num" id="7738655">0</span><span class="op" id="7738656">]</span>&nbsp;<span class="op" id="7738658">!=</span>&nbsp;<span class="string" id="7738661">&#34;./file&#34;</span>&nbsp;<span class="op" id="7738670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738674"><a href="/go/build/build_test.go.html#7738525">t</a></span><span class="op" id="7738675">.</span><span class="ident" id="7738676">Fatalf</span><span class="op" id="7738682">(</span><span class="string" id="7738683">&#34;testdata/other:&nbsp;Imports=%v,&nbsp;want&nbsp;[./file]&#34;</span><span class="op" id="7738726">,</span>&nbsp;<span class="ident" id="7738728"><a href="/go/build/build_test.go.html#7738542">p</a></span><span class="op" id="7738729">.</span><span class="ident" id="7738730">Imports</span><span class="op" id="7738737">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738744">p1</span><span class="op" id="7738746">,</span>&nbsp;<span class="ident" id="7738748"><a href="/go/build/build_test.go.html#7738545">err</a></span>&nbsp;<span class="op" id="7738752">:=</span>&nbsp;<span class="ident" id="7738755"><a href="/go/build/build.go.html#6454513">Import</a></span><span class="op" id="7738761">(</span><span class="string" id="7738762">&#34;./file&#34;</span><span class="op" id="7738770">,</span>&nbsp;<span class="string" id="7738772">&#34;testdata/other&#34;</span><span class="op" id="7738788">,</span>&nbsp;<span class="num" id="7738790">0</span><span class="op" id="7738791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738794">if</span>&nbsp;<span class="ident" id="7738797"><a href="/go/build/build_test.go.html#7738545">err</a></span>&nbsp;<span class="op" id="7738801">!=</span>&nbsp;<span class="ident" id="7738804">nil</span>&nbsp;<span class="op" id="7738808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738812"><a href="/go/build/build_test.go.html#7738525">t</a></span><span class="op" id="7738813">.</span><span class="ident" id="7738814">Fatal</span><span class="op" id="7738819">(</span><span class="ident" id="7738820"><a href="/go/build/build_test.go.html#7738545">err</a></span><span class="op" id="7738823">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738829">if</span>&nbsp;<span class="ident" id="7738832"><a href="/go/build/build_test.go.html#7738744">p1</a></span><span class="op" id="7738834">.</span><span class="ident" id="7738835">Name</span>&nbsp;<span class="op" id="7738840">!=</span>&nbsp;<span class="string" id="7738843">&#34;file&#34;</span>&nbsp;<span class="op" id="7738850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738854"><a href="/go/build/build_test.go.html#7738525">t</a></span><span class="op" id="7738855">.</span><span class="ident" id="7738856">Fatalf</span><span class="op" id="7738862">(</span><span class="string" id="7738863">&#34;./file:&nbsp;Name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7738889">,</span>&nbsp;<span class="ident" id="7738891"><a href="/go/build/build_test.go.html#7738744">p1</a></span><span class="op" id="7738893">.</span><span class="ident" id="7738894">Name</span><span class="op" id="7738898">,</span>&nbsp;<span class="string" id="7738900">&#34;file&#34;</span><span class="op" id="7738906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7738909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7738912">dir</span>&nbsp;<span class="op" id="7738916">:=</span>&nbsp;<span class="ident" id="7738919"><a href="/go/build/build_test.go.html#7736824">filepath</a></span><span class="op" id="7738927">.</span><span class="ident" id="7738928">Clean</span><span class="op" id="7738933">(</span><span class="string" id="7738934">&#34;testdata/other/file&#34;</span><span class="op" id="7738955">)</span>&nbsp;<span class="comment" id="7738957">//&nbsp;Clean&nbsp;to&nbsp;use&nbsp;\&nbsp;on&nbsp;Windows</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7738987">if</span>&nbsp;<span class="ident" id="7738990"><a href="/go/build/build_test.go.html#7738744">p1</a></span><span class="op" id="7738992">.</span><span class="ident" id="7738993">Dir</span>&nbsp;<span class="op" id="7738997">!=</span>&nbsp;<span class="ident" id="7739000"><a href="/go/build/build_test.go.html#7738912">dir</a></span>&nbsp;<span class="op" id="7739004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739008"><a href="/go/build/build_test.go.html#7738525">t</a></span><span class="op" id="7739009">.</span><span class="ident" id="7739010">Fatalf</span><span class="op" id="7739016">(</span><span class="string" id="7739017">&#34;./file:&nbsp;Dir=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7739042">,</span>&nbsp;<span class="ident" id="7739044"><a href="/go/build/build_test.go.html#7738744">p1</a></span><span class="op" id="7739046">.</span><span class="ident" id="7739047">Name</span><span class="op" id="7739051">,</span>&nbsp;<span class="ident" id="7739053"><a href="/go/build/build_test.go.html#7738912">dir</a></span><span class="op" id="7739056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739059">}</span><br>
<span class="lineno"></span><span class="op" id="7739061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7739064">func</span>&nbsp;<span class="ident" id="7739069">TestEmptyImport</span><span class="op" id="7739084">(</span><span class="ident" id="7739085">t</span>&nbsp;<span class="op" id="7739087">*</span><span class="ident" id="7739088"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7739095">.</span><span class="ident" id="7739096">T</span><span class="op" id="7739097">)</span>&nbsp;<span class="op" id="7739099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739102">p</span><span class="op" id="7739103">,</span>&nbsp;<span class="ident" id="7739105">err</span>&nbsp;<span class="op" id="7739109">:=</span>&nbsp;<span class="ident" id="7739112"><a href="/go/build/build.go.html#6454513">Import</a></span><span class="op" id="7739118">(</span><span class="string" id="7739119">&#34;&#34;</span><span class="op" id="7739121">,</span>&nbsp;<span class="ident" id="7739123"><a href="/go/build/build.go.html#6433773">Default</a></span><span class="op" id="7739130">.</span><span class="ident" id="7739131">GOROOT</span><span class="op" id="7739137">,</span>&nbsp;<span class="ident" id="7739139"><a href="/go/build/build.go.html#6435854">FindOnly</a></span><span class="op" id="7739147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739150">if</span>&nbsp;<span class="ident" id="7739153"><a href="/go/build/build_test.go.html#7739105">err</a></span>&nbsp;<span class="op" id="7739157">==</span>&nbsp;<span class="ident" id="7739160">nil</span>&nbsp;<span class="op" id="7739164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739168"><a href="/go/build/build_test.go.html#7739085">t</a></span><span class="op" id="7739169">.</span><span class="ident" id="7739170">Fatal</span><span class="op" id="7739175">(</span><span class="string" id="7739176">`Import(&#34;&#34;)&nbsp;returned&nbsp;nil&nbsp;error.`</span><span class="op" id="7739208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739211">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739214">if</span>&nbsp;<span class="ident" id="7739217"><a href="/go/build/build_test.go.html#7739102">p</a></span>&nbsp;<span class="op" id="7739219">==</span>&nbsp;<span class="ident" id="7739222">nil</span>&nbsp;<span class="op" id="7739226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739230"><a href="/go/build/build_test.go.html#7739085">t</a></span><span class="op" id="7739231">.</span><span class="ident" id="7739232">Fatal</span><span class="op" id="7739237">(</span><span class="string" id="7739238">`Import(&#34;&#34;)&nbsp;returned&nbsp;nil&nbsp;package.`</span><span class="op" id="7739272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739278">if</span>&nbsp;<span class="ident" id="7739281"><a href="/go/build/build_test.go.html#7739102">p</a></span><span class="op" id="7739282">.</span><span class="ident" id="7739283">ImportPath</span>&nbsp;<span class="op" id="7739294">!=</span>&nbsp;<span class="string" id="7739297">&#34;&#34;</span>&nbsp;<span class="op" id="7739300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739304"><a href="/go/build/build_test.go.html#7739085">t</a></span><span class="op" id="7739305">.</span><span class="ident" id="7739306">Fatalf</span><span class="op" id="7739312">(</span><span class="string" id="7739313">&#34;ImportPath=%q,&nbsp;want&nbsp;%q.&#34;</span><span class="op" id="7739338">,</span>&nbsp;<span class="ident" id="7739340"><a href="/go/build/build_test.go.html#7739102">p</a></span><span class="op" id="7739341">.</span><span class="ident" id="7739342">ImportPath</span><span class="op" id="7739352">,</span>&nbsp;<span class="string" id="7739354">&#34;&#34;</span><span class="op" id="7739356">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739359">}</span><br>
<span class="lineno"></span><span class="op" id="7739361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7739364">func</span>&nbsp;<span class="ident" id="7739369">TestEmptyFolderImport</span><span class="op" id="7739390">(</span><span class="ident" id="7739391">t</span>&nbsp;<span class="op" id="7739393">*</span><span class="ident" id="7739394"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7739401">.</span><span class="ident" id="7739402">T</span><span class="op" id="7739403">)</span>&nbsp;<span class="op" id="7739405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739408">_</span><span class="op" id="7739409">,</span>&nbsp;<span class="ident" id="7739411">err</span>&nbsp;<span class="op" id="7739415">:=</span>&nbsp;<span class="ident" id="7739418"><a href="/go/build/build.go.html#6454513">Import</a></span><span class="op" id="7739424">(</span><span class="string" id="7739425">&#34;.&#34;</span><span class="op" id="7739428">,</span>&nbsp;<span class="string" id="7739430">&#34;testdata/empty&#34;</span><span class="op" id="7739446">,</span>&nbsp;<span class="num" id="7739448">0</span><span class="op" id="7739449">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739452">if</span>&nbsp;<span class="ident" id="7739455">_</span><span class="op" id="7739456">,</span>&nbsp;<span class="ident" id="7739458">ok</span>&nbsp;<span class="op" id="7739461">:=</span>&nbsp;<span class="ident" id="7739464"><a href="/go/build/build_test.go.html#7739411">err</a></span><span class="op" id="7739467">.</span><span class="op" id="7739468">(</span><span class="op" id="7739469">*</span><span class="ident" id="7739470"><a href="/go/build/build.go.html#6439411">NoGoError</a></span><span class="op" id="7739479">)</span><span class="op" id="7739480">;</span>&nbsp;<span class="op" id="7739482">!</span><span class="ident" id="7739483"><a href="/go/build/build_test.go.html#7739458">ok</a></span>&nbsp;<span class="op" id="7739486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739490"><a href="/go/build/build_test.go.html#7739391">t</a></span><span class="op" id="7739491">.</span><span class="ident" id="7739492">Fatal</span><span class="op" id="7739497">(</span><span class="string" id="7739498">`Import(&#34;testdata/empty&#34;)&nbsp;did&nbsp;not&nbsp;return&nbsp;NoGoError.`</span><span class="op" id="7739550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739553">}</span><br>
<span class="lineno"></span><span class="op" id="7739555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7739558">func</span>&nbsp;<span class="ident" id="7739563">TestMultiplePackageImport</span><span class="op" id="7739588">(</span><span class="ident" id="7739589">t</span>&nbsp;<span class="op" id="7739591">*</span><span class="ident" id="7739592"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7739599">.</span><span class="ident" id="7739600">T</span><span class="op" id="7739601">)</span>&nbsp;<span class="op" id="7739603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739606">_</span><span class="op" id="7739607">,</span>&nbsp;<span class="ident" id="7739609">err</span>&nbsp;<span class="op" id="7739613">:=</span>&nbsp;<span class="ident" id="7739616"><a href="/go/build/build.go.html#6454513">Import</a></span><span class="op" id="7739622">(</span><span class="string" id="7739623">&#34;.&#34;</span><span class="op" id="7739626">,</span>&nbsp;<span class="string" id="7739628">&#34;testdata/multi&#34;</span><span class="op" id="7739644">,</span>&nbsp;<span class="num" id="7739646">0</span><span class="op" id="7739647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739650">if</span>&nbsp;<span class="ident" id="7739653">_</span><span class="op" id="7739654">,</span>&nbsp;<span class="ident" id="7739656">ok</span>&nbsp;<span class="op" id="7739659">:=</span>&nbsp;<span class="ident" id="7739662"><a href="/go/build/build_test.go.html#7739609">err</a></span><span class="op" id="7739665">.</span><span class="op" id="7739666">(</span><span class="op" id="7739667">*</span><span class="ident" id="7739668"><a href="/go/build/build.go.html#6439659">MultiplePackageError</a></span><span class="op" id="7739688">)</span><span class="op" id="7739689">;</span>&nbsp;<span class="op" id="7739691">!</span><span class="ident" id="7739692"><a href="/go/build/build_test.go.html#7739656">ok</a></span>&nbsp;<span class="op" id="7739695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739699"><a href="/go/build/build_test.go.html#7739589">t</a></span><span class="op" id="7739700">.</span><span class="ident" id="7739701">Fatal</span><span class="op" id="7739706">(</span><span class="string" id="7739707">`Import(&#34;testdata/multi&#34;)&nbsp;did&nbsp;not&nbsp;return&nbsp;MultiplePackageError.`</span><span class="op" id="7739770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739773">}</span><br>
<span class="lineno">100</span><span class="op" id="7739775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7739778">func</span>&nbsp;<span class="ident" id="7739783">TestLocalDirectory</span><span class="op" id="7739801">(</span><span class="ident" id="7739802">t</span>&nbsp;<span class="op" id="7739804">*</span><span class="ident" id="7739805"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7739812">.</span><span class="ident" id="7739813">T</span><span class="op" id="7739814">)</span>&nbsp;<span class="op" id="7739816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739819">cwd</span><span class="op" id="7739822">,</span>&nbsp;<span class="ident" id="7739824">err</span>&nbsp;<span class="op" id="7739828">:=</span>&nbsp;<span class="ident" id="7739831"><a href="/go/build/build_test.go.html#7736818">os</a></span><span class="op" id="7739833">.</span><span class="ident" id="7739834">Getwd</span><span class="op" id="7739839">(</span><span class="op" id="7739840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739843">if</span>&nbsp;<span class="ident" id="7739846"><a href="/go/build/build_test.go.html#7739824">err</a></span>&nbsp;<span class="op" id="7739850">!=</span>&nbsp;<span class="ident" id="7739853">nil</span>&nbsp;<span class="op" id="7739857">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739861"><a href="/go/build/build_test.go.html#7739802">t</a></span><span class="op" id="7739862">.</span><span class="ident" id="7739863">Fatal</span><span class="op" id="7739868">(</span><span class="ident" id="7739869"><a href="/go/build/build_test.go.html#7739824">err</a></span><span class="op" id="7739872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739879">p</span><span class="op" id="7739880">,</span>&nbsp;<span class="ident" id="7739882"><a href="/go/build/build_test.go.html#7739824">err</a></span>&nbsp;<span class="op" id="7739886">:=</span>&nbsp;<span class="ident" id="7739889"><a href="/go/build/build.go.html#6454678">ImportDir</a></span><span class="op" id="7739898">(</span><span class="ident" id="7739899"><a href="/go/build/build_test.go.html#7739819">cwd</a></span><span class="op" id="7739902">,</span>&nbsp;<span class="num" id="7739904">0</span><span class="op" id="7739905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739908">if</span>&nbsp;<span class="ident" id="7739911"><a href="/go/build/build_test.go.html#7739824">err</a></span>&nbsp;<span class="op" id="7739915">!=</span>&nbsp;<span class="ident" id="7739918">nil</span>&nbsp;<span class="op" id="7739922">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739926"><a href="/go/build/build_test.go.html#7739802">t</a></span><span class="op" id="7739927">.</span><span class="ident" id="7739928">Fatal</span><span class="op" id="7739933">(</span><span class="ident" id="7739934"><a href="/go/build/build_test.go.html#7739824">err</a></span><span class="op" id="7739937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7739940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7739943">if</span>&nbsp;<span class="ident" id="7739946"><a href="/go/build/build_test.go.html#7739879">p</a></span><span class="op" id="7739947">.</span><span class="ident" id="7739948">ImportPath</span>&nbsp;<span class="op" id="7739959">!=</span>&nbsp;<span class="string" id="7739962">&#34;go/build&#34;</span>&nbsp;<span class="op" id="7739973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7739977"><a href="/go/build/build_test.go.html#7739802">t</a></span><span class="op" id="7739978">.</span><span class="ident" id="7739979">Fatalf</span><span class="op" id="7739985">(</span><span class="string" id="7739986">&#34;ImportPath=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7740010">,</span>&nbsp;<span class="ident" id="7740012"><a href="/go/build/build_test.go.html#7739879">p</a></span><span class="op" id="7740013">.</span><span class="ident" id="7740014">ImportPath</span><span class="op" id="7740024">,</span>&nbsp;<span class="string" id="7740026">&#34;go/build&#34;</span><span class="op" id="7740036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740039">}</span><br>
<span class="lineno">115</span><span class="op" id="7740041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7740044">func</span>&nbsp;<span class="ident" id="7740049">TestShouldBuild</span><span class="op" id="7740064">(</span><span class="ident" id="7740065">t</span>&nbsp;<span class="op" id="7740067">*</span><span class="ident" id="7740068"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7740075">.</span><span class="ident" id="7740076">T</span><span class="op" id="7740077">)</span>&nbsp;<span class="op" id="7740079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740082">const</span>&nbsp;<span class="ident" id="7740088">file1</span>&nbsp;<span class="op" id="7740094">=</span>&nbsp;<span class="string" id="7740096">&#34;//&nbsp;+build&nbsp;tag1\n\n&#34;</span>&nbsp;<span class="op" id="7740117">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740121">&#34;package&nbsp;main\n&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740139">want1</span>&nbsp;<span class="op" id="7740145">:=</span>&nbsp;<span class="keyword" id="7740148">map</span><span class="op" id="7740151">[</span><span class="builtintype" id="7740152">string</span><span class="op" id="7740158">]</span><span class="builtintype" id="7740159">bool</span><span class="op" id="7740163">{</span><span class="string" id="7740164">&#34;tag1&#34;</span><span class="op" id="7740170">:</span>&nbsp;<span class="builtintype" id="7740172">true</span><span class="op" id="7740176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740180">const</span>&nbsp;<span class="ident" id="7740186">file2</span>&nbsp;<span class="op" id="7740192">=</span>&nbsp;<span class="string" id="7740194">&#34;//&nbsp;+build&nbsp;cgo\n\n&#34;</span>&nbsp;<span class="op" id="7740214">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740218">&#34;//&nbsp;This&nbsp;package&nbsp;implements&nbsp;parsing&nbsp;of&nbsp;tags&nbsp;like\n&#34;</span>&nbsp;<span class="op" id="7740270">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740274">&#34;//&nbsp;+build&nbsp;tag1\n&#34;</span>&nbsp;<span class="op" id="7740293">+</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740297">&#34;package&nbsp;build&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740314">want2</span>&nbsp;<span class="op" id="7740320">:=</span>&nbsp;<span class="keyword" id="7740323">map</span><span class="op" id="7740326">[</span><span class="builtintype" id="7740327">string</span><span class="op" id="7740333">]</span><span class="builtintype" id="7740334">bool</span><span class="op" id="7740338">{</span><span class="string" id="7740339">&#34;cgo&#34;</span><span class="op" id="7740344">:</span>&nbsp;<span class="builtintype" id="7740346">true</span><span class="op" id="7740350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740354">const</span>&nbsp;<span class="ident" id="7740360">file3</span>&nbsp;<span class="op" id="7740366">=</span>&nbsp;<span class="string" id="7740368">&#34;//&nbsp;Copyright&nbsp;The&nbsp;Go&nbsp;Authors.\n\n&#34;</span>&nbsp;<span class="op" id="7740403">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740407">&#34;package&nbsp;build\n\n&#34;</span>&nbsp;<span class="op" id="7740427">+</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740431">&#34;//&nbsp;shouldBuild&nbsp;checks&nbsp;tags&nbsp;given&nbsp;by&nbsp;lines&nbsp;of&nbsp;the&nbsp;form\n&#34;</span>&nbsp;<span class="op" id="7740489">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740493">&#34;//&nbsp;+build&nbsp;tag\n&#34;</span>&nbsp;<span class="op" id="7740511">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7740515">&#34;func&nbsp;shouldBuild(content&nbsp;[]byte)\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740553">want3</span>&nbsp;<span class="op" id="7740559">:=</span>&nbsp;<span class="keyword" id="7740562">map</span><span class="op" id="7740565">[</span><span class="builtintype" id="7740566">string</span><span class="op" id="7740572">]</span><span class="builtintype" id="7740573">bool</span><span class="op" id="7740577">{</span><span class="op" id="7740578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740582">ctx</span>&nbsp;<span class="op" id="7740586">:=</span>&nbsp;<span class="op" id="7740589">&amp;</span><span class="ident" id="7740590"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="7740597">{</span><span class="ident" id="7740598">BuildTags</span><span class="op" id="7740607">:</span>&nbsp;<span class="op" id="7740609">[</span><span class="op" id="7740610">]</span><span class="builtintype" id="7740611">string</span><span class="op" id="7740617">{</span><span class="string" id="7740618">&#34;tag1&#34;</span><span class="op" id="7740624">}</span><span class="op" id="7740625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740628">m</span>&nbsp;<span class="op" id="7740630">:=</span>&nbsp;<span class="keyword" id="7740633">map</span><span class="op" id="7740636">[</span><span class="builtintype" id="7740637">string</span><span class="op" id="7740643">]</span><span class="builtintype" id="7740644">bool</span><span class="op" id="7740648">{</span><span class="op" id="7740649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740652">if</span>&nbsp;<span class="op" id="7740655">!</span><span class="ident" id="7740656"><a href="/go/build/build_test.go.html#7740582">ctx</a></span><span class="op" id="7740659">.</span><span class="ident" id="7740660">shouldBuild</span><span class="op" id="7740671">(</span><span class="op" id="7740672">[</span><span class="op" id="7740673">]</span><span class="builtintype" id="7740674">byte</span><span class="op" id="7740678">(</span><span class="ident" id="7740679"><a href="/go/build/build_test.go.html#7740088">file1</a></span><span class="op" id="7740684">)</span><span class="op" id="7740685">,</span>&nbsp;<span class="ident" id="7740687"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7740688">)</span>&nbsp;<span class="op" id="7740690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740694"><a href="/go/build/build_test.go.html#7740065">t</a></span><span class="op" id="7740695">.</span><span class="ident" id="7740696">Errorf</span><span class="op" id="7740702">(</span><span class="string" id="7740703">&#34;shouldBuild(file1)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="7740742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740745">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740748">if</span>&nbsp;<span class="op" id="7740751">!</span><span class="ident" id="7740752"><a href="/go/build/build_test.go.html#7736841">reflect</a></span><span class="op" id="7740759">.</span><span class="ident" id="7740760">DeepEqual</span><span class="op" id="7740769">(</span><span class="ident" id="7740770"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7740771">,</span>&nbsp;<span class="ident" id="7740773"><a href="/go/build/build_test.go.html#7740139">want1</a></span><span class="op" id="7740778">)</span>&nbsp;<span class="op" id="7740780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740784"><a href="/go/build/build_test.go.html#7740065">t</a></span><span class="op" id="7740785">.</span><span class="ident" id="7740786">Errorf</span><span class="op" id="7740792">(</span><span class="string" id="7740793">&#34;shoudBuild(file1)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7740831">,</span>&nbsp;<span class="ident" id="7740833"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7740834">,</span>&nbsp;<span class="ident" id="7740836"><a href="/go/build/build_test.go.html#7740139">want1</a></span><span class="op" id="7740841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740848"><a href="/go/build/build_test.go.html#7740628">m</a></span>&nbsp;<span class="op" id="7740850">=</span>&nbsp;<span class="keyword" id="7740852">map</span><span class="op" id="7740855">[</span><span class="builtintype" id="7740856">string</span><span class="op" id="7740862">]</span><span class="builtintype" id="7740863">bool</span><span class="op" id="7740867">{</span><span class="op" id="7740868">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740871">if</span>&nbsp;<span class="ident" id="7740874"><a href="/go/build/build_test.go.html#7740582">ctx</a></span><span class="op" id="7740877">.</span><span class="ident" id="7740878">shouldBuild</span><span class="op" id="7740889">(</span><span class="op" id="7740890">[</span><span class="op" id="7740891">]</span><span class="builtintype" id="7740892">byte</span><span class="op" id="7740896">(</span><span class="ident" id="7740897"><a href="/go/build/build_test.go.html#7740186">file2</a></span><span class="op" id="7740902">)</span><span class="op" id="7740903">,</span>&nbsp;<span class="ident" id="7740905"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7740906">)</span>&nbsp;<span class="op" id="7740908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7740912"><a href="/go/build/build_test.go.html#7740065">t</a></span><span class="op" id="7740913">.</span><span class="ident" id="7740914">Errorf</span><span class="op" id="7740920">(</span><span class="string" id="7740921">&#34;shouldBuild(file2)&nbsp;=&nbsp;true,&nbsp;want&nbsp;fakse&#34;</span><span class="op" id="7740960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7740963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7740966">if</span>&nbsp;<span class="op" id="7740969">!</span><span class="ident" id="7740970"><a href="/go/build/build_test.go.html#7736841">reflect</a></span><span class="op" id="7740977">.</span><span class="ident" id="7740978">DeepEqual</span><span class="op" id="7740987">(</span><span class="ident" id="7740988"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7740989">,</span>&nbsp;<span class="ident" id="7740991"><a href="/go/build/build_test.go.html#7740314">want2</a></span><span class="op" id="7740996">)</span>&nbsp;<span class="op" id="7740998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741002"><a href="/go/build/build_test.go.html#7740065">t</a></span><span class="op" id="7741003">.</span><span class="ident" id="7741004">Errorf</span><span class="op" id="7741010">(</span><span class="string" id="7741011">&#34;shoudBuild(file2)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7741049">,</span>&nbsp;<span class="ident" id="7741051"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7741052">,</span>&nbsp;<span class="ident" id="7741054"><a href="/go/build/build_test.go.html#7740314">want2</a></span><span class="op" id="7741059">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741066"><a href="/go/build/build_test.go.html#7740628">m</a></span>&nbsp;<span class="op" id="7741068">=</span>&nbsp;<span class="keyword" id="7741070">map</span><span class="op" id="7741073">[</span><span class="builtintype" id="7741074">string</span><span class="op" id="7741080">]</span><span class="builtintype" id="7741081">bool</span><span class="op" id="7741085">{</span><span class="op" id="7741086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741089"><a href="/go/build/build_test.go.html#7740582">ctx</a></span>&nbsp;<span class="op" id="7741093">=</span>&nbsp;<span class="op" id="7741095">&amp;</span><span class="ident" id="7741096"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="7741103">{</span><span class="ident" id="7741104">BuildTags</span><span class="op" id="7741113">:</span>&nbsp;<span class="ident" id="7741115">nil</span><span class="op" id="7741118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7741121">if</span>&nbsp;<span class="op" id="7741124">!</span><span class="ident" id="7741125"><a href="/go/build/build_test.go.html#7740582">ctx</a></span><span class="op" id="7741128">.</span><span class="ident" id="7741129">shouldBuild</span><span class="op" id="7741140">(</span><span class="op" id="7741141">[</span><span class="op" id="7741142">]</span><span class="builtintype" id="7741143">byte</span><span class="op" id="7741147">(</span><span class="ident" id="7741148"><a href="/go/build/build_test.go.html#7740360">file3</a></span><span class="op" id="7741153">)</span><span class="op" id="7741154">,</span>&nbsp;<span class="ident" id="7741156"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7741157">)</span>&nbsp;<span class="op" id="7741159">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741163"><a href="/go/build/build_test.go.html#7740065">t</a></span><span class="op" id="7741164">.</span><span class="ident" id="7741165">Errorf</span><span class="op" id="7741171">(</span><span class="string" id="7741172">&#34;shouldBuild(file3)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="7741211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7741217">if</span>&nbsp;<span class="op" id="7741220">!</span><span class="ident" id="7741221"><a href="/go/build/build_test.go.html#7736841">reflect</a></span><span class="op" id="7741228">.</span><span class="ident" id="7741229">DeepEqual</span><span class="op" id="7741238">(</span><span class="ident" id="7741239"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7741240">,</span>&nbsp;<span class="ident" id="7741242"><a href="/go/build/build_test.go.html#7740553">want3</a></span><span class="op" id="7741247">)</span>&nbsp;<span class="op" id="7741249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741253"><a href="/go/build/build_test.go.html#7740065">t</a></span><span class="op" id="7741254">.</span><span class="ident" id="7741255">Errorf</span><span class="op" id="7741261">(</span><span class="string" id="7741262">&#34;shoudBuild(file3)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7741300">,</span>&nbsp;<span class="ident" id="7741302"><a href="/go/build/build_test.go.html#7740628">m</a></span><span class="op" id="7741303">,</span>&nbsp;<span class="ident" id="7741305"><a href="/go/build/build_test.go.html#7740553">want3</a></span><span class="op" id="7741310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741313">}</span><br>
<span class="lineno">160</span><span class="op" id="7741315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7741318">type</span>&nbsp;<span class="ident" id="7741323">readNopCloser</span>&nbsp;<span class="keyword" id="7741337">struct</span>&nbsp;<span class="op" id="7741344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741347"><a href="/go/build/build_test.go.html#7736812">io</a></span><span class="op" id="7741349">.</span><span class="ident" id="7741350">Reader</span><br>
<span class="lineno"></span><span class="op" id="7741357">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="7741360">func</span>&nbsp;<span class="op" id="7741365">(</span><span class="ident" id="7741366">r</span>&nbsp;<span class="ident" id="7741368"><a href="/go/build/build_test.go.html#7741323">readNopCloser</a></span><span class="op" id="7741381">)</span>&nbsp;<span class="ident" id="7741383">Close</span><span class="op" id="7741388">(</span><span class="op" id="7741389">)</span>&nbsp;<span class="builtintype" id="7741391">error</span>&nbsp;<span class="op" id="7741397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7741400">return</span>&nbsp;<span class="ident" id="7741407">nil</span><br>
<span class="lineno"></span><span class="op" id="7741411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7741414">var</span>&nbsp;<span class="op" id="7741418">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741421">ctxtP9</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7741433">=</span>&nbsp;<span class="ident" id="7741435"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="7741442">{</span><span class="ident" id="7741443">GOARCH</span><span class="op" id="7741449">:</span>&nbsp;<span class="string" id="7741451">&#34;arm&#34;</span><span class="op" id="7741456">,</span>&nbsp;<span class="ident" id="7741458">GOOS</span><span class="op" id="7741462">:</span>&nbsp;<span class="string" id="7741464">&#34;plan9&#34;</span><span class="op" id="7741471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741474">ctxtAndroid</span>&nbsp;<span class="op" id="7741486">=</span>&nbsp;<span class="ident" id="7741488"><a href="/go/build/build.go.html#6426241">Context</a></span><span class="op" id="7741495">{</span><span class="ident" id="7741496">GOARCH</span><span class="op" id="7741502">:</span>&nbsp;<span class="string" id="7741504">&#34;arm&#34;</span><span class="op" id="7741509">,</span>&nbsp;<span class="ident" id="7741511">GOOS</span><span class="op" id="7741515">:</span>&nbsp;<span class="string" id="7741517">&#34;android&#34;</span><span class="op" id="7741526">}</span><br>
<span class="lineno"></span><span class="op" id="7741528">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7741531">var</span>&nbsp;<span class="ident" id="7741535">matchFileTests</span>&nbsp;<span class="op" id="7741550">=</span>&nbsp;<span class="op" id="7741552">[</span><span class="op" id="7741553">]</span><span class="keyword" id="7741554">struct</span>&nbsp;<span class="op" id="7741561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741564">ctxt</span>&nbsp;&nbsp;<span class="ident" id="7741570"><a href="/go/build/build.go.html#6426241">Context</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741579">name</span>&nbsp;&nbsp;<span class="builtintype" id="7741585">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741593">data</span>&nbsp;&nbsp;<span class="builtintype" id="7741599">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7741607">match</span>&nbsp;<span class="builtintype" id="7741613">bool</span><br>
<span class="lineno">180</span><span class="op" id="7741618">}</span><span class="op" id="7741619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741622">{</span><span class="ident" id="7741623"><a href="/go/build/build_test.go.html#7741421">ctxtP9</a></span><span class="op" id="7741629">,</span>&nbsp;<span class="string" id="7741631">&#34;foo_arm.go&#34;</span><span class="op" id="7741643">,</span>&nbsp;<span class="string" id="7741645">&#34;&#34;</span><span class="op" id="7741647">,</span>&nbsp;<span class="builtintype" id="7741649">true</span><span class="op" id="7741653">}</span><span class="op" id="7741654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741657">{</span><span class="ident" id="7741658"><a href="/go/build/build_test.go.html#7741421">ctxtP9</a></span><span class="op" id="7741664">,</span>&nbsp;<span class="string" id="7741666">&#34;foo1_arm.go&#34;</span><span class="op" id="7741679">,</span>&nbsp;<span class="string" id="7741681">&#34;//&nbsp;+build&nbsp;linux\n\npackage&nbsp;main\n&#34;</span><span class="op" id="7741716">,</span>&nbsp;<span class="builtintype" id="7741718">false</span><span class="op" id="7741723">}</span><span class="op" id="7741724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741727">{</span><span class="ident" id="7741728"><a href="/go/build/build_test.go.html#7741421">ctxtP9</a></span><span class="op" id="7741734">,</span>&nbsp;<span class="string" id="7741736">&#34;foo_darwin.go&#34;</span><span class="op" id="7741751">,</span>&nbsp;<span class="string" id="7741753">&#34;&#34;</span><span class="op" id="7741755">,</span>&nbsp;<span class="builtintype" id="7741757">false</span><span class="op" id="7741762">}</span><span class="op" id="7741763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741766">{</span><span class="ident" id="7741767"><a href="/go/build/build_test.go.html#7741421">ctxtP9</a></span><span class="op" id="7741773">,</span>&nbsp;<span class="string" id="7741775">&#34;foo.go&#34;</span><span class="op" id="7741783">,</span>&nbsp;<span class="string" id="7741785">&#34;&#34;</span><span class="op" id="7741787">,</span>&nbsp;<span class="builtintype" id="7741789">true</span><span class="op" id="7741793">}</span><span class="op" id="7741794">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741797">{</span><span class="ident" id="7741798"><a href="/go/build/build_test.go.html#7741421">ctxtP9</a></span><span class="op" id="7741804">,</span>&nbsp;<span class="string" id="7741806">&#34;foo1.go&#34;</span><span class="op" id="7741815">,</span>&nbsp;<span class="string" id="7741817">&#34;//&nbsp;+build&nbsp;linux\n\npackage&nbsp;main\n&#34;</span><span class="op" id="7741852">,</span>&nbsp;<span class="builtintype" id="7741854">false</span><span class="op" id="7741859">}</span><span class="op" id="7741860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741863">{</span><span class="ident" id="7741864"><a href="/go/build/build_test.go.html#7741421">ctxtP9</a></span><span class="op" id="7741870">,</span>&nbsp;<span class="string" id="7741872">&#34;foo.badsuffix&#34;</span><span class="op" id="7741887">,</span>&nbsp;<span class="string" id="7741889">&#34;&#34;</span><span class="op" id="7741891">,</span>&nbsp;<span class="builtintype" id="7741893">false</span><span class="op" id="7741898">}</span><span class="op" id="7741899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741902">{</span><span class="ident" id="7741903"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7741914">,</span>&nbsp;<span class="string" id="7741916">&#34;foo_linux.go&#34;</span><span class="op" id="7741930">,</span>&nbsp;<span class="string" id="7741932">&#34;&#34;</span><span class="op" id="7741934">,</span>&nbsp;<span class="builtintype" id="7741936">true</span><span class="op" id="7741940">}</span><span class="op" id="7741941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741944">{</span><span class="ident" id="7741945"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7741956">,</span>&nbsp;<span class="string" id="7741958">&#34;foo_android.go&#34;</span><span class="op" id="7741974">,</span>&nbsp;<span class="string" id="7741976">&#34;&#34;</span><span class="op" id="7741978">,</span>&nbsp;<span class="builtintype" id="7741980">true</span><span class="op" id="7741984">}</span><span class="op" id="7741985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7741988">{</span><span class="ident" id="7741989"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7742000">,</span>&nbsp;<span class="string" id="7742002">&#34;foo_plan9.go&#34;</span><span class="op" id="7742016">,</span>&nbsp;<span class="string" id="7742018">&#34;&#34;</span><span class="op" id="7742020">,</span>&nbsp;<span class="builtintype" id="7742022">false</span><span class="op" id="7742027">}</span><span class="op" id="7742028">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742031">{</span><span class="ident" id="7742032"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7742043">,</span>&nbsp;<span class="string" id="7742045">&#34;android.go&#34;</span><span class="op" id="7742057">,</span>&nbsp;<span class="string" id="7742059">&#34;&#34;</span><span class="op" id="7742061">,</span>&nbsp;<span class="builtintype" id="7742063">true</span><span class="op" id="7742067">}</span><span class="op" id="7742068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742071">{</span><span class="ident" id="7742072"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7742083">,</span>&nbsp;<span class="string" id="7742085">&#34;plan9.go&#34;</span><span class="op" id="7742095">,</span>&nbsp;<span class="string" id="7742097">&#34;&#34;</span><span class="op" id="7742099">,</span>&nbsp;<span class="builtintype" id="7742101">true</span><span class="op" id="7742105">}</span><span class="op" id="7742106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742109">{</span><span class="ident" id="7742110"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7742121">,</span>&nbsp;<span class="string" id="7742123">&#34;plan9_test.go&#34;</span><span class="op" id="7742138">,</span>&nbsp;<span class="string" id="7742140">&#34;&#34;</span><span class="op" id="7742142">,</span>&nbsp;<span class="builtintype" id="7742144">true</span><span class="op" id="7742148">}</span><span class="op" id="7742149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742152">{</span><span class="ident" id="7742153"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7742164">,</span>&nbsp;<span class="string" id="7742166">&#34;arm.s&#34;</span><span class="op" id="7742173">,</span>&nbsp;<span class="string" id="7742175">&#34;&#34;</span><span class="op" id="7742177">,</span>&nbsp;<span class="builtintype" id="7742179">true</span><span class="op" id="7742183">}</span><span class="op" id="7742184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742187">{</span><span class="ident" id="7742188"><a href="/go/build/build_test.go.html#7741474">ctxtAndroid</a></span><span class="op" id="7742199">,</span>&nbsp;<span class="string" id="7742201">&#34;amd64.s&#34;</span><span class="op" id="7742210">,</span>&nbsp;<span class="string" id="7742212">&#34;&#34;</span><span class="op" id="7742214">,</span>&nbsp;<span class="builtintype" id="7742216">true</span><span class="op" id="7742220">}</span><span class="op" id="7742221">,</span><br>
<span class="lineno">195</span><span class="op" id="7742223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742226">func</span>&nbsp;<span class="ident" id="7742231">TestMatchFile</span><span class="op" id="7742244">(</span><span class="ident" id="7742245">t</span>&nbsp;<span class="op" id="7742247">*</span><span class="ident" id="7742248"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7742255">.</span><span class="ident" id="7742256">T</span><span class="op" id="7742257">)</span>&nbsp;<span class="op" id="7742259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742262">for</span>&nbsp;<span class="ident" id="7742266">_</span><span class="op" id="7742267">,</span>&nbsp;<span class="ident" id="7742269">tt</span>&nbsp;<span class="op" id="7742272">:=</span>&nbsp;<span class="keyword" id="7742275">range</span>&nbsp;<span class="ident" id="7742281"><a href="/go/build/build_test.go.html#7741535">matchFileTests</a></span>&nbsp;<span class="op" id="7742296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742300">ctxt</span>&nbsp;<span class="op" id="7742305">:=</span>&nbsp;<span class="ident" id="7742308"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742310">.</span><span class="ident" id="7742311">ctxt</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742318"><a href="/go/build/build_test.go.html#7742300">ctxt</a></span><span class="op" id="7742322">.</span><span class="ident" id="7742323">OpenFile</span>&nbsp;<span class="op" id="7742332">=</span>&nbsp;<span class="keyword" id="7742334">func</span><span class="op" id="7742338">(</span><span class="ident" id="7742339">path</span>&nbsp;<span class="builtintype" id="7742344">string</span><span class="op" id="7742350">)</span>&nbsp;<span class="op" id="7742352">(</span><span class="ident" id="7742353">r</span>&nbsp;<span class="ident" id="7742355"><a href="/go/build/build_test.go.html#7736812">io</a></span><span class="op" id="7742357">.</span><span class="ident" id="7742358">ReadCloser</span><span class="op" id="7742368">,</span>&nbsp;<span class="ident" id="7742370">err</span>&nbsp;<span class="builtintype" id="7742374">error</span><span class="op" id="7742379">)</span>&nbsp;<span class="op" id="7742381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742386">if</span>&nbsp;<span class="ident" id="7742389"><a href="/go/build/build_test.go.html#7742339">path</a></span>&nbsp;<span class="op" id="7742394">!=</span>&nbsp;<span class="string" id="7742397">&#34;x+&#34;</span><span class="op" id="7742401">+</span><span class="ident" id="7742402"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742404">.</span><span class="ident" id="7742405">name</span>&nbsp;<span class="op" id="7742410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742416"><a href="/go/build/build_test.go.html#7742245">t</a></span><span class="op" id="7742417">.</span><span class="ident" id="7742418">Fatalf</span><span class="op" id="7742424">(</span><span class="string" id="7742425">&#34;OpenFile&nbsp;asked&nbsp;for&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7742461">,</span>&nbsp;<span class="ident" id="7742463"><a href="/go/build/build_test.go.html#7742339">path</a></span><span class="op" id="7742467">,</span>&nbsp;<span class="string" id="7742469">&#34;x+&#34;</span><span class="op" id="7742473">+</span><span class="ident" id="7742474"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742476">.</span><span class="ident" id="7742477">name</span><span class="op" id="7742481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742491">return</span>&nbsp;<span class="op" id="7742498">&amp;</span><span class="ident" id="7742499"><a href="/go/build/build_test.go.html#7741323">readNopCloser</a></span><span class="op" id="7742512">{</span><span class="ident" id="7742513"><a href="/go/build/build_test.go.html#7736863">strings</a></span><span class="op" id="7742520">.</span><span class="ident" id="7742521">NewReader</span><span class="op" id="7742530">(</span><span class="ident" id="7742531"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742533">.</span><span class="ident" id="7742534">data</span><span class="op" id="7742538">)</span><span class="op" id="7742539">}</span><span class="op" id="7742540">,</span>&nbsp;<span class="ident" id="7742542">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742552"><a href="/go/build/build_test.go.html#7742300">ctxt</a></span><span class="op" id="7742556">.</span><span class="ident" id="7742557">JoinPath</span>&nbsp;<span class="op" id="7742566">=</span>&nbsp;<span class="keyword" id="7742568">func</span><span class="op" id="7742572">(</span><span class="ident" id="7742573">elem</span>&nbsp;<span class="op" id="7742578">...</span><span class="builtintype" id="7742581">string</span><span class="op" id="7742587">)</span>&nbsp;<span class="builtintype" id="7742589">string</span>&nbsp;<span class="op" id="7742596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742601">return</span>&nbsp;<span class="ident" id="7742608"><a href="/go/build/build_test.go.html#7736863">strings</a></span><span class="op" id="7742615">.</span><span class="ident" id="7742616">Join</span><span class="op" id="7742620">(</span><span class="ident" id="7742621"><a href="/go/build/build_test.go.html#7742573">elem</a></span><span class="op" id="7742625">,</span>&nbsp;<span class="string" id="7742627">&#34;+&#34;</span><span class="op" id="7742630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742638">match</span><span class="op" id="7742643">,</span>&nbsp;<span class="ident" id="7742645">err</span>&nbsp;<span class="op" id="7742649">:=</span>&nbsp;<span class="ident" id="7742652"><a href="/go/build/build_test.go.html#7742300">ctxt</a></span><span class="op" id="7742656">.</span><span class="ident" id="7742657">MatchFile</span><span class="op" id="7742666">(</span><span class="string" id="7742667">&#34;x&#34;</span><span class="op" id="7742670">,</span>&nbsp;<span class="ident" id="7742672"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742674">.</span><span class="ident" id="7742675">name</span><span class="op" id="7742679">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742683">if</span>&nbsp;<span class="ident" id="7742686"><a href="/go/build/build_test.go.html#7742638">match</a></span>&nbsp;<span class="op" id="7742692">!=</span>&nbsp;<span class="ident" id="7742695"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742697">.</span><span class="ident" id="7742698">match</span>&nbsp;<span class="op" id="7742704">||</span>&nbsp;<span class="ident" id="7742707"><a href="/go/build/build_test.go.html#7742645">err</a></span>&nbsp;<span class="op" id="7742711">!=</span>&nbsp;<span class="ident" id="7742714">nil</span>&nbsp;<span class="op" id="7742718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742723"><a href="/go/build/build_test.go.html#7742245">t</a></span><span class="op" id="7742724">.</span><span class="ident" id="7742725">Fatalf</span><span class="op" id="7742731">(</span><span class="string" id="7742732">&#34;MatchFile(%q)&nbsp;=&nbsp;%v,&nbsp;%v,&nbsp;want&nbsp;%v,&nbsp;nil&#34;</span><span class="op" id="7742770">,</span>&nbsp;<span class="ident" id="7742772"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742774">.</span><span class="ident" id="7742775">name</span><span class="op" id="7742779">,</span>&nbsp;<span class="ident" id="7742781"><a href="/go/build/build_test.go.html#7742638">match</a></span><span class="op" id="7742786">,</span>&nbsp;<span class="ident" id="7742788"><a href="/go/build/build_test.go.html#7742645">err</a></span><span class="op" id="7742791">,</span>&nbsp;<span class="ident" id="7742793"><a href="/go/build/build_test.go.html#7742269">tt</a></span><span class="op" id="7742795">.</span><span class="ident" id="7742796">match</span><span class="op" id="7742801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742808">}</span><br>
<span class="lineno"></span><span class="op" id="7742810">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7742813">func</span>&nbsp;<span class="ident" id="7742818">TestImportCmd</span><span class="op" id="7742831">(</span><span class="ident" id="7742832">t</span>&nbsp;<span class="op" id="7742834">*</span><span class="ident" id="7742835"><a href="/go/build/build_test.go.html#7736874">testing</a></span><span class="op" id="7742842">.</span><span class="ident" id="7742843">T</span><span class="op" id="7742844">)</span>&nbsp;<span class="op" id="7742846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742849">p</span><span class="op" id="7742850">,</span>&nbsp;<span class="ident" id="7742852">err</span>&nbsp;<span class="op" id="7742856">:=</span>&nbsp;<span class="ident" id="7742859"><a href="/go/build/build.go.html#6454513">Import</a></span><span class="op" id="7742865">(</span><span class="string" id="7742866">&#34;cmd/internal/objfile&#34;</span><span class="op" id="7742888">,</span>&nbsp;<span class="string" id="7742890">&#34;&#34;</span><span class="op" id="7742892">,</span>&nbsp;<span class="num" id="7742894">0</span><span class="op" id="7742895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742898">if</span>&nbsp;<span class="ident" id="7742901"><a href="/go/build/build_test.go.html#7742852">err</a></span>&nbsp;<span class="op" id="7742905">!=</span>&nbsp;<span class="ident" id="7742908">nil</span>&nbsp;<span class="op" id="7742912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742916"><a href="/go/build/build_test.go.html#7742832">t</a></span><span class="op" id="7742917">.</span><span class="ident" id="7742918">Fatal</span><span class="op" id="7742923">(</span><span class="ident" id="7742924"><a href="/go/build/build_test.go.html#7742852">err</a></span><span class="op" id="7742927">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742933">if</span>&nbsp;<span class="op" id="7742936">!</span><span class="ident" id="7742937"><a href="/go/build/build_test.go.html#7736863">strings</a></span><span class="op" id="7742944">.</span><span class="ident" id="7742945">HasSuffix</span><span class="op" id="7742954">(</span><span class="ident" id="7742955"><a href="/go/build/build_test.go.html#7736824">filepath</a></span><span class="op" id="7742963">.</span><span class="ident" id="7742964">ToSlash</span><span class="op" id="7742971">(</span><span class="ident" id="7742972"><a href="/go/build/build_test.go.html#7742849">p</a></span><span class="op" id="7742973">.</span><span class="ident" id="7742974">Dir</span><span class="op" id="7742977">)</span><span class="op" id="7742978">,</span>&nbsp;<span class="string" id="7742980">&#34;src/cmd/internal/objfile&#34;</span><span class="op" id="7743006">)</span>&nbsp;<span class="op" id="7743008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743012"><a href="/go/build/build_test.go.html#7742832">t</a></span><span class="op" id="7743013">.</span><span class="ident" id="7743014">Fatalf</span><span class="op" id="7743020">(</span><span class="string" id="7743021">&#34;Import&nbsp;cmd/internal/objfile&nbsp;returned&nbsp;Dir=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7743075">,</span>&nbsp;<span class="ident" id="7743077"><a href="/go/build/build_test.go.html#7736824">filepath</a></span><span class="op" id="7743085">.</span><span class="ident" id="7743086">ToSlash</span><span class="op" id="7743093">(</span><span class="ident" id="7743094"><a href="/go/build/build_test.go.html#7742849">p</a></span><span class="op" id="7743095">.</span><span class="ident" id="7743096">Dir</span><span class="op" id="7743099">)</span><span class="op" id="7743100">,</span>&nbsp;<span class="string" id="7743102">&#34;.../src/cmd/internal/objfile&#34;</span><span class="op" id="7743132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743135">}</span><br>
<span class="lineno"></span><span class="op" id="7743137">}</span>
</div>
</body>
</html>
