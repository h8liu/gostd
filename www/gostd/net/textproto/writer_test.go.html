<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8488914">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8488970">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8489024">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8489075">package</span>&nbsp;<span class="ident" id="8489083">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8489094">import</span>&nbsp;<span class="op" id="8489101">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8489104">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8489113">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8489122">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8489132">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8489135">func</span>&nbsp;<span class="ident" id="8489140">TestPrintfLine</span><span class="op" id="8489154">(</span><span class="ident" id="8489155">t</span>&nbsp;<span class="op" id="8489157">*</span><span class="ident" id="8489158">testing</span><span class="op" id="8489165">.</span><span class="ident" id="8489166">T</span><span class="op" id="8489167">)</span>&nbsp;<span class="op" id="8489169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489172">var</span>&nbsp;<span class="ident" id="8489176">buf</span>&nbsp;<span class="ident" id="8489180">bytes</span><span class="op" id="8489185">.</span><span class="ident" id="8489186">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489194">w</span>&nbsp;<span class="op" id="8489196">:=</span>&nbsp;<span class="ident" id="8489199">NewWriter</span><span class="op" id="8489208">(</span><span class="ident" id="8489209">bufio</span><span class="op" id="8489214">.</span><span class="ident" id="8489215">NewWriter</span><span class="op" id="8489224">(</span><span class="op" id="8489225">&amp;</span><span class="ident" id="8489226">buf</span><span class="op" id="8489229">)</span><span class="op" id="8489230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489233">err</span>&nbsp;<span class="op" id="8489237">:=</span>&nbsp;<span class="ident" id="8489240">w</span><span class="op" id="8489241">.</span><span class="ident" id="8489242">PrintfLine</span><span class="op" id="8489252">(</span><span class="string" id="8489253">&#34;foo&nbsp;%d&#34;</span><span class="op" id="8489261">,</span>&nbsp;<span class="num" id="8489263">123</span><span class="op" id="8489266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489269">if</span>&nbsp;<span class="ident" id="8489272">s</span>&nbsp;<span class="op" id="8489274">:=</span>&nbsp;<span class="ident" id="8489277">buf</span><span class="op" id="8489280">.</span><span class="ident" id="8489281">String</span><span class="op" id="8489287">(</span><span class="op" id="8489288">)</span><span class="op" id="8489289">;</span>&nbsp;<span class="ident" id="8489291">s</span>&nbsp;<span class="op" id="8489293">!=</span>&nbsp;<span class="string" id="8489296">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="8489310">||</span>&nbsp;<span class="ident" id="8489313">err</span>&nbsp;<span class="op" id="8489317">!=</span>&nbsp;<span class="ident" id="8489320">nil</span>&nbsp;<span class="op" id="8489324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489328">t</span><span class="op" id="8489329">.</span><span class="ident" id="8489330">Fatalf</span><span class="op" id="8489336">(</span><span class="string" id="8489337">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="8489351">,</span>&nbsp;<span class="ident" id="8489353">s</span><span class="op" id="8489354">,</span>&nbsp;<span class="ident" id="8489356">err</span><span class="op" id="8489359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489362">}</span><br>
<span class="lineno">20</span><span class="op" id="8489364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8489367">func</span>&nbsp;<span class="ident" id="8489372">TestDotWriter</span><span class="op" id="8489385">(</span><span class="ident" id="8489386">t</span>&nbsp;<span class="op" id="8489388">*</span><span class="ident" id="8489389">testing</span><span class="op" id="8489396">.</span><span class="ident" id="8489397">T</span><span class="op" id="8489398">)</span>&nbsp;<span class="op" id="8489400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489403">var</span>&nbsp;<span class="ident" id="8489407">buf</span>&nbsp;<span class="ident" id="8489411">bytes</span><span class="op" id="8489416">.</span><span class="ident" id="8489417">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489425">w</span>&nbsp;<span class="op" id="8489427">:=</span>&nbsp;<span class="ident" id="8489430">NewWriter</span><span class="op" id="8489439">(</span><span class="ident" id="8489440">bufio</span><span class="op" id="8489445">.</span><span class="ident" id="8489446">NewWriter</span><span class="op" id="8489455">(</span><span class="op" id="8489456">&amp;</span><span class="ident" id="8489457">buf</span><span class="op" id="8489460">)</span><span class="op" id="8489461">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489464">d</span>&nbsp;<span class="op" id="8489466">:=</span>&nbsp;<span class="ident" id="8489469">w</span><span class="op" id="8489470">.</span><span class="ident" id="8489471">DotWriter</span><span class="op" id="8489480">(</span><span class="op" id="8489481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489484">n</span><span class="op" id="8489485">,</span>&nbsp;<span class="ident" id="8489487">err</span>&nbsp;<span class="op" id="8489491">:=</span>&nbsp;<span class="ident" id="8489494">d</span><span class="op" id="8489495">.</span><span class="ident" id="8489496">Write</span><span class="op" id="8489501">(</span><span class="op" id="8489502">[</span><span class="op" id="8489503">]</span><span class="builtintype" id="8489504">byte</span><span class="op" id="8489508">(</span><span class="string" id="8489509">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="8489536">)</span><span class="op" id="8489537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489540">if</span>&nbsp;<span class="ident" id="8489543">n</span>&nbsp;<span class="op" id="8489545">!=</span>&nbsp;<span class="num" id="8489548">21</span>&nbsp;<span class="op" id="8489551">||</span>&nbsp;<span class="ident" id="8489554">err</span>&nbsp;<span class="op" id="8489558">!=</span>&nbsp;<span class="ident" id="8489561">nil</span>&nbsp;<span class="op" id="8489565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489569">t</span><span class="op" id="8489570">.</span><span class="ident" id="8489571">Fatalf</span><span class="op" id="8489577">(</span><span class="string" id="8489578">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="8489593">,</span>&nbsp;<span class="ident" id="8489595">n</span><span class="op" id="8489596">,</span>&nbsp;<span class="ident" id="8489598">err</span><span class="op" id="8489601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489604">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489607">d</span><span class="op" id="8489608">.</span><span class="ident" id="8489609">Close</span><span class="op" id="8489614">(</span><span class="op" id="8489615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489618">want</span>&nbsp;<span class="op" id="8489623">:=</span>&nbsp;<span class="string" id="8489626">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489676">if</span>&nbsp;<span class="ident" id="8489679">s</span>&nbsp;<span class="op" id="8489681">:=</span>&nbsp;<span class="ident" id="8489684">buf</span><span class="op" id="8489687">.</span><span class="ident" id="8489688">String</span><span class="op" id="8489694">(</span><span class="op" id="8489695">)</span><span class="op" id="8489696">;</span>&nbsp;<span class="ident" id="8489698">s</span>&nbsp;<span class="op" id="8489700">!=</span>&nbsp;<span class="ident" id="8489703">want</span>&nbsp;<span class="op" id="8489708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489712">t</span><span class="op" id="8489713">.</span><span class="ident" id="8489714">Fatalf</span><span class="op" id="8489720">(</span><span class="string" id="8489721">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="8489731">,</span>&nbsp;<span class="ident" id="8489733">s</span><span class="op" id="8489734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489737">}</span><br>
<span class="lineno">35</span><span class="op" id="8489739">}</span>
</div>
</body>
</html>
