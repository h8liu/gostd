<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7717317">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7717372">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7717426">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7717477">package</span>&nbsp;<span class="ident" id="7717485">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7717490">import</span>&nbsp;<span class="op" id="7717497">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717500">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717509">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717522">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717528">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717536">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717547">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717558">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7717569">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7717576">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7717579">func</span>&nbsp;<span class="ident" id="7717584">TestFileInfoHeader</span><span class="op" id="7717602">(</span><span class="ident" id="7717603">t</span>&nbsp;<span class="op" id="7717605">*</span><span class="ident" id="7717606">testing</span><span class="op" id="7717613">.</span><span class="ident" id="7717614">T</span><span class="op" id="7717615">)</span>&nbsp;<span class="op" id="7717617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717620">fi</span><span class="op" id="7717622">,</span>&nbsp;<span class="ident" id="7717624">err</span>&nbsp;<span class="op" id="7717628">:=</span>&nbsp;<span class="ident" id="7717631">os</span><span class="op" id="7717633">.</span><span class="ident" id="7717634">Stat</span><span class="op" id="7717638">(</span><span class="string" id="7717639">&#34;testdata/small.txt&#34;</span><span class="op" id="7717659">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717662">if</span>&nbsp;<span class="ident" id="7717665">err</span>&nbsp;<span class="op" id="7717669">!=</span>&nbsp;<span class="ident" id="7717672">nil</span>&nbsp;<span class="op" id="7717676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717680">t</span><span class="op" id="7717681">.</span><span class="ident" id="7717682">Fatal</span><span class="op" id="7717687">(</span><span class="ident" id="7717688">err</span><span class="op" id="7717691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717697">h</span><span class="op" id="7717698">,</span>&nbsp;<span class="ident" id="7717700">err</span>&nbsp;<span class="op" id="7717704">:=</span>&nbsp;<span class="ident" id="7717707">FileInfoHeader</span><span class="op" id="7717721">(</span><span class="ident" id="7717722">fi</span><span class="op" id="7717724">,</span>&nbsp;<span class="string" id="7717726">&#34;&#34;</span><span class="op" id="7717728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717731">if</span>&nbsp;<span class="ident" id="7717734">err</span>&nbsp;<span class="op" id="7717738">!=</span>&nbsp;<span class="ident" id="7717741">nil</span>&nbsp;<span class="op" id="7717745">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717749">t</span><span class="op" id="7717750">.</span><span class="ident" id="7717751">Fatalf</span><span class="op" id="7717757">(</span><span class="string" id="7717758">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7717778">,</span>&nbsp;<span class="ident" id="7717780">err</span><span class="op" id="7717783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717789">if</span>&nbsp;<span class="ident" id="7717792">g</span><span class="op" id="7717793">,</span>&nbsp;<span class="ident" id="7717795">e</span>&nbsp;<span class="op" id="7717797">:=</span>&nbsp;<span class="ident" id="7717800">h</span><span class="op" id="7717801">.</span><span class="ident" id="7717802">Name</span><span class="op" id="7717806">,</span>&nbsp;<span class="string" id="7717808">&#34;small.txt&#34;</span><span class="op" id="7717819">;</span>&nbsp;<span class="ident" id="7717821">g</span>&nbsp;<span class="op" id="7717823">!=</span>&nbsp;<span class="ident" id="7717826">e</span>&nbsp;<span class="op" id="7717828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717832">t</span><span class="op" id="7717833">.</span><span class="ident" id="7717834">Errorf</span><span class="op" id="7717840">(</span><span class="string" id="7717841">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7717861">,</span>&nbsp;<span class="ident" id="7717863">g</span><span class="op" id="7717864">,</span>&nbsp;<span class="ident" id="7717866">e</span><span class="op" id="7717867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717870">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717873">if</span>&nbsp;<span class="ident" id="7717876">g</span><span class="op" id="7717877">,</span>&nbsp;<span class="ident" id="7717879">e</span>&nbsp;<span class="op" id="7717881">:=</span>&nbsp;<span class="ident" id="7717884">h</span><span class="op" id="7717885">.</span><span class="ident" id="7717886">Mode</span><span class="op" id="7717890">,</span>&nbsp;<span class="ident" id="7717892">int64</span><span class="op" id="7717897">(</span><span class="ident" id="7717898">fi</span><span class="op" id="7717900">.</span><span class="ident" id="7717901">Mode</span><span class="op" id="7717905">(</span><span class="op" id="7717906">)</span><span class="op" id="7717907">.</span><span class="ident" id="7717908">Perm</span><span class="op" id="7717912">(</span><span class="op" id="7717913">)</span><span class="op" id="7717914">)</span><span class="op" id="7717915">|</span><span class="ident" id="7717916">c_ISREG</span><span class="op" id="7717923">;</span>&nbsp;<span class="ident" id="7717925">g</span>&nbsp;<span class="op" id="7717927">!=</span>&nbsp;<span class="ident" id="7717930">e</span>&nbsp;<span class="op" id="7717932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717936">t</span><span class="op" id="7717937">.</span><span class="ident" id="7717938">Errorf</span><span class="op" id="7717944">(</span><span class="string" id="7717945">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7717967">,</span>&nbsp;<span class="ident" id="7717969">g</span><span class="op" id="7717970">,</span>&nbsp;<span class="ident" id="7717972">e</span><span class="op" id="7717973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717979">if</span>&nbsp;<span class="ident" id="7717982">g</span><span class="op" id="7717983">,</span>&nbsp;<span class="ident" id="7717985">e</span>&nbsp;<span class="op" id="7717987">:=</span>&nbsp;<span class="ident" id="7717990">h</span><span class="op" id="7717991">.</span><span class="ident" id="7717992">Size</span><span class="op" id="7717996">,</span>&nbsp;<span class="ident" id="7717998">int64</span><span class="op" id="7718003">(</span><span class="num" id="7718004">5</span><span class="op" id="7718005">)</span><span class="op" id="7718006">;</span>&nbsp;<span class="ident" id="7718008">g</span>&nbsp;<span class="op" id="7718010">!=</span>&nbsp;<span class="ident" id="7718013">e</span>&nbsp;<span class="op" id="7718015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718019">t</span><span class="op" id="7718020">.</span><span class="ident" id="7718021">Errorf</span><span class="op" id="7718027">(</span><span class="string" id="7718028">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7718048">,</span>&nbsp;<span class="ident" id="7718050">g</span><span class="op" id="7718051">,</span>&nbsp;<span class="ident" id="7718053">e</span><span class="op" id="7718054">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718060">if</span>&nbsp;<span class="ident" id="7718063">g</span><span class="op" id="7718064">,</span>&nbsp;<span class="ident" id="7718066">e</span>&nbsp;<span class="op" id="7718068">:=</span>&nbsp;<span class="ident" id="7718071">h</span><span class="op" id="7718072">.</span><span class="ident" id="7718073">ModTime</span><span class="op" id="7718080">,</span>&nbsp;<span class="ident" id="7718082">fi</span><span class="op" id="7718084">.</span><span class="ident" id="7718085">ModTime</span><span class="op" id="7718092">(</span><span class="op" id="7718093">)</span><span class="op" id="7718094">;</span>&nbsp;<span class="op" id="7718096">!</span><span class="ident" id="7718097">g</span><span class="op" id="7718098">.</span><span class="ident" id="7718099">Equal</span><span class="op" id="7718104">(</span><span class="ident" id="7718105">e</span><span class="op" id="7718106">)</span>&nbsp;<span class="op" id="7718108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718112">t</span><span class="op" id="7718113">.</span><span class="ident" id="7718114">Errorf</span><span class="op" id="7718120">(</span><span class="string" id="7718121">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7718144">,</span>&nbsp;<span class="ident" id="7718146">g</span><span class="op" id="7718147">,</span>&nbsp;<span class="ident" id="7718149">e</span><span class="op" id="7718150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718156">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718214">if</span>&nbsp;<span class="ident" id="7718217">_</span><span class="op" id="7718218">,</span>&nbsp;<span class="ident" id="7718220">err</span>&nbsp;<span class="op" id="7718224">:=</span>&nbsp;<span class="ident" id="7718227">FileInfoHeader</span><span class="op" id="7718241">(</span><span class="ident" id="7718242">nil</span><span class="op" id="7718245">,</span>&nbsp;<span class="string" id="7718247">&#34;&#34;</span><span class="op" id="7718249">)</span><span class="op" id="7718250">;</span>&nbsp;<span class="ident" id="7718252">err</span>&nbsp;<span class="op" id="7718256">==</span>&nbsp;<span class="ident" id="7718259">nil</span>&nbsp;<span class="op" id="7718263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718267">t</span><span class="op" id="7718268">.</span><span class="ident" id="7718269">Fatalf</span><span class="op" id="7718275">(</span><span class="string" id="7718276">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="7718327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718330">}</span><br>
<span class="lineno"></span><span class="op" id="7718332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7718335">func</span>&nbsp;<span class="ident" id="7718340">TestFileInfoHeaderDir</span><span class="op" id="7718361">(</span><span class="ident" id="7718362">t</span>&nbsp;<span class="op" id="7718364">*</span><span class="ident" id="7718365">testing</span><span class="op" id="7718372">.</span><span class="ident" id="7718373">T</span><span class="op" id="7718374">)</span>&nbsp;<span class="op" id="7718376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718379">fi</span><span class="op" id="7718381">,</span>&nbsp;<span class="ident" id="7718383">err</span>&nbsp;<span class="op" id="7718387">:=</span>&nbsp;<span class="ident" id="7718390">os</span><span class="op" id="7718392">.</span><span class="ident" id="7718393">Stat</span><span class="op" id="7718397">(</span><span class="string" id="7718398">&#34;testdata&#34;</span><span class="op" id="7718408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718411">if</span>&nbsp;<span class="ident" id="7718414">err</span>&nbsp;<span class="op" id="7718418">!=</span>&nbsp;<span class="ident" id="7718421">nil</span>&nbsp;<span class="op" id="7718425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718429">t</span><span class="op" id="7718430">.</span><span class="ident" id="7718431">Fatal</span><span class="op" id="7718436">(</span><span class="ident" id="7718437">err</span><span class="op" id="7718440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718443">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718446">h</span><span class="op" id="7718447">,</span>&nbsp;<span class="ident" id="7718449">err</span>&nbsp;<span class="op" id="7718453">:=</span>&nbsp;<span class="ident" id="7718456">FileInfoHeader</span><span class="op" id="7718470">(</span><span class="ident" id="7718471">fi</span><span class="op" id="7718473">,</span>&nbsp;<span class="string" id="7718475">&#34;&#34;</span><span class="op" id="7718477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718480">if</span>&nbsp;<span class="ident" id="7718483">err</span>&nbsp;<span class="op" id="7718487">!=</span>&nbsp;<span class="ident" id="7718490">nil</span>&nbsp;<span class="op" id="7718494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718498">t</span><span class="op" id="7718499">.</span><span class="ident" id="7718500">Fatalf</span><span class="op" id="7718506">(</span><span class="string" id="7718507">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7718527">,</span>&nbsp;<span class="ident" id="7718529">err</span><span class="op" id="7718532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718538">if</span>&nbsp;<span class="ident" id="7718541">g</span><span class="op" id="7718542">,</span>&nbsp;<span class="ident" id="7718544">e</span>&nbsp;<span class="op" id="7718546">:=</span>&nbsp;<span class="ident" id="7718549">h</span><span class="op" id="7718550">.</span><span class="ident" id="7718551">Name</span><span class="op" id="7718555">,</span>&nbsp;<span class="string" id="7718557">&#34;testdata/&#34;</span><span class="op" id="7718568">;</span>&nbsp;<span class="ident" id="7718570">g</span>&nbsp;<span class="op" id="7718572">!=</span>&nbsp;<span class="ident" id="7718575">e</span>&nbsp;<span class="op" id="7718577">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718581">t</span><span class="op" id="7718582">.</span><span class="ident" id="7718583">Errorf</span><span class="op" id="7718589">(</span><span class="string" id="7718590">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718610">,</span>&nbsp;<span class="ident" id="7718612">g</span><span class="op" id="7718613">,</span>&nbsp;<span class="ident" id="7718615">e</span><span class="op" id="7718616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718622">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718669">if</span>&nbsp;<span class="ident" id="7718672">g</span><span class="op" id="7718673">,</span>&nbsp;<span class="ident" id="7718675">e</span>&nbsp;<span class="op" id="7718677">:=</span>&nbsp;<span class="ident" id="7718680">h</span><span class="op" id="7718681">.</span><span class="ident" id="7718682">Mode</span><span class="op" id="7718686">&amp;^</span><span class="ident" id="7718688">c_ISGID</span><span class="op" id="7718695">,</span>&nbsp;<span class="ident" id="7718697">int64</span><span class="op" id="7718702">(</span><span class="ident" id="7718703">fi</span><span class="op" id="7718705">.</span><span class="ident" id="7718706">Mode</span><span class="op" id="7718710">(</span><span class="op" id="7718711">)</span><span class="op" id="7718712">.</span><span class="ident" id="7718713">Perm</span><span class="op" id="7718717">(</span><span class="op" id="7718718">)</span><span class="op" id="7718719">)</span><span class="op" id="7718720">|</span><span class="ident" id="7718721">c_ISDIR</span><span class="op" id="7718728">;</span>&nbsp;<span class="ident" id="7718730">g</span>&nbsp;<span class="op" id="7718732">!=</span>&nbsp;<span class="ident" id="7718735">e</span>&nbsp;<span class="op" id="7718737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718741">t</span><span class="op" id="7718742">.</span><span class="ident" id="7718743">Errorf</span><span class="op" id="7718749">(</span><span class="string" id="7718750">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7718772">,</span>&nbsp;<span class="ident" id="7718774">g</span><span class="op" id="7718775">,</span>&nbsp;<span class="ident" id="7718777">e</span><span class="op" id="7718778">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718784">if</span>&nbsp;<span class="ident" id="7718787">g</span><span class="op" id="7718788">,</span>&nbsp;<span class="ident" id="7718790">e</span>&nbsp;<span class="op" id="7718792">:=</span>&nbsp;<span class="ident" id="7718795">h</span><span class="op" id="7718796">.</span><span class="ident" id="7718797">Size</span><span class="op" id="7718801">,</span>&nbsp;<span class="ident" id="7718803">int64</span><span class="op" id="7718808">(</span><span class="num" id="7718809">0</span><span class="op" id="7718810">)</span><span class="op" id="7718811">;</span>&nbsp;<span class="ident" id="7718813">g</span>&nbsp;<span class="op" id="7718815">!=</span>&nbsp;<span class="ident" id="7718818">e</span>&nbsp;<span class="op" id="7718820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718824">t</span><span class="op" id="7718825">.</span><span class="ident" id="7718826">Errorf</span><span class="op" id="7718832">(</span><span class="string" id="7718833">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7718853">,</span>&nbsp;<span class="ident" id="7718855">g</span><span class="op" id="7718856">,</span>&nbsp;<span class="ident" id="7718858">e</span><span class="op" id="7718859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718865">if</span>&nbsp;<span class="ident" id="7718868">g</span><span class="op" id="7718869">,</span>&nbsp;<span class="ident" id="7718871">e</span>&nbsp;<span class="op" id="7718873">:=</span>&nbsp;<span class="ident" id="7718876">h</span><span class="op" id="7718877">.</span><span class="ident" id="7718878">ModTime</span><span class="op" id="7718885">,</span>&nbsp;<span class="ident" id="7718887">fi</span><span class="op" id="7718889">.</span><span class="ident" id="7718890">ModTime</span><span class="op" id="7718897">(</span><span class="op" id="7718898">)</span><span class="op" id="7718899">;</span>&nbsp;<span class="op" id="7718901">!</span><span class="ident" id="7718902">g</span><span class="op" id="7718903">.</span><span class="ident" id="7718904">Equal</span><span class="op" id="7718909">(</span><span class="ident" id="7718910">e</span><span class="op" id="7718911">)</span>&nbsp;<span class="op" id="7718913">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718917">t</span><span class="op" id="7718918">.</span><span class="ident" id="7718919">Errorf</span><span class="op" id="7718925">(</span><span class="string" id="7718926">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7718949">,</span>&nbsp;<span class="ident" id="7718951">g</span><span class="op" id="7718952">,</span>&nbsp;<span class="ident" id="7718954">e</span><span class="op" id="7718955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718958">}</span><br>
<span class="lineno"></span><span class="op" id="7718960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7718963">func</span>&nbsp;<span class="ident" id="7718968">TestFileInfoHeaderSymlink</span><span class="op" id="7718993">(</span><span class="ident" id="7718994">t</span>&nbsp;<span class="op" id="7718996">*</span><span class="ident" id="7718997">testing</span><span class="op" id="7719004">.</span><span class="ident" id="7719005">T</span><span class="op" id="7719006">)</span>&nbsp;<span class="op" id="7719008">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719011">h</span><span class="op" id="7719012">,</span>&nbsp;<span class="ident" id="7719014">err</span>&nbsp;<span class="op" id="7719018">:=</span>&nbsp;<span class="ident" id="7719021">FileInfoHeader</span><span class="op" id="7719035">(</span><span class="ident" id="7719036">symlink</span><span class="op" id="7719043">{</span><span class="op" id="7719044">}</span><span class="op" id="7719045">,</span>&nbsp;<span class="string" id="7719047">&#34;some-target&#34;</span><span class="op" id="7719060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719063">if</span>&nbsp;<span class="ident" id="7719066">err</span>&nbsp;<span class="op" id="7719070">!=</span>&nbsp;<span class="ident" id="7719073">nil</span>&nbsp;<span class="op" id="7719077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719081">t</span><span class="op" id="7719082">.</span><span class="ident" id="7719083">Fatal</span><span class="op" id="7719088">(</span><span class="ident" id="7719089">err</span><span class="op" id="7719092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719098">if</span>&nbsp;<span class="ident" id="7719101">g</span><span class="op" id="7719102">,</span>&nbsp;<span class="ident" id="7719104">e</span>&nbsp;<span class="op" id="7719106">:=</span>&nbsp;<span class="ident" id="7719109">h</span><span class="op" id="7719110">.</span><span class="ident" id="7719111">Name</span><span class="op" id="7719115">,</span>&nbsp;<span class="string" id="7719117">&#34;some-symlink&#34;</span><span class="op" id="7719131">;</span>&nbsp;<span class="ident" id="7719133">g</span>&nbsp;<span class="op" id="7719135">!=</span>&nbsp;<span class="ident" id="7719138">e</span>&nbsp;<span class="op" id="7719140">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719144">t</span><span class="op" id="7719145">.</span><span class="ident" id="7719146">Errorf</span><span class="op" id="7719152">(</span><span class="string" id="7719153">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719173">,</span>&nbsp;<span class="ident" id="7719175">g</span><span class="op" id="7719176">,</span>&nbsp;<span class="ident" id="7719178">e</span><span class="op" id="7719179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719185">if</span>&nbsp;<span class="ident" id="7719188">g</span><span class="op" id="7719189">,</span>&nbsp;<span class="ident" id="7719191">e</span>&nbsp;<span class="op" id="7719193">:=</span>&nbsp;<span class="ident" id="7719196">h</span><span class="op" id="7719197">.</span><span class="ident" id="7719198">Linkname</span><span class="op" id="7719206">,</span>&nbsp;<span class="string" id="7719208">&#34;some-target&#34;</span><span class="op" id="7719221">;</span>&nbsp;<span class="ident" id="7719223">g</span>&nbsp;<span class="op" id="7719225">!=</span>&nbsp;<span class="ident" id="7719228">e</span>&nbsp;<span class="op" id="7719230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719234">t</span><span class="op" id="7719235">.</span><span class="ident" id="7719236">Errorf</span><span class="op" id="7719242">(</span><span class="string" id="7719243">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719267">,</span>&nbsp;<span class="ident" id="7719269">g</span><span class="op" id="7719270">,</span>&nbsp;<span class="ident" id="7719272">e</span><span class="op" id="7719273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719276">}</span><br>
<span class="lineno">80</span><span class="op" id="7719278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7719281">type</span>&nbsp;<span class="ident" id="7719286">symlink</span>&nbsp;<span class="keyword" id="7719294">struct</span><span class="op" id="7719300">{</span><span class="op" id="7719301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7719304">func</span>&nbsp;<span class="op" id="7719309">(</span><span class="ident" id="7719310">symlink</span><span class="op" id="7719317">)</span>&nbsp;<span class="ident" id="7719319">Name</span><span class="op" id="7719323">(</span><span class="op" id="7719324">)</span>&nbsp;<span class="builtintype" id="7719326">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7719339">{</span>&nbsp;<span class="keyword" id="7719341">return</span>&nbsp;<span class="string" id="7719348">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="7719363">}</span><br>
<span class="lineno">85</span><span class="keyword" id="7719365">func</span>&nbsp;<span class="op" id="7719370">(</span><span class="ident" id="7719371">symlink</span><span class="op" id="7719378">)</span>&nbsp;<span class="ident" id="7719380">Size</span><span class="op" id="7719384">(</span><span class="op" id="7719385">)</span>&nbsp;<span class="ident" id="7719387">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7719400">{</span>&nbsp;<span class="keyword" id="7719402">return</span>&nbsp;<span class="num" id="7719409">0</span>&nbsp;<span class="op" id="7719411">}</span><br>
<span class="lineno"></span><span class="keyword" id="7719413">func</span>&nbsp;<span class="op" id="7719418">(</span><span class="ident" id="7719419">symlink</span><span class="op" id="7719426">)</span>&nbsp;<span class="ident" id="7719428">Mode</span><span class="op" id="7719432">(</span><span class="op" id="7719433">)</span>&nbsp;<span class="ident" id="7719435">os</span><span class="op" id="7719437">.</span><span class="ident" id="7719438">FileMode</span>&nbsp;&nbsp;<span class="op" id="7719448">{</span>&nbsp;<span class="keyword" id="7719450">return</span>&nbsp;<span class="ident" id="7719457">os</span><span class="op" id="7719459">.</span><span class="ident" id="7719460">ModeSymlink</span>&nbsp;<span class="op" id="7719472">}</span><br>
<span class="lineno"></span><span class="keyword" id="7719474">func</span>&nbsp;<span class="op" id="7719479">(</span><span class="ident" id="7719480">symlink</span><span class="op" id="7719487">)</span>&nbsp;<span class="ident" id="7719489">ModTime</span><span class="op" id="7719496">(</span><span class="op" id="7719497">)</span>&nbsp;<span class="ident" id="7719499">time</span><span class="op" id="7719503">.</span><span class="ident" id="7719504">Time</span>&nbsp;<span class="op" id="7719509">{</span>&nbsp;<span class="keyword" id="7719511">return</span>&nbsp;<span class="ident" id="7719518">time</span><span class="op" id="7719522">.</span><span class="ident" id="7719523">Time</span><span class="op" id="7719527">{</span><span class="op" id="7719528">}</span>&nbsp;<span class="op" id="7719530">}</span><br>
<span class="lineno"></span><span class="keyword" id="7719532">func</span>&nbsp;<span class="op" id="7719537">(</span><span class="ident" id="7719538">symlink</span><span class="op" id="7719545">)</span>&nbsp;<span class="ident" id="7719547">IsDir</span><span class="op" id="7719552">(</span><span class="op" id="7719553">)</span>&nbsp;<span class="builtintype" id="7719555">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7719567">{</span>&nbsp;<span class="keyword" id="7719569">return</span>&nbsp;<span class="ident" id="7719576">false</span>&nbsp;<span class="op" id="7719582">}</span><br>
<span class="lineno"></span><span class="keyword" id="7719584">func</span>&nbsp;<span class="op" id="7719589">(</span><span class="ident" id="7719590">symlink</span><span class="op" id="7719597">)</span>&nbsp;<span class="ident" id="7719599">Sys</span><span class="op" id="7719602">(</span><span class="op" id="7719603">)</span>&nbsp;<span class="keyword" id="7719605">interface</span><span class="op" id="7719614">{</span><span class="op" id="7719615">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7719619">{</span>&nbsp;<span class="keyword" id="7719621">return</span>&nbsp;<span class="ident" id="7719628">nil</span>&nbsp;<span class="op" id="7719632">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="7719635">func</span>&nbsp;<span class="ident" id="7719640">TestRoundTrip</span><span class="op" id="7719653">(</span><span class="ident" id="7719654">t</span>&nbsp;<span class="op" id="7719656">*</span><span class="ident" id="7719657">testing</span><span class="op" id="7719664">.</span><span class="ident" id="7719665">T</span><span class="op" id="7719666">)</span>&nbsp;<span class="op" id="7719668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719671">data</span>&nbsp;<span class="op" id="7719676">:=</span>&nbsp;<span class="op" id="7719679">[</span><span class="op" id="7719680">]</span><span class="builtintype" id="7719681">byte</span><span class="op" id="7719685">(</span><span class="string" id="7719686">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="7719706">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719710">var</span>&nbsp;<span class="ident" id="7719714">b</span>&nbsp;<span class="ident" id="7719716">bytes</span><span class="op" id="7719721">.</span><span class="ident" id="7719722">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719730">tw</span>&nbsp;<span class="op" id="7719733">:=</span>&nbsp;<span class="ident" id="7719736">NewWriter</span><span class="op" id="7719745">(</span><span class="op" id="7719746">&amp;</span><span class="ident" id="7719747">b</span><span class="op" id="7719748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719751">hdr</span>&nbsp;<span class="op" id="7719755">:=</span>&nbsp;<span class="op" id="7719758">&amp;</span><span class="ident" id="7719759">Header</span><span class="op" id="7719765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719769">Name</span><span class="op" id="7719773">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7719778">&#34;file.txt&#34;</span><span class="op" id="7719788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719792">Uid</span><span class="op" id="7719795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7719801">1</span>&nbsp;<span class="op" id="7719803">&lt;&lt;</span>&nbsp;<span class="num" id="7719806">21</span><span class="op" id="7719808">,</span>&nbsp;<span class="comment" id="7719810">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719842">Size</span><span class="op" id="7719846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719851">int64</span><span class="op" id="7719856">(</span><span class="builtinfunc" id="7719857">len</span><span class="op" id="7719860">(</span><span class="ident" id="7719861">data</span><span class="op" id="7719865">)</span><span class="op" id="7719866">)</span><span class="op" id="7719867">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719871">ModTime</span><span class="op" id="7719878">:</span>&nbsp;<span class="ident" id="7719880">time</span><span class="op" id="7719884">.</span><span class="ident" id="7719885">Now</span><span class="op" id="7719888">(</span><span class="op" id="7719889">)</span><span class="op" id="7719890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7719896">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719936">hdr</span><span class="op" id="7719939">.</span><span class="ident" id="7719940">ModTime</span>&nbsp;<span class="op" id="7719948">=</span>&nbsp;<span class="ident" id="7719950">hdr</span><span class="op" id="7719953">.</span><span class="ident" id="7719954">ModTime</span><span class="op" id="7719961">.</span><span class="ident" id="7719962">Add</span><span class="op" id="7719965">(</span><span class="op" id="7719966">-</span><span class="ident" id="7719967">time</span><span class="op" id="7719971">.</span><span class="ident" id="7719972">Duration</span><span class="op" id="7719980">(</span><span class="ident" id="7719981">hdr</span><span class="op" id="7719984">.</span><span class="ident" id="7719985">ModTime</span><span class="op" id="7719992">.</span><span class="ident" id="7719993">Nanosecond</span><span class="op" id="7720003">(</span><span class="op" id="7720004">)</span><span class="op" id="7720005">)</span>&nbsp;<span class="op" id="7720007">*</span>&nbsp;<span class="ident" id="7720009">time</span><span class="op" id="7720013">.</span><span class="ident" id="7720014">Nanosecond</span><span class="op" id="7720024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720027">if</span>&nbsp;<span class="ident" id="7720030">err</span>&nbsp;<span class="op" id="7720034">:=</span>&nbsp;<span class="ident" id="7720037">tw</span><span class="op" id="7720039">.</span><span class="ident" id="7720040">WriteHeader</span><span class="op" id="7720051">(</span><span class="ident" id="7720052">hdr</span><span class="op" id="7720055">)</span><span class="op" id="7720056">;</span>&nbsp;<span class="ident" id="7720058">err</span>&nbsp;<span class="op" id="7720062">!=</span>&nbsp;<span class="ident" id="7720065">nil</span>&nbsp;<span class="op" id="7720069">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720073">t</span><span class="op" id="7720074">.</span><span class="ident" id="7720075">Fatalf</span><span class="op" id="7720081">(</span><span class="string" id="7720082">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="7720102">,</span>&nbsp;<span class="ident" id="7720104">err</span><span class="op" id="7720107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720113">if</span>&nbsp;<span class="ident" id="7720116">_</span><span class="op" id="7720117">,</span>&nbsp;<span class="ident" id="7720119">err</span>&nbsp;<span class="op" id="7720123">:=</span>&nbsp;<span class="ident" id="7720126">tw</span><span class="op" id="7720128">.</span><span class="ident" id="7720129">Write</span><span class="op" id="7720134">(</span><span class="ident" id="7720135">data</span><span class="op" id="7720139">)</span><span class="op" id="7720140">;</span>&nbsp;<span class="ident" id="7720142">err</span>&nbsp;<span class="op" id="7720146">!=</span>&nbsp;<span class="ident" id="7720149">nil</span>&nbsp;<span class="op" id="7720153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720157">t</span><span class="op" id="7720158">.</span><span class="ident" id="7720159">Fatalf</span><span class="op" id="7720165">(</span><span class="string" id="7720166">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="7720180">,</span>&nbsp;<span class="ident" id="7720182">err</span><span class="op" id="7720185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720188">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720191">if</span>&nbsp;<span class="ident" id="7720194">err</span>&nbsp;<span class="op" id="7720198">:=</span>&nbsp;<span class="ident" id="7720201">tw</span><span class="op" id="7720203">.</span><span class="ident" id="7720204">Close</span><span class="op" id="7720209">(</span><span class="op" id="7720210">)</span><span class="op" id="7720211">;</span>&nbsp;<span class="ident" id="7720213">err</span>&nbsp;<span class="op" id="7720217">!=</span>&nbsp;<span class="ident" id="7720220">nil</span>&nbsp;<span class="op" id="7720224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720228">t</span><span class="op" id="7720229">.</span><span class="ident" id="7720230">Fatalf</span><span class="op" id="7720236">(</span><span class="string" id="7720237">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="7720251">,</span>&nbsp;<span class="ident" id="7720253">err</span><span class="op" id="7720256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720263">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720281">tr</span>&nbsp;<span class="op" id="7720284">:=</span>&nbsp;<span class="ident" id="7720287">NewReader</span><span class="op" id="7720296">(</span><span class="op" id="7720297">&amp;</span><span class="ident" id="7720298">b</span><span class="op" id="7720299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720302">rHdr</span><span class="op" id="7720306">,</span>&nbsp;<span class="ident" id="7720308">err</span>&nbsp;<span class="op" id="7720312">:=</span>&nbsp;<span class="ident" id="7720315">tr</span><span class="op" id="7720317">.</span><span class="ident" id="7720318">Next</span><span class="op" id="7720322">(</span><span class="op" id="7720323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720326">if</span>&nbsp;<span class="ident" id="7720329">err</span>&nbsp;<span class="op" id="7720333">!=</span>&nbsp;<span class="ident" id="7720336">nil</span>&nbsp;<span class="op" id="7720340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720344">t</span><span class="op" id="7720345">.</span><span class="ident" id="7720346">Fatalf</span><span class="op" id="7720352">(</span><span class="string" id="7720353">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="7720366">,</span>&nbsp;<span class="ident" id="7720368">err</span><span class="op" id="7720371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720374">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720377">if</span>&nbsp;<span class="op" id="7720380">!</span><span class="ident" id="7720381">reflect</span><span class="op" id="7720388">.</span><span class="ident" id="7720389">DeepEqual</span><span class="op" id="7720398">(</span><span class="ident" id="7720399">rHdr</span><span class="op" id="7720403">,</span>&nbsp;<span class="ident" id="7720405">hdr</span><span class="op" id="7720408">)</span>&nbsp;<span class="op" id="7720410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720414">t</span><span class="op" id="7720415">.</span><span class="ident" id="7720416">Errorf</span><span class="op" id="7720422">(</span><span class="string" id="7720423">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7720461">,</span>&nbsp;<span class="ident" id="7720463">rHdr</span><span class="op" id="7720467">,</span>&nbsp;<span class="ident" id="7720469">hdr</span><span class="op" id="7720472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720478">rData</span><span class="op" id="7720483">,</span>&nbsp;<span class="ident" id="7720485">err</span>&nbsp;<span class="op" id="7720489">:=</span>&nbsp;<span class="ident" id="7720492">ioutil</span><span class="op" id="7720498">.</span><span class="ident" id="7720499">ReadAll</span><span class="op" id="7720506">(</span><span class="ident" id="7720507">tr</span><span class="op" id="7720509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720512">if</span>&nbsp;<span class="ident" id="7720515">err</span>&nbsp;<span class="op" id="7720519">!=</span>&nbsp;<span class="ident" id="7720522">nil</span>&nbsp;<span class="op" id="7720526">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720530">t</span><span class="op" id="7720531">.</span><span class="ident" id="7720532">Fatalf</span><span class="op" id="7720538">(</span><span class="string" id="7720539">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="7720549">,</span>&nbsp;<span class="ident" id="7720551">err</span><span class="op" id="7720554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720560">if</span>&nbsp;<span class="op" id="7720563">!</span><span class="ident" id="7720564">bytes</span><span class="op" id="7720569">.</span><span class="ident" id="7720570">Equal</span><span class="op" id="7720575">(</span><span class="ident" id="7720576">rData</span><span class="op" id="7720581">,</span>&nbsp;<span class="ident" id="7720583">data</span><span class="op" id="7720587">)</span>&nbsp;<span class="op" id="7720589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720593">t</span><span class="op" id="7720594">.</span><span class="ident" id="7720595">Errorf</span><span class="op" id="7720601">(</span><span class="string" id="7720602">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="7720636">,</span>&nbsp;<span class="ident" id="7720638">rData</span><span class="op" id="7720643">,</span>&nbsp;<span class="ident" id="7720645">data</span><span class="op" id="7720649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720652">}</span><br>
<span class="lineno">130</span><span class="op" id="7720654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720657">type</span>&nbsp;<span class="ident" id="7720662">headerRoundTripTest</span>&nbsp;<span class="keyword" id="7720682">struct</span>&nbsp;<span class="op" id="7720689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720692">h</span>&nbsp;&nbsp;<span class="op" id="7720695">*</span><span class="ident" id="7720696">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720704">fm</span>&nbsp;<span class="ident" id="7720707">os</span><span class="op" id="7720709">.</span><span class="ident" id="7720710">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="7720719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720722">func</span>&nbsp;<span class="ident" id="7720727">TestHeaderRoundTrip</span><span class="op" id="7720746">(</span><span class="ident" id="7720747">t</span>&nbsp;<span class="op" id="7720749">*</span><span class="ident" id="7720750">testing</span><span class="op" id="7720757">.</span><span class="ident" id="7720758">T</span><span class="op" id="7720759">)</span>&nbsp;<span class="op" id="7720761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720764">golden</span>&nbsp;<span class="op" id="7720771">:=</span>&nbsp;<span class="op" id="7720774">[</span><span class="op" id="7720775">]</span><span class="ident" id="7720776">headerRoundTripTest</span><span class="op" id="7720795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720799">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720823">h</span><span class="op" id="7720824">:</span>&nbsp;<span class="op" id="7720826">&amp;</span><span class="ident" id="7720827">Header</span><span class="op" id="7720833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720839">Name</span><span class="op" id="7720843">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7720849">&#34;test.txt&#34;</span><span class="op" id="7720859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720865">Mode</span><span class="op" id="7720869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7720875">0644</span>&nbsp;<span class="op" id="7720880">|</span>&nbsp;<span class="ident" id="7720882">c_ISREG</span><span class="op" id="7720889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720895">Size</span><span class="op" id="7720899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7720905">12</span><span class="op" id="7720907">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720913">ModTime</span><span class="op" id="7720920">:</span>&nbsp;&nbsp;<span class="ident" id="7720923">time</span><span class="op" id="7720927">.</span><span class="ident" id="7720928">Unix</span><span class="op" id="7720932">(</span><span class="num" id="7720933">1360600916</span><span class="op" id="7720943">,</span>&nbsp;<span class="num" id="7720945">0</span><span class="op" id="7720946">)</span><span class="op" id="7720947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720953">Typeflag</span><span class="op" id="7720961">:</span>&nbsp;<span class="ident" id="7720963">TypeReg</span><span class="op" id="7720970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720975">}</span><span class="op" id="7720976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720981">fm</span><span class="op" id="7720983">:</span>&nbsp;<span class="num" id="7720985">0644</span><span class="op" id="7720989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720993">}</span><span class="op" id="7720994">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720998">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721019">h</span><span class="op" id="7721020">:</span>&nbsp;<span class="op" id="7721022">&amp;</span><span class="ident" id="7721023">Header</span><span class="op" id="7721029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721035">Name</span><span class="op" id="7721039">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7721045">&#34;hard.txt&#34;</span><span class="op" id="7721055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721061">Mode</span><span class="op" id="7721065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721071">0644</span>&nbsp;<span class="op" id="7721076">|</span>&nbsp;<span class="ident" id="7721078">c_ISLNK</span><span class="op" id="7721085">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721091">Size</span><span class="op" id="7721095">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721101">0</span><span class="op" id="7721102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721108">ModTime</span><span class="op" id="7721115">:</span>&nbsp;&nbsp;<span class="ident" id="7721118">time</span><span class="op" id="7721122">.</span><span class="ident" id="7721123">Unix</span><span class="op" id="7721127">(</span><span class="num" id="7721128">1360600916</span><span class="op" id="7721138">,</span>&nbsp;<span class="num" id="7721140">0</span><span class="op" id="7721141">)</span><span class="op" id="7721142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721148">Typeflag</span><span class="op" id="7721156">:</span>&nbsp;<span class="ident" id="7721158">TypeLink</span><span class="op" id="7721166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721171">}</span><span class="op" id="7721172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721177">fm</span><span class="op" id="7721179">:</span>&nbsp;<span class="num" id="7721181">0644</span>&nbsp;<span class="op" id="7721186">|</span>&nbsp;<span class="ident" id="7721188">os</span><span class="op" id="7721190">.</span><span class="ident" id="7721191">ModeSymlink</span><span class="op" id="7721202">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721206">}</span><span class="op" id="7721207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721211">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721236">h</span><span class="op" id="7721237">:</span>&nbsp;<span class="op" id="7721239">&amp;</span><span class="ident" id="7721240">Header</span><span class="op" id="7721246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721252">Name</span><span class="op" id="7721256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7721262">&#34;link.txt&#34;</span><span class="op" id="7721272">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721278">Mode</span><span class="op" id="7721282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721288">0777</span>&nbsp;<span class="op" id="7721293">|</span>&nbsp;<span class="ident" id="7721295">c_ISLNK</span><span class="op" id="7721302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721308">Size</span><span class="op" id="7721312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721318">0</span><span class="op" id="7721319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721325">ModTime</span><span class="op" id="7721332">:</span>&nbsp;&nbsp;<span class="ident" id="7721335">time</span><span class="op" id="7721339">.</span><span class="ident" id="7721340">Unix</span><span class="op" id="7721344">(</span><span class="num" id="7721345">1360600852</span><span class="op" id="7721355">,</span>&nbsp;<span class="num" id="7721357">0</span><span class="op" id="7721358">)</span><span class="op" id="7721359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721365">Typeflag</span><span class="op" id="7721373">:</span>&nbsp;<span class="ident" id="7721375">TypeSymlink</span><span class="op" id="7721386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721391">}</span><span class="op" id="7721392">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721397">fm</span><span class="op" id="7721399">:</span>&nbsp;<span class="num" id="7721401">0777</span>&nbsp;<span class="op" id="7721406">|</span>&nbsp;<span class="ident" id="7721408">os</span><span class="op" id="7721410">.</span><span class="ident" id="7721411">ModeSymlink</span><span class="op" id="7721422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721426">}</span><span class="op" id="7721427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721431">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721464">h</span><span class="op" id="7721465">:</span>&nbsp;<span class="op" id="7721467">&amp;</span><span class="ident" id="7721468">Header</span><span class="op" id="7721474">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721480">Name</span><span class="op" id="7721484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7721490">&#34;dev/null&#34;</span><span class="op" id="7721500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721506">Mode</span><span class="op" id="7721510">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721516">0666</span>&nbsp;<span class="op" id="7721521">|</span>&nbsp;<span class="ident" id="7721523">c_ISCHR</span><span class="op" id="7721530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721536">Size</span><span class="op" id="7721540">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721546">0</span><span class="op" id="7721547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721553">ModTime</span><span class="op" id="7721560">:</span>&nbsp;&nbsp;<span class="ident" id="7721563">time</span><span class="op" id="7721567">.</span><span class="ident" id="7721568">Unix</span><span class="op" id="7721572">(</span><span class="num" id="7721573">1360578951</span><span class="op" id="7721583">,</span>&nbsp;<span class="num" id="7721585">0</span><span class="op" id="7721586">)</span><span class="op" id="7721587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721593">Typeflag</span><span class="op" id="7721601">:</span>&nbsp;<span class="ident" id="7721603">TypeChar</span><span class="op" id="7721611">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721616">}</span><span class="op" id="7721617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721622">fm</span><span class="op" id="7721624">:</span>&nbsp;<span class="num" id="7721626">0666</span>&nbsp;<span class="op" id="7721631">|</span>&nbsp;<span class="ident" id="7721633">os</span><span class="op" id="7721635">.</span><span class="ident" id="7721636">ModeDevice</span>&nbsp;<span class="op" id="7721647">|</span>&nbsp;<span class="ident" id="7721649">os</span><span class="op" id="7721651">.</span><span class="ident" id="7721652">ModeCharDevice</span><span class="op" id="7721666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721670">}</span><span class="op" id="7721671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721675">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721699">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721704">h</span><span class="op" id="7721705">:</span>&nbsp;<span class="op" id="7721707">&amp;</span><span class="ident" id="7721708">Header</span><span class="op" id="7721714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721720">Name</span><span class="op" id="7721724">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7721730">&#34;dev/sda&#34;</span><span class="op" id="7721739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721745">Mode</span><span class="op" id="7721749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721755">0660</span>&nbsp;<span class="op" id="7721760">|</span>&nbsp;<span class="ident" id="7721762">c_ISBLK</span><span class="op" id="7721769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721775">Size</span><span class="op" id="7721779">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721785">0</span><span class="op" id="7721786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721792">ModTime</span><span class="op" id="7721799">:</span>&nbsp;&nbsp;<span class="ident" id="7721802">time</span><span class="op" id="7721806">.</span><span class="ident" id="7721807">Unix</span><span class="op" id="7721811">(</span><span class="num" id="7721812">1360578954</span><span class="op" id="7721822">,</span>&nbsp;<span class="num" id="7721824">0</span><span class="op" id="7721825">)</span><span class="op" id="7721826">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721832">Typeflag</span><span class="op" id="7721840">:</span>&nbsp;<span class="ident" id="7721842">TypeBlock</span><span class="op" id="7721851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721856">}</span><span class="op" id="7721857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721862">fm</span><span class="op" id="7721864">:</span>&nbsp;<span class="num" id="7721866">0660</span>&nbsp;<span class="op" id="7721871">|</span>&nbsp;<span class="ident" id="7721873">os</span><span class="op" id="7721875">.</span><span class="ident" id="7721876">ModeDevice</span><span class="op" id="7721886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721890">}</span><span class="op" id="7721891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721895">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721916">h</span><span class="op" id="7721917">:</span>&nbsp;<span class="op" id="7721919">&amp;</span><span class="ident" id="7721920">Header</span><span class="op" id="7721926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721932">Name</span><span class="op" id="7721936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7721942">&#34;dir/&#34;</span><span class="op" id="7721948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721954">Mode</span><span class="op" id="7721958">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721964">0755</span>&nbsp;<span class="op" id="7721969">|</span>&nbsp;<span class="ident" id="7721971">c_ISDIR</span><span class="op" id="7721978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721984">Size</span><span class="op" id="7721988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7721994">0</span><span class="op" id="7721995">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722001">ModTime</span><span class="op" id="7722008">:</span>&nbsp;&nbsp;<span class="ident" id="7722011">time</span><span class="op" id="7722015">.</span><span class="ident" id="7722016">Unix</span><span class="op" id="7722020">(</span><span class="num" id="7722021">1360601116</span><span class="op" id="7722031">,</span>&nbsp;<span class="num" id="7722033">0</span><span class="op" id="7722034">)</span><span class="op" id="7722035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722041">Typeflag</span><span class="op" id="7722049">:</span>&nbsp;<span class="ident" id="7722051">TypeDir</span><span class="op" id="7722058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722063">}</span><span class="op" id="7722064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722069">fm</span><span class="op" id="7722071">:</span>&nbsp;<span class="num" id="7722073">0755</span>&nbsp;<span class="op" id="7722078">|</span>&nbsp;<span class="ident" id="7722080">os</span><span class="op" id="7722082">.</span><span class="ident" id="7722083">ModeDir</span><span class="op" id="7722090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722094">}</span><span class="op" id="7722095">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722099">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722120">h</span><span class="op" id="7722121">:</span>&nbsp;<span class="op" id="7722123">&amp;</span><span class="ident" id="7722124">Header</span><span class="op" id="7722130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722136">Name</span><span class="op" id="7722140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722146">&#34;dev/initctl&#34;</span><span class="op" id="7722159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722165">Mode</span><span class="op" id="7722169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722175">0600</span>&nbsp;<span class="op" id="7722180">|</span>&nbsp;<span class="ident" id="7722182">c_ISFIFO</span><span class="op" id="7722190">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722196">Size</span><span class="op" id="7722200">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722206">0</span><span class="op" id="7722207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722213">ModTime</span><span class="op" id="7722220">:</span>&nbsp;&nbsp;<span class="ident" id="7722223">time</span><span class="op" id="7722227">.</span><span class="ident" id="7722228">Unix</span><span class="op" id="7722232">(</span><span class="num" id="7722233">1360578949</span><span class="op" id="7722243">,</span>&nbsp;<span class="num" id="7722245">0</span><span class="op" id="7722246">)</span><span class="op" id="7722247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722253">Typeflag</span><span class="op" id="7722261">:</span>&nbsp;<span class="ident" id="7722263">TypeFifo</span><span class="op" id="7722271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722276">}</span><span class="op" id="7722277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722282">fm</span><span class="op" id="7722284">:</span>&nbsp;<span class="num" id="7722286">0600</span>&nbsp;<span class="op" id="7722291">|</span>&nbsp;<span class="ident" id="7722293">os</span><span class="op" id="7722295">.</span><span class="ident" id="7722296">ModeNamedPipe</span><span class="op" id="7722309">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722313">}</span><span class="op" id="7722314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722318">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722336">h</span><span class="op" id="7722337">:</span>&nbsp;<span class="op" id="7722339">&amp;</span><span class="ident" id="7722340">Header</span><span class="op" id="7722346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722352">Name</span><span class="op" id="7722356">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722362">&#34;bin/su&#34;</span><span class="op" id="7722370">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722376">Mode</span><span class="op" id="7722380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722386">0755</span>&nbsp;<span class="op" id="7722391">|</span>&nbsp;<span class="ident" id="7722393">c_ISREG</span>&nbsp;<span class="op" id="7722401">|</span>&nbsp;<span class="ident" id="7722403">c_ISUID</span><span class="op" id="7722410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722416">Size</span><span class="op" id="7722420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722426">23232</span><span class="op" id="7722431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722437">ModTime</span><span class="op" id="7722444">:</span>&nbsp;&nbsp;<span class="ident" id="7722447">time</span><span class="op" id="7722451">.</span><span class="ident" id="7722452">Unix</span><span class="op" id="7722456">(</span><span class="num" id="7722457">1355405093</span><span class="op" id="7722467">,</span>&nbsp;<span class="num" id="7722469">0</span><span class="op" id="7722470">)</span><span class="op" id="7722471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722477">Typeflag</span><span class="op" id="7722485">:</span>&nbsp;<span class="ident" id="7722487">TypeReg</span><span class="op" id="7722494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722499">}</span><span class="op" id="7722500">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722505">fm</span><span class="op" id="7722507">:</span>&nbsp;<span class="num" id="7722509">0755</span>&nbsp;<span class="op" id="7722514">|</span>&nbsp;<span class="ident" id="7722516">os</span><span class="op" id="7722518">.</span><span class="ident" id="7722519">ModeSetuid</span><span class="op" id="7722529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722533">}</span><span class="op" id="7722534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722538">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722557">h</span><span class="op" id="7722558">:</span>&nbsp;<span class="op" id="7722560">&amp;</span><span class="ident" id="7722561">Header</span><span class="op" id="7722567">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722573">Name</span><span class="op" id="7722577">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722583">&#34;group.txt&#34;</span><span class="op" id="7722594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722600">Mode</span><span class="op" id="7722604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722610">0750</span>&nbsp;<span class="op" id="7722615">|</span>&nbsp;<span class="ident" id="7722617">c_ISREG</span>&nbsp;<span class="op" id="7722625">|</span>&nbsp;<span class="ident" id="7722627">c_ISGID</span><span class="op" id="7722634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722640">Size</span><span class="op" id="7722644">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722650">0</span><span class="op" id="7722651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722657">ModTime</span><span class="op" id="7722664">:</span>&nbsp;&nbsp;<span class="ident" id="7722667">time</span><span class="op" id="7722671">.</span><span class="ident" id="7722672">Unix</span><span class="op" id="7722676">(</span><span class="num" id="7722677">1360602346</span><span class="op" id="7722687">,</span>&nbsp;<span class="num" id="7722689">0</span><span class="op" id="7722690">)</span><span class="op" id="7722691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722697">Typeflag</span><span class="op" id="7722705">:</span>&nbsp;<span class="ident" id="7722707">TypeReg</span><span class="op" id="7722714">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722719">}</span><span class="op" id="7722720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722725">fm</span><span class="op" id="7722727">:</span>&nbsp;<span class="num" id="7722729">0750</span>&nbsp;<span class="op" id="7722734">|</span>&nbsp;<span class="ident" id="7722736">os</span><span class="op" id="7722738">.</span><span class="ident" id="7722739">ModeSetgid</span><span class="op" id="7722749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722753">}</span><span class="op" id="7722754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722758">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722771">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722776">h</span><span class="op" id="7722777">:</span>&nbsp;<span class="op" id="7722779">&amp;</span><span class="ident" id="7722780">Header</span><span class="op" id="7722786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722792">Name</span><span class="op" id="7722796">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7722802">&#34;sticky.txt&#34;</span><span class="op" id="7722814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722820">Mode</span><span class="op" id="7722824">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722830">0600</span>&nbsp;<span class="op" id="7722835">|</span>&nbsp;<span class="ident" id="7722837">c_ISREG</span>&nbsp;<span class="op" id="7722845">|</span>&nbsp;<span class="ident" id="7722847">c_ISVTX</span><span class="op" id="7722854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722860">Size</span><span class="op" id="7722864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7722870">7</span><span class="op" id="7722871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722877">ModTime</span><span class="op" id="7722884">:</span>&nbsp;&nbsp;<span class="ident" id="7722887">time</span><span class="op" id="7722891">.</span><span class="ident" id="7722892">Unix</span><span class="op" id="7722896">(</span><span class="num" id="7722897">1360602540</span><span class="op" id="7722907">,</span>&nbsp;<span class="num" id="7722909">0</span><span class="op" id="7722910">)</span><span class="op" id="7722911">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722917">Typeflag</span><span class="op" id="7722925">:</span>&nbsp;<span class="ident" id="7722927">TypeReg</span><span class="op" id="7722934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722939">}</span><span class="op" id="7722940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722945">fm</span><span class="op" id="7722947">:</span>&nbsp;<span class="num" id="7722949">0600</span>&nbsp;<span class="op" id="7722954">|</span>&nbsp;<span class="ident" id="7722956">os</span><span class="op" id="7722958">.</span><span class="ident" id="7722959">ModeSticky</span><span class="op" id="7722969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722973">}</span><span class="op" id="7722974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722977">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722981">for</span>&nbsp;<span class="ident" id="7722985">i</span><span class="op" id="7722986">,</span>&nbsp;<span class="ident" id="7722988">g</span>&nbsp;<span class="op" id="7722990">:=</span>&nbsp;<span class="keyword" id="7722993">range</span>&nbsp;<span class="ident" id="7722999">golden</span>&nbsp;<span class="op" id="7723006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723010">fi</span>&nbsp;<span class="op" id="7723013">:=</span>&nbsp;<span class="ident" id="7723016">g</span><span class="op" id="7723017">.</span><span class="ident" id="7723018">h</span><span class="op" id="7723019">.</span><span class="ident" id="7723020">FileInfo</span><span class="op" id="7723028">(</span><span class="op" id="7723029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723033">h2</span><span class="op" id="7723035">,</span>&nbsp;<span class="ident" id="7723037">err</span>&nbsp;<span class="op" id="7723041">:=</span>&nbsp;<span class="ident" id="7723044">FileInfoHeader</span><span class="op" id="7723058">(</span><span class="ident" id="7723059">fi</span><span class="op" id="7723061">,</span>&nbsp;<span class="string" id="7723063">&#34;&#34;</span><span class="op" id="7723065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723069">if</span>&nbsp;<span class="ident" id="7723072">err</span>&nbsp;<span class="op" id="7723076">!=</span>&nbsp;<span class="ident" id="7723079">nil</span>&nbsp;<span class="op" id="7723083">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723088">t</span><span class="op" id="7723089">.</span><span class="ident" id="7723090">Error</span><span class="op" id="7723095">(</span><span class="ident" id="7723096">err</span><span class="op" id="7723099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723104">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723119">if</span>&nbsp;<span class="ident" id="7723122">strings</span><span class="op" id="7723129">.</span><span class="ident" id="7723130">Contains</span><span class="op" id="7723138">(</span><span class="ident" id="7723139">fi</span><span class="op" id="7723141">.</span><span class="ident" id="7723142">Name</span><span class="op" id="7723146">(</span><span class="op" id="7723147">)</span><span class="op" id="7723148">,</span>&nbsp;<span class="string" id="7723150">&#34;/&#34;</span><span class="op" id="7723153">)</span>&nbsp;<span class="op" id="7723155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723160">t</span><span class="op" id="7723161">.</span><span class="ident" id="7723162">Errorf</span><span class="op" id="7723168">(</span><span class="string" id="7723169">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="7723204">,</span>&nbsp;<span class="ident" id="7723206">g</span><span class="op" id="7723207">.</span><span class="ident" id="7723208">h</span><span class="op" id="7723209">.</span><span class="ident" id="7723210">Name</span><span class="op" id="7723214">,</span>&nbsp;<span class="ident" id="7723216">fi</span><span class="op" id="7723218">.</span><span class="ident" id="7723219">Name</span><span class="op" id="7723223">(</span><span class="op" id="7723224">)</span><span class="op" id="7723225">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723233">name</span>&nbsp;<span class="op" id="7723238">:=</span>&nbsp;<span class="ident" id="7723241">path</span><span class="op" id="7723245">.</span><span class="ident" id="7723246">Base</span><span class="op" id="7723250">(</span><span class="ident" id="7723251">g</span><span class="op" id="7723252">.</span><span class="ident" id="7723253">h</span><span class="op" id="7723254">.</span><span class="ident" id="7723255">Name</span><span class="op" id="7723259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723263">if</span>&nbsp;<span class="ident" id="7723266">fi</span><span class="op" id="7723268">.</span><span class="ident" id="7723269">IsDir</span><span class="op" id="7723274">(</span><span class="op" id="7723275">)</span>&nbsp;<span class="op" id="7723277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723282">name</span>&nbsp;<span class="op" id="7723287">+=</span>&nbsp;<span class="string" id="7723290">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723296">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723300">if</span>&nbsp;<span class="ident" id="7723303">got</span><span class="op" id="7723306">,</span>&nbsp;<span class="ident" id="7723308">want</span>&nbsp;<span class="op" id="7723313">:=</span>&nbsp;<span class="ident" id="7723316">h2</span><span class="op" id="7723318">.</span><span class="ident" id="7723319">Name</span><span class="op" id="7723323">,</span>&nbsp;<span class="ident" id="7723325">name</span><span class="op" id="7723329">;</span>&nbsp;<span class="ident" id="7723331">got</span>&nbsp;<span class="op" id="7723335">!=</span>&nbsp;<span class="ident" id="7723338">want</span>&nbsp;<span class="op" id="7723343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723348">t</span><span class="op" id="7723349">.</span><span class="ident" id="7723350">Errorf</span><span class="op" id="7723356">(</span><span class="string" id="7723357">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7723386">,</span>&nbsp;<span class="ident" id="7723388">i</span><span class="op" id="7723389">,</span>&nbsp;<span class="ident" id="7723391">got</span><span class="op" id="7723394">,</span>&nbsp;<span class="ident" id="7723396">want</span><span class="op" id="7723400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723408">if</span>&nbsp;<span class="ident" id="7723411">got</span><span class="op" id="7723414">,</span>&nbsp;<span class="ident" id="7723416">want</span>&nbsp;<span class="op" id="7723421">:=</span>&nbsp;<span class="ident" id="7723424">h2</span><span class="op" id="7723426">.</span><span class="ident" id="7723427">Size</span><span class="op" id="7723431">,</span>&nbsp;<span class="ident" id="7723433">g</span><span class="op" id="7723434">.</span><span class="ident" id="7723435">h</span><span class="op" id="7723436">.</span><span class="ident" id="7723437">Size</span><span class="op" id="7723441">;</span>&nbsp;<span class="ident" id="7723443">got</span>&nbsp;<span class="op" id="7723447">!=</span>&nbsp;<span class="ident" id="7723450">want</span>&nbsp;<span class="op" id="7723455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723460">t</span><span class="op" id="7723461">.</span><span class="ident" id="7723462">Errorf</span><span class="op" id="7723468">(</span><span class="string" id="7723469">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7723498">,</span>&nbsp;<span class="ident" id="7723500">i</span><span class="op" id="7723501">,</span>&nbsp;<span class="ident" id="7723503">got</span><span class="op" id="7723506">,</span>&nbsp;<span class="ident" id="7723508">want</span><span class="op" id="7723512">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723520">if</span>&nbsp;<span class="ident" id="7723523">got</span><span class="op" id="7723526">,</span>&nbsp;<span class="ident" id="7723528">want</span>&nbsp;<span class="op" id="7723533">:=</span>&nbsp;<span class="ident" id="7723536">h2</span><span class="op" id="7723538">.</span><span class="ident" id="7723539">Mode</span><span class="op" id="7723543">,</span>&nbsp;<span class="ident" id="7723545">g</span><span class="op" id="7723546">.</span><span class="ident" id="7723547">h</span><span class="op" id="7723548">.</span><span class="ident" id="7723549">Mode</span><span class="op" id="7723553">;</span>&nbsp;<span class="ident" id="7723555">got</span>&nbsp;<span class="op" id="7723559">!=</span>&nbsp;<span class="ident" id="7723562">want</span>&nbsp;<span class="op" id="7723567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723572">t</span><span class="op" id="7723573">.</span><span class="ident" id="7723574">Errorf</span><span class="op" id="7723580">(</span><span class="string" id="7723581">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7723610">,</span>&nbsp;<span class="ident" id="7723612">i</span><span class="op" id="7723613">,</span>&nbsp;<span class="ident" id="7723615">got</span><span class="op" id="7723618">,</span>&nbsp;<span class="ident" id="7723620">want</span><span class="op" id="7723624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723632">if</span>&nbsp;<span class="ident" id="7723635">got</span><span class="op" id="7723638">,</span>&nbsp;<span class="ident" id="7723640">want</span>&nbsp;<span class="op" id="7723645">:=</span>&nbsp;<span class="ident" id="7723648">fi</span><span class="op" id="7723650">.</span><span class="ident" id="7723651">Mode</span><span class="op" id="7723655">(</span><span class="op" id="7723656">)</span><span class="op" id="7723657">,</span>&nbsp;<span class="ident" id="7723659">g</span><span class="op" id="7723660">.</span><span class="ident" id="7723661">fm</span><span class="op" id="7723663">;</span>&nbsp;<span class="ident" id="7723665">got</span>&nbsp;<span class="op" id="7723669">!=</span>&nbsp;<span class="ident" id="7723672">want</span>&nbsp;<span class="op" id="7723677">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723682">t</span><span class="op" id="7723683">.</span><span class="ident" id="7723684">Errorf</span><span class="op" id="7723690">(</span><span class="string" id="7723691">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7723723">,</span>&nbsp;<span class="ident" id="7723725">i</span><span class="op" id="7723726">,</span>&nbsp;<span class="ident" id="7723728">got</span><span class="op" id="7723731">,</span>&nbsp;<span class="ident" id="7723733">want</span><span class="op" id="7723737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723745">if</span>&nbsp;<span class="ident" id="7723748">got</span><span class="op" id="7723751">,</span>&nbsp;<span class="ident" id="7723753">want</span>&nbsp;<span class="op" id="7723758">:=</span>&nbsp;<span class="ident" id="7723761">h2</span><span class="op" id="7723763">.</span><span class="ident" id="7723764">ModTime</span><span class="op" id="7723771">,</span>&nbsp;<span class="ident" id="7723773">g</span><span class="op" id="7723774">.</span><span class="ident" id="7723775">h</span><span class="op" id="7723776">.</span><span class="ident" id="7723777">ModTime</span><span class="op" id="7723784">;</span>&nbsp;<span class="ident" id="7723786">got</span>&nbsp;<span class="op" id="7723790">!=</span>&nbsp;<span class="ident" id="7723793">want</span>&nbsp;<span class="op" id="7723798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723803">t</span><span class="op" id="7723804">.</span><span class="ident" id="7723805">Errorf</span><span class="op" id="7723811">(</span><span class="string" id="7723812">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7723844">,</span>&nbsp;<span class="ident" id="7723846">i</span><span class="op" id="7723847">,</span>&nbsp;<span class="ident" id="7723849">got</span><span class="op" id="7723852">,</span>&nbsp;<span class="ident" id="7723854">want</span><span class="op" id="7723858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723862">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723866">if</span>&nbsp;<span class="ident" id="7723869">sysh</span><span class="op" id="7723873">,</span>&nbsp;<span class="ident" id="7723875">ok</span>&nbsp;<span class="op" id="7723878">:=</span>&nbsp;<span class="ident" id="7723881">fi</span><span class="op" id="7723883">.</span><span class="ident" id="7723884">Sys</span><span class="op" id="7723887">(</span><span class="op" id="7723888">)</span><span class="op" id="7723889">.</span><span class="op" id="7723890">(</span><span class="op" id="7723891">*</span><span class="ident" id="7723892">Header</span><span class="op" id="7723898">)</span><span class="op" id="7723899">;</span>&nbsp;<span class="op" id="7723901">!</span><span class="ident" id="7723902">ok</span>&nbsp;<span class="op" id="7723905">||</span>&nbsp;<span class="ident" id="7723908">sysh</span>&nbsp;<span class="op" id="7723913">!=</span>&nbsp;<span class="ident" id="7723916">g</span><span class="op" id="7723917">.</span><span class="ident" id="7723918">h</span>&nbsp;<span class="op" id="7723920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723925">t</span><span class="op" id="7723926">.</span><span class="ident" id="7723927">Errorf</span><span class="op" id="7723933">(</span><span class="string" id="7723934">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="7723976">,</span>&nbsp;<span class="ident" id="7723978">i</span><span class="op" id="7723979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723986">}</span><br>
<span class="lineno"></span><span class="op" id="7723988">}</span>
</div>
</body>
</html>
