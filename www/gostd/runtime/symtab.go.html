<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1670440">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1670495">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1670549">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1670600">package</span>&nbsp;<span class="ident" id="1670608">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1670617">import</span>&nbsp;<span class="string" id="1670624">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1670634">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1670718">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1670801">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1670828">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1670903">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1670961">type</span>&nbsp;<span class="ident" id="1670966">Func</span>&nbsp;<span class="keyword" id="1670971">struct</span>&nbsp;<span class="op" id="1670978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1670981">opaque</span>&nbsp;<span class="keyword" id="1670988">struct</span><span class="op" id="1670994">{</span><span class="op" id="1670995">}</span>&nbsp;<span class="comment" id="1670997">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1671041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1671044">func</span>&nbsp;<span class="op" id="1671049">(</span><span class="ident" id="1671050">f</span>&nbsp;<span class="op" id="1671052">*</span><span class="ident" id="1671053">Func</span><span class="op" id="1671057">)</span>&nbsp;<span class="ident" id="1671059">raw</span><span class="op" id="1671062">(</span><span class="op" id="1671063">)</span>&nbsp;<span class="op" id="1671065">*</span><span class="ident" id="1671066">_func</span>&nbsp;<span class="op" id="1671072">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1671075">return</span>&nbsp;<span class="op" id="1671082">(</span><span class="op" id="1671083">*</span><span class="ident" id="1671084">_func</span><span class="op" id="1671089">)</span><span class="op" id="1671090">(</span><span class="ident" id="1671091">unsafe</span><span class="op" id="1671097">.</span><span class="ident" id="1671098">Pointer</span><span class="op" id="1671105">(</span><span class="ident" id="1671106">f</span><span class="op" id="1671107">)</span><span class="op" id="1671108">)</span><br>
<span class="lineno"></span><span class="op" id="1671110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1671113">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1671127">const</span>&nbsp;<span class="op" id="1671133">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671136">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671164">=</span>&nbsp;<span class="num" id="1671166">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671169">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671197">=</span>&nbsp;<span class="num" id="1671199">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671202">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1671230">=</span>&nbsp;<span class="num" id="1671232">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671235">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1671263">=</span>&nbsp;<span class="num" id="1671265">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671268">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671296">=</span>&nbsp;<span class="num" id="1671298">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671301">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671329">=</span>&nbsp;<span class="op" id="1671331">-</span><span class="num" id="1671332">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1671343">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1671346">var</span>&nbsp;<span class="op" id="1671350">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671353">pclntable</span>&nbsp;<span class="op" id="1671363">[</span><span class="op" id="1671364">]</span><span class="builtintype" id="1671365">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671371">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671381">[</span><span class="op" id="1671382">]</span><span class="ident" id="1671383">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671392">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1671402">[</span><span class="op" id="1671403">]</span><span class="builtintype" id="1671404">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671413">pclntab</span><span class="op" id="1671420">,</span>&nbsp;<span class="ident" id="1671422">epclntab</span>&nbsp;<span class="keyword" id="1671431">struct</span><span class="op" id="1671437">{</span><span class="op" id="1671438">}</span>&nbsp;<span class="comment" id="1671440">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1671458">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1671461">type</span>&nbsp;<span class="ident" id="1671466">functab</span>&nbsp;<span class="keyword" id="1671474">struct</span>&nbsp;<span class="op" id="1671481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671484">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1671492">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671501">funcoff</span>&nbsp;<span class="builtintype" id="1671509">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1671517">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1671520">func</span>&nbsp;<span class="ident" id="1671525">symtabinit</span><span class="op" id="1671535">(</span><span class="op" id="1671536">)</span>&nbsp;<span class="op" id="1671538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1671541">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1671597">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1671647">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671697">pcln</span>&nbsp;<span class="op" id="1671702">:=</span>&nbsp;<span class="op" id="1671705">(</span><span class="op" id="1671706">*</span><span class="op" id="1671707">[</span><span class="num" id="1671708">8</span><span class="op" id="1671709">]</span><span class="builtintype" id="1671710">byte</span><span class="op" id="1671714">)</span><span class="op" id="1671715">(</span><span class="ident" id="1671716">unsafe</span><span class="op" id="1671722">.</span><span class="ident" id="1671723">Pointer</span><span class="op" id="1671730">(</span><span class="op" id="1671731">&amp;</span><span class="ident" id="1671732">pclntab</span><span class="op" id="1671739">)</span><span class="op" id="1671740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1671743">pcln32</span>&nbsp;<span class="op" id="1671750">:=</span>&nbsp;<span class="op" id="1671753">(</span><span class="op" id="1671754">*</span><span class="op" id="1671755">[</span><span class="num" id="1671756">2</span><span class="op" id="1671757">]</span><span class="builtintype" id="1671758">uint32</span><span class="op" id="1671764">)</span><span class="op" id="1671765">(</span><span class="ident" id="1671766">unsafe</span><span class="op" id="1671772">.</span><span class="ident" id="1671773">Pointer</span><span class="op" id="1671780">(</span><span class="op" id="1671781">&amp;</span><span class="ident" id="1671782">pclntab</span><span class="op" id="1671789">)</span><span class="op" id="1671790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1671793">if</span>&nbsp;<span class="ident" id="1671796">pcln32</span><span class="op" id="1671802">[</span><span class="num" id="1671803">0</span><span class="op" id="1671804">]</span>&nbsp;<span class="op" id="1671806">!=</span>&nbsp;<span class="num" id="1671809">0xfffffffb</span>&nbsp;<span class="op" id="1671820">||</span>&nbsp;<span class="ident" id="1671823">pcln</span><span class="op" id="1671827">[</span><span class="num" id="1671828">4</span><span class="op" id="1671829">]</span>&nbsp;<span class="op" id="1671831">!=</span>&nbsp;<span class="num" id="1671834">0</span>&nbsp;<span class="op" id="1671836">||</span>&nbsp;<span class="ident" id="1671839">pcln</span><span class="op" id="1671843">[</span><span class="num" id="1671844">5</span><span class="op" id="1671845">]</span>&nbsp;<span class="op" id="1671847">!=</span>&nbsp;<span class="num" id="1671850">0</span>&nbsp;<span class="op" id="1671852">||</span>&nbsp;<span class="ident" id="1671855">pcln</span><span class="op" id="1671859">[</span><span class="num" id="1671860">6</span><span class="op" id="1671861">]</span>&nbsp;<span class="op" id="1671863">!=</span>&nbsp;<span class="ident" id="1671866">_PCQuantum</span>&nbsp;<span class="op" id="1671877">||</span>&nbsp;<span class="ident" id="1671880">pcln</span><span class="op" id="1671884">[</span><span class="num" id="1671885">7</span><span class="op" id="1671886">]</span>&nbsp;<span class="op" id="1671888">!=</span>&nbsp;<span class="ident" id="1671891">ptrSize</span>&nbsp;<span class="op" id="1671899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1671903">println</span><span class="op" id="1671910">(</span><span class="string" id="1671911">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1671951">,</span>&nbsp;<span class="ident" id="1671953">hex</span><span class="op" id="1671956">(</span><span class="ident" id="1671957">pcln32</span><span class="op" id="1671963">[</span><span class="num" id="1671964">0</span><span class="op" id="1671965">]</span><span class="op" id="1671966">)</span><span class="op" id="1671967">,</span>&nbsp;<span class="ident" id="1671969">hex</span><span class="op" id="1671972">(</span><span class="ident" id="1671973">pcln</span><span class="op" id="1671977">[</span><span class="num" id="1671978">4</span><span class="op" id="1671979">]</span><span class="op" id="1671980">)</span><span class="op" id="1671981">,</span>&nbsp;<span class="ident" id="1671983">hex</span><span class="op" id="1671986">(</span><span class="ident" id="1671987">pcln</span><span class="op" id="1671991">[</span><span class="num" id="1671992">5</span><span class="op" id="1671993">]</span><span class="op" id="1671994">)</span><span class="op" id="1671995">,</span>&nbsp;<span class="ident" id="1671997">hex</span><span class="op" id="1672000">(</span><span class="ident" id="1672001">pcln</span><span class="op" id="1672005">[</span><span class="num" id="1672006">6</span><span class="op" id="1672007">]</span><span class="op" id="1672008">)</span><span class="op" id="1672009">,</span>&nbsp;<span class="ident" id="1672011">hex</span><span class="op" id="1672014">(</span><span class="ident" id="1672015">pcln</span><span class="op" id="1672019">[</span><span class="num" id="1672020">7</span><span class="op" id="1672021">]</span><span class="op" id="1672022">)</span><span class="op" id="1672023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672027">gothrow</span><span class="op" id="1672034">(</span><span class="string" id="1672035">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1672068">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1672071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1672075">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672121">sp</span>&nbsp;<span class="op" id="1672124">:=</span>&nbsp;<span class="op" id="1672127">(</span><span class="op" id="1672128">*</span><span class="ident" id="1672129">sliceStruct</span><span class="op" id="1672140">)</span><span class="op" id="1672141">(</span><span class="ident" id="1672142">unsafe</span><span class="op" id="1672148">.</span><span class="ident" id="1672149">Pointer</span><span class="op" id="1672156">(</span><span class="op" id="1672157">&amp;</span><span class="ident" id="1672158">pclntable</span><span class="op" id="1672167">)</span><span class="op" id="1672168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672171">sp</span><span class="op" id="1672173">.</span><span class="ident" id="1672174">array</span>&nbsp;<span class="op" id="1672180">=</span>&nbsp;<span class="ident" id="1672182">unsafe</span><span class="op" id="1672188">.</span><span class="ident" id="1672189">Pointer</span><span class="op" id="1672196">(</span><span class="op" id="1672197">&amp;</span><span class="ident" id="1672198">pclntab</span><span class="op" id="1672205">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672208">sp</span><span class="op" id="1672210">.</span><span class="builtinfunc" id="1672211">len</span>&nbsp;<span class="op" id="1672215">=</span>&nbsp;<span class="builtintype" id="1672217">int</span><span class="op" id="1672220">(</span><span class="builtintype" id="1672221">uintptr</span><span class="op" id="1672228">(</span><span class="ident" id="1672229">unsafe</span><span class="op" id="1672235">.</span><span class="ident" id="1672236">Pointer</span><span class="op" id="1672243">(</span><span class="op" id="1672244">&amp;</span><span class="ident" id="1672245">epclntab</span><span class="op" id="1672253">)</span><span class="op" id="1672254">)</span>&nbsp;<span class="op" id="1672256">-</span>&nbsp;<span class="builtintype" id="1672258">uintptr</span><span class="op" id="1672265">(</span><span class="ident" id="1672266">unsafe</span><span class="op" id="1672272">.</span><span class="ident" id="1672273">Pointer</span><span class="op" id="1672280">(</span><span class="op" id="1672281">&amp;</span><span class="ident" id="1672282">pclntab</span><span class="op" id="1672289">)</span><span class="op" id="1672290">)</span><span class="op" id="1672291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672294">sp</span><span class="op" id="1672296">.</span><span class="builtinfunc" id="1672297">cap</span>&nbsp;<span class="op" id="1672301">=</span>&nbsp;<span class="ident" id="1672303">sp</span><span class="op" id="1672305">.</span><span class="builtinfunc" id="1672306">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1672312">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672370">nftab</span>&nbsp;<span class="op" id="1672376">:=</span>&nbsp;<span class="builtintype" id="1672379">int</span><span class="op" id="1672382">(</span><span class="op" id="1672383">*</span><span class="op" id="1672384">(</span><span class="op" id="1672385">*</span><span class="builtintype" id="1672386">uintptr</span><span class="op" id="1672393">)</span><span class="op" id="1672394">(</span><span class="ident" id="1672395">add</span><span class="op" id="1672398">(</span><span class="ident" id="1672399">unsafe</span><span class="op" id="1672405">.</span><span class="ident" id="1672406">Pointer</span><span class="op" id="1672413">(</span><span class="ident" id="1672414">pcln</span><span class="op" id="1672418">)</span><span class="op" id="1672419">,</span>&nbsp;<span class="num" id="1672421">8</span><span class="op" id="1672422">)</span><span class="op" id="1672423">)</span><span class="op" id="1672424">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672427">p</span>&nbsp;<span class="op" id="1672429">:=</span>&nbsp;<span class="ident" id="1672432">add</span><span class="op" id="1672435">(</span><span class="ident" id="1672436">unsafe</span><span class="op" id="1672442">.</span><span class="ident" id="1672443">Pointer</span><span class="op" id="1672450">(</span><span class="ident" id="1672451">pcln</span><span class="op" id="1672455">)</span><span class="op" id="1672456">,</span>&nbsp;<span class="num" id="1672458">8</span><span class="op" id="1672459">+</span><span class="ident" id="1672460">ptrSize</span><span class="op" id="1672467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672470">sp</span>&nbsp;<span class="op" id="1672473">=</span>&nbsp;<span class="op" id="1672475">(</span><span class="op" id="1672476">*</span><span class="ident" id="1672477">sliceStruct</span><span class="op" id="1672488">)</span><span class="op" id="1672489">(</span><span class="ident" id="1672490">unsafe</span><span class="op" id="1672496">.</span><span class="ident" id="1672497">Pointer</span><span class="op" id="1672504">(</span><span class="op" id="1672505">&amp;</span><span class="ident" id="1672506">ftab</span><span class="op" id="1672510">)</span><span class="op" id="1672511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672514">sp</span><span class="op" id="1672516">.</span><span class="ident" id="1672517">array</span>&nbsp;<span class="op" id="1672523">=</span>&nbsp;<span class="ident" id="1672525">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672528">sp</span><span class="op" id="1672530">.</span><span class="builtinfunc" id="1672531">len</span>&nbsp;<span class="op" id="1672535">=</span>&nbsp;<span class="ident" id="1672537">nftab</span>&nbsp;<span class="op" id="1672543">+</span>&nbsp;<span class="num" id="1672545">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672548">sp</span><span class="op" id="1672550">.</span><span class="builtinfunc" id="1672551">cap</span>&nbsp;<span class="op" id="1672555">=</span>&nbsp;<span class="ident" id="1672557">sp</span><span class="op" id="1672559">.</span><span class="builtinfunc" id="1672560">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672565">for</span>&nbsp;<span class="ident" id="1672569">i</span>&nbsp;<span class="op" id="1672571">:=</span>&nbsp;<span class="num" id="1672574">0</span><span class="op" id="1672575">;</span>&nbsp;<span class="ident" id="1672577">i</span>&nbsp;<span class="op" id="1672579">&lt;</span>&nbsp;<span class="ident" id="1672581">nftab</span><span class="op" id="1672586">;</span>&nbsp;<span class="ident" id="1672588">i</span><span class="op" id="1672589">++</span>&nbsp;<span class="op" id="1672592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1672596">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672680">if</span>&nbsp;<span class="ident" id="1672683">ftab</span><span class="op" id="1672687">[</span><span class="ident" id="1672688">i</span><span class="op" id="1672689">]</span><span class="op" id="1672690">.</span><span class="ident" id="1672691">entry</span>&nbsp;<span class="op" id="1672697">&gt;</span>&nbsp;<span class="ident" id="1672699">ftab</span><span class="op" id="1672703">[</span><span class="ident" id="1672704">i</span><span class="op" id="1672705">+</span><span class="num" id="1672706">1</span><span class="op" id="1672707">]</span><span class="op" id="1672708">.</span><span class="ident" id="1672709">entry</span>&nbsp;<span class="op" id="1672715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672720">f1</span>&nbsp;<span class="op" id="1672723">:=</span>&nbsp;<span class="op" id="1672726">(</span><span class="op" id="1672727">*</span><span class="ident" id="1672728">_func</span><span class="op" id="1672733">)</span><span class="op" id="1672734">(</span><span class="ident" id="1672735">unsafe</span><span class="op" id="1672741">.</span><span class="ident" id="1672742">Pointer</span><span class="op" id="1672749">(</span><span class="op" id="1672750">&amp;</span><span class="ident" id="1672751">pclntable</span><span class="op" id="1672760">[</span><span class="ident" id="1672761">ftab</span><span class="op" id="1672765">[</span><span class="ident" id="1672766">i</span><span class="op" id="1672767">]</span><span class="op" id="1672768">.</span><span class="ident" id="1672769">funcoff</span><span class="op" id="1672776">]</span><span class="op" id="1672777">)</span><span class="op" id="1672778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672783">f2</span>&nbsp;<span class="op" id="1672786">:=</span>&nbsp;<span class="op" id="1672789">(</span><span class="op" id="1672790">*</span><span class="ident" id="1672791">_func</span><span class="op" id="1672796">)</span><span class="op" id="1672797">(</span><span class="ident" id="1672798">unsafe</span><span class="op" id="1672804">.</span><span class="ident" id="1672805">Pointer</span><span class="op" id="1672812">(</span><span class="op" id="1672813">&amp;</span><span class="ident" id="1672814">pclntable</span><span class="op" id="1672823">[</span><span class="ident" id="1672824">ftab</span><span class="op" id="1672828">[</span><span class="ident" id="1672829">i</span><span class="op" id="1672830">+</span><span class="num" id="1672831">1</span><span class="op" id="1672832">]</span><span class="op" id="1672833">.</span><span class="ident" id="1672834">funcoff</span><span class="op" id="1672841">]</span><span class="op" id="1672842">)</span><span class="op" id="1672843">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672848">f2name</span>&nbsp;<span class="op" id="1672855">:=</span>&nbsp;<span class="string" id="1672858">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1672867">if</span>&nbsp;<span class="ident" id="1672870">i</span><span class="op" id="1672871">+</span><span class="num" id="1672872">1</span>&nbsp;<span class="op" id="1672874">&lt;</span>&nbsp;<span class="ident" id="1672876">nftab</span>&nbsp;<span class="op" id="1672882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1672888">f2name</span>&nbsp;<span class="op" id="1672895">=</span>&nbsp;<span class="ident" id="1672897">gofuncname</span><span class="op" id="1672907">(</span><span class="ident" id="1672908">f2</span><span class="op" id="1672910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1672915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1672920">println</span><span class="op" id="1672927">(</span><span class="string" id="1672928">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1672982">,</span>&nbsp;<span class="ident" id="1672984">hex</span><span class="op" id="1672987">(</span><span class="ident" id="1672988">ftab</span><span class="op" id="1672992">[</span><span class="ident" id="1672993">i</span><span class="op" id="1672994">]</span><span class="op" id="1672995">.</span><span class="ident" id="1672996">entry</span><span class="op" id="1673001">)</span><span class="op" id="1673002">,</span>&nbsp;<span class="ident" id="1673004">gofuncname</span><span class="op" id="1673014">(</span><span class="ident" id="1673015">f1</span><span class="op" id="1673017">)</span><span class="op" id="1673018">,</span>&nbsp;<span class="string" id="1673020">&#34;&gt;&#34;</span><span class="op" id="1673023">,</span>&nbsp;<span class="ident" id="1673025">hex</span><span class="op" id="1673028">(</span><span class="ident" id="1673029">ftab</span><span class="op" id="1673033">[</span><span class="ident" id="1673034">i</span><span class="op" id="1673035">+</span><span class="num" id="1673036">1</span><span class="op" id="1673037">]</span><span class="op" id="1673038">.</span><span class="ident" id="1673039">entry</span><span class="op" id="1673044">)</span><span class="op" id="1673045">,</span>&nbsp;<span class="ident" id="1673047">f2name</span><span class="op" id="1673053">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673058">for</span>&nbsp;<span class="ident" id="1673062">j</span>&nbsp;<span class="op" id="1673064">:=</span>&nbsp;<span class="num" id="1673067">0</span><span class="op" id="1673068">;</span>&nbsp;<span class="ident" id="1673070">j</span>&nbsp;<span class="op" id="1673072">&lt;=</span>&nbsp;<span class="ident" id="1673075">i</span><span class="op" id="1673076">;</span>&nbsp;<span class="ident" id="1673078">j</span><span class="op" id="1673079">++</span>&nbsp;<span class="op" id="1673082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1673088">print</span><span class="op" id="1673093">(</span><span class="string" id="1673094">&#34;\t&#34;</span><span class="op" id="1673098">,</span>&nbsp;<span class="ident" id="1673100">hex</span><span class="op" id="1673103">(</span><span class="ident" id="1673104">ftab</span><span class="op" id="1673108">[</span><span class="ident" id="1673109">j</span><span class="op" id="1673110">]</span><span class="op" id="1673111">.</span><span class="ident" id="1673112">entry</span><span class="op" id="1673117">)</span><span class="op" id="1673118">,</span>&nbsp;<span class="string" id="1673120">&#34;&nbsp;&#34;</span><span class="op" id="1673123">,</span>&nbsp;<span class="ident" id="1673125">gofuncname</span><span class="op" id="1673135">(</span><span class="op" id="1673136">(</span><span class="op" id="1673137">*</span><span class="ident" id="1673138">_func</span><span class="op" id="1673143">)</span><span class="op" id="1673144">(</span><span class="ident" id="1673145">unsafe</span><span class="op" id="1673151">.</span><span class="ident" id="1673152">Pointer</span><span class="op" id="1673159">(</span><span class="op" id="1673160">&amp;</span><span class="ident" id="1673161">pclntable</span><span class="op" id="1673170">[</span><span class="ident" id="1673171">ftab</span><span class="op" id="1673175">[</span><span class="ident" id="1673176">j</span><span class="op" id="1673177">]</span><span class="op" id="1673178">.</span><span class="ident" id="1673179">funcoff</span><span class="op" id="1673186">]</span><span class="op" id="1673187">)</span><span class="op" id="1673188">)</span><span class="op" id="1673189">)</span><span class="op" id="1673190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673200">gothrow</span><span class="op" id="1673207">(</span><span class="string" id="1673208">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1673238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673242">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1673245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673249">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673306">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673365">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673395">sp</span>&nbsp;<span class="op" id="1673398">=</span>&nbsp;<span class="op" id="1673400">(</span><span class="op" id="1673401">*</span><span class="ident" id="1673402">sliceStruct</span><span class="op" id="1673413">)</span><span class="op" id="1673414">(</span><span class="ident" id="1673415">unsafe</span><span class="op" id="1673421">.</span><span class="ident" id="1673422">Pointer</span><span class="op" id="1673429">(</span><span class="op" id="1673430">&amp;</span><span class="ident" id="1673431">filetab</span><span class="op" id="1673438">)</span><span class="op" id="1673439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673442">end</span>&nbsp;<span class="op" id="1673446">:=</span>&nbsp;<span class="ident" id="1673449">unsafe</span><span class="op" id="1673455">.</span><span class="ident" id="1673456">Pointer</span><span class="op" id="1673463">(</span><span class="op" id="1673464">&amp;</span><span class="ident" id="1673465">ftab</span><span class="op" id="1673469">[</span><span class="ident" id="1673470">nftab</span><span class="op" id="1673475">]</span><span class="op" id="1673476">.</span><span class="ident" id="1673477">funcoff</span><span class="op" id="1673484">)</span>&nbsp;<span class="comment" id="1673486">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673507">fileoffset</span>&nbsp;<span class="op" id="1673518">:=</span>&nbsp;<span class="op" id="1673521">*</span><span class="op" id="1673522">(</span><span class="op" id="1673523">*</span><span class="builtintype" id="1673524">uint32</span><span class="op" id="1673530">)</span><span class="op" id="1673531">(</span><span class="ident" id="1673532">end</span><span class="op" id="1673535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673538">sp</span><span class="op" id="1673540">.</span><span class="ident" id="1673541">array</span>&nbsp;<span class="op" id="1673547">=</span>&nbsp;<span class="ident" id="1673549">unsafe</span><span class="op" id="1673555">.</span><span class="ident" id="1673556">Pointer</span><span class="op" id="1673563">(</span><span class="op" id="1673564">&amp;</span><span class="ident" id="1673565">pclntable</span><span class="op" id="1673574">[</span><span class="ident" id="1673575">fileoffset</span><span class="op" id="1673585">]</span><span class="op" id="1673586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673589">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1673630">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673676">sp</span><span class="op" id="1673678">.</span><span class="builtinfunc" id="1673679">len</span>&nbsp;<span class="op" id="1673683">=</span>&nbsp;<span class="num" id="1673685">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673688">sp</span><span class="op" id="1673690">.</span><span class="builtinfunc" id="1673691">cap</span>&nbsp;<span class="op" id="1673695">=</span>&nbsp;<span class="num" id="1673697">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673700">sp</span><span class="op" id="1673702">.</span><span class="builtinfunc" id="1673703">len</span>&nbsp;<span class="op" id="1673707">=</span>&nbsp;<span class="builtintype" id="1673709">int</span><span class="op" id="1673712">(</span><span class="ident" id="1673713">filetab</span><span class="op" id="1673720">[</span><span class="num" id="1673721">0</span><span class="op" id="1673722">]</span><span class="op" id="1673723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1673726">sp</span><span class="op" id="1673728">.</span><span class="builtinfunc" id="1673729">cap</span>&nbsp;<span class="op" id="1673733">=</span>&nbsp;<span class="ident" id="1673735">sp</span><span class="op" id="1673737">.</span><span class="builtinfunc" id="1673738">len</span><br>
<span class="lineno">100</span><span class="op" id="1673742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1673745">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1673816">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1673863">func</span>&nbsp;<span class="ident" id="1673868">FuncForPC</span><span class="op" id="1673877">(</span><span class="ident" id="1673878">pc</span>&nbsp;<span class="builtintype" id="1673881">uintptr</span><span class="op" id="1673888">)</span>&nbsp;<span class="op" id="1673890">*</span><span class="ident" id="1673891">Func</span>&nbsp;<span class="op" id="1673896">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1673899">return</span>&nbsp;<span class="op" id="1673906">(</span><span class="op" id="1673907">*</span><span class="ident" id="1673908">Func</span><span class="op" id="1673912">)</span><span class="op" id="1673913">(</span><span class="ident" id="1673914">unsafe</span><span class="op" id="1673920">.</span><span class="ident" id="1673921">Pointer</span><span class="op" id="1673928">(</span><span class="ident" id="1673929">findfunc</span><span class="op" id="1673937">(</span><span class="ident" id="1673938">pc</span><span class="op" id="1673940">)</span><span class="op" id="1673941">)</span><span class="op" id="1673942">)</span><br>
<span class="lineno"></span><span class="op" id="1673944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1673947">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1673989">func</span>&nbsp;<span class="op" id="1673994">(</span><span class="ident" id="1673995">f</span>&nbsp;<span class="op" id="1673997">*</span><span class="ident" id="1673998">Func</span><span class="op" id="1674002">)</span>&nbsp;<span class="ident" id="1674004">Name</span><span class="op" id="1674008">(</span><span class="op" id="1674009">)</span>&nbsp;<span class="builtintype" id="1674011">string</span>&nbsp;<span class="op" id="1674018">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674021">return</span>&nbsp;<span class="ident" id="1674028">gofuncname</span><span class="op" id="1674038">(</span><span class="ident" id="1674039">f</span><span class="op" id="1674040">.</span><span class="ident" id="1674041">raw</span><span class="op" id="1674044">(</span><span class="op" id="1674045">)</span><span class="op" id="1674046">)</span><br>
<span class="lineno"></span><span class="op" id="1674048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1674051">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1674103">func</span>&nbsp;<span class="op" id="1674108">(</span><span class="ident" id="1674109">f</span>&nbsp;<span class="op" id="1674111">*</span><span class="ident" id="1674112">Func</span><span class="op" id="1674116">)</span>&nbsp;<span class="ident" id="1674118">Entry</span><span class="op" id="1674123">(</span><span class="op" id="1674124">)</span>&nbsp;<span class="builtintype" id="1674126">uintptr</span>&nbsp;<span class="op" id="1674134">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674137">return</span>&nbsp;<span class="ident" id="1674144">f</span><span class="op" id="1674145">.</span><span class="ident" id="1674146">raw</span><span class="op" id="1674149">(</span><span class="op" id="1674150">)</span><span class="op" id="1674151">.</span><span class="ident" id="1674152">entry</span><br>
<span class="lineno"></span><span class="op" id="1674158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1674161">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1674218">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1674274">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1674332">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1674353">func</span>&nbsp;<span class="op" id="1674358">(</span><span class="ident" id="1674359">f</span>&nbsp;<span class="op" id="1674361">*</span><span class="ident" id="1674362">Func</span><span class="op" id="1674366">)</span>&nbsp;<span class="ident" id="1674368">FileLine</span><span class="op" id="1674376">(</span><span class="ident" id="1674377">pc</span>&nbsp;<span class="builtintype" id="1674380">uintptr</span><span class="op" id="1674387">)</span>&nbsp;<span class="op" id="1674389">(</span><span class="ident" id="1674390">file</span>&nbsp;<span class="builtintype" id="1674395">string</span><span class="op" id="1674401">,</span>&nbsp;<span class="ident" id="1674403">line</span>&nbsp;<span class="builtintype" id="1674408">int</span><span class="op" id="1674411">)</span>&nbsp;<span class="op" id="1674413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1674416">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1674483">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674547">line</span>&nbsp;<span class="op" id="1674552">=</span>&nbsp;<span class="builtintype" id="1674554">int</span><span class="op" id="1674557">(</span><span class="ident" id="1674558">funcline1</span><span class="op" id="1674567">(</span><span class="ident" id="1674568">f</span><span class="op" id="1674569">.</span><span class="ident" id="1674570">raw</span><span class="op" id="1674573">(</span><span class="op" id="1674574">)</span><span class="op" id="1674575">,</span>&nbsp;<span class="ident" id="1674577">pc</span><span class="op" id="1674579">,</span>&nbsp;<span class="op" id="1674581">&amp;</span><span class="ident" id="1674582">file</span><span class="op" id="1674586">,</span>&nbsp;<span class="builtintype" id="1674588">false</span><span class="op" id="1674593">)</span><span class="op" id="1674594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674597">return</span>&nbsp;<span class="ident" id="1674604">file</span><span class="op" id="1674608">,</span>&nbsp;<span class="ident" id="1674610">line</span><br>
<span class="lineno"></span><span class="op" id="1674615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1674618">func</span>&nbsp;<span class="ident" id="1674623">findfunc</span><span class="op" id="1674631">(</span><span class="ident" id="1674632">pc</span>&nbsp;<span class="builtintype" id="1674635">uintptr</span><span class="op" id="1674642">)</span>&nbsp;<span class="op" id="1674644">*</span><span class="ident" id="1674645">_func</span>&nbsp;<span class="op" id="1674651">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674654">if</span>&nbsp;<span class="builtinfunc" id="1674657">len</span><span class="op" id="1674660">(</span><span class="ident" id="1674661">ftab</span><span class="op" id="1674665">)</span>&nbsp;<span class="op" id="1674667">==</span>&nbsp;<span class="num" id="1674670">0</span>&nbsp;<span class="op" id="1674672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674676">return</span>&nbsp;<span class="ident" id="1674683">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1674688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674692">if</span>&nbsp;<span class="ident" id="1674695">pc</span>&nbsp;<span class="op" id="1674698">&lt;</span>&nbsp;<span class="ident" id="1674700">ftab</span><span class="op" id="1674704">[</span><span class="num" id="1674705">0</span><span class="op" id="1674706">]</span><span class="op" id="1674707">.</span><span class="ident" id="1674708">entry</span>&nbsp;<span class="op" id="1674714">||</span>&nbsp;<span class="ident" id="1674717">pc</span>&nbsp;<span class="op" id="1674720">&gt;=</span>&nbsp;<span class="ident" id="1674723">ftab</span><span class="op" id="1674727">[</span><span class="builtinfunc" id="1674728">len</span><span class="op" id="1674731">(</span><span class="ident" id="1674732">ftab</span><span class="op" id="1674736">)</span><span class="op" id="1674737">-</span><span class="num" id="1674738">1</span><span class="op" id="1674739">]</span><span class="op" id="1674740">.</span><span class="ident" id="1674741">entry</span>&nbsp;<span class="op" id="1674747">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674751">return</span>&nbsp;<span class="ident" id="1674758">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1674763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1674767">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674816">lo</span>&nbsp;<span class="op" id="1674819">:=</span>&nbsp;<span class="num" id="1674822">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674825">nf</span>&nbsp;<span class="op" id="1674828">:=</span>&nbsp;<span class="builtinfunc" id="1674831">len</span><span class="op" id="1674834">(</span><span class="ident" id="1674835">ftab</span><span class="op" id="1674839">)</span>&nbsp;<span class="op" id="1674841">-</span>&nbsp;<span class="num" id="1674843">1</span>&nbsp;<span class="comment" id="1674845">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674872">for</span>&nbsp;<span class="ident" id="1674876">nf</span>&nbsp;<span class="op" id="1674879">&gt;</span>&nbsp;<span class="num" id="1674881">0</span>&nbsp;<span class="op" id="1674883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674887">n</span>&nbsp;<span class="op" id="1674889">:=</span>&nbsp;<span class="ident" id="1674892">nf</span>&nbsp;<span class="op" id="1674895">/</span>&nbsp;<span class="num" id="1674897">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1674901">f</span>&nbsp;<span class="op" id="1674903">:=</span>&nbsp;<span class="op" id="1674906">&amp;</span><span class="ident" id="1674907">ftab</span><span class="op" id="1674911">[</span><span class="ident" id="1674912">lo</span><span class="op" id="1674914">+</span><span class="ident" id="1674915">n</span><span class="op" id="1674916">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674920">if</span>&nbsp;<span class="ident" id="1674923">f</span><span class="op" id="1674924">.</span><span class="ident" id="1674925">entry</span>&nbsp;<span class="op" id="1674931">&lt;=</span>&nbsp;<span class="ident" id="1674934">pc</span>&nbsp;<span class="op" id="1674937">&amp;&amp;</span>&nbsp;<span class="ident" id="1674940">pc</span>&nbsp;<span class="op" id="1674943">&lt;</span>&nbsp;<span class="ident" id="1674945">ftab</span><span class="op" id="1674949">[</span><span class="ident" id="1674950">lo</span><span class="op" id="1674952">+</span><span class="ident" id="1674953">n</span><span class="op" id="1674954">+</span><span class="num" id="1674955">1</span><span class="op" id="1674956">]</span><span class="op" id="1674957">.</span><span class="ident" id="1674958">entry</span>&nbsp;<span class="op" id="1674964">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1674969">return</span>&nbsp;<span class="op" id="1674976">(</span><span class="op" id="1674977">*</span><span class="ident" id="1674978">_func</span><span class="op" id="1674983">)</span><span class="op" id="1674984">(</span><span class="ident" id="1674985">unsafe</span><span class="op" id="1674991">.</span><span class="ident" id="1674992">Pointer</span><span class="op" id="1674999">(</span><span class="op" id="1675000">&amp;</span><span class="ident" id="1675001">pclntable</span><span class="op" id="1675010">[</span><span class="ident" id="1675011">f</span><span class="op" id="1675012">.</span><span class="ident" id="1675013">funcoff</span><span class="op" id="1675020">]</span><span class="op" id="1675021">)</span><span class="op" id="1675022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675026">}</span>&nbsp;<span class="keyword" id="1675028">else</span>&nbsp;<span class="keyword" id="1675033">if</span>&nbsp;<span class="ident" id="1675036">pc</span>&nbsp;<span class="op" id="1675039">&lt;</span>&nbsp;<span class="ident" id="1675041">f</span><span class="op" id="1675042">.</span><span class="ident" id="1675043">entry</span>&nbsp;<span class="op" id="1675049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675054">nf</span>&nbsp;<span class="op" id="1675057">=</span>&nbsp;<span class="ident" id="1675059">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675063">}</span>&nbsp;<span class="keyword" id="1675065">else</span>&nbsp;<span class="op" id="1675070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675075">lo</span>&nbsp;<span class="op" id="1675078">+=</span>&nbsp;<span class="ident" id="1675081">n</span>&nbsp;<span class="op" id="1675083">+</span>&nbsp;<span class="num" id="1675085">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675090">nf</span>&nbsp;<span class="op" id="1675093">-=</span>&nbsp;<span class="ident" id="1675096">n</span>&nbsp;<span class="op" id="1675098">+</span>&nbsp;<span class="num" id="1675100">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675111">gothrow</span><span class="op" id="1675118">(</span><span class="string" id="1675119">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1675151">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675154">return</span>&nbsp;<span class="ident" id="1675161">nil</span><br>
<span class="lineno"></span><span class="op" id="1675165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1675168">func</span>&nbsp;<span class="ident" id="1675173">pcvalue</span><span class="op" id="1675180">(</span><span class="ident" id="1675181">f</span>&nbsp;<span class="op" id="1675183">*</span><span class="ident" id="1675184">_func</span><span class="op" id="1675189">,</span>&nbsp;<span class="ident" id="1675191">off</span>&nbsp;<span class="builtintype" id="1675195">int32</span><span class="op" id="1675200">,</span>&nbsp;<span class="ident" id="1675202">targetpc</span>&nbsp;<span class="builtintype" id="1675211">uintptr</span><span class="op" id="1675218">,</span>&nbsp;<span class="ident" id="1675220">strict</span>&nbsp;<span class="builtintype" id="1675227">bool</span><span class="op" id="1675231">)</span>&nbsp;<span class="builtintype" id="1675233">int32</span>&nbsp;<span class="op" id="1675239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675242">if</span>&nbsp;<span class="ident" id="1675245">off</span>&nbsp;<span class="op" id="1675249">==</span>&nbsp;<span class="num" id="1675252">0</span>&nbsp;<span class="op" id="1675254">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675258">return</span>&nbsp;<span class="op" id="1675265">-</span><span class="num" id="1675266">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675272">p</span>&nbsp;<span class="op" id="1675274">:=</span>&nbsp;<span class="ident" id="1675277">pclntable</span><span class="op" id="1675286">[</span><span class="ident" id="1675287">off</span><span class="op" id="1675290">:</span><span class="op" id="1675291">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675294">pc</span>&nbsp;<span class="op" id="1675297">:=</span>&nbsp;<span class="ident" id="1675300">f</span><span class="op" id="1675301">.</span><span class="ident" id="1675302">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675309">val</span>&nbsp;<span class="op" id="1675313">:=</span>&nbsp;<span class="builtintype" id="1675316">int32</span><span class="op" id="1675321">(</span><span class="op" id="1675322">-</span><span class="num" id="1675323">1</span><span class="op" id="1675324">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675327">for</span>&nbsp;<span class="op" id="1675331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675335">var</span>&nbsp;<span class="ident" id="1675339">ok</span>&nbsp;<span class="builtintype" id="1675342">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675349">p</span><span class="op" id="1675350">,</span>&nbsp;<span class="ident" id="1675352">ok</span>&nbsp;<span class="op" id="1675355">=</span>&nbsp;<span class="ident" id="1675357">step</span><span class="op" id="1675361">(</span><span class="ident" id="1675362">p</span><span class="op" id="1675363">,</span>&nbsp;<span class="op" id="1675365">&amp;</span><span class="ident" id="1675366">pc</span><span class="op" id="1675368">,</span>&nbsp;<span class="op" id="1675370">&amp;</span><span class="ident" id="1675371">val</span><span class="op" id="1675374">,</span>&nbsp;<span class="ident" id="1675376">pc</span>&nbsp;<span class="op" id="1675379">==</span>&nbsp;<span class="ident" id="1675382">f</span><span class="op" id="1675383">.</span><span class="ident" id="1675384">entry</span><span class="op" id="1675389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675393">if</span>&nbsp;<span class="op" id="1675396">!</span><span class="ident" id="1675397">ok</span>&nbsp;<span class="op" id="1675400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675405">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675417">if</span>&nbsp;<span class="ident" id="1675420">targetpc</span>&nbsp;<span class="op" id="1675429">&lt;</span>&nbsp;<span class="ident" id="1675431">pc</span>&nbsp;<span class="op" id="1675434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675439">return</span>&nbsp;<span class="ident" id="1675446">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675455">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1675459">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1675530">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675562">if</span>&nbsp;<span class="ident" id="1675565">panicking</span>&nbsp;<span class="op" id="1675575">!=</span>&nbsp;<span class="num" id="1675578">0</span>&nbsp;<span class="op" id="1675580">||</span>&nbsp;<span class="op" id="1675583">!</span><span class="ident" id="1675584">strict</span>&nbsp;<span class="op" id="1675591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675595">return</span>&nbsp;<span class="op" id="1675602">-</span><span class="num" id="1675603">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1675610">print</span><span class="op" id="1675615">(</span><span class="string" id="1675616">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1675654">,</span>&nbsp;<span class="ident" id="1675656">gofuncname</span><span class="op" id="1675666">(</span><span class="ident" id="1675667">f</span><span class="op" id="1675668">)</span><span class="op" id="1675669">,</span>&nbsp;<span class="string" id="1675671">&#34;&nbsp;pc=&#34;</span><span class="op" id="1675677">,</span>&nbsp;<span class="ident" id="1675679">hex</span><span class="op" id="1675682">(</span><span class="ident" id="1675683">pc</span><span class="op" id="1675685">)</span><span class="op" id="1675686">,</span>&nbsp;<span class="string" id="1675688">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1675700">,</span>&nbsp;<span class="ident" id="1675702">hex</span><span class="op" id="1675705">(</span><span class="ident" id="1675706">targetpc</span><span class="op" id="1675714">)</span><span class="op" id="1675715">,</span>&nbsp;<span class="string" id="1675717">&#34;&nbsp;tab=&#34;</span><span class="op" id="1675724">,</span>&nbsp;<span class="ident" id="1675726">p</span><span class="op" id="1675727">,</span>&nbsp;<span class="string" id="1675729">&#34;\n&#34;</span><span class="op" id="1675733">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675737">p</span>&nbsp;<span class="op" id="1675739">=</span>&nbsp;<span class="ident" id="1675741">pclntable</span><span class="op" id="1675750">[</span><span class="ident" id="1675751">off</span><span class="op" id="1675754">:</span><span class="op" id="1675755">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675758">pc</span>&nbsp;<span class="op" id="1675761">=</span>&nbsp;<span class="ident" id="1675763">f</span><span class="op" id="1675764">.</span><span class="ident" id="1675765">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675772">val</span>&nbsp;<span class="op" id="1675776">=</span>&nbsp;<span class="op" id="1675778">-</span><span class="num" id="1675779">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675782">for</span>&nbsp;<span class="op" id="1675786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675790">var</span>&nbsp;<span class="ident" id="1675794">ok</span>&nbsp;<span class="builtintype" id="1675797">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675804">p</span><span class="op" id="1675805">,</span>&nbsp;<span class="ident" id="1675807">ok</span>&nbsp;<span class="op" id="1675810">=</span>&nbsp;<span class="ident" id="1675812">step</span><span class="op" id="1675816">(</span><span class="ident" id="1675817">p</span><span class="op" id="1675818">,</span>&nbsp;<span class="op" id="1675820">&amp;</span><span class="ident" id="1675821">pc</span><span class="op" id="1675823">,</span>&nbsp;<span class="op" id="1675825">&amp;</span><span class="ident" id="1675826">val</span><span class="op" id="1675829">,</span>&nbsp;<span class="ident" id="1675831">pc</span>&nbsp;<span class="op" id="1675834">==</span>&nbsp;<span class="ident" id="1675837">f</span><span class="op" id="1675838">.</span><span class="ident" id="1675839">entry</span><span class="op" id="1675844">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675848">if</span>&nbsp;<span class="op" id="1675851">!</span><span class="ident" id="1675852">ok</span>&nbsp;<span class="op" id="1675855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675860">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1675872">print</span><span class="op" id="1675877">(</span><span class="string" id="1675878">&#34;\tvalue=&#34;</span><span class="op" id="1675888">,</span>&nbsp;<span class="ident" id="1675890">val</span><span class="op" id="1675893">,</span>&nbsp;<span class="string" id="1675895">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1675907">,</span>&nbsp;<span class="ident" id="1675909">hex</span><span class="op" id="1675912">(</span><span class="ident" id="1675913">pc</span><span class="op" id="1675915">)</span><span class="op" id="1675916">,</span>&nbsp;<span class="string" id="1675918">&#34;\n&#34;</span><span class="op" id="1675922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1675925">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1675929">gothrow</span><span class="op" id="1675936">(</span><span class="string" id="1675937">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1675967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1675970">return</span>&nbsp;<span class="op" id="1675977">-</span><span class="num" id="1675978">1</span><br>
<span class="lineno"></span><span class="op" id="1675980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1675983">func</span>&nbsp;<span class="ident" id="1675988">funcname</span><span class="op" id="1675996">(</span><span class="ident" id="1675997">f</span>&nbsp;<span class="op" id="1675999">*</span><span class="ident" id="1676000">_func</span><span class="op" id="1676005">)</span>&nbsp;<span class="op" id="1676007">*</span><span class="builtintype" id="1676008">byte</span>&nbsp;<span class="op" id="1676013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676016">if</span>&nbsp;<span class="ident" id="1676019">f</span>&nbsp;<span class="op" id="1676021">==</span>&nbsp;<span class="ident" id="1676024">nil</span>&nbsp;<span class="op" id="1676028">||</span>&nbsp;<span class="ident" id="1676031">f</span><span class="op" id="1676032">.</span><span class="ident" id="1676033">nameoff</span>&nbsp;<span class="op" id="1676041">==</span>&nbsp;<span class="num" id="1676044">0</span>&nbsp;<span class="op" id="1676046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676050">return</span>&nbsp;<span class="ident" id="1676057">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676065">return</span>&nbsp;<span class="op" id="1676072">(</span><span class="op" id="1676073">*</span><span class="builtintype" id="1676074">byte</span><span class="op" id="1676078">)</span><span class="op" id="1676079">(</span><span class="ident" id="1676080">unsafe</span><span class="op" id="1676086">.</span><span class="ident" id="1676087">Pointer</span><span class="op" id="1676094">(</span><span class="op" id="1676095">&amp;</span><span class="ident" id="1676096">pclntable</span><span class="op" id="1676105">[</span><span class="ident" id="1676106">f</span><span class="op" id="1676107">.</span><span class="ident" id="1676108">nameoff</span><span class="op" id="1676115">]</span><span class="op" id="1676116">)</span><span class="op" id="1676117">)</span><br>
<span class="lineno">205</span><span class="op" id="1676119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676122">func</span>&nbsp;<span class="ident" id="1676127">gofuncname</span><span class="op" id="1676137">(</span><span class="ident" id="1676138">f</span>&nbsp;<span class="op" id="1676140">*</span><span class="ident" id="1676141">_func</span><span class="op" id="1676146">)</span>&nbsp;<span class="builtintype" id="1676148">string</span>&nbsp;<span class="op" id="1676155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676158">return</span>&nbsp;<span class="ident" id="1676165">gostringnocopy</span><span class="op" id="1676179">(</span><span class="ident" id="1676180">funcname</span><span class="op" id="1676188">(</span><span class="ident" id="1676189">f</span><span class="op" id="1676190">)</span><span class="op" id="1676191">)</span><br>
<span class="lineno"></span><span class="op" id="1676193">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1676196">func</span>&nbsp;<span class="ident" id="1676201">funcline1</span><span class="op" id="1676210">(</span><span class="ident" id="1676211">f</span>&nbsp;<span class="op" id="1676213">*</span><span class="ident" id="1676214">_func</span><span class="op" id="1676219">,</span>&nbsp;<span class="ident" id="1676221">targetpc</span>&nbsp;<span class="builtintype" id="1676230">uintptr</span><span class="op" id="1676237">,</span>&nbsp;<span class="ident" id="1676239">file</span>&nbsp;<span class="op" id="1676244">*</span><span class="builtintype" id="1676245">string</span><span class="op" id="1676251">,</span>&nbsp;<span class="ident" id="1676253">strict</span>&nbsp;<span class="builtintype" id="1676260">bool</span><span class="op" id="1676264">)</span>&nbsp;<span class="builtintype" id="1676266">int32</span>&nbsp;<span class="op" id="1676272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676275">*</span><span class="ident" id="1676276">file</span>&nbsp;<span class="op" id="1676281">=</span>&nbsp;<span class="string" id="1676283">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676288">fileno</span>&nbsp;<span class="op" id="1676295">:=</span>&nbsp;<span class="builtintype" id="1676298">int</span><span class="op" id="1676301">(</span><span class="ident" id="1676302">pcvalue</span><span class="op" id="1676309">(</span><span class="ident" id="1676310">f</span><span class="op" id="1676311">,</span>&nbsp;<span class="ident" id="1676313">f</span><span class="op" id="1676314">.</span><span class="ident" id="1676315">pcfile</span><span class="op" id="1676321">,</span>&nbsp;<span class="ident" id="1676323">targetpc</span><span class="op" id="1676331">,</span>&nbsp;<span class="ident" id="1676333">strict</span><span class="op" id="1676339">)</span><span class="op" id="1676340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676343">line</span>&nbsp;<span class="op" id="1676348">:=</span>&nbsp;<span class="ident" id="1676351">pcvalue</span><span class="op" id="1676358">(</span><span class="ident" id="1676359">f</span><span class="op" id="1676360">,</span>&nbsp;<span class="ident" id="1676362">f</span><span class="op" id="1676363">.</span><span class="ident" id="1676364">pcln</span><span class="op" id="1676368">,</span>&nbsp;<span class="ident" id="1676370">targetpc</span><span class="op" id="1676378">,</span>&nbsp;<span class="ident" id="1676380">strict</span><span class="op" id="1676386">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676389">if</span>&nbsp;<span class="ident" id="1676392">fileno</span>&nbsp;<span class="op" id="1676399">==</span>&nbsp;<span class="op" id="1676402">-</span><span class="num" id="1676403">1</span>&nbsp;<span class="op" id="1676405">||</span>&nbsp;<span class="ident" id="1676408">line</span>&nbsp;<span class="op" id="1676413">==</span>&nbsp;<span class="op" id="1676416">-</span><span class="num" id="1676417">1</span>&nbsp;<span class="op" id="1676419">||</span>&nbsp;<span class="ident" id="1676422">fileno</span>&nbsp;<span class="op" id="1676429">&gt;=</span>&nbsp;<span class="builtinfunc" id="1676432">len</span><span class="op" id="1676435">(</span><span class="ident" id="1676436">filetab</span><span class="op" id="1676443">)</span>&nbsp;<span class="op" id="1676445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1676449">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676560">return</span>&nbsp;<span class="num" id="1676567">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676573">*</span><span class="ident" id="1676574">file</span>&nbsp;<span class="op" id="1676579">=</span>&nbsp;<span class="ident" id="1676581">gostringnocopy</span><span class="op" id="1676595">(</span><span class="op" id="1676596">&amp;</span><span class="ident" id="1676597">pclntable</span><span class="op" id="1676606">[</span><span class="ident" id="1676607">filetab</span><span class="op" id="1676614">[</span><span class="ident" id="1676615">fileno</span><span class="op" id="1676621">]</span><span class="op" id="1676622">]</span><span class="op" id="1676623">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676626">return</span>&nbsp;<span class="ident" id="1676633">line</span><br>
<span class="lineno"></span><span class="op" id="1676638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676641">func</span>&nbsp;<span class="ident" id="1676646">funcline</span><span class="op" id="1676654">(</span><span class="ident" id="1676655">f</span>&nbsp;<span class="op" id="1676657">*</span><span class="ident" id="1676658">_func</span><span class="op" id="1676663">,</span>&nbsp;<span class="ident" id="1676665">targetpc</span>&nbsp;<span class="builtintype" id="1676674">uintptr</span><span class="op" id="1676681">,</span>&nbsp;<span class="ident" id="1676683">file</span>&nbsp;<span class="op" id="1676688">*</span><span class="builtintype" id="1676689">string</span><span class="op" id="1676695">)</span>&nbsp;<span class="builtintype" id="1676697">int32</span>&nbsp;<span class="op" id="1676703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676706">return</span>&nbsp;<span class="ident" id="1676713">funcline1</span><span class="op" id="1676722">(</span><span class="ident" id="1676723">f</span><span class="op" id="1676724">,</span>&nbsp;<span class="ident" id="1676726">targetpc</span><span class="op" id="1676734">,</span>&nbsp;<span class="ident" id="1676736">file</span><span class="op" id="1676740">,</span>&nbsp;<span class="builtintype" id="1676742">true</span><span class="op" id="1676746">)</span><br>
<span class="lineno">225</span><span class="op" id="1676748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676751">func</span>&nbsp;<span class="ident" id="1676756">funcspdelta</span><span class="op" id="1676767">(</span><span class="ident" id="1676768">f</span>&nbsp;<span class="op" id="1676770">*</span><span class="ident" id="1676771">_func</span><span class="op" id="1676776">,</span>&nbsp;<span class="ident" id="1676778">targetpc</span>&nbsp;<span class="builtintype" id="1676787">uintptr</span><span class="op" id="1676794">)</span>&nbsp;<span class="builtintype" id="1676796">int32</span>&nbsp;<span class="op" id="1676802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1676805">x</span>&nbsp;<span class="op" id="1676807">:=</span>&nbsp;<span class="ident" id="1676810">pcvalue</span><span class="op" id="1676817">(</span><span class="ident" id="1676818">f</span><span class="op" id="1676819">,</span>&nbsp;<span class="ident" id="1676821">f</span><span class="op" id="1676822">.</span><span class="ident" id="1676823">pcsp</span><span class="op" id="1676827">,</span>&nbsp;<span class="ident" id="1676829">targetpc</span><span class="op" id="1676837">,</span>&nbsp;<span class="builtintype" id="1676839">true</span><span class="op" id="1676843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676846">if</span>&nbsp;<span class="ident" id="1676849">x</span><span class="op" id="1676850">&amp;</span><span class="op" id="1676851">(</span><span class="ident" id="1676852">ptrSize</span><span class="op" id="1676859">-</span><span class="num" id="1676860">1</span><span class="op" id="1676861">)</span>&nbsp;<span class="op" id="1676863">!=</span>&nbsp;<span class="num" id="1676866">0</span>&nbsp;<span class="op" id="1676868">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1676872">print</span><span class="op" id="1676877">(</span><span class="string" id="1676878">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1676896">,</span>&nbsp;<span class="ident" id="1676898">hex</span><span class="op" id="1676901">(</span><span class="ident" id="1676902">f</span><span class="op" id="1676903">.</span><span class="ident" id="1676904">entry</span><span class="op" id="1676909">)</span><span class="op" id="1676910">,</span>&nbsp;<span class="string" id="1676912">&#34;&nbsp;&#34;</span><span class="op" id="1676915">,</span>&nbsp;<span class="ident" id="1676917">hex</span><span class="op" id="1676920">(</span><span class="ident" id="1676921">targetpc</span><span class="op" id="1676929">)</span><span class="op" id="1676930">,</span>&nbsp;<span class="string" id="1676932">&#34;&nbsp;&#34;</span><span class="op" id="1676935">,</span>&nbsp;<span class="ident" id="1676937">hex</span><span class="op" id="1676940">(</span><span class="ident" id="1676941">f</span><span class="op" id="1676942">.</span><span class="ident" id="1676943">pcsp</span><span class="op" id="1676947">)</span><span class="op" id="1676948">,</span>&nbsp;<span class="string" id="1676950">&#34;&nbsp;&#34;</span><span class="op" id="1676953">,</span>&nbsp;<span class="ident" id="1676955">x</span><span class="op" id="1676956">,</span>&nbsp;<span class="string" id="1676958">&#34;\n&#34;</span><span class="op" id="1676962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1676965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1676968">return</span>&nbsp;<span class="ident" id="1676975">x</span><br>
<span class="lineno"></span><span class="op" id="1676977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1676980">func</span>&nbsp;<span class="ident" id="1676985">pcdatavalue</span><span class="op" id="1676996">(</span><span class="ident" id="1676997">f</span>&nbsp;<span class="op" id="1676999">*</span><span class="ident" id="1677000">_func</span><span class="op" id="1677005">,</span>&nbsp;<span class="ident" id="1677007">table</span>&nbsp;<span class="builtintype" id="1677013">int32</span><span class="op" id="1677018">,</span>&nbsp;<span class="ident" id="1677020">targetpc</span>&nbsp;<span class="builtintype" id="1677029">uintptr</span><span class="op" id="1677036">)</span>&nbsp;<span class="builtintype" id="1677038">int32</span>&nbsp;<span class="op" id="1677044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677047">if</span>&nbsp;<span class="ident" id="1677050">table</span>&nbsp;<span class="op" id="1677056">&lt;</span>&nbsp;<span class="num" id="1677058">0</span>&nbsp;<span class="op" id="1677060">||</span>&nbsp;<span class="ident" id="1677063">table</span>&nbsp;<span class="op" id="1677069">&gt;=</span>&nbsp;<span class="ident" id="1677072">f</span><span class="op" id="1677073">.</span><span class="ident" id="1677074">npcdata</span>&nbsp;<span class="op" id="1677082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677086">return</span>&nbsp;<span class="op" id="1677093">-</span><span class="num" id="1677094">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677100">off</span>&nbsp;<span class="op" id="1677104">:=</span>&nbsp;<span class="op" id="1677107">*</span><span class="op" id="1677108">(</span><span class="op" id="1677109">*</span><span class="builtintype" id="1677110">int32</span><span class="op" id="1677115">)</span><span class="op" id="1677116">(</span><span class="ident" id="1677117">add</span><span class="op" id="1677120">(</span><span class="ident" id="1677121">unsafe</span><span class="op" id="1677127">.</span><span class="ident" id="1677128">Pointer</span><span class="op" id="1677135">(</span><span class="op" id="1677136">&amp;</span><span class="ident" id="1677137">f</span><span class="op" id="1677138">.</span><span class="ident" id="1677139">nfuncdata</span><span class="op" id="1677148">)</span><span class="op" id="1677149">,</span>&nbsp;<span class="ident" id="1677151">unsafe</span><span class="op" id="1677157">.</span><span class="ident" id="1677158">Sizeof</span><span class="op" id="1677164">(</span><span class="ident" id="1677165">f</span><span class="op" id="1677166">.</span><span class="ident" id="1677167">nfuncdata</span><span class="op" id="1677176">)</span><span class="op" id="1677177">+</span><span class="builtintype" id="1677178">uintptr</span><span class="op" id="1677185">(</span><span class="ident" id="1677186">table</span><span class="op" id="1677191">)</span><span class="op" id="1677192">*</span><span class="num" id="1677193">4</span><span class="op" id="1677194">)</span><span class="op" id="1677195">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677198">return</span>&nbsp;<span class="ident" id="1677205">pcvalue</span><span class="op" id="1677212">(</span><span class="ident" id="1677213">f</span><span class="op" id="1677214">,</span>&nbsp;<span class="ident" id="1677216">off</span><span class="op" id="1677219">,</span>&nbsp;<span class="ident" id="1677221">targetpc</span><span class="op" id="1677229">,</span>&nbsp;<span class="builtintype" id="1677231">true</span><span class="op" id="1677235">)</span><br>
<span class="lineno"></span><span class="op" id="1677237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1677240">func</span>&nbsp;<span class="ident" id="1677245">funcdata</span><span class="op" id="1677253">(</span><span class="ident" id="1677254">f</span>&nbsp;<span class="op" id="1677256">*</span><span class="ident" id="1677257">_func</span><span class="op" id="1677262">,</span>&nbsp;<span class="ident" id="1677264">i</span>&nbsp;<span class="builtintype" id="1677266">int32</span><span class="op" id="1677271">)</span>&nbsp;<span class="ident" id="1677273">unsafe</span><span class="op" id="1677279">.</span><span class="ident" id="1677280">Pointer</span>&nbsp;<span class="op" id="1677288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677291">if</span>&nbsp;<span class="ident" id="1677294">i</span>&nbsp;<span class="op" id="1677296">&lt;</span>&nbsp;<span class="num" id="1677298">0</span>&nbsp;<span class="op" id="1677300">||</span>&nbsp;<span class="ident" id="1677303">i</span>&nbsp;<span class="op" id="1677305">&gt;=</span>&nbsp;<span class="ident" id="1677308">f</span><span class="op" id="1677309">.</span><span class="ident" id="1677310">nfuncdata</span>&nbsp;<span class="op" id="1677320">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677324">return</span>&nbsp;<span class="ident" id="1677331">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677339">p</span>&nbsp;<span class="op" id="1677341">:=</span>&nbsp;<span class="ident" id="1677344">add</span><span class="op" id="1677347">(</span><span class="ident" id="1677348">unsafe</span><span class="op" id="1677354">.</span><span class="ident" id="1677355">Pointer</span><span class="op" id="1677362">(</span><span class="op" id="1677363">&amp;</span><span class="ident" id="1677364">f</span><span class="op" id="1677365">.</span><span class="ident" id="1677366">nfuncdata</span><span class="op" id="1677375">)</span><span class="op" id="1677376">,</span>&nbsp;<span class="ident" id="1677378">unsafe</span><span class="op" id="1677384">.</span><span class="ident" id="1677385">Sizeof</span><span class="op" id="1677391">(</span><span class="ident" id="1677392">f</span><span class="op" id="1677393">.</span><span class="ident" id="1677394">nfuncdata</span><span class="op" id="1677403">)</span><span class="op" id="1677404">+</span><span class="builtintype" id="1677405">uintptr</span><span class="op" id="1677412">(</span><span class="ident" id="1677413">f</span><span class="op" id="1677414">.</span><span class="ident" id="1677415">npcdata</span><span class="op" id="1677422">)</span><span class="op" id="1677423">*</span><span class="num" id="1677424">4</span><span class="op" id="1677425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677428">if</span>&nbsp;<span class="ident" id="1677431">ptrSize</span>&nbsp;<span class="op" id="1677439">==</span>&nbsp;<span class="num" id="1677442">8</span>&nbsp;<span class="op" id="1677444">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1677447">uintptr</span><span class="op" id="1677454">(</span><span class="ident" id="1677455">p</span><span class="op" id="1677456">)</span><span class="op" id="1677457">&amp;</span><span class="num" id="1677458">4</span>&nbsp;<span class="op" id="1677460">!=</span>&nbsp;<span class="num" id="1677463">0</span>&nbsp;<span class="op" id="1677465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677469">if</span>&nbsp;<span class="builtintype" id="1677472">uintptr</span><span class="op" id="1677479">(</span><span class="ident" id="1677480">unsafe</span><span class="op" id="1677486">.</span><span class="ident" id="1677487">Pointer</span><span class="op" id="1677494">(</span><span class="ident" id="1677495">f</span><span class="op" id="1677496">)</span><span class="op" id="1677497">)</span><span class="op" id="1677498">&amp;</span><span class="num" id="1677499">4</span>&nbsp;<span class="op" id="1677501">!=</span>&nbsp;<span class="num" id="1677504">0</span>&nbsp;<span class="op" id="1677506">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1677511">println</span><span class="op" id="1677518">(</span><span class="string" id="1677519">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1677545">,</span>&nbsp;<span class="ident" id="1677547">f</span><span class="op" id="1677548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677556">p</span>&nbsp;<span class="op" id="1677558">=</span>&nbsp;<span class="ident" id="1677560">add</span><span class="op" id="1677563">(</span><span class="ident" id="1677564">p</span><span class="op" id="1677565">,</span>&nbsp;<span class="num" id="1677567">4</span><span class="op" id="1677568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677574">return</span>&nbsp;<span class="op" id="1677581">*</span><span class="op" id="1677582">(</span><span class="op" id="1677583">*</span><span class="ident" id="1677584">unsafe</span><span class="op" id="1677590">.</span><span class="ident" id="1677591">Pointer</span><span class="op" id="1677598">)</span><span class="op" id="1677599">(</span><span class="ident" id="1677600">add</span><span class="op" id="1677603">(</span><span class="ident" id="1677604">p</span><span class="op" id="1677605">,</span>&nbsp;<span class="builtintype" id="1677607">uintptr</span><span class="op" id="1677614">(</span><span class="ident" id="1677615">i</span><span class="op" id="1677616">)</span><span class="op" id="1677617">*</span><span class="ident" id="1677618">ptrSize</span><span class="op" id="1677625">)</span><span class="op" id="1677626">)</span><br>
<span class="lineno">255</span><span class="op" id="1677628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1677631">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1677697">func</span>&nbsp;<span class="ident" id="1677702">step</span><span class="op" id="1677706">(</span><span class="ident" id="1677707">p</span>&nbsp;<span class="op" id="1677709">[</span><span class="op" id="1677710">]</span><span class="builtintype" id="1677711">byte</span><span class="op" id="1677715">,</span>&nbsp;<span class="ident" id="1677717">pc</span>&nbsp;<span class="op" id="1677720">*</span><span class="builtintype" id="1677721">uintptr</span><span class="op" id="1677728">,</span>&nbsp;<span class="ident" id="1677730">val</span>&nbsp;<span class="op" id="1677734">*</span><span class="builtintype" id="1677735">int32</span><span class="op" id="1677740">,</span>&nbsp;<span class="ident" id="1677742">first</span>&nbsp;<span class="builtintype" id="1677748">bool</span><span class="op" id="1677752">)</span>&nbsp;<span class="op" id="1677754">(</span><span class="ident" id="1677755">newp</span>&nbsp;<span class="op" id="1677760">[</span><span class="op" id="1677761">]</span><span class="builtintype" id="1677762">byte</span><span class="op" id="1677766">,</span>&nbsp;<span class="ident" id="1677768">ok</span>&nbsp;<span class="builtintype" id="1677771">bool</span><span class="op" id="1677775">)</span>&nbsp;<span class="op" id="1677777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677780">p</span><span class="op" id="1677781">,</span>&nbsp;<span class="ident" id="1677783">uvdelta</span>&nbsp;<span class="op" id="1677791">:=</span>&nbsp;<span class="ident" id="1677794">readvarint</span><span class="op" id="1677804">(</span><span class="ident" id="1677805">p</span><span class="op" id="1677806">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677809">if</span>&nbsp;<span class="ident" id="1677812">uvdelta</span>&nbsp;<span class="op" id="1677820">==</span>&nbsp;<span class="num" id="1677823">0</span>&nbsp;<span class="op" id="1677825">&amp;&amp;</span>&nbsp;<span class="op" id="1677828">!</span><span class="ident" id="1677829">first</span>&nbsp;<span class="op" id="1677835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677839">return</span>&nbsp;<span class="ident" id="1677846">nil</span><span class="op" id="1677849">,</span>&nbsp;<span class="builtintype" id="1677851">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1677861">if</span>&nbsp;<span class="ident" id="1677864">uvdelta</span><span class="op" id="1677871">&amp;</span><span class="num" id="1677872">1</span>&nbsp;<span class="op" id="1677874">!=</span>&nbsp;<span class="num" id="1677877">0</span>&nbsp;<span class="op" id="1677879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677883">uvdelta</span>&nbsp;<span class="op" id="1677891">=</span>&nbsp;<span class="op" id="1677893">^</span><span class="op" id="1677894">(</span><span class="ident" id="1677895">uvdelta</span>&nbsp;<span class="op" id="1677903">&gt;&gt;</span>&nbsp;<span class="num" id="1677906">1</span><span class="op" id="1677907">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677910">}</span>&nbsp;<span class="keyword" id="1677912">else</span>&nbsp;<span class="op" id="1677917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677921">uvdelta</span>&nbsp;<span class="op" id="1677929">&gt;&gt;=</span>&nbsp;<span class="num" id="1677933">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677939">vdelta</span>&nbsp;<span class="op" id="1677946">:=</span>&nbsp;<span class="builtintype" id="1677949">int32</span><span class="op" id="1677954">(</span><span class="ident" id="1677955">uvdelta</span><span class="op" id="1677962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1677965">p</span><span class="op" id="1677966">,</span>&nbsp;<span class="ident" id="1677968">pcdelta</span>&nbsp;<span class="op" id="1677976">:=</span>&nbsp;<span class="ident" id="1677979">readvarint</span><span class="op" id="1677989">(</span><span class="ident" id="1677990">p</span><span class="op" id="1677991">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1677994">*</span><span class="ident" id="1677995">pc</span>&nbsp;<span class="op" id="1677998">+=</span>&nbsp;<span class="builtintype" id="1678001">uintptr</span><span class="op" id="1678008">(</span><span class="ident" id="1678009">pcdelta</span>&nbsp;<span class="op" id="1678017">*</span>&nbsp;<span class="ident" id="1678019">_PCQuantum</span><span class="op" id="1678029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678032">*</span><span class="ident" id="1678033">val</span>&nbsp;<span class="op" id="1678037">+=</span>&nbsp;<span class="ident" id="1678040">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678048">return</span>&nbsp;<span class="ident" id="1678055">p</span><span class="op" id="1678056">,</span>&nbsp;<span class="builtintype" id="1678058">true</span><br>
<span class="lineno"></span><span class="op" id="1678063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1678066">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1678103">func</span>&nbsp;<span class="ident" id="1678108">readvarint</span><span class="op" id="1678118">(</span><span class="ident" id="1678119">p</span>&nbsp;<span class="op" id="1678121">[</span><span class="op" id="1678122">]</span><span class="builtintype" id="1678123">byte</span><span class="op" id="1678127">)</span>&nbsp;<span class="op" id="1678129">(</span><span class="ident" id="1678130">newp</span>&nbsp;<span class="op" id="1678135">[</span><span class="op" id="1678136">]</span><span class="builtintype" id="1678137">byte</span><span class="op" id="1678141">,</span>&nbsp;<span class="ident" id="1678143">val</span>&nbsp;<span class="builtintype" id="1678147">uint32</span><span class="op" id="1678153">)</span>&nbsp;<span class="op" id="1678155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678158">var</span>&nbsp;<span class="ident" id="1678162">v</span><span class="op" id="1678163">,</span>&nbsp;<span class="ident" id="1678165">shift</span>&nbsp;<span class="builtintype" id="1678171">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678179">for</span>&nbsp;<span class="op" id="1678183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678187">b</span>&nbsp;<span class="op" id="1678189">:=</span>&nbsp;<span class="ident" id="1678192">p</span><span class="op" id="1678193">[</span><span class="num" id="1678194">0</span><span class="op" id="1678195">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678199">p</span>&nbsp;<span class="op" id="1678201">=</span>&nbsp;<span class="ident" id="1678203">p</span><span class="op" id="1678204">[</span><span class="num" id="1678205">1</span><span class="op" id="1678206">:</span><span class="op" id="1678207">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678211">v</span>&nbsp;<span class="op" id="1678213">|=</span>&nbsp;<span class="op" id="1678216">(</span><span class="builtintype" id="1678217">uint32</span><span class="op" id="1678223">(</span><span class="ident" id="1678224">b</span><span class="op" id="1678225">)</span>&nbsp;<span class="op" id="1678227">&amp;</span>&nbsp;<span class="num" id="1678229">0x7F</span><span class="op" id="1678233">)</span>&nbsp;<span class="op" id="1678235">&lt;&lt;</span>&nbsp;<span class="ident" id="1678238">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678246">if</span>&nbsp;<span class="ident" id="1678249">b</span><span class="op" id="1678250">&amp;</span><span class="num" id="1678251">0x80</span>&nbsp;<span class="op" id="1678256">==</span>&nbsp;<span class="num" id="1678259">0</span>&nbsp;<span class="op" id="1678261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678266">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678274">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1678278">shift</span>&nbsp;<span class="op" id="1678284">+=</span>&nbsp;<span class="num" id="1678287">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1678290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1678293">return</span>&nbsp;<span class="ident" id="1678300">p</span><span class="op" id="1678301">,</span>&nbsp;<span class="ident" id="1678303">v</span><br>
<span class="lineno"></span><span class="op" id="1678305">}</span>
</div>
</body>
</html>
