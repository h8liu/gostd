<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7199297">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7199352">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7199406">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7199457">package</span>&nbsp;<span class="ident" id="7199465">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7199470">import</span>&nbsp;<span class="op" id="7199477">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199480">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199489">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199502">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199508">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199516">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199527">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199538">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7199549">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7199556">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7199559">func</span>&nbsp;<span class="ident" id="7199564">TestFileInfoHeader</span><span class="op" id="7199582">(</span><span class="ident" id="7199583">t</span>&nbsp;<span class="op" id="7199585">*</span><span class="ident" id="7199586">testing</span><span class="op" id="7199593">.</span><span class="ident" id="7199594">T</span><span class="op" id="7199595">)</span>&nbsp;<span class="op" id="7199597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199600">fi</span><span class="op" id="7199602">,</span>&nbsp;<span class="ident" id="7199604">err</span>&nbsp;<span class="op" id="7199608">:=</span>&nbsp;<span class="ident" id="7199611">os</span><span class="op" id="7199613">.</span><span class="ident" id="7199614">Stat</span><span class="op" id="7199618">(</span><span class="string" id="7199619">&#34;testdata/small.txt&#34;</span><span class="op" id="7199639">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199642">if</span>&nbsp;<span class="ident" id="7199645">err</span>&nbsp;<span class="op" id="7199649">!=</span>&nbsp;<span class="ident" id="7199652">nil</span>&nbsp;<span class="op" id="7199656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199660">t</span><span class="op" id="7199661">.</span><span class="ident" id="7199662">Fatal</span><span class="op" id="7199667">(</span><span class="ident" id="7199668">err</span><span class="op" id="7199671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7199674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199677">h</span><span class="op" id="7199678">,</span>&nbsp;<span class="ident" id="7199680">err</span>&nbsp;<span class="op" id="7199684">:=</span>&nbsp;<span class="ident" id="7199687">FileInfoHeader</span><span class="op" id="7199701">(</span><span class="ident" id="7199702">fi</span><span class="op" id="7199704">,</span>&nbsp;<span class="string" id="7199706">&#34;&#34;</span><span class="op" id="7199708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199711">if</span>&nbsp;<span class="ident" id="7199714">err</span>&nbsp;<span class="op" id="7199718">!=</span>&nbsp;<span class="ident" id="7199721">nil</span>&nbsp;<span class="op" id="7199725">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199729">t</span><span class="op" id="7199730">.</span><span class="ident" id="7199731">Fatalf</span><span class="op" id="7199737">(</span><span class="string" id="7199738">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7199758">,</span>&nbsp;<span class="ident" id="7199760">err</span><span class="op" id="7199763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7199766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199769">if</span>&nbsp;<span class="ident" id="7199772">g</span><span class="op" id="7199773">,</span>&nbsp;<span class="ident" id="7199775">e</span>&nbsp;<span class="op" id="7199777">:=</span>&nbsp;<span class="ident" id="7199780">h</span><span class="op" id="7199781">.</span><span class="ident" id="7199782">Name</span><span class="op" id="7199786">,</span>&nbsp;<span class="string" id="7199788">&#34;small.txt&#34;</span><span class="op" id="7199799">;</span>&nbsp;<span class="ident" id="7199801">g</span>&nbsp;<span class="op" id="7199803">!=</span>&nbsp;<span class="ident" id="7199806">e</span>&nbsp;<span class="op" id="7199808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199812">t</span><span class="op" id="7199813">.</span><span class="ident" id="7199814">Errorf</span><span class="op" id="7199820">(</span><span class="string" id="7199821">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7199841">,</span>&nbsp;<span class="ident" id="7199843">g</span><span class="op" id="7199844">,</span>&nbsp;<span class="ident" id="7199846">e</span><span class="op" id="7199847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7199850">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199853">if</span>&nbsp;<span class="ident" id="7199856">g</span><span class="op" id="7199857">,</span>&nbsp;<span class="ident" id="7199859">e</span>&nbsp;<span class="op" id="7199861">:=</span>&nbsp;<span class="ident" id="7199864">h</span><span class="op" id="7199865">.</span><span class="ident" id="7199866">Mode</span><span class="op" id="7199870">,</span>&nbsp;<span class="ident" id="7199872">int64</span><span class="op" id="7199877">(</span><span class="ident" id="7199878">fi</span><span class="op" id="7199880">.</span><span class="ident" id="7199881">Mode</span><span class="op" id="7199885">(</span><span class="op" id="7199886">)</span><span class="op" id="7199887">.</span><span class="ident" id="7199888">Perm</span><span class="op" id="7199892">(</span><span class="op" id="7199893">)</span><span class="op" id="7199894">)</span><span class="op" id="7199895">|</span><span class="ident" id="7199896">c_ISREG</span><span class="op" id="7199903">;</span>&nbsp;<span class="ident" id="7199905">g</span>&nbsp;<span class="op" id="7199907">!=</span>&nbsp;<span class="ident" id="7199910">e</span>&nbsp;<span class="op" id="7199912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199916">t</span><span class="op" id="7199917">.</span><span class="ident" id="7199918">Errorf</span><span class="op" id="7199924">(</span><span class="string" id="7199925">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7199947">,</span>&nbsp;<span class="ident" id="7199949">g</span><span class="op" id="7199950">,</span>&nbsp;<span class="ident" id="7199952">e</span><span class="op" id="7199953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7199956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7199959">if</span>&nbsp;<span class="ident" id="7199962">g</span><span class="op" id="7199963">,</span>&nbsp;<span class="ident" id="7199965">e</span>&nbsp;<span class="op" id="7199967">:=</span>&nbsp;<span class="ident" id="7199970">h</span><span class="op" id="7199971">.</span><span class="ident" id="7199972">Size</span><span class="op" id="7199976">,</span>&nbsp;<span class="ident" id="7199978">int64</span><span class="op" id="7199983">(</span><span class="num" id="7199984">5</span><span class="op" id="7199985">)</span><span class="op" id="7199986">;</span>&nbsp;<span class="ident" id="7199988">g</span>&nbsp;<span class="op" id="7199990">!=</span>&nbsp;<span class="ident" id="7199993">e</span>&nbsp;<span class="op" id="7199995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7199999">t</span><span class="op" id="7200000">.</span><span class="ident" id="7200001">Errorf</span><span class="op" id="7200007">(</span><span class="string" id="7200008">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7200028">,</span>&nbsp;<span class="ident" id="7200030">g</span><span class="op" id="7200031">,</span>&nbsp;<span class="ident" id="7200033">e</span><span class="op" id="7200034">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200040">if</span>&nbsp;<span class="ident" id="7200043">g</span><span class="op" id="7200044">,</span>&nbsp;<span class="ident" id="7200046">e</span>&nbsp;<span class="op" id="7200048">:=</span>&nbsp;<span class="ident" id="7200051">h</span><span class="op" id="7200052">.</span><span class="ident" id="7200053">ModTime</span><span class="op" id="7200060">,</span>&nbsp;<span class="ident" id="7200062">fi</span><span class="op" id="7200064">.</span><span class="ident" id="7200065">ModTime</span><span class="op" id="7200072">(</span><span class="op" id="7200073">)</span><span class="op" id="7200074">;</span>&nbsp;<span class="op" id="7200076">!</span><span class="ident" id="7200077">g</span><span class="op" id="7200078">.</span><span class="ident" id="7200079">Equal</span><span class="op" id="7200084">(</span><span class="ident" id="7200085">e</span><span class="op" id="7200086">)</span>&nbsp;<span class="op" id="7200088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200092">t</span><span class="op" id="7200093">.</span><span class="ident" id="7200094">Errorf</span><span class="op" id="7200100">(</span><span class="string" id="7200101">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7200124">,</span>&nbsp;<span class="ident" id="7200126">g</span><span class="op" id="7200127">,</span>&nbsp;<span class="ident" id="7200129">e</span><span class="op" id="7200130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7200136">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200194">if</span>&nbsp;<span class="ident" id="7200197">_</span><span class="op" id="7200198">,</span>&nbsp;<span class="ident" id="7200200">err</span>&nbsp;<span class="op" id="7200204">:=</span>&nbsp;<span class="ident" id="7200207">FileInfoHeader</span><span class="op" id="7200221">(</span><span class="ident" id="7200222">nil</span><span class="op" id="7200225">,</span>&nbsp;<span class="string" id="7200227">&#34;&#34;</span><span class="op" id="7200229">)</span><span class="op" id="7200230">;</span>&nbsp;<span class="ident" id="7200232">err</span>&nbsp;<span class="op" id="7200236">==</span>&nbsp;<span class="ident" id="7200239">nil</span>&nbsp;<span class="op" id="7200243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200247">t</span><span class="op" id="7200248">.</span><span class="ident" id="7200249">Fatalf</span><span class="op" id="7200255">(</span><span class="string" id="7200256">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="7200307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200310">}</span><br>
<span class="lineno"></span><span class="op" id="7200312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7200315">func</span>&nbsp;<span class="ident" id="7200320">TestFileInfoHeaderDir</span><span class="op" id="7200341">(</span><span class="ident" id="7200342">t</span>&nbsp;<span class="op" id="7200344">*</span><span class="ident" id="7200345">testing</span><span class="op" id="7200352">.</span><span class="ident" id="7200353">T</span><span class="op" id="7200354">)</span>&nbsp;<span class="op" id="7200356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200359">fi</span><span class="op" id="7200361">,</span>&nbsp;<span class="ident" id="7200363">err</span>&nbsp;<span class="op" id="7200367">:=</span>&nbsp;<span class="ident" id="7200370">os</span><span class="op" id="7200372">.</span><span class="ident" id="7200373">Stat</span><span class="op" id="7200377">(</span><span class="string" id="7200378">&#34;testdata&#34;</span><span class="op" id="7200388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200391">if</span>&nbsp;<span class="ident" id="7200394">err</span>&nbsp;<span class="op" id="7200398">!=</span>&nbsp;<span class="ident" id="7200401">nil</span>&nbsp;<span class="op" id="7200405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200409">t</span><span class="op" id="7200410">.</span><span class="ident" id="7200411">Fatal</span><span class="op" id="7200416">(</span><span class="ident" id="7200417">err</span><span class="op" id="7200420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200423">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200426">h</span><span class="op" id="7200427">,</span>&nbsp;<span class="ident" id="7200429">err</span>&nbsp;<span class="op" id="7200433">:=</span>&nbsp;<span class="ident" id="7200436">FileInfoHeader</span><span class="op" id="7200450">(</span><span class="ident" id="7200451">fi</span><span class="op" id="7200453">,</span>&nbsp;<span class="string" id="7200455">&#34;&#34;</span><span class="op" id="7200457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200460">if</span>&nbsp;<span class="ident" id="7200463">err</span>&nbsp;<span class="op" id="7200467">!=</span>&nbsp;<span class="ident" id="7200470">nil</span>&nbsp;<span class="op" id="7200474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200478">t</span><span class="op" id="7200479">.</span><span class="ident" id="7200480">Fatalf</span><span class="op" id="7200486">(</span><span class="string" id="7200487">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7200507">,</span>&nbsp;<span class="ident" id="7200509">err</span><span class="op" id="7200512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200518">if</span>&nbsp;<span class="ident" id="7200521">g</span><span class="op" id="7200522">,</span>&nbsp;<span class="ident" id="7200524">e</span>&nbsp;<span class="op" id="7200526">:=</span>&nbsp;<span class="ident" id="7200529">h</span><span class="op" id="7200530">.</span><span class="ident" id="7200531">Name</span><span class="op" id="7200535">,</span>&nbsp;<span class="string" id="7200537">&#34;testdata/&#34;</span><span class="op" id="7200548">;</span>&nbsp;<span class="ident" id="7200550">g</span>&nbsp;<span class="op" id="7200552">!=</span>&nbsp;<span class="ident" id="7200555">e</span>&nbsp;<span class="op" id="7200557">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200561">t</span><span class="op" id="7200562">.</span><span class="ident" id="7200563">Errorf</span><span class="op" id="7200569">(</span><span class="string" id="7200570">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7200590">,</span>&nbsp;<span class="ident" id="7200592">g</span><span class="op" id="7200593">,</span>&nbsp;<span class="ident" id="7200595">e</span><span class="op" id="7200596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7200602">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200649">if</span>&nbsp;<span class="ident" id="7200652">g</span><span class="op" id="7200653">,</span>&nbsp;<span class="ident" id="7200655">e</span>&nbsp;<span class="op" id="7200657">:=</span>&nbsp;<span class="ident" id="7200660">h</span><span class="op" id="7200661">.</span><span class="ident" id="7200662">Mode</span><span class="op" id="7200666">&amp;^</span><span class="ident" id="7200668">c_ISGID</span><span class="op" id="7200675">,</span>&nbsp;<span class="ident" id="7200677">int64</span><span class="op" id="7200682">(</span><span class="ident" id="7200683">fi</span><span class="op" id="7200685">.</span><span class="ident" id="7200686">Mode</span><span class="op" id="7200690">(</span><span class="op" id="7200691">)</span><span class="op" id="7200692">.</span><span class="ident" id="7200693">Perm</span><span class="op" id="7200697">(</span><span class="op" id="7200698">)</span><span class="op" id="7200699">)</span><span class="op" id="7200700">|</span><span class="ident" id="7200701">c_ISDIR</span><span class="op" id="7200708">;</span>&nbsp;<span class="ident" id="7200710">g</span>&nbsp;<span class="op" id="7200712">!=</span>&nbsp;<span class="ident" id="7200715">e</span>&nbsp;<span class="op" id="7200717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200721">t</span><span class="op" id="7200722">.</span><span class="ident" id="7200723">Errorf</span><span class="op" id="7200729">(</span><span class="string" id="7200730">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7200752">,</span>&nbsp;<span class="ident" id="7200754">g</span><span class="op" id="7200755">,</span>&nbsp;<span class="ident" id="7200757">e</span><span class="op" id="7200758">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200764">if</span>&nbsp;<span class="ident" id="7200767">g</span><span class="op" id="7200768">,</span>&nbsp;<span class="ident" id="7200770">e</span>&nbsp;<span class="op" id="7200772">:=</span>&nbsp;<span class="ident" id="7200775">h</span><span class="op" id="7200776">.</span><span class="ident" id="7200777">Size</span><span class="op" id="7200781">,</span>&nbsp;<span class="ident" id="7200783">int64</span><span class="op" id="7200788">(</span><span class="num" id="7200789">0</span><span class="op" id="7200790">)</span><span class="op" id="7200791">;</span>&nbsp;<span class="ident" id="7200793">g</span>&nbsp;<span class="op" id="7200795">!=</span>&nbsp;<span class="ident" id="7200798">e</span>&nbsp;<span class="op" id="7200800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200804">t</span><span class="op" id="7200805">.</span><span class="ident" id="7200806">Errorf</span><span class="op" id="7200812">(</span><span class="string" id="7200813">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7200833">,</span>&nbsp;<span class="ident" id="7200835">g</span><span class="op" id="7200836">,</span>&nbsp;<span class="ident" id="7200838">e</span><span class="op" id="7200839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200845">if</span>&nbsp;<span class="ident" id="7200848">g</span><span class="op" id="7200849">,</span>&nbsp;<span class="ident" id="7200851">e</span>&nbsp;<span class="op" id="7200853">:=</span>&nbsp;<span class="ident" id="7200856">h</span><span class="op" id="7200857">.</span><span class="ident" id="7200858">ModTime</span><span class="op" id="7200865">,</span>&nbsp;<span class="ident" id="7200867">fi</span><span class="op" id="7200869">.</span><span class="ident" id="7200870">ModTime</span><span class="op" id="7200877">(</span><span class="op" id="7200878">)</span><span class="op" id="7200879">;</span>&nbsp;<span class="op" id="7200881">!</span><span class="ident" id="7200882">g</span><span class="op" id="7200883">.</span><span class="ident" id="7200884">Equal</span><span class="op" id="7200889">(</span><span class="ident" id="7200890">e</span><span class="op" id="7200891">)</span>&nbsp;<span class="op" id="7200893">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200897">t</span><span class="op" id="7200898">.</span><span class="ident" id="7200899">Errorf</span><span class="op" id="7200905">(</span><span class="string" id="7200906">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7200929">,</span>&nbsp;<span class="ident" id="7200931">g</span><span class="op" id="7200932">,</span>&nbsp;<span class="ident" id="7200934">e</span><span class="op" id="7200935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200938">}</span><br>
<span class="lineno"></span><span class="op" id="7200940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7200943">func</span>&nbsp;<span class="ident" id="7200948">TestFileInfoHeaderSymlink</span><span class="op" id="7200973">(</span><span class="ident" id="7200974">t</span>&nbsp;<span class="op" id="7200976">*</span><span class="ident" id="7200977">testing</span><span class="op" id="7200984">.</span><span class="ident" id="7200985">T</span><span class="op" id="7200986">)</span>&nbsp;<span class="op" id="7200988">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200991">h</span><span class="op" id="7200992">,</span>&nbsp;<span class="ident" id="7200994">err</span>&nbsp;<span class="op" id="7200998">:=</span>&nbsp;<span class="ident" id="7201001">FileInfoHeader</span><span class="op" id="7201015">(</span><span class="ident" id="7201016">symlink</span><span class="op" id="7201023">{</span><span class="op" id="7201024">}</span><span class="op" id="7201025">,</span>&nbsp;<span class="string" id="7201027">&#34;some-target&#34;</span><span class="op" id="7201040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201043">if</span>&nbsp;<span class="ident" id="7201046">err</span>&nbsp;<span class="op" id="7201050">!=</span>&nbsp;<span class="ident" id="7201053">nil</span>&nbsp;<span class="op" id="7201057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201061">t</span><span class="op" id="7201062">.</span><span class="ident" id="7201063">Fatal</span><span class="op" id="7201068">(</span><span class="ident" id="7201069">err</span><span class="op" id="7201072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201078">if</span>&nbsp;<span class="ident" id="7201081">g</span><span class="op" id="7201082">,</span>&nbsp;<span class="ident" id="7201084">e</span>&nbsp;<span class="op" id="7201086">:=</span>&nbsp;<span class="ident" id="7201089">h</span><span class="op" id="7201090">.</span><span class="ident" id="7201091">Name</span><span class="op" id="7201095">,</span>&nbsp;<span class="string" id="7201097">&#34;some-symlink&#34;</span><span class="op" id="7201111">;</span>&nbsp;<span class="ident" id="7201113">g</span>&nbsp;<span class="op" id="7201115">!=</span>&nbsp;<span class="ident" id="7201118">e</span>&nbsp;<span class="op" id="7201120">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201124">t</span><span class="op" id="7201125">.</span><span class="ident" id="7201126">Errorf</span><span class="op" id="7201132">(</span><span class="string" id="7201133">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7201153">,</span>&nbsp;<span class="ident" id="7201155">g</span><span class="op" id="7201156">,</span>&nbsp;<span class="ident" id="7201158">e</span><span class="op" id="7201159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201165">if</span>&nbsp;<span class="ident" id="7201168">g</span><span class="op" id="7201169">,</span>&nbsp;<span class="ident" id="7201171">e</span>&nbsp;<span class="op" id="7201173">:=</span>&nbsp;<span class="ident" id="7201176">h</span><span class="op" id="7201177">.</span><span class="ident" id="7201178">Linkname</span><span class="op" id="7201186">,</span>&nbsp;<span class="string" id="7201188">&#34;some-target&#34;</span><span class="op" id="7201201">;</span>&nbsp;<span class="ident" id="7201203">g</span>&nbsp;<span class="op" id="7201205">!=</span>&nbsp;<span class="ident" id="7201208">e</span>&nbsp;<span class="op" id="7201210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201214">t</span><span class="op" id="7201215">.</span><span class="ident" id="7201216">Errorf</span><span class="op" id="7201222">(</span><span class="string" id="7201223">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7201247">,</span>&nbsp;<span class="ident" id="7201249">g</span><span class="op" id="7201250">,</span>&nbsp;<span class="ident" id="7201252">e</span><span class="op" id="7201253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201256">}</span><br>
<span class="lineno">80</span><span class="op" id="7201258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7201261">type</span>&nbsp;<span class="ident" id="7201266">symlink</span>&nbsp;<span class="keyword" id="7201274">struct</span><span class="op" id="7201280">{</span><span class="op" id="7201281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7201284">func</span>&nbsp;<span class="op" id="7201289">(</span><span class="ident" id="7201290">symlink</span><span class="op" id="7201297">)</span>&nbsp;<span class="ident" id="7201299">Name</span><span class="op" id="7201303">(</span><span class="op" id="7201304">)</span>&nbsp;<span class="builtintype" id="7201306">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7201319">{</span>&nbsp;<span class="keyword" id="7201321">return</span>&nbsp;<span class="string" id="7201328">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="7201343">}</span><br>
<span class="lineno">85</span><span class="keyword" id="7201345">func</span>&nbsp;<span class="op" id="7201350">(</span><span class="ident" id="7201351">symlink</span><span class="op" id="7201358">)</span>&nbsp;<span class="ident" id="7201360">Size</span><span class="op" id="7201364">(</span><span class="op" id="7201365">)</span>&nbsp;<span class="ident" id="7201367">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7201380">{</span>&nbsp;<span class="keyword" id="7201382">return</span>&nbsp;<span class="num" id="7201389">0</span>&nbsp;<span class="op" id="7201391">}</span><br>
<span class="lineno"></span><span class="keyword" id="7201393">func</span>&nbsp;<span class="op" id="7201398">(</span><span class="ident" id="7201399">symlink</span><span class="op" id="7201406">)</span>&nbsp;<span class="ident" id="7201408">Mode</span><span class="op" id="7201412">(</span><span class="op" id="7201413">)</span>&nbsp;<span class="ident" id="7201415">os</span><span class="op" id="7201417">.</span><span class="ident" id="7201418">FileMode</span>&nbsp;&nbsp;<span class="op" id="7201428">{</span>&nbsp;<span class="keyword" id="7201430">return</span>&nbsp;<span class="ident" id="7201437">os</span><span class="op" id="7201439">.</span><span class="ident" id="7201440">ModeSymlink</span>&nbsp;<span class="op" id="7201452">}</span><br>
<span class="lineno"></span><span class="keyword" id="7201454">func</span>&nbsp;<span class="op" id="7201459">(</span><span class="ident" id="7201460">symlink</span><span class="op" id="7201467">)</span>&nbsp;<span class="ident" id="7201469">ModTime</span><span class="op" id="7201476">(</span><span class="op" id="7201477">)</span>&nbsp;<span class="ident" id="7201479">time</span><span class="op" id="7201483">.</span><span class="ident" id="7201484">Time</span>&nbsp;<span class="op" id="7201489">{</span>&nbsp;<span class="keyword" id="7201491">return</span>&nbsp;<span class="ident" id="7201498">time</span><span class="op" id="7201502">.</span><span class="ident" id="7201503">Time</span><span class="op" id="7201507">{</span><span class="op" id="7201508">}</span>&nbsp;<span class="op" id="7201510">}</span><br>
<span class="lineno"></span><span class="keyword" id="7201512">func</span>&nbsp;<span class="op" id="7201517">(</span><span class="ident" id="7201518">symlink</span><span class="op" id="7201525">)</span>&nbsp;<span class="ident" id="7201527">IsDir</span><span class="op" id="7201532">(</span><span class="op" id="7201533">)</span>&nbsp;<span class="builtintype" id="7201535">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7201547">{</span>&nbsp;<span class="keyword" id="7201549">return</span>&nbsp;<span class="builtintype" id="7201556">false</span>&nbsp;<span class="op" id="7201562">}</span><br>
<span class="lineno"></span><span class="keyword" id="7201564">func</span>&nbsp;<span class="op" id="7201569">(</span><span class="ident" id="7201570">symlink</span><span class="op" id="7201577">)</span>&nbsp;<span class="ident" id="7201579">Sys</span><span class="op" id="7201582">(</span><span class="op" id="7201583">)</span>&nbsp;<span class="keyword" id="7201585">interface</span><span class="op" id="7201594">{</span><span class="op" id="7201595">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7201599">{</span>&nbsp;<span class="keyword" id="7201601">return</span>&nbsp;<span class="ident" id="7201608">nil</span>&nbsp;<span class="op" id="7201612">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="7201615">func</span>&nbsp;<span class="ident" id="7201620">TestRoundTrip</span><span class="op" id="7201633">(</span><span class="ident" id="7201634">t</span>&nbsp;<span class="op" id="7201636">*</span><span class="ident" id="7201637">testing</span><span class="op" id="7201644">.</span><span class="ident" id="7201645">T</span><span class="op" id="7201646">)</span>&nbsp;<span class="op" id="7201648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201651">data</span>&nbsp;<span class="op" id="7201656">:=</span>&nbsp;<span class="op" id="7201659">[</span><span class="op" id="7201660">]</span><span class="builtintype" id="7201661">byte</span><span class="op" id="7201665">(</span><span class="string" id="7201666">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="7201686">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201690">var</span>&nbsp;<span class="ident" id="7201694">b</span>&nbsp;<span class="ident" id="7201696">bytes</span><span class="op" id="7201701">.</span><span class="ident" id="7201702">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201710">tw</span>&nbsp;<span class="op" id="7201713">:=</span>&nbsp;<span class="ident" id="7201716">NewWriter</span><span class="op" id="7201725">(</span><span class="op" id="7201726">&amp;</span><span class="ident" id="7201727">b</span><span class="op" id="7201728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201731">hdr</span>&nbsp;<span class="op" id="7201735">:=</span>&nbsp;<span class="op" id="7201738">&amp;</span><span class="ident" id="7201739">Header</span><span class="op" id="7201745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201749">Name</span><span class="op" id="7201753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7201758">&#34;file.txt&#34;</span><span class="op" id="7201768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201772">Uid</span><span class="op" id="7201775">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7201781">1</span>&nbsp;<span class="op" id="7201783">&lt;&lt;</span>&nbsp;<span class="num" id="7201786">21</span><span class="op" id="7201788">,</span>&nbsp;<span class="comment" id="7201790">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201822">Size</span><span class="op" id="7201826">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7201831">int64</span><span class="op" id="7201836">(</span><span class="builtinfunc" id="7201837">len</span><span class="op" id="7201840">(</span><span class="ident" id="7201841">data</span><span class="op" id="7201845">)</span><span class="op" id="7201846">)</span><span class="op" id="7201847">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201851">ModTime</span><span class="op" id="7201858">:</span>&nbsp;<span class="ident" id="7201860">time</span><span class="op" id="7201864">.</span><span class="ident" id="7201865">Now</span><span class="op" id="7201868">(</span><span class="op" id="7201869">)</span><span class="op" id="7201870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7201876">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201916">hdr</span><span class="op" id="7201919">.</span><span class="ident" id="7201920">ModTime</span>&nbsp;<span class="op" id="7201928">=</span>&nbsp;<span class="ident" id="7201930">hdr</span><span class="op" id="7201933">.</span><span class="ident" id="7201934">ModTime</span><span class="op" id="7201941">.</span><span class="ident" id="7201942">Add</span><span class="op" id="7201945">(</span><span class="op" id="7201946">-</span><span class="ident" id="7201947">time</span><span class="op" id="7201951">.</span><span class="ident" id="7201952">Duration</span><span class="op" id="7201960">(</span><span class="ident" id="7201961">hdr</span><span class="op" id="7201964">.</span><span class="ident" id="7201965">ModTime</span><span class="op" id="7201972">.</span><span class="ident" id="7201973">Nanosecond</span><span class="op" id="7201983">(</span><span class="op" id="7201984">)</span><span class="op" id="7201985">)</span>&nbsp;<span class="op" id="7201987">*</span>&nbsp;<span class="ident" id="7201989">time</span><span class="op" id="7201993">.</span><span class="ident" id="7201994">Nanosecond</span><span class="op" id="7202004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202007">if</span>&nbsp;<span class="ident" id="7202010">err</span>&nbsp;<span class="op" id="7202014">:=</span>&nbsp;<span class="ident" id="7202017">tw</span><span class="op" id="7202019">.</span><span class="ident" id="7202020">WriteHeader</span><span class="op" id="7202031">(</span><span class="ident" id="7202032">hdr</span><span class="op" id="7202035">)</span><span class="op" id="7202036">;</span>&nbsp;<span class="ident" id="7202038">err</span>&nbsp;<span class="op" id="7202042">!=</span>&nbsp;<span class="ident" id="7202045">nil</span>&nbsp;<span class="op" id="7202049">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202053">t</span><span class="op" id="7202054">.</span><span class="ident" id="7202055">Fatalf</span><span class="op" id="7202061">(</span><span class="string" id="7202062">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="7202082">,</span>&nbsp;<span class="ident" id="7202084">err</span><span class="op" id="7202087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202093">if</span>&nbsp;<span class="ident" id="7202096">_</span><span class="op" id="7202097">,</span>&nbsp;<span class="ident" id="7202099">err</span>&nbsp;<span class="op" id="7202103">:=</span>&nbsp;<span class="ident" id="7202106">tw</span><span class="op" id="7202108">.</span><span class="ident" id="7202109">Write</span><span class="op" id="7202114">(</span><span class="ident" id="7202115">data</span><span class="op" id="7202119">)</span><span class="op" id="7202120">;</span>&nbsp;<span class="ident" id="7202122">err</span>&nbsp;<span class="op" id="7202126">!=</span>&nbsp;<span class="ident" id="7202129">nil</span>&nbsp;<span class="op" id="7202133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202137">t</span><span class="op" id="7202138">.</span><span class="ident" id="7202139">Fatalf</span><span class="op" id="7202145">(</span><span class="string" id="7202146">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="7202160">,</span>&nbsp;<span class="ident" id="7202162">err</span><span class="op" id="7202165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202168">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202171">if</span>&nbsp;<span class="ident" id="7202174">err</span>&nbsp;<span class="op" id="7202178">:=</span>&nbsp;<span class="ident" id="7202181">tw</span><span class="op" id="7202183">.</span><span class="ident" id="7202184">Close</span><span class="op" id="7202189">(</span><span class="op" id="7202190">)</span><span class="op" id="7202191">;</span>&nbsp;<span class="ident" id="7202193">err</span>&nbsp;<span class="op" id="7202197">!=</span>&nbsp;<span class="ident" id="7202200">nil</span>&nbsp;<span class="op" id="7202204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202208">t</span><span class="op" id="7202209">.</span><span class="ident" id="7202210">Fatalf</span><span class="op" id="7202216">(</span><span class="string" id="7202217">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="7202231">,</span>&nbsp;<span class="ident" id="7202233">err</span><span class="op" id="7202236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7202243">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202261">tr</span>&nbsp;<span class="op" id="7202264">:=</span>&nbsp;<span class="ident" id="7202267">NewReader</span><span class="op" id="7202276">(</span><span class="op" id="7202277">&amp;</span><span class="ident" id="7202278">b</span><span class="op" id="7202279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202282">rHdr</span><span class="op" id="7202286">,</span>&nbsp;<span class="ident" id="7202288">err</span>&nbsp;<span class="op" id="7202292">:=</span>&nbsp;<span class="ident" id="7202295">tr</span><span class="op" id="7202297">.</span><span class="ident" id="7202298">Next</span><span class="op" id="7202302">(</span><span class="op" id="7202303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202306">if</span>&nbsp;<span class="ident" id="7202309">err</span>&nbsp;<span class="op" id="7202313">!=</span>&nbsp;<span class="ident" id="7202316">nil</span>&nbsp;<span class="op" id="7202320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202324">t</span><span class="op" id="7202325">.</span><span class="ident" id="7202326">Fatalf</span><span class="op" id="7202332">(</span><span class="string" id="7202333">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="7202346">,</span>&nbsp;<span class="ident" id="7202348">err</span><span class="op" id="7202351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202354">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202357">if</span>&nbsp;<span class="op" id="7202360">!</span><span class="ident" id="7202361">reflect</span><span class="op" id="7202368">.</span><span class="ident" id="7202369">DeepEqual</span><span class="op" id="7202378">(</span><span class="ident" id="7202379">rHdr</span><span class="op" id="7202383">,</span>&nbsp;<span class="ident" id="7202385">hdr</span><span class="op" id="7202388">)</span>&nbsp;<span class="op" id="7202390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202394">t</span><span class="op" id="7202395">.</span><span class="ident" id="7202396">Errorf</span><span class="op" id="7202402">(</span><span class="string" id="7202403">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7202441">,</span>&nbsp;<span class="ident" id="7202443">rHdr</span><span class="op" id="7202447">,</span>&nbsp;<span class="ident" id="7202449">hdr</span><span class="op" id="7202452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202458">rData</span><span class="op" id="7202463">,</span>&nbsp;<span class="ident" id="7202465">err</span>&nbsp;<span class="op" id="7202469">:=</span>&nbsp;<span class="ident" id="7202472">ioutil</span><span class="op" id="7202478">.</span><span class="ident" id="7202479">ReadAll</span><span class="op" id="7202486">(</span><span class="ident" id="7202487">tr</span><span class="op" id="7202489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202492">if</span>&nbsp;<span class="ident" id="7202495">err</span>&nbsp;<span class="op" id="7202499">!=</span>&nbsp;<span class="ident" id="7202502">nil</span>&nbsp;<span class="op" id="7202506">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202510">t</span><span class="op" id="7202511">.</span><span class="ident" id="7202512">Fatalf</span><span class="op" id="7202518">(</span><span class="string" id="7202519">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="7202529">,</span>&nbsp;<span class="ident" id="7202531">err</span><span class="op" id="7202534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202540">if</span>&nbsp;<span class="op" id="7202543">!</span><span class="ident" id="7202544">bytes</span><span class="op" id="7202549">.</span><span class="ident" id="7202550">Equal</span><span class="op" id="7202555">(</span><span class="ident" id="7202556">rData</span><span class="op" id="7202561">,</span>&nbsp;<span class="ident" id="7202563">data</span><span class="op" id="7202567">)</span>&nbsp;<span class="op" id="7202569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202573">t</span><span class="op" id="7202574">.</span><span class="ident" id="7202575">Errorf</span><span class="op" id="7202581">(</span><span class="string" id="7202582">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="7202616">,</span>&nbsp;<span class="ident" id="7202618">rData</span><span class="op" id="7202623">,</span>&nbsp;<span class="ident" id="7202625">data</span><span class="op" id="7202629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202632">}</span><br>
<span class="lineno">130</span><span class="op" id="7202634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7202637">type</span>&nbsp;<span class="ident" id="7202642">headerRoundTripTest</span>&nbsp;<span class="keyword" id="7202662">struct</span>&nbsp;<span class="op" id="7202669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202672">h</span>&nbsp;&nbsp;<span class="op" id="7202675">*</span><span class="ident" id="7202676">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202684">fm</span>&nbsp;<span class="ident" id="7202687">os</span><span class="op" id="7202689">.</span><span class="ident" id="7202690">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="7202699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7202702">func</span>&nbsp;<span class="ident" id="7202707">TestHeaderRoundTrip</span><span class="op" id="7202726">(</span><span class="ident" id="7202727">t</span>&nbsp;<span class="op" id="7202729">*</span><span class="ident" id="7202730">testing</span><span class="op" id="7202737">.</span><span class="ident" id="7202738">T</span><span class="op" id="7202739">)</span>&nbsp;<span class="op" id="7202741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202744">golden</span>&nbsp;<span class="op" id="7202751">:=</span>&nbsp;<span class="op" id="7202754">[</span><span class="op" id="7202755">]</span><span class="ident" id="7202756">headerRoundTripTest</span><span class="op" id="7202775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7202779">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202803">h</span><span class="op" id="7202804">:</span>&nbsp;<span class="op" id="7202806">&amp;</span><span class="ident" id="7202807">Header</span><span class="op" id="7202813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202819">Name</span><span class="op" id="7202823">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7202829">&#34;test.txt&#34;</span><span class="op" id="7202839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202845">Mode</span><span class="op" id="7202849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7202855">0644</span>&nbsp;<span class="op" id="7202860">|</span>&nbsp;<span class="ident" id="7202862">c_ISREG</span><span class="op" id="7202869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202875">Size</span><span class="op" id="7202879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7202885">12</span><span class="op" id="7202887">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202893">ModTime</span><span class="op" id="7202900">:</span>&nbsp;&nbsp;<span class="ident" id="7202903">time</span><span class="op" id="7202907">.</span><span class="ident" id="7202908">Unix</span><span class="op" id="7202912">(</span><span class="num" id="7202913">1360600916</span><span class="op" id="7202923">,</span>&nbsp;<span class="num" id="7202925">0</span><span class="op" id="7202926">)</span><span class="op" id="7202927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202933">Typeflag</span><span class="op" id="7202941">:</span>&nbsp;<span class="ident" id="7202943">TypeReg</span><span class="op" id="7202950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202955">}</span><span class="op" id="7202956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202961">fm</span><span class="op" id="7202963">:</span>&nbsp;<span class="num" id="7202965">0644</span><span class="op" id="7202969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202973">}</span><span class="op" id="7202974">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7202978">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202999">h</span><span class="op" id="7203000">:</span>&nbsp;<span class="op" id="7203002">&amp;</span><span class="ident" id="7203003">Header</span><span class="op" id="7203009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203015">Name</span><span class="op" id="7203019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7203025">&#34;hard.txt&#34;</span><span class="op" id="7203035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203041">Mode</span><span class="op" id="7203045">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203051">0644</span>&nbsp;<span class="op" id="7203056">|</span>&nbsp;<span class="ident" id="7203058">c_ISLNK</span><span class="op" id="7203065">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203071">Size</span><span class="op" id="7203075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203081">0</span><span class="op" id="7203082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203088">ModTime</span><span class="op" id="7203095">:</span>&nbsp;&nbsp;<span class="ident" id="7203098">time</span><span class="op" id="7203102">.</span><span class="ident" id="7203103">Unix</span><span class="op" id="7203107">(</span><span class="num" id="7203108">1360600916</span><span class="op" id="7203118">,</span>&nbsp;<span class="num" id="7203120">0</span><span class="op" id="7203121">)</span><span class="op" id="7203122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203128">Typeflag</span><span class="op" id="7203136">:</span>&nbsp;<span class="ident" id="7203138">TypeLink</span><span class="op" id="7203146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203151">}</span><span class="op" id="7203152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203157">fm</span><span class="op" id="7203159">:</span>&nbsp;<span class="num" id="7203161">0644</span>&nbsp;<span class="op" id="7203166">|</span>&nbsp;<span class="ident" id="7203168">os</span><span class="op" id="7203170">.</span><span class="ident" id="7203171">ModeSymlink</span><span class="op" id="7203182">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203186">}</span><span class="op" id="7203187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203191">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203216">h</span><span class="op" id="7203217">:</span>&nbsp;<span class="op" id="7203219">&amp;</span><span class="ident" id="7203220">Header</span><span class="op" id="7203226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203232">Name</span><span class="op" id="7203236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7203242">&#34;link.txt&#34;</span><span class="op" id="7203252">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203258">Mode</span><span class="op" id="7203262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203268">0777</span>&nbsp;<span class="op" id="7203273">|</span>&nbsp;<span class="ident" id="7203275">c_ISLNK</span><span class="op" id="7203282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203288">Size</span><span class="op" id="7203292">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203298">0</span><span class="op" id="7203299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203305">ModTime</span><span class="op" id="7203312">:</span>&nbsp;&nbsp;<span class="ident" id="7203315">time</span><span class="op" id="7203319">.</span><span class="ident" id="7203320">Unix</span><span class="op" id="7203324">(</span><span class="num" id="7203325">1360600852</span><span class="op" id="7203335">,</span>&nbsp;<span class="num" id="7203337">0</span><span class="op" id="7203338">)</span><span class="op" id="7203339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203345">Typeflag</span><span class="op" id="7203353">:</span>&nbsp;<span class="ident" id="7203355">TypeSymlink</span><span class="op" id="7203366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203371">}</span><span class="op" id="7203372">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203377">fm</span><span class="op" id="7203379">:</span>&nbsp;<span class="num" id="7203381">0777</span>&nbsp;<span class="op" id="7203386">|</span>&nbsp;<span class="ident" id="7203388">os</span><span class="op" id="7203390">.</span><span class="ident" id="7203391">ModeSymlink</span><span class="op" id="7203402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203406">}</span><span class="op" id="7203407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203411">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203444">h</span><span class="op" id="7203445">:</span>&nbsp;<span class="op" id="7203447">&amp;</span><span class="ident" id="7203448">Header</span><span class="op" id="7203454">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203460">Name</span><span class="op" id="7203464">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7203470">&#34;dev/null&#34;</span><span class="op" id="7203480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203486">Mode</span><span class="op" id="7203490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203496">0666</span>&nbsp;<span class="op" id="7203501">|</span>&nbsp;<span class="ident" id="7203503">c_ISCHR</span><span class="op" id="7203510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203516">Size</span><span class="op" id="7203520">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203526">0</span><span class="op" id="7203527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203533">ModTime</span><span class="op" id="7203540">:</span>&nbsp;&nbsp;<span class="ident" id="7203543">time</span><span class="op" id="7203547">.</span><span class="ident" id="7203548">Unix</span><span class="op" id="7203552">(</span><span class="num" id="7203553">1360578951</span><span class="op" id="7203563">,</span>&nbsp;<span class="num" id="7203565">0</span><span class="op" id="7203566">)</span><span class="op" id="7203567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203573">Typeflag</span><span class="op" id="7203581">:</span>&nbsp;<span class="ident" id="7203583">TypeChar</span><span class="op" id="7203591">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203596">}</span><span class="op" id="7203597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203602">fm</span><span class="op" id="7203604">:</span>&nbsp;<span class="num" id="7203606">0666</span>&nbsp;<span class="op" id="7203611">|</span>&nbsp;<span class="ident" id="7203613">os</span><span class="op" id="7203615">.</span><span class="ident" id="7203616">ModeDevice</span>&nbsp;<span class="op" id="7203627">|</span>&nbsp;<span class="ident" id="7203629">os</span><span class="op" id="7203631">.</span><span class="ident" id="7203632">ModeCharDevice</span><span class="op" id="7203646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203650">}</span><span class="op" id="7203651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203655">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203679">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203684">h</span><span class="op" id="7203685">:</span>&nbsp;<span class="op" id="7203687">&amp;</span><span class="ident" id="7203688">Header</span><span class="op" id="7203694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203700">Name</span><span class="op" id="7203704">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7203710">&#34;dev/sda&#34;</span><span class="op" id="7203719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203725">Mode</span><span class="op" id="7203729">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203735">0660</span>&nbsp;<span class="op" id="7203740">|</span>&nbsp;<span class="ident" id="7203742">c_ISBLK</span><span class="op" id="7203749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203755">Size</span><span class="op" id="7203759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203765">0</span><span class="op" id="7203766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203772">ModTime</span><span class="op" id="7203779">:</span>&nbsp;&nbsp;<span class="ident" id="7203782">time</span><span class="op" id="7203786">.</span><span class="ident" id="7203787">Unix</span><span class="op" id="7203791">(</span><span class="num" id="7203792">1360578954</span><span class="op" id="7203802">,</span>&nbsp;<span class="num" id="7203804">0</span><span class="op" id="7203805">)</span><span class="op" id="7203806">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203812">Typeflag</span><span class="op" id="7203820">:</span>&nbsp;<span class="ident" id="7203822">TypeBlock</span><span class="op" id="7203831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203836">}</span><span class="op" id="7203837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203842">fm</span><span class="op" id="7203844">:</span>&nbsp;<span class="num" id="7203846">0660</span>&nbsp;<span class="op" id="7203851">|</span>&nbsp;<span class="ident" id="7203853">os</span><span class="op" id="7203855">.</span><span class="ident" id="7203856">ModeDevice</span><span class="op" id="7203866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203870">}</span><span class="op" id="7203871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203875">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203896">h</span><span class="op" id="7203897">:</span>&nbsp;<span class="op" id="7203899">&amp;</span><span class="ident" id="7203900">Header</span><span class="op" id="7203906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203912">Name</span><span class="op" id="7203916">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7203922">&#34;dir/&#34;</span><span class="op" id="7203928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203934">Mode</span><span class="op" id="7203938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203944">0755</span>&nbsp;<span class="op" id="7203949">|</span>&nbsp;<span class="ident" id="7203951">c_ISDIR</span><span class="op" id="7203958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203964">Size</span><span class="op" id="7203968">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7203974">0</span><span class="op" id="7203975">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203981">ModTime</span><span class="op" id="7203988">:</span>&nbsp;&nbsp;<span class="ident" id="7203991">time</span><span class="op" id="7203995">.</span><span class="ident" id="7203996">Unix</span><span class="op" id="7204000">(</span><span class="num" id="7204001">1360601116</span><span class="op" id="7204011">,</span>&nbsp;<span class="num" id="7204013">0</span><span class="op" id="7204014">)</span><span class="op" id="7204015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204021">Typeflag</span><span class="op" id="7204029">:</span>&nbsp;<span class="ident" id="7204031">TypeDir</span><span class="op" id="7204038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204043">}</span><span class="op" id="7204044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204049">fm</span><span class="op" id="7204051">:</span>&nbsp;<span class="num" id="7204053">0755</span>&nbsp;<span class="op" id="7204058">|</span>&nbsp;<span class="ident" id="7204060">os</span><span class="op" id="7204062">.</span><span class="ident" id="7204063">ModeDir</span><span class="op" id="7204070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204074">}</span><span class="op" id="7204075">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204079">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204100">h</span><span class="op" id="7204101">:</span>&nbsp;<span class="op" id="7204103">&amp;</span><span class="ident" id="7204104">Header</span><span class="op" id="7204110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204116">Name</span><span class="op" id="7204120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7204126">&#34;dev/initctl&#34;</span><span class="op" id="7204139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204145">Mode</span><span class="op" id="7204149">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204155">0600</span>&nbsp;<span class="op" id="7204160">|</span>&nbsp;<span class="ident" id="7204162">c_ISFIFO</span><span class="op" id="7204170">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204176">Size</span><span class="op" id="7204180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204186">0</span><span class="op" id="7204187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204193">ModTime</span><span class="op" id="7204200">:</span>&nbsp;&nbsp;<span class="ident" id="7204203">time</span><span class="op" id="7204207">.</span><span class="ident" id="7204208">Unix</span><span class="op" id="7204212">(</span><span class="num" id="7204213">1360578949</span><span class="op" id="7204223">,</span>&nbsp;<span class="num" id="7204225">0</span><span class="op" id="7204226">)</span><span class="op" id="7204227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204233">Typeflag</span><span class="op" id="7204241">:</span>&nbsp;<span class="ident" id="7204243">TypeFifo</span><span class="op" id="7204251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204256">}</span><span class="op" id="7204257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204262">fm</span><span class="op" id="7204264">:</span>&nbsp;<span class="num" id="7204266">0600</span>&nbsp;<span class="op" id="7204271">|</span>&nbsp;<span class="ident" id="7204273">os</span><span class="op" id="7204275">.</span><span class="ident" id="7204276">ModeNamedPipe</span><span class="op" id="7204289">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204293">}</span><span class="op" id="7204294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204298">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204316">h</span><span class="op" id="7204317">:</span>&nbsp;<span class="op" id="7204319">&amp;</span><span class="ident" id="7204320">Header</span><span class="op" id="7204326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204332">Name</span><span class="op" id="7204336">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7204342">&#34;bin/su&#34;</span><span class="op" id="7204350">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204356">Mode</span><span class="op" id="7204360">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204366">0755</span>&nbsp;<span class="op" id="7204371">|</span>&nbsp;<span class="ident" id="7204373">c_ISREG</span>&nbsp;<span class="op" id="7204381">|</span>&nbsp;<span class="ident" id="7204383">c_ISUID</span><span class="op" id="7204390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204396">Size</span><span class="op" id="7204400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204406">23232</span><span class="op" id="7204411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204417">ModTime</span><span class="op" id="7204424">:</span>&nbsp;&nbsp;<span class="ident" id="7204427">time</span><span class="op" id="7204431">.</span><span class="ident" id="7204432">Unix</span><span class="op" id="7204436">(</span><span class="num" id="7204437">1355405093</span><span class="op" id="7204447">,</span>&nbsp;<span class="num" id="7204449">0</span><span class="op" id="7204450">)</span><span class="op" id="7204451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204457">Typeflag</span><span class="op" id="7204465">:</span>&nbsp;<span class="ident" id="7204467">TypeReg</span><span class="op" id="7204474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204479">}</span><span class="op" id="7204480">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204485">fm</span><span class="op" id="7204487">:</span>&nbsp;<span class="num" id="7204489">0755</span>&nbsp;<span class="op" id="7204494">|</span>&nbsp;<span class="ident" id="7204496">os</span><span class="op" id="7204498">.</span><span class="ident" id="7204499">ModeSetuid</span><span class="op" id="7204509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204513">}</span><span class="op" id="7204514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204518">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204537">h</span><span class="op" id="7204538">:</span>&nbsp;<span class="op" id="7204540">&amp;</span><span class="ident" id="7204541">Header</span><span class="op" id="7204547">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204553">Name</span><span class="op" id="7204557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7204563">&#34;group.txt&#34;</span><span class="op" id="7204574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204580">Mode</span><span class="op" id="7204584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204590">0750</span>&nbsp;<span class="op" id="7204595">|</span>&nbsp;<span class="ident" id="7204597">c_ISREG</span>&nbsp;<span class="op" id="7204605">|</span>&nbsp;<span class="ident" id="7204607">c_ISGID</span><span class="op" id="7204614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204620">Size</span><span class="op" id="7204624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204630">0</span><span class="op" id="7204631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204637">ModTime</span><span class="op" id="7204644">:</span>&nbsp;&nbsp;<span class="ident" id="7204647">time</span><span class="op" id="7204651">.</span><span class="ident" id="7204652">Unix</span><span class="op" id="7204656">(</span><span class="num" id="7204657">1360602346</span><span class="op" id="7204667">,</span>&nbsp;<span class="num" id="7204669">0</span><span class="op" id="7204670">)</span><span class="op" id="7204671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204677">Typeflag</span><span class="op" id="7204685">:</span>&nbsp;<span class="ident" id="7204687">TypeReg</span><span class="op" id="7204694">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204699">}</span><span class="op" id="7204700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204705">fm</span><span class="op" id="7204707">:</span>&nbsp;<span class="num" id="7204709">0750</span>&nbsp;<span class="op" id="7204714">|</span>&nbsp;<span class="ident" id="7204716">os</span><span class="op" id="7204718">.</span><span class="ident" id="7204719">ModeSetgid</span><span class="op" id="7204729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204733">}</span><span class="op" id="7204734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204738">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204751">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204756">h</span><span class="op" id="7204757">:</span>&nbsp;<span class="op" id="7204759">&amp;</span><span class="ident" id="7204760">Header</span><span class="op" id="7204766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204772">Name</span><span class="op" id="7204776">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7204782">&#34;sticky.txt&#34;</span><span class="op" id="7204794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204800">Mode</span><span class="op" id="7204804">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204810">0600</span>&nbsp;<span class="op" id="7204815">|</span>&nbsp;<span class="ident" id="7204817">c_ISREG</span>&nbsp;<span class="op" id="7204825">|</span>&nbsp;<span class="ident" id="7204827">c_ISVTX</span><span class="op" id="7204834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204840">Size</span><span class="op" id="7204844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7204850">7</span><span class="op" id="7204851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204857">ModTime</span><span class="op" id="7204864">:</span>&nbsp;&nbsp;<span class="ident" id="7204867">time</span><span class="op" id="7204871">.</span><span class="ident" id="7204872">Unix</span><span class="op" id="7204876">(</span><span class="num" id="7204877">1360602540</span><span class="op" id="7204887">,</span>&nbsp;<span class="num" id="7204889">0</span><span class="op" id="7204890">)</span><span class="op" id="7204891">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204897">Typeflag</span><span class="op" id="7204905">:</span>&nbsp;<span class="ident" id="7204907">TypeReg</span><span class="op" id="7204914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204919">}</span><span class="op" id="7204920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204925">fm</span><span class="op" id="7204927">:</span>&nbsp;<span class="num" id="7204929">0600</span>&nbsp;<span class="op" id="7204934">|</span>&nbsp;<span class="ident" id="7204936">os</span><span class="op" id="7204938">.</span><span class="ident" id="7204939">ModeSticky</span><span class="op" id="7204949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204953">}</span><span class="op" id="7204954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204957">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7204961">for</span>&nbsp;<span class="ident" id="7204965">i</span><span class="op" id="7204966">,</span>&nbsp;<span class="ident" id="7204968">g</span>&nbsp;<span class="op" id="7204970">:=</span>&nbsp;<span class="keyword" id="7204973">range</span>&nbsp;<span class="ident" id="7204979">golden</span>&nbsp;<span class="op" id="7204986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204990">fi</span>&nbsp;<span class="op" id="7204993">:=</span>&nbsp;<span class="ident" id="7204996">g</span><span class="op" id="7204997">.</span><span class="ident" id="7204998">h</span><span class="op" id="7204999">.</span><span class="ident" id="7205000">FileInfo</span><span class="op" id="7205008">(</span><span class="op" id="7205009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205013">h2</span><span class="op" id="7205015">,</span>&nbsp;<span class="ident" id="7205017">err</span>&nbsp;<span class="op" id="7205021">:=</span>&nbsp;<span class="ident" id="7205024">FileInfoHeader</span><span class="op" id="7205038">(</span><span class="ident" id="7205039">fi</span><span class="op" id="7205041">,</span>&nbsp;<span class="string" id="7205043">&#34;&#34;</span><span class="op" id="7205045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205049">if</span>&nbsp;<span class="ident" id="7205052">err</span>&nbsp;<span class="op" id="7205056">!=</span>&nbsp;<span class="ident" id="7205059">nil</span>&nbsp;<span class="op" id="7205063">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205068">t</span><span class="op" id="7205069">.</span><span class="ident" id="7205070">Error</span><span class="op" id="7205075">(</span><span class="ident" id="7205076">err</span><span class="op" id="7205079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205084">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205099">if</span>&nbsp;<span class="ident" id="7205102">strings</span><span class="op" id="7205109">.</span><span class="ident" id="7205110">Contains</span><span class="op" id="7205118">(</span><span class="ident" id="7205119">fi</span><span class="op" id="7205121">.</span><span class="ident" id="7205122">Name</span><span class="op" id="7205126">(</span><span class="op" id="7205127">)</span><span class="op" id="7205128">,</span>&nbsp;<span class="string" id="7205130">&#34;/&#34;</span><span class="op" id="7205133">)</span>&nbsp;<span class="op" id="7205135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205140">t</span><span class="op" id="7205141">.</span><span class="ident" id="7205142">Errorf</span><span class="op" id="7205148">(</span><span class="string" id="7205149">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="7205184">,</span>&nbsp;<span class="ident" id="7205186">g</span><span class="op" id="7205187">.</span><span class="ident" id="7205188">h</span><span class="op" id="7205189">.</span><span class="ident" id="7205190">Name</span><span class="op" id="7205194">,</span>&nbsp;<span class="ident" id="7205196">fi</span><span class="op" id="7205198">.</span><span class="ident" id="7205199">Name</span><span class="op" id="7205203">(</span><span class="op" id="7205204">)</span><span class="op" id="7205205">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205213">name</span>&nbsp;<span class="op" id="7205218">:=</span>&nbsp;<span class="ident" id="7205221">path</span><span class="op" id="7205225">.</span><span class="ident" id="7205226">Base</span><span class="op" id="7205230">(</span><span class="ident" id="7205231">g</span><span class="op" id="7205232">.</span><span class="ident" id="7205233">h</span><span class="op" id="7205234">.</span><span class="ident" id="7205235">Name</span><span class="op" id="7205239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205243">if</span>&nbsp;<span class="ident" id="7205246">fi</span><span class="op" id="7205248">.</span><span class="ident" id="7205249">IsDir</span><span class="op" id="7205254">(</span><span class="op" id="7205255">)</span>&nbsp;<span class="op" id="7205257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205262">name</span>&nbsp;<span class="op" id="7205267">+=</span>&nbsp;<span class="string" id="7205270">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205276">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205280">if</span>&nbsp;<span class="ident" id="7205283">got</span><span class="op" id="7205286">,</span>&nbsp;<span class="ident" id="7205288">want</span>&nbsp;<span class="op" id="7205293">:=</span>&nbsp;<span class="ident" id="7205296">h2</span><span class="op" id="7205298">.</span><span class="ident" id="7205299">Name</span><span class="op" id="7205303">,</span>&nbsp;<span class="ident" id="7205305">name</span><span class="op" id="7205309">;</span>&nbsp;<span class="ident" id="7205311">got</span>&nbsp;<span class="op" id="7205315">!=</span>&nbsp;<span class="ident" id="7205318">want</span>&nbsp;<span class="op" id="7205323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205328">t</span><span class="op" id="7205329">.</span><span class="ident" id="7205330">Errorf</span><span class="op" id="7205336">(</span><span class="string" id="7205337">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7205366">,</span>&nbsp;<span class="ident" id="7205368">i</span><span class="op" id="7205369">,</span>&nbsp;<span class="ident" id="7205371">got</span><span class="op" id="7205374">,</span>&nbsp;<span class="ident" id="7205376">want</span><span class="op" id="7205380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205388">if</span>&nbsp;<span class="ident" id="7205391">got</span><span class="op" id="7205394">,</span>&nbsp;<span class="ident" id="7205396">want</span>&nbsp;<span class="op" id="7205401">:=</span>&nbsp;<span class="ident" id="7205404">h2</span><span class="op" id="7205406">.</span><span class="ident" id="7205407">Size</span><span class="op" id="7205411">,</span>&nbsp;<span class="ident" id="7205413">g</span><span class="op" id="7205414">.</span><span class="ident" id="7205415">h</span><span class="op" id="7205416">.</span><span class="ident" id="7205417">Size</span><span class="op" id="7205421">;</span>&nbsp;<span class="ident" id="7205423">got</span>&nbsp;<span class="op" id="7205427">!=</span>&nbsp;<span class="ident" id="7205430">want</span>&nbsp;<span class="op" id="7205435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205440">t</span><span class="op" id="7205441">.</span><span class="ident" id="7205442">Errorf</span><span class="op" id="7205448">(</span><span class="string" id="7205449">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7205478">,</span>&nbsp;<span class="ident" id="7205480">i</span><span class="op" id="7205481">,</span>&nbsp;<span class="ident" id="7205483">got</span><span class="op" id="7205486">,</span>&nbsp;<span class="ident" id="7205488">want</span><span class="op" id="7205492">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205500">if</span>&nbsp;<span class="ident" id="7205503">got</span><span class="op" id="7205506">,</span>&nbsp;<span class="ident" id="7205508">want</span>&nbsp;<span class="op" id="7205513">:=</span>&nbsp;<span class="ident" id="7205516">h2</span><span class="op" id="7205518">.</span><span class="ident" id="7205519">Mode</span><span class="op" id="7205523">,</span>&nbsp;<span class="ident" id="7205525">g</span><span class="op" id="7205526">.</span><span class="ident" id="7205527">h</span><span class="op" id="7205528">.</span><span class="ident" id="7205529">Mode</span><span class="op" id="7205533">;</span>&nbsp;<span class="ident" id="7205535">got</span>&nbsp;<span class="op" id="7205539">!=</span>&nbsp;<span class="ident" id="7205542">want</span>&nbsp;<span class="op" id="7205547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205552">t</span><span class="op" id="7205553">.</span><span class="ident" id="7205554">Errorf</span><span class="op" id="7205560">(</span><span class="string" id="7205561">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7205590">,</span>&nbsp;<span class="ident" id="7205592">i</span><span class="op" id="7205593">,</span>&nbsp;<span class="ident" id="7205595">got</span><span class="op" id="7205598">,</span>&nbsp;<span class="ident" id="7205600">want</span><span class="op" id="7205604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205612">if</span>&nbsp;<span class="ident" id="7205615">got</span><span class="op" id="7205618">,</span>&nbsp;<span class="ident" id="7205620">want</span>&nbsp;<span class="op" id="7205625">:=</span>&nbsp;<span class="ident" id="7205628">fi</span><span class="op" id="7205630">.</span><span class="ident" id="7205631">Mode</span><span class="op" id="7205635">(</span><span class="op" id="7205636">)</span><span class="op" id="7205637">,</span>&nbsp;<span class="ident" id="7205639">g</span><span class="op" id="7205640">.</span><span class="ident" id="7205641">fm</span><span class="op" id="7205643">;</span>&nbsp;<span class="ident" id="7205645">got</span>&nbsp;<span class="op" id="7205649">!=</span>&nbsp;<span class="ident" id="7205652">want</span>&nbsp;<span class="op" id="7205657">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205662">t</span><span class="op" id="7205663">.</span><span class="ident" id="7205664">Errorf</span><span class="op" id="7205670">(</span><span class="string" id="7205671">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7205703">,</span>&nbsp;<span class="ident" id="7205705">i</span><span class="op" id="7205706">,</span>&nbsp;<span class="ident" id="7205708">got</span><span class="op" id="7205711">,</span>&nbsp;<span class="ident" id="7205713">want</span><span class="op" id="7205717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205725">if</span>&nbsp;<span class="ident" id="7205728">got</span><span class="op" id="7205731">,</span>&nbsp;<span class="ident" id="7205733">want</span>&nbsp;<span class="op" id="7205738">:=</span>&nbsp;<span class="ident" id="7205741">h2</span><span class="op" id="7205743">.</span><span class="ident" id="7205744">ModTime</span><span class="op" id="7205751">,</span>&nbsp;<span class="ident" id="7205753">g</span><span class="op" id="7205754">.</span><span class="ident" id="7205755">h</span><span class="op" id="7205756">.</span><span class="ident" id="7205757">ModTime</span><span class="op" id="7205764">;</span>&nbsp;<span class="ident" id="7205766">got</span>&nbsp;<span class="op" id="7205770">!=</span>&nbsp;<span class="ident" id="7205773">want</span>&nbsp;<span class="op" id="7205778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205783">t</span><span class="op" id="7205784">.</span><span class="ident" id="7205785">Errorf</span><span class="op" id="7205791">(</span><span class="string" id="7205792">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7205824">,</span>&nbsp;<span class="ident" id="7205826">i</span><span class="op" id="7205827">,</span>&nbsp;<span class="ident" id="7205829">got</span><span class="op" id="7205832">,</span>&nbsp;<span class="ident" id="7205834">want</span><span class="op" id="7205838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205842">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205846">if</span>&nbsp;<span class="ident" id="7205849">sysh</span><span class="op" id="7205853">,</span>&nbsp;<span class="ident" id="7205855">ok</span>&nbsp;<span class="op" id="7205858">:=</span>&nbsp;<span class="ident" id="7205861">fi</span><span class="op" id="7205863">.</span><span class="ident" id="7205864">Sys</span><span class="op" id="7205867">(</span><span class="op" id="7205868">)</span><span class="op" id="7205869">.</span><span class="op" id="7205870">(</span><span class="op" id="7205871">*</span><span class="ident" id="7205872">Header</span><span class="op" id="7205878">)</span><span class="op" id="7205879">;</span>&nbsp;<span class="op" id="7205881">!</span><span class="ident" id="7205882">ok</span>&nbsp;<span class="op" id="7205885">||</span>&nbsp;<span class="ident" id="7205888">sysh</span>&nbsp;<span class="op" id="7205893">!=</span>&nbsp;<span class="ident" id="7205896">g</span><span class="op" id="7205897">.</span><span class="ident" id="7205898">h</span>&nbsp;<span class="op" id="7205900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205905">t</span><span class="op" id="7205906">.</span><span class="ident" id="7205907">Errorf</span><span class="op" id="7205913">(</span><span class="string" id="7205914">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="7205956">,</span>&nbsp;<span class="ident" id="7205958">i</span><span class="op" id="7205959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205966">}</span><br>
<span class="lineno"></span><span class="op" id="7205968">}</span>
</div>
</body>
</html>
