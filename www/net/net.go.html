<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3408862">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3408917">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3408971">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3409022">/*<br>
<span class="lineno"></span>Package&nbsp;net&nbsp;provides&nbsp;a&nbsp;portable&nbsp;interface&nbsp;for&nbsp;network&nbsp;I/O,&nbsp;including<br>
<span class="lineno"></span>TCP/IP,&nbsp;UDP,&nbsp;domain&nbsp;name&nbsp;resolution,&nbsp;and&nbsp;Unix&nbsp;domain&nbsp;sockets.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Although&nbsp;the&nbsp;package&nbsp;provides&nbsp;access&nbsp;to&nbsp;low-level&nbsp;networking<br>
<span class="lineno">10</span>primitives,&nbsp;most&nbsp;clients&nbsp;will&nbsp;need&nbsp;only&nbsp;the&nbsp;basic&nbsp;interface&nbsp;provided<br>
<span class="lineno"></span>by&nbsp;the&nbsp;Dial,&nbsp;Listen,&nbsp;and&nbsp;Accept&nbsp;functions&nbsp;and&nbsp;the&nbsp;associated<br>
<span class="lineno"></span>Conn&nbsp;and&nbsp;Listener&nbsp;interfaces.&nbsp;The&nbsp;crypto/tls&nbsp;package&nbsp;uses<br>
<span class="lineno"></span>the&nbsp;same&nbsp;interfaces&nbsp;and&nbsp;similar&nbsp;Dial&nbsp;and&nbsp;Listen&nbsp;functions.<br>
<span class="lineno"></span><br>
<span class="lineno">15</span>The&nbsp;Dial&nbsp;function&nbsp;connects&nbsp;to&nbsp;a&nbsp;server:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspconn,&nbsp;err&nbsp;:=&nbsp;net.Dial(&#34;tcp&#34;,&nbsp;&#34;google.com:80&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;handle&nbsp;error<br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Fprintf(conn,&nbsp;&#34;GET&nbsp;/&nbsp;HTTP/1.0\r\n\r\n&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspstatus,&nbsp;err&nbsp;:=&nbsp;bufio.NewReader(conn).ReadString(&#39;\n&#39;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;...<br>
<span class="lineno"></span><br>
<span class="lineno">25</span>The&nbsp;Listen&nbsp;function&nbsp;creates&nbsp;servers:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspln,&nbsp;err&nbsp;:=&nbsp;net.Listen(&#34;tcp&#34;,&nbsp;&#34;:8080&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;handle&nbsp;error<br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspconn,&nbsp;err&nbsp;:=&nbsp;ln.Accept()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;handle&nbsp;error<br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspgo&nbsp;handleConnection(conn)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3409925">package</span>&nbsp;<span class="ident" id="3409933">net</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="3409938">//&nbsp;TODO(rsc):</span><br>
<span class="lineno"></span><span class="comment" id="3409952">//&nbsp;&nbsp;&nbsp;&nbspsupport&nbsp;for&nbsp;raw&nbsp;ethernet&nbsp;sockets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3409989">import</span>&nbsp;<span class="op" id="3409996">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3409999">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3410009">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3410015">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3410021">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3410032">&#34;time&#34;</span><br>
<span class="lineno">50</span><span class="op" id="3410039">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3410042">//&nbsp;Addr&nbsp;represents&nbsp;a&nbsp;network&nbsp;end&nbsp;point&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3410090">type</span>&nbsp;<span class="ident" id="3410095">Addr</span>&nbsp;<span class="keyword" id="3410100">interface</span>&nbsp;<span class="op" id="3410110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410113">Network</span><span class="op" id="3410120">(</span><span class="op" id="3410121">)</span>&nbsp;<span class="builtintype" id="3410123">string</span>&nbsp;<span class="comment" id="3410130">//&nbsp;name&nbsp;of&nbsp;the&nbsp;network</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410154">String</span><span class="op" id="3410160">(</span><span class="op" id="3410161">)</span>&nbsp;<span class="builtintype" id="3410163">string</span>&nbsp;&nbsp;<span class="comment" id="3410171">//&nbsp;string&nbsp;form&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span><span class="op" id="3410197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3410200">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;generic&nbsp;stream-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3410257">//</span><br>
<span class="lineno">60</span><span class="comment" id="3410260">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Conn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3410328">type</span>&nbsp;<span class="ident" id="3410333">Conn</span>&nbsp;<span class="keyword" id="3410338">interface</span>&nbsp;<span class="op" id="3410348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410351">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;from&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410392">//&nbsp;Read&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410467">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410534">Read</span><span class="op" id="3410538">(</span><span class="ident" id="3410539">b</span>&nbsp;<span class="op" id="3410541">[</span><span class="op" id="3410542">]</span><span class="builtintype" id="3410543">byte</span><span class="op" id="3410547">)</span>&nbsp;<span class="op" id="3410549">(</span><span class="ident" id="3410550">n</span>&nbsp;<span class="builtintype" id="3410552">int</span><span class="op" id="3410555">,</span>&nbsp;<span class="ident" id="3410557">err</span>&nbsp;<span class="builtintype" id="3410561">error</span><span class="op" id="3410566">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410570">//&nbsp;Write&nbsp;writes&nbsp;data&nbsp;to&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410611">//&nbsp;Write&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410687">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410755">Write</span><span class="op" id="3410760">(</span><span class="ident" id="3410761">b</span>&nbsp;<span class="op" id="3410763">[</span><span class="op" id="3410764">]</span><span class="builtintype" id="3410765">byte</span><span class="op" id="3410769">)</span>&nbsp;<span class="op" id="3410771">(</span><span class="ident" id="3410772">n</span>&nbsp;<span class="builtintype" id="3410774">int</span><span class="op" id="3410777">,</span>&nbsp;<span class="ident" id="3410779">err</span>&nbsp;<span class="builtintype" id="3410783">error</span><span class="op" id="3410788">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410792">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410825">//&nbsp;Any&nbsp;blocked&nbsp;Read&nbsp;or&nbsp;Write&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410903">Close</span><span class="op" id="3410908">(</span><span class="op" id="3410909">)</span>&nbsp;<span class="builtintype" id="3410911">error</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410919">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3410968">LocalAddr</span><span class="op" id="3410977">(</span><span class="op" id="3410978">)</span>&nbsp;<span class="ident" id="3410980">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3410987">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3411038">RemoteAddr</span><span class="op" id="3411048">(</span><span class="op" id="3411049">)</span>&nbsp;<span class="ident" id="3411051">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411058">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411119">//&nbsp;with&nbsp;the&nbsp;connection.&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411177">//&nbsp;SetReadDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411219">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411223">//&nbsp;A&nbsp;deadline&nbsp;is&nbsp;an&nbsp;absolute&nbsp;time&nbsp;after&nbsp;which&nbsp;I/O&nbsp;operations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411285">//&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411337">//&nbsp;blocking.&nbsp;The&nbsp;deadline&nbsp;applies&nbsp;to&nbsp;all&nbsp;future&nbsp;I/O,&nbsp;not&nbsp;just</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411400">//&nbsp;the&nbsp;immediately&nbsp;following&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;Write.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411453">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411457">//&nbsp;An&nbsp;idle&nbsp;timeout&nbsp;can&nbsp;be&nbsp;implemented&nbsp;by&nbsp;repeatedly&nbsp;extending</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411520">//&nbsp;the&nbsp;deadline&nbsp;after&nbsp;successful&nbsp;Read&nbsp;or&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411575">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411579">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;I/O&nbsp;operations&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3411642">SetDeadline</span><span class="op" id="3411653">(</span><span class="ident" id="3411654">t</span>&nbsp;<span class="ident" id="3411656">time</span><span class="op" id="3411660">.</span><span class="ident" id="3411661">Time</span><span class="op" id="3411665">)</span>&nbsp;<span class="builtintype" id="3411667">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411675">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411736">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3411789">SetReadDeadline</span><span class="op" id="3411804">(</span><span class="ident" id="3411805">t</span>&nbsp;<span class="ident" id="3411807">time</span><span class="op" id="3411811">.</span><span class="ident" id="3411812">Time</span><span class="op" id="3411816">)</span>&nbsp;<span class="builtintype" id="3411818">error</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411826">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411889">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3411955">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3412002">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3412056">SetWriteDeadline</span><span class="op" id="3412072">(</span><span class="ident" id="3412073">t</span>&nbsp;<span class="ident" id="3412075">time</span><span class="op" id="3412079">.</span><span class="ident" id="3412080">Time</span><span class="op" id="3412084">)</span>&nbsp;<span class="builtintype" id="3412086">error</span><br>
<span class="lineno"></span><span class="op" id="3412092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3412095">type</span>&nbsp;<span class="ident" id="3412100">conn</span>&nbsp;<span class="keyword" id="3412105">struct</span>&nbsp;<span class="op" id="3412112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3412115">fd</span>&nbsp;<span class="op" id="3412118">*</span><span class="ident" id="3412119">netFD</span><br>
<span class="lineno">110</span><span class="op" id="3412125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3412128">func</span>&nbsp;<span class="op" id="3412133">(</span><span class="ident" id="3412134">c</span>&nbsp;<span class="op" id="3412136">*</span><span class="ident" id="3412137">conn</span><span class="op" id="3412141">)</span>&nbsp;<span class="ident" id="3412143">ok</span><span class="op" id="3412145">(</span><span class="op" id="3412146">)</span>&nbsp;<span class="builtintype" id="3412148">bool</span>&nbsp;<span class="op" id="3412153">{</span>&nbsp;<span class="keyword" id="3412155">return</span>&nbsp;<span class="ident" id="3412162">c</span>&nbsp;<span class="op" id="3412164">!=</span>&nbsp;<span class="ident" id="3412167">nil</span>&nbsp;<span class="op" id="3412171">&amp;&amp;</span>&nbsp;<span class="ident" id="3412174">c</span><span class="op" id="3412175">.</span><span class="ident" id="3412176">fd</span>&nbsp;<span class="op" id="3412179">!=</span>&nbsp;<span class="ident" id="3412182">nil</span>&nbsp;<span class="op" id="3412186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3412189">//&nbsp;Implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3412231">//&nbsp;Read&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3412272">func</span>&nbsp;<span class="op" id="3412277">(</span><span class="ident" id="3412278">c</span>&nbsp;<span class="op" id="3412280">*</span><span class="ident" id="3412281">conn</span><span class="op" id="3412285">)</span>&nbsp;<span class="ident" id="3412287">Read</span><span class="op" id="3412291">(</span><span class="ident" id="3412292">b</span>&nbsp;<span class="op" id="3412294">[</span><span class="op" id="3412295">]</span><span class="builtintype" id="3412296">byte</span><span class="op" id="3412300">)</span>&nbsp;<span class="op" id="3412302">(</span><span class="builtintype" id="3412303">int</span><span class="op" id="3412306">,</span>&nbsp;<span class="builtintype" id="3412308">error</span><span class="op" id="3412313">)</span>&nbsp;<span class="op" id="3412315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412318">if</span>&nbsp;<span class="op" id="3412321">!</span><span class="ident" id="3412322">c</span><span class="op" id="3412323">.</span><span class="ident" id="3412324">ok</span><span class="op" id="3412326">(</span><span class="op" id="3412327">)</span>&nbsp;<span class="op" id="3412329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412333">return</span>&nbsp;<span class="num" id="3412340">0</span><span class="op" id="3412341">,</span>&nbsp;<span class="ident" id="3412343">syscall</span><span class="op" id="3412350">.</span><span class="ident" id="3412351">EINVAL</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3412359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412362">return</span>&nbsp;<span class="ident" id="3412369">c</span><span class="op" id="3412370">.</span><span class="ident" id="3412371">fd</span><span class="op" id="3412373">.</span><span class="ident" id="3412374">Read</span><span class="op" id="3412378">(</span><span class="ident" id="3412379">b</span><span class="op" id="3412380">)</span><br>
<span class="lineno"></span><span class="op" id="3412382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3412385">//&nbsp;Write&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">125</span><span class="keyword" id="3412428">func</span>&nbsp;<span class="op" id="3412433">(</span><span class="ident" id="3412434">c</span>&nbsp;<span class="op" id="3412436">*</span><span class="ident" id="3412437">conn</span><span class="op" id="3412441">)</span>&nbsp;<span class="ident" id="3412443">Write</span><span class="op" id="3412448">(</span><span class="ident" id="3412449">b</span>&nbsp;<span class="op" id="3412451">[</span><span class="op" id="3412452">]</span><span class="builtintype" id="3412453">byte</span><span class="op" id="3412457">)</span>&nbsp;<span class="op" id="3412459">(</span><span class="builtintype" id="3412460">int</span><span class="op" id="3412463">,</span>&nbsp;<span class="builtintype" id="3412465">error</span><span class="op" id="3412470">)</span>&nbsp;<span class="op" id="3412472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412475">if</span>&nbsp;<span class="op" id="3412478">!</span><span class="ident" id="3412479">c</span><span class="op" id="3412480">.</span><span class="ident" id="3412481">ok</span><span class="op" id="3412483">(</span><span class="op" id="3412484">)</span>&nbsp;<span class="op" id="3412486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412490">return</span>&nbsp;<span class="num" id="3412497">0</span><span class="op" id="3412498">,</span>&nbsp;<span class="ident" id="3412500">syscall</span><span class="op" id="3412507">.</span><span class="ident" id="3412508">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3412516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412519">return</span>&nbsp;<span class="ident" id="3412526">c</span><span class="op" id="3412527">.</span><span class="ident" id="3412528">fd</span><span class="op" id="3412530">.</span><span class="ident" id="3412531">Write</span><span class="op" id="3412536">(</span><span class="ident" id="3412537">b</span><span class="op" id="3412538">)</span><br>
<span class="lineno">130</span><span class="op" id="3412540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3412543">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3412575">func</span>&nbsp;<span class="op" id="3412580">(</span><span class="ident" id="3412581">c</span>&nbsp;<span class="op" id="3412583">*</span><span class="ident" id="3412584">conn</span><span class="op" id="3412588">)</span>&nbsp;<span class="ident" id="3412590">Close</span><span class="op" id="3412595">(</span><span class="op" id="3412596">)</span>&nbsp;<span class="builtintype" id="3412598">error</span>&nbsp;<span class="op" id="3412604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412607">if</span>&nbsp;<span class="op" id="3412610">!</span><span class="ident" id="3412611">c</span><span class="op" id="3412612">.</span><span class="ident" id="3412613">ok</span><span class="op" id="3412615">(</span><span class="op" id="3412616">)</span>&nbsp;<span class="op" id="3412618">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412622">return</span>&nbsp;<span class="ident" id="3412629">syscall</span><span class="op" id="3412636">.</span><span class="ident" id="3412637">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3412645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412648">return</span>&nbsp;<span class="ident" id="3412655">c</span><span class="op" id="3412656">.</span><span class="ident" id="3412657">fd</span><span class="op" id="3412659">.</span><span class="ident" id="3412660">Close</span><span class="op" id="3412665">(</span><span class="op" id="3412666">)</span><br>
<span class="lineno"></span><span class="op" id="3412668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3412671">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3412719">func</span>&nbsp;<span class="op" id="3412724">(</span><span class="ident" id="3412725">c</span>&nbsp;<span class="op" id="3412727">*</span><span class="ident" id="3412728">conn</span><span class="op" id="3412732">)</span>&nbsp;<span class="ident" id="3412734">LocalAddr</span><span class="op" id="3412743">(</span><span class="op" id="3412744">)</span>&nbsp;<span class="ident" id="3412746">Addr</span>&nbsp;<span class="op" id="3412751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412754">if</span>&nbsp;<span class="op" id="3412757">!</span><span class="ident" id="3412758">c</span><span class="op" id="3412759">.</span><span class="ident" id="3412760">ok</span><span class="op" id="3412762">(</span><span class="op" id="3412763">)</span>&nbsp;<span class="op" id="3412765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412769">return</span>&nbsp;<span class="ident" id="3412776">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3412781">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412784">return</span>&nbsp;<span class="ident" id="3412791">c</span><span class="op" id="3412792">.</span><span class="ident" id="3412793">fd</span><span class="op" id="3412795">.</span><span class="ident" id="3412796">laddr</span><br>
<span class="lineno"></span><span class="op" id="3412802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3412805">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3412855">func</span>&nbsp;<span class="op" id="3412860">(</span><span class="ident" id="3412861">c</span>&nbsp;<span class="op" id="3412863">*</span><span class="ident" id="3412864">conn</span><span class="op" id="3412868">)</span>&nbsp;<span class="ident" id="3412870">RemoteAddr</span><span class="op" id="3412880">(</span><span class="op" id="3412881">)</span>&nbsp;<span class="ident" id="3412883">Addr</span>&nbsp;<span class="op" id="3412888">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412891">if</span>&nbsp;<span class="op" id="3412894">!</span><span class="ident" id="3412895">c</span><span class="op" id="3412896">.</span><span class="ident" id="3412897">ok</span><span class="op" id="3412899">(</span><span class="op" id="3412900">)</span>&nbsp;<span class="op" id="3412902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412906">return</span>&nbsp;<span class="ident" id="3412913">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3412918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3412921">return</span>&nbsp;<span class="ident" id="3412928">c</span><span class="op" id="3412929">.</span><span class="ident" id="3412930">fd</span><span class="op" id="3412932">.</span><span class="ident" id="3412933">raddr</span><br>
<span class="lineno"></span><span class="op" id="3412939">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3412942">//&nbsp;SetDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3412997">func</span>&nbsp;<span class="op" id="3413002">(</span><span class="ident" id="3413003">c</span>&nbsp;<span class="op" id="3413005">*</span><span class="ident" id="3413006">conn</span><span class="op" id="3413010">)</span>&nbsp;<span class="ident" id="3413012">SetDeadline</span><span class="op" id="3413023">(</span><span class="ident" id="3413024">t</span>&nbsp;<span class="ident" id="3413026">time</span><span class="op" id="3413030">.</span><span class="ident" id="3413031">Time</span><span class="op" id="3413035">)</span>&nbsp;<span class="builtintype" id="3413037">error</span>&nbsp;<span class="op" id="3413043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413046">if</span>&nbsp;<span class="op" id="3413049">!</span><span class="ident" id="3413050">c</span><span class="op" id="3413051">.</span><span class="ident" id="3413052">ok</span><span class="op" id="3413054">(</span><span class="op" id="3413055">)</span>&nbsp;<span class="op" id="3413057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413061">return</span>&nbsp;<span class="ident" id="3413068">syscall</span><span class="op" id="3413075">.</span><span class="ident" id="3413076">EINVAL</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3413084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413087">return</span>&nbsp;<span class="ident" id="3413094">c</span><span class="op" id="3413095">.</span><span class="ident" id="3413096">fd</span><span class="op" id="3413098">.</span><span class="ident" id="3413099">setDeadline</span><span class="op" id="3413110">(</span><span class="ident" id="3413111">t</span><span class="op" id="3413112">)</span><br>
<span class="lineno"></span><span class="op" id="3413114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3413117">//&nbsp;SetReadDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetReadDeadline&nbsp;method.</span><br>
<span class="lineno">165</span><span class="keyword" id="3413180">func</span>&nbsp;<span class="op" id="3413185">(</span><span class="ident" id="3413186">c</span>&nbsp;<span class="op" id="3413188">*</span><span class="ident" id="3413189">conn</span><span class="op" id="3413193">)</span>&nbsp;<span class="ident" id="3413195">SetReadDeadline</span><span class="op" id="3413210">(</span><span class="ident" id="3413211">t</span>&nbsp;<span class="ident" id="3413213">time</span><span class="op" id="3413217">.</span><span class="ident" id="3413218">Time</span><span class="op" id="3413222">)</span>&nbsp;<span class="builtintype" id="3413224">error</span>&nbsp;<span class="op" id="3413230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413233">if</span>&nbsp;<span class="op" id="3413236">!</span><span class="ident" id="3413237">c</span><span class="op" id="3413238">.</span><span class="ident" id="3413239">ok</span><span class="op" id="3413241">(</span><span class="op" id="3413242">)</span>&nbsp;<span class="op" id="3413244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413248">return</span>&nbsp;<span class="ident" id="3413255">syscall</span><span class="op" id="3413262">.</span><span class="ident" id="3413263">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3413271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413274">return</span>&nbsp;<span class="ident" id="3413281">c</span><span class="op" id="3413282">.</span><span class="ident" id="3413283">fd</span><span class="op" id="3413285">.</span><span class="ident" id="3413286">setReadDeadline</span><span class="op" id="3413301">(</span><span class="ident" id="3413302">t</span><span class="op" id="3413303">)</span><br>
<span class="lineno">170</span><span class="op" id="3413305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3413308">//&nbsp;SetWriteDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetWriteDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3413373">func</span>&nbsp;<span class="op" id="3413378">(</span><span class="ident" id="3413379">c</span>&nbsp;<span class="op" id="3413381">*</span><span class="ident" id="3413382">conn</span><span class="op" id="3413386">)</span>&nbsp;<span class="ident" id="3413388">SetWriteDeadline</span><span class="op" id="3413404">(</span><span class="ident" id="3413405">t</span>&nbsp;<span class="ident" id="3413407">time</span><span class="op" id="3413411">.</span><span class="ident" id="3413412">Time</span><span class="op" id="3413416">)</span>&nbsp;<span class="builtintype" id="3413418">error</span>&nbsp;<span class="op" id="3413424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413427">if</span>&nbsp;<span class="op" id="3413430">!</span><span class="ident" id="3413431">c</span><span class="op" id="3413432">.</span><span class="ident" id="3413433">ok</span><span class="op" id="3413435">(</span><span class="op" id="3413436">)</span>&nbsp;<span class="op" id="3413438">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413442">return</span>&nbsp;<span class="ident" id="3413449">syscall</span><span class="op" id="3413456">.</span><span class="ident" id="3413457">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3413465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413468">return</span>&nbsp;<span class="ident" id="3413475">c</span><span class="op" id="3413476">.</span><span class="ident" id="3413477">fd</span><span class="op" id="3413479">.</span><span class="ident" id="3413480">setWriteDeadline</span><span class="op" id="3413496">(</span><span class="ident" id="3413497">t</span><span class="op" id="3413498">)</span><br>
<span class="lineno"></span><span class="op" id="3413500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3413503">//&nbsp;SetReadBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3413560">//&nbsp;receive&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3413610">func</span>&nbsp;<span class="op" id="3413615">(</span><span class="ident" id="3413616">c</span>&nbsp;<span class="op" id="3413618">*</span><span class="ident" id="3413619">conn</span><span class="op" id="3413623">)</span>&nbsp;<span class="ident" id="3413625">SetReadBuffer</span><span class="op" id="3413638">(</span><span class="ident" id="3413639">bytes</span>&nbsp;<span class="builtintype" id="3413645">int</span><span class="op" id="3413648">)</span>&nbsp;<span class="builtintype" id="3413650">error</span>&nbsp;<span class="op" id="3413656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413659">if</span>&nbsp;<span class="op" id="3413662">!</span><span class="ident" id="3413663">c</span><span class="op" id="3413664">.</span><span class="ident" id="3413665">ok</span><span class="op" id="3413667">(</span><span class="op" id="3413668">)</span>&nbsp;<span class="op" id="3413670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413674">return</span>&nbsp;<span class="ident" id="3413681">syscall</span><span class="op" id="3413688">.</span><span class="ident" id="3413689">EINVAL</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3413697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413700">return</span>&nbsp;<span class="ident" id="3413707">setReadBuffer</span><span class="op" id="3413720">(</span><span class="ident" id="3413721">c</span><span class="op" id="3413722">.</span><span class="ident" id="3413723">fd</span><span class="op" id="3413725">,</span>&nbsp;<span class="ident" id="3413727">bytes</span><span class="op" id="3413732">)</span><br>
<span class="lineno"></span><span class="op" id="3413734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3413737">//&nbsp;SetWriteBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno">190</span><span class="comment" id="3413795">//&nbsp;transmit&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3413846">func</span>&nbsp;<span class="op" id="3413851">(</span><span class="ident" id="3413852">c</span>&nbsp;<span class="op" id="3413854">*</span><span class="ident" id="3413855">conn</span><span class="op" id="3413859">)</span>&nbsp;<span class="ident" id="3413861">SetWriteBuffer</span><span class="op" id="3413875">(</span><span class="ident" id="3413876">bytes</span>&nbsp;<span class="builtintype" id="3413882">int</span><span class="op" id="3413885">)</span>&nbsp;<span class="builtintype" id="3413887">error</span>&nbsp;<span class="op" id="3413893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413896">if</span>&nbsp;<span class="op" id="3413899">!</span><span class="ident" id="3413900">c</span><span class="op" id="3413901">.</span><span class="ident" id="3413902">ok</span><span class="op" id="3413904">(</span><span class="op" id="3413905">)</span>&nbsp;<span class="op" id="3413907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413911">return</span>&nbsp;<span class="ident" id="3413918">syscall</span><span class="op" id="3413925">.</span><span class="ident" id="3413926">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3413934">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3413937">return</span>&nbsp;<span class="ident" id="3413944">setWriteBuffer</span><span class="op" id="3413958">(</span><span class="ident" id="3413959">c</span><span class="op" id="3413960">.</span><span class="ident" id="3413961">fd</span><span class="op" id="3413963">,</span>&nbsp;<span class="ident" id="3413965">bytes</span><span class="op" id="3413970">)</span><br>
<span class="lineno"></span><span class="op" id="3413972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3413975">//&nbsp;File&nbsp;sets&nbsp;the&nbsp;underlying&nbsp;os.File&nbsp;to&nbsp;blocking&nbsp;mode&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span><span class="comment" id="3414048">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno">200</span><span class="comment" id="3414111">//&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="3414176">//</span><br>
<span class="lineno"></span><span class="comment" id="3414179">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;connection&#39;s.</span><br>
<span class="lineno"></span><span class="comment" id="3414257">//&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original&nbsp;using&nbsp;this&nbsp;duplicate</span><br>
<span class="lineno"></span><span class="comment" id="3414329">//&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno">205</span><span class="keyword" id="3414372">func</span>&nbsp;<span class="op" id="3414377">(</span><span class="ident" id="3414378">c</span>&nbsp;<span class="op" id="3414380">*</span><span class="ident" id="3414381">conn</span><span class="op" id="3414385">)</span>&nbsp;<span class="ident" id="3414387">File</span><span class="op" id="3414391">(</span><span class="op" id="3414392">)</span>&nbsp;<span class="op" id="3414394">(</span><span class="ident" id="3414395">f</span>&nbsp;<span class="op" id="3414397">*</span><span class="ident" id="3414398">os</span><span class="op" id="3414400">.</span><span class="ident" id="3414401">File</span><span class="op" id="3414405">,</span>&nbsp;<span class="ident" id="3414407">err</span>&nbsp;<span class="builtintype" id="3414411">error</span><span class="op" id="3414416">)</span>&nbsp;<span class="op" id="3414418">{</span>&nbsp;<span class="keyword" id="3414420">return</span>&nbsp;<span class="ident" id="3414427">c</span><span class="op" id="3414428">.</span><span class="ident" id="3414429">fd</span><span class="op" id="3414431">.</span><span class="ident" id="3414432">dup</span><span class="op" id="3414435">(</span><span class="op" id="3414436">)</span>&nbsp;<span class="op" id="3414438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3414441">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;network&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3414481">type</span>&nbsp;<span class="ident" id="3414486">Error</span>&nbsp;<span class="keyword" id="3414492">interface</span>&nbsp;<span class="op" id="3414502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3414505">error</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3414512">Timeout</span><span class="op" id="3414519">(</span><span class="op" id="3414520">)</span>&nbsp;<span class="builtintype" id="3414522">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3414529">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;a&nbsp;timeout?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3414557">Temporary</span><span class="op" id="3414566">(</span><span class="op" id="3414567">)</span>&nbsp;<span class="builtintype" id="3414569">bool</span>&nbsp;<span class="comment" id="3414574">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;temporary?</span><br>
<span class="lineno"></span><span class="op" id="3414601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3414604">//&nbsp;PacketConn&nbsp;is&nbsp;a&nbsp;generic&nbsp;packet-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">215</span><span class="comment" id="3414667">//</span><br>
<span class="lineno"></span><span class="comment" id="3414670">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;PacketConn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3414744">type</span>&nbsp;<span class="ident" id="3414749">PacketConn</span>&nbsp;<span class="keyword" id="3414760">interface</span>&nbsp;<span class="op" id="3414770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3414773">//&nbsp;ReadFrom&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;the&nbsp;connection,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3414822">//&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3414880">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3414932">//&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3414955">//&nbsp;ReadFrom&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415003">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415065">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3415106">ReadFrom</span><span class="op" id="3415114">(</span><span class="ident" id="3415115">b</span>&nbsp;<span class="op" id="3415117">[</span><span class="op" id="3415118">]</span><span class="builtintype" id="3415119">byte</span><span class="op" id="3415123">)</span>&nbsp;<span class="op" id="3415125">(</span><span class="ident" id="3415126">n</span>&nbsp;<span class="builtintype" id="3415128">int</span><span class="op" id="3415131">,</span>&nbsp;<span class="ident" id="3415133">addr</span>&nbsp;<span class="ident" id="3415138">Addr</span><span class="op" id="3415142">,</span>&nbsp;<span class="ident" id="3415144">err</span>&nbsp;<span class="builtintype" id="3415148">error</span><span class="op" id="3415153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415157">//&nbsp;WriteTo&nbsp;writes&nbsp;a&nbsp;packet&nbsp;with&nbsp;payload&nbsp;b&nbsp;to&nbsp;addr.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415209">//&nbsp;WriteTo&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415256">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415318">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415360">//&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3415421">WriteTo</span><span class="op" id="3415428">(</span><span class="ident" id="3415429">b</span>&nbsp;<span class="op" id="3415431">[</span><span class="op" id="3415432">]</span><span class="builtintype" id="3415433">byte</span><span class="op" id="3415437">,</span>&nbsp;<span class="ident" id="3415439">addr</span>&nbsp;<span class="ident" id="3415444">Addr</span><span class="op" id="3415448">)</span>&nbsp;<span class="op" id="3415450">(</span><span class="ident" id="3415451">n</span>&nbsp;<span class="builtintype" id="3415453">int</span><span class="op" id="3415456">,</span>&nbsp;<span class="ident" id="3415458">err</span>&nbsp;<span class="builtintype" id="3415462">error</span><span class="op" id="3415467">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415471">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415504">//&nbsp;Any&nbsp;blocked&nbsp;ReadFrom&nbsp;or&nbsp;WriteTo&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3415588">Close</span><span class="op" id="3415593">(</span><span class="op" id="3415594">)</span>&nbsp;<span class="builtintype" id="3415596">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415604">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3415653">LocalAddr</span><span class="op" id="3415662">(</span><span class="op" id="3415663">)</span>&nbsp;<span class="ident" id="3415665">Addr</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415672">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415733">//&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3415758">SetDeadline</span><span class="op" id="3415769">(</span><span class="ident" id="3415770">t</span>&nbsp;<span class="ident" id="3415772">time</span><span class="op" id="3415776">.</span><span class="ident" id="3415777">Time</span><span class="op" id="3415781">)</span>&nbsp;<span class="builtintype" id="3415783">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415791">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415852">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Read&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415914">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3415956">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3416009">SetReadDeadline</span><span class="op" id="3416024">(</span><span class="ident" id="3416025">t</span>&nbsp;<span class="ident" id="3416027">time</span><span class="op" id="3416031">.</span><span class="ident" id="3416032">Time</span><span class="op" id="3416036">)</span>&nbsp;<span class="builtintype" id="3416038">error</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416046">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416109">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Write&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416172">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416214">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416268">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416334">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3416381">SetWriteDeadline</span><span class="op" id="3416397">(</span><span class="ident" id="3416398">t</span>&nbsp;<span class="ident" id="3416400">time</span><span class="op" id="3416404">.</span><span class="ident" id="3416405">Time</span><span class="op" id="3416409">)</span>&nbsp;<span class="builtintype" id="3416411">error</span><br>
<span class="lineno"></span><span class="op" id="3416417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3416420">var</span>&nbsp;<span class="ident" id="3416424">listenerBacklog</span>&nbsp;<span class="op" id="3416440">=</span>&nbsp;<span class="ident" id="3416442">maxListenerBacklog</span><span class="op" id="3416460">(</span><span class="op" id="3416461">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3416464">//&nbsp;A&nbsp;Listener&nbsp;is&nbsp;a&nbsp;generic&nbsp;network&nbsp;listener&nbsp;for&nbsp;stream-oriented&nbsp;protocols.</span><br>
<span class="lineno"></span><span class="comment" id="3416539">//</span><br>
<span class="lineno"></span><span class="comment" id="3416542">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Listener&nbsp;simultaneously.</span><br>
<span class="lineno">265</span><span class="keyword" id="3416614">type</span>&nbsp;<span class="ident" id="3416619">Listener</span>&nbsp;<span class="keyword" id="3416628">interface</span>&nbsp;<span class="op" id="3416638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416641">//&nbsp;Accept&nbsp;waits&nbsp;for&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;connection&nbsp;to&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3416711">Accept</span><span class="op" id="3416717">(</span><span class="op" id="3416718">)</span>&nbsp;<span class="op" id="3416720">(</span><span class="ident" id="3416721">c</span>&nbsp;<span class="ident" id="3416723">Conn</span><span class="op" id="3416727">,</span>&nbsp;<span class="ident" id="3416729">err</span>&nbsp;<span class="builtintype" id="3416733">error</span><span class="op" id="3416738">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416742">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;listener.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416773">//&nbsp;Any&nbsp;blocked&nbsp;Accept&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3416844">Close</span><span class="op" id="3416849">(</span><span class="op" id="3416850">)</span>&nbsp;<span class="builtintype" id="3416852">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416860">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3416909">Addr</span><span class="op" id="3416913">(</span><span class="op" id="3416914">)</span>&nbsp;<span class="ident" id="3416916">Addr</span><br>
<span class="lineno">275</span><span class="op" id="3416921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3416924">//&nbsp;Various&nbsp;errors&nbsp;contained&nbsp;in&nbsp;OpError.</span><br>
<span class="lineno"></span><span class="keyword" id="3416964">var</span>&nbsp;<span class="op" id="3416968">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3416971">//&nbsp;For&nbsp;connection&nbsp;setup&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417018">errMissingAddress</span>&nbsp;<span class="op" id="3417036">=</span>&nbsp;<span class="ident" id="3417038">errors</span><span class="op" id="3417044">.</span><span class="ident" id="3417045">New</span><span class="op" id="3417048">(</span><span class="string" id="3417049">&#34;missing&nbsp;address&#34;</span><span class="op" id="3417066">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417070">//&nbsp;For&nbsp;both&nbsp;read&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417110">errTimeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3417130">error</span>&nbsp;<span class="op" id="3417136">=</span>&nbsp;<span class="op" id="3417138">&amp;</span><span class="ident" id="3417139">timeoutError</span><span class="op" id="3417151">{</span><span class="op" id="3417152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417155">errClosing</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3417181">=</span>&nbsp;<span class="ident" id="3417183">errors</span><span class="op" id="3417189">.</span><span class="ident" id="3417190">New</span><span class="op" id="3417193">(</span><span class="string" id="3417194">&#34;use&nbsp;of&nbsp;closed&nbsp;network&nbsp;connection&#34;</span><span class="op" id="3417228">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417231">ErrWriteToConnected</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3417257">=</span>&nbsp;<span class="ident" id="3417259">errors</span><span class="op" id="3417265">.</span><span class="ident" id="3417266">New</span><span class="op" id="3417269">(</span><span class="string" id="3417270">&#34;use&nbsp;of&nbsp;WriteTo&nbsp;with&nbsp;pre-connected&nbsp;connection&#34;</span><span class="op" id="3417316">)</span><br>
<span class="lineno"></span><span class="op" id="3417318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3417321">//&nbsp;OpError&nbsp;is&nbsp;the&nbsp;error&nbsp;type&nbsp;usually&nbsp;returned&nbsp;by&nbsp;functions&nbsp;in&nbsp;the&nbsp;net</span><br>
<span class="lineno"></span><span class="comment" id="3417391">//&nbsp;package.&nbsp;It&nbsp;describes&nbsp;the&nbsp;operation,&nbsp;network&nbsp;type,&nbsp;and&nbsp;address&nbsp;of</span><br>
<span class="lineno">290</span><span class="comment" id="3417460">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3417473">type</span>&nbsp;<span class="ident" id="3417478">OpError</span>&nbsp;<span class="keyword" id="3417486">struct</span>&nbsp;<span class="op" id="3417493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417496">//&nbsp;Op&nbsp;is&nbsp;the&nbsp;operation&nbsp;which&nbsp;caused&nbsp;the&nbsp;error,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417552">//&nbsp;&#34;read&#34;&nbsp;or&nbsp;&#34;write&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417575">Op</span>&nbsp;<span class="builtintype" id="3417578">string</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417587">//&nbsp;Net&nbsp;is&nbsp;the&nbsp;network&nbsp;type&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417645">//&nbsp;such&nbsp;as&nbsp;&#34;tcp&#34;&nbsp;or&nbsp;&#34;udp6&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417674">Net</span>&nbsp;<span class="builtintype" id="3417678">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417687">//&nbsp;Addr&nbsp;is&nbsp;the&nbsp;network&nbsp;address&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417749">Addr</span>&nbsp;<span class="ident" id="3417754">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3417761">//&nbsp;Err&nbsp;is&nbsp;the&nbsp;error&nbsp;that&nbsp;occurred&nbsp;during&nbsp;the&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417818">Err</span>&nbsp;<span class="builtintype" id="3417822">error</span><br>
<span class="lineno">305</span><span class="op" id="3417828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3417831">func</span>&nbsp;<span class="op" id="3417836">(</span><span class="ident" id="3417837">e</span>&nbsp;<span class="op" id="3417839">*</span><span class="ident" id="3417840">OpError</span><span class="op" id="3417847">)</span>&nbsp;<span class="ident" id="3417849">Error</span><span class="op" id="3417854">(</span><span class="op" id="3417855">)</span>&nbsp;<span class="builtintype" id="3417857">string</span>&nbsp;<span class="op" id="3417864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3417867">if</span>&nbsp;<span class="ident" id="3417870">e</span>&nbsp;<span class="op" id="3417872">==</span>&nbsp;<span class="ident" id="3417875">nil</span>&nbsp;<span class="op" id="3417879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3417883">return</span>&nbsp;<span class="string" id="3417890">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3417899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417902">s</span>&nbsp;<span class="op" id="3417904">:=</span>&nbsp;<span class="ident" id="3417907">e</span><span class="op" id="3417908">.</span><span class="ident" id="3417909">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3417913">if</span>&nbsp;<span class="ident" id="3417916">e</span><span class="op" id="3417917">.</span><span class="ident" id="3417918">Net</span>&nbsp;<span class="op" id="3417922">!=</span>&nbsp;<span class="string" id="3417925">&#34;&#34;</span>&nbsp;<span class="op" id="3417928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417932">s</span>&nbsp;<span class="op" id="3417934">+=</span>&nbsp;<span class="string" id="3417937">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3417941">+</span>&nbsp;<span class="ident" id="3417943">e</span><span class="op" id="3417944">.</span><span class="ident" id="3417945">Net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3417950">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3417953">if</span>&nbsp;<span class="ident" id="3417956">e</span><span class="op" id="3417957">.</span><span class="ident" id="3417958">Addr</span>&nbsp;<span class="op" id="3417963">!=</span>&nbsp;<span class="ident" id="3417966">nil</span>&nbsp;<span class="op" id="3417970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3417974">s</span>&nbsp;<span class="op" id="3417976">+=</span>&nbsp;<span class="string" id="3417979">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3417983">+</span>&nbsp;<span class="ident" id="3417985">e</span><span class="op" id="3417986">.</span><span class="ident" id="3417987">Addr</span><span class="op" id="3417991">.</span><span class="ident" id="3417992">String</span><span class="op" id="3417998">(</span><span class="op" id="3417999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3418002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418005">s</span>&nbsp;<span class="op" id="3418007">+=</span>&nbsp;<span class="string" id="3418010">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3418015">+</span>&nbsp;<span class="ident" id="3418017">e</span><span class="op" id="3418018">.</span><span class="ident" id="3418019">Err</span><span class="op" id="3418022">.</span><span class="ident" id="3418023">Error</span><span class="op" id="3418028">(</span><span class="op" id="3418029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418032">return</span>&nbsp;<span class="ident" id="3418039">s</span><br>
<span class="lineno">320</span><span class="op" id="3418041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418044">type</span>&nbsp;<span class="ident" id="3418049">temporary</span>&nbsp;<span class="keyword" id="3418059">interface</span>&nbsp;<span class="op" id="3418069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418072">Temporary</span><span class="op" id="3418081">(</span><span class="op" id="3418082">)</span>&nbsp;<span class="builtintype" id="3418084">bool</span><br>
<span class="lineno"></span><span class="op" id="3418089">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="3418092">func</span>&nbsp;<span class="op" id="3418097">(</span><span class="ident" id="3418098">e</span>&nbsp;<span class="op" id="3418100">*</span><span class="ident" id="3418101">OpError</span><span class="op" id="3418108">)</span>&nbsp;<span class="ident" id="3418110">Temporary</span><span class="op" id="3418119">(</span><span class="op" id="3418120">)</span>&nbsp;<span class="builtintype" id="3418122">bool</span>&nbsp;<span class="op" id="3418127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418130">t</span><span class="op" id="3418131">,</span>&nbsp;<span class="ident" id="3418133">ok</span>&nbsp;<span class="op" id="3418136">:=</span>&nbsp;<span class="ident" id="3418139">e</span><span class="op" id="3418140">.</span><span class="ident" id="3418141">Err</span><span class="op" id="3418144">.</span><span class="op" id="3418145">(</span><span class="ident" id="3418146">temporary</span><span class="op" id="3418155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418158">return</span>&nbsp;<span class="ident" id="3418165">ok</span>&nbsp;<span class="op" id="3418168">&amp;&amp;</span>&nbsp;<span class="ident" id="3418171">t</span><span class="op" id="3418172">.</span><span class="ident" id="3418173">Temporary</span><span class="op" id="3418182">(</span><span class="op" id="3418183">)</span><br>
<span class="lineno"></span><span class="op" id="3418185">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="3418188">var</span>&nbsp;<span class="ident" id="3418192">noDeadline</span>&nbsp;<span class="op" id="3418203">=</span>&nbsp;<span class="ident" id="3418205">time</span><span class="op" id="3418209">.</span><span class="ident" id="3418210">Time</span><span class="op" id="3418214">{</span><span class="op" id="3418215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418218">type</span>&nbsp;<span class="ident" id="3418223">timeout</span>&nbsp;<span class="keyword" id="3418231">interface</span>&nbsp;<span class="op" id="3418241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418244">Timeout</span><span class="op" id="3418251">(</span><span class="op" id="3418252">)</span>&nbsp;<span class="builtintype" id="3418254">bool</span><br>
<span class="lineno">335</span><span class="op" id="3418259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418262">func</span>&nbsp;<span class="op" id="3418267">(</span><span class="ident" id="3418268">e</span>&nbsp;<span class="op" id="3418270">*</span><span class="ident" id="3418271">OpError</span><span class="op" id="3418278">)</span>&nbsp;<span class="ident" id="3418280">Timeout</span><span class="op" id="3418287">(</span><span class="op" id="3418288">)</span>&nbsp;<span class="builtintype" id="3418290">bool</span>&nbsp;<span class="op" id="3418295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418298">t</span><span class="op" id="3418299">,</span>&nbsp;<span class="ident" id="3418301">ok</span>&nbsp;<span class="op" id="3418304">:=</span>&nbsp;<span class="ident" id="3418307">e</span><span class="op" id="3418308">.</span><span class="ident" id="3418309">Err</span><span class="op" id="3418312">.</span><span class="op" id="3418313">(</span><span class="ident" id="3418314">timeout</span><span class="op" id="3418321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418324">return</span>&nbsp;<span class="ident" id="3418331">ok</span>&nbsp;<span class="op" id="3418334">&amp;&amp;</span>&nbsp;<span class="ident" id="3418337">t</span><span class="op" id="3418338">.</span><span class="ident" id="3418339">Timeout</span><span class="op" id="3418346">(</span><span class="op" id="3418347">)</span><br>
<span class="lineno">340</span><span class="op" id="3418349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418352">type</span>&nbsp;<span class="ident" id="3418357">timeoutError</span>&nbsp;<span class="keyword" id="3418370">struct</span><span class="op" id="3418376">{</span><span class="op" id="3418377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418380">func</span>&nbsp;<span class="op" id="3418385">(</span><span class="ident" id="3418386">e</span>&nbsp;<span class="op" id="3418388">*</span><span class="ident" id="3418389">timeoutError</span><span class="op" id="3418401">)</span>&nbsp;<span class="ident" id="3418403">Error</span><span class="op" id="3418408">(</span><span class="op" id="3418409">)</span>&nbsp;<span class="builtintype" id="3418411">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3418420">{</span>&nbsp;<span class="keyword" id="3418422">return</span>&nbsp;<span class="string" id="3418429">&#34;i/o&nbsp;timeout&#34;</span>&nbsp;<span class="op" id="3418443">}</span><br>
<span class="lineno">345</span><span class="keyword" id="3418445">func</span>&nbsp;<span class="op" id="3418450">(</span><span class="ident" id="3418451">e</span>&nbsp;<span class="op" id="3418453">*</span><span class="ident" id="3418454">timeoutError</span><span class="op" id="3418466">)</span>&nbsp;<span class="ident" id="3418468">Timeout</span><span class="op" id="3418475">(</span><span class="op" id="3418476">)</span>&nbsp;<span class="builtintype" id="3418478">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3418485">{</span>&nbsp;<span class="keyword" id="3418487">return</span>&nbsp;<span class="ident" id="3418494">true</span>&nbsp;<span class="op" id="3418499">}</span><br>
<span class="lineno"></span><span class="keyword" id="3418501">func</span>&nbsp;<span class="op" id="3418506">(</span><span class="ident" id="3418507">e</span>&nbsp;<span class="op" id="3418509">*</span><span class="ident" id="3418510">timeoutError</span><span class="op" id="3418522">)</span>&nbsp;<span class="ident" id="3418524">Temporary</span><span class="op" id="3418533">(</span><span class="op" id="3418534">)</span>&nbsp;<span class="builtintype" id="3418536">bool</span>&nbsp;<span class="op" id="3418541">{</span>&nbsp;<span class="keyword" id="3418543">return</span>&nbsp;<span class="ident" id="3418550">true</span>&nbsp;<span class="op" id="3418555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418558">type</span>&nbsp;<span class="ident" id="3418563">AddrError</span>&nbsp;<span class="keyword" id="3418573">struct</span>&nbsp;<span class="op" id="3418580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418583">Err</span>&nbsp;&nbsp;<span class="builtintype" id="3418588">string</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418596">Addr</span>&nbsp;<span class="builtintype" id="3418601">string</span><br>
<span class="lineno"></span><span class="op" id="3418608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418611">func</span>&nbsp;<span class="op" id="3418616">(</span><span class="ident" id="3418617">e</span>&nbsp;<span class="op" id="3418619">*</span><span class="ident" id="3418620">AddrError</span><span class="op" id="3418629">)</span>&nbsp;<span class="ident" id="3418631">Error</span><span class="op" id="3418636">(</span><span class="op" id="3418637">)</span>&nbsp;<span class="builtintype" id="3418639">string</span>&nbsp;<span class="op" id="3418646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418649">if</span>&nbsp;<span class="ident" id="3418652">e</span>&nbsp;<span class="op" id="3418654">==</span>&nbsp;<span class="ident" id="3418657">nil</span>&nbsp;<span class="op" id="3418661">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418665">return</span>&nbsp;<span class="string" id="3418672">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3418681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418684">s</span>&nbsp;<span class="op" id="3418686">:=</span>&nbsp;<span class="ident" id="3418689">e</span><span class="op" id="3418690">.</span><span class="ident" id="3418691">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418696">if</span>&nbsp;<span class="ident" id="3418699">e</span><span class="op" id="3418700">.</span><span class="ident" id="3418701">Addr</span>&nbsp;<span class="op" id="3418706">!=</span>&nbsp;<span class="string" id="3418709">&#34;&#34;</span>&nbsp;<span class="op" id="3418712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3418716">s</span>&nbsp;<span class="op" id="3418718">+=</span>&nbsp;<span class="string" id="3418721">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3418725">+</span>&nbsp;<span class="ident" id="3418727">e</span><span class="op" id="3418728">.</span><span class="ident" id="3418729">Addr</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3418735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418738">return</span>&nbsp;<span class="ident" id="3418745">s</span><br>
<span class="lineno"></span><span class="op" id="3418747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418750">func</span>&nbsp;<span class="op" id="3418755">(</span><span class="ident" id="3418756">e</span>&nbsp;<span class="op" id="3418758">*</span><span class="ident" id="3418759">AddrError</span><span class="op" id="3418768">)</span>&nbsp;<span class="ident" id="3418770">Temporary</span><span class="op" id="3418779">(</span><span class="op" id="3418780">)</span>&nbsp;<span class="builtintype" id="3418782">bool</span>&nbsp;<span class="op" id="3418787">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418790">return</span>&nbsp;<span class="ident" id="3418797">false</span><br>
<span class="lineno"></span><span class="op" id="3418803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418806">func</span>&nbsp;<span class="op" id="3418811">(</span><span class="ident" id="3418812">e</span>&nbsp;<span class="op" id="3418814">*</span><span class="ident" id="3418815">AddrError</span><span class="op" id="3418824">)</span>&nbsp;<span class="ident" id="3418826">Timeout</span><span class="op" id="3418833">(</span><span class="op" id="3418834">)</span>&nbsp;<span class="builtintype" id="3418836">bool</span>&nbsp;<span class="op" id="3418841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3418844">return</span>&nbsp;<span class="ident" id="3418851">false</span><br>
<span class="lineno">370</span><span class="op" id="3418857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418860">type</span>&nbsp;<span class="ident" id="3418865">UnknownNetworkError</span>&nbsp;<span class="builtintype" id="3418885">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3418893">func</span>&nbsp;<span class="op" id="3418898">(</span><span class="ident" id="3418899">e</span>&nbsp;<span class="ident" id="3418901">UnknownNetworkError</span><span class="op" id="3418920">)</span>&nbsp;<span class="ident" id="3418922">Error</span><span class="op" id="3418927">(</span><span class="op" id="3418928">)</span>&nbsp;<span class="builtintype" id="3418930">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3418939">{</span>&nbsp;<span class="keyword" id="3418941">return</span>&nbsp;<span class="string" id="3418948">&#34;unknown&nbsp;network&nbsp;&#34;</span>&nbsp;<span class="op" id="3418967">+</span>&nbsp;<span class="builtintype" id="3418969">string</span><span class="op" id="3418975">(</span><span class="ident" id="3418976">e</span><span class="op" id="3418977">)</span>&nbsp;<span class="op" id="3418979">}</span><br>
<span class="lineno">375</span><span class="keyword" id="3418981">func</span>&nbsp;<span class="op" id="3418986">(</span><span class="ident" id="3418987">e</span>&nbsp;<span class="ident" id="3418989">UnknownNetworkError</span><span class="op" id="3419008">)</span>&nbsp;<span class="ident" id="3419010">Temporary</span><span class="op" id="3419019">(</span><span class="op" id="3419020">)</span>&nbsp;<span class="builtintype" id="3419022">bool</span>&nbsp;<span class="op" id="3419027">{</span>&nbsp;<span class="keyword" id="3419029">return</span>&nbsp;<span class="ident" id="3419036">false</span>&nbsp;<span class="op" id="3419042">}</span><br>
<span class="lineno"></span><span class="keyword" id="3419044">func</span>&nbsp;<span class="op" id="3419049">(</span><span class="ident" id="3419050">e</span>&nbsp;<span class="ident" id="3419052">UnknownNetworkError</span><span class="op" id="3419071">)</span>&nbsp;<span class="ident" id="3419073">Timeout</span><span class="op" id="3419080">(</span><span class="op" id="3419081">)</span>&nbsp;<span class="builtintype" id="3419083">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3419090">{</span>&nbsp;<span class="keyword" id="3419092">return</span>&nbsp;<span class="ident" id="3419099">false</span>&nbsp;<span class="op" id="3419105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3419108">type</span>&nbsp;<span class="ident" id="3419113">InvalidAddrError</span>&nbsp;<span class="builtintype" id="3419130">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3419138">func</span>&nbsp;<span class="op" id="3419143">(</span><span class="ident" id="3419144">e</span>&nbsp;<span class="ident" id="3419146">InvalidAddrError</span><span class="op" id="3419162">)</span>&nbsp;<span class="ident" id="3419164">Error</span><span class="op" id="3419169">(</span><span class="op" id="3419170">)</span>&nbsp;<span class="builtintype" id="3419172">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3419181">{</span>&nbsp;<span class="keyword" id="3419183">return</span>&nbsp;<span class="builtintype" id="3419190">string</span><span class="op" id="3419196">(</span><span class="ident" id="3419197">e</span><span class="op" id="3419198">)</span>&nbsp;<span class="op" id="3419200">}</span><br>
<span class="lineno"></span><span class="keyword" id="3419202">func</span>&nbsp;<span class="op" id="3419207">(</span><span class="ident" id="3419208">e</span>&nbsp;<span class="ident" id="3419210">InvalidAddrError</span><span class="op" id="3419226">)</span>&nbsp;<span class="ident" id="3419228">Timeout</span><span class="op" id="3419235">(</span><span class="op" id="3419236">)</span>&nbsp;<span class="builtintype" id="3419238">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3419245">{</span>&nbsp;<span class="keyword" id="3419247">return</span>&nbsp;<span class="ident" id="3419254">false</span>&nbsp;<span class="op" id="3419260">}</span><br>
<span class="lineno"></span><span class="keyword" id="3419262">func</span>&nbsp;<span class="op" id="3419267">(</span><span class="ident" id="3419268">e</span>&nbsp;<span class="ident" id="3419270">InvalidAddrError</span><span class="op" id="3419286">)</span>&nbsp;<span class="ident" id="3419288">Temporary</span><span class="op" id="3419297">(</span><span class="op" id="3419298">)</span>&nbsp;<span class="builtintype" id="3419300">bool</span>&nbsp;<span class="op" id="3419305">{</span>&nbsp;<span class="keyword" id="3419307">return</span>&nbsp;<span class="ident" id="3419314">false</span>&nbsp;<span class="op" id="3419320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3419323">//&nbsp;DNSConfigError&nbsp;represents&nbsp;an&nbsp;error&nbsp;reading&nbsp;the&nbsp;machine&#39;s&nbsp;DNS&nbsp;configuration.</span><br>
<span class="lineno">385</span><span class="keyword" id="3419402">type</span>&nbsp;<span class="ident" id="3419407">DNSConfigError</span>&nbsp;<span class="keyword" id="3419422">struct</span>&nbsp;<span class="op" id="3419429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3419432">Err</span>&nbsp;<span class="builtintype" id="3419436">error</span><br>
<span class="lineno"></span><span class="op" id="3419442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3419445">func</span>&nbsp;<span class="op" id="3419450">(</span><span class="ident" id="3419451">e</span>&nbsp;<span class="op" id="3419453">*</span><span class="ident" id="3419454">DNSConfigError</span><span class="op" id="3419468">)</span>&nbsp;<span class="ident" id="3419470">Error</span><span class="op" id="3419475">(</span><span class="op" id="3419476">)</span>&nbsp;<span class="builtintype" id="3419478">string</span>&nbsp;<span class="op" id="3419485">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3419488">return</span>&nbsp;<span class="string" id="3419495">&#34;error&nbsp;reading&nbsp;DNS&nbsp;config:&nbsp;&#34;</span>&nbsp;<span class="op" id="3419524">+</span>&nbsp;<span class="ident" id="3419526">e</span><span class="op" id="3419527">.</span><span class="ident" id="3419528">Err</span><span class="op" id="3419531">.</span><span class="ident" id="3419532">Error</span><span class="op" id="3419537">(</span><span class="op" id="3419538">)</span><br>
<span class="lineno"></span><span class="op" id="3419540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3419543">func</span>&nbsp;<span class="op" id="3419548">(</span><span class="ident" id="3419549">e</span>&nbsp;<span class="op" id="3419551">*</span><span class="ident" id="3419552">DNSConfigError</span><span class="op" id="3419566">)</span>&nbsp;<span class="ident" id="3419568">Timeout</span><span class="op" id="3419575">(</span><span class="op" id="3419576">)</span>&nbsp;<span class="builtintype" id="3419578">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3419585">{</span>&nbsp;<span class="keyword" id="3419587">return</span>&nbsp;<span class="ident" id="3419594">false</span>&nbsp;<span class="op" id="3419600">}</span><br>
<span class="lineno"></span><span class="keyword" id="3419602">func</span>&nbsp;<span class="op" id="3419607">(</span><span class="ident" id="3419608">e</span>&nbsp;<span class="op" id="3419610">*</span><span class="ident" id="3419611">DNSConfigError</span><span class="op" id="3419625">)</span>&nbsp;<span class="ident" id="3419627">Temporary</span><span class="op" id="3419636">(</span><span class="op" id="3419637">)</span>&nbsp;<span class="builtintype" id="3419639">bool</span>&nbsp;<span class="op" id="3419644">{</span>&nbsp;<span class="keyword" id="3419646">return</span>&nbsp;<span class="ident" id="3419653">false</span>&nbsp;<span class="op" id="3419659">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="3419662">type</span>&nbsp;<span class="ident" id="3419667">writerOnly</span>&nbsp;<span class="keyword" id="3419678">struct</span>&nbsp;<span class="op" id="3419685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3419688">io</span><span class="op" id="3419690">.</span><span class="ident" id="3419691">Writer</span><br>
<span class="lineno"></span><span class="op" id="3419698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="3419701">//&nbsp;Fallback&nbsp;implementation&nbsp;of&nbsp;io.ReaderFrom&#39;s&nbsp;ReadFrom,&nbsp;when&nbsp;sendfile&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3419777">//&nbsp;applicable.</span><br>
<span class="lineno"></span><span class="keyword" id="3419792">func</span>&nbsp;<span class="ident" id="3419797">genericReadFrom</span><span class="op" id="3419812">(</span><span class="ident" id="3419813">w</span>&nbsp;<span class="ident" id="3419815">io</span><span class="op" id="3419817">.</span><span class="ident" id="3419818">Writer</span><span class="op" id="3419824">,</span>&nbsp;<span class="ident" id="3419826">r</span>&nbsp;<span class="ident" id="3419828">io</span><span class="op" id="3419830">.</span><span class="ident" id="3419831">Reader</span><span class="op" id="3419837">)</span>&nbsp;<span class="op" id="3419839">(</span><span class="ident" id="3419840">n</span>&nbsp;<span class="ident" id="3419842">int64</span><span class="op" id="3419847">,</span>&nbsp;<span class="ident" id="3419849">err</span>&nbsp;<span class="builtintype" id="3419853">error</span><span class="op" id="3419858">)</span>&nbsp;<span class="op" id="3419860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3419863">//&nbsp;Use&nbsp;wrapper&nbsp;to&nbsp;hide&nbsp;existing&nbsp;r.ReadFrom&nbsp;from&nbsp;io.Copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3419921">return</span>&nbsp;<span class="ident" id="3419928">io</span><span class="op" id="3419930">.</span><span class="ident" id="3419931">Copy</span><span class="op" id="3419935">(</span><span class="ident" id="3419936">writerOnly</span><span class="op" id="3419946">{</span><span class="ident" id="3419947">w</span><span class="op" id="3419948">}</span><span class="op" id="3419949">,</span>&nbsp;<span class="ident" id="3419951">r</span><span class="op" id="3419952">)</span><br>
<span class="lineno">405</span><span class="op" id="3419954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3419957">//&nbsp;Limit&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;cgo-using&nbsp;goroutines,&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="3420021">//&nbsp;each&nbsp;will&nbsp;block&nbsp;an&nbsp;entire&nbsp;operating&nbsp;system&nbsp;thread.&nbsp;The&nbsp;usual&nbsp;culprit</span><br>
<span class="lineno"></span><span class="comment" id="3420093">//&nbsp;is&nbsp;resolving&nbsp;many&nbsp;DNS&nbsp;names&nbsp;in&nbsp;separate&nbsp;goroutines&nbsp;but&nbsp;the&nbsp;DNS</span><br>
<span class="lineno">410</span><span class="comment" id="3420159">//&nbsp;server&nbsp;is&nbsp;not&nbsp;responding.&nbsp;Then&nbsp;the&nbsp;many&nbsp;lookups&nbsp;each&nbsp;use&nbsp;a&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3420231">//&nbsp;thread,&nbsp;and&nbsp;the&nbsp;system&nbsp;or&nbsp;the&nbsp;program&nbsp;runs&nbsp;out&nbsp;of&nbsp;threads.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3420294">var</span>&nbsp;<span class="ident" id="3420298">threadLimit</span>&nbsp;<span class="op" id="3420310">=</span>&nbsp;<span class="builtinfunc" id="3420312">make</span><span class="op" id="3420316">(</span><span class="keyword" id="3420317">chan</span>&nbsp;<span class="keyword" id="3420322">struct</span><span class="op" id="3420328">{</span><span class="op" id="3420329">}</span><span class="op" id="3420330">,</span>&nbsp;<span class="num" id="3420332">500</span><span class="op" id="3420335">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="3420338">//&nbsp;Using&nbsp;send&nbsp;for&nbsp;acquire&nbsp;is&nbsp;fine&nbsp;here&nbsp;because&nbsp;we&nbsp;are&nbsp;not&nbsp;using&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="3420407">//&nbsp;to&nbsp;protect&nbsp;any&nbsp;memory.&nbsp;All&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="3420479">//&nbsp;making&nbsp;calls&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3420507">func</span>&nbsp;<span class="ident" id="3420512">acquireThread</span><span class="op" id="3420525">(</span><span class="op" id="3420526">)</span>&nbsp;<span class="op" id="3420528">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3420531">threadLimit</span>&nbsp;<span class="op" id="3420543">&lt;-</span>&nbsp;<span class="keyword" id="3420546">struct</span><span class="op" id="3420552">{</span><span class="op" id="3420553">}</span><span class="op" id="3420554">{</span><span class="op" id="3420555">}</span><br>
<span class="lineno"></span><span class="op" id="3420557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3420560">func</span>&nbsp;<span class="ident" id="3420565">releaseThread</span><span class="op" id="3420578">(</span><span class="op" id="3420579">)</span>&nbsp;<span class="op" id="3420581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3420584">&lt;-</span><span class="ident" id="3420586">threadLimit</span><br>
<span class="lineno">425</span><span class="op" id="3420598">}</span>
</div>
</body>
</html>
