<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5033557">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5033612">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5033666">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5033717">//&nbsp;Package&nbsp;testing&nbsp;provides&nbsp;support&nbsp;for&nbsp;automated&nbsp;testing&nbsp;of&nbsp;Go&nbsp;packages.</span><br>
<span class="lineno"></span><span class="comment" id="5033791">//&nbsp;It&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;in&nbsp;concert&nbsp;with&nbsp;the&nbsp;``go&nbsp;test&#39;&#39;&nbsp;command,&nbsp;which&nbsp;automates</span><br>
<span class="lineno"></span><span class="comment" id="5033877">//&nbsp;execution&nbsp;of&nbsp;any&nbsp;function&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5033918">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestXxx(*testing.T)</span><br>
<span class="lineno"></span><span class="comment" id="5033950">//&nbsp;where&nbsp;Xxx&nbsp;can&nbsp;be&nbsp;any&nbsp;alphanumeric&nbsp;string&nbsp;(but&nbsp;the&nbsp;first&nbsp;letter&nbsp;must&nbsp;not&nbsp;be&nbsp;in</span><br>
<span class="lineno">10</span><span class="comment" id="5034031">//&nbsp;[a-z])&nbsp;and&nbsp;serves&nbsp;to&nbsp;identify&nbsp;the&nbsp;test&nbsp;routine.</span><br>
<span class="lineno"></span><span class="comment" id="5034082">//</span><br>
<span class="lineno"></span><span class="comment" id="5034085">//&nbsp;Within&nbsp;these&nbsp;functions,&nbsp;use&nbsp;the&nbsp;Error,&nbsp;Fail&nbsp;or&nbsp;related&nbsp;methods&nbsp;to&nbsp;signal&nbsp;failure.</span><br>
<span class="lineno"></span><span class="comment" id="5034170">//</span><br>
<span class="lineno"></span><span class="comment" id="5034173">//&nbsp;To&nbsp;write&nbsp;a&nbsp;new&nbsp;test&nbsp;suite,&nbsp;create&nbsp;a&nbsp;file&nbsp;whose&nbsp;name&nbsp;ends&nbsp;_test.go&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="5034247">//&nbsp;contains&nbsp;the&nbsp;TestXxx&nbsp;functions&nbsp;as&nbsp;described&nbsp;here.&nbsp;Put&nbsp;the&nbsp;file&nbsp;in&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="5034325">//&nbsp;package&nbsp;as&nbsp;the&nbsp;one&nbsp;being&nbsp;tested.&nbsp;The&nbsp;file&nbsp;will&nbsp;be&nbsp;excluded&nbsp;from&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="5034400">//&nbsp;package&nbsp;builds&nbsp;but&nbsp;will&nbsp;be&nbsp;included&nbsp;when&nbsp;the&nbsp;``go&nbsp;test&#39;&#39;&nbsp;command&nbsp;is&nbsp;run.</span><br>
<span class="lineno"></span><span class="comment" id="5034476">//&nbsp;For&nbsp;more&nbsp;detail,&nbsp;run&nbsp;``go&nbsp;help&nbsp;test&#39;&#39;&nbsp;and&nbsp;``go&nbsp;help&nbsp;testflag&#39;&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5034543">//</span><br>
<span class="lineno">20</span><span class="comment" id="5034546">//&nbsp;Tests&nbsp;and&nbsp;benchmarks&nbsp;may&nbsp;be&nbsp;skipped&nbsp;if&nbsp;not&nbsp;applicable&nbsp;with&nbsp;a&nbsp;call&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5034618">//&nbsp;the&nbsp;Skip&nbsp;method&nbsp;of&nbsp;*T&nbsp;and&nbsp;*B:</span><br>
<span class="lineno"></span><span class="comment" id="5034651">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;TestTimeConsuming(t&nbsp;*testing.T)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5034697">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;testing.Short()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5034729">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t.Skip(&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode.&#34;)</span><br>
<span class="lineno">25</span><span class="comment" id="5034783">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5034796">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</span><br>
<span class="lineno"></span><span class="comment" id="5034811">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5034820">//</span><br>
<span class="lineno"></span><span class="comment" id="5034823">//&nbsp;Benchmarks</span><br>
<span class="lineno">30</span><span class="comment" id="5034837">//</span><br>
<span class="lineno"></span><span class="comment" id="5034840">//&nbsp;Functions&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5034865">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkXxx(*testing.B)</span><br>
<span class="lineno"></span><span class="comment" id="5034902">//&nbsp;are&nbsp;considered&nbsp;benchmarks,&nbsp;and&nbsp;are&nbsp;executed&nbsp;by&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5034979">//&nbsp;its&nbsp;-bench&nbsp;flag&nbsp;is&nbsp;provided.&nbsp;Benchmarks&nbsp;are&nbsp;run&nbsp;sequentially.</span><br>
<span class="lineno">35</span><span class="comment" id="5035044">//</span><br>
<span class="lineno"></span><span class="comment" id="5035047">//&nbsp;For&nbsp;a&nbsp;description&nbsp;of&nbsp;the&nbsp;testing&nbsp;flags,&nbsp;see</span><br>
<span class="lineno"></span><span class="comment" id="5035094">//&nbsp;http://golang.org/cmd/go/#hdr-Description_of_testing_flags.</span><br>
<span class="lineno"></span><span class="comment" id="5035157">//</span><br>
<span class="lineno"></span><span class="comment" id="5035160">//&nbsp;A&nbsp;sample&nbsp;benchmark&nbsp;function&nbsp;looks&nbsp;like&nbsp;this:</span><br>
<span class="lineno">40</span><span class="comment" id="5035208">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkHello(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5035251">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;b.N;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5035289">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprintf(&#34;hello&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5035325">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5035338">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">45</span><span class="comment" id="5035347">//</span><br>
<span class="lineno"></span><span class="comment" id="5035350">//&nbsp;The&nbsp;benchmark&nbsp;function&nbsp;must&nbsp;run&nbsp;the&nbsp;target&nbsp;code&nbsp;b.N&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="5035412">//&nbsp;During&nbsp;benchark&nbsp;execution,&nbsp;b.N&nbsp;is&nbsp;adjusted&nbsp;until&nbsp;the&nbsp;benchmark&nbsp;function&nbsp;lasts</span><br>
<span class="lineno"></span><span class="comment" id="5035493">//&nbsp;long&nbsp;enough&nbsp;to&nbsp;be&nbsp;timed&nbsp;reliably.&nbsp;&nbsp;The&nbsp;output</span><br>
<span class="lineno"></span><span class="comment" id="5035542">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BenchmarkHello&nbsp;&nbsp;&nbsp;&nbsp;10000000&nbsp;&nbsp;&nbsp;&nbsp;282&nbsp;ns/op</span><br>
<span class="lineno">50</span><span class="comment" id="5035589">//&nbsp;means&nbsp;that&nbsp;the&nbsp;loop&nbsp;ran&nbsp;10000000&nbsp;times&nbsp;at&nbsp;a&nbsp;speed&nbsp;of&nbsp;282&nbsp;ns&nbsp;per&nbsp;loop.</span><br>
<span class="lineno"></span><span class="comment" id="5035662">//</span><br>
<span class="lineno"></span><span class="comment" id="5035665">//&nbsp;If&nbsp;a&nbsp;benchmark&nbsp;needs&nbsp;some&nbsp;expensive&nbsp;setup&nbsp;before&nbsp;running,&nbsp;the&nbsp;timer</span><br>
<span class="lineno"></span><span class="comment" id="5035736">//&nbsp;may&nbsp;be&nbsp;reset:</span><br>
<span class="lineno"></span><span class="comment" id="5035753">//</span><br>
<span class="lineno">55</span><span class="comment" id="5035756">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkBigLen(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5035800">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;big&nbsp;:=&nbsp;NewBig()</span><br>
<span class="lineno"></span><span class="comment" id="5035827">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.ResetTimer()</span><br>
<span class="lineno"></span><span class="comment" id="5035853">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;b.N;&nbsp;i++&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5035891">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;big.Len()</span><br>
<span class="lineno">60</span><span class="comment" id="5035916">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5035929">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5035938">//</span><br>
<span class="lineno"></span><span class="comment" id="5035941">//&nbsp;If&nbsp;a&nbsp;benchmark&nbsp;needs&nbsp;to&nbsp;test&nbsp;performance&nbsp;in&nbsp;a&nbsp;parallel&nbsp;setting,&nbsp;it&nbsp;may&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="5036019">//&nbsp;the&nbsp;RunParallel&nbsp;helper&nbsp;function;&nbsp;such&nbsp;benchmarks&nbsp;are&nbsp;intended&nbsp;to&nbsp;be&nbsp;used&nbsp;with</span><br>
<span class="lineno">65</span><span class="comment" id="5036100">//&nbsp;the&nbsp;go&nbsp;test&nbsp;-cpu&nbsp;flag:</span><br>
<span class="lineno"></span><span class="comment" id="5036126">//</span><br>
<span class="lineno"></span><span class="comment" id="5036129">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;BenchmarkTemplateParallel(b&nbsp;*testing.B)&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5036183">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templ&nbsp;:=&nbsp;template.Must(template.New(&#34;test&#34;).Parse(&#34;Hello,&nbsp;{{.}}!&#34;))</span><br>
<span class="lineno"></span><span class="comment" id="5036262">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b.RunParallel(func(pb&nbsp;*testing.PB)&nbsp;{</span><br>
<span class="lineno">70</span><span class="comment" id="5036310">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;buf&nbsp;bytes.Buffer</span><br>
<span class="lineno"></span><span class="comment" id="5036346">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;pb.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5036377">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buf.Reset()</span><br>
<span class="lineno"></span><span class="comment" id="5036408">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;templ.Execute(&amp;buf,&nbsp;&#34;World&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5036456">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno">75</span><span class="comment" id="5036473">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span><br>
<span class="lineno"></span><span class="comment" id="5036487">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5036496">//</span><br>
<span class="lineno"></span><span class="comment" id="5036499">//&nbsp;Examples</span><br>
<span class="lineno"></span><span class="comment" id="5036511">//</span><br>
<span class="lineno">80</span><span class="comment" id="5036514">//&nbsp;The&nbsp;package&nbsp;also&nbsp;runs&nbsp;and&nbsp;verifies&nbsp;example&nbsp;code.&nbsp;Example&nbsp;functions&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="5036588">//&nbsp;include&nbsp;a&nbsp;concluding&nbsp;line&nbsp;comment&nbsp;that&nbsp;begins&nbsp;with&nbsp;&#34;Output:&#34;&nbsp;and&nbsp;is&nbsp;compared&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5036673">//&nbsp;the&nbsp;standard&nbsp;output&nbsp;of&nbsp;the&nbsp;function&nbsp;when&nbsp;the&nbsp;tests&nbsp;are&nbsp;run.&nbsp;(The&nbsp;comparison</span><br>
<span class="lineno"></span><span class="comment" id="5036752">//&nbsp;ignores&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space.)&nbsp;These&nbsp;are&nbsp;examples&nbsp;of&nbsp;an&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="5036826">//</span><br>
<span class="lineno">85</span><span class="comment" id="5036829">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleHello()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5036858">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;hello&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5036894">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:&nbsp;hello</span><br>
<span class="lineno"></span><span class="comment" id="5036926">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5036935">//</span><br>
<span class="lineno">90</span><span class="comment" id="5036938">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleSalutations()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="5036973">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;hello,&nbsp;and&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5037014">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(&#34;goodbye&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="5037052">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Output:</span><br>
<span class="lineno"></span><span class="comment" id="5037078">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hello,&nbsp;and</span><br>
<span class="lineno">95</span><span class="comment" id="5037107">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;goodbye</span><br>
<span class="lineno"></span><span class="comment" id="5037133">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037142">//</span><br>
<span class="lineno"></span><span class="comment" id="5037145">//&nbsp;Example&nbsp;functions&nbsp;without&nbsp;output&nbsp;comments&nbsp;are&nbsp;compiled&nbsp;but&nbsp;not&nbsp;executed.</span><br>
<span class="lineno"></span><span class="comment" id="5037221">//</span><br>
<span class="lineno">100</span><span class="comment" id="5037224">//&nbsp;The&nbsp;naming&nbsp;convention&nbsp;to&nbsp;declare&nbsp;examples&nbsp;for&nbsp;the&nbsp;package,&nbsp;a&nbsp;function&nbsp;F,&nbsp;a&nbsp;type&nbsp;T&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5037313">//&nbsp;method&nbsp;M&nbsp;on&nbsp;type&nbsp;T&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5037340">//</span><br>
<span class="lineno"></span><span class="comment" id="5037343">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;Example()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037373">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleF()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno">105</span><span class="comment" id="5037404">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037435">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_M()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037468">//</span><br>
<span class="lineno"></span><span class="comment" id="5037471">//&nbsp;Multiple&nbsp;example&nbsp;functions&nbsp;for&nbsp;a&nbsp;package/type/function/method&nbsp;may&nbsp;be&nbsp;provided&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5037555">//&nbsp;appending&nbsp;a&nbsp;distinct&nbsp;suffix&nbsp;to&nbsp;the&nbsp;name.&nbsp;The&nbsp;suffix&nbsp;must&nbsp;start&nbsp;with&nbsp;a</span><br>
<span class="lineno">110</span><span class="comment" id="5037628">//&nbsp;lower-case&nbsp;letter.</span><br>
<span class="lineno"></span><span class="comment" id="5037650">//</span><br>
<span class="lineno"></span><span class="comment" id="5037653">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;Example_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037690">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleF_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037728">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno">115</span><span class="comment" id="5037766">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func&nbsp;ExampleT_M_suffix()&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5037806">//</span><br>
<span class="lineno"></span><span class="comment" id="5037809">//&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;presented&nbsp;as&nbsp;the&nbsp;example&nbsp;when&nbsp;it&nbsp;contains&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span><span class="comment" id="5037887">//&nbsp;example&nbsp;function,&nbsp;at&nbsp;least&nbsp;one&nbsp;other&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant</span><br>
<span class="lineno"></span><span class="comment" id="5037965">//&nbsp;declaration,&nbsp;and&nbsp;no&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions.</span><br>
<span class="lineno">120</span><span class="comment" id="5038017">//</span><br>
<span class="lineno"></span><span class="comment" id="5038020">//&nbsp;Main</span><br>
<span class="lineno"></span><span class="comment" id="5038028">//</span><br>
<span class="lineno"></span><span class="comment" id="5038031">//&nbsp;It&nbsp;is&nbsp;sometimes&nbsp;necessary&nbsp;for&nbsp;a&nbsp;test&nbsp;program&nbsp;to&nbsp;do&nbsp;extra&nbsp;setup&nbsp;or&nbsp;teardown</span><br>
<span class="lineno"></span><span class="comment" id="5038109">//&nbsp;before&nbsp;or&nbsp;after&nbsp;testing.&nbsp;It&nbsp;is&nbsp;also&nbsp;sometimes&nbsp;necessary&nbsp;for&nbsp;a&nbsp;test&nbsp;to&nbsp;control</span><br>
<span class="lineno">125</span><span class="comment" id="5038190">//&nbsp;which&nbsp;code&nbsp;runs&nbsp;on&nbsp;the&nbsp;main&nbsp;thread.&nbsp;To&nbsp;support&nbsp;these&nbsp;and&nbsp;other&nbsp;cases,</span><br>
<span class="lineno"></span><span class="comment" id="5038263">//&nbsp;if&nbsp;a&nbsp;test&nbsp;file&nbsp;contains&nbsp;a&nbsp;function:</span><br>
<span class="lineno"></span><span class="comment" id="5038302">//</span><br>
<span class="lineno"></span><span class="comment" id="5038305">//&nbsp;&nbsp;&nbsp;&nbspfunc&nbsp;TestMain(m&nbsp;*testing.M)</span><br>
<span class="lineno"></span><span class="comment" id="5038336">//</span><br>
<span class="lineno">130</span><span class="comment" id="5038339">//&nbsp;then&nbsp;the&nbsp;generated&nbsp;test&nbsp;will&nbsp;call&nbsp;TestMain(m)&nbsp;instead&nbsp;of&nbsp;running&nbsp;the&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="5038417">//&nbsp;directly.&nbsp;TestMain&nbsp;runs&nbsp;in&nbsp;the&nbsp;main&nbsp;goroutine&nbsp;and&nbsp;can&nbsp;do&nbsp;whatever&nbsp;setup</span><br>
<span class="lineno"></span><span class="comment" id="5038492">//&nbsp;and&nbsp;teardown&nbsp;is&nbsp;necessary&nbsp;around&nbsp;a&nbsp;call&nbsp;to&nbsp;m.Run.&nbsp;It&nbsp;should&nbsp;then&nbsp;call</span><br>
<span class="lineno"></span><span class="comment" id="5038565">//&nbsp;os.Exit&nbsp;with&nbsp;the&nbsp;result&nbsp;of&nbsp;m.Run.</span><br>
<span class="lineno"></span><span class="comment" id="5038602">//</span><br>
<span class="lineno">135</span><span class="comment" id="5038605">//&nbsp;The&nbsp;minimal&nbsp;implementation&nbsp;of&nbsp;TestMain&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="5038651">//</span><br>
<span class="lineno"></span><span class="comment" id="5038654">//&nbsp;&nbsp;&nbsp;&nbspfunc&nbsp;TestMain(m&nbsp;*testing.M)&nbsp;{&nbsp;os.Exit(m.Run())&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="5038706">//</span><br>
<span class="lineno"></span><span class="comment" id="5038709">//&nbsp;In&nbsp;effect,&nbsp;that&nbsp;is&nbsp;the&nbsp;implementation&nbsp;used&nbsp;when&nbsp;no&nbsp;TestMain&nbsp;is&nbsp;explicitly&nbsp;defined.</span><br>
<span class="lineno">140</span><span class="keyword" id="5038795">package</span>&nbsp;<span class="ident" id="5038803">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5038812">import</span>&nbsp;<span class="op" id="5038819">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038822">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038831">&#34;flag&#34;</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038839">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038846">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038852">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038863">&#34;runtime/pprof&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038880">&#34;strconv&#34;</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038891">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038902">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5038910">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5038917">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="5038920">var</span>&nbsp;<span class="op" id="5038924">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5038927">//&nbsp;The&nbsp;short&nbsp;flag&nbsp;requests&nbsp;that&nbsp;tests&nbsp;run&nbsp;more&nbsp;quickly,&nbsp;but&nbsp;its&nbsp;functionality</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039006">//&nbsp;is&nbsp;provided&nbsp;by&nbsp;test&nbsp;writers&nbsp;themselves.&nbsp;&nbsp;The&nbsp;testing&nbsp;package&nbsp;is&nbsp;just&nbsp;its</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039083">//&nbsp;home.&nbsp;&nbsp;The&nbsp;all.bash&nbsp;installation&nbsp;script&nbsp;sets&nbsp;it&nbsp;to&nbsp;make&nbsp;installation&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039161">//&nbsp;efficient,&nbsp;but&nbsp;by&nbsp;default&nbsp;the&nbsp;flag&nbsp;is&nbsp;off&nbsp;so&nbsp;a&nbsp;plain&nbsp;&#34;go&nbsp;test&#34;&nbsp;will&nbsp;do&nbsp;a</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039238">//&nbsp;full&nbsp;test&nbsp;of&nbsp;the&nbsp;package.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039268">short</span>&nbsp;<span class="op" id="5039274">=</span>&nbsp;<span class="ident" id="5039276"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5039280">.</span><span class="ident" id="5039281">Bool</span><span class="op" id="5039285">(</span><span class="string" id="5039286">&#34;test.short&#34;</span><span class="op" id="5039298">,</span>&nbsp;<span class="builtintype" id="5039300">false</span><span class="op" id="5039305">,</span>&nbsp;<span class="string" id="5039307">&#34;run&nbsp;smaller&nbsp;test&nbsp;suite&nbsp;to&nbsp;save&nbsp;time&#34;</span><span class="op" id="5039344">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039348">//&nbsp;The&nbsp;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;create&nbsp;profile&nbsp;files&nbsp;and&nbsp;the&nbsp;like.&nbsp;When&nbsp;run&nbsp;from</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039427">//&nbsp;&#34;go&nbsp;test&#34;,&nbsp;the&nbsp;binary&nbsp;always&nbsp;runs&nbsp;in&nbsp;the&nbsp;source&nbsp;directory&nbsp;for&nbsp;the&nbsp;package;</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039506">//&nbsp;this&nbsp;flag&nbsp;lets&nbsp;&#34;go&nbsp;test&#34;&nbsp;tell&nbsp;the&nbsp;binary&nbsp;to&nbsp;write&nbsp;the&nbsp;files&nbsp;in&nbsp;the&nbsp;directory&nbsp;where</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039593">//&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command&nbsp;is&nbsp;run.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039627">outputDir</span>&nbsp;<span class="op" id="5039637">=</span>&nbsp;<span class="ident" id="5039639"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5039643">.</span><span class="ident" id="5039644">String</span><span class="op" id="5039650">(</span><span class="string" id="5039651">&#34;test.outputdir&#34;</span><span class="op" id="5039667">,</span>&nbsp;<span class="string" id="5039669">&#34;&#34;</span><span class="op" id="5039671">,</span>&nbsp;<span class="string" id="5039673">&#34;directory&nbsp;in&nbsp;which&nbsp;to&nbsp;write&nbsp;profiles&#34;</span><span class="op" id="5039711">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5039715">//&nbsp;Report&nbsp;as&nbsp;tests&nbsp;are&nbsp;run;&nbsp;default&nbsp;is&nbsp;silent&nbsp;for&nbsp;success.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039775">chatty</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5039792">=</span>&nbsp;<span class="ident" id="5039794"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5039798">.</span><span class="ident" id="5039799">Bool</span><span class="op" id="5039803">(</span><span class="string" id="5039804">&#34;test.v&#34;</span><span class="op" id="5039812">,</span>&nbsp;<span class="builtintype" id="5039814">false</span><span class="op" id="5039819">,</span>&nbsp;<span class="string" id="5039821">&#34;verbose:&nbsp;print&nbsp;additional&nbsp;output&#34;</span><span class="op" id="5039855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039858">coverProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5039875">=</span>&nbsp;<span class="ident" id="5039877"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5039881">.</span><span class="ident" id="5039882">String</span><span class="op" id="5039888">(</span><span class="string" id="5039889">&#34;test.coverprofile&#34;</span><span class="op" id="5039908">,</span>&nbsp;<span class="string" id="5039910">&#34;&#34;</span><span class="op" id="5039912">,</span>&nbsp;<span class="string" id="5039914">&#34;write&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5039974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5039977">match</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5039994">=</span>&nbsp;<span class="ident" id="5039996"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040000">.</span><span class="ident" id="5040001">String</span><span class="op" id="5040007">(</span><span class="string" id="5040008">&#34;test.run&#34;</span><span class="op" id="5040018">,</span>&nbsp;<span class="string" id="5040020">&#34;&#34;</span><span class="op" id="5040022">,</span>&nbsp;<span class="string" id="5040024">&#34;regular&nbsp;expression&nbsp;to&nbsp;select&nbsp;tests&nbsp;and&nbsp;examples&nbsp;to&nbsp;run&#34;</span><span class="op" id="5040080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040083">memProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5040100">=</span>&nbsp;<span class="ident" id="5040102"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040106">.</span><span class="ident" id="5040107">String</span><span class="op" id="5040113">(</span><span class="string" id="5040114">&#34;test.memprofile&#34;</span><span class="op" id="5040131">,</span>&nbsp;<span class="string" id="5040133">&#34;&#34;</span><span class="op" id="5040135">,</span>&nbsp;<span class="string" id="5040137">&#34;write&nbsp;a&nbsp;memory&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5040195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040198">memProfileRate</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5040215">=</span>&nbsp;<span class="ident" id="5040217"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040221">.</span><span class="ident" id="5040222">Int</span><span class="op" id="5040225">(</span><span class="string" id="5040226">&#34;test.memprofilerate&#34;</span><span class="op" id="5040247">,</span>&nbsp;<span class="num" id="5040249">0</span><span class="op" id="5040250">,</span>&nbsp;<span class="string" id="5040252">&#34;if&nbsp;&gt;=0,&nbsp;sets&nbsp;runtime.MemProfileRate&#34;</span><span class="op" id="5040289">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040292">cpuProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5040309">=</span>&nbsp;<span class="ident" id="5040311"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040315">.</span><span class="ident" id="5040316">String</span><span class="op" id="5040322">(</span><span class="string" id="5040323">&#34;test.cpuprofile&#34;</span><span class="op" id="5040340">,</span>&nbsp;<span class="string" id="5040342">&#34;&#34;</span><span class="op" id="5040344">,</span>&nbsp;<span class="string" id="5040346">&#34;write&nbsp;a&nbsp;cpu&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;during&nbsp;execution&#34;</span><span class="op" id="5040402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040405">blockProfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5040422">=</span>&nbsp;<span class="ident" id="5040424"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040428">.</span><span class="ident" id="5040429">String</span><span class="op" id="5040435">(</span><span class="string" id="5040436">&#34;test.blockprofile&#34;</span><span class="op" id="5040455">,</span>&nbsp;<span class="string" id="5040457">&#34;&#34;</span><span class="op" id="5040459">,</span>&nbsp;<span class="string" id="5040461">&#34;write&nbsp;a&nbsp;goroutine&nbsp;blocking&nbsp;profile&nbsp;to&nbsp;the&nbsp;named&nbsp;file&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5040531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040534">blockProfileRate</span>&nbsp;<span class="op" id="5040551">=</span>&nbsp;<span class="ident" id="5040553"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040557">.</span><span class="ident" id="5040558">Int</span><span class="op" id="5040561">(</span><span class="string" id="5040562">&#34;test.blockprofilerate&#34;</span><span class="op" id="5040585">,</span>&nbsp;<span class="num" id="5040587">1</span><span class="op" id="5040588">,</span>&nbsp;<span class="string" id="5040590">&#34;if&nbsp;&gt;=&nbsp;0,&nbsp;calls&nbsp;runtime.SetBlockProfileRate()&#34;</span><span class="op" id="5040636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040639">timeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5040656">=</span>&nbsp;<span class="ident" id="5040658"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040662">.</span><span class="ident" id="5040663">Duration</span><span class="op" id="5040671">(</span><span class="string" id="5040672">&#34;test.timeout&#34;</span><span class="op" id="5040686">,</span>&nbsp;<span class="num" id="5040688">0</span><span class="op" id="5040689">,</span>&nbsp;<span class="string" id="5040691">&#34;if&nbsp;positive,&nbsp;sets&nbsp;an&nbsp;aggregate&nbsp;time&nbsp;limit&nbsp;for&nbsp;all&nbsp;tests&#34;</span><span class="op" id="5040748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040751">cpuListStr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5040768">=</span>&nbsp;<span class="ident" id="5040770"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040774">.</span><span class="ident" id="5040775">String</span><span class="op" id="5040781">(</span><span class="string" id="5040782">&#34;test.cpu&#34;</span><span class="op" id="5040792">,</span>&nbsp;<span class="string" id="5040794">&#34;&#34;</span><span class="op" id="5040796">,</span>&nbsp;<span class="string" id="5040798">&#34;comma-separated&nbsp;list&nbsp;of&nbsp;number&nbsp;of&nbsp;CPUs&nbsp;to&nbsp;use&nbsp;for&nbsp;each&nbsp;test&#34;</span><span class="op" id="5040859">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040862">parallel</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5040879">=</span>&nbsp;<span class="ident" id="5040881"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5040885">.</span><span class="ident" id="5040886">Int</span><span class="op" id="5040889">(</span><span class="string" id="5040890">&#34;test.parallel&#34;</span><span class="op" id="5040905">,</span>&nbsp;<span class="ident" id="5040907"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5040914">.</span><span class="ident" id="5040915">GOMAXPROCS</span><span class="op" id="5040925">(</span><span class="num" id="5040926">0</span><span class="op" id="5040927">)</span><span class="op" id="5040928">,</span>&nbsp;<span class="string" id="5040930">&#34;maximum&nbsp;test&nbsp;parallelism&#34;</span><span class="op" id="5040956">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5040960">haveExamples</span>&nbsp;<span class="builtintype" id="5040973">bool</span>&nbsp;<span class="comment" id="5040978">//&nbsp;are&nbsp;there&nbsp;examples?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041003">cpuList</span>&nbsp;<span class="op" id="5041011">[</span><span class="op" id="5041012">]</span><span class="builtintype" id="5041013">int</span><br>
<span class="lineno">185</span><span class="op" id="5041017">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5041020">//&nbsp;common&nbsp;holds&nbsp;the&nbsp;elements&nbsp;common&nbsp;between&nbsp;T&nbsp;and&nbsp;B&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5041076">//&nbsp;captures&nbsp;common&nbsp;methods&nbsp;such&nbsp;as&nbsp;Errorf.</span><br>
<span class="lineno"></span><span class="keyword" id="5041119">type</span>&nbsp;<span class="ident" id="5041124">common</span>&nbsp;<span class="keyword" id="5041131">struct</span>&nbsp;<span class="op" id="5041138">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041141">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5041150"><a href="/testing/testing.go.html#5038902">sync</a></span><span class="op" id="5041154">.</span><span class="ident" id="5041155">RWMutex</span>&nbsp;<span class="comment" id="5041163">//&nbsp;guards&nbsp;output&nbsp;and&nbsp;failed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041192">output</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5041201">[</span><span class="op" id="5041202">]</span><span class="builtintype" id="5041203">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5041214">//&nbsp;Output&nbsp;generated&nbsp;by&nbsp;test&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041257">failed</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5041266">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5041279">//&nbsp;Test&nbsp;or&nbsp;benchmark&nbsp;has&nbsp;failed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041313">skipped</span>&nbsp;&nbsp;<span class="builtintype" id="5041322">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5041335">//&nbsp;Test&nbsp;of&nbsp;benchmark&nbsp;has&nbsp;been&nbsp;skipped.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041375">finished</span>&nbsp;<span class="builtintype" id="5041384">bool</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041391">start</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5041400"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5041404">.</span><span class="ident" id="5041405">Time</span>&nbsp;<span class="comment" id="5041410">//&nbsp;Time&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;started</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041445">duration</span>&nbsp;<span class="ident" id="5041454"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5041458">.</span><span class="ident" id="5041459">Duration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041469">self</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5041478">interface</span><span class="op" id="5041487">{</span><span class="op" id="5041488">}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5041495">//&nbsp;To&nbsp;be&nbsp;sent&nbsp;on&nbsp;signal&nbsp;channel&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041539">signal</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5041548">chan</span>&nbsp;<span class="keyword" id="5041553">interface</span><span class="op" id="5041562">{</span><span class="op" id="5041563">}</span>&nbsp;<span class="comment" id="5041565">//&nbsp;Output&nbsp;for&nbsp;serial&nbsp;tests.</span><br>
<span class="lineno">200</span><span class="op" id="5041593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5041596">//&nbsp;Short&nbsp;reports&nbsp;whether&nbsp;the&nbsp;-test.short&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5041650">func</span>&nbsp;<span class="ident" id="5041655">Short</span><span class="op" id="5041660">(</span><span class="op" id="5041661">)</span>&nbsp;<span class="builtintype" id="5041663">bool</span>&nbsp;<span class="op" id="5041668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041671">return</span>&nbsp;<span class="op" id="5041678">*</span><span class="ident" id="5041679"><a href="/testing/testing.go.html#5039268">short</a></span><br>
<span class="lineno">205</span><span class="op" id="5041685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5041688">//&nbsp;Verbose&nbsp;reports&nbsp;whether&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5041740">func</span>&nbsp;<span class="ident" id="5041745">Verbose</span><span class="op" id="5041752">(</span><span class="op" id="5041753">)</span>&nbsp;<span class="builtintype" id="5041755">bool</span>&nbsp;<span class="op" id="5041760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5041763">return</span>&nbsp;<span class="op" id="5041770">*</span><span class="ident" id="5041771"><a href="/testing/testing.go.html#5039775">chatty</a></span><br>
<span class="lineno">210</span><span class="op" id="5041778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5041781">//&nbsp;decorate&nbsp;prefixes&nbsp;the&nbsp;string&nbsp;with&nbsp;the&nbsp;file&nbsp;and&nbsp;line&nbsp;of&nbsp;the&nbsp;call&nbsp;site</span><br>
<span class="lineno"></span><span class="comment" id="5041853">//&nbsp;and&nbsp;inserts&nbsp;the&nbsp;final&nbsp;newline&nbsp;if&nbsp;needed&nbsp;and&nbsp;indentation&nbsp;tabs&nbsp;for&nbsp;formatting.</span><br>
<span class="lineno"></span><span class="keyword" id="5041933">func</span>&nbsp;<span class="ident" id="5041938">decorate</span><span class="op" id="5041946">(</span><span class="ident" id="5041947">s</span>&nbsp;<span class="builtintype" id="5041949">string</span><span class="op" id="5041955">)</span>&nbsp;<span class="builtintype" id="5041957">string</span>&nbsp;<span class="op" id="5041964">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5041967">_</span><span class="op" id="5041968">,</span>&nbsp;<span class="ident" id="5041970">file</span><span class="op" id="5041974">,</span>&nbsp;<span class="ident" id="5041976">line</span><span class="op" id="5041980">,</span>&nbsp;<span class="ident" id="5041982">ok</span>&nbsp;<span class="op" id="5041985">:=</span>&nbsp;<span class="ident" id="5041988"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5041995">.</span><span class="ident" id="5041996">Caller</span><span class="op" id="5042002">(</span><span class="num" id="5042003">3</span><span class="op" id="5042004">)</span>&nbsp;<span class="comment" id="5042006">//&nbsp;decorate&nbsp;+&nbsp;log&nbsp;+&nbsp;public&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042044">if</span>&nbsp;<span class="ident" id="5042047"><a href="/testing/testing.go.html#5041982">ok</a></span>&nbsp;<span class="op" id="5042050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5042054">//&nbsp;Truncate&nbsp;file&nbsp;name&nbsp;at&nbsp;last&nbsp;file&nbsp;name&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042107">if</span>&nbsp;<span class="ident" id="5042110">index</span>&nbsp;<span class="op" id="5042116">:=</span>&nbsp;<span class="ident" id="5042119"><a href="/testing/testing.go.html#5038891">strings</a></span><span class="op" id="5042126">.</span><span class="ident" id="5042127">LastIndex</span><span class="op" id="5042136">(</span><span class="ident" id="5042137"><a href="/testing/testing.go.html#5041970">file</a></span><span class="op" id="5042141">,</span>&nbsp;<span class="string" id="5042143">&#34;/&#34;</span><span class="op" id="5042146">)</span><span class="op" id="5042147">;</span>&nbsp;<span class="ident" id="5042149"><a href="/testing/testing.go.html#5042110">index</a></span>&nbsp;<span class="op" id="5042155">&gt;=</span>&nbsp;<span class="num" id="5042158">0</span>&nbsp;<span class="op" id="5042160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042165"><a href="/testing/testing.go.html#5041970">file</a></span>&nbsp;<span class="op" id="5042170">=</span>&nbsp;<span class="ident" id="5042172"><a href="/testing/testing.go.html#5041970">file</a></span><span class="op" id="5042176">[</span><span class="ident" id="5042177"><a href="/testing/testing.go.html#5042110">index</a></span><span class="op" id="5042182">+</span><span class="num" id="5042183">1</span><span class="op" id="5042184">:</span><span class="op" id="5042185">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042189">}</span>&nbsp;<span class="keyword" id="5042191">else</span>&nbsp;<span class="keyword" id="5042196">if</span>&nbsp;<span class="ident" id="5042199"><a href="/testing/testing.go.html#5042110">index</a></span>&nbsp;<span class="op" id="5042205">=</span>&nbsp;<span class="ident" id="5042207"><a href="/testing/testing.go.html#5038891">strings</a></span><span class="op" id="5042214">.</span><span class="ident" id="5042215">LastIndex</span><span class="op" id="5042224">(</span><span class="ident" id="5042225"><a href="/testing/testing.go.html#5041970">file</a></span><span class="op" id="5042229">,</span>&nbsp;<span class="string" id="5042231">&#34;\\&#34;</span><span class="op" id="5042235">)</span><span class="op" id="5042236">;</span>&nbsp;<span class="ident" id="5042238"><a href="/testing/testing.go.html#5042110">index</a></span>&nbsp;<span class="op" id="5042244">&gt;=</span>&nbsp;<span class="num" id="5042247">0</span>&nbsp;<span class="op" id="5042249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042254"><a href="/testing/testing.go.html#5041970">file</a></span>&nbsp;<span class="op" id="5042259">=</span>&nbsp;<span class="ident" id="5042261"><a href="/testing/testing.go.html#5041970">file</a></span><span class="op" id="5042265">[</span><span class="ident" id="5042266"><a href="/testing/testing.go.html#5042110">index</a></span><span class="op" id="5042271">+</span><span class="num" id="5042272">1</span><span class="op" id="5042273">:</span><span class="op" id="5042274">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042281">}</span>&nbsp;<span class="keyword" id="5042283">else</span>&nbsp;<span class="op" id="5042288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042292"><a href="/testing/testing.go.html#5041970">file</a></span>&nbsp;<span class="op" id="5042297">=</span>&nbsp;<span class="string" id="5042299">&#34;???&#34;</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042307"><a href="/testing/testing.go.html#5041976">line</a></span>&nbsp;<span class="op" id="5042312">=</span>&nbsp;<span class="num" id="5042314">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042320">buf</span>&nbsp;<span class="op" id="5042324">:=</span>&nbsp;<span class="builtinfunc" id="5042327">new</span><span class="op" id="5042330">(</span><span class="ident" id="5042331"><a href="/testing/testing.go.html#5038822">bytes</a></span><span class="op" id="5042336">.</span><span class="ident" id="5042337">Buffer</span><span class="op" id="5042343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5042346">//&nbsp;Every&nbsp;line&nbsp;is&nbsp;indented&nbsp;at&nbsp;least&nbsp;one&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042391"><a href="/testing/testing.go.html#5042320">buf</a></span><span class="op" id="5042394">.</span><span class="ident" id="5042395">WriteByte</span><span class="op" id="5042404">(</span><span class="string" id="5042405">&#39;\t&#39;</span><span class="op" id="5042409">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042412"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5042415">.</span><span class="ident" id="5042416">Fprintf</span><span class="op" id="5042423">(</span><span class="ident" id="5042424"><a href="/testing/testing.go.html#5042320">buf</a></span><span class="op" id="5042427">,</span>&nbsp;<span class="string" id="5042429">&#34;%s:%d:&nbsp;&#34;</span><span class="op" id="5042438">,</span>&nbsp;<span class="ident" id="5042440"><a href="/testing/testing.go.html#5041970">file</a></span><span class="op" id="5042444">,</span>&nbsp;<span class="ident" id="5042446"><a href="/testing/testing.go.html#5041976">line</a></span><span class="op" id="5042450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042453">lines</span>&nbsp;<span class="op" id="5042459">:=</span>&nbsp;<span class="ident" id="5042462"><a href="/testing/testing.go.html#5038891">strings</a></span><span class="op" id="5042469">.</span><span class="ident" id="5042470">Split</span><span class="op" id="5042475">(</span><span class="ident" id="5042476"><a href="/testing/testing.go.html#5041947">s</a></span><span class="op" id="5042477">,</span>&nbsp;<span class="string" id="5042479">&#34;\n&#34;</span><span class="op" id="5042483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042486">if</span>&nbsp;<span class="ident" id="5042489">l</span>&nbsp;<span class="op" id="5042491">:=</span>&nbsp;<span class="builtinfunc" id="5042494">len</span><span class="op" id="5042497">(</span><span class="ident" id="5042498"><a href="/testing/testing.go.html#5042453">lines</a></span><span class="op" id="5042503">)</span><span class="op" id="5042504">;</span>&nbsp;<span class="ident" id="5042506"><a href="/testing/testing.go.html#5042489">l</a></span>&nbsp;<span class="op" id="5042508">&gt;</span>&nbsp;<span class="num" id="5042510">1</span>&nbsp;<span class="op" id="5042512">&amp;&amp;</span>&nbsp;<span class="ident" id="5042515"><a href="/testing/testing.go.html#5042453">lines</a></span><span class="op" id="5042520">[</span><span class="ident" id="5042521"><a href="/testing/testing.go.html#5042489">l</a></span><span class="op" id="5042522">-</span><span class="num" id="5042523">1</span><span class="op" id="5042524">]</span>&nbsp;<span class="op" id="5042526">==</span>&nbsp;<span class="string" id="5042529">&#34;&#34;</span>&nbsp;<span class="op" id="5042532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042536"><a href="/testing/testing.go.html#5042453">lines</a></span>&nbsp;<span class="op" id="5042542">=</span>&nbsp;<span class="ident" id="5042544"><a href="/testing/testing.go.html#5042453">lines</a></span><span class="op" id="5042549">[</span><span class="op" id="5042550">:</span><span class="ident" id="5042551"><a href="/testing/testing.go.html#5042489">l</a></span><span class="op" id="5042552">-</span><span class="num" id="5042553">1</span><span class="op" id="5042554">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042557">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042560">for</span>&nbsp;<span class="ident" id="5042564">i</span><span class="op" id="5042565">,</span>&nbsp;<span class="ident" id="5042567">line</span>&nbsp;<span class="op" id="5042572">:=</span>&nbsp;<span class="keyword" id="5042575">range</span>&nbsp;<span class="ident" id="5042581"><a href="/testing/testing.go.html#5042453">lines</a></span>&nbsp;<span class="op" id="5042587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042591">if</span>&nbsp;<span class="ident" id="5042594"><a href="/testing/testing.go.html#5042564">i</a></span>&nbsp;<span class="op" id="5042596">&gt;</span>&nbsp;<span class="num" id="5042598">0</span>&nbsp;<span class="op" id="5042600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5042605">//&nbsp;Second&nbsp;and&nbsp;subsequent&nbsp;lines&nbsp;are&nbsp;indented&nbsp;an&nbsp;extra&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042666"><a href="/testing/testing.go.html#5042320">buf</a></span><span class="op" id="5042669">.</span><span class="ident" id="5042670">WriteString</span><span class="op" id="5042681">(</span><span class="string" id="5042682">&#34;\n\t\t&#34;</span><span class="op" id="5042690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042694">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042698"><a href="/testing/testing.go.html#5042320">buf</a></span><span class="op" id="5042701">.</span><span class="ident" id="5042702">WriteString</span><span class="op" id="5042713">(</span><span class="ident" id="5042714"><a href="/testing/testing.go.html#5042567">line</a></span><span class="op" id="5042718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5042721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042724"><a href="/testing/testing.go.html#5042320">buf</a></span><span class="op" id="5042727">.</span><span class="ident" id="5042728">WriteByte</span><span class="op" id="5042737">(</span><span class="string" id="5042738">&#39;\n&#39;</span><span class="op" id="5042742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042745">return</span>&nbsp;<span class="ident" id="5042752"><a href="/testing/testing.go.html#5042320">buf</a></span><span class="op" id="5042755">.</span><span class="ident" id="5042756">String</span><span class="op" id="5042762">(</span><span class="op" id="5042763">)</span><br>
<span class="lineno"></span><span class="op" id="5042765">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="5042768">//&nbsp;fmtDuration&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;d&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;87.00s&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5042837">func</span>&nbsp;<span class="ident" id="5042842">fmtDuration</span><span class="op" id="5042853">(</span><span class="ident" id="5042854">d</span>&nbsp;<span class="ident" id="5042856"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5042860">.</span><span class="ident" id="5042861">Duration</span><span class="op" id="5042869">)</span>&nbsp;<span class="builtintype" id="5042871">string</span>&nbsp;<span class="op" id="5042878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5042881">return</span>&nbsp;<span class="ident" id="5042888"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5042891">.</span><span class="ident" id="5042892">Sprintf</span><span class="op" id="5042899">(</span><span class="string" id="5042900">&#34;%.2fs&#34;</span><span class="op" id="5042907">,</span>&nbsp;<span class="ident" id="5042909"><a href="/testing/testing.go.html#5042854">d</a></span><span class="op" id="5042910">.</span><span class="ident" id="5042911">Seconds</span><span class="op" id="5042918">(</span><span class="op" id="5042919">)</span><span class="op" id="5042920">)</span><br>
<span class="lineno"></span><span class="op" id="5042922">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5042925">//&nbsp;TB&nbsp;is&nbsp;the&nbsp;interface&nbsp;common&nbsp;to&nbsp;T&nbsp;and&nbsp;B.</span><br>
<span class="lineno"></span><span class="keyword" id="5042967">type</span>&nbsp;<span class="ident" id="5042972">TB</span>&nbsp;<span class="keyword" id="5042975">interface</span>&nbsp;<span class="op" id="5042985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5042988">Error</span><span class="op" id="5042993">(</span><span class="ident" id="5042994">args</span>&nbsp;<span class="op" id="5042999">...</span><span class="keyword" id="5043002">interface</span><span class="op" id="5043011">{</span><span class="op" id="5043012">}</span><span class="op" id="5043013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043016">Errorf</span><span class="op" id="5043022">(</span><span class="ident" id="5043023">format</span>&nbsp;<span class="builtintype" id="5043030">string</span><span class="op" id="5043036">,</span>&nbsp;<span class="ident" id="5043038">args</span>&nbsp;<span class="op" id="5043043">...</span><span class="keyword" id="5043046">interface</span><span class="op" id="5043055">{</span><span class="op" id="5043056">}</span><span class="op" id="5043057">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043060">Fail</span><span class="op" id="5043064">(</span><span class="op" id="5043065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043068">FailNow</span><span class="op" id="5043075">(</span><span class="op" id="5043076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043079">Failed</span><span class="op" id="5043085">(</span><span class="op" id="5043086">)</span>&nbsp;<span class="builtintype" id="5043088">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043094">Fatal</span><span class="op" id="5043099">(</span><span class="ident" id="5043100">args</span>&nbsp;<span class="op" id="5043105">...</span><span class="keyword" id="5043108">interface</span><span class="op" id="5043117">{</span><span class="op" id="5043118">}</span><span class="op" id="5043119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043122">Fatalf</span><span class="op" id="5043128">(</span><span class="ident" id="5043129">format</span>&nbsp;<span class="builtintype" id="5043136">string</span><span class="op" id="5043142">,</span>&nbsp;<span class="ident" id="5043144">args</span>&nbsp;<span class="op" id="5043149">...</span><span class="keyword" id="5043152">interface</span><span class="op" id="5043161">{</span><span class="op" id="5043162">}</span><span class="op" id="5043163">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043166">Log</span><span class="op" id="5043169">(</span><span class="ident" id="5043170">args</span>&nbsp;<span class="op" id="5043175">...</span><span class="keyword" id="5043178">interface</span><span class="op" id="5043187">{</span><span class="op" id="5043188">}</span><span class="op" id="5043189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043192">Logf</span><span class="op" id="5043196">(</span><span class="ident" id="5043197">format</span>&nbsp;<span class="builtintype" id="5043204">string</span><span class="op" id="5043210">,</span>&nbsp;<span class="ident" id="5043212">args</span>&nbsp;<span class="op" id="5043217">...</span><span class="keyword" id="5043220">interface</span><span class="op" id="5043229">{</span><span class="op" id="5043230">}</span><span class="op" id="5043231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043234">Skip</span><span class="op" id="5043238">(</span><span class="ident" id="5043239">args</span>&nbsp;<span class="op" id="5043244">...</span><span class="keyword" id="5043247">interface</span><span class="op" id="5043256">{</span><span class="op" id="5043257">}</span><span class="op" id="5043258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043261">SkipNow</span><span class="op" id="5043268">(</span><span class="op" id="5043269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043272">Skipf</span><span class="op" id="5043277">(</span><span class="ident" id="5043278">format</span>&nbsp;<span class="builtintype" id="5043285">string</span><span class="op" id="5043291">,</span>&nbsp;<span class="ident" id="5043293">args</span>&nbsp;<span class="op" id="5043298">...</span><span class="keyword" id="5043301">interface</span><span class="op" id="5043310">{</span><span class="op" id="5043311">}</span><span class="op" id="5043312">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043315">Skipped</span><span class="op" id="5043322">(</span><span class="op" id="5043323">)</span>&nbsp;<span class="builtintype" id="5043325">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5043332">//&nbsp;A&nbsp;private&nbsp;method&nbsp;to&nbsp;prevent&nbsp;users&nbsp;implementing&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5043387">//&nbsp;interface&nbsp;and&nbsp;so&nbsp;future&nbsp;additions&nbsp;to&nbsp;it&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5043440">//&nbsp;violate&nbsp;Go&nbsp;1&nbsp;compatibility.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043472">private</span><span class="op" id="5043479">(</span><span class="op" id="5043480">)</span><br>
<span class="lineno"></span><span class="op" id="5043482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5043485">var</span>&nbsp;<span class="ident" id="5043489">_</span>&nbsp;<span class="ident" id="5043491"><a href="/testing/testing.go.html#5042972">TB</a></span>&nbsp;<span class="op" id="5043494">=</span>&nbsp;<span class="op" id="5043496">(</span><span class="op" id="5043497">*</span><span class="ident" id="5043498"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5043499">)</span><span class="op" id="5043500">(</span><span class="ident" id="5043501">nil</span><span class="op" id="5043504">)</span><br>
<span class="lineno"></span><span class="keyword" id="5043506">var</span>&nbsp;<span class="ident" id="5043510">_</span>&nbsp;<span class="ident" id="5043512"><a href="/testing/testing.go.html#5042972">TB</a></span>&nbsp;<span class="op" id="5043515">=</span>&nbsp;<span class="op" id="5043517">(</span><span class="op" id="5043518">*</span><span class="ident" id="5043519"><a href="/testing/benchmark.go.html#5017259">B</a></span><span class="op" id="5043520">)</span><span class="op" id="5043521">(</span><span class="ident" id="5043522">nil</span><span class="op" id="5043525">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5043528">//&nbsp;T&nbsp;is&nbsp;a&nbsp;type&nbsp;passed&nbsp;to&nbsp;Test&nbsp;functions&nbsp;to&nbsp;manage&nbsp;test&nbsp;state&nbsp;and&nbsp;support&nbsp;formatted&nbsp;test&nbsp;logs.</span><br>
<span class="lineno"></span><span class="comment" id="5043622">//&nbsp;Logs&nbsp;are&nbsp;accumulated&nbsp;during&nbsp;execution&nbsp;and&nbsp;dumped&nbsp;to&nbsp;standard&nbsp;error&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="keyword" id="5043703">type</span>&nbsp;<span class="ident" id="5043708">T</span>&nbsp;<span class="keyword" id="5043710">struct</span>&nbsp;<span class="op" id="5043717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043720"><a href="/testing/testing.go.html#5041124">common</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043728">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5043742">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5043752">//&nbsp;Name&nbsp;of&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043770">startParallel</span>&nbsp;<span class="keyword" id="5043784">chan</span>&nbsp;<span class="builtintype" id="5043789">bool</span>&nbsp;<span class="comment" id="5043794">//&nbsp;Parallel&nbsp;tests&nbsp;will&nbsp;wait&nbsp;on&nbsp;this.</span><br>
<span class="lineno"></span><span class="op" id="5043831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5043834">func</span>&nbsp;<span class="op" id="5043839">(</span><span class="ident" id="5043840">c</span>&nbsp;<span class="op" id="5043842">*</span><span class="ident" id="5043843"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5043849">)</span>&nbsp;<span class="ident" id="5043851">private</span><span class="op" id="5043858">(</span><span class="op" id="5043859">)</span>&nbsp;<span class="op" id="5043861">{</span><span class="op" id="5043862">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="comment" id="5043865">//&nbsp;Fail&nbsp;marks&nbsp;the&nbsp;function&nbsp;as&nbsp;having&nbsp;failed&nbsp;but&nbsp;continues&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="5043934">func</span>&nbsp;<span class="op" id="5043939">(</span><span class="ident" id="5043940">c</span>&nbsp;<span class="op" id="5043942">*</span><span class="ident" id="5043943"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5043949">)</span>&nbsp;<span class="ident" id="5043951">Fail</span><span class="op" id="5043955">(</span><span class="op" id="5043956">)</span>&nbsp;<span class="op" id="5043958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043961"><a href="/testing/testing.go.html#5043940">c</a></span><span class="op" id="5043962">.</span><span class="ident" id="5043963">mu</span><span class="op" id="5043965">.</span><span class="ident" id="5043966">Lock</span><span class="op" id="5043970">(</span><span class="op" id="5043971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5043974">defer</span>&nbsp;<span class="ident" id="5043980"><a href="/testing/testing.go.html#5043940">c</a></span><span class="op" id="5043981">.</span><span class="ident" id="5043982">mu</span><span class="op" id="5043984">.</span><span class="ident" id="5043985">Unlock</span><span class="op" id="5043991">(</span><span class="op" id="5043992">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5043995"><a href="/testing/testing.go.html#5043940">c</a></span><span class="op" id="5043996">.</span><span class="ident" id="5043997">failed</span>&nbsp;<span class="op" id="5044004">=</span>&nbsp;<span class="builtintype" id="5044006">true</span><br>
<span class="lineno"></span><span class="op" id="5044011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5044014">//&nbsp;Failed&nbsp;reports&nbsp;whether&nbsp;the&nbsp;function&nbsp;has&nbsp;failed.</span><br>
<span class="lineno"></span><span class="keyword" id="5044065">func</span>&nbsp;<span class="op" id="5044070">(</span><span class="ident" id="5044071">c</span>&nbsp;<span class="op" id="5044073">*</span><span class="ident" id="5044074"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5044080">)</span>&nbsp;<span class="ident" id="5044082">Failed</span><span class="op" id="5044088">(</span><span class="op" id="5044089">)</span>&nbsp;<span class="builtintype" id="5044091">bool</span>&nbsp;<span class="op" id="5044096">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5044099"><a href="/testing/testing.go.html#5044071">c</a></span><span class="op" id="5044100">.</span><span class="ident" id="5044101">mu</span><span class="op" id="5044103">.</span><span class="ident" id="5044104">RLock</span><span class="op" id="5044109">(</span><span class="op" id="5044110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5044113">defer</span>&nbsp;<span class="ident" id="5044119"><a href="/testing/testing.go.html#5044071">c</a></span><span class="op" id="5044120">.</span><span class="ident" id="5044121">mu</span><span class="op" id="5044123">.</span><span class="ident" id="5044124">RUnlock</span><span class="op" id="5044131">(</span><span class="op" id="5044132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5044135">return</span>&nbsp;<span class="ident" id="5044142"><a href="/testing/testing.go.html#5044071">c</a></span><span class="op" id="5044143">.</span><span class="ident" id="5044144">failed</span><br>
<span class="lineno"></span><span class="op" id="5044151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="5044154">//&nbsp;FailNow&nbsp;marks&nbsp;the&nbsp;function&nbsp;as&nbsp;having&nbsp;failed&nbsp;and&nbsp;stops&nbsp;its&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="5044226">//&nbsp;Execution&nbsp;will&nbsp;continue&nbsp;at&nbsp;the&nbsp;next&nbsp;test&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="5044284">//&nbsp;FailNow&nbsp;must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;goroutine&nbsp;running&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5044341">//&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;function,&nbsp;not&nbsp;from&nbsp;other&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="5044398">//&nbsp;created&nbsp;during&nbsp;the&nbsp;test.&nbsp;Calling&nbsp;FailNow&nbsp;does&nbsp;not&nbsp;stop</span><br>
<span class="lineno">305</span><span class="comment" id="5044456">//&nbsp;those&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="keyword" id="5044483">func</span>&nbsp;<span class="op" id="5044488">(</span><span class="ident" id="5044489">c</span>&nbsp;<span class="op" id="5044491">*</span><span class="ident" id="5044492"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5044498">)</span>&nbsp;<span class="ident" id="5044500">FailNow</span><span class="op" id="5044507">(</span><span class="op" id="5044508">)</span>&nbsp;<span class="op" id="5044510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5044513"><a href="/testing/testing.go.html#5044489">c</a></span><span class="op" id="5044514">.</span><span class="ident" id="5044515">Fail</span><span class="op" id="5044519">(</span><span class="op" id="5044520">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044524">//&nbsp;Calling&nbsp;runtime.Goexit&nbsp;will&nbsp;exit&nbsp;the&nbsp;goroutine,&nbsp;which</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044582">//&nbsp;will&nbsp;run&nbsp;the&nbsp;deferred&nbsp;functions&nbsp;in&nbsp;this&nbsp;goroutine,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044637">//&nbsp;which&nbsp;will&nbsp;eventually&nbsp;run&nbsp;the&nbsp;deferred&nbsp;lines&nbsp;in&nbsp;tRunner,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044698">//&nbsp;which&nbsp;will&nbsp;signal&nbsp;to&nbsp;the&nbsp;test&nbsp;loop&nbsp;that&nbsp;this&nbsp;test&nbsp;is&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044761">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044765">//&nbsp;A&nbsp;previous&nbsp;version&nbsp;of&nbsp;this&nbsp;code&nbsp;said:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044807">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044811">//&nbsp;&nbsp;&nbsp;&nbspc.duration&nbsp;=&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044832">//&nbsp;&nbsp;&nbsp;&nbspc.signal&nbsp;&lt;-&nbsp;c.self</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044855">//&nbsp;&nbsp;&nbsp;&nbspruntime.Goexit()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044876">//</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044880">//&nbsp;This&nbsp;previous&nbsp;version&nbsp;duplicated&nbsp;code&nbsp;(those&nbsp;lines&nbsp;are&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5044942">//&nbsp;tRunner&nbsp;no&nbsp;matter&nbsp;what),&nbsp;but&nbsp;worse&nbsp;the&nbsp;goroutine&nbsp;teardown</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5045004">//&nbsp;implicit&nbsp;in&nbsp;runtime.Goexit&nbsp;was&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;complete</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5045066">//&nbsp;before&nbsp;the&nbsp;test&nbsp;exited.&nbsp;&nbsp;If&nbsp;a&nbsp;test&nbsp;deferred&nbsp;an&nbsp;important&nbsp;cleanup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5045135">//&nbsp;function&nbsp;(like&nbsp;removing&nbsp;temporary&nbsp;files),&nbsp;there&nbsp;was&nbsp;no&nbsp;guarantee</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5045204">//&nbsp;it&nbsp;would&nbsp;run&nbsp;on&nbsp;a&nbsp;test&nbsp;failure.&nbsp;&nbsp;Because&nbsp;we&nbsp;send&nbsp;on&nbsp;c.signal&nbsp;during</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5045276">//&nbsp;a&nbsp;top-of-stack&nbsp;deferred&nbsp;function&nbsp;now,&nbsp;we&nbsp;know&nbsp;that&nbsp;the&nbsp;send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5045340">//&nbsp;only&nbsp;happens&nbsp;after&nbsp;any&nbsp;other&nbsp;stacked&nbsp;defers&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5045404"><a href="/testing/testing.go.html#5044489">c</a></span><span class="op" id="5045405">.</span><span class="ident" id="5045406">finished</span>&nbsp;<span class="op" id="5045415">=</span>&nbsp;<span class="builtintype" id="5045417">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5045423"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5045430">.</span><span class="ident" id="5045431">Goexit</span><span class="op" id="5045437">(</span><span class="op" id="5045438">)</span><br>
<span class="lineno">330</span><span class="op" id="5045440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5045443">//&nbsp;log&nbsp;generates&nbsp;the&nbsp;output.&nbsp;It&#39;s&nbsp;always&nbsp;at&nbsp;the&nbsp;same&nbsp;stack&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="5045509">func</span>&nbsp;<span class="op" id="5045514">(</span><span class="ident" id="5045515">c</span>&nbsp;<span class="op" id="5045517">*</span><span class="ident" id="5045518"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5045524">)</span>&nbsp;<span class="ident" id="5045526">log</span><span class="op" id="5045529">(</span><span class="ident" id="5045530">s</span>&nbsp;<span class="builtintype" id="5045532">string</span><span class="op" id="5045538">)</span>&nbsp;<span class="op" id="5045540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5045543"><a href="/testing/testing.go.html#5045515">c</a></span><span class="op" id="5045544">.</span><span class="ident" id="5045545">mu</span><span class="op" id="5045547">.</span><span class="ident" id="5045548">Lock</span><span class="op" id="5045552">(</span><span class="op" id="5045553">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5045556">defer</span>&nbsp;<span class="ident" id="5045562"><a href="/testing/testing.go.html#5045515">c</a></span><span class="op" id="5045563">.</span><span class="ident" id="5045564">mu</span><span class="op" id="5045566">.</span><span class="ident" id="5045567">Unlock</span><span class="op" id="5045573">(</span><span class="op" id="5045574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5045577"><a href="/testing/testing.go.html#5045515">c</a></span><span class="op" id="5045578">.</span><span class="ident" id="5045579">output</span>&nbsp;<span class="op" id="5045586">=</span>&nbsp;<span class="builtinfunc" id="5045588">append</span><span class="op" id="5045594">(</span><span class="ident" id="5045595"><a href="/testing/testing.go.html#5045515">c</a></span><span class="op" id="5045596">.</span><span class="ident" id="5045597">output</span><span class="op" id="5045603">,</span>&nbsp;<span class="ident" id="5045605"><a href="/testing/testing.go.html#5041938">decorate</a></span><span class="op" id="5045613">(</span><span class="ident" id="5045614"><a href="/testing/testing.go.html#5045530">s</a></span><span class="op" id="5045615">)</span><span class="op" id="5045616">...</span><span class="op" id="5045619">)</span><br>
<span class="lineno"></span><span class="op" id="5045621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5045624">//&nbsp;Log&nbsp;formats&nbsp;its&nbsp;arguments&nbsp;using&nbsp;default&nbsp;formatting,&nbsp;analogous&nbsp;to&nbsp;Println,</span><br>
<span class="lineno">340</span><span class="comment" id="5045701">//&nbsp;and&nbsp;records&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;error&nbsp;log.&nbsp;The&nbsp;text&nbsp;will&nbsp;be&nbsp;printed&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5045776">//&nbsp;the&nbsp;test&nbsp;fails&nbsp;or&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5045822">func</span>&nbsp;<span class="op" id="5045827">(</span><span class="ident" id="5045828">c</span>&nbsp;<span class="op" id="5045830">*</span><span class="ident" id="5045831"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5045837">)</span>&nbsp;<span class="ident" id="5045839">Log</span><span class="op" id="5045842">(</span><span class="ident" id="5045843">args</span>&nbsp;<span class="op" id="5045848">...</span><span class="keyword" id="5045851">interface</span><span class="op" id="5045860">{</span><span class="op" id="5045861">}</span><span class="op" id="5045862">)</span>&nbsp;<span class="op" id="5045864">{</span>&nbsp;<span class="ident" id="5045866"><a href="/testing/testing.go.html#5045828">c</a></span><span class="op" id="5045867">.</span><span class="ident" id="5045868">log</span><span class="op" id="5045871">(</span><span class="ident" id="5045872"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5045875">.</span><span class="ident" id="5045876">Sprintln</span><span class="op" id="5045884">(</span><span class="ident" id="5045885"><a href="/testing/testing.go.html#5045843">args</a></span><span class="op" id="5045889">...</span><span class="op" id="5045892">)</span><span class="op" id="5045893">)</span>&nbsp;<span class="op" id="5045895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5045898">//&nbsp;Logf&nbsp;formats&nbsp;its&nbsp;arguments&nbsp;according&nbsp;to&nbsp;the&nbsp;format,&nbsp;analogous&nbsp;to&nbsp;Printf,</span><br>
<span class="lineno">345</span><span class="comment" id="5045974">//&nbsp;and&nbsp;records&nbsp;the&nbsp;text&nbsp;in&nbsp;the&nbsp;error&nbsp;log.&nbsp;The&nbsp;text&nbsp;will&nbsp;be&nbsp;printed&nbsp;only&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5046049">//&nbsp;the&nbsp;test&nbsp;fails&nbsp;or&nbsp;the&nbsp;-test.v&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="5046095">func</span>&nbsp;<span class="op" id="5046100">(</span><span class="ident" id="5046101">c</span>&nbsp;<span class="op" id="5046103">*</span><span class="ident" id="5046104"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5046110">)</span>&nbsp;<span class="ident" id="5046112">Logf</span><span class="op" id="5046116">(</span><span class="ident" id="5046117">format</span>&nbsp;<span class="builtintype" id="5046124">string</span><span class="op" id="5046130">,</span>&nbsp;<span class="ident" id="5046132">args</span>&nbsp;<span class="op" id="5046137">...</span><span class="keyword" id="5046140">interface</span><span class="op" id="5046149">{</span><span class="op" id="5046150">}</span><span class="op" id="5046151">)</span>&nbsp;<span class="op" id="5046153">{</span>&nbsp;<span class="ident" id="5046155"><a href="/testing/testing.go.html#5046101">c</a></span><span class="op" id="5046156">.</span><span class="ident" id="5046157">log</span><span class="op" id="5046160">(</span><span class="ident" id="5046161"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5046164">.</span><span class="ident" id="5046165">Sprintf</span><span class="op" id="5046172">(</span><span class="ident" id="5046173"><a href="/testing/testing.go.html#5046117">format</a></span><span class="op" id="5046179">,</span>&nbsp;<span class="ident" id="5046181"><a href="/testing/testing.go.html#5046132">args</a></span><span class="op" id="5046185">...</span><span class="op" id="5046188">)</span><span class="op" id="5046189">)</span>&nbsp;<span class="op" id="5046191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5046194">//&nbsp;Error&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;Fail.</span><br>
<span class="lineno">350</span><span class="keyword" id="5046242">func</span>&nbsp;<span class="op" id="5046247">(</span><span class="ident" id="5046248">c</span>&nbsp;<span class="op" id="5046250">*</span><span class="ident" id="5046251"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5046257">)</span>&nbsp;<span class="ident" id="5046259">Error</span><span class="op" id="5046264">(</span><span class="ident" id="5046265">args</span>&nbsp;<span class="op" id="5046270">...</span><span class="keyword" id="5046273">interface</span><span class="op" id="5046282">{</span><span class="op" id="5046283">}</span><span class="op" id="5046284">)</span>&nbsp;<span class="op" id="5046286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046289"><a href="/testing/testing.go.html#5046248">c</a></span><span class="op" id="5046290">.</span><span class="ident" id="5046291">log</span><span class="op" id="5046294">(</span><span class="ident" id="5046295"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5046298">.</span><span class="ident" id="5046299">Sprintln</span><span class="op" id="5046307">(</span><span class="ident" id="5046308"><a href="/testing/testing.go.html#5046265">args</a></span><span class="op" id="5046312">...</span><span class="op" id="5046315">)</span><span class="op" id="5046316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046319"><a href="/testing/testing.go.html#5046248">c</a></span><span class="op" id="5046320">.</span><span class="ident" id="5046321">Fail</span><span class="op" id="5046325">(</span><span class="op" id="5046326">)</span><br>
<span class="lineno"></span><span class="op" id="5046328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="5046331">//&nbsp;Errorf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;Fail.</span><br>
<span class="lineno"></span><span class="keyword" id="5046381">func</span>&nbsp;<span class="op" id="5046386">(</span><span class="ident" id="5046387">c</span>&nbsp;<span class="op" id="5046389">*</span><span class="ident" id="5046390"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5046396">)</span>&nbsp;<span class="ident" id="5046398">Errorf</span><span class="op" id="5046404">(</span><span class="ident" id="5046405">format</span>&nbsp;<span class="builtintype" id="5046412">string</span><span class="op" id="5046418">,</span>&nbsp;<span class="ident" id="5046420">args</span>&nbsp;<span class="op" id="5046425">...</span><span class="keyword" id="5046428">interface</span><span class="op" id="5046437">{</span><span class="op" id="5046438">}</span><span class="op" id="5046439">)</span>&nbsp;<span class="op" id="5046441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046444"><a href="/testing/testing.go.html#5046387">c</a></span><span class="op" id="5046445">.</span><span class="ident" id="5046446">log</span><span class="op" id="5046449">(</span><span class="ident" id="5046450"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5046453">.</span><span class="ident" id="5046454">Sprintf</span><span class="op" id="5046461">(</span><span class="ident" id="5046462"><a href="/testing/testing.go.html#5046405">format</a></span><span class="op" id="5046468">,</span>&nbsp;<span class="ident" id="5046470"><a href="/testing/testing.go.html#5046420">args</a></span><span class="op" id="5046474">...</span><span class="op" id="5046477">)</span><span class="op" id="5046478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046481"><a href="/testing/testing.go.html#5046387">c</a></span><span class="op" id="5046482">.</span><span class="ident" id="5046483">Fail</span><span class="op" id="5046487">(</span><span class="op" id="5046488">)</span><br>
<span class="lineno"></span><span class="op" id="5046490">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="5046493">//&nbsp;Fatal&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="keyword" id="5046544">func</span>&nbsp;<span class="op" id="5046549">(</span><span class="ident" id="5046550">c</span>&nbsp;<span class="op" id="5046552">*</span><span class="ident" id="5046553"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5046559">)</span>&nbsp;<span class="ident" id="5046561">Fatal</span><span class="op" id="5046566">(</span><span class="ident" id="5046567">args</span>&nbsp;<span class="op" id="5046572">...</span><span class="keyword" id="5046575">interface</span><span class="op" id="5046584">{</span><span class="op" id="5046585">}</span><span class="op" id="5046586">)</span>&nbsp;<span class="op" id="5046588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046591"><a href="/testing/testing.go.html#5046550">c</a></span><span class="op" id="5046592">.</span><span class="ident" id="5046593">log</span><span class="op" id="5046596">(</span><span class="ident" id="5046597"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5046600">.</span><span class="ident" id="5046601">Sprintln</span><span class="op" id="5046609">(</span><span class="ident" id="5046610"><a href="/testing/testing.go.html#5046567">args</a></span><span class="op" id="5046614">...</span><span class="op" id="5046617">)</span><span class="op" id="5046618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046621"><a href="/testing/testing.go.html#5046550">c</a></span><span class="op" id="5046622">.</span><span class="ident" id="5046623">FailNow</span><span class="op" id="5046630">(</span><span class="op" id="5046631">)</span><br>
<span class="lineno">365</span><span class="op" id="5046633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5046636">//&nbsp;Fatalf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="keyword" id="5046689">func</span>&nbsp;<span class="op" id="5046694">(</span><span class="ident" id="5046695">c</span>&nbsp;<span class="op" id="5046697">*</span><span class="ident" id="5046698"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5046704">)</span>&nbsp;<span class="ident" id="5046706">Fatalf</span><span class="op" id="5046712">(</span><span class="ident" id="5046713">format</span>&nbsp;<span class="builtintype" id="5046720">string</span><span class="op" id="5046726">,</span>&nbsp;<span class="ident" id="5046728">args</span>&nbsp;<span class="op" id="5046733">...</span><span class="keyword" id="5046736">interface</span><span class="op" id="5046745">{</span><span class="op" id="5046746">}</span><span class="op" id="5046747">)</span>&nbsp;<span class="op" id="5046749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046752"><a href="/testing/testing.go.html#5046695">c</a></span><span class="op" id="5046753">.</span><span class="ident" id="5046754">log</span><span class="op" id="5046757">(</span><span class="ident" id="5046758"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5046761">.</span><span class="ident" id="5046762">Sprintf</span><span class="op" id="5046769">(</span><span class="ident" id="5046770"><a href="/testing/testing.go.html#5046713">format</a></span><span class="op" id="5046776">,</span>&nbsp;<span class="ident" id="5046778"><a href="/testing/testing.go.html#5046728">args</a></span><span class="op" id="5046782">...</span><span class="op" id="5046785">)</span><span class="op" id="5046786">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046789"><a href="/testing/testing.go.html#5046695">c</a></span><span class="op" id="5046790">.</span><span class="ident" id="5046791">FailNow</span><span class="op" id="5046798">(</span><span class="op" id="5046799">)</span><br>
<span class="lineno"></span><span class="op" id="5046801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5046804">//&nbsp;Skip&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Log&nbsp;followed&nbsp;by&nbsp;SkipNow.</span><br>
<span class="lineno"></span><span class="keyword" id="5046854">func</span>&nbsp;<span class="op" id="5046859">(</span><span class="ident" id="5046860">c</span>&nbsp;<span class="op" id="5046862">*</span><span class="ident" id="5046863"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5046869">)</span>&nbsp;<span class="ident" id="5046871">Skip</span><span class="op" id="5046875">(</span><span class="ident" id="5046876">args</span>&nbsp;<span class="op" id="5046881">...</span><span class="keyword" id="5046884">interface</span><span class="op" id="5046893">{</span><span class="op" id="5046894">}</span><span class="op" id="5046895">)</span>&nbsp;<span class="op" id="5046897">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046900"><a href="/testing/testing.go.html#5046860">c</a></span><span class="op" id="5046901">.</span><span class="ident" id="5046902">log</span><span class="op" id="5046905">(</span><span class="ident" id="5046906"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5046909">.</span><span class="ident" id="5046910">Sprintln</span><span class="op" id="5046918">(</span><span class="ident" id="5046919"><a href="/testing/testing.go.html#5046876">args</a></span><span class="op" id="5046923">...</span><span class="op" id="5046926">)</span><span class="op" id="5046927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5046930"><a href="/testing/testing.go.html#5046860">c</a></span><span class="op" id="5046931">.</span><span class="ident" id="5046932">SkipNow</span><span class="op" id="5046939">(</span><span class="op" id="5046940">)</span><br>
<span class="lineno"></span><span class="op" id="5046942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5046945">//&nbsp;Skipf&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Logf&nbsp;followed&nbsp;by&nbsp;SkipNow.</span><br>
<span class="lineno">380</span><span class="keyword" id="5046997">func</span>&nbsp;<span class="op" id="5047002">(</span><span class="ident" id="5047003">c</span>&nbsp;<span class="op" id="5047005">*</span><span class="ident" id="5047006"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5047012">)</span>&nbsp;<span class="ident" id="5047014">Skipf</span><span class="op" id="5047019">(</span><span class="ident" id="5047020">format</span>&nbsp;<span class="builtintype" id="5047027">string</span><span class="op" id="5047033">,</span>&nbsp;<span class="ident" id="5047035">args</span>&nbsp;<span class="op" id="5047040">...</span><span class="keyword" id="5047043">interface</span><span class="op" id="5047052">{</span><span class="op" id="5047053">}</span><span class="op" id="5047054">)</span>&nbsp;<span class="op" id="5047056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047059"><a href="/testing/testing.go.html#5047003">c</a></span><span class="op" id="5047060">.</span><span class="ident" id="5047061">log</span><span class="op" id="5047064">(</span><span class="ident" id="5047065"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5047068">.</span><span class="ident" id="5047069">Sprintf</span><span class="op" id="5047076">(</span><span class="ident" id="5047077"><a href="/testing/testing.go.html#5047020">format</a></span><span class="op" id="5047083">,</span>&nbsp;<span class="ident" id="5047085"><a href="/testing/testing.go.html#5047035">args</a></span><span class="op" id="5047089">...</span><span class="op" id="5047092">)</span><span class="op" id="5047093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047096"><a href="/testing/testing.go.html#5047003">c</a></span><span class="op" id="5047097">.</span><span class="ident" id="5047098">SkipNow</span><span class="op" id="5047105">(</span><span class="op" id="5047106">)</span><br>
<span class="lineno"></span><span class="op" id="5047108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="comment" id="5047111">//&nbsp;SkipNow&nbsp;marks&nbsp;the&nbsp;test&nbsp;as&nbsp;having&nbsp;been&nbsp;skipped&nbsp;and&nbsp;stops&nbsp;its&nbsp;execution.</span><br>
<span class="lineno"></span><span class="comment" id="5047185">//&nbsp;Execution&nbsp;will&nbsp;continue&nbsp;at&nbsp;the&nbsp;next&nbsp;test&nbsp;or&nbsp;benchmark.&nbsp;See&nbsp;also&nbsp;FailNow.</span><br>
<span class="lineno"></span><span class="comment" id="5047261">//&nbsp;SkipNow&nbsp;must&nbsp;be&nbsp;called&nbsp;from&nbsp;the&nbsp;goroutine&nbsp;running&nbsp;the&nbsp;test,&nbsp;not&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5047333">//&nbsp;other&nbsp;goroutines&nbsp;created&nbsp;during&nbsp;the&nbsp;test.&nbsp;Calling&nbsp;SkipNow&nbsp;does&nbsp;not&nbsp;stop</span><br>
<span class="lineno"></span><span class="comment" id="5047408">//&nbsp;those&nbsp;other&nbsp;goroutines.</span><br>
<span class="lineno">390</span><span class="keyword" id="5047435">func</span>&nbsp;<span class="op" id="5047440">(</span><span class="ident" id="5047441">c</span>&nbsp;<span class="op" id="5047443">*</span><span class="ident" id="5047444"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5047450">)</span>&nbsp;<span class="ident" id="5047452">SkipNow</span><span class="op" id="5047459">(</span><span class="op" id="5047460">)</span>&nbsp;<span class="op" id="5047462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047465"><a href="/testing/testing.go.html#5047441">c</a></span><span class="op" id="5047466">.</span><span class="ident" id="5047467">skip</span><span class="op" id="5047471">(</span><span class="op" id="5047472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047475"><a href="/testing/testing.go.html#5047441">c</a></span><span class="op" id="5047476">.</span><span class="ident" id="5047477">finished</span>&nbsp;<span class="op" id="5047486">=</span>&nbsp;<span class="builtintype" id="5047488">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047494"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5047501">.</span><span class="ident" id="5047502">Goexit</span><span class="op" id="5047508">(</span><span class="op" id="5047509">)</span><br>
<span class="lineno"></span><span class="op" id="5047511">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="5047514">func</span>&nbsp;<span class="op" id="5047519">(</span><span class="ident" id="5047520">c</span>&nbsp;<span class="op" id="5047522">*</span><span class="ident" id="5047523"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5047529">)</span>&nbsp;<span class="ident" id="5047531">skip</span><span class="op" id="5047535">(</span><span class="op" id="5047536">)</span>&nbsp;<span class="op" id="5047538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047541"><a href="/testing/testing.go.html#5047520">c</a></span><span class="op" id="5047542">.</span><span class="ident" id="5047543">mu</span><span class="op" id="5047545">.</span><span class="ident" id="5047546">Lock</span><span class="op" id="5047550">(</span><span class="op" id="5047551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5047554">defer</span>&nbsp;<span class="ident" id="5047560"><a href="/testing/testing.go.html#5047520">c</a></span><span class="op" id="5047561">.</span><span class="ident" id="5047562">mu</span><span class="op" id="5047564">.</span><span class="ident" id="5047565">Unlock</span><span class="op" id="5047571">(</span><span class="op" id="5047572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047575"><a href="/testing/testing.go.html#5047520">c</a></span><span class="op" id="5047576">.</span><span class="ident" id="5047577">skipped</span>&nbsp;<span class="op" id="5047585">=</span>&nbsp;<span class="builtintype" id="5047587">true</span><br>
<span class="lineno">400</span><span class="op" id="5047592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5047595">//&nbsp;Skipped&nbsp;reports&nbsp;whether&nbsp;the&nbsp;test&nbsp;was&nbsp;skipped.</span><br>
<span class="lineno"></span><span class="keyword" id="5047644">func</span>&nbsp;<span class="op" id="5047649">(</span><span class="ident" id="5047650">c</span>&nbsp;<span class="op" id="5047652">*</span><span class="ident" id="5047653"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5047659">)</span>&nbsp;<span class="ident" id="5047661">Skipped</span><span class="op" id="5047668">(</span><span class="op" id="5047669">)</span>&nbsp;<span class="builtintype" id="5047671">bool</span>&nbsp;<span class="op" id="5047676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047679"><a href="/testing/testing.go.html#5047650">c</a></span><span class="op" id="5047680">.</span><span class="ident" id="5047681">mu</span><span class="op" id="5047683">.</span><span class="ident" id="5047684">RLock</span><span class="op" id="5047689">(</span><span class="op" id="5047690">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5047693">defer</span>&nbsp;<span class="ident" id="5047699"><a href="/testing/testing.go.html#5047650">c</a></span><span class="op" id="5047700">.</span><span class="ident" id="5047701">mu</span><span class="op" id="5047703">.</span><span class="ident" id="5047704">RUnlock</span><span class="op" id="5047711">(</span><span class="op" id="5047712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5047715">return</span>&nbsp;<span class="ident" id="5047722"><a href="/testing/testing.go.html#5047650">c</a></span><span class="op" id="5047723">.</span><span class="ident" id="5047724">skipped</span><br>
<span class="lineno"></span><span class="op" id="5047732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5047735">//&nbsp;Parallel&nbsp;signals&nbsp;that&nbsp;this&nbsp;test&nbsp;is&nbsp;to&nbsp;be&nbsp;run&nbsp;in&nbsp;parallel&nbsp;with&nbsp;(and&nbsp;only&nbsp;with)</span><br>
<span class="lineno">410</span><span class="comment" id="5047816">//&nbsp;other&nbsp;parallel&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="5047841">func</span>&nbsp;<span class="op" id="5047846">(</span><span class="ident" id="5047847">t</span>&nbsp;<span class="op" id="5047849">*</span><span class="ident" id="5047850"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5047851">)</span>&nbsp;<span class="ident" id="5047853">Parallel</span><span class="op" id="5047861">(</span><span class="op" id="5047862">)</span>&nbsp;<span class="op" id="5047864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5047867"><a href="/testing/testing.go.html#5047847">t</a></span><span class="op" id="5047868">.</span><span class="ident" id="5047869">signal</span>&nbsp;<span class="op" id="5047876">&lt;-</span>&nbsp;<span class="op" id="5047879">(</span><span class="op" id="5047880">*</span><span class="ident" id="5047881"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5047882">)</span><span class="op" id="5047883">(</span><span class="ident" id="5047884">nil</span><span class="op" id="5047887">)</span>&nbsp;<span class="comment" id="5047889">//&nbsp;Release&nbsp;main&nbsp;testing&nbsp;loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5047919">&lt;-</span><span class="ident" id="5047921"><a href="/testing/testing.go.html#5047847">t</a></span><span class="op" id="5047922">.</span><span class="ident" id="5047923">startParallel</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5047941">//&nbsp;Wait&nbsp;for&nbsp;serial&nbsp;tests&nbsp;to&nbsp;finish</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5047977">//&nbsp;Assuming&nbsp;Parallel&nbsp;is&nbsp;the&nbsp;first&nbsp;thing&nbsp;a&nbsp;test&nbsp;does,&nbsp;which&nbsp;is&nbsp;reasonable,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5048052">//&nbsp;reinitialize&nbsp;the&nbsp;test&#39;s&nbsp;start&nbsp;time&nbsp;because&nbsp;it&#39;s&nbsp;actually&nbsp;starting&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048127"><a href="/testing/testing.go.html#5047847">t</a></span><span class="op" id="5048128">.</span><span class="ident" id="5048129">start</span>&nbsp;<span class="op" id="5048135">=</span>&nbsp;<span class="ident" id="5048137"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5048141">.</span><span class="ident" id="5048142">Now</span><span class="op" id="5048145">(</span><span class="op" id="5048146">)</span><br>
<span class="lineno"></span><span class="op" id="5048148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5048151">//&nbsp;An&nbsp;internal&nbsp;type&nbsp;but&nbsp;exported&nbsp;because&nbsp;it&nbsp;is&nbsp;cross-package;&nbsp;part&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">420</span><span class="comment" id="5048240">//&nbsp;of&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5048269">type</span>&nbsp;<span class="ident" id="5048274">InternalTest</span>&nbsp;<span class="keyword" id="5048287">struct</span>&nbsp;<span class="op" id="5048294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048297">Name</span>&nbsp;<span class="builtintype" id="5048302">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048310">F</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5048315">func</span><span class="op" id="5048319">(</span><span class="op" id="5048320">*</span><span class="ident" id="5048321"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5048322">)</span><br>
<span class="lineno"></span><span class="op" id="5048324">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span><span class="keyword" id="5048327">func</span>&nbsp;<span class="ident" id="5048332">tRunner</span><span class="op" id="5048339">(</span><span class="ident" id="5048340">t</span>&nbsp;<span class="op" id="5048342">*</span><span class="ident" id="5048343"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5048344">,</span>&nbsp;<span class="ident" id="5048346">test</span>&nbsp;<span class="op" id="5048351">*</span><span class="ident" id="5048352"><a href="/testing/testing.go.html#5048274">InternalTest</a></span><span class="op" id="5048364">)</span>&nbsp;<span class="op" id="5048366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5048369">//&nbsp;When&nbsp;this&nbsp;goroutine&nbsp;is&nbsp;done,&nbsp;either&nbsp;because&nbsp;test.F(t)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5048427">//&nbsp;returned&nbsp;normally&nbsp;or&nbsp;because&nbsp;a&nbsp;test&nbsp;failure&nbsp;triggered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5048485">//&nbsp;a&nbsp;call&nbsp;to&nbsp;runtime.Goexit,&nbsp;record&nbsp;the&nbsp;duration&nbsp;and&nbsp;send</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5048544">//&nbsp;a&nbsp;signal&nbsp;saying&nbsp;that&nbsp;the&nbsp;test&nbsp;is&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5048587">defer</span>&nbsp;<span class="keyword" id="5048593">func</span><span class="op" id="5048597">(</span><span class="op" id="5048598">)</span>&nbsp;<span class="op" id="5048600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048604"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048605">.</span><span class="ident" id="5048606">duration</span>&nbsp;<span class="op" id="5048615">=</span>&nbsp;<span class="ident" id="5048617"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5048621">.</span><span class="ident" id="5048622">Now</span><span class="op" id="5048625">(</span><span class="op" id="5048626">)</span><span class="op" id="5048627">.</span><span class="ident" id="5048628">Sub</span><span class="op" id="5048631">(</span><span class="ident" id="5048632"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048633">.</span><span class="ident" id="5048634">start</span><span class="op" id="5048639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5048643">//&nbsp;If&nbsp;the&nbsp;test&nbsp;panicked,&nbsp;print&nbsp;any&nbsp;test&nbsp;output&nbsp;before&nbsp;dying.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048706">err</span>&nbsp;<span class="op" id="5048710">:=</span>&nbsp;<span class="builtinfunc" id="5048713">recover</span><span class="op" id="5048720">(</span><span class="op" id="5048721">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5048725">if</span>&nbsp;<span class="op" id="5048728">!</span><span class="ident" id="5048729"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048730">.</span><span class="ident" id="5048731">finished</span>&nbsp;<span class="op" id="5048740">&amp;&amp;</span>&nbsp;<span class="ident" id="5048743"><a href="/testing/testing.go.html#5048706">err</a></span>&nbsp;<span class="op" id="5048747">==</span>&nbsp;<span class="ident" id="5048750">nil</span>&nbsp;<span class="op" id="5048754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048759"><a href="/testing/testing.go.html#5048706">err</a></span>&nbsp;<span class="op" id="5048763">=</span>&nbsp;<span class="ident" id="5048765"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5048768">.</span><span class="ident" id="5048769">Errorf</span><span class="op" id="5048775">(</span><span class="string" id="5048776">&#34;test&nbsp;executed&nbsp;panic(nil)&nbsp;or&nbsp;runtime.Goexit&#34;</span><span class="op" id="5048820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5048824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5048828">if</span>&nbsp;<span class="ident" id="5048831"><a href="/testing/testing.go.html#5048706">err</a></span>&nbsp;<span class="op" id="5048835">!=</span>&nbsp;<span class="ident" id="5048838">nil</span>&nbsp;<span class="op" id="5048842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048847"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048848">.</span><span class="ident" id="5048849">Fail</span><span class="op" id="5048853">(</span><span class="op" id="5048854">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048859"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048860">.</span><span class="ident" id="5048861">report</span><span class="op" id="5048867">(</span><span class="op" id="5048868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5048873">panic</span><span class="op" id="5048878">(</span><span class="ident" id="5048879"><a href="/testing/testing.go.html#5048706">err</a></span><span class="op" id="5048882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5048886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048890"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048891">.</span><span class="ident" id="5048892">signal</span>&nbsp;<span class="op" id="5048899">&lt;-</span>&nbsp;<span class="ident" id="5048902"><a href="/testing/testing.go.html#5048340">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5048905">}</span><span class="op" id="5048906">(</span><span class="op" id="5048907">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048911"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048912">.</span><span class="ident" id="5048913">start</span>&nbsp;<span class="op" id="5048919">=</span>&nbsp;<span class="ident" id="5048921"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5048925">.</span><span class="ident" id="5048926">Now</span><span class="op" id="5048929">(</span><span class="op" id="5048930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048933"><a href="/testing/testing.go.html#5048346">test</a></span><span class="op" id="5048937">.</span><span class="ident" id="5048938">F</span><span class="op" id="5048939">(</span><span class="ident" id="5048940"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5048944"><a href="/testing/testing.go.html#5048340">t</a></span><span class="op" id="5048945">.</span><span class="ident" id="5048946">finished</span>&nbsp;<span class="op" id="5048955">=</span>&nbsp;<span class="builtintype" id="5048957">true</span><br>
<span class="lineno"></span><span class="op" id="5048962">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="5048965">//&nbsp;An&nbsp;internal&nbsp;function&nbsp;but&nbsp;exported&nbsp;because&nbsp;it&nbsp;is&nbsp;cross-package;&nbsp;part&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="5049058">//&nbsp;of&nbsp;the&nbsp;&#34;go&nbsp;test&#34;&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="5049087">func</span>&nbsp;<span class="ident" id="5049092">Main</span><span class="op" id="5049096">(</span><span class="ident" id="5049097">matchString</span>&nbsp;<span class="keyword" id="5049109">func</span><span class="op" id="5049113">(</span><span class="ident" id="5049114">pat</span><span class="op" id="5049117">,</span>&nbsp;<span class="ident" id="5049119">str</span>&nbsp;<span class="builtintype" id="5049123">string</span><span class="op" id="5049129">)</span>&nbsp;<span class="op" id="5049131">(</span><span class="builtintype" id="5049132">bool</span><span class="op" id="5049136">,</span>&nbsp;<span class="builtintype" id="5049138">error</span><span class="op" id="5049143">)</span><span class="op" id="5049144">,</span>&nbsp;<span class="ident" id="5049146">tests</span>&nbsp;<span class="op" id="5049152">[</span><span class="op" id="5049153">]</span><span class="ident" id="5049154"><a href="/testing/testing.go.html#5048274">InternalTest</a></span><span class="op" id="5049166">,</span>&nbsp;<span class="ident" id="5049168">benchmarks</span>&nbsp;<span class="op" id="5049179">[</span><span class="op" id="5049180">]</span><span class="ident" id="5049181"><a href="/testing/benchmark.go.html#5017071">InternalBenchmark</a></span><span class="op" id="5049198">,</span>&nbsp;<span class="ident" id="5049200">examples</span>&nbsp;<span class="op" id="5049209">[</span><span class="op" id="5049210">]</span><span class="ident" id="5049211"><a href="/testing/example.go.html#5031870">InternalExample</a></span><span class="op" id="5049226">)</span>&nbsp;<span class="op" id="5049228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049231"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5049233">.</span><span class="ident" id="5049234">Exit</span><span class="op" id="5049238">(</span><span class="ident" id="5049239"><a href="/testing/testing.go.html#5049747">MainStart</a></span><span class="op" id="5049248">(</span><span class="ident" id="5049249"><a href="/testing/testing.go.html#5049097">matchString</a></span><span class="op" id="5049260">,</span>&nbsp;<span class="ident" id="5049262"><a href="/testing/testing.go.html#5049146">tests</a></span><span class="op" id="5049267">,</span>&nbsp;<span class="ident" id="5049269"><a href="/testing/testing.go.html#5049168">benchmarks</a></span><span class="op" id="5049279">,</span>&nbsp;<span class="ident" id="5049281"><a href="/testing/testing.go.html#5049200">examples</a></span><span class="op" id="5049289">)</span><span class="op" id="5049290">.</span><span class="ident" id="5049291">Run</span><span class="op" id="5049294">(</span><span class="op" id="5049295">)</span><span class="op" id="5049296">)</span><br>
<span class="lineno">455</span><span class="op" id="5049298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5049301">//&nbsp;M&nbsp;is&nbsp;a&nbsp;type&nbsp;passed&nbsp;to&nbsp;a&nbsp;TestMain&nbsp;function&nbsp;to&nbsp;run&nbsp;the&nbsp;actual&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="5049371">type</span>&nbsp;<span class="ident" id="5049376">M</span>&nbsp;<span class="keyword" id="5049378">struct</span>&nbsp;<span class="op" id="5049385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049388">matchString</span>&nbsp;<span class="keyword" id="5049400">func</span><span class="op" id="5049404">(</span><span class="ident" id="5049405">pat</span><span class="op" id="5049408">,</span>&nbsp;<span class="ident" id="5049410">str</span>&nbsp;<span class="builtintype" id="5049414">string</span><span class="op" id="5049420">)</span>&nbsp;<span class="op" id="5049422">(</span><span class="builtintype" id="5049423">bool</span><span class="op" id="5049427">,</span>&nbsp;<span class="builtintype" id="5049429">error</span><span class="op" id="5049434">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049437">tests</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5049449">[</span><span class="op" id="5049450">]</span><span class="ident" id="5049451"><a href="/testing/testing.go.html#5048274">InternalTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049465">benchmarks</span>&nbsp;&nbsp;<span class="op" id="5049477">[</span><span class="op" id="5049478">]</span><span class="ident" id="5049479"><a href="/testing/benchmark.go.html#5017071">InternalBenchmark</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049498">examples</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5049510">[</span><span class="op" id="5049511">]</span><span class="ident" id="5049512"><a href="/testing/example.go.html#5031870">InternalExample</a></span><br>
<span class="lineno"></span><span class="op" id="5049528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span><span class="comment" id="5049531">//&nbsp;MainStart&nbsp;is&nbsp;meant&nbsp;for&nbsp;use&nbsp;by&nbsp;tests&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5049594">//&nbsp;It&nbsp;is&nbsp;not&nbsp;meant&nbsp;to&nbsp;be&nbsp;called&nbsp;directly&nbsp;and&nbsp;is&nbsp;not&nbsp;subject&nbsp;to&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;document.</span><br>
<span class="lineno"></span><span class="comment" id="5049690">//&nbsp;It&nbsp;may&nbsp;change&nbsp;signature&nbsp;from&nbsp;release&nbsp;to&nbsp;release.</span><br>
<span class="lineno"></span><span class="keyword" id="5049742">func</span>&nbsp;<span class="ident" id="5049747">MainStart</span><span class="op" id="5049756">(</span><span class="ident" id="5049757">matchString</span>&nbsp;<span class="keyword" id="5049769">func</span><span class="op" id="5049773">(</span><span class="ident" id="5049774">pat</span><span class="op" id="5049777">,</span>&nbsp;<span class="ident" id="5049779">str</span>&nbsp;<span class="builtintype" id="5049783">string</span><span class="op" id="5049789">)</span>&nbsp;<span class="op" id="5049791">(</span><span class="builtintype" id="5049792">bool</span><span class="op" id="5049796">,</span>&nbsp;<span class="builtintype" id="5049798">error</span><span class="op" id="5049803">)</span><span class="op" id="5049804">,</span>&nbsp;<span class="ident" id="5049806">tests</span>&nbsp;<span class="op" id="5049812">[</span><span class="op" id="5049813">]</span><span class="ident" id="5049814"><a href="/testing/testing.go.html#5048274">InternalTest</a></span><span class="op" id="5049826">,</span>&nbsp;<span class="ident" id="5049828">benchmarks</span>&nbsp;<span class="op" id="5049839">[</span><span class="op" id="5049840">]</span><span class="ident" id="5049841"><a href="/testing/benchmark.go.html#5017071">InternalBenchmark</a></span><span class="op" id="5049858">,</span>&nbsp;<span class="ident" id="5049860">examples</span>&nbsp;<span class="op" id="5049869">[</span><span class="op" id="5049870">]</span><span class="ident" id="5049871"><a href="/testing/example.go.html#5031870">InternalExample</a></span><span class="op" id="5049886">)</span>&nbsp;<span class="op" id="5049888">*</span><span class="ident" id="5049889"><a href="/testing/testing.go.html#5049376">M</a></span>&nbsp;<span class="op" id="5049891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5049894">return</span>&nbsp;<span class="op" id="5049901">&amp;</span><span class="ident" id="5049902"><a href="/testing/testing.go.html#5049376">M</a></span><span class="op" id="5049903">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049907">matchString</span><span class="op" id="5049918">:</span>&nbsp;<span class="ident" id="5049920"><a href="/testing/testing.go.html#5049757">matchString</a></span><span class="op" id="5049931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049935">tests</span><span class="op" id="5049940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5049948"><a href="/testing/testing.go.html#5049806">tests</a></span><span class="op" id="5049953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049957">benchmarks</span><span class="op" id="5049967">:</span>&nbsp;&nbsp;<span class="ident" id="5049970"><a href="/testing/testing.go.html#5049828">benchmarks</a></span><span class="op" id="5049980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5049984">examples</span><span class="op" id="5049992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5049997"><a href="/testing/testing.go.html#5049860">examples</a></span><span class="op" id="5050005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5050008">}</span><br>
<span class="lineno">475</span><span class="op" id="5050010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5050013">//&nbsp;Run&nbsp;runs&nbsp;the&nbsp;tests.&nbsp;It&nbsp;returns&nbsp;an&nbsp;exit&nbsp;code&nbsp;to&nbsp;pass&nbsp;to&nbsp;os.Exit.</span><br>
<span class="lineno"></span><span class="keyword" id="5050080">func</span>&nbsp;<span class="op" id="5050085">(</span><span class="ident" id="5050086">m</span>&nbsp;<span class="op" id="5050088">*</span><span class="ident" id="5050089"><a href="/testing/testing.go.html#5049376">M</a></span><span class="op" id="5050090">)</span>&nbsp;<span class="ident" id="5050092">Run</span><span class="op" id="5050095">(</span><span class="op" id="5050096">)</span>&nbsp;<span class="builtintype" id="5050098">int</span>&nbsp;<span class="op" id="5050102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050105"><a href="/testing/testing.go.html#5038831">flag</a></span><span class="op" id="5050109">.</span><span class="ident" id="5050110">Parse</span><span class="op" id="5050115">(</span><span class="op" id="5050116">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050119"><a href="/testing/testing.go.html#5055622">parseCpuList</a></span><span class="op" id="5050131">(</span><span class="op" id="5050132">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050136"><a href="/testing/testing.go.html#5052616">before</a></span><span class="op" id="5050142">(</span><span class="op" id="5050143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050146"><a href="/testing/testing.go.html#5055376">startAlarm</a></span><span class="op" id="5050156">(</span><span class="op" id="5050157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050160"><a href="/testing/testing.go.html#5040960">haveExamples</a></span>&nbsp;<span class="op" id="5050173">=</span>&nbsp;<span class="builtinfunc" id="5050175">len</span><span class="op" id="5050178">(</span><span class="ident" id="5050179"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050180">.</span><span class="ident" id="5050181">examples</span><span class="op" id="5050189">)</span>&nbsp;<span class="op" id="5050191">&gt;</span>&nbsp;<span class="num" id="5050193">0</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050196">testOk</span>&nbsp;<span class="op" id="5050203">:=</span>&nbsp;<span class="ident" id="5050206"><a href="/testing/testing.go.html#5050799">RunTests</a></span><span class="op" id="5050214">(</span><span class="ident" id="5050215"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050216">.</span><span class="ident" id="5050217">matchString</span><span class="op" id="5050228">,</span>&nbsp;<span class="ident" id="5050230"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050231">.</span><span class="ident" id="5050232">tests</span><span class="op" id="5050237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050240">exampleOk</span>&nbsp;<span class="op" id="5050250">:=</span>&nbsp;<span class="ident" id="5050253"><a href="/testing/example.go.html#5031948">RunExamples</a></span><span class="op" id="5050264">(</span><span class="ident" id="5050265"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050266">.</span><span class="ident" id="5050267">matchString</span><span class="op" id="5050278">,</span>&nbsp;<span class="ident" id="5050280"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050281">.</span><span class="ident" id="5050282">examples</span><span class="op" id="5050290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050293"><a href="/testing/testing.go.html#5055563">stopAlarm</a></span><span class="op" id="5050302">(</span><span class="op" id="5050303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5050306">if</span>&nbsp;<span class="op" id="5050309">!</span><span class="ident" id="5050310"><a href="/testing/testing.go.html#5050196">testOk</a></span>&nbsp;<span class="op" id="5050317">||</span>&nbsp;<span class="op" id="5050320">!</span><span class="ident" id="5050321"><a href="/testing/testing.go.html#5050240">exampleOk</a></span>&nbsp;<span class="op" id="5050331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050335"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5050338">.</span><span class="ident" id="5050339">Println</span><span class="op" id="5050346">(</span><span class="string" id="5050347">&#34;FAIL&#34;</span><span class="op" id="5050353">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050357"><a href="/testing/testing.go.html#5053400">after</a></span><span class="op" id="5050362">(</span><span class="op" id="5050363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5050367">return</span>&nbsp;<span class="num" id="5050374">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5050377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050380"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5050383">.</span><span class="ident" id="5050384">Println</span><span class="op" id="5050391">(</span><span class="string" id="5050392">&#34;PASS&#34;</span><span class="op" id="5050398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050401"><a href="/testing/benchmark.go.html#5023697">RunBenchmarks</a></span><span class="op" id="5050414">(</span><span class="ident" id="5050415"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050416">.</span><span class="ident" id="5050417">matchString</span><span class="op" id="5050428">,</span>&nbsp;<span class="ident" id="5050430"><a href="/testing/testing.go.html#5050086">m</a></span><span class="op" id="5050431">.</span><span class="ident" id="5050432">benchmarks</span><span class="op" id="5050442">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050445"><a href="/testing/testing.go.html#5053400">after</a></span><span class="op" id="5050450">(</span><span class="op" id="5050451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5050454">return</span>&nbsp;<span class="num" id="5050461">0</span><br>
<span class="lineno"></span><span class="op" id="5050463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5050466">func</span>&nbsp;<span class="op" id="5050471">(</span><span class="ident" id="5050472">t</span>&nbsp;<span class="op" id="5050474">*</span><span class="ident" id="5050475"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5050476">)</span>&nbsp;<span class="ident" id="5050478">report</span><span class="op" id="5050484">(</span><span class="op" id="5050485">)</span>&nbsp;<span class="op" id="5050487">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050490">dstr</span>&nbsp;<span class="op" id="5050495">:=</span>&nbsp;<span class="ident" id="5050498"><a href="/testing/testing.go.html#5042842">fmtDuration</a></span><span class="op" id="5050509">(</span><span class="ident" id="5050510"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050511">.</span><span class="ident" id="5050512">duration</span><span class="op" id="5050520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050523">format</span>&nbsp;<span class="op" id="5050530">:=</span>&nbsp;<span class="string" id="5050533">&#34;---&nbsp;%s:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5050556">if</span>&nbsp;<span class="ident" id="5050559"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050560">.</span><span class="ident" id="5050561">Failed</span><span class="op" id="5050567">(</span><span class="op" id="5050568">)</span>&nbsp;<span class="op" id="5050570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050574"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5050577">.</span><span class="ident" id="5050578">Printf</span><span class="op" id="5050584">(</span><span class="ident" id="5050585"><a href="/testing/testing.go.html#5050523">format</a></span><span class="op" id="5050591">,</span>&nbsp;<span class="string" id="5050593">&#34;FAIL&#34;</span><span class="op" id="5050599">,</span>&nbsp;<span class="ident" id="5050601"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050602">.</span><span class="ident" id="5050603">name</span><span class="op" id="5050607">,</span>&nbsp;<span class="ident" id="5050609"><a href="/testing/testing.go.html#5050490">dstr</a></span><span class="op" id="5050613">,</span>&nbsp;<span class="ident" id="5050615"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050616">.</span><span class="ident" id="5050617">output</span><span class="op" id="5050623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5050626">}</span>&nbsp;<span class="keyword" id="5050628">else</span>&nbsp;<span class="keyword" id="5050633">if</span>&nbsp;<span class="op" id="5050636">*</span><span class="ident" id="5050637"><a href="/testing/testing.go.html#5039775">chatty</a></span>&nbsp;<span class="op" id="5050644">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5050648">if</span>&nbsp;<span class="ident" id="5050651"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050652">.</span><span class="ident" id="5050653">Skipped</span><span class="op" id="5050660">(</span><span class="op" id="5050661">)</span>&nbsp;<span class="op" id="5050663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050668"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5050671">.</span><span class="ident" id="5050672">Printf</span><span class="op" id="5050678">(</span><span class="ident" id="5050679"><a href="/testing/testing.go.html#5050523">format</a></span><span class="op" id="5050685">,</span>&nbsp;<span class="string" id="5050687">&#34;SKIP&#34;</span><span class="op" id="5050693">,</span>&nbsp;<span class="ident" id="5050695"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050696">.</span><span class="ident" id="5050697">name</span><span class="op" id="5050701">,</span>&nbsp;<span class="ident" id="5050703"><a href="/testing/testing.go.html#5050490">dstr</a></span><span class="op" id="5050707">,</span>&nbsp;<span class="ident" id="5050709"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050710">.</span><span class="ident" id="5050711">output</span><span class="op" id="5050717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5050721">}</span>&nbsp;<span class="keyword" id="5050723">else</span>&nbsp;<span class="op" id="5050728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050733"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5050736">.</span><span class="ident" id="5050737">Printf</span><span class="op" id="5050743">(</span><span class="ident" id="5050744"><a href="/testing/testing.go.html#5050523">format</a></span><span class="op" id="5050750">,</span>&nbsp;<span class="string" id="5050752">&#34;PASS&#34;</span><span class="op" id="5050758">,</span>&nbsp;<span class="ident" id="5050760"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050761">.</span><span class="ident" id="5050762">name</span><span class="op" id="5050766">,</span>&nbsp;<span class="ident" id="5050768"><a href="/testing/testing.go.html#5050490">dstr</a></span><span class="op" id="5050772">,</span>&nbsp;<span class="ident" id="5050774"><a href="/testing/testing.go.html#5050472">t</a></span><span class="op" id="5050775">.</span><span class="ident" id="5050776">output</span><span class="op" id="5050782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5050786">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5050789">}</span><br>
<span class="lineno"></span><span class="op" id="5050791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5050794">func</span>&nbsp;<span class="ident" id="5050799">RunTests</span><span class="op" id="5050807">(</span><span class="ident" id="5050808">matchString</span>&nbsp;<span class="keyword" id="5050820">func</span><span class="op" id="5050824">(</span><span class="ident" id="5050825">pat</span><span class="op" id="5050828">,</span>&nbsp;<span class="ident" id="5050830">str</span>&nbsp;<span class="builtintype" id="5050834">string</span><span class="op" id="5050840">)</span>&nbsp;<span class="op" id="5050842">(</span><span class="builtintype" id="5050843">bool</span><span class="op" id="5050847">,</span>&nbsp;<span class="builtintype" id="5050849">error</span><span class="op" id="5050854">)</span><span class="op" id="5050855">,</span>&nbsp;<span class="ident" id="5050857">tests</span>&nbsp;<span class="op" id="5050863">[</span><span class="op" id="5050864">]</span><span class="ident" id="5050865"><a href="/testing/testing.go.html#5048274">InternalTest</a></span><span class="op" id="5050877">)</span>&nbsp;<span class="op" id="5050879">(</span><span class="ident" id="5050880">ok</span>&nbsp;<span class="builtintype" id="5050883">bool</span><span class="op" id="5050887">)</span>&nbsp;<span class="op" id="5050889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050892"><a href="/testing/testing.go.html#5050880">ok</a></span>&nbsp;<span class="op" id="5050895">=</span>&nbsp;<span class="builtintype" id="5050897">true</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5050903">if</span>&nbsp;<span class="builtinfunc" id="5050906">len</span><span class="op" id="5050909">(</span><span class="ident" id="5050910"><a href="/testing/testing.go.html#5050857">tests</a></span><span class="op" id="5050915">)</span>&nbsp;<span class="op" id="5050917">==</span>&nbsp;<span class="num" id="5050920">0</span>&nbsp;<span class="op" id="5050922">&amp;&amp;</span>&nbsp;<span class="op" id="5050925">!</span><span class="ident" id="5050926"><a href="/testing/testing.go.html#5040960">haveExamples</a></span>&nbsp;<span class="op" id="5050939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5050943"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5050946">.</span><span class="ident" id="5050947">Fprintln</span><span class="op" id="5050955">(</span><span class="ident" id="5050956"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5050958">.</span><span class="ident" id="5050959">Stderr</span><span class="op" id="5050965">,</span>&nbsp;<span class="string" id="5050967">&#34;testing:&nbsp;warning:&nbsp;no&nbsp;tests&nbsp;to&nbsp;run&#34;</span><span class="op" id="5051002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051006">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5051014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051017">for</span>&nbsp;<span class="ident" id="5051021">_</span><span class="op" id="5051022">,</span>&nbsp;<span class="ident" id="5051024">procs</span>&nbsp;<span class="op" id="5051030">:=</span>&nbsp;<span class="keyword" id="5051033">range</span>&nbsp;<span class="ident" id="5051039"><a href="/testing/testing.go.html#5041003">cpuList</a></span>&nbsp;<span class="op" id="5051047">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051051"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5051058">.</span><span class="ident" id="5051059">GOMAXPROCS</span><span class="op" id="5051069">(</span><span class="ident" id="5051070"><a href="/testing/testing.go.html#5051024">procs</a></span><span class="op" id="5051075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5051079">//&nbsp;We&nbsp;build&nbsp;a&nbsp;new&nbsp;channel&nbsp;tree&nbsp;for&nbsp;each&nbsp;run&nbsp;of&nbsp;the&nbsp;loop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5051138">//&nbsp;collector&nbsp;merges&nbsp;in&nbsp;one&nbsp;channel&nbsp;all&nbsp;the&nbsp;upstream&nbsp;signals&nbsp;from&nbsp;parallel&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5051221">//&nbsp;If&nbsp;all&nbsp;tests&nbsp;pump&nbsp;to&nbsp;the&nbsp;same&nbsp;channel,&nbsp;a&nbsp;bug&nbsp;can&nbsp;occur&nbsp;where&nbsp;a&nbsp;test</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5051294">//&nbsp;kicks&nbsp;off&nbsp;a&nbsp;goroutine&nbsp;that&nbsp;Fails,&nbsp;yet&nbsp;the&nbsp;test&nbsp;still&nbsp;delivers&nbsp;a&nbsp;completion&nbsp;signal,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5051382">//&nbsp;which&nbsp;skews&nbsp;the&nbsp;counting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051413">var</span>&nbsp;<span class="ident" id="5051417">collector</span>&nbsp;<span class="op" id="5051427">=</span>&nbsp;<span class="builtinfunc" id="5051429">make</span><span class="op" id="5051433">(</span><span class="keyword" id="5051434">chan</span>&nbsp;<span class="keyword" id="5051439">interface</span><span class="op" id="5051448">{</span><span class="op" id="5051449">}</span><span class="op" id="5051450">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051455">numParallel</span>&nbsp;<span class="op" id="5051467">:=</span>&nbsp;<span class="num" id="5051470">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051474">startParallel</span>&nbsp;<span class="op" id="5051488">:=</span>&nbsp;<span class="builtinfunc" id="5051491">make</span><span class="op" id="5051495">(</span><span class="keyword" id="5051496">chan</span>&nbsp;<span class="builtintype" id="5051501">bool</span><span class="op" id="5051505">)</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051510">for</span>&nbsp;<span class="ident" id="5051514">i</span>&nbsp;<span class="op" id="5051516">:=</span>&nbsp;<span class="num" id="5051519">0</span><span class="op" id="5051520">;</span>&nbsp;<span class="ident" id="5051522"><a href="/testing/testing.go.html#5051514">i</a></span>&nbsp;<span class="op" id="5051524">&lt;</span>&nbsp;<span class="builtinfunc" id="5051526">len</span><span class="op" id="5051529">(</span><span class="ident" id="5051530"><a href="/testing/testing.go.html#5050857">tests</a></span><span class="op" id="5051535">)</span><span class="op" id="5051536">;</span>&nbsp;<span class="ident" id="5051538"><a href="/testing/testing.go.html#5051514">i</a></span><span class="op" id="5051539">++</span>&nbsp;<span class="op" id="5051542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051547">matched</span><span class="op" id="5051554">,</span>&nbsp;<span class="ident" id="5051556">err</span>&nbsp;<span class="op" id="5051560">:=</span>&nbsp;<span class="ident" id="5051563"><a href="/testing/testing.go.html#5050808">matchString</a></span><span class="op" id="5051574">(</span><span class="op" id="5051575">*</span><span class="ident" id="5051576"><a href="/testing/testing.go.html#5039977">match</a></span><span class="op" id="5051581">,</span>&nbsp;<span class="ident" id="5051583"><a href="/testing/testing.go.html#5050857">tests</a></span><span class="op" id="5051588">[</span><span class="ident" id="5051589"><a href="/testing/testing.go.html#5051514">i</a></span><span class="op" id="5051590">]</span><span class="op" id="5051591">.</span><span class="ident" id="5051592">Name</span><span class="op" id="5051596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051601">if</span>&nbsp;<span class="ident" id="5051604"><a href="/testing/testing.go.html#5051556">err</a></span>&nbsp;<span class="op" id="5051608">!=</span>&nbsp;<span class="ident" id="5051611">nil</span>&nbsp;<span class="op" id="5051615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051621"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5051624">.</span><span class="ident" id="5051625">Fprintf</span><span class="op" id="5051632">(</span><span class="ident" id="5051633"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5051635">.</span><span class="ident" id="5051636">Stderr</span><span class="op" id="5051642">,</span>&nbsp;<span class="string" id="5051644">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="5051689">,</span>&nbsp;<span class="ident" id="5051691"><a href="/testing/testing.go.html#5051556">err</a></span><span class="op" id="5051694">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051700"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5051702">.</span><span class="ident" id="5051703">Exit</span><span class="op" id="5051707">(</span><span class="num" id="5051708">1</span><span class="op" id="5051709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5051714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051719">if</span>&nbsp;<span class="op" id="5051722">!</span><span class="ident" id="5051723"><a href="/testing/testing.go.html#5051547">matched</a></span>&nbsp;<span class="op" id="5051731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051737">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5051749">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051754">testName</span>&nbsp;<span class="op" id="5051763">:=</span>&nbsp;<span class="ident" id="5051766"><a href="/testing/testing.go.html#5050857">tests</a></span><span class="op" id="5051771">[</span><span class="ident" id="5051772"><a href="/testing/testing.go.html#5051514">i</a></span><span class="op" id="5051773">]</span><span class="op" id="5051774">.</span><span class="ident" id="5051775">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5051783">if</span>&nbsp;<span class="ident" id="5051786"><a href="/testing/testing.go.html#5051024">procs</a></span>&nbsp;<span class="op" id="5051792">!=</span>&nbsp;<span class="num" id="5051795">1</span>&nbsp;<span class="op" id="5051797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051803"><a href="/testing/testing.go.html#5051754">testName</a></span>&nbsp;<span class="op" id="5051812">=</span>&nbsp;<span class="ident" id="5051814"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5051817">.</span><span class="ident" id="5051818">Sprintf</span><span class="op" id="5051825">(</span><span class="string" id="5051826">&#34;%s-%d&#34;</span><span class="op" id="5051833">,</span>&nbsp;<span class="ident" id="5051835"><a href="/testing/testing.go.html#5050857">tests</a></span><span class="op" id="5051840">[</span><span class="ident" id="5051841"><a href="/testing/testing.go.html#5051514">i</a></span><span class="op" id="5051842">]</span><span class="op" id="5051843">.</span><span class="ident" id="5051844">Name</span><span class="op" id="5051848">,</span>&nbsp;<span class="ident" id="5051850"><a href="/testing/testing.go.html#5051024">procs</a></span><span class="op" id="5051855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5051860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051865">t</span>&nbsp;<span class="op" id="5051867">:=</span>&nbsp;<span class="op" id="5051870">&amp;</span><span class="ident" id="5051871"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5051872">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051878">common</span><span class="op" id="5051884">:</span>&nbsp;<span class="ident" id="5051886"><a href="/testing/testing.go.html#5041124">common</a></span><span class="op" id="5051892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051899">signal</span><span class="op" id="5051905">:</span>&nbsp;<span class="builtinfunc" id="5051907">make</span><span class="op" id="5051911">(</span><span class="keyword" id="5051912">chan</span>&nbsp;<span class="keyword" id="5051917">interface</span><span class="op" id="5051926">{</span><span class="op" id="5051927">}</span><span class="op" id="5051928">)</span><span class="op" id="5051929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5051935">}</span><span class="op" id="5051936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051942">name</span><span class="op" id="5051946">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5051957"><a href="/testing/testing.go.html#5051754">testName</a></span><span class="op" id="5051965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5051971">startParallel</span><span class="op" id="5051984">:</span>&nbsp;<span class="ident" id="5051986"><a href="/testing/testing.go.html#5051474">startParallel</a></span><span class="op" id="5051999">,</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052009"><a href="/testing/testing.go.html#5051865">t</a></span><span class="op" id="5052010">.</span><span class="ident" id="5052011">self</span>&nbsp;<span class="op" id="5052016">=</span>&nbsp;<span class="ident" id="5052018"><a href="/testing/testing.go.html#5051865">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052023">if</span>&nbsp;<span class="op" id="5052026">*</span><span class="ident" id="5052027"><a href="/testing/testing.go.html#5039775">chatty</a></span>&nbsp;<span class="op" id="5052034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052040"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5052043">.</span><span class="ident" id="5052044">Printf</span><span class="op" id="5052050">(</span><span class="string" id="5052051">&#34;===&nbsp;RUN&nbsp;%s\n&#34;</span><span class="op" id="5052065">,</span>&nbsp;<span class="ident" id="5052067"><a href="/testing/testing.go.html#5051865">t</a></span><span class="op" id="5052068">.</span><span class="ident" id="5052069">name</span><span class="op" id="5052073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052078">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052083">go</span>&nbsp;<span class="ident" id="5052086"><a href="/testing/testing.go.html#5048332">tRunner</a></span><span class="op" id="5052093">(</span><span class="ident" id="5052094"><a href="/testing/testing.go.html#5051865">t</a></span><span class="op" id="5052095">,</span>&nbsp;<span class="op" id="5052097">&amp;</span><span class="ident" id="5052098"><a href="/testing/testing.go.html#5050857">tests</a></span><span class="op" id="5052103">[</span><span class="ident" id="5052104"><a href="/testing/testing.go.html#5051514">i</a></span><span class="op" id="5052105">]</span><span class="op" id="5052106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052111">out</span>&nbsp;<span class="op" id="5052115">:=</span>&nbsp;<span class="op" id="5052118">(</span><span class="op" id="5052119">&lt;-</span><span class="ident" id="5052121"><a href="/testing/testing.go.html#5051865">t</a></span><span class="op" id="5052122">.</span><span class="ident" id="5052123">signal</span><span class="op" id="5052129">)</span><span class="op" id="5052130">.</span><span class="op" id="5052131">(</span><span class="op" id="5052132">*</span><span class="ident" id="5052133"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5052134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052139">if</span>&nbsp;<span class="ident" id="5052142"><a href="/testing/testing.go.html#5052111">out</a></span>&nbsp;<span class="op" id="5052146">==</span>&nbsp;<span class="ident" id="5052149">nil</span>&nbsp;<span class="op" id="5052153">{</span>&nbsp;<span class="comment" id="5052155">//&nbsp;Parallel&nbsp;run.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052176">go</span>&nbsp;<span class="keyword" id="5052179">func</span><span class="op" id="5052183">(</span><span class="op" id="5052184">)</span>&nbsp;<span class="op" id="5052186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052193"><a href="/testing/testing.go.html#5051417">collector</a></span>&nbsp;<span class="op" id="5052203">&lt;-</span>&nbsp;<span class="op" id="5052206">&lt;-</span><span class="ident" id="5052208"><a href="/testing/testing.go.html#5051865">t</a></span><span class="op" id="5052209">.</span><span class="ident" id="5052210">signal</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052221">}</span><span class="op" id="5052222">(</span><span class="op" id="5052223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052229"><a href="/testing/testing.go.html#5051455">numParallel</a></span><span class="op" id="5052240">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052247">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052264"><a href="/testing/testing.go.html#5051865">t</a></span><span class="op" id="5052265">.</span><span class="ident" id="5052266">report</span><span class="op" id="5052272">(</span><span class="op" id="5052273">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052278"><a href="/testing/testing.go.html#5050880">ok</a></span>&nbsp;<span class="op" id="5052281">=</span>&nbsp;<span class="ident" id="5052283"><a href="/testing/testing.go.html#5050880">ok</a></span>&nbsp;<span class="op" id="5052286">&amp;&amp;</span>&nbsp;<span class="op" id="5052289">!</span><span class="ident" id="5052290"><a href="/testing/testing.go.html#5052111">out</a></span><span class="op" id="5052293">.</span><span class="ident" id="5052294">Failed</span><span class="op" id="5052300">(</span><span class="op" id="5052301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052310">running</span>&nbsp;<span class="op" id="5052318">:=</span>&nbsp;<span class="num" id="5052321">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052325">for</span>&nbsp;<span class="ident" id="5052329"><a href="/testing/testing.go.html#5051455">numParallel</a></span><span class="op" id="5052340">+</span><span class="ident" id="5052341"><a href="/testing/testing.go.html#5052310">running</a></span>&nbsp;<span class="op" id="5052349">&gt;</span>&nbsp;<span class="num" id="5052351">0</span>&nbsp;<span class="op" id="5052353">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052358">if</span>&nbsp;<span class="ident" id="5052361"><a href="/testing/testing.go.html#5052310">running</a></span>&nbsp;<span class="op" id="5052369">&lt;</span>&nbsp;<span class="op" id="5052371">*</span><span class="ident" id="5052372"><a href="/testing/testing.go.html#5040862">parallel</a></span>&nbsp;<span class="op" id="5052381">&amp;&amp;</span>&nbsp;<span class="ident" id="5052384"><a href="/testing/testing.go.html#5051455">numParallel</a></span>&nbsp;<span class="op" id="5052396">&gt;</span>&nbsp;<span class="num" id="5052398">0</span>&nbsp;<span class="op" id="5052400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052406"><a href="/testing/testing.go.html#5051474">startParallel</a></span>&nbsp;<span class="op" id="5052420">&lt;-</span>&nbsp;<span class="builtintype" id="5052423">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052432"><a href="/testing/testing.go.html#5052310">running</a></span><span class="op" id="5052439">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052446"><a href="/testing/testing.go.html#5051455">numParallel</a></span><span class="op" id="5052457">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052464">continue</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052481">t</span>&nbsp;<span class="op" id="5052483">:=</span>&nbsp;<span class="op" id="5052486">(</span><span class="op" id="5052487">&lt;-</span><span class="ident" id="5052489"><a href="/testing/testing.go.html#5051417">collector</a></span><span class="op" id="5052498">)</span><span class="op" id="5052499">.</span><span class="op" id="5052500">(</span><span class="op" id="5052501">*</span><span class="ident" id="5052502"><a href="/testing/testing.go.html#5043708">T</a></span><span class="op" id="5052503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052508"><a href="/testing/testing.go.html#5052481">t</a></span><span class="op" id="5052509">.</span><span class="ident" id="5052510">report</span><span class="op" id="5052516">(</span><span class="op" id="5052517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052522"><a href="/testing/testing.go.html#5050880">ok</a></span>&nbsp;<span class="op" id="5052525">=</span>&nbsp;<span class="ident" id="5052527"><a href="/testing/testing.go.html#5050880">ok</a></span>&nbsp;<span class="op" id="5052530">&amp;&amp;</span>&nbsp;<span class="op" id="5052533">!</span><span class="ident" id="5052534"><a href="/testing/testing.go.html#5052481">t</a></span><span class="op" id="5052535">.</span><span class="ident" id="5052536">Failed</span><span class="op" id="5052542">(</span><span class="op" id="5052543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052548"><a href="/testing/testing.go.html#5052310">running</a></span><span class="op" id="5052555">--</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052566">return</span><br>
<span class="lineno"></span><span class="op" id="5052573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="comment" id="5052576">//&nbsp;before&nbsp;runs&nbsp;before&nbsp;all&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="5052611">func</span>&nbsp;<span class="ident" id="5052616">before</span><span class="op" id="5052622">(</span><span class="op" id="5052623">)</span>&nbsp;<span class="op" id="5052625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052628">if</span>&nbsp;<span class="op" id="5052631">*</span><span class="ident" id="5052632"><a href="/testing/testing.go.html#5040198">memProfileRate</a></span>&nbsp;<span class="op" id="5052647">&gt;</span>&nbsp;<span class="num" id="5052649">0</span>&nbsp;<span class="op" id="5052651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052655"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5052662">.</span><span class="ident" id="5052663">MemProfileRate</span>&nbsp;<span class="op" id="5052678">=</span>&nbsp;<span class="op" id="5052680">*</span><span class="ident" id="5052681"><a href="/testing/testing.go.html#5040198">memProfileRate</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052697">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052700">if</span>&nbsp;<span class="op" id="5052703">*</span><span class="ident" id="5052704"><a href="/testing/testing.go.html#5040292">cpuProfile</a></span>&nbsp;<span class="op" id="5052715">!=</span>&nbsp;<span class="string" id="5052718">&#34;&#34;</span>&nbsp;<span class="op" id="5052721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052725">f</span><span class="op" id="5052726">,</span>&nbsp;<span class="ident" id="5052728">err</span>&nbsp;<span class="op" id="5052732">:=</span>&nbsp;<span class="ident" id="5052735"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5052737">.</span><span class="ident" id="5052738">Create</span><span class="op" id="5052744">(</span><span class="ident" id="5052745"><a href="/testing/testing.go.html#5054395">toOutputDir</a></span><span class="op" id="5052756">(</span><span class="op" id="5052757">*</span><span class="ident" id="5052758"><a href="/testing/testing.go.html#5040292">cpuProfile</a></span><span class="op" id="5052768">)</span><span class="op" id="5052769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052773">if</span>&nbsp;<span class="ident" id="5052776"><a href="/testing/testing.go.html#5052728">err</a></span>&nbsp;<span class="op" id="5052780">!=</span>&nbsp;<span class="ident" id="5052783">nil</span>&nbsp;<span class="op" id="5052787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052792"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5052795">.</span><span class="ident" id="5052796">Fprintf</span><span class="op" id="5052803">(</span><span class="ident" id="5052804"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5052806">.</span><span class="ident" id="5052807">Stderr</span><span class="op" id="5052813">,</span>&nbsp;<span class="string" id="5052815">&#34;testing:&nbsp;%s&#34;</span><span class="op" id="5052828">,</span>&nbsp;<span class="ident" id="5052830"><a href="/testing/testing.go.html#5052728">err</a></span><span class="op" id="5052833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052838">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052851">if</span>&nbsp;<span class="ident" id="5052854">err</span>&nbsp;<span class="op" id="5052858">:=</span>&nbsp;<span class="ident" id="5052861"><a href="/testing/testing.go.html#5038863">pprof</a></span><span class="op" id="5052866">.</span><span class="ident" id="5052867">StartCPUProfile</span><span class="op" id="5052882">(</span><span class="ident" id="5052883"><a href="/testing/testing.go.html#5052725">f</a></span><span class="op" id="5052884">)</span><span class="op" id="5052885">;</span>&nbsp;<span class="ident" id="5052887"><a href="/testing/testing.go.html#5052854">err</a></span>&nbsp;<span class="op" id="5052891">!=</span>&nbsp;<span class="ident" id="5052894">nil</span>&nbsp;<span class="op" id="5052898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052903"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5052906">.</span><span class="ident" id="5052907">Fprintf</span><span class="op" id="5052914">(</span><span class="ident" id="5052915"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5052917">.</span><span class="ident" id="5052918">Stderr</span><span class="op" id="5052924">,</span>&nbsp;<span class="string" id="5052926">&#34;testing:&nbsp;can&#39;t&nbsp;start&nbsp;cpu&nbsp;profile:&nbsp;%s&#34;</span><span class="op" id="5052964">,</span>&nbsp;<span class="ident" id="5052966"><a href="/testing/testing.go.html#5052854">err</a></span><span class="op" id="5052969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052974"><a href="/testing/testing.go.html#5052725">f</a></span><span class="op" id="5052975">.</span><span class="ident" id="5052976">Close</span><span class="op" id="5052981">(</span><span class="op" id="5052982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052987">return</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5053000">//&nbsp;Could&nbsp;save&nbsp;f&nbsp;so&nbsp;after&nbsp;can&nbsp;call&nbsp;f.Close;&nbsp;not&nbsp;worth&nbsp;the&nbsp;effort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053069">if</span>&nbsp;<span class="op" id="5053072">*</span><span class="ident" id="5053073"><a href="/testing/testing.go.html#5040405">blockProfile</a></span>&nbsp;<span class="op" id="5053086">!=</span>&nbsp;<span class="string" id="5053089">&#34;&#34;</span>&nbsp;<span class="op" id="5053092">&amp;&amp;</span>&nbsp;<span class="op" id="5053095">*</span><span class="ident" id="5053096"><a href="/testing/testing.go.html#5040534">blockProfileRate</a></span>&nbsp;<span class="op" id="5053113">&gt;=</span>&nbsp;<span class="num" id="5053116">0</span>&nbsp;<span class="op" id="5053118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053122"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5053129">.</span><span class="ident" id="5053130">SetBlockProfileRate</span><span class="op" id="5053149">(</span><span class="op" id="5053150">*</span><span class="ident" id="5053151"><a href="/testing/testing.go.html#5040534">blockProfileRate</a></span><span class="op" id="5053167">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053173">if</span>&nbsp;<span class="op" id="5053176">*</span><span class="ident" id="5053177"><a href="/testing/testing.go.html#5039858">coverProfile</a></span>&nbsp;<span class="op" id="5053190">!=</span>&nbsp;<span class="string" id="5053193">&#34;&#34;</span>&nbsp;<span class="op" id="5053196">&amp;&amp;</span>&nbsp;<span class="ident" id="5053199"><a href="/testing/cover.go.html#5029204">cover</a></span><span class="op" id="5053204">.</span><span class="ident" id="5053205">Mode</span>&nbsp;<span class="op" id="5053210">==</span>&nbsp;<span class="string" id="5053213">&#34;&#34;</span>&nbsp;<span class="op" id="5053216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053220"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5053223">.</span><span class="ident" id="5053224">Fprintf</span><span class="op" id="5053231">(</span><span class="ident" id="5053232"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053234">.</span><span class="ident" id="5053235">Stderr</span><span class="op" id="5053241">,</span>&nbsp;<span class="string" id="5053243">&#34;testing:&nbsp;cannot&nbsp;use&nbsp;-test.coverprofile&nbsp;because&nbsp;test&nbsp;binary&nbsp;was&nbsp;not&nbsp;built&nbsp;with&nbsp;coverage&nbsp;enabled\n&#34;</span><span class="op" id="5053341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053345"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053347">.</span><span class="ident" id="5053348">Exit</span><span class="op" id="5053352">(</span><span class="num" id="5053353">2</span><span class="op" id="5053354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053357">}</span><br>
<span class="lineno">610</span><span class="op" id="5053359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5053362">//&nbsp;after&nbsp;runs&nbsp;after&nbsp;all&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="5053395">func</span>&nbsp;<span class="ident" id="5053400">after</span><span class="op" id="5053405">(</span><span class="op" id="5053406">)</span>&nbsp;<span class="op" id="5053408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053411">if</span>&nbsp;<span class="op" id="5053414">*</span><span class="ident" id="5053415"><a href="/testing/testing.go.html#5040292">cpuProfile</a></span>&nbsp;<span class="op" id="5053426">!=</span>&nbsp;<span class="string" id="5053429">&#34;&#34;</span>&nbsp;<span class="op" id="5053432">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053436"><a href="/testing/testing.go.html#5038863">pprof</a></span><span class="op" id="5053441">.</span><span class="ident" id="5053442">StopCPUProfile</span><span class="op" id="5053456">(</span><span class="op" id="5053457">)</span>&nbsp;<span class="comment" id="5053459">//&nbsp;flushes&nbsp;profile&nbsp;to&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053490">if</span>&nbsp;<span class="op" id="5053493">*</span><span class="ident" id="5053494"><a href="/testing/testing.go.html#5040083">memProfile</a></span>&nbsp;<span class="op" id="5053505">!=</span>&nbsp;<span class="string" id="5053508">&#34;&#34;</span>&nbsp;<span class="op" id="5053511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053515">f</span><span class="op" id="5053516">,</span>&nbsp;<span class="ident" id="5053518">err</span>&nbsp;<span class="op" id="5053522">:=</span>&nbsp;<span class="ident" id="5053525"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053527">.</span><span class="ident" id="5053528">Create</span><span class="op" id="5053534">(</span><span class="ident" id="5053535"><a href="/testing/testing.go.html#5054395">toOutputDir</a></span><span class="op" id="5053546">(</span><span class="op" id="5053547">*</span><span class="ident" id="5053548"><a href="/testing/testing.go.html#5040083">memProfile</a></span><span class="op" id="5053558">)</span><span class="op" id="5053559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053563">if</span>&nbsp;<span class="ident" id="5053566"><a href="/testing/testing.go.html#5053518">err</a></span>&nbsp;<span class="op" id="5053570">!=</span>&nbsp;<span class="ident" id="5053573">nil</span>&nbsp;<span class="op" id="5053577">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053582"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5053585">.</span><span class="ident" id="5053586">Fprintf</span><span class="op" id="5053593">(</span><span class="ident" id="5053594"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053596">.</span><span class="ident" id="5053597">Stderr</span><span class="op" id="5053603">,</span>&nbsp;<span class="string" id="5053605">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="5053620">,</span>&nbsp;<span class="ident" id="5053622"><a href="/testing/testing.go.html#5053518">err</a></span><span class="op" id="5053625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053630"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053632">.</span><span class="ident" id="5053633">Exit</span><span class="op" id="5053637">(</span><span class="num" id="5053638">2</span><span class="op" id="5053639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053647"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5053654">.</span><span class="ident" id="5053655">GC</span><span class="op" id="5053657">(</span><span class="op" id="5053658">)</span>&nbsp;<span class="comment" id="5053660">//&nbsp;materialize&nbsp;all&nbsp;statistics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053692">if</span>&nbsp;<span class="ident" id="5053695"><a href="/testing/testing.go.html#5053518">err</a></span>&nbsp;<span class="op" id="5053699">=</span>&nbsp;<span class="ident" id="5053701"><a href="/testing/testing.go.html#5038863">pprof</a></span><span class="op" id="5053706">.</span><span class="ident" id="5053707">WriteHeapProfile</span><span class="op" id="5053723">(</span><span class="ident" id="5053724"><a href="/testing/testing.go.html#5053515">f</a></span><span class="op" id="5053725">)</span><span class="op" id="5053726">;</span>&nbsp;<span class="ident" id="5053728"><a href="/testing/testing.go.html#5053518">err</a></span>&nbsp;<span class="op" id="5053732">!=</span>&nbsp;<span class="ident" id="5053735">nil</span>&nbsp;<span class="op" id="5053739">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053744"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5053747">.</span><span class="ident" id="5053748">Fprintf</span><span class="op" id="5053755">(</span><span class="ident" id="5053756"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053758">.</span><span class="ident" id="5053759">Stderr</span><span class="op" id="5053765">,</span>&nbsp;<span class="string" id="5053767">&#34;testing:&nbsp;can&#39;t&nbsp;write&nbsp;%s:&nbsp;%s\n&#34;</span><span class="op" id="5053798">,</span>&nbsp;<span class="op" id="5053800">*</span><span class="ident" id="5053801"><a href="/testing/testing.go.html#5040083">memProfile</a></span><span class="op" id="5053811">,</span>&nbsp;<span class="ident" id="5053813"><a href="/testing/testing.go.html#5053518">err</a></span><span class="op" id="5053816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053821"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053823">.</span><span class="ident" id="5053824">Exit</span><span class="op" id="5053828">(</span><span class="num" id="5053829">2</span><span class="op" id="5053830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053838"><a href="/testing/testing.go.html#5053515">f</a></span><span class="op" id="5053839">.</span><span class="ident" id="5053840">Close</span><span class="op" id="5053845">(</span><span class="op" id="5053846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5053849">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053852">if</span>&nbsp;<span class="op" id="5053855">*</span><span class="ident" id="5053856"><a href="/testing/testing.go.html#5040405">blockProfile</a></span>&nbsp;<span class="op" id="5053869">!=</span>&nbsp;<span class="string" id="5053872">&#34;&#34;</span>&nbsp;<span class="op" id="5053875">&amp;&amp;</span>&nbsp;<span class="op" id="5053878">*</span><span class="ident" id="5053879"><a href="/testing/testing.go.html#5040534">blockProfileRate</a></span>&nbsp;<span class="op" id="5053896">&gt;=</span>&nbsp;<span class="num" id="5053899">0</span>&nbsp;<span class="op" id="5053901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053905">f</span><span class="op" id="5053906">,</span>&nbsp;<span class="ident" id="5053908">err</span>&nbsp;<span class="op" id="5053912">:=</span>&nbsp;<span class="ident" id="5053915"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053917">.</span><span class="ident" id="5053918">Create</span><span class="op" id="5053924">(</span><span class="ident" id="5053925"><a href="/testing/testing.go.html#5054395">toOutputDir</a></span><span class="op" id="5053936">(</span><span class="op" id="5053937">*</span><span class="ident" id="5053938"><a href="/testing/testing.go.html#5040405">blockProfile</a></span><span class="op" id="5053950">)</span><span class="op" id="5053951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5053955">if</span>&nbsp;<span class="ident" id="5053958"><a href="/testing/testing.go.html#5053908">err</a></span>&nbsp;<span class="op" id="5053962">!=</span>&nbsp;<span class="ident" id="5053965">nil</span>&nbsp;<span class="op" id="5053969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5053974"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5053977">.</span><span class="ident" id="5053978">Fprintf</span><span class="op" id="5053985">(</span><span class="ident" id="5053986"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5053988">.</span><span class="ident" id="5053989">Stderr</span><span class="op" id="5053995">,</span>&nbsp;<span class="string" id="5053997">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="5054012">,</span>&nbsp;<span class="ident" id="5054014"><a href="/testing/testing.go.html#5053908">err</a></span><span class="op" id="5054017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054022"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5054024">.</span><span class="ident" id="5054025">Exit</span><span class="op" id="5054029">(</span><span class="num" id="5054030">2</span><span class="op" id="5054031">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5054035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054039">if</span>&nbsp;<span class="ident" id="5054042"><a href="/testing/testing.go.html#5053908">err</a></span>&nbsp;<span class="op" id="5054046">=</span>&nbsp;<span class="ident" id="5054048"><a href="/testing/testing.go.html#5038863">pprof</a></span><span class="op" id="5054053">.</span><span class="ident" id="5054054">Lookup</span><span class="op" id="5054060">(</span><span class="string" id="5054061">&#34;block&#34;</span><span class="op" id="5054068">)</span><span class="op" id="5054069">.</span><span class="ident" id="5054070">WriteTo</span><span class="op" id="5054077">(</span><span class="ident" id="5054078"><a href="/testing/testing.go.html#5053905">f</a></span><span class="op" id="5054079">,</span>&nbsp;<span class="num" id="5054081">0</span><span class="op" id="5054082">)</span><span class="op" id="5054083">;</span>&nbsp;<span class="ident" id="5054085"><a href="/testing/testing.go.html#5053908">err</a></span>&nbsp;<span class="op" id="5054089">!=</span>&nbsp;<span class="ident" id="5054092">nil</span>&nbsp;<span class="op" id="5054096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054101"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5054104">.</span><span class="ident" id="5054105">Fprintf</span><span class="op" id="5054112">(</span><span class="ident" id="5054113"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5054115">.</span><span class="ident" id="5054116">Stderr</span><span class="op" id="5054122">,</span>&nbsp;<span class="string" id="5054124">&#34;testing:&nbsp;can&#39;t&nbsp;write&nbsp;%s:&nbsp;%s\n&#34;</span><span class="op" id="5054155">,</span>&nbsp;<span class="op" id="5054157">*</span><span class="ident" id="5054158"><a href="/testing/testing.go.html#5040405">blockProfile</a></span><span class="op" id="5054170">,</span>&nbsp;<span class="ident" id="5054172"><a href="/testing/testing.go.html#5053908">err</a></span><span class="op" id="5054175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054180"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5054182">.</span><span class="ident" id="5054183">Exit</span><span class="op" id="5054187">(</span><span class="num" id="5054188">2</span><span class="op" id="5054189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5054193">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054197"><a href="/testing/testing.go.html#5053905">f</a></span><span class="op" id="5054198">.</span><span class="ident" id="5054199">Close</span><span class="op" id="5054204">(</span><span class="op" id="5054205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5054208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054211">if</span>&nbsp;<span class="ident" id="5054214"><a href="/testing/cover.go.html#5029204">cover</a></span><span class="op" id="5054219">.</span><span class="ident" id="5054220">Mode</span>&nbsp;<span class="op" id="5054225">!=</span>&nbsp;<span class="string" id="5054228">&#34;&#34;</span>&nbsp;<span class="op" id="5054231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054235"><a href="/testing/cover.go.html#5030746">coverReport</a></span><span class="op" id="5054246">(</span><span class="op" id="5054247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5054250">}</span><br>
<span class="lineno">645</span><span class="op" id="5054252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5054255">//&nbsp;toOutputDir&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;relocated,&nbsp;if&nbsp;required,&nbsp;to&nbsp;outputDir.</span><br>
<span class="lineno"></span><span class="comment" id="5054330">//&nbsp;Simple&nbsp;implementation&nbsp;to&nbsp;avoid&nbsp;pulling&nbsp;in&nbsp;path/filepath.</span><br>
<span class="lineno"></span><span class="keyword" id="5054390">func</span>&nbsp;<span class="ident" id="5054395">toOutputDir</span><span class="op" id="5054406">(</span><span class="ident" id="5054407">path</span>&nbsp;<span class="builtintype" id="5054412">string</span><span class="op" id="5054418">)</span>&nbsp;<span class="builtintype" id="5054420">string</span>&nbsp;<span class="op" id="5054427">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054430">if</span>&nbsp;<span class="op" id="5054433">*</span><span class="ident" id="5054434"><a href="/testing/testing.go.html#5039627">outputDir</a></span>&nbsp;<span class="op" id="5054444">==</span>&nbsp;<span class="string" id="5054447">&#34;&#34;</span>&nbsp;<span class="op" id="5054450">||</span>&nbsp;<span class="ident" id="5054453"><a href="/testing/testing.go.html#5054407">path</a></span>&nbsp;<span class="op" id="5054458">==</span>&nbsp;<span class="string" id="5054461">&#34;&#34;</span>&nbsp;<span class="op" id="5054464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054468">return</span>&nbsp;<span class="ident" id="5054475"><a href="/testing/testing.go.html#5054407">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5054481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054484">if</span>&nbsp;<span class="ident" id="5054487"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5054494">.</span><span class="ident" id="5054495">GOOS</span>&nbsp;<span class="op" id="5054500">==</span>&nbsp;<span class="string" id="5054503">&#34;windows&#34;</span>&nbsp;<span class="op" id="5054513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054517">//&nbsp;On&nbsp;Windows,&nbsp;it&#39;s&nbsp;clumsy,&nbsp;but&nbsp;we&nbsp;can&nbsp;be&nbsp;almost&nbsp;always&nbsp;correct</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054583">//&nbsp;by&nbsp;just&nbsp;looking&nbsp;for&nbsp;a&nbsp;drive&nbsp;letter&nbsp;and&nbsp;a&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054636">//&nbsp;Absolute&nbsp;paths&nbsp;always&nbsp;have&nbsp;a&nbsp;drive&nbsp;letter&nbsp;(ignoring&nbsp;UNC).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054699">//&nbsp;Problem:&nbsp;if&nbsp;path&nbsp;==&nbsp;&#34;C:A&#34;&nbsp;and&nbsp;outputdir&nbsp;==&nbsp;&#34;C:\Go&#34;&nbsp;it&#39;s&nbsp;unclear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054768">//&nbsp;what&nbsp;to&nbsp;do,&nbsp;but&nbsp;even&nbsp;then&nbsp;path/filepath&nbsp;doesn&#39;t&nbsp;help.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054827">//&nbsp;TODO:&nbsp;Worth&nbsp;doing&nbsp;better?&nbsp;Probably&nbsp;not,&nbsp;because&nbsp;we&#39;re&nbsp;here&nbsp;only</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5054896">//&nbsp;under&nbsp;the&nbsp;management&nbsp;of&nbsp;go&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054934">if</span>&nbsp;<span class="builtinfunc" id="5054937">len</span><span class="op" id="5054940">(</span><span class="ident" id="5054941"><a href="/testing/testing.go.html#5054407">path</a></span><span class="op" id="5054945">)</span>&nbsp;<span class="op" id="5054947">&gt;=</span>&nbsp;<span class="num" id="5054950">2</span>&nbsp;<span class="op" id="5054952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5054957">letter</span><span class="op" id="5054963">,</span>&nbsp;<span class="ident" id="5054965">colon</span>&nbsp;<span class="op" id="5054971">:=</span>&nbsp;<span class="ident" id="5054974"><a href="/testing/testing.go.html#5054407">path</a></span><span class="op" id="5054978">[</span><span class="num" id="5054979">0</span><span class="op" id="5054980">]</span><span class="op" id="5054981">,</span>&nbsp;<span class="ident" id="5054983"><a href="/testing/testing.go.html#5054407">path</a></span><span class="op" id="5054987">[</span><span class="num" id="5054988">1</span><span class="op" id="5054989">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5054994">if</span>&nbsp;<span class="op" id="5054997">(</span><span class="string" id="5054998">&#39;a&#39;</span>&nbsp;<span class="op" id="5055002">&lt;=</span>&nbsp;<span class="ident" id="5055005"><a href="/testing/testing.go.html#5054957">letter</a></span>&nbsp;<span class="op" id="5055012">&amp;&amp;</span>&nbsp;<span class="ident" id="5055015"><a href="/testing/testing.go.html#5054957">letter</a></span>&nbsp;<span class="op" id="5055022">&lt;=</span>&nbsp;<span class="string" id="5055025">&#39;z&#39;</span>&nbsp;<span class="op" id="5055029">||</span>&nbsp;<span class="string" id="5055032">&#39;A&#39;</span>&nbsp;<span class="op" id="5055036">&lt;=</span>&nbsp;<span class="ident" id="5055039"><a href="/testing/testing.go.html#5054957">letter</a></span>&nbsp;<span class="op" id="5055046">&amp;&amp;</span>&nbsp;<span class="ident" id="5055049"><a href="/testing/testing.go.html#5054957">letter</a></span>&nbsp;<span class="op" id="5055056">&lt;=</span>&nbsp;<span class="string" id="5055059">&#39;Z&#39;</span><span class="op" id="5055062">)</span>&nbsp;<span class="op" id="5055064">&amp;&amp;</span>&nbsp;<span class="ident" id="5055067"><a href="/testing/testing.go.html#5054965">colon</a></span>&nbsp;<span class="op" id="5055073">==</span>&nbsp;<span class="string" id="5055076">&#39;:&#39;</span>&nbsp;<span class="op" id="5055080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5055086">//&nbsp;If&nbsp;path&nbsp;starts&nbsp;with&nbsp;a&nbsp;drive&nbsp;letter&nbsp;we&#39;re&nbsp;stuck&nbsp;with&nbsp;it&nbsp;regardless.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055160">return</span>&nbsp;<span class="ident" id="5055167"><a href="/testing/testing.go.html#5054407">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055185">if</span>&nbsp;<span class="ident" id="5055188"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5055190">.</span><span class="ident" id="5055191">IsPathSeparator</span><span class="op" id="5055206">(</span><span class="ident" id="5055207"><a href="/testing/testing.go.html#5054407">path</a></span><span class="op" id="5055211">[</span><span class="num" id="5055212">0</span><span class="op" id="5055213">]</span><span class="op" id="5055214">)</span>&nbsp;<span class="op" id="5055216">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055220">return</span>&nbsp;<span class="ident" id="5055227"><a href="/testing/testing.go.html#5054407">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055236">return</span>&nbsp;<span class="ident" id="5055243"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5055246">.</span><span class="ident" id="5055247">Sprintf</span><span class="op" id="5055254">(</span><span class="string" id="5055255">&#34;%s%c%s&#34;</span><span class="op" id="5055263">,</span>&nbsp;<span class="op" id="5055265">*</span><span class="ident" id="5055266"><a href="/testing/testing.go.html#5039627">outputDir</a></span><span class="op" id="5055275">,</span>&nbsp;<span class="ident" id="5055277"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5055279">.</span><span class="ident" id="5055280">PathSeparator</span><span class="op" id="5055293">,</span>&nbsp;<span class="ident" id="5055295"><a href="/testing/testing.go.html#5054407">path</a></span><span class="op" id="5055299">)</span><br>
<span class="lineno"></span><span class="op" id="5055301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="5055304">var</span>&nbsp;<span class="ident" id="5055308">timer</span>&nbsp;<span class="op" id="5055314">*</span><span class="ident" id="5055315"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5055319">.</span><span class="ident" id="5055320">Timer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5055327">//&nbsp;startAlarm&nbsp;starts&nbsp;an&nbsp;alarm&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="5055371">func</span>&nbsp;<span class="ident" id="5055376">startAlarm</span><span class="op" id="5055386">(</span><span class="op" id="5055387">)</span>&nbsp;<span class="op" id="5055389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055392">if</span>&nbsp;<span class="op" id="5055395">*</span><span class="ident" id="5055396"><a href="/testing/testing.go.html#5040639">timeout</a></span>&nbsp;<span class="op" id="5055404">&gt;</span>&nbsp;<span class="num" id="5055406">0</span>&nbsp;<span class="op" id="5055408">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055412"><a href="/testing/testing.go.html#5055308">timer</a></span>&nbsp;<span class="op" id="5055418">=</span>&nbsp;<span class="ident" id="5055420"><a href="/testing/testing.go.html#5038910">time</a></span><span class="op" id="5055424">.</span><span class="ident" id="5055425">AfterFunc</span><span class="op" id="5055434">(</span><span class="op" id="5055435">*</span><span class="ident" id="5055436"><a href="/testing/testing.go.html#5040639">timeout</a></span><span class="op" id="5055443">,</span>&nbsp;<span class="keyword" id="5055445">func</span><span class="op" id="5055449">(</span><span class="op" id="5055450">)</span>&nbsp;<span class="op" id="5055452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5055457">panic</span><span class="op" id="5055462">(</span><span class="ident" id="5055463"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5055466">.</span><span class="ident" id="5055467">Sprintf</span><span class="op" id="5055474">(</span><span class="string" id="5055475">&#34;test&nbsp;timed&nbsp;out&nbsp;after&nbsp;%v&#34;</span><span class="op" id="5055500">,</span>&nbsp;<span class="op" id="5055502">*</span><span class="ident" id="5055503"><a href="/testing/testing.go.html#5040639">timeout</a></span><span class="op" id="5055510">)</span><span class="op" id="5055511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055515">}</span><span class="op" id="5055516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055519">}</span><br>
<span class="lineno"></span><span class="op" id="5055521">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="5055524">//&nbsp;stopAlarm&nbsp;turns&nbsp;off&nbsp;the&nbsp;alarm.</span><br>
<span class="lineno"></span><span class="keyword" id="5055558">func</span>&nbsp;<span class="ident" id="5055563">stopAlarm</span><span class="op" id="5055572">(</span><span class="op" id="5055573">)</span>&nbsp;<span class="op" id="5055575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055578">if</span>&nbsp;<span class="op" id="5055581">*</span><span class="ident" id="5055582"><a href="/testing/testing.go.html#5040639">timeout</a></span>&nbsp;<span class="op" id="5055590">&gt;</span>&nbsp;<span class="num" id="5055592">0</span>&nbsp;<span class="op" id="5055594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055598"><a href="/testing/testing.go.html#5055308">timer</a></span><span class="op" id="5055603">.</span><span class="ident" id="5055604">Stop</span><span class="op" id="5055608">(</span><span class="op" id="5055609">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055612">}</span><br>
<span class="lineno"></span><span class="op" id="5055614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5055617">func</span>&nbsp;<span class="ident" id="5055622">parseCpuList</span><span class="op" id="5055634">(</span><span class="op" id="5055635">)</span>&nbsp;<span class="op" id="5055637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055640">for</span>&nbsp;<span class="ident" id="5055644">_</span><span class="op" id="5055645">,</span>&nbsp;<span class="ident" id="5055647">val</span>&nbsp;<span class="op" id="5055651">:=</span>&nbsp;<span class="keyword" id="5055654">range</span>&nbsp;<span class="ident" id="5055660"><a href="/testing/testing.go.html#5038891">strings</a></span><span class="op" id="5055667">.</span><span class="ident" id="5055668">Split</span><span class="op" id="5055673">(</span><span class="op" id="5055674">*</span><span class="ident" id="5055675"><a href="/testing/testing.go.html#5040751">cpuListStr</a></span><span class="op" id="5055685">,</span>&nbsp;<span class="string" id="5055687">&#34;,&#34;</span><span class="op" id="5055690">)</span>&nbsp;<span class="op" id="5055692">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055696"><a href="/testing/testing.go.html#5055647">val</a></span>&nbsp;<span class="op" id="5055700">=</span>&nbsp;<span class="ident" id="5055702"><a href="/testing/testing.go.html#5038891">strings</a></span><span class="op" id="5055709">.</span><span class="ident" id="5055710">TrimSpace</span><span class="op" id="5055719">(</span><span class="ident" id="5055720"><a href="/testing/testing.go.html#5055647">val</a></span><span class="op" id="5055723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055727">if</span>&nbsp;<span class="ident" id="5055730"><a href="/testing/testing.go.html#5055647">val</a></span>&nbsp;<span class="op" id="5055734">==</span>&nbsp;<span class="string" id="5055737">&#34;&#34;</span>&nbsp;<span class="op" id="5055740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055745">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055760">cpu</span><span class="op" id="5055763">,</span>&nbsp;<span class="ident" id="5055765">err</span>&nbsp;<span class="op" id="5055769">:=</span>&nbsp;<span class="ident" id="5055772"><a href="/testing/testing.go.html#5038880">strconv</a></span><span class="op" id="5055779">.</span><span class="ident" id="5055780">Atoi</span><span class="op" id="5055784">(</span><span class="ident" id="5055785"><a href="/testing/testing.go.html#5055647">val</a></span><span class="op" id="5055788">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055792">if</span>&nbsp;<span class="ident" id="5055795"><a href="/testing/testing.go.html#5055765">err</a></span>&nbsp;<span class="op" id="5055799">!=</span>&nbsp;<span class="ident" id="5055802">nil</span>&nbsp;<span class="op" id="5055806">||</span>&nbsp;<span class="ident" id="5055809"><a href="/testing/testing.go.html#5055760">cpu</a></span>&nbsp;<span class="op" id="5055813">&lt;=</span>&nbsp;<span class="num" id="5055816">0</span>&nbsp;<span class="op" id="5055818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055823"><a href="/testing/testing.go.html#5038839">fmt</a></span><span class="op" id="5055826">.</span><span class="ident" id="5055827">Fprintf</span><span class="op" id="5055834">(</span><span class="ident" id="5055835"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5055837">.</span><span class="ident" id="5055838">Stderr</span><span class="op" id="5055844">,</span>&nbsp;<span class="string" id="5055846">&#34;testing:&nbsp;invalid&nbsp;value&nbsp;%q&nbsp;for&nbsp;-test.cpu\n&#34;</span><span class="op" id="5055889">,</span>&nbsp;<span class="ident" id="5055891"><a href="/testing/testing.go.html#5055647">val</a></span><span class="op" id="5055894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055899"><a href="/testing/testing.go.html#5038846">os</a></span><span class="op" id="5055901">.</span><span class="ident" id="5055902">Exit</span><span class="op" id="5055906">(</span><span class="num" id="5055907">1</span><span class="op" id="5055908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055916"><a href="/testing/testing.go.html#5041003">cpuList</a></span>&nbsp;<span class="op" id="5055924">=</span>&nbsp;<span class="builtinfunc" id="5055926">append</span><span class="op" id="5055932">(</span><span class="ident" id="5055933"><a href="/testing/testing.go.html#5041003">cpuList</a></span><span class="op" id="5055940">,</span>&nbsp;<span class="ident" id="5055942"><a href="/testing/testing.go.html#5055760">cpu</a></span><span class="op" id="5055945">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5055948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5055951">if</span>&nbsp;<span class="ident" id="5055954"><a href="/testing/testing.go.html#5041003">cpuList</a></span>&nbsp;<span class="op" id="5055962">==</span>&nbsp;<span class="ident" id="5055965">nil</span>&nbsp;<span class="op" id="5055969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5055973"><a href="/testing/testing.go.html#5041003">cpuList</a></span>&nbsp;<span class="op" id="5055981">=</span>&nbsp;<span class="builtinfunc" id="5055983">append</span><span class="op" id="5055989">(</span><span class="ident" id="5055990"><a href="/testing/testing.go.html#5041003">cpuList</a></span><span class="op" id="5055997">,</span>&nbsp;<span class="ident" id="5055999"><a href="/testing/testing.go.html#5038852">runtime</a></span><span class="op" id="5056006">.</span><span class="ident" id="5056007">GOMAXPROCS</span><span class="op" id="5056017">(</span><span class="op" id="5056018">-</span><span class="num" id="5056019">1</span><span class="op" id="5056020">)</span><span class="op" id="5056021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5056024">}</span><br>
<span class="lineno"></span><span class="op" id="5056026">}</span>
</div>
</body>
</html>
