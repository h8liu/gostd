<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3567488">package</span>&nbsp;<span class="ident" id="3567496">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3567503">import</span>&nbsp;<span class="op" id="3567510">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3567513">&#34;errors&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3567522">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3567525">//&nbsp;Excep&nbsp;defines&nbsp;an&nbsp;exception&nbsp;error&nbsp;with&nbsp;a&nbsp;code</span><br>
<span class="lineno"></span><span class="keyword" id="3567573">type</span>&nbsp;<span class="ident" id="3567578">Excep</span>&nbsp;<span class="keyword" id="3567584">struct</span>&nbsp;<span class="op" id="3567591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567594">Code</span>&nbsp;<span class="builtintype" id="3567599">byte</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567605">Arg</span>&nbsp;&nbsp;<span class="builtintype" id="3567610">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567618">Err</span>&nbsp;&nbsp;<span class="builtintype" id="3567623">error</span><br>
<span class="lineno"></span><span class="op" id="3567629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3567632">//&nbsp;NewExcep&nbsp;creates&nbsp;a&nbsp;new&nbsp;Exception&nbsp;with&nbsp;a&nbsp;particular&nbsp;code&nbsp;and&nbsp;message.</span><br>
<span class="lineno">15</span><span class="keyword" id="3567704">func</span>&nbsp;<span class="ident" id="3567709">newExcep</span><span class="op" id="3567717">(</span><span class="ident" id="3567718">c</span>&nbsp;<span class="builtintype" id="3567720">byte</span><span class="op" id="3567724">,</span>&nbsp;<span class="ident" id="3567726">s</span>&nbsp;<span class="builtintype" id="3567728">string</span><span class="op" id="3567734">)</span>&nbsp;<span class="op" id="3567736">*</span><span class="ident" id="3567737">Excep</span>&nbsp;<span class="op" id="3567743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567746">ret</span>&nbsp;<span class="op" id="3567750">:=</span>&nbsp;<span class="builtinfunc" id="3567753">new</span><span class="op" id="3567756">(</span><span class="ident" id="3567757">Excep</span><span class="op" id="3567762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567765">ret</span><span class="op" id="3567768">.</span><span class="ident" id="3567769">Code</span>&nbsp;<span class="op" id="3567774">=</span>&nbsp;<span class="ident" id="3567776">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567779">ret</span><span class="op" id="3567782">.</span><span class="ident" id="3567783">Err</span>&nbsp;<span class="op" id="3567787">=</span>&nbsp;<span class="ident" id="3567789">errors</span><span class="op" id="3567795">.</span><span class="ident" id="3567796">New</span><span class="op" id="3567799">(</span><span class="ident" id="3567800">s</span><span class="op" id="3567801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3567804">return</span>&nbsp;<span class="ident" id="3567811">ret</span><br>
<span class="lineno">20</span><span class="op" id="3567815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3567818">func</span>&nbsp;<span class="op" id="3567823">(</span><span class="ident" id="3567824">e</span>&nbsp;<span class="op" id="3567826">*</span><span class="ident" id="3567827">Excep</span><span class="op" id="3567832">)</span>&nbsp;<span class="ident" id="3567834">Error</span><span class="op" id="3567839">(</span><span class="op" id="3567840">)</span>&nbsp;<span class="builtintype" id="3567842">string</span>&nbsp;<span class="op" id="3567849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3567852">return</span>&nbsp;<span class="ident" id="3567859">e</span><span class="op" id="3567860">.</span><span class="ident" id="3567861">Err</span><span class="op" id="3567864">.</span><span class="ident" id="3567865">Error</span><span class="op" id="3567870">(</span><span class="op" id="3567871">)</span><br>
<span class="lineno"></span><span class="op" id="3567873">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="3567876">//&nbsp;Exception&nbsp;codes</span><br>
<span class="lineno"></span><span class="keyword" id="3567895">const</span>&nbsp;<span class="op" id="3567901">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567904">ErrHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3567920">=</span>&nbsp;<span class="num" id="3567922">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567925">ErrTimer</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3567941">=</span>&nbsp;<span class="num" id="3567943">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567946">ErrInvalidInst</span>&nbsp;&nbsp;<span class="op" id="3567962">=</span>&nbsp;<span class="num" id="3567964">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567967">ErrOutOfRange</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3567983">=</span>&nbsp;<span class="num" id="3567985">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3567988">ErrMisalign</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3568004">=</span>&nbsp;<span class="num" id="3568006">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568009">ErrPageFault</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3568025">=</span>&nbsp;<span class="num" id="3568027">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568030">ErrPageReadonly</span>&nbsp;<span class="op" id="3568046">=</span>&nbsp;<span class="num" id="3568048">7</span><br>
<span class="lineno">35</span><span class="op" id="3568050">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3568053">var</span>&nbsp;<span class="op" id="3568057">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568060">errHalt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3568075">=</span>&nbsp;<span class="ident" id="3568077">newExcep</span><span class="op" id="3568085">(</span><span class="ident" id="3568086">ErrHalt</span><span class="op" id="3568093">,</span>&nbsp;<span class="string" id="3568095">&#34;halt&#34;</span><span class="op" id="3568101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568104">errTimeInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3568119">=</span>&nbsp;<span class="ident" id="3568121">newExcep</span><span class="op" id="3568129">(</span><span class="ident" id="3568130">ErrTimer</span><span class="op" id="3568138">,</span>&nbsp;<span class="string" id="3568140">&#34;time&nbsp;interrupt&#34;</span><span class="op" id="3568156">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568159">errInvalidInst</span>&nbsp;<span class="op" id="3568174">=</span>&nbsp;<span class="ident" id="3568176">newExcep</span><span class="op" id="3568184">(</span><span class="ident" id="3568185">ErrInvalidInst</span><span class="op" id="3568199">,</span>&nbsp;<span class="string" id="3568201">&#34;invalid&nbsp;instruction&#34;</span><span class="op" id="3568222">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568226">errOutOfRange</span>&nbsp;<span class="op" id="3568240">=</span>&nbsp;<span class="ident" id="3568242">newExcep</span><span class="op" id="3568250">(</span><span class="ident" id="3568251">ErrOutOfRange</span><span class="op" id="3568264">,</span>&nbsp;<span class="string" id="3568266">&#34;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="3568280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568283">errMisalign</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3568297">=</span>&nbsp;<span class="ident" id="3568299">newExcep</span><span class="op" id="3568307">(</span><span class="ident" id="3568308">ErrMisalign</span><span class="op" id="3568319">,</span>&nbsp;<span class="string" id="3568321">&#34;address&nbsp;misalign&#34;</span><span class="op" id="3568339">)</span><br>
<span class="lineno"></span><span class="op" id="3568341">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3568344">func</span>&nbsp;<span class="ident" id="3568349">newPageFault</span><span class="op" id="3568361">(</span><span class="ident" id="3568362">va</span>&nbsp;<span class="builtintype" id="3568365">uint32</span><span class="op" id="3568371">)</span>&nbsp;<span class="op" id="3568373">*</span><span class="ident" id="3568374">Excep</span>&nbsp;<span class="op" id="3568380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568383">ret</span>&nbsp;<span class="op" id="3568387">:=</span>&nbsp;<span class="ident" id="3568390">newExcep</span><span class="op" id="3568398">(</span><span class="ident" id="3568399">ErrPageFault</span><span class="op" id="3568411">,</span>&nbsp;<span class="string" id="3568413">&#34;page&nbsp;fault&#34;</span><span class="op" id="3568425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568428">ret</span><span class="op" id="3568431">.</span><span class="ident" id="3568432">Arg</span>&nbsp;<span class="op" id="3568436">=</span>&nbsp;<span class="ident" id="3568438">va</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3568442">return</span>&nbsp;<span class="ident" id="3568449">ret</span><br>
<span class="lineno">50</span><span class="op" id="3568453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3568456">func</span>&nbsp;<span class="ident" id="3568461">newPageReadonly</span><span class="op" id="3568476">(</span><span class="ident" id="3568477">va</span>&nbsp;<span class="builtintype" id="3568480">uint32</span><span class="op" id="3568486">)</span>&nbsp;<span class="op" id="3568488">*</span><span class="ident" id="3568489">Excep</span>&nbsp;<span class="op" id="3568495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568498">ret</span>&nbsp;<span class="op" id="3568502">:=</span>&nbsp;<span class="ident" id="3568505">newExcep</span><span class="op" id="3568513">(</span><span class="ident" id="3568514">ErrPageReadonly</span><span class="op" id="3568529">,</span>&nbsp;<span class="string" id="3568531">&#34;page&nbsp;read-only&#34;</span><span class="op" id="3568547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3568550">ret</span><span class="op" id="3568553">.</span><span class="ident" id="3568554">Arg</span>&nbsp;<span class="op" id="3568558">=</span>&nbsp;<span class="ident" id="3568560">va</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3568564">return</span>&nbsp;<span class="ident" id="3568571">ret</span><br>
<span class="lineno"></span><span class="op" id="3568575">}</span>
</div>
</body>
</html>
