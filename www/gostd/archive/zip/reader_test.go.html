<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7977615">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7977670">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7977724">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7977775">package</span>&nbsp;<span class="ident" id="7977783">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7977788">import</span>&nbsp;<span class="op" id="7977795">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977798">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977807">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977826">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977842">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977848">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977861">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977867">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977884">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977894">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977905">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7977916">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7977923">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7977926">type</span>&nbsp;<span class="ident" id="7977931">ZipTest</span>&nbsp;<span class="keyword" id="7977939">struct</span>&nbsp;<span class="op" id="7977946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977949">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7977957">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977965">Source</span>&nbsp;&nbsp;<span class="keyword" id="7977973">func</span><span class="op" id="7977977">(</span><span class="op" id="7977978">)</span>&nbsp;<span class="op" id="7977980">(</span><span class="ident" id="7977981">r</span>&nbsp;<span class="ident" id="7977983">io</span><span class="op" id="7977985">.</span><span class="ident" id="7977986">ReaderAt</span><span class="op" id="7977994">,</span>&nbsp;<span class="ident" id="7977996">size</span>&nbsp;<span class="ident" id="7978001">int64</span><span class="op" id="7978006">)</span>&nbsp;<span class="comment" id="7978008">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978061">Comment</span>&nbsp;<span class="builtintype" id="7978069">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978077">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7978085">[</span><span class="op" id="7978086">]</span><span class="ident" id="7978087">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978100">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7978108">error</span>&nbsp;<span class="comment" id="7978114">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7978164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7978167">type</span>&nbsp;<span class="ident" id="7978172">ZipTestFile</span>&nbsp;<span class="keyword" id="7978184">struct</span>&nbsp;<span class="op" id="7978191">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978194">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7978205">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978213">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7978224">[</span><span class="op" id="7978225">]</span><span class="builtintype" id="7978226">byte</span>&nbsp;<span class="comment" id="7978231">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978282">ContentErr</span>&nbsp;<span class="builtintype" id="7978293">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978300">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7978311">string</span>&nbsp;<span class="comment" id="7978318">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978373">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7978384">string</span>&nbsp;<span class="comment" id="7978391">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978439">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7978450">os</span><span class="op" id="7978452">.</span><span class="ident" id="7978453">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7978462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7978465">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7978540">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7978615">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7978689">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7978763">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7978839">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7978913">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7978993">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7979072">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7979120">var</span>&nbsp;<span class="ident" id="7979124">tests</span>&nbsp;<span class="op" id="7979130">=</span>&nbsp;<span class="op" id="7979132">[</span><span class="op" id="7979133">]</span><span class="ident" id="7979134">ZipTest</span><span class="op" id="7979141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979144">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979148">Name</span><span class="op" id="7979152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7979157">&#34;test.zip&#34;</span><span class="op" id="7979167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979171">Comment</span><span class="op" id="7979178">:</span>&nbsp;<span class="string" id="7979180">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7979208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979212">File</span><span class="op" id="7979216">:</span>&nbsp;<span class="op" id="7979218">[</span><span class="op" id="7979219">]</span><span class="ident" id="7979220">ZipTestFile</span><span class="op" id="7979231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979242">Name</span><span class="op" id="7979246">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7979251">&#34;test.txt&#34;</span><span class="op" id="7979261">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979267">Content</span><span class="op" id="7979274">:</span>&nbsp;<span class="op" id="7979276">[</span><span class="op" id="7979277">]</span><span class="builtintype" id="7979278">byte</span><span class="op" id="7979282">(</span><span class="string" id="7979283">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7979312">)</span><span class="op" id="7979313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979319">Mtime</span><span class="op" id="7979324">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7979328">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7979347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979353">Mode</span><span class="op" id="7979357">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7979362">0644</span><span class="op" id="7979366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979371">}</span><span class="op" id="7979372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979377">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979383">Name</span><span class="op" id="7979387">:</span>&nbsp;&nbsp;<span class="string" id="7979390">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7979412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979418">File</span><span class="op" id="7979422">:</span>&nbsp;&nbsp;<span class="string" id="7979425">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7979447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979453">Mtime</span><span class="op" id="7979458">:</span>&nbsp;<span class="string" id="7979460">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7979479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979485">Mode</span><span class="op" id="7979489">:</span>&nbsp;&nbsp;<span class="num" id="7979492">0644</span><span class="op" id="7979496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979501">}</span><span class="op" id="7979502">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979506">}</span><span class="op" id="7979507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979510">}</span><span class="op" id="7979511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979518">Name</span><span class="op" id="7979522">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7979527">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7979551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979555">Comment</span><span class="op" id="7979562">:</span>&nbsp;<span class="string" id="7979564">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7979592">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979596">File</span><span class="op" id="7979600">:</span>&nbsp;<span class="op" id="7979602">[</span><span class="op" id="7979603">]</span><span class="ident" id="7979604">ZipTestFile</span><span class="op" id="7979615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979626">Name</span><span class="op" id="7979630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7979635">&#34;test.txt&#34;</span><span class="op" id="7979645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979651">Content</span><span class="op" id="7979658">:</span>&nbsp;<span class="op" id="7979660">[</span><span class="op" id="7979661">]</span><span class="builtintype" id="7979662">byte</span><span class="op" id="7979666">(</span><span class="string" id="7979667">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7979696">)</span><span class="op" id="7979697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979703">Mtime</span><span class="op" id="7979708">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7979712">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7979731">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979737">Mode</span><span class="op" id="7979741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7979746">0644</span><span class="op" id="7979750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979755">}</span><span class="op" id="7979756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979767">Name</span><span class="op" id="7979771">:</span>&nbsp;&nbsp;<span class="string" id="7979774">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7979796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979802">File</span><span class="op" id="7979806">:</span>&nbsp;&nbsp;<span class="string" id="7979809">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7979831">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979837">Mtime</span><span class="op" id="7979842">:</span>&nbsp;<span class="string" id="7979844">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7979863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979869">Mode</span><span class="op" id="7979873">:</span>&nbsp;&nbsp;<span class="num" id="7979876">0644</span><span class="op" id="7979880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979885">}</span><span class="op" id="7979886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979890">}</span><span class="op" id="7979891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979894">}</span><span class="op" id="7979895">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979902">Name</span><span class="op" id="7979906">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7979910">&#34;r.zip&#34;</span><span class="op" id="7979917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979921">Source</span><span class="op" id="7979927">:</span>&nbsp;<span class="ident" id="7979929">returnRecursiveZip</span><span class="op" id="7979947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979951">File</span><span class="op" id="7979955">:</span>&nbsp;<span class="op" id="7979957">[</span><span class="op" id="7979958">]</span><span class="ident" id="7979959">ZipTestFile</span><span class="op" id="7979970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7979975">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7979981">Name</span><span class="op" id="7979985">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7979990">&#34;r/r.zip&#34;</span><span class="op" id="7979999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980005">Content</span><span class="op" id="7980012">:</span>&nbsp;<span class="ident" id="7980014">rZipBytes</span><span class="op" id="7980023">(</span><span class="op" id="7980024">)</span><span class="op" id="7980025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980031">Mtime</span><span class="op" id="7980036">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7980040">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7980059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980065">Mode</span><span class="op" id="7980069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7980074">0666</span><span class="op" id="7980078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980083">}</span><span class="op" id="7980084">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980088">}</span><span class="op" id="7980089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980092">}</span><span class="op" id="7980093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980100">Name</span><span class="op" id="7980104">:</span>&nbsp;<span class="string" id="7980106">&#34;symlink.zip&#34;</span><span class="op" id="7980119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980123">File</span><span class="op" id="7980127">:</span>&nbsp;<span class="op" id="7980129">[</span><span class="op" id="7980130">]</span><span class="ident" id="7980131">ZipTestFile</span><span class="op" id="7980142">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980153">Name</span><span class="op" id="7980157">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7980162">&#34;symlink&#34;</span><span class="op" id="7980171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980177">Content</span><span class="op" id="7980184">:</span>&nbsp;<span class="op" id="7980186">[</span><span class="op" id="7980187">]</span><span class="builtintype" id="7980188">byte</span><span class="op" id="7980192">(</span><span class="string" id="7980193">&#34;../target&#34;</span><span class="op" id="7980204">)</span><span class="op" id="7980205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980211">Mode</span><span class="op" id="7980215">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7980220">0777</span>&nbsp;<span class="op" id="7980225">|</span>&nbsp;<span class="ident" id="7980227">os</span><span class="op" id="7980229">.</span><span class="ident" id="7980230">ModeSymlink</span><span class="op" id="7980241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980246">}</span><span class="op" id="7980247">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980251">}</span><span class="op" id="7980252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980255">}</span><span class="op" id="7980256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980263">Name</span><span class="op" id="7980267">:</span>&nbsp;<span class="string" id="7980269">&#34;readme.zip&#34;</span><span class="op" id="7980281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980284">}</span><span class="op" id="7980285">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980292">Name</span><span class="op" id="7980296">:</span>&nbsp;&nbsp;<span class="string" id="7980299">&#34;readme.notzip&#34;</span><span class="op" id="7980314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980318">Error</span><span class="op" id="7980323">:</span>&nbsp;<span class="ident" id="7980325">ErrFormat</span><span class="op" id="7980334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980337">}</span><span class="op" id="7980338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980341">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980345">Name</span><span class="op" id="7980349">:</span>&nbsp;<span class="string" id="7980351">&#34;dd.zip&#34;</span><span class="op" id="7980359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980363">File</span><span class="op" id="7980367">:</span>&nbsp;<span class="op" id="7980369">[</span><span class="op" id="7980370">]</span><span class="ident" id="7980371">ZipTestFile</span><span class="op" id="7980382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980393">Name</span><span class="op" id="7980397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7980402">&#34;filename&#34;</span><span class="op" id="7980412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980418">Content</span><span class="op" id="7980425">:</span>&nbsp;<span class="op" id="7980427">[</span><span class="op" id="7980428">]</span><span class="builtintype" id="7980429">byte</span><span class="op" id="7980433">(</span><span class="string" id="7980434">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7980462">)</span><span class="op" id="7980463">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980469">Mtime</span><span class="op" id="7980474">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7980478">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7980497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980503">Mode</span><span class="op" id="7980507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7980512">0666</span><span class="op" id="7980516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980521">}</span><span class="op" id="7980522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980526">}</span><span class="op" id="7980527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980530">}</span><span class="op" id="7980531">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7980538">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980579">Name</span><span class="op" id="7980583">:</span>&nbsp;<span class="string" id="7980585">&#34;winxp.zip&#34;</span><span class="op" id="7980596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980600">File</span><span class="op" id="7980604">:</span>&nbsp;<span class="ident" id="7980606">crossPlatform</span><span class="op" id="7980619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980622">}</span><span class="op" id="7980623">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7980630">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980666">Name</span><span class="op" id="7980670">:</span>&nbsp;<span class="string" id="7980672">&#34;unix.zip&#34;</span><span class="op" id="7980682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980686">File</span><span class="op" id="7980690">:</span>&nbsp;<span class="ident" id="7980692">crossPlatform</span><span class="op" id="7980705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980708">}</span><span class="op" id="7980709">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7980716">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7980772">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980828">Name</span><span class="op" id="7980832">:</span>&nbsp;<span class="string" id="7980834">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7980858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980862">File</span><span class="op" id="7980866">:</span>&nbsp;<span class="op" id="7980868">[</span><span class="op" id="7980869">]</span><span class="ident" id="7980870">ZipTestFile</span><span class="op" id="7980881">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980892">Name</span><span class="op" id="7980896">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7980901">&#34;foo.txt&#34;</span><span class="op" id="7980910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980916">Content</span><span class="op" id="7980923">:</span>&nbsp;<span class="op" id="7980925">[</span><span class="op" id="7980926">]</span><span class="builtintype" id="7980927">byte</span><span class="op" id="7980931">(</span><span class="string" id="7980932">&#34;foo\n&#34;</span><span class="op" id="7980939">)</span><span class="op" id="7980940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980946">Mtime</span><span class="op" id="7980951">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7980955">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7980974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7980980">Mode</span><span class="op" id="7980984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7980989">0644</span><span class="op" id="7980993">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7980998">}</span><span class="op" id="7980999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981010">Name</span><span class="op" id="7981014">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7981019">&#34;bar.txt&#34;</span><span class="op" id="7981028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981034">Content</span><span class="op" id="7981041">:</span>&nbsp;<span class="op" id="7981043">[</span><span class="op" id="7981044">]</span><span class="builtintype" id="7981045">byte</span><span class="op" id="7981049">(</span><span class="string" id="7981050">&#34;bar\n&#34;</span><span class="op" id="7981057">)</span><span class="op" id="7981058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981064">Mtime</span><span class="op" id="7981069">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981073">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7981092">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981098">Mode</span><span class="op" id="7981102">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7981107">0644</span><span class="op" id="7981111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981116">}</span><span class="op" id="7981117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981121">}</span><span class="op" id="7981122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981125">}</span><span class="op" id="7981126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981129">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981133">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981188">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981244">Name</span><span class="op" id="7981248">:</span>&nbsp;<span class="string" id="7981250">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7981276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981280">File</span><span class="op" id="7981284">:</span>&nbsp;<span class="op" id="7981286">[</span><span class="op" id="7981287">]</span><span class="ident" id="7981288">ZipTestFile</span><span class="op" id="7981299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981304">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981310">Name</span><span class="op" id="7981314">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7981319">&#34;foo.txt&#34;</span><span class="op" id="7981328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981334">Content</span><span class="op" id="7981341">:</span>&nbsp;<span class="op" id="7981343">[</span><span class="op" id="7981344">]</span><span class="builtintype" id="7981345">byte</span><span class="op" id="7981349">(</span><span class="string" id="7981350">&#34;foo\n&#34;</span><span class="op" id="7981357">)</span><span class="op" id="7981358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981364">Mode</span><span class="op" id="7981368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7981373">0666</span><span class="op" id="7981377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981382">}</span><span class="op" id="7981383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981388">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981394">Name</span><span class="op" id="7981398">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7981403">&#34;bar.txt&#34;</span><span class="op" id="7981412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981418">Content</span><span class="op" id="7981425">:</span>&nbsp;<span class="op" id="7981427">[</span><span class="op" id="7981428">]</span><span class="builtintype" id="7981429">byte</span><span class="op" id="7981433">(</span><span class="string" id="7981434">&#34;bar\n&#34;</span><span class="op" id="7981441">)</span><span class="op" id="7981442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981448">Mode</span><span class="op" id="7981452">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7981457">0666</span><span class="op" id="7981461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981466">}</span><span class="op" id="7981467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981471">}</span><span class="op" id="7981472">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981475">}</span><span class="op" id="7981476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981483">Name</span><span class="op" id="7981487">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7981491">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7981521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981525">Source</span><span class="op" id="7981531">:</span>&nbsp;<span class="ident" id="7981533">returnCorruptCRC32Zip</span><span class="op" id="7981554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981558">File</span><span class="op" id="7981562">:</span>&nbsp;<span class="op" id="7981564">[</span><span class="op" id="7981565">]</span><span class="ident" id="7981566">ZipTestFile</span><span class="op" id="7981577">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981588">Name</span><span class="op" id="7981592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7981600">&#34;foo.txt&#34;</span><span class="op" id="7981609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981615">Content</span><span class="op" id="7981622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7981627">[</span><span class="op" id="7981628">]</span><span class="builtintype" id="7981629">byte</span><span class="op" id="7981633">(</span><span class="string" id="7981634">&#34;foo\n&#34;</span><span class="op" id="7981641">)</span><span class="op" id="7981642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981648">Mode</span><span class="op" id="7981652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7981660">0666</span><span class="op" id="7981664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981670">ContentErr</span><span class="op" id="7981680">:</span>&nbsp;<span class="ident" id="7981682">ErrChecksum</span><span class="op" id="7981693">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981698">}</span><span class="op" id="7981699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981710">Name</span><span class="op" id="7981714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7981719">&#34;bar.txt&#34;</span><span class="op" id="7981728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981734">Content</span><span class="op" id="7981741">:</span>&nbsp;<span class="op" id="7981743">[</span><span class="op" id="7981744">]</span><span class="builtintype" id="7981745">byte</span><span class="op" id="7981749">(</span><span class="string" id="7981750">&#34;bar\n&#34;</span><span class="op" id="7981757">)</span><span class="op" id="7981758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981764">Mode</span><span class="op" id="7981768">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7981773">0666</span><span class="op" id="7981777">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981782">}</span><span class="op" id="7981783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981787">}</span><span class="op" id="7981788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981791">}</span><span class="op" id="7981792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981795">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7981855">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981922">Name</span><span class="op" id="7981926">:</span>&nbsp;<span class="string" id="7981928">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7981952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981956">File</span><span class="op" id="7981960">:</span>&nbsp;<span class="op" id="7981962">[</span><span class="op" id="7981963">]</span><span class="ident" id="7981964">ZipTestFile</span><span class="op" id="7981975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7981980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7981986">Name</span><span class="op" id="7981990">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7981995">&#34;foo.txt&#34;</span><span class="op" id="7982004">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982010">Content</span><span class="op" id="7982017">:</span>&nbsp;<span class="op" id="7982019">[</span><span class="op" id="7982020">]</span><span class="builtintype" id="7982021">byte</span><span class="op" id="7982025">(</span><span class="string" id="7982026">&#34;foo\n&#34;</span><span class="op" id="7982033">)</span><span class="op" id="7982034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982040">Mtime</span><span class="op" id="7982045">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982049">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7982068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982074">Mode</span><span class="op" id="7982078">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7982083">0644</span><span class="op" id="7982087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982092">}</span><span class="op" id="7982093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982098">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982104">Name</span><span class="op" id="7982108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982113">&#34;bar.txt&#34;</span><span class="op" id="7982122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982128">Content</span><span class="op" id="7982135">:</span>&nbsp;<span class="op" id="7982137">[</span><span class="op" id="7982138">]</span><span class="builtintype" id="7982139">byte</span><span class="op" id="7982143">(</span><span class="string" id="7982144">&#34;bar\n&#34;</span><span class="op" id="7982151">)</span><span class="op" id="7982152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982158">Mtime</span><span class="op" id="7982163">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982167">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7982186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982192">Mode</span><span class="op" id="7982196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7982201">0644</span><span class="op" id="7982205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982210">}</span><span class="op" id="7982211">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982215">}</span><span class="op" id="7982216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982219">}</span><span class="op" id="7982220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982223">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982285">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982348">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982352">Name</span><span class="op" id="7982356">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982360">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7982384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982388">Source</span><span class="op" id="7982394">:</span>&nbsp;<span class="ident" id="7982396">returnCorruptNotStreamedZip</span><span class="op" id="7982423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982427">File</span><span class="op" id="7982431">:</span>&nbsp;<span class="op" id="7982433">[</span><span class="op" id="7982434">]</span><span class="ident" id="7982435">ZipTestFile</span><span class="op" id="7982446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982457">Name</span><span class="op" id="7982461">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982469">&#34;foo.txt&#34;</span><span class="op" id="7982478">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982484">Content</span><span class="op" id="7982491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7982496">[</span><span class="op" id="7982497">]</span><span class="builtintype" id="7982498">byte</span><span class="op" id="7982502">(</span><span class="string" id="7982503">&#34;foo\n&#34;</span><span class="op" id="7982510">)</span><span class="op" id="7982511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982517">Mtime</span><span class="op" id="7982522">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982529">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7982548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982554">Mode</span><span class="op" id="7982558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7982566">0644</span><span class="op" id="7982570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982576">ContentErr</span><span class="op" id="7982586">:</span>&nbsp;<span class="ident" id="7982588">ErrChecksum</span><span class="op" id="7982599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982604">}</span><span class="op" id="7982605">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982616">Name</span><span class="op" id="7982620">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982625">&#34;bar.txt&#34;</span><span class="op" id="7982634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982640">Content</span><span class="op" id="7982647">:</span>&nbsp;<span class="op" id="7982649">[</span><span class="op" id="7982650">]</span><span class="builtintype" id="7982651">byte</span><span class="op" id="7982655">(</span><span class="string" id="7982656">&#34;bar\n&#34;</span><span class="op" id="7982663">)</span><span class="op" id="7982664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982670">Mtime</span><span class="op" id="7982675">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982679">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7982698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982704">Mode</span><span class="op" id="7982708">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7982713">0644</span><span class="op" id="7982717">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982722">}</span><span class="op" id="7982723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982727">}</span><span class="op" id="7982728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982731">}</span><span class="op" id="7982732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982739">Name</span><span class="op" id="7982743">:</span>&nbsp;<span class="string" id="7982745">&#34;zip64.zip&#34;</span><span class="op" id="7982756">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982760">File</span><span class="op" id="7982764">:</span>&nbsp;<span class="op" id="7982766">[</span><span class="op" id="7982767">]</span><span class="ident" id="7982768">ZipTestFile</span><span class="op" id="7982779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982790">Name</span><span class="op" id="7982794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7982799">&#34;README&#34;</span><span class="op" id="7982807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982813">Content</span><span class="op" id="7982820">:</span>&nbsp;<span class="op" id="7982822">[</span><span class="op" id="7982823">]</span><span class="builtintype" id="7982824">byte</span><span class="op" id="7982828">(</span><span class="string" id="7982829">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7982868">)</span><span class="op" id="7982869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982875">Mtime</span><span class="op" id="7982880">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7982884">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7982903">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7982909">Mode</span><span class="op" id="7982913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7982918">0644</span><span class="op" id="7982922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982927">}</span><span class="op" id="7982928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982932">}</span><span class="op" id="7982933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7982936">}</span><span class="op" id="7982937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7982940">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983021">Name</span><span class="op" id="7983025">:</span>&nbsp;<span class="string" id="7983027">&#34;zip64-2.zip&#34;</span><span class="op" id="7983040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983044">File</span><span class="op" id="7983048">:</span>&nbsp;<span class="op" id="7983050">[</span><span class="op" id="7983051">]</span><span class="ident" id="7983052">ZipTestFile</span><span class="op" id="7983063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983074">Name</span><span class="op" id="7983078">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7983083">&#34;README&#34;</span><span class="op" id="7983091">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983097">Content</span><span class="op" id="7983104">:</span>&nbsp;<span class="op" id="7983106">[</span><span class="op" id="7983107">]</span><span class="builtintype" id="7983108">byte</span><span class="op" id="7983112">(</span><span class="string" id="7983113">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7983152">)</span><span class="op" id="7983153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983159">Mtime</span><span class="op" id="7983164">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7983168">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7983187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983193">Mode</span><span class="op" id="7983197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7983202">0644</span><span class="op" id="7983206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983211">}</span><span class="op" id="7983212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983216">}</span><span class="op" id="7983217">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983220">}</span><span class="op" id="7983221">,</span><br>
<span class="lineno"></span><span class="op" id="7983223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7983226">var</span>&nbsp;<span class="ident" id="7983230">crossPlatform</span>&nbsp;<span class="op" id="7983244">=</span>&nbsp;<span class="op" id="7983246">[</span><span class="op" id="7983247">]</span><span class="ident" id="7983248">ZipTestFile</span><span class="op" id="7983259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983262">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983266">Name</span><span class="op" id="7983270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7983275">&#34;hello&#34;</span><span class="op" id="7983282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983286">Content</span><span class="op" id="7983293">:</span>&nbsp;<span class="op" id="7983295">[</span><span class="op" id="7983296">]</span><span class="builtintype" id="7983297">byte</span><span class="op" id="7983301">(</span><span class="string" id="7983302">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7983314">)</span><span class="op" id="7983315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983319">Mode</span><span class="op" id="7983323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7983328">0666</span><span class="op" id="7983332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983335">}</span><span class="op" id="7983336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983339">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983343">Name</span><span class="op" id="7983347">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7983352">&#34;dir/bar&#34;</span><span class="op" id="7983361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983365">Content</span><span class="op" id="7983372">:</span>&nbsp;<span class="op" id="7983374">[</span><span class="op" id="7983375">]</span><span class="builtintype" id="7983376">byte</span><span class="op" id="7983380">(</span><span class="string" id="7983381">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7983391">)</span><span class="op" id="7983392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983396">Mode</span><span class="op" id="7983400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7983405">0666</span><span class="op" id="7983409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983412">}</span><span class="op" id="7983413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983416">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983420">Name</span><span class="op" id="7983424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7983429">&#34;dir/empty/&#34;</span><span class="op" id="7983441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983445">Content</span><span class="op" id="7983452">:</span>&nbsp;<span class="op" id="7983454">[</span><span class="op" id="7983455">]</span><span class="builtintype" id="7983456">byte</span><span class="op" id="7983460">{</span><span class="op" id="7983461">}</span><span class="op" id="7983462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983466">Mode</span><span class="op" id="7983470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7983475">os</span><span class="op" id="7983477">.</span><span class="ident" id="7983478">ModeDir</span>&nbsp;<span class="op" id="7983486">|</span>&nbsp;<span class="num" id="7983488">0777</span><span class="op" id="7983492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983495">}</span><span class="op" id="7983496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983499">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983503">Name</span><span class="op" id="7983507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7983512">&#34;readonly&#34;</span><span class="op" id="7983522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983526">Content</span><span class="op" id="7983533">:</span>&nbsp;<span class="op" id="7983535">[</span><span class="op" id="7983536">]</span><span class="builtintype" id="7983537">byte</span><span class="op" id="7983541">(</span><span class="string" id="7983542">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7983558">)</span><span class="op" id="7983559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983563">Mode</span><span class="op" id="7983567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7983572">0444</span><span class="op" id="7983576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983579">}</span><span class="op" id="7983580">,</span><br>
<span class="lineno"></span><span class="op" id="7983582">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7983585">func</span>&nbsp;<span class="ident" id="7983590">TestReader</span><span class="op" id="7983600">(</span><span class="ident" id="7983601">t</span>&nbsp;<span class="op" id="7983603">*</span><span class="ident" id="7983604">testing</span><span class="op" id="7983611">.</span><span class="ident" id="7983612">T</span><span class="op" id="7983613">)</span>&nbsp;<span class="op" id="7983615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983618">for</span>&nbsp;<span class="ident" id="7983622">_</span><span class="op" id="7983623">,</span>&nbsp;<span class="ident" id="7983625">zt</span>&nbsp;<span class="op" id="7983628">:=</span>&nbsp;<span class="keyword" id="7983631">range</span>&nbsp;<span class="ident" id="7983637">tests</span>&nbsp;<span class="op" id="7983643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983647">readTestZip</span><span class="op" id="7983658">(</span><span class="ident" id="7983659">t</span><span class="op" id="7983660">,</span>&nbsp;<span class="ident" id="7983662">zt</span><span class="op" id="7983664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983667">}</span><br>
<span class="lineno">280</span><span class="op" id="7983669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7983672">func</span>&nbsp;<span class="ident" id="7983677">readTestZip</span><span class="op" id="7983688">(</span><span class="ident" id="7983689">t</span>&nbsp;<span class="op" id="7983691">*</span><span class="ident" id="7983692">testing</span><span class="op" id="7983699">.</span><span class="ident" id="7983700">T</span><span class="op" id="7983701">,</span>&nbsp;<span class="ident" id="7983703">zt</span>&nbsp;<span class="ident" id="7983706">ZipTest</span><span class="op" id="7983713">)</span>&nbsp;<span class="op" id="7983715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983718">var</span>&nbsp;<span class="ident" id="7983722">z</span>&nbsp;<span class="op" id="7983724">*</span><span class="ident" id="7983725">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983733">var</span>&nbsp;<span class="ident" id="7983737">err</span>&nbsp;<span class="builtintype" id="7983741">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983748">if</span>&nbsp;<span class="ident" id="7983751">zt</span><span class="op" id="7983753">.</span><span class="ident" id="7983754">Source</span>&nbsp;<span class="op" id="7983761">!=</span>&nbsp;<span class="ident" id="7983764">nil</span>&nbsp;<span class="op" id="7983768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983772">rat</span><span class="op" id="7983775">,</span>&nbsp;<span class="ident" id="7983777">size</span>&nbsp;<span class="op" id="7983782">:=</span>&nbsp;<span class="ident" id="7983785">zt</span><span class="op" id="7983787">.</span><span class="ident" id="7983788">Source</span><span class="op" id="7983794">(</span><span class="op" id="7983795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983799">z</span><span class="op" id="7983800">,</span>&nbsp;<span class="ident" id="7983802">err</span>&nbsp;<span class="op" id="7983806">=</span>&nbsp;<span class="ident" id="7983808">NewReader</span><span class="op" id="7983817">(</span><span class="ident" id="7983818">rat</span><span class="op" id="7983821">,</span>&nbsp;<span class="ident" id="7983823">size</span><span class="op" id="7983827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983830">}</span>&nbsp;<span class="keyword" id="7983832">else</span>&nbsp;<span class="op" id="7983837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983841">var</span>&nbsp;<span class="ident" id="7983845">rc</span>&nbsp;<span class="op" id="7983848">*</span><span class="ident" id="7983849">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983862">rc</span><span class="op" id="7983864">,</span>&nbsp;<span class="ident" id="7983866">err</span>&nbsp;<span class="op" id="7983870">=</span>&nbsp;<span class="ident" id="7983872">OpenReader</span><span class="op" id="7983882">(</span><span class="ident" id="7983883">filepath</span><span class="op" id="7983891">.</span><span class="ident" id="7983892">Join</span><span class="op" id="7983896">(</span><span class="string" id="7983897">&#34;testdata&#34;</span><span class="op" id="7983907">,</span>&nbsp;<span class="ident" id="7983909">zt</span><span class="op" id="7983911">.</span><span class="ident" id="7983912">Name</span><span class="op" id="7983916">)</span><span class="op" id="7983917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983921">if</span>&nbsp;<span class="ident" id="7983924">err</span>&nbsp;<span class="op" id="7983928">==</span>&nbsp;<span class="ident" id="7983931">nil</span>&nbsp;<span class="op" id="7983935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983940">defer</span>&nbsp;<span class="ident" id="7983946">rc</span><span class="op" id="7983948">.</span><span class="ident" id="7983949">Close</span><span class="op" id="7983954">(</span><span class="op" id="7983955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7983960">z</span>&nbsp;<span class="op" id="7983962">=</span>&nbsp;<span class="op" id="7983964">&amp;</span><span class="ident" id="7983965">rc</span><span class="op" id="7983967">.</span><span class="ident" id="7983968">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983977">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7983980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7983983">if</span>&nbsp;<span class="ident" id="7983986">err</span>&nbsp;<span class="op" id="7983990">!=</span>&nbsp;<span class="ident" id="7983993">zt</span><span class="op" id="7983995">.</span><span class="ident" id="7983996">Error</span>&nbsp;<span class="op" id="7984002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984006">t</span><span class="op" id="7984007">.</span><span class="ident" id="7984008">Errorf</span><span class="op" id="7984014">(</span><span class="string" id="7984015">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7984038">,</span>&nbsp;<span class="ident" id="7984040">zt</span><span class="op" id="7984042">.</span><span class="ident" id="7984043">Name</span><span class="op" id="7984047">,</span>&nbsp;<span class="ident" id="7984049">err</span><span class="op" id="7984052">,</span>&nbsp;<span class="ident" id="7984054">zt</span><span class="op" id="7984056">.</span><span class="ident" id="7984057">Error</span><span class="op" id="7984062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984066">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984074">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984078">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984106">if</span>&nbsp;<span class="ident" id="7984109">err</span>&nbsp;<span class="op" id="7984113">==</span>&nbsp;<span class="ident" id="7984116">ErrFormat</span>&nbsp;<span class="op" id="7984126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984130">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984138">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984142">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984190">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984254">if</span>&nbsp;<span class="ident" id="7984257">zt</span><span class="op" id="7984259">.</span><span class="ident" id="7984260">File</span>&nbsp;<span class="op" id="7984265">==</span>&nbsp;<span class="ident" id="7984268">nil</span>&nbsp;<span class="op" id="7984272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984276">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984288">if</span>&nbsp;<span class="ident" id="7984291">z</span><span class="op" id="7984292">.</span><span class="ident" id="7984293">Comment</span>&nbsp;<span class="op" id="7984301">!=</span>&nbsp;<span class="ident" id="7984304">zt</span><span class="op" id="7984306">.</span><span class="ident" id="7984307">Comment</span>&nbsp;<span class="op" id="7984315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984319">t</span><span class="op" id="7984320">.</span><span class="ident" id="7984321">Errorf</span><span class="op" id="7984327">(</span><span class="string" id="7984328">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7984353">,</span>&nbsp;<span class="ident" id="7984355">zt</span><span class="op" id="7984357">.</span><span class="ident" id="7984358">Name</span><span class="op" id="7984362">,</span>&nbsp;<span class="ident" id="7984364">z</span><span class="op" id="7984365">.</span><span class="ident" id="7984366">Comment</span><span class="op" id="7984373">,</span>&nbsp;<span class="ident" id="7984375">zt</span><span class="op" id="7984377">.</span><span class="ident" id="7984378">Comment</span><span class="op" id="7984385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984388">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984391">if</span>&nbsp;<span class="builtinfunc" id="7984394">len</span><span class="op" id="7984397">(</span><span class="ident" id="7984398">z</span><span class="op" id="7984399">.</span><span class="ident" id="7984400">File</span><span class="op" id="7984404">)</span>&nbsp;<span class="op" id="7984406">!=</span>&nbsp;<span class="builtinfunc" id="7984409">len</span><span class="op" id="7984412">(</span><span class="ident" id="7984413">zt</span><span class="op" id="7984415">.</span><span class="ident" id="7984416">File</span><span class="op" id="7984420">)</span>&nbsp;<span class="op" id="7984422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984426">t</span><span class="op" id="7984427">.</span><span class="ident" id="7984428">Fatalf</span><span class="op" id="7984434">(</span><span class="string" id="7984435">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7984463">,</span>&nbsp;<span class="ident" id="7984465">zt</span><span class="op" id="7984467">.</span><span class="ident" id="7984468">Name</span><span class="op" id="7984472">,</span>&nbsp;<span class="builtinfunc" id="7984474">len</span><span class="op" id="7984477">(</span><span class="ident" id="7984478">z</span><span class="op" id="7984479">.</span><span class="ident" id="7984480">File</span><span class="op" id="7984484">)</span><span class="op" id="7984485">,</span>&nbsp;<span class="builtinfunc" id="7984487">len</span><span class="op" id="7984490">(</span><span class="ident" id="7984491">zt</span><span class="op" id="7984493">.</span><span class="ident" id="7984494">File</span><span class="op" id="7984498">)</span><span class="op" id="7984499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984506">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984533">for</span>&nbsp;<span class="ident" id="7984537">i</span><span class="op" id="7984538">,</span>&nbsp;<span class="ident" id="7984540">ft</span>&nbsp;<span class="op" id="7984543">:=</span>&nbsp;<span class="keyword" id="7984546">range</span>&nbsp;<span class="ident" id="7984552">zt</span><span class="op" id="7984554">.</span><span class="ident" id="7984555">File</span>&nbsp;<span class="op" id="7984560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984564">readTestFile</span><span class="op" id="7984576">(</span><span class="ident" id="7984577">t</span><span class="op" id="7984578">,</span>&nbsp;<span class="ident" id="7984580">zt</span><span class="op" id="7984582">,</span>&nbsp;<span class="ident" id="7984584">ft</span><span class="op" id="7984586">,</span>&nbsp;<span class="ident" id="7984588">z</span><span class="op" id="7984589">.</span><span class="ident" id="7984590">File</span><span class="op" id="7984594">[</span><span class="ident" id="7984595">i</span><span class="op" id="7984596">]</span><span class="op" id="7984597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7984604">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984632">n</span>&nbsp;<span class="op" id="7984634">:=</span>&nbsp;<span class="num" id="7984637">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984640">done</span>&nbsp;<span class="op" id="7984645">:=</span>&nbsp;<span class="builtinfunc" id="7984648">make</span><span class="op" id="7984652">(</span><span class="keyword" id="7984653">chan</span>&nbsp;<span class="builtintype" id="7984658">bool</span><span class="op" id="7984662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984665">for</span>&nbsp;<span class="ident" id="7984669">i</span>&nbsp;<span class="op" id="7984671">:=</span>&nbsp;<span class="num" id="7984674">0</span><span class="op" id="7984675">;</span>&nbsp;<span class="ident" id="7984677">i</span>&nbsp;<span class="op" id="7984679">&lt;</span>&nbsp;<span class="num" id="7984681">5</span><span class="op" id="7984682">;</span>&nbsp;<span class="ident" id="7984684">i</span><span class="op" id="7984685">++</span>&nbsp;<span class="op" id="7984688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984692">for</span>&nbsp;<span class="ident" id="7984696">j</span><span class="op" id="7984697">,</span>&nbsp;<span class="ident" id="7984699">ft</span>&nbsp;<span class="op" id="7984702">:=</span>&nbsp;<span class="keyword" id="7984705">range</span>&nbsp;<span class="ident" id="7984711">zt</span><span class="op" id="7984713">.</span><span class="ident" id="7984714">File</span>&nbsp;<span class="op" id="7984719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984724">go</span>&nbsp;<span class="keyword" id="7984727">func</span><span class="op" id="7984731">(</span><span class="ident" id="7984732">j</span>&nbsp;<span class="builtintype" id="7984734">int</span><span class="op" id="7984737">,</span>&nbsp;<span class="ident" id="7984739">ft</span>&nbsp;<span class="ident" id="7984742">ZipTestFile</span><span class="op" id="7984753">)</span>&nbsp;<span class="op" id="7984755">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984761">readTestFile</span><span class="op" id="7984773">(</span><span class="ident" id="7984774">t</span><span class="op" id="7984775">,</span>&nbsp;<span class="ident" id="7984777">zt</span><span class="op" id="7984779">,</span>&nbsp;<span class="ident" id="7984781">ft</span><span class="op" id="7984783">,</span>&nbsp;<span class="ident" id="7984785">z</span><span class="op" id="7984786">.</span><span class="ident" id="7984787">File</span><span class="op" id="7984791">[</span><span class="ident" id="7984792">j</span><span class="op" id="7984793">]</span><span class="op" id="7984794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984800">done</span>&nbsp;<span class="op" id="7984805">&lt;-</span>&nbsp;<span class="builtintype" id="7984808">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984816">}</span><span class="op" id="7984817">(</span><span class="ident" id="7984818">j</span><span class="op" id="7984819">,</span>&nbsp;<span class="ident" id="7984821">ft</span><span class="op" id="7984823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984828">n</span><span class="op" id="7984829">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984834">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984840">for</span>&nbsp;<span class="op" id="7984844">;</span>&nbsp;<span class="ident" id="7984846">n</span>&nbsp;<span class="op" id="7984848">&gt;</span>&nbsp;<span class="num" id="7984850">0</span><span class="op" id="7984851">;</span>&nbsp;<span class="ident" id="7984853">n</span><span class="op" id="7984854">--</span>&nbsp;<span class="op" id="7984857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984861">&lt;-</span><span class="ident" id="7984863">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7984869">}</span><br>
<span class="lineno"></span><span class="op" id="7984871">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7984874">func</span>&nbsp;<span class="ident" id="7984879">readTestFile</span><span class="op" id="7984891">(</span><span class="ident" id="7984892">t</span>&nbsp;<span class="op" id="7984894">*</span><span class="ident" id="7984895">testing</span><span class="op" id="7984902">.</span><span class="ident" id="7984903">T</span><span class="op" id="7984904">,</span>&nbsp;<span class="ident" id="7984906">zt</span>&nbsp;<span class="ident" id="7984909">ZipTest</span><span class="op" id="7984916">,</span>&nbsp;<span class="ident" id="7984918">ft</span>&nbsp;<span class="ident" id="7984921">ZipTestFile</span><span class="op" id="7984932">,</span>&nbsp;<span class="ident" id="7984934">f</span>&nbsp;<span class="op" id="7984936">*</span><span class="ident" id="7984937">File</span><span class="op" id="7984941">)</span>&nbsp;<span class="op" id="7984943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7984946">if</span>&nbsp;<span class="ident" id="7984949">f</span><span class="op" id="7984950">.</span><span class="ident" id="7984951">Name</span>&nbsp;<span class="op" id="7984956">!=</span>&nbsp;<span class="ident" id="7984959">ft</span><span class="op" id="7984961">.</span><span class="ident" id="7984962">Name</span>&nbsp;<span class="op" id="7984967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7984971">t</span><span class="op" id="7984972">.</span><span class="ident" id="7984973">Errorf</span><span class="op" id="7984979">(</span><span class="string" id="7984980">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7985002">,</span>&nbsp;<span class="ident" id="7985004">zt</span><span class="op" id="7985006">.</span><span class="ident" id="7985007">Name</span><span class="op" id="7985011">,</span>&nbsp;<span class="ident" id="7985013">f</span><span class="op" id="7985014">.</span><span class="ident" id="7985015">Name</span><span class="op" id="7985019">,</span>&nbsp;<span class="ident" id="7985021">ft</span><span class="op" id="7985023">.</span><span class="ident" id="7985024">Name</span><span class="op" id="7985028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985031">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985035">if</span>&nbsp;<span class="ident" id="7985038">ft</span><span class="op" id="7985040">.</span><span class="ident" id="7985041">Mtime</span>&nbsp;<span class="op" id="7985047">!=</span>&nbsp;<span class="string" id="7985050">&#34;&#34;</span>&nbsp;<span class="op" id="7985053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985057">mtime</span><span class="op" id="7985062">,</span>&nbsp;<span class="ident" id="7985064">err</span>&nbsp;<span class="op" id="7985068">:=</span>&nbsp;<span class="ident" id="7985071">time</span><span class="op" id="7985075">.</span><span class="ident" id="7985076">Parse</span><span class="op" id="7985081">(</span><span class="string" id="7985082">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7985101">,</span>&nbsp;<span class="ident" id="7985103">ft</span><span class="op" id="7985105">.</span><span class="ident" id="7985106">Mtime</span><span class="op" id="7985111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985115">if</span>&nbsp;<span class="ident" id="7985118">err</span>&nbsp;<span class="op" id="7985122">!=</span>&nbsp;<span class="ident" id="7985125">nil</span>&nbsp;<span class="op" id="7985129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985134">t</span><span class="op" id="7985135">.</span><span class="ident" id="7985136">Error</span><span class="op" id="7985141">(</span><span class="ident" id="7985142">err</span><span class="op" id="7985145">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985150">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985163">if</span>&nbsp;<span class="ident" id="7985166">ft</span>&nbsp;<span class="op" id="7985169">:=</span>&nbsp;<span class="ident" id="7985172">f</span><span class="op" id="7985173">.</span><span class="ident" id="7985174">ModTime</span><span class="op" id="7985181">(</span><span class="op" id="7985182">)</span><span class="op" id="7985183">;</span>&nbsp;<span class="op" id="7985185">!</span><span class="ident" id="7985186">ft</span><span class="op" id="7985188">.</span><span class="ident" id="7985189">Equal</span><span class="op" id="7985194">(</span><span class="ident" id="7985195">mtime</span><span class="op" id="7985200">)</span>&nbsp;<span class="op" id="7985202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985207">t</span><span class="op" id="7985208">.</span><span class="ident" id="7985209">Errorf</span><span class="op" id="7985215">(</span><span class="string" id="7985216">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7985243">,</span>&nbsp;<span class="ident" id="7985245">zt</span><span class="op" id="7985247">.</span><span class="ident" id="7985248">Name</span><span class="op" id="7985252">,</span>&nbsp;<span class="ident" id="7985254">f</span><span class="op" id="7985255">.</span><span class="ident" id="7985256">Name</span><span class="op" id="7985260">,</span>&nbsp;<span class="ident" id="7985262">ft</span><span class="op" id="7985264">,</span>&nbsp;<span class="ident" id="7985266">mtime</span><span class="op" id="7985271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985275">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985282">testFileMode</span><span class="op" id="7985294">(</span><span class="ident" id="7985295">t</span><span class="op" id="7985296">,</span>&nbsp;<span class="ident" id="7985298">zt</span><span class="op" id="7985300">.</span><span class="ident" id="7985301">Name</span><span class="op" id="7985305">,</span>&nbsp;<span class="ident" id="7985307">f</span><span class="op" id="7985308">,</span>&nbsp;<span class="ident" id="7985310">ft</span><span class="op" id="7985312">.</span><span class="ident" id="7985313">Mode</span><span class="op" id="7985317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985321">var</span>&nbsp;<span class="ident" id="7985325">b</span>&nbsp;<span class="ident" id="7985327">bytes</span><span class="op" id="7985332">.</span><span class="ident" id="7985333">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985341">r</span><span class="op" id="7985342">,</span>&nbsp;<span class="ident" id="7985344">err</span>&nbsp;<span class="op" id="7985348">:=</span>&nbsp;<span class="ident" id="7985351">f</span><span class="op" id="7985352">.</span><span class="ident" id="7985353">Open</span><span class="op" id="7985357">(</span><span class="op" id="7985358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985361">if</span>&nbsp;<span class="ident" id="7985364">err</span>&nbsp;<span class="op" id="7985368">!=</span>&nbsp;<span class="ident" id="7985371">nil</span>&nbsp;<span class="op" id="7985375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985379">t</span><span class="op" id="7985380">.</span><span class="ident" id="7985381">Errorf</span><span class="op" id="7985387">(</span><span class="string" id="7985388">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7985396">,</span>&nbsp;<span class="ident" id="7985398">zt</span><span class="op" id="7985400">.</span><span class="ident" id="7985401">Name</span><span class="op" id="7985405">,</span>&nbsp;<span class="ident" id="7985407">err</span><span class="op" id="7985410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985414">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985422">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985426">_</span><span class="op" id="7985427">,</span>&nbsp;<span class="ident" id="7985429">err</span>&nbsp;<span class="op" id="7985433">=</span>&nbsp;<span class="ident" id="7985435">io</span><span class="op" id="7985437">.</span><span class="ident" id="7985438">Copy</span><span class="op" id="7985442">(</span><span class="op" id="7985443">&amp;</span><span class="ident" id="7985444">b</span><span class="op" id="7985445">,</span>&nbsp;<span class="ident" id="7985447">r</span><span class="op" id="7985448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985451">if</span>&nbsp;<span class="ident" id="7985454">err</span>&nbsp;<span class="op" id="7985458">!=</span>&nbsp;<span class="ident" id="7985461">ft</span><span class="op" id="7985463">.</span><span class="ident" id="7985464">ContentErr</span>&nbsp;<span class="op" id="7985475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985479">t</span><span class="op" id="7985480">.</span><span class="ident" id="7985481">Errorf</span><span class="op" id="7985487">(</span><span class="string" id="7985488">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7985524">,</span>&nbsp;<span class="ident" id="7985526">zt</span><span class="op" id="7985528">.</span><span class="ident" id="7985529">Name</span><span class="op" id="7985533">,</span>&nbsp;<span class="ident" id="7985535">err</span><span class="op" id="7985538">,</span>&nbsp;<span class="ident" id="7985540">ft</span><span class="op" id="7985542">.</span><span class="ident" id="7985543">ContentErr</span><span class="op" id="7985553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985556">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985559">if</span>&nbsp;<span class="ident" id="7985562">err</span>&nbsp;<span class="op" id="7985566">!=</span>&nbsp;<span class="ident" id="7985569">nil</span>&nbsp;<span class="op" id="7985573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985577">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985588">r</span><span class="op" id="7985589">.</span><span class="ident" id="7985590">Close</span><span class="op" id="7985595">(</span><span class="op" id="7985596">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985600">size</span>&nbsp;<span class="op" id="7985605">:=</span>&nbsp;<span class="ident" id="7985608">uint64</span><span class="op" id="7985614">(</span><span class="ident" id="7985615">f</span><span class="op" id="7985616">.</span><span class="ident" id="7985617">UncompressedSize</span><span class="op" id="7985633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985636">if</span>&nbsp;<span class="ident" id="7985639">size</span>&nbsp;<span class="op" id="7985644">==</span>&nbsp;<span class="ident" id="7985647">uint32max</span>&nbsp;<span class="op" id="7985657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985661">size</span>&nbsp;<span class="op" id="7985666">=</span>&nbsp;<span class="ident" id="7985668">f</span><span class="op" id="7985669">.</span><span class="ident" id="7985670">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985693">if</span>&nbsp;<span class="ident" id="7985696">g</span>&nbsp;<span class="op" id="7985698">:=</span>&nbsp;<span class="ident" id="7985701">uint64</span><span class="op" id="7985707">(</span><span class="ident" id="7985708">b</span><span class="op" id="7985709">.</span><span class="ident" id="7985710">Len</span><span class="op" id="7985713">(</span><span class="op" id="7985714">)</span><span class="op" id="7985715">)</span><span class="op" id="7985716">;</span>&nbsp;<span class="ident" id="7985718">g</span>&nbsp;<span class="op" id="7985720">!=</span>&nbsp;<span class="ident" id="7985723">size</span>&nbsp;<span class="op" id="7985728">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985732">t</span><span class="op" id="7985733">.</span><span class="ident" id="7985734">Errorf</span><span class="op" id="7985740">(</span><span class="string" id="7985741">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7985789">,</span>&nbsp;<span class="ident" id="7985791">f</span><span class="op" id="7985792">.</span><span class="ident" id="7985793">Name</span><span class="op" id="7985797">,</span>&nbsp;<span class="ident" id="7985799">g</span><span class="op" id="7985800">,</span>&nbsp;<span class="ident" id="7985802">size</span><span class="op" id="7985806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985813">var</span>&nbsp;<span class="ident" id="7985817">c</span>&nbsp;<span class="op" id="7985819">[</span><span class="op" id="7985820">]</span><span class="builtintype" id="7985821">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985827">if</span>&nbsp;<span class="ident" id="7985830">ft</span><span class="op" id="7985832">.</span><span class="ident" id="7985833">Content</span>&nbsp;<span class="op" id="7985841">!=</span>&nbsp;<span class="ident" id="7985844">nil</span>&nbsp;<span class="op" id="7985848">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985852">c</span>&nbsp;<span class="op" id="7985854">=</span>&nbsp;<span class="ident" id="7985856">ft</span><span class="op" id="7985858">.</span><span class="ident" id="7985859">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985868">}</span>&nbsp;<span class="keyword" id="7985870">else</span>&nbsp;<span class="keyword" id="7985875">if</span>&nbsp;<span class="ident" id="7985878">c</span><span class="op" id="7985879">,</span>&nbsp;<span class="ident" id="7985881">err</span>&nbsp;<span class="op" id="7985885">=</span>&nbsp;<span class="ident" id="7985887">ioutil</span><span class="op" id="7985893">.</span><span class="ident" id="7985894">ReadFile</span><span class="op" id="7985902">(</span><span class="string" id="7985903">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7985915">+</span>&nbsp;<span class="ident" id="7985917">ft</span><span class="op" id="7985919">.</span><span class="ident" id="7985920">File</span><span class="op" id="7985924">)</span><span class="op" id="7985925">;</span>&nbsp;<span class="ident" id="7985927">err</span>&nbsp;<span class="op" id="7985931">!=</span>&nbsp;<span class="ident" id="7985934">nil</span>&nbsp;<span class="op" id="7985938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985942">t</span><span class="op" id="7985943">.</span><span class="ident" id="7985944">Error</span><span class="op" id="7985949">(</span><span class="ident" id="7985950">err</span><span class="op" id="7985953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985957">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7985965">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7985969">if</span>&nbsp;<span class="ident" id="7985972">b</span><span class="op" id="7985973">.</span><span class="ident" id="7985974">Len</span><span class="op" id="7985977">(</span><span class="op" id="7985978">)</span>&nbsp;<span class="op" id="7985980">!=</span>&nbsp;<span class="builtinfunc" id="7985983">len</span><span class="op" id="7985986">(</span><span class="ident" id="7985987">c</span><span class="op" id="7985988">)</span>&nbsp;<span class="op" id="7985990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7985994">t</span><span class="op" id="7985995">.</span><span class="ident" id="7985996">Errorf</span><span class="op" id="7986002">(</span><span class="string" id="7986003">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7986024">,</span>&nbsp;<span class="ident" id="7986026">f</span><span class="op" id="7986027">.</span><span class="ident" id="7986028">Name</span><span class="op" id="7986032">,</span>&nbsp;<span class="ident" id="7986034">b</span><span class="op" id="7986035">.</span><span class="ident" id="7986036">Len</span><span class="op" id="7986039">(</span><span class="op" id="7986040">)</span><span class="op" id="7986041">,</span>&nbsp;<span class="builtinfunc" id="7986043">len</span><span class="op" id="7986046">(</span><span class="ident" id="7986047">c</span><span class="op" id="7986048">)</span><span class="op" id="7986049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986053">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986061">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986065">for</span>&nbsp;<span class="ident" id="7986069">i</span><span class="op" id="7986070">,</span>&nbsp;<span class="ident" id="7986072">b</span>&nbsp;<span class="op" id="7986074">:=</span>&nbsp;<span class="keyword" id="7986077">range</span>&nbsp;<span class="ident" id="7986083">b</span><span class="op" id="7986084">.</span><span class="ident" id="7986085">Bytes</span><span class="op" id="7986090">(</span><span class="op" id="7986091">)</span>&nbsp;<span class="op" id="7986093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986097">if</span>&nbsp;<span class="ident" id="7986100">b</span>&nbsp;<span class="op" id="7986102">!=</span>&nbsp;<span class="ident" id="7986105">c</span><span class="op" id="7986106">[</span><span class="ident" id="7986107">i</span><span class="op" id="7986108">]</span>&nbsp;<span class="op" id="7986110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986115">t</span><span class="op" id="7986116">.</span><span class="ident" id="7986117">Errorf</span><span class="op" id="7986123">(</span><span class="string" id="7986124">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7986152">,</span>&nbsp;<span class="ident" id="7986154">f</span><span class="op" id="7986155">.</span><span class="ident" id="7986156">Name</span><span class="op" id="7986160">,</span>&nbsp;<span class="ident" id="7986162">i</span><span class="op" id="7986163">,</span>&nbsp;<span class="ident" id="7986165">b</span><span class="op" id="7986166">,</span>&nbsp;<span class="ident" id="7986168">c</span><span class="op" id="7986169">[</span><span class="ident" id="7986170">i</span><span class="op" id="7986171">]</span><span class="op" id="7986172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986177">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986189">}</span><br>
<span class="lineno"></span><span class="op" id="7986191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7986194">func</span>&nbsp;<span class="ident" id="7986199">testFileMode</span><span class="op" id="7986211">(</span><span class="ident" id="7986212">t</span>&nbsp;<span class="op" id="7986214">*</span><span class="ident" id="7986215">testing</span><span class="op" id="7986222">.</span><span class="ident" id="7986223">T</span><span class="op" id="7986224">,</span>&nbsp;<span class="ident" id="7986226">zipName</span>&nbsp;<span class="builtintype" id="7986234">string</span><span class="op" id="7986240">,</span>&nbsp;<span class="ident" id="7986242">f</span>&nbsp;<span class="op" id="7986244">*</span><span class="ident" id="7986245">File</span><span class="op" id="7986249">,</span>&nbsp;<span class="ident" id="7986251">want</span>&nbsp;<span class="ident" id="7986256">os</span><span class="op" id="7986258">.</span><span class="ident" id="7986259">FileMode</span><span class="op" id="7986267">)</span>&nbsp;<span class="op" id="7986269">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986272">mode</span>&nbsp;<span class="op" id="7986277">:=</span>&nbsp;<span class="ident" id="7986280">f</span><span class="op" id="7986281">.</span><span class="ident" id="7986282">Mode</span><span class="op" id="7986286">(</span><span class="op" id="7986287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986290">if</span>&nbsp;<span class="ident" id="7986293">want</span>&nbsp;<span class="op" id="7986298">==</span>&nbsp;<span class="num" id="7986301">0</span>&nbsp;<span class="op" id="7986303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986307">t</span><span class="op" id="7986308">.</span><span class="ident" id="7986309">Errorf</span><span class="op" id="7986315">(</span><span class="string" id="7986316">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7986348">,</span>&nbsp;<span class="ident" id="7986350">zipName</span><span class="op" id="7986357">,</span>&nbsp;<span class="ident" id="7986359">f</span><span class="op" id="7986360">.</span><span class="ident" id="7986361">Name</span><span class="op" id="7986365">,</span>&nbsp;<span class="ident" id="7986367">mode</span><span class="op" id="7986371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986374">}</span>&nbsp;<span class="keyword" id="7986376">else</span>&nbsp;<span class="keyword" id="7986381">if</span>&nbsp;<span class="ident" id="7986384">mode</span>&nbsp;<span class="op" id="7986389">!=</span>&nbsp;<span class="ident" id="7986392">want</span>&nbsp;<span class="op" id="7986397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986401">t</span><span class="op" id="7986402">.</span><span class="ident" id="7986403">Errorf</span><span class="op" id="7986409">(</span><span class="string" id="7986410">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7986440">,</span>&nbsp;<span class="ident" id="7986442">zipName</span><span class="op" id="7986449">,</span>&nbsp;<span class="ident" id="7986451">f</span><span class="op" id="7986452">.</span><span class="ident" id="7986453">Name</span><span class="op" id="7986457">,</span>&nbsp;<span class="ident" id="7986459">want</span><span class="op" id="7986463">,</span>&nbsp;<span class="ident" id="7986465">mode</span><span class="op" id="7986469">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986472">}</span><br>
<span class="lineno"></span><span class="op" id="7986474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7986477">func</span>&nbsp;<span class="ident" id="7986482">TestInvalidFiles</span><span class="op" id="7986498">(</span><span class="ident" id="7986499">t</span>&nbsp;<span class="op" id="7986501">*</span><span class="ident" id="7986502">testing</span><span class="op" id="7986509">.</span><span class="ident" id="7986510">T</span><span class="op" id="7986511">)</span>&nbsp;<span class="op" id="7986513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986516">const</span>&nbsp;<span class="ident" id="7986522">size</span>&nbsp;<span class="op" id="7986527">=</span>&nbsp;<span class="num" id="7986529">1024</span>&nbsp;<span class="op" id="7986534">*</span>&nbsp;<span class="num" id="7986536">70</span>&nbsp;<span class="comment" id="7986539">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986548">b</span>&nbsp;<span class="op" id="7986550">:=</span>&nbsp;<span class="builtinfunc" id="7986553">make</span><span class="op" id="7986557">(</span><span class="op" id="7986558">[</span><span class="op" id="7986559">]</span><span class="builtintype" id="7986560">byte</span><span class="op" id="7986564">,</span>&nbsp;<span class="ident" id="7986566">size</span><span class="op" id="7986570">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986574">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986585">_</span><span class="op" id="7986586">,</span>&nbsp;<span class="ident" id="7986588">err</span>&nbsp;<span class="op" id="7986592">:=</span>&nbsp;<span class="ident" id="7986595">NewReader</span><span class="op" id="7986604">(</span><span class="ident" id="7986605">bytes</span><span class="op" id="7986610">.</span><span class="ident" id="7986611">NewReader</span><span class="op" id="7986620">(</span><span class="ident" id="7986621">b</span><span class="op" id="7986622">)</span><span class="op" id="7986623">,</span>&nbsp;<span class="ident" id="7986625">size</span><span class="op" id="7986629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986632">if</span>&nbsp;<span class="ident" id="7986635">err</span>&nbsp;<span class="op" id="7986639">!=</span>&nbsp;<span class="ident" id="7986642">ErrFormat</span>&nbsp;<span class="op" id="7986652">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986656">t</span><span class="op" id="7986657">.</span><span class="ident" id="7986658">Errorf</span><span class="op" id="7986664">(</span><span class="string" id="7986665">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7986692">,</span>&nbsp;<span class="ident" id="7986694">err</span><span class="op" id="7986697">,</span>&nbsp;<span class="ident" id="7986699">ErrFormat</span><span class="op" id="7986708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7986715">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986751">sig</span>&nbsp;<span class="op" id="7986755">:=</span>&nbsp;<span class="builtinfunc" id="7986758">make</span><span class="op" id="7986762">(</span><span class="op" id="7986763">[</span><span class="op" id="7986764">]</span><span class="builtintype" id="7986765">byte</span><span class="op" id="7986769">,</span>&nbsp;<span class="num" id="7986771">4</span><span class="op" id="7986772">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986775">binary</span><span class="op" id="7986781">.</span><span class="ident" id="7986782">LittleEndian</span><span class="op" id="7986794">.</span><span class="ident" id="7986795">PutUint32</span><span class="op" id="7986804">(</span><span class="ident" id="7986805">sig</span><span class="op" id="7986808">,</span>&nbsp;<span class="ident" id="7986810">directoryEndSignature</span><span class="op" id="7986831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986834">for</span>&nbsp;<span class="ident" id="7986838">i</span>&nbsp;<span class="op" id="7986840">:=</span>&nbsp;<span class="num" id="7986843">0</span><span class="op" id="7986844">;</span>&nbsp;<span class="ident" id="7986846">i</span>&nbsp;<span class="op" id="7986848">&lt;</span>&nbsp;<span class="ident" id="7986850">size</span><span class="op" id="7986854">-</span><span class="num" id="7986855">4</span><span class="op" id="7986856">;</span>&nbsp;<span class="ident" id="7986858">i</span>&nbsp;<span class="op" id="7986860">+=</span>&nbsp;<span class="num" id="7986863">4</span>&nbsp;<span class="op" id="7986865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7986869">copy</span><span class="op" id="7986873">(</span><span class="ident" id="7986874">b</span><span class="op" id="7986875">[</span><span class="ident" id="7986876">i</span><span class="op" id="7986877">:</span><span class="ident" id="7986878">i</span><span class="op" id="7986879">+</span><span class="num" id="7986880">4</span><span class="op" id="7986881">]</span><span class="op" id="7986882">,</span>&nbsp;<span class="ident" id="7986884">sig</span><span class="op" id="7986887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7986890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986893">_</span><span class="op" id="7986894">,</span>&nbsp;<span class="ident" id="7986896">err</span>&nbsp;<span class="op" id="7986900">=</span>&nbsp;<span class="ident" id="7986902">NewReader</span><span class="op" id="7986911">(</span><span class="ident" id="7986912">bytes</span><span class="op" id="7986917">.</span><span class="ident" id="7986918">NewReader</span><span class="op" id="7986927">(</span><span class="ident" id="7986928">b</span><span class="op" id="7986929">)</span><span class="op" id="7986930">,</span>&nbsp;<span class="ident" id="7986932">size</span><span class="op" id="7986936">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7986939">if</span>&nbsp;<span class="ident" id="7986942">err</span>&nbsp;<span class="op" id="7986946">!=</span>&nbsp;<span class="ident" id="7986949">ErrFormat</span>&nbsp;<span class="op" id="7986959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7986963">t</span><span class="op" id="7986964">.</span><span class="ident" id="7986965">Errorf</span><span class="op" id="7986971">(</span><span class="string" id="7986972">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7986997">,</span>&nbsp;<span class="ident" id="7986999">err</span><span class="op" id="7987002">,</span>&nbsp;<span class="ident" id="7987004">ErrFormat</span><span class="op" id="7987013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987016">}</span><br>
<span class="lineno"></span><span class="op" id="7987018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7987021">func</span>&nbsp;<span class="ident" id="7987026">messWith</span><span class="op" id="7987034">(</span><span class="ident" id="7987035">fileName</span>&nbsp;<span class="builtintype" id="7987044">string</span><span class="op" id="7987050">,</span>&nbsp;<span class="ident" id="7987052">corrupter</span>&nbsp;<span class="keyword" id="7987062">func</span><span class="op" id="7987066">(</span><span class="ident" id="7987067">b</span>&nbsp;<span class="op" id="7987069">[</span><span class="op" id="7987070">]</span><span class="builtintype" id="7987071">byte</span><span class="op" id="7987075">)</span><span class="op" id="7987076">)</span>&nbsp;<span class="op" id="7987078">(</span><span class="ident" id="7987079">r</span>&nbsp;<span class="ident" id="7987081">io</span><span class="op" id="7987083">.</span><span class="ident" id="7987084">ReaderAt</span><span class="op" id="7987092">,</span>&nbsp;<span class="ident" id="7987094">size</span>&nbsp;<span class="ident" id="7987099">int64</span><span class="op" id="7987104">)</span>&nbsp;<span class="op" id="7987106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987109">data</span><span class="op" id="7987113">,</span>&nbsp;<span class="ident" id="7987115">err</span>&nbsp;<span class="op" id="7987119">:=</span>&nbsp;<span class="ident" id="7987122">ioutil</span><span class="op" id="7987128">.</span><span class="ident" id="7987129">ReadFile</span><span class="op" id="7987137">(</span><span class="ident" id="7987138">filepath</span><span class="op" id="7987146">.</span><span class="ident" id="7987147">Join</span><span class="op" id="7987151">(</span><span class="string" id="7987152">&#34;testdata&#34;</span><span class="op" id="7987162">,</span>&nbsp;<span class="ident" id="7987164">fileName</span><span class="op" id="7987172">)</span><span class="op" id="7987173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987176">if</span>&nbsp;<span class="ident" id="7987179">err</span>&nbsp;<span class="op" id="7987183">!=</span>&nbsp;<span class="ident" id="7987186">nil</span>&nbsp;<span class="op" id="7987190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7987194">panic</span><span class="op" id="7987199">(</span><span class="string" id="7987200">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7987217">+</span>&nbsp;<span class="ident" id="7987219">fileName</span>&nbsp;<span class="op" id="7987228">+</span>&nbsp;<span class="string" id="7987230">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7987235">+</span>&nbsp;<span class="ident" id="7987237">err</span><span class="op" id="7987240">.</span><span class="ident" id="7987241">Error</span><span class="op" id="7987246">(</span><span class="op" id="7987247">)</span><span class="op" id="7987248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987251">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987254">corrupter</span><span class="op" id="7987263">(</span><span class="ident" id="7987264">data</span><span class="op" id="7987268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987271">return</span>&nbsp;<span class="ident" id="7987278">bytes</span><span class="op" id="7987283">.</span><span class="ident" id="7987284">NewReader</span><span class="op" id="7987293">(</span><span class="ident" id="7987294">data</span><span class="op" id="7987298">)</span><span class="op" id="7987299">,</span>&nbsp;<span class="ident" id="7987301">int64</span><span class="op" id="7987306">(</span><span class="builtinfunc" id="7987307">len</span><span class="op" id="7987310">(</span><span class="ident" id="7987311">data</span><span class="op" id="7987315">)</span><span class="op" id="7987316">)</span><br>
<span class="lineno"></span><span class="op" id="7987318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7987321">func</span>&nbsp;<span class="ident" id="7987326">returnCorruptCRC32Zip</span><span class="op" id="7987347">(</span><span class="op" id="7987348">)</span>&nbsp;<span class="op" id="7987350">(</span><span class="ident" id="7987351">r</span>&nbsp;<span class="ident" id="7987353">io</span><span class="op" id="7987355">.</span><span class="ident" id="7987356">ReaderAt</span><span class="op" id="7987364">,</span>&nbsp;<span class="ident" id="7987366">size</span>&nbsp;<span class="ident" id="7987371">int64</span><span class="op" id="7987376">)</span>&nbsp;<span class="op" id="7987378">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987381">return</span>&nbsp;<span class="ident" id="7987388">messWith</span><span class="op" id="7987396">(</span><span class="string" id="7987397">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7987423">,</span>&nbsp;<span class="keyword" id="7987425">func</span><span class="op" id="7987429">(</span><span class="ident" id="7987430">b</span>&nbsp;<span class="op" id="7987432">[</span><span class="op" id="7987433">]</span><span class="builtintype" id="7987434">byte</span><span class="op" id="7987438">)</span>&nbsp;<span class="op" id="7987440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987444">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987499">b</span><span class="op" id="7987500">[</span><span class="num" id="7987501">0x2d</span><span class="op" id="7987505">]</span><span class="op" id="7987506">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7987510">}</span><span class="op" id="7987511">)</span><br>
<span class="lineno"></span><span class="op" id="7987513">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7987516">func</span>&nbsp;<span class="ident" id="7987521">returnCorruptNotStreamedZip</span><span class="op" id="7987548">(</span><span class="op" id="7987549">)</span>&nbsp;<span class="op" id="7987551">(</span><span class="ident" id="7987552">r</span>&nbsp;<span class="ident" id="7987554">io</span><span class="op" id="7987556">.</span><span class="ident" id="7987557">ReaderAt</span><span class="op" id="7987565">,</span>&nbsp;<span class="ident" id="7987567">size</span>&nbsp;<span class="ident" id="7987572">int64</span><span class="op" id="7987577">)</span>&nbsp;<span class="op" id="7987579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7987582">return</span>&nbsp;<span class="ident" id="7987589">messWith</span><span class="op" id="7987597">(</span><span class="string" id="7987598">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7987622">,</span>&nbsp;<span class="keyword" id="7987624">func</span><span class="op" id="7987628">(</span><span class="ident" id="7987629">b</span>&nbsp;<span class="op" id="7987631">[</span><span class="op" id="7987632">]</span><span class="builtintype" id="7987633">byte</span><span class="op" id="7987637">)</span>&nbsp;<span class="op" id="7987639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987643">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987692">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987737">b</span><span class="op" id="7987738">[</span><span class="num" id="7987739">0x11</span><span class="op" id="7987743">]</span><span class="op" id="7987744">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7987749">b</span><span class="op" id="7987750">[</span><span class="num" id="7987751">0x9d</span><span class="op" id="7987755">]</span><span class="op" id="7987756">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987762">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987817">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987874">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987932">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7987986">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7988041">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7988062">}</span><span class="op" id="7988063">)</span><br>
<span class="lineno">465</span><span class="op" id="7988065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7988068">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7988132">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7988193">func</span>&nbsp;<span class="ident" id="7988198">rZipBytes</span><span class="op" id="7988207">(</span><span class="op" id="7988208">)</span>&nbsp;<span class="op" id="7988210">[</span><span class="op" id="7988211">]</span><span class="builtintype" id="7988212">byte</span>&nbsp;<span class="op" id="7988217">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7988220">s</span>&nbsp;<span class="op" id="7988222">:=</span>&nbsp;<span class="string" id="7988225">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989773">s</span>&nbsp;<span class="op" id="7989775">=</span>&nbsp;<span class="ident" id="7989777">regexp</span><span class="op" id="7989783">.</span><span class="ident" id="7989784">MustCompile</span><span class="op" id="7989795">(</span><span class="string" id="7989796">`[0-9a-f]{7}`</span><span class="op" id="7989809">)</span><span class="op" id="7989810">.</span><span class="ident" id="7989811">ReplaceAllString</span><span class="op" id="7989827">(</span><span class="ident" id="7989828">s</span><span class="op" id="7989829">,</span>&nbsp;<span class="string" id="7989831">&#34;&#34;</span><span class="op" id="7989833">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989836">s</span>&nbsp;<span class="op" id="7989838">=</span>&nbsp;<span class="ident" id="7989840">regexp</span><span class="op" id="7989846">.</span><span class="ident" id="7989847">MustCompile</span><span class="op" id="7989858">(</span><span class="string" id="7989859">`\s+`</span><span class="op" id="7989864">)</span><span class="op" id="7989865">.</span><span class="ident" id="7989866">ReplaceAllString</span><span class="op" id="7989882">(</span><span class="ident" id="7989883">s</span><span class="op" id="7989884">,</span>&nbsp;<span class="string" id="7989886">&#34;&#34;</span><span class="op" id="7989888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7989891">b</span><span class="op" id="7989892">,</span>&nbsp;<span class="ident" id="7989894">err</span>&nbsp;<span class="op" id="7989898">:=</span>&nbsp;<span class="ident" id="7989901">hex</span><span class="op" id="7989904">.</span><span class="ident" id="7989905">DecodeString</span><span class="op" id="7989917">(</span><span class="ident" id="7989918">s</span><span class="op" id="7989919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989922">if</span>&nbsp;<span class="ident" id="7989925">err</span>&nbsp;<span class="op" id="7989929">!=</span>&nbsp;<span class="ident" id="7989932">nil</span>&nbsp;<span class="op" id="7989936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7989940">panic</span><span class="op" id="7989945">(</span><span class="ident" id="7989946">err</span><span class="op" id="7989949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7989952">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7989955">return</span>&nbsp;<span class="ident" id="7989962">b</span><br>
<span class="lineno"></span><span class="op" id="7989964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7989967">func</span>&nbsp;<span class="ident" id="7989972">returnRecursiveZip</span><span class="op" id="7989990">(</span><span class="op" id="7989991">)</span>&nbsp;<span class="op" id="7989993">(</span><span class="ident" id="7989994">r</span>&nbsp;<span class="ident" id="7989996">io</span><span class="op" id="7989998">.</span><span class="ident" id="7989999">ReaderAt</span><span class="op" id="7990007">,</span>&nbsp;<span class="ident" id="7990009">size</span>&nbsp;<span class="ident" id="7990014">int64</span><span class="op" id="7990019">)</span>&nbsp;<span class="op" id="7990021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990024">b</span>&nbsp;<span class="op" id="7990026">:=</span>&nbsp;<span class="ident" id="7990029">rZipBytes</span><span class="op" id="7990038">(</span><span class="op" id="7990039">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7990042">return</span>&nbsp;<span class="ident" id="7990049">bytes</span><span class="op" id="7990054">.</span><span class="ident" id="7990055">NewReader</span><span class="op" id="7990064">(</span><span class="ident" id="7990065">b</span><span class="op" id="7990066">)</span><span class="op" id="7990067">,</span>&nbsp;<span class="ident" id="7990069">int64</span><span class="op" id="7990074">(</span><span class="builtinfunc" id="7990075">len</span><span class="op" id="7990078">(</span><span class="ident" id="7990079">b</span><span class="op" id="7990080">)</span><span class="op" id="7990081">)</span><br>
<span class="lineno"></span><span class="op" id="7990083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7990086">func</span>&nbsp;<span class="ident" id="7990091">TestIssue8186</span><span class="op" id="7990104">(</span><span class="ident" id="7990105">t</span>&nbsp;<span class="op" id="7990107">*</span><span class="ident" id="7990108">testing</span><span class="op" id="7990115">.</span><span class="ident" id="7990116">T</span><span class="op" id="7990117">)</span>&nbsp;<span class="op" id="7990119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7990122">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7990183">dirEnts</span>&nbsp;<span class="op" id="7990191">:=</span>&nbsp;<span class="op" id="7990194">[</span><span class="op" id="7990195">]</span><span class="builtintype" id="7990196">string</span><span class="op" id="7990202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990206">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7990433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990437">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7990615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990619">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7990790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990794">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7990962">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7990966">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7991149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991153">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7991335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991339">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7991509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991513">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7991682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7991686">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7991859">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7991862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991865">for</span>&nbsp;<span class="ident" id="7991869">i</span><span class="op" id="7991870">,</span>&nbsp;<span class="ident" id="7991872">s</span>&nbsp;<span class="op" id="7991874">:=</span>&nbsp;<span class="keyword" id="7991877">range</span>&nbsp;<span class="ident" id="7991883">dirEnts</span>&nbsp;<span class="op" id="7991891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991895">var</span>&nbsp;<span class="ident" id="7991899">f</span>&nbsp;<span class="ident" id="7991901">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991908">err</span>&nbsp;<span class="op" id="7991912">:=</span>&nbsp;<span class="ident" id="7991915">readDirectoryHeader</span><span class="op" id="7991934">(</span><span class="op" id="7991935">&amp;</span><span class="ident" id="7991936">f</span><span class="op" id="7991937">,</span>&nbsp;<span class="ident" id="7991939">strings</span><span class="op" id="7991946">.</span><span class="ident" id="7991947">NewReader</span><span class="op" id="7991956">(</span><span class="ident" id="7991957">s</span><span class="op" id="7991958">)</span><span class="op" id="7991959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7991963">if</span>&nbsp;<span class="ident" id="7991966">err</span>&nbsp;<span class="op" id="7991970">!=</span>&nbsp;<span class="ident" id="7991973">nil</span>&nbsp;<span class="op" id="7991977">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7991982">t</span><span class="op" id="7991983">.</span><span class="ident" id="7991984">Errorf</span><span class="op" id="7991990">(</span><span class="string" id="7991991">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7992014">,</span>&nbsp;<span class="ident" id="7992016">i</span><span class="op" id="7992017">,</span>&nbsp;<span class="ident" id="7992019">err</span><span class="op" id="7992022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7992029">}</span><br>
<span class="lineno"></span><span class="op" id="7992031">}</span>
</div>
</body>
</html>
