<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html" class="current">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6135698">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6135753">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6135807">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6135858">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6135936">package</span>&nbsp;<span class="ident" id="6135944">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6135952">import</span>&nbsp;<span class="op" id="6135959">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6135962">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6135968">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="6135978">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6135981">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="6135997">func</span>&nbsp;<span class="ident" id="6136002">signal_disable</span><span class="op" id="6136016">(</span><span class="builtintype" id="6136017">uint32</span><span class="op" id="6136023">)</span><br>
<span class="lineno"></span><span class="keyword" id="6136025">func</span>&nbsp;<span class="ident" id="6136030">signal_enable</span><span class="op" id="6136043">(</span><span class="builtintype" id="6136044">uint32</span><span class="op" id="6136050">)</span><br>
<span class="lineno"></span><span class="keyword" id="6136052">func</span>&nbsp;<span class="ident" id="6136057">signal_recv</span><span class="op" id="6136068">(</span><span class="op" id="6136069">)</span>&nbsp;<span class="builtintype" id="6136071">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6136079">func</span>&nbsp;<span class="ident" id="6136084">loop</span><span class="op" id="6136088">(</span><span class="op" id="6136089">)</span>&nbsp;<span class="op" id="6136091">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136094">for</span>&nbsp;<span class="op" id="6136098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136102">process</span><span class="op" id="6136109">(</span><span class="ident" id="6136110">syscall</span><span class="op" id="6136117">.</span><span class="ident" id="6136118">Signal</span><span class="op" id="6136124">(</span><span class="ident" id="6136125">signal_recv</span><span class="op" id="6136136">(</span><span class="op" id="6136137">)</span><span class="op" id="6136138">)</span><span class="op" id="6136139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136142">}</span><br>
<span class="lineno"></span><span class="op" id="6136144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6136147">func</span>&nbsp;<span class="ident" id="6136152">init</span><span class="op" id="6136156">(</span><span class="op" id="6136157">)</span>&nbsp;<span class="op" id="6136159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136162">signal_enable</span><span class="op" id="6136175">(</span><span class="num" id="6136176">0</span><span class="op" id="6136177">)</span>&nbsp;<span class="comment" id="6136179">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136207">go</span>&nbsp;<span class="ident" id="6136210">loop</span><span class="op" id="6136214">(</span><span class="op" id="6136215">)</span><br>
<span class="lineno"></span><span class="op" id="6136217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6136220">const</span>&nbsp;<span class="op" id="6136226">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136229">numSig</span>&nbsp;<span class="op" id="6136236">=</span>&nbsp;<span class="num" id="6136238">65</span>&nbsp;<span class="comment" id="6136241">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="6136267">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6136270">func</span>&nbsp;<span class="ident" id="6136275">signum</span><span class="op" id="6136281">(</span><span class="ident" id="6136282">sig</span>&nbsp;<span class="ident" id="6136286">os</span><span class="op" id="6136288">.</span><span class="ident" id="6136289">Signal</span><span class="op" id="6136295">)</span>&nbsp;<span class="builtintype" id="6136297">int</span>&nbsp;<span class="op" id="6136301">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136304">switch</span>&nbsp;<span class="ident" id="6136311">sig</span>&nbsp;<span class="op" id="6136315">:=</span>&nbsp;<span class="ident" id="6136318">sig</span><span class="op" id="6136321">.</span><span class="op" id="6136322">(</span><span class="keyword" id="6136323">type</span><span class="op" id="6136327">)</span>&nbsp;<span class="op" id="6136329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136332">case</span>&nbsp;<span class="ident" id="6136337">syscall</span><span class="op" id="6136344">.</span><span class="ident" id="6136345">Signal</span><span class="op" id="6136351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136355">i</span>&nbsp;<span class="op" id="6136357">:=</span>&nbsp;<span class="builtintype" id="6136360">int</span><span class="op" id="6136363">(</span><span class="ident" id="6136364">sig</span><span class="op" id="6136367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136371">if</span>&nbsp;<span class="ident" id="6136374">i</span>&nbsp;<span class="op" id="6136376">&lt;</span>&nbsp;<span class="num" id="6136378">0</span>&nbsp;<span class="op" id="6136380">||</span>&nbsp;<span class="ident" id="6136383">i</span>&nbsp;<span class="op" id="6136385">&gt;=</span>&nbsp;<span class="ident" id="6136388">numSig</span>&nbsp;<span class="op" id="6136395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136400">return</span>&nbsp;<span class="op" id="6136407">-</span><span class="num" id="6136408">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136416">return</span>&nbsp;<span class="ident" id="6136423">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136426">default</span><span class="op" id="6136433">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136437">return</span>&nbsp;<span class="op" id="6136444">-</span><span class="num" id="6136445">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136448">}</span><br>
<span class="lineno">45</span><span class="op" id="6136450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6136453">func</span>&nbsp;<span class="ident" id="6136458">enableSignal</span><span class="op" id="6136470">(</span><span class="ident" id="6136471">sig</span>&nbsp;<span class="builtintype" id="6136475">int</span><span class="op" id="6136478">)</span>&nbsp;<span class="op" id="6136480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136483">signal_enable</span><span class="op" id="6136496">(</span><span class="builtintype" id="6136497">uint32</span><span class="op" id="6136503">(</span><span class="ident" id="6136504">sig</span><span class="op" id="6136507">)</span><span class="op" id="6136508">)</span><br>
<span class="lineno"></span><span class="op" id="6136510">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6136513">func</span>&nbsp;<span class="ident" id="6136518">disableSignal</span><span class="op" id="6136531">(</span><span class="ident" id="6136532">sig</span>&nbsp;<span class="builtintype" id="6136536">int</span><span class="op" id="6136539">)</span>&nbsp;<span class="op" id="6136541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136544">signal_disable</span><span class="op" id="6136558">(</span><span class="builtintype" id="6136559">uint32</span><span class="op" id="6136565">(</span><span class="ident" id="6136566">sig</span><span class="op" id="6136569">)</span><span class="op" id="6136570">)</span><br>
<span class="lineno"></span><span class="op" id="6136572">}</span>
</div>
</body>
</html>
