<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6158990">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6159046">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6159100">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6159151">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6159210">package</span>&nbsp;<span class="ident" id="6159218">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159225">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6159277">import</span>&nbsp;<span class="op" id="6159284">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6159287">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6159296">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6159311">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6159330">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6159337">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6159343">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6159348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159351">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6159393">type</span>&nbsp;<span class="ident" id="6159398">File</span>&nbsp;<span class="keyword" id="6159403">struct</span>&nbsp;<span class="op" id="6159410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159413">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159425">ByteOrder</span>&nbsp;<span class="ident" id="6159435">binary</span><span class="op" id="6159441">.</span><span class="ident" id="6159442">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159453">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6159463">[</span><span class="op" id="6159464">]</span><span class="ident" id="6159465">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159471">Sections</span>&nbsp;&nbsp;<span class="op" id="6159481">[</span><span class="op" id="6159482">]</span><span class="op" id="6159483">*</span><span class="ident" id="6159484">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159494">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6159503">*</span><span class="ident" id="6159504">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159512">Dysymtab</span>&nbsp;<span class="op" id="6159521">*</span><span class="ident" id="6159522">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159533">closer</span>&nbsp;<span class="ident" id="6159540">io</span><span class="op" id="6159542">.</span><span class="ident" id="6159543">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6159550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159553">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6159599">type</span>&nbsp;<span class="ident" id="6159604">Load</span>&nbsp;<span class="keyword" id="6159609">interface</span>&nbsp;<span class="op" id="6159619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159622">Raw</span><span class="op" id="6159625">(</span><span class="op" id="6159626">)</span>&nbsp;<span class="op" id="6159628">[</span><span class="op" id="6159629">]</span><span class="builtintype" id="6159630">byte</span><br>
<span class="lineno">35</span><span class="op" id="6159635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159638">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6159706">type</span>&nbsp;<span class="ident" id="6159711">LoadBytes</span>&nbsp;<span class="op" id="6159721">[</span><span class="op" id="6159722">]</span><span class="builtintype" id="6159723">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6159729">func</span>&nbsp;<span class="op" id="6159734">(</span><span class="ident" id="6159735">b</span>&nbsp;<span class="ident" id="6159737">LoadBytes</span><span class="op" id="6159746">)</span>&nbsp;<span class="ident" id="6159748">Raw</span><span class="op" id="6159751">(</span><span class="op" id="6159752">)</span>&nbsp;<span class="op" id="6159754">[</span><span class="op" id="6159755">]</span><span class="builtintype" id="6159756">byte</span>&nbsp;<span class="op" id="6159761">{</span>&nbsp;<span class="keyword" id="6159763">return</span>&nbsp;<span class="ident" id="6159770">b</span>&nbsp;<span class="op" id="6159772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6159775">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6159860">type</span>&nbsp;<span class="ident" id="6159865">SegmentHeader</span>&nbsp;<span class="keyword" id="6159879">struct</span>&nbsp;<span class="op" id="6159886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159889">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159897">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159906">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6159914">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159922">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6159930">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159938">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159946">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159954">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6159962">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159970">Offset</span>&nbsp;&nbsp;<span class="ident" id="6159978">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6159986">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6159994">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160002">Maxprot</span>&nbsp;<span class="builtintype" id="6160010">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160018">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6160026">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160034">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6160042">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160050">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6160058">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6160065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6160068">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6160140">type</span>&nbsp;<span class="ident" id="6160145">Segment</span>&nbsp;<span class="keyword" id="6160153">struct</span>&nbsp;<span class="op" id="6160160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160163">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160174">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6160190">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6160228">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6160268">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6160303">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6160351">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6160401">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160425">io</span><span class="op" id="6160427">.</span><span class="ident" id="6160428">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160438">sr</span>&nbsp;<span class="op" id="6160441">*</span><span class="ident" id="6160442">io</span><span class="op" id="6160444">.</span><span class="ident" id="6160445">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6160459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6160462">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6160517">func</span>&nbsp;<span class="op" id="6160522">(</span><span class="ident" id="6160523">s</span>&nbsp;<span class="op" id="6160525">*</span><span class="ident" id="6160526">Segment</span><span class="op" id="6160533">)</span>&nbsp;<span class="ident" id="6160535">Data</span><span class="op" id="6160539">(</span><span class="op" id="6160540">)</span>&nbsp;<span class="op" id="6160542">(</span><span class="op" id="6160543">[</span><span class="op" id="6160544">]</span><span class="builtintype" id="6160545">byte</span><span class="op" id="6160549">,</span>&nbsp;<span class="builtintype" id="6160551">error</span><span class="op" id="6160556">)</span>&nbsp;<span class="op" id="6160558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160561">dat</span>&nbsp;<span class="op" id="6160565">:=</span>&nbsp;<span class="builtinfunc" id="6160568">make</span><span class="op" id="6160572">(</span><span class="op" id="6160573">[</span><span class="op" id="6160574">]</span><span class="builtintype" id="6160575">byte</span><span class="op" id="6160579">,</span>&nbsp;<span class="ident" id="6160581">s</span><span class="op" id="6160582">.</span><span class="ident" id="6160583">sr</span><span class="op" id="6160585">.</span><span class="ident" id="6160586">Size</span><span class="op" id="6160590">(</span><span class="op" id="6160591">)</span><span class="op" id="6160592">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160595">n</span><span class="op" id="6160596">,</span>&nbsp;<span class="ident" id="6160598">err</span>&nbsp;<span class="op" id="6160602">:=</span>&nbsp;<span class="ident" id="6160605">s</span><span class="op" id="6160606">.</span><span class="ident" id="6160607">sr</span><span class="op" id="6160609">.</span><span class="ident" id="6160610">ReadAt</span><span class="op" id="6160616">(</span><span class="ident" id="6160617">dat</span><span class="op" id="6160620">,</span>&nbsp;<span class="num" id="6160622">0</span><span class="op" id="6160623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160626">if</span>&nbsp;<span class="ident" id="6160629">n</span>&nbsp;<span class="op" id="6160631">==</span>&nbsp;<span class="builtinfunc" id="6160634">len</span><span class="op" id="6160637">(</span><span class="ident" id="6160638">dat</span><span class="op" id="6160641">)</span>&nbsp;<span class="op" id="6160643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160647">err</span>&nbsp;<span class="op" id="6160651">=</span>&nbsp;<span class="builtintype" id="6160653">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6160658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6160661">return</span>&nbsp;<span class="ident" id="6160668">dat</span><span class="op" id="6160671">[</span><span class="num" id="6160672">0</span><span class="op" id="6160673">:</span><span class="ident" id="6160674">n</span><span class="op" id="6160675">]</span><span class="op" id="6160676">,</span>&nbsp;<span class="ident" id="6160678">err</span><br>
<span class="lineno">80</span><span class="op" id="6160682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6160685">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6160739">func</span>&nbsp;<span class="op" id="6160744">(</span><span class="ident" id="6160745">s</span>&nbsp;<span class="op" id="6160747">*</span><span class="ident" id="6160748">Segment</span><span class="op" id="6160755">)</span>&nbsp;<span class="ident" id="6160757">Open</span><span class="op" id="6160761">(</span><span class="op" id="6160762">)</span>&nbsp;<span class="ident" id="6160764">io</span><span class="op" id="6160766">.</span><span class="ident" id="6160767">ReadSeeker</span>&nbsp;<span class="op" id="6160778">{</span>&nbsp;<span class="keyword" id="6160780">return</span>&nbsp;<span class="ident" id="6160787">io</span><span class="op" id="6160789">.</span><span class="ident" id="6160790">NewSectionReader</span><span class="op" id="6160806">(</span><span class="ident" id="6160807">s</span><span class="op" id="6160808">.</span><span class="ident" id="6160809">sr</span><span class="op" id="6160811">,</span>&nbsp;<span class="num" id="6160813">0</span><span class="op" id="6160814">,</span>&nbsp;<span class="num" id="6160816">1</span><span class="op" id="6160817">&lt;&lt;</span><span class="num" id="6160819">63</span><span class="op" id="6160821">-</span><span class="num" id="6160822">1</span><span class="op" id="6160823">)</span>&nbsp;<span class="op" id="6160825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6160828">type</span>&nbsp;<span class="ident" id="6160833">SectionHeader</span>&nbsp;<span class="keyword" id="6160847">struct</span>&nbsp;<span class="op" id="6160854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160857">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6160864">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160872">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6160879">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160887">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6160894">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160902">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6160909">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160917">Offset</span>&nbsp;<span class="builtintype" id="6160924">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160932">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6160939">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160947">Reloff</span>&nbsp;<span class="builtintype" id="6160954">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160962">Nreloc</span>&nbsp;<span class="builtintype" id="6160969">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6160977">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6160984">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6160991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6160994">type</span>&nbsp;<span class="ident" id="6160999">Section</span>&nbsp;<span class="keyword" id="6161007">struct</span>&nbsp;<span class="op" id="6161014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161017">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6161033">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6161071">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6161111">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6161146">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6161194">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6161244">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161268">io</span><span class="op" id="6161270">.</span><span class="ident" id="6161271">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161281">sr</span>&nbsp;<span class="op" id="6161284">*</span><span class="ident" id="6161285">io</span><span class="op" id="6161287">.</span><span class="ident" id="6161288">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6161302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6161305">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6161367">func</span>&nbsp;<span class="op" id="6161372">(</span><span class="ident" id="6161373">s</span>&nbsp;<span class="op" id="6161375">*</span><span class="ident" id="6161376">Section</span><span class="op" id="6161383">)</span>&nbsp;<span class="ident" id="6161385">Data</span><span class="op" id="6161389">(</span><span class="op" id="6161390">)</span>&nbsp;<span class="op" id="6161392">(</span><span class="op" id="6161393">[</span><span class="op" id="6161394">]</span><span class="builtintype" id="6161395">byte</span><span class="op" id="6161399">,</span>&nbsp;<span class="builtintype" id="6161401">error</span><span class="op" id="6161406">)</span>&nbsp;<span class="op" id="6161408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161411">dat</span>&nbsp;<span class="op" id="6161415">:=</span>&nbsp;<span class="builtinfunc" id="6161418">make</span><span class="op" id="6161422">(</span><span class="op" id="6161423">[</span><span class="op" id="6161424">]</span><span class="builtintype" id="6161425">byte</span><span class="op" id="6161429">,</span>&nbsp;<span class="ident" id="6161431">s</span><span class="op" id="6161432">.</span><span class="ident" id="6161433">sr</span><span class="op" id="6161435">.</span><span class="ident" id="6161436">Size</span><span class="op" id="6161440">(</span><span class="op" id="6161441">)</span><span class="op" id="6161442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161445">n</span><span class="op" id="6161446">,</span>&nbsp;<span class="ident" id="6161448">err</span>&nbsp;<span class="op" id="6161452">:=</span>&nbsp;<span class="ident" id="6161455">s</span><span class="op" id="6161456">.</span><span class="ident" id="6161457">sr</span><span class="op" id="6161459">.</span><span class="ident" id="6161460">ReadAt</span><span class="op" id="6161466">(</span><span class="ident" id="6161467">dat</span><span class="op" id="6161470">,</span>&nbsp;<span class="num" id="6161472">0</span><span class="op" id="6161473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161476">if</span>&nbsp;<span class="ident" id="6161479">n</span>&nbsp;<span class="op" id="6161481">==</span>&nbsp;<span class="builtinfunc" id="6161484">len</span><span class="op" id="6161487">(</span><span class="ident" id="6161488">dat</span><span class="op" id="6161491">)</span>&nbsp;<span class="op" id="6161493">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161497">err</span>&nbsp;<span class="op" id="6161501">=</span>&nbsp;<span class="builtintype" id="6161503">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6161508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6161511">return</span>&nbsp;<span class="ident" id="6161518">dat</span><span class="op" id="6161521">[</span><span class="num" id="6161522">0</span><span class="op" id="6161523">:</span><span class="ident" id="6161524">n</span><span class="op" id="6161525">]</span><span class="op" id="6161526">,</span>&nbsp;<span class="ident" id="6161528">err</span><br>
<span class="lineno"></span><span class="op" id="6161532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6161535">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6161596">func</span>&nbsp;<span class="op" id="6161601">(</span><span class="ident" id="6161602">s</span>&nbsp;<span class="op" id="6161604">*</span><span class="ident" id="6161605">Section</span><span class="op" id="6161612">)</span>&nbsp;<span class="ident" id="6161614">Open</span><span class="op" id="6161618">(</span><span class="op" id="6161619">)</span>&nbsp;<span class="ident" id="6161621">io</span><span class="op" id="6161623">.</span><span class="ident" id="6161624">ReadSeeker</span>&nbsp;<span class="op" id="6161635">{</span>&nbsp;<span class="keyword" id="6161637">return</span>&nbsp;<span class="ident" id="6161644">io</span><span class="op" id="6161646">.</span><span class="ident" id="6161647">NewSectionReader</span><span class="op" id="6161663">(</span><span class="ident" id="6161664">s</span><span class="op" id="6161665">.</span><span class="ident" id="6161666">sr</span><span class="op" id="6161668">,</span>&nbsp;<span class="num" id="6161670">0</span><span class="op" id="6161671">,</span>&nbsp;<span class="num" id="6161673">1</span><span class="op" id="6161674">&lt;&lt;</span><span class="num" id="6161676">63</span><span class="op" id="6161678">-</span><span class="num" id="6161679">1</span><span class="op" id="6161680">)</span>&nbsp;<span class="op" id="6161682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6161685">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6161746">type</span>&nbsp;<span class="ident" id="6161751">Dylib</span>&nbsp;<span class="keyword" id="6161757">struct</span>&nbsp;<span class="op" id="6161764">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161767">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161778">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6161793">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161801">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6161816">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161824">CurrentVersion</span>&nbsp;<span class="builtintype" id="6161839">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161847">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6161862">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6161869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6161872">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6161926">type</span>&nbsp;<span class="ident" id="6161931">Symtab</span>&nbsp;<span class="keyword" id="6161938">struct</span>&nbsp;<span class="op" id="6161945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161948">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161959">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6161970">Syms</span>&nbsp;<span class="op" id="6161975">[</span><span class="op" id="6161976">]</span><span class="ident" id="6161977">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6161984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6161987">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6162051">type</span>&nbsp;<span class="ident" id="6162056">Dysymtab</span>&nbsp;<span class="keyword" id="6162065">struct</span>&nbsp;<span class="op" id="6162072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162075">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162086">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162099">IndirectSyms</span>&nbsp;<span class="op" id="6162112">[</span><span class="op" id="6162113">]</span><span class="builtintype" id="6162114">uint32</span>&nbsp;<span class="comment" id="6162121">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6162149">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6162152">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6162177">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6162240">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6162291">type</span>&nbsp;<span class="ident" id="6162296">FormatError</span>&nbsp;<span class="keyword" id="6162308">struct</span>&nbsp;<span class="op" id="6162315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162318">off</span>&nbsp;<span class="ident" id="6162322">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162329">msg</span>&nbsp;<span class="builtintype" id="6162333">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162341">val</span>&nbsp;<span class="keyword" id="6162345">interface</span><span class="op" id="6162354">{</span><span class="op" id="6162355">}</span><br>
<span class="lineno"></span><span class="op" id="6162357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6162360">func</span>&nbsp;<span class="op" id="6162365">(</span><span class="ident" id="6162366">e</span>&nbsp;<span class="op" id="6162368">*</span><span class="ident" id="6162369">FormatError</span><span class="op" id="6162380">)</span>&nbsp;<span class="ident" id="6162382">Error</span><span class="op" id="6162387">(</span><span class="op" id="6162388">)</span>&nbsp;<span class="builtintype" id="6162390">string</span>&nbsp;<span class="op" id="6162397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162400">msg</span>&nbsp;<span class="op" id="6162404">:=</span>&nbsp;<span class="ident" id="6162407">e</span><span class="op" id="6162408">.</span><span class="ident" id="6162409">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162414">if</span>&nbsp;<span class="ident" id="6162417">e</span><span class="op" id="6162418">.</span><span class="ident" id="6162419">val</span>&nbsp;<span class="op" id="6162423">!=</span>&nbsp;<span class="builtintype" id="6162426">nil</span>&nbsp;<span class="op" id="6162430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162434">msg</span>&nbsp;<span class="op" id="6162438">+=</span>&nbsp;<span class="ident" id="6162441">fmt</span><span class="op" id="6162444">.</span><span class="ident" id="6162445">Sprintf</span><span class="op" id="6162452">(</span><span class="string" id="6162453">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6162460">,</span>&nbsp;<span class="ident" id="6162462">e</span><span class="op" id="6162463">.</span><span class="ident" id="6162464">val</span><span class="op" id="6162467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6162470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162473">msg</span>&nbsp;<span class="op" id="6162477">+=</span>&nbsp;<span class="ident" id="6162480">fmt</span><span class="op" id="6162483">.</span><span class="ident" id="6162484">Sprintf</span><span class="op" id="6162491">(</span><span class="string" id="6162492">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6162516">,</span>&nbsp;<span class="ident" id="6162518">e</span><span class="op" id="6162519">.</span><span class="ident" id="6162520">off</span><span class="op" id="6162523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162526">return</span>&nbsp;<span class="ident" id="6162533">msg</span><br>
<span class="lineno">165</span><span class="op" id="6162537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6162540">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6162627">func</span>&nbsp;<span class="ident" id="6162632">Open</span><span class="op" id="6162636">(</span><span class="ident" id="6162637">name</span>&nbsp;<span class="builtintype" id="6162642">string</span><span class="op" id="6162648">)</span>&nbsp;<span class="op" id="6162650">(</span><span class="op" id="6162651">*</span><span class="ident" id="6162652">File</span><span class="op" id="6162656">,</span>&nbsp;<span class="builtintype" id="6162658">error</span><span class="op" id="6162663">)</span>&nbsp;<span class="op" id="6162665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162668">f</span><span class="op" id="6162669">,</span>&nbsp;<span class="ident" id="6162671">err</span>&nbsp;<span class="op" id="6162675">:=</span>&nbsp;<span class="ident" id="6162678">os</span><span class="op" id="6162680">.</span><span class="ident" id="6162681">Open</span><span class="op" id="6162685">(</span><span class="ident" id="6162686">name</span><span class="op" id="6162690">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162693">if</span>&nbsp;<span class="ident" id="6162696">err</span>&nbsp;<span class="op" id="6162700">!=</span>&nbsp;<span class="builtintype" id="6162703">nil</span>&nbsp;<span class="op" id="6162707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162711">return</span>&nbsp;<span class="builtintype" id="6162718">nil</span><span class="op" id="6162721">,</span>&nbsp;<span class="ident" id="6162723">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6162728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162731">ff</span><span class="op" id="6162733">,</span>&nbsp;<span class="ident" id="6162735">err</span>&nbsp;<span class="op" id="6162739">:=</span>&nbsp;<span class="ident" id="6162742">NewFile</span><span class="op" id="6162749">(</span><span class="ident" id="6162750">f</span><span class="op" id="6162751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162754">if</span>&nbsp;<span class="ident" id="6162757">err</span>&nbsp;<span class="op" id="6162761">!=</span>&nbsp;<span class="builtintype" id="6162764">nil</span>&nbsp;<span class="op" id="6162768">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162772">f</span><span class="op" id="6162773">.</span><span class="ident" id="6162774">Close</span><span class="op" id="6162779">(</span><span class="op" id="6162780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162784">return</span>&nbsp;<span class="builtintype" id="6162791">nil</span><span class="op" id="6162794">,</span>&nbsp;<span class="ident" id="6162796">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6162801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6162804">ff</span><span class="op" id="6162806">.</span><span class="ident" id="6162807">closer</span>&nbsp;<span class="op" id="6162814">=</span>&nbsp;<span class="ident" id="6162816">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162819">return</span>&nbsp;<span class="ident" id="6162826">ff</span><span class="op" id="6162828">,</span>&nbsp;<span class="builtintype" id="6162830">nil</span><br>
<span class="lineno">180</span><span class="op" id="6162834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6162837">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6162863">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6162930">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6162954">func</span>&nbsp;<span class="op" id="6162959">(</span><span class="ident" id="6162960">f</span>&nbsp;<span class="op" id="6162962">*</span><span class="ident" id="6162963">File</span><span class="op" id="6162967">)</span>&nbsp;<span class="ident" id="6162969">Close</span><span class="op" id="6162974">(</span><span class="op" id="6162975">)</span>&nbsp;<span class="builtintype" id="6162977">error</span>&nbsp;<span class="op" id="6162983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6162986">var</span>&nbsp;<span class="ident" id="6162990">err</span>&nbsp;<span class="builtintype" id="6162994">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163001">if</span>&nbsp;<span class="ident" id="6163004">f</span><span class="op" id="6163005">.</span><span class="ident" id="6163006">closer</span>&nbsp;<span class="op" id="6163013">!=</span>&nbsp;<span class="builtintype" id="6163016">nil</span>&nbsp;<span class="op" id="6163020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163024">err</span>&nbsp;<span class="op" id="6163028">=</span>&nbsp;<span class="ident" id="6163030">f</span><span class="op" id="6163031">.</span><span class="ident" id="6163032">closer</span><span class="op" id="6163038">.</span><span class="ident" id="6163039">Close</span><span class="op" id="6163044">(</span><span class="op" id="6163045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163049">f</span><span class="op" id="6163050">.</span><span class="ident" id="6163051">closer</span>&nbsp;<span class="op" id="6163058">=</span>&nbsp;<span class="builtintype" id="6163060">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163068">return</span>&nbsp;<span class="ident" id="6163075">err</span><br>
<span class="lineno"></span><span class="op" id="6163079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6163082">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6163167">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6163240">func</span>&nbsp;<span class="ident" id="6163245">NewFile</span><span class="op" id="6163252">(</span><span class="ident" id="6163253">r</span>&nbsp;<span class="ident" id="6163255">io</span><span class="op" id="6163257">.</span><span class="ident" id="6163258">ReaderAt</span><span class="op" id="6163266">)</span>&nbsp;<span class="op" id="6163268">(</span><span class="op" id="6163269">*</span><span class="ident" id="6163270">File</span><span class="op" id="6163274">,</span>&nbsp;<span class="builtintype" id="6163276">error</span><span class="op" id="6163281">)</span>&nbsp;<span class="op" id="6163283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163286">f</span>&nbsp;<span class="op" id="6163288">:=</span>&nbsp;<span class="builtinfunc" id="6163291">new</span><span class="op" id="6163294">(</span><span class="ident" id="6163295">File</span><span class="op" id="6163299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163302">sr</span>&nbsp;<span class="op" id="6163305">:=</span>&nbsp;<span class="ident" id="6163308">io</span><span class="op" id="6163310">.</span><span class="ident" id="6163311">NewSectionReader</span><span class="op" id="6163327">(</span><span class="ident" id="6163328">r</span><span class="op" id="6163329">,</span>&nbsp;<span class="num" id="6163331">0</span><span class="op" id="6163332">,</span>&nbsp;<span class="num" id="6163334">1</span><span class="op" id="6163335">&lt;&lt;</span><span class="num" id="6163337">63</span><span class="op" id="6163339">-</span><span class="num" id="6163340">1</span><span class="op" id="6163341">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6163345">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6163407">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163462">var</span>&nbsp;<span class="ident" id="6163466">ident</span>&nbsp;<span class="op" id="6163472">[</span><span class="num" id="6163473">4</span><span class="op" id="6163474">]</span><span class="builtintype" id="6163475">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163481">if</span>&nbsp;<span class="ident" id="6163484">_</span><span class="op" id="6163485">,</span>&nbsp;<span class="ident" id="6163487">err</span>&nbsp;<span class="op" id="6163491">:=</span>&nbsp;<span class="ident" id="6163494">r</span><span class="op" id="6163495">.</span><span class="ident" id="6163496">ReadAt</span><span class="op" id="6163502">(</span><span class="ident" id="6163503">ident</span><span class="op" id="6163508">[</span><span class="num" id="6163509">0</span><span class="op" id="6163510">:</span><span class="op" id="6163511">]</span><span class="op" id="6163512">,</span>&nbsp;<span class="num" id="6163514">0</span><span class="op" id="6163515">)</span><span class="op" id="6163516">;</span>&nbsp;<span class="ident" id="6163518">err</span>&nbsp;<span class="op" id="6163522">!=</span>&nbsp;<span class="builtintype" id="6163525">nil</span>&nbsp;<span class="op" id="6163529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163533">return</span>&nbsp;<span class="builtintype" id="6163540">nil</span><span class="op" id="6163543">,</span>&nbsp;<span class="ident" id="6163545">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163553">be</span>&nbsp;<span class="op" id="6163556">:=</span>&nbsp;<span class="ident" id="6163559">binary</span><span class="op" id="6163565">.</span><span class="ident" id="6163566">BigEndian</span><span class="op" id="6163575">.</span><span class="ident" id="6163576">Uint32</span><span class="op" id="6163582">(</span><span class="ident" id="6163583">ident</span><span class="op" id="6163588">[</span><span class="num" id="6163589">0</span><span class="op" id="6163590">:</span><span class="op" id="6163591">]</span><span class="op" id="6163592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163595">le</span>&nbsp;<span class="op" id="6163598">:=</span>&nbsp;<span class="ident" id="6163601">binary</span><span class="op" id="6163607">.</span><span class="ident" id="6163608">LittleEndian</span><span class="op" id="6163620">.</span><span class="ident" id="6163621">Uint32</span><span class="op" id="6163627">(</span><span class="ident" id="6163628">ident</span><span class="op" id="6163633">[</span><span class="num" id="6163634">0</span><span class="op" id="6163635">:</span><span class="op" id="6163636">]</span><span class="op" id="6163637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163640">switch</span>&nbsp;<span class="ident" id="6163647">Magic32</span>&nbsp;<span class="op" id="6163655">&amp;^</span>&nbsp;<span class="num" id="6163658">1</span>&nbsp;<span class="op" id="6163660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163663">case</span>&nbsp;<span class="ident" id="6163668">be</span>&nbsp;<span class="op" id="6163671">&amp;^</span>&nbsp;<span class="num" id="6163674">1</span><span class="op" id="6163675">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163679">f</span><span class="op" id="6163680">.</span><span class="ident" id="6163681">ByteOrder</span>&nbsp;<span class="op" id="6163691">=</span>&nbsp;<span class="ident" id="6163693">binary</span><span class="op" id="6163699">.</span><span class="ident" id="6163700">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163712">f</span><span class="op" id="6163713">.</span><span class="ident" id="6163714">Magic</span>&nbsp;<span class="op" id="6163720">=</span>&nbsp;<span class="ident" id="6163722">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163726">case</span>&nbsp;<span class="ident" id="6163731">le</span>&nbsp;<span class="op" id="6163734">&amp;^</span>&nbsp;<span class="num" id="6163737">1</span><span class="op" id="6163738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163742">f</span><span class="op" id="6163743">.</span><span class="ident" id="6163744">ByteOrder</span>&nbsp;<span class="op" id="6163754">=</span>&nbsp;<span class="ident" id="6163756">binary</span><span class="op" id="6163762">.</span><span class="ident" id="6163763">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6163778">f</span><span class="op" id="6163779">.</span><span class="ident" id="6163780">Magic</span>&nbsp;<span class="op" id="6163786">=</span>&nbsp;<span class="ident" id="6163788">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163792">default</span><span class="op" id="6163799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163803">return</span>&nbsp;<span class="builtintype" id="6163810">nil</span><span class="op" id="6163813">,</span>&nbsp;<span class="op" id="6163815">&amp;</span><span class="ident" id="6163816">FormatError</span><span class="op" id="6163827">{</span><span class="num" id="6163828">0</span><span class="op" id="6163829">,</span>&nbsp;<span class="string" id="6163831">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6163853">,</span>&nbsp;<span class="builtintype" id="6163855">nil</span><span class="op" id="6163858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6163865">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163894">if</span>&nbsp;<span class="ident" id="6163897">err</span>&nbsp;<span class="op" id="6163901">:=</span>&nbsp;<span class="ident" id="6163904">binary</span><span class="op" id="6163910">.</span><span class="ident" id="6163911">Read</span><span class="op" id="6163915">(</span><span class="ident" id="6163916">sr</span><span class="op" id="6163918">,</span>&nbsp;<span class="ident" id="6163920">f</span><span class="op" id="6163921">.</span><span class="ident" id="6163922">ByteOrder</span><span class="op" id="6163931">,</span>&nbsp;<span class="op" id="6163933">&amp;</span><span class="ident" id="6163934">f</span><span class="op" id="6163935">.</span><span class="ident" id="6163936">FileHeader</span><span class="op" id="6163946">)</span><span class="op" id="6163947">;</span>&nbsp;<span class="ident" id="6163949">err</span>&nbsp;<span class="op" id="6163953">!=</span>&nbsp;<span class="builtintype" id="6163956">nil</span>&nbsp;<span class="op" id="6163960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6163964">return</span>&nbsp;<span class="builtintype" id="6163971">nil</span><span class="op" id="6163974">,</span>&nbsp;<span class="ident" id="6163976">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6163981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6163985">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164009">offset</span>&nbsp;<span class="op" id="6164016">:=</span>&nbsp;<span class="ident" id="6164019">int64</span><span class="op" id="6164024">(</span><span class="ident" id="6164025">fileHeaderSize32</span><span class="op" id="6164041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164044">if</span>&nbsp;<span class="ident" id="6164047">f</span><span class="op" id="6164048">.</span><span class="ident" id="6164049">Magic</span>&nbsp;<span class="op" id="6164055">==</span>&nbsp;<span class="ident" id="6164058">Magic64</span>&nbsp;<span class="op" id="6164066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164070">offset</span>&nbsp;<span class="op" id="6164077">=</span>&nbsp;<span class="ident" id="6164079">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6164097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164100">dat</span>&nbsp;<span class="op" id="6164104">:=</span>&nbsp;<span class="builtinfunc" id="6164107">make</span><span class="op" id="6164111">(</span><span class="op" id="6164112">[</span><span class="op" id="6164113">]</span><span class="builtintype" id="6164114">byte</span><span class="op" id="6164118">,</span>&nbsp;<span class="ident" id="6164120">f</span><span class="op" id="6164121">.</span><span class="ident" id="6164122">Cmdsz</span><span class="op" id="6164127">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164130">if</span>&nbsp;<span class="ident" id="6164133">_</span><span class="op" id="6164134">,</span>&nbsp;<span class="ident" id="6164136">err</span>&nbsp;<span class="op" id="6164140">:=</span>&nbsp;<span class="ident" id="6164143">r</span><span class="op" id="6164144">.</span><span class="ident" id="6164145">ReadAt</span><span class="op" id="6164151">(</span><span class="ident" id="6164152">dat</span><span class="op" id="6164155">,</span>&nbsp;<span class="ident" id="6164157">offset</span><span class="op" id="6164163">)</span><span class="op" id="6164164">;</span>&nbsp;<span class="ident" id="6164166">err</span>&nbsp;<span class="op" id="6164170">!=</span>&nbsp;<span class="builtintype" id="6164173">nil</span>&nbsp;<span class="op" id="6164177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164181">return</span>&nbsp;<span class="builtintype" id="6164188">nil</span><span class="op" id="6164191">,</span>&nbsp;<span class="ident" id="6164193">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6164198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164201">f</span><span class="op" id="6164202">.</span><span class="ident" id="6164203">Loads</span>&nbsp;<span class="op" id="6164209">=</span>&nbsp;<span class="builtinfunc" id="6164211">make</span><span class="op" id="6164215">(</span><span class="op" id="6164216">[</span><span class="op" id="6164217">]</span><span class="ident" id="6164218">Load</span><span class="op" id="6164222">,</span>&nbsp;<span class="ident" id="6164224">f</span><span class="op" id="6164225">.</span><span class="ident" id="6164226">Ncmd</span><span class="op" id="6164230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164233">bo</span>&nbsp;<span class="op" id="6164236">:=</span>&nbsp;<span class="ident" id="6164239">f</span><span class="op" id="6164240">.</span><span class="ident" id="6164241">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164252">for</span>&nbsp;<span class="ident" id="6164256">i</span>&nbsp;<span class="op" id="6164258">:=</span>&nbsp;<span class="keyword" id="6164261">range</span>&nbsp;<span class="ident" id="6164267">f</span><span class="op" id="6164268">.</span><span class="ident" id="6164269">Loads</span>&nbsp;<span class="op" id="6164275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6164279">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164341">if</span>&nbsp;<span class="builtinfunc" id="6164344">len</span><span class="op" id="6164347">(</span><span class="ident" id="6164348">dat</span><span class="op" id="6164351">)</span>&nbsp;<span class="op" id="6164353">&lt;</span>&nbsp;<span class="num" id="6164355">8</span>&nbsp;<span class="op" id="6164357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164362">return</span>&nbsp;<span class="builtintype" id="6164369">nil</span><span class="op" id="6164372">,</span>&nbsp;<span class="op" id="6164374">&amp;</span><span class="ident" id="6164375">FormatError</span><span class="op" id="6164386">{</span><span class="ident" id="6164387">offset</span><span class="op" id="6164393">,</span>&nbsp;<span class="string" id="6164395">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6164420">,</span>&nbsp;<span class="builtintype" id="6164422">nil</span><span class="op" id="6164425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6164429">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164433">cmd</span><span class="op" id="6164436">,</span>&nbsp;<span class="ident" id="6164438">siz</span>&nbsp;<span class="op" id="6164442">:=</span>&nbsp;<span class="ident" id="6164445">LoadCmd</span><span class="op" id="6164452">(</span><span class="ident" id="6164453">bo</span><span class="op" id="6164455">.</span><span class="ident" id="6164456">Uint32</span><span class="op" id="6164462">(</span><span class="ident" id="6164463">dat</span><span class="op" id="6164466">[</span><span class="num" id="6164467">0</span><span class="op" id="6164468">:</span><span class="num" id="6164469">4</span><span class="op" id="6164470">]</span><span class="op" id="6164471">)</span><span class="op" id="6164472">)</span><span class="op" id="6164473">,</span>&nbsp;<span class="ident" id="6164475">bo</span><span class="op" id="6164477">.</span><span class="ident" id="6164478">Uint32</span><span class="op" id="6164484">(</span><span class="ident" id="6164485">dat</span><span class="op" id="6164488">[</span><span class="num" id="6164489">4</span><span class="op" id="6164490">:</span><span class="num" id="6164491">8</span><span class="op" id="6164492">]</span><span class="op" id="6164493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164497">if</span>&nbsp;<span class="ident" id="6164500">siz</span>&nbsp;<span class="op" id="6164504">&lt;</span>&nbsp;<span class="num" id="6164506">8</span>&nbsp;<span class="op" id="6164508">||</span>&nbsp;<span class="ident" id="6164511">siz</span>&nbsp;<span class="op" id="6164515">&gt;</span>&nbsp;<span class="builtintype" id="6164517">uint32</span><span class="op" id="6164523">(</span><span class="builtinfunc" id="6164524">len</span><span class="op" id="6164527">(</span><span class="ident" id="6164528">dat</span><span class="op" id="6164531">)</span><span class="op" id="6164532">)</span>&nbsp;<span class="op" id="6164534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164539">return</span>&nbsp;<span class="builtintype" id="6164546">nil</span><span class="op" id="6164549">,</span>&nbsp;<span class="op" id="6164551">&amp;</span><span class="ident" id="6164552">FormatError</span><span class="op" id="6164563">{</span><span class="ident" id="6164564">offset</span><span class="op" id="6164570">,</span>&nbsp;<span class="string" id="6164572">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6164600">,</span>&nbsp;<span class="builtintype" id="6164602">nil</span><span class="op" id="6164605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6164609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164613">var</span>&nbsp;<span class="ident" id="6164617">cmddat</span>&nbsp;<span class="op" id="6164624">[</span><span class="op" id="6164625">]</span><span class="builtintype" id="6164626">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164633">cmddat</span><span class="op" id="6164639">,</span>&nbsp;<span class="ident" id="6164641">dat</span>&nbsp;<span class="op" id="6164645">=</span>&nbsp;<span class="ident" id="6164647">dat</span><span class="op" id="6164650">[</span><span class="num" id="6164651">0</span><span class="op" id="6164652">:</span><span class="ident" id="6164653">siz</span><span class="op" id="6164656">]</span><span class="op" id="6164657">,</span>&nbsp;<span class="ident" id="6164659">dat</span><span class="op" id="6164662">[</span><span class="ident" id="6164663">siz</span><span class="op" id="6164666">:</span><span class="op" id="6164667">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164671">offset</span>&nbsp;<span class="op" id="6164678">+=</span>&nbsp;<span class="ident" id="6164681">int64</span><span class="op" id="6164686">(</span><span class="ident" id="6164687">siz</span><span class="op" id="6164690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164694">var</span>&nbsp;<span class="ident" id="6164698">s</span>&nbsp;<span class="op" id="6164700">*</span><span class="ident" id="6164701">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164711">switch</span>&nbsp;<span class="ident" id="6164718">cmd</span>&nbsp;<span class="op" id="6164722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164726">default</span><span class="op" id="6164733">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164738">f</span><span class="op" id="6164739">.</span><span class="ident" id="6164740">Loads</span><span class="op" id="6164745">[</span><span class="ident" id="6164746">i</span><span class="op" id="6164747">]</span>&nbsp;<span class="op" id="6164749">=</span>&nbsp;<span class="ident" id="6164751">LoadBytes</span><span class="op" id="6164760">(</span><span class="ident" id="6164761">cmddat</span><span class="op" id="6164767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164772">case</span>&nbsp;<span class="ident" id="6164777">LoadCmdDylib</span><span class="op" id="6164789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164794">var</span>&nbsp;<span class="ident" id="6164798">hdr</span>&nbsp;<span class="ident" id="6164802">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164814">b</span>&nbsp;<span class="op" id="6164816">:=</span>&nbsp;<span class="ident" id="6164819">bytes</span><span class="op" id="6164824">.</span><span class="ident" id="6164825">NewReader</span><span class="op" id="6164834">(</span><span class="ident" id="6164835">cmddat</span><span class="op" id="6164841">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164846">if</span>&nbsp;<span class="ident" id="6164849">err</span>&nbsp;<span class="op" id="6164853">:=</span>&nbsp;<span class="ident" id="6164856">binary</span><span class="op" id="6164862">.</span><span class="ident" id="6164863">Read</span><span class="op" id="6164867">(</span><span class="ident" id="6164868">b</span><span class="op" id="6164869">,</span>&nbsp;<span class="ident" id="6164871">bo</span><span class="op" id="6164873">,</span>&nbsp;<span class="op" id="6164875">&amp;</span><span class="ident" id="6164876">hdr</span><span class="op" id="6164879">)</span><span class="op" id="6164880">;</span>&nbsp;<span class="ident" id="6164882">err</span>&nbsp;<span class="op" id="6164886">!=</span>&nbsp;<span class="builtintype" id="6164889">nil</span>&nbsp;<span class="op" id="6164893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164899">return</span>&nbsp;<span class="builtintype" id="6164906">nil</span><span class="op" id="6164909">,</span>&nbsp;<span class="ident" id="6164911">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6164918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6164923">l</span>&nbsp;<span class="op" id="6164925">:=</span>&nbsp;<span class="builtinfunc" id="6164928">new</span><span class="op" id="6164931">(</span><span class="ident" id="6164932">Dylib</span><span class="op" id="6164937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164942">if</span>&nbsp;<span class="ident" id="6164945">hdr</span><span class="op" id="6164948">.</span><span class="ident" id="6164949">Name</span>&nbsp;<span class="op" id="6164954">&gt;=</span>&nbsp;<span class="builtintype" id="6164957">uint32</span><span class="op" id="6164963">(</span><span class="builtinfunc" id="6164964">len</span><span class="op" id="6164967">(</span><span class="ident" id="6164968">cmddat</span><span class="op" id="6164974">)</span><span class="op" id="6164975">)</span>&nbsp;<span class="op" id="6164977">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6164983">return</span>&nbsp;<span class="builtintype" id="6164990">nil</span><span class="op" id="6164993">,</span>&nbsp;<span class="op" id="6164995">&amp;</span><span class="ident" id="6164996">FormatError</span><span class="op" id="6165007">{</span><span class="ident" id="6165008">offset</span><span class="op" id="6165014">,</span>&nbsp;<span class="string" id="6165016">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6165057">,</span>&nbsp;<span class="ident" id="6165059">hdr</span><span class="op" id="6165062">.</span><span class="ident" id="6165063">Name</span><span class="op" id="6165067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165077">l</span><span class="op" id="6165078">.</span><span class="ident" id="6165079">Name</span>&nbsp;<span class="op" id="6165084">=</span>&nbsp;<span class="ident" id="6165086">cstring</span><span class="op" id="6165093">(</span><span class="ident" id="6165094">cmddat</span><span class="op" id="6165100">[</span><span class="ident" id="6165101">hdr</span><span class="op" id="6165104">.</span><span class="ident" id="6165105">Name</span><span class="op" id="6165109">:</span><span class="op" id="6165110">]</span><span class="op" id="6165111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165116">l</span><span class="op" id="6165117">.</span><span class="ident" id="6165118">Time</span>&nbsp;<span class="op" id="6165123">=</span>&nbsp;<span class="ident" id="6165125">hdr</span><span class="op" id="6165128">.</span><span class="ident" id="6165129">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165137">l</span><span class="op" id="6165138">.</span><span class="ident" id="6165139">CurrentVersion</span>&nbsp;<span class="op" id="6165154">=</span>&nbsp;<span class="ident" id="6165156">hdr</span><span class="op" id="6165159">.</span><span class="ident" id="6165160">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165178">l</span><span class="op" id="6165179">.</span><span class="ident" id="6165180">CompatVersion</span>&nbsp;<span class="op" id="6165194">=</span>&nbsp;<span class="ident" id="6165196">hdr</span><span class="op" id="6165199">.</span><span class="ident" id="6165200">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165217">l</span><span class="op" id="6165218">.</span><span class="ident" id="6165219">LoadBytes</span>&nbsp;<span class="op" id="6165229">=</span>&nbsp;<span class="ident" id="6165231">LoadBytes</span><span class="op" id="6165240">(</span><span class="ident" id="6165241">cmddat</span><span class="op" id="6165247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165252">f</span><span class="op" id="6165253">.</span><span class="ident" id="6165254">Loads</span><span class="op" id="6165259">[</span><span class="ident" id="6165260">i</span><span class="op" id="6165261">]</span>&nbsp;<span class="op" id="6165263">=</span>&nbsp;<span class="ident" id="6165265">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165270">case</span>&nbsp;<span class="ident" id="6165275">LoadCmdSymtab</span><span class="op" id="6165288">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165293">var</span>&nbsp;<span class="ident" id="6165297">hdr</span>&nbsp;<span class="ident" id="6165301">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165314">b</span>&nbsp;<span class="op" id="6165316">:=</span>&nbsp;<span class="ident" id="6165319">bytes</span><span class="op" id="6165324">.</span><span class="ident" id="6165325">NewReader</span><span class="op" id="6165334">(</span><span class="ident" id="6165335">cmddat</span><span class="op" id="6165341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165346">if</span>&nbsp;<span class="ident" id="6165349">err</span>&nbsp;<span class="op" id="6165353">:=</span>&nbsp;<span class="ident" id="6165356">binary</span><span class="op" id="6165362">.</span><span class="ident" id="6165363">Read</span><span class="op" id="6165367">(</span><span class="ident" id="6165368">b</span><span class="op" id="6165369">,</span>&nbsp;<span class="ident" id="6165371">bo</span><span class="op" id="6165373">,</span>&nbsp;<span class="op" id="6165375">&amp;</span><span class="ident" id="6165376">hdr</span><span class="op" id="6165379">)</span><span class="op" id="6165380">;</span>&nbsp;<span class="ident" id="6165382">err</span>&nbsp;<span class="op" id="6165386">!=</span>&nbsp;<span class="builtintype" id="6165389">nil</span>&nbsp;<span class="op" id="6165393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165399">return</span>&nbsp;<span class="builtintype" id="6165406">nil</span><span class="op" id="6165409">,</span>&nbsp;<span class="ident" id="6165411">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165418">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165423">strtab</span>&nbsp;<span class="op" id="6165430">:=</span>&nbsp;<span class="builtinfunc" id="6165433">make</span><span class="op" id="6165437">(</span><span class="op" id="6165438">[</span><span class="op" id="6165439">]</span><span class="builtintype" id="6165440">byte</span><span class="op" id="6165444">,</span>&nbsp;<span class="ident" id="6165446">hdr</span><span class="op" id="6165449">.</span><span class="ident" id="6165450">Strsize</span><span class="op" id="6165457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165462">if</span>&nbsp;<span class="ident" id="6165465">_</span><span class="op" id="6165466">,</span>&nbsp;<span class="ident" id="6165468">err</span>&nbsp;<span class="op" id="6165472">:=</span>&nbsp;<span class="ident" id="6165475">r</span><span class="op" id="6165476">.</span><span class="ident" id="6165477">ReadAt</span><span class="op" id="6165483">(</span><span class="ident" id="6165484">strtab</span><span class="op" id="6165490">,</span>&nbsp;<span class="ident" id="6165492">int64</span><span class="op" id="6165497">(</span><span class="ident" id="6165498">hdr</span><span class="op" id="6165501">.</span><span class="ident" id="6165502">Stroff</span><span class="op" id="6165508">)</span><span class="op" id="6165509">)</span><span class="op" id="6165510">;</span>&nbsp;<span class="ident" id="6165512">err</span>&nbsp;<span class="op" id="6165516">!=</span>&nbsp;<span class="builtintype" id="6165519">nil</span>&nbsp;<span class="op" id="6165523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165529">return</span>&nbsp;<span class="builtintype" id="6165536">nil</span><span class="op" id="6165539">,</span>&nbsp;<span class="ident" id="6165541">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165553">var</span>&nbsp;<span class="ident" id="6165557">symsz</span>&nbsp;<span class="builtintype" id="6165563">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165570">if</span>&nbsp;<span class="ident" id="6165573">f</span><span class="op" id="6165574">.</span><span class="ident" id="6165575">Magic</span>&nbsp;<span class="op" id="6165581">==</span>&nbsp;<span class="ident" id="6165584">Magic64</span>&nbsp;<span class="op" id="6165592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165598">symsz</span>&nbsp;<span class="op" id="6165604">=</span>&nbsp;<span class="num" id="6165606">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165612">}</span>&nbsp;<span class="keyword" id="6165614">else</span>&nbsp;<span class="op" id="6165619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165625">symsz</span>&nbsp;<span class="op" id="6165631">=</span>&nbsp;<span class="num" id="6165633">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165639">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165644">symdat</span>&nbsp;<span class="op" id="6165651">:=</span>&nbsp;<span class="builtinfunc" id="6165654">make</span><span class="op" id="6165658">(</span><span class="op" id="6165659">[</span><span class="op" id="6165660">]</span><span class="builtintype" id="6165661">byte</span><span class="op" id="6165665">,</span>&nbsp;<span class="builtintype" id="6165667">int</span><span class="op" id="6165670">(</span><span class="ident" id="6165671">hdr</span><span class="op" id="6165674">.</span><span class="ident" id="6165675">Nsyms</span><span class="op" id="6165680">)</span><span class="op" id="6165681">*</span><span class="ident" id="6165682">symsz</span><span class="op" id="6165687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165692">if</span>&nbsp;<span class="ident" id="6165695">_</span><span class="op" id="6165696">,</span>&nbsp;<span class="ident" id="6165698">err</span>&nbsp;<span class="op" id="6165702">:=</span>&nbsp;<span class="ident" id="6165705">r</span><span class="op" id="6165706">.</span><span class="ident" id="6165707">ReadAt</span><span class="op" id="6165713">(</span><span class="ident" id="6165714">symdat</span><span class="op" id="6165720">,</span>&nbsp;<span class="ident" id="6165722">int64</span><span class="op" id="6165727">(</span><span class="ident" id="6165728">hdr</span><span class="op" id="6165731">.</span><span class="ident" id="6165732">Symoff</span><span class="op" id="6165738">)</span><span class="op" id="6165739">)</span><span class="op" id="6165740">;</span>&nbsp;<span class="ident" id="6165742">err</span>&nbsp;<span class="op" id="6165746">!=</span>&nbsp;<span class="builtintype" id="6165749">nil</span>&nbsp;<span class="op" id="6165753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165759">return</span>&nbsp;<span class="builtintype" id="6165766">nil</span><span class="op" id="6165769">,</span>&nbsp;<span class="ident" id="6165771">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165783">st</span><span class="op" id="6165785">,</span>&nbsp;<span class="ident" id="6165787">err</span>&nbsp;<span class="op" id="6165791">:=</span>&nbsp;<span class="ident" id="6165794">f</span><span class="op" id="6165795">.</span><span class="ident" id="6165796">parseSymtab</span><span class="op" id="6165807">(</span><span class="ident" id="6165808">symdat</span><span class="op" id="6165814">,</span>&nbsp;<span class="ident" id="6165816">strtab</span><span class="op" id="6165822">,</span>&nbsp;<span class="ident" id="6165824">cmddat</span><span class="op" id="6165830">,</span>&nbsp;<span class="op" id="6165832">&amp;</span><span class="ident" id="6165833">hdr</span><span class="op" id="6165836">,</span>&nbsp;<span class="ident" id="6165838">offset</span><span class="op" id="6165844">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165849">if</span>&nbsp;<span class="ident" id="6165852">err</span>&nbsp;<span class="op" id="6165856">!=</span>&nbsp;<span class="builtintype" id="6165859">nil</span>&nbsp;<span class="op" id="6165863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165869">return</span>&nbsp;<span class="builtintype" id="6165876">nil</span><span class="op" id="6165879">,</span>&nbsp;<span class="ident" id="6165881">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6165888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165893">f</span><span class="op" id="6165894">.</span><span class="ident" id="6165895">Loads</span><span class="op" id="6165900">[</span><span class="ident" id="6165901">i</span><span class="op" id="6165902">]</span>&nbsp;<span class="op" id="6165904">=</span>&nbsp;<span class="ident" id="6165906">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165912">f</span><span class="op" id="6165913">.</span><span class="ident" id="6165914">Symtab</span>&nbsp;<span class="op" id="6165921">=</span>&nbsp;<span class="ident" id="6165923">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165929">case</span>&nbsp;<span class="ident" id="6165934">LoadCmdDysymtab</span><span class="op" id="6165949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6165954">var</span>&nbsp;<span class="ident" id="6165958">hdr</span>&nbsp;<span class="ident" id="6165962">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6165977">b</span>&nbsp;<span class="op" id="6165979">:=</span>&nbsp;<span class="ident" id="6165982">bytes</span><span class="op" id="6165987">.</span><span class="ident" id="6165988">NewReader</span><span class="op" id="6165997">(</span><span class="ident" id="6165998">cmddat</span><span class="op" id="6166004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166009">if</span>&nbsp;<span class="ident" id="6166012">err</span>&nbsp;<span class="op" id="6166016">:=</span>&nbsp;<span class="ident" id="6166019">binary</span><span class="op" id="6166025">.</span><span class="ident" id="6166026">Read</span><span class="op" id="6166030">(</span><span class="ident" id="6166031">b</span><span class="op" id="6166032">,</span>&nbsp;<span class="ident" id="6166034">bo</span><span class="op" id="6166036">,</span>&nbsp;<span class="op" id="6166038">&amp;</span><span class="ident" id="6166039">hdr</span><span class="op" id="6166042">)</span><span class="op" id="6166043">;</span>&nbsp;<span class="ident" id="6166045">err</span>&nbsp;<span class="op" id="6166049">!=</span>&nbsp;<span class="builtintype" id="6166052">nil</span>&nbsp;<span class="op" id="6166056">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166062">return</span>&nbsp;<span class="builtintype" id="6166069">nil</span><span class="op" id="6166072">,</span>&nbsp;<span class="ident" id="6166074">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166086">dat</span>&nbsp;<span class="op" id="6166090">:=</span>&nbsp;<span class="builtinfunc" id="6166093">make</span><span class="op" id="6166097">(</span><span class="op" id="6166098">[</span><span class="op" id="6166099">]</span><span class="builtintype" id="6166100">byte</span><span class="op" id="6166104">,</span>&nbsp;<span class="ident" id="6166106">hdr</span><span class="op" id="6166109">.</span><span class="ident" id="6166110">Nindirectsyms</span><span class="op" id="6166123">*</span><span class="num" id="6166124">4</span><span class="op" id="6166125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166130">if</span>&nbsp;<span class="ident" id="6166133">_</span><span class="op" id="6166134">,</span>&nbsp;<span class="ident" id="6166136">err</span>&nbsp;<span class="op" id="6166140">:=</span>&nbsp;<span class="ident" id="6166143">r</span><span class="op" id="6166144">.</span><span class="ident" id="6166145">ReadAt</span><span class="op" id="6166151">(</span><span class="ident" id="6166152">dat</span><span class="op" id="6166155">,</span>&nbsp;<span class="ident" id="6166157">int64</span><span class="op" id="6166162">(</span><span class="ident" id="6166163">hdr</span><span class="op" id="6166166">.</span><span class="ident" id="6166167">Indirectsymoff</span><span class="op" id="6166181">)</span><span class="op" id="6166182">)</span><span class="op" id="6166183">;</span>&nbsp;<span class="ident" id="6166185">err</span>&nbsp;<span class="op" id="6166189">!=</span>&nbsp;<span class="builtintype" id="6166192">nil</span>&nbsp;<span class="op" id="6166196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166202">return</span>&nbsp;<span class="builtintype" id="6166209">nil</span><span class="op" id="6166212">,</span>&nbsp;<span class="ident" id="6166214">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166226">x</span>&nbsp;<span class="op" id="6166228">:=</span>&nbsp;<span class="builtinfunc" id="6166231">make</span><span class="op" id="6166235">(</span><span class="op" id="6166236">[</span><span class="op" id="6166237">]</span><span class="builtintype" id="6166238">uint32</span><span class="op" id="6166244">,</span>&nbsp;<span class="ident" id="6166246">hdr</span><span class="op" id="6166249">.</span><span class="ident" id="6166250">Nindirectsyms</span><span class="op" id="6166263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166268">if</span>&nbsp;<span class="ident" id="6166271">err</span>&nbsp;<span class="op" id="6166275">:=</span>&nbsp;<span class="ident" id="6166278">binary</span><span class="op" id="6166284">.</span><span class="ident" id="6166285">Read</span><span class="op" id="6166289">(</span><span class="ident" id="6166290">bytes</span><span class="op" id="6166295">.</span><span class="ident" id="6166296">NewReader</span><span class="op" id="6166305">(</span><span class="ident" id="6166306">dat</span><span class="op" id="6166309">)</span><span class="op" id="6166310">,</span>&nbsp;<span class="ident" id="6166312">bo</span><span class="op" id="6166314">,</span>&nbsp;<span class="ident" id="6166316">x</span><span class="op" id="6166317">)</span><span class="op" id="6166318">;</span>&nbsp;<span class="ident" id="6166320">err</span>&nbsp;<span class="op" id="6166324">!=</span>&nbsp;<span class="builtintype" id="6166327">nil</span>&nbsp;<span class="op" id="6166331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166337">return</span>&nbsp;<span class="builtintype" id="6166344">nil</span><span class="op" id="6166347">,</span>&nbsp;<span class="ident" id="6166349">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166356">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166361">st</span>&nbsp;<span class="op" id="6166364">:=</span>&nbsp;<span class="builtinfunc" id="6166367">new</span><span class="op" id="6166370">(</span><span class="ident" id="6166371">Dysymtab</span><span class="op" id="6166379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166384">st</span><span class="op" id="6166386">.</span><span class="ident" id="6166387">LoadBytes</span>&nbsp;<span class="op" id="6166397">=</span>&nbsp;<span class="ident" id="6166399">LoadBytes</span><span class="op" id="6166408">(</span><span class="ident" id="6166409">cmddat</span><span class="op" id="6166415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166420">st</span><span class="op" id="6166422">.</span><span class="ident" id="6166423">DysymtabCmd</span>&nbsp;<span class="op" id="6166435">=</span>&nbsp;<span class="ident" id="6166437">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166444">st</span><span class="op" id="6166446">.</span><span class="ident" id="6166447">IndirectSyms</span>&nbsp;<span class="op" id="6166460">=</span>&nbsp;<span class="ident" id="6166462">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166467">f</span><span class="op" id="6166468">.</span><span class="ident" id="6166469">Loads</span><span class="op" id="6166474">[</span><span class="ident" id="6166475">i</span><span class="op" id="6166476">]</span>&nbsp;<span class="op" id="6166478">=</span>&nbsp;<span class="ident" id="6166480">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166486">f</span><span class="op" id="6166487">.</span><span class="ident" id="6166488">Dysymtab</span>&nbsp;<span class="op" id="6166497">=</span>&nbsp;<span class="ident" id="6166499">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166505">case</span>&nbsp;<span class="ident" id="6166510">LoadCmdSegment</span><span class="op" id="6166524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166529">var</span>&nbsp;<span class="ident" id="6166533">seg32</span>&nbsp;<span class="ident" id="6166539">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166552">b</span>&nbsp;<span class="op" id="6166554">:=</span>&nbsp;<span class="ident" id="6166557">bytes</span><span class="op" id="6166562">.</span><span class="ident" id="6166563">NewReader</span><span class="op" id="6166572">(</span><span class="ident" id="6166573">cmddat</span><span class="op" id="6166579">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166584">if</span>&nbsp;<span class="ident" id="6166587">err</span>&nbsp;<span class="op" id="6166591">:=</span>&nbsp;<span class="ident" id="6166594">binary</span><span class="op" id="6166600">.</span><span class="ident" id="6166601">Read</span><span class="op" id="6166605">(</span><span class="ident" id="6166606">b</span><span class="op" id="6166607">,</span>&nbsp;<span class="ident" id="6166609">bo</span><span class="op" id="6166611">,</span>&nbsp;<span class="op" id="6166613">&amp;</span><span class="ident" id="6166614">seg32</span><span class="op" id="6166619">)</span><span class="op" id="6166620">;</span>&nbsp;<span class="ident" id="6166622">err</span>&nbsp;<span class="op" id="6166626">!=</span>&nbsp;<span class="builtintype" id="6166629">nil</span>&nbsp;<span class="op" id="6166633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6166639">return</span>&nbsp;<span class="builtintype" id="6166646">nil</span><span class="op" id="6166649">,</span>&nbsp;<span class="ident" id="6166651">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6166658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166663">s</span>&nbsp;<span class="op" id="6166665">=</span>&nbsp;<span class="builtinfunc" id="6166667">new</span><span class="op" id="6166670">(</span><span class="ident" id="6166671">Segment</span><span class="op" id="6166678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166683">s</span><span class="op" id="6166684">.</span><span class="ident" id="6166685">LoadBytes</span>&nbsp;<span class="op" id="6166695">=</span>&nbsp;<span class="ident" id="6166697">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166707">s</span><span class="op" id="6166708">.</span><span class="ident" id="6166709">Cmd</span>&nbsp;<span class="op" id="6166713">=</span>&nbsp;<span class="ident" id="6166715">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166722">s</span><span class="op" id="6166723">.</span><span class="ident" id="6166724">Len</span>&nbsp;<span class="op" id="6166728">=</span>&nbsp;<span class="ident" id="6166730">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166737">s</span><span class="op" id="6166738">.</span><span class="ident" id="6166739">Name</span>&nbsp;<span class="op" id="6166744">=</span>&nbsp;<span class="ident" id="6166746">cstring</span><span class="op" id="6166753">(</span><span class="ident" id="6166754">seg32</span><span class="op" id="6166759">.</span><span class="ident" id="6166760">Name</span><span class="op" id="6166764">[</span><span class="num" id="6166765">0</span><span class="op" id="6166766">:</span><span class="op" id="6166767">]</span><span class="op" id="6166768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166773">s</span><span class="op" id="6166774">.</span><span class="ident" id="6166775">Addr</span>&nbsp;<span class="op" id="6166780">=</span>&nbsp;<span class="ident" id="6166782">uint64</span><span class="op" id="6166788">(</span><span class="ident" id="6166789">seg32</span><span class="op" id="6166794">.</span><span class="ident" id="6166795">Addr</span><span class="op" id="6166799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166804">s</span><span class="op" id="6166805">.</span><span class="ident" id="6166806">Memsz</span>&nbsp;<span class="op" id="6166812">=</span>&nbsp;<span class="ident" id="6166814">uint64</span><span class="op" id="6166820">(</span><span class="ident" id="6166821">seg32</span><span class="op" id="6166826">.</span><span class="ident" id="6166827">Memsz</span><span class="op" id="6166832">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166837">s</span><span class="op" id="6166838">.</span><span class="ident" id="6166839">Offset</span>&nbsp;<span class="op" id="6166846">=</span>&nbsp;<span class="ident" id="6166848">uint64</span><span class="op" id="6166854">(</span><span class="ident" id="6166855">seg32</span><span class="op" id="6166860">.</span><span class="ident" id="6166861">Offset</span><span class="op" id="6166867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166872">s</span><span class="op" id="6166873">.</span><span class="ident" id="6166874">Filesz</span>&nbsp;<span class="op" id="6166881">=</span>&nbsp;<span class="ident" id="6166883">uint64</span><span class="op" id="6166889">(</span><span class="ident" id="6166890">seg32</span><span class="op" id="6166895">.</span><span class="ident" id="6166896">Filesz</span><span class="op" id="6166902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166907">s</span><span class="op" id="6166908">.</span><span class="ident" id="6166909">Maxprot</span>&nbsp;<span class="op" id="6166917">=</span>&nbsp;<span class="ident" id="6166919">seg32</span><span class="op" id="6166924">.</span><span class="ident" id="6166925">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166936">s</span><span class="op" id="6166937">.</span><span class="ident" id="6166938">Prot</span>&nbsp;<span class="op" id="6166943">=</span>&nbsp;<span class="ident" id="6166945">seg32</span><span class="op" id="6166950">.</span><span class="ident" id="6166951">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166959">s</span><span class="op" id="6166960">.</span><span class="ident" id="6166961">Nsect</span>&nbsp;<span class="op" id="6166967">=</span>&nbsp;<span class="ident" id="6166969">seg32</span><span class="op" id="6166974">.</span><span class="ident" id="6166975">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6166984">s</span><span class="op" id="6166985">.</span><span class="ident" id="6166986">Flag</span>&nbsp;<span class="op" id="6166991">=</span>&nbsp;<span class="ident" id="6166993">seg32</span><span class="op" id="6166998">.</span><span class="ident" id="6166999">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167007">f</span><span class="op" id="6167008">.</span><span class="ident" id="6167009">Loads</span><span class="op" id="6167014">[</span><span class="ident" id="6167015">i</span><span class="op" id="6167016">]</span>&nbsp;<span class="op" id="6167018">=</span>&nbsp;<span class="ident" id="6167020">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167025">for</span>&nbsp;<span class="ident" id="6167029">i</span>&nbsp;<span class="op" id="6167031">:=</span>&nbsp;<span class="num" id="6167034">0</span><span class="op" id="6167035">;</span>&nbsp;<span class="ident" id="6167037">i</span>&nbsp;<span class="op" id="6167039">&lt;</span>&nbsp;<span class="builtintype" id="6167041">int</span><span class="op" id="6167044">(</span><span class="ident" id="6167045">s</span><span class="op" id="6167046">.</span><span class="ident" id="6167047">Nsect</span><span class="op" id="6167052">)</span><span class="op" id="6167053">;</span>&nbsp;<span class="ident" id="6167055">i</span><span class="op" id="6167056">++</span>&nbsp;<span class="op" id="6167059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167065">var</span>&nbsp;<span class="ident" id="6167069">sh32</span>&nbsp;<span class="ident" id="6167074">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167088">if</span>&nbsp;<span class="ident" id="6167091">err</span>&nbsp;<span class="op" id="6167095">:=</span>&nbsp;<span class="ident" id="6167098">binary</span><span class="op" id="6167104">.</span><span class="ident" id="6167105">Read</span><span class="op" id="6167109">(</span><span class="ident" id="6167110">b</span><span class="op" id="6167111">,</span>&nbsp;<span class="ident" id="6167113">bo</span><span class="op" id="6167115">,</span>&nbsp;<span class="op" id="6167117">&amp;</span><span class="ident" id="6167118">sh32</span><span class="op" id="6167122">)</span><span class="op" id="6167123">;</span>&nbsp;<span class="ident" id="6167125">err</span>&nbsp;<span class="op" id="6167129">!=</span>&nbsp;<span class="builtintype" id="6167132">nil</span>&nbsp;<span class="op" id="6167136">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167143">return</span>&nbsp;<span class="builtintype" id="6167150">nil</span><span class="op" id="6167153">,</span>&nbsp;<span class="ident" id="6167155">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167169">sh</span>&nbsp;<span class="op" id="6167172">:=</span>&nbsp;<span class="builtinfunc" id="6167175">new</span><span class="op" id="6167178">(</span><span class="ident" id="6167179">Section</span><span class="op" id="6167186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167192">sh</span><span class="op" id="6167194">.</span><span class="ident" id="6167195">Name</span>&nbsp;<span class="op" id="6167200">=</span>&nbsp;<span class="ident" id="6167202">cstring</span><span class="op" id="6167209">(</span><span class="ident" id="6167210">sh32</span><span class="op" id="6167214">.</span><span class="ident" id="6167215">Name</span><span class="op" id="6167219">[</span><span class="num" id="6167220">0</span><span class="op" id="6167221">:</span><span class="op" id="6167222">]</span><span class="op" id="6167223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167229">sh</span><span class="op" id="6167231">.</span><span class="ident" id="6167232">Seg</span>&nbsp;<span class="op" id="6167236">=</span>&nbsp;<span class="ident" id="6167238">cstring</span><span class="op" id="6167245">(</span><span class="ident" id="6167246">sh32</span><span class="op" id="6167250">.</span><span class="ident" id="6167251">Seg</span><span class="op" id="6167254">[</span><span class="num" id="6167255">0</span><span class="op" id="6167256">:</span><span class="op" id="6167257">]</span><span class="op" id="6167258">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167264">sh</span><span class="op" id="6167266">.</span><span class="ident" id="6167267">Addr</span>&nbsp;<span class="op" id="6167272">=</span>&nbsp;<span class="ident" id="6167274">uint64</span><span class="op" id="6167280">(</span><span class="ident" id="6167281">sh32</span><span class="op" id="6167285">.</span><span class="ident" id="6167286">Addr</span><span class="op" id="6167290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167296">sh</span><span class="op" id="6167298">.</span><span class="ident" id="6167299">Size</span>&nbsp;<span class="op" id="6167304">=</span>&nbsp;<span class="ident" id="6167306">uint64</span><span class="op" id="6167312">(</span><span class="ident" id="6167313">sh32</span><span class="op" id="6167317">.</span><span class="ident" id="6167318">Size</span><span class="op" id="6167322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167328">sh</span><span class="op" id="6167330">.</span><span class="ident" id="6167331">Offset</span>&nbsp;<span class="op" id="6167338">=</span>&nbsp;<span class="ident" id="6167340">sh32</span><span class="op" id="6167344">.</span><span class="ident" id="6167345">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167356">sh</span><span class="op" id="6167358">.</span><span class="ident" id="6167359">Align</span>&nbsp;<span class="op" id="6167365">=</span>&nbsp;<span class="ident" id="6167367">sh32</span><span class="op" id="6167371">.</span><span class="ident" id="6167372">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167382">sh</span><span class="op" id="6167384">.</span><span class="ident" id="6167385">Reloff</span>&nbsp;<span class="op" id="6167392">=</span>&nbsp;<span class="ident" id="6167394">sh32</span><span class="op" id="6167398">.</span><span class="ident" id="6167399">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167410">sh</span><span class="op" id="6167412">.</span><span class="ident" id="6167413">Nreloc</span>&nbsp;<span class="op" id="6167420">=</span>&nbsp;<span class="ident" id="6167422">sh32</span><span class="op" id="6167426">.</span><span class="ident" id="6167427">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167438">sh</span><span class="op" id="6167440">.</span><span class="ident" id="6167441">Flags</span>&nbsp;<span class="op" id="6167447">=</span>&nbsp;<span class="ident" id="6167449">sh32</span><span class="op" id="6167453">.</span><span class="ident" id="6167454">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167464">f</span><span class="op" id="6167465">.</span><span class="ident" id="6167466">pushSection</span><span class="op" id="6167477">(</span><span class="ident" id="6167478">sh</span><span class="op" id="6167480">,</span>&nbsp;<span class="ident" id="6167482">r</span><span class="op" id="6167483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167493">case</span>&nbsp;<span class="ident" id="6167498">LoadCmdSegment64</span><span class="op" id="6167514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167519">var</span>&nbsp;<span class="ident" id="6167523">seg64</span>&nbsp;<span class="ident" id="6167529">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167542">b</span>&nbsp;<span class="op" id="6167544">:=</span>&nbsp;<span class="ident" id="6167547">bytes</span><span class="op" id="6167552">.</span><span class="ident" id="6167553">NewReader</span><span class="op" id="6167562">(</span><span class="ident" id="6167563">cmddat</span><span class="op" id="6167569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167574">if</span>&nbsp;<span class="ident" id="6167577">err</span>&nbsp;<span class="op" id="6167581">:=</span>&nbsp;<span class="ident" id="6167584">binary</span><span class="op" id="6167590">.</span><span class="ident" id="6167591">Read</span><span class="op" id="6167595">(</span><span class="ident" id="6167596">b</span><span class="op" id="6167597">,</span>&nbsp;<span class="ident" id="6167599">bo</span><span class="op" id="6167601">,</span>&nbsp;<span class="op" id="6167603">&amp;</span><span class="ident" id="6167604">seg64</span><span class="op" id="6167609">)</span><span class="op" id="6167610">;</span>&nbsp;<span class="ident" id="6167612">err</span>&nbsp;<span class="op" id="6167616">!=</span>&nbsp;<span class="builtintype" id="6167619">nil</span>&nbsp;<span class="op" id="6167623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167629">return</span>&nbsp;<span class="builtintype" id="6167636">nil</span><span class="op" id="6167639">,</span>&nbsp;<span class="ident" id="6167641">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6167648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167653">s</span>&nbsp;<span class="op" id="6167655">=</span>&nbsp;<span class="builtinfunc" id="6167657">new</span><span class="op" id="6167660">(</span><span class="ident" id="6167661">Segment</span><span class="op" id="6167668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167673">s</span><span class="op" id="6167674">.</span><span class="ident" id="6167675">LoadBytes</span>&nbsp;<span class="op" id="6167685">=</span>&nbsp;<span class="ident" id="6167687">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167697">s</span><span class="op" id="6167698">.</span><span class="ident" id="6167699">Cmd</span>&nbsp;<span class="op" id="6167703">=</span>&nbsp;<span class="ident" id="6167705">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167712">s</span><span class="op" id="6167713">.</span><span class="ident" id="6167714">Len</span>&nbsp;<span class="op" id="6167718">=</span>&nbsp;<span class="ident" id="6167720">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167727">s</span><span class="op" id="6167728">.</span><span class="ident" id="6167729">Name</span>&nbsp;<span class="op" id="6167734">=</span>&nbsp;<span class="ident" id="6167736">cstring</span><span class="op" id="6167743">(</span><span class="ident" id="6167744">seg64</span><span class="op" id="6167749">.</span><span class="ident" id="6167750">Name</span><span class="op" id="6167754">[</span><span class="num" id="6167755">0</span><span class="op" id="6167756">:</span><span class="op" id="6167757">]</span><span class="op" id="6167758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167763">s</span><span class="op" id="6167764">.</span><span class="ident" id="6167765">Addr</span>&nbsp;<span class="op" id="6167770">=</span>&nbsp;<span class="ident" id="6167772">seg64</span><span class="op" id="6167777">.</span><span class="ident" id="6167778">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167786">s</span><span class="op" id="6167787">.</span><span class="ident" id="6167788">Memsz</span>&nbsp;<span class="op" id="6167794">=</span>&nbsp;<span class="ident" id="6167796">seg64</span><span class="op" id="6167801">.</span><span class="ident" id="6167802">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167811">s</span><span class="op" id="6167812">.</span><span class="ident" id="6167813">Offset</span>&nbsp;<span class="op" id="6167820">=</span>&nbsp;<span class="ident" id="6167822">seg64</span><span class="op" id="6167827">.</span><span class="ident" id="6167828">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167838">s</span><span class="op" id="6167839">.</span><span class="ident" id="6167840">Filesz</span>&nbsp;<span class="op" id="6167847">=</span>&nbsp;<span class="ident" id="6167849">seg64</span><span class="op" id="6167854">.</span><span class="ident" id="6167855">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167865">s</span><span class="op" id="6167866">.</span><span class="ident" id="6167867">Maxprot</span>&nbsp;<span class="op" id="6167875">=</span>&nbsp;<span class="ident" id="6167877">seg64</span><span class="op" id="6167882">.</span><span class="ident" id="6167883">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167894">s</span><span class="op" id="6167895">.</span><span class="ident" id="6167896">Prot</span>&nbsp;<span class="op" id="6167901">=</span>&nbsp;<span class="ident" id="6167903">seg64</span><span class="op" id="6167908">.</span><span class="ident" id="6167909">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167917">s</span><span class="op" id="6167918">.</span><span class="ident" id="6167919">Nsect</span>&nbsp;<span class="op" id="6167925">=</span>&nbsp;<span class="ident" id="6167927">seg64</span><span class="op" id="6167932">.</span><span class="ident" id="6167933">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167942">s</span><span class="op" id="6167943">.</span><span class="ident" id="6167944">Flag</span>&nbsp;<span class="op" id="6167949">=</span>&nbsp;<span class="ident" id="6167951">seg64</span><span class="op" id="6167956">.</span><span class="ident" id="6167957">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6167965">f</span><span class="op" id="6167966">.</span><span class="ident" id="6167967">Loads</span><span class="op" id="6167972">[</span><span class="ident" id="6167973">i</span><span class="op" id="6167974">]</span>&nbsp;<span class="op" id="6167976">=</span>&nbsp;<span class="ident" id="6167978">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6167983">for</span>&nbsp;<span class="ident" id="6167987">i</span>&nbsp;<span class="op" id="6167989">:=</span>&nbsp;<span class="num" id="6167992">0</span><span class="op" id="6167993">;</span>&nbsp;<span class="ident" id="6167995">i</span>&nbsp;<span class="op" id="6167997">&lt;</span>&nbsp;<span class="builtintype" id="6167999">int</span><span class="op" id="6168002">(</span><span class="ident" id="6168003">s</span><span class="op" id="6168004">.</span><span class="ident" id="6168005">Nsect</span><span class="op" id="6168010">)</span><span class="op" id="6168011">;</span>&nbsp;<span class="ident" id="6168013">i</span><span class="op" id="6168014">++</span>&nbsp;<span class="op" id="6168017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168023">var</span>&nbsp;<span class="ident" id="6168027">sh64</span>&nbsp;<span class="ident" id="6168032">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168046">if</span>&nbsp;<span class="ident" id="6168049">err</span>&nbsp;<span class="op" id="6168053">:=</span>&nbsp;<span class="ident" id="6168056">binary</span><span class="op" id="6168062">.</span><span class="ident" id="6168063">Read</span><span class="op" id="6168067">(</span><span class="ident" id="6168068">b</span><span class="op" id="6168069">,</span>&nbsp;<span class="ident" id="6168071">bo</span><span class="op" id="6168073">,</span>&nbsp;<span class="op" id="6168075">&amp;</span><span class="ident" id="6168076">sh64</span><span class="op" id="6168080">)</span><span class="op" id="6168081">;</span>&nbsp;<span class="ident" id="6168083">err</span>&nbsp;<span class="op" id="6168087">!=</span>&nbsp;<span class="builtintype" id="6168090">nil</span>&nbsp;<span class="op" id="6168094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168101">return</span>&nbsp;<span class="builtintype" id="6168108">nil</span><span class="op" id="6168111">,</span>&nbsp;<span class="ident" id="6168113">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168121">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168127">sh</span>&nbsp;<span class="op" id="6168130">:=</span>&nbsp;<span class="builtinfunc" id="6168133">new</span><span class="op" id="6168136">(</span><span class="ident" id="6168137">Section</span><span class="op" id="6168144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168150">sh</span><span class="op" id="6168152">.</span><span class="ident" id="6168153">Name</span>&nbsp;<span class="op" id="6168158">=</span>&nbsp;<span class="ident" id="6168160">cstring</span><span class="op" id="6168167">(</span><span class="ident" id="6168168">sh64</span><span class="op" id="6168172">.</span><span class="ident" id="6168173">Name</span><span class="op" id="6168177">[</span><span class="num" id="6168178">0</span><span class="op" id="6168179">:</span><span class="op" id="6168180">]</span><span class="op" id="6168181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168187">sh</span><span class="op" id="6168189">.</span><span class="ident" id="6168190">Seg</span>&nbsp;<span class="op" id="6168194">=</span>&nbsp;<span class="ident" id="6168196">cstring</span><span class="op" id="6168203">(</span><span class="ident" id="6168204">sh64</span><span class="op" id="6168208">.</span><span class="ident" id="6168209">Seg</span><span class="op" id="6168212">[</span><span class="num" id="6168213">0</span><span class="op" id="6168214">:</span><span class="op" id="6168215">]</span><span class="op" id="6168216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168222">sh</span><span class="op" id="6168224">.</span><span class="ident" id="6168225">Addr</span>&nbsp;<span class="op" id="6168230">=</span>&nbsp;<span class="ident" id="6168232">sh64</span><span class="op" id="6168236">.</span><span class="ident" id="6168237">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168246">sh</span><span class="op" id="6168248">.</span><span class="ident" id="6168249">Size</span>&nbsp;<span class="op" id="6168254">=</span>&nbsp;<span class="ident" id="6168256">sh64</span><span class="op" id="6168260">.</span><span class="ident" id="6168261">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168270">sh</span><span class="op" id="6168272">.</span><span class="ident" id="6168273">Offset</span>&nbsp;<span class="op" id="6168280">=</span>&nbsp;<span class="ident" id="6168282">sh64</span><span class="op" id="6168286">.</span><span class="ident" id="6168287">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168298">sh</span><span class="op" id="6168300">.</span><span class="ident" id="6168301">Align</span>&nbsp;<span class="op" id="6168307">=</span>&nbsp;<span class="ident" id="6168309">sh64</span><span class="op" id="6168313">.</span><span class="ident" id="6168314">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168324">sh</span><span class="op" id="6168326">.</span><span class="ident" id="6168327">Reloff</span>&nbsp;<span class="op" id="6168334">=</span>&nbsp;<span class="ident" id="6168336">sh64</span><span class="op" id="6168340">.</span><span class="ident" id="6168341">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168352">sh</span><span class="op" id="6168354">.</span><span class="ident" id="6168355">Nreloc</span>&nbsp;<span class="op" id="6168362">=</span>&nbsp;<span class="ident" id="6168364">sh64</span><span class="op" id="6168368">.</span><span class="ident" id="6168369">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168380">sh</span><span class="op" id="6168382">.</span><span class="ident" id="6168383">Flags</span>&nbsp;<span class="op" id="6168389">=</span>&nbsp;<span class="ident" id="6168391">sh64</span><span class="op" id="6168395">.</span><span class="ident" id="6168396">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168406">f</span><span class="op" id="6168407">.</span><span class="ident" id="6168408">pushSection</span><span class="op" id="6168419">(</span><span class="ident" id="6168420">sh</span><span class="op" id="6168422">,</span>&nbsp;<span class="ident" id="6168424">r</span><span class="op" id="6168425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168438">if</span>&nbsp;<span class="ident" id="6168441">s</span>&nbsp;<span class="op" id="6168443">!=</span>&nbsp;<span class="builtintype" id="6168446">nil</span>&nbsp;<span class="op" id="6168450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168455">s</span><span class="op" id="6168456">.</span><span class="ident" id="6168457">sr</span>&nbsp;<span class="op" id="6168460">=</span>&nbsp;<span class="ident" id="6168462">io</span><span class="op" id="6168464">.</span><span class="ident" id="6168465">NewSectionReader</span><span class="op" id="6168481">(</span><span class="ident" id="6168482">r</span><span class="op" id="6168483">,</span>&nbsp;<span class="ident" id="6168485">int64</span><span class="op" id="6168490">(</span><span class="ident" id="6168491">s</span><span class="op" id="6168492">.</span><span class="ident" id="6168493">Offset</span><span class="op" id="6168499">)</span><span class="op" id="6168500">,</span>&nbsp;<span class="ident" id="6168502">int64</span><span class="op" id="6168507">(</span><span class="ident" id="6168508">s</span><span class="op" id="6168509">.</span><span class="ident" id="6168510">Filesz</span><span class="op" id="6168516">)</span><span class="op" id="6168517">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168522">s</span><span class="op" id="6168523">.</span><span class="ident" id="6168524">ReaderAt</span>&nbsp;<span class="op" id="6168533">=</span>&nbsp;<span class="ident" id="6168535">s</span><span class="op" id="6168536">.</span><span class="ident" id="6168537">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168548">return</span>&nbsp;<span class="ident" id="6168555">f</span><span class="op" id="6168556">,</span>&nbsp;<span class="builtintype" id="6168558">nil</span><br>
<span class="lineno"></span><span class="op" id="6168562">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6168565">func</span>&nbsp;<span class="op" id="6168570">(</span><span class="ident" id="6168571">f</span>&nbsp;<span class="op" id="6168573">*</span><span class="ident" id="6168574">File</span><span class="op" id="6168578">)</span>&nbsp;<span class="ident" id="6168580">parseSymtab</span><span class="op" id="6168591">(</span><span class="ident" id="6168592">symdat</span><span class="op" id="6168598">,</span>&nbsp;<span class="ident" id="6168600">strtab</span><span class="op" id="6168606">,</span>&nbsp;<span class="ident" id="6168608">cmddat</span>&nbsp;<span class="op" id="6168615">[</span><span class="op" id="6168616">]</span><span class="builtintype" id="6168617">byte</span><span class="op" id="6168621">,</span>&nbsp;<span class="ident" id="6168623">hdr</span>&nbsp;<span class="op" id="6168627">*</span><span class="ident" id="6168628">SymtabCmd</span><span class="op" id="6168637">,</span>&nbsp;<span class="ident" id="6168639">offset</span>&nbsp;<span class="ident" id="6168646">int64</span><span class="op" id="6168651">)</span>&nbsp;<span class="op" id="6168653">(</span><span class="op" id="6168654">*</span><span class="ident" id="6168655">Symtab</span><span class="op" id="6168661">,</span>&nbsp;<span class="builtintype" id="6168663">error</span><span class="op" id="6168668">)</span>&nbsp;<span class="op" id="6168670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168673">bo</span>&nbsp;<span class="op" id="6168676">:=</span>&nbsp;<span class="ident" id="6168679">f</span><span class="op" id="6168680">.</span><span class="ident" id="6168681">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168692">symtab</span>&nbsp;<span class="op" id="6168699">:=</span>&nbsp;<span class="builtinfunc" id="6168702">make</span><span class="op" id="6168706">(</span><span class="op" id="6168707">[</span><span class="op" id="6168708">]</span><span class="ident" id="6168709">Symbol</span><span class="op" id="6168715">,</span>&nbsp;<span class="ident" id="6168717">hdr</span><span class="op" id="6168720">.</span><span class="ident" id="6168721">Nsyms</span><span class="op" id="6168726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6168729">b</span>&nbsp;<span class="op" id="6168731">:=</span>&nbsp;<span class="ident" id="6168734">bytes</span><span class="op" id="6168739">.</span><span class="ident" id="6168740">NewReader</span><span class="op" id="6168749">(</span><span class="ident" id="6168750">symdat</span><span class="op" id="6168756">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168759">for</span>&nbsp;<span class="ident" id="6168763">i</span>&nbsp;<span class="op" id="6168765">:=</span>&nbsp;<span class="keyword" id="6168768">range</span>&nbsp;<span class="ident" id="6168774">symtab</span>&nbsp;<span class="op" id="6168781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168785">var</span>&nbsp;<span class="ident" id="6168789">n</span>&nbsp;<span class="ident" id="6168791">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168801">if</span>&nbsp;<span class="ident" id="6168804">f</span><span class="op" id="6168805">.</span><span class="ident" id="6168806">Magic</span>&nbsp;<span class="op" id="6168812">==</span>&nbsp;<span class="ident" id="6168815">Magic64</span>&nbsp;<span class="op" id="6168823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168828">if</span>&nbsp;<span class="ident" id="6168831">err</span>&nbsp;<span class="op" id="6168835">:=</span>&nbsp;<span class="ident" id="6168838">binary</span><span class="op" id="6168844">.</span><span class="ident" id="6168845">Read</span><span class="op" id="6168849">(</span><span class="ident" id="6168850">b</span><span class="op" id="6168851">,</span>&nbsp;<span class="ident" id="6168853">bo</span><span class="op" id="6168855">,</span>&nbsp;<span class="op" id="6168857">&amp;</span><span class="ident" id="6168858">n</span><span class="op" id="6168859">)</span><span class="op" id="6168860">;</span>&nbsp;<span class="ident" id="6168862">err</span>&nbsp;<span class="op" id="6168866">!=</span>&nbsp;<span class="builtintype" id="6168869">nil</span>&nbsp;<span class="op" id="6168873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168879">return</span>&nbsp;<span class="builtintype" id="6168886">nil</span><span class="op" id="6168889">,</span>&nbsp;<span class="ident" id="6168891">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6168902">}</span>&nbsp;<span class="keyword" id="6168904">else</span>&nbsp;<span class="op" id="6168909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168914">var</span>&nbsp;<span class="ident" id="6168918">n32</span>&nbsp;<span class="ident" id="6168922">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168933">if</span>&nbsp;<span class="ident" id="6168936">err</span>&nbsp;<span class="op" id="6168940">:=</span>&nbsp;<span class="ident" id="6168943">binary</span><span class="op" id="6168949">.</span><span class="ident" id="6168950">Read</span><span class="op" id="6168954">(</span><span class="ident" id="6168955">b</span><span class="op" id="6168956">,</span>&nbsp;<span class="ident" id="6168958">bo</span><span class="op" id="6168960">,</span>&nbsp;<span class="op" id="6168962">&amp;</span><span class="ident" id="6168963">n32</span><span class="op" id="6168966">)</span><span class="op" id="6168967">;</span>&nbsp;<span class="ident" id="6168969">err</span>&nbsp;<span class="op" id="6168973">!=</span>&nbsp;<span class="builtintype" id="6168976">nil</span>&nbsp;<span class="op" id="6168980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6168986">return</span>&nbsp;<span class="builtintype" id="6168993">nil</span><span class="op" id="6168996">,</span>&nbsp;<span class="ident" id="6168998">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6169005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169010">n</span><span class="op" id="6169011">.</span><span class="ident" id="6169012">Name</span>&nbsp;<span class="op" id="6169017">=</span>&nbsp;<span class="ident" id="6169019">n32</span><span class="op" id="6169022">.</span><span class="ident" id="6169023">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169031">n</span><span class="op" id="6169032">.</span><span class="ident" id="6169033">Type</span>&nbsp;<span class="op" id="6169038">=</span>&nbsp;<span class="ident" id="6169040">n32</span><span class="op" id="6169043">.</span><span class="ident" id="6169044">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169052">n</span><span class="op" id="6169053">.</span><span class="ident" id="6169054">Sect</span>&nbsp;<span class="op" id="6169059">=</span>&nbsp;<span class="ident" id="6169061">n32</span><span class="op" id="6169064">.</span><span class="ident" id="6169065">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169073">n</span><span class="op" id="6169074">.</span><span class="ident" id="6169075">Desc</span>&nbsp;<span class="op" id="6169080">=</span>&nbsp;<span class="ident" id="6169082">n32</span><span class="op" id="6169085">.</span><span class="ident" id="6169086">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169094">n</span><span class="op" id="6169095">.</span><span class="ident" id="6169096">Value</span>&nbsp;<span class="op" id="6169102">=</span>&nbsp;<span class="ident" id="6169104">uint64</span><span class="op" id="6169110">(</span><span class="ident" id="6169111">n32</span><span class="op" id="6169114">.</span><span class="ident" id="6169115">Value</span><span class="op" id="6169120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6169124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169128">sym</span>&nbsp;<span class="op" id="6169132">:=</span>&nbsp;<span class="op" id="6169135">&amp;</span><span class="ident" id="6169136">symtab</span><span class="op" id="6169142">[</span><span class="ident" id="6169143">i</span><span class="op" id="6169144">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169148">if</span>&nbsp;<span class="ident" id="6169151">n</span><span class="op" id="6169152">.</span><span class="ident" id="6169153">Name</span>&nbsp;<span class="op" id="6169158">&gt;=</span>&nbsp;<span class="builtintype" id="6169161">uint32</span><span class="op" id="6169167">(</span><span class="builtinfunc" id="6169168">len</span><span class="op" id="6169171">(</span><span class="ident" id="6169172">strtab</span><span class="op" id="6169178">)</span><span class="op" id="6169179">)</span>&nbsp;<span class="op" id="6169181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169186">return</span>&nbsp;<span class="builtintype" id="6169193">nil</span><span class="op" id="6169196">,</span>&nbsp;<span class="op" id="6169198">&amp;</span><span class="ident" id="6169199">FormatError</span><span class="op" id="6169210">{</span><span class="ident" id="6169211">offset</span><span class="op" id="6169217">,</span>&nbsp;<span class="string" id="6169219">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6169249">,</span>&nbsp;<span class="ident" id="6169251">n</span><span class="op" id="6169252">.</span><span class="ident" id="6169253">Name</span><span class="op" id="6169257">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6169261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169265">sym</span><span class="op" id="6169268">.</span><span class="ident" id="6169269">Name</span>&nbsp;<span class="op" id="6169274">=</span>&nbsp;<span class="ident" id="6169276">cstring</span><span class="op" id="6169283">(</span><span class="ident" id="6169284">strtab</span><span class="op" id="6169290">[</span><span class="ident" id="6169291">n</span><span class="op" id="6169292">.</span><span class="ident" id="6169293">Name</span><span class="op" id="6169297">:</span><span class="op" id="6169298">]</span><span class="op" id="6169299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169303">sym</span><span class="op" id="6169306">.</span><span class="ident" id="6169307">Type</span>&nbsp;<span class="op" id="6169312">=</span>&nbsp;<span class="ident" id="6169314">n</span><span class="op" id="6169315">.</span><span class="ident" id="6169316">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169323">sym</span><span class="op" id="6169326">.</span><span class="ident" id="6169327">Sect</span>&nbsp;<span class="op" id="6169332">=</span>&nbsp;<span class="ident" id="6169334">n</span><span class="op" id="6169335">.</span><span class="ident" id="6169336">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169343">sym</span><span class="op" id="6169346">.</span><span class="ident" id="6169347">Desc</span>&nbsp;<span class="op" id="6169352">=</span>&nbsp;<span class="ident" id="6169354">n</span><span class="op" id="6169355">.</span><span class="ident" id="6169356">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169363">sym</span><span class="op" id="6169366">.</span><span class="ident" id="6169367">Value</span>&nbsp;<span class="op" id="6169373">=</span>&nbsp;<span class="ident" id="6169375">n</span><span class="op" id="6169376">.</span><span class="ident" id="6169377">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6169384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169387">st</span>&nbsp;<span class="op" id="6169390">:=</span>&nbsp;<span class="builtinfunc" id="6169393">new</span><span class="op" id="6169396">(</span><span class="ident" id="6169397">Symtab</span><span class="op" id="6169403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169406">st</span><span class="op" id="6169408">.</span><span class="ident" id="6169409">LoadBytes</span>&nbsp;<span class="op" id="6169419">=</span>&nbsp;<span class="ident" id="6169421">LoadBytes</span><span class="op" id="6169430">(</span><span class="ident" id="6169431">cmddat</span><span class="op" id="6169437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169440">st</span><span class="op" id="6169442">.</span><span class="ident" id="6169443">Syms</span>&nbsp;<span class="op" id="6169448">=</span>&nbsp;<span class="ident" id="6169450">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169458">return</span>&nbsp;<span class="ident" id="6169465">st</span><span class="op" id="6169467">,</span>&nbsp;<span class="builtintype" id="6169469">nil</span><br>
<span class="lineno"></span><span class="op" id="6169473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6169476">func</span>&nbsp;<span class="op" id="6169481">(</span><span class="ident" id="6169482">f</span>&nbsp;<span class="op" id="6169484">*</span><span class="ident" id="6169485">File</span><span class="op" id="6169489">)</span>&nbsp;<span class="ident" id="6169491">pushSection</span><span class="op" id="6169502">(</span><span class="ident" id="6169503">sh</span>&nbsp;<span class="op" id="6169506">*</span><span class="ident" id="6169507">Section</span><span class="op" id="6169514">,</span>&nbsp;<span class="ident" id="6169516">r</span>&nbsp;<span class="ident" id="6169518">io</span><span class="op" id="6169520">.</span><span class="ident" id="6169521">ReaderAt</span><span class="op" id="6169529">)</span>&nbsp;<span class="op" id="6169531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169534">f</span><span class="op" id="6169535">.</span><span class="ident" id="6169536">Sections</span>&nbsp;<span class="op" id="6169545">=</span>&nbsp;<span class="builtinfunc" id="6169547">append</span><span class="op" id="6169553">(</span><span class="ident" id="6169554">f</span><span class="op" id="6169555">.</span><span class="ident" id="6169556">Sections</span><span class="op" id="6169564">,</span>&nbsp;<span class="ident" id="6169566">sh</span><span class="op" id="6169568">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169571">sh</span><span class="op" id="6169573">.</span><span class="ident" id="6169574">sr</span>&nbsp;<span class="op" id="6169577">=</span>&nbsp;<span class="ident" id="6169579">io</span><span class="op" id="6169581">.</span><span class="ident" id="6169582">NewSectionReader</span><span class="op" id="6169598">(</span><span class="ident" id="6169599">r</span><span class="op" id="6169600">,</span>&nbsp;<span class="ident" id="6169602">int64</span><span class="op" id="6169607">(</span><span class="ident" id="6169608">sh</span><span class="op" id="6169610">.</span><span class="ident" id="6169611">Offset</span><span class="op" id="6169617">)</span><span class="op" id="6169618">,</span>&nbsp;<span class="ident" id="6169620">int64</span><span class="op" id="6169625">(</span><span class="ident" id="6169626">sh</span><span class="op" id="6169628">.</span><span class="ident" id="6169629">Size</span><span class="op" id="6169633">)</span><span class="op" id="6169634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6169637">sh</span><span class="op" id="6169639">.</span><span class="ident" id="6169640">ReaderAt</span>&nbsp;<span class="op" id="6169649">=</span>&nbsp;<span class="ident" id="6169651">sh</span><span class="op" id="6169653">.</span><span class="ident" id="6169654">sr</span><br>
<span class="lineno"></span><span class="op" id="6169657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6169660">func</span>&nbsp;<span class="ident" id="6169665">cstring</span><span class="op" id="6169672">(</span><span class="ident" id="6169673">b</span>&nbsp;<span class="op" id="6169675">[</span><span class="op" id="6169676">]</span><span class="builtintype" id="6169677">byte</span><span class="op" id="6169681">)</span>&nbsp;<span class="builtintype" id="6169683">string</span>&nbsp;<span class="op" id="6169690">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169693">var</span>&nbsp;<span class="ident" id="6169697">i</span>&nbsp;<span class="builtintype" id="6169699">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169704">for</span>&nbsp;<span class="ident" id="6169708">i</span>&nbsp;<span class="op" id="6169710">=</span>&nbsp;<span class="num" id="6169712">0</span><span class="op" id="6169713">;</span>&nbsp;<span class="ident" id="6169715">i</span>&nbsp;<span class="op" id="6169717">&lt;</span>&nbsp;<span class="builtinfunc" id="6169719">len</span><span class="op" id="6169722">(</span><span class="ident" id="6169723">b</span><span class="op" id="6169724">)</span>&nbsp;<span class="op" id="6169726">&amp;&amp;</span>&nbsp;<span class="ident" id="6169729">b</span><span class="op" id="6169730">[</span><span class="ident" id="6169731">i</span><span class="op" id="6169732">]</span>&nbsp;<span class="op" id="6169734">!=</span>&nbsp;<span class="num" id="6169737">0</span><span class="op" id="6169738">;</span>&nbsp;<span class="ident" id="6169740">i</span><span class="op" id="6169741">++</span>&nbsp;<span class="op" id="6169744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6169747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169750">return</span>&nbsp;<span class="builtintype" id="6169757">string</span><span class="op" id="6169763">(</span><span class="ident" id="6169764">b</span><span class="op" id="6169765">[</span><span class="num" id="6169766">0</span><span class="op" id="6169767">:</span><span class="ident" id="6169768">i</span><span class="op" id="6169769">]</span><span class="op" id="6169770">)</span><br>
<span class="lineno"></span><span class="op" id="6169772">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6169775">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6169867">func</span>&nbsp;<span class="op" id="6169872">(</span><span class="ident" id="6169873">f</span>&nbsp;<span class="op" id="6169875">*</span><span class="ident" id="6169876">File</span><span class="op" id="6169880">)</span>&nbsp;<span class="ident" id="6169882">Segment</span><span class="op" id="6169889">(</span><span class="ident" id="6169890">name</span>&nbsp;<span class="builtintype" id="6169895">string</span><span class="op" id="6169901">)</span>&nbsp;<span class="op" id="6169903">*</span><span class="ident" id="6169904">Segment</span>&nbsp;<span class="op" id="6169912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169915">for</span>&nbsp;<span class="ident" id="6169919">_</span><span class="op" id="6169920">,</span>&nbsp;<span class="ident" id="6169922">l</span>&nbsp;<span class="op" id="6169924">:=</span>&nbsp;<span class="keyword" id="6169927">range</span>&nbsp;<span class="ident" id="6169933">f</span><span class="op" id="6169934">.</span><span class="ident" id="6169935">Loads</span>&nbsp;<span class="op" id="6169941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169945">if</span>&nbsp;<span class="ident" id="6169948">s</span><span class="op" id="6169949">,</span>&nbsp;<span class="ident" id="6169951">ok</span>&nbsp;<span class="op" id="6169954">:=</span>&nbsp;<span class="ident" id="6169957">l</span><span class="op" id="6169958">.</span><span class="op" id="6169959">(</span><span class="op" id="6169960">*</span><span class="ident" id="6169961">Segment</span><span class="op" id="6169968">)</span><span class="op" id="6169969">;</span>&nbsp;<span class="ident" id="6169971">ok</span>&nbsp;<span class="op" id="6169974">&amp;&amp;</span>&nbsp;<span class="ident" id="6169977">s</span><span class="op" id="6169978">.</span><span class="ident" id="6169979">Name</span>&nbsp;<span class="op" id="6169984">==</span>&nbsp;<span class="ident" id="6169987">name</span>&nbsp;<span class="op" id="6169992">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6169997">return</span>&nbsp;<span class="ident" id="6170004">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170014">return</span>&nbsp;<span class="builtintype" id="6170021">nil</span><br>
<span class="lineno"></span><span class="op" id="6170025">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6170028">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6170104">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6170123">func</span>&nbsp;<span class="op" id="6170128">(</span><span class="ident" id="6170129">f</span>&nbsp;<span class="op" id="6170131">*</span><span class="ident" id="6170132">File</span><span class="op" id="6170136">)</span>&nbsp;<span class="ident" id="6170138">Section</span><span class="op" id="6170145">(</span><span class="ident" id="6170146">name</span>&nbsp;<span class="builtintype" id="6170151">string</span><span class="op" id="6170157">)</span>&nbsp;<span class="op" id="6170159">*</span><span class="ident" id="6170160">Section</span>&nbsp;<span class="op" id="6170168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170171">for</span>&nbsp;<span class="ident" id="6170175">_</span><span class="op" id="6170176">,</span>&nbsp;<span class="ident" id="6170178">s</span>&nbsp;<span class="op" id="6170180">:=</span>&nbsp;<span class="keyword" id="6170183">range</span>&nbsp;<span class="ident" id="6170189">f</span><span class="op" id="6170190">.</span><span class="ident" id="6170191">Sections</span>&nbsp;<span class="op" id="6170200">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170204">if</span>&nbsp;<span class="ident" id="6170207">s</span><span class="op" id="6170208">.</span><span class="ident" id="6170209">Name</span>&nbsp;<span class="op" id="6170214">==</span>&nbsp;<span class="ident" id="6170217">name</span>&nbsp;<span class="op" id="6170222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170227">return</span>&nbsp;<span class="ident" id="6170234">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170244">return</span>&nbsp;<span class="builtintype" id="6170251">nil</span><br>
<span class="lineno">470</span><span class="op" id="6170255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6170258">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6170324">func</span>&nbsp;<span class="op" id="6170329">(</span><span class="ident" id="6170330">f</span>&nbsp;<span class="op" id="6170332">*</span><span class="ident" id="6170333">File</span><span class="op" id="6170337">)</span>&nbsp;<span class="ident" id="6170339">DWARF</span><span class="op" id="6170344">(</span><span class="op" id="6170345">)</span>&nbsp;<span class="op" id="6170347">(</span><span class="op" id="6170348">*</span><span class="ident" id="6170349">dwarf</span><span class="op" id="6170354">.</span><span class="ident" id="6170355">Data</span><span class="op" id="6170359">,</span>&nbsp;<span class="builtintype" id="6170361">error</span><span class="op" id="6170366">)</span>&nbsp;<span class="op" id="6170368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6170371">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6170422">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6170477">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170536">var</span>&nbsp;<span class="ident" id="6170540">names</span>&nbsp;<span class="op" id="6170546">=</span>&nbsp;<span class="op" id="6170548">[</span><span class="op" id="6170549">...</span><span class="op" id="6170552">]</span><span class="builtintype" id="6170553">string</span><span class="op" id="6170559">{</span><span class="string" id="6170560">&#34;abbrev&#34;</span><span class="op" id="6170568">,</span>&nbsp;<span class="string" id="6170570">&#34;info&#34;</span><span class="op" id="6170576">,</span>&nbsp;<span class="string" id="6170578">&#34;str&#34;</span><span class="op" id="6170583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170586">var</span>&nbsp;<span class="ident" id="6170590">dat</span>&nbsp;<span class="op" id="6170594">[</span><span class="builtinfunc" id="6170595">len</span><span class="op" id="6170598">(</span><span class="ident" id="6170599">names</span><span class="op" id="6170604">)</span><span class="op" id="6170605">]</span><span class="op" id="6170606">[</span><span class="op" id="6170607">]</span><span class="builtintype" id="6170608">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170614">for</span>&nbsp;<span class="ident" id="6170618">i</span><span class="op" id="6170619">,</span>&nbsp;<span class="ident" id="6170621">name</span>&nbsp;<span class="op" id="6170626">:=</span>&nbsp;<span class="keyword" id="6170629">range</span>&nbsp;<span class="ident" id="6170635">names</span>&nbsp;<span class="op" id="6170641">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6170645">name</span>&nbsp;<span class="op" id="6170650">=</span>&nbsp;<span class="string" id="6170652">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6170663">+</span>&nbsp;<span class="ident" id="6170665">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6170672">s</span>&nbsp;<span class="op" id="6170674">:=</span>&nbsp;<span class="ident" id="6170677">f</span><span class="op" id="6170678">.</span><span class="ident" id="6170679">Section</span><span class="op" id="6170686">(</span><span class="ident" id="6170687">name</span><span class="op" id="6170691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170695">if</span>&nbsp;<span class="ident" id="6170698">s</span>&nbsp;<span class="op" id="6170700">==</span>&nbsp;<span class="builtintype" id="6170703">nil</span>&nbsp;<span class="op" id="6170707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170712">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170723">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6170727">b</span><span class="op" id="6170728">,</span>&nbsp;<span class="ident" id="6170730">err</span>&nbsp;<span class="op" id="6170734">:=</span>&nbsp;<span class="ident" id="6170737">s</span><span class="op" id="6170738">.</span><span class="ident" id="6170739">Data</span><span class="op" id="6170743">(</span><span class="op" id="6170744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170748">if</span>&nbsp;<span class="ident" id="6170751">err</span>&nbsp;<span class="op" id="6170755">!=</span>&nbsp;<span class="builtintype" id="6170758">nil</span>&nbsp;<span class="op" id="6170762">&amp;&amp;</span>&nbsp;<span class="ident" id="6170765">uint64</span><span class="op" id="6170771">(</span><span class="builtinfunc" id="6170772">len</span><span class="op" id="6170775">(</span><span class="ident" id="6170776">b</span><span class="op" id="6170777">)</span><span class="op" id="6170778">)</span>&nbsp;<span class="op" id="6170780">&lt;</span>&nbsp;<span class="ident" id="6170782">s</span><span class="op" id="6170783">.</span><span class="ident" id="6170784">Size</span>&nbsp;<span class="op" id="6170789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170794">return</span>&nbsp;<span class="builtintype" id="6170801">nil</span><span class="op" id="6170804">,</span>&nbsp;<span class="ident" id="6170806">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6170816">dat</span><span class="op" id="6170819">[</span><span class="ident" id="6170820">i</span><span class="op" id="6170821">]</span>&nbsp;<span class="op" id="6170823">=</span>&nbsp;<span class="ident" id="6170825">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6170828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6170832">abbrev</span><span class="op" id="6170838">,</span>&nbsp;<span class="ident" id="6170840">info</span><span class="op" id="6170844">,</span>&nbsp;<span class="ident" id="6170846">str</span>&nbsp;<span class="op" id="6170850">:=</span>&nbsp;<span class="ident" id="6170853">dat</span><span class="op" id="6170856">[</span><span class="num" id="6170857">0</span><span class="op" id="6170858">]</span><span class="op" id="6170859">,</span>&nbsp;<span class="ident" id="6170861">dat</span><span class="op" id="6170864">[</span><span class="num" id="6170865">1</span><span class="op" id="6170866">]</span><span class="op" id="6170867">,</span>&nbsp;<span class="ident" id="6170869">dat</span><span class="op" id="6170872">[</span><span class="num" id="6170873">2</span><span class="op" id="6170874">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6170877">return</span>&nbsp;<span class="ident" id="6170884">dwarf</span><span class="op" id="6170889">.</span><span class="ident" id="6170890">New</span><span class="op" id="6170893">(</span><span class="ident" id="6170894">abbrev</span><span class="op" id="6170900">,</span>&nbsp;<span class="builtintype" id="6170902">nil</span><span class="op" id="6170905">,</span>&nbsp;<span class="builtintype" id="6170907">nil</span><span class="op" id="6170910">,</span>&nbsp;<span class="ident" id="6170912">info</span><span class="op" id="6170916">,</span>&nbsp;<span class="builtintype" id="6170918">nil</span><span class="op" id="6170921">,</span>&nbsp;<span class="builtintype" id="6170923">nil</span><span class="op" id="6170926">,</span>&nbsp;<span class="builtintype" id="6170928">nil</span><span class="op" id="6170931">,</span>&nbsp;<span class="ident" id="6170933">str</span><span class="op" id="6170936">)</span><br>
<span class="lineno"></span><span class="op" id="6170938">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6170941">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6170993">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6171048">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6171102">func</span>&nbsp;<span class="op" id="6171107">(</span><span class="ident" id="6171108">f</span>&nbsp;<span class="op" id="6171110">*</span><span class="ident" id="6171111">File</span><span class="op" id="6171115">)</span>&nbsp;<span class="ident" id="6171117">ImportedSymbols</span><span class="op" id="6171132">(</span><span class="op" id="6171133">)</span>&nbsp;<span class="op" id="6171135">(</span><span class="op" id="6171136">[</span><span class="op" id="6171137">]</span><span class="builtintype" id="6171138">string</span><span class="op" id="6171144">,</span>&nbsp;<span class="builtintype" id="6171146">error</span><span class="op" id="6171151">)</span>&nbsp;<span class="op" id="6171153">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171156">if</span>&nbsp;<span class="ident" id="6171159">f</span><span class="op" id="6171160">.</span><span class="ident" id="6171161">Dysymtab</span>&nbsp;<span class="op" id="6171170">==</span>&nbsp;<span class="builtintype" id="6171173">nil</span>&nbsp;<span class="op" id="6171177">||</span>&nbsp;<span class="ident" id="6171180">f</span><span class="op" id="6171181">.</span><span class="ident" id="6171182">Symtab</span>&nbsp;<span class="op" id="6171189">==</span>&nbsp;<span class="builtintype" id="6171192">nil</span>&nbsp;<span class="op" id="6171196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171200">return</span>&nbsp;<span class="builtintype" id="6171207">nil</span><span class="op" id="6171210">,</span>&nbsp;<span class="op" id="6171212">&amp;</span><span class="ident" id="6171213">FormatError</span><span class="op" id="6171224">{</span><span class="num" id="6171225">0</span><span class="op" id="6171226">,</span>&nbsp;<span class="string" id="6171228">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6171250">,</span>&nbsp;<span class="builtintype" id="6171252">nil</span><span class="op" id="6171255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6171258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6171262">st</span>&nbsp;<span class="op" id="6171265">:=</span>&nbsp;<span class="ident" id="6171268">f</span><span class="op" id="6171269">.</span><span class="ident" id="6171270">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6171278">dt</span>&nbsp;<span class="op" id="6171281">:=</span>&nbsp;<span class="ident" id="6171284">f</span><span class="op" id="6171285">.</span><span class="ident" id="6171286">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171296">var</span>&nbsp;<span class="ident" id="6171300">all</span>&nbsp;<span class="op" id="6171304">[</span><span class="op" id="6171305">]</span><span class="builtintype" id="6171306">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171314">for</span>&nbsp;<span class="ident" id="6171318">_</span><span class="op" id="6171319">,</span>&nbsp;<span class="ident" id="6171321">s</span>&nbsp;<span class="op" id="6171323">:=</span>&nbsp;<span class="keyword" id="6171326">range</span>&nbsp;<span class="ident" id="6171332">st</span><span class="op" id="6171334">.</span><span class="ident" id="6171335">Syms</span><span class="op" id="6171339">[</span><span class="ident" id="6171340">dt</span><span class="op" id="6171342">.</span><span class="ident" id="6171343">Iundefsym</span>&nbsp;<span class="op" id="6171353">:</span>&nbsp;<span class="ident" id="6171355">dt</span><span class="op" id="6171357">.</span><span class="ident" id="6171358">Iundefsym</span><span class="op" id="6171367">+</span><span class="ident" id="6171368">dt</span><span class="op" id="6171370">.</span><span class="ident" id="6171371">Nundefsym</span><span class="op" id="6171380">]</span>&nbsp;<span class="op" id="6171382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6171386">all</span>&nbsp;<span class="op" id="6171390">=</span>&nbsp;<span class="builtinfunc" id="6171392">append</span><span class="op" id="6171398">(</span><span class="ident" id="6171399">all</span><span class="op" id="6171402">,</span>&nbsp;<span class="ident" id="6171404">s</span><span class="op" id="6171405">.</span><span class="ident" id="6171406">Name</span><span class="op" id="6171410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6171413">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171416">return</span>&nbsp;<span class="ident" id="6171423">all</span><span class="op" id="6171426">,</span>&nbsp;<span class="builtintype" id="6171428">nil</span><br>
<span class="lineno"></span><span class="op" id="6171432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6171435">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6171491">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6171546">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6171594">func</span>&nbsp;<span class="op" id="6171599">(</span><span class="ident" id="6171600">f</span>&nbsp;<span class="op" id="6171602">*</span><span class="ident" id="6171603">File</span><span class="op" id="6171607">)</span>&nbsp;<span class="ident" id="6171609">ImportedLibraries</span><span class="op" id="6171626">(</span><span class="op" id="6171627">)</span>&nbsp;<span class="op" id="6171629">(</span><span class="op" id="6171630">[</span><span class="op" id="6171631">]</span><span class="builtintype" id="6171632">string</span><span class="op" id="6171638">,</span>&nbsp;<span class="builtintype" id="6171640">error</span><span class="op" id="6171645">)</span>&nbsp;<span class="op" id="6171647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171650">var</span>&nbsp;<span class="ident" id="6171654">all</span>&nbsp;<span class="op" id="6171658">[</span><span class="op" id="6171659">]</span><span class="builtintype" id="6171660">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171668">for</span>&nbsp;<span class="ident" id="6171672">_</span><span class="op" id="6171673">,</span>&nbsp;<span class="ident" id="6171675">l</span>&nbsp;<span class="op" id="6171677">:=</span>&nbsp;<span class="keyword" id="6171680">range</span>&nbsp;<span class="ident" id="6171686">f</span><span class="op" id="6171687">.</span><span class="ident" id="6171688">Loads</span>&nbsp;<span class="op" id="6171694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171698">if</span>&nbsp;<span class="ident" id="6171701">lib</span><span class="op" id="6171704">,</span>&nbsp;<span class="ident" id="6171706">ok</span>&nbsp;<span class="op" id="6171709">:=</span>&nbsp;<span class="ident" id="6171712">l</span><span class="op" id="6171713">.</span><span class="op" id="6171714">(</span><span class="op" id="6171715">*</span><span class="ident" id="6171716">Dylib</span><span class="op" id="6171721">)</span><span class="op" id="6171722">;</span>&nbsp;<span class="ident" id="6171724">ok</span>&nbsp;<span class="op" id="6171727">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6171732">all</span>&nbsp;<span class="op" id="6171736">=</span>&nbsp;<span class="builtinfunc" id="6171738">append</span><span class="op" id="6171744">(</span><span class="ident" id="6171745">all</span><span class="op" id="6171748">,</span>&nbsp;<span class="ident" id="6171750">lib</span><span class="op" id="6171753">.</span><span class="ident" id="6171754">Name</span><span class="op" id="6171758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6171762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6171765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6171768">return</span>&nbsp;<span class="ident" id="6171775">all</span><span class="op" id="6171778">,</span>&nbsp;<span class="builtintype" id="6171780">nil</span><br>
<span class="lineno"></span><span class="op" id="6171784">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
