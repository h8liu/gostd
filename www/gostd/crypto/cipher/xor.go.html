<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3941105">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3941160">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3941214">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3941265">package</span>&nbsp;<span class="ident" id="3941273">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3941281">import</span>&nbsp;<span class="op" id="3941288">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3941291">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3941302">&#34;unsafe&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3941311">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3941314">const</span>&nbsp;<span class="ident" id="3941320">wordSize</span>&nbsp;<span class="op" id="3941329">=</span>&nbsp;<span class="builtintype" id="3941331">int</span><span class="op" id="3941334">(</span><span class="ident" id="3941335">unsafe</span><span class="op" id="3941341">.</span><span class="ident" id="3941342">Sizeof</span><span class="op" id="3941348">(</span><span class="builtintype" id="3941349">uintptr</span><span class="op" id="3941356">(</span><span class="num" id="3941357">0</span><span class="op" id="3941358">)</span><span class="op" id="3941359">)</span><span class="op" id="3941360">)</span><br>
<span class="lineno"></span><span class="keyword" id="3941362">const</span>&nbsp;<span class="ident" id="3941368">supportsUnaligned</span>&nbsp;<span class="op" id="3941386">=</span>&nbsp;<span class="ident" id="3941388">runtime</span><span class="op" id="3941395">.</span><span class="ident" id="3941396">GOARCH</span>&nbsp;<span class="op" id="3941403">==</span>&nbsp;<span class="string" id="3941406">&#34;386&#34;</span>&nbsp;<span class="op" id="3941412">||</span>&nbsp;<span class="ident" id="3941415">runtime</span><span class="op" id="3941422">.</span><span class="ident" id="3941423">GOARCH</span>&nbsp;<span class="op" id="3941430">==</span>&nbsp;<span class="string" id="3941433">&#34;amd64&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3941442">//&nbsp;fastXORBytes&nbsp;xors&nbsp;in&nbsp;bulk.&nbsp;It&nbsp;only&nbsp;works&nbsp;on&nbsp;architectures&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3941508">//&nbsp;support&nbsp;unaligned&nbsp;read/writes.</span><br>
<span class="lineno"></span><span class="keyword" id="3941542">func</span>&nbsp;<span class="ident" id="3941547">fastXORBytes</span><span class="op" id="3941559">(</span><span class="ident" id="3941560">dst</span><span class="op" id="3941563">,</span>&nbsp;<span class="ident" id="3941565">a</span><span class="op" id="3941566">,</span>&nbsp;<span class="ident" id="3941568">b</span>&nbsp;<span class="op" id="3941570">[</span><span class="op" id="3941571">]</span><span class="builtintype" id="3941572">byte</span><span class="op" id="3941576">)</span>&nbsp;<span class="builtintype" id="3941578">int</span>&nbsp;<span class="op" id="3941582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941585">n</span>&nbsp;<span class="op" id="3941587">:=</span>&nbsp;<span class="builtinfunc" id="3941590">len</span><span class="op" id="3941593">(</span><span class="ident" id="3941594">a</span><span class="op" id="3941595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941598">if</span>&nbsp;<span class="builtinfunc" id="3941601">len</span><span class="op" id="3941604">(</span><span class="ident" id="3941605">b</span><span class="op" id="3941606">)</span>&nbsp;<span class="op" id="3941608">&lt;</span>&nbsp;<span class="ident" id="3941610">n</span>&nbsp;<span class="op" id="3941612">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941616">n</span>&nbsp;<span class="op" id="3941618">=</span>&nbsp;<span class="builtinfunc" id="3941620">len</span><span class="op" id="3941623">(</span><span class="ident" id="3941624">b</span><span class="op" id="3941625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941632">w</span>&nbsp;<span class="op" id="3941634">:=</span>&nbsp;<span class="ident" id="3941637">n</span>&nbsp;<span class="op" id="3941639">/</span>&nbsp;<span class="ident" id="3941641">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941651">if</span>&nbsp;<span class="ident" id="3941654">w</span>&nbsp;<span class="op" id="3941656">&gt;</span>&nbsp;<span class="num" id="3941658">0</span>&nbsp;<span class="op" id="3941660">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941664">dw</span>&nbsp;<span class="op" id="3941667">:=</span>&nbsp;<span class="op" id="3941670">*</span><span class="op" id="3941671">(</span><span class="op" id="3941672">*</span><span class="op" id="3941673">[</span><span class="op" id="3941674">]</span><span class="builtintype" id="3941675">uintptr</span><span class="op" id="3941682">)</span><span class="op" id="3941683">(</span><span class="ident" id="3941684">unsafe</span><span class="op" id="3941690">.</span><span class="ident" id="3941691">Pointer</span><span class="op" id="3941698">(</span><span class="op" id="3941699">&amp;</span><span class="ident" id="3941700">dst</span><span class="op" id="3941703">)</span><span class="op" id="3941704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941708">aw</span>&nbsp;<span class="op" id="3941711">:=</span>&nbsp;<span class="op" id="3941714">*</span><span class="op" id="3941715">(</span><span class="op" id="3941716">*</span><span class="op" id="3941717">[</span><span class="op" id="3941718">]</span><span class="builtintype" id="3941719">uintptr</span><span class="op" id="3941726">)</span><span class="op" id="3941727">(</span><span class="ident" id="3941728">unsafe</span><span class="op" id="3941734">.</span><span class="ident" id="3941735">Pointer</span><span class="op" id="3941742">(</span><span class="op" id="3941743">&amp;</span><span class="ident" id="3941744">a</span><span class="op" id="3941745">)</span><span class="op" id="3941746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941750">bw</span>&nbsp;<span class="op" id="3941753">:=</span>&nbsp;<span class="op" id="3941756">*</span><span class="op" id="3941757">(</span><span class="op" id="3941758">*</span><span class="op" id="3941759">[</span><span class="op" id="3941760">]</span><span class="builtintype" id="3941761">uintptr</span><span class="op" id="3941768">)</span><span class="op" id="3941769">(</span><span class="ident" id="3941770">unsafe</span><span class="op" id="3941776">.</span><span class="ident" id="3941777">Pointer</span><span class="op" id="3941784">(</span><span class="op" id="3941785">&amp;</span><span class="ident" id="3941786">b</span><span class="op" id="3941787">)</span><span class="op" id="3941788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941792">for</span>&nbsp;<span class="ident" id="3941796">i</span>&nbsp;<span class="op" id="3941798">:=</span>&nbsp;<span class="num" id="3941801">0</span><span class="op" id="3941802">;</span>&nbsp;<span class="ident" id="3941804">i</span>&nbsp;<span class="op" id="3941806">&lt;</span>&nbsp;<span class="ident" id="3941808">w</span><span class="op" id="3941809">;</span>&nbsp;<span class="ident" id="3941811">i</span><span class="op" id="3941812">++</span>&nbsp;<span class="op" id="3941815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941820">dw</span><span class="op" id="3941822">[</span><span class="ident" id="3941823">i</span><span class="op" id="3941824">]</span>&nbsp;<span class="op" id="3941826">=</span>&nbsp;<span class="ident" id="3941828">aw</span><span class="op" id="3941830">[</span><span class="ident" id="3941831">i</span><span class="op" id="3941832">]</span>&nbsp;<span class="op" id="3941834">^</span>&nbsp;<span class="ident" id="3941836">bw</span><span class="op" id="3941838">[</span><span class="ident" id="3941839">i</span><span class="op" id="3941840">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941851">for</span>&nbsp;<span class="ident" id="3941855">i</span>&nbsp;<span class="op" id="3941857">:=</span>&nbsp;<span class="op" id="3941860">(</span><span class="ident" id="3941861">n</span>&nbsp;<span class="op" id="3941863">-</span>&nbsp;<span class="ident" id="3941865">n</span><span class="op" id="3941866">%</span><span class="ident" id="3941867">wordSize</span><span class="op" id="3941875">)</span><span class="op" id="3941876">;</span>&nbsp;<span class="ident" id="3941878">i</span>&nbsp;<span class="op" id="3941880">&lt;</span>&nbsp;<span class="ident" id="3941882">n</span><span class="op" id="3941883">;</span>&nbsp;<span class="ident" id="3941885">i</span><span class="op" id="3941886">++</span>&nbsp;<span class="op" id="3941889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941893">dst</span><span class="op" id="3941896">[</span><span class="ident" id="3941897">i</span><span class="op" id="3941898">]</span>&nbsp;<span class="op" id="3941900">=</span>&nbsp;<span class="ident" id="3941902">a</span><span class="op" id="3941903">[</span><span class="ident" id="3941904">i</span><span class="op" id="3941905">]</span>&nbsp;<span class="op" id="3941907">^</span>&nbsp;<span class="ident" id="3941909">b</span><span class="op" id="3941910">[</span><span class="ident" id="3941911">i</span><span class="op" id="3941912">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3941915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941919">return</span>&nbsp;<span class="ident" id="3941926">n</span><br>
<span class="lineno"></span><span class="op" id="3941928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="3941931">func</span>&nbsp;<span class="ident" id="3941936">safeXORBytes</span><span class="op" id="3941948">(</span><span class="ident" id="3941949">dst</span><span class="op" id="3941952">,</span>&nbsp;<span class="ident" id="3941954">a</span><span class="op" id="3941955">,</span>&nbsp;<span class="ident" id="3941957">b</span>&nbsp;<span class="op" id="3941959">[</span><span class="op" id="3941960">]</span><span class="builtintype" id="3941961">byte</span><span class="op" id="3941965">)</span>&nbsp;<span class="builtintype" id="3941967">int</span>&nbsp;<span class="op" id="3941971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3941974">n</span>&nbsp;<span class="op" id="3941976">:=</span>&nbsp;<span class="builtinfunc" id="3941979">len</span><span class="op" id="3941982">(</span><span class="ident" id="3941983">a</span><span class="op" id="3941984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3941987">if</span>&nbsp;<span class="builtinfunc" id="3941990">len</span><span class="op" id="3941993">(</span><span class="ident" id="3941994">b</span><span class="op" id="3941995">)</span>&nbsp;<span class="op" id="3941997">&lt;</span>&nbsp;<span class="ident" id="3941999">n</span>&nbsp;<span class="op" id="3942001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942005">n</span>&nbsp;<span class="op" id="3942007">=</span>&nbsp;<span class="builtinfunc" id="3942009">len</span><span class="op" id="3942012">(</span><span class="ident" id="3942013">b</span><span class="op" id="3942014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942017">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942020">for</span>&nbsp;<span class="ident" id="3942024">i</span>&nbsp;<span class="op" id="3942026">:=</span>&nbsp;<span class="num" id="3942029">0</span><span class="op" id="3942030">;</span>&nbsp;<span class="ident" id="3942032">i</span>&nbsp;<span class="op" id="3942034">&lt;</span>&nbsp;<span class="ident" id="3942036">n</span><span class="op" id="3942037">;</span>&nbsp;<span class="ident" id="3942039">i</span><span class="op" id="3942040">++</span>&nbsp;<span class="op" id="3942043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942047">dst</span><span class="op" id="3942050">[</span><span class="ident" id="3942051">i</span><span class="op" id="3942052">]</span>&nbsp;<span class="op" id="3942054">=</span>&nbsp;<span class="ident" id="3942056">a</span><span class="op" id="3942057">[</span><span class="ident" id="3942058">i</span><span class="op" id="3942059">]</span>&nbsp;<span class="op" id="3942061">^</span>&nbsp;<span class="ident" id="3942063">b</span><span class="op" id="3942064">[</span><span class="ident" id="3942065">i</span><span class="op" id="3942066">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942072">return</span>&nbsp;<span class="ident" id="3942079">n</span><br>
<span class="lineno"></span><span class="op" id="3942081">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3942084">//&nbsp;xorBytes&nbsp;xors&nbsp;the&nbsp;bytes&nbsp;in&nbsp;a&nbsp;and&nbsp;b.&nbsp;The&nbsp;destination&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="3942165">//&nbsp;space.&nbsp;Returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;xor&#39;d.</span><br>
<span class="lineno"></span><span class="keyword" id="3942210">func</span>&nbsp;<span class="ident" id="3942215">xorBytes</span><span class="op" id="3942223">(</span><span class="ident" id="3942224">dst</span><span class="op" id="3942227">,</span>&nbsp;<span class="ident" id="3942229">a</span><span class="op" id="3942230">,</span>&nbsp;<span class="ident" id="3942232">b</span>&nbsp;<span class="op" id="3942234">[</span><span class="op" id="3942235">]</span><span class="builtintype" id="3942236">byte</span><span class="op" id="3942240">)</span>&nbsp;<span class="builtintype" id="3942242">int</span>&nbsp;<span class="op" id="3942246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942249">if</span>&nbsp;<span class="ident" id="3942252">supportsUnaligned</span>&nbsp;<span class="op" id="3942270">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942274">return</span>&nbsp;<span class="ident" id="3942281">fastXORBytes</span><span class="op" id="3942293">(</span><span class="ident" id="3942294">dst</span><span class="op" id="3942297">,</span>&nbsp;<span class="ident" id="3942299">a</span><span class="op" id="3942300">,</span>&nbsp;<span class="ident" id="3942302">b</span><span class="op" id="3942303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942306">}</span>&nbsp;<span class="keyword" id="3942308">else</span>&nbsp;<span class="op" id="3942313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942317">//&nbsp;TODO(hanwen):&nbsp;if&nbsp;(dst,&nbsp;a,&nbsp;b)&nbsp;have&nbsp;common&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942373">//&nbsp;we&nbsp;could&nbsp;still&nbsp;try&nbsp;fastXORBytes.&nbsp;It&nbsp;is&nbsp;not&nbsp;clear</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942427">//&nbsp;how&nbsp;often&nbsp;this&nbsp;happens,&nbsp;and&nbsp;it&#39;s&nbsp;only&nbsp;worth&nbsp;it&nbsp;if</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942482">//&nbsp;the&nbsp;block&nbsp;encryption&nbsp;itself&nbsp;is&nbsp;hardware</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3942527">//&nbsp;accelerated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942545">return</span>&nbsp;<span class="ident" id="3942552">safeXORBytes</span><span class="op" id="3942564">(</span><span class="ident" id="3942565">dst</span><span class="op" id="3942568">,</span>&nbsp;<span class="ident" id="3942570">a</span><span class="op" id="3942571">,</span>&nbsp;<span class="ident" id="3942573">b</span><span class="op" id="3942574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942577">}</span><br>
<span class="lineno"></span><span class="op" id="3942579">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="3942582">//&nbsp;fastXORWords&nbsp;XORs&nbsp;multiples&nbsp;of&nbsp;4&nbsp;or&nbsp;8&nbsp;bytes&nbsp;(depending&nbsp;on&nbsp;architecture.)</span><br>
<span class="lineno"></span><span class="comment" id="3942658">//&nbsp;The&nbsp;arguments&nbsp;are&nbsp;assumed&nbsp;to&nbsp;be&nbsp;of&nbsp;equal&nbsp;length.</span><br>
<span class="lineno"></span><span class="keyword" id="3942710">func</span>&nbsp;<span class="ident" id="3942715">fastXORWords</span><span class="op" id="3942727">(</span><span class="ident" id="3942728">dst</span><span class="op" id="3942731">,</span>&nbsp;<span class="ident" id="3942733">a</span><span class="op" id="3942734">,</span>&nbsp;<span class="ident" id="3942736">b</span>&nbsp;<span class="op" id="3942738">[</span><span class="op" id="3942739">]</span><span class="builtintype" id="3942740">byte</span><span class="op" id="3942744">)</span>&nbsp;<span class="op" id="3942746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942749">dw</span>&nbsp;<span class="op" id="3942752">:=</span>&nbsp;<span class="op" id="3942755">*</span><span class="op" id="3942756">(</span><span class="op" id="3942757">*</span><span class="op" id="3942758">[</span><span class="op" id="3942759">]</span><span class="builtintype" id="3942760">uintptr</span><span class="op" id="3942767">)</span><span class="op" id="3942768">(</span><span class="ident" id="3942769">unsafe</span><span class="op" id="3942775">.</span><span class="ident" id="3942776">Pointer</span><span class="op" id="3942783">(</span><span class="op" id="3942784">&amp;</span><span class="ident" id="3942785">dst</span><span class="op" id="3942788">)</span><span class="op" id="3942789">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942792">aw</span>&nbsp;<span class="op" id="3942795">:=</span>&nbsp;<span class="op" id="3942798">*</span><span class="op" id="3942799">(</span><span class="op" id="3942800">*</span><span class="op" id="3942801">[</span><span class="op" id="3942802">]</span><span class="builtintype" id="3942803">uintptr</span><span class="op" id="3942810">)</span><span class="op" id="3942811">(</span><span class="ident" id="3942812">unsafe</span><span class="op" id="3942818">.</span><span class="ident" id="3942819">Pointer</span><span class="op" id="3942826">(</span><span class="op" id="3942827">&amp;</span><span class="ident" id="3942828">a</span><span class="op" id="3942829">)</span><span class="op" id="3942830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942833">bw</span>&nbsp;<span class="op" id="3942836">:=</span>&nbsp;<span class="op" id="3942839">*</span><span class="op" id="3942840">(</span><span class="op" id="3942841">*</span><span class="op" id="3942842">[</span><span class="op" id="3942843">]</span><span class="builtintype" id="3942844">uintptr</span><span class="op" id="3942851">)</span><span class="op" id="3942852">(</span><span class="ident" id="3942853">unsafe</span><span class="op" id="3942859">.</span><span class="ident" id="3942860">Pointer</span><span class="op" id="3942867">(</span><span class="op" id="3942868">&amp;</span><span class="ident" id="3942869">b</span><span class="op" id="3942870">)</span><span class="op" id="3942871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942874">n</span>&nbsp;<span class="op" id="3942876">:=</span>&nbsp;<span class="builtinfunc" id="3942879">len</span><span class="op" id="3942882">(</span><span class="ident" id="3942883">b</span><span class="op" id="3942884">)</span>&nbsp;<span class="op" id="3942886">/</span>&nbsp;<span class="ident" id="3942888">wordSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942898">for</span>&nbsp;<span class="ident" id="3942902">i</span>&nbsp;<span class="op" id="3942904">:=</span>&nbsp;<span class="num" id="3942907">0</span><span class="op" id="3942908">;</span>&nbsp;<span class="ident" id="3942910">i</span>&nbsp;<span class="op" id="3942912">&lt;</span>&nbsp;<span class="ident" id="3942914">n</span><span class="op" id="3942915">;</span>&nbsp;<span class="ident" id="3942917">i</span><span class="op" id="3942918">++</span>&nbsp;<span class="op" id="3942921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3942925">dw</span><span class="op" id="3942927">[</span><span class="ident" id="3942928">i</span><span class="op" id="3942929">]</span>&nbsp;<span class="op" id="3942931">=</span>&nbsp;<span class="ident" id="3942933">aw</span><span class="op" id="3942935">[</span><span class="ident" id="3942936">i</span><span class="op" id="3942937">]</span>&nbsp;<span class="op" id="3942939">^</span>&nbsp;<span class="ident" id="3942941">bw</span><span class="op" id="3942943">[</span><span class="ident" id="3942944">i</span><span class="op" id="3942945">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3942948">}</span><br>
<span class="lineno"></span><span class="op" id="3942950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3942953">func</span>&nbsp;<span class="ident" id="3942958">xorWords</span><span class="op" id="3942966">(</span><span class="ident" id="3942967">dst</span><span class="op" id="3942970">,</span>&nbsp;<span class="ident" id="3942972">a</span><span class="op" id="3942973">,</span>&nbsp;<span class="ident" id="3942975">b</span>&nbsp;<span class="op" id="3942977">[</span><span class="op" id="3942978">]</span><span class="builtintype" id="3942979">byte</span><span class="op" id="3942983">)</span>&nbsp;<span class="op" id="3942985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3942988">if</span>&nbsp;<span class="ident" id="3942991">supportsUnaligned</span>&nbsp;<span class="op" id="3943009">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943013">fastXORWords</span><span class="op" id="3943025">(</span><span class="ident" id="3943026">dst</span><span class="op" id="3943029">,</span>&nbsp;<span class="ident" id="3943031">a</span><span class="op" id="3943032">,</span>&nbsp;<span class="ident" id="3943034">b</span><span class="op" id="3943035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943038">}</span>&nbsp;<span class="keyword" id="3943040">else</span>&nbsp;<span class="op" id="3943045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3943049">safeXORBytes</span><span class="op" id="3943061">(</span><span class="ident" id="3943062">dst</span><span class="op" id="3943065">,</span>&nbsp;<span class="ident" id="3943067">a</span><span class="op" id="3943068">,</span>&nbsp;<span class="ident" id="3943070">b</span><span class="op" id="3943071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3943074">}</span><br>
<span class="lineno"></span><span class="op" id="3943076">}</span>
</div>
</body>
</html>
