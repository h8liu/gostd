<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7742286">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7742342">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7742396">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7742447">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="7742526">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742535">package</span>&nbsp;<span class="ident" id="7742543">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="7742548">import</span>&nbsp;<span class="op" id="7742555">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7742558">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7742564">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7742575">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7742586">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7742593">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7742596">var</span>&nbsp;<span class="ident" id="7742600">connTests</span>&nbsp;<span class="op" id="7742610">=</span>&nbsp;<span class="op" id="7742612">[</span><span class="op" id="7742613">]</span><span class="keyword" id="7742614">struct</span>&nbsp;<span class="op" id="7742621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742624">net</span>&nbsp;&nbsp;<span class="builtintype" id="7742629">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7742637">addr</span>&nbsp;<span class="builtintype" id="7742642">string</span><br>
<span class="lineno">20</span><span class="op" id="7742649">}</span><span class="op" id="7742650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742653">{</span><span class="string" id="7742654">&#34;tcp&#34;</span><span class="op" id="7742659">,</span>&nbsp;<span class="string" id="7742661">&#34;127.0.0.1:0&#34;</span><span class="op" id="7742674">}</span><span class="op" id="7742675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742678">{</span><span class="string" id="7742679">&#34;unix&#34;</span><span class="op" id="7742685">,</span>&nbsp;<span class="ident" id="7742687">testUnixAddr</span><span class="op" id="7742699">(</span><span class="op" id="7742700">)</span><span class="op" id="7742701">}</span><span class="op" id="7742702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7742705">{</span><span class="string" id="7742706">&#34;unixpacket&#34;</span><span class="op" id="7742718">,</span>&nbsp;<span class="ident" id="7742720">testUnixAddr</span><span class="op" id="7742732">(</span><span class="op" id="7742733">)</span><span class="op" id="7742734">}</span><span class="op" id="7742735">,</span><br>
<span class="lineno"></span><span class="op" id="7742737">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="7742740">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="7742806">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="7742869">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="7742917">const</span>&nbsp;<span class="ident" id="7742923">someTimeout</span>&nbsp;<span class="op" id="7742935">=</span>&nbsp;<span class="num" id="7742937">10</span>&nbsp;<span class="op" id="7742940">*</span>&nbsp;<span class="ident" id="7742942">time</span><span class="op" id="7742946">.</span><span class="ident" id="7742947">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="7742955">func</span>&nbsp;<span class="ident" id="7742960">TestConnAndListener</span><span class="op" id="7742979">(</span><span class="ident" id="7742980">t</span>&nbsp;<span class="op" id="7742982">*</span><span class="ident" id="7742983">testing</span><span class="op" id="7742990">.</span><span class="ident" id="7742991">T</span><span class="op" id="7742992">)</span>&nbsp;<span class="op" id="7742994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7742997">for</span>&nbsp;<span class="ident" id="7743001">_</span><span class="op" id="7743002">,</span>&nbsp;<span class="ident" id="7743004">tt</span>&nbsp;<span class="op" id="7743007">:=</span>&nbsp;<span class="keyword" id="7743010">range</span>&nbsp;<span class="ident" id="7743016">connTests</span>&nbsp;<span class="op" id="7743026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743030">switch</span>&nbsp;<span class="ident" id="7743037">tt</span><span class="op" id="7743039">.</span><span class="ident" id="7743040">net</span>&nbsp;<span class="op" id="7743044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743048">case</span>&nbsp;<span class="string" id="7743053">&#34;unix&#34;</span><span class="op" id="7743059">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743064">switch</span>&nbsp;<span class="ident" id="7743071">runtime</span><span class="op" id="7743078">.</span><span class="ident" id="7743079">GOOS</span>&nbsp;<span class="op" id="7743084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743089">case</span>&nbsp;<span class="string" id="7743094">&#34;nacl&#34;</span><span class="op" id="7743100">,</span>&nbsp;<span class="string" id="7743102">&#34;plan9&#34;</span><span class="op" id="7743109">,</span>&nbsp;<span class="string" id="7743111">&#34;windows&#34;</span><span class="op" id="7743120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743126">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743142">case</span>&nbsp;<span class="string" id="7743147">&#34;unixpacket&#34;</span><span class="op" id="7743159">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743164">switch</span>&nbsp;<span class="ident" id="7743171">runtime</span><span class="op" id="7743178">.</span><span class="ident" id="7743179">GOOS</span>&nbsp;<span class="op" id="7743184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743189">case</span>&nbsp;<span class="string" id="7743194">&#34;android&#34;</span><span class="op" id="7743203">,</span>&nbsp;<span class="string" id="7743205">&#34;darwin&#34;</span><span class="op" id="7743213">,</span>&nbsp;<span class="string" id="7743215">&#34;nacl&#34;</span><span class="op" id="7743221">,</span>&nbsp;<span class="string" id="7743223">&#34;openbsd&#34;</span><span class="op" id="7743232">,</span>&nbsp;<span class="string" id="7743234">&#34;plan9&#34;</span><span class="op" id="7743241">,</span>&nbsp;<span class="string" id="7743243">&#34;windows&#34;</span><span class="op" id="7743252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743258">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743270">case</span>&nbsp;<span class="string" id="7743275">&#34;freebsd&#34;</span><span class="op" id="7743284">:</span>&nbsp;<span class="comment" id="7743286">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743330">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743351">ln</span><span class="op" id="7743353">,</span>&nbsp;<span class="ident" id="7743355">err</span>&nbsp;<span class="op" id="7743359">:=</span>&nbsp;<span class="ident" id="7743362">Listen</span><span class="op" id="7743368">(</span><span class="ident" id="7743369">tt</span><span class="op" id="7743371">.</span><span class="ident" id="7743372">net</span><span class="op" id="7743375">,</span>&nbsp;<span class="ident" id="7743377">tt</span><span class="op" id="7743379">.</span><span class="ident" id="7743380">addr</span><span class="op" id="7743384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743388">if</span>&nbsp;<span class="ident" id="7743391">err</span>&nbsp;<span class="op" id="7743395">!=</span>&nbsp;<span class="ident" id="7743398">nil</span>&nbsp;<span class="op" id="7743402">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743407">t</span><span class="op" id="7743408">.</span><span class="ident" id="7743409">Fatalf</span><span class="op" id="7743415">(</span><span class="string" id="7743416">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7743435">,</span>&nbsp;<span class="ident" id="7743437">err</span><span class="op" id="7743440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743448">defer</span>&nbsp;<span class="keyword" id="7743454">func</span><span class="op" id="7743458">(</span><span class="ident" id="7743459">ln</span>&nbsp;<span class="ident" id="7743462">Listener</span><span class="op" id="7743470">,</span>&nbsp;<span class="ident" id="7743472">net</span><span class="op" id="7743475">,</span>&nbsp;<span class="ident" id="7743477">addr</span>&nbsp;<span class="builtintype" id="7743482">string</span><span class="op" id="7743488">)</span>&nbsp;<span class="op" id="7743490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743495">ln</span><span class="op" id="7743497">.</span><span class="ident" id="7743498">Close</span><span class="op" id="7743503">(</span><span class="op" id="7743504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743509">switch</span>&nbsp;<span class="ident" id="7743516">net</span>&nbsp;<span class="op" id="7743520">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743525">case</span>&nbsp;<span class="string" id="7743530">&#34;unix&#34;</span><span class="op" id="7743536">,</span>&nbsp;<span class="string" id="7743538">&#34;unixpacket&#34;</span><span class="op" id="7743550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743556">os</span><span class="op" id="7743558">.</span><span class="ident" id="7743559">Remove</span><span class="op" id="7743565">(</span><span class="ident" id="7743566">addr</span><span class="op" id="7743570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743579">}</span><span class="op" id="7743580">(</span><span class="ident" id="7743581">ln</span><span class="op" id="7743583">,</span>&nbsp;<span class="ident" id="7743585">tt</span><span class="op" id="7743587">.</span><span class="ident" id="7743588">net</span><span class="op" id="7743591">,</span>&nbsp;<span class="ident" id="7743593">tt</span><span class="op" id="7743595">.</span><span class="ident" id="7743596">addr</span><span class="op" id="7743600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743604">if</span>&nbsp;<span class="ident" id="7743607">ln</span><span class="op" id="7743609">.</span><span class="ident" id="7743610">Addr</span><span class="op" id="7743614">(</span><span class="op" id="7743615">)</span><span class="op" id="7743616">.</span><span class="ident" id="7743617">Network</span><span class="op" id="7743624">(</span><span class="op" id="7743625">)</span>&nbsp;<span class="op" id="7743627">!=</span>&nbsp;<span class="ident" id="7743630">tt</span><span class="op" id="7743632">.</span><span class="ident" id="7743633">net</span>&nbsp;<span class="op" id="7743637">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743642">t</span><span class="op" id="7743643">.</span><span class="ident" id="7743644">Fatalf</span><span class="op" id="7743650">(</span><span class="string" id="7743651">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7743672">,</span>&nbsp;<span class="ident" id="7743674">ln</span><span class="op" id="7743676">.</span><span class="ident" id="7743677">Addr</span><span class="op" id="7743681">(</span><span class="op" id="7743682">)</span><span class="op" id="7743683">.</span><span class="ident" id="7743684">Network</span><span class="op" id="7743691">(</span><span class="op" id="7743692">)</span><span class="op" id="7743693">,</span>&nbsp;<span class="ident" id="7743695">tt</span><span class="op" id="7743697">.</span><span class="ident" id="7743698">net</span><span class="op" id="7743701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743710">done</span>&nbsp;<span class="op" id="7743715">:=</span>&nbsp;<span class="builtinfunc" id="7743718">make</span><span class="op" id="7743722">(</span><span class="keyword" id="7743723">chan</span>&nbsp;<span class="builtintype" id="7743728">int</span><span class="op" id="7743731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743735">go</span>&nbsp;<span class="ident" id="7743738">transponder</span><span class="op" id="7743749">(</span><span class="ident" id="7743750">t</span><span class="op" id="7743751">,</span>&nbsp;<span class="ident" id="7743753">ln</span><span class="op" id="7743755">,</span>&nbsp;<span class="ident" id="7743757">done</span><span class="op" id="7743761">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743766">c</span><span class="op" id="7743767">,</span>&nbsp;<span class="ident" id="7743769">err</span>&nbsp;<span class="op" id="7743773">:=</span>&nbsp;<span class="ident" id="7743776">Dial</span><span class="op" id="7743780">(</span><span class="ident" id="7743781">tt</span><span class="op" id="7743783">.</span><span class="ident" id="7743784">net</span><span class="op" id="7743787">,</span>&nbsp;<span class="ident" id="7743789">ln</span><span class="op" id="7743791">.</span><span class="ident" id="7743792">Addr</span><span class="op" id="7743796">(</span><span class="op" id="7743797">)</span><span class="op" id="7743798">.</span><span class="ident" id="7743799">String</span><span class="op" id="7743805">(</span><span class="op" id="7743806">)</span><span class="op" id="7743807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743811">if</span>&nbsp;<span class="ident" id="7743814">err</span>&nbsp;<span class="op" id="7743818">!=</span>&nbsp;<span class="ident" id="7743821">nil</span>&nbsp;<span class="op" id="7743825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743830">t</span><span class="op" id="7743831">.</span><span class="ident" id="7743832">Fatalf</span><span class="op" id="7743838">(</span><span class="string" id="7743839">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7743856">,</span>&nbsp;<span class="ident" id="7743858">err</span><span class="op" id="7743861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7743865">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743869">defer</span>&nbsp;<span class="ident" id="7743875">c</span><span class="op" id="7743876">.</span><span class="ident" id="7743877">Close</span><span class="op" id="7743882">(</span><span class="op" id="7743883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7743887">if</span>&nbsp;<span class="ident" id="7743890">c</span><span class="op" id="7743891">.</span><span class="ident" id="7743892">LocalAddr</span><span class="op" id="7743901">(</span><span class="op" id="7743902">)</span><span class="op" id="7743903">.</span><span class="ident" id="7743904">Network</span><span class="op" id="7743911">(</span><span class="op" id="7743912">)</span>&nbsp;<span class="op" id="7743914">!=</span>&nbsp;<span class="ident" id="7743917">tt</span><span class="op" id="7743919">.</span><span class="ident" id="7743920">net</span>&nbsp;<span class="op" id="7743924">||</span>&nbsp;<span class="ident" id="7743927">c</span><span class="op" id="7743928">.</span><span class="ident" id="7743929">LocalAddr</span><span class="op" id="7743938">(</span><span class="op" id="7743939">)</span><span class="op" id="7743940">.</span><span class="ident" id="7743941">Network</span><span class="op" id="7743948">(</span><span class="op" id="7743949">)</span>&nbsp;<span class="op" id="7743951">!=</span>&nbsp;<span class="ident" id="7743954">tt</span><span class="op" id="7743956">.</span><span class="ident" id="7743957">net</span>&nbsp;<span class="op" id="7743961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7743966">t</span><span class="op" id="7743967">.</span><span class="ident" id="7743968">Fatalf</span><span class="op" id="7743974">(</span><span class="string" id="7743975">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7744004">,</span>&nbsp;<span class="ident" id="7744006">c</span><span class="op" id="7744007">.</span><span class="ident" id="7744008">LocalAddr</span><span class="op" id="7744017">(</span><span class="op" id="7744018">)</span><span class="op" id="7744019">.</span><span class="ident" id="7744020">Network</span><span class="op" id="7744027">(</span><span class="op" id="7744028">)</span><span class="op" id="7744029">,</span>&nbsp;<span class="ident" id="7744031">c</span><span class="op" id="7744032">.</span><span class="ident" id="7744033">RemoteAddr</span><span class="op" id="7744043">(</span><span class="op" id="7744044">)</span><span class="op" id="7744045">.</span><span class="ident" id="7744046">Network</span><span class="op" id="7744053">(</span><span class="op" id="7744054">)</span><span class="op" id="7744055">,</span>&nbsp;<span class="ident" id="7744057">tt</span><span class="op" id="7744059">.</span><span class="ident" id="7744060">net</span><span class="op" id="7744063">,</span>&nbsp;<span class="ident" id="7744065">tt</span><span class="op" id="7744067">.</span><span class="ident" id="7744068">net</span><span class="op" id="7744071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744079">c</span><span class="op" id="7744080">.</span><span class="ident" id="7744081">SetDeadline</span><span class="op" id="7744092">(</span><span class="ident" id="7744093">time</span><span class="op" id="7744097">.</span><span class="ident" id="7744098">Now</span><span class="op" id="7744101">(</span><span class="op" id="7744102">)</span><span class="op" id="7744103">.</span><span class="ident" id="7744104">Add</span><span class="op" id="7744107">(</span><span class="ident" id="7744108">someTimeout</span><span class="op" id="7744119">)</span><span class="op" id="7744120">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744124">c</span><span class="op" id="7744125">.</span><span class="ident" id="7744126">SetReadDeadline</span><span class="op" id="7744141">(</span><span class="ident" id="7744142">time</span><span class="op" id="7744146">.</span><span class="ident" id="7744147">Now</span><span class="op" id="7744150">(</span><span class="op" id="7744151">)</span><span class="op" id="7744152">.</span><span class="ident" id="7744153">Add</span><span class="op" id="7744156">(</span><span class="ident" id="7744157">someTimeout</span><span class="op" id="7744168">)</span><span class="op" id="7744169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744173">c</span><span class="op" id="7744174">.</span><span class="ident" id="7744175">SetWriteDeadline</span><span class="op" id="7744191">(</span><span class="ident" id="7744192">time</span><span class="op" id="7744196">.</span><span class="ident" id="7744197">Now</span><span class="op" id="7744200">(</span><span class="op" id="7744201">)</span><span class="op" id="7744202">.</span><span class="ident" id="7744203">Add</span><span class="op" id="7744206">(</span><span class="ident" id="7744207">someTimeout</span><span class="op" id="7744218">)</span><span class="op" id="7744219">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744224">if</span>&nbsp;<span class="ident" id="7744227">_</span><span class="op" id="7744228">,</span>&nbsp;<span class="ident" id="7744230">err</span>&nbsp;<span class="op" id="7744234">:=</span>&nbsp;<span class="ident" id="7744237">c</span><span class="op" id="7744238">.</span><span class="ident" id="7744239">Write</span><span class="op" id="7744244">(</span><span class="op" id="7744245">[</span><span class="op" id="7744246">]</span><span class="builtintype" id="7744247">byte</span><span class="op" id="7744251">(</span><span class="string" id="7744252">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="7744263">)</span><span class="op" id="7744264">)</span><span class="op" id="7744265">;</span>&nbsp;<span class="ident" id="7744267">err</span>&nbsp;<span class="op" id="7744271">!=</span>&nbsp;<span class="ident" id="7744274">nil</span>&nbsp;<span class="op" id="7744278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744283">t</span><span class="op" id="7744284">.</span><span class="ident" id="7744285">Fatalf</span><span class="op" id="7744291">(</span><span class="string" id="7744292">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7744315">,</span>&nbsp;<span class="ident" id="7744317">err</span><span class="op" id="7744320">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744328">rb</span>&nbsp;<span class="op" id="7744331">:=</span>&nbsp;<span class="builtinfunc" id="7744334">make</span><span class="op" id="7744338">(</span><span class="op" id="7744339">[</span><span class="op" id="7744340">]</span><span class="builtintype" id="7744341">byte</span><span class="op" id="7744345">,</span>&nbsp;<span class="num" id="7744347">128</span><span class="op" id="7744350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744354">if</span>&nbsp;<span class="ident" id="7744357">_</span><span class="op" id="7744358">,</span>&nbsp;<span class="ident" id="7744360">err</span>&nbsp;<span class="op" id="7744364">:=</span>&nbsp;<span class="ident" id="7744367">c</span><span class="op" id="7744368">.</span><span class="ident" id="7744369">Read</span><span class="op" id="7744373">(</span><span class="ident" id="7744374">rb</span><span class="op" id="7744376">)</span><span class="op" id="7744377">;</span>&nbsp;<span class="ident" id="7744379">err</span>&nbsp;<span class="op" id="7744383">!=</span>&nbsp;<span class="ident" id="7744386">nil</span>&nbsp;<span class="op" id="7744390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744395">t</span><span class="op" id="7744396">.</span><span class="ident" id="7744397">Fatalf</span><span class="op" id="7744403">(</span><span class="string" id="7744404">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7744426">,</span>&nbsp;<span class="ident" id="7744428">err</span><span class="op" id="7744431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744435">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744440">&lt;-</span><span class="ident" id="7744442">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744448">}</span><br>
<span class="lineno"></span><span class="op" id="7744450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7744453">func</span>&nbsp;<span class="ident" id="7744458">transponder</span><span class="op" id="7744469">(</span><span class="ident" id="7744470">t</span>&nbsp;<span class="op" id="7744472">*</span><span class="ident" id="7744473">testing</span><span class="op" id="7744480">.</span><span class="ident" id="7744481">T</span><span class="op" id="7744482">,</span>&nbsp;<span class="ident" id="7744484">ln</span>&nbsp;<span class="ident" id="7744487">Listener</span><span class="op" id="7744495">,</span>&nbsp;<span class="ident" id="7744497">done</span>&nbsp;<span class="keyword" id="7744502">chan</span><span class="op" id="7744506">&lt;-</span>&nbsp;<span class="builtintype" id="7744509">int</span><span class="op" id="7744512">)</span>&nbsp;<span class="op" id="7744514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744517">defer</span>&nbsp;<span class="keyword" id="7744523">func</span><span class="op" id="7744527">(</span><span class="op" id="7744528">)</span>&nbsp;<span class="op" id="7744530">{</span>&nbsp;<span class="ident" id="7744532">done</span>&nbsp;<span class="op" id="7744537">&lt;-</span>&nbsp;<span class="num" id="7744540">1</span>&nbsp;<span class="op" id="7744542">}</span><span class="op" id="7744543">(</span><span class="op" id="7744544">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744548">switch</span>&nbsp;<span class="ident" id="7744555">ln</span>&nbsp;<span class="op" id="7744558">:=</span>&nbsp;<span class="ident" id="7744561">ln</span><span class="op" id="7744563">.</span><span class="op" id="7744564">(</span><span class="keyword" id="7744565">type</span><span class="op" id="7744569">)</span>&nbsp;<span class="op" id="7744571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744574">case</span>&nbsp;<span class="op" id="7744579">*</span><span class="ident" id="7744580">TCPListener</span><span class="op" id="7744591">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744595">ln</span><span class="op" id="7744597">.</span><span class="ident" id="7744598">SetDeadline</span><span class="op" id="7744609">(</span><span class="ident" id="7744610">time</span><span class="op" id="7744614">.</span><span class="ident" id="7744615">Now</span><span class="op" id="7744618">(</span><span class="op" id="7744619">)</span><span class="op" id="7744620">.</span><span class="ident" id="7744621">Add</span><span class="op" id="7744624">(</span><span class="ident" id="7744625">someTimeout</span><span class="op" id="7744636">)</span><span class="op" id="7744637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744640">case</span>&nbsp;<span class="op" id="7744645">*</span><span class="ident" id="7744646">UnixListener</span><span class="op" id="7744658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744662">ln</span><span class="op" id="7744664">.</span><span class="ident" id="7744665">SetDeadline</span><span class="op" id="7744676">(</span><span class="ident" id="7744677">time</span><span class="op" id="7744681">.</span><span class="ident" id="7744682">Now</span><span class="op" id="7744685">(</span><span class="op" id="7744686">)</span><span class="op" id="7744687">.</span><span class="ident" id="7744688">Add</span><span class="op" id="7744691">(</span><span class="ident" id="7744692">someTimeout</span><span class="op" id="7744703">)</span><span class="op" id="7744704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744710">c</span><span class="op" id="7744711">,</span>&nbsp;<span class="ident" id="7744713">err</span>&nbsp;<span class="op" id="7744717">:=</span>&nbsp;<span class="ident" id="7744720">ln</span><span class="op" id="7744722">.</span><span class="ident" id="7744723">Accept</span><span class="op" id="7744729">(</span><span class="op" id="7744730">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744733">if</span>&nbsp;<span class="ident" id="7744736">err</span>&nbsp;<span class="op" id="7744740">!=</span>&nbsp;<span class="ident" id="7744743">nil</span>&nbsp;<span class="op" id="7744747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744751">t</span><span class="op" id="7744752">.</span><span class="ident" id="7744753">Errorf</span><span class="op" id="7744759">(</span><span class="string" id="7744760">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7744788">,</span>&nbsp;<span class="ident" id="7744790">err</span><span class="op" id="7744793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744797">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7744805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744808">defer</span>&nbsp;<span class="ident" id="7744814">c</span><span class="op" id="7744815">.</span><span class="ident" id="7744816">Close</span><span class="op" id="7744821">(</span><span class="op" id="7744822">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744825">network</span>&nbsp;<span class="op" id="7744833">:=</span>&nbsp;<span class="ident" id="7744836">ln</span><span class="op" id="7744838">.</span><span class="ident" id="7744839">Addr</span><span class="op" id="7744843">(</span><span class="op" id="7744844">)</span><span class="op" id="7744845">.</span><span class="ident" id="7744846">Network</span><span class="op" id="7744853">(</span><span class="op" id="7744854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7744857">if</span>&nbsp;<span class="ident" id="7744860">c</span><span class="op" id="7744861">.</span><span class="ident" id="7744862">LocalAddr</span><span class="op" id="7744871">(</span><span class="op" id="7744872">)</span><span class="op" id="7744873">.</span><span class="ident" id="7744874">Network</span><span class="op" id="7744881">(</span><span class="op" id="7744882">)</span>&nbsp;<span class="op" id="7744884">!=</span>&nbsp;<span class="ident" id="7744887">network</span>&nbsp;<span class="op" id="7744895">||</span>&nbsp;<span class="ident" id="7744898">c</span><span class="op" id="7744899">.</span><span class="ident" id="7744900">LocalAddr</span><span class="op" id="7744909">(</span><span class="op" id="7744910">)</span><span class="op" id="7744911">.</span><span class="ident" id="7744912">Network</span><span class="op" id="7744919">(</span><span class="op" id="7744920">)</span>&nbsp;<span class="op" id="7744922">!=</span>&nbsp;<span class="ident" id="7744925">network</span>&nbsp;<span class="op" id="7744933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7744937">t</span><span class="op" id="7744938">.</span><span class="ident" id="7744939">Errorf</span><span class="op" id="7744945">(</span><span class="string" id="7744946">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="7744975">,</span>&nbsp;<span class="ident" id="7744977">c</span><span class="op" id="7744978">.</span><span class="ident" id="7744979">LocalAddr</span><span class="op" id="7744988">(</span><span class="op" id="7744989">)</span><span class="op" id="7744990">.</span><span class="ident" id="7744991">Network</span><span class="op" id="7744998">(</span><span class="op" id="7744999">)</span><span class="op" id="7745000">,</span>&nbsp;<span class="ident" id="7745002">c</span><span class="op" id="7745003">.</span><span class="ident" id="7745004">RemoteAddr</span><span class="op" id="7745014">(</span><span class="op" id="7745015">)</span><span class="op" id="7745016">.</span><span class="ident" id="7745017">Network</span><span class="op" id="7745024">(</span><span class="op" id="7745025">)</span><span class="op" id="7745026">,</span>&nbsp;<span class="ident" id="7745028">network</span><span class="op" id="7745035">,</span>&nbsp;<span class="ident" id="7745037">network</span><span class="op" id="7745044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745048">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745056">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745059">c</span><span class="op" id="7745060">.</span><span class="ident" id="7745061">SetDeadline</span><span class="op" id="7745072">(</span><span class="ident" id="7745073">time</span><span class="op" id="7745077">.</span><span class="ident" id="7745078">Now</span><span class="op" id="7745081">(</span><span class="op" id="7745082">)</span><span class="op" id="7745083">.</span><span class="ident" id="7745084">Add</span><span class="op" id="7745087">(</span><span class="ident" id="7745088">someTimeout</span><span class="op" id="7745099">)</span><span class="op" id="7745100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745103">c</span><span class="op" id="7745104">.</span><span class="ident" id="7745105">SetReadDeadline</span><span class="op" id="7745120">(</span><span class="ident" id="7745121">time</span><span class="op" id="7745125">.</span><span class="ident" id="7745126">Now</span><span class="op" id="7745129">(</span><span class="op" id="7745130">)</span><span class="op" id="7745131">.</span><span class="ident" id="7745132">Add</span><span class="op" id="7745135">(</span><span class="ident" id="7745136">someTimeout</span><span class="op" id="7745147">)</span><span class="op" id="7745148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745151">c</span><span class="op" id="7745152">.</span><span class="ident" id="7745153">SetWriteDeadline</span><span class="op" id="7745169">(</span><span class="ident" id="7745170">time</span><span class="op" id="7745174">.</span><span class="ident" id="7745175">Now</span><span class="op" id="7745178">(</span><span class="op" id="7745179">)</span><span class="op" id="7745180">.</span><span class="ident" id="7745181">Add</span><span class="op" id="7745184">(</span><span class="ident" id="7745185">someTimeout</span><span class="op" id="7745196">)</span><span class="op" id="7745197">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745201">b</span>&nbsp;<span class="op" id="7745203">:=</span>&nbsp;<span class="builtinfunc" id="7745206">make</span><span class="op" id="7745210">(</span><span class="op" id="7745211">[</span><span class="op" id="7745212">]</span><span class="builtintype" id="7745213">byte</span><span class="op" id="7745217">,</span>&nbsp;<span class="num" id="7745219">128</span><span class="op" id="7745222">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745225">n</span><span class="op" id="7745226">,</span>&nbsp;<span class="ident" id="7745228">err</span>&nbsp;<span class="op" id="7745232">:=</span>&nbsp;<span class="ident" id="7745235">c</span><span class="op" id="7745236">.</span><span class="ident" id="7745237">Read</span><span class="op" id="7745241">(</span><span class="ident" id="7745242">b</span><span class="op" id="7745243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745246">if</span>&nbsp;<span class="ident" id="7745249">err</span>&nbsp;<span class="op" id="7745253">!=</span>&nbsp;<span class="ident" id="7745256">nil</span>&nbsp;<span class="op" id="7745260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745264">t</span><span class="op" id="7745265">.</span><span class="ident" id="7745266">Errorf</span><span class="op" id="7745272">(</span><span class="string" id="7745273">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7745295">,</span>&nbsp;<span class="ident" id="7745297">err</span><span class="op" id="7745300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745304">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745312">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745315">if</span>&nbsp;<span class="ident" id="7745318">_</span><span class="op" id="7745319">,</span>&nbsp;<span class="ident" id="7745321">err</span>&nbsp;<span class="op" id="7745325">:=</span>&nbsp;<span class="ident" id="7745328">c</span><span class="op" id="7745329">.</span><span class="ident" id="7745330">Write</span><span class="op" id="7745335">(</span><span class="ident" id="7745336">b</span><span class="op" id="7745337">[</span><span class="op" id="7745338">:</span><span class="ident" id="7745339">n</span><span class="op" id="7745340">]</span><span class="op" id="7745341">)</span><span class="op" id="7745342">;</span>&nbsp;<span class="ident" id="7745344">err</span>&nbsp;<span class="op" id="7745348">!=</span>&nbsp;<span class="ident" id="7745351">nil</span>&nbsp;<span class="op" id="7745355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745359">t</span><span class="op" id="7745360">.</span><span class="ident" id="7745361">Errorf</span><span class="op" id="7745367">(</span><span class="string" id="7745368">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7745391">,</span>&nbsp;<span class="ident" id="7745393">err</span><span class="op" id="7745396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7745400">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745408">}</span><br>
<span class="lineno"></span><span class="op" id="7745410">}</span>
</div>
</body>
</html>
