<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7763417">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7763472">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7763526">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7763577">package</span>&nbsp;<span class="ident" id="7763585">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7763590">import</span>&nbsp;<span class="op" id="7763597">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7763600">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7763609">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7763619">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7763629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7763632">var</span>&nbsp;<span class="ident" id="7763636">writeTests</span>&nbsp;<span class="op" id="7763647">=</span>&nbsp;<span class="op" id="7763649">[</span><span class="op" id="7763650">]</span><span class="keyword" id="7763651">struct</span>&nbsp;<span class="op" id="7763658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7763661">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7763669">[</span><span class="op" id="7763670">]</span><span class="op" id="7763671">[</span><span class="op" id="7763672">]</span><span class="builtintype" id="7763673">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7763681">Output</span>&nbsp;&nbsp;<span class="builtintype" id="7763689">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7763697">UseCRLF</span>&nbsp;<span class="builtintype" id="7763705">bool</span><br>
<span class="lineno"></span><span class="op" id="7763710">}</span><span class="op" id="7763711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7763714">{</span><span class="ident" id="7763715">Input</span><span class="op" id="7763720">:</span>&nbsp;<span class="op" id="7763722">[</span><span class="op" id="7763723">]</span><span class="op" id="7763724">[</span><span class="op" id="7763725">]</span><span class="builtintype" id="7763726">string</span><span class="op" id="7763732">{</span><span class="op" id="7763733">{</span><span class="string" id="7763734">&#34;abc&#34;</span><span class="op" id="7763739">}</span><span class="op" id="7763740">}</span><span class="op" id="7763741">,</span>&nbsp;<span class="ident" id="7763743">Output</span><span class="op" id="7763749">:</span>&nbsp;<span class="string" id="7763751">&#34;abc\n&#34;</span><span class="op" id="7763758">}</span><span class="op" id="7763759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7763762">{</span><span class="ident" id="7763763">Input</span><span class="op" id="7763768">:</span>&nbsp;<span class="op" id="7763770">[</span><span class="op" id="7763771">]</span><span class="op" id="7763772">[</span><span class="op" id="7763773">]</span><span class="builtintype" id="7763774">string</span><span class="op" id="7763780">{</span><span class="op" id="7763781">{</span><span class="string" id="7763782">&#34;abc&#34;</span><span class="op" id="7763787">}</span><span class="op" id="7763788">}</span><span class="op" id="7763789">,</span>&nbsp;<span class="ident" id="7763791">Output</span><span class="op" id="7763797">:</span>&nbsp;<span class="string" id="7763799">&#34;abc\r\n&#34;</span><span class="op" id="7763808">,</span>&nbsp;<span class="ident" id="7763810">UseCRLF</span><span class="op" id="7763817">:</span>&nbsp;<span class="builtintype" id="7763819">true</span><span class="op" id="7763823">}</span><span class="op" id="7763824">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7763827">{</span><span class="ident" id="7763828">Input</span><span class="op" id="7763833">:</span>&nbsp;<span class="op" id="7763835">[</span><span class="op" id="7763836">]</span><span class="op" id="7763837">[</span><span class="op" id="7763838">]</span><span class="builtintype" id="7763839">string</span><span class="op" id="7763845">{</span><span class="op" id="7763846">{</span><span class="string" id="7763847">`&#34;abc&#34;`</span><span class="op" id="7763854">}</span><span class="op" id="7763855">}</span><span class="op" id="7763856">,</span>&nbsp;<span class="ident" id="7763858">Output</span><span class="op" id="7763864">:</span>&nbsp;<span class="string" id="7763866">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="7763878">+</span>&nbsp;<span class="string" id="7763880">&#34;\n&#34;</span><span class="op" id="7763884">}</span><span class="op" id="7763885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7763888">{</span><span class="ident" id="7763889">Input</span><span class="op" id="7763894">:</span>&nbsp;<span class="op" id="7763896">[</span><span class="op" id="7763897">]</span><span class="op" id="7763898">[</span><span class="op" id="7763899">]</span><span class="builtintype" id="7763900">string</span><span class="op" id="7763906">{</span><span class="op" id="7763907">{</span><span class="string" id="7763908">`a&#34;b`</span><span class="op" id="7763913">}</span><span class="op" id="7763914">}</span><span class="op" id="7763915">,</span>&nbsp;<span class="ident" id="7763917">Output</span><span class="op" id="7763923">:</span>&nbsp;<span class="string" id="7763925">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="7763934">+</span>&nbsp;<span class="string" id="7763936">&#34;\n&#34;</span><span class="op" id="7763940">}</span><span class="op" id="7763941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7763944">{</span><span class="ident" id="7763945">Input</span><span class="op" id="7763950">:</span>&nbsp;<span class="op" id="7763952">[</span><span class="op" id="7763953">]</span><span class="op" id="7763954">[</span><span class="op" id="7763955">]</span><span class="builtintype" id="7763956">string</span><span class="op" id="7763962">{</span><span class="op" id="7763963">{</span><span class="string" id="7763964">`&#34;a&#34;b&#34;`</span><span class="op" id="7763971">}</span><span class="op" id="7763972">}</span><span class="op" id="7763973">,</span>&nbsp;<span class="ident" id="7763975">Output</span><span class="op" id="7763981">:</span>&nbsp;<span class="string" id="7763983">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="7763996">+</span>&nbsp;<span class="string" id="7763998">&#34;\n&#34;</span><span class="op" id="7764002">}</span><span class="op" id="7764003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764006">{</span><span class="ident" id="7764007">Input</span><span class="op" id="7764012">:</span>&nbsp;<span class="op" id="7764014">[</span><span class="op" id="7764015">]</span><span class="op" id="7764016">[</span><span class="op" id="7764017">]</span><span class="builtintype" id="7764018">string</span><span class="op" id="7764024">{</span><span class="op" id="7764025">{</span><span class="string" id="7764026">&#34;&nbsp;abc&#34;</span><span class="op" id="7764032">}</span><span class="op" id="7764033">}</span><span class="op" id="7764034">,</span>&nbsp;<span class="ident" id="7764036">Output</span><span class="op" id="7764042">:</span>&nbsp;<span class="string" id="7764044">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="7764053">+</span>&nbsp;<span class="string" id="7764055">&#34;\n&#34;</span><span class="op" id="7764059">}</span><span class="op" id="7764060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764063">{</span><span class="ident" id="7764064">Input</span><span class="op" id="7764069">:</span>&nbsp;<span class="op" id="7764071">[</span><span class="op" id="7764072">]</span><span class="op" id="7764073">[</span><span class="op" id="7764074">]</span><span class="builtintype" id="7764075">string</span><span class="op" id="7764081">{</span><span class="op" id="7764082">{</span><span class="string" id="7764083">&#34;abc,def&#34;</span><span class="op" id="7764092">}</span><span class="op" id="7764093">}</span><span class="op" id="7764094">,</span>&nbsp;<span class="ident" id="7764096">Output</span><span class="op" id="7764102">:</span>&nbsp;<span class="string" id="7764104">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="7764116">+</span>&nbsp;<span class="string" id="7764118">&#34;\n&#34;</span><span class="op" id="7764122">}</span><span class="op" id="7764123">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764126">{</span><span class="ident" id="7764127">Input</span><span class="op" id="7764132">:</span>&nbsp;<span class="op" id="7764134">[</span><span class="op" id="7764135">]</span><span class="op" id="7764136">[</span><span class="op" id="7764137">]</span><span class="builtintype" id="7764138">string</span><span class="op" id="7764144">{</span><span class="op" id="7764145">{</span><span class="string" id="7764146">&#34;abc&#34;</span><span class="op" id="7764151">,</span>&nbsp;<span class="string" id="7764153">&#34;def&#34;</span><span class="op" id="7764158">}</span><span class="op" id="7764159">}</span><span class="op" id="7764160">,</span>&nbsp;<span class="ident" id="7764162">Output</span><span class="op" id="7764168">:</span>&nbsp;<span class="string" id="7764170">&#34;abc,def\n&#34;</span><span class="op" id="7764181">}</span><span class="op" id="7764182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764185">{</span><span class="ident" id="7764186">Input</span><span class="op" id="7764191">:</span>&nbsp;<span class="op" id="7764193">[</span><span class="op" id="7764194">]</span><span class="op" id="7764195">[</span><span class="op" id="7764196">]</span><span class="builtintype" id="7764197">string</span><span class="op" id="7764203">{</span><span class="op" id="7764204">{</span><span class="string" id="7764205">&#34;abc&#34;</span><span class="op" id="7764210">}</span><span class="op" id="7764211">,</span>&nbsp;<span class="op" id="7764213">{</span><span class="string" id="7764214">&#34;def&#34;</span><span class="op" id="7764219">}</span><span class="op" id="7764220">}</span><span class="op" id="7764221">,</span>&nbsp;<span class="ident" id="7764223">Output</span><span class="op" id="7764229">:</span>&nbsp;<span class="string" id="7764231">&#34;abc\ndef\n&#34;</span><span class="op" id="7764243">}</span><span class="op" id="7764244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764247">{</span><span class="ident" id="7764248">Input</span><span class="op" id="7764253">:</span>&nbsp;<span class="op" id="7764255">[</span><span class="op" id="7764256">]</span><span class="op" id="7764257">[</span><span class="op" id="7764258">]</span><span class="builtintype" id="7764259">string</span><span class="op" id="7764265">{</span><span class="op" id="7764266">{</span><span class="string" id="7764267">&#34;abc\ndef&#34;</span><span class="op" id="7764277">}</span><span class="op" id="7764278">}</span><span class="op" id="7764279">,</span>&nbsp;<span class="ident" id="7764281">Output</span><span class="op" id="7764287">:</span>&nbsp;<span class="string" id="7764289">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="7764305">}</span><span class="op" id="7764306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764309">{</span><span class="ident" id="7764310">Input</span><span class="op" id="7764315">:</span>&nbsp;<span class="op" id="7764317">[</span><span class="op" id="7764318">]</span><span class="op" id="7764319">[</span><span class="op" id="7764320">]</span><span class="builtintype" id="7764321">string</span><span class="op" id="7764327">{</span><span class="op" id="7764328">{</span><span class="string" id="7764329">&#34;abc\ndef&#34;</span><span class="op" id="7764339">}</span><span class="op" id="7764340">}</span><span class="op" id="7764341">,</span>&nbsp;<span class="ident" id="7764343">Output</span><span class="op" id="7764349">:</span>&nbsp;<span class="string" id="7764351">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="7764371">,</span>&nbsp;<span class="ident" id="7764373">UseCRLF</span><span class="op" id="7764380">:</span>&nbsp;<span class="builtintype" id="7764382">true</span><span class="op" id="7764386">}</span><span class="op" id="7764387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764390">{</span><span class="ident" id="7764391">Input</span><span class="op" id="7764396">:</span>&nbsp;<span class="op" id="7764398">[</span><span class="op" id="7764399">]</span><span class="op" id="7764400">[</span><span class="op" id="7764401">]</span><span class="builtintype" id="7764402">string</span><span class="op" id="7764408">{</span><span class="op" id="7764409">{</span><span class="string" id="7764410">&#34;abc\rdef&#34;</span><span class="op" id="7764420">}</span><span class="op" id="7764421">}</span><span class="op" id="7764422">,</span>&nbsp;<span class="ident" id="7764424">Output</span><span class="op" id="7764430">:</span>&nbsp;<span class="string" id="7764432">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="7764448">,</span>&nbsp;<span class="ident" id="7764450">UseCRLF</span><span class="op" id="7764457">:</span>&nbsp;<span class="builtintype" id="7764459">true</span><span class="op" id="7764463">}</span><span class="op" id="7764464">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764467">{</span><span class="ident" id="7764468">Input</span><span class="op" id="7764473">:</span>&nbsp;<span class="op" id="7764475">[</span><span class="op" id="7764476">]</span><span class="op" id="7764477">[</span><span class="op" id="7764478">]</span><span class="builtintype" id="7764479">string</span><span class="op" id="7764485">{</span><span class="op" id="7764486">{</span><span class="string" id="7764487">&#34;abc\rdef&#34;</span><span class="op" id="7764497">}</span><span class="op" id="7764498">}</span><span class="op" id="7764499">,</span>&nbsp;<span class="ident" id="7764501">Output</span><span class="op" id="7764507">:</span>&nbsp;<span class="string" id="7764509">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="7764525">,</span>&nbsp;<span class="ident" id="7764527">UseCRLF</span><span class="op" id="7764534">:</span>&nbsp;<span class="builtintype" id="7764536">false</span><span class="op" id="7764541">}</span><span class="op" id="7764542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764545">{</span><span class="ident" id="7764546">Input</span><span class="op" id="7764551">:</span>&nbsp;<span class="op" id="7764553">[</span><span class="op" id="7764554">]</span><span class="op" id="7764555">[</span><span class="op" id="7764556">]</span><span class="builtintype" id="7764557">string</span><span class="op" id="7764563">{</span><span class="op" id="7764564">{</span><span class="string" id="7764565">&#34;&#34;</span><span class="op" id="7764567">}</span><span class="op" id="7764568">}</span><span class="op" id="7764569">,</span>&nbsp;<span class="ident" id="7764571">Output</span><span class="op" id="7764577">:</span>&nbsp;<span class="string" id="7764579">&#34;\n&#34;</span><span class="op" id="7764583">}</span><span class="op" id="7764584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764587">{</span><span class="ident" id="7764588">Input</span><span class="op" id="7764593">:</span>&nbsp;<span class="op" id="7764595">[</span><span class="op" id="7764596">]</span><span class="op" id="7764597">[</span><span class="op" id="7764598">]</span><span class="builtintype" id="7764599">string</span><span class="op" id="7764605">{</span><span class="op" id="7764606">{</span><span class="string" id="7764607">&#34;&#34;</span><span class="op" id="7764609">,</span>&nbsp;<span class="string" id="7764611">&#34;&#34;</span><span class="op" id="7764613">}</span><span class="op" id="7764614">}</span><span class="op" id="7764615">,</span>&nbsp;<span class="ident" id="7764617">Output</span><span class="op" id="7764623">:</span>&nbsp;<span class="string" id="7764625">&#34;,\n&#34;</span><span class="op" id="7764630">}</span><span class="op" id="7764631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764634">{</span><span class="ident" id="7764635">Input</span><span class="op" id="7764640">:</span>&nbsp;<span class="op" id="7764642">[</span><span class="op" id="7764643">]</span><span class="op" id="7764644">[</span><span class="op" id="7764645">]</span><span class="builtintype" id="7764646">string</span><span class="op" id="7764652">{</span><span class="op" id="7764653">{</span><span class="string" id="7764654">&#34;&#34;</span><span class="op" id="7764656">,</span>&nbsp;<span class="string" id="7764658">&#34;&#34;</span><span class="op" id="7764660">,</span>&nbsp;<span class="string" id="7764662">&#34;&#34;</span><span class="op" id="7764664">}</span><span class="op" id="7764665">}</span><span class="op" id="7764666">,</span>&nbsp;<span class="ident" id="7764668">Output</span><span class="op" id="7764674">:</span>&nbsp;<span class="string" id="7764676">&#34;,,\n&#34;</span><span class="op" id="7764682">}</span><span class="op" id="7764683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764686">{</span><span class="ident" id="7764687">Input</span><span class="op" id="7764692">:</span>&nbsp;<span class="op" id="7764694">[</span><span class="op" id="7764695">]</span><span class="op" id="7764696">[</span><span class="op" id="7764697">]</span><span class="builtintype" id="7764698">string</span><span class="op" id="7764704">{</span><span class="op" id="7764705">{</span><span class="string" id="7764706">&#34;&#34;</span><span class="op" id="7764708">,</span>&nbsp;<span class="string" id="7764710">&#34;&#34;</span><span class="op" id="7764712">,</span>&nbsp;<span class="string" id="7764714">&#34;a&#34;</span><span class="op" id="7764717">}</span><span class="op" id="7764718">}</span><span class="op" id="7764719">,</span>&nbsp;<span class="ident" id="7764721">Output</span><span class="op" id="7764727">:</span>&nbsp;<span class="string" id="7764729">&#34;,,a\n&#34;</span><span class="op" id="7764736">}</span><span class="op" id="7764737">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764740">{</span><span class="ident" id="7764741">Input</span><span class="op" id="7764746">:</span>&nbsp;<span class="op" id="7764748">[</span><span class="op" id="7764749">]</span><span class="op" id="7764750">[</span><span class="op" id="7764751">]</span><span class="builtintype" id="7764752">string</span><span class="op" id="7764758">{</span><span class="op" id="7764759">{</span><span class="string" id="7764760">&#34;&#34;</span><span class="op" id="7764762">,</span>&nbsp;<span class="string" id="7764764">&#34;a&#34;</span><span class="op" id="7764767">,</span>&nbsp;<span class="string" id="7764769">&#34;&#34;</span><span class="op" id="7764771">}</span><span class="op" id="7764772">}</span><span class="op" id="7764773">,</span>&nbsp;<span class="ident" id="7764775">Output</span><span class="op" id="7764781">:</span>&nbsp;<span class="string" id="7764783">&#34;,a,\n&#34;</span><span class="op" id="7764790">}</span><span class="op" id="7764791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764794">{</span><span class="ident" id="7764795">Input</span><span class="op" id="7764800">:</span>&nbsp;<span class="op" id="7764802">[</span><span class="op" id="7764803">]</span><span class="op" id="7764804">[</span><span class="op" id="7764805">]</span><span class="builtintype" id="7764806">string</span><span class="op" id="7764812">{</span><span class="op" id="7764813">{</span><span class="string" id="7764814">&#34;&#34;</span><span class="op" id="7764816">,</span>&nbsp;<span class="string" id="7764818">&#34;a&#34;</span><span class="op" id="7764821">,</span>&nbsp;<span class="string" id="7764823">&#34;a&#34;</span><span class="op" id="7764826">}</span><span class="op" id="7764827">}</span><span class="op" id="7764828">,</span>&nbsp;<span class="ident" id="7764830">Output</span><span class="op" id="7764836">:</span>&nbsp;<span class="string" id="7764838">&#34;,a,a\n&#34;</span><span class="op" id="7764846">}</span><span class="op" id="7764847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764850">{</span><span class="ident" id="7764851">Input</span><span class="op" id="7764856">:</span>&nbsp;<span class="op" id="7764858">[</span><span class="op" id="7764859">]</span><span class="op" id="7764860">[</span><span class="op" id="7764861">]</span><span class="builtintype" id="7764862">string</span><span class="op" id="7764868">{</span><span class="op" id="7764869">{</span><span class="string" id="7764870">&#34;a&#34;</span><span class="op" id="7764873">,</span>&nbsp;<span class="string" id="7764875">&#34;&#34;</span><span class="op" id="7764877">,</span>&nbsp;<span class="string" id="7764879">&#34;&#34;</span><span class="op" id="7764881">}</span><span class="op" id="7764882">}</span><span class="op" id="7764883">,</span>&nbsp;<span class="ident" id="7764885">Output</span><span class="op" id="7764891">:</span>&nbsp;<span class="string" id="7764893">&#34;a,,\n&#34;</span><span class="op" id="7764900">}</span><span class="op" id="7764901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764904">{</span><span class="ident" id="7764905">Input</span><span class="op" id="7764910">:</span>&nbsp;<span class="op" id="7764912">[</span><span class="op" id="7764913">]</span><span class="op" id="7764914">[</span><span class="op" id="7764915">]</span><span class="builtintype" id="7764916">string</span><span class="op" id="7764922">{</span><span class="op" id="7764923">{</span><span class="string" id="7764924">&#34;a&#34;</span><span class="op" id="7764927">,</span>&nbsp;<span class="string" id="7764929">&#34;&#34;</span><span class="op" id="7764931">,</span>&nbsp;<span class="string" id="7764933">&#34;a&#34;</span><span class="op" id="7764936">}</span><span class="op" id="7764937">}</span><span class="op" id="7764938">,</span>&nbsp;<span class="ident" id="7764940">Output</span><span class="op" id="7764946">:</span>&nbsp;<span class="string" id="7764948">&#34;a,,a\n&#34;</span><span class="op" id="7764956">}</span><span class="op" id="7764957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7764960">{</span><span class="ident" id="7764961">Input</span><span class="op" id="7764966">:</span>&nbsp;<span class="op" id="7764968">[</span><span class="op" id="7764969">]</span><span class="op" id="7764970">[</span><span class="op" id="7764971">]</span><span class="builtintype" id="7764972">string</span><span class="op" id="7764978">{</span><span class="op" id="7764979">{</span><span class="string" id="7764980">&#34;a&#34;</span><span class="op" id="7764983">,</span>&nbsp;<span class="string" id="7764985">&#34;a&#34;</span><span class="op" id="7764988">,</span>&nbsp;<span class="string" id="7764990">&#34;&#34;</span><span class="op" id="7764992">}</span><span class="op" id="7764993">}</span><span class="op" id="7764994">,</span>&nbsp;<span class="ident" id="7764996">Output</span><span class="op" id="7765002">:</span>&nbsp;<span class="string" id="7765004">&#34;a,a,\n&#34;</span><span class="op" id="7765012">}</span><span class="op" id="7765013">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765016">{</span><span class="ident" id="7765017">Input</span><span class="op" id="7765022">:</span>&nbsp;<span class="op" id="7765024">[</span><span class="op" id="7765025">]</span><span class="op" id="7765026">[</span><span class="op" id="7765027">]</span><span class="builtintype" id="7765028">string</span><span class="op" id="7765034">{</span><span class="op" id="7765035">{</span><span class="string" id="7765036">&#34;a&#34;</span><span class="op" id="7765039">,</span>&nbsp;<span class="string" id="7765041">&#34;a&#34;</span><span class="op" id="7765044">,</span>&nbsp;<span class="string" id="7765046">&#34;a&#34;</span><span class="op" id="7765049">}</span><span class="op" id="7765050">}</span><span class="op" id="7765051">,</span>&nbsp;<span class="ident" id="7765053">Output</span><span class="op" id="7765059">:</span>&nbsp;<span class="string" id="7765061">&#34;a,a,a\n&#34;</span><span class="op" id="7765070">}</span><span class="op" id="7765071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765074">{</span><span class="ident" id="7765075">Input</span><span class="op" id="7765080">:</span>&nbsp;<span class="op" id="7765082">[</span><span class="op" id="7765083">]</span><span class="op" id="7765084">[</span><span class="op" id="7765085">]</span><span class="builtintype" id="7765086">string</span><span class="op" id="7765092">{</span><span class="op" id="7765093">{</span><span class="string" id="7765094">`\.`</span><span class="op" id="7765098">}</span><span class="op" id="7765099">}</span><span class="op" id="7765100">,</span>&nbsp;<span class="ident" id="7765102">Output</span><span class="op" id="7765108">:</span>&nbsp;<span class="string" id="7765110">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="7765121">}</span><span class="op" id="7765122">,</span><br>
<span class="lineno"></span><span class="op" id="7765124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7765127">func</span>&nbsp;<span class="ident" id="7765132">TestWrite</span><span class="op" id="7765141">(</span><span class="ident" id="7765142">t</span>&nbsp;<span class="op" id="7765144">*</span><span class="ident" id="7765145">testing</span><span class="op" id="7765152">.</span><span class="ident" id="7765153">T</span><span class="op" id="7765154">)</span>&nbsp;<span class="op" id="7765156">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7765159">for</span>&nbsp;<span class="ident" id="7765163">n</span><span class="op" id="7765164">,</span>&nbsp;<span class="ident" id="7765166">tt</span>&nbsp;<span class="op" id="7765169">:=</span>&nbsp;<span class="keyword" id="7765172">range</span>&nbsp;<span class="ident" id="7765178">writeTests</span>&nbsp;<span class="op" id="7765189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765193">b</span>&nbsp;<span class="op" id="7765195">:=</span>&nbsp;<span class="op" id="7765198">&amp;</span><span class="ident" id="7765199">bytes</span><span class="op" id="7765204">.</span><span class="ident" id="7765205">Buffer</span><span class="op" id="7765211">{</span><span class="op" id="7765212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765216">f</span>&nbsp;<span class="op" id="7765218">:=</span>&nbsp;<span class="ident" id="7765221">NewWriter</span><span class="op" id="7765230">(</span><span class="ident" id="7765231">b</span><span class="op" id="7765232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765236">f</span><span class="op" id="7765237">.</span><span class="ident" id="7765238">UseCRLF</span>&nbsp;<span class="op" id="7765246">=</span>&nbsp;<span class="ident" id="7765248">tt</span><span class="op" id="7765250">.</span><span class="ident" id="7765251">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765261">err</span>&nbsp;<span class="op" id="7765265">:=</span>&nbsp;<span class="ident" id="7765268">f</span><span class="op" id="7765269">.</span><span class="ident" id="7765270">WriteAll</span><span class="op" id="7765278">(</span><span class="ident" id="7765279">tt</span><span class="op" id="7765281">.</span><span class="ident" id="7765282">Input</span><span class="op" id="7765287">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7765291">if</span>&nbsp;<span class="ident" id="7765294">err</span>&nbsp;<span class="op" id="7765298">!=</span>&nbsp;<span class="ident" id="7765301">nil</span>&nbsp;<span class="op" id="7765305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765310">t</span><span class="op" id="7765311">.</span><span class="ident" id="7765312">Errorf</span><span class="op" id="7765318">(</span><span class="string" id="7765319">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="7765343">,</span>&nbsp;<span class="ident" id="7765345">err</span><span class="op" id="7765348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765356">out</span>&nbsp;<span class="op" id="7765360">:=</span>&nbsp;<span class="ident" id="7765363">b</span><span class="op" id="7765364">.</span><span class="ident" id="7765365">String</span><span class="op" id="7765371">(</span><span class="op" id="7765372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7765376">if</span>&nbsp;<span class="ident" id="7765379">out</span>&nbsp;<span class="op" id="7765383">!=</span>&nbsp;<span class="ident" id="7765386">tt</span><span class="op" id="7765388">.</span><span class="ident" id="7765389">Output</span>&nbsp;<span class="op" id="7765396">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765401">t</span><span class="op" id="7765402">.</span><span class="ident" id="7765403">Errorf</span><span class="op" id="7765409">(</span><span class="string" id="7765410">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7765431">,</span>&nbsp;<span class="ident" id="7765433">n</span><span class="op" id="7765434">,</span>&nbsp;<span class="ident" id="7765436">out</span><span class="op" id="7765439">,</span>&nbsp;<span class="ident" id="7765441">tt</span><span class="op" id="7765443">.</span><span class="ident" id="7765444">Output</span><span class="op" id="7765450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765457">}</span><br>
<span class="lineno"></span><span class="op" id="7765459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7765462">type</span>&nbsp;<span class="ident" id="7765467">errorWriter</span>&nbsp;<span class="keyword" id="7765479">struct</span><span class="op" id="7765485">{</span><span class="op" id="7765486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7765489">func</span>&nbsp;<span class="op" id="7765494">(</span><span class="ident" id="7765495">e</span>&nbsp;<span class="ident" id="7765497">errorWriter</span><span class="op" id="7765508">)</span>&nbsp;<span class="ident" id="7765510">Write</span><span class="op" id="7765515">(</span><span class="ident" id="7765516">b</span>&nbsp;<span class="op" id="7765518">[</span><span class="op" id="7765519">]</span><span class="builtintype" id="7765520">byte</span><span class="op" id="7765524">)</span>&nbsp;<span class="op" id="7765526">(</span><span class="builtintype" id="7765527">int</span><span class="op" id="7765530">,</span>&nbsp;<span class="builtintype" id="7765532">error</span><span class="op" id="7765537">)</span>&nbsp;<span class="op" id="7765539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7765542">return</span>&nbsp;<span class="num" id="7765549">0</span><span class="op" id="7765550">,</span>&nbsp;<span class="ident" id="7765552">errors</span><span class="op" id="7765558">.</span><span class="ident" id="7765559">New</span><span class="op" id="7765562">(</span><span class="string" id="7765563">&#34;Test&#34;</span><span class="op" id="7765569">)</span><br>
<span class="lineno"></span><span class="op" id="7765571">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="7765574">func</span>&nbsp;<span class="ident" id="7765579">TestError</span><span class="op" id="7765588">(</span><span class="ident" id="7765589">t</span>&nbsp;<span class="op" id="7765591">*</span><span class="ident" id="7765592">testing</span><span class="op" id="7765599">.</span><span class="ident" id="7765600">T</span><span class="op" id="7765601">)</span>&nbsp;<span class="op" id="7765603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765606">b</span>&nbsp;<span class="op" id="7765608">:=</span>&nbsp;<span class="op" id="7765611">&amp;</span><span class="ident" id="7765612">bytes</span><span class="op" id="7765617">.</span><span class="ident" id="7765618">Buffer</span><span class="op" id="7765624">{</span><span class="op" id="7765625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765628">f</span>&nbsp;<span class="op" id="7765630">:=</span>&nbsp;<span class="ident" id="7765633">NewWriter</span><span class="op" id="7765642">(</span><span class="ident" id="7765643">b</span><span class="op" id="7765644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765647">f</span><span class="op" id="7765648">.</span><span class="ident" id="7765649">Write</span><span class="op" id="7765654">(</span><span class="op" id="7765655">[</span><span class="op" id="7765656">]</span><span class="builtintype" id="7765657">string</span><span class="op" id="7765663">{</span><span class="string" id="7765664">&#34;abc&#34;</span><span class="op" id="7765669">}</span><span class="op" id="7765670">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765673">f</span><span class="op" id="7765674">.</span><span class="ident" id="7765675">Flush</span><span class="op" id="7765680">(</span><span class="op" id="7765681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765684">err</span>&nbsp;<span class="op" id="7765688">:=</span>&nbsp;<span class="ident" id="7765691">f</span><span class="op" id="7765692">.</span><span class="ident" id="7765693">Error</span><span class="op" id="7765698">(</span><span class="op" id="7765699">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7765703">if</span>&nbsp;<span class="ident" id="7765706">err</span>&nbsp;<span class="op" id="7765710">!=</span>&nbsp;<span class="ident" id="7765713">nil</span>&nbsp;<span class="op" id="7765717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765721">t</span><span class="op" id="7765722">.</span><span class="ident" id="7765723">Errorf</span><span class="op" id="7765729">(</span><span class="string" id="7765730">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="7765754">,</span>&nbsp;<span class="ident" id="7765756">err</span><span class="op" id="7765759">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765766">f</span>&nbsp;<span class="op" id="7765768">=</span>&nbsp;<span class="ident" id="7765770">NewWriter</span><span class="op" id="7765779">(</span><span class="ident" id="7765780">errorWriter</span><span class="op" id="7765791">{</span><span class="op" id="7765792">}</span><span class="op" id="7765793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765796">f</span><span class="op" id="7765797">.</span><span class="ident" id="7765798">Write</span><span class="op" id="7765803">(</span><span class="op" id="7765804">[</span><span class="op" id="7765805">]</span><span class="builtintype" id="7765806">string</span><span class="op" id="7765812">{</span><span class="string" id="7765813">&#34;abc&#34;</span><span class="op" id="7765818">}</span><span class="op" id="7765819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765822">f</span><span class="op" id="7765823">.</span><span class="ident" id="7765824">Flush</span><span class="op" id="7765829">(</span><span class="op" id="7765830">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765833">err</span>&nbsp;<span class="op" id="7765837">=</span>&nbsp;<span class="ident" id="7765839">f</span><span class="op" id="7765840">.</span><span class="ident" id="7765841">Error</span><span class="op" id="7765846">(</span><span class="op" id="7765847">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7765851">if</span>&nbsp;<span class="ident" id="7765854">err</span>&nbsp;<span class="op" id="7765858">==</span>&nbsp;<span class="ident" id="7765861">nil</span>&nbsp;<span class="op" id="7765865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7765869">t</span><span class="op" id="7765870">.</span><span class="ident" id="7765871">Error</span><span class="op" id="7765876">(</span><span class="string" id="7765877">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="7765902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7765905">}</span><br>
<span class="lineno">85</span><span class="op" id="7765907">}</span>
</div>
</body>
</html>
