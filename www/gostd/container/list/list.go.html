<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4225709">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4225764">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4225818">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4225869">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4225918">//</span><br>
<span class="lineno"></span><span class="comment" id="4225921">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4225969">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4226017">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4226050">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4226055">//</span><br>
<span class="lineno"></span><span class="keyword" id="4226058">package</span>&nbsp;<span class="ident" id="4226066">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4226072">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4226115">type</span>&nbsp;<span class="ident" id="4226120">Element</span>&nbsp;<span class="keyword" id="4226128">struct</span>&nbsp;<span class="op" id="4226135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226138">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226208">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226279">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226349">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226420">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4226445">next</span><span class="op" id="4226449">,</span>&nbsp;<span class="ident" id="4226451">prev</span>&nbsp;<span class="op" id="4226456">*</span><span class="ident" id="4226457">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226467">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4226511">list</span>&nbsp;<span class="op" id="4226516">*</span><span class="ident" id="4226517">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4226524">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4226564">Value</span>&nbsp;<span class="keyword" id="4226570">interface</span><span class="op" id="4226579">{</span><span class="op" id="4226580">}</span><br>
<span class="lineno"></span><span class="op" id="4226582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4226585">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4226631">func</span>&nbsp;<span class="op" id="4226636">(</span><span class="ident" id="4226637">e</span>&nbsp;<span class="op" id="4226639">*</span><span class="ident" id="4226640">Element</span><span class="op" id="4226647">)</span>&nbsp;<span class="ident" id="4226649">Next</span><span class="op" id="4226653">(</span><span class="op" id="4226654">)</span>&nbsp;<span class="op" id="4226656">*</span><span class="ident" id="4226657">Element</span>&nbsp;<span class="op" id="4226665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4226668">if</span>&nbsp;<span class="ident" id="4226671">p</span>&nbsp;<span class="op" id="4226673">:=</span>&nbsp;<span class="ident" id="4226676">e</span><span class="op" id="4226677">.</span><span class="ident" id="4226678">next</span><span class="op" id="4226682">;</span>&nbsp;<span class="ident" id="4226684">e</span><span class="op" id="4226685">.</span><span class="ident" id="4226686">list</span>&nbsp;<span class="op" id="4226691">!=</span>&nbsp;<span class="ident" id="4226694">nil</span>&nbsp;<span class="op" id="4226698">&amp;&amp;</span>&nbsp;<span class="ident" id="4226701">p</span>&nbsp;<span class="op" id="4226703">!=</span>&nbsp;<span class="op" id="4226706">&amp;</span><span class="ident" id="4226707">e</span><span class="op" id="4226708">.</span><span class="ident" id="4226709">list</span><span class="op" id="4226713">.</span><span class="ident" id="4226714">root</span>&nbsp;<span class="op" id="4226719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4226723">return</span>&nbsp;<span class="ident" id="4226730">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4226733">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4226736">return</span>&nbsp;<span class="ident" id="4226743">nil</span><br>
<span class="lineno"></span><span class="op" id="4226747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4226750">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4226800">func</span>&nbsp;<span class="op" id="4226805">(</span><span class="ident" id="4226806">e</span>&nbsp;<span class="op" id="4226808">*</span><span class="ident" id="4226809">Element</span><span class="op" id="4226816">)</span>&nbsp;<span class="ident" id="4226818">Prev</span><span class="op" id="4226822">(</span><span class="op" id="4226823">)</span>&nbsp;<span class="op" id="4226825">*</span><span class="ident" id="4226826">Element</span>&nbsp;<span class="op" id="4226834">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4226837">if</span>&nbsp;<span class="ident" id="4226840">p</span>&nbsp;<span class="op" id="4226842">:=</span>&nbsp;<span class="ident" id="4226845">e</span><span class="op" id="4226846">.</span><span class="ident" id="4226847">prev</span><span class="op" id="4226851">;</span>&nbsp;<span class="ident" id="4226853">e</span><span class="op" id="4226854">.</span><span class="ident" id="4226855">list</span>&nbsp;<span class="op" id="4226860">!=</span>&nbsp;<span class="ident" id="4226863">nil</span>&nbsp;<span class="op" id="4226867">&amp;&amp;</span>&nbsp;<span class="ident" id="4226870">p</span>&nbsp;<span class="op" id="4226872">!=</span>&nbsp;<span class="op" id="4226875">&amp;</span><span class="ident" id="4226876">e</span><span class="op" id="4226877">.</span><span class="ident" id="4226878">list</span><span class="op" id="4226882">.</span><span class="ident" id="4226883">root</span>&nbsp;<span class="op" id="4226888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4226892">return</span>&nbsp;<span class="ident" id="4226899">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4226902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4226905">return</span>&nbsp;<span class="ident" id="4226912">nil</span><br>
<span class="lineno"></span><span class="op" id="4226916">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4226919">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4226960">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4227018">type</span>&nbsp;<span class="ident" id="4227023">List</span>&nbsp;<span class="keyword" id="4227028">struct</span>&nbsp;<span class="op" id="4227035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4227038">root</span>&nbsp;<span class="ident" id="4227043">Element</span>&nbsp;<span class="comment" id="4227051">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4227124">len</span>&nbsp;&nbsp;<span class="builtintype" id="4227129">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4227137">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4227194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4227197">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4227235">func</span>&nbsp;<span class="op" id="4227240">(</span><span class="ident" id="4227241">l</span>&nbsp;<span class="op" id="4227243">*</span><span class="ident" id="4227244">List</span><span class="op" id="4227248">)</span>&nbsp;<span class="ident" id="4227250">Init</span><span class="op" id="4227254">(</span><span class="op" id="4227255">)</span>&nbsp;<span class="op" id="4227257">*</span><span class="ident" id="4227258">List</span>&nbsp;<span class="op" id="4227263">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4227266">l</span><span class="op" id="4227267">.</span><span class="ident" id="4227268">root</span><span class="op" id="4227272">.</span><span class="ident" id="4227273">next</span>&nbsp;<span class="op" id="4227278">=</span>&nbsp;<span class="op" id="4227280">&amp;</span><span class="ident" id="4227281">l</span><span class="op" id="4227282">.</span><span class="ident" id="4227283">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4227289">l</span><span class="op" id="4227290">.</span><span class="ident" id="4227291">root</span><span class="op" id="4227295">.</span><span class="ident" id="4227296">prev</span>&nbsp;<span class="op" id="4227301">=</span>&nbsp;<span class="op" id="4227303">&amp;</span><span class="ident" id="4227304">l</span><span class="op" id="4227305">.</span><span class="ident" id="4227306">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4227312">l</span><span class="op" id="4227313">.</span><span class="builtinfunc" id="4227314">len</span>&nbsp;<span class="op" id="4227318">=</span>&nbsp;<span class="num" id="4227320">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227323">return</span>&nbsp;<span class="ident" id="4227330">l</span><br>
<span class="lineno"></span><span class="op" id="4227332">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4227335">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4227371">func</span>&nbsp;<span class="ident" id="4227376">New</span><span class="op" id="4227379">(</span><span class="op" id="4227380">)</span>&nbsp;<span class="op" id="4227382">*</span><span class="ident" id="4227383">List</span>&nbsp;<span class="op" id="4227388">{</span>&nbsp;<span class="keyword" id="4227390">return</span>&nbsp;<span class="builtinfunc" id="4227397">new</span><span class="op" id="4227400">(</span><span class="ident" id="4227401">List</span><span class="op" id="4227405">)</span><span class="op" id="4227406">.</span><span class="ident" id="4227407">Init</span><span class="op" id="4227411">(</span><span class="op" id="4227412">)</span>&nbsp;<span class="op" id="4227414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4227417">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4227466">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4227493">func</span>&nbsp;<span class="op" id="4227498">(</span><span class="ident" id="4227499">l</span>&nbsp;<span class="op" id="4227501">*</span><span class="ident" id="4227502">List</span><span class="op" id="4227506">)</span>&nbsp;<span class="ident" id="4227508">Len</span><span class="op" id="4227511">(</span><span class="op" id="4227512">)</span>&nbsp;<span class="builtintype" id="4227514">int</span>&nbsp;<span class="op" id="4227518">{</span>&nbsp;<span class="keyword" id="4227520">return</span>&nbsp;<span class="ident" id="4227527">l</span><span class="op" id="4227528">.</span><span class="builtinfunc" id="4227529">len</span>&nbsp;<span class="op" id="4227533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4227536">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4227589">func</span>&nbsp;<span class="op" id="4227594">(</span><span class="ident" id="4227595">l</span>&nbsp;<span class="op" id="4227597">*</span><span class="ident" id="4227598">List</span><span class="op" id="4227602">)</span>&nbsp;<span class="ident" id="4227604">Front</span><span class="op" id="4227609">(</span><span class="op" id="4227610">)</span>&nbsp;<span class="op" id="4227612">*</span><span class="ident" id="4227613">Element</span>&nbsp;<span class="op" id="4227621">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227624">if</span>&nbsp;<span class="ident" id="4227627">l</span><span class="op" id="4227628">.</span><span class="builtinfunc" id="4227629">len</span>&nbsp;<span class="op" id="4227633">==</span>&nbsp;<span class="num" id="4227636">0</span>&nbsp;<span class="op" id="4227638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227642">return</span>&nbsp;<span class="ident" id="4227649">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4227654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227657">return</span>&nbsp;<span class="ident" id="4227664">l</span><span class="op" id="4227665">.</span><span class="ident" id="4227666">root</span><span class="op" id="4227670">.</span><span class="ident" id="4227671">next</span><br>
<span class="lineno"></span><span class="op" id="4227676">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4227679">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4227730">func</span>&nbsp;<span class="op" id="4227735">(</span><span class="ident" id="4227736">l</span>&nbsp;<span class="op" id="4227738">*</span><span class="ident" id="4227739">List</span><span class="op" id="4227743">)</span>&nbsp;<span class="ident" id="4227745">Back</span><span class="op" id="4227749">(</span><span class="op" id="4227750">)</span>&nbsp;<span class="op" id="4227752">*</span><span class="ident" id="4227753">Element</span>&nbsp;<span class="op" id="4227761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227764">if</span>&nbsp;<span class="ident" id="4227767">l</span><span class="op" id="4227768">.</span><span class="builtinfunc" id="4227769">len</span>&nbsp;<span class="op" id="4227773">==</span>&nbsp;<span class="num" id="4227776">0</span>&nbsp;<span class="op" id="4227778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227782">return</span>&nbsp;<span class="ident" id="4227789">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4227794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227797">return</span>&nbsp;<span class="ident" id="4227804">l</span><span class="op" id="4227805">.</span><span class="ident" id="4227806">root</span><span class="op" id="4227810">.</span><span class="ident" id="4227811">prev</span><br>
<span class="lineno"></span><span class="op" id="4227816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4227819">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4227869">func</span>&nbsp;<span class="op" id="4227874">(</span><span class="ident" id="4227875">l</span>&nbsp;<span class="op" id="4227877">*</span><span class="ident" id="4227878">List</span><span class="op" id="4227882">)</span>&nbsp;<span class="ident" id="4227884">lazyInit</span><span class="op" id="4227892">(</span><span class="op" id="4227893">)</span>&nbsp;<span class="op" id="4227895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4227898">if</span>&nbsp;<span class="ident" id="4227901">l</span><span class="op" id="4227902">.</span><span class="ident" id="4227903">root</span><span class="op" id="4227907">.</span><span class="ident" id="4227908">next</span>&nbsp;<span class="op" id="4227913">==</span>&nbsp;<span class="ident" id="4227916">nil</span>&nbsp;<span class="op" id="4227920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4227924">l</span><span class="op" id="4227925">.</span><span class="ident" id="4227926">Init</span><span class="op" id="4227930">(</span><span class="op" id="4227931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4227934">}</span><br>
<span class="lineno"></span><span class="op" id="4227936">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4227939">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4228002">func</span>&nbsp;<span class="op" id="4228007">(</span><span class="ident" id="4228008">l</span>&nbsp;<span class="op" id="4228010">*</span><span class="ident" id="4228011">List</span><span class="op" id="4228015">)</span>&nbsp;<span class="ident" id="4228017">insert</span><span class="op" id="4228023">(</span><span class="ident" id="4228024">e</span><span class="op" id="4228025">,</span>&nbsp;<span class="ident" id="4228027">at</span>&nbsp;<span class="op" id="4228030">*</span><span class="ident" id="4228031">Element</span><span class="op" id="4228038">)</span>&nbsp;<span class="op" id="4228040">*</span><span class="ident" id="4228041">Element</span>&nbsp;<span class="op" id="4228049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228052">n</span>&nbsp;<span class="op" id="4228054">:=</span>&nbsp;<span class="ident" id="4228057">at</span><span class="op" id="4228059">.</span><span class="ident" id="4228060">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228066">at</span><span class="op" id="4228068">.</span><span class="ident" id="4228069">next</span>&nbsp;<span class="op" id="4228074">=</span>&nbsp;<span class="ident" id="4228076">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228079">e</span><span class="op" id="4228080">.</span><span class="ident" id="4228081">prev</span>&nbsp;<span class="op" id="4228086">=</span>&nbsp;<span class="ident" id="4228088">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228092">e</span><span class="op" id="4228093">.</span><span class="ident" id="4228094">next</span>&nbsp;<span class="op" id="4228099">=</span>&nbsp;<span class="ident" id="4228101">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228104">n</span><span class="op" id="4228105">.</span><span class="ident" id="4228106">prev</span>&nbsp;<span class="op" id="4228111">=</span>&nbsp;<span class="ident" id="4228113">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228116">e</span><span class="op" id="4228117">.</span><span class="ident" id="4228118">list</span>&nbsp;<span class="op" id="4228123">=</span>&nbsp;<span class="ident" id="4228125">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228128">l</span><span class="op" id="4228129">.</span><span class="builtinfunc" id="4228130">len</span><span class="op" id="4228133">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4228137">return</span>&nbsp;<span class="ident" id="4228144">e</span><br>
<span class="lineno"></span><span class="op" id="4228146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4228149">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4228225">func</span>&nbsp;<span class="op" id="4228230">(</span><span class="ident" id="4228231">l</span>&nbsp;<span class="op" id="4228233">*</span><span class="ident" id="4228234">List</span><span class="op" id="4228238">)</span>&nbsp;<span class="ident" id="4228240">insertValue</span><span class="op" id="4228251">(</span><span class="ident" id="4228252">v</span>&nbsp;<span class="keyword" id="4228254">interface</span><span class="op" id="4228263">{</span><span class="op" id="4228264">}</span><span class="op" id="4228265">,</span>&nbsp;<span class="ident" id="4228267">at</span>&nbsp;<span class="op" id="4228270">*</span><span class="ident" id="4228271">Element</span><span class="op" id="4228278">)</span>&nbsp;<span class="op" id="4228280">*</span><span class="ident" id="4228281">Element</span>&nbsp;<span class="op" id="4228289">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4228292">return</span>&nbsp;<span class="ident" id="4228299">l</span><span class="op" id="4228300">.</span><span class="ident" id="4228301">insert</span><span class="op" id="4228307">(</span><span class="op" id="4228308">&amp;</span><span class="ident" id="4228309">Element</span><span class="op" id="4228316">{</span><span class="ident" id="4228317">Value</span><span class="op" id="4228322">:</span>&nbsp;<span class="ident" id="4228324">v</span><span class="op" id="4228325">}</span><span class="op" id="4228326">,</span>&nbsp;<span class="ident" id="4228328">at</span><span class="op" id="4228330">)</span><br>
<span class="lineno"></span><span class="op" id="4228332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4228335">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4228403">func</span>&nbsp;<span class="op" id="4228408">(</span><span class="ident" id="4228409">l</span>&nbsp;<span class="op" id="4228411">*</span><span class="ident" id="4228412">List</span><span class="op" id="4228416">)</span>&nbsp;<span class="ident" id="4228418">remove</span><span class="op" id="4228424">(</span><span class="ident" id="4228425">e</span>&nbsp;<span class="op" id="4228427">*</span><span class="ident" id="4228428">Element</span><span class="op" id="4228435">)</span>&nbsp;<span class="op" id="4228437">*</span><span class="ident" id="4228438">Element</span>&nbsp;<span class="op" id="4228446">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228449">e</span><span class="op" id="4228450">.</span><span class="ident" id="4228451">prev</span><span class="op" id="4228455">.</span><span class="ident" id="4228456">next</span>&nbsp;<span class="op" id="4228461">=</span>&nbsp;<span class="ident" id="4228463">e</span><span class="op" id="4228464">.</span><span class="ident" id="4228465">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228471">e</span><span class="op" id="4228472">.</span><span class="ident" id="4228473">next</span><span class="op" id="4228477">.</span><span class="ident" id="4228478">prev</span>&nbsp;<span class="op" id="4228483">=</span>&nbsp;<span class="ident" id="4228485">e</span><span class="op" id="4228486">.</span><span class="ident" id="4228487">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228493">e</span><span class="op" id="4228494">.</span><span class="ident" id="4228495">next</span>&nbsp;<span class="op" id="4228500">=</span>&nbsp;<span class="ident" id="4228502">nil</span>&nbsp;<span class="comment" id="4228506">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228529">e</span><span class="op" id="4228530">.</span><span class="ident" id="4228531">prev</span>&nbsp;<span class="op" id="4228536">=</span>&nbsp;<span class="ident" id="4228538">nil</span>&nbsp;<span class="comment" id="4228542">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228565">e</span><span class="op" id="4228566">.</span><span class="ident" id="4228567">list</span>&nbsp;<span class="op" id="4228572">=</span>&nbsp;<span class="ident" id="4228574">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228579">l</span><span class="op" id="4228580">.</span><span class="builtinfunc" id="4228581">len</span><span class="op" id="4228584">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4228588">return</span>&nbsp;<span class="ident" id="4228595">e</span><br>
<span class="lineno"></span><span class="op" id="4228597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4228600">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4228657">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4228698">func</span>&nbsp;<span class="op" id="4228703">(</span><span class="ident" id="4228704">l</span>&nbsp;<span class="op" id="4228706">*</span><span class="ident" id="4228707">List</span><span class="op" id="4228711">)</span>&nbsp;<span class="ident" id="4228713">Remove</span><span class="op" id="4228719">(</span><span class="ident" id="4228720">e</span>&nbsp;<span class="op" id="4228722">*</span><span class="ident" id="4228723">Element</span><span class="op" id="4228730">)</span>&nbsp;<span class="keyword" id="4228732">interface</span><span class="op" id="4228741">{</span><span class="op" id="4228742">}</span>&nbsp;<span class="op" id="4228744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4228747">if</span>&nbsp;<span class="ident" id="4228750">e</span><span class="op" id="4228751">.</span><span class="ident" id="4228752">list</span>&nbsp;<span class="op" id="4228757">==</span>&nbsp;<span class="ident" id="4228760">l</span>&nbsp;<span class="op" id="4228762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4228766">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4228836">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4228904">l</span><span class="op" id="4228905">.</span><span class="ident" id="4228906">remove</span><span class="op" id="4228912">(</span><span class="ident" id="4228913">e</span><span class="op" id="4228914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4228917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4228920">return</span>&nbsp;<span class="ident" id="4228927">e</span><span class="op" id="4228928">.</span><span class="ident" id="4228929">Value</span><br>
<span class="lineno"></span><span class="op" id="4228935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4228938">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4229026">func</span>&nbsp;<span class="op" id="4229031">(</span><span class="ident" id="4229032">l</span>&nbsp;<span class="op" id="4229034">*</span><span class="ident" id="4229035">List</span><span class="op" id="4229039">)</span>&nbsp;<span class="ident" id="4229041">PushFront</span><span class="op" id="4229050">(</span><span class="ident" id="4229051">v</span>&nbsp;<span class="keyword" id="4229053">interface</span><span class="op" id="4229062">{</span><span class="op" id="4229063">}</span><span class="op" id="4229064">)</span>&nbsp;<span class="op" id="4229066">*</span><span class="ident" id="4229067">Element</span>&nbsp;<span class="op" id="4229075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4229078">l</span><span class="op" id="4229079">.</span><span class="ident" id="4229080">lazyInit</span><span class="op" id="4229088">(</span><span class="op" id="4229089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229092">return</span>&nbsp;<span class="ident" id="4229099">l</span><span class="op" id="4229100">.</span><span class="ident" id="4229101">insertValue</span><span class="op" id="4229112">(</span><span class="ident" id="4229113">v</span><span class="op" id="4229114">,</span>&nbsp;<span class="op" id="4229116">&amp;</span><span class="ident" id="4229117">l</span><span class="op" id="4229118">.</span><span class="ident" id="4229119">root</span><span class="op" id="4229123">)</span><br>
<span class="lineno"></span><span class="op" id="4229125">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4229128">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4229214">func</span>&nbsp;<span class="op" id="4229219">(</span><span class="ident" id="4229220">l</span>&nbsp;<span class="op" id="4229222">*</span><span class="ident" id="4229223">List</span><span class="op" id="4229227">)</span>&nbsp;<span class="ident" id="4229229">PushBack</span><span class="op" id="4229237">(</span><span class="ident" id="4229238">v</span>&nbsp;<span class="keyword" id="4229240">interface</span><span class="op" id="4229249">{</span><span class="op" id="4229250">}</span><span class="op" id="4229251">)</span>&nbsp;<span class="op" id="4229253">*</span><span class="ident" id="4229254">Element</span>&nbsp;<span class="op" id="4229262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4229265">l</span><span class="op" id="4229266">.</span><span class="ident" id="4229267">lazyInit</span><span class="op" id="4229275">(</span><span class="op" id="4229276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229279">return</span>&nbsp;<span class="ident" id="4229286">l</span><span class="op" id="4229287">.</span><span class="ident" id="4229288">insertValue</span><span class="op" id="4229299">(</span><span class="ident" id="4229300">v</span><span class="op" id="4229301">,</span>&nbsp;<span class="ident" id="4229303">l</span><span class="op" id="4229304">.</span><span class="ident" id="4229305">root</span><span class="op" id="4229309">.</span><span class="ident" id="4229310">prev</span><span class="op" id="4229314">)</span><br>
<span class="lineno">140</span><span class="op" id="4229316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4229319">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4229411">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4229472">func</span>&nbsp;<span class="op" id="4229477">(</span><span class="ident" id="4229478">l</span>&nbsp;<span class="op" id="4229480">*</span><span class="ident" id="4229481">List</span><span class="op" id="4229485">)</span>&nbsp;<span class="ident" id="4229487">InsertBefore</span><span class="op" id="4229499">(</span><span class="ident" id="4229500">v</span>&nbsp;<span class="keyword" id="4229502">interface</span><span class="op" id="4229511">{</span><span class="op" id="4229512">}</span><span class="op" id="4229513">,</span>&nbsp;<span class="ident" id="4229515">mark</span>&nbsp;<span class="op" id="4229520">*</span><span class="ident" id="4229521">Element</span><span class="op" id="4229528">)</span>&nbsp;<span class="op" id="4229530">*</span><span class="ident" id="4229531">Element</span>&nbsp;<span class="op" id="4229539">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229542">if</span>&nbsp;<span class="ident" id="4229545">mark</span><span class="op" id="4229549">.</span><span class="ident" id="4229550">list</span>&nbsp;<span class="op" id="4229555">!=</span>&nbsp;<span class="ident" id="4229558">l</span>&nbsp;<span class="op" id="4229560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229564">return</span>&nbsp;<span class="ident" id="4229571">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4229576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4229579">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229636">return</span>&nbsp;<span class="ident" id="4229643">l</span><span class="op" id="4229644">.</span><span class="ident" id="4229645">insertValue</span><span class="op" id="4229656">(</span><span class="ident" id="4229657">v</span><span class="op" id="4229658">,</span>&nbsp;<span class="ident" id="4229660">mark</span><span class="op" id="4229664">.</span><span class="ident" id="4229665">prev</span><span class="op" id="4229669">)</span><br>
<span class="lineno">150</span><span class="op" id="4229671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4229674">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4229764">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4229825">func</span>&nbsp;<span class="op" id="4229830">(</span><span class="ident" id="4229831">l</span>&nbsp;<span class="op" id="4229833">*</span><span class="ident" id="4229834">List</span><span class="op" id="4229838">)</span>&nbsp;<span class="ident" id="4229840">InsertAfter</span><span class="op" id="4229851">(</span><span class="ident" id="4229852">v</span>&nbsp;<span class="keyword" id="4229854">interface</span><span class="op" id="4229863">{</span><span class="op" id="4229864">}</span><span class="op" id="4229865">,</span>&nbsp;<span class="ident" id="4229867">mark</span>&nbsp;<span class="op" id="4229872">*</span><span class="ident" id="4229873">Element</span><span class="op" id="4229880">)</span>&nbsp;<span class="op" id="4229882">*</span><span class="ident" id="4229883">Element</span>&nbsp;<span class="op" id="4229891">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229894">if</span>&nbsp;<span class="ident" id="4229897">mark</span><span class="op" id="4229901">.</span><span class="ident" id="4229902">list</span>&nbsp;<span class="op" id="4229907">!=</span>&nbsp;<span class="ident" id="4229910">l</span>&nbsp;<span class="op" id="4229912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229916">return</span>&nbsp;<span class="ident" id="4229923">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4229928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4229931">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4229988">return</span>&nbsp;<span class="ident" id="4229995">l</span><span class="op" id="4229996">.</span><span class="ident" id="4229997">insertValue</span><span class="op" id="4230008">(</span><span class="ident" id="4230009">v</span><span class="op" id="4230010">,</span>&nbsp;<span class="ident" id="4230012">mark</span><span class="op" id="4230016">)</span><br>
<span class="lineno">160</span><span class="op" id="4230018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4230021">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4230076">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4230134">func</span>&nbsp;<span class="op" id="4230139">(</span><span class="ident" id="4230140">l</span>&nbsp;<span class="op" id="4230142">*</span><span class="ident" id="4230143">List</span><span class="op" id="4230147">)</span>&nbsp;<span class="ident" id="4230149">MoveToFront</span><span class="op" id="4230160">(</span><span class="ident" id="4230161">e</span>&nbsp;<span class="op" id="4230163">*</span><span class="ident" id="4230164">Element</span><span class="op" id="4230171">)</span>&nbsp;<span class="op" id="4230173">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4230176">if</span>&nbsp;<span class="ident" id="4230179">e</span><span class="op" id="4230180">.</span><span class="ident" id="4230181">list</span>&nbsp;<span class="op" id="4230186">!=</span>&nbsp;<span class="ident" id="4230189">l</span>&nbsp;<span class="op" id="4230191">||</span>&nbsp;<span class="ident" id="4230194">l</span><span class="op" id="4230195">.</span><span class="ident" id="4230196">root</span><span class="op" id="4230200">.</span><span class="ident" id="4230201">next</span>&nbsp;<span class="op" id="4230206">==</span>&nbsp;<span class="ident" id="4230209">e</span>&nbsp;<span class="op" id="4230211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4230215">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4230223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4230226">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4230283">l</span><span class="op" id="4230284">.</span><span class="ident" id="4230285">insert</span><span class="op" id="4230291">(</span><span class="ident" id="4230292">l</span><span class="op" id="4230293">.</span><span class="ident" id="4230294">remove</span><span class="op" id="4230300">(</span><span class="ident" id="4230301">e</span><span class="op" id="4230302">)</span><span class="op" id="4230303">,</span>&nbsp;<span class="op" id="4230305">&amp;</span><span class="ident" id="4230306">l</span><span class="op" id="4230307">.</span><span class="ident" id="4230308">root</span><span class="op" id="4230312">)</span><br>
<span class="lineno">170</span><span class="op" id="4230314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4230317">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4230370">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4230428">func</span>&nbsp;<span class="op" id="4230433">(</span><span class="ident" id="4230434">l</span>&nbsp;<span class="op" id="4230436">*</span><span class="ident" id="4230437">List</span><span class="op" id="4230441">)</span>&nbsp;<span class="ident" id="4230443">MoveToBack</span><span class="op" id="4230453">(</span><span class="ident" id="4230454">e</span>&nbsp;<span class="op" id="4230456">*</span><span class="ident" id="4230457">Element</span><span class="op" id="4230464">)</span>&nbsp;<span class="op" id="4230466">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4230469">if</span>&nbsp;<span class="ident" id="4230472">e</span><span class="op" id="4230473">.</span><span class="ident" id="4230474">list</span>&nbsp;<span class="op" id="4230479">!=</span>&nbsp;<span class="ident" id="4230482">l</span>&nbsp;<span class="op" id="4230484">||</span>&nbsp;<span class="ident" id="4230487">l</span><span class="op" id="4230488">.</span><span class="ident" id="4230489">root</span><span class="op" id="4230493">.</span><span class="ident" id="4230494">prev</span>&nbsp;<span class="op" id="4230499">==</span>&nbsp;<span class="ident" id="4230502">e</span>&nbsp;<span class="op" id="4230504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4230508">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4230516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4230519">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4230576">l</span><span class="op" id="4230577">.</span><span class="ident" id="4230578">insert</span><span class="op" id="4230584">(</span><span class="ident" id="4230585">l</span><span class="op" id="4230586">.</span><span class="ident" id="4230587">remove</span><span class="op" id="4230593">(</span><span class="ident" id="4230594">e</span><span class="op" id="4230595">)</span><span class="op" id="4230596">,</span>&nbsp;<span class="ident" id="4230598">l</span><span class="op" id="4230599">.</span><span class="ident" id="4230600">root</span><span class="op" id="4230604">.</span><span class="ident" id="4230605">prev</span><span class="op" id="4230609">)</span><br>
<span class="lineno">180</span><span class="op" id="4230611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4230614">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4230677">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4230757">func</span>&nbsp;<span class="op" id="4230762">(</span><span class="ident" id="4230763">l</span>&nbsp;<span class="op" id="4230765">*</span><span class="ident" id="4230766">List</span><span class="op" id="4230770">)</span>&nbsp;<span class="ident" id="4230772">MoveBefore</span><span class="op" id="4230782">(</span><span class="ident" id="4230783">e</span><span class="op" id="4230784">,</span>&nbsp;<span class="ident" id="4230786">mark</span>&nbsp;<span class="op" id="4230791">*</span><span class="ident" id="4230792">Element</span><span class="op" id="4230799">)</span>&nbsp;<span class="op" id="4230801">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4230804">if</span>&nbsp;<span class="ident" id="4230807">e</span><span class="op" id="4230808">.</span><span class="ident" id="4230809">list</span>&nbsp;<span class="op" id="4230814">!=</span>&nbsp;<span class="ident" id="4230817">l</span>&nbsp;<span class="op" id="4230819">||</span>&nbsp;<span class="ident" id="4230822">e</span>&nbsp;<span class="op" id="4230824">==</span>&nbsp;<span class="ident" id="4230827">mark</span>&nbsp;<span class="op" id="4230832">||</span>&nbsp;<span class="ident" id="4230835">mark</span><span class="op" id="4230839">.</span><span class="ident" id="4230840">list</span>&nbsp;<span class="op" id="4230845">!=</span>&nbsp;<span class="ident" id="4230848">l</span>&nbsp;<span class="op" id="4230850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4230854">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4230862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4230865">l</span><span class="op" id="4230866">.</span><span class="ident" id="4230867">insert</span><span class="op" id="4230873">(</span><span class="ident" id="4230874">l</span><span class="op" id="4230875">.</span><span class="ident" id="4230876">remove</span><span class="op" id="4230882">(</span><span class="ident" id="4230883">e</span><span class="op" id="4230884">)</span><span class="op" id="4230885">,</span>&nbsp;<span class="ident" id="4230887">mark</span><span class="op" id="4230891">.</span><span class="ident" id="4230892">prev</span><span class="op" id="4230896">)</span><br>
<span class="lineno"></span><span class="op" id="4230898">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4230901">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4230962">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4231042">func</span>&nbsp;<span class="op" id="4231047">(</span><span class="ident" id="4231048">l</span>&nbsp;<span class="op" id="4231050">*</span><span class="ident" id="4231051">List</span><span class="op" id="4231055">)</span>&nbsp;<span class="ident" id="4231057">MoveAfter</span><span class="op" id="4231066">(</span><span class="ident" id="4231067">e</span><span class="op" id="4231068">,</span>&nbsp;<span class="ident" id="4231070">mark</span>&nbsp;<span class="op" id="4231075">*</span><span class="ident" id="4231076">Element</span><span class="op" id="4231083">)</span>&nbsp;<span class="op" id="4231085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4231088">if</span>&nbsp;<span class="ident" id="4231091">e</span><span class="op" id="4231092">.</span><span class="ident" id="4231093">list</span>&nbsp;<span class="op" id="4231098">!=</span>&nbsp;<span class="ident" id="4231101">l</span>&nbsp;<span class="op" id="4231103">||</span>&nbsp;<span class="ident" id="4231106">e</span>&nbsp;<span class="op" id="4231108">==</span>&nbsp;<span class="ident" id="4231111">mark</span>&nbsp;<span class="op" id="4231116">||</span>&nbsp;<span class="ident" id="4231119">mark</span><span class="op" id="4231123">.</span><span class="ident" id="4231124">list</span>&nbsp;<span class="op" id="4231129">!=</span>&nbsp;<span class="ident" id="4231132">l</span>&nbsp;<span class="op" id="4231134">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4231138">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4231146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4231149">l</span><span class="op" id="4231150">.</span><span class="ident" id="4231151">insert</span><span class="op" id="4231157">(</span><span class="ident" id="4231158">l</span><span class="op" id="4231159">.</span><span class="ident" id="4231160">remove</span><span class="op" id="4231166">(</span><span class="ident" id="4231167">e</span><span class="op" id="4231168">)</span><span class="op" id="4231169">,</span>&nbsp;<span class="ident" id="4231171">mark</span><span class="op" id="4231175">)</span><br>
<span class="lineno"></span><span class="op" id="4231177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4231180">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4231251">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4231293">func</span>&nbsp;<span class="op" id="4231298">(</span><span class="ident" id="4231299">l</span>&nbsp;<span class="op" id="4231301">*</span><span class="ident" id="4231302">List</span><span class="op" id="4231306">)</span>&nbsp;<span class="ident" id="4231308">PushBackList</span><span class="op" id="4231320">(</span><span class="ident" id="4231321">other</span>&nbsp;<span class="op" id="4231327">*</span><span class="ident" id="4231328">List</span><span class="op" id="4231332">)</span>&nbsp;<span class="op" id="4231334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4231337">l</span><span class="op" id="4231338">.</span><span class="ident" id="4231339">lazyInit</span><span class="op" id="4231347">(</span><span class="op" id="4231348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4231351">for</span>&nbsp;<span class="ident" id="4231355">i</span><span class="op" id="4231356">,</span>&nbsp;<span class="ident" id="4231358">e</span>&nbsp;<span class="op" id="4231360">:=</span>&nbsp;<span class="ident" id="4231363">other</span><span class="op" id="4231368">.</span><span class="ident" id="4231369">Len</span><span class="op" id="4231372">(</span><span class="op" id="4231373">)</span><span class="op" id="4231374">,</span>&nbsp;<span class="ident" id="4231376">other</span><span class="op" id="4231381">.</span><span class="ident" id="4231382">Front</span><span class="op" id="4231387">(</span><span class="op" id="4231388">)</span><span class="op" id="4231389">;</span>&nbsp;<span class="ident" id="4231391">i</span>&nbsp;<span class="op" id="4231393">&gt;</span>&nbsp;<span class="num" id="4231395">0</span><span class="op" id="4231396">;</span>&nbsp;<span class="ident" id="4231398">i</span><span class="op" id="4231399">,</span>&nbsp;<span class="ident" id="4231401">e</span>&nbsp;<span class="op" id="4231403">=</span>&nbsp;<span class="ident" id="4231405">i</span><span class="op" id="4231406">-</span><span class="num" id="4231407">1</span><span class="op" id="4231408">,</span>&nbsp;<span class="ident" id="4231410">e</span><span class="op" id="4231411">.</span><span class="ident" id="4231412">Next</span><span class="op" id="4231416">(</span><span class="op" id="4231417">)</span>&nbsp;<span class="op" id="4231419">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4231423">l</span><span class="op" id="4231424">.</span><span class="ident" id="4231425">insertValue</span><span class="op" id="4231436">(</span><span class="ident" id="4231437">e</span><span class="op" id="4231438">.</span><span class="ident" id="4231439">Value</span><span class="op" id="4231444">,</span>&nbsp;<span class="ident" id="4231446">l</span><span class="op" id="4231447">.</span><span class="ident" id="4231448">root</span><span class="op" id="4231452">.</span><span class="ident" id="4231453">prev</span><span class="op" id="4231457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4231460">}</span><br>
<span class="lineno"></span><span class="op" id="4231462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4231465">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4231538">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4231580">func</span>&nbsp;<span class="op" id="4231585">(</span><span class="ident" id="4231586">l</span>&nbsp;<span class="op" id="4231588">*</span><span class="ident" id="4231589">List</span><span class="op" id="4231593">)</span>&nbsp;<span class="ident" id="4231595">PushFrontList</span><span class="op" id="4231608">(</span><span class="ident" id="4231609">other</span>&nbsp;<span class="op" id="4231615">*</span><span class="ident" id="4231616">List</span><span class="op" id="4231620">)</span>&nbsp;<span class="op" id="4231622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4231625">l</span><span class="op" id="4231626">.</span><span class="ident" id="4231627">lazyInit</span><span class="op" id="4231635">(</span><span class="op" id="4231636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4231639">for</span>&nbsp;<span class="ident" id="4231643">i</span><span class="op" id="4231644">,</span>&nbsp;<span class="ident" id="4231646">e</span>&nbsp;<span class="op" id="4231648">:=</span>&nbsp;<span class="ident" id="4231651">other</span><span class="op" id="4231656">.</span><span class="ident" id="4231657">Len</span><span class="op" id="4231660">(</span><span class="op" id="4231661">)</span><span class="op" id="4231662">,</span>&nbsp;<span class="ident" id="4231664">other</span><span class="op" id="4231669">.</span><span class="ident" id="4231670">Back</span><span class="op" id="4231674">(</span><span class="op" id="4231675">)</span><span class="op" id="4231676">;</span>&nbsp;<span class="ident" id="4231678">i</span>&nbsp;<span class="op" id="4231680">&gt;</span>&nbsp;<span class="num" id="4231682">0</span><span class="op" id="4231683">;</span>&nbsp;<span class="ident" id="4231685">i</span><span class="op" id="4231686">,</span>&nbsp;<span class="ident" id="4231688">e</span>&nbsp;<span class="op" id="4231690">=</span>&nbsp;<span class="ident" id="4231692">i</span><span class="op" id="4231693">-</span><span class="num" id="4231694">1</span><span class="op" id="4231695">,</span>&nbsp;<span class="ident" id="4231697">e</span><span class="op" id="4231698">.</span><span class="ident" id="4231699">Prev</span><span class="op" id="4231703">(</span><span class="op" id="4231704">)</span>&nbsp;<span class="op" id="4231706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4231710">l</span><span class="op" id="4231711">.</span><span class="ident" id="4231712">insertValue</span><span class="op" id="4231723">(</span><span class="ident" id="4231724">e</span><span class="op" id="4231725">.</span><span class="ident" id="4231726">Value</span><span class="op" id="4231731">,</span>&nbsp;<span class="op" id="4231733">&amp;</span><span class="ident" id="4231734">l</span><span class="op" id="4231735">.</span><span class="ident" id="4231736">root</span><span class="op" id="4231740">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4231743">}</span><br>
<span class="lineno"></span><span class="op" id="4231745">}</span>
</div>
</body>
</html>
