<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7448295">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7448350">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7448404">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7448455">package</span>&nbsp;<span class="ident" id="7448463">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7448473">import</span>&nbsp;<span class="op" id="7448480">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7448483">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7448492">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7448500">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7448511">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7448521">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7448524">func</span>&nbsp;<span class="ident" id="7448529">TestNextJsCtx</span><span class="op" id="7448542">(</span><span class="ident" id="7448543">t</span>&nbsp;<span class="op" id="7448545">*</span><span class="ident" id="7448546">testing</span><span class="op" id="7448553">.</span><span class="ident" id="7448554">T</span><span class="op" id="7448555">)</span>&nbsp;<span class="op" id="7448557">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448560">tests</span>&nbsp;<span class="op" id="7448566">:=</span>&nbsp;<span class="op" id="7448569">[</span><span class="op" id="7448570">]</span><span class="keyword" id="7448571">struct</span>&nbsp;<span class="op" id="7448578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448582">jsCtx</span>&nbsp;<span class="ident" id="7448588">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7448596">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7448602">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448610">}</span><span class="op" id="7448611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448615">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448659">{</span><span class="ident" id="7448660">jsCtxRegexp</span><span class="op" id="7448671">,</span>&nbsp;<span class="string" id="7448673">&#34;;&#34;</span><span class="op" id="7448676">}</span><span class="op" id="7448677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448681">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448708">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448761">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448824">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448887">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448910">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7448960">{</span><span class="ident" id="7448961">jsCtxRegexp</span><span class="op" id="7448972">,</span>&nbsp;<span class="string" id="7448974">&#34;}&#34;</span><span class="op" id="7448977">}</span><span class="op" id="7448978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7448982">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449048">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449070">{</span><span class="ident" id="7449071">jsCtxDivOp</span><span class="op" id="7449081">,</span>&nbsp;<span class="string" id="7449083">&#34;)&#34;</span><span class="op" id="7449086">}</span><span class="op" id="7449087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449091">{</span><span class="ident" id="7449092">jsCtxDivOp</span><span class="op" id="7449102">,</span>&nbsp;<span class="string" id="7449104">&#34;]&#34;</span><span class="op" id="7449107">}</span><span class="op" id="7449108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449112">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449176">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449209">{</span><span class="ident" id="7449210">jsCtxRegexp</span><span class="op" id="7449221">,</span>&nbsp;<span class="string" id="7449223">&#34;(&#34;</span><span class="op" id="7449226">}</span><span class="op" id="7449227">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449231">{</span><span class="ident" id="7449232">jsCtxRegexp</span><span class="op" id="7449243">,</span>&nbsp;<span class="string" id="7449245">&#34;[&#34;</span><span class="op" id="7449248">}</span><span class="op" id="7449249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449253">{</span><span class="ident" id="7449254">jsCtxRegexp</span><span class="op" id="7449265">,</span>&nbsp;<span class="string" id="7449267">&#34;{&#34;</span><span class="op" id="7449270">}</span><span class="op" id="7449271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449275">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449339">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449373">{</span><span class="ident" id="7449374">jsCtxRegexp</span><span class="op" id="7449385">,</span>&nbsp;<span class="string" id="7449387">&#34;=&#34;</span><span class="op" id="7449390">}</span><span class="op" id="7449391">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449395">{</span><span class="ident" id="7449396">jsCtxRegexp</span><span class="op" id="7449407">,</span>&nbsp;<span class="string" id="7449409">&#34;+=&#34;</span><span class="op" id="7449413">}</span><span class="op" id="7449414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449418">{</span><span class="ident" id="7449419">jsCtxRegexp</span><span class="op" id="7449430">,</span>&nbsp;<span class="string" id="7449432">&#34;*=&#34;</span><span class="op" id="7449436">}</span><span class="op" id="7449437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449441">{</span><span class="ident" id="7449442">jsCtxRegexp</span><span class="op" id="7449453">,</span>&nbsp;<span class="string" id="7449455">&#34;*&#34;</span><span class="op" id="7449458">}</span><span class="op" id="7449459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449463">{</span><span class="ident" id="7449464">jsCtxRegexp</span><span class="op" id="7449475">,</span>&nbsp;<span class="string" id="7449477">&#34;!&#34;</span><span class="op" id="7449480">}</span><span class="op" id="7449481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449485">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449549">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449562">{</span><span class="ident" id="7449563">jsCtxRegexp</span><span class="op" id="7449574">,</span>&nbsp;<span class="string" id="7449576">&#34;+&#34;</span><span class="op" id="7449579">}</span><span class="op" id="7449580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449584">{</span><span class="ident" id="7449585">jsCtxRegexp</span><span class="op" id="7449596">,</span>&nbsp;<span class="string" id="7449598">&#34;-&#34;</span><span class="op" id="7449601">}</span><span class="op" id="7449602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449606">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449652">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449714">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449778">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449827">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449891">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449904">{</span><span class="ident" id="7449905">jsCtxDivOp</span><span class="op" id="7449915">,</span>&nbsp;<span class="string" id="7449917">&#34;--&#34;</span><span class="op" id="7449921">}</span><span class="op" id="7449922">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449926">{</span><span class="ident" id="7449927">jsCtxDivOp</span><span class="op" id="7449937">,</span>&nbsp;<span class="string" id="7449939">&#34;++&#34;</span><span class="op" id="7449943">}</span><span class="op" id="7449944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7449948">{</span><span class="ident" id="7449949">jsCtxDivOp</span><span class="op" id="7449959">,</span>&nbsp;<span class="string" id="7449961">&#34;x--&#34;</span><span class="op" id="7449966">}</span><span class="op" id="7449967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7449971">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450034">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450054">{</span><span class="ident" id="7450055">jsCtxRegexp</span><span class="op" id="7450066">,</span>&nbsp;<span class="string" id="7450068">&#34;x---&#34;</span><span class="op" id="7450074">}</span><span class="op" id="7450075">,</span>&nbsp;<span class="comment" id="7450077">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450105">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450171">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450238">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450257">{</span><span class="ident" id="7450258">jsCtxRegexp</span><span class="op" id="7450269">,</span>&nbsp;<span class="string" id="7450271">&#34;return&#34;</span><span class="op" id="7450279">}</span><span class="op" id="7450280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450284">{</span><span class="ident" id="7450285">jsCtxRegexp</span><span class="op" id="7450296">,</span>&nbsp;<span class="string" id="7450298">&#34;return&nbsp;&#34;</span><span class="op" id="7450307">}</span><span class="op" id="7450308">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450312">{</span><span class="ident" id="7450313">jsCtxRegexp</span><span class="op" id="7450324">,</span>&nbsp;<span class="string" id="7450326">&#34;return\t&#34;</span><span class="op" id="7450336">}</span><span class="op" id="7450337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450341">{</span><span class="ident" id="7450342">jsCtxRegexp</span><span class="op" id="7450353">,</span>&nbsp;<span class="string" id="7450355">&#34;return\n&#34;</span><span class="op" id="7450365">}</span><span class="op" id="7450366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450370">{</span><span class="ident" id="7450371">jsCtxRegexp</span><span class="op" id="7450382">,</span>&nbsp;<span class="string" id="7450384">&#34;return\u2028&#34;</span><span class="op" id="7450398">}</span><span class="op" id="7450399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450403">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450469">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450531">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450597">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450662">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450728">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450739">{</span><span class="ident" id="7450740">jsCtxDivOp</span><span class="op" id="7450750">,</span>&nbsp;<span class="string" id="7450752">&#34;x&#34;</span><span class="op" id="7450755">}</span><span class="op" id="7450756">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450760">{</span><span class="ident" id="7450761">jsCtxDivOp</span><span class="op" id="7450771">,</span>&nbsp;<span class="string" id="7450773">&#34;x&nbsp;&#34;</span><span class="op" id="7450777">}</span><span class="op" id="7450778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450782">{</span><span class="ident" id="7450783">jsCtxDivOp</span><span class="op" id="7450793">,</span>&nbsp;<span class="string" id="7450795">&#34;x\t&#34;</span><span class="op" id="7450800">}</span><span class="op" id="7450801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450805">{</span><span class="ident" id="7450806">jsCtxDivOp</span><span class="op" id="7450816">,</span>&nbsp;<span class="string" id="7450818">&#34;x\n&#34;</span><span class="op" id="7450823">}</span><span class="op" id="7450824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450828">{</span><span class="ident" id="7450829">jsCtxDivOp</span><span class="op" id="7450839">,</span>&nbsp;<span class="string" id="7450841">&#34;x\u2028&#34;</span><span class="op" id="7450850">}</span><span class="op" id="7450851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450855">{</span><span class="ident" id="7450856">jsCtxDivOp</span><span class="op" id="7450866">,</span>&nbsp;<span class="string" id="7450868">&#34;preturn&#34;</span><span class="op" id="7450877">}</span><span class="op" id="7450878">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450882">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450912">{</span><span class="ident" id="7450913">jsCtxDivOp</span><span class="op" id="7450923">,</span>&nbsp;<span class="string" id="7450925">&#34;0&#34;</span><span class="op" id="7450928">}</span><span class="op" id="7450929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7450933">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7450988">{</span><span class="ident" id="7450989">jsCtxDivOp</span><span class="op" id="7450999">,</span>&nbsp;<span class="string" id="7451001">&#34;0.&#34;</span><span class="op" id="7451005">}</span><span class="op" id="7451006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451009">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7451013">for</span>&nbsp;<span class="ident" id="7451017">_</span><span class="op" id="7451018">,</span>&nbsp;<span class="ident" id="7451020">test</span>&nbsp;<span class="op" id="7451025">:=</span>&nbsp;<span class="keyword" id="7451028">range</span>&nbsp;<span class="ident" id="7451034">tests</span>&nbsp;<span class="op" id="7451040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7451044">if</span>&nbsp;<span class="ident" id="7451047">nextJSCtx</span><span class="op" id="7451056">(</span><span class="op" id="7451057">[</span><span class="op" id="7451058">]</span><span class="builtintype" id="7451059">byte</span><span class="op" id="7451063">(</span><span class="ident" id="7451064">test</span><span class="op" id="7451068">.</span><span class="ident" id="7451069">s</span><span class="op" id="7451070">)</span><span class="op" id="7451071">,</span>&nbsp;<span class="ident" id="7451073">jsCtxRegexp</span><span class="op" id="7451084">)</span>&nbsp;<span class="op" id="7451086">!=</span>&nbsp;<span class="ident" id="7451089">test</span><span class="op" id="7451093">.</span><span class="ident" id="7451094">jsCtx</span>&nbsp;<span class="op" id="7451100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451105">t</span><span class="op" id="7451106">.</span><span class="ident" id="7451107">Errorf</span><span class="op" id="7451113">(</span><span class="string" id="7451114">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7451130">,</span>&nbsp;<span class="ident" id="7451132">test</span><span class="op" id="7451136">.</span><span class="ident" id="7451137">jsCtx</span><span class="op" id="7451142">,</span>&nbsp;<span class="ident" id="7451144">test</span><span class="op" id="7451148">.</span><span class="ident" id="7451149">s</span><span class="op" id="7451150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451154">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7451158">if</span>&nbsp;<span class="ident" id="7451161">nextJSCtx</span><span class="op" id="7451170">(</span><span class="op" id="7451171">[</span><span class="op" id="7451172">]</span><span class="builtintype" id="7451173">byte</span><span class="op" id="7451177">(</span><span class="ident" id="7451178">test</span><span class="op" id="7451182">.</span><span class="ident" id="7451183">s</span><span class="op" id="7451184">)</span><span class="op" id="7451185">,</span>&nbsp;<span class="ident" id="7451187">jsCtxDivOp</span><span class="op" id="7451197">)</span>&nbsp;<span class="op" id="7451199">!=</span>&nbsp;<span class="ident" id="7451202">test</span><span class="op" id="7451206">.</span><span class="ident" id="7451207">jsCtx</span>&nbsp;<span class="op" id="7451213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451218">t</span><span class="op" id="7451219">.</span><span class="ident" id="7451220">Errorf</span><span class="op" id="7451226">(</span><span class="string" id="7451227">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7451243">,</span>&nbsp;<span class="ident" id="7451245">test</span><span class="op" id="7451249">.</span><span class="ident" id="7451250">jsCtx</span><span class="op" id="7451255">,</span>&nbsp;<span class="ident" id="7451257">test</span><span class="op" id="7451261">.</span><span class="ident" id="7451262">s</span><span class="op" id="7451263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7451274">if</span>&nbsp;<span class="ident" id="7451277">nextJSCtx</span><span class="op" id="7451286">(</span><span class="op" id="7451287">[</span><span class="op" id="7451288">]</span><span class="builtintype" id="7451289">byte</span><span class="op" id="7451293">(</span><span class="string" id="7451294">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7451299">)</span><span class="op" id="7451300">,</span>&nbsp;<span class="ident" id="7451302">jsCtxRegexp</span><span class="op" id="7451313">)</span>&nbsp;<span class="op" id="7451315">!=</span>&nbsp;<span class="ident" id="7451318">jsCtxRegexp</span>&nbsp;<span class="op" id="7451330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451334">t</span><span class="op" id="7451335">.</span><span class="ident" id="7451336">Error</span><span class="op" id="7451341">(</span><span class="string" id="7451342">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7451356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7451363">if</span>&nbsp;<span class="ident" id="7451366">nextJSCtx</span><span class="op" id="7451375">(</span><span class="op" id="7451376">[</span><span class="op" id="7451377">]</span><span class="builtintype" id="7451378">byte</span><span class="op" id="7451382">(</span><span class="string" id="7451383">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7451388">)</span><span class="op" id="7451389">,</span>&nbsp;<span class="ident" id="7451391">jsCtxDivOp</span><span class="op" id="7451401">)</span>&nbsp;<span class="op" id="7451403">!=</span>&nbsp;<span class="ident" id="7451406">jsCtxDivOp</span>&nbsp;<span class="op" id="7451417">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451421">t</span><span class="op" id="7451422">.</span><span class="ident" id="7451423">Error</span><span class="op" id="7451428">(</span><span class="string" id="7451429">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="7451443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451446">}</span><br>
<span class="lineno"></span><span class="op" id="7451448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7451451">func</span>&nbsp;<span class="ident" id="7451456">TestJSValEscaper</span><span class="op" id="7451472">(</span><span class="ident" id="7451473">t</span>&nbsp;<span class="op" id="7451475">*</span><span class="ident" id="7451476">testing</span><span class="op" id="7451483">.</span><span class="ident" id="7451484">T</span><span class="op" id="7451485">)</span>&nbsp;<span class="op" id="7451487">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451490">tests</span>&nbsp;<span class="op" id="7451496">:=</span>&nbsp;<span class="op" id="7451499">[</span><span class="op" id="7451500">]</span><span class="keyword" id="7451501">struct</span>&nbsp;<span class="op" id="7451508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451512">x</span>&nbsp;&nbsp;<span class="keyword" id="7451515">interface</span><span class="op" id="7451524">{</span><span class="op" id="7451525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7451529">js</span>&nbsp;<span class="builtintype" id="7451532">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451540">}</span><span class="op" id="7451541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451545">{</span><span class="builtintype" id="7451546">int</span><span class="op" id="7451549">(</span><span class="num" id="7451550">42</span><span class="op" id="7451552">)</span><span class="op" id="7451553">,</span>&nbsp;<span class="string" id="7451555">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451561">}</span><span class="op" id="7451562">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451566">{</span><span class="builtintype" id="7451567">uint</span><span class="op" id="7451571">(</span><span class="num" id="7451572">42</span><span class="op" id="7451574">)</span><span class="op" id="7451575">,</span>&nbsp;<span class="string" id="7451577">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451583">}</span><span class="op" id="7451584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451588">{</span><span class="builtintype" id="7451589">int16</span><span class="op" id="7451594">(</span><span class="num" id="7451595">42</span><span class="op" id="7451597">)</span><span class="op" id="7451598">,</span>&nbsp;<span class="string" id="7451600">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451606">}</span><span class="op" id="7451607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451611">{</span><span class="builtintype" id="7451612">uint16</span><span class="op" id="7451618">(</span><span class="num" id="7451619">42</span><span class="op" id="7451621">)</span><span class="op" id="7451622">,</span>&nbsp;<span class="string" id="7451624">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451630">}</span><span class="op" id="7451631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451635">{</span><span class="builtintype" id="7451636">int32</span><span class="op" id="7451641">(</span><span class="op" id="7451642">-</span><span class="num" id="7451643">42</span><span class="op" id="7451645">)</span><span class="op" id="7451646">,</span>&nbsp;<span class="string" id="7451648">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7451655">}</span><span class="op" id="7451656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451660">{</span><span class="builtintype" id="7451661">uint32</span><span class="op" id="7451667">(</span><span class="num" id="7451668">42</span><span class="op" id="7451670">)</span><span class="op" id="7451671">,</span>&nbsp;<span class="string" id="7451673">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451679">}</span><span class="op" id="7451680">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451684">{</span><span class="builtintype" id="7451685">int16</span><span class="op" id="7451690">(</span><span class="op" id="7451691">-</span><span class="num" id="7451692">42</span><span class="op" id="7451694">)</span><span class="op" id="7451695">,</span>&nbsp;<span class="string" id="7451697">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7451704">}</span><span class="op" id="7451705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451709">{</span><span class="builtintype" id="7451710">uint16</span><span class="op" id="7451716">(</span><span class="num" id="7451717">42</span><span class="op" id="7451719">)</span><span class="op" id="7451720">,</span>&nbsp;<span class="string" id="7451722">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451728">}</span><span class="op" id="7451729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451733">{</span><span class="ident" id="7451734">int64</span><span class="op" id="7451739">(</span><span class="op" id="7451740">-</span><span class="num" id="7451741">42</span><span class="op" id="7451743">)</span><span class="op" id="7451744">,</span>&nbsp;<span class="string" id="7451746">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="7451753">}</span><span class="op" id="7451754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451758">{</span><span class="ident" id="7451759">uint64</span><span class="op" id="7451765">(</span><span class="num" id="7451766">42</span><span class="op" id="7451768">)</span><span class="op" id="7451769">,</span>&nbsp;<span class="string" id="7451771">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="7451777">}</span><span class="op" id="7451778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451782">{</span><span class="ident" id="7451783">uint64</span><span class="op" id="7451789">(</span><span class="num" id="7451790">1</span><span class="op" id="7451791">)</span>&nbsp;<span class="op" id="7451793">&lt;&lt;</span>&nbsp;<span class="num" id="7451796">53</span><span class="op" id="7451798">,</span>&nbsp;<span class="string" id="7451800">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="7451820">}</span><span class="op" id="7451821">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7451825">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7451877">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451931">{</span><span class="ident" id="7451932">uint64</span><span class="op" id="7451938">(</span><span class="num" id="7451939">1</span><span class="op" id="7451940">)</span><span class="op" id="7451941">&lt;&lt;</span><span class="num" id="7451943">53</span>&nbsp;<span class="op" id="7451946">+</span>&nbsp;<span class="num" id="7451948">1</span><span class="op" id="7451949">,</span>&nbsp;<span class="string" id="7451951">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="7451971">}</span><span class="op" id="7451972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7451976">{</span><span class="builtintype" id="7451977">float32</span><span class="op" id="7451984">(</span><span class="num" id="7451985">1.0</span><span class="op" id="7451988">)</span><span class="op" id="7451989">,</span>&nbsp;<span class="string" id="7451991">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7451996">}</span><span class="op" id="7451997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452001">{</span><span class="builtintype" id="7452002">float32</span><span class="op" id="7452009">(</span><span class="op" id="7452010">-</span><span class="num" id="7452011">1.0</span><span class="op" id="7452014">)</span><span class="op" id="7452015">,</span>&nbsp;<span class="string" id="7452017">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7452023">}</span><span class="op" id="7452024">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452028">{</span><span class="builtintype" id="7452029">float32</span><span class="op" id="7452036">(</span><span class="num" id="7452037">0.5</span><span class="op" id="7452040">)</span><span class="op" id="7452041">,</span>&nbsp;<span class="string" id="7452043">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7452050">}</span><span class="op" id="7452051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452055">{</span><span class="builtintype" id="7452056">float32</span><span class="op" id="7452063">(</span><span class="op" id="7452064">-</span><span class="num" id="7452065">0.5</span><span class="op" id="7452068">)</span><span class="op" id="7452069">,</span>&nbsp;<span class="string" id="7452071">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7452079">}</span><span class="op" id="7452080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452084">{</span><span class="builtintype" id="7452085">float32</span><span class="op" id="7452092">(</span><span class="num" id="7452093">1.0</span><span class="op" id="7452096">)</span>&nbsp;<span class="op" id="7452098">/</span>&nbsp;<span class="builtintype" id="7452100">float32</span><span class="op" id="7452107">(</span><span class="num" id="7452108">256</span><span class="op" id="7452111">)</span><span class="op" id="7452112">,</span>&nbsp;<span class="string" id="7452114">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="7452128">}</span><span class="op" id="7452129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452133">{</span><span class="builtintype" id="7452134">float32</span><span class="op" id="7452141">(</span><span class="num" id="7452142">0</span><span class="op" id="7452143">)</span><span class="op" id="7452144">,</span>&nbsp;<span class="string" id="7452146">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7452151">}</span><span class="op" id="7452152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452156">{</span><span class="ident" id="7452157">math</span><span class="op" id="7452161">.</span><span class="ident" id="7452162">Copysign</span><span class="op" id="7452170">(</span><span class="num" id="7452171">0</span><span class="op" id="7452172">,</span>&nbsp;<span class="op" id="7452174">-</span><span class="num" id="7452175">1</span><span class="op" id="7452176">)</span><span class="op" id="7452177">,</span>&nbsp;<span class="string" id="7452179">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7452185">}</span><span class="op" id="7452186">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452190">{</span><span class="builtintype" id="7452191">float64</span><span class="op" id="7452198">(</span><span class="num" id="7452199">1.0</span><span class="op" id="7452202">)</span><span class="op" id="7452203">,</span>&nbsp;<span class="string" id="7452205">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="7452210">}</span><span class="op" id="7452211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452215">{</span><span class="builtintype" id="7452216">float64</span><span class="op" id="7452223">(</span><span class="op" id="7452224">-</span><span class="num" id="7452225">1.0</span><span class="op" id="7452228">)</span><span class="op" id="7452229">,</span>&nbsp;<span class="string" id="7452231">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="7452237">}</span><span class="op" id="7452238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452242">{</span><span class="builtintype" id="7452243">float64</span><span class="op" id="7452250">(</span><span class="num" id="7452251">0.5</span><span class="op" id="7452254">)</span><span class="op" id="7452255">,</span>&nbsp;<span class="string" id="7452257">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="7452264">}</span><span class="op" id="7452265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452269">{</span><span class="builtintype" id="7452270">float64</span><span class="op" id="7452277">(</span><span class="op" id="7452278">-</span><span class="num" id="7452279">0.5</span><span class="op" id="7452282">)</span><span class="op" id="7452283">,</span>&nbsp;<span class="string" id="7452285">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="7452293">}</span><span class="op" id="7452294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452298">{</span><span class="builtintype" id="7452299">float64</span><span class="op" id="7452306">(</span><span class="num" id="7452307">0</span><span class="op" id="7452308">)</span><span class="op" id="7452309">,</span>&nbsp;<span class="string" id="7452311">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="7452316">}</span><span class="op" id="7452317">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452321">{</span><span class="ident" id="7452322">math</span><span class="op" id="7452326">.</span><span class="ident" id="7452327">Copysign</span><span class="op" id="7452335">(</span><span class="num" id="7452336">0</span><span class="op" id="7452337">,</span>&nbsp;<span class="op" id="7452339">-</span><span class="num" id="7452340">1</span><span class="op" id="7452341">)</span><span class="op" id="7452342">,</span>&nbsp;<span class="string" id="7452344">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="7452350">}</span><span class="op" id="7452351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452355">{</span><span class="string" id="7452356">&#34;&#34;</span><span class="op" id="7452358">,</span>&nbsp;<span class="string" id="7452360">`&#34;&#34;`</span><span class="op" id="7452364">}</span><span class="op" id="7452365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452369">{</span><span class="string" id="7452370">&#34;foo&#34;</span><span class="op" id="7452375">,</span>&nbsp;<span class="string" id="7452377">`&#34;foo&#34;`</span><span class="op" id="7452384">}</span><span class="op" id="7452385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7452389">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452404">{</span><span class="string" id="7452405">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="7452423">,</span>&nbsp;<span class="string" id="7452425">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="7452445">}</span><span class="op" id="7452446">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7452450">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452498">{</span><span class="string" id="7452499">&#34;\t\x0b&#34;</span><span class="op" id="7452507">,</span>&nbsp;<span class="string" id="7452509">`&#34;\t\u000b&#34;`</span><span class="op" id="7452521">}</span><span class="op" id="7452522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452526">{</span><span class="keyword" id="7452527">struct</span><span class="op" id="7452533">{</span>&nbsp;<span class="ident" id="7452535">X</span><span class="op" id="7452536">,</span>&nbsp;<span class="ident" id="7452538">Y</span>&nbsp;<span class="builtintype" id="7452540">int</span>&nbsp;<span class="op" id="7452544">}</span><span class="op" id="7452545">{</span><span class="num" id="7452546">1</span><span class="op" id="7452547">,</span>&nbsp;<span class="num" id="7452549">2</span><span class="op" id="7452550">}</span><span class="op" id="7452551">,</span>&nbsp;<span class="string" id="7452553">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="7452568">}</span><span class="op" id="7452569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452573">{</span><span class="op" id="7452574">[</span><span class="op" id="7452575">]</span><span class="keyword" id="7452576">interface</span><span class="op" id="7452585">{</span><span class="op" id="7452586">}</span><span class="op" id="7452587">{</span><span class="op" id="7452588">}</span><span class="op" id="7452589">,</span>&nbsp;<span class="string" id="7452591">&#34;[]&#34;</span><span class="op" id="7452595">}</span><span class="op" id="7452596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452600">{</span><span class="op" id="7452601">[</span><span class="op" id="7452602">]</span><span class="keyword" id="7452603">interface</span><span class="op" id="7452612">{</span><span class="op" id="7452613">}</span><span class="op" id="7452614">{</span><span class="num" id="7452615">42</span><span class="op" id="7452617">,</span>&nbsp;<span class="string" id="7452619">&#34;foo&#34;</span><span class="op" id="7452624">,</span>&nbsp;<span class="ident" id="7452626">nil</span><span class="op" id="7452629">}</span><span class="op" id="7452630">,</span>&nbsp;<span class="string" id="7452632">`[42,&#34;foo&#34;,null]`</span><span class="op" id="7452649">}</span><span class="op" id="7452650">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452654">{</span><span class="op" id="7452655">[</span><span class="op" id="7452656">]</span><span class="builtintype" id="7452657">string</span><span class="op" id="7452663">{</span><span class="string" id="7452664">&#34;&lt;!--&#34;</span><span class="op" id="7452670">,</span>&nbsp;<span class="string" id="7452672">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7452683">,</span>&nbsp;<span class="string" id="7452685">&#34;--&gt;&#34;</span><span class="op" id="7452690">}</span><span class="op" id="7452691">,</span>&nbsp;<span class="string" id="7452693">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="7452741">}</span><span class="op" id="7452742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452746">{</span><span class="string" id="7452747">&#34;&lt;!--&#34;</span><span class="op" id="7452753">,</span>&nbsp;<span class="string" id="7452755">`&#34;\u003c!--&#34;`</span><span class="op" id="7452768">}</span><span class="op" id="7452769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452773">{</span><span class="string" id="7452774">&#34;--&gt;&#34;</span><span class="op" id="7452779">,</span>&nbsp;<span class="string" id="7452781">`&#34;--\u003e&#34;`</span><span class="op" id="7452793">}</span><span class="op" id="7452794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452798">{</span><span class="string" id="7452799">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7452810">,</span>&nbsp;<span class="string" id="7452812">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="7452830">}</span><span class="op" id="7452831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452835">{</span><span class="string" id="7452836">&#34;]]&gt;&#34;</span><span class="op" id="7452841">,</span>&nbsp;<span class="string" id="7452843">`&#34;]]\u003e&#34;`</span><span class="op" id="7452855">}</span><span class="op" id="7452856">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452860">{</span><span class="string" id="7452861">&#34;&lt;/script&#34;</span><span class="op" id="7452871">,</span>&nbsp;<span class="string" id="7452873">`&#34;\u003c/script&#34;`</span><span class="op" id="7452890">}</span><span class="op" id="7452891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452895">{</span><span class="string" id="7452896">&#34;\U0001D11E&#34;</span><span class="op" id="7452908">,</span>&nbsp;<span class="string" id="7452910">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="7452926">}</span><span class="op" id="7452927">,</span>&nbsp;<span class="comment" id="7452929">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7452955">for</span>&nbsp;<span class="ident" id="7452959">_</span><span class="op" id="7452960">,</span>&nbsp;<span class="ident" id="7452962">test</span>&nbsp;<span class="op" id="7452967">:=</span>&nbsp;<span class="keyword" id="7452970">range</span>&nbsp;<span class="ident" id="7452976">tests</span>&nbsp;<span class="op" id="7452982">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7452986">if</span>&nbsp;<span class="ident" id="7452989">js</span>&nbsp;<span class="op" id="7452992">:=</span>&nbsp;<span class="ident" id="7452995">jsValEscaper</span><span class="op" id="7453007">(</span><span class="ident" id="7453008">test</span><span class="op" id="7453012">.</span><span class="ident" id="7453013">x</span><span class="op" id="7453014">)</span><span class="op" id="7453015">;</span>&nbsp;<span class="ident" id="7453017">js</span>&nbsp;<span class="op" id="7453020">!=</span>&nbsp;<span class="ident" id="7453023">test</span><span class="op" id="7453027">.</span><span class="ident" id="7453028">js</span>&nbsp;<span class="op" id="7453031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453036">t</span><span class="op" id="7453037">.</span><span class="ident" id="7453038">Errorf</span><span class="op" id="7453044">(</span><span class="string" id="7453045">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7453073">,</span>&nbsp;<span class="ident" id="7453075">test</span><span class="op" id="7453079">.</span><span class="ident" id="7453080">x</span><span class="op" id="7453081">,</span>&nbsp;<span class="ident" id="7453083">test</span><span class="op" id="7453087">.</span><span class="ident" id="7453088">js</span><span class="op" id="7453090">,</span>&nbsp;<span class="ident" id="7453092">js</span><span class="op" id="7453094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453102">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453159">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453176">a</span>&nbsp;<span class="op" id="7453178">:=</span>&nbsp;<span class="op" id="7453181">[</span><span class="op" id="7453182">]</span><span class="keyword" id="7453183">interface</span><span class="op" id="7453192">{</span><span class="op" id="7453193">}</span><span class="op" id="7453194">{</span><span class="ident" id="7453195">test</span><span class="op" id="7453199">.</span><span class="ident" id="7453200">x</span><span class="op" id="7453201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453205">want</span>&nbsp;<span class="op" id="7453210">:=</span>&nbsp;<span class="string" id="7453213">&#34;[&#34;</span>&nbsp;<span class="op" id="7453217">+</span>&nbsp;<span class="ident" id="7453219">strings</span><span class="op" id="7453226">.</span><span class="ident" id="7453227">TrimSpace</span><span class="op" id="7453236">(</span><span class="ident" id="7453237">test</span><span class="op" id="7453241">.</span><span class="ident" id="7453242">js</span><span class="op" id="7453244">)</span>&nbsp;<span class="op" id="7453246">+</span>&nbsp;<span class="string" id="7453248">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7453254">if</span>&nbsp;<span class="ident" id="7453257">js</span>&nbsp;<span class="op" id="7453260">:=</span>&nbsp;<span class="ident" id="7453263">jsValEscaper</span><span class="op" id="7453275">(</span><span class="ident" id="7453276">a</span><span class="op" id="7453277">)</span><span class="op" id="7453278">;</span>&nbsp;<span class="ident" id="7453280">js</span>&nbsp;<span class="op" id="7453283">!=</span>&nbsp;<span class="ident" id="7453286">want</span>&nbsp;<span class="op" id="7453291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453296">t</span><span class="op" id="7453297">.</span><span class="ident" id="7453298">Errorf</span><span class="op" id="7453304">(</span><span class="string" id="7453305">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7453333">,</span>&nbsp;<span class="ident" id="7453335">a</span><span class="op" id="7453336">,</span>&nbsp;<span class="ident" id="7453338">want</span><span class="op" id="7453342">,</span>&nbsp;<span class="ident" id="7453344">js</span><span class="op" id="7453346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453350">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453353">}</span><br>
<span class="lineno"></span><span class="op" id="7453355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7453358">func</span>&nbsp;<span class="ident" id="7453363">TestJSStrEscaper</span><span class="op" id="7453379">(</span><span class="ident" id="7453380">t</span>&nbsp;<span class="op" id="7453382">*</span><span class="ident" id="7453383">testing</span><span class="op" id="7453390">.</span><span class="ident" id="7453391">T</span><span class="op" id="7453392">)</span>&nbsp;<span class="op" id="7453394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453397">tests</span>&nbsp;<span class="op" id="7453403">:=</span>&nbsp;<span class="op" id="7453406">[</span><span class="op" id="7453407">]</span><span class="keyword" id="7453408">struct</span>&nbsp;<span class="op" id="7453415">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453419">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7453423">interface</span><span class="op" id="7453432">{</span><span class="op" id="7453433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453437">esc</span>&nbsp;<span class="builtintype" id="7453441">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453449">}</span><span class="op" id="7453450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453454">{</span><span class="string" id="7453455">&#34;&#34;</span><span class="op" id="7453457">,</span>&nbsp;<span class="string" id="7453459">``</span><span class="op" id="7453461">}</span><span class="op" id="7453462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453466">{</span><span class="string" id="7453467">&#34;foo&#34;</span><span class="op" id="7453472">,</span>&nbsp;<span class="string" id="7453474">`foo`</span><span class="op" id="7453479">}</span><span class="op" id="7453480">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453484">{</span><span class="string" id="7453485">&#34;\u0000&#34;</span><span class="op" id="7453493">,</span>&nbsp;<span class="string" id="7453495">`\0`</span><span class="op" id="7453499">}</span><span class="op" id="7453500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453504">{</span><span class="string" id="7453505">&#34;\t&#34;</span><span class="op" id="7453509">,</span>&nbsp;<span class="string" id="7453511">`\t`</span><span class="op" id="7453515">}</span><span class="op" id="7453516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453520">{</span><span class="string" id="7453521">&#34;\n&#34;</span><span class="op" id="7453525">,</span>&nbsp;<span class="string" id="7453527">`\n`</span><span class="op" id="7453531">}</span><span class="op" id="7453532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453536">{</span><span class="string" id="7453537">&#34;\r&#34;</span><span class="op" id="7453541">,</span>&nbsp;<span class="string" id="7453543">`\r`</span><span class="op" id="7453547">}</span><span class="op" id="7453548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453552">{</span><span class="string" id="7453553">&#34;\u2028&#34;</span><span class="op" id="7453561">,</span>&nbsp;<span class="string" id="7453563">`\u2028`</span><span class="op" id="7453571">}</span><span class="op" id="7453572">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453576">{</span><span class="string" id="7453577">&#34;\u2029&#34;</span><span class="op" id="7453585">,</span>&nbsp;<span class="string" id="7453587">`\u2029`</span><span class="op" id="7453595">}</span><span class="op" id="7453596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453600">{</span><span class="string" id="7453601">&#34;\\&#34;</span><span class="op" id="7453605">,</span>&nbsp;<span class="string" id="7453607">`\\`</span><span class="op" id="7453611">}</span><span class="op" id="7453612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453616">{</span><span class="string" id="7453617">&#34;\\n&#34;</span><span class="op" id="7453622">,</span>&nbsp;<span class="string" id="7453624">`\\n`</span><span class="op" id="7453629">}</span><span class="op" id="7453630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453634">{</span><span class="string" id="7453635">&#34;foo\r\nbar&#34;</span><span class="op" id="7453647">,</span>&nbsp;<span class="string" id="7453649">`foo\r\nbar`</span><span class="op" id="7453661">}</span><span class="op" id="7453662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453666">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453702">{</span><span class="string" id="7453703">`&#34;`</span><span class="op" id="7453706">,</span>&nbsp;<span class="string" id="7453708">`\x22`</span><span class="op" id="7453714">}</span><span class="op" id="7453715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453719">{</span><span class="string" id="7453720">`&#39;`</span><span class="op" id="7453723">,</span>&nbsp;<span class="string" id="7453725">`\x27`</span><span class="op" id="7453731">}</span><span class="op" id="7453732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453736">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453791">{</span><span class="string" id="7453792">`&amp;amp;`</span><span class="op" id="7453799">,</span>&nbsp;<span class="string" id="7453801">`\x26amp;`</span><span class="op" id="7453811">}</span><span class="op" id="7453812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453816">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453879">{</span><span class="string" id="7453880">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7453891">,</span>&nbsp;<span class="string" id="7453893">`\x3c\/script\x3e`</span><span class="op" id="7453911">}</span><span class="op" id="7453912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453916">{</span><span class="string" id="7453917">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7453928">,</span>&nbsp;<span class="string" id="7453930">`\x3c![CDATA[`</span><span class="op" id="7453944">}</span><span class="op" id="7453945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453949">{</span><span class="string" id="7453950">&#34;]]&gt;&#34;</span><span class="op" id="7453955">,</span>&nbsp;<span class="string" id="7453957">`]]\x3e`</span><span class="op" id="7453965">}</span><span class="op" id="7453966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453970">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454042">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454106">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454167">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454214">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454278">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454345">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454411">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454471">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454535">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454586">{</span><span class="string" id="7454587">&#34;&lt;!--&#34;</span><span class="op" id="7454593">,</span>&nbsp;<span class="string" id="7454595">`\x3c!--`</span><span class="op" id="7454604">}</span><span class="op" id="7454605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454609">{</span><span class="string" id="7454610">&#34;--&gt;&#34;</span><span class="op" id="7454615">,</span>&nbsp;<span class="string" id="7454617">`--\x3e`</span><span class="op" id="7454625">}</span><span class="op" id="7454626">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454630">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454690">{</span><span class="string" id="7454691">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="7454734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454739">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="7454795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454799">}</span><span class="op" id="7454800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454804">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454832">{</span><span class="string" id="7454833">&#34;foo\xA0bar&#34;</span><span class="op" id="7454845">,</span>&nbsp;<span class="string" id="7454847">&#34;foo\xA0bar&#34;</span><span class="op" id="7454859">}</span><span class="op" id="7454860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454864">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454899">{</span><span class="string" id="7454900">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7454920">,</span>&nbsp;<span class="string" id="7454922">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="7454942">}</span><span class="op" id="7454943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7454950">for</span>&nbsp;<span class="ident" id="7454954">_</span><span class="op" id="7454955">,</span>&nbsp;<span class="ident" id="7454957">test</span>&nbsp;<span class="op" id="7454962">:=</span>&nbsp;<span class="keyword" id="7454965">range</span>&nbsp;<span class="ident" id="7454971">tests</span>&nbsp;<span class="op" id="7454977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454981">esc</span>&nbsp;<span class="op" id="7454985">:=</span>&nbsp;<span class="ident" id="7454988">jsStrEscaper</span><span class="op" id="7455000">(</span><span class="ident" id="7455001">test</span><span class="op" id="7455005">.</span><span class="ident" id="7455006">x</span><span class="op" id="7455007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7455011">if</span>&nbsp;<span class="ident" id="7455014">esc</span>&nbsp;<span class="op" id="7455018">!=</span>&nbsp;<span class="ident" id="7455021">test</span><span class="op" id="7455025">.</span><span class="ident" id="7455026">esc</span>&nbsp;<span class="op" id="7455030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455035">t</span><span class="op" id="7455036">.</span><span class="ident" id="7455037">Errorf</span><span class="op" id="7455043">(</span><span class="string" id="7455044">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7455064">,</span>&nbsp;<span class="ident" id="7455066">test</span><span class="op" id="7455070">.</span><span class="ident" id="7455071">x</span><span class="op" id="7455072">,</span>&nbsp;<span class="ident" id="7455074">test</span><span class="op" id="7455078">.</span><span class="ident" id="7455079">esc</span><span class="op" id="7455082">,</span>&nbsp;<span class="ident" id="7455084">esc</span><span class="op" id="7455087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455091">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455094">}</span><br>
<span class="lineno"></span><span class="op" id="7455096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7455099">func</span>&nbsp;<span class="ident" id="7455104">TestJSRegexpEscaper</span><span class="op" id="7455123">(</span><span class="ident" id="7455124">t</span>&nbsp;<span class="op" id="7455126">*</span><span class="ident" id="7455127">testing</span><span class="op" id="7455134">.</span><span class="ident" id="7455135">T</span><span class="op" id="7455136">)</span>&nbsp;<span class="op" id="7455138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455141">tests</span>&nbsp;<span class="op" id="7455147">:=</span>&nbsp;<span class="op" id="7455150">[</span><span class="op" id="7455151">]</span><span class="keyword" id="7455152">struct</span>&nbsp;<span class="op" id="7455159">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455163">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="7455167">interface</span><span class="op" id="7455176">{</span><span class="op" id="7455177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455181">esc</span>&nbsp;<span class="builtintype" id="7455185">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455193">}</span><span class="op" id="7455194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455198">{</span><span class="string" id="7455199">&#34;&#34;</span><span class="op" id="7455201">,</span>&nbsp;<span class="string" id="7455203">`(?:)`</span><span class="op" id="7455209">}</span><span class="op" id="7455210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455214">{</span><span class="string" id="7455215">&#34;foo&#34;</span><span class="op" id="7455220">,</span>&nbsp;<span class="string" id="7455222">`foo`</span><span class="op" id="7455227">}</span><span class="op" id="7455228">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455232">{</span><span class="string" id="7455233">&#34;\u0000&#34;</span><span class="op" id="7455241">,</span>&nbsp;<span class="string" id="7455243">`\0`</span><span class="op" id="7455247">}</span><span class="op" id="7455248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455252">{</span><span class="string" id="7455253">&#34;\t&#34;</span><span class="op" id="7455257">,</span>&nbsp;<span class="string" id="7455259">`\t`</span><span class="op" id="7455263">}</span><span class="op" id="7455264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455268">{</span><span class="string" id="7455269">&#34;\n&#34;</span><span class="op" id="7455273">,</span>&nbsp;<span class="string" id="7455275">`\n`</span><span class="op" id="7455279">}</span><span class="op" id="7455280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455284">{</span><span class="string" id="7455285">&#34;\r&#34;</span><span class="op" id="7455289">,</span>&nbsp;<span class="string" id="7455291">`\r`</span><span class="op" id="7455295">}</span><span class="op" id="7455296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455300">{</span><span class="string" id="7455301">&#34;\u2028&#34;</span><span class="op" id="7455309">,</span>&nbsp;<span class="string" id="7455311">`\u2028`</span><span class="op" id="7455319">}</span><span class="op" id="7455320">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455324">{</span><span class="string" id="7455325">&#34;\u2029&#34;</span><span class="op" id="7455333">,</span>&nbsp;<span class="string" id="7455335">`\u2029`</span><span class="op" id="7455343">}</span><span class="op" id="7455344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455348">{</span><span class="string" id="7455349">&#34;\\&#34;</span><span class="op" id="7455353">,</span>&nbsp;<span class="string" id="7455355">`\\`</span><span class="op" id="7455359">}</span><span class="op" id="7455360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455364">{</span><span class="string" id="7455365">&#34;\\n&#34;</span><span class="op" id="7455370">,</span>&nbsp;<span class="string" id="7455372">`\\n`</span><span class="op" id="7455377">}</span><span class="op" id="7455378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455382">{</span><span class="string" id="7455383">&#34;foo\r\nbar&#34;</span><span class="op" id="7455395">,</span>&nbsp;<span class="string" id="7455397">`foo\r\nbar`</span><span class="op" id="7455409">}</span><span class="op" id="7455410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7455414">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455450">{</span><span class="string" id="7455451">`&#34;`</span><span class="op" id="7455454">,</span>&nbsp;<span class="string" id="7455456">`\x22`</span><span class="op" id="7455462">}</span><span class="op" id="7455463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455467">{</span><span class="string" id="7455468">`&#39;`</span><span class="op" id="7455471">,</span>&nbsp;<span class="string" id="7455473">`\x27`</span><span class="op" id="7455479">}</span><span class="op" id="7455480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7455484">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455539">{</span><span class="string" id="7455540">`&amp;amp;`</span><span class="op" id="7455547">,</span>&nbsp;<span class="string" id="7455549">`\x26amp;`</span><span class="op" id="7455559">}</span><span class="op" id="7455560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7455564">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455627">{</span><span class="string" id="7455628">&#34;&lt;/script&gt;&#34;</span><span class="op" id="7455639">,</span>&nbsp;<span class="string" id="7455641">`\x3c\/script\x3e`</span><span class="op" id="7455659">}</span><span class="op" id="7455660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455664">{</span><span class="string" id="7455665">&#34;&lt;![CDATA[&#34;</span><span class="op" id="7455676">,</span>&nbsp;<span class="string" id="7455678">`\x3c!\[CDATA\[`</span><span class="op" id="7455694">}</span><span class="op" id="7455695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455699">{</span><span class="string" id="7455700">&#34;]]&gt;&#34;</span><span class="op" id="7455705">,</span>&nbsp;<span class="string" id="7455707">`\]\]\x3e`</span><span class="op" id="7455717">}</span><span class="op" id="7455718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7455722">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455748">{</span><span class="string" id="7455749">&#34;&lt;!--&#34;</span><span class="op" id="7455755">,</span>&nbsp;<span class="string" id="7455757">`\x3c!\-\-`</span><span class="op" id="7455768">}</span><span class="op" id="7455769">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455773">{</span><span class="string" id="7455774">&#34;--&gt;&#34;</span><span class="op" id="7455779">,</span>&nbsp;<span class="string" id="7455781">`\-\-\x3e`</span><span class="op" id="7455791">}</span><span class="op" id="7455792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455796">{</span><span class="string" id="7455797">&#34;*&#34;</span><span class="op" id="7455800">,</span>&nbsp;<span class="string" id="7455802">`\*`</span><span class="op" id="7455806">}</span><span class="op" id="7455807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455811">{</span><span class="string" id="7455812">&#34;+&#34;</span><span class="op" id="7455815">,</span>&nbsp;<span class="string" id="7455817">`\x2b`</span><span class="op" id="7455823">}</span><span class="op" id="7455824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455828">{</span><span class="string" id="7455829">&#34;?&#34;</span><span class="op" id="7455832">,</span>&nbsp;<span class="string" id="7455834">`\?`</span><span class="op" id="7455838">}</span><span class="op" id="7455839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455843">{</span><span class="string" id="7455844">&#34;[](){}&#34;</span><span class="op" id="7455852">,</span>&nbsp;<span class="string" id="7455854">`\[\]\(\)\{\}`</span><span class="op" id="7455868">}</span><span class="op" id="7455869">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455873">{</span><span class="string" id="7455874">&#34;$foo|x.y&#34;</span><span class="op" id="7455884">,</span>&nbsp;<span class="string" id="7455886">`\$foo\|x\.y`</span><span class="op" id="7455899">}</span><span class="op" id="7455900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455904">{</span><span class="string" id="7455905">&#34;x^y&#34;</span><span class="op" id="7455910">,</span>&nbsp;<span class="string" id="7455912">`x\^y`</span><span class="op" id="7455918">}</span><span class="op" id="7455919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7455926">for</span>&nbsp;<span class="ident" id="7455930">_</span><span class="op" id="7455931">,</span>&nbsp;<span class="ident" id="7455933">test</span>&nbsp;<span class="op" id="7455938">:=</span>&nbsp;<span class="keyword" id="7455941">range</span>&nbsp;<span class="ident" id="7455947">tests</span>&nbsp;<span class="op" id="7455953">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455957">esc</span>&nbsp;<span class="op" id="7455961">:=</span>&nbsp;<span class="ident" id="7455964">jsRegexpEscaper</span><span class="op" id="7455979">(</span><span class="ident" id="7455980">test</span><span class="op" id="7455984">.</span><span class="ident" id="7455985">x</span><span class="op" id="7455986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7455990">if</span>&nbsp;<span class="ident" id="7455993">esc</span>&nbsp;<span class="op" id="7455997">!=</span>&nbsp;<span class="ident" id="7456000">test</span><span class="op" id="7456004">.</span><span class="ident" id="7456005">esc</span>&nbsp;<span class="op" id="7456009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456014">t</span><span class="op" id="7456015">.</span><span class="ident" id="7456016">Errorf</span><span class="op" id="7456022">(</span><span class="string" id="7456023">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7456043">,</span>&nbsp;<span class="ident" id="7456045">test</span><span class="op" id="7456049">.</span><span class="ident" id="7456050">x</span><span class="op" id="7456051">,</span>&nbsp;<span class="ident" id="7456053">test</span><span class="op" id="7456057">.</span><span class="ident" id="7456058">esc</span><span class="op" id="7456061">,</span>&nbsp;<span class="ident" id="7456063">esc</span><span class="op" id="7456066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456073">}</span><br>
<span class="lineno">265</span><span class="op" id="7456075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7456078">func</span>&nbsp;<span class="ident" id="7456083">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="7456126">(</span><span class="ident" id="7456127">t</span>&nbsp;<span class="op" id="7456129">*</span><span class="ident" id="7456130">testing</span><span class="op" id="7456137">.</span><span class="ident" id="7456138">T</span><span class="op" id="7456139">)</span>&nbsp;<span class="op" id="7456141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456144">input</span>&nbsp;<span class="op" id="7456150">:=</span>&nbsp;<span class="op" id="7456153">(</span><span class="string" id="7456154">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="7456215">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456219">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7456286">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456290">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="7456309">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456313">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="7456332">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456336">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7456355">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456359">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="7456378">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456382">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7456401">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456405">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7456427">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456431">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7456473">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456477">tests</span>&nbsp;<span class="op" id="7456483">:=</span>&nbsp;<span class="op" id="7456486">[</span><span class="op" id="7456487">]</span><span class="keyword" id="7456488">struct</span>&nbsp;<span class="op" id="7456495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456499">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7456507">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456516">escaper</span>&nbsp;<span class="keyword" id="7456524">func</span><span class="op" id="7456528">(</span><span class="op" id="7456529">...</span><span class="keyword" id="7456532">interface</span><span class="op" id="7456541">{</span><span class="op" id="7456542">}</span><span class="op" id="7456543">)</span>&nbsp;<span class="builtintype" id="7456545">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456554">escaped</span>&nbsp;<span class="builtintype" id="7456562">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456570">}</span><span class="op" id="7456571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456580">&#34;jsStrEscaper&#34;</span><span class="op" id="7456594">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456599">jsStrEscaper</span><span class="op" id="7456611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456616">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7456650">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456656">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7456688">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456694">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7456729">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456735">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7456770">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456776">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="7456808">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456814">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="7456839">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456845">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7456864">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456870">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="7456890">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456896">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7456915">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456921">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="7456943">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456949">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7456993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456997">}</span><span class="op" id="7456998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457007">&#34;jsRegexpEscaper&#34;</span><span class="op" id="7457024">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457029">jsRegexpEscaper</span><span class="op" id="7457044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457049">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="7457083">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457089">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="7457121">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457127">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="7457162">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457168">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="7457203">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457209">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="7457247">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457253">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="7457279">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457285">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="7457304">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457310">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="7457333">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457339">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="7457358">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457364">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="7457385">+</span>&nbsp;<span class="string" id="7457387">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="7457396">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457402">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="7457446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457450">}</span><span class="op" id="7457451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457458">for</span>&nbsp;<span class="ident" id="7457462">_</span><span class="op" id="7457463">,</span>&nbsp;<span class="ident" id="7457465">test</span>&nbsp;<span class="op" id="7457470">:=</span>&nbsp;<span class="keyword" id="7457473">range</span>&nbsp;<span class="ident" id="7457479">tests</span>&nbsp;<span class="op" id="7457485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457489">if</span>&nbsp;<span class="ident" id="7457492">s</span>&nbsp;<span class="op" id="7457494">:=</span>&nbsp;<span class="ident" id="7457497">test</span><span class="op" id="7457501">.</span><span class="ident" id="7457502">escaper</span><span class="op" id="7457509">(</span><span class="ident" id="7457510">input</span><span class="op" id="7457515">)</span><span class="op" id="7457516">;</span>&nbsp;<span class="ident" id="7457518">s</span>&nbsp;<span class="op" id="7457520">!=</span>&nbsp;<span class="ident" id="7457523">test</span><span class="op" id="7457527">.</span><span class="ident" id="7457528">escaped</span>&nbsp;<span class="op" id="7457536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457541">t</span><span class="op" id="7457542">.</span><span class="ident" id="7457543">Errorf</span><span class="op" id="7457549">(</span><span class="string" id="7457550">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7457582">,</span>&nbsp;<span class="ident" id="7457584">test</span><span class="op" id="7457588">.</span><span class="ident" id="7457589">name</span><span class="op" id="7457593">,</span>&nbsp;<span class="ident" id="7457595">test</span><span class="op" id="7457599">.</span><span class="ident" id="7457600">escaped</span><span class="op" id="7457607">,</span>&nbsp;<span class="ident" id="7457609">s</span><span class="op" id="7457610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457615">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457626">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7457631">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7457681">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457730">var</span>&nbsp;<span class="ident" id="7457734">buf</span>&nbsp;<span class="ident" id="7457738">bytes</span><span class="op" id="7457743">.</span><span class="ident" id="7457744">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457753">for</span>&nbsp;<span class="ident" id="7457757">_</span><span class="op" id="7457758">,</span>&nbsp;<span class="ident" id="7457760">c</span>&nbsp;<span class="op" id="7457762">:=</span>&nbsp;<span class="keyword" id="7457765">range</span>&nbsp;<span class="ident" id="7457771">input</span>&nbsp;<span class="op" id="7457777">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457782">buf</span><span class="op" id="7457785">.</span><span class="ident" id="7457786">WriteString</span><span class="op" id="7457797">(</span><span class="ident" id="7457798">test</span><span class="op" id="7457802">.</span><span class="ident" id="7457803">escaper</span><span class="op" id="7457810">(</span><span class="builtintype" id="7457811">string</span><span class="op" id="7457817">(</span><span class="ident" id="7457818">c</span><span class="op" id="7457819">)</span><span class="op" id="7457820">)</span><span class="op" id="7457821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457830">if</span>&nbsp;<span class="ident" id="7457833">s</span>&nbsp;<span class="op" id="7457835">:=</span>&nbsp;<span class="ident" id="7457838">buf</span><span class="op" id="7457841">.</span><span class="ident" id="7457842">String</span><span class="op" id="7457848">(</span><span class="op" id="7457849">)</span><span class="op" id="7457850">;</span>&nbsp;<span class="ident" id="7457852">s</span>&nbsp;<span class="op" id="7457854">!=</span>&nbsp;<span class="ident" id="7457857">test</span><span class="op" id="7457861">.</span><span class="ident" id="7457862">escaped</span>&nbsp;<span class="op" id="7457870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457875">t</span><span class="op" id="7457876">.</span><span class="ident" id="7457877">Errorf</span><span class="op" id="7457883">(</span><span class="string" id="7457884">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="7457921">,</span>&nbsp;<span class="ident" id="7457923">test</span><span class="op" id="7457927">.</span><span class="ident" id="7457928">name</span><span class="op" id="7457932">,</span>&nbsp;<span class="ident" id="7457934">test</span><span class="op" id="7457938">.</span><span class="ident" id="7457939">escaped</span><span class="op" id="7457946">,</span>&nbsp;<span class="ident" id="7457948">s</span><span class="op" id="7457949">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7457954">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457968">}</span><br>
<span class="lineno"></span><span class="op" id="7457970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="7457973">func</span>&nbsp;<span class="ident" id="7457978">BenchmarkJSValEscaperWithNum</span><span class="op" id="7458006">(</span><span class="ident" id="7458007">b</span>&nbsp;<span class="op" id="7458009">*</span><span class="ident" id="7458010">testing</span><span class="op" id="7458017">.</span><span class="ident" id="7458018">B</span><span class="op" id="7458019">)</span>&nbsp;<span class="op" id="7458021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7458024">for</span>&nbsp;<span class="ident" id="7458028">i</span>&nbsp;<span class="op" id="7458030">:=</span>&nbsp;<span class="num" id="7458033">0</span><span class="op" id="7458034">;</span>&nbsp;<span class="ident" id="7458036">i</span>&nbsp;<span class="op" id="7458038">&lt;</span>&nbsp;<span class="ident" id="7458040">b</span><span class="op" id="7458041">.</span><span class="ident" id="7458042">N</span><span class="op" id="7458043">;</span>&nbsp;<span class="ident" id="7458045">i</span><span class="op" id="7458046">++</span>&nbsp;<span class="op" id="7458049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458053">jsValEscaper</span><span class="op" id="7458065">(</span><span class="num" id="7458066">3.141592654</span><span class="op" id="7458077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458080">}</span><br>
<span class="lineno"></span><span class="op" id="7458082">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7458085">func</span>&nbsp;<span class="ident" id="7458090">BenchmarkJSValEscaperWithStr</span><span class="op" id="7458118">(</span><span class="ident" id="7458119">b</span>&nbsp;<span class="op" id="7458121">*</span><span class="ident" id="7458122">testing</span><span class="op" id="7458129">.</span><span class="ident" id="7458130">B</span><span class="op" id="7458131">)</span>&nbsp;<span class="op" id="7458133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7458136">for</span>&nbsp;<span class="ident" id="7458140">i</span>&nbsp;<span class="op" id="7458142">:=</span>&nbsp;<span class="num" id="7458145">0</span><span class="op" id="7458146">;</span>&nbsp;<span class="ident" id="7458148">i</span>&nbsp;<span class="op" id="7458150">&lt;</span>&nbsp;<span class="ident" id="7458152">b</span><span class="op" id="7458153">.</span><span class="ident" id="7458154">N</span><span class="op" id="7458155">;</span>&nbsp;<span class="ident" id="7458157">i</span><span class="op" id="7458158">++</span>&nbsp;<span class="op" id="7458161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458165">jsValEscaper</span><span class="op" id="7458177">(</span><span class="string" id="7458178">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7458299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458302">}</span><br>
<span class="lineno">345</span><span class="op" id="7458304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7458307">func</span>&nbsp;<span class="ident" id="7458312">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="7458350">(</span><span class="ident" id="7458351">b</span>&nbsp;<span class="op" id="7458353">*</span><span class="ident" id="7458354">testing</span><span class="op" id="7458361">.</span><span class="ident" id="7458362">B</span><span class="op" id="7458363">)</span>&nbsp;<span class="op" id="7458365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7458368">for</span>&nbsp;<span class="ident" id="7458372">i</span>&nbsp;<span class="op" id="7458374">:=</span>&nbsp;<span class="num" id="7458377">0</span><span class="op" id="7458378">;</span>&nbsp;<span class="ident" id="7458380">i</span>&nbsp;<span class="op" id="7458382">&lt;</span>&nbsp;<span class="ident" id="7458384">b</span><span class="op" id="7458385">.</span><span class="ident" id="7458386">N</span><span class="op" id="7458387">;</span>&nbsp;<span class="ident" id="7458389">i</span><span class="op" id="7458390">++</span>&nbsp;<span class="op" id="7458393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458397">jsValEscaper</span><span class="op" id="7458409">(</span><span class="string" id="7458410">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7458456">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458459">}</span><br>
<span class="lineno"></span><span class="op" id="7458461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7458464">func</span>&nbsp;<span class="ident" id="7458469">BenchmarkJSValEscaperWithObj</span><span class="op" id="7458497">(</span><span class="ident" id="7458498">b</span>&nbsp;<span class="op" id="7458500">*</span><span class="ident" id="7458501">testing</span><span class="op" id="7458508">.</span><span class="ident" id="7458509">B</span><span class="op" id="7458510">)</span>&nbsp;<span class="op" id="7458512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458515">o</span>&nbsp;<span class="op" id="7458517">:=</span>&nbsp;<span class="keyword" id="7458520">struct</span>&nbsp;<span class="op" id="7458527">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458531">S</span>&nbsp;<span class="builtintype" id="7458533">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458542">N</span>&nbsp;<span class="builtintype" id="7458544">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458549">}</span><span class="op" id="7458550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458554">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="7458681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7458685">42</span><span class="op" id="7458687">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7458693">for</span>&nbsp;<span class="ident" id="7458697">i</span>&nbsp;<span class="op" id="7458699">:=</span>&nbsp;<span class="num" id="7458702">0</span><span class="op" id="7458703">;</span>&nbsp;<span class="ident" id="7458705">i</span>&nbsp;<span class="op" id="7458707">&lt;</span>&nbsp;<span class="ident" id="7458709">b</span><span class="op" id="7458710">.</span><span class="ident" id="7458711">N</span><span class="op" id="7458712">;</span>&nbsp;<span class="ident" id="7458714">i</span><span class="op" id="7458715">++</span>&nbsp;<span class="op" id="7458718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458722">jsValEscaper</span><span class="op" id="7458734">(</span><span class="ident" id="7458735">o</span><span class="op" id="7458736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458739">}</span><br>
<span class="lineno"></span><span class="op" id="7458741">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7458744">func</span>&nbsp;<span class="ident" id="7458749">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="7458787">(</span><span class="ident" id="7458788">b</span>&nbsp;<span class="op" id="7458790">*</span><span class="ident" id="7458791">testing</span><span class="op" id="7458798">.</span><span class="ident" id="7458799">B</span><span class="op" id="7458800">)</span>&nbsp;<span class="op" id="7458802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458805">o</span>&nbsp;<span class="op" id="7458807">:=</span>&nbsp;<span class="keyword" id="7458810">struct</span>&nbsp;<span class="op" id="7458817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458821">S</span>&nbsp;<span class="builtintype" id="7458823">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458832">N</span>&nbsp;<span class="builtintype" id="7458834">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458839">}</span><span class="op" id="7458840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458844">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7458890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7458894">42</span><span class="op" id="7458896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7458902">for</span>&nbsp;<span class="ident" id="7458906">i</span>&nbsp;<span class="op" id="7458908">:=</span>&nbsp;<span class="num" id="7458911">0</span><span class="op" id="7458912">;</span>&nbsp;<span class="ident" id="7458914">i</span>&nbsp;<span class="op" id="7458916">&lt;</span>&nbsp;<span class="ident" id="7458918">b</span><span class="op" id="7458919">.</span><span class="ident" id="7458920">N</span><span class="op" id="7458921">;</span>&nbsp;<span class="ident" id="7458923">i</span><span class="op" id="7458924">++</span>&nbsp;<span class="op" id="7458927">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458931">jsValEscaper</span><span class="op" id="7458943">(</span><span class="ident" id="7458944">o</span><span class="op" id="7458945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458948">}</span><br>
<span class="lineno"></span><span class="op" id="7458950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7458953">func</span>&nbsp;<span class="ident" id="7458958">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="7458989">(</span><span class="ident" id="7458990">b</span>&nbsp;<span class="op" id="7458992">*</span><span class="ident" id="7458993">testing</span><span class="op" id="7459000">.</span><span class="ident" id="7459001">B</span><span class="op" id="7459002">)</span>&nbsp;<span class="op" id="7459004">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7459007">for</span>&nbsp;<span class="ident" id="7459011">i</span>&nbsp;<span class="op" id="7459013">:=</span>&nbsp;<span class="num" id="7459016">0</span><span class="op" id="7459017">;</span>&nbsp;<span class="ident" id="7459019">i</span>&nbsp;<span class="op" id="7459021">&lt;</span>&nbsp;<span class="ident" id="7459023">b</span><span class="op" id="7459024">.</span><span class="ident" id="7459025">N</span><span class="op" id="7459026">;</span>&nbsp;<span class="ident" id="7459028">i</span><span class="op" id="7459029">++</span>&nbsp;<span class="op" id="7459032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459036">jsStrEscaper</span><span class="op" id="7459048">(</span><span class="string" id="7459049">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="7459096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459099">}</span><br>
<span class="lineno"></span><span class="op" id="7459101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="7459104">func</span>&nbsp;<span class="ident" id="7459109">BenchmarkJSStrEscaper</span><span class="op" id="7459130">(</span><span class="ident" id="7459131">b</span>&nbsp;<span class="op" id="7459133">*</span><span class="ident" id="7459134">testing</span><span class="op" id="7459141">.</span><span class="ident" id="7459142">B</span><span class="op" id="7459143">)</span>&nbsp;<span class="op" id="7459145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7459148">for</span>&nbsp;<span class="ident" id="7459152">i</span>&nbsp;<span class="op" id="7459154">:=</span>&nbsp;<span class="num" id="7459157">0</span><span class="op" id="7459158">;</span>&nbsp;<span class="ident" id="7459160">i</span>&nbsp;<span class="op" id="7459162">&lt;</span>&nbsp;<span class="ident" id="7459164">b</span><span class="op" id="7459165">.</span><span class="ident" id="7459166">N</span><span class="op" id="7459167">;</span>&nbsp;<span class="ident" id="7459169">i</span><span class="op" id="7459170">++</span>&nbsp;<span class="op" id="7459173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459177">jsStrEscaper</span><span class="op" id="7459189">(</span><span class="string" id="7459190">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7459311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459314">}</span><br>
<span class="lineno"></span><span class="op" id="7459316">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="7459319">func</span>&nbsp;<span class="ident" id="7459324">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="7459358">(</span><span class="ident" id="7459359">b</span>&nbsp;<span class="op" id="7459361">*</span><span class="ident" id="7459362">testing</span><span class="op" id="7459369">.</span><span class="ident" id="7459370">B</span><span class="op" id="7459371">)</span>&nbsp;<span class="op" id="7459373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7459376">for</span>&nbsp;<span class="ident" id="7459380">i</span>&nbsp;<span class="op" id="7459382">:=</span>&nbsp;<span class="num" id="7459385">0</span><span class="op" id="7459386">;</span>&nbsp;<span class="ident" id="7459388">i</span>&nbsp;<span class="op" id="7459390">&lt;</span>&nbsp;<span class="ident" id="7459392">b</span><span class="op" id="7459393">.</span><span class="ident" id="7459394">N</span><span class="op" id="7459395">;</span>&nbsp;<span class="ident" id="7459397">i</span><span class="op" id="7459398">++</span>&nbsp;<span class="op" id="7459401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459405">jsRegexpEscaper</span><span class="op" id="7459420">(</span><span class="string" id="7459421">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="7459467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459470">}</span><br>
<span class="lineno">395</span><span class="op" id="7459472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7459475">func</span>&nbsp;<span class="ident" id="7459480">BenchmarkJSRegexpEscaper</span><span class="op" id="7459504">(</span><span class="ident" id="7459505">b</span>&nbsp;<span class="op" id="7459507">*</span><span class="ident" id="7459508">testing</span><span class="op" id="7459515">.</span><span class="ident" id="7459516">B</span><span class="op" id="7459517">)</span>&nbsp;<span class="op" id="7459519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7459522">for</span>&nbsp;<span class="ident" id="7459526">i</span>&nbsp;<span class="op" id="7459528">:=</span>&nbsp;<span class="num" id="7459531">0</span><span class="op" id="7459532">;</span>&nbsp;<span class="ident" id="7459534">i</span>&nbsp;<span class="op" id="7459536">&lt;</span>&nbsp;<span class="ident" id="7459538">b</span><span class="op" id="7459539">.</span><span class="ident" id="7459540">N</span><span class="op" id="7459541">;</span>&nbsp;<span class="ident" id="7459543">i</span><span class="op" id="7459544">++</span>&nbsp;<span class="op" id="7459547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459551">jsRegexpEscaper</span><span class="op" id="7459566">(</span><span class="string" id="7459567">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="7459688">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459691">}</span><br>
<span class="lineno"></span><span class="op" id="7459693">}</span>
</div>
</body>
</html>
