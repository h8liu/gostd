<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html" class="current">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6634900">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6634955">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6635009">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6635060">package</span>&nbsp;<span class="ident" id="6635068">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6635073">import</span>&nbsp;<span class="op" id="6635080">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635083">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635091">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635098">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635104">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635115">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635126">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6635136">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6635139">//&nbsp;If&nbsp;an&nbsp;IPv6&nbsp;tunnel&nbsp;is&nbsp;running,&nbsp;we&nbsp;can&nbsp;try&nbsp;dialing&nbsp;a&nbsp;real&nbsp;IPv6&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="6635212">var</span>&nbsp;<span class="ident" id="6635216">testIPv6</span>&nbsp;<span class="op" id="6635225">=</span>&nbsp;<span class="ident" id="6635227"><a href="/gostd/net/dialgoogle_test.go.html#6635083">flag</a></span><span class="op" id="6635231">.</span><span class="ident" id="6635232"><a href="/gostd/flag/flag.go.html#3948389">Bool</a></span><span class="op" id="6635236">(</span><span class="string" id="6635237">&#34;ipv6&#34;</span><span class="op" id="6635243">,</span>&nbsp;<span class="builtintype" id="6635245">false</span><span class="op" id="6635250">,</span>&nbsp;<span class="string" id="6635252">&#34;assume&nbsp;ipv6&nbsp;tunnel&nbsp;is&nbsp;present&#34;</span><span class="op" id="6635283">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6635286">func</span>&nbsp;<span class="ident" id="6635291">TestResolveGoogle</span><span class="op" id="6635308">(</span><span class="ident" id="6635309">t</span>&nbsp;<span class="op" id="6635311">*</span><span class="ident" id="6635312"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6635319">.</span><span class="ident" id="6635320"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6635321">)</span>&nbsp;<span class="op" id="6635323">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635326">if</span>&nbsp;<span class="ident" id="6635329"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6635336">.</span><span class="ident" id="6635337"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6635342">(</span><span class="op" id="6635343">)</span>&nbsp;<span class="op" id="6635345">||</span>&nbsp;<span class="op" id="6635348">!</span><span class="op" id="6635349">*</span><span class="ident" id="6635350"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6635363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635367"><a href="/gostd/net/dialgoogle_test.go.html#6635309">t</a></span><span class="op" id="6635368">.</span><span class="ident" id="6635369"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6635373">(</span><span class="string" id="6635374">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6635415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635422">for</span>&nbsp;<span class="ident" id="6635426">_</span><span class="op" id="6635427">,</span>&nbsp;<span class="ident" id="6635429">network</span>&nbsp;<span class="op" id="6635437">:=</span>&nbsp;<span class="keyword" id="6635440">range</span>&nbsp;<span class="op" id="6635446">[</span><span class="op" id="6635447">]</span><span class="builtintype" id="6635448">string</span><span class="op" id="6635454">{</span><span class="string" id="6635455">&#34;tcp&#34;</span><span class="op" id="6635460">,</span>&nbsp;<span class="string" id="6635462">&#34;tcp4&#34;</span><span class="op" id="6635468">,</span>&nbsp;<span class="string" id="6635470">&#34;tcp6&#34;</span><span class="op" id="6635476">}</span>&nbsp;<span class="op" id="6635478">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635482">addr</span><span class="op" id="6635486">,</span>&nbsp;<span class="ident" id="6635488">err</span>&nbsp;<span class="op" id="6635492">:=</span>&nbsp;<span class="ident" id="6635495"><a href="/gostd/net/tcpsock.go.html#3374317">ResolveTCPAddr</a></span><span class="op" id="6635509">(</span><span class="ident" id="6635510"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span><span class="op" id="6635517">,</span>&nbsp;<span class="string" id="6635519">&#34;www.google.com:http&#34;</span><span class="op" id="6635540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635544">if</span>&nbsp;<span class="ident" id="6635547"><a href="/gostd/net/dialgoogle_test.go.html#6635488">err</a></span>&nbsp;<span class="op" id="6635551">!=</span>&nbsp;<span class="builtintype" id="6635554">nil</span>&nbsp;<span class="op" id="6635558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635563">if</span>&nbsp;<span class="op" id="6635566">(</span><span class="ident" id="6635567"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span>&nbsp;<span class="op" id="6635575">==</span>&nbsp;<span class="string" id="6635578">&#34;tcp&#34;</span>&nbsp;<span class="op" id="6635584">||</span>&nbsp;<span class="ident" id="6635587"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span>&nbsp;<span class="op" id="6635595">==</span>&nbsp;<span class="string" id="6635598">&#34;tcp4&#34;</span><span class="op" id="6635604">)</span>&nbsp;<span class="op" id="6635606">&amp;&amp;</span>&nbsp;<span class="op" id="6635609">!</span><span class="ident" id="6635610"><a href="/gostd/net/ipsock.go.html#3309600">supportsIPv4</a></span>&nbsp;<span class="op" id="6635623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635629"><a href="/gostd/net/dialgoogle_test.go.html#6635309">t</a></span><span class="op" id="6635630">.</span><span class="ident" id="6635631"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6635635">(</span><span class="string" id="6635636">&#34;ipv4&nbsp;is&nbsp;not&nbsp;supported:&nbsp;%v&#34;</span><span class="op" id="6635663">,</span>&nbsp;<span class="ident" id="6635665"><a href="/gostd/net/dialgoogle_test.go.html#6635488">err</a></span><span class="op" id="6635668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635673">}</span>&nbsp;<span class="keyword" id="6635675">else</span>&nbsp;<span class="keyword" id="6635680">if</span>&nbsp;<span class="ident" id="6635683"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span>&nbsp;<span class="op" id="6635691">==</span>&nbsp;<span class="string" id="6635694">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6635701">&amp;&amp;</span>&nbsp;<span class="op" id="6635704">!</span><span class="ident" id="6635705"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6635718">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635724"><a href="/gostd/net/dialgoogle_test.go.html#6635309">t</a></span><span class="op" id="6635725">.</span><span class="ident" id="6635726"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6635730">(</span><span class="string" id="6635731">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported:&nbsp;%v&#34;</span><span class="op" id="6635758">,</span>&nbsp;<span class="ident" id="6635760"><a href="/gostd/net/dialgoogle_test.go.html#6635488">err</a></span><span class="op" id="6635763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635768">}</span>&nbsp;<span class="keyword" id="6635770">else</span>&nbsp;<span class="op" id="6635775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635781"><a href="/gostd/net/dialgoogle_test.go.html#6635309">t</a></span><span class="op" id="6635782">.</span><span class="ident" id="6635783"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6635789">(</span><span class="string" id="6635790">&#34;ResolveTCPAddr&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6635817">,</span>&nbsp;<span class="ident" id="6635819"><a href="/gostd/net/dialgoogle_test.go.html#6635488">err</a></span><span class="op" id="6635822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635832">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635847">if</span>&nbsp;<span class="op" id="6635850">(</span><span class="ident" id="6635851"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span>&nbsp;<span class="op" id="6635859">==</span>&nbsp;<span class="string" id="6635862">&#34;tcp&#34;</span>&nbsp;<span class="op" id="6635868">||</span>&nbsp;<span class="ident" id="6635871"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span>&nbsp;<span class="op" id="6635879">==</span>&nbsp;<span class="string" id="6635882">&#34;tcp4&#34;</span><span class="op" id="6635888">)</span>&nbsp;<span class="op" id="6635890">&amp;&amp;</span>&nbsp;<span class="ident" id="6635893"><a href="/gostd/net/dialgoogle_test.go.html#6635482">addr</a></span><span class="op" id="6635897">.</span><span class="ident" id="6635898"><a href="/gostd/net/tcpsock.go.html#3373487">IP</a></span><span class="op" id="6635900">.</span><span class="ident" id="6635901"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="6635904">(</span><span class="op" id="6635905">)</span>&nbsp;<span class="op" id="6635907">==</span>&nbsp;<span class="builtintype" id="6635910">nil</span>&nbsp;<span class="op" id="6635914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635919"><a href="/gostd/net/dialgoogle_test.go.html#6635309">t</a></span><span class="op" id="6635920">.</span><span class="ident" id="6635921"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6635927">(</span><span class="string" id="6635928">&#34;got&nbsp;%v;&nbsp;expected&nbsp;an&nbsp;IPv4&nbsp;address&nbsp;on&nbsp;%v&#34;</span><span class="op" id="6635968">,</span>&nbsp;<span class="ident" id="6635970"><a href="/gostd/net/dialgoogle_test.go.html#6635482">addr</a></span><span class="op" id="6635974">,</span>&nbsp;<span class="ident" id="6635976"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span><span class="op" id="6635983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635987">}</span>&nbsp;<span class="keyword" id="6635989">else</span>&nbsp;<span class="keyword" id="6635994">if</span>&nbsp;<span class="ident" id="6635997"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span>&nbsp;<span class="op" id="6636005">==</span>&nbsp;<span class="string" id="6636008">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6636015">&amp;&amp;</span>&nbsp;<span class="op" id="6636018">(</span><span class="ident" id="6636019"><a href="/gostd/net/dialgoogle_test.go.html#6635482">addr</a></span><span class="op" id="6636023">.</span><span class="ident" id="6636024"><a href="/gostd/net/tcpsock.go.html#3373487">IP</a></span><span class="op" id="6636026">.</span><span class="ident" id="6636027"><a href="/gostd/net/ip.go.html#3290366">To16</a></span><span class="op" id="6636031">(</span><span class="op" id="6636032">)</span>&nbsp;<span class="op" id="6636034">==</span>&nbsp;<span class="builtintype" id="6636037">nil</span>&nbsp;<span class="op" id="6636041">||</span>&nbsp;<span class="ident" id="6636044"><a href="/gostd/net/dialgoogle_test.go.html#6635482">addr</a></span><span class="op" id="6636048">.</span><span class="ident" id="6636049"><a href="/gostd/net/tcpsock.go.html#3373487">IP</a></span><span class="op" id="6636051">.</span><span class="ident" id="6636052"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="6636055">(</span><span class="op" id="6636056">)</span>&nbsp;<span class="op" id="6636058">!=</span>&nbsp;<span class="builtintype" id="6636061">nil</span><span class="op" id="6636064">)</span>&nbsp;<span class="op" id="6636066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636071"><a href="/gostd/net/dialgoogle_test.go.html#6635309">t</a></span><span class="op" id="6636072">.</span><span class="ident" id="6636073"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6636079">(</span><span class="string" id="6636080">&#34;got&nbsp;%v;&nbsp;expected&nbsp;an&nbsp;IPv6&nbsp;address&nbsp;on&nbsp;%v&#34;</span><span class="op" id="6636120">,</span>&nbsp;<span class="ident" id="6636122"><a href="/gostd/net/dialgoogle_test.go.html#6635482">addr</a></span><span class="op" id="6636126">,</span>&nbsp;<span class="ident" id="6636128"><a href="/gostd/net/dialgoogle_test.go.html#6635429">network</a></span><span class="op" id="6636135">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636142">}</span><br>
<span class="lineno"></span><span class="op" id="6636144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6636147">func</span>&nbsp;<span class="ident" id="6636152">TestDialGoogle</span><span class="op" id="6636166">(</span><span class="ident" id="6636167">t</span>&nbsp;<span class="op" id="6636169">*</span><span class="ident" id="6636170"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6636177">.</span><span class="ident" id="6636178"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6636179">)</span>&nbsp;<span class="op" id="6636181">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636184">if</span>&nbsp;<span class="ident" id="6636187"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6636194">.</span><span class="ident" id="6636195"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6636200">(</span><span class="op" id="6636201">)</span>&nbsp;<span class="op" id="6636203">||</span>&nbsp;<span class="op" id="6636206">!</span><span class="op" id="6636207">*</span><span class="ident" id="6636208"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6636221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636225"><a href="/gostd/net/dialgoogle_test.go.html#6636167">t</a></span><span class="op" id="6636226">.</span><span class="ident" id="6636227"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6636231">(</span><span class="string" id="6636232">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6636273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636280">d</span>&nbsp;<span class="op" id="6636282">:=</span>&nbsp;<span class="op" id="6636285">&amp;</span><span class="ident" id="6636286"><a href="/gostd/net/dial.go.html#3199756">Dialer</a></span><span class="op" id="6636292">{</span><span class="ident" id="6636293"><a href="/gostd/net/dial.go.html#3200841">DualStack</a></span><span class="op" id="6636302">:</span>&nbsp;<span class="builtintype" id="6636304">true</span><span class="op" id="6636308">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636311">for</span>&nbsp;<span class="ident" id="6636315">_</span><span class="op" id="6636316">,</span>&nbsp;<span class="ident" id="6636318">network</span>&nbsp;<span class="op" id="6636326">:=</span>&nbsp;<span class="keyword" id="6636329">range</span>&nbsp;<span class="op" id="6636335">[</span><span class="op" id="6636336">]</span><span class="builtintype" id="6636337">string</span><span class="op" id="6636343">{</span><span class="string" id="6636344">&#34;tcp&#34;</span><span class="op" id="6636349">,</span>&nbsp;<span class="string" id="6636351">&#34;tcp4&#34;</span><span class="op" id="6636357">,</span>&nbsp;<span class="string" id="6636359">&#34;tcp6&#34;</span><span class="op" id="6636365">}</span>&nbsp;<span class="op" id="6636367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636371">if</span>&nbsp;<span class="ident" id="6636374"><a href="/gostd/net/dialgoogle_test.go.html#6636318">network</a></span>&nbsp;<span class="op" id="6636382">==</span>&nbsp;<span class="string" id="6636385">&#34;tcp&#34;</span>&nbsp;<span class="op" id="6636391">&amp;&amp;</span>&nbsp;<span class="op" id="6636394">!</span><span class="ident" id="6636395"><a href="/gostd/net/ipsock.go.html#3309600">supportsIPv4</a></span>&nbsp;<span class="op" id="6636408">&amp;&amp;</span>&nbsp;<span class="op" id="6636411">!</span><span class="ident" id="6636412"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6636425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636430"><a href="/gostd/net/dialgoogle_test.go.html#6636167">t</a></span><span class="op" id="6636431">.</span><span class="ident" id="6636432"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6636436">(</span><span class="string" id="6636437">&#34;skipping&nbsp;test;&nbsp;both&nbsp;ipv4&nbsp;and&nbsp;ipv6&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6636490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636495">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636506">}</span>&nbsp;<span class="keyword" id="6636508">else</span>&nbsp;<span class="keyword" id="6636513">if</span>&nbsp;<span class="ident" id="6636516"><a href="/gostd/net/dialgoogle_test.go.html#6636318">network</a></span>&nbsp;<span class="op" id="6636524">==</span>&nbsp;<span class="string" id="6636527">&#34;tcp4&#34;</span>&nbsp;<span class="op" id="6636534">&amp;&amp;</span>&nbsp;<span class="op" id="6636537">!</span><span class="ident" id="6636538"><a href="/gostd/net/ipsock.go.html#3309600">supportsIPv4</a></span>&nbsp;<span class="op" id="6636551">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636556"><a href="/gostd/net/dialgoogle_test.go.html#6636167">t</a></span><span class="op" id="6636557">.</span><span class="ident" id="6636558"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6636562">(</span><span class="string" id="6636563">&#34;skipping&nbsp;test;&nbsp;ipv4&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6636601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636606">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636617">}</span>&nbsp;<span class="keyword" id="6636619">else</span>&nbsp;<span class="keyword" id="6636624">if</span>&nbsp;<span class="ident" id="6636627"><a href="/gostd/net/dialgoogle_test.go.html#6636318">network</a></span>&nbsp;<span class="op" id="6636635">==</span>&nbsp;<span class="string" id="6636638">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6636645">&amp;&amp;</span>&nbsp;<span class="op" id="6636648">!</span><span class="ident" id="6636649"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6636662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636667"><a href="/gostd/net/dialgoogle_test.go.html#6636167">t</a></span><span class="op" id="6636668">.</span><span class="ident" id="6636669"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6636673">(</span><span class="string" id="6636674">&#34;skipping&nbsp;test;&nbsp;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6636712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636717">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636728">}</span>&nbsp;<span class="keyword" id="6636730">else</span>&nbsp;<span class="keyword" id="6636735">if</span>&nbsp;<span class="ident" id="6636738"><a href="/gostd/net/dialgoogle_test.go.html#6636318">network</a></span>&nbsp;<span class="op" id="6636746">==</span>&nbsp;<span class="string" id="6636749">&#34;tcp6&#34;</span>&nbsp;<span class="op" id="6636756">&amp;&amp;</span>&nbsp;<span class="op" id="6636759">!</span><span class="op" id="6636760">*</span><span class="ident" id="6636761"><a href="/gostd/net/dialgoogle_test.go.html#6635216">testIPv6</a></span>&nbsp;<span class="op" id="6636770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636775"><a href="/gostd/net/dialgoogle_test.go.html#6636167">t</a></span><span class="op" id="6636776">.</span><span class="ident" id="6636777"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6636781">(</span><span class="string" id="6636782">&#34;test&nbsp;disabled;&nbsp;use&nbsp;-ipv6&nbsp;to&nbsp;enable&#34;</span><span class="op" id="6636818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636823">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636838">if</span>&nbsp;<span class="ident" id="6636841">c</span><span class="op" id="6636842">,</span>&nbsp;<span class="ident" id="6636844">err</span>&nbsp;<span class="op" id="6636848">:=</span>&nbsp;<span class="ident" id="6636851"><a href="/gostd/net/dialgoogle_test.go.html#6636280">d</a></span><span class="op" id="6636852">.</span><span class="ident" id="6636853"><a href="/gostd/net/dial.go.html#3203959">Dial</a></span><span class="op" id="6636857">(</span><span class="ident" id="6636858"><a href="/gostd/net/dialgoogle_test.go.html#6636318">network</a></span><span class="op" id="6636865">,</span>&nbsp;<span class="string" id="6636867">&#34;www.google.com:http&#34;</span><span class="op" id="6636888">)</span><span class="op" id="6636889">;</span>&nbsp;<span class="ident" id="6636891"><a href="/gostd/net/dialgoogle_test.go.html#6636844">err</a></span>&nbsp;<span class="op" id="6636895">!=</span>&nbsp;<span class="builtintype" id="6636898">nil</span>&nbsp;<span class="op" id="6636902">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636907"><a href="/gostd/net/dialgoogle_test.go.html#6636167">t</a></span><span class="op" id="6636908">.</span><span class="ident" id="6636909"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6636915">(</span><span class="string" id="6636916">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6636933">,</span>&nbsp;<span class="ident" id="6636935"><a href="/gostd/net/dialgoogle_test.go.html#6636844">err</a></span><span class="op" id="6636938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636942">}</span>&nbsp;<span class="keyword" id="6636944">else</span>&nbsp;<span class="op" id="6636949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636954"><a href="/gostd/net/dialgoogle_test.go.html#6636841">c</a></span><span class="op" id="6636955">.</span><span class="ident" id="6636956"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6636961">(</span><span class="op" id="6636962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636969">}</span><br>
<span class="lineno">70</span><span class="op" id="6636971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6636974">//&nbsp;fd&nbsp;is&nbsp;already&nbsp;connected&nbsp;to&nbsp;the&nbsp;destination,&nbsp;port&nbsp;80.</span><br>
<span class="lineno"></span><span class="comment" id="6637030">//&nbsp;Run&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;to&nbsp;fetch&nbsp;the&nbsp;appropriate&nbsp;page.</span><br>
<span class="lineno"></span><span class="keyword" id="6637084">func</span>&nbsp;<span class="ident" id="6637089">fetchGoogle</span><span class="op" id="6637100">(</span><span class="ident" id="6637101">t</span>&nbsp;<span class="op" id="6637103">*</span><span class="ident" id="6637104"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6637111">.</span><span class="ident" id="6637112"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6637113">,</span>&nbsp;<span class="ident" id="6637115">fd</span>&nbsp;<span class="ident" id="6637118"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="6637122">,</span>&nbsp;<span class="ident" id="6637124">network</span><span class="op" id="6637131">,</span>&nbsp;<span class="ident" id="6637133">addr</span>&nbsp;<span class="builtintype" id="6637138">string</span><span class="op" id="6637144">)</span>&nbsp;<span class="op" id="6637146">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637149">req</span>&nbsp;<span class="op" id="6637153">:=</span>&nbsp;<span class="op" id="6637156">[</span><span class="op" id="6637157">]</span><span class="builtintype" id="6637158">byte</span><span class="op" id="6637162">(</span><span class="string" id="6637163">&#34;GET&nbsp;/robots.txt&nbsp;HTTP/1.0\r\nHost:&nbsp;www.google.com\r\n\r\n&#34;</span><span class="op" id="6637221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637224">n</span><span class="op" id="6637225">,</span>&nbsp;<span class="ident" id="6637227">err</span>&nbsp;<span class="op" id="6637231">:=</span>&nbsp;<span class="ident" id="6637234"><a href="/gostd/net/dialgoogle_test.go.html#6637115">fd</a></span><span class="op" id="6637236">.</span><span class="ident" id="6637237"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6637242">(</span><span class="ident" id="6637243"><a href="/gostd/net/dialgoogle_test.go.html#6637149">req</a></span><span class="op" id="6637246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637250">buf</span>&nbsp;<span class="op" id="6637254">:=</span>&nbsp;<span class="builtinfunc" id="6637257">make</span><span class="op" id="6637261">(</span><span class="op" id="6637262">[</span><span class="op" id="6637263">]</span><span class="builtintype" id="6637264">byte</span><span class="op" id="6637268">,</span>&nbsp;<span class="num" id="6637270">1000</span><span class="op" id="6637274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637277"><a href="/gostd/net/dialgoogle_test.go.html#6637224">n</a></span><span class="op" id="6637278">,</span>&nbsp;<span class="ident" id="6637280"><a href="/gostd/net/dialgoogle_test.go.html#6637227">err</a></span>&nbsp;<span class="op" id="6637284">=</span>&nbsp;<span class="ident" id="6637286"><a href="/gostd/net/dialgoogle_test.go.html#6635098">io</a></span><span class="op" id="6637288">.</span><span class="ident" id="6637289"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="6637297">(</span><span class="ident" id="6637298"><a href="/gostd/net/dialgoogle_test.go.html#6637115">fd</a></span><span class="op" id="6637300">,</span>&nbsp;<span class="ident" id="6637302"><a href="/gostd/net/dialgoogle_test.go.html#6637250">buf</a></span><span class="op" id="6637305">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6637309">if</span>&nbsp;<span class="ident" id="6637312"><a href="/gostd/net/dialgoogle_test.go.html#6637224">n</a></span>&nbsp;<span class="op" id="6637314">&lt;</span>&nbsp;<span class="num" id="6637316">1000</span>&nbsp;<span class="op" id="6637321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637325"><a href="/gostd/net/dialgoogle_test.go.html#6637101">t</a></span><span class="op" id="6637326">.</span><span class="ident" id="6637327"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6637333">(</span><span class="string" id="6637334">&#34;fetchGoogle:&nbsp;short&nbsp;HTTP&nbsp;read&nbsp;from&nbsp;%s&nbsp;%s&nbsp;-&nbsp;%v&#34;</span><span class="op" id="6637380">,</span>&nbsp;<span class="ident" id="6637382"><a href="/gostd/net/dialgoogle_test.go.html#6637124">network</a></span><span class="op" id="6637389">,</span>&nbsp;<span class="ident" id="6637391"><a href="/gostd/net/dialgoogle_test.go.html#6637133">addr</a></span><span class="op" id="6637395">,</span>&nbsp;<span class="ident" id="6637397"><a href="/gostd/net/dialgoogle_test.go.html#6637227">err</a></span><span class="op" id="6637400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6637404">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6637412">}</span><br>
<span class="lineno">85</span><span class="op" id="6637414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6637417">func</span>&nbsp;<span class="ident" id="6637422">doDial</span><span class="op" id="6637428">(</span><span class="ident" id="6637429">t</span>&nbsp;<span class="op" id="6637431">*</span><span class="ident" id="6637432"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6637439">.</span><span class="ident" id="6637440"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6637441">,</span>&nbsp;<span class="ident" id="6637443">network</span><span class="op" id="6637450">,</span>&nbsp;<span class="ident" id="6637452">addr</span>&nbsp;<span class="builtintype" id="6637457">string</span><span class="op" id="6637463">)</span>&nbsp;<span class="op" id="6637465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637468">fd</span><span class="op" id="6637470">,</span>&nbsp;<span class="ident" id="6637472">err</span>&nbsp;<span class="op" id="6637476">:=</span>&nbsp;<span class="ident" id="6637479"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6637483">(</span><span class="ident" id="6637484"><a href="/gostd/net/dialgoogle_test.go.html#6637443">network</a></span><span class="op" id="6637491">,</span>&nbsp;<span class="ident" id="6637493"><a href="/gostd/net/dialgoogle_test.go.html#6637452">addr</a></span><span class="op" id="6637497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6637500">if</span>&nbsp;<span class="ident" id="6637503"><a href="/gostd/net/dialgoogle_test.go.html#6637472">err</a></span>&nbsp;<span class="op" id="6637507">!=</span>&nbsp;<span class="builtintype" id="6637510">nil</span>&nbsp;<span class="op" id="6637514">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637518"><a href="/gostd/net/dialgoogle_test.go.html#6637429">t</a></span><span class="op" id="6637519">.</span><span class="ident" id="6637520"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6637526">(</span><span class="string" id="6637527">&#34;Dial(%q,&nbsp;%q,&nbsp;%q)&nbsp;=&nbsp;_,&nbsp;%v&#34;</span><span class="op" id="6637553">,</span>&nbsp;<span class="ident" id="6637555"><a href="/gostd/net/dialgoogle_test.go.html#6637443">network</a></span><span class="op" id="6637562">,</span>&nbsp;<span class="string" id="6637564">&#34;&#34;</span><span class="op" id="6637566">,</span>&nbsp;<span class="ident" id="6637568"><a href="/gostd/net/dialgoogle_test.go.html#6637452">addr</a></span><span class="op" id="6637572">,</span>&nbsp;<span class="ident" id="6637574"><a href="/gostd/net/dialgoogle_test.go.html#6637472">err</a></span><span class="op" id="6637577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6637581">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6637589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637592"><a href="/gostd/net/dialgoogle_test.go.html#6637089">fetchGoogle</a></span><span class="op" id="6637603">(</span><span class="ident" id="6637604"><a href="/gostd/net/dialgoogle_test.go.html#6637429">t</a></span><span class="op" id="6637605">,</span>&nbsp;<span class="ident" id="6637607"><a href="/gostd/net/dialgoogle_test.go.html#6637468">fd</a></span><span class="op" id="6637609">,</span>&nbsp;<span class="ident" id="6637611"><a href="/gostd/net/dialgoogle_test.go.html#6637443">network</a></span><span class="op" id="6637618">,</span>&nbsp;<span class="ident" id="6637620"><a href="/gostd/net/dialgoogle_test.go.html#6637452">addr</a></span><span class="op" id="6637624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637627"><a href="/gostd/net/dialgoogle_test.go.html#6637468">fd</a></span><span class="op" id="6637629">.</span><span class="ident" id="6637630"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6637635">(</span><span class="op" id="6637636">)</span><br>
<span class="lineno">95</span><span class="op" id="6637638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6637641">var</span>&nbsp;<span class="ident" id="6637645">googleaddrsipv4</span>&nbsp;<span class="op" id="6637661">=</span>&nbsp;<span class="op" id="6637663">[</span><span class="op" id="6637664">]</span><span class="builtintype" id="6637665">string</span><span class="op" id="6637671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637674">&#34;%d.%d.%d.%d:80&#34;</span><span class="op" id="6637690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637693">&#34;www.google.com:80&#34;</span><span class="op" id="6637712">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637715">&#34;%d.%d.%d.%d:http&#34;</span><span class="op" id="6637733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637736">&#34;www.google.com:http&#34;</span><span class="op" id="6637757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637760">&#34;%03d.%03d.%03d.%03d:0080&#34;</span><span class="op" id="6637786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637789">&#34;[::ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6637814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637817">&#34;[::ffff:%02x%02x:%02x%02x]:80&#34;</span><span class="op" id="6637848">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637851">&#34;[0:0:0:0:0000:ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6637887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637890">&#34;[0:0:0:0:000000:ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6637928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637931">&#34;[0:0:0:0::ffff:%d.%d.%d.%d]:80&#34;</span><span class="op" id="6637963">,</span><br>
<span class="lineno"></span><span class="op" id="6637965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="6637968">func</span>&nbsp;<span class="ident" id="6637973">TestDialGoogleIPv4</span><span class="op" id="6637991">(</span><span class="ident" id="6637992">t</span>&nbsp;<span class="op" id="6637994">*</span><span class="ident" id="6637995"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6638002">.</span><span class="ident" id="6638003"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6638004">)</span>&nbsp;<span class="op" id="6638006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638009">if</span>&nbsp;<span class="ident" id="6638012"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6638019">.</span><span class="ident" id="6638020"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6638025">(</span><span class="op" id="6638026">)</span>&nbsp;<span class="op" id="6638028">||</span>&nbsp;<span class="op" id="6638031">!</span><span class="op" id="6638032">*</span><span class="ident" id="6638033"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6638046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638050"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638051">.</span><span class="ident" id="6638052"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6638056">(</span><span class="string" id="6638057">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6638098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6638105">//&nbsp;Insert&nbsp;an&nbsp;actual&nbsp;IPv4&nbsp;address&nbsp;for&nbsp;google.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6638154">//&nbsp;into&nbsp;the&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638174">addrs</span><span class="op" id="6638179">,</span>&nbsp;<span class="ident" id="6638181">err</span>&nbsp;<span class="op" id="6638185">:=</span>&nbsp;<span class="ident" id="6638188"><a href="/gostd/net/lookup.go.html#3324041">LookupIP</a></span><span class="op" id="6638196">(</span><span class="string" id="6638197">&#34;www.google.com&#34;</span><span class="op" id="6638213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638216">if</span>&nbsp;<span class="ident" id="6638219"><a href="/gostd/net/dialgoogle_test.go.html#6638181">err</a></span>&nbsp;<span class="op" id="6638223">!=</span>&nbsp;<span class="builtintype" id="6638226">nil</span>&nbsp;<span class="op" id="6638230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638234"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638235">.</span><span class="ident" id="6638236"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6638242">(</span><span class="string" id="6638243">&#34;lookup&nbsp;www.google.com:&nbsp;%v&#34;</span><span class="op" id="6638270">,</span>&nbsp;<span class="ident" id="6638272"><a href="/gostd/net/dialgoogle_test.go.html#6638181">err</a></span><span class="op" id="6638275">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638281">var</span>&nbsp;<span class="ident" id="6638285">ip</span>&nbsp;<span class="ident" id="6638288"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638292">for</span>&nbsp;<span class="ident" id="6638296">_</span><span class="op" id="6638297">,</span>&nbsp;<span class="ident" id="6638299">addr</span>&nbsp;<span class="op" id="6638304">:=</span>&nbsp;<span class="keyword" id="6638307">range</span>&nbsp;<span class="ident" id="6638313"><a href="/gostd/net/dialgoogle_test.go.html#6638174">addrs</a></span>&nbsp;<span class="op" id="6638319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638323">if</span>&nbsp;<span class="ident" id="6638326">x</span>&nbsp;<span class="op" id="6638328">:=</span>&nbsp;<span class="ident" id="6638331"><a href="/gostd/net/dialgoogle_test.go.html#6638299">addr</a></span><span class="op" id="6638335">.</span><span class="ident" id="6638336"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="6638339">(</span><span class="op" id="6638340">)</span><span class="op" id="6638341">;</span>&nbsp;<span class="ident" id="6638343"><a href="/gostd/net/dialgoogle_test.go.html#6638326">x</a></span>&nbsp;<span class="op" id="6638345">!=</span>&nbsp;<span class="builtintype" id="6638348">nil</span>&nbsp;<span class="op" id="6638352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638357"><a href="/gostd/net/dialgoogle_test.go.html#6638285">ip</a></span>&nbsp;<span class="op" id="6638360">=</span>&nbsp;<span class="ident" id="6638362"><a href="/gostd/net/dialgoogle_test.go.html#6638326">x</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638367">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638381">if</span>&nbsp;<span class="ident" id="6638384"><a href="/gostd/net/dialgoogle_test.go.html#6638285">ip</a></span>&nbsp;<span class="op" id="6638387">==</span>&nbsp;<span class="builtintype" id="6638390">nil</span>&nbsp;<span class="op" id="6638394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638398"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638399">.</span><span class="ident" id="6638400"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6638406">(</span><span class="string" id="6638407">&#34;no&nbsp;IPv4&nbsp;addresses&nbsp;for&nbsp;www.google.com&#34;</span><span class="op" id="6638445">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638452">for</span>&nbsp;<span class="ident" id="6638456">i</span><span class="op" id="6638457">,</span>&nbsp;<span class="ident" id="6638459">s</span>&nbsp;<span class="op" id="6638461">:=</span>&nbsp;<span class="keyword" id="6638464">range</span>&nbsp;<span class="ident" id="6638470"><a href="/gostd/net/dialgoogle_test.go.html#6637645">googleaddrsipv4</a></span>&nbsp;<span class="op" id="6638486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638490">if</span>&nbsp;<span class="ident" id="6638493"><a href="/gostd/net/dialgoogle_test.go.html#6635104">strings</a></span><span class="op" id="6638500">.</span><span class="ident" id="6638501"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="6638509">(</span><span class="ident" id="6638510"><a href="/gostd/net/dialgoogle_test.go.html#6638459">s</a></span><span class="op" id="6638511">,</span>&nbsp;<span class="string" id="6638513">&#34;%&#34;</span><span class="op" id="6638516">)</span>&nbsp;<span class="op" id="6638518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638523"><a href="/gostd/net/dialgoogle_test.go.html#6637645">googleaddrsipv4</a></span><span class="op" id="6638538">[</span><span class="ident" id="6638539"><a href="/gostd/net/dialgoogle_test.go.html#6638456">i</a></span><span class="op" id="6638540">]</span>&nbsp;<span class="op" id="6638542">=</span>&nbsp;<span class="ident" id="6638544"><a href="/gostd/net/dialgoogle_test.go.html#6635091">fmt</a></span><span class="op" id="6638547">.</span><span class="ident" id="6638548"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6638555">(</span><span class="ident" id="6638556"><a href="/gostd/net/dialgoogle_test.go.html#6638459">s</a></span><span class="op" id="6638557">,</span>&nbsp;<span class="ident" id="6638559"><a href="/gostd/net/dialgoogle_test.go.html#6638285">ip</a></span><span class="op" id="6638561">[</span><span class="num" id="6638562">0</span><span class="op" id="6638563">]</span><span class="op" id="6638564">,</span>&nbsp;<span class="ident" id="6638566"><a href="/gostd/net/dialgoogle_test.go.html#6638285">ip</a></span><span class="op" id="6638568">[</span><span class="num" id="6638569">1</span><span class="op" id="6638570">]</span><span class="op" id="6638571">,</span>&nbsp;<span class="ident" id="6638573"><a href="/gostd/net/dialgoogle_test.go.html#6638285">ip</a></span><span class="op" id="6638575">[</span><span class="num" id="6638576">2</span><span class="op" id="6638577">]</span><span class="op" id="6638578">,</span>&nbsp;<span class="ident" id="6638580"><a href="/gostd/net/dialgoogle_test.go.html#6638285">ip</a></span><span class="op" id="6638582">[</span><span class="num" id="6638583">3</span><span class="op" id="6638584">]</span><span class="op" id="6638585">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638596">for</span>&nbsp;<span class="ident" id="6638600">i</span>&nbsp;<span class="op" id="6638602">:=</span>&nbsp;<span class="num" id="6638605">0</span><span class="op" id="6638606">;</span>&nbsp;<span class="ident" id="6638608"><a href="/gostd/net/dialgoogle_test.go.html#6638600">i</a></span>&nbsp;<span class="op" id="6638610">&lt;</span>&nbsp;<span class="builtinfunc" id="6638612">len</span><span class="op" id="6638615">(</span><span class="ident" id="6638616"><a href="/gostd/net/dialgoogle_test.go.html#6637645">googleaddrsipv4</a></span><span class="op" id="6638631">)</span><span class="op" id="6638632">;</span>&nbsp;<span class="ident" id="6638634"><a href="/gostd/net/dialgoogle_test.go.html#6638600">i</a></span><span class="op" id="6638635">++</span>&nbsp;<span class="op" id="6638638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638642">addr</span>&nbsp;<span class="op" id="6638647">:=</span>&nbsp;<span class="ident" id="6638650"><a href="/gostd/net/dialgoogle_test.go.html#6637645">googleaddrsipv4</a></span><span class="op" id="6638665">[</span><span class="ident" id="6638666"><a href="/gostd/net/dialgoogle_test.go.html#6638600">i</a></span><span class="op" id="6638667">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638671">if</span>&nbsp;<span class="ident" id="6638674"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span>&nbsp;<span class="op" id="6638679">==</span>&nbsp;<span class="string" id="6638682">&#34;&#34;</span>&nbsp;<span class="op" id="6638685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638690">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638705"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638706">.</span><span class="ident" id="6638707"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6638711">(</span><span class="string" id="6638712">&#34;--&nbsp;%s&nbsp;--&#34;</span><span class="op" id="6638722">,</span>&nbsp;<span class="ident" id="6638724"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span><span class="op" id="6638728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638732"><a href="/gostd/net/dialgoogle_test.go.html#6637422">doDial</a></span><span class="op" id="6638738">(</span><span class="ident" id="6638739"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638740">,</span>&nbsp;<span class="string" id="6638742">&#34;tcp&#34;</span><span class="op" id="6638747">,</span>&nbsp;<span class="ident" id="6638749"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span><span class="op" id="6638753">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638757">if</span>&nbsp;<span class="ident" id="6638760"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span><span class="op" id="6638764">[</span><span class="num" id="6638765">0</span><span class="op" id="6638766">]</span>&nbsp;<span class="op" id="6638768">!=</span>&nbsp;<span class="string" id="6638771">&#39;[&#39;</span>&nbsp;<span class="op" id="6638775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638780"><a href="/gostd/net/dialgoogle_test.go.html#6637422">doDial</a></span><span class="op" id="6638786">(</span><span class="ident" id="6638787"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638788">,</span>&nbsp;<span class="string" id="6638790">&#34;tcp4&#34;</span><span class="op" id="6638796">,</span>&nbsp;<span class="ident" id="6638798"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span><span class="op" id="6638802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638807">if</span>&nbsp;<span class="ident" id="6638810"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6638823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6638829">//&nbsp;make&nbsp;sure&nbsp;syscall.SocketDisableIPv6&nbsp;flag&nbsp;works.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638884"><a href="/gostd/net/dialgoogle_test.go.html#6635115">syscall</a></span><span class="op" id="6638891">.</span><span class="ident" id="6638892"><a href="/gostd/syscall/syscall_unix.go.html#2547046">SocketDisableIPv6</a></span>&nbsp;<span class="op" id="6638910">=</span>&nbsp;<span class="builtintype" id="6638912">true</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638921"><a href="/gostd/net/dialgoogle_test.go.html#6637422">doDial</a></span><span class="op" id="6638927">(</span><span class="ident" id="6638928"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638929">,</span>&nbsp;<span class="string" id="6638931">&#34;tcp&#34;</span><span class="op" id="6638936">,</span>&nbsp;<span class="ident" id="6638938"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span><span class="op" id="6638942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638948"><a href="/gostd/net/dialgoogle_test.go.html#6637422">doDial</a></span><span class="op" id="6638954">(</span><span class="ident" id="6638955"><a href="/gostd/net/dialgoogle_test.go.html#6637992">t</a></span><span class="op" id="6638956">,</span>&nbsp;<span class="string" id="6638958">&#34;tcp4&#34;</span><span class="op" id="6638964">,</span>&nbsp;<span class="ident" id="6638966"><a href="/gostd/net/dialgoogle_test.go.html#6638642">addr</a></span><span class="op" id="6638970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638976"><a href="/gostd/net/dialgoogle_test.go.html#6635115">syscall</a></span><span class="op" id="6638983">.</span><span class="ident" id="6638984"><a href="/gostd/syscall/syscall_unix.go.html#2547046">SocketDisableIPv6</a></span>&nbsp;<span class="op" id="6639002">=</span>&nbsp;<span class="builtintype" id="6639004">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639017">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639020">}</span><br>
<span class="lineno"></span><span class="op" id="6639022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6639025">var</span>&nbsp;<span class="ident" id="6639029">googleaddrsipv6</span>&nbsp;<span class="op" id="6639045">=</span>&nbsp;<span class="op" id="6639047">[</span><span class="op" id="6639048">]</span><span class="builtintype" id="6639049">string</span><span class="op" id="6639055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6639058">&#34;[%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x]:80&#34;</span><span class="op" id="6639136">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6639139">&#34;ipv6.google.com:80&#34;</span><span class="op" id="6639159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6639162">&#34;[%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x:%02x%02x]:http&#34;</span><span class="op" id="6639242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6639245">&#34;ipv6.google.com:http&#34;</span><span class="op" id="6639267">,</span><br>
<span class="lineno"></span><span class="op" id="6639269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6639272">func</span>&nbsp;<span class="ident" id="6639277">TestDialGoogleIPv6</span><span class="op" id="6639295">(</span><span class="ident" id="6639296">t</span>&nbsp;<span class="op" id="6639298">*</span><span class="ident" id="6639299"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6639306">.</span><span class="ident" id="6639307"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6639308">)</span>&nbsp;<span class="op" id="6639310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639313">if</span>&nbsp;<span class="ident" id="6639316"><a href="/gostd/net/dialgoogle_test.go.html#6635126">testing</a></span><span class="op" id="6639323">.</span><span class="ident" id="6639324"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="6639329">(</span><span class="op" id="6639330">)</span>&nbsp;<span class="op" id="6639332">||</span>&nbsp;<span class="op" id="6639335">!</span><span class="op" id="6639336">*</span><span class="ident" id="6639337"><a href="/gostd/net/lookup_test.go.html#6707430">testExternal</a></span>&nbsp;<span class="op" id="6639350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639354"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6639355">.</span><span class="ident" id="6639356"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6639360">(</span><span class="string" id="6639361">&#34;skipping&nbsp;test&nbsp;to&nbsp;avoid&nbsp;external&nbsp;network&#34;</span><span class="op" id="6639402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6639408">//&nbsp;Only&nbsp;run&nbsp;tcp6&nbsp;if&nbsp;the&nbsp;kernel&nbsp;will&nbsp;take&nbsp;it.</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639454">if</span>&nbsp;<span class="op" id="6639457">!</span><span class="ident" id="6639458"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="6639471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639475"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6639476">.</span><span class="ident" id="6639477"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6639481">(</span><span class="string" id="6639482">&#34;skipping&nbsp;test;&nbsp;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6639520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639526">if</span>&nbsp;<span class="op" id="6639529">!</span><span class="op" id="6639530">*</span><span class="ident" id="6639531"><a href="/gostd/net/dialgoogle_test.go.html#6635216">testIPv6</a></span>&nbsp;<span class="op" id="6639540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639544"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6639545">.</span><span class="ident" id="6639546"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="6639550">(</span><span class="string" id="6639551">&#34;test&nbsp;disabled;&nbsp;use&nbsp;-ipv6&nbsp;to&nbsp;enable&#34;</span><span class="op" id="6639587">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6639594">//&nbsp;Insert&nbsp;an&nbsp;actual&nbsp;IPv6&nbsp;address&nbsp;for&nbsp;ipv6.google.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6639648">//&nbsp;into&nbsp;the&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639668">addrs</span><span class="op" id="6639673">,</span>&nbsp;<span class="ident" id="6639675">err</span>&nbsp;<span class="op" id="6639679">:=</span>&nbsp;<span class="ident" id="6639682"><a href="/gostd/net/lookup.go.html#3324041">LookupIP</a></span><span class="op" id="6639690">(</span><span class="string" id="6639691">&#34;ipv6.google.com&#34;</span><span class="op" id="6639708">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639711">if</span>&nbsp;<span class="ident" id="6639714"><a href="/gostd/net/dialgoogle_test.go.html#6639675">err</a></span>&nbsp;<span class="op" id="6639718">!=</span>&nbsp;<span class="builtintype" id="6639721">nil</span>&nbsp;<span class="op" id="6639725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639729"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6639730">.</span><span class="ident" id="6639731"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6639737">(</span><span class="string" id="6639738">&#34;lookup&nbsp;ipv6.google.com:&nbsp;%v&#34;</span><span class="op" id="6639766">,</span>&nbsp;<span class="ident" id="6639768"><a href="/gostd/net/dialgoogle_test.go.html#6639675">err</a></span><span class="op" id="6639771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639777">var</span>&nbsp;<span class="ident" id="6639781">ip</span>&nbsp;<span class="ident" id="6639784"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639788">for</span>&nbsp;<span class="ident" id="6639792">_</span><span class="op" id="6639793">,</span>&nbsp;<span class="ident" id="6639795">addr</span>&nbsp;<span class="op" id="6639800">:=</span>&nbsp;<span class="keyword" id="6639803">range</span>&nbsp;<span class="ident" id="6639809"><a href="/gostd/net/dialgoogle_test.go.html#6639668">addrs</a></span>&nbsp;<span class="op" id="6639815">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639819">if</span>&nbsp;<span class="ident" id="6639822">x</span>&nbsp;<span class="op" id="6639824">:=</span>&nbsp;<span class="ident" id="6639827"><a href="/gostd/net/dialgoogle_test.go.html#6639795">addr</a></span><span class="op" id="6639831">.</span><span class="ident" id="6639832"><a href="/gostd/net/ip.go.html#3290366">To16</a></span><span class="op" id="6639836">(</span><span class="op" id="6639837">)</span><span class="op" id="6639838">;</span>&nbsp;<span class="ident" id="6639840"><a href="/gostd/net/dialgoogle_test.go.html#6639822">x</a></span>&nbsp;<span class="op" id="6639842">!=</span>&nbsp;<span class="builtintype" id="6639845">nil</span>&nbsp;<span class="op" id="6639849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639854"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span>&nbsp;<span class="op" id="6639857">=</span>&nbsp;<span class="ident" id="6639859"><a href="/gostd/net/dialgoogle_test.go.html#6639822">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639864">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639875">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639878">if</span>&nbsp;<span class="ident" id="6639881"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span>&nbsp;<span class="op" id="6639884">==</span>&nbsp;<span class="builtintype" id="6639887">nil</span>&nbsp;<span class="op" id="6639891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639895"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6639896">.</span><span class="ident" id="6639897"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6639903">(</span><span class="string" id="6639904">&#34;no&nbsp;IPv6&nbsp;addresses&nbsp;for&nbsp;ipv6.google.com&#34;</span><span class="op" id="6639943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639950">for</span>&nbsp;<span class="ident" id="6639954">i</span><span class="op" id="6639955">,</span>&nbsp;<span class="ident" id="6639957">s</span>&nbsp;<span class="op" id="6639959">:=</span>&nbsp;<span class="keyword" id="6639962">range</span>&nbsp;<span class="ident" id="6639968"><a href="/gostd/net/dialgoogle_test.go.html#6639029">googleaddrsipv6</a></span>&nbsp;<span class="op" id="6639984">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639988">if</span>&nbsp;<span class="ident" id="6639991"><a href="/gostd/net/dialgoogle_test.go.html#6635104">strings</a></span><span class="op" id="6639998">.</span><span class="ident" id="6639999"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="6640007">(</span><span class="ident" id="6640008"><a href="/gostd/net/dialgoogle_test.go.html#6639957">s</a></span><span class="op" id="6640009">,</span>&nbsp;<span class="string" id="6640011">&#34;%&#34;</span><span class="op" id="6640014">)</span>&nbsp;<span class="op" id="6640016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640021"><a href="/gostd/net/dialgoogle_test.go.html#6639029">googleaddrsipv6</a></span><span class="op" id="6640036">[</span><span class="ident" id="6640037"><a href="/gostd/net/dialgoogle_test.go.html#6639954">i</a></span><span class="op" id="6640038">]</span>&nbsp;<span class="op" id="6640040">=</span>&nbsp;<span class="ident" id="6640042"><a href="/gostd/net/dialgoogle_test.go.html#6635091">fmt</a></span><span class="op" id="6640045">.</span><span class="ident" id="6640046"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6640053">(</span><span class="ident" id="6640054"><a href="/gostd/net/dialgoogle_test.go.html#6639957">s</a></span><span class="op" id="6640055">,</span>&nbsp;<span class="ident" id="6640057"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640059">[</span><span class="num" id="6640060">0</span><span class="op" id="6640061">]</span><span class="op" id="6640062">,</span>&nbsp;<span class="ident" id="6640064"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640066">[</span><span class="num" id="6640067">1</span><span class="op" id="6640068">]</span><span class="op" id="6640069">,</span>&nbsp;<span class="ident" id="6640071"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640073">[</span><span class="num" id="6640074">2</span><span class="op" id="6640075">]</span><span class="op" id="6640076">,</span>&nbsp;<span class="ident" id="6640078"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640080">[</span><span class="num" id="6640081">3</span><span class="op" id="6640082">]</span><span class="op" id="6640083">,</span>&nbsp;<span class="ident" id="6640085"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640087">[</span><span class="num" id="6640088">4</span><span class="op" id="6640089">]</span><span class="op" id="6640090">,</span>&nbsp;<span class="ident" id="6640092"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640094">[</span><span class="num" id="6640095">5</span><span class="op" id="6640096">]</span><span class="op" id="6640097">,</span>&nbsp;<span class="ident" id="6640099"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640101">[</span><span class="num" id="6640102">6</span><span class="op" id="6640103">]</span><span class="op" id="6640104">,</span>&nbsp;<span class="ident" id="6640106"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640108">[</span><span class="num" id="6640109">7</span><span class="op" id="6640110">]</span><span class="op" id="6640111">,</span>&nbsp;<span class="ident" id="6640113"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640115">[</span><span class="num" id="6640116">8</span><span class="op" id="6640117">]</span><span class="op" id="6640118">,</span>&nbsp;<span class="ident" id="6640120"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640122">[</span><span class="num" id="6640123">9</span><span class="op" id="6640124">]</span><span class="op" id="6640125">,</span>&nbsp;<span class="ident" id="6640127"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640129">[</span><span class="num" id="6640130">10</span><span class="op" id="6640132">]</span><span class="op" id="6640133">,</span>&nbsp;<span class="ident" id="6640135"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640137">[</span><span class="num" id="6640138">11</span><span class="op" id="6640140">]</span><span class="op" id="6640141">,</span>&nbsp;<span class="ident" id="6640143"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640145">[</span><span class="num" id="6640146">12</span><span class="op" id="6640148">]</span><span class="op" id="6640149">,</span>&nbsp;<span class="ident" id="6640151"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640153">[</span><span class="num" id="6640154">13</span><span class="op" id="6640156">]</span><span class="op" id="6640157">,</span>&nbsp;<span class="ident" id="6640159"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640161">[</span><span class="num" id="6640162">14</span><span class="op" id="6640164">]</span><span class="op" id="6640165">,</span>&nbsp;<span class="ident" id="6640167"><a href="/gostd/net/dialgoogle_test.go.html#6639781">ip</a></span><span class="op" id="6640169">[</span><span class="num" id="6640170">15</span><span class="op" id="6640172">]</span><span class="op" id="6640173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640184">for</span>&nbsp;<span class="ident" id="6640188">i</span>&nbsp;<span class="op" id="6640190">:=</span>&nbsp;<span class="num" id="6640193">0</span><span class="op" id="6640194">;</span>&nbsp;<span class="ident" id="6640196"><a href="/gostd/net/dialgoogle_test.go.html#6640188">i</a></span>&nbsp;<span class="op" id="6640198">&lt;</span>&nbsp;<span class="builtinfunc" id="6640200">len</span><span class="op" id="6640203">(</span><span class="ident" id="6640204"><a href="/gostd/net/dialgoogle_test.go.html#6639029">googleaddrsipv6</a></span><span class="op" id="6640219">)</span><span class="op" id="6640220">;</span>&nbsp;<span class="ident" id="6640222"><a href="/gostd/net/dialgoogle_test.go.html#6640188">i</a></span><span class="op" id="6640223">++</span>&nbsp;<span class="op" id="6640226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640230">addr</span>&nbsp;<span class="op" id="6640235">:=</span>&nbsp;<span class="ident" id="6640238"><a href="/gostd/net/dialgoogle_test.go.html#6639029">googleaddrsipv6</a></span><span class="op" id="6640253">[</span><span class="ident" id="6640254"><a href="/gostd/net/dialgoogle_test.go.html#6640188">i</a></span><span class="op" id="6640255">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640259">if</span>&nbsp;<span class="ident" id="6640262"><a href="/gostd/net/dialgoogle_test.go.html#6640230">addr</a></span>&nbsp;<span class="op" id="6640267">==</span>&nbsp;<span class="string" id="6640270">&#34;&#34;</span>&nbsp;<span class="op" id="6640273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640278">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640289">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640293"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6640294">.</span><span class="ident" id="6640295"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="6640299">(</span><span class="string" id="6640300">&#34;--&nbsp;%s&nbsp;--&#34;</span><span class="op" id="6640310">,</span>&nbsp;<span class="ident" id="6640312"><a href="/gostd/net/dialgoogle_test.go.html#6640230">addr</a></span><span class="op" id="6640316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640320"><a href="/gostd/net/dialgoogle_test.go.html#6637422">doDial</a></span><span class="op" id="6640326">(</span><span class="ident" id="6640327"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6640328">,</span>&nbsp;<span class="string" id="6640330">&#34;tcp&#34;</span><span class="op" id="6640335">,</span>&nbsp;<span class="ident" id="6640337"><a href="/gostd/net/dialgoogle_test.go.html#6640230">addr</a></span><span class="op" id="6640341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640345"><a href="/gostd/net/dialgoogle_test.go.html#6637422">doDial</a></span><span class="op" id="6640351">(</span><span class="ident" id="6640352"><a href="/gostd/net/dialgoogle_test.go.html#6639296">t</a></span><span class="op" id="6640353">,</span>&nbsp;<span class="string" id="6640355">&#34;tcp6&#34;</span><span class="op" id="6640361">,</span>&nbsp;<span class="ident" id="6640363"><a href="/gostd/net/dialgoogle_test.go.html#6640230">addr</a></span><span class="op" id="6640367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640370">}</span><br>
<span class="lineno"></span><span class="op" id="6640372">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
