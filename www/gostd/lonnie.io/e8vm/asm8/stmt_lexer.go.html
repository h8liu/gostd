<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5116339">package</span>&nbsp;<span class="ident" id="5116347">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5116353">import</span>&nbsp;<span class="op" id="5116360">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5116363">&#34;io&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5116370">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5116392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5116395">//&nbsp;StmtLexer&nbsp;replaces&nbsp;end-lines&nbsp;with&nbsp;semicolons</span><br>
<span class="lineno">10</span><span class="keyword" id="5116443">type</span>&nbsp;<span class="ident" id="5116448">stmtLexer</span>&nbsp;<span class="keyword" id="5116458">struct</span>&nbsp;<span class="op" id="5116465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116468">x</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116479">*</span><span class="ident" id="5116480">lex8</span><span class="op" id="5116484">.</span><span class="ident" id="5116485">Lexer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116492">save</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116503">*</span><span class="ident" id="5116504">lex8</span><span class="op" id="5116508">.</span><span class="ident" id="5116509">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116516">insertSemi</span>&nbsp;<span class="builtintype" id="5116527">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116534">ParseComment</span>&nbsp;<span class="builtintype" id="5116547">bool</span><br>
<span class="lineno"></span><span class="op" id="5116552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5116555">//&nbsp;NewStmtLexer&nbsp;creates&nbsp;a&nbsp;new&nbsp;statement&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="5116602">func</span>&nbsp;<span class="ident" id="5116607">newStmtLexer</span><span class="op" id="5116619">(</span><span class="ident" id="5116620">file</span>&nbsp;<span class="builtintype" id="5116625">string</span><span class="op" id="5116631">,</span>&nbsp;<span class="ident" id="5116633">r</span>&nbsp;<span class="ident" id="5116635">io</span><span class="op" id="5116637">.</span><span class="ident" id="5116638">ReadCloser</span><span class="op" id="5116648">)</span>&nbsp;<span class="op" id="5116650">*</span><span class="ident" id="5116651">stmtLexer</span>&nbsp;<span class="op" id="5116661">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116664">ret</span>&nbsp;<span class="op" id="5116668">:=</span>&nbsp;<span class="builtinfunc" id="5116671">new</span><span class="op" id="5116674">(</span><span class="ident" id="5116675">stmtLexer</span><span class="op" id="5116684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116687">ret</span><span class="op" id="5116690">.</span><span class="ident" id="5116691">x</span>&nbsp;<span class="op" id="5116693">=</span>&nbsp;<span class="ident" id="5116695">newLexer</span><span class="op" id="5116703">(</span><span class="ident" id="5116704">file</span><span class="op" id="5116708">,</span>&nbsp;<span class="ident" id="5116710">r</span><span class="op" id="5116711">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116715">return</span>&nbsp;<span class="ident" id="5116722">ret</span><br>
<span class="lineno"></span><span class="op" id="5116726">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5116729">//&nbsp;Token&nbsp;returns&nbsp;the&nbsp;next&nbsp;token&nbsp;of&nbsp;lexing</span><br>
<span class="lineno"></span><span class="keyword" id="5116771">func</span>&nbsp;<span class="op" id="5116776">(</span><span class="ident" id="5116777">sx</span>&nbsp;<span class="op" id="5116780">*</span><span class="ident" id="5116781">stmtLexer</span><span class="op" id="5116790">)</span>&nbsp;<span class="ident" id="5116792">Token</span><span class="op" id="5116797">(</span><span class="op" id="5116798">)</span>&nbsp;<span class="op" id="5116800">*</span><span class="ident" id="5116801">lex8</span><span class="op" id="5116805">.</span><span class="ident" id="5116806">Token</span>&nbsp;<span class="op" id="5116812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116815">if</span>&nbsp;<span class="ident" id="5116818">sx</span><span class="op" id="5116820">.</span><span class="ident" id="5116821">save</span>&nbsp;<span class="op" id="5116826">!=</span>&nbsp;<span class="ident" id="5116829">nil</span>&nbsp;<span class="op" id="5116833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116837">ret</span>&nbsp;<span class="op" id="5116841">:=</span>&nbsp;<span class="ident" id="5116844">sx</span><span class="op" id="5116846">.</span><span class="ident" id="5116847">save</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116854">sx</span><span class="op" id="5116856">.</span><span class="ident" id="5116857">save</span>&nbsp;<span class="op" id="5116862">=</span>&nbsp;<span class="ident" id="5116864">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116870">return</span>&nbsp;<span class="ident" id="5116877">ret</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5116882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116886">for</span>&nbsp;<span class="op" id="5116890">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116894">t</span>&nbsp;<span class="op" id="5116896">:=</span>&nbsp;<span class="ident" id="5116899">sx</span><span class="op" id="5116901">.</span><span class="ident" id="5116902">x</span><span class="op" id="5116903">.</span><span class="ident" id="5116904">Token</span><span class="op" id="5116909">(</span><span class="op" id="5116910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116914">switch</span>&nbsp;<span class="ident" id="5116921">t</span><span class="op" id="5116922">.</span><span class="ident" id="5116923">Type</span>&nbsp;<span class="op" id="5116928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116932">case</span>&nbsp;<span class="ident" id="5116937">Lbrace</span><span class="op" id="5116943">,</span>&nbsp;<span class="ident" id="5116945">Semi</span><span class="op" id="5116949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116954">sx</span><span class="op" id="5116956">.</span><span class="ident" id="5116957">insertSemi</span>&nbsp;<span class="op" id="5116968">=</span>&nbsp;<span class="builtintype" id="5116970">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116978">case</span>&nbsp;<span class="ident" id="5116983">lex8</span><span class="op" id="5116987">.</span><span class="ident" id="5116988">EOF</span><span class="op" id="5116991">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116996">if</span>&nbsp;<span class="ident" id="5116999">sx</span><span class="op" id="5117001">.</span><span class="ident" id="5117002">insertSemi</span>&nbsp;<span class="op" id="5117013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117019">sx</span><span class="op" id="5117021">.</span><span class="ident" id="5117022">insertSemi</span>&nbsp;<span class="op" id="5117033">=</span>&nbsp;<span class="builtintype" id="5117035">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117045">sx</span><span class="op" id="5117047">.</span><span class="ident" id="5117048">save</span>&nbsp;<span class="op" id="5117053">=</span>&nbsp;<span class="ident" id="5117055">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117061">return</span>&nbsp;<span class="op" id="5117068">&amp;</span><span class="ident" id="5117069">lex8</span><span class="op" id="5117073">.</span><span class="ident" id="5117074">Token</span><span class="op" id="5117079">{</span><span class="ident" id="5117080">Semi</span><span class="op" id="5117084">,</span>&nbsp;<span class="ident" id="5117086">t</span><span class="op" id="5117087">.</span><span class="ident" id="5117088">Lit</span><span class="op" id="5117091">,</span>&nbsp;<span class="ident" id="5117093">t</span><span class="op" id="5117094">.</span><span class="ident" id="5117095">Pos</span><span class="op" id="5117098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117103">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117107">case</span>&nbsp;<span class="ident" id="5117112">Rbrace</span><span class="op" id="5117118">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117123">if</span>&nbsp;<span class="ident" id="5117126">sx</span><span class="op" id="5117128">.</span><span class="ident" id="5117129">insertSemi</span>&nbsp;<span class="op" id="5117140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117146">sx</span><span class="op" id="5117148">.</span><span class="ident" id="5117149">save</span>&nbsp;<span class="op" id="5117154">=</span>&nbsp;<span class="ident" id="5117156">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117162">return</span>&nbsp;<span class="op" id="5117169">&amp;</span><span class="ident" id="5117170">lex8</span><span class="op" id="5117174">.</span><span class="ident" id="5117175">Token</span><span class="op" id="5117180">{</span><span class="ident" id="5117181">Semi</span><span class="op" id="5117185">,</span>&nbsp;<span class="ident" id="5117187">t</span><span class="op" id="5117188">.</span><span class="ident" id="5117189">Lit</span><span class="op" id="5117192">,</span>&nbsp;<span class="ident" id="5117194">t</span><span class="op" id="5117195">.</span><span class="ident" id="5117196">Pos</span><span class="op" id="5117199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117204">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117209">sx</span><span class="op" id="5117211">.</span><span class="ident" id="5117212">insertSemi</span>&nbsp;<span class="op" id="5117223">=</span>&nbsp;<span class="builtintype" id="5117225">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117232">case</span>&nbsp;<span class="ident" id="5117237">Endl</span><span class="op" id="5117241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117246">if</span>&nbsp;<span class="ident" id="5117249">sx</span><span class="op" id="5117251">.</span><span class="ident" id="5117252">insertSemi</span>&nbsp;<span class="op" id="5117263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117269">sx</span><span class="op" id="5117271">.</span><span class="ident" id="5117272">insertSemi</span>&nbsp;<span class="op" id="5117283">=</span>&nbsp;<span class="builtintype" id="5117285">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117295">return</span>&nbsp;<span class="op" id="5117302">&amp;</span><span class="ident" id="5117303">lex8</span><span class="op" id="5117307">.</span><span class="ident" id="5117308">Token</span><span class="op" id="5117313">{</span><span class="ident" id="5117314">Semi</span><span class="op" id="5117318">,</span>&nbsp;<span class="string" id="5117320">&#34;\n&#34;</span><span class="op" id="5117324">,</span>&nbsp;<span class="ident" id="5117326">t</span><span class="op" id="5117327">.</span><span class="ident" id="5117328">Pos</span><span class="op" id="5117331">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117341">continue</span>&nbsp;<span class="comment" id="5117350">//&nbsp;ignore&nbsp;this&nbsp;end&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117376">case</span>&nbsp;<span class="ident" id="5117381">Comment</span><span class="op" id="5117388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117393">if</span>&nbsp;<span class="op" id="5117396">!</span><span class="ident" id="5117397">sx</span><span class="op" id="5117399">.</span><span class="ident" id="5117400">ParseComment</span>&nbsp;<span class="op" id="5117413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117419">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117435">default</span><span class="op" id="5117442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5117447">sx</span><span class="op" id="5117449">.</span><span class="ident" id="5117450">insertSemi</span>&nbsp;<span class="op" id="5117461">=</span>&nbsp;<span class="builtintype" id="5117463">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117475">return</span>&nbsp;<span class="ident" id="5117482">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5117485">}</span><br>
<span class="lineno"></span><span class="op" id="5117487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5117490">//&nbsp;Errs&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;lexing&nbsp;errors.</span><br>
<span class="lineno">70</span><span class="keyword" id="5117533">func</span>&nbsp;<span class="op" id="5117538">(</span><span class="ident" id="5117539">sx</span>&nbsp;<span class="op" id="5117542">*</span><span class="ident" id="5117543">stmtLexer</span><span class="op" id="5117552">)</span>&nbsp;<span class="ident" id="5117554">Errs</span><span class="op" id="5117558">(</span><span class="op" id="5117559">)</span>&nbsp;<span class="op" id="5117561">[</span><span class="op" id="5117562">]</span><span class="op" id="5117563">*</span><span class="ident" id="5117564">lex8</span><span class="op" id="5117568">.</span><span class="ident" id="5117569">Error</span>&nbsp;<span class="op" id="5117575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5117578">return</span>&nbsp;<span class="ident" id="5117585">sx</span><span class="op" id="5117587">.</span><span class="ident" id="5117588">x</span><span class="op" id="5117589">.</span><span class="ident" id="5117590">Errs</span><span class="op" id="5117594">(</span><span class="op" id="5117595">)</span><br>
<span class="lineno"></span><span class="op" id="5117597">}</span>
</div>
</body>
</html>
