<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2195728">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2195783">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2195837">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2195888">package</span>&nbsp;<span class="ident" id="2195896">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2195902">func</span>&nbsp;<span class="ident" id="2195907">isOddInt</span><span class="op" id="2195915">(</span><span class="ident" id="2195916">x</span>&nbsp;<span class="builtintype" id="2195918">float64</span><span class="op" id="2195925">)</span>&nbsp;<span class="builtintype" id="2195927">bool</span>&nbsp;<span class="op" id="2195932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2195935">xi</span><span class="op" id="2195937">,</span>&nbsp;<span class="ident" id="2195939">xf</span>&nbsp;<span class="op" id="2195942">:=</span>&nbsp;<span class="ident" id="2195945">Modf</span><span class="op" id="2195949">(</span><span class="ident" id="2195950">x</span><span class="op" id="2195951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2195954">return</span>&nbsp;<span class="ident" id="2195961">xf</span>&nbsp;<span class="op" id="2195964">==</span>&nbsp;<span class="num" id="2195967">0</span>&nbsp;<span class="op" id="2195969">&amp;&amp;</span>&nbsp;<span class="ident" id="2195972">int64</span><span class="op" id="2195977">(</span><span class="ident" id="2195978">xi</span><span class="op" id="2195980">)</span><span class="op" id="2195981">&amp;</span><span class="num" id="2195982">1</span>&nbsp;<span class="op" id="2195984">==</span>&nbsp;<span class="num" id="2195987">1</span><br>
<span class="lineno">10</span><span class="op" id="2195989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2195992">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2196060">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2196126">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2196176">//</span><br>
<span class="lineno"></span><span class="comment" id="2196179">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2196212">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2196241">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2196268">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2196295">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2196316">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2196337">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2196385">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2196410">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2196433">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2196495">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2196541">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2196601">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2196623">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2196658">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2196691">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2196724">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2196759">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2196792">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2196823">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2196853">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2196914">func</span>&nbsp;<span class="ident" id="2196919">Pow</span><span class="op" id="2196922">(</span><span class="ident" id="2196923">x</span><span class="op" id="2196924">,</span>&nbsp;<span class="ident" id="2196926">y</span>&nbsp;<span class="builtintype" id="2196928">float64</span><span class="op" id="2196935">)</span>&nbsp;<span class="builtintype" id="2196937">float64</span>&nbsp;<span class="op" id="2196945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2196948">switch</span>&nbsp;<span class="op" id="2196955">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2196958">case</span>&nbsp;<span class="ident" id="2196963">y</span>&nbsp;<span class="op" id="2196965">==</span>&nbsp;<span class="num" id="2196968">0</span>&nbsp;<span class="op" id="2196970">||</span>&nbsp;<span class="ident" id="2196973">x</span>&nbsp;<span class="op" id="2196975">==</span>&nbsp;<span class="num" id="2196978">1</span><span class="op" id="2196979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2196983">return</span>&nbsp;<span class="num" id="2196990">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2196993">case</span>&nbsp;<span class="ident" id="2196998">y</span>&nbsp;<span class="op" id="2197000">==</span>&nbsp;<span class="num" id="2197003">1</span><span class="op" id="2197004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197008">return</span>&nbsp;<span class="ident" id="2197015">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197018">case</span>&nbsp;<span class="ident" id="2197023">y</span>&nbsp;<span class="op" id="2197025">==</span>&nbsp;<span class="num" id="2197028">0.5</span><span class="op" id="2197031">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197035">return</span>&nbsp;<span class="ident" id="2197042">Sqrt</span><span class="op" id="2197046">(</span><span class="ident" id="2197047">x</span><span class="op" id="2197048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197051">case</span>&nbsp;<span class="ident" id="2197056">y</span>&nbsp;<span class="op" id="2197058">==</span>&nbsp;<span class="op" id="2197061">-</span><span class="num" id="2197062">0.5</span><span class="op" id="2197065">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197069">return</span>&nbsp;<span class="num" id="2197076">1</span>&nbsp;<span class="op" id="2197078">/</span>&nbsp;<span class="ident" id="2197080">Sqrt</span><span class="op" id="2197084">(</span><span class="ident" id="2197085">x</span><span class="op" id="2197086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197089">case</span>&nbsp;<span class="ident" id="2197094">IsNaN</span><span class="op" id="2197099">(</span><span class="ident" id="2197100">x</span><span class="op" id="2197101">)</span>&nbsp;<span class="op" id="2197103">||</span>&nbsp;<span class="ident" id="2197106">IsNaN</span><span class="op" id="2197111">(</span><span class="ident" id="2197112">y</span><span class="op" id="2197113">)</span><span class="op" id="2197114">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197118">return</span>&nbsp;<span class="ident" id="2197125">NaN</span><span class="op" id="2197128">(</span><span class="op" id="2197129">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197132">case</span>&nbsp;<span class="ident" id="2197137">x</span>&nbsp;<span class="op" id="2197139">==</span>&nbsp;<span class="num" id="2197142">0</span><span class="op" id="2197143">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197147">switch</span>&nbsp;<span class="op" id="2197154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197158">case</span>&nbsp;<span class="ident" id="2197163">y</span>&nbsp;<span class="op" id="2197165">&lt;</span>&nbsp;<span class="num" id="2197167">0</span><span class="op" id="2197168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197173">if</span>&nbsp;<span class="ident" id="2197176">isOddInt</span><span class="op" id="2197184">(</span><span class="ident" id="2197185">y</span><span class="op" id="2197186">)</span>&nbsp;<span class="op" id="2197188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197194">return</span>&nbsp;<span class="ident" id="2197201">Copysign</span><span class="op" id="2197209">(</span><span class="ident" id="2197210">Inf</span><span class="op" id="2197213">(</span><span class="num" id="2197214">1</span><span class="op" id="2197215">)</span><span class="op" id="2197216">,</span>&nbsp;<span class="ident" id="2197218">x</span><span class="op" id="2197219">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197229">return</span>&nbsp;<span class="ident" id="2197236">Inf</span><span class="op" id="2197239">(</span><span class="num" id="2197240">1</span><span class="op" id="2197241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197245">case</span>&nbsp;<span class="ident" id="2197250">y</span>&nbsp;<span class="op" id="2197252">&gt;</span>&nbsp;<span class="num" id="2197254">0</span><span class="op" id="2197255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197260">if</span>&nbsp;<span class="ident" id="2197263">isOddInt</span><span class="op" id="2197271">(</span><span class="ident" id="2197272">y</span><span class="op" id="2197273">)</span>&nbsp;<span class="op" id="2197275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197281">return</span>&nbsp;<span class="ident" id="2197288">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197298">return</span>&nbsp;<span class="num" id="2197305">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197312">case</span>&nbsp;<span class="ident" id="2197317">IsInf</span><span class="op" id="2197322">(</span><span class="ident" id="2197323">y</span><span class="op" id="2197324">,</span>&nbsp;<span class="num" id="2197326">0</span><span class="op" id="2197327">)</span><span class="op" id="2197328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197332">switch</span>&nbsp;<span class="op" id="2197339">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197343">case</span>&nbsp;<span class="ident" id="2197348">x</span>&nbsp;<span class="op" id="2197350">==</span>&nbsp;<span class="op" id="2197353">-</span><span class="num" id="2197354">1</span><span class="op" id="2197355">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197360">return</span>&nbsp;<span class="num" id="2197367">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197371">case</span>&nbsp;<span class="op" id="2197376">(</span><span class="ident" id="2197377">Abs</span><span class="op" id="2197380">(</span><span class="ident" id="2197381">x</span><span class="op" id="2197382">)</span>&nbsp;<span class="op" id="2197384">&lt;</span>&nbsp;<span class="num" id="2197386">1</span><span class="op" id="2197387">)</span>&nbsp;<span class="op" id="2197389">==</span>&nbsp;<span class="ident" id="2197392">IsInf</span><span class="op" id="2197397">(</span><span class="ident" id="2197398">y</span><span class="op" id="2197399">,</span>&nbsp;<span class="num" id="2197401">1</span><span class="op" id="2197402">)</span><span class="op" id="2197403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197408">return</span>&nbsp;<span class="num" id="2197415">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197419">default</span><span class="op" id="2197426">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197431">return</span>&nbsp;<span class="ident" id="2197438">Inf</span><span class="op" id="2197441">(</span><span class="num" id="2197442">1</span><span class="op" id="2197443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197450">case</span>&nbsp;<span class="ident" id="2197455">IsInf</span><span class="op" id="2197460">(</span><span class="ident" id="2197461">x</span><span class="op" id="2197462">,</span>&nbsp;<span class="num" id="2197464">0</span><span class="op" id="2197465">)</span><span class="op" id="2197466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197470">if</span>&nbsp;<span class="ident" id="2197473">IsInf</span><span class="op" id="2197478">(</span><span class="ident" id="2197479">x</span><span class="op" id="2197480">,</span>&nbsp;<span class="op" id="2197482">-</span><span class="num" id="2197483">1</span><span class="op" id="2197484">)</span>&nbsp;<span class="op" id="2197486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197491">return</span>&nbsp;<span class="ident" id="2197498">Pow</span><span class="op" id="2197501">(</span><span class="num" id="2197502">1</span><span class="op" id="2197503">/</span><span class="ident" id="2197504">x</span><span class="op" id="2197505">,</span>&nbsp;<span class="op" id="2197507">-</span><span class="ident" id="2197508">y</span><span class="op" id="2197509">)</span>&nbsp;<span class="comment" id="2197511">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197532">switch</span>&nbsp;<span class="op" id="2197539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197543">case</span>&nbsp;<span class="ident" id="2197548">y</span>&nbsp;<span class="op" id="2197550">&lt;</span>&nbsp;<span class="num" id="2197552">0</span><span class="op" id="2197553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197558">return</span>&nbsp;<span class="num" id="2197565">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197569">case</span>&nbsp;<span class="ident" id="2197574">y</span>&nbsp;<span class="op" id="2197576">&gt;</span>&nbsp;<span class="num" id="2197578">0</span><span class="op" id="2197579">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197584">return</span>&nbsp;<span class="ident" id="2197591">Inf</span><span class="op" id="2197594">(</span><span class="num" id="2197595">1</span><span class="op" id="2197596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197607">absy</span>&nbsp;<span class="op" id="2197612">:=</span>&nbsp;<span class="ident" id="2197615">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197618">flip</span>&nbsp;<span class="op" id="2197623">:=</span>&nbsp;<span class="builtintype" id="2197626">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197633">if</span>&nbsp;<span class="ident" id="2197636">absy</span>&nbsp;<span class="op" id="2197641">&lt;</span>&nbsp;<span class="num" id="2197643">0</span>&nbsp;<span class="op" id="2197645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197649">absy</span>&nbsp;<span class="op" id="2197654">=</span>&nbsp;<span class="op" id="2197656">-</span><span class="ident" id="2197657">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197664">flip</span>&nbsp;<span class="op" id="2197669">=</span>&nbsp;<span class="builtintype" id="2197671">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197677">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197680">yi</span><span class="op" id="2197682">,</span>&nbsp;<span class="ident" id="2197684">yf</span>&nbsp;<span class="op" id="2197687">:=</span>&nbsp;<span class="ident" id="2197690">Modf</span><span class="op" id="2197694">(</span><span class="ident" id="2197695">absy</span><span class="op" id="2197699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197702">if</span>&nbsp;<span class="ident" id="2197705">yf</span>&nbsp;<span class="op" id="2197708">!=</span>&nbsp;<span class="num" id="2197711">0</span>&nbsp;<span class="op" id="2197713">&amp;&amp;</span>&nbsp;<span class="ident" id="2197716">x</span>&nbsp;<span class="op" id="2197718">&lt;</span>&nbsp;<span class="num" id="2197720">0</span>&nbsp;<span class="op" id="2197722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197726">return</span>&nbsp;<span class="ident" id="2197733">NaN</span><span class="op" id="2197736">(</span><span class="op" id="2197737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197743">if</span>&nbsp;<span class="ident" id="2197746">yi</span>&nbsp;<span class="op" id="2197749">&gt;=</span>&nbsp;<span class="num" id="2197752">1</span><span class="op" id="2197753">&lt;&lt;</span><span class="num" id="2197755">63</span>&nbsp;<span class="op" id="2197758">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197762">return</span>&nbsp;<span class="ident" id="2197769">Exp</span><span class="op" id="2197772">(</span><span class="ident" id="2197773">y</span>&nbsp;<span class="op" id="2197775">*</span>&nbsp;<span class="ident" id="2197777">Log</span><span class="op" id="2197780">(</span><span class="ident" id="2197781">x</span><span class="op" id="2197782">)</span><span class="op" id="2197783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2197790">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197826">a1</span>&nbsp;<span class="op" id="2197829">:=</span>&nbsp;<span class="num" id="2197832">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197837">ae</span>&nbsp;<span class="op" id="2197840">:=</span>&nbsp;<span class="num" id="2197843">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2197847">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197864">if</span>&nbsp;<span class="ident" id="2197867">yf</span>&nbsp;<span class="op" id="2197870">!=</span>&nbsp;<span class="num" id="2197873">0</span>&nbsp;<span class="op" id="2197875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2197879">if</span>&nbsp;<span class="ident" id="2197882">yf</span>&nbsp;<span class="op" id="2197885">&gt;</span>&nbsp;<span class="num" id="2197887">0.5</span>&nbsp;<span class="op" id="2197891">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197896">yf</span><span class="op" id="2197898">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197904">yi</span><span class="op" id="2197906">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2197915">a1</span>&nbsp;<span class="op" id="2197918">=</span>&nbsp;<span class="ident" id="2197920">Exp</span><span class="op" id="2197923">(</span><span class="ident" id="2197924">yf</span>&nbsp;<span class="op" id="2197927">*</span>&nbsp;<span class="ident" id="2197929">Log</span><span class="op" id="2197932">(</span><span class="ident" id="2197933">x</span><span class="op" id="2197934">)</span><span class="op" id="2197935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2197938">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2197942">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2197959">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2198002">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2198036">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198075">x1</span><span class="op" id="2198077">,</span>&nbsp;<span class="ident" id="2198079">xe</span>&nbsp;<span class="op" id="2198082">:=</span>&nbsp;<span class="ident" id="2198085">Frexp</span><span class="op" id="2198090">(</span><span class="ident" id="2198091">x</span><span class="op" id="2198092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2198095">for</span>&nbsp;<span class="ident" id="2198099">i</span>&nbsp;<span class="op" id="2198101">:=</span>&nbsp;<span class="ident" id="2198104">int64</span><span class="op" id="2198109">(</span><span class="ident" id="2198110">yi</span><span class="op" id="2198112">)</span><span class="op" id="2198113">;</span>&nbsp;<span class="ident" id="2198115">i</span>&nbsp;<span class="op" id="2198117">!=</span>&nbsp;<span class="num" id="2198120">0</span><span class="op" id="2198121">;</span>&nbsp;<span class="ident" id="2198123">i</span>&nbsp;<span class="op" id="2198125">&gt;&gt;=</span>&nbsp;<span class="num" id="2198129">1</span>&nbsp;<span class="op" id="2198131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2198135">if</span>&nbsp;<span class="ident" id="2198138">i</span><span class="op" id="2198139">&amp;</span><span class="num" id="2198140">1</span>&nbsp;<span class="op" id="2198142">==</span>&nbsp;<span class="num" id="2198145">1</span>&nbsp;<span class="op" id="2198147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198152">a1</span>&nbsp;<span class="op" id="2198155">*=</span>&nbsp;<span class="ident" id="2198158">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198164">ae</span>&nbsp;<span class="op" id="2198167">+=</span>&nbsp;<span class="ident" id="2198170">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2198175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198179">x1</span>&nbsp;<span class="op" id="2198182">*=</span>&nbsp;<span class="ident" id="2198185">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198190">xe</span>&nbsp;<span class="op" id="2198193">&lt;&lt;=</span>&nbsp;<span class="num" id="2198197">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2198201">if</span>&nbsp;<span class="ident" id="2198204">x1</span>&nbsp;<span class="op" id="2198207">&lt;</span>&nbsp;<span class="num" id="2198209">.5</span>&nbsp;<span class="op" id="2198212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198217">x1</span>&nbsp;<span class="op" id="2198220">+=</span>&nbsp;<span class="ident" id="2198223">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198229">xe</span><span class="op" id="2198231">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2198236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2198239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2198243">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2198262">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2198292">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2198322">if</span>&nbsp;<span class="ident" id="2198325">flip</span>&nbsp;<span class="op" id="2198330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198334">a1</span>&nbsp;<span class="op" id="2198337">=</span>&nbsp;<span class="num" id="2198339">1</span>&nbsp;<span class="op" id="2198341">/</span>&nbsp;<span class="ident" id="2198343">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2198348">ae</span>&nbsp;<span class="op" id="2198351">=</span>&nbsp;<span class="op" id="2198353">-</span><span class="ident" id="2198354">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2198358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2198361">return</span>&nbsp;<span class="ident" id="2198368">Ldexp</span><span class="op" id="2198373">(</span><span class="ident" id="2198374">a1</span><span class="op" id="2198376">,</span>&nbsp;<span class="ident" id="2198378">ae</span><span class="op" id="2198380">)</span><br>
<span class="lineno"></span><span class="op" id="2198382">}</span>
</div>
</body>
</html>
