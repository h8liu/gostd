<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6038858">package</span>&nbsp;<span class="ident" id="6038866">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6038872">import</span>&nbsp;<span class="op" id="6038879">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038882">&#34;strconv&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038894">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6038916">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6038919">var</span>&nbsp;<span class="op" id="6038923">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038926">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038953">opImsMap</span>&nbsp;<span class="op" id="6038962">=</span>&nbsp;<span class="keyword" id="6038964">map</span><span class="op" id="6038967">[</span><span class="builtintype" id="6038968">string</span><span class="op" id="6038974">]</span><span class="builtintype" id="6038975">uint32</span><span class="op" id="6038981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038985">&#34;addi&#34;</span><span class="op" id="6038991">:</span>&nbsp;<span class="num" id="6038993">1</span><span class="op" id="6038994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038998">&#34;slti&#34;</span><span class="op" id="6039004">:</span>&nbsp;<span class="num" id="6039006">2</span><span class="op" id="6039007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039010">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039014">opMemMap</span>&nbsp;<span class="op" id="6039023">=</span>&nbsp;<span class="keyword" id="6039025">map</span><span class="op" id="6039028">[</span><span class="builtintype" id="6039029">string</span><span class="op" id="6039035">]</span><span class="builtintype" id="6039036">uint32</span><span class="op" id="6039042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039046">&#34;lw&#34;</span><span class="op" id="6039050">:</span>&nbsp;&nbsp;<span class="num" id="6039053">6</span><span class="op" id="6039054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039058">&#34;lb&#34;</span><span class="op" id="6039062">:</span>&nbsp;&nbsp;<span class="num" id="6039065">7</span><span class="op" id="6039066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039070">&#34;lbu&#34;</span><span class="op" id="6039075">:</span>&nbsp;<span class="num" id="6039077">8</span><span class="op" id="6039078">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039082">&#34;sw&#34;</span><span class="op" id="6039086">:</span>&nbsp;&nbsp;<span class="num" id="6039089">9</span><span class="op" id="6039090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039094">&#34;sb&#34;</span><span class="op" id="6039098">:</span>&nbsp;&nbsp;<span class="num" id="6039101">10</span><span class="op" id="6039103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6039110">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039139">opImuMap</span>&nbsp;<span class="op" id="6039148">=</span>&nbsp;<span class="keyword" id="6039150">map</span><span class="op" id="6039153">[</span><span class="builtintype" id="6039154">string</span><span class="op" id="6039160">]</span><span class="builtintype" id="6039161">uint32</span><span class="op" id="6039167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039171">&#34;andi&#34;</span><span class="op" id="6039177">:</span>&nbsp;<span class="num" id="6039179">3</span><span class="op" id="6039180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039184">&#34;ori&#34;</span><span class="op" id="6039189">:</span>&nbsp;&nbsp;<span class="num" id="6039192">4</span><span class="op" id="6039193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6039200">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039235">opImmMap</span>&nbsp;<span class="op" id="6039244">=</span>&nbsp;<span class="keyword" id="6039246">map</span><span class="op" id="6039249">[</span><span class="builtintype" id="6039250">string</span><span class="op" id="6039256">]</span><span class="builtintype" id="6039257">uint32</span><span class="op" id="6039263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6039267">&#34;lui&#34;</span><span class="op" id="6039272">:</span>&nbsp;<span class="num" id="6039274">5</span><span class="op" id="6039275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039278">}</span><br>
<span class="lineno"></span><span class="op" id="6039280">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="6039283">//&nbsp;parseImu&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="6039331">func</span>&nbsp;<span class="ident" id="6039336">parseImu</span><span class="op" id="6039344">(</span><span class="ident" id="6039345">p</span>&nbsp;<span class="op" id="6039347">*</span><span class="ident" id="6039348"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6039354">,</span>&nbsp;<span class="ident" id="6039356">op</span>&nbsp;<span class="op" id="6039359">*</span><span class="ident" id="6039360"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6039364">.</span><span class="ident" id="6039365">Token</span><span class="op" id="6039370">)</span>&nbsp;<span class="builtintype" id="6039372">uint32</span>&nbsp;<span class="op" id="6039379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039382">ret</span><span class="op" id="6039385">,</span>&nbsp;<span class="ident" id="6039387">e</span>&nbsp;<span class="op" id="6039389">:=</span>&nbsp;<span class="ident" id="6039392"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038882">strconv</a></span><span class="op" id="6039399">.</span><span class="ident" id="6039400">ParseUint</span><span class="op" id="6039409">(</span><span class="ident" id="6039410"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039356">op</a></span><span class="op" id="6039412">.</span><span class="ident" id="6039413">Lit</span><span class="op" id="6039416">,</span>&nbsp;<span class="num" id="6039418">0</span><span class="op" id="6039419">,</span>&nbsp;<span class="num" id="6039421">32</span><span class="op" id="6039423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039426">if</span>&nbsp;<span class="ident" id="6039429"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039387">e</a></span>&nbsp;<span class="op" id="6039431">!=</span>&nbsp;<span class="ident" id="6039434">nil</span>&nbsp;<span class="op" id="6039438">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039442"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039345">p</a></span><span class="op" id="6039443">.</span><span class="ident" id="6039444">err</span><span class="op" id="6039447">(</span><span class="ident" id="6039448"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039356">op</a></span><span class="op" id="6039450">.</span><span class="ident" id="6039451">Pos</span><span class="op" id="6039454">,</span>&nbsp;<span class="string" id="6039456">&#34;invalid&nbsp;unsigned&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="6039491">,</span>&nbsp;<span class="ident" id="6039493"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039356">op</a></span><span class="op" id="6039495">.</span><span class="ident" id="6039496">Lit</span><span class="op" id="6039499">,</span>&nbsp;<span class="ident" id="6039501"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039387">e</a></span><span class="op" id="6039502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039506">return</span>&nbsp;<span class="num" id="6039513">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039520">if</span>&nbsp;<span class="op" id="6039523">(</span><span class="ident" id="6039524"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039382">ret</a></span>&nbsp;<span class="op" id="6039528">&amp;</span>&nbsp;<span class="num" id="6039530">0xffff</span><span class="op" id="6039536">)</span>&nbsp;<span class="op" id="6039538">!=</span>&nbsp;<span class="ident" id="6039541"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039382">ret</a></span>&nbsp;<span class="op" id="6039545">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039549"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039345">p</a></span><span class="op" id="6039550">.</span><span class="ident" id="6039551">err</span><span class="op" id="6039554">(</span><span class="ident" id="6039555"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039356">op</a></span><span class="op" id="6039557">.</span><span class="ident" id="6039558">Pos</span><span class="op" id="6039561">,</span>&nbsp;<span class="string" id="6039563">&#34;immediate&nbsp;too&nbsp;large:&nbsp;%s&#34;</span><span class="op" id="6039588">,</span>&nbsp;<span class="ident" id="6039590"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039356">op</a></span><span class="op" id="6039592">.</span><span class="ident" id="6039593">Lit</span><span class="op" id="6039596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039600">return</span>&nbsp;<span class="num" id="6039607">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039614">return</span>&nbsp;<span class="builtintype" id="6039621">uint32</span><span class="op" id="6039627">(</span><span class="ident" id="6039628"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039382">ret</a></span><span class="op" id="6039631">)</span><br>
<span class="lineno">50</span><span class="op" id="6039633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6039636">//&nbsp;parseIms&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="6039684">func</span>&nbsp;<span class="ident" id="6039689">parseIms</span><span class="op" id="6039697">(</span><span class="ident" id="6039698">p</span>&nbsp;<span class="op" id="6039700">*</span><span class="ident" id="6039701"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6039707">,</span>&nbsp;<span class="ident" id="6039709">op</span>&nbsp;<span class="op" id="6039712">*</span><span class="ident" id="6039713"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6039717">.</span><span class="ident" id="6039718">Token</span><span class="op" id="6039723">)</span>&nbsp;<span class="builtintype" id="6039725">uint32</span>&nbsp;<span class="op" id="6039732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039735">ret</span><span class="op" id="6039738">,</span>&nbsp;<span class="ident" id="6039740">e</span>&nbsp;<span class="op" id="6039742">:=</span>&nbsp;<span class="ident" id="6039745"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038882">strconv</a></span><span class="op" id="6039752">.</span><span class="ident" id="6039753">ParseInt</span><span class="op" id="6039761">(</span><span class="ident" id="6039762"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039709">op</a></span><span class="op" id="6039764">.</span><span class="ident" id="6039765">Lit</span><span class="op" id="6039768">,</span>&nbsp;<span class="num" id="6039770">0</span><span class="op" id="6039771">,</span>&nbsp;<span class="num" id="6039773">32</span><span class="op" id="6039775">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039778">if</span>&nbsp;<span class="ident" id="6039781"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039740">e</a></span>&nbsp;<span class="op" id="6039783">!=</span>&nbsp;<span class="ident" id="6039786">nil</span>&nbsp;<span class="op" id="6039790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039794"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039698">p</a></span><span class="op" id="6039795">.</span><span class="ident" id="6039796">err</span><span class="op" id="6039799">(</span><span class="ident" id="6039800"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039709">op</a></span><span class="op" id="6039802">.</span><span class="ident" id="6039803">Pos</span><span class="op" id="6039806">,</span>&nbsp;<span class="string" id="6039808">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="6039841">,</span>&nbsp;<span class="ident" id="6039843"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039709">op</a></span><span class="op" id="6039845">.</span><span class="ident" id="6039846">Lit</span><span class="op" id="6039849">,</span>&nbsp;<span class="ident" id="6039851"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039740">e</a></span><span class="op" id="6039852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039856">return</span>&nbsp;<span class="num" id="6039863">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039870">if</span>&nbsp;<span class="ident" id="6039873"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039735">ret</a></span>&nbsp;<span class="op" id="6039877">&gt;</span>&nbsp;<span class="num" id="6039879">0x7fff</span>&nbsp;<span class="op" id="6039886">||</span>&nbsp;<span class="ident" id="6039889"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039735">ret</a></span>&nbsp;<span class="op" id="6039893">&lt;</span>&nbsp;<span class="op" id="6039895">-</span><span class="num" id="6039896">0x8000</span>&nbsp;<span class="op" id="6039903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039907"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039698">p</a></span><span class="op" id="6039908">.</span><span class="ident" id="6039909">err</span><span class="op" id="6039912">(</span><span class="ident" id="6039913"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039709">op</a></span><span class="op" id="6039915">.</span><span class="ident" id="6039916">Pos</span><span class="op" id="6039919">,</span>&nbsp;<span class="string" id="6039921">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="6039956">,</span>&nbsp;<span class="ident" id="6039958"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039709">op</a></span><span class="op" id="6039960">.</span><span class="ident" id="6039961">Lit</span><span class="op" id="6039964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039968">return</span>&nbsp;<span class="num" id="6039975">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039982">return</span>&nbsp;<span class="builtintype" id="6039989">uint32</span><span class="op" id="6039995">(</span><span class="ident" id="6039996"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039735">ret</a></span><span class="op" id="6039999">)</span>&nbsp;<span class="op" id="6040001">&amp;</span>&nbsp;<span class="num" id="6040003">0xffff</span><br>
<span class="lineno"></span><span class="op" id="6040010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6040013">//&nbsp;parseImm&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="6040061">func</span>&nbsp;<span class="ident" id="6040066">parseImm</span><span class="op" id="6040074">(</span><span class="ident" id="6040075">p</span>&nbsp;<span class="op" id="6040077">*</span><span class="ident" id="6040078"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6040084">,</span>&nbsp;<span class="ident" id="6040086">op</span>&nbsp;<span class="op" id="6040089">*</span><span class="ident" id="6040090"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6040094">.</span><span class="ident" id="6040095">Token</span><span class="op" id="6040100">)</span>&nbsp;<span class="builtintype" id="6040102">uint32</span>&nbsp;<span class="op" id="6040109">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040112">ret</span><span class="op" id="6040115">,</span>&nbsp;<span class="ident" id="6040117">e</span>&nbsp;<span class="op" id="6040119">:=</span>&nbsp;<span class="ident" id="6040122"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038882">strconv</a></span><span class="op" id="6040129">.</span><span class="ident" id="6040130">ParseInt</span><span class="op" id="6040138">(</span><span class="ident" id="6040139"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040086">op</a></span><span class="op" id="6040141">.</span><span class="ident" id="6040142">Lit</span><span class="op" id="6040145">,</span>&nbsp;<span class="num" id="6040147">0</span><span class="op" id="6040148">,</span>&nbsp;<span class="num" id="6040150">32</span><span class="op" id="6040152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040155">if</span>&nbsp;<span class="ident" id="6040158"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040117">e</a></span>&nbsp;<span class="op" id="6040160">!=</span>&nbsp;<span class="ident" id="6040163">nil</span>&nbsp;<span class="op" id="6040167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040171"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040075">p</a></span><span class="op" id="6040172">.</span><span class="ident" id="6040173">err</span><span class="op" id="6040176">(</span><span class="ident" id="6040177"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040086">op</a></span><span class="op" id="6040179">.</span><span class="ident" id="6040180">Pos</span><span class="op" id="6040183">,</span>&nbsp;<span class="string" id="6040185">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="6040218">,</span>&nbsp;<span class="ident" id="6040220"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040086">op</a></span><span class="op" id="6040222">.</span><span class="ident" id="6040223">Lit</span><span class="op" id="6040226">,</span>&nbsp;<span class="ident" id="6040228"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040117">e</a></span><span class="op" id="6040229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040233">return</span>&nbsp;<span class="num" id="6040240">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040243">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040247">if</span>&nbsp;<span class="ident" id="6040250"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040112">ret</a></span>&nbsp;<span class="op" id="6040254">&gt;</span>&nbsp;<span class="num" id="6040256">0xffff</span>&nbsp;<span class="op" id="6040263">||</span>&nbsp;<span class="ident" id="6040266"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040112">ret</a></span>&nbsp;<span class="op" id="6040270">&lt;</span>&nbsp;<span class="op" id="6040272">-</span><span class="num" id="6040273">0x8000</span>&nbsp;<span class="op" id="6040280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040284"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040075">p</a></span><span class="op" id="6040285">.</span><span class="ident" id="6040286">err</span><span class="op" id="6040289">(</span><span class="ident" id="6040290"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040086">op</a></span><span class="op" id="6040292">.</span><span class="ident" id="6040293">Pos</span><span class="op" id="6040296">,</span>&nbsp;<span class="string" id="6040298">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="6040333">,</span>&nbsp;<span class="ident" id="6040335"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040086">op</a></span><span class="op" id="6040337">.</span><span class="ident" id="6040338">Lit</span><span class="op" id="6040341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040345">return</span>&nbsp;<span class="num" id="6040352">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040355">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040359">return</span>&nbsp;<span class="builtintype" id="6040366">uint32</span><span class="op" id="6040372">(</span><span class="ident" id="6040373"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040112">ret</a></span><span class="op" id="6040376">)</span>&nbsp;<span class="op" id="6040378">&amp;</span>&nbsp;<span class="num" id="6040380">0xffff</span><br>
<span class="lineno"></span><span class="op" id="6040387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040390">func</span>&nbsp;<span class="ident" id="6040395">makeInstImm</span><span class="op" id="6040406">(</span><span class="ident" id="6040407">op</span><span class="op" id="6040409">,</span>&nbsp;<span class="ident" id="6040411">d</span><span class="op" id="6040412">,</span>&nbsp;<span class="ident" id="6040414">s</span><span class="op" id="6040415">,</span>&nbsp;<span class="ident" id="6040417">im</span>&nbsp;<span class="builtintype" id="6040420">uint32</span><span class="op" id="6040426">)</span>&nbsp;<span class="op" id="6040428">*</span><span class="ident" id="6040429"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span>&nbsp;<span class="op" id="6040434">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040437">ret</span>&nbsp;<span class="op" id="6040441">:=</span>&nbsp;<span class="builtintype" id="6040444">uint32</span><span class="op" id="6040450">(</span><span class="num" id="6040451">0</span><span class="op" id="6040452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040455"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040437">ret</a></span>&nbsp;<span class="op" id="6040459">|=</span>&nbsp;<span class="op" id="6040462">(</span><span class="ident" id="6040463"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040407">op</a></span>&nbsp;<span class="op" id="6040466">&amp;</span>&nbsp;<span class="num" id="6040468">0xff</span><span class="op" id="6040472">)</span>&nbsp;<span class="op" id="6040474">&lt;&lt;</span>&nbsp;<span class="num" id="6040477">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040481"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040437">ret</a></span>&nbsp;<span class="op" id="6040485">|=</span>&nbsp;<span class="op" id="6040488">(</span><span class="ident" id="6040489"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040411">d</a></span>&nbsp;<span class="op" id="6040491">&amp;</span>&nbsp;<span class="num" id="6040493">0x7</span><span class="op" id="6040496">)</span>&nbsp;<span class="op" id="6040498">&lt;&lt;</span>&nbsp;<span class="num" id="6040501">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040505"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040437">ret</a></span>&nbsp;<span class="op" id="6040509">|=</span>&nbsp;<span class="op" id="6040512">(</span><span class="ident" id="6040513"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040414">s</a></span>&nbsp;<span class="op" id="6040515">&amp;</span>&nbsp;<span class="num" id="6040517">0x7</span><span class="op" id="6040520">)</span>&nbsp;<span class="op" id="6040522">&lt;&lt;</span>&nbsp;<span class="num" id="6040525">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040529"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040437">ret</a></span>&nbsp;<span class="op" id="6040533">|=</span>&nbsp;<span class="op" id="6040536">(</span><span class="ident" id="6040537"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040417">im</a></span>&nbsp;<span class="op" id="6040540">&amp;</span>&nbsp;<span class="num" id="6040542">0xffff</span><span class="op" id="6040548">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040552">return</span>&nbsp;<span class="op" id="6040559">&amp;</span><span class="ident" id="6040560"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span><span class="op" id="6040564">{</span><span class="ident" id="6040565">inst</span><span class="op" id="6040569">:</span>&nbsp;<span class="ident" id="6040571"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040437">ret</a></span><span class="op" id="6040574">}</span><br>
<span class="lineno"></span><span class="op" id="6040576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040579">func</span>&nbsp;<span class="ident" id="6040584">parseInstImm</span><span class="op" id="6040596">(</span><span class="ident" id="6040597">p</span>&nbsp;<span class="op" id="6040599">*</span><span class="ident" id="6040600"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6040606">,</span>&nbsp;<span class="ident" id="6040608">ops</span>&nbsp;<span class="op" id="6040612">[</span><span class="op" id="6040613">]</span><span class="op" id="6040614">*</span><span class="ident" id="6040615"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6040619">.</span><span class="ident" id="6040620">Token</span><span class="op" id="6040625">)</span>&nbsp;<span class="op" id="6040627">(</span><span class="op" id="6040628">*</span><span class="ident" id="6040629"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span><span class="op" id="6040633">,</span>&nbsp;<span class="builtintype" id="6040635">bool</span><span class="op" id="6040639">)</span>&nbsp;<span class="op" id="6040641">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040644">op0</span>&nbsp;<span class="op" id="6040648">:=</span>&nbsp;<span class="ident" id="6040651"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040608">ops</a></span><span class="op" id="6040654">[</span><span class="num" id="6040655">0</span><span class="op" id="6040656">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040659">opName</span>&nbsp;<span class="op" id="6040666">:=</span>&nbsp;<span class="ident" id="6040669"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040644">op0</a></span><span class="op" id="6040672">.</span><span class="ident" id="6040673">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040678">args</span>&nbsp;<span class="op" id="6040683">:=</span>&nbsp;<span class="ident" id="6040686"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040608">ops</a></span><span class="op" id="6040689">[</span><span class="num" id="6040690">1</span><span class="op" id="6040691">:</span><span class="op" id="6040692">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040696">var</span>&nbsp;<span class="op" id="6040700">(</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040704">op</span><span class="op" id="6040706">,</span>&nbsp;<span class="ident" id="6040708">d</span><span class="op" id="6040709">,</span>&nbsp;<span class="ident" id="6040711">s</span><span class="op" id="6040712">,</span>&nbsp;<span class="ident" id="6040714">im</span>&nbsp;<span class="builtintype" id="6040717">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040726">pack</span><span class="op" id="6040730">,</span>&nbsp;<span class="ident" id="6040732">sym</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6040739">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040748">fill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6040761">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040767">symTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040780">*</span><span class="ident" id="6040781"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6040785">.</span><span class="ident" id="6040786">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040793">)</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040797">argCount</span>&nbsp;<span class="op" id="6040806">:=</span>&nbsp;<span class="keyword" id="6040809">func</span><span class="op" id="6040813">(</span><span class="ident" id="6040814">n</span>&nbsp;<span class="builtintype" id="6040816">int</span><span class="op" id="6040819">)</span>&nbsp;<span class="builtintype" id="6040821">bool</span>&nbsp;<span class="op" id="6040826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040830">if</span>&nbsp;<span class="op" id="6040833">!</span><span class="ident" id="6040834"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#6052672">argCount</a></span><span class="op" id="6040842">(</span><span class="ident" id="6040843"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6040844">,</span>&nbsp;<span class="ident" id="6040846"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040608">ops</a></span><span class="op" id="6040849">,</span>&nbsp;<span class="ident" id="6040851"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040814">n</a></span><span class="op" id="6040852">)</span>&nbsp;<span class="op" id="6040854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040859">return</span>&nbsp;<span class="builtintype" id="6040866">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040874">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040878">if</span>&nbsp;<span class="ident" id="6040881"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040814">n</a></span>&nbsp;<span class="op" id="6040883">&gt;=</span>&nbsp;<span class="num" id="6040886">1</span>&nbsp;<span class="op" id="6040888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040893"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040708">d</a></span>&nbsp;<span class="op" id="6040895">=</span>&nbsp;<span class="ident" id="6040897"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6040905">(</span><span class="ident" id="6040906"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6040907">,</span>&nbsp;<span class="ident" id="6040909"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6040913">[</span><span class="num" id="6040914">0</span><span class="op" id="6040915">]</span><span class="op" id="6040916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040924">return</span>&nbsp;<span class="builtintype" id="6040931">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040937">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040941">parseSym</span>&nbsp;<span class="op" id="6040950">:=</span>&nbsp;<span class="keyword" id="6040953">func</span><span class="op" id="6040957">(</span><span class="ident" id="6040958">t</span>&nbsp;<span class="op" id="6040960">*</span><span class="ident" id="6040961"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6040965">.</span><span class="ident" id="6040966">Token</span><span class="op" id="6040971">,</span>&nbsp;<span class="ident" id="6040973">f</span>&nbsp;<span class="keyword" id="6040975">func</span><span class="op" id="6040979">(</span><span class="op" id="6040980">*</span><span class="ident" id="6040981"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6040987">,</span>&nbsp;<span class="op" id="6040989">*</span><span class="ident" id="6040990"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038894">lex8</a></span><span class="op" id="6040994">.</span><span class="ident" id="6040995">Token</span><span class="op" id="6041000">)</span>&nbsp;<span class="builtintype" id="6041002">uint32</span><span class="op" id="6041008">)</span>&nbsp;<span class="op" id="6041010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041014">if</span>&nbsp;<span class="ident" id="6041017"><a href="/lonnie.io/e8vm/asm8/parse_sym.go.html#6056604">isSymbol</a></span><span class="op" id="6041025">(</span><span class="ident" id="6041026"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040958">t</a></span><span class="op" id="6041027">.</span><span class="ident" id="6041028">Lit</span><span class="op" id="6041031">)</span>&nbsp;<span class="op" id="6041033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041038"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040726">pack</a></span><span class="op" id="6041042">,</span>&nbsp;<span class="ident" id="6041044"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040732">sym</a></span>&nbsp;<span class="op" id="6041048">=</span>&nbsp;<span class="ident" id="6041050"><a href="/lonnie.io/e8vm/asm8/parse_sym.go.html#6057343">parseSym</a></span><span class="op" id="6041058">(</span><span class="ident" id="6041059"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041060">,</span>&nbsp;<span class="ident" id="6041062"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040958">t</a></span><span class="op" id="6041063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041068"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040748">fill</a></span>&nbsp;<span class="op" id="6041073">=</span>&nbsp;<span class="ident" id="6041075"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037442">fillLow</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041086"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040767">symTok</a></span>&nbsp;<span class="op" id="6041093">=</span>&nbsp;<span class="ident" id="6041095"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040958">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041099">}</span>&nbsp;<span class="keyword" id="6041101">else</span>&nbsp;<span class="op" id="6041106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041111"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040714">im</a></span>&nbsp;<span class="op" id="6041114">=</span>&nbsp;<span class="ident" id="6041116"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040973">f</a></span><span class="op" id="6041117">(</span><span class="ident" id="6041118"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041119">,</span>&nbsp;<span class="ident" id="6041121"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040958">t</a></span><span class="op" id="6041122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041129">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041133">var</span>&nbsp;<span class="ident" id="6041137">found</span>&nbsp;<span class="builtintype" id="6041143">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041149">if</span>&nbsp;<span class="ident" id="6041152"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040704">op</a></span><span class="op" id="6041154">,</span>&nbsp;<span class="ident" id="6041156"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041162">=</span>&nbsp;<span class="ident" id="6041164"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6038953">opImsMap</a></span><span class="op" id="6041172">[</span><span class="ident" id="6041173"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040659">opName</a></span><span class="op" id="6041179">]</span><span class="op" id="6041180">;</span>&nbsp;<span class="ident" id="6041182"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041192">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041220">if</span>&nbsp;<span class="ident" id="6041223"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040797">argCount</a></span><span class="op" id="6041231">(</span><span class="num" id="6041232">3</span><span class="op" id="6041233">)</span>&nbsp;<span class="op" id="6041235">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041240"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040711">s</a></span>&nbsp;<span class="op" id="6041242">=</span>&nbsp;<span class="ident" id="6041244"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6041252">(</span><span class="ident" id="6041253"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041254">,</span>&nbsp;<span class="ident" id="6041256"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041260">[</span><span class="num" id="6041261">1</span><span class="op" id="6041262">]</span><span class="op" id="6041263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041268"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040941">parseSym</a></span><span class="op" id="6041276">(</span><span class="ident" id="6041277"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041281">[</span><span class="num" id="6041282">2</span><span class="op" id="6041283">]</span><span class="op" id="6041284">,</span>&nbsp;<span class="ident" id="6041286"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039689">parseIms</a></span><span class="op" id="6041294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041301">}</span>&nbsp;<span class="keyword" id="6041303">else</span>&nbsp;<span class="keyword" id="6041308">if</span>&nbsp;<span class="ident" id="6041311"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040704">op</a></span><span class="op" id="6041313">,</span>&nbsp;<span class="ident" id="6041315"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041321">=</span>&nbsp;<span class="ident" id="6041323"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039014">opMemMap</a></span><span class="op" id="6041331">[</span><span class="ident" id="6041332"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040659">opName</a></span><span class="op" id="6041338">]</span><span class="op" id="6041339">;</span>&nbsp;<span class="ident" id="6041341"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041351">if</span>&nbsp;<span class="builtinfunc" id="6041354">len</span><span class="op" id="6041357">(</span><span class="ident" id="6041358"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041362">)</span>&nbsp;<span class="op" id="6041364">==</span>&nbsp;<span class="num" id="6041367">2</span>&nbsp;<span class="op" id="6041369">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041374">//&nbsp;mem&nbsp;op&nbsp;can&nbsp;omit&nbsp;the&nbsp;offset&nbsp;if&nbsp;it&nbsp;is&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041418"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040708">d</a></span>&nbsp;<span class="op" id="6041420">=</span>&nbsp;<span class="ident" id="6041422"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6041430">(</span><span class="ident" id="6041431"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041432">,</span>&nbsp;<span class="ident" id="6041434"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041438">[</span><span class="num" id="6041439">0</span><span class="op" id="6041440">]</span><span class="op" id="6041441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041446"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040711">s</a></span>&nbsp;<span class="op" id="6041448">=</span>&nbsp;<span class="ident" id="6041450"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6041458">(</span><span class="ident" id="6041459"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041460">,</span>&nbsp;<span class="ident" id="6041462"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041466">[</span><span class="num" id="6041467">1</span><span class="op" id="6041468">]</span><span class="op" id="6041469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041473">}</span>&nbsp;<span class="keyword" id="6041475">else</span>&nbsp;<span class="keyword" id="6041480">if</span>&nbsp;<span class="ident" id="6041483"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040797">argCount</a></span><span class="op" id="6041491">(</span><span class="num" id="6041492">3</span><span class="op" id="6041493">)</span>&nbsp;<span class="op" id="6041495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041500"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040711">s</a></span>&nbsp;<span class="op" id="6041502">=</span>&nbsp;<span class="ident" id="6041504"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6041512">(</span><span class="ident" id="6041513"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041514">,</span>&nbsp;<span class="ident" id="6041516"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041520">[</span><span class="num" id="6041521">1</span><span class="op" id="6041522">]</span><span class="op" id="6041523">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041528"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040941">parseSym</a></span><span class="op" id="6041536">(</span><span class="ident" id="6041537"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041541">[</span><span class="num" id="6041542">2</span><span class="op" id="6041543">]</span><span class="op" id="6041544">,</span>&nbsp;<span class="ident" id="6041546"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039689">parseIms</a></span><span class="op" id="6041554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041561">}</span>&nbsp;<span class="keyword" id="6041563">else</span>&nbsp;<span class="keyword" id="6041568">if</span>&nbsp;<span class="ident" id="6041571"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040704">op</a></span><span class="op" id="6041573">,</span>&nbsp;<span class="ident" id="6041575"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041581">=</span>&nbsp;<span class="ident" id="6041583"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039139">opImuMap</a></span><span class="op" id="6041591">[</span><span class="ident" id="6041592"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040659">opName</a></span><span class="op" id="6041598">]</span><span class="op" id="6041599">;</span>&nbsp;<span class="ident" id="6041601"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041611">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041641">if</span>&nbsp;<span class="ident" id="6041644"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040797">argCount</a></span><span class="op" id="6041652">(</span><span class="num" id="6041653">3</span><span class="op" id="6041654">)</span>&nbsp;<span class="op" id="6041656">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041661"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040711">s</a></span>&nbsp;<span class="op" id="6041663">=</span>&nbsp;<span class="ident" id="6041665"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#6056310">parseReg</a></span><span class="op" id="6041673">(</span><span class="ident" id="6041674"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040597">p</a></span><span class="op" id="6041675">,</span>&nbsp;<span class="ident" id="6041677"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041681">[</span><span class="num" id="6041682">1</span><span class="op" id="6041683">]</span><span class="op" id="6041684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041689"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040941">parseSym</a></span><span class="op" id="6041697">(</span><span class="ident" id="6041698"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041702">[</span><span class="num" id="6041703">2</span><span class="op" id="6041704">]</span><span class="op" id="6041705">,</span>&nbsp;<span class="ident" id="6041707"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039336">parseImu</a></span><span class="op" id="6041715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041722">}</span>&nbsp;<span class="keyword" id="6041724">else</span>&nbsp;<span class="keyword" id="6041729">if</span>&nbsp;<span class="ident" id="6041732"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040704">op</a></span><span class="op" id="6041734">,</span>&nbsp;<span class="ident" id="6041736"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041742">=</span>&nbsp;<span class="ident" id="6041744"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6039235">opImmMap</a></span><span class="op" id="6041752">[</span><span class="ident" id="6041753"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040659">opName</a></span><span class="op" id="6041759">]</span><span class="op" id="6041760">;</span>&nbsp;<span class="ident" id="6041762"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041137">found</a></span>&nbsp;<span class="op" id="6041768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041772">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041808">if</span>&nbsp;<span class="ident" id="6041811"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040797">argCount</a></span><span class="op" id="6041819">(</span><span class="num" id="6041820">2</span><span class="op" id="6041821">)</span>&nbsp;<span class="op" id="6041823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041828"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040941">parseSym</a></span><span class="op" id="6041836">(</span><span class="ident" id="6041837"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040678">args</a></span><span class="op" id="6041841">[</span><span class="num" id="6041842">1</span><span class="op" id="6041843">]</span><span class="op" id="6041844">,</span>&nbsp;<span class="ident" id="6041846"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040066">parseImm</a></span><span class="op" id="6041854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041862">if</span>&nbsp;<span class="ident" id="6041865"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040659">opName</a></span>&nbsp;<span class="op" id="6041872">==</span>&nbsp;<span class="string" id="6041875">&#34;lui&#34;</span>&nbsp;<span class="op" id="6041881">&amp;&amp;</span>&nbsp;<span class="ident" id="6041884"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040748">fill</a></span>&nbsp;<span class="op" id="6041889">==</span>&nbsp;<span class="ident" id="6041892"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037442">fillLow</a></span>&nbsp;<span class="op" id="6041900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041905"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040748">fill</a></span>&nbsp;<span class="op" id="6041910">=</span>&nbsp;<span class="ident" id="6041912"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037482">fillHigh</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041926">}</span>&nbsp;<span class="keyword" id="6041928">else</span>&nbsp;<span class="op" id="6041933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041937">return</span>&nbsp;<span class="ident" id="6041944">nil</span><span class="op" id="6041947">,</span>&nbsp;<span class="builtintype" id="6041949">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041960">ret</span>&nbsp;<span class="op" id="6041964">:=</span>&nbsp;<span class="ident" id="6041967"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040395">makeInstImm</a></span><span class="op" id="6041978">(</span><span class="ident" id="6041979"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040704">op</a></span><span class="op" id="6041981">,</span>&nbsp;<span class="ident" id="6041983"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040708">d</a></span><span class="op" id="6041984">,</span>&nbsp;<span class="ident" id="6041986"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040711">s</a></span><span class="op" id="6041987">,</span>&nbsp;<span class="ident" id="6041989"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040714">im</a></span><span class="op" id="6041991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041994"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041960">ret</a></span><span class="op" id="6041997">.</span><span class="ident" id="6041998">pack</span>&nbsp;<span class="op" id="6042003">=</span>&nbsp;<span class="ident" id="6042005"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040726">pack</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042011"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041960">ret</a></span><span class="op" id="6042014">.</span><span class="ident" id="6042015">symbol</span>&nbsp;<span class="op" id="6042022">=</span>&nbsp;<span class="ident" id="6042024"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040732">sym</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042029"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041960">ret</a></span><span class="op" id="6042032">.</span><span class="ident" id="6042033">fill</span>&nbsp;<span class="op" id="6042038">=</span>&nbsp;<span class="ident" id="6042040"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040748">fill</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042046"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041960">ret</a></span><span class="op" id="6042049">.</span><span class="ident" id="6042050">symTok</span>&nbsp;<span class="op" id="6042057">=</span>&nbsp;<span class="ident" id="6042059"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6040767">symTok</a></span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042068">return</span>&nbsp;<span class="ident" id="6042075"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#6041960">ret</a></span><span class="op" id="6042078">,</span>&nbsp;<span class="builtintype" id="6042080">true</span><br>
<span class="lineno"></span><span class="op" id="6042085">}</span>
</div>
</body>
</html>
