<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html" class="current">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7357290">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7357346">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7357400">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7357451">package</span>&nbsp;<span class="ident" id="7357459">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357466">import</span>&nbsp;<span class="op" id="7357473">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357476">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7357487">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7357497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357500">var</span>&nbsp;<span class="op" id="7357504">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357507">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357517">=</span>&nbsp;<span class="ident" id="7357519">runtime</span><span class="op" id="7357526">.</span><span class="ident" id="7357527">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357533">thisArch</span>&nbsp;&nbsp;<span class="op" id="7357543">=</span>&nbsp;<span class="ident" id="7357545">runtime</span><span class="op" id="7357552">.</span><span class="ident" id="7357553">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357561">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7357571">=</span>&nbsp;<span class="ident" id="7357573">anotherOS</span><span class="op" id="7357582">(</span><span class="op" id="7357583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357586">otherArch</span>&nbsp;<span class="op" id="7357596">=</span>&nbsp;<span class="ident" id="7357598">anotherArch</span><span class="op" id="7357609">(</span><span class="op" id="7357610">)</span><br>
<span class="lineno"></span><span class="op" id="7357612">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357615">func</span>&nbsp;<span class="ident" id="7357620">anotherOS</span><span class="op" id="7357629">(</span><span class="op" id="7357630">)</span>&nbsp;<span class="builtintype" id="7357632">string</span>&nbsp;<span class="op" id="7357639">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357642">if</span>&nbsp;<span class="ident" id="7357645">thisOS</span>&nbsp;<span class="op" id="7357652">!=</span>&nbsp;<span class="string" id="7357655">&#34;darwin&#34;</span>&nbsp;<span class="op" id="7357664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357668">return</span>&nbsp;<span class="string" id="7357675">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357688">return</span>&nbsp;<span class="string" id="7357695">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="7357703">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7357706">func</span>&nbsp;<span class="ident" id="7357711">anotherArch</span><span class="op" id="7357722">(</span><span class="op" id="7357723">)</span>&nbsp;<span class="builtintype" id="7357725">string</span>&nbsp;<span class="op" id="7357732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357735">if</span>&nbsp;<span class="ident" id="7357738">thisArch</span>&nbsp;<span class="op" id="7357747">!=</span>&nbsp;<span class="string" id="7357750">&#34;amd64&#34;</span>&nbsp;<span class="op" id="7357758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357762">return</span>&nbsp;<span class="string" id="7357769">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357778">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7357781">return</span>&nbsp;<span class="string" id="7357788">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="7357794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357797">type</span>&nbsp;<span class="ident" id="7357802">GoodFileTest</span>&nbsp;<span class="keyword" id="7357815">struct</span>&nbsp;<span class="op" id="7357822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357825">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7357832">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7357840">result</span>&nbsp;<span class="builtintype" id="7357847">bool</span><br>
<span class="lineno"></span><span class="op" id="7357852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357855">var</span>&nbsp;<span class="ident" id="7357859">tests</span>&nbsp;<span class="op" id="7357865">=</span>&nbsp;<span class="op" id="7357867">[</span><span class="op" id="7357868">]</span><span class="ident" id="7357869">GoodFileTest</span><span class="op" id="7357881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357884">{</span><span class="string" id="7357885">&#34;file.go&#34;</span><span class="op" id="7357894">,</span>&nbsp;<span class="builtintype" id="7357896">true</span><span class="op" id="7357900">}</span><span class="op" id="7357901">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357904">{</span><span class="string" id="7357905">&#34;file.c&#34;</span><span class="op" id="7357913">,</span>&nbsp;<span class="builtintype" id="7357915">true</span><span class="op" id="7357919">}</span><span class="op" id="7357920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357923">{</span><span class="string" id="7357924">&#34;file_foo.go&#34;</span><span class="op" id="7357937">,</span>&nbsp;<span class="builtintype" id="7357939">true</span><span class="op" id="7357943">}</span><span class="op" id="7357944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357947">{</span><span class="string" id="7357948">&#34;file_&#34;</span>&nbsp;<span class="op" id="7357956">+</span>&nbsp;<span class="ident" id="7357958">thisArch</span>&nbsp;<span class="op" id="7357967">+</span>&nbsp;<span class="string" id="7357969">&#34;.go&#34;</span><span class="op" id="7357974">,</span>&nbsp;<span class="builtintype" id="7357976">true</span><span class="op" id="7357980">}</span><span class="op" id="7357981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7357984">{</span><span class="string" id="7357985">&#34;file_&#34;</span>&nbsp;<span class="op" id="7357993">+</span>&nbsp;<span class="ident" id="7357995">otherArch</span>&nbsp;<span class="op" id="7358005">+</span>&nbsp;<span class="string" id="7358007">&#34;.go&#34;</span><span class="op" id="7358012">,</span>&nbsp;<span class="builtintype" id="7358014">false</span><span class="op" id="7358019">}</span><span class="op" id="7358020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358023">{</span><span class="string" id="7358024">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358032">+</span>&nbsp;<span class="ident" id="7358034">thisOS</span>&nbsp;<span class="op" id="7358041">+</span>&nbsp;<span class="string" id="7358043">&#34;.go&#34;</span><span class="op" id="7358048">,</span>&nbsp;<span class="builtintype" id="7358050">true</span><span class="op" id="7358054">}</span><span class="op" id="7358055">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358058">{</span><span class="string" id="7358059">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358067">+</span>&nbsp;<span class="ident" id="7358069">otherOS</span>&nbsp;<span class="op" id="7358077">+</span>&nbsp;<span class="string" id="7358079">&#34;.go&#34;</span><span class="op" id="7358084">,</span>&nbsp;<span class="builtintype" id="7358086">false</span><span class="op" id="7358091">}</span><span class="op" id="7358092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358095">{</span><span class="string" id="7358096">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358104">+</span>&nbsp;<span class="ident" id="7358106">thisOS</span>&nbsp;<span class="op" id="7358113">+</span>&nbsp;<span class="string" id="7358115">&#34;_&#34;</span>&nbsp;<span class="op" id="7358119">+</span>&nbsp;<span class="ident" id="7358121">thisArch</span>&nbsp;<span class="op" id="7358130">+</span>&nbsp;<span class="string" id="7358132">&#34;.go&#34;</span><span class="op" id="7358137">,</span>&nbsp;<span class="builtintype" id="7358139">true</span><span class="op" id="7358143">}</span><span class="op" id="7358144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358147">{</span><span class="string" id="7358148">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358156">+</span>&nbsp;<span class="ident" id="7358158">otherOS</span>&nbsp;<span class="op" id="7358166">+</span>&nbsp;<span class="string" id="7358168">&#34;_&#34;</span>&nbsp;<span class="op" id="7358172">+</span>&nbsp;<span class="ident" id="7358174">thisArch</span>&nbsp;<span class="op" id="7358183">+</span>&nbsp;<span class="string" id="7358185">&#34;.go&#34;</span><span class="op" id="7358190">,</span>&nbsp;<span class="builtintype" id="7358192">false</span><span class="op" id="7358197">}</span><span class="op" id="7358198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358201">{</span><span class="string" id="7358202">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358210">+</span>&nbsp;<span class="ident" id="7358212">thisOS</span>&nbsp;<span class="op" id="7358219">+</span>&nbsp;<span class="string" id="7358221">&#34;_&#34;</span>&nbsp;<span class="op" id="7358225">+</span>&nbsp;<span class="ident" id="7358227">otherArch</span>&nbsp;<span class="op" id="7358237">+</span>&nbsp;<span class="string" id="7358239">&#34;.go&#34;</span><span class="op" id="7358244">,</span>&nbsp;<span class="builtintype" id="7358246">false</span><span class="op" id="7358251">}</span><span class="op" id="7358252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358255">{</span><span class="string" id="7358256">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358264">+</span>&nbsp;<span class="ident" id="7358266">otherOS</span>&nbsp;<span class="op" id="7358274">+</span>&nbsp;<span class="string" id="7358276">&#34;_&#34;</span>&nbsp;<span class="op" id="7358280">+</span>&nbsp;<span class="ident" id="7358282">otherArch</span>&nbsp;<span class="op" id="7358292">+</span>&nbsp;<span class="string" id="7358294">&#34;.go&#34;</span><span class="op" id="7358299">,</span>&nbsp;<span class="builtintype" id="7358301">false</span><span class="op" id="7358306">}</span><span class="op" id="7358307">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358310">{</span><span class="string" id="7358311">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7358323">+</span>&nbsp;<span class="ident" id="7358325">thisArch</span>&nbsp;<span class="op" id="7358334">+</span>&nbsp;<span class="string" id="7358336">&#34;.go&#34;</span><span class="op" id="7358341">,</span>&nbsp;<span class="builtintype" id="7358343">true</span><span class="op" id="7358347">}</span><span class="op" id="7358348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358351">{</span><span class="string" id="7358352">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7358364">+</span>&nbsp;<span class="ident" id="7358366">otherArch</span>&nbsp;<span class="op" id="7358376">+</span>&nbsp;<span class="string" id="7358378">&#34;.go&#34;</span><span class="op" id="7358383">,</span>&nbsp;<span class="builtintype" id="7358385">false</span><span class="op" id="7358390">}</span><span class="op" id="7358391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358394">{</span><span class="string" id="7358395">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358403">+</span>&nbsp;<span class="ident" id="7358405">thisOS</span>&nbsp;<span class="op" id="7358412">+</span>&nbsp;<span class="string" id="7358414">&#34;.c&#34;</span><span class="op" id="7358418">,</span>&nbsp;<span class="builtintype" id="7358420">true</span><span class="op" id="7358424">}</span><span class="op" id="7358425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358428">{</span><span class="string" id="7358429">&#34;file_&#34;</span>&nbsp;<span class="op" id="7358437">+</span>&nbsp;<span class="ident" id="7358439">otherOS</span>&nbsp;<span class="op" id="7358447">+</span>&nbsp;<span class="string" id="7358449">&#34;.c&#34;</span><span class="op" id="7358453">,</span>&nbsp;<span class="builtintype" id="7358455">false</span><span class="op" id="7358460">}</span><span class="op" id="7358461">,</span><br>
<span class="lineno"></span><span class="op" id="7358463">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7358466">func</span>&nbsp;<span class="ident" id="7358471">TestGoodOSArch</span><span class="op" id="7358485">(</span><span class="ident" id="7358486">t</span>&nbsp;<span class="op" id="7358488">*</span><span class="ident" id="7358489">testing</span><span class="op" id="7358496">.</span><span class="ident" id="7358497">T</span><span class="op" id="7358498">)</span>&nbsp;<span class="op" id="7358500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358503">for</span>&nbsp;<span class="ident" id="7358507">_</span><span class="op" id="7358508">,</span>&nbsp;<span class="ident" id="7358510">test</span>&nbsp;<span class="op" id="7358515">:=</span>&nbsp;<span class="keyword" id="7358518">range</span>&nbsp;<span class="ident" id="7358524">tests</span>&nbsp;<span class="op" id="7358530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7358534">if</span>&nbsp;<span class="ident" id="7358537">Default</span><span class="op" id="7358544">.</span><span class="ident" id="7358545">goodOSArchFile</span><span class="op" id="7358559">(</span><span class="ident" id="7358560">test</span><span class="op" id="7358564">.</span><span class="ident" id="7358565">name</span><span class="op" id="7358569">,</span>&nbsp;<span class="builtinfunc" id="7358571">make</span><span class="op" id="7358575">(</span><span class="keyword" id="7358576">map</span><span class="op" id="7358579">[</span><span class="builtintype" id="7358580">string</span><span class="op" id="7358586">]</span><span class="builtintype" id="7358587">bool</span><span class="op" id="7358591">)</span><span class="op" id="7358592">)</span>&nbsp;<span class="op" id="7358594">!=</span>&nbsp;<span class="ident" id="7358597">test</span><span class="op" id="7358601">.</span><span class="ident" id="7358602">result</span>&nbsp;<span class="op" id="7358609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7358614">t</span><span class="op" id="7358615">.</span><span class="ident" id="7358616">Fatalf</span><span class="op" id="7358622">(</span><span class="string" id="7358623">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7358649">,</span>&nbsp;<span class="ident" id="7358651">test</span><span class="op" id="7358655">.</span><span class="ident" id="7358656">name</span><span class="op" id="7358660">,</span>&nbsp;<span class="ident" id="7358662">test</span><span class="op" id="7358666">.</span><span class="ident" id="7358667">result</span><span class="op" id="7358673">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7358680">}</span><br>
<span class="lineno"></span><span class="op" id="7358682">}</span>
</div>
</body>
</html>
