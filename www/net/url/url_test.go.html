<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7628551">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7628606">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7628660">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7628711">package</span>&nbsp;<span class="ident" id="7628719">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7628724">import</span>&nbsp;<span class="op" id="7628731">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7628734">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7628741">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7628752">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7628763">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7628773">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7628776">type</span>&nbsp;<span class="ident" id="7628781">URLTest</span>&nbsp;<span class="keyword" id="7628789">struct</span>&nbsp;<span class="op" id="7628796">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7628799">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7628809">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7628817">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628827">*</span><span class="ident" id="7628828">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7628833">roundtrip</span>&nbsp;<span class="builtintype" id="7628843">string</span>&nbsp;<span class="comment" id="7628850">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7628921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7628924">var</span>&nbsp;<span class="ident" id="7628928">urltests</span>&nbsp;<span class="op" id="7628937">=</span>&nbsp;<span class="op" id="7628939">[</span><span class="op" id="7628940">]</span><span class="ident" id="7628941">URLTest</span><span class="op" id="7628948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7628951">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7628963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7628967">&#34;http://www.google.com&#34;</span><span class="op" id="7628990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7628994">&amp;</span><span class="ident" id="7628995">URL</span><span class="op" id="7628998">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629003">Scheme</span><span class="op" id="7629009">:</span>&nbsp;<span class="string" id="7629011">&#34;http&#34;</span><span class="op" id="7629017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629022">Host</span><span class="op" id="7629026">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629030">&#34;www.google.com&#34;</span><span class="op" id="7629046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629050">}</span><span class="op" id="7629051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629055">&#34;&#34;</span><span class="op" id="7629057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629060">}</span><span class="op" id="7629061">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7629064">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629077">&#34;http://www.google.com/&#34;</span><span class="op" id="7629101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629105">&amp;</span><span class="ident" id="7629106">URL</span><span class="op" id="7629109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629114">Scheme</span><span class="op" id="7629120">:</span>&nbsp;<span class="string" id="7629122">&#34;http&#34;</span><span class="op" id="7629128">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629133">Host</span><span class="op" id="7629137">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629141">&#34;www.google.com&#34;</span><span class="op" id="7629157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629162">Path</span><span class="op" id="7629166">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629170">&#34;/&#34;</span><span class="op" id="7629173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629177">}</span><span class="op" id="7629178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629182">&#34;&#34;</span><span class="op" id="7629184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629187">}</span><span class="op" id="7629188">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7629191">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629222">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7629262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629266">&amp;</span><span class="ident" id="7629267">URL</span><span class="op" id="7629270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629275">Scheme</span><span class="op" id="7629281">:</span>&nbsp;<span class="string" id="7629283">&#34;http&#34;</span><span class="op" id="7629289">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629294">Host</span><span class="op" id="7629298">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629302">&#34;www.google.com&#34;</span><span class="op" id="7629318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629323">Path</span><span class="op" id="7629327">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629331">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7629346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629350">}</span><span class="op" id="7629351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629355">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7629393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629396">}</span><span class="op" id="7629397">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7629400">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629413">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7629446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629450">&amp;</span><span class="ident" id="7629451">URL</span><span class="op" id="7629454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629459">Scheme</span><span class="op" id="7629465">:</span>&nbsp;<span class="string" id="7629467">&#34;ftp&#34;</span><span class="op" id="7629472">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629477">User</span><span class="op" id="7629481">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7629485">User</span><span class="op" id="7629489">(</span><span class="string" id="7629490">&#34;webmaster&#34;</span><span class="op" id="7629501">)</span><span class="op" id="7629502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629507">Host</span><span class="op" id="7629511">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629515">&#34;www.google.com&#34;</span><span class="op" id="7629531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629536">Path</span><span class="op" id="7629540">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629544">&#34;/&#34;</span><span class="op" id="7629547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629551">}</span><span class="op" id="7629552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629556">&#34;&#34;</span><span class="op" id="7629558">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629561">}</span><span class="op" id="7629562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7629565">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629601">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7629635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629639">&amp;</span><span class="ident" id="7629640">URL</span><span class="op" id="7629643">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629648">Scheme</span><span class="op" id="7629654">:</span>&nbsp;<span class="string" id="7629656">&#34;ftp&#34;</span><span class="op" id="7629661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629666">User</span><span class="op" id="7629670">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7629674">User</span><span class="op" id="7629678">(</span><span class="string" id="7629679">&#34;john&nbsp;doe&#34;</span><span class="op" id="7629689">)</span><span class="op" id="7629690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629695">Host</span><span class="op" id="7629699">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629703">&#34;www.google.com&#34;</span><span class="op" id="7629719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629724">Path</span><span class="op" id="7629728">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629732">&#34;/&#34;</span><span class="op" id="7629735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629739">}</span><span class="op" id="7629740">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629744">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7629778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629781">}</span><span class="op" id="7629782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7629785">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629799">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7629837">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629841">&amp;</span><span class="ident" id="7629842">URL</span><span class="op" id="7629845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629850">Scheme</span><span class="op" id="7629856">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7629860">&#34;http&#34;</span><span class="op" id="7629866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629871">Host</span><span class="op" id="7629875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629881">&#34;www.google.com&#34;</span><span class="op" id="7629897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629902">Path</span><span class="op" id="7629906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7629912">&#34;/&#34;</span><span class="op" id="7629915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629920">RawQuery</span><span class="op" id="7629928">:</span>&nbsp;<span class="string" id="7629930">&#34;q=go+language&#34;</span><span class="op" id="7629945">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629949">}</span><span class="op" id="7629950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7629954">&#34;&#34;</span><span class="op" id="7629956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7629959">}</span><span class="op" id="7629960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7629963">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630003">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630007">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7630047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630051">&amp;</span><span class="ident" id="7630052">URL</span><span class="op" id="7630055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630060">Scheme</span><span class="op" id="7630066">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630070">&#34;http&#34;</span><span class="op" id="7630076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630081">Host</span><span class="op" id="7630085">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7630091">&#34;www.google.com&#34;</span><span class="op" id="7630107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630112">Path</span><span class="op" id="7630116">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7630122">&#34;/&#34;</span><span class="op" id="7630125">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630130">RawQuery</span><span class="op" id="7630138">:</span>&nbsp;<span class="string" id="7630140">&#34;q=go%20language&#34;</span><span class="op" id="7630157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630161">}</span><span class="op" id="7630162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630166">&#34;&#34;</span><span class="op" id="7630168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630171">}</span><span class="op" id="7630172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7630175">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630201">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7630236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630240">&amp;</span><span class="ident" id="7630241">URL</span><span class="op" id="7630244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630249">Scheme</span><span class="op" id="7630255">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630259">&#34;http&#34;</span><span class="op" id="7630265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630270">Host</span><span class="op" id="7630274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7630280">&#34;www.google.com&#34;</span><span class="op" id="7630296">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630301">Path</span><span class="op" id="7630305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7630311">&#34;/a&nbsp;b&#34;</span><span class="op" id="7630317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630322">RawQuery</span><span class="op" id="7630330">:</span>&nbsp;<span class="string" id="7630332">&#34;q=c+d&#34;</span><span class="op" id="7630339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630343">}</span><span class="op" id="7630344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630348">&#34;&#34;</span><span class="op" id="7630350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630353">}</span><span class="op" id="7630354">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7630357">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630403">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7630439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630443">&amp;</span><span class="ident" id="7630444">URL</span><span class="op" id="7630447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630452">Scheme</span><span class="op" id="7630458">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630462">&#34;http&#34;</span><span class="op" id="7630468">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630473">Opaque</span><span class="op" id="7630479">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630483">&#34;www.google.com/&#34;</span><span class="op" id="7630500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630505">RawQuery</span><span class="op" id="7630513">:</span>&nbsp;<span class="string" id="7630515">&#34;q=go+language&#34;</span><span class="op" id="7630530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630534">}</span><span class="op" id="7630535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630539">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7630575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630578">}</span><span class="op" id="7630579">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7630582">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630628">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7630670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630674">&amp;</span><span class="ident" id="7630675">URL</span><span class="op" id="7630678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630683">Scheme</span><span class="op" id="7630689">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630693">&#34;http&#34;</span><span class="op" id="7630699">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630704">Opaque</span><span class="op" id="7630710">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630714">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7630737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630742">RawQuery</span><span class="op" id="7630750">:</span>&nbsp;<span class="string" id="7630752">&#34;q=go+language&#34;</span><span class="op" id="7630767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630771">}</span><span class="op" id="7630772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630776">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7630818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630821">}</span><span class="op" id="7630822">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7630825">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630857">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7630887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630891">&amp;</span><span class="ident" id="7630892">URL</span><span class="op" id="7630895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630900">Scheme</span><span class="op" id="7630906">:</span>&nbsp;<span class="string" id="7630908">&#34;mailto&#34;</span><span class="op" id="7630916">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7630921">Path</span><span class="op" id="7630925">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7630929">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7630952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7630956">}</span><span class="op" id="7630957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7630961">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7630993">,</span>&nbsp;<span class="comment" id="7630995">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631022">}</span><span class="op" id="7631023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631026">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631048">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7631077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631081">&amp;</span><span class="ident" id="7631082">URL</span><span class="op" id="7631085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631090">Scheme</span><span class="op" id="7631096">:</span>&nbsp;<span class="string" id="7631098">&#34;mailto&#34;</span><span class="op" id="7631106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631111">Opaque</span><span class="op" id="7631117">:</span>&nbsp;<span class="string" id="7631119">&#34;webmaster@golang.org&#34;</span><span class="op" id="7631141">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631145">}</span><span class="op" id="7631146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631150">&#34;&#34;</span><span class="op" id="7631152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631155">}</span><span class="op" id="7631156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631159">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631213">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631217">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7631240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631244">&amp;</span><span class="ident" id="7631245">URL</span><span class="op" id="7631248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631253">Path</span><span class="op" id="7631257">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7631263">&#34;/foo&#34;</span><span class="op" id="7631269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631274">RawQuery</span><span class="op" id="7631282">:</span>&nbsp;<span class="string" id="7631284">&#34;query=http://bad&#34;</span><span class="op" id="7631302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631306">}</span><span class="op" id="7631307">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631311">&#34;&#34;</span><span class="op" id="7631313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631316">}</span><span class="op" id="7631317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631320">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631381">&#34;//foo&#34;</span><span class="op" id="7631388">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631392">&amp;</span><span class="ident" id="7631393">URL</span><span class="op" id="7631396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631401">Host</span><span class="op" id="7631405">:</span>&nbsp;<span class="string" id="7631407">&#34;foo&#34;</span><span class="op" id="7631412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631416">}</span><span class="op" id="7631417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631421">&#34;&#34;</span><span class="op" id="7631423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631426">}</span><span class="op" id="7631427">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631430">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631496">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7631517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631521">&amp;</span><span class="ident" id="7631522">URL</span><span class="op" id="7631525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631530">User</span><span class="op" id="7631534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631540">User</span><span class="op" id="7631544">(</span><span class="string" id="7631545">&#34;user&#34;</span><span class="op" id="7631551">)</span><span class="op" id="7631552">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631557">Host</span><span class="op" id="7631561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7631567">&#34;foo&#34;</span><span class="op" id="7631572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631577">Path</span><span class="op" id="7631581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7631587">&#34;/path&#34;</span><span class="op" id="7631594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631599">RawQuery</span><span class="op" id="7631607">:</span>&nbsp;<span class="string" id="7631609">&#34;a=b&#34;</span><span class="op" id="7631614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631618">}</span><span class="op" id="7631619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631623">&#34;&#34;</span><span class="op" id="7631625">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631628">}</span><span class="op" id="7631629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631632">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631707">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631768">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631827">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7631887">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631910">&#34;///threeslashes&#34;</span><span class="op" id="7631927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631931">&amp;</span><span class="ident" id="7631932">URL</span><span class="op" id="7631935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7631940">Path</span><span class="op" id="7631944">:</span>&nbsp;<span class="string" id="7631946">&#34;///threeslashes&#34;</span><span class="op" id="7631963">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631967">}</span><span class="op" id="7631968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631972">&#34;&#34;</span><span class="op" id="7631974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631977">}</span><span class="op" id="7631978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7631981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7631985">&#34;http://user:password@google.com&#34;</span><span class="op" id="7632018">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632022">&amp;</span><span class="ident" id="7632023">URL</span><span class="op" id="7632026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632031">Scheme</span><span class="op" id="7632037">:</span>&nbsp;<span class="string" id="7632039">&#34;http&#34;</span><span class="op" id="7632045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632050">User</span><span class="op" id="7632054">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7632058">UserPassword</span><span class="op" id="7632070">(</span><span class="string" id="7632071">&#34;user&#34;</span><span class="op" id="7632077">,</span>&nbsp;<span class="string" id="7632079">&#34;password&#34;</span><span class="op" id="7632089">)</span><span class="op" id="7632090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632095">Host</span><span class="op" id="7632099">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7632103">&#34;google.com&#34;</span><span class="op" id="7632115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632119">}</span><span class="op" id="7632120">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632124">&#34;http://user:password@google.com&#34;</span><span class="op" id="7632157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632160">}</span><span class="op" id="7632161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7632164">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632220">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7632253">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632257">&amp;</span><span class="ident" id="7632258">URL</span><span class="op" id="7632261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632266">Scheme</span><span class="op" id="7632272">:</span>&nbsp;<span class="string" id="7632274">&#34;http&#34;</span><span class="op" id="7632280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632285">User</span><span class="op" id="7632289">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7632293">UserPassword</span><span class="op" id="7632305">(</span><span class="string" id="7632306">&#34;j@ne&#34;</span><span class="op" id="7632312">,</span>&nbsp;<span class="string" id="7632314">&#34;password&#34;</span><span class="op" id="7632324">)</span><span class="op" id="7632325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632330">Host</span><span class="op" id="7632334">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7632338">&#34;google.com&#34;</span><span class="op" id="7632350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632354">}</span><span class="op" id="7632355">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632359">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7632394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632397">}</span><span class="op" id="7632398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7632401">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632457">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7632490">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632494">&amp;</span><span class="ident" id="7632495">URL</span><span class="op" id="7632498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632503">Scheme</span><span class="op" id="7632509">:</span>&nbsp;<span class="string" id="7632511">&#34;http&#34;</span><span class="op" id="7632517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632522">User</span><span class="op" id="7632526">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7632530">UserPassword</span><span class="op" id="7632542">(</span><span class="string" id="7632543">&#34;jane&#34;</span><span class="op" id="7632549">,</span>&nbsp;<span class="string" id="7632551">&#34;p@ssword&#34;</span><span class="op" id="7632561">)</span><span class="op" id="7632562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632567">Host</span><span class="op" id="7632571">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7632575">&#34;google.com&#34;</span><span class="op" id="7632587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632591">}</span><span class="op" id="7632592">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632596">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7632631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632634">}</span><span class="op" id="7632635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632642">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7632686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632690">&amp;</span><span class="ident" id="7632691">URL</span><span class="op" id="7632694">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632699">Scheme</span><span class="op" id="7632705">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7632709">&#34;http&#34;</span><span class="op" id="7632715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632720">User</span><span class="op" id="7632724">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7632730">UserPassword</span><span class="op" id="7632742">(</span><span class="string" id="7632743">&#34;j@ne&#34;</span><span class="op" id="7632749">,</span>&nbsp;<span class="string" id="7632751">&#34;password&#34;</span><span class="op" id="7632761">)</span><span class="op" id="7632762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632767">Host</span><span class="op" id="7632771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7632777">&#34;google.com&#34;</span><span class="op" id="7632789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632794">Path</span><span class="op" id="7632798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7632804">&#34;/p@th&#34;</span><span class="op" id="7632811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632816">RawQuery</span><span class="op" id="7632824">:</span>&nbsp;<span class="string" id="7632826">&#34;q=@go&#34;</span><span class="op" id="7632833">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632837">}</span><span class="op" id="7632838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632842">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7632888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632891">}</span><span class="op" id="7632892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7632899">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7632941">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7632945">&amp;</span><span class="ident" id="7632946">URL</span><span class="op" id="7632949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632954">Scheme</span><span class="op" id="7632960">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7632964">&#34;http&#34;</span><span class="op" id="7632970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7632975">Host</span><span class="op" id="7632979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7632985">&#34;www.google.com&#34;</span><span class="op" id="7633001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633006">Path</span><span class="op" id="7633010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7633016">&#34;/&#34;</span><span class="op" id="7633019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633024">RawQuery</span><span class="op" id="7633032">:</span>&nbsp;<span class="string" id="7633034">&#34;q=go+language&#34;</span><span class="op" id="7633049">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633054">Fragment</span><span class="op" id="7633062">:</span>&nbsp;<span class="string" id="7633064">&#34;foo&#34;</span><span class="op" id="7633069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633073">}</span><span class="op" id="7633074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633078">&#34;&#34;</span><span class="op" id="7633080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633083">}</span><span class="op" id="7633084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633087">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633091">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7633139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633143">&amp;</span><span class="ident" id="7633144">URL</span><span class="op" id="7633147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633152">Scheme</span><span class="op" id="7633158">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7633162">&#34;http&#34;</span><span class="op" id="7633168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633173">Host</span><span class="op" id="7633177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7633183">&#34;www.google.com&#34;</span><span class="op" id="7633199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633204">Path</span><span class="op" id="7633208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7633214">&#34;/&#34;</span><span class="op" id="7633217">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633222">RawQuery</span><span class="op" id="7633230">:</span>&nbsp;<span class="string" id="7633232">&#34;q=go+language&#34;</span><span class="op" id="7633247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633252">Fragment</span><span class="op" id="7633260">:</span>&nbsp;<span class="string" id="7633262">&#34;foo&amp;bar&#34;</span><span class="op" id="7633271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633275">}</span><span class="op" id="7633276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633280">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7633326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633329">}</span><span class="op" id="7633330">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633337">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7633363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633367">&amp;</span><span class="ident" id="7633368">URL</span><span class="op" id="7633371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633376">Scheme</span><span class="op" id="7633382">:</span>&nbsp;<span class="string" id="7633384">&#34;file&#34;</span><span class="op" id="7633390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633395">Host</span><span class="op" id="7633399">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7633403">&#34;&#34;</span><span class="op" id="7633405">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633410">Path</span><span class="op" id="7633414">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7633418">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7633437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633441">}</span><span class="op" id="7633442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633446">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7633472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633475">}</span><span class="op" id="7633476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7633479">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7633529">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633587">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7633614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633618">&amp;</span><span class="ident" id="7633619">URL</span><span class="op" id="7633622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633627">Scheme</span><span class="op" id="7633633">:</span>&nbsp;<span class="string" id="7633635">&#34;file&#34;</span><span class="op" id="7633641">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633646">Host</span><span class="op" id="7633650">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7633654">&#34;&#34;</span><span class="op" id="7633656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633661">Path</span><span class="op" id="7633665">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7633669">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7633689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633693">}</span><span class="op" id="7633694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633698">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7633725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633728">}</span><span class="op" id="7633729">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7633732">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633764">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7633793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633797">&amp;</span><span class="ident" id="7633798">URL</span><span class="op" id="7633801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633806">Scheme</span><span class="op" id="7633812">:</span>&nbsp;<span class="string" id="7633814">&#34;mailto&#34;</span><span class="op" id="7633822">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633827">Opaque</span><span class="op" id="7633833">:</span>&nbsp;<span class="string" id="7633835">&#34;webmaster@golang.org&#34;</span><span class="op" id="7633857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633861">}</span><span class="op" id="7633862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633866">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7633895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633898">}</span><span class="op" id="7633899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7633902">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633924">&#34;a/b/c&#34;</span><span class="op" id="7633931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633935">&amp;</span><span class="ident" id="7633936">URL</span><span class="op" id="7633939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7633944">Path</span><span class="op" id="7633948">:</span>&nbsp;<span class="string" id="7633950">&#34;a/b/c&#34;</span><span class="op" id="7633957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633961">}</span><span class="op" id="7633962">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7633966">&#34;a/b/c&#34;</span><span class="op" id="7633973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7633976">}</span><span class="op" id="7633977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7633980">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7634025">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7634061">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634065">&amp;</span><span class="ident" id="7634066">URL</span><span class="op" id="7634069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634074">Scheme</span><span class="op" id="7634080">:</span>&nbsp;<span class="string" id="7634082">&#34;http&#34;</span><span class="op" id="7634088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634093">User</span><span class="op" id="7634097">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7634101">UserPassword</span><span class="op" id="7634113">(</span><span class="string" id="7634114">&#34;?am&#34;</span><span class="op" id="7634119">,</span>&nbsp;<span class="string" id="7634121">&#34;pa?sword&#34;</span><span class="op" id="7634131">)</span><span class="op" id="7634132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634137">Host</span><span class="op" id="7634141">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7634145">&#34;google.com&#34;</span><span class="op" id="7634157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634161">}</span><span class="op" id="7634162">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7634166">&#34;&#34;</span><span class="op" id="7634168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634171">}</span><span class="op" id="7634172">,</span><br>
<span class="lineno"></span><span class="op" id="7634174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7634177">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7634239">func</span>&nbsp;<span class="ident" id="7634244">ufmt</span><span class="op" id="7634248">(</span><span class="ident" id="7634249">u</span>&nbsp;<span class="op" id="7634251">*</span><span class="ident" id="7634252">URL</span><span class="op" id="7634255">)</span>&nbsp;<span class="builtintype" id="7634257">string</span>&nbsp;<span class="op" id="7634264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634267">var</span>&nbsp;<span class="ident" id="7634271">user</span><span class="op" id="7634275">,</span>&nbsp;<span class="ident" id="7634277">pass</span>&nbsp;<span class="keyword" id="7634282">interface</span><span class="op" id="7634291">{</span><span class="op" id="7634292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634295">if</span>&nbsp;<span class="ident" id="7634298">u</span><span class="op" id="7634299">.</span><span class="ident" id="7634300">User</span>&nbsp;<span class="op" id="7634305">!=</span>&nbsp;<span class="ident" id="7634308">nil</span>&nbsp;<span class="op" id="7634312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634316">user</span>&nbsp;<span class="op" id="7634321">=</span>&nbsp;<span class="ident" id="7634323">u</span><span class="op" id="7634324">.</span><span class="ident" id="7634325">User</span><span class="op" id="7634329">.</span><span class="ident" id="7634330">Username</span><span class="op" id="7634338">(</span><span class="op" id="7634339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634343">if</span>&nbsp;<span class="ident" id="7634346">p</span><span class="op" id="7634347">,</span>&nbsp;<span class="ident" id="7634349">ok</span>&nbsp;<span class="op" id="7634352">:=</span>&nbsp;<span class="ident" id="7634355">u</span><span class="op" id="7634356">.</span><span class="ident" id="7634357">User</span><span class="op" id="7634361">.</span><span class="ident" id="7634362">Password</span><span class="op" id="7634370">(</span><span class="op" id="7634371">)</span><span class="op" id="7634372">;</span>&nbsp;<span class="ident" id="7634374">ok</span>&nbsp;<span class="op" id="7634377">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634382">pass</span>&nbsp;<span class="op" id="7634387">=</span>&nbsp;<span class="ident" id="7634389">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634399">return</span>&nbsp;<span class="ident" id="7634406">fmt</span><span class="op" id="7634409">.</span><span class="ident" id="7634410">Sprintf</span><span class="op" id="7634417">(</span><span class="string" id="7634418">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7634496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634500">u</span><span class="op" id="7634501">.</span><span class="ident" id="7634502">Opaque</span><span class="op" id="7634508">,</span>&nbsp;<span class="ident" id="7634510">u</span><span class="op" id="7634511">.</span><span class="ident" id="7634512">Scheme</span><span class="op" id="7634518">,</span>&nbsp;<span class="ident" id="7634520">user</span><span class="op" id="7634524">,</span>&nbsp;<span class="ident" id="7634526">pass</span><span class="op" id="7634530">,</span>&nbsp;<span class="ident" id="7634532">u</span><span class="op" id="7634533">.</span><span class="ident" id="7634534">Host</span><span class="op" id="7634538">,</span>&nbsp;<span class="ident" id="7634540">u</span><span class="op" id="7634541">.</span><span class="ident" id="7634542">Path</span><span class="op" id="7634546">,</span>&nbsp;<span class="ident" id="7634548">u</span><span class="op" id="7634549">.</span><span class="ident" id="7634550">RawQuery</span><span class="op" id="7634558">,</span>&nbsp;<span class="ident" id="7634560">u</span><span class="op" id="7634561">.</span><span class="ident" id="7634562">Fragment</span><span class="op" id="7634570">)</span><br>
<span class="lineno">305</span><span class="op" id="7634572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7634575">func</span>&nbsp;<span class="ident" id="7634580">DoTest</span><span class="op" id="7634586">(</span><span class="ident" id="7634587">t</span>&nbsp;<span class="op" id="7634589">*</span><span class="ident" id="7634590">testing</span><span class="op" id="7634597">.</span><span class="ident" id="7634598">T</span><span class="op" id="7634599">,</span>&nbsp;<span class="ident" id="7634601">parse</span>&nbsp;<span class="keyword" id="7634607">func</span><span class="op" id="7634611">(</span><span class="builtintype" id="7634612">string</span><span class="op" id="7634618">)</span>&nbsp;<span class="op" id="7634620">(</span><span class="op" id="7634621">*</span><span class="ident" id="7634622">URL</span><span class="op" id="7634625">,</span>&nbsp;<span class="builtintype" id="7634627">error</span><span class="op" id="7634632">)</span><span class="op" id="7634633">,</span>&nbsp;<span class="ident" id="7634635">name</span>&nbsp;<span class="builtintype" id="7634640">string</span><span class="op" id="7634646">,</span>&nbsp;<span class="ident" id="7634648">tests</span>&nbsp;<span class="op" id="7634654">[</span><span class="op" id="7634655">]</span><span class="ident" id="7634656">URLTest</span><span class="op" id="7634663">)</span>&nbsp;<span class="op" id="7634665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634668">for</span>&nbsp;<span class="ident" id="7634672">_</span><span class="op" id="7634673">,</span>&nbsp;<span class="ident" id="7634675">tt</span>&nbsp;<span class="op" id="7634678">:=</span>&nbsp;<span class="keyword" id="7634681">range</span>&nbsp;<span class="ident" id="7634687">tests</span>&nbsp;<span class="op" id="7634693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634697">u</span><span class="op" id="7634698">,</span>&nbsp;<span class="ident" id="7634700">err</span>&nbsp;<span class="op" id="7634704">:=</span>&nbsp;<span class="ident" id="7634707">parse</span><span class="op" id="7634712">(</span><span class="ident" id="7634713">tt</span><span class="op" id="7634715">.</span><span class="ident" id="7634716">in</span><span class="op" id="7634718">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634722">if</span>&nbsp;<span class="ident" id="7634725">err</span>&nbsp;<span class="op" id="7634729">!=</span>&nbsp;<span class="ident" id="7634732">nil</span>&nbsp;<span class="op" id="7634736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634741">t</span><span class="op" id="7634742">.</span><span class="ident" id="7634743">Errorf</span><span class="op" id="7634749">(</span><span class="string" id="7634750">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7634776">,</span>&nbsp;<span class="ident" id="7634778">name</span><span class="op" id="7634782">,</span>&nbsp;<span class="ident" id="7634784">tt</span><span class="op" id="7634786">.</span><span class="ident" id="7634787">in</span><span class="op" id="7634789">,</span>&nbsp;<span class="ident" id="7634791">err</span><span class="op" id="7634794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634799">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7634814">if</span>&nbsp;<span class="op" id="7634817">!</span><span class="ident" id="7634818">reflect</span><span class="op" id="7634825">.</span><span class="ident" id="7634826">DeepEqual</span><span class="op" id="7634835">(</span><span class="ident" id="7634836">u</span><span class="op" id="7634837">,</span>&nbsp;<span class="ident" id="7634839">tt</span><span class="op" id="7634841">.</span><span class="ident" id="7634842">out</span><span class="op" id="7634845">)</span>&nbsp;<span class="op" id="7634847">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634852">t</span><span class="op" id="7634853">.</span><span class="ident" id="7634854">Errorf</span><span class="op" id="7634860">(</span><span class="string" id="7634861">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7634894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634900">name</span><span class="op" id="7634904">,</span>&nbsp;<span class="ident" id="7634906">tt</span><span class="op" id="7634908">.</span><span class="ident" id="7634909">in</span><span class="op" id="7634911">,</span>&nbsp;<span class="ident" id="7634913">ufmt</span><span class="op" id="7634917">(</span><span class="ident" id="7634918">u</span><span class="op" id="7634919">)</span><span class="op" id="7634920">,</span>&nbsp;<span class="ident" id="7634922">ufmt</span><span class="op" id="7634926">(</span><span class="ident" id="7634927">tt</span><span class="op" id="7634929">.</span><span class="ident" id="7634930">out</span><span class="op" id="7634933">)</span><span class="op" id="7634934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7634941">}</span><br>
<span class="lineno"></span><span class="op" id="7634943">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7634946">func</span>&nbsp;<span class="ident" id="7634951">BenchmarkString</span><span class="op" id="7634966">(</span><span class="ident" id="7634967">b</span>&nbsp;<span class="op" id="7634969">*</span><span class="ident" id="7634970">testing</span><span class="op" id="7634977">.</span><span class="ident" id="7634978">B</span><span class="op" id="7634979">)</span>&nbsp;<span class="op" id="7634981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634984">b</span><span class="op" id="7634985">.</span><span class="ident" id="7634986">StopTimer</span><span class="op" id="7634995">(</span><span class="op" id="7634996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7634999">b</span><span class="op" id="7635000">.</span><span class="ident" id="7635001">ReportAllocs</span><span class="op" id="7635013">(</span><span class="op" id="7635014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635017">for</span>&nbsp;<span class="ident" id="7635021">_</span><span class="op" id="7635022">,</span>&nbsp;<span class="ident" id="7635024">tt</span>&nbsp;<span class="op" id="7635027">:=</span>&nbsp;<span class="keyword" id="7635030">range</span>&nbsp;<span class="ident" id="7635036">urltests</span>&nbsp;<span class="op" id="7635045">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635049">u</span><span class="op" id="7635050">,</span>&nbsp;<span class="ident" id="7635052">err</span>&nbsp;<span class="op" id="7635056">:=</span>&nbsp;<span class="ident" id="7635059">Parse</span><span class="op" id="7635064">(</span><span class="ident" id="7635065">tt</span><span class="op" id="7635067">.</span><span class="ident" id="7635068">in</span><span class="op" id="7635070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635074">if</span>&nbsp;<span class="ident" id="7635077">err</span>&nbsp;<span class="op" id="7635081">!=</span>&nbsp;<span class="ident" id="7635084">nil</span>&nbsp;<span class="op" id="7635088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635093">b</span><span class="op" id="7635094">.</span><span class="ident" id="7635095">Errorf</span><span class="op" id="7635101">(</span><span class="string" id="7635102">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7635131">,</span>&nbsp;<span class="ident" id="7635133">tt</span><span class="op" id="7635135">.</span><span class="ident" id="7635136">in</span><span class="op" id="7635138">,</span>&nbsp;<span class="ident" id="7635140">err</span><span class="op" id="7635143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635148">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635159">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635163">if</span>&nbsp;<span class="ident" id="7635166">tt</span><span class="op" id="7635168">.</span><span class="ident" id="7635169">roundtrip</span>&nbsp;<span class="op" id="7635179">==</span>&nbsp;<span class="string" id="7635182">&#34;&#34;</span>&nbsp;<span class="op" id="7635185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635190">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635205">b</span><span class="op" id="7635206">.</span><span class="ident" id="7635207">StartTimer</span><span class="op" id="7635217">(</span><span class="op" id="7635218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635222">var</span>&nbsp;<span class="ident" id="7635226">g</span>&nbsp;<span class="builtintype" id="7635228">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635237">for</span>&nbsp;<span class="ident" id="7635241">i</span>&nbsp;<span class="op" id="7635243">:=</span>&nbsp;<span class="num" id="7635246">0</span><span class="op" id="7635247">;</span>&nbsp;<span class="ident" id="7635249">i</span>&nbsp;<span class="op" id="7635251">&lt;</span>&nbsp;<span class="ident" id="7635253">b</span><span class="op" id="7635254">.</span><span class="ident" id="7635255">N</span><span class="op" id="7635256">;</span>&nbsp;<span class="ident" id="7635258">i</span><span class="op" id="7635259">++</span>&nbsp;<span class="op" id="7635262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635267">g</span>&nbsp;<span class="op" id="7635269">=</span>&nbsp;<span class="ident" id="7635271">u</span><span class="op" id="7635272">.</span><span class="ident" id="7635273">String</span><span class="op" id="7635279">(</span><span class="op" id="7635280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635288">b</span><span class="op" id="7635289">.</span><span class="ident" id="7635290">StopTimer</span><span class="op" id="7635299">(</span><span class="op" id="7635300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635304">if</span>&nbsp;<span class="ident" id="7635307">w</span>&nbsp;<span class="op" id="7635309">:=</span>&nbsp;<span class="ident" id="7635312">tt</span><span class="op" id="7635314">.</span><span class="ident" id="7635315">roundtrip</span><span class="op" id="7635324">;</span>&nbsp;<span class="ident" id="7635326">g</span>&nbsp;<span class="op" id="7635328">!=</span>&nbsp;<span class="ident" id="7635331">w</span>&nbsp;<span class="op" id="7635333">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635338">b</span><span class="op" id="7635339">.</span><span class="ident" id="7635340">Errorf</span><span class="op" id="7635346">(</span><span class="string" id="7635347">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7635382">,</span>&nbsp;<span class="ident" id="7635384">tt</span><span class="op" id="7635386">.</span><span class="ident" id="7635387">in</span><span class="op" id="7635389">,</span>&nbsp;<span class="ident" id="7635391">g</span><span class="op" id="7635392">,</span>&nbsp;<span class="ident" id="7635394">w</span><span class="op" id="7635395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635402">}</span><br>
<span class="lineno"></span><span class="op" id="7635404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7635407">func</span>&nbsp;<span class="ident" id="7635412">TestParse</span><span class="op" id="7635421">(</span><span class="ident" id="7635422">t</span>&nbsp;<span class="op" id="7635424">*</span><span class="ident" id="7635425">testing</span><span class="op" id="7635432">.</span><span class="ident" id="7635433">T</span><span class="op" id="7635434">)</span>&nbsp;<span class="op" id="7635436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635439">DoTest</span><span class="op" id="7635445">(</span><span class="ident" id="7635446">t</span><span class="op" id="7635447">,</span>&nbsp;<span class="ident" id="7635449">Parse</span><span class="op" id="7635454">,</span>&nbsp;<span class="string" id="7635456">&#34;Parse&#34;</span><span class="op" id="7635463">,</span>&nbsp;<span class="ident" id="7635465">urltests</span><span class="op" id="7635473">)</span><br>
<span class="lineno"></span><span class="op" id="7635475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7635478">const</span>&nbsp;<span class="ident" id="7635484">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7635512">=</span>&nbsp;<span class="string" id="7635514">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7635553">var</span>&nbsp;<span class="ident" id="7635557">parseRequestURLTests</span>&nbsp;<span class="op" id="7635578">=</span>&nbsp;<span class="op" id="7635580">[</span><span class="op" id="7635581">]</span><span class="keyword" id="7635582">struct</span>&nbsp;<span class="op" id="7635589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635592">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7635606">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635614">expectedValid</span>&nbsp;<span class="builtintype" id="7635628">bool</span><br>
<span class="lineno"></span><span class="op" id="7635633">}</span><span class="op" id="7635634">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635637">{</span><span class="string" id="7635638">&#34;http://foo.com&#34;</span><span class="op" id="7635654">,</span>&nbsp;<span class="ident" id="7635656">true</span><span class="op" id="7635660">}</span><span class="op" id="7635661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635664">{</span><span class="string" id="7635665">&#34;http://foo.com/&#34;</span><span class="op" id="7635682">,</span>&nbsp;<span class="ident" id="7635684">true</span><span class="op" id="7635688">}</span><span class="op" id="7635689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635692">{</span><span class="string" id="7635693">&#34;http://foo.com/path&#34;</span><span class="op" id="7635714">,</span>&nbsp;<span class="ident" id="7635716">true</span><span class="op" id="7635720">}</span><span class="op" id="7635721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635724">{</span><span class="string" id="7635725">&#34;/&#34;</span><span class="op" id="7635728">,</span>&nbsp;<span class="ident" id="7635730">true</span><span class="op" id="7635734">}</span><span class="op" id="7635735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635738">{</span><span class="ident" id="7635739">pathThatLooksSchemeRelative</span><span class="op" id="7635766">,</span>&nbsp;<span class="ident" id="7635768">true</span><span class="op" id="7635772">}</span><span class="op" id="7635773">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635776">{</span><span class="string" id="7635777">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7635822">,</span>&nbsp;<span class="ident" id="7635824">true</span><span class="op" id="7635828">}</span><span class="op" id="7635829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635832">{</span><span class="string" id="7635833">&#34;foo.html&#34;</span><span class="op" id="7635843">,</span>&nbsp;<span class="ident" id="7635845">false</span><span class="op" id="7635850">}</span><span class="op" id="7635851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635854">{</span><span class="string" id="7635855">&#34;../dir/&#34;</span><span class="op" id="7635864">,</span>&nbsp;<span class="ident" id="7635866">false</span><span class="op" id="7635871">}</span><span class="op" id="7635872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7635875">{</span><span class="string" id="7635876">&#34;*&#34;</span><span class="op" id="7635879">,</span>&nbsp;<span class="ident" id="7635881">true</span><span class="op" id="7635885">}</span><span class="op" id="7635886">,</span><br>
<span class="lineno"></span><span class="op" id="7635888">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7635891">func</span>&nbsp;<span class="ident" id="7635896">TestParseRequestURI</span><span class="op" id="7635915">(</span><span class="ident" id="7635916">t</span>&nbsp;<span class="op" id="7635918">*</span><span class="ident" id="7635919">testing</span><span class="op" id="7635926">.</span><span class="ident" id="7635927">T</span><span class="op" id="7635928">)</span>&nbsp;<span class="op" id="7635930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7635933">for</span>&nbsp;<span class="ident" id="7635937">_</span><span class="op" id="7635938">,</span>&nbsp;<span class="ident" id="7635940">test</span>&nbsp;<span class="op" id="7635945">:=</span>&nbsp;<span class="keyword" id="7635948">range</span>&nbsp;<span class="ident" id="7635954">parseRequestURLTests</span>&nbsp;<span class="op" id="7635975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7635979">_</span><span class="op" id="7635980">,</span>&nbsp;<span class="ident" id="7635982">err</span>&nbsp;<span class="op" id="7635986">:=</span>&nbsp;<span class="ident" id="7635989">ParseRequestURI</span><span class="op" id="7636004">(</span><span class="ident" id="7636005">test</span><span class="op" id="7636009">.</span><span class="ident" id="7636010">url</span><span class="op" id="7636013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636017">valid</span>&nbsp;<span class="op" id="7636023">:=</span>&nbsp;<span class="ident" id="7636026">err</span>&nbsp;<span class="op" id="7636030">==</span>&nbsp;<span class="ident" id="7636033">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636039">if</span>&nbsp;<span class="ident" id="7636042">valid</span>&nbsp;<span class="op" id="7636048">!=</span>&nbsp;<span class="ident" id="7636051">test</span><span class="op" id="7636055">.</span><span class="ident" id="7636056">expectedValid</span>&nbsp;<span class="op" id="7636070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636075">t</span><span class="op" id="7636076">.</span><span class="ident" id="7636077">Errorf</span><span class="op" id="7636083">(</span><span class="string" id="7636084">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7636118">,</span>&nbsp;<span class="ident" id="7636120">test</span><span class="op" id="7636124">.</span><span class="ident" id="7636125">expectedValid</span><span class="op" id="7636138">,</span>&nbsp;<span class="ident" id="7636140">test</span><span class="op" id="7636144">.</span><span class="ident" id="7636145">url</span><span class="op" id="7636148">,</span>&nbsp;<span class="ident" id="7636150">valid</span><span class="op" id="7636155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636166">url</span><span class="op" id="7636169">,</span>&nbsp;<span class="ident" id="7636171">err</span>&nbsp;<span class="op" id="7636175">:=</span>&nbsp;<span class="ident" id="7636178">ParseRequestURI</span><span class="op" id="7636193">(</span><span class="ident" id="7636194">pathThatLooksSchemeRelative</span><span class="op" id="7636221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636224">if</span>&nbsp;<span class="ident" id="7636227">err</span>&nbsp;<span class="op" id="7636231">!=</span>&nbsp;<span class="ident" id="7636234">nil</span>&nbsp;<span class="op" id="7636238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636242">t</span><span class="op" id="7636243">.</span><span class="ident" id="7636244">Fatalf</span><span class="op" id="7636250">(</span><span class="string" id="7636251">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7636272">,</span>&nbsp;<span class="ident" id="7636274">err</span><span class="op" id="7636277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636283">if</span>&nbsp;<span class="ident" id="7636286">url</span><span class="op" id="7636289">.</span><span class="ident" id="7636290">Path</span>&nbsp;<span class="op" id="7636295">!=</span>&nbsp;<span class="ident" id="7636298">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7636326">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636330">t</span><span class="op" id="7636331">.</span><span class="ident" id="7636332">Errorf</span><span class="op" id="7636338">(</span><span class="string" id="7636339">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7636365">,</span>&nbsp;<span class="ident" id="7636367">pathThatLooksSchemeRelative</span><span class="op" id="7636394">,</span>&nbsp;<span class="ident" id="7636396">url</span><span class="op" id="7636399">.</span><span class="ident" id="7636400">Path</span><span class="op" id="7636404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636407">}</span><br>
<span class="lineno"></span><span class="op" id="7636409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7636412">func</span>&nbsp;<span class="ident" id="7636417">DoTestString</span><span class="op" id="7636429">(</span><span class="ident" id="7636430">t</span>&nbsp;<span class="op" id="7636432">*</span><span class="ident" id="7636433">testing</span><span class="op" id="7636440">.</span><span class="ident" id="7636441">T</span><span class="op" id="7636442">,</span>&nbsp;<span class="ident" id="7636444">parse</span>&nbsp;<span class="keyword" id="7636450">func</span><span class="op" id="7636454">(</span><span class="builtintype" id="7636455">string</span><span class="op" id="7636461">)</span>&nbsp;<span class="op" id="7636463">(</span><span class="op" id="7636464">*</span><span class="ident" id="7636465">URL</span><span class="op" id="7636468">,</span>&nbsp;<span class="builtintype" id="7636470">error</span><span class="op" id="7636475">)</span><span class="op" id="7636476">,</span>&nbsp;<span class="ident" id="7636478">name</span>&nbsp;<span class="builtintype" id="7636483">string</span><span class="op" id="7636489">,</span>&nbsp;<span class="ident" id="7636491">tests</span>&nbsp;<span class="op" id="7636497">[</span><span class="op" id="7636498">]</span><span class="ident" id="7636499">URLTest</span><span class="op" id="7636506">)</span>&nbsp;<span class="op" id="7636508">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636511">for</span>&nbsp;<span class="ident" id="7636515">_</span><span class="op" id="7636516">,</span>&nbsp;<span class="ident" id="7636518">tt</span>&nbsp;<span class="op" id="7636521">:=</span>&nbsp;<span class="keyword" id="7636524">range</span>&nbsp;<span class="ident" id="7636530">tests</span>&nbsp;<span class="op" id="7636536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636540">u</span><span class="op" id="7636541">,</span>&nbsp;<span class="ident" id="7636543">err</span>&nbsp;<span class="op" id="7636547">:=</span>&nbsp;<span class="ident" id="7636550">parse</span><span class="op" id="7636555">(</span><span class="ident" id="7636556">tt</span><span class="op" id="7636558">.</span><span class="ident" id="7636559">in</span><span class="op" id="7636561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636565">if</span>&nbsp;<span class="ident" id="7636568">err</span>&nbsp;<span class="op" id="7636572">!=</span>&nbsp;<span class="ident" id="7636575">nil</span>&nbsp;<span class="op" id="7636579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636584">t</span><span class="op" id="7636585">.</span><span class="ident" id="7636586">Errorf</span><span class="op" id="7636592">(</span><span class="string" id="7636593">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7636619">,</span>&nbsp;<span class="ident" id="7636621">name</span><span class="op" id="7636625">,</span>&nbsp;<span class="ident" id="7636627">tt</span><span class="op" id="7636629">.</span><span class="ident" id="7636630">in</span><span class="op" id="7636632">,</span>&nbsp;<span class="ident" id="7636634">err</span><span class="op" id="7636637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636642">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636657">expected</span>&nbsp;<span class="op" id="7636666">:=</span>&nbsp;<span class="ident" id="7636669">tt</span><span class="op" id="7636671">.</span><span class="ident" id="7636672">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636677">if</span>&nbsp;<span class="builtinfunc" id="7636680">len</span><span class="op" id="7636683">(</span><span class="ident" id="7636684">tt</span><span class="op" id="7636686">.</span><span class="ident" id="7636687">roundtrip</span><span class="op" id="7636696">)</span>&nbsp;<span class="op" id="7636698">&gt;</span>&nbsp;<span class="num" id="7636700">0</span>&nbsp;<span class="op" id="7636702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636707">expected</span>&nbsp;<span class="op" id="7636716">=</span>&nbsp;<span class="ident" id="7636718">tt</span><span class="op" id="7636720">.</span><span class="ident" id="7636721">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636733">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636737">s</span>&nbsp;<span class="op" id="7636739">:=</span>&nbsp;<span class="ident" id="7636742">u</span><span class="op" id="7636743">.</span><span class="ident" id="7636744">String</span><span class="op" id="7636750">(</span><span class="op" id="7636751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7636755">if</span>&nbsp;<span class="ident" id="7636758">s</span>&nbsp;<span class="op" id="7636760">!=</span>&nbsp;<span class="ident" id="7636763">expected</span>&nbsp;<span class="op" id="7636772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636777">t</span><span class="op" id="7636778">.</span><span class="ident" id="7636779">Errorf</span><span class="op" id="7636785">(</span><span class="string" id="7636786">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7636823">,</span>&nbsp;<span class="ident" id="7636825">name</span><span class="op" id="7636829">,</span>&nbsp;<span class="ident" id="7636831">tt</span><span class="op" id="7636833">.</span><span class="ident" id="7636834">in</span><span class="op" id="7636836">,</span>&nbsp;<span class="ident" id="7636838">s</span><span class="op" id="7636839">,</span>&nbsp;<span class="ident" id="7636841">expected</span><span class="op" id="7636849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7636856">}</span><br>
<span class="lineno">400</span><span class="op" id="7636858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7636861">func</span>&nbsp;<span class="ident" id="7636866">TestURLString</span><span class="op" id="7636879">(</span><span class="ident" id="7636880">t</span>&nbsp;<span class="op" id="7636882">*</span><span class="ident" id="7636883">testing</span><span class="op" id="7636890">.</span><span class="ident" id="7636891">T</span><span class="op" id="7636892">)</span>&nbsp;<span class="op" id="7636894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7636897">DoTestString</span><span class="op" id="7636909">(</span><span class="ident" id="7636910">t</span><span class="op" id="7636911">,</span>&nbsp;<span class="ident" id="7636913">Parse</span><span class="op" id="7636918">,</span>&nbsp;<span class="string" id="7636920">&#34;Parse&#34;</span><span class="op" id="7636927">,</span>&nbsp;<span class="ident" id="7636929">urltests</span><span class="op" id="7636937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7636941">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7636985">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637012">noslash</span>&nbsp;<span class="op" id="7637020">:=</span>&nbsp;<span class="ident" id="7637023">URLTest</span><span class="op" id="7637030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637034">&#34;http://www.google.com/search&#34;</span><span class="op" id="7637064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637068">&amp;</span><span class="ident" id="7637069">URL</span><span class="op" id="7637072">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637077">Scheme</span><span class="op" id="7637083">:</span>&nbsp;<span class="string" id="7637085">&#34;http&#34;</span><span class="op" id="7637091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637096">Host</span><span class="op" id="7637100">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7637104">&#34;www.google.com&#34;</span><span class="op" id="7637120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637125">Path</span><span class="op" id="7637129">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7637133">&#34;search&#34;</span><span class="op" id="7637141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637145">}</span><span class="op" id="7637146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637150">&#34;&#34;</span><span class="op" id="7637152">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637158">s</span>&nbsp;<span class="op" id="7637160">:=</span>&nbsp;<span class="ident" id="7637163">noslash</span><span class="op" id="7637170">.</span><span class="ident" id="7637171">out</span><span class="op" id="7637174">.</span><span class="ident" id="7637175">String</span><span class="op" id="7637181">(</span><span class="op" id="7637182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7637185">if</span>&nbsp;<span class="ident" id="7637188">s</span>&nbsp;<span class="op" id="7637190">!=</span>&nbsp;<span class="ident" id="7637193">noslash</span><span class="op" id="7637200">.</span><span class="ident" id="7637201">in</span>&nbsp;<span class="op" id="7637204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637208">t</span><span class="op" id="7637209">.</span><span class="ident" id="7637210">Errorf</span><span class="op" id="7637216">(</span><span class="string" id="7637217">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7637237">,</span>&nbsp;<span class="ident" id="7637239">noslash</span><span class="op" id="7637246">.</span><span class="ident" id="7637247">in</span><span class="op" id="7637249">,</span>&nbsp;<span class="ident" id="7637251">s</span><span class="op" id="7637252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637255">}</span><br>
<span class="lineno">420</span><span class="op" id="7637257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7637260">type</span>&nbsp;<span class="ident" id="7637265">EscapeTest</span>&nbsp;<span class="keyword" id="7637276">struct</span>&nbsp;<span class="op" id="7637283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637286">in</span>&nbsp;&nbsp;<span class="builtintype" id="7637290">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637298">out</span>&nbsp;<span class="builtintype" id="7637302">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637310">err</span>&nbsp;<span class="builtintype" id="7637314">error</span><br>
<span class="lineno"></span><span class="op" id="7637320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7637323">var</span>&nbsp;<span class="ident" id="7637327">unescapeTests</span>&nbsp;<span class="op" id="7637341">=</span>&nbsp;<span class="op" id="7637343">[</span><span class="op" id="7637344">]</span><span class="ident" id="7637345">EscapeTest</span><span class="op" id="7637355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637358">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637362">&#34;&#34;</span><span class="op" id="7637364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637368">&#34;&#34;</span><span class="op" id="7637370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637374">nil</span><span class="op" id="7637377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637380">}</span><span class="op" id="7637381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637384">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637388">&#34;abc&#34;</span><span class="op" id="7637393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637397">&#34;abc&#34;</span><span class="op" id="7637402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637406">nil</span><span class="op" id="7637409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637412">}</span><span class="op" id="7637413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637416">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637420">&#34;1%41&#34;</span><span class="op" id="7637426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637430">&#34;1A&#34;</span><span class="op" id="7637434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637438">nil</span><span class="op" id="7637441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637444">}</span><span class="op" id="7637445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637448">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637452">&#34;1%41%42%43&#34;</span><span class="op" id="7637464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637468">&#34;1ABC&#34;</span><span class="op" id="7637474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637478">nil</span><span class="op" id="7637481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637484">}</span><span class="op" id="7637485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637488">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637492">&#34;%4a&#34;</span><span class="op" id="7637497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637501">&#34;J&#34;</span><span class="op" id="7637504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637508">nil</span><span class="op" id="7637511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637514">}</span><span class="op" id="7637515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637518">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637522">&#34;%6F&#34;</span><span class="op" id="7637527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637531">&#34;o&#34;</span><span class="op" id="7637534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637538">nil</span><span class="op" id="7637541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637544">}</span><span class="op" id="7637545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637548">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637552">&#34;%&#34;</span><span class="op" id="7637555">,</span>&nbsp;<span class="comment" id="7637557">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637592">&#34;&#34;</span><span class="op" id="7637594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637598">EscapeError</span><span class="op" id="7637609">(</span><span class="string" id="7637610">&#34;%&#34;</span><span class="op" id="7637613">)</span><span class="op" id="7637614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637617">}</span><span class="op" id="7637618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637621">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637625">&#34;%a&#34;</span><span class="op" id="7637629">,</span>&nbsp;<span class="comment" id="7637631">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637666">&#34;&#34;</span><span class="op" id="7637668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637672">EscapeError</span><span class="op" id="7637683">(</span><span class="string" id="7637684">&#34;%a&#34;</span><span class="op" id="7637688">)</span><span class="op" id="7637689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637692">}</span><span class="op" id="7637693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637696">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637700">&#34;%1&#34;</span><span class="op" id="7637704">,</span>&nbsp;<span class="comment" id="7637706">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637741">&#34;&#34;</span><span class="op" id="7637743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637747">EscapeError</span><span class="op" id="7637758">(</span><span class="string" id="7637759">&#34;%1&#34;</span><span class="op" id="7637763">)</span><span class="op" id="7637764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637767">}</span><span class="op" id="7637768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637771">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637775">&#34;123%45%6&#34;</span><span class="op" id="7637785">,</span>&nbsp;<span class="comment" id="7637787">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637822">&#34;&#34;</span><span class="op" id="7637824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637828">EscapeError</span><span class="op" id="7637839">(</span><span class="string" id="7637840">&#34;%6&#34;</span><span class="op" id="7637844">)</span><span class="op" id="7637845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637848">}</span><span class="op" id="7637849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637852">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637856">&#34;%zzzzz&#34;</span><span class="op" id="7637864">,</span>&nbsp;<span class="comment" id="7637866">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7637890">&#34;&#34;</span><span class="op" id="7637892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637896">EscapeError</span><span class="op" id="7637907">(</span><span class="string" id="7637908">&#34;%zz&#34;</span><span class="op" id="7637913">)</span><span class="op" id="7637914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7637917">}</span><span class="op" id="7637918">,</span><br>
<span class="lineno"></span><span class="op" id="7637920">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7637923">func</span>&nbsp;<span class="ident" id="7637928">TestUnescape</span><span class="op" id="7637940">(</span><span class="ident" id="7637941">t</span>&nbsp;<span class="op" id="7637943">*</span><span class="ident" id="7637944">testing</span><span class="op" id="7637951">.</span><span class="ident" id="7637952">T</span><span class="op" id="7637953">)</span>&nbsp;<span class="op" id="7637955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7637958">for</span>&nbsp;<span class="ident" id="7637962">_</span><span class="op" id="7637963">,</span>&nbsp;<span class="ident" id="7637965">tt</span>&nbsp;<span class="op" id="7637968">:=</span>&nbsp;<span class="keyword" id="7637971">range</span>&nbsp;<span class="ident" id="7637977">unescapeTests</span>&nbsp;<span class="op" id="7637991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7637995">actual</span><span class="op" id="7638001">,</span>&nbsp;<span class="ident" id="7638003">err</span>&nbsp;<span class="op" id="7638007">:=</span>&nbsp;<span class="ident" id="7638010">QueryUnescape</span><span class="op" id="7638023">(</span><span class="ident" id="7638024">tt</span><span class="op" id="7638026">.</span><span class="ident" id="7638027">in</span><span class="op" id="7638029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7638033">if</span>&nbsp;<span class="ident" id="7638036">actual</span>&nbsp;<span class="op" id="7638043">!=</span>&nbsp;<span class="ident" id="7638046">tt</span><span class="op" id="7638048">.</span><span class="ident" id="7638049">out</span>&nbsp;<span class="op" id="7638053">||</span>&nbsp;<span class="op" id="7638056">(</span><span class="ident" id="7638057">err</span>&nbsp;<span class="op" id="7638061">!=</span>&nbsp;<span class="ident" id="7638064">nil</span><span class="op" id="7638067">)</span>&nbsp;<span class="op" id="7638069">!=</span>&nbsp;<span class="op" id="7638072">(</span><span class="ident" id="7638073">tt</span><span class="op" id="7638075">.</span><span class="ident" id="7638076">err</span>&nbsp;<span class="op" id="7638080">!=</span>&nbsp;<span class="ident" id="7638083">nil</span><span class="op" id="7638086">)</span>&nbsp;<span class="op" id="7638088">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638093">t</span><span class="op" id="7638094">.</span><span class="ident" id="7638095">Errorf</span><span class="op" id="7638101">(</span><span class="string" id="7638102">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7638143">,</span>&nbsp;<span class="ident" id="7638145">tt</span><span class="op" id="7638147">.</span><span class="ident" id="7638148">in</span><span class="op" id="7638150">,</span>&nbsp;<span class="ident" id="7638152">actual</span><span class="op" id="7638158">,</span>&nbsp;<span class="ident" id="7638160">err</span><span class="op" id="7638163">,</span>&nbsp;<span class="ident" id="7638165">tt</span><span class="op" id="7638167">.</span><span class="ident" id="7638168">out</span><span class="op" id="7638171">,</span>&nbsp;<span class="ident" id="7638173">tt</span><span class="op" id="7638175">.</span><span class="ident" id="7638176">err</span><span class="op" id="7638179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638186">}</span><br>
<span class="lineno"></span><span class="op" id="7638188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7638191">var</span>&nbsp;<span class="ident" id="7638195">escapeTests</span>&nbsp;<span class="op" id="7638207">=</span>&nbsp;<span class="op" id="7638209">[</span><span class="op" id="7638210">]</span><span class="ident" id="7638211">EscapeTest</span><span class="op" id="7638221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638228">&#34;&#34;</span><span class="op" id="7638230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638234">&#34;&#34;</span><span class="op" id="7638236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638240">nil</span><span class="op" id="7638243">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638246">}</span><span class="op" id="7638247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638254">&#34;abc&#34;</span><span class="op" id="7638259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638263">&#34;abc&#34;</span><span class="op" id="7638268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638272">nil</span><span class="op" id="7638275">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638278">}</span><span class="op" id="7638279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638286">&#34;one&nbsp;two&#34;</span><span class="op" id="7638295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638299">&#34;one+two&#34;</span><span class="op" id="7638308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638312">nil</span><span class="op" id="7638315">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638318">}</span><span class="op" id="7638319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638326">&#34;10%&#34;</span><span class="op" id="7638331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638335">&#34;10%25&#34;</span><span class="op" id="7638342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638346">nil</span><span class="op" id="7638349">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638352">}</span><span class="op" id="7638353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638360">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7638399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7638403">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7638505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638509">nil</span><span class="op" id="7638512">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638515">}</span><span class="op" id="7638516">,</span><br>
<span class="lineno"></span><span class="op" id="7638518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7638521">func</span>&nbsp;<span class="ident" id="7638526">TestEscape</span><span class="op" id="7638536">(</span><span class="ident" id="7638537">t</span>&nbsp;<span class="op" id="7638539">*</span><span class="ident" id="7638540">testing</span><span class="op" id="7638547">.</span><span class="ident" id="7638548">T</span><span class="op" id="7638549">)</span>&nbsp;<span class="op" id="7638551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7638554">for</span>&nbsp;<span class="ident" id="7638558">_</span><span class="op" id="7638559">,</span>&nbsp;<span class="ident" id="7638561">tt</span>&nbsp;<span class="op" id="7638564">:=</span>&nbsp;<span class="keyword" id="7638567">range</span>&nbsp;<span class="ident" id="7638573">escapeTests</span>&nbsp;<span class="op" id="7638585">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638589">actual</span>&nbsp;<span class="op" id="7638596">:=</span>&nbsp;<span class="ident" id="7638599">QueryEscape</span><span class="op" id="7638610">(</span><span class="ident" id="7638611">tt</span><span class="op" id="7638613">.</span><span class="ident" id="7638614">in</span><span class="op" id="7638616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7638620">if</span>&nbsp;<span class="ident" id="7638623">tt</span><span class="op" id="7638625">.</span><span class="ident" id="7638626">out</span>&nbsp;<span class="op" id="7638630">!=</span>&nbsp;<span class="ident" id="7638633">actual</span>&nbsp;<span class="op" id="7638640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638645">t</span><span class="op" id="7638646">.</span><span class="ident" id="7638647">Errorf</span><span class="op" id="7638653">(</span><span class="string" id="7638654">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7638685">,</span>&nbsp;<span class="ident" id="7638687">tt</span><span class="op" id="7638689">.</span><span class="ident" id="7638690">in</span><span class="op" id="7638692">,</span>&nbsp;<span class="ident" id="7638694">actual</span><span class="op" id="7638700">,</span>&nbsp;<span class="ident" id="7638702">tt</span><span class="op" id="7638704">.</span><span class="ident" id="7638705">out</span><span class="op" id="7638708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7638717">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638784">roundtrip</span><span class="op" id="7638793">,</span>&nbsp;<span class="ident" id="7638795">err</span>&nbsp;<span class="op" id="7638799">:=</span>&nbsp;<span class="ident" id="7638802">QueryUnescape</span><span class="op" id="7638815">(</span><span class="ident" id="7638816">actual</span><span class="op" id="7638822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7638826">if</span>&nbsp;<span class="ident" id="7638829">roundtrip</span>&nbsp;<span class="op" id="7638839">!=</span>&nbsp;<span class="ident" id="7638842">tt</span><span class="op" id="7638844">.</span><span class="ident" id="7638845">in</span>&nbsp;<span class="op" id="7638848">||</span>&nbsp;<span class="ident" id="7638851">err</span>&nbsp;<span class="op" id="7638855">!=</span>&nbsp;<span class="ident" id="7638858">nil</span>&nbsp;<span class="op" id="7638862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7638867">t</span><span class="op" id="7638868">.</span><span class="ident" id="7638869">Errorf</span><span class="op" id="7638875">(</span><span class="string" id="7638876">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7638917">,</span>&nbsp;<span class="ident" id="7638919">actual</span><span class="op" id="7638925">,</span>&nbsp;<span class="ident" id="7638927">roundtrip</span><span class="op" id="7638936">,</span>&nbsp;<span class="ident" id="7638938">err</span><span class="op" id="7638941">,</span>&nbsp;<span class="ident" id="7638943">tt</span><span class="op" id="7638945">.</span><span class="ident" id="7638946">in</span><span class="op" id="7638948">,</span>&nbsp;<span class="string" id="7638950">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7638962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638966">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7638969">}</span><br>
<span class="lineno"></span><span class="op" id="7638971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7638974">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7639012">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7639054">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7639107">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7639190">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7639195">type</span>&nbsp;<span class="ident" id="7639200">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7639216">struct</span>&nbsp;<span class="op" id="7639223">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7639226">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639235">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7639243">expected</span>&nbsp;<span class="builtintype" id="7639252">string</span><br>
<span class="lineno"></span><span class="op" id="7639259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7639262">var</span>&nbsp;<span class="ident" id="7639266">encodeQueryTests</span>&nbsp;<span class="op" id="7639283">=</span>&nbsp;<span class="op" id="7639285">[</span><span class="op" id="7639286">]</span><span class="ident" id="7639287">EncodeQueryTest</span><span class="op" id="7639302">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639305">{</span><span class="ident" id="7639306">nil</span><span class="op" id="7639309">,</span>&nbsp;<span class="string" id="7639311">&#34;&#34;</span><span class="op" id="7639313">}</span><span class="op" id="7639314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639317">{</span><span class="ident" id="7639318">Values</span><span class="op" id="7639324">{</span><span class="string" id="7639325">&#34;q&#34;</span><span class="op" id="7639328">:</span>&nbsp;<span class="op" id="7639330">{</span><span class="string" id="7639331">&#34;puppies&#34;</span><span class="op" id="7639340">}</span><span class="op" id="7639341">,</span>&nbsp;<span class="string" id="7639343">&#34;oe&#34;</span><span class="op" id="7639347">:</span>&nbsp;<span class="op" id="7639349">{</span><span class="string" id="7639350">&#34;utf8&#34;</span><span class="op" id="7639356">}</span><span class="op" id="7639357">}</span><span class="op" id="7639358">,</span>&nbsp;<span class="string" id="7639360">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7639379">}</span><span class="op" id="7639380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639383">{</span><span class="ident" id="7639384">Values</span><span class="op" id="7639390">{</span><span class="string" id="7639391">&#34;q&#34;</span><span class="op" id="7639394">:</span>&nbsp;<span class="op" id="7639396">{</span><span class="string" id="7639397">&#34;dogs&#34;</span><span class="op" id="7639403">,</span>&nbsp;<span class="string" id="7639405">&#34;&amp;&#34;</span><span class="op" id="7639408">,</span>&nbsp;<span class="string" id="7639410">&#34;7&#34;</span><span class="op" id="7639413">}</span><span class="op" id="7639414">}</span><span class="op" id="7639415">,</span>&nbsp;<span class="string" id="7639417">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7639435">}</span><span class="op" id="7639436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639439">{</span><span class="ident" id="7639440">Values</span><span class="op" id="7639446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7639450">&#34;a&#34;</span><span class="op" id="7639453">:</span>&nbsp;<span class="op" id="7639455">{</span><span class="string" id="7639456">&#34;a1&#34;</span><span class="op" id="7639460">,</span>&nbsp;<span class="string" id="7639462">&#34;a2&#34;</span><span class="op" id="7639466">,</span>&nbsp;<span class="string" id="7639468">&#34;a3&#34;</span><span class="op" id="7639472">}</span><span class="op" id="7639473">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7639477">&#34;b&#34;</span><span class="op" id="7639480">:</span>&nbsp;<span class="op" id="7639482">{</span><span class="string" id="7639483">&#34;b1&#34;</span><span class="op" id="7639487">,</span>&nbsp;<span class="string" id="7639489">&#34;b2&#34;</span><span class="op" id="7639493">,</span>&nbsp;<span class="string" id="7639495">&#34;b3&#34;</span><span class="op" id="7639499">}</span><span class="op" id="7639500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7639504">&#34;c&#34;</span><span class="op" id="7639507">:</span>&nbsp;<span class="op" id="7639509">{</span><span class="string" id="7639510">&#34;c1&#34;</span><span class="op" id="7639514">,</span>&nbsp;<span class="string" id="7639516">&#34;c2&#34;</span><span class="op" id="7639520">,</span>&nbsp;<span class="string" id="7639522">&#34;c3&#34;</span><span class="op" id="7639526">}</span><span class="op" id="7639527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639530">}</span><span class="op" id="7639531">,</span>&nbsp;<span class="string" id="7639533">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7639579">}</span><span class="op" id="7639580">,</span><br>
<span class="lineno"></span><span class="op" id="7639582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7639585">func</span>&nbsp;<span class="ident" id="7639590">TestEncodeQuery</span><span class="op" id="7639605">(</span><span class="ident" id="7639606">t</span>&nbsp;<span class="op" id="7639608">*</span><span class="ident" id="7639609">testing</span><span class="op" id="7639616">.</span><span class="ident" id="7639617">T</span><span class="op" id="7639618">)</span>&nbsp;<span class="op" id="7639620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7639623">for</span>&nbsp;<span class="ident" id="7639627">_</span><span class="op" id="7639628">,</span>&nbsp;<span class="ident" id="7639630">tt</span>&nbsp;<span class="op" id="7639633">:=</span>&nbsp;<span class="keyword" id="7639636">range</span>&nbsp;<span class="ident" id="7639642">encodeQueryTests</span>&nbsp;<span class="op" id="7639659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7639663">if</span>&nbsp;<span class="ident" id="7639666">q</span>&nbsp;<span class="op" id="7639668">:=</span>&nbsp;<span class="ident" id="7639671">tt</span><span class="op" id="7639673">.</span><span class="ident" id="7639674">m</span><span class="op" id="7639675">.</span><span class="ident" id="7639676">Encode</span><span class="op" id="7639682">(</span><span class="op" id="7639683">)</span><span class="op" id="7639684">;</span>&nbsp;<span class="ident" id="7639686">q</span>&nbsp;<span class="op" id="7639688">!=</span>&nbsp;<span class="ident" id="7639691">tt</span><span class="op" id="7639693">.</span><span class="ident" id="7639694">expected</span>&nbsp;<span class="op" id="7639703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7639708">t</span><span class="op" id="7639709">.</span><span class="ident" id="7639710">Errorf</span><span class="op" id="7639716">(</span><span class="string" id="7639717">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7639749">,</span>&nbsp;<span class="ident" id="7639751">tt</span><span class="op" id="7639753">.</span><span class="ident" id="7639754">m</span><span class="op" id="7639755">,</span>&nbsp;<span class="ident" id="7639757">q</span><span class="op" id="7639758">,</span>&nbsp;<span class="ident" id="7639760">tt</span><span class="op" id="7639762">.</span><span class="ident" id="7639763">expected</span><span class="op" id="7639771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639775">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639778">}</span><br>
<span class="lineno"></span><span class="op" id="7639780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7639783">var</span>&nbsp;<span class="ident" id="7639787">resolvePathTests</span>&nbsp;<span class="op" id="7639804">=</span>&nbsp;<span class="op" id="7639806">[</span><span class="op" id="7639807">]</span><span class="keyword" id="7639808">struct</span>&nbsp;<span class="op" id="7639815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7639818">base</span><span class="op" id="7639822">,</span>&nbsp;<span class="ident" id="7639824">ref</span><span class="op" id="7639827">,</span>&nbsp;<span class="ident" id="7639829">expected</span>&nbsp;<span class="builtintype" id="7639838">string</span><br>
<span class="lineno">570</span><span class="op" id="7639845">}</span><span class="op" id="7639846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639849">{</span><span class="string" id="7639850">&#34;a/b&#34;</span><span class="op" id="7639855">,</span>&nbsp;<span class="string" id="7639857">&#34;.&#34;</span><span class="op" id="7639860">,</span>&nbsp;<span class="string" id="7639862">&#34;/a/&#34;</span><span class="op" id="7639867">}</span><span class="op" id="7639868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639871">{</span><span class="string" id="7639872">&#34;a/b&#34;</span><span class="op" id="7639877">,</span>&nbsp;<span class="string" id="7639879">&#34;c&#34;</span><span class="op" id="7639882">,</span>&nbsp;<span class="string" id="7639884">&#34;/a/c&#34;</span><span class="op" id="7639890">}</span><span class="op" id="7639891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639894">{</span><span class="string" id="7639895">&#34;a/b&#34;</span><span class="op" id="7639900">,</span>&nbsp;<span class="string" id="7639902">&#34;..&#34;</span><span class="op" id="7639906">,</span>&nbsp;<span class="string" id="7639908">&#34;/&#34;</span><span class="op" id="7639911">}</span><span class="op" id="7639912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639915">{</span><span class="string" id="7639916">&#34;a/&#34;</span><span class="op" id="7639920">,</span>&nbsp;<span class="string" id="7639922">&#34;..&#34;</span><span class="op" id="7639926">,</span>&nbsp;<span class="string" id="7639928">&#34;/&#34;</span><span class="op" id="7639931">}</span><span class="op" id="7639932">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639935">{</span><span class="string" id="7639936">&#34;a/&#34;</span><span class="op" id="7639940">,</span>&nbsp;<span class="string" id="7639942">&#34;../..&#34;</span><span class="op" id="7639949">,</span>&nbsp;<span class="string" id="7639951">&#34;/&#34;</span><span class="op" id="7639954">}</span><span class="op" id="7639955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639958">{</span><span class="string" id="7639959">&#34;a/b/c&#34;</span><span class="op" id="7639966">,</span>&nbsp;<span class="string" id="7639968">&#34;..&#34;</span><span class="op" id="7639972">,</span>&nbsp;<span class="string" id="7639974">&#34;/a/&#34;</span><span class="op" id="7639979">}</span><span class="op" id="7639980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7639983">{</span><span class="string" id="7639984">&#34;a/b/c&#34;</span><span class="op" id="7639991">,</span>&nbsp;<span class="string" id="7639993">&#34;../d&#34;</span><span class="op" id="7639999">,</span>&nbsp;<span class="string" id="7640001">&#34;/a/d&#34;</span><span class="op" id="7640007">}</span><span class="op" id="7640008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640011">{</span><span class="string" id="7640012">&#34;a/b/c&#34;</span><span class="op" id="7640019">,</span>&nbsp;<span class="string" id="7640021">&#34;.././d&#34;</span><span class="op" id="7640029">,</span>&nbsp;<span class="string" id="7640031">&#34;/a/d&#34;</span><span class="op" id="7640037">}</span><span class="op" id="7640038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640041">{</span><span class="string" id="7640042">&#34;a/b&#34;</span><span class="op" id="7640047">,</span>&nbsp;<span class="string" id="7640049">&#34;./..&#34;</span><span class="op" id="7640055">,</span>&nbsp;<span class="string" id="7640057">&#34;/&#34;</span><span class="op" id="7640060">}</span><span class="op" id="7640061">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640064">{</span><span class="string" id="7640065">&#34;a/./b&#34;</span><span class="op" id="7640072">,</span>&nbsp;<span class="string" id="7640074">&#34;.&#34;</span><span class="op" id="7640077">,</span>&nbsp;<span class="string" id="7640079">&#34;/a/&#34;</span><span class="op" id="7640084">}</span><span class="op" id="7640085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640088">{</span><span class="string" id="7640089">&#34;a/../&#34;</span><span class="op" id="7640096">,</span>&nbsp;<span class="string" id="7640098">&#34;.&#34;</span><span class="op" id="7640101">,</span>&nbsp;<span class="string" id="7640103">&#34;/&#34;</span><span class="op" id="7640106">}</span><span class="op" id="7640107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640110">{</span><span class="string" id="7640111">&#34;a/.././b&#34;</span><span class="op" id="7640121">,</span>&nbsp;<span class="string" id="7640123">&#34;c&#34;</span><span class="op" id="7640126">,</span>&nbsp;<span class="string" id="7640128">&#34;/c&#34;</span><span class="op" id="7640132">}</span><span class="op" id="7640133">,</span><br>
<span class="lineno"></span><span class="op" id="7640135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7640138">func</span>&nbsp;<span class="ident" id="7640143">TestResolvePath</span><span class="op" id="7640158">(</span><span class="ident" id="7640159">t</span>&nbsp;<span class="op" id="7640161">*</span><span class="ident" id="7640162">testing</span><span class="op" id="7640169">.</span><span class="ident" id="7640170">T</span><span class="op" id="7640171">)</span>&nbsp;<span class="op" id="7640173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7640176">for</span>&nbsp;<span class="ident" id="7640180">_</span><span class="op" id="7640181">,</span>&nbsp;<span class="ident" id="7640183">test</span>&nbsp;<span class="op" id="7640188">:=</span>&nbsp;<span class="keyword" id="7640191">range</span>&nbsp;<span class="ident" id="7640197">resolvePathTests</span>&nbsp;<span class="op" id="7640214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7640218">got</span>&nbsp;<span class="op" id="7640222">:=</span>&nbsp;<span class="ident" id="7640225">resolvePath</span><span class="op" id="7640236">(</span><span class="ident" id="7640237">test</span><span class="op" id="7640241">.</span><span class="ident" id="7640242">base</span><span class="op" id="7640246">,</span>&nbsp;<span class="ident" id="7640248">test</span><span class="op" id="7640252">.</span><span class="ident" id="7640253">ref</span><span class="op" id="7640256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7640260">if</span>&nbsp;<span class="ident" id="7640263">got</span>&nbsp;<span class="op" id="7640267">!=</span>&nbsp;<span class="ident" id="7640270">test</span><span class="op" id="7640274">.</span><span class="ident" id="7640275">expected</span>&nbsp;<span class="op" id="7640284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7640289">t</span><span class="op" id="7640290">.</span><span class="ident" id="7640291">Errorf</span><span class="op" id="7640297">(</span><span class="string" id="7640298">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7640331">,</span>&nbsp;<span class="ident" id="7640333">test</span><span class="op" id="7640337">.</span><span class="ident" id="7640338">base</span><span class="op" id="7640342">,</span>&nbsp;<span class="ident" id="7640344">test</span><span class="op" id="7640348">.</span><span class="ident" id="7640349">ref</span><span class="op" id="7640352">,</span>&nbsp;<span class="ident" id="7640354">got</span><span class="op" id="7640357">,</span>&nbsp;<span class="ident" id="7640359">test</span><span class="op" id="7640363">.</span><span class="ident" id="7640364">expected</span><span class="op" id="7640372">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640379">}</span><br>
<span class="lineno"></span><span class="op" id="7640381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7640384">var</span>&nbsp;<span class="ident" id="7640388">resolveReferenceTests</span>&nbsp;<span class="op" id="7640410">=</span>&nbsp;<span class="op" id="7640412">[</span><span class="op" id="7640413">]</span><span class="keyword" id="7640414">struct</span>&nbsp;<span class="op" id="7640421">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7640424">base</span><span class="op" id="7640428">,</span>&nbsp;<span class="ident" id="7640430">rel</span><span class="op" id="7640433">,</span>&nbsp;<span class="ident" id="7640435">expected</span>&nbsp;<span class="builtintype" id="7640444">string</span><br>
<span class="lineno"></span><span class="op" id="7640451">}</span><span class="op" id="7640452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7640455">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640483">{</span><span class="string" id="7640484">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7640504">,</span>&nbsp;<span class="string" id="7640506">&#34;https://bar.com/&#34;</span><span class="op" id="7640524">,</span>&nbsp;<span class="string" id="7640526">&#34;https://bar.com/&#34;</span><span class="op" id="7640544">}</span><span class="op" id="7640545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640548">{</span><span class="string" id="7640549">&#34;http://foo.com/&#34;</span><span class="op" id="7640566">,</span>&nbsp;<span class="string" id="7640568">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7640590">,</span>&nbsp;<span class="string" id="7640592">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7640614">}</span><span class="op" id="7640615">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640618">{</span><span class="string" id="7640619">&#34;http://foo.com/bar&#34;</span><span class="op" id="7640639">,</span>&nbsp;<span class="string" id="7640641">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7640665">,</span>&nbsp;<span class="string" id="7640667">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7640691">}</span><span class="op" id="7640692">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7640696">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640725">{</span><span class="string" id="7640726">&#34;http://foo.com/bar&#34;</span><span class="op" id="7640746">,</span>&nbsp;<span class="string" id="7640748">&#34;/baz&#34;</span><span class="op" id="7640754">,</span>&nbsp;<span class="string" id="7640756">&#34;http://foo.com/baz&#34;</span><span class="op" id="7640776">}</span><span class="op" id="7640777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640780">{</span><span class="string" id="7640781">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7640807">,</span>&nbsp;<span class="string" id="7640809">&#34;/baz&#34;</span><span class="op" id="7640815">,</span>&nbsp;<span class="string" id="7640817">&#34;http://foo.com/baz&#34;</span><span class="op" id="7640837">}</span><span class="op" id="7640838">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640841">{</span><span class="string" id="7640842">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7640866">,</span>&nbsp;<span class="string" id="7640868">&#34;/baz?c=d&#34;</span><span class="op" id="7640878">,</span>&nbsp;<span class="string" id="7640880">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7640904">}</span><span class="op" id="7640905">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7640909">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7640929">{</span><span class="string" id="7640930">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7640955">,</span>&nbsp;<span class="string" id="7640957">&#34;//bar.com/quux&#34;</span><span class="op" id="7640973">,</span>&nbsp;<span class="string" id="7640975">&#34;https://bar.com/quux&#34;</span><span class="op" id="7640997">}</span><span class="op" id="7640998">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7641002">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7641033">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641059">{</span><span class="string" id="7641060">&#34;http://foo.com&#34;</span><span class="op" id="7641076">,</span>&nbsp;<span class="string" id="7641078">&#34;.&#34;</span><span class="op" id="7641081">,</span>&nbsp;<span class="string" id="7641083">&#34;http://foo.com/&#34;</span><span class="op" id="7641100">}</span><span class="op" id="7641101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641104">{</span><span class="string" id="7641105">&#34;http://foo.com/bar&#34;</span><span class="op" id="7641125">,</span>&nbsp;<span class="string" id="7641127">&#34;.&#34;</span><span class="op" id="7641130">,</span>&nbsp;<span class="string" id="7641132">&#34;http://foo.com/&#34;</span><span class="op" id="7641149">}</span><span class="op" id="7641150">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641153">{</span><span class="string" id="7641154">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7641175">,</span>&nbsp;<span class="string" id="7641177">&#34;.&#34;</span><span class="op" id="7641180">,</span>&nbsp;<span class="string" id="7641182">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7641203">}</span><span class="op" id="7641204">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7641208">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641227">{</span><span class="string" id="7641228">&#34;http://foo.com&#34;</span><span class="op" id="7641244">,</span>&nbsp;<span class="string" id="7641246">&#34;bar&#34;</span><span class="op" id="7641251">,</span>&nbsp;<span class="string" id="7641253">&#34;http://foo.com/bar&#34;</span><span class="op" id="7641273">}</span><span class="op" id="7641274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641277">{</span><span class="string" id="7641278">&#34;http://foo.com/&#34;</span><span class="op" id="7641295">,</span>&nbsp;<span class="string" id="7641297">&#34;bar&#34;</span><span class="op" id="7641302">,</span>&nbsp;<span class="string" id="7641304">&#34;http://foo.com/bar&#34;</span><span class="op" id="7641324">}</span><span class="op" id="7641325">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641328">{</span><span class="string" id="7641329">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641353">,</span>&nbsp;<span class="string" id="7641355">&#34;quux&#34;</span><span class="op" id="7641361">,</span>&nbsp;<span class="string" id="7641363">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7641388">}</span><span class="op" id="7641389">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7641393">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641410">{</span><span class="string" id="7641411">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641435">,</span>&nbsp;<span class="string" id="7641437">&#34;../quux&#34;</span><span class="op" id="7641446">,</span>&nbsp;<span class="string" id="7641448">&#34;http://foo.com/quux&#34;</span><span class="op" id="7641469">}</span><span class="op" id="7641470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641473">{</span><span class="string" id="7641474">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641498">,</span>&nbsp;<span class="string" id="7641500">&#34;../../../../../quux&#34;</span><span class="op" id="7641521">,</span>&nbsp;<span class="string" id="7641523">&#34;http://foo.com/quux&#34;</span><span class="op" id="7641544">}</span><span class="op" id="7641545">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641548">{</span><span class="string" id="7641549">&#34;http://foo.com/bar&#34;</span><span class="op" id="7641569">,</span>&nbsp;<span class="string" id="7641571">&#34;..&#34;</span><span class="op" id="7641575">,</span>&nbsp;<span class="string" id="7641577">&#34;http://foo.com/&#34;</span><span class="op" id="7641594">}</span><span class="op" id="7641595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641598">{</span><span class="string" id="7641599">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641623">,</span>&nbsp;<span class="string" id="7641625">&#34;./..&#34;</span><span class="op" id="7641631">,</span>&nbsp;<span class="string" id="7641633">&#34;http://foo.com/&#34;</span><span class="op" id="7641650">}</span><span class="op" id="7641651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7641654">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641690">{</span><span class="string" id="7641691">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641715">,</span>&nbsp;<span class="string" id="7641717">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7641738">,</span>&nbsp;<span class="string" id="7641740">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7641770">}</span><span class="op" id="7641771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641774">{</span><span class="string" id="7641775">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641799">,</span>&nbsp;<span class="string" id="7641801">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7641824">,</span>&nbsp;<span class="string" id="7641826">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7641856">}</span><span class="op" id="7641857">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641860">{</span><span class="string" id="7641861">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641885">,</span>&nbsp;<span class="string" id="7641887">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7641912">,</span>&nbsp;<span class="string" id="7641914">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7641944">}</span><span class="op" id="7641945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641948">{</span><span class="string" id="7641949">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7641973">,</span>&nbsp;<span class="string" id="7641975">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7642000">,</span>&nbsp;<span class="string" id="7642002">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7642032">}</span><span class="op" id="7642033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642036">{</span><span class="string" id="7642037">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7642061">,</span>&nbsp;<span class="string" id="7642063">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7642100">,</span>&nbsp;<span class="string" id="7642102">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7642132">}</span><span class="op" id="7642133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642136">{</span><span class="string" id="7642137">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7642161">,</span>&nbsp;<span class="string" id="7642163">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7642200">,</span>&nbsp;<span class="string" id="7642202">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7642232">}</span><span class="op" id="7642233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642236">{</span><span class="string" id="7642237">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7642261">,</span>&nbsp;<span class="string" id="7642263">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7642314">,</span>&nbsp;<span class="string" id="7642316">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7642346">}</span><span class="op" id="7642347">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642350">{</span><span class="string" id="7642351">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7642375">,</span>&nbsp;<span class="string" id="7642377">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7642419">,</span>&nbsp;<span class="string" id="7642421">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7642451">}</span><span class="op" id="7642452">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642456">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642517">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642570">{</span><span class="string" id="7642571">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7642611">,</span>&nbsp;<span class="string" id="7642613">&#34;../baz&#34;</span><span class="op" id="7642621">,</span>&nbsp;<span class="string" id="7642623">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7642647">}</span><span class="op" id="7642648">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642652">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642681">{</span><span class="string" id="7642682">&#34;http://foo.com/bar&#34;</span><span class="op" id="7642702">,</span>&nbsp;<span class="string" id="7642704">&#34;...&#34;</span><span class="op" id="7642709">,</span>&nbsp;<span class="string" id="7642711">&#34;http://foo.com/...&#34;</span><span class="op" id="7642731">}</span><span class="op" id="7642732">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642736">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642749">{</span><span class="string" id="7642750">&#34;http://foo.com/bar&#34;</span><span class="op" id="7642770">,</span>&nbsp;<span class="string" id="7642772">&#34;.#frag&#34;</span><span class="op" id="7642780">,</span>&nbsp;<span class="string" id="7642782">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7642804">}</span><span class="op" id="7642805">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642809">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642839">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642892">{</span><span class="string" id="7642893">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7642913">,</span>&nbsp;<span class="string" id="7642915">&#34;g:h&#34;</span><span class="op" id="7642920">,</span>&nbsp;<span class="string" id="7642922">&#34;g:h&#34;</span><span class="op" id="7642927">}</span><span class="op" id="7642928">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642931">{</span><span class="string" id="7642932">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7642952">,</span>&nbsp;<span class="string" id="7642954">&#34;g&#34;</span><span class="op" id="7642957">,</span>&nbsp;<span class="string" id="7642959">&#34;http://a/b/c/g&#34;</span><span class="op" id="7642975">}</span><span class="op" id="7642976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642979">{</span><span class="string" id="7642980">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643000">,</span>&nbsp;<span class="string" id="7643002">&#34;./g&#34;</span><span class="op" id="7643007">,</span>&nbsp;<span class="string" id="7643009">&#34;http://a/b/c/g&#34;</span><span class="op" id="7643025">}</span><span class="op" id="7643026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643029">{</span><span class="string" id="7643030">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643050">,</span>&nbsp;<span class="string" id="7643052">&#34;g/&#34;</span><span class="op" id="7643056">,</span>&nbsp;<span class="string" id="7643058">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7643075">}</span><span class="op" id="7643076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643079">{</span><span class="string" id="7643080">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643100">,</span>&nbsp;<span class="string" id="7643102">&#34;/g&#34;</span><span class="op" id="7643106">,</span>&nbsp;<span class="string" id="7643108">&#34;http://a/g&#34;</span><span class="op" id="7643120">}</span><span class="op" id="7643121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643124">{</span><span class="string" id="7643125">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643145">,</span>&nbsp;<span class="string" id="7643147">&#34;//g&#34;</span><span class="op" id="7643152">,</span>&nbsp;<span class="string" id="7643154">&#34;http://g&#34;</span><span class="op" id="7643164">}</span><span class="op" id="7643165">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643168">{</span><span class="string" id="7643169">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643189">,</span>&nbsp;<span class="string" id="7643191">&#34;?y&#34;</span><span class="op" id="7643195">,</span>&nbsp;<span class="string" id="7643197">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7643217">}</span><span class="op" id="7643218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643221">{</span><span class="string" id="7643222">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643242">,</span>&nbsp;<span class="string" id="7643244">&#34;g?y&#34;</span><span class="op" id="7643249">,</span>&nbsp;<span class="string" id="7643251">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7643269">}</span><span class="op" id="7643270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643273">{</span><span class="string" id="7643274">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643294">,</span>&nbsp;<span class="string" id="7643296">&#34;#s&#34;</span><span class="op" id="7643300">,</span>&nbsp;<span class="string" id="7643302">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7643324">}</span><span class="op" id="7643325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643328">{</span><span class="string" id="7643329">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643349">,</span>&nbsp;<span class="string" id="7643351">&#34;g#s&#34;</span><span class="op" id="7643356">,</span>&nbsp;<span class="string" id="7643358">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7643376">}</span><span class="op" id="7643377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643380">{</span><span class="string" id="7643381">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643401">,</span>&nbsp;<span class="string" id="7643403">&#34;g?y#s&#34;</span><span class="op" id="7643410">,</span>&nbsp;<span class="string" id="7643412">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7643432">}</span><span class="op" id="7643433">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643436">{</span><span class="string" id="7643437">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643457">,</span>&nbsp;<span class="string" id="7643459">&#34;;x&#34;</span><span class="op" id="7643463">,</span>&nbsp;<span class="string" id="7643465">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7643482">}</span><span class="op" id="7643483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643486">{</span><span class="string" id="7643487">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643507">,</span>&nbsp;<span class="string" id="7643509">&#34;g;x&#34;</span><span class="op" id="7643514">,</span>&nbsp;<span class="string" id="7643516">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7643534">}</span><span class="op" id="7643535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643538">{</span><span class="string" id="7643539">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643559">,</span>&nbsp;<span class="string" id="7643561">&#34;g;x?y#s&#34;</span><span class="op" id="7643570">,</span>&nbsp;<span class="string" id="7643572">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7643594">}</span><span class="op" id="7643595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643598">{</span><span class="string" id="7643599">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643619">,</span>&nbsp;<span class="string" id="7643621">&#34;&#34;</span><span class="op" id="7643623">,</span>&nbsp;<span class="string" id="7643625">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643645">}</span><span class="op" id="7643646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643649">{</span><span class="string" id="7643650">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643670">,</span>&nbsp;<span class="string" id="7643672">&#34;.&#34;</span><span class="op" id="7643675">,</span>&nbsp;<span class="string" id="7643677">&#34;http://a/b/c/&#34;</span><span class="op" id="7643692">}</span><span class="op" id="7643693">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643696">{</span><span class="string" id="7643697">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643717">,</span>&nbsp;<span class="string" id="7643719">&#34;./&#34;</span><span class="op" id="7643723">,</span>&nbsp;<span class="string" id="7643725">&#34;http://a/b/c/&#34;</span><span class="op" id="7643740">}</span><span class="op" id="7643741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643744">{</span><span class="string" id="7643745">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643765">,</span>&nbsp;<span class="string" id="7643767">&#34;..&#34;</span><span class="op" id="7643771">,</span>&nbsp;<span class="string" id="7643773">&#34;http://a/b/&#34;</span><span class="op" id="7643786">}</span><span class="op" id="7643787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643790">{</span><span class="string" id="7643791">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643811">,</span>&nbsp;<span class="string" id="7643813">&#34;../&#34;</span><span class="op" id="7643818">,</span>&nbsp;<span class="string" id="7643820">&#34;http://a/b/&#34;</span><span class="op" id="7643833">}</span><span class="op" id="7643834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643837">{</span><span class="string" id="7643838">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643858">,</span>&nbsp;<span class="string" id="7643860">&#34;../g&#34;</span><span class="op" id="7643866">,</span>&nbsp;<span class="string" id="7643868">&#34;http://a/b/g&#34;</span><span class="op" id="7643882">}</span><span class="op" id="7643883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643886">{</span><span class="string" id="7643887">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643907">,</span>&nbsp;<span class="string" id="7643909">&#34;../..&#34;</span><span class="op" id="7643916">,</span>&nbsp;<span class="string" id="7643918">&#34;http://a/&#34;</span><span class="op" id="7643929">}</span><span class="op" id="7643930">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643933">{</span><span class="string" id="7643934">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7643954">,</span>&nbsp;<span class="string" id="7643956">&#34;../../&#34;</span><span class="op" id="7643964">,</span>&nbsp;<span class="string" id="7643966">&#34;http://a/&#34;</span><span class="op" id="7643977">}</span><span class="op" id="7643978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643981">{</span><span class="string" id="7643982">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644002">,</span>&nbsp;<span class="string" id="7644004">&#34;../../g&#34;</span><span class="op" id="7644013">,</span>&nbsp;<span class="string" id="7644015">&#34;http://a/g&#34;</span><span class="op" id="7644027">}</span><span class="op" id="7644028">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7644032">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7644064">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644117">{</span><span class="string" id="7644118">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644138">,</span>&nbsp;<span class="string" id="7644140">&#34;../../../g&#34;</span><span class="op" id="7644152">,</span>&nbsp;<span class="string" id="7644154">&#34;http://a/g&#34;</span><span class="op" id="7644166">}</span><span class="op" id="7644167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644170">{</span><span class="string" id="7644171">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644191">,</span>&nbsp;<span class="string" id="7644193">&#34;../../../../g&#34;</span><span class="op" id="7644208">,</span>&nbsp;<span class="string" id="7644210">&#34;http://a/g&#34;</span><span class="op" id="7644222">}</span><span class="op" id="7644223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644226">{</span><span class="string" id="7644227">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644247">,</span>&nbsp;<span class="string" id="7644249">&#34;/./g&#34;</span><span class="op" id="7644255">,</span>&nbsp;<span class="string" id="7644257">&#34;http://a/g&#34;</span><span class="op" id="7644269">}</span><span class="op" id="7644270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644273">{</span><span class="string" id="7644274">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644294">,</span>&nbsp;<span class="string" id="7644296">&#34;/../g&#34;</span><span class="op" id="7644303">,</span>&nbsp;<span class="string" id="7644305">&#34;http://a/g&#34;</span><span class="op" id="7644317">}</span><span class="op" id="7644318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644321">{</span><span class="string" id="7644322">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644342">,</span>&nbsp;<span class="string" id="7644344">&#34;g.&#34;</span><span class="op" id="7644348">,</span>&nbsp;<span class="string" id="7644350">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7644367">}</span><span class="op" id="7644368">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644371">{</span><span class="string" id="7644372">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644392">,</span>&nbsp;<span class="string" id="7644394">&#34;.g&#34;</span><span class="op" id="7644398">,</span>&nbsp;<span class="string" id="7644400">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7644417">}</span><span class="op" id="7644418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644421">{</span><span class="string" id="7644422">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644442">,</span>&nbsp;<span class="string" id="7644444">&#34;g..&#34;</span><span class="op" id="7644449">,</span>&nbsp;<span class="string" id="7644451">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7644469">}</span><span class="op" id="7644470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644473">{</span><span class="string" id="7644474">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644494">,</span>&nbsp;<span class="string" id="7644496">&#34;..g&#34;</span><span class="op" id="7644501">,</span>&nbsp;<span class="string" id="7644503">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7644521">}</span><span class="op" id="7644522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644525">{</span><span class="string" id="7644526">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644546">,</span>&nbsp;<span class="string" id="7644548">&#34;./../g&#34;</span><span class="op" id="7644556">,</span>&nbsp;<span class="string" id="7644558">&#34;http://a/b/g&#34;</span><span class="op" id="7644572">}</span><span class="op" id="7644573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644576">{</span><span class="string" id="7644577">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644597">,</span>&nbsp;<span class="string" id="7644599">&#34;./g/.&#34;</span><span class="op" id="7644606">,</span>&nbsp;<span class="string" id="7644608">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7644625">}</span><span class="op" id="7644626">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644629">{</span><span class="string" id="7644630">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644650">,</span>&nbsp;<span class="string" id="7644652">&#34;g/./h&#34;</span><span class="op" id="7644659">,</span>&nbsp;<span class="string" id="7644661">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7644679">}</span><span class="op" id="7644680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644683">{</span><span class="string" id="7644684">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644704">,</span>&nbsp;<span class="string" id="7644706">&#34;g/../h&#34;</span><span class="op" id="7644714">,</span>&nbsp;<span class="string" id="7644716">&#34;http://a/b/c/h&#34;</span><span class="op" id="7644732">}</span><span class="op" id="7644733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644736">{</span><span class="string" id="7644737">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644757">,</span>&nbsp;<span class="string" id="7644759">&#34;g;x=1/./y&#34;</span><span class="op" id="7644770">,</span>&nbsp;<span class="string" id="7644772">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7644794">}</span><span class="op" id="7644795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644798">{</span><span class="string" id="7644799">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644819">,</span>&nbsp;<span class="string" id="7644821">&#34;g;x=1/../y&#34;</span><span class="op" id="7644833">,</span>&nbsp;<span class="string" id="7644835">&#34;http://a/b/c/y&#34;</span><span class="op" id="7644851">}</span><span class="op" id="7644852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644855">{</span><span class="string" id="7644856">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644876">,</span>&nbsp;<span class="string" id="7644878">&#34;g?y/./x&#34;</span><span class="op" id="7644887">,</span>&nbsp;<span class="string" id="7644889">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7644911">}</span><span class="op" id="7644912">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644915">{</span><span class="string" id="7644916">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644936">,</span>&nbsp;<span class="string" id="7644938">&#34;g?y/../x&#34;</span><span class="op" id="7644948">,</span>&nbsp;<span class="string" id="7644950">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7644973">}</span><span class="op" id="7644974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644977">{</span><span class="string" id="7644978">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7644998">,</span>&nbsp;<span class="string" id="7645000">&#34;g#s/./x&#34;</span><span class="op" id="7645009">,</span>&nbsp;<span class="string" id="7645011">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7645033">}</span><span class="op" id="7645034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645037">{</span><span class="string" id="7645038">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7645058">,</span>&nbsp;<span class="string" id="7645060">&#34;g#s/../x&#34;</span><span class="op" id="7645070">,</span>&nbsp;<span class="string" id="7645072">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7645095">}</span><span class="op" id="7645096">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7645100">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645112">{</span><span class="string" id="7645113">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7645134">,</span>&nbsp;<span class="string" id="7645136">&#34;//g?q&#34;</span><span class="op" id="7645143">,</span>&nbsp;<span class="string" id="7645145">&#34;https://g?q&#34;</span><span class="op" id="7645158">}</span><span class="op" id="7645159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645162">{</span><span class="string" id="7645163">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7645184">,</span>&nbsp;<span class="string" id="7645186">&#34;//g#s&#34;</span><span class="op" id="7645193">,</span>&nbsp;<span class="string" id="7645195">&#34;https://g#s&#34;</span><span class="op" id="7645208">}</span><span class="op" id="7645209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645212">{</span><span class="string" id="7645213">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7645234">,</span>&nbsp;<span class="string" id="7645236">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7645251">,</span>&nbsp;<span class="string" id="7645253">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7645274">}</span><span class="op" id="7645275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645278">{</span><span class="string" id="7645279">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7645300">,</span>&nbsp;<span class="string" id="7645302">&#34;?y&#34;</span><span class="op" id="7645306">,</span>&nbsp;<span class="string" id="7645308">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7645329">}</span><span class="op" id="7645330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645333">{</span><span class="string" id="7645334">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7645357">,</span>&nbsp;<span class="string" id="7645359">&#34;?y&#34;</span><span class="op" id="7645363">,</span>&nbsp;<span class="string" id="7645365">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7645386">}</span><span class="op" id="7645387">,</span><br>
<span class="lineno">700</span><span class="op" id="7645389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7645392">func</span>&nbsp;<span class="ident" id="7645397">TestResolveReference</span><span class="op" id="7645417">(</span><span class="ident" id="7645418">t</span>&nbsp;<span class="op" id="7645420">*</span><span class="ident" id="7645421">testing</span><span class="op" id="7645428">.</span><span class="ident" id="7645429">T</span><span class="op" id="7645430">)</span>&nbsp;<span class="op" id="7645432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645435">mustParse</span>&nbsp;<span class="op" id="7645445">:=</span>&nbsp;<span class="keyword" id="7645448">func</span><span class="op" id="7645452">(</span><span class="ident" id="7645453">url</span>&nbsp;<span class="builtintype" id="7645457">string</span><span class="op" id="7645463">)</span>&nbsp;<span class="op" id="7645465">*</span><span class="ident" id="7645466">URL</span>&nbsp;<span class="op" id="7645470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645474">u</span><span class="op" id="7645475">,</span>&nbsp;<span class="ident" id="7645477">err</span>&nbsp;<span class="op" id="7645481">:=</span>&nbsp;<span class="ident" id="7645484">Parse</span><span class="op" id="7645489">(</span><span class="ident" id="7645490">url</span><span class="op" id="7645493">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645497">if</span>&nbsp;<span class="ident" id="7645500">err</span>&nbsp;<span class="op" id="7645504">!=</span>&nbsp;<span class="ident" id="7645507">nil</span>&nbsp;<span class="op" id="7645511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645516">t</span><span class="op" id="7645517">.</span><span class="ident" id="7645518">Fatalf</span><span class="op" id="7645524">(</span><span class="string" id="7645525">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7645567">,</span>&nbsp;<span class="ident" id="7645569">url</span><span class="op" id="7645572">,</span>&nbsp;<span class="ident" id="7645574">err</span><span class="op" id="7645577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645585">return</span>&nbsp;<span class="ident" id="7645592">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645595">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645598">opaque</span>&nbsp;<span class="op" id="7645605">:=</span>&nbsp;<span class="op" id="7645608">&amp;</span><span class="ident" id="7645609">URL</span><span class="op" id="7645612">{</span><span class="ident" id="7645613">Scheme</span><span class="op" id="7645619">:</span>&nbsp;<span class="string" id="7645621">&#34;scheme&#34;</span><span class="op" id="7645629">,</span>&nbsp;<span class="ident" id="7645631">Opaque</span><span class="op" id="7645637">:</span>&nbsp;<span class="string" id="7645639">&#34;opaque&#34;</span><span class="op" id="7645647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645650">for</span>&nbsp;<span class="ident" id="7645654">_</span><span class="op" id="7645655">,</span>&nbsp;<span class="ident" id="7645657">test</span>&nbsp;<span class="op" id="7645662">:=</span>&nbsp;<span class="keyword" id="7645665">range</span>&nbsp;<span class="ident" id="7645671">resolveReferenceTests</span>&nbsp;<span class="op" id="7645693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645697">base</span>&nbsp;<span class="op" id="7645702">:=</span>&nbsp;<span class="ident" id="7645705">mustParse</span><span class="op" id="7645714">(</span><span class="ident" id="7645715">test</span><span class="op" id="7645719">.</span><span class="ident" id="7645720">base</span><span class="op" id="7645724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645728">rel</span>&nbsp;<span class="op" id="7645732">:=</span>&nbsp;<span class="ident" id="7645735">mustParse</span><span class="op" id="7645744">(</span><span class="ident" id="7645745">test</span><span class="op" id="7645749">.</span><span class="ident" id="7645750">rel</span><span class="op" id="7645753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645757">url</span>&nbsp;<span class="op" id="7645761">:=</span>&nbsp;<span class="ident" id="7645764">base</span><span class="op" id="7645768">.</span><span class="ident" id="7645769">ResolveReference</span><span class="op" id="7645785">(</span><span class="ident" id="7645786">rel</span><span class="op" id="7645789">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645793">if</span>&nbsp;<span class="ident" id="7645796">url</span><span class="op" id="7645799">.</span><span class="ident" id="7645800">String</span><span class="op" id="7645806">(</span><span class="op" id="7645807">)</span>&nbsp;<span class="op" id="7645809">!=</span>&nbsp;<span class="ident" id="7645812">test</span><span class="op" id="7645816">.</span><span class="ident" id="7645817">expected</span>&nbsp;<span class="op" id="7645826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645831">t</span><span class="op" id="7645832">.</span><span class="ident" id="7645833">Errorf</span><span class="op" id="7645839">(</span><span class="string" id="7645840">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7645884">,</span>&nbsp;<span class="ident" id="7645886">test</span><span class="op" id="7645890">.</span><span class="ident" id="7645891">base</span><span class="op" id="7645895">,</span>&nbsp;<span class="ident" id="7645897">test</span><span class="op" id="7645901">.</span><span class="ident" id="7645902">rel</span><span class="op" id="7645905">,</span>&nbsp;<span class="ident" id="7645907">test</span><span class="op" id="7645911">.</span><span class="ident" id="7645912">expected</span><span class="op" id="7645920">,</span>&nbsp;<span class="ident" id="7645922">url</span><span class="op" id="7645925">.</span><span class="ident" id="7645926">String</span><span class="op" id="7645932">(</span><span class="op" id="7645933">)</span><span class="op" id="7645934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7645942">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645987">if</span>&nbsp;<span class="ident" id="7645990">base</span>&nbsp;<span class="op" id="7645995">==</span>&nbsp;<span class="ident" id="7645998">url</span>&nbsp;<span class="op" id="7646002">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646007">t</span><span class="op" id="7646008">.</span><span class="ident" id="7646009">Errorf</span><span class="op" id="7646015">(</span><span class="string" id="7646016">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7646075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7646083">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646122">url</span><span class="op" id="7646125">,</span>&nbsp;<span class="ident" id="7646127">err</span>&nbsp;<span class="op" id="7646131">:=</span>&nbsp;<span class="ident" id="7646134">base</span><span class="op" id="7646138">.</span><span class="ident" id="7646139">Parse</span><span class="op" id="7646144">(</span><span class="ident" id="7646145">test</span><span class="op" id="7646149">.</span><span class="ident" id="7646150">rel</span><span class="op" id="7646153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646157">if</span>&nbsp;<span class="ident" id="7646160">err</span>&nbsp;<span class="op" id="7646164">!=</span>&nbsp;<span class="ident" id="7646167">nil</span>&nbsp;<span class="op" id="7646171">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646176">t</span><span class="op" id="7646177">.</span><span class="ident" id="7646178">Errorf</span><span class="op" id="7646184">(</span><span class="string" id="7646185">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7646215">,</span>&nbsp;<span class="ident" id="7646217">test</span><span class="op" id="7646221">.</span><span class="ident" id="7646222">base</span><span class="op" id="7646226">,</span>&nbsp;<span class="ident" id="7646228">test</span><span class="op" id="7646232">.</span><span class="ident" id="7646233">rel</span><span class="op" id="7646236">,</span>&nbsp;<span class="ident" id="7646238">err</span><span class="op" id="7646241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646245">}</span>&nbsp;<span class="keyword" id="7646247">else</span>&nbsp;<span class="keyword" id="7646252">if</span>&nbsp;<span class="ident" id="7646255">url</span><span class="op" id="7646258">.</span><span class="ident" id="7646259">String</span><span class="op" id="7646265">(</span><span class="op" id="7646266">)</span>&nbsp;<span class="op" id="7646268">!=</span>&nbsp;<span class="ident" id="7646271">test</span><span class="op" id="7646275">.</span><span class="ident" id="7646276">expected</span>&nbsp;<span class="op" id="7646285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646290">t</span><span class="op" id="7646291">.</span><span class="ident" id="7646292">Errorf</span><span class="op" id="7646298">(</span><span class="string" id="7646299">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7646332">,</span>&nbsp;<span class="ident" id="7646334">test</span><span class="op" id="7646338">.</span><span class="ident" id="7646339">base</span><span class="op" id="7646343">,</span>&nbsp;<span class="ident" id="7646345">test</span><span class="op" id="7646349">.</span><span class="ident" id="7646350">rel</span><span class="op" id="7646353">,</span>&nbsp;<span class="ident" id="7646355">test</span><span class="op" id="7646359">.</span><span class="ident" id="7646360">expected</span><span class="op" id="7646368">,</span>&nbsp;<span class="ident" id="7646370">url</span><span class="op" id="7646373">.</span><span class="ident" id="7646374">String</span><span class="op" id="7646380">(</span><span class="op" id="7646381">)</span><span class="op" id="7646382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646386">}</span>&nbsp;<span class="keyword" id="7646388">else</span>&nbsp;<span class="keyword" id="7646393">if</span>&nbsp;<span class="ident" id="7646396">base</span>&nbsp;<span class="op" id="7646401">==</span>&nbsp;<span class="ident" id="7646404">url</span>&nbsp;<span class="op" id="7646408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7646413">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646479">t</span><span class="op" id="7646480">.</span><span class="ident" id="7646481">Errorf</span><span class="op" id="7646487">(</span><span class="string" id="7646488">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7646536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7646544">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646579">url</span>&nbsp;<span class="op" id="7646583">=</span>&nbsp;<span class="ident" id="7646585">base</span><span class="op" id="7646589">.</span><span class="ident" id="7646590">ResolveReference</span><span class="op" id="7646606">(</span><span class="ident" id="7646607">opaque</span><span class="op" id="7646613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646617">if</span>&nbsp;<span class="op" id="7646620">*</span><span class="ident" id="7646621">url</span>&nbsp;<span class="op" id="7646625">!=</span>&nbsp;<span class="op" id="7646628">*</span><span class="ident" id="7646629">opaque</span>&nbsp;<span class="op" id="7646636">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646641">t</span><span class="op" id="7646642">.</span><span class="ident" id="7646643">Errorf</span><span class="op" id="7646649">(</span><span class="string" id="7646650">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7646716">,</span>&nbsp;<span class="ident" id="7646718">url</span><span class="op" id="7646721">,</span>&nbsp;<span class="ident" id="7646723">opaque</span><span class="op" id="7646729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7646737">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646795">url</span><span class="op" id="7646798">,</span>&nbsp;<span class="ident" id="7646800">err</span>&nbsp;<span class="op" id="7646804">=</span>&nbsp;<span class="ident" id="7646806">base</span><span class="op" id="7646810">.</span><span class="ident" id="7646811">Parse</span><span class="op" id="7646816">(</span><span class="string" id="7646817">&#34;scheme:opaque&#34;</span><span class="op" id="7646832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646836">if</span>&nbsp;<span class="ident" id="7646839">err</span>&nbsp;<span class="op" id="7646843">!=</span>&nbsp;<span class="ident" id="7646846">nil</span>&nbsp;<span class="op" id="7646850">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646855">t</span><span class="op" id="7646856">.</span><span class="ident" id="7646857">Errorf</span><span class="op" id="7646863">(</span><span class="string" id="7646864">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7646907">,</span>&nbsp;<span class="ident" id="7646909">test</span><span class="op" id="7646913">.</span><span class="ident" id="7646914">base</span><span class="op" id="7646918">,</span>&nbsp;<span class="ident" id="7646920">err</span><span class="op" id="7646923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646927">}</span>&nbsp;<span class="keyword" id="7646929">else</span>&nbsp;<span class="keyword" id="7646934">if</span>&nbsp;<span class="op" id="7646937">*</span><span class="ident" id="7646938">url</span>&nbsp;<span class="op" id="7646942">!=</span>&nbsp;<span class="op" id="7646945">*</span><span class="ident" id="7646946">opaque</span>&nbsp;<span class="op" id="7646953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646958">t</span><span class="op" id="7646959">.</span><span class="ident" id="7646960">Errorf</span><span class="op" id="7646966">(</span><span class="string" id="7646967">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7647022">,</span>&nbsp;<span class="ident" id="7647024">url</span><span class="op" id="7647027">,</span>&nbsp;<span class="ident" id="7647029">opaque</span><span class="op" id="7647035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647039">}</span>&nbsp;<span class="keyword" id="7647041">else</span>&nbsp;<span class="keyword" id="7647046">if</span>&nbsp;<span class="ident" id="7647049">base</span>&nbsp;<span class="op" id="7647054">==</span>&nbsp;<span class="ident" id="7647057">url</span>&nbsp;<span class="op" id="7647061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7647066">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647119">t</span><span class="op" id="7647120">.</span><span class="ident" id="7647121">Errorf</span><span class="op" id="7647127">(</span><span class="string" id="7647128">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7647176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647183">}</span><br>
<span class="lineno"></span><span class="op" id="7647185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7647188">func</span>&nbsp;<span class="ident" id="7647193">TestQueryValues</span><span class="op" id="7647208">(</span><span class="ident" id="7647209">t</span>&nbsp;<span class="op" id="7647211">*</span><span class="ident" id="7647212">testing</span><span class="op" id="7647219">.</span><span class="ident" id="7647220">T</span><span class="op" id="7647221">)</span>&nbsp;<span class="op" id="7647223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647226">u</span><span class="op" id="7647227">,</span>&nbsp;<span class="ident" id="7647229">_</span>&nbsp;<span class="op" id="7647231">:=</span>&nbsp;<span class="ident" id="7647234">Parse</span><span class="op" id="7647239">(</span><span class="string" id="7647240">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7647274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647277">v</span>&nbsp;<span class="op" id="7647279">:=</span>&nbsp;<span class="ident" id="7647282">u</span><span class="op" id="7647283">.</span><span class="ident" id="7647284">Query</span><span class="op" id="7647289">(</span><span class="op" id="7647290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647293">if</span>&nbsp;<span class="builtinfunc" id="7647296">len</span><span class="op" id="7647299">(</span><span class="ident" id="7647300">v</span><span class="op" id="7647301">)</span>&nbsp;<span class="op" id="7647303">!=</span>&nbsp;<span class="num" id="7647306">2</span>&nbsp;<span class="op" id="7647308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647312">t</span><span class="op" id="7647313">.</span><span class="ident" id="7647314">Errorf</span><span class="op" id="7647320">(</span><span class="string" id="7647321">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7647358">,</span>&nbsp;<span class="builtinfunc" id="7647360">len</span><span class="op" id="7647363">(</span><span class="ident" id="7647364">v</span><span class="op" id="7647365">)</span><span class="op" id="7647366">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647372">if</span>&nbsp;<span class="ident" id="7647375">g</span><span class="op" id="7647376">,</span>&nbsp;<span class="ident" id="7647378">e</span>&nbsp;<span class="op" id="7647380">:=</span>&nbsp;<span class="ident" id="7647383">v</span><span class="op" id="7647384">.</span><span class="ident" id="7647385">Get</span><span class="op" id="7647388">(</span><span class="string" id="7647389">&#34;foo&#34;</span><span class="op" id="7647394">)</span><span class="op" id="7647395">,</span>&nbsp;<span class="string" id="7647397">&#34;bar&#34;</span><span class="op" id="7647402">;</span>&nbsp;<span class="ident" id="7647404">g</span>&nbsp;<span class="op" id="7647406">!=</span>&nbsp;<span class="ident" id="7647409">e</span>&nbsp;<span class="op" id="7647411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647415">t</span><span class="op" id="7647416">.</span><span class="ident" id="7647417">Errorf</span><span class="op" id="7647423">(</span><span class="string" id="7647424">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7647448">,</span>&nbsp;<span class="ident" id="7647450">g</span><span class="op" id="7647451">,</span>&nbsp;<span class="ident" id="7647453">e</span><span class="op" id="7647454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7647460">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647480">if</span>&nbsp;<span class="ident" id="7647483">g</span><span class="op" id="7647484">,</span>&nbsp;<span class="ident" id="7647486">e</span>&nbsp;<span class="op" id="7647488">:=</span>&nbsp;<span class="ident" id="7647491">v</span><span class="op" id="7647492">.</span><span class="ident" id="7647493">Get</span><span class="op" id="7647496">(</span><span class="string" id="7647497">&#34;Foo&#34;</span><span class="op" id="7647502">)</span><span class="op" id="7647503">,</span>&nbsp;<span class="string" id="7647505">&#34;&#34;</span><span class="op" id="7647507">;</span>&nbsp;<span class="ident" id="7647509">g</span>&nbsp;<span class="op" id="7647511">!=</span>&nbsp;<span class="ident" id="7647514">e</span>&nbsp;<span class="op" id="7647516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647520">t</span><span class="op" id="7647521">.</span><span class="ident" id="7647522">Errorf</span><span class="op" id="7647528">(</span><span class="string" id="7647529">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7647553">,</span>&nbsp;<span class="ident" id="7647555">g</span><span class="op" id="7647556">,</span>&nbsp;<span class="ident" id="7647558">e</span><span class="op" id="7647559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647565">if</span>&nbsp;<span class="ident" id="7647568">g</span><span class="op" id="7647569">,</span>&nbsp;<span class="ident" id="7647571">e</span>&nbsp;<span class="op" id="7647573">:=</span>&nbsp;<span class="ident" id="7647576">v</span><span class="op" id="7647577">.</span><span class="ident" id="7647578">Get</span><span class="op" id="7647581">(</span><span class="string" id="7647582">&#34;bar&#34;</span><span class="op" id="7647587">)</span><span class="op" id="7647588">,</span>&nbsp;<span class="string" id="7647590">&#34;1&#34;</span><span class="op" id="7647593">;</span>&nbsp;<span class="ident" id="7647595">g</span>&nbsp;<span class="op" id="7647597">!=</span>&nbsp;<span class="ident" id="7647600">e</span>&nbsp;<span class="op" id="7647602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647606">t</span><span class="op" id="7647607">.</span><span class="ident" id="7647608">Errorf</span><span class="op" id="7647614">(</span><span class="string" id="7647615">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7647639">,</span>&nbsp;<span class="ident" id="7647641">g</span><span class="op" id="7647642">,</span>&nbsp;<span class="ident" id="7647644">e</span><span class="op" id="7647645">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647651">if</span>&nbsp;<span class="ident" id="7647654">g</span><span class="op" id="7647655">,</span>&nbsp;<span class="ident" id="7647657">e</span>&nbsp;<span class="op" id="7647659">:=</span>&nbsp;<span class="ident" id="7647662">v</span><span class="op" id="7647663">.</span><span class="ident" id="7647664">Get</span><span class="op" id="7647667">(</span><span class="string" id="7647668">&#34;baz&#34;</span><span class="op" id="7647673">)</span><span class="op" id="7647674">,</span>&nbsp;<span class="string" id="7647676">&#34;&#34;</span><span class="op" id="7647678">;</span>&nbsp;<span class="ident" id="7647680">g</span>&nbsp;<span class="op" id="7647682">!=</span>&nbsp;<span class="ident" id="7647685">e</span>&nbsp;<span class="op" id="7647687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647691">t</span><span class="op" id="7647692">.</span><span class="ident" id="7647693">Errorf</span><span class="op" id="7647699">(</span><span class="string" id="7647700">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7647724">,</span>&nbsp;<span class="ident" id="7647726">g</span><span class="op" id="7647727">,</span>&nbsp;<span class="ident" id="7647729">e</span><span class="op" id="7647730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647736">v</span><span class="op" id="7647737">.</span><span class="ident" id="7647738">Del</span><span class="op" id="7647741">(</span><span class="string" id="7647742">&#34;bar&#34;</span><span class="op" id="7647747">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647750">if</span>&nbsp;<span class="ident" id="7647753">g</span><span class="op" id="7647754">,</span>&nbsp;<span class="ident" id="7647756">e</span>&nbsp;<span class="op" id="7647758">:=</span>&nbsp;<span class="ident" id="7647761">v</span><span class="op" id="7647762">.</span><span class="ident" id="7647763">Get</span><span class="op" id="7647766">(</span><span class="string" id="7647767">&#34;bar&#34;</span><span class="op" id="7647772">)</span><span class="op" id="7647773">,</span>&nbsp;<span class="string" id="7647775">&#34;&#34;</span><span class="op" id="7647777">;</span>&nbsp;<span class="ident" id="7647779">g</span>&nbsp;<span class="op" id="7647781">!=</span>&nbsp;<span class="ident" id="7647784">e</span>&nbsp;<span class="op" id="7647786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647790">t</span><span class="op" id="7647791">.</span><span class="ident" id="7647792">Errorf</span><span class="op" id="7647798">(</span><span class="string" id="7647799">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7647830">,</span>&nbsp;<span class="ident" id="7647832">g</span><span class="op" id="7647833">,</span>&nbsp;<span class="ident" id="7647835">e</span><span class="op" id="7647836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647839">}</span><br>
<span class="lineno"></span><span class="op" id="7647841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="7647844">type</span>&nbsp;<span class="ident" id="7647849">parseTest</span>&nbsp;<span class="keyword" id="7647859">struct</span>&nbsp;<span class="op" id="7647866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647869">query</span>&nbsp;<span class="builtintype" id="7647875">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647883">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7647889">Values</span><br>
<span class="lineno"></span><span class="op" id="7647896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="7647899">var</span>&nbsp;<span class="ident" id="7647903">parseTests</span>&nbsp;<span class="op" id="7647914">=</span>&nbsp;<span class="op" id="7647916">[</span><span class="op" id="7647917">]</span><span class="ident" id="7647918">parseTest</span><span class="op" id="7647927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647934">query</span><span class="op" id="7647939">:</span>&nbsp;<span class="string" id="7647941">&#34;a=1&amp;b=2&#34;</span><span class="op" id="7647950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647954">out</span><span class="op" id="7647957">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7647961">Values</span><span class="op" id="7647967">{</span><span class="string" id="7647968">&#34;a&#34;</span><span class="op" id="7647971">:</span>&nbsp;<span class="op" id="7647973">[</span><span class="op" id="7647974">]</span><span class="builtintype" id="7647975">string</span><span class="op" id="7647981">{</span><span class="string" id="7647982">&#34;1&#34;</span><span class="op" id="7647985">}</span><span class="op" id="7647986">,</span>&nbsp;<span class="string" id="7647988">&#34;b&#34;</span><span class="op" id="7647991">:</span>&nbsp;<span class="op" id="7647993">[</span><span class="op" id="7647994">]</span><span class="builtintype" id="7647995">string</span><span class="op" id="7648001">{</span><span class="string" id="7648002">&#34;2&#34;</span><span class="op" id="7648005">}</span><span class="op" id="7648006">}</span><span class="op" id="7648007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648010">}</span><span class="op" id="7648011">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648018">query</span><span class="op" id="7648023">:</span>&nbsp;<span class="string" id="7648025">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="7648043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648047">out</span><span class="op" id="7648050">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7648054">Values</span><span class="op" id="7648060">{</span><span class="string" id="7648061">&#34;a&#34;</span><span class="op" id="7648064">:</span>&nbsp;<span class="op" id="7648066">[</span><span class="op" id="7648067">]</span><span class="builtintype" id="7648068">string</span><span class="op" id="7648074">{</span><span class="string" id="7648075">&#34;1&#34;</span><span class="op" id="7648078">,</span>&nbsp;<span class="string" id="7648080">&#34;2&#34;</span><span class="op" id="7648083">,</span>&nbsp;<span class="string" id="7648085">&#34;banana&#34;</span><span class="op" id="7648093">}</span><span class="op" id="7648094">}</span><span class="op" id="7648095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648098">}</span><span class="op" id="7648099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648102">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648106">query</span><span class="op" id="7648111">:</span>&nbsp;<span class="string" id="7648113">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="7648138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648142">out</span><span class="op" id="7648145">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7648149">Values</span><span class="op" id="7648155">{</span><span class="string" id="7648156">&#34;ascii&#34;</span><span class="op" id="7648163">:</span>&nbsp;<span class="op" id="7648165">[</span><span class="op" id="7648166">]</span><span class="builtintype" id="7648167">string</span><span class="op" id="7648173">{</span><span class="string" id="7648174">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="7648187">}</span><span class="op" id="7648188">}</span><span class="op" id="7648189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648192">}</span><span class="op" id="7648193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648200">query</span><span class="op" id="7648205">:</span>&nbsp;<span class="string" id="7648207">&#34;a=1;b=2&#34;</span><span class="op" id="7648216">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648220">out</span><span class="op" id="7648223">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7648227">Values</span><span class="op" id="7648233">{</span><span class="string" id="7648234">&#34;a&#34;</span><span class="op" id="7648237">:</span>&nbsp;<span class="op" id="7648239">[</span><span class="op" id="7648240">]</span><span class="builtintype" id="7648241">string</span><span class="op" id="7648247">{</span><span class="string" id="7648248">&#34;1&#34;</span><span class="op" id="7648251">}</span><span class="op" id="7648252">,</span>&nbsp;<span class="string" id="7648254">&#34;b&#34;</span><span class="op" id="7648257">:</span>&nbsp;<span class="op" id="7648259">[</span><span class="op" id="7648260">]</span><span class="builtintype" id="7648261">string</span><span class="op" id="7648267">{</span><span class="string" id="7648268">&#34;2&#34;</span><span class="op" id="7648271">}</span><span class="op" id="7648272">}</span><span class="op" id="7648273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648276">}</span><span class="op" id="7648277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648284">query</span><span class="op" id="7648289">:</span>&nbsp;<span class="string" id="7648291">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="7648309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648313">out</span><span class="op" id="7648316">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7648320">Values</span><span class="op" id="7648326">{</span><span class="string" id="7648327">&#34;a&#34;</span><span class="op" id="7648330">:</span>&nbsp;<span class="op" id="7648332">[</span><span class="op" id="7648333">]</span><span class="builtintype" id="7648334">string</span><span class="op" id="7648340">{</span><span class="string" id="7648341">&#34;1&#34;</span><span class="op" id="7648344">,</span>&nbsp;<span class="string" id="7648346">&#34;2&#34;</span><span class="op" id="7648349">,</span>&nbsp;<span class="string" id="7648351">&#34;banana&#34;</span><span class="op" id="7648359">}</span><span class="op" id="7648360">}</span><span class="op" id="7648361">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648364">}</span><span class="op" id="7648365">,</span><br>
<span class="lineno"></span><span class="op" id="7648367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7648370">func</span>&nbsp;<span class="ident" id="7648375">TestParseQuery</span><span class="op" id="7648389">(</span><span class="ident" id="7648390">t</span>&nbsp;<span class="op" id="7648392">*</span><span class="ident" id="7648393">testing</span><span class="op" id="7648400">.</span><span class="ident" id="7648401">T</span><span class="op" id="7648402">)</span>&nbsp;<span class="op" id="7648404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648407">for</span>&nbsp;<span class="ident" id="7648411">i</span><span class="op" id="7648412">,</span>&nbsp;<span class="ident" id="7648414">test</span>&nbsp;<span class="op" id="7648419">:=</span>&nbsp;<span class="keyword" id="7648422">range</span>&nbsp;<span class="ident" id="7648428">parseTests</span>&nbsp;<span class="op" id="7648439">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648443">form</span><span class="op" id="7648447">,</span>&nbsp;<span class="ident" id="7648449">err</span>&nbsp;<span class="op" id="7648453">:=</span>&nbsp;<span class="ident" id="7648456">ParseQuery</span><span class="op" id="7648466">(</span><span class="ident" id="7648467">test</span><span class="op" id="7648471">.</span><span class="ident" id="7648472">query</span><span class="op" id="7648477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648481">if</span>&nbsp;<span class="ident" id="7648484">err</span>&nbsp;<span class="op" id="7648488">!=</span>&nbsp;<span class="ident" id="7648491">nil</span>&nbsp;<span class="op" id="7648495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648500">t</span><span class="op" id="7648501">.</span><span class="ident" id="7648502">Errorf</span><span class="op" id="7648508">(</span><span class="string" id="7648509">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7648540">,</span>&nbsp;<span class="ident" id="7648542">i</span><span class="op" id="7648543">,</span>&nbsp;<span class="ident" id="7648545">err</span><span class="op" id="7648548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648553">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648564">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648568">if</span>&nbsp;<span class="builtinfunc" id="7648571">len</span><span class="op" id="7648574">(</span><span class="ident" id="7648575">form</span><span class="op" id="7648579">)</span>&nbsp;<span class="op" id="7648581">!=</span>&nbsp;<span class="builtinfunc" id="7648584">len</span><span class="op" id="7648587">(</span><span class="ident" id="7648588">test</span><span class="op" id="7648592">.</span><span class="ident" id="7648593">out</span><span class="op" id="7648596">)</span>&nbsp;<span class="op" id="7648598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648603">t</span><span class="op" id="7648604">.</span><span class="ident" id="7648605">Errorf</span><span class="op" id="7648611">(</span><span class="string" id="7648612">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7648646">,</span>&nbsp;<span class="ident" id="7648648">i</span><span class="op" id="7648649">,</span>&nbsp;<span class="builtinfunc" id="7648651">len</span><span class="op" id="7648654">(</span><span class="ident" id="7648655">form</span><span class="op" id="7648659">)</span><span class="op" id="7648660">,</span>&nbsp;<span class="builtinfunc" id="7648662">len</span><span class="op" id="7648665">(</span><span class="ident" id="7648666">test</span><span class="op" id="7648670">.</span><span class="ident" id="7648671">out</span><span class="op" id="7648674">)</span><span class="op" id="7648675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648683">for</span>&nbsp;<span class="ident" id="7648687">k</span><span class="op" id="7648688">,</span>&nbsp;<span class="ident" id="7648690">evs</span>&nbsp;<span class="op" id="7648694">:=</span>&nbsp;<span class="keyword" id="7648697">range</span>&nbsp;<span class="ident" id="7648703">test</span><span class="op" id="7648707">.</span><span class="ident" id="7648708">out</span>&nbsp;<span class="op" id="7648712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648717">vs</span><span class="op" id="7648719">,</span>&nbsp;<span class="ident" id="7648721">ok</span>&nbsp;<span class="op" id="7648724">:=</span>&nbsp;<span class="ident" id="7648727">form</span><span class="op" id="7648731">[</span><span class="ident" id="7648732">k</span><span class="op" id="7648733">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648738">if</span>&nbsp;<span class="op" id="7648741">!</span><span class="ident" id="7648742">ok</span>&nbsp;<span class="op" id="7648745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648751">t</span><span class="op" id="7648752">.</span><span class="ident" id="7648753">Errorf</span><span class="op" id="7648759">(</span><span class="string" id="7648760">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="7648785">,</span>&nbsp;<span class="ident" id="7648787">i</span><span class="op" id="7648788">,</span>&nbsp;<span class="ident" id="7648790">k</span><span class="op" id="7648791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648797">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648814">if</span>&nbsp;<span class="builtinfunc" id="7648817">len</span><span class="op" id="7648820">(</span><span class="ident" id="7648821">vs</span><span class="op" id="7648823">)</span>&nbsp;<span class="op" id="7648825">!=</span>&nbsp;<span class="builtinfunc" id="7648828">len</span><span class="op" id="7648831">(</span><span class="ident" id="7648832">evs</span><span class="op" id="7648835">)</span>&nbsp;<span class="op" id="7648837">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648843">t</span><span class="op" id="7648844">.</span><span class="ident" id="7648845">Errorf</span><span class="op" id="7648851">(</span><span class="string" id="7648852">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7648890">,</span>&nbsp;<span class="ident" id="7648892">i</span><span class="op" id="7648893">,</span>&nbsp;<span class="ident" id="7648895">k</span><span class="op" id="7648896">,</span>&nbsp;<span class="builtinfunc" id="7648898">len</span><span class="op" id="7648901">(</span><span class="ident" id="7648902">vs</span><span class="op" id="7648904">)</span><span class="op" id="7648905">,</span>&nbsp;<span class="builtinfunc" id="7648907">len</span><span class="op" id="7648910">(</span><span class="ident" id="7648911">evs</span><span class="op" id="7648914">)</span><span class="op" id="7648915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648921">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7648933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648938">for</span>&nbsp;<span class="ident" id="7648942">j</span><span class="op" id="7648943">,</span>&nbsp;<span class="ident" id="7648945">ev</span>&nbsp;<span class="op" id="7648948">:=</span>&nbsp;<span class="keyword" id="7648951">range</span>&nbsp;<span class="ident" id="7648957">evs</span>&nbsp;<span class="op" id="7648961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7648967">if</span>&nbsp;<span class="ident" id="7648970">v</span>&nbsp;<span class="op" id="7648972">:=</span>&nbsp;<span class="ident" id="7648975">vs</span><span class="op" id="7648977">[</span><span class="ident" id="7648978">j</span><span class="op" id="7648979">]</span><span class="op" id="7648980">;</span>&nbsp;<span class="ident" id="7648982">v</span>&nbsp;<span class="op" id="7648984">!=</span>&nbsp;<span class="ident" id="7648987">ev</span>&nbsp;<span class="op" id="7648990">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7648997">t</span><span class="op" id="7648998">.</span><span class="ident" id="7648999">Errorf</span><span class="op" id="7649005">(</span><span class="string" id="7649006">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7649043">,</span>&nbsp;<span class="ident" id="7649045">i</span><span class="op" id="7649046">,</span>&nbsp;<span class="ident" id="7649048">k</span><span class="op" id="7649049">,</span>&nbsp;<span class="ident" id="7649051">j</span><span class="op" id="7649052">,</span>&nbsp;<span class="ident" id="7649054">v</span><span class="op" id="7649055">,</span>&nbsp;<span class="ident" id="7649057">ev</span><span class="op" id="7649059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649077">}</span><br>
<span class="lineno">830</span><span class="op" id="7649079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7649082">type</span>&nbsp;<span class="ident" id="7649087">RequestURITest</span>&nbsp;<span class="keyword" id="7649102">struct</span>&nbsp;<span class="op" id="7649109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649112">url</span>&nbsp;<span class="op" id="7649116">*</span><span class="ident" id="7649117">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649122">out</span>&nbsp;<span class="builtintype" id="7649126">string</span><br>
<span class="lineno">835</span><span class="op" id="7649133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7649136">var</span>&nbsp;<span class="ident" id="7649140">requritests</span>&nbsp;<span class="op" id="7649152">=</span>&nbsp;<span class="op" id="7649154">[</span><span class="op" id="7649155">]</span><span class="ident" id="7649156">RequestURITest</span><span class="op" id="7649170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649177">&amp;</span><span class="ident" id="7649178">URL</span><span class="op" id="7649181">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649186">Scheme</span><span class="op" id="7649192">:</span>&nbsp;<span class="string" id="7649194">&#34;http&#34;</span><span class="op" id="7649200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649205">Host</span><span class="op" id="7649209">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649213">&#34;example.com&#34;</span><span class="op" id="7649226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649231">Path</span><span class="op" id="7649235">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649239">&#34;&#34;</span><span class="op" id="7649241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649245">}</span><span class="op" id="7649246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649250">&#34;/&#34;</span><span class="op" id="7649253">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649256">}</span><span class="op" id="7649257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649264">&amp;</span><span class="ident" id="7649265">URL</span><span class="op" id="7649268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649273">Scheme</span><span class="op" id="7649279">:</span>&nbsp;<span class="string" id="7649281">&#34;http&#34;</span><span class="op" id="7649287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649292">Host</span><span class="op" id="7649296">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649300">&#34;example.com&#34;</span><span class="op" id="7649313">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649318">Path</span><span class="op" id="7649322">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649326">&#34;/a&nbsp;b&#34;</span><span class="op" id="7649332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649336">}</span><span class="op" id="7649337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649341">&#34;/a%20b&#34;</span><span class="op" id="7649349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649352">}</span><span class="op" id="7649353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7649356">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649396">&amp;</span><span class="ident" id="7649397">URL</span><span class="op" id="7649400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649405">Scheme</span><span class="op" id="7649411">:</span>&nbsp;<span class="string" id="7649413">&#34;http&#34;</span><span class="op" id="7649419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649424">Host</span><span class="op" id="7649428">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649432">&#34;example.com&#34;</span><span class="op" id="7649445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649450">Opaque</span><span class="op" id="7649456">:</span>&nbsp;<span class="string" id="7649458">&#34;/%2F/%2F/&#34;</span><span class="op" id="7649469">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649473">}</span><span class="op" id="7649474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649478">&#34;/%2F/%2F/&#34;</span><span class="op" id="7649489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649492">}</span><span class="op" id="7649493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7649496">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649532">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649536">&amp;</span><span class="ident" id="7649537">URL</span><span class="op" id="7649540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649545">Scheme</span><span class="op" id="7649551">:</span>&nbsp;<span class="string" id="7649553">&#34;http&#34;</span><span class="op" id="7649559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649564">Host</span><span class="op" id="7649568">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649572">&#34;example.com&#34;</span><span class="op" id="7649585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649590">Opaque</span><span class="op" id="7649596">:</span>&nbsp;<span class="string" id="7649598">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="7649628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649632">}</span><span class="op" id="7649633">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649637">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="7649672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649675">}</span><span class="op" id="7649676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649683">&amp;</span><span class="ident" id="7649684">URL</span><span class="op" id="7649687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649692">Scheme</span><span class="op" id="7649698">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649702">&#34;http&#34;</span><span class="op" id="7649708">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649713">Host</span><span class="op" id="7649717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7649723">&#34;example.com&#34;</span><span class="op" id="7649736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649741">Path</span><span class="op" id="7649745">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7649751">&#34;/a&nbsp;b&#34;</span><span class="op" id="7649757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649762">RawQuery</span><span class="op" id="7649770">:</span>&nbsp;<span class="string" id="7649772">&#34;q=go+language&#34;</span><span class="op" id="7649787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649791">}</span><span class="op" id="7649792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649796">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="7649818">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649821">}</span><span class="op" id="7649822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649829">&amp;</span><span class="ident" id="7649830">URL</span><span class="op" id="7649833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649838">Scheme</span><span class="op" id="7649844">:</span>&nbsp;<span class="string" id="7649846">&#34;myschema&#34;</span><span class="op" id="7649856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649861">Opaque</span><span class="op" id="7649867">:</span>&nbsp;<span class="string" id="7649869">&#34;opaque&#34;</span><span class="op" id="7649877">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649881">}</span><span class="op" id="7649882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649886">&#34;opaque&#34;</span><span class="op" id="7649894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649897">}</span><span class="op" id="7649898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649905">&amp;</span><span class="ident" id="7649906">URL</span><span class="op" id="7649909">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649914">Scheme</span><span class="op" id="7649920">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649924">&#34;myschema&#34;</span><span class="op" id="7649934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649939">Opaque</span><span class="op" id="7649945">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7649949">&#34;opaque&#34;</span><span class="op" id="7649957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7649962">RawQuery</span><span class="op" id="7649970">:</span>&nbsp;<span class="string" id="7649972">&#34;q=go+language&#34;</span><span class="op" id="7649987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7649991">}</span><span class="op" id="7649992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7649996">&#34;opaque?q=go+language&#34;</span><span class="op" id="7650018">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650021">}</span><span class="op" id="7650022">,</span><br>
<span class="lineno"></span><span class="op" id="7650024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7650027">func</span>&nbsp;<span class="ident" id="7650032">TestRequestURI</span><span class="op" id="7650046">(</span><span class="ident" id="7650047">t</span>&nbsp;<span class="op" id="7650049">*</span><span class="ident" id="7650050">testing</span><span class="op" id="7650057">.</span><span class="ident" id="7650058">T</span><span class="op" id="7650059">)</span>&nbsp;<span class="op" id="7650061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7650064">for</span>&nbsp;<span class="ident" id="7650068">_</span><span class="op" id="7650069">,</span>&nbsp;<span class="ident" id="7650071">tt</span>&nbsp;<span class="op" id="7650074">:=</span>&nbsp;<span class="keyword" id="7650077">range</span>&nbsp;<span class="ident" id="7650083">requritests</span>&nbsp;<span class="op" id="7650095">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650099">s</span>&nbsp;<span class="op" id="7650101">:=</span>&nbsp;<span class="ident" id="7650104">tt</span><span class="op" id="7650106">.</span><span class="ident" id="7650107">url</span><span class="op" id="7650110">.</span><span class="ident" id="7650111">RequestURI</span><span class="op" id="7650121">(</span><span class="op" id="7650122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7650126">if</span>&nbsp;<span class="ident" id="7650129">s</span>&nbsp;<span class="op" id="7650131">!=</span>&nbsp;<span class="ident" id="7650134">tt</span><span class="op" id="7650136">.</span><span class="ident" id="7650137">out</span>&nbsp;<span class="op" id="7650141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650146">t</span><span class="op" id="7650147">.</span><span class="ident" id="7650148">Errorf</span><span class="op" id="7650154">(</span><span class="string" id="7650155">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7650193">,</span>&nbsp;<span class="ident" id="7650195">tt</span><span class="op" id="7650197">.</span><span class="ident" id="7650198">url</span><span class="op" id="7650201">,</span>&nbsp;<span class="ident" id="7650203">s</span><span class="op" id="7650204">,</span>&nbsp;<span class="ident" id="7650206">tt</span><span class="op" id="7650208">.</span><span class="ident" id="7650209">out</span><span class="op" id="7650212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650219">}</span><br>
<span class="lineno">905</span><span class="op" id="7650221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7650224">func</span>&nbsp;<span class="ident" id="7650229">TestParseFailure</span><span class="op" id="7650245">(</span><span class="ident" id="7650246">t</span>&nbsp;<span class="op" id="7650248">*</span><span class="ident" id="7650249">testing</span><span class="op" id="7650256">.</span><span class="ident" id="7650257">T</span><span class="op" id="7650258">)</span>&nbsp;<span class="op" id="7650260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7650263">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7650312">const</span>&nbsp;<span class="ident" id="7650318">url</span>&nbsp;<span class="op" id="7650322">=</span>&nbsp;<span class="string" id="7650324">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650335">_</span><span class="op" id="7650336">,</span>&nbsp;<span class="ident" id="7650338">err</span>&nbsp;<span class="op" id="7650342">:=</span>&nbsp;<span class="ident" id="7650345">ParseQuery</span><span class="op" id="7650355">(</span><span class="ident" id="7650356">url</span><span class="op" id="7650359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650362">errStr</span>&nbsp;<span class="op" id="7650369">:=</span>&nbsp;<span class="ident" id="7650372">fmt</span><span class="op" id="7650375">.</span><span class="ident" id="7650376">Sprint</span><span class="op" id="7650382">(</span><span class="ident" id="7650383">err</span><span class="op" id="7650386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7650389">if</span>&nbsp;<span class="op" id="7650392">!</span><span class="ident" id="7650393">strings</span><span class="op" id="7650400">.</span><span class="ident" id="7650401">Contains</span><span class="op" id="7650409">(</span><span class="ident" id="7650410">errStr</span><span class="op" id="7650416">,</span>&nbsp;<span class="string" id="7650418">&#34;%gh&#34;</span><span class="op" id="7650423">)</span>&nbsp;<span class="op" id="7650425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650429">t</span><span class="op" id="7650430">.</span><span class="ident" id="7650431">Errorf</span><span class="op" id="7650437">(</span><span class="string" id="7650438">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="7650503">,</span>&nbsp;<span class="ident" id="7650505">url</span><span class="op" id="7650508">,</span>&nbsp;<span class="ident" id="7650510">errStr</span><span class="op" id="7650516">,</span>&nbsp;<span class="string" id="7650518">&#34;%gh&#34;</span><span class="op" id="7650523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650526">}</span><br>
<span class="lineno">915</span><span class="op" id="7650528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7650531">type</span>&nbsp;<span class="ident" id="7650536">shouldEscapeTest</span>&nbsp;<span class="keyword" id="7650553">struct</span>&nbsp;<span class="op" id="7650560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650563">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7650570">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650576">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7650583">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7650593">escape</span>&nbsp;<span class="builtintype" id="7650600">bool</span><br>
<span class="lineno"></span><span class="op" id="7650605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7650608">var</span>&nbsp;<span class="ident" id="7650612">shouldEscapeTests</span>&nbsp;<span class="op" id="7650630">=</span>&nbsp;<span class="op" id="7650632">[</span><span class="op" id="7650633">]</span><span class="ident" id="7650634">shouldEscapeTest</span><span class="op" id="7650650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7650653">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650687">{</span><span class="string" id="7650688">&#39;a&#39;</span><span class="op" id="7650691">,</span>&nbsp;<span class="ident" id="7650693">encodePath</span><span class="op" id="7650703">,</span>&nbsp;<span class="ident" id="7650705">false</span><span class="op" id="7650710">}</span><span class="op" id="7650711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650714">{</span><span class="string" id="7650715">&#39;a&#39;</span><span class="op" id="7650718">,</span>&nbsp;<span class="ident" id="7650720">encodeUserPassword</span><span class="op" id="7650738">,</span>&nbsp;<span class="ident" id="7650740">false</span><span class="op" id="7650745">}</span><span class="op" id="7650746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650749">{</span><span class="string" id="7650750">&#39;a&#39;</span><span class="op" id="7650753">,</span>&nbsp;<span class="ident" id="7650755">encodeQueryComponent</span><span class="op" id="7650775">,</span>&nbsp;<span class="ident" id="7650777">false</span><span class="op" id="7650782">}</span><span class="op" id="7650783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650786">{</span><span class="string" id="7650787">&#39;a&#39;</span><span class="op" id="7650790">,</span>&nbsp;<span class="ident" id="7650792">encodeFragment</span><span class="op" id="7650806">,</span>&nbsp;<span class="ident" id="7650808">false</span><span class="op" id="7650813">}</span><span class="op" id="7650814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650817">{</span><span class="string" id="7650818">&#39;z&#39;</span><span class="op" id="7650821">,</span>&nbsp;<span class="ident" id="7650823">encodePath</span><span class="op" id="7650833">,</span>&nbsp;<span class="ident" id="7650835">false</span><span class="op" id="7650840">}</span><span class="op" id="7650841">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650844">{</span><span class="string" id="7650845">&#39;A&#39;</span><span class="op" id="7650848">,</span>&nbsp;<span class="ident" id="7650850">encodePath</span><span class="op" id="7650860">,</span>&nbsp;<span class="ident" id="7650862">false</span><span class="op" id="7650867">}</span><span class="op" id="7650868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650871">{</span><span class="string" id="7650872">&#39;Z&#39;</span><span class="op" id="7650875">,</span>&nbsp;<span class="ident" id="7650877">encodePath</span><span class="op" id="7650887">,</span>&nbsp;<span class="ident" id="7650889">false</span><span class="op" id="7650894">}</span><span class="op" id="7650895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650898">{</span><span class="string" id="7650899">&#39;0&#39;</span><span class="op" id="7650902">,</span>&nbsp;<span class="ident" id="7650904">encodePath</span><span class="op" id="7650914">,</span>&nbsp;<span class="ident" id="7650916">false</span><span class="op" id="7650921">}</span><span class="op" id="7650922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650925">{</span><span class="string" id="7650926">&#39;9&#39;</span><span class="op" id="7650929">,</span>&nbsp;<span class="ident" id="7650931">encodePath</span><span class="op" id="7650941">,</span>&nbsp;<span class="ident" id="7650943">false</span><span class="op" id="7650948">}</span><span class="op" id="7650949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650952">{</span><span class="string" id="7650953">&#39;-&#39;</span><span class="op" id="7650956">,</span>&nbsp;<span class="ident" id="7650958">encodePath</span><span class="op" id="7650968">,</span>&nbsp;<span class="ident" id="7650970">false</span><span class="op" id="7650975">}</span><span class="op" id="7650976">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7650979">{</span><span class="string" id="7650980">&#39;-&#39;</span><span class="op" id="7650983">,</span>&nbsp;<span class="ident" id="7650985">encodeUserPassword</span><span class="op" id="7651003">,</span>&nbsp;<span class="ident" id="7651005">false</span><span class="op" id="7651010">}</span><span class="op" id="7651011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651014">{</span><span class="string" id="7651015">&#39;-&#39;</span><span class="op" id="7651018">,</span>&nbsp;<span class="ident" id="7651020">encodeQueryComponent</span><span class="op" id="7651040">,</span>&nbsp;<span class="ident" id="7651042">false</span><span class="op" id="7651047">}</span><span class="op" id="7651048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651051">{</span><span class="string" id="7651052">&#39;-&#39;</span><span class="op" id="7651055">,</span>&nbsp;<span class="ident" id="7651057">encodeFragment</span><span class="op" id="7651071">,</span>&nbsp;<span class="ident" id="7651073">false</span><span class="op" id="7651078">}</span><span class="op" id="7651079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651082">{</span><span class="string" id="7651083">&#39;.&#39;</span><span class="op" id="7651086">,</span>&nbsp;<span class="ident" id="7651088">encodePath</span><span class="op" id="7651098">,</span>&nbsp;<span class="ident" id="7651100">false</span><span class="op" id="7651105">}</span><span class="op" id="7651106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651109">{</span><span class="string" id="7651110">&#39;_&#39;</span><span class="op" id="7651113">,</span>&nbsp;<span class="ident" id="7651115">encodePath</span><span class="op" id="7651125">,</span>&nbsp;<span class="ident" id="7651127">false</span><span class="op" id="7651132">}</span><span class="op" id="7651133">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651136">{</span><span class="string" id="7651137">&#39;~&#39;</span><span class="op" id="7651140">,</span>&nbsp;<span class="ident" id="7651142">encodePath</span><span class="op" id="7651152">,</span>&nbsp;<span class="ident" id="7651154">false</span><span class="op" id="7651159">}</span><span class="op" id="7651160">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7651164">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651195">{</span><span class="string" id="7651196">&#39;:&#39;</span><span class="op" id="7651199">,</span>&nbsp;<span class="ident" id="7651201">encodeUserPassword</span><span class="op" id="7651219">,</span>&nbsp;<span class="ident" id="7651221">true</span><span class="op" id="7651225">}</span><span class="op" id="7651226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651229">{</span><span class="string" id="7651230">&#39;/&#39;</span><span class="op" id="7651233">,</span>&nbsp;<span class="ident" id="7651235">encodeUserPassword</span><span class="op" id="7651253">,</span>&nbsp;<span class="ident" id="7651255">true</span><span class="op" id="7651259">}</span><span class="op" id="7651260">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651263">{</span><span class="string" id="7651264">&#39;?&#39;</span><span class="op" id="7651267">,</span>&nbsp;<span class="ident" id="7651269">encodeUserPassword</span><span class="op" id="7651287">,</span>&nbsp;<span class="ident" id="7651289">true</span><span class="op" id="7651293">}</span><span class="op" id="7651294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651297">{</span><span class="string" id="7651298">&#39;@&#39;</span><span class="op" id="7651301">,</span>&nbsp;<span class="ident" id="7651303">encodeUserPassword</span><span class="op" id="7651321">,</span>&nbsp;<span class="ident" id="7651323">true</span><span class="op" id="7651327">}</span><span class="op" id="7651328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651331">{</span><span class="string" id="7651332">&#39;$&#39;</span><span class="op" id="7651335">,</span>&nbsp;<span class="ident" id="7651337">encodeUserPassword</span><span class="op" id="7651355">,</span>&nbsp;<span class="ident" id="7651357">false</span><span class="op" id="7651362">}</span><span class="op" id="7651363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651366">{</span><span class="string" id="7651367">&#39;&amp;&#39;</span><span class="op" id="7651370">,</span>&nbsp;<span class="ident" id="7651372">encodeUserPassword</span><span class="op" id="7651390">,</span>&nbsp;<span class="ident" id="7651392">false</span><span class="op" id="7651397">}</span><span class="op" id="7651398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651401">{</span><span class="string" id="7651402">&#39;+&#39;</span><span class="op" id="7651405">,</span>&nbsp;<span class="ident" id="7651407">encodeUserPassword</span><span class="op" id="7651425">,</span>&nbsp;<span class="ident" id="7651427">false</span><span class="op" id="7651432">}</span><span class="op" id="7651433">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651436">{</span><span class="string" id="7651437">&#39;,&#39;</span><span class="op" id="7651440">,</span>&nbsp;<span class="ident" id="7651442">encodeUserPassword</span><span class="op" id="7651460">,</span>&nbsp;<span class="ident" id="7651462">false</span><span class="op" id="7651467">}</span><span class="op" id="7651468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651471">{</span><span class="string" id="7651472">&#39;;&#39;</span><span class="op" id="7651475">,</span>&nbsp;<span class="ident" id="7651477">encodeUserPassword</span><span class="op" id="7651495">,</span>&nbsp;<span class="ident" id="7651497">false</span><span class="op" id="7651502">}</span><span class="op" id="7651503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651506">{</span><span class="string" id="7651507">&#39;=&#39;</span><span class="op" id="7651510">,</span>&nbsp;<span class="ident" id="7651512">encodeUserPassword</span><span class="op" id="7651530">,</span>&nbsp;<span class="ident" id="7651532">false</span><span class="op" id="7651537">}</span><span class="op" id="7651538">,</span><br>
<span class="lineno"></span><span class="op" id="7651540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="7651543">func</span>&nbsp;<span class="ident" id="7651548">TestShouldEscape</span><span class="op" id="7651564">(</span><span class="ident" id="7651565">t</span>&nbsp;<span class="op" id="7651567">*</span><span class="ident" id="7651568">testing</span><span class="op" id="7651575">.</span><span class="ident" id="7651576">T</span><span class="op" id="7651577">)</span>&nbsp;<span class="op" id="7651579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7651582">for</span>&nbsp;<span class="ident" id="7651586">_</span><span class="op" id="7651587">,</span>&nbsp;<span class="ident" id="7651589">tt</span>&nbsp;<span class="op" id="7651592">:=</span>&nbsp;<span class="keyword" id="7651595">range</span>&nbsp;<span class="ident" id="7651601">shouldEscapeTests</span>&nbsp;<span class="op" id="7651619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7651623">if</span>&nbsp;<span class="ident" id="7651626">shouldEscape</span><span class="op" id="7651638">(</span><span class="ident" id="7651639">tt</span><span class="op" id="7651641">.</span><span class="ident" id="7651642">in</span><span class="op" id="7651644">,</span>&nbsp;<span class="ident" id="7651646">tt</span><span class="op" id="7651648">.</span><span class="ident" id="7651649">mode</span><span class="op" id="7651653">)</span>&nbsp;<span class="op" id="7651655">!=</span>&nbsp;<span class="ident" id="7651658">tt</span><span class="op" id="7651660">.</span><span class="ident" id="7651661">escape</span>&nbsp;<span class="op" id="7651668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7651673">t</span><span class="op" id="7651674">.</span><span class="ident" id="7651675">Errorf</span><span class="op" id="7651681">(</span><span class="string" id="7651682">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7651729">,</span>&nbsp;<span class="ident" id="7651731">tt</span><span class="op" id="7651733">.</span><span class="ident" id="7651734">in</span><span class="op" id="7651736">,</span>&nbsp;<span class="ident" id="7651738">tt</span><span class="op" id="7651740">.</span><span class="ident" id="7651741">mode</span><span class="op" id="7651745">,</span>&nbsp;<span class="op" id="7651747">!</span><span class="ident" id="7651748">tt</span><span class="op" id="7651750">.</span><span class="ident" id="7651751">escape</span><span class="op" id="7651757">,</span>&nbsp;<span class="ident" id="7651759">tt</span><span class="op" id="7651761">.</span><span class="ident" id="7651762">escape</span><span class="op" id="7651768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651772">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7651775">}</span><br>
<span class="lineno"></span><span class="op" id="7651777">}</span>
</div>
</body>
</html>
