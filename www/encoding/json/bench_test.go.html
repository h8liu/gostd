<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8593347">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8593403">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8593457">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8593508">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="8593533">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8593587">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="8593637">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="8593686">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8593721">package</span>&nbsp;<span class="ident" id="8593729">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8593735">import</span>&nbsp;<span class="op" id="8593742">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8593745">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8593754">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8593771">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8593784">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8593790">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8593800">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8593803">type</span>&nbsp;<span class="ident" id="8593808">codeResponse</span>&nbsp;<span class="keyword" id="8593821">struct</span>&nbsp;<span class="op" id="8593828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593831">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8593840">*</span><span class="ident" id="8593841">codeNode</span>&nbsp;<span class="string" id="8593850">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593865">Username</span>&nbsp;<span class="builtintype" id="8593874">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8593884">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8593902">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8593905">type</span>&nbsp;<span class="ident" id="8593910">codeNode</span>&nbsp;<span class="keyword" id="8593919">struct</span>&nbsp;<span class="op" id="8593926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593929">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8593938">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8593950">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593965">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8593974">[</span><span class="op" id="8593975">]</span><span class="op" id="8593976">*</span><span class="ident" id="8593977">codeNode</span>&nbsp;<span class="string" id="8593986">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594001">CLWeight</span>&nbsp;<span class="builtintype" id="8594010">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8594022">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594042">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="8594051">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8594063">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594081">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8594090">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8594102">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594118">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8594127">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8594139">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594155">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8594164">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8594176">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8594192">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8594195">var</span>&nbsp;<span class="ident" id="8594199">codeJSON</span>&nbsp;<span class="op" id="8594208">[</span><span class="op" id="8594209">]</span><span class="builtintype" id="8594210">byte</span><br>
<span class="lineno"></span><span class="keyword" id="8594215">var</span>&nbsp;<span class="ident" id="8594219">codeStruct</span>&nbsp;<span class="ident" id="8594230">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8594244">func</span>&nbsp;<span class="ident" id="8594249">codeInit</span><span class="op" id="8594257">(</span><span class="op" id="8594258">)</span>&nbsp;<span class="op" id="8594260">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594263">f</span><span class="op" id="8594264">,</span>&nbsp;<span class="ident" id="8594266">err</span>&nbsp;<span class="op" id="8594270">:=</span>&nbsp;<span class="ident" id="8594273">os</span><span class="op" id="8594275">.</span><span class="ident" id="8594276">Open</span><span class="op" id="8594280">(</span><span class="string" id="8594281">&#34;testdata/code.json.gz&#34;</span><span class="op" id="8594304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594307">if</span>&nbsp;<span class="ident" id="8594310">err</span>&nbsp;<span class="op" id="8594314">!=</span>&nbsp;<span class="ident" id="8594317">nil</span>&nbsp;<span class="op" id="8594321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594325">panic</span><span class="op" id="8594330">(</span><span class="ident" id="8594331">err</span><span class="op" id="8594334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8594337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594340">defer</span>&nbsp;<span class="ident" id="8594346">f</span><span class="op" id="8594347">.</span><span class="ident" id="8594348">Close</span><span class="op" id="8594353">(</span><span class="op" id="8594354">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594357">gz</span><span class="op" id="8594359">,</span>&nbsp;<span class="ident" id="8594361">err</span>&nbsp;<span class="op" id="8594365">:=</span>&nbsp;<span class="ident" id="8594368">gzip</span><span class="op" id="8594372">.</span><span class="ident" id="8594373">NewReader</span><span class="op" id="8594382">(</span><span class="ident" id="8594383">f</span><span class="op" id="8594384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594387">if</span>&nbsp;<span class="ident" id="8594390">err</span>&nbsp;<span class="op" id="8594394">!=</span>&nbsp;<span class="ident" id="8594397">nil</span>&nbsp;<span class="op" id="8594401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594405">panic</span><span class="op" id="8594410">(</span><span class="ident" id="8594411">err</span><span class="op" id="8594414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8594417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594420">data</span><span class="op" id="8594424">,</span>&nbsp;<span class="ident" id="8594426">err</span>&nbsp;<span class="op" id="8594430">:=</span>&nbsp;<span class="ident" id="8594433">ioutil</span><span class="op" id="8594439">.</span><span class="ident" id="8594440">ReadAll</span><span class="op" id="8594447">(</span><span class="ident" id="8594448">gz</span><span class="op" id="8594450">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594453">if</span>&nbsp;<span class="ident" id="8594456">err</span>&nbsp;<span class="op" id="8594460">!=</span>&nbsp;<span class="ident" id="8594463">nil</span>&nbsp;<span class="op" id="8594467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594471">panic</span><span class="op" id="8594476">(</span><span class="ident" id="8594477">err</span><span class="op" id="8594480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8594483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8594487">codeJSON</span>&nbsp;<span class="op" id="8594496">=</span>&nbsp;<span class="ident" id="8594498">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594505">if</span>&nbsp;<span class="ident" id="8594508">err</span>&nbsp;<span class="op" id="8594512">:=</span>&nbsp;<span class="ident" id="8594515">Unmarshal</span><span class="op" id="8594524">(</span><span class="ident" id="8594525">codeJSON</span><span class="op" id="8594533">,</span>&nbsp;<span class="op" id="8594535">&amp;</span><span class="ident" id="8594536">codeStruct</span><span class="op" id="8594546">)</span><span class="op" id="8594547">;</span>&nbsp;<span class="ident" id="8594549">err</span>&nbsp;<span class="op" id="8594553">!=</span>&nbsp;<span class="ident" id="8594556">nil</span>&nbsp;<span class="op" id="8594560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594564">panic</span><span class="op" id="8594569">(</span><span class="string" id="8594570">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8594594">+</span>&nbsp;<span class="ident" id="8594596">err</span><span class="op" id="8594599">.</span><span class="ident" id="8594600">Error</span><span class="op" id="8594605">(</span><span class="op" id="8594606">)</span><span class="op" id="8594607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8594610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594614">if</span>&nbsp;<span class="ident" id="8594617">data</span><span class="op" id="8594621">,</span>&nbsp;<span class="ident" id="8594623">err</span>&nbsp;<span class="op" id="8594627">=</span>&nbsp;<span class="ident" id="8594629">Marshal</span><span class="op" id="8594636">(</span><span class="op" id="8594637">&amp;</span><span class="ident" id="8594638">codeStruct</span><span class="op" id="8594648">)</span><span class="op" id="8594649">;</span>&nbsp;<span class="ident" id="8594651">err</span>&nbsp;<span class="op" id="8594655">!=</span>&nbsp;<span class="ident" id="8594658">nil</span>&nbsp;<span class="op" id="8594662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594666">panic</span><span class="op" id="8594671">(</span><span class="string" id="8594672">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8594694">+</span>&nbsp;<span class="ident" id="8594696">err</span><span class="op" id="8594699">.</span><span class="ident" id="8594700">Error</span><span class="op" id="8594705">(</span><span class="op" id="8594706">)</span><span class="op" id="8594707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8594710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594714">if</span>&nbsp;<span class="op" id="8594717">!</span><span class="ident" id="8594718">bytes</span><span class="op" id="8594723">.</span><span class="ident" id="8594724">Equal</span><span class="op" id="8594729">(</span><span class="ident" id="8594730">data</span><span class="op" id="8594734">,</span>&nbsp;<span class="ident" id="8594736">codeJSON</span><span class="op" id="8594744">)</span>&nbsp;<span class="op" id="8594746">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594750">println</span><span class="op" id="8594757">(</span><span class="string" id="8594758">&#34;different&nbsp;lengths&#34;</span><span class="op" id="8594777">,</span>&nbsp;<span class="builtinfunc" id="8594779">len</span><span class="op" id="8594782">(</span><span class="ident" id="8594783">data</span><span class="op" id="8594787">)</span><span class="op" id="8594788">,</span>&nbsp;<span class="builtinfunc" id="8594790">len</span><span class="op" id="8594793">(</span><span class="ident" id="8594794">codeJSON</span><span class="op" id="8594802">)</span><span class="op" id="8594803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594807">for</span>&nbsp;<span class="ident" id="8594811">i</span>&nbsp;<span class="op" id="8594813">:=</span>&nbsp;<span class="num" id="8594816">0</span><span class="op" id="8594817">;</span>&nbsp;<span class="ident" id="8594819">i</span>&nbsp;<span class="op" id="8594821">&lt;</span>&nbsp;<span class="builtinfunc" id="8594823">len</span><span class="op" id="8594826">(</span><span class="ident" id="8594827">data</span><span class="op" id="8594831">)</span>&nbsp;<span class="op" id="8594833">&amp;&amp;</span>&nbsp;<span class="ident" id="8594836">i</span>&nbsp;<span class="op" id="8594838">&lt;</span>&nbsp;<span class="builtinfunc" id="8594840">len</span><span class="op" id="8594843">(</span><span class="ident" id="8594844">codeJSON</span><span class="op" id="8594852">)</span><span class="op" id="8594853">;</span>&nbsp;<span class="ident" id="8594855">i</span><span class="op" id="8594856">++</span>&nbsp;<span class="op" id="8594859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8594864">if</span>&nbsp;<span class="ident" id="8594867">data</span><span class="op" id="8594871">[</span><span class="ident" id="8594872">i</span><span class="op" id="8594873">]</span>&nbsp;<span class="op" id="8594875">!=</span>&nbsp;<span class="ident" id="8594878">codeJSON</span><span class="op" id="8594886">[</span><span class="ident" id="8594887">i</span><span class="op" id="8594888">]</span>&nbsp;<span class="op" id="8594890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594896">println</span><span class="op" id="8594903">(</span><span class="string" id="8594904">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="8594933">,</span>&nbsp;<span class="ident" id="8594935">i</span><span class="op" id="8594936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594942">println</span><span class="op" id="8594949">(</span><span class="string" id="8594950">&#34;orig:&nbsp;&#34;</span><span class="op" id="8594958">,</span>&nbsp;<span class="builtintype" id="8594960">string</span><span class="op" id="8594966">(</span><span class="ident" id="8594967">codeJSON</span><span class="op" id="8594975">[</span><span class="ident" id="8594976">i</span><span class="op" id="8594977">-</span><span class="num" id="8594978">10</span><span class="op" id="8594980">:</span><span class="ident" id="8594981">i</span><span class="op" id="8594982">+</span><span class="num" id="8594983">10</span><span class="op" id="8594985">]</span><span class="op" id="8594986">)</span><span class="op" id="8594987">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8594993">println</span><span class="op" id="8595000">(</span><span class="string" id="8595001">&#34;new:&nbsp;&#34;</span><span class="op" id="8595008">,</span>&nbsp;<span class="builtintype" id="8595010">string</span><span class="op" id="8595016">(</span><span class="ident" id="8595017">data</span><span class="op" id="8595021">[</span><span class="ident" id="8595022">i</span><span class="op" id="8595023">-</span><span class="num" id="8595024">10</span><span class="op" id="8595026">:</span><span class="ident" id="8595027">i</span><span class="op" id="8595028">+</span><span class="num" id="8595029">10</span><span class="op" id="8595031">]</span><span class="op" id="8595032">)</span><span class="op" id="8595033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595039">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8595056">panic</span><span class="op" id="8595061">(</span><span class="string" id="8595062">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="8595102">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595105">}</span><br>
<span class="lineno"></span><span class="op" id="8595107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8595110">func</span>&nbsp;<span class="ident" id="8595115">BenchmarkCodeEncoder</span><span class="op" id="8595135">(</span><span class="ident" id="8595136">b</span>&nbsp;<span class="op" id="8595138">*</span><span class="ident" id="8595139">testing</span><span class="op" id="8595146">.</span><span class="ident" id="8595147">B</span><span class="op" id="8595148">)</span>&nbsp;<span class="op" id="8595150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595153">if</span>&nbsp;<span class="ident" id="8595156">codeJSON</span>&nbsp;<span class="op" id="8595165">==</span>&nbsp;<span class="ident" id="8595168">nil</span>&nbsp;<span class="op" id="8595172">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595176">b</span><span class="op" id="8595177">.</span><span class="ident" id="8595178">StopTimer</span><span class="op" id="8595187">(</span><span class="op" id="8595188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595192">codeInit</span><span class="op" id="8595200">(</span><span class="op" id="8595201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595205">b</span><span class="op" id="8595206">.</span><span class="ident" id="8595207">StartTimer</span><span class="op" id="8595217">(</span><span class="op" id="8595218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595224">enc</span>&nbsp;<span class="op" id="8595228">:=</span>&nbsp;<span class="ident" id="8595231">NewEncoder</span><span class="op" id="8595241">(</span><span class="ident" id="8595242">ioutil</span><span class="op" id="8595248">.</span><span class="ident" id="8595249">Discard</span><span class="op" id="8595256">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595259">for</span>&nbsp;<span class="ident" id="8595263">i</span>&nbsp;<span class="op" id="8595265">:=</span>&nbsp;<span class="num" id="8595268">0</span><span class="op" id="8595269">;</span>&nbsp;<span class="ident" id="8595271">i</span>&nbsp;<span class="op" id="8595273">&lt;</span>&nbsp;<span class="ident" id="8595275">b</span><span class="op" id="8595276">.</span><span class="ident" id="8595277">N</span><span class="op" id="8595278">;</span>&nbsp;<span class="ident" id="8595280">i</span><span class="op" id="8595281">++</span>&nbsp;<span class="op" id="8595284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595288">if</span>&nbsp;<span class="ident" id="8595291">err</span>&nbsp;<span class="op" id="8595295">:=</span>&nbsp;<span class="ident" id="8595298">enc</span><span class="op" id="8595301">.</span><span class="ident" id="8595302">Encode</span><span class="op" id="8595308">(</span><span class="op" id="8595309">&amp;</span><span class="ident" id="8595310">codeStruct</span><span class="op" id="8595320">)</span><span class="op" id="8595321">;</span>&nbsp;<span class="ident" id="8595323">err</span>&nbsp;<span class="op" id="8595327">!=</span>&nbsp;<span class="ident" id="8595330">nil</span>&nbsp;<span class="op" id="8595334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595339">b</span><span class="op" id="8595340">.</span><span class="ident" id="8595341">Fatal</span><span class="op" id="8595346">(</span><span class="string" id="8595347">&#34;Encode:&#34;</span><span class="op" id="8595356">,</span>&nbsp;<span class="ident" id="8595358">err</span><span class="op" id="8595361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595368">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595371">b</span><span class="op" id="8595372">.</span><span class="ident" id="8595373">SetBytes</span><span class="op" id="8595381">(</span><span class="ident" id="8595382">int64</span><span class="op" id="8595387">(</span><span class="builtinfunc" id="8595388">len</span><span class="op" id="8595391">(</span><span class="ident" id="8595392">codeJSON</span><span class="op" id="8595400">)</span><span class="op" id="8595401">)</span><span class="op" id="8595402">)</span><br>
<span class="lineno"></span><span class="op" id="8595404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8595407">func</span>&nbsp;<span class="ident" id="8595412">BenchmarkCodeMarshal</span><span class="op" id="8595432">(</span><span class="ident" id="8595433">b</span>&nbsp;<span class="op" id="8595435">*</span><span class="ident" id="8595436">testing</span><span class="op" id="8595443">.</span><span class="ident" id="8595444">B</span><span class="op" id="8595445">)</span>&nbsp;<span class="op" id="8595447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595450">if</span>&nbsp;<span class="ident" id="8595453">codeJSON</span>&nbsp;<span class="op" id="8595462">==</span>&nbsp;<span class="ident" id="8595465">nil</span>&nbsp;<span class="op" id="8595469">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595473">b</span><span class="op" id="8595474">.</span><span class="ident" id="8595475">StopTimer</span><span class="op" id="8595484">(</span><span class="op" id="8595485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595489">codeInit</span><span class="op" id="8595497">(</span><span class="op" id="8595498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595502">b</span><span class="op" id="8595503">.</span><span class="ident" id="8595504">StartTimer</span><span class="op" id="8595514">(</span><span class="op" id="8595515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595521">for</span>&nbsp;<span class="ident" id="8595525">i</span>&nbsp;<span class="op" id="8595527">:=</span>&nbsp;<span class="num" id="8595530">0</span><span class="op" id="8595531">;</span>&nbsp;<span class="ident" id="8595533">i</span>&nbsp;<span class="op" id="8595535">&lt;</span>&nbsp;<span class="ident" id="8595537">b</span><span class="op" id="8595538">.</span><span class="ident" id="8595539">N</span><span class="op" id="8595540">;</span>&nbsp;<span class="ident" id="8595542">i</span><span class="op" id="8595543">++</span>&nbsp;<span class="op" id="8595546">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595550">if</span>&nbsp;<span class="ident" id="8595553">_</span><span class="op" id="8595554">,</span>&nbsp;<span class="ident" id="8595556">err</span>&nbsp;<span class="op" id="8595560">:=</span>&nbsp;<span class="ident" id="8595563">Marshal</span><span class="op" id="8595570">(</span><span class="op" id="8595571">&amp;</span><span class="ident" id="8595572">codeStruct</span><span class="op" id="8595582">)</span><span class="op" id="8595583">;</span>&nbsp;<span class="ident" id="8595585">err</span>&nbsp;<span class="op" id="8595589">!=</span>&nbsp;<span class="ident" id="8595592">nil</span>&nbsp;<span class="op" id="8595596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595601">b</span><span class="op" id="8595602">.</span><span class="ident" id="8595603">Fatal</span><span class="op" id="8595608">(</span><span class="string" id="8595609">&#34;Marshal:&#34;</span><span class="op" id="8595619">,</span>&nbsp;<span class="ident" id="8595621">err</span><span class="op" id="8595624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595634">b</span><span class="op" id="8595635">.</span><span class="ident" id="8595636">SetBytes</span><span class="op" id="8595644">(</span><span class="ident" id="8595645">int64</span><span class="op" id="8595650">(</span><span class="builtinfunc" id="8595651">len</span><span class="op" id="8595654">(</span><span class="ident" id="8595655">codeJSON</span><span class="op" id="8595663">)</span><span class="op" id="8595664">)</span><span class="op" id="8595665">)</span><br>
<span class="lineno">105</span><span class="op" id="8595667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8595670">func</span>&nbsp;<span class="ident" id="8595675">BenchmarkCodeDecoder</span><span class="op" id="8595695">(</span><span class="ident" id="8595696">b</span>&nbsp;<span class="op" id="8595698">*</span><span class="ident" id="8595699">testing</span><span class="op" id="8595706">.</span><span class="ident" id="8595707">B</span><span class="op" id="8595708">)</span>&nbsp;<span class="op" id="8595710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595713">if</span>&nbsp;<span class="ident" id="8595716">codeJSON</span>&nbsp;<span class="op" id="8595725">==</span>&nbsp;<span class="ident" id="8595728">nil</span>&nbsp;<span class="op" id="8595732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595736">b</span><span class="op" id="8595737">.</span><span class="ident" id="8595738">StopTimer</span><span class="op" id="8595747">(</span><span class="op" id="8595748">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595752">codeInit</span><span class="op" id="8595760">(</span><span class="op" id="8595761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595765">b</span><span class="op" id="8595766">.</span><span class="ident" id="8595767">StartTimer</span><span class="op" id="8595777">(</span><span class="op" id="8595778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8595781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595784">var</span>&nbsp;<span class="ident" id="8595788">buf</span>&nbsp;<span class="ident" id="8595792">bytes</span><span class="op" id="8595797">.</span><span class="ident" id="8595798">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595806">dec</span>&nbsp;<span class="op" id="8595810">:=</span>&nbsp;<span class="ident" id="8595813">NewDecoder</span><span class="op" id="8595823">(</span><span class="op" id="8595824">&amp;</span><span class="ident" id="8595825">buf</span><span class="op" id="8595828">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595831">var</span>&nbsp;<span class="ident" id="8595835">r</span>&nbsp;<span class="ident" id="8595837">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595851">for</span>&nbsp;<span class="ident" id="8595855">i</span>&nbsp;<span class="op" id="8595857">:=</span>&nbsp;<span class="num" id="8595860">0</span><span class="op" id="8595861">;</span>&nbsp;<span class="ident" id="8595863">i</span>&nbsp;<span class="op" id="8595865">&lt;</span>&nbsp;<span class="ident" id="8595867">b</span><span class="op" id="8595868">.</span><span class="ident" id="8595869">N</span><span class="op" id="8595870">;</span>&nbsp;<span class="ident" id="8595872">i</span><span class="op" id="8595873">++</span>&nbsp;<span class="op" id="8595876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595880">buf</span><span class="op" id="8595883">.</span><span class="ident" id="8595884">Write</span><span class="op" id="8595889">(</span><span class="ident" id="8595890">codeJSON</span><span class="op" id="8595898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8595902">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595916">buf</span><span class="op" id="8595919">.</span><span class="ident" id="8595920">WriteByte</span><span class="op" id="8595929">(</span><span class="string" id="8595930">&#39;\n&#39;</span><span class="op" id="8595934">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595938">buf</span><span class="op" id="8595941">.</span><span class="ident" id="8595942">WriteByte</span><span class="op" id="8595951">(</span><span class="string" id="8595952">&#39;\n&#39;</span><span class="op" id="8595956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8595960">buf</span><span class="op" id="8595963">.</span><span class="ident" id="8595964">WriteByte</span><span class="op" id="8595973">(</span><span class="string" id="8595974">&#39;\n&#39;</span><span class="op" id="8595978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8595982">if</span>&nbsp;<span class="ident" id="8595985">err</span>&nbsp;<span class="op" id="8595989">:=</span>&nbsp;<span class="ident" id="8595992">dec</span><span class="op" id="8595995">.</span><span class="ident" id="8595996">Decode</span><span class="op" id="8596002">(</span><span class="op" id="8596003">&amp;</span><span class="ident" id="8596004">r</span><span class="op" id="8596005">)</span><span class="op" id="8596006">;</span>&nbsp;<span class="ident" id="8596008">err</span>&nbsp;<span class="op" id="8596012">!=</span>&nbsp;<span class="ident" id="8596015">nil</span>&nbsp;<span class="op" id="8596019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596024">b</span><span class="op" id="8596025">.</span><span class="ident" id="8596026">Fatal</span><span class="op" id="8596031">(</span><span class="string" id="8596032">&#34;Decode:&#34;</span><span class="op" id="8596041">,</span>&nbsp;<span class="ident" id="8596043">err</span><span class="op" id="8596046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596050">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596056">b</span><span class="op" id="8596057">.</span><span class="ident" id="8596058">SetBytes</span><span class="op" id="8596066">(</span><span class="ident" id="8596067">int64</span><span class="op" id="8596072">(</span><span class="builtinfunc" id="8596073">len</span><span class="op" id="8596076">(</span><span class="ident" id="8596077">codeJSON</span><span class="op" id="8596085">)</span><span class="op" id="8596086">)</span><span class="op" id="8596087">)</span><br>
<span class="lineno"></span><span class="op" id="8596089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8596092">func</span>&nbsp;<span class="ident" id="8596097">BenchmarkCodeUnmarshal</span><span class="op" id="8596119">(</span><span class="ident" id="8596120">b</span>&nbsp;<span class="op" id="8596122">*</span><span class="ident" id="8596123">testing</span><span class="op" id="8596130">.</span><span class="ident" id="8596131">B</span><span class="op" id="8596132">)</span>&nbsp;<span class="op" id="8596134">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596137">if</span>&nbsp;<span class="ident" id="8596140">codeJSON</span>&nbsp;<span class="op" id="8596149">==</span>&nbsp;<span class="ident" id="8596152">nil</span>&nbsp;<span class="op" id="8596156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596160">b</span><span class="op" id="8596161">.</span><span class="ident" id="8596162">StopTimer</span><span class="op" id="8596171">(</span><span class="op" id="8596172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596176">codeInit</span><span class="op" id="8596184">(</span><span class="op" id="8596185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596189">b</span><span class="op" id="8596190">.</span><span class="ident" id="8596191">StartTimer</span><span class="op" id="8596201">(</span><span class="op" id="8596202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596205">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596208">for</span>&nbsp;<span class="ident" id="8596212">i</span>&nbsp;<span class="op" id="8596214">:=</span>&nbsp;<span class="num" id="8596217">0</span><span class="op" id="8596218">;</span>&nbsp;<span class="ident" id="8596220">i</span>&nbsp;<span class="op" id="8596222">&lt;</span>&nbsp;<span class="ident" id="8596224">b</span><span class="op" id="8596225">.</span><span class="ident" id="8596226">N</span><span class="op" id="8596227">;</span>&nbsp;<span class="ident" id="8596229">i</span><span class="op" id="8596230">++</span>&nbsp;<span class="op" id="8596233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596237">var</span>&nbsp;<span class="ident" id="8596241">r</span>&nbsp;<span class="ident" id="8596243">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596258">if</span>&nbsp;<span class="ident" id="8596261">err</span>&nbsp;<span class="op" id="8596265">:=</span>&nbsp;<span class="ident" id="8596268">Unmarshal</span><span class="op" id="8596277">(</span><span class="ident" id="8596278">codeJSON</span><span class="op" id="8596286">,</span>&nbsp;<span class="op" id="8596288">&amp;</span><span class="ident" id="8596289">r</span><span class="op" id="8596290">)</span><span class="op" id="8596291">;</span>&nbsp;<span class="ident" id="8596293">err</span>&nbsp;<span class="op" id="8596297">!=</span>&nbsp;<span class="ident" id="8596300">nil</span>&nbsp;<span class="op" id="8596304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596309">b</span><span class="op" id="8596310">.</span><span class="ident" id="8596311">Fatal</span><span class="op" id="8596316">(</span><span class="string" id="8596317">&#34;Unmmarshal:&#34;</span><span class="op" id="8596330">,</span>&nbsp;<span class="ident" id="8596332">err</span><span class="op" id="8596335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596339">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596345">b</span><span class="op" id="8596346">.</span><span class="ident" id="8596347">SetBytes</span><span class="op" id="8596355">(</span><span class="ident" id="8596356">int64</span><span class="op" id="8596361">(</span><span class="builtinfunc" id="8596362">len</span><span class="op" id="8596365">(</span><span class="ident" id="8596366">codeJSON</span><span class="op" id="8596374">)</span><span class="op" id="8596375">)</span><span class="op" id="8596376">)</span><br>
<span class="lineno"></span><span class="op" id="8596378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8596381">func</span>&nbsp;<span class="ident" id="8596386">BenchmarkCodeUnmarshalReuse</span><span class="op" id="8596413">(</span><span class="ident" id="8596414">b</span>&nbsp;<span class="op" id="8596416">*</span><span class="ident" id="8596417">testing</span><span class="op" id="8596424">.</span><span class="ident" id="8596425">B</span><span class="op" id="8596426">)</span>&nbsp;<span class="op" id="8596428">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596431">if</span>&nbsp;<span class="ident" id="8596434">codeJSON</span>&nbsp;<span class="op" id="8596443">==</span>&nbsp;<span class="ident" id="8596446">nil</span>&nbsp;<span class="op" id="8596450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596454">b</span><span class="op" id="8596455">.</span><span class="ident" id="8596456">StopTimer</span><span class="op" id="8596465">(</span><span class="op" id="8596466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596470">codeInit</span><span class="op" id="8596478">(</span><span class="op" id="8596479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596483">b</span><span class="op" id="8596484">.</span><span class="ident" id="8596485">StartTimer</span><span class="op" id="8596495">(</span><span class="op" id="8596496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596499">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596502">var</span>&nbsp;<span class="ident" id="8596506">r</span>&nbsp;<span class="ident" id="8596508">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596522">for</span>&nbsp;<span class="ident" id="8596526">i</span>&nbsp;<span class="op" id="8596528">:=</span>&nbsp;<span class="num" id="8596531">0</span><span class="op" id="8596532">;</span>&nbsp;<span class="ident" id="8596534">i</span>&nbsp;<span class="op" id="8596536">&lt;</span>&nbsp;<span class="ident" id="8596538">b</span><span class="op" id="8596539">.</span><span class="ident" id="8596540">N</span><span class="op" id="8596541">;</span>&nbsp;<span class="ident" id="8596543">i</span><span class="op" id="8596544">++</span>&nbsp;<span class="op" id="8596547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596551">if</span>&nbsp;<span class="ident" id="8596554">err</span>&nbsp;<span class="op" id="8596558">:=</span>&nbsp;<span class="ident" id="8596561">Unmarshal</span><span class="op" id="8596570">(</span><span class="ident" id="8596571">codeJSON</span><span class="op" id="8596579">,</span>&nbsp;<span class="op" id="8596581">&amp;</span><span class="ident" id="8596582">r</span><span class="op" id="8596583">)</span><span class="op" id="8596584">;</span>&nbsp;<span class="ident" id="8596586">err</span>&nbsp;<span class="op" id="8596590">!=</span>&nbsp;<span class="ident" id="8596593">nil</span>&nbsp;<span class="op" id="8596597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596602">b</span><span class="op" id="8596603">.</span><span class="ident" id="8596604">Fatal</span><span class="op" id="8596609">(</span><span class="string" id="8596610">&#34;Unmmarshal:&#34;</span><span class="op" id="8596623">,</span>&nbsp;<span class="ident" id="8596625">err</span><span class="op" id="8596628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596632">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596635">}</span><br>
<span class="lineno"></span><span class="op" id="8596637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8596640">func</span>&nbsp;<span class="ident" id="8596645">BenchmarkUnmarshalString</span><span class="op" id="8596669">(</span><span class="ident" id="8596670">b</span>&nbsp;<span class="op" id="8596672">*</span><span class="ident" id="8596673">testing</span><span class="op" id="8596680">.</span><span class="ident" id="8596681">B</span><span class="op" id="8596682">)</span>&nbsp;<span class="op" id="8596684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596687">data</span>&nbsp;<span class="op" id="8596692">:=</span>&nbsp;<span class="op" id="8596695">[</span><span class="op" id="8596696">]</span><span class="builtintype" id="8596697">byte</span><span class="op" id="8596701">(</span><span class="string" id="8596702">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="8596718">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596721">var</span>&nbsp;<span class="ident" id="8596725">s</span>&nbsp;<span class="builtintype" id="8596727">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596736">for</span>&nbsp;<span class="ident" id="8596740">i</span>&nbsp;<span class="op" id="8596742">:=</span>&nbsp;<span class="num" id="8596745">0</span><span class="op" id="8596746">;</span>&nbsp;<span class="ident" id="8596748">i</span>&nbsp;<span class="op" id="8596750">&lt;</span>&nbsp;<span class="ident" id="8596752">b</span><span class="op" id="8596753">.</span><span class="ident" id="8596754">N</span><span class="op" id="8596755">;</span>&nbsp;<span class="ident" id="8596757">i</span><span class="op" id="8596758">++</span>&nbsp;<span class="op" id="8596761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596765">if</span>&nbsp;<span class="ident" id="8596768">err</span>&nbsp;<span class="op" id="8596772">:=</span>&nbsp;<span class="ident" id="8596775">Unmarshal</span><span class="op" id="8596784">(</span><span class="ident" id="8596785">data</span><span class="op" id="8596789">,</span>&nbsp;<span class="op" id="8596791">&amp;</span><span class="ident" id="8596792">s</span><span class="op" id="8596793">)</span><span class="op" id="8596794">;</span>&nbsp;<span class="ident" id="8596796">err</span>&nbsp;<span class="op" id="8596800">!=</span>&nbsp;<span class="ident" id="8596803">nil</span>&nbsp;<span class="op" id="8596807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596812">b</span><span class="op" id="8596813">.</span><span class="ident" id="8596814">Fatal</span><span class="op" id="8596819">(</span><span class="string" id="8596820">&#34;Unmarshal:&#34;</span><span class="op" id="8596832">,</span>&nbsp;<span class="ident" id="8596834">err</span><span class="op" id="8596837">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8596844">}</span><br>
<span class="lineno"></span><span class="op" id="8596846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8596849">func</span>&nbsp;<span class="ident" id="8596854">BenchmarkUnmarshalFloat64</span><span class="op" id="8596879">(</span><span class="ident" id="8596880">b</span>&nbsp;<span class="op" id="8596882">*</span><span class="ident" id="8596883">testing</span><span class="op" id="8596890">.</span><span class="ident" id="8596891">B</span><span class="op" id="8596892">)</span>&nbsp;<span class="op" id="8596894">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596897">var</span>&nbsp;<span class="ident" id="8596901">f</span>&nbsp;<span class="builtintype" id="8596903">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8596912">data</span>&nbsp;<span class="op" id="8596917">:=</span>&nbsp;<span class="op" id="8596920">[</span><span class="op" id="8596921">]</span><span class="builtintype" id="8596922">byte</span><span class="op" id="8596926">(</span><span class="string" id="8596927">`3.14`</span><span class="op" id="8596933">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596937">for</span>&nbsp;<span class="ident" id="8596941">i</span>&nbsp;<span class="op" id="8596943">:=</span>&nbsp;<span class="num" id="8596946">0</span><span class="op" id="8596947">;</span>&nbsp;<span class="ident" id="8596949">i</span>&nbsp;<span class="op" id="8596951">&lt;</span>&nbsp;<span class="ident" id="8596953">b</span><span class="op" id="8596954">.</span><span class="ident" id="8596955">N</span><span class="op" id="8596956">;</span>&nbsp;<span class="ident" id="8596958">i</span><span class="op" id="8596959">++</span>&nbsp;<span class="op" id="8596962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8596966">if</span>&nbsp;<span class="ident" id="8596969">err</span>&nbsp;<span class="op" id="8596973">:=</span>&nbsp;<span class="ident" id="8596976">Unmarshal</span><span class="op" id="8596985">(</span><span class="ident" id="8596986">data</span><span class="op" id="8596990">,</span>&nbsp;<span class="op" id="8596992">&amp;</span><span class="ident" id="8596993">f</span><span class="op" id="8596994">)</span><span class="op" id="8596995">;</span>&nbsp;<span class="ident" id="8596997">err</span>&nbsp;<span class="op" id="8597001">!=</span>&nbsp;<span class="ident" id="8597004">nil</span>&nbsp;<span class="op" id="8597008">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597013">b</span><span class="op" id="8597014">.</span><span class="ident" id="8597015">Fatal</span><span class="op" id="8597020">(</span><span class="string" id="8597021">&#34;Unmarshal:&#34;</span><span class="op" id="8597033">,</span>&nbsp;<span class="ident" id="8597035">err</span><span class="op" id="8597038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8597042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8597045">}</span><br>
<span class="lineno"></span><span class="op" id="8597047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="8597050">func</span>&nbsp;<span class="ident" id="8597055">BenchmarkUnmarshalInt64</span><span class="op" id="8597078">(</span><span class="ident" id="8597079">b</span>&nbsp;<span class="op" id="8597081">*</span><span class="ident" id="8597082">testing</span><span class="op" id="8597089">.</span><span class="ident" id="8597090">B</span><span class="op" id="8597091">)</span>&nbsp;<span class="op" id="8597093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597096">var</span>&nbsp;<span class="ident" id="8597100">x</span>&nbsp;<span class="ident" id="8597102">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597109">data</span>&nbsp;<span class="op" id="8597114">:=</span>&nbsp;<span class="op" id="8597117">[</span><span class="op" id="8597118">]</span><span class="builtintype" id="8597119">byte</span><span class="op" id="8597123">(</span><span class="string" id="8597124">`3`</span><span class="op" id="8597127">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597131">for</span>&nbsp;<span class="ident" id="8597135">i</span>&nbsp;<span class="op" id="8597137">:=</span>&nbsp;<span class="num" id="8597140">0</span><span class="op" id="8597141">;</span>&nbsp;<span class="ident" id="8597143">i</span>&nbsp;<span class="op" id="8597145">&lt;</span>&nbsp;<span class="ident" id="8597147">b</span><span class="op" id="8597148">.</span><span class="ident" id="8597149">N</span><span class="op" id="8597150">;</span>&nbsp;<span class="ident" id="8597152">i</span><span class="op" id="8597153">++</span>&nbsp;<span class="op" id="8597156">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597160">if</span>&nbsp;<span class="ident" id="8597163">err</span>&nbsp;<span class="op" id="8597167">:=</span>&nbsp;<span class="ident" id="8597170">Unmarshal</span><span class="op" id="8597179">(</span><span class="ident" id="8597180">data</span><span class="op" id="8597184">,</span>&nbsp;<span class="op" id="8597186">&amp;</span><span class="ident" id="8597187">x</span><span class="op" id="8597188">)</span><span class="op" id="8597189">;</span>&nbsp;<span class="ident" id="8597191">err</span>&nbsp;<span class="op" id="8597195">!=</span>&nbsp;<span class="ident" id="8597198">nil</span>&nbsp;<span class="op" id="8597202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597207">b</span><span class="op" id="8597208">.</span><span class="ident" id="8597209">Fatal</span><span class="op" id="8597214">(</span><span class="string" id="8597215">&#34;Unmarshal:&#34;</span><span class="op" id="8597227">,</span>&nbsp;<span class="ident" id="8597229">err</span><span class="op" id="8597232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8597236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8597239">}</span><br>
<span class="lineno"></span><span class="op" id="8597241">}</span>
</div>
</body>
</html>
