<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html" class="current">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4808120">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4808175">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4808229">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4808280">package</span>&nbsp;<span class="ident" id="4808288">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4808294">import</span>&nbsp;<span class="op" id="4808301">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4808304">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4808313">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4808328">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4808331">const</span>&nbsp;<span class="op" id="4808337">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4808340">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4808353">=</span>&nbsp;<span class="op" id="4808355">^</span><span class="builtintype" id="4808356">byte</span><span class="op" id="4808360">(</span><span class="num" id="4808361">0x20</span><span class="op" id="4808365">)</span>&nbsp;<span class="comment" id="4808367">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4808401">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4808414">=</span>&nbsp;<span class="string" id="4808416">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4808426">smallLongEss</span>&nbsp;<span class="op" id="4808439">=</span>&nbsp;<span class="string" id="4808441">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="4808450">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4808453">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="4808520">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="4808575">//</span><br>
<span class="lineno"></span><span class="comment" id="4808578">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="4808643">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="4808722">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="4808795">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="4808853">//</span><br>
<span class="lineno"></span><span class="comment" id="4808856">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="4808932">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="4808995">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="4809045">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="4809088">//</span><br>
<span class="lineno"></span><span class="comment" id="4809091">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4809158">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="4809227">func</span>&nbsp;<span class="ident" id="4809232">foldFunc</span><span class="op" id="4809240">(</span><span class="ident" id="4809241">s</span>&nbsp;<span class="op" id="4809243">[</span><span class="op" id="4809244">]</span><span class="builtintype" id="4809245">byte</span><span class="op" id="4809249">)</span>&nbsp;<span class="keyword" id="4809251">func</span><span class="op" id="4809255">(</span><span class="ident" id="4809256">s</span><span class="op" id="4809257">,</span>&nbsp;<span class="ident" id="4809259">t</span>&nbsp;<span class="op" id="4809261">[</span><span class="op" id="4809262">]</span><span class="builtintype" id="4809263">byte</span><span class="op" id="4809267">)</span>&nbsp;<span class="builtintype" id="4809269">bool</span>&nbsp;<span class="op" id="4809274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4809277">nonLetter</span>&nbsp;<span class="op" id="4809287">:=</span>&nbsp;<span class="builtintype" id="4809290">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4809297">special</span>&nbsp;<span class="op" id="4809305">:=</span>&nbsp;<span class="builtintype" id="4809308">false</span>&nbsp;<span class="comment" id="4809314">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809333">for</span>&nbsp;<span class="ident" id="4809337">_</span><span class="op" id="4809338">,</span>&nbsp;<span class="ident" id="4809340">b</span>&nbsp;<span class="op" id="4809342">:=</span>&nbsp;<span class="keyword" id="4809345">range</span>&nbsp;<span class="ident" id="4809351">s</span>&nbsp;<span class="op" id="4809353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809357">if</span>&nbsp;<span class="ident" id="4809360">b</span>&nbsp;<span class="op" id="4809362">&gt;=</span>&nbsp;<span class="ident" id="4809365">utf8</span><span class="op" id="4809369">.</span><span class="ident" id="4809370">RuneSelf</span>&nbsp;<span class="op" id="4809379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809384">return</span>&nbsp;<span class="ident" id="4809391">bytes</span><span class="op" id="4809396">.</span><span class="ident" id="4809397">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4809409">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4809413">upper</span>&nbsp;<span class="op" id="4809419">:=</span>&nbsp;<span class="ident" id="4809422">b</span>&nbsp;<span class="op" id="4809424">&amp;</span>&nbsp;<span class="ident" id="4809426">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809437">if</span>&nbsp;<span class="ident" id="4809440">upper</span>&nbsp;<span class="op" id="4809446">&lt;</span>&nbsp;<span class="string" id="4809448">&#39;A&#39;</span>&nbsp;<span class="op" id="4809452">||</span>&nbsp;<span class="ident" id="4809455">upper</span>&nbsp;<span class="op" id="4809461">&gt;</span>&nbsp;<span class="string" id="4809463">&#39;Z&#39;</span>&nbsp;<span class="op" id="4809467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4809472">nonLetter</span>&nbsp;<span class="op" id="4809482">=</span>&nbsp;<span class="builtintype" id="4809484">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4809491">}</span>&nbsp;<span class="keyword" id="4809493">else</span>&nbsp;<span class="keyword" id="4809498">if</span>&nbsp;<span class="ident" id="4809501">upper</span>&nbsp;<span class="op" id="4809507">==</span>&nbsp;<span class="string" id="4809510">&#39;K&#39;</span>&nbsp;<span class="op" id="4809514">||</span>&nbsp;<span class="ident" id="4809517">upper</span>&nbsp;<span class="op" id="4809523">==</span>&nbsp;<span class="string" id="4809526">&#39;S&#39;</span>&nbsp;<span class="op" id="4809530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4809535">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4809586">special</span>&nbsp;<span class="op" id="4809594">=</span>&nbsp;<span class="builtintype" id="4809596">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4809603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4809606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809609">if</span>&nbsp;<span class="ident" id="4809612">special</span>&nbsp;<span class="op" id="4809620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809624">return</span>&nbsp;<span class="ident" id="4809631">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4809647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809650">if</span>&nbsp;<span class="ident" id="4809653">nonLetter</span>&nbsp;<span class="op" id="4809663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809667">return</span>&nbsp;<span class="ident" id="4809674">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4809690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809693">return</span>&nbsp;<span class="ident" id="4809700">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="4809722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4809725">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4809792">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="4809863">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="4809928">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="4809957">func</span>&nbsp;<span class="ident" id="4809962">equalFoldRight</span><span class="op" id="4809976">(</span><span class="ident" id="4809977">s</span><span class="op" id="4809978">,</span>&nbsp;<span class="ident" id="4809980">t</span>&nbsp;<span class="op" id="4809982">[</span><span class="op" id="4809983">]</span><span class="builtintype" id="4809984">byte</span><span class="op" id="4809988">)</span>&nbsp;<span class="builtintype" id="4809990">bool</span>&nbsp;<span class="op" id="4809995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4809998">for</span>&nbsp;<span class="ident" id="4810002">_</span><span class="op" id="4810003">,</span>&nbsp;<span class="ident" id="4810005">sb</span>&nbsp;<span class="op" id="4810008">:=</span>&nbsp;<span class="keyword" id="4810011">range</span>&nbsp;<span class="ident" id="4810017">s</span>&nbsp;<span class="op" id="4810019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810023">if</span>&nbsp;<span class="builtinfunc" id="4810026">len</span><span class="op" id="4810029">(</span><span class="ident" id="4810030">t</span><span class="op" id="4810031">)</span>&nbsp;<span class="op" id="4810033">==</span>&nbsp;<span class="num" id="4810036">0</span>&nbsp;<span class="op" id="4810038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810043">return</span>&nbsp;<span class="builtintype" id="4810050">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4810062">tb</span>&nbsp;<span class="op" id="4810065">:=</span>&nbsp;<span class="ident" id="4810068">t</span><span class="op" id="4810069">[</span><span class="num" id="4810070">0</span><span class="op" id="4810071">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810075">if</span>&nbsp;<span class="ident" id="4810078">tb</span>&nbsp;<span class="op" id="4810081">&lt;</span>&nbsp;<span class="ident" id="4810083">utf8</span><span class="op" id="4810087">.</span><span class="ident" id="4810088">RuneSelf</span>&nbsp;<span class="op" id="4810097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810102">if</span>&nbsp;<span class="ident" id="4810105">sb</span>&nbsp;<span class="op" id="4810108">!=</span>&nbsp;<span class="ident" id="4810111">tb</span>&nbsp;<span class="op" id="4810114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4810120">sbUpper</span>&nbsp;<span class="op" id="4810128">:=</span>&nbsp;<span class="ident" id="4810131">sb</span>&nbsp;<span class="op" id="4810134">&amp;</span>&nbsp;<span class="ident" id="4810136">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810149">if</span>&nbsp;<span class="string" id="4810152">&#39;A&#39;</span>&nbsp;<span class="op" id="4810156">&lt;=</span>&nbsp;<span class="ident" id="4810159">sbUpper</span>&nbsp;<span class="op" id="4810167">&amp;&amp;</span>&nbsp;<span class="ident" id="4810170">sbUpper</span>&nbsp;<span class="op" id="4810178">&lt;=</span>&nbsp;<span class="string" id="4810181">&#39;Z&#39;</span>&nbsp;<span class="op" id="4810185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810192">if</span>&nbsp;<span class="ident" id="4810195">sbUpper</span>&nbsp;<span class="op" id="4810203">!=</span>&nbsp;<span class="ident" id="4810206">tb</span><span class="op" id="4810208">&amp;</span><span class="ident" id="4810209">caseMask</span>&nbsp;<span class="op" id="4810218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810226">return</span>&nbsp;<span class="builtintype" id="4810233">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810250">}</span>&nbsp;<span class="keyword" id="4810252">else</span>&nbsp;<span class="op" id="4810257">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810264">return</span>&nbsp;<span class="builtintype" id="4810271">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4810291">t</span>&nbsp;<span class="op" id="4810293">=</span>&nbsp;<span class="ident" id="4810295">t</span><span class="op" id="4810296">[</span><span class="num" id="4810297">1</span><span class="op" id="4810298">:</span><span class="op" id="4810299">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810304">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4810319">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4810374">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4810421">tr</span><span class="op" id="4810423">,</span>&nbsp;<span class="ident" id="4810425">size</span>&nbsp;<span class="op" id="4810430">:=</span>&nbsp;<span class="ident" id="4810433">utf8</span><span class="op" id="4810437">.</span><span class="ident" id="4810438">DecodeRune</span><span class="op" id="4810448">(</span><span class="ident" id="4810449">t</span><span class="op" id="4810450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810454">switch</span>&nbsp;<span class="ident" id="4810461">sb</span>&nbsp;<span class="op" id="4810464">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810468">case</span>&nbsp;<span class="string" id="4810473">&#39;s&#39;</span><span class="op" id="4810476">,</span>&nbsp;<span class="string" id="4810478">&#39;S&#39;</span><span class="op" id="4810481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810486">if</span>&nbsp;<span class="ident" id="4810489">tr</span>&nbsp;<span class="op" id="4810492">!=</span>&nbsp;<span class="ident" id="4810495">smallLongEss</span>&nbsp;<span class="op" id="4810508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810514">return</span>&nbsp;<span class="builtintype" id="4810521">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810534">case</span>&nbsp;<span class="string" id="4810539">&#39;k&#39;</span><span class="op" id="4810542">,</span>&nbsp;<span class="string" id="4810544">&#39;K&#39;</span><span class="op" id="4810547">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810552">if</span>&nbsp;<span class="ident" id="4810555">tr</span>&nbsp;<span class="op" id="4810558">!=</span>&nbsp;<span class="ident" id="4810561">kelvin</span>&nbsp;<span class="op" id="4810568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810574">return</span>&nbsp;<span class="builtintype" id="4810581">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810594">default</span><span class="op" id="4810601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810606">return</span>&nbsp;<span class="builtintype" id="4810613">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4810625">t</span>&nbsp;<span class="op" id="4810627">=</span>&nbsp;<span class="ident" id="4810629">t</span><span class="op" id="4810630">[</span><span class="ident" id="4810631">size</span><span class="op" id="4810635">:</span><span class="op" id="4810636">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810643">if</span>&nbsp;<span class="builtinfunc" id="4810646">len</span><span class="op" id="4810649">(</span><span class="ident" id="4810650">t</span><span class="op" id="4810651">)</span>&nbsp;<span class="op" id="4810653">&gt;</span>&nbsp;<span class="num" id="4810655">0</span>&nbsp;<span class="op" id="4810657">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810661">return</span>&nbsp;<span class="builtintype" id="4810668">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810678">return</span>&nbsp;<span class="builtintype" id="4810685">true</span><br>
<span class="lineno"></span><span class="op" id="4810690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4810693">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="4810763">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="4810827">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="4810855">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="4810884">func</span>&nbsp;<span class="ident" id="4810889">asciiEqualFold</span><span class="op" id="4810903">(</span><span class="ident" id="4810904">s</span><span class="op" id="4810905">,</span>&nbsp;<span class="ident" id="4810907">t</span>&nbsp;<span class="op" id="4810909">[</span><span class="op" id="4810910">]</span><span class="builtintype" id="4810911">byte</span><span class="op" id="4810915">)</span>&nbsp;<span class="builtintype" id="4810917">bool</span>&nbsp;<span class="op" id="4810922">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810925">if</span>&nbsp;<span class="builtinfunc" id="4810928">len</span><span class="op" id="4810931">(</span><span class="ident" id="4810932">s</span><span class="op" id="4810933">)</span>&nbsp;<span class="op" id="4810935">!=</span>&nbsp;<span class="builtinfunc" id="4810938">len</span><span class="op" id="4810941">(</span><span class="ident" id="4810942">t</span><span class="op" id="4810943">)</span>&nbsp;<span class="op" id="4810945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810949">return</span>&nbsp;<span class="builtintype" id="4810956">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4810963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4810966">for</span>&nbsp;<span class="ident" id="4810970">i</span><span class="op" id="4810971">,</span>&nbsp;<span class="ident" id="4810973">sb</span>&nbsp;<span class="op" id="4810976">:=</span>&nbsp;<span class="keyword" id="4810979">range</span>&nbsp;<span class="ident" id="4810985">s</span>&nbsp;<span class="op" id="4810987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4810991">tb</span>&nbsp;<span class="op" id="4810994">:=</span>&nbsp;<span class="ident" id="4810997">t</span><span class="op" id="4810998">[</span><span class="ident" id="4810999">i</span><span class="op" id="4811000">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811004">if</span>&nbsp;<span class="ident" id="4811007">sb</span>&nbsp;<span class="op" id="4811010">==</span>&nbsp;<span class="ident" id="4811013">tb</span>&nbsp;<span class="op" id="4811016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811021">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811036">if</span>&nbsp;<span class="op" id="4811039">(</span><span class="string" id="4811040">&#39;a&#39;</span>&nbsp;<span class="op" id="4811044">&lt;=</span>&nbsp;<span class="ident" id="4811047">sb</span>&nbsp;<span class="op" id="4811050">&amp;&amp;</span>&nbsp;<span class="ident" id="4811053">sb</span>&nbsp;<span class="op" id="4811056">&lt;=</span>&nbsp;<span class="string" id="4811059">&#39;z&#39;</span><span class="op" id="4811062">)</span>&nbsp;<span class="op" id="4811064">||</span>&nbsp;<span class="op" id="4811067">(</span><span class="string" id="4811068">&#39;A&#39;</span>&nbsp;<span class="op" id="4811072">&lt;=</span>&nbsp;<span class="ident" id="4811075">sb</span>&nbsp;<span class="op" id="4811078">&amp;&amp;</span>&nbsp;<span class="ident" id="4811081">sb</span>&nbsp;<span class="op" id="4811084">&lt;=</span>&nbsp;<span class="string" id="4811087">&#39;Z&#39;</span><span class="op" id="4811090">)</span>&nbsp;<span class="op" id="4811092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811097">if</span>&nbsp;<span class="ident" id="4811100">sb</span><span class="op" id="4811102">&amp;</span><span class="ident" id="4811103">caseMask</span>&nbsp;<span class="op" id="4811112">!=</span>&nbsp;<span class="ident" id="4811115">tb</span><span class="op" id="4811117">&amp;</span><span class="ident" id="4811118">caseMask</span>&nbsp;<span class="op" id="4811127">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811133">return</span>&nbsp;<span class="builtintype" id="4811140">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811153">}</span>&nbsp;<span class="keyword" id="4811155">else</span>&nbsp;<span class="op" id="4811160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811165">return</span>&nbsp;<span class="builtintype" id="4811172">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811180">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811186">return</span>&nbsp;<span class="builtintype" id="4811193">true</span><br>
<span class="lineno"></span><span class="op" id="4811198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4811201">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="4811269">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="4811335">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="4811377">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="4811406">func</span>&nbsp;<span class="ident" id="4811411">simpleLetterEqualFold</span><span class="op" id="4811432">(</span><span class="ident" id="4811433">s</span><span class="op" id="4811434">,</span>&nbsp;<span class="ident" id="4811436">t</span>&nbsp;<span class="op" id="4811438">[</span><span class="op" id="4811439">]</span><span class="builtintype" id="4811440">byte</span><span class="op" id="4811444">)</span>&nbsp;<span class="builtintype" id="4811446">bool</span>&nbsp;<span class="op" id="4811451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811454">if</span>&nbsp;<span class="builtinfunc" id="4811457">len</span><span class="op" id="4811460">(</span><span class="ident" id="4811461">s</span><span class="op" id="4811462">)</span>&nbsp;<span class="op" id="4811464">!=</span>&nbsp;<span class="builtinfunc" id="4811467">len</span><span class="op" id="4811470">(</span><span class="ident" id="4811471">t</span><span class="op" id="4811472">)</span>&nbsp;<span class="op" id="4811474">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811478">return</span>&nbsp;<span class="builtintype" id="4811485">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811495">for</span>&nbsp;<span class="ident" id="4811499">i</span><span class="op" id="4811500">,</span>&nbsp;<span class="ident" id="4811502">b</span>&nbsp;<span class="op" id="4811504">:=</span>&nbsp;<span class="keyword" id="4811507">range</span>&nbsp;<span class="ident" id="4811513">s</span>&nbsp;<span class="op" id="4811515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811519">if</span>&nbsp;<span class="ident" id="4811522">b</span><span class="op" id="4811523">&amp;</span><span class="ident" id="4811524">caseMask</span>&nbsp;<span class="op" id="4811533">!=</span>&nbsp;<span class="ident" id="4811536">t</span><span class="op" id="4811537">[</span><span class="ident" id="4811538">i</span><span class="op" id="4811539">]</span><span class="op" id="4811540">&amp;</span><span class="ident" id="4811541">caseMask</span>&nbsp;<span class="op" id="4811550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811555">return</span>&nbsp;<span class="builtintype" id="4811562">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4811573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4811576">return</span>&nbsp;<span class="builtintype" id="4811583">true</span><br>
<span class="lineno"></span><span class="op" id="4811588">}</span>
</div>
</body>
</html>
