<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4893636">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4893691">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4893745">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4893796">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="4894239">package</span>&nbsp;<span class="ident" id="4894247">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4894253">import</span>&nbsp;<span class="op" id="4894260">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4894263">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4894272">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4894290">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4894300">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4894308">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4894324">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4894329">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="4894332">const</span>&nbsp;<span class="ident" id="4894338">zlibDeflate</span>&nbsp;<span class="op" id="4894350">=</span>&nbsp;<span class="num" id="4894352">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4894355">var</span>&nbsp;<span class="op" id="4894359">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894362">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894443">ErrChecksum</span>&nbsp;<span class="op" id="4894455">=</span>&nbsp;<span class="ident" id="4894457"><a href="/compress/zlib/reader.go.html#4894290">errors</a></span><span class="op" id="4894463">.</span><span class="ident" id="4894464">New</span><span class="op" id="4894467">(</span><span class="string" id="4894468">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="4894492">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894495">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894580">ErrDictionary</span>&nbsp;<span class="op" id="4894594">=</span>&nbsp;<span class="ident" id="4894596"><a href="/compress/zlib/reader.go.html#4894290">errors</a></span><span class="op" id="4894602">.</span><span class="ident" id="4894603">New</span><span class="op" id="4894606">(</span><span class="string" id="4894607">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="4894633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4894636">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894713">ErrHeader</span>&nbsp;<span class="op" id="4894723">=</span>&nbsp;<span class="ident" id="4894725"><a href="/compress/zlib/reader.go.html#4894290">errors</a></span><span class="op" id="4894731">.</span><span class="ident" id="4894732">New</span><span class="op" id="4894735">(</span><span class="string" id="4894736">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="4894758">)</span><br>
<span class="lineno"></span><span class="op" id="4894760">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="4894763">type</span>&nbsp;<span class="ident" id="4894768">reader</span>&nbsp;<span class="keyword" id="4894775">struct</span>&nbsp;<span class="op" id="4894782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894785">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4894798"><a href="/compress/zlib/reader.go.html#4894272">flate</a></span><span class="op" id="4894803">.</span><span class="ident" id="4894804">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894812">decompressor</span>&nbsp;<span class="ident" id="4894825"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4894827">.</span><span class="ident" id="4894828">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894840">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4894853"><a href="/compress/zlib/reader.go.html#4894300">hash</a></span><span class="op" id="4894857">.</span><span class="ident" id="4894858">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894866">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4894879">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4894886">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4894899">[</span><span class="num" id="4894900">4</span><span class="op" id="4894901">]</span><span class="builtintype" id="4894902">byte</span><br>
<span class="lineno"></span><span class="op" id="4894907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4894910">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="4894984">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="4895059">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4895095">type</span>&nbsp;<span class="ident" id="4895100">Resetter</span>&nbsp;<span class="keyword" id="4895109">interface</span>&nbsp;<span class="op" id="4895119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4895122">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4895196">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4895241">Reset</span><span class="op" id="4895246">(</span><span class="ident" id="4895247">r</span>&nbsp;<span class="ident" id="4895249"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4895251">.</span><span class="ident" id="4895252">Reader</span><span class="op" id="4895258">,</span>&nbsp;<span class="ident" id="4895260">dict</span>&nbsp;<span class="op" id="4895265">[</span><span class="op" id="4895266">]</span><span class="builtintype" id="4895267">byte</span><span class="op" id="4895271">)</span>&nbsp;<span class="builtintype" id="4895273">error</span><br>
<span class="lineno"></span><span class="op" id="4895279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4895282">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="4895321">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="4895392">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4895474">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="4895554">//</span><br>
<span class="lineno"></span><span class="comment" id="4895557">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="4895623">func</span>&nbsp;<span class="ident" id="4895628">NewReader</span><span class="op" id="4895637">(</span><span class="ident" id="4895638">r</span>&nbsp;<span class="ident" id="4895640"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4895642">.</span><span class="ident" id="4895643">Reader</span><span class="op" id="4895649">)</span>&nbsp;<span class="op" id="4895651">(</span><span class="ident" id="4895652"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4895654">.</span><span class="ident" id="4895655">ReadCloser</span><span class="op" id="4895665">,</span>&nbsp;<span class="builtintype" id="4895667">error</span><span class="op" id="4895672">)</span>&nbsp;<span class="op" id="4895674">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4895677">return</span>&nbsp;<span class="ident" id="4895684"><a href="/compress/zlib/reader.go.html#4896034">NewReaderDict</a></span><span class="op" id="4895697">(</span><span class="ident" id="4895698"><a href="/compress/zlib/reader.go.html#4895638">r</a></span><span class="op" id="4895699">,</span>&nbsp;<span class="ident" id="4895701">nil</span><span class="op" id="4895704">)</span><br>
<span class="lineno"></span><span class="op" id="4895706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4895709">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="4895774">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="4895859">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="4895956">//</span><br>
<span class="lineno"></span><span class="comment" id="4895959">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="4896029">func</span>&nbsp;<span class="ident" id="4896034">NewReaderDict</span><span class="op" id="4896047">(</span><span class="ident" id="4896048">r</span>&nbsp;<span class="ident" id="4896050"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4896052">.</span><span class="ident" id="4896053">Reader</span><span class="op" id="4896059">,</span>&nbsp;<span class="ident" id="4896061">dict</span>&nbsp;<span class="op" id="4896066">[</span><span class="op" id="4896067">]</span><span class="builtintype" id="4896068">byte</span><span class="op" id="4896072">)</span>&nbsp;<span class="op" id="4896074">(</span><span class="ident" id="4896075"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4896077">.</span><span class="ident" id="4896078">ReadCloser</span><span class="op" id="4896088">,</span>&nbsp;<span class="builtintype" id="4896090">error</span><span class="op" id="4896095">)</span>&nbsp;<span class="op" id="4896097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896100">z</span>&nbsp;<span class="op" id="4896102">:=</span>&nbsp;<span class="builtinfunc" id="4896105">new</span><span class="op" id="4896108">(</span><span class="ident" id="4896109"><a href="/compress/zlib/reader.go.html#4894768">reader</a></span><span class="op" id="4896115">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896118">err</span>&nbsp;<span class="op" id="4896122">:=</span>&nbsp;<span class="ident" id="4896125"><a href="/compress/zlib/reader.go.html#4896100">z</a></span><span class="op" id="4896126">.</span><span class="ident" id="4896127">Reset</span><span class="op" id="4896132">(</span><span class="ident" id="4896133"><a href="/compress/zlib/reader.go.html#4896048">r</a></span><span class="op" id="4896134">,</span>&nbsp;<span class="ident" id="4896136"><a href="/compress/zlib/reader.go.html#4896061">dict</a></span><span class="op" id="4896140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896143">if</span>&nbsp;<span class="ident" id="4896146"><a href="/compress/zlib/reader.go.html#4896118">err</a></span>&nbsp;<span class="op" id="4896150">!=</span>&nbsp;<span class="ident" id="4896153">nil</span>&nbsp;<span class="op" id="4896157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896161">return</span>&nbsp;<span class="ident" id="4896168">nil</span><span class="op" id="4896171">,</span>&nbsp;<span class="ident" id="4896173"><a href="/compress/zlib/reader.go.html#4896118">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896181">return</span>&nbsp;<span class="ident" id="4896188"><a href="/compress/zlib/reader.go.html#4896100">z</a></span><span class="op" id="4896189">,</span>&nbsp;<span class="ident" id="4896191">nil</span><br>
<span class="lineno">85</span><span class="op" id="4896195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4896198">func</span>&nbsp;<span class="op" id="4896203">(</span><span class="ident" id="4896204">z</span>&nbsp;<span class="op" id="4896206">*</span><span class="ident" id="4896207"><a href="/compress/zlib/reader.go.html#4894768">reader</a></span><span class="op" id="4896213">)</span>&nbsp;<span class="ident" id="4896215">Read</span><span class="op" id="4896219">(</span><span class="ident" id="4896220">p</span>&nbsp;<span class="op" id="4896222">[</span><span class="op" id="4896223">]</span><span class="builtintype" id="4896224">byte</span><span class="op" id="4896228">)</span>&nbsp;<span class="op" id="4896230">(</span><span class="ident" id="4896231">n</span>&nbsp;<span class="builtintype" id="4896233">int</span><span class="op" id="4896236">,</span>&nbsp;<span class="ident" id="4896238">err</span>&nbsp;<span class="builtintype" id="4896242">error</span><span class="op" id="4896247">)</span>&nbsp;<span class="op" id="4896249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896252">if</span>&nbsp;<span class="ident" id="4896255"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896256">.</span><span class="ident" id="4896257">err</span>&nbsp;<span class="op" id="4896261">!=</span>&nbsp;<span class="ident" id="4896264">nil</span>&nbsp;<span class="op" id="4896268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896272">return</span>&nbsp;<span class="num" id="4896279">0</span><span class="op" id="4896280">,</span>&nbsp;<span class="ident" id="4896282"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896283">.</span><span class="ident" id="4896284">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896292">if</span>&nbsp;<span class="builtinfunc" id="4896295">len</span><span class="op" id="4896298">(</span><span class="ident" id="4896299"><a href="/compress/zlib/reader.go.html#4896220">p</a></span><span class="op" id="4896300">)</span>&nbsp;<span class="op" id="4896302">==</span>&nbsp;<span class="num" id="4896305">0</span>&nbsp;<span class="op" id="4896307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896311">return</span>&nbsp;<span class="num" id="4896318">0</span><span class="op" id="4896319">,</span>&nbsp;<span class="ident" id="4896321">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896330"><a href="/compress/zlib/reader.go.html#4896231">n</a></span><span class="op" id="4896331">,</span>&nbsp;<span class="ident" id="4896333"><a href="/compress/zlib/reader.go.html#4896238">err</a></span>&nbsp;<span class="op" id="4896337">=</span>&nbsp;<span class="ident" id="4896339"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896340">.</span><span class="ident" id="4896341">decompressor</span><span class="op" id="4896353">.</span><span class="ident" id="4896354">Read</span><span class="op" id="4896358">(</span><span class="ident" id="4896359"><a href="/compress/zlib/reader.go.html#4896220">p</a></span><span class="op" id="4896360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896363"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896364">.</span><span class="ident" id="4896365">digest</span><span class="op" id="4896371">.</span><span class="ident" id="4896372">Write</span><span class="op" id="4896377">(</span><span class="ident" id="4896378"><a href="/compress/zlib/reader.go.html#4896220">p</a></span><span class="op" id="4896379">[</span><span class="num" id="4896380">0</span><span class="op" id="4896381">:</span><span class="ident" id="4896382"><a href="/compress/zlib/reader.go.html#4896231">n</a></span><span class="op" id="4896383">]</span><span class="op" id="4896384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896387">if</span>&nbsp;<span class="ident" id="4896390"><a href="/compress/zlib/reader.go.html#4896231">n</a></span>&nbsp;<span class="op" id="4896392">!=</span>&nbsp;<span class="num" id="4896395">0</span>&nbsp;<span class="op" id="4896397">||</span>&nbsp;<span class="ident" id="4896400"><a href="/compress/zlib/reader.go.html#4896238">err</a></span>&nbsp;<span class="op" id="4896404">!=</span>&nbsp;<span class="ident" id="4896407"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4896409">.</span><span class="ident" id="4896410">EOF</span>&nbsp;<span class="op" id="4896414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896418"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896419">.</span><span class="ident" id="4896420">err</span>&nbsp;<span class="op" id="4896424">=</span>&nbsp;<span class="ident" id="4896426"><a href="/compress/zlib/reader.go.html#4896238">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896432">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4896444">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896479">if</span>&nbsp;<span class="ident" id="4896482">_</span><span class="op" id="4896483">,</span>&nbsp;<span class="ident" id="4896485">err</span>&nbsp;<span class="op" id="4896489">:=</span>&nbsp;<span class="ident" id="4896492"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4896494">.</span><span class="ident" id="4896495">ReadFull</span><span class="op" id="4896503">(</span><span class="ident" id="4896504"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896505">.</span><span class="ident" id="4896506">r</span><span class="op" id="4896507">,</span>&nbsp;<span class="ident" id="4896509"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896510">.</span><span class="ident" id="4896511">scratch</span><span class="op" id="4896518">[</span><span class="num" id="4896519">0</span><span class="op" id="4896520">:</span><span class="num" id="4896521">4</span><span class="op" id="4896522">]</span><span class="op" id="4896523">)</span><span class="op" id="4896524">;</span>&nbsp;<span class="ident" id="4896526"><a href="/compress/zlib/reader.go.html#4896485">err</a></span>&nbsp;<span class="op" id="4896530">!=</span>&nbsp;<span class="ident" id="4896533">nil</span>&nbsp;<span class="op" id="4896537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896541"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896542">.</span><span class="ident" id="4896543">err</span>&nbsp;<span class="op" id="4896547">=</span>&nbsp;<span class="ident" id="4896549"><a href="/compress/zlib/reader.go.html#4896485">err</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896555">return</span>&nbsp;<span class="num" id="4896562">0</span><span class="op" id="4896563">,</span>&nbsp;<span class="ident" id="4896565"><a href="/compress/zlib/reader.go.html#4896485">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4896573">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896632">checksum</span>&nbsp;<span class="op" id="4896641">:=</span>&nbsp;<span class="builtintype" id="4896644">uint32</span><span class="op" id="4896650">(</span><span class="ident" id="4896651"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896652">.</span><span class="ident" id="4896653">scratch</span><span class="op" id="4896660">[</span><span class="num" id="4896661">0</span><span class="op" id="4896662">]</span><span class="op" id="4896663">)</span><span class="op" id="4896664">&lt;&lt;</span><span class="num" id="4896666">24</span>&nbsp;<span class="op" id="4896669">|</span>&nbsp;<span class="builtintype" id="4896671">uint32</span><span class="op" id="4896677">(</span><span class="ident" id="4896678"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896679">.</span><span class="ident" id="4896680">scratch</span><span class="op" id="4896687">[</span><span class="num" id="4896688">1</span><span class="op" id="4896689">]</span><span class="op" id="4896690">)</span><span class="op" id="4896691">&lt;&lt;</span><span class="num" id="4896693">16</span>&nbsp;<span class="op" id="4896696">|</span>&nbsp;<span class="builtintype" id="4896698">uint32</span><span class="op" id="4896704">(</span><span class="ident" id="4896705"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896706">.</span><span class="ident" id="4896707">scratch</span><span class="op" id="4896714">[</span><span class="num" id="4896715">2</span><span class="op" id="4896716">]</span><span class="op" id="4896717">)</span><span class="op" id="4896718">&lt;&lt;</span><span class="num" id="4896720">8</span>&nbsp;<span class="op" id="4896722">|</span>&nbsp;<span class="builtintype" id="4896724">uint32</span><span class="op" id="4896730">(</span><span class="ident" id="4896731"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896732">.</span><span class="ident" id="4896733">scratch</span><span class="op" id="4896740">[</span><span class="num" id="4896741">3</span><span class="op" id="4896742">]</span><span class="op" id="4896743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896746">if</span>&nbsp;<span class="ident" id="4896749"><a href="/compress/zlib/reader.go.html#4896632">checksum</a></span>&nbsp;<span class="op" id="4896758">!=</span>&nbsp;<span class="ident" id="4896761"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896762">.</span><span class="ident" id="4896763">digest</span><span class="op" id="4896769">.</span><span class="ident" id="4896770">Sum32</span><span class="op" id="4896775">(</span><span class="op" id="4896776">)</span>&nbsp;<span class="op" id="4896778">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896782"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896783">.</span><span class="ident" id="4896784">err</span>&nbsp;<span class="op" id="4896788">=</span>&nbsp;<span class="ident" id="4896790"><a href="/compress/zlib/reader.go.html#4894443">ErrChecksum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896804">return</span>&nbsp;<span class="num" id="4896811">0</span><span class="op" id="4896812">,</span>&nbsp;<span class="ident" id="4896814"><a href="/compress/zlib/reader.go.html#4896204">z</a></span><span class="op" id="4896815">.</span><span class="ident" id="4896816">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896824">return</span><br>
<span class="lineno"></span><span class="op" id="4896831">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4896834">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="4896920">func</span>&nbsp;<span class="op" id="4896925">(</span><span class="ident" id="4896926">z</span>&nbsp;<span class="op" id="4896928">*</span><span class="ident" id="4896929"><a href="/compress/zlib/reader.go.html#4894768">reader</a></span><span class="op" id="4896935">)</span>&nbsp;<span class="ident" id="4896937">Close</span><span class="op" id="4896942">(</span><span class="op" id="4896943">)</span>&nbsp;<span class="builtintype" id="4896945">error</span>&nbsp;<span class="op" id="4896951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896954">if</span>&nbsp;<span class="ident" id="4896957"><a href="/compress/zlib/reader.go.html#4896926">z</a></span><span class="op" id="4896958">.</span><span class="ident" id="4896959">err</span>&nbsp;<span class="op" id="4896963">!=</span>&nbsp;<span class="ident" id="4896966">nil</span>&nbsp;<span class="op" id="4896970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4896974">return</span>&nbsp;<span class="ident" id="4896981"><a href="/compress/zlib/reader.go.html#4896926">z</a></span><span class="op" id="4896982">.</span><span class="ident" id="4896983">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4896988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4896991"><a href="/compress/zlib/reader.go.html#4896926">z</a></span><span class="op" id="4896992">.</span><span class="ident" id="4896993">err</span>&nbsp;<span class="op" id="4896997">=</span>&nbsp;<span class="ident" id="4896999"><a href="/compress/zlib/reader.go.html#4896926">z</a></span><span class="op" id="4897000">.</span><span class="ident" id="4897001">decompressor</span><span class="op" id="4897013">.</span><span class="ident" id="4897014">Close</span><span class="op" id="4897019">(</span><span class="op" id="4897020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897023">return</span>&nbsp;<span class="ident" id="4897030"><a href="/compress/zlib/reader.go.html#4896926">z</a></span><span class="op" id="4897031">.</span><span class="ident" id="4897032">err</span><br>
<span class="lineno"></span><span class="op" id="4897036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="4897039">func</span>&nbsp;<span class="op" id="4897044">(</span><span class="ident" id="4897045">z</span>&nbsp;<span class="op" id="4897047">*</span><span class="ident" id="4897048"><a href="/compress/zlib/reader.go.html#4894768">reader</a></span><span class="op" id="4897054">)</span>&nbsp;<span class="ident" id="4897056">Reset</span><span class="op" id="4897061">(</span><span class="ident" id="4897062">r</span>&nbsp;<span class="ident" id="4897064"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4897066">.</span><span class="ident" id="4897067">Reader</span><span class="op" id="4897073">,</span>&nbsp;<span class="ident" id="4897075">dict</span>&nbsp;<span class="op" id="4897080">[</span><span class="op" id="4897081">]</span><span class="builtintype" id="4897082">byte</span><span class="op" id="4897086">)</span>&nbsp;<span class="builtintype" id="4897088">error</span>&nbsp;<span class="op" id="4897094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897097">if</span>&nbsp;<span class="ident" id="4897100">fr</span><span class="op" id="4897102">,</span>&nbsp;<span class="ident" id="4897104">ok</span>&nbsp;<span class="op" id="4897107">:=</span>&nbsp;<span class="ident" id="4897110"><a href="/compress/zlib/reader.go.html#4897062">r</a></span><span class="op" id="4897111">.</span><span class="op" id="4897112">(</span><span class="ident" id="4897113"><a href="/compress/zlib/reader.go.html#4894272">flate</a></span><span class="op" id="4897118">.</span><span class="ident" id="4897119">Reader</span><span class="op" id="4897125">)</span><span class="op" id="4897126">;</span>&nbsp;<span class="ident" id="4897128"><a href="/compress/zlib/reader.go.html#4897104">ok</a></span>&nbsp;<span class="op" id="4897131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897135"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897136">.</span><span class="ident" id="4897137">r</span>&nbsp;<span class="op" id="4897139">=</span>&nbsp;<span class="ident" id="4897141"><a href="/compress/zlib/reader.go.html#4897100">fr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897145">}</span>&nbsp;<span class="keyword" id="4897147">else</span>&nbsp;<span class="op" id="4897152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897156"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897157">.</span><span class="ident" id="4897158">r</span>&nbsp;<span class="op" id="4897160">=</span>&nbsp;<span class="ident" id="4897162"><a href="/compress/zlib/reader.go.html#4894263">bufio</a></span><span class="op" id="4897167">.</span><span class="ident" id="4897168">NewReader</span><span class="op" id="4897177">(</span><span class="ident" id="4897178"><a href="/compress/zlib/reader.go.html#4897062">r</a></span><span class="op" id="4897179">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897185">_</span><span class="op" id="4897186">,</span>&nbsp;<span class="ident" id="4897188">err</span>&nbsp;<span class="op" id="4897192">:=</span>&nbsp;<span class="ident" id="4897195"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4897197">.</span><span class="ident" id="4897198">ReadFull</span><span class="op" id="4897206">(</span><span class="ident" id="4897207"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897208">.</span><span class="ident" id="4897209">r</span><span class="op" id="4897210">,</span>&nbsp;<span class="ident" id="4897212"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897213">.</span><span class="ident" id="4897214">scratch</span><span class="op" id="4897221">[</span><span class="num" id="4897222">0</span><span class="op" id="4897223">:</span><span class="num" id="4897224">2</span><span class="op" id="4897225">]</span><span class="op" id="4897226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897229">if</span>&nbsp;<span class="ident" id="4897232"><a href="/compress/zlib/reader.go.html#4897188">err</a></span>&nbsp;<span class="op" id="4897236">!=</span>&nbsp;<span class="ident" id="4897239">nil</span>&nbsp;<span class="op" id="4897243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897247">return</span>&nbsp;<span class="ident" id="4897254"><a href="/compress/zlib/reader.go.html#4897188">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897259">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897262">h</span>&nbsp;<span class="op" id="4897264">:=</span>&nbsp;<span class="builtintype" id="4897267">uint</span><span class="op" id="4897271">(</span><span class="ident" id="4897272"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897273">.</span><span class="ident" id="4897274">scratch</span><span class="op" id="4897281">[</span><span class="num" id="4897282">0</span><span class="op" id="4897283">]</span><span class="op" id="4897284">)</span><span class="op" id="4897285">&lt;&lt;</span><span class="num" id="4897287">8</span>&nbsp;<span class="op" id="4897289">|</span>&nbsp;<span class="builtintype" id="4897291">uint</span><span class="op" id="4897295">(</span><span class="ident" id="4897296"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897297">.</span><span class="ident" id="4897298">scratch</span><span class="op" id="4897305">[</span><span class="num" id="4897306">1</span><span class="op" id="4897307">]</span><span class="op" id="4897308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897311">if</span>&nbsp;<span class="op" id="4897314">(</span><span class="ident" id="4897315"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897316">.</span><span class="ident" id="4897317">scratch</span><span class="op" id="4897324">[</span><span class="num" id="4897325">0</span><span class="op" id="4897326">]</span><span class="op" id="4897327">&amp;</span><span class="num" id="4897328">0x0f</span>&nbsp;<span class="op" id="4897333">!=</span>&nbsp;<span class="ident" id="4897336"><a href="/compress/zlib/reader.go.html#4894338">zlibDeflate</a></span><span class="op" id="4897347">)</span>&nbsp;<span class="op" id="4897349">||</span>&nbsp;<span class="op" id="4897352">(</span><span class="ident" id="4897353"><a href="/compress/zlib/reader.go.html#4897262">h</a></span><span class="op" id="4897354">%</span><span class="num" id="4897355">31</span>&nbsp;<span class="op" id="4897358">!=</span>&nbsp;<span class="num" id="4897361">0</span><span class="op" id="4897362">)</span>&nbsp;<span class="op" id="4897364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897368">return</span>&nbsp;<span class="ident" id="4897375"><a href="/compress/zlib/reader.go.html#4894713">ErrHeader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897389">haveDict</span>&nbsp;<span class="op" id="4897398">:=</span>&nbsp;<span class="ident" id="4897401"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897402">.</span><span class="ident" id="4897403">scratch</span><span class="op" id="4897410">[</span><span class="num" id="4897411">1</span><span class="op" id="4897412">]</span><span class="op" id="4897413">&amp;</span><span class="num" id="4897414">0x20</span>&nbsp;<span class="op" id="4897419">!=</span>&nbsp;<span class="num" id="4897422">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897425">if</span>&nbsp;<span class="ident" id="4897428"><a href="/compress/zlib/reader.go.html#4897389">haveDict</a></span>&nbsp;<span class="op" id="4897437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897441">_</span><span class="op" id="4897442">,</span>&nbsp;<span class="ident" id="4897444"><a href="/compress/zlib/reader.go.html#4897188">err</a></span>&nbsp;<span class="op" id="4897448">=</span>&nbsp;<span class="ident" id="4897450"><a href="/compress/zlib/reader.go.html#4894324">io</a></span><span class="op" id="4897452">.</span><span class="ident" id="4897453">ReadFull</span><span class="op" id="4897461">(</span><span class="ident" id="4897462"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897463">.</span><span class="ident" id="4897464">r</span><span class="op" id="4897465">,</span>&nbsp;<span class="ident" id="4897467"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897468">.</span><span class="ident" id="4897469">scratch</span><span class="op" id="4897476">[</span><span class="num" id="4897477">0</span><span class="op" id="4897478">:</span><span class="num" id="4897479">4</span><span class="op" id="4897480">]</span><span class="op" id="4897481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897485">if</span>&nbsp;<span class="ident" id="4897488"><a href="/compress/zlib/reader.go.html#4897188">err</a></span>&nbsp;<span class="op" id="4897492">!=</span>&nbsp;<span class="ident" id="4897495">nil</span>&nbsp;<span class="op" id="4897499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897504">return</span>&nbsp;<span class="ident" id="4897511"><a href="/compress/zlib/reader.go.html#4897188">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897517">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897521">checksum</span>&nbsp;<span class="op" id="4897530">:=</span>&nbsp;<span class="builtintype" id="4897533">uint32</span><span class="op" id="4897539">(</span><span class="ident" id="4897540"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897541">.</span><span class="ident" id="4897542">scratch</span><span class="op" id="4897549">[</span><span class="num" id="4897550">0</span><span class="op" id="4897551">]</span><span class="op" id="4897552">)</span><span class="op" id="4897553">&lt;&lt;</span><span class="num" id="4897555">24</span>&nbsp;<span class="op" id="4897558">|</span>&nbsp;<span class="builtintype" id="4897560">uint32</span><span class="op" id="4897566">(</span><span class="ident" id="4897567"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897568">.</span><span class="ident" id="4897569">scratch</span><span class="op" id="4897576">[</span><span class="num" id="4897577">1</span><span class="op" id="4897578">]</span><span class="op" id="4897579">)</span><span class="op" id="4897580">&lt;&lt;</span><span class="num" id="4897582">16</span>&nbsp;<span class="op" id="4897585">|</span>&nbsp;<span class="builtintype" id="4897587">uint32</span><span class="op" id="4897593">(</span><span class="ident" id="4897594"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897595">.</span><span class="ident" id="4897596">scratch</span><span class="op" id="4897603">[</span><span class="num" id="4897604">2</span><span class="op" id="4897605">]</span><span class="op" id="4897606">)</span><span class="op" id="4897607">&lt;&lt;</span><span class="num" id="4897609">8</span>&nbsp;<span class="op" id="4897611">|</span>&nbsp;<span class="builtintype" id="4897613">uint32</span><span class="op" id="4897619">(</span><span class="ident" id="4897620"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897621">.</span><span class="ident" id="4897622">scratch</span><span class="op" id="4897629">[</span><span class="num" id="4897630">3</span><span class="op" id="4897631">]</span><span class="op" id="4897632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897636">if</span>&nbsp;<span class="ident" id="4897639"><a href="/compress/zlib/reader.go.html#4897521">checksum</a></span>&nbsp;<span class="op" id="4897648">!=</span>&nbsp;<span class="ident" id="4897651"><a href="/compress/zlib/reader.go.html#4894308">adler32</a></span><span class="op" id="4897658">.</span><span class="ident" id="4897659">Checksum</span><span class="op" id="4897667">(</span><span class="ident" id="4897668"><a href="/compress/zlib/reader.go.html#4897075">dict</a></span><span class="op" id="4897672">)</span>&nbsp;<span class="op" id="4897674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897679">return</span>&nbsp;<span class="ident" id="4897686"><a href="/compress/zlib/reader.go.html#4894580">ErrDictionary</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897705">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897708">if</span>&nbsp;<span class="ident" id="4897711"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897712">.</span><span class="ident" id="4897713">decompressor</span>&nbsp;<span class="op" id="4897726">==</span>&nbsp;<span class="ident" id="4897729">nil</span>&nbsp;<span class="op" id="4897733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897737">if</span>&nbsp;<span class="ident" id="4897740"><a href="/compress/zlib/reader.go.html#4897389">haveDict</a></span>&nbsp;<span class="op" id="4897749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897754"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897755">.</span><span class="ident" id="4897756">decompressor</span>&nbsp;<span class="op" id="4897769">=</span>&nbsp;<span class="ident" id="4897771"><a href="/compress/zlib/reader.go.html#4894272">flate</a></span><span class="op" id="4897776">.</span><span class="ident" id="4897777">NewReaderDict</span><span class="op" id="4897790">(</span><span class="ident" id="4897791"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897792">.</span><span class="ident" id="4897793">r</span><span class="op" id="4897794">,</span>&nbsp;<span class="ident" id="4897796"><a href="/compress/zlib/reader.go.html#4897075">dict</a></span><span class="op" id="4897800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897804">}</span>&nbsp;<span class="keyword" id="4897806">else</span>&nbsp;<span class="op" id="4897811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897816"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897817">.</span><span class="ident" id="4897818">decompressor</span>&nbsp;<span class="op" id="4897831">=</span>&nbsp;<span class="ident" id="4897833"><a href="/compress/zlib/reader.go.html#4894272">flate</a></span><span class="op" id="4897838">.</span><span class="ident" id="4897839">NewReader</span><span class="op" id="4897848">(</span><span class="ident" id="4897849"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897850">.</span><span class="ident" id="4897851">r</span><span class="op" id="4897852">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897859">}</span>&nbsp;<span class="keyword" id="4897861">else</span>&nbsp;<span class="op" id="4897866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897870"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897871">.</span><span class="ident" id="4897872">decompressor</span><span class="op" id="4897884">.</span><span class="op" id="4897885">(</span><span class="ident" id="4897886"><a href="/compress/zlib/reader.go.html#4894272">flate</a></span><span class="op" id="4897891">.</span><span class="ident" id="4897892">Resetter</span><span class="op" id="4897900">)</span><span class="op" id="4897901">.</span><span class="ident" id="4897902">Reset</span><span class="op" id="4897907">(</span><span class="ident" id="4897908"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897909">.</span><span class="ident" id="4897910">r</span><span class="op" id="4897911">,</span>&nbsp;<span class="ident" id="4897913"><a href="/compress/zlib/reader.go.html#4897075">dict</a></span><span class="op" id="4897917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4897920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4897923"><a href="/compress/zlib/reader.go.html#4897045">z</a></span><span class="op" id="4897924">.</span><span class="ident" id="4897925">digest</span>&nbsp;<span class="op" id="4897932">=</span>&nbsp;<span class="ident" id="4897934"><a href="/compress/zlib/reader.go.html#4894308">adler32</a></span><span class="op" id="4897941">.</span><span class="ident" id="4897942">New</span><span class="op" id="4897945">(</span><span class="op" id="4897946">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4897949">return</span>&nbsp;<span class="ident" id="4897956">nil</span><br>
<span class="lineno"></span><span class="op" id="4897960">}</span>
</div>
</body>
</html>
