<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8049763">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8049818">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8049872">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8049923">package</span>&nbsp;<span class="ident" id="8049931">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8049939">import</span>&nbsp;<span class="op" id="8049946">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8049949">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8049958">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8049975">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8049996">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8050007">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8050017">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="8050020">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="8050065">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="8050092">func</span>&nbsp;<span class="ident" id="8050097">RemoveAll</span><span class="op" id="8050106">(</span><span class="op" id="8050107">)</span>&nbsp;<span class="op" id="8050109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050112"><a href="/expvar/expvar.go.html#4852840">mutex</a></span><span class="op" id="8050117">.</span><span class="ident" id="8050118">Lock</span><span class="op" id="8050122">(</span><span class="op" id="8050123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050126">defer</span>&nbsp;<span class="ident" id="8050132"><a href="/expvar/expvar.go.html#4852840">mutex</a></span><span class="op" id="8050137">.</span><span class="ident" id="8050138">Unlock</span><span class="op" id="8050144">(</span><span class="op" id="8050145">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050148"><a href="/expvar/expvar.go.html#4852862">vars</a></span>&nbsp;<span class="op" id="8050153">=</span>&nbsp;<span class="builtinfunc" id="8050155">make</span><span class="op" id="8050159">(</span><span class="keyword" id="8050160">map</span><span class="op" id="8050163">[</span><span class="builtintype" id="8050164">string</span><span class="op" id="8050170">]</span><span class="ident" id="8050171"><a href="/expvar/expvar.go.html#4849090">Var</a></span><span class="op" id="8050174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050177"><a href="/expvar/expvar.go.html#4852894">varKeys</a></span>&nbsp;<span class="op" id="8050185">=</span>&nbsp;<span class="ident" id="8050187">nil</span><br>
<span class="lineno"></span><span class="op" id="8050191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8050194">func</span>&nbsp;<span class="ident" id="8050199">TestInt</span><span class="op" id="8050206">(</span><span class="ident" id="8050207">t</span>&nbsp;<span class="op" id="8050209">*</span><span class="ident" id="8050210"><a href="/expvar/expvar_test.go.html#8050007">testing</a></span><span class="op" id="8050217">.</span><span class="ident" id="8050218">T</span><span class="op" id="8050219">)</span>&nbsp;<span class="op" id="8050221">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050224"><a href="/expvar/expvar_test.go.html#8050097">RemoveAll</a></span><span class="op" id="8050233">(</span><span class="op" id="8050234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050237">reqs</span>&nbsp;<span class="op" id="8050242">:=</span>&nbsp;<span class="ident" id="8050245"><a href="/expvar/expvar.go.html#4853558">NewInt</a></span><span class="op" id="8050251">(</span><span class="string" id="8050252">&#34;requests&#34;</span><span class="op" id="8050262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050265">if</span>&nbsp;<span class="ident" id="8050268"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050272">.</span><span class="ident" id="8050273">i</span>&nbsp;<span class="op" id="8050275">!=</span>&nbsp;<span class="num" id="8050278">0</span>&nbsp;<span class="op" id="8050280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050284"><a href="/expvar/expvar_test.go.html#8050207">t</a></span><span class="op" id="8050285">.</span><span class="ident" id="8050286">Errorf</span><span class="op" id="8050292">(</span><span class="string" id="8050293">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8050314">,</span>&nbsp;<span class="ident" id="8050316"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050320">.</span><span class="ident" id="8050321">i</span><span class="op" id="8050322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050325">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050328">if</span>&nbsp;<span class="ident" id="8050331"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span>&nbsp;<span class="op" id="8050336">!=</span>&nbsp;<span class="ident" id="8050339"><a href="/expvar/expvar.go.html#4853407">Get</a></span><span class="op" id="8050342">(</span><span class="string" id="8050343">&#34;requests&#34;</span><span class="op" id="8050353">)</span><span class="op" id="8050354">.</span><span class="op" id="8050355">(</span><span class="op" id="8050356">*</span><span class="ident" id="8050357"><a href="/expvar/expvar.go.html#4849201">Int</a></span><span class="op" id="8050360">)</span>&nbsp;<span class="op" id="8050362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050366"><a href="/expvar/expvar_test.go.html#8050207">t</a></span><span class="op" id="8050367">.</span><span class="ident" id="8050368">Errorf</span><span class="op" id="8050374">(</span><span class="string" id="8050375">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="8050390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050397"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050401">.</span><span class="ident" id="8050402">Add</span><span class="op" id="8050405">(</span><span class="num" id="8050406">1</span><span class="op" id="8050407">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050410"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050414">.</span><span class="ident" id="8050415">Add</span><span class="op" id="8050418">(</span><span class="num" id="8050419">3</span><span class="op" id="8050420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050423">if</span>&nbsp;<span class="ident" id="8050426"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050430">.</span><span class="ident" id="8050431">i</span>&nbsp;<span class="op" id="8050433">!=</span>&nbsp;<span class="num" id="8050436">4</span>&nbsp;<span class="op" id="8050438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050442"><a href="/expvar/expvar_test.go.html#8050207">t</a></span><span class="op" id="8050443">.</span><span class="ident" id="8050444">Errorf</span><span class="op" id="8050450">(</span><span class="string" id="8050451">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="8050472">,</span>&nbsp;<span class="ident" id="8050474"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050478">.</span><span class="ident" id="8050479">i</span><span class="op" id="8050480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050487">if</span>&nbsp;<span class="ident" id="8050490">s</span>&nbsp;<span class="op" id="8050492">:=</span>&nbsp;<span class="ident" id="8050495"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050499">.</span><span class="ident" id="8050500">String</span><span class="op" id="8050506">(</span><span class="op" id="8050507">)</span><span class="op" id="8050508">;</span>&nbsp;<span class="ident" id="8050510"><a href="/expvar/expvar_test.go.html#8050490">s</a></span>&nbsp;<span class="op" id="8050512">!=</span>&nbsp;<span class="string" id="8050515">&#34;4&#34;</span>&nbsp;<span class="op" id="8050519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050523"><a href="/expvar/expvar_test.go.html#8050207">t</a></span><span class="op" id="8050524">.</span><span class="ident" id="8050525">Errorf</span><span class="op" id="8050531">(</span><span class="string" id="8050532">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="8050564">,</span>&nbsp;<span class="ident" id="8050566"><a href="/expvar/expvar_test.go.html#8050490">s</a></span><span class="op" id="8050567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050574"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050578">.</span><span class="ident" id="8050579">Set</span><span class="op" id="8050582">(</span><span class="op" id="8050583">-</span><span class="num" id="8050584">2</span><span class="op" id="8050585">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050588">if</span>&nbsp;<span class="ident" id="8050591"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050595">.</span><span class="ident" id="8050596">i</span>&nbsp;<span class="op" id="8050598">!=</span>&nbsp;<span class="op" id="8050601">-</span><span class="num" id="8050602">2</span>&nbsp;<span class="op" id="8050604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050608"><a href="/expvar/expvar_test.go.html#8050207">t</a></span><span class="op" id="8050609">.</span><span class="ident" id="8050610">Errorf</span><span class="op" id="8050616">(</span><span class="string" id="8050617">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="8050639">,</span>&nbsp;<span class="ident" id="8050641"><a href="/expvar/expvar_test.go.html#8050237">reqs</a></span><span class="op" id="8050645">.</span><span class="ident" id="8050646">i</span><span class="op" id="8050647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050650">}</span><br>
<span class="lineno"></span><span class="op" id="8050652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="8050655">func</span>&nbsp;<span class="ident" id="8050660">TestFloat</span><span class="op" id="8050669">(</span><span class="ident" id="8050670">t</span>&nbsp;<span class="op" id="8050672">*</span><span class="ident" id="8050673"><a href="/expvar/expvar_test.go.html#8050007">testing</a></span><span class="op" id="8050680">.</span><span class="ident" id="8050681">T</span><span class="op" id="8050682">)</span>&nbsp;<span class="op" id="8050684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050687"><a href="/expvar/expvar_test.go.html#8050097">RemoveAll</a></span><span class="op" id="8050696">(</span><span class="op" id="8050697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050700">reqs</span>&nbsp;<span class="op" id="8050705">:=</span>&nbsp;<span class="ident" id="8050708"><a href="/expvar/expvar.go.html#4853636">NewFloat</a></span><span class="op" id="8050716">(</span><span class="string" id="8050717">&#34;requests-float&#34;</span><span class="op" id="8050733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050736">if</span>&nbsp;<span class="ident" id="8050739"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050743">.</span><span class="ident" id="8050744">f</span>&nbsp;<span class="op" id="8050746">!=</span>&nbsp;<span class="num" id="8050749">0.0</span>&nbsp;<span class="op" id="8050753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050757"><a href="/expvar/expvar_test.go.html#8050670">t</a></span><span class="op" id="8050758">.</span><span class="ident" id="8050759">Errorf</span><span class="op" id="8050765">(</span><span class="string" id="8050766">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="8050787">,</span>&nbsp;<span class="ident" id="8050789"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050793">.</span><span class="ident" id="8050794">f</span><span class="op" id="8050795">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050801">if</span>&nbsp;<span class="ident" id="8050804"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span>&nbsp;<span class="op" id="8050809">!=</span>&nbsp;<span class="ident" id="8050812"><a href="/expvar/expvar.go.html#4853407">Get</a></span><span class="op" id="8050815">(</span><span class="string" id="8050816">&#34;requests-float&#34;</span><span class="op" id="8050832">)</span><span class="op" id="8050833">.</span><span class="op" id="8050834">(</span><span class="op" id="8050835">*</span><span class="ident" id="8050836"><a href="/expvar/expvar.go.html#4849592">Float</a></span><span class="op" id="8050841">)</span>&nbsp;<span class="op" id="8050843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050847"><a href="/expvar/expvar_test.go.html#8050670">t</a></span><span class="op" id="8050848">.</span><span class="ident" id="8050849">Errorf</span><span class="op" id="8050855">(</span><span class="string" id="8050856">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="8050871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050878"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050882">.</span><span class="ident" id="8050883">Add</span><span class="op" id="8050886">(</span><span class="num" id="8050887">1.5</span><span class="op" id="8050890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050893"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050897">.</span><span class="ident" id="8050898">Add</span><span class="op" id="8050901">(</span><span class="num" id="8050902">1.25</span><span class="op" id="8050906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050909">if</span>&nbsp;<span class="ident" id="8050912"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050916">.</span><span class="ident" id="8050917">f</span>&nbsp;<span class="op" id="8050919">!=</span>&nbsp;<span class="num" id="8050922">2.75</span>&nbsp;<span class="op" id="8050927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050931"><a href="/expvar/expvar_test.go.html#8050670">t</a></span><span class="op" id="8050932">.</span><span class="ident" id="8050933">Errorf</span><span class="op" id="8050939">(</span><span class="string" id="8050940">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="8050964">,</span>&nbsp;<span class="ident" id="8050966"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050970">.</span><span class="ident" id="8050971">f</span><span class="op" id="8050972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050975">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050979">if</span>&nbsp;<span class="ident" id="8050982">s</span>&nbsp;<span class="op" id="8050984">:=</span>&nbsp;<span class="ident" id="8050987"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8050991">.</span><span class="ident" id="8050992">String</span><span class="op" id="8050998">(</span><span class="op" id="8050999">)</span><span class="op" id="8051000">;</span>&nbsp;<span class="ident" id="8051002"><a href="/expvar/expvar_test.go.html#8050982">s</a></span>&nbsp;<span class="op" id="8051004">!=</span>&nbsp;<span class="string" id="8051007">&#34;2.75&#34;</span>&nbsp;<span class="op" id="8051014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051018"><a href="/expvar/expvar_test.go.html#8050670">t</a></span><span class="op" id="8051019">.</span><span class="ident" id="8051020">Errorf</span><span class="op" id="8051026">(</span><span class="string" id="8051027">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="8051062">,</span>&nbsp;<span class="ident" id="8051064"><a href="/expvar/expvar_test.go.html#8050982">s</a></span><span class="op" id="8051065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051072"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8051076">.</span><span class="ident" id="8051077">Add</span><span class="op" id="8051080">(</span><span class="op" id="8051081">-</span><span class="num" id="8051082">2</span><span class="op" id="8051083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051086">if</span>&nbsp;<span class="ident" id="8051089"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8051093">.</span><span class="ident" id="8051094">f</span>&nbsp;<span class="op" id="8051096">!=</span>&nbsp;<span class="num" id="8051099">0.75</span>&nbsp;<span class="op" id="8051104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051108"><a href="/expvar/expvar_test.go.html#8050670">t</a></span><span class="op" id="8051109">.</span><span class="ident" id="8051110">Errorf</span><span class="op" id="8051116">(</span><span class="string" id="8051117">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="8051141">,</span>&nbsp;<span class="ident" id="8051143"><a href="/expvar/expvar_test.go.html#8050700">reqs</a></span><span class="op" id="8051147">.</span><span class="ident" id="8051148">f</span><span class="op" id="8051149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051152">}</span><br>
<span class="lineno"></span><span class="op" id="8051154">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="8051157">func</span>&nbsp;<span class="ident" id="8051162">TestString</span><span class="op" id="8051172">(</span><span class="ident" id="8051173">t</span>&nbsp;<span class="op" id="8051175">*</span><span class="ident" id="8051176"><a href="/expvar/expvar_test.go.html#8050007">testing</a></span><span class="op" id="8051183">.</span><span class="ident" id="8051184">T</span><span class="op" id="8051185">)</span>&nbsp;<span class="op" id="8051187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051190"><a href="/expvar/expvar_test.go.html#8050097">RemoveAll</a></span><span class="op" id="8051199">(</span><span class="op" id="8051200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051203">name</span>&nbsp;<span class="op" id="8051208">:=</span>&nbsp;<span class="ident" id="8051211"><a href="/expvar/expvar.go.html#4853805">NewString</a></span><span class="op" id="8051220">(</span><span class="string" id="8051221">&#34;my-name&#34;</span><span class="op" id="8051230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051233">if</span>&nbsp;<span class="ident" id="8051236"><a href="/expvar/expvar_test.go.html#8051203">name</a></span><span class="op" id="8051240">.</span><span class="ident" id="8051241">s</span>&nbsp;<span class="op" id="8051243">!=</span>&nbsp;<span class="string" id="8051246">&#34;&#34;</span>&nbsp;<span class="op" id="8051249">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051253"><a href="/expvar/expvar_test.go.html#8051173">t</a></span><span class="op" id="8051254">.</span><span class="ident" id="8051255">Errorf</span><span class="op" id="8051261">(</span><span class="string" id="8051262">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="8051286">,</span>&nbsp;<span class="ident" id="8051288"><a href="/expvar/expvar_test.go.html#8051203">name</a></span><span class="op" id="8051292">.</span><span class="ident" id="8051293">s</span><span class="op" id="8051294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051301"><a href="/expvar/expvar_test.go.html#8051203">name</a></span><span class="op" id="8051305">.</span><span class="ident" id="8051306">Set</span><span class="op" id="8051309">(</span><span class="string" id="8051310">&#34;Mike&#34;</span><span class="op" id="8051316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051319">if</span>&nbsp;<span class="ident" id="8051322"><a href="/expvar/expvar_test.go.html#8051203">name</a></span><span class="op" id="8051326">.</span><span class="ident" id="8051327">s</span>&nbsp;<span class="op" id="8051329">!=</span>&nbsp;<span class="string" id="8051332">&#34;Mike&#34;</span>&nbsp;<span class="op" id="8051339">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051343"><a href="/expvar/expvar_test.go.html#8051173">t</a></span><span class="op" id="8051344">.</span><span class="ident" id="8051345">Errorf</span><span class="op" id="8051351">(</span><span class="string" id="8051352">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="8051380">,</span>&nbsp;<span class="ident" id="8051382"><a href="/expvar/expvar_test.go.html#8051203">name</a></span><span class="op" id="8051386">.</span><span class="ident" id="8051387">s</span><span class="op" id="8051388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051395">if</span>&nbsp;<span class="ident" id="8051398">s</span>&nbsp;<span class="op" id="8051400">:=</span>&nbsp;<span class="ident" id="8051403"><a href="/expvar/expvar_test.go.html#8051203">name</a></span><span class="op" id="8051407">.</span><span class="ident" id="8051408">String</span><span class="op" id="8051414">(</span><span class="op" id="8051415">)</span><span class="op" id="8051416">;</span>&nbsp;<span class="ident" id="8051418"><a href="/expvar/expvar_test.go.html#8051398">s</a></span>&nbsp;<span class="op" id="8051420">!=</span>&nbsp;<span class="string" id="8051423">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="8051434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051438"><a href="/expvar/expvar_test.go.html#8051173">t</a></span><span class="op" id="8051439">.</span><span class="ident" id="8051440">Errorf</span><span class="op" id="8051446">(</span><span class="string" id="8051447">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="8051486">,</span>&nbsp;<span class="ident" id="8051488"><a href="/expvar/expvar_test.go.html#8051398">s</a></span><span class="op" id="8051489">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051492">}</span><br>
<span class="lineno"></span><span class="op" id="8051494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8051497">func</span>&nbsp;<span class="ident" id="8051502">TestMapCounter</span><span class="op" id="8051516">(</span><span class="ident" id="8051517">t</span>&nbsp;<span class="op" id="8051519">*</span><span class="ident" id="8051520"><a href="/expvar/expvar_test.go.html#8050007">testing</a></span><span class="op" id="8051527">.</span><span class="ident" id="8051528">T</span><span class="op" id="8051529">)</span>&nbsp;<span class="op" id="8051531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051534"><a href="/expvar/expvar_test.go.html#8050097">RemoveAll</a></span><span class="op" id="8051543">(</span><span class="op" id="8051544">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051547">colors</span>&nbsp;<span class="op" id="8051554">:=</span>&nbsp;<span class="ident" id="8051557"><a href="/expvar/expvar.go.html#4853720">NewMap</a></span><span class="op" id="8051563">(</span><span class="string" id="8051564">&#34;bike-shed-colors&#34;</span><span class="op" id="8051582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051586"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051592">.</span><span class="ident" id="8051593">Add</span><span class="op" id="8051596">(</span><span class="string" id="8051597">&#34;red&#34;</span><span class="op" id="8051602">,</span>&nbsp;<span class="num" id="8051604">1</span><span class="op" id="8051605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051608"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051614">.</span><span class="ident" id="8051615">Add</span><span class="op" id="8051618">(</span><span class="string" id="8051619">&#34;red&#34;</span><span class="op" id="8051624">,</span>&nbsp;<span class="num" id="8051626">2</span><span class="op" id="8051627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051630"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051636">.</span><span class="ident" id="8051637">Add</span><span class="op" id="8051640">(</span><span class="string" id="8051641">&#34;blue&#34;</span><span class="op" id="8051647">,</span>&nbsp;<span class="num" id="8051649">4</span><span class="op" id="8051650">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051653"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051659">.</span><span class="ident" id="8051660">AddFloat</span><span class="op" id="8051668">(</span><span class="string" id="8051669">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="8051685">,</span>&nbsp;<span class="num" id="8051687">4.125</span><span class="op" id="8051692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051695">if</span>&nbsp;<span class="ident" id="8051698">x</span>&nbsp;<span class="op" id="8051700">:=</span>&nbsp;<span class="ident" id="8051703"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051709">.</span><span class="ident" id="8051710">m</span><span class="op" id="8051711">[</span><span class="string" id="8051712">&#34;red&#34;</span><span class="op" id="8051717">]</span><span class="op" id="8051718">.</span><span class="op" id="8051719">(</span><span class="op" id="8051720">*</span><span class="ident" id="8051721"><a href="/expvar/expvar.go.html#4849201">Int</a></span><span class="op" id="8051724">)</span><span class="op" id="8051725">.</span><span class="ident" id="8051726">i</span><span class="op" id="8051727">;</span>&nbsp;<span class="ident" id="8051729"><a href="/expvar/expvar_test.go.html#8051698">x</a></span>&nbsp;<span class="op" id="8051731">!=</span>&nbsp;<span class="num" id="8051734">3</span>&nbsp;<span class="op" id="8051736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051740"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8051741">.</span><span class="ident" id="8051742">Errorf</span><span class="op" id="8051748">(</span><span class="string" id="8051749">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="8051781">,</span>&nbsp;<span class="ident" id="8051783"><a href="/expvar/expvar_test.go.html#8051698">x</a></span><span class="op" id="8051784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051790">if</span>&nbsp;<span class="ident" id="8051793">x</span>&nbsp;<span class="op" id="8051795">:=</span>&nbsp;<span class="ident" id="8051798"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051804">.</span><span class="ident" id="8051805">m</span><span class="op" id="8051806">[</span><span class="string" id="8051807">&#34;blue&#34;</span><span class="op" id="8051813">]</span><span class="op" id="8051814">.</span><span class="op" id="8051815">(</span><span class="op" id="8051816">*</span><span class="ident" id="8051817"><a href="/expvar/expvar.go.html#4849201">Int</a></span><span class="op" id="8051820">)</span><span class="op" id="8051821">.</span><span class="ident" id="8051822">i</span><span class="op" id="8051823">;</span>&nbsp;<span class="ident" id="8051825"><a href="/expvar/expvar_test.go.html#8051793">x</a></span>&nbsp;<span class="op" id="8051827">!=</span>&nbsp;<span class="num" id="8051830">4</span>&nbsp;<span class="op" id="8051832">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051836"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8051837">.</span><span class="ident" id="8051838">Errorf</span><span class="op" id="8051844">(</span><span class="string" id="8051845">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="8051878">,</span>&nbsp;<span class="ident" id="8051880"><a href="/expvar/expvar_test.go.html#8051793">x</a></span><span class="op" id="8051881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051887">if</span>&nbsp;<span class="ident" id="8051890">x</span>&nbsp;<span class="op" id="8051892">:=</span>&nbsp;<span class="ident" id="8051895"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8051901">.</span><span class="ident" id="8051902">m</span><span class="op" id="8051903">[</span><span class="string" id="8051904">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="8051920">]</span><span class="op" id="8051921">.</span><span class="op" id="8051922">(</span><span class="op" id="8051923">*</span><span class="ident" id="8051924"><a href="/expvar/expvar.go.html#4849592">Float</a></span><span class="op" id="8051929">)</span><span class="op" id="8051930">.</span><span class="ident" id="8051931">f</span><span class="op" id="8051932">;</span>&nbsp;<span class="ident" id="8051934"><a href="/expvar/expvar_test.go.html#8051890">x</a></span>&nbsp;<span class="op" id="8051936">!=</span>&nbsp;<span class="num" id="8051939">4.125</span>&nbsp;<span class="op" id="8051945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051949"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8051950">.</span><span class="ident" id="8051951">Errorf</span><span class="op" id="8051957">(</span><span class="string" id="8051958">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="8052003">,</span>&nbsp;<span class="ident" id="8052005"><a href="/expvar/expvar_test.go.html#8051890">x</a></span><span class="op" id="8052006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052009">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8052013">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8052066">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052115">s</span>&nbsp;<span class="op" id="8052117">:=</span>&nbsp;<span class="ident" id="8052120"><a href="/expvar/expvar_test.go.html#8051547">colors</a></span><span class="op" id="8052126">.</span><span class="ident" id="8052127">String</span><span class="op" id="8052133">(</span><span class="op" id="8052134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052137">var</span>&nbsp;<span class="ident" id="8052141">j</span>&nbsp;<span class="keyword" id="8052143">interface</span><span class="op" id="8052152">{</span><span class="op" id="8052153">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052156">err</span>&nbsp;<span class="op" id="8052160">:=</span>&nbsp;<span class="ident" id="8052163"><a href="/expvar/expvar_test.go.html#8049958">json</a></span><span class="op" id="8052167">.</span><span class="ident" id="8052168">Unmarshal</span><span class="op" id="8052177">(</span><span class="op" id="8052178">[</span><span class="op" id="8052179">]</span><span class="builtintype" id="8052180">byte</span><span class="op" id="8052184">(</span><span class="ident" id="8052185"><a href="/expvar/expvar_test.go.html#8052115">s</a></span><span class="op" id="8052186">)</span><span class="op" id="8052187">,</span>&nbsp;<span class="op" id="8052189">&amp;</span><span class="ident" id="8052190"><a href="/expvar/expvar_test.go.html#8052141">j</a></span><span class="op" id="8052191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052194">if</span>&nbsp;<span class="ident" id="8052197"><a href="/expvar/expvar_test.go.html#8052156">err</a></span>&nbsp;<span class="op" id="8052201">!=</span>&nbsp;<span class="ident" id="8052204">nil</span>&nbsp;<span class="op" id="8052208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052212"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8052213">.</span><span class="ident" id="8052214">Errorf</span><span class="op" id="8052220">(</span><span class="string" id="8052221">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="8052259">,</span>&nbsp;<span class="ident" id="8052261"><a href="/expvar/expvar_test.go.html#8052156">err</a></span><span class="op" id="8052264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052270">m</span><span class="op" id="8052271">,</span>&nbsp;<span class="ident" id="8052273">ok</span>&nbsp;<span class="op" id="8052276">:=</span>&nbsp;<span class="ident" id="8052279"><a href="/expvar/expvar_test.go.html#8052141">j</a></span><span class="op" id="8052280">.</span><span class="op" id="8052281">(</span><span class="keyword" id="8052282">map</span><span class="op" id="8052285">[</span><span class="builtintype" id="8052286">string</span><span class="op" id="8052292">]</span><span class="keyword" id="8052293">interface</span><span class="op" id="8052302">{</span><span class="op" id="8052303">}</span><span class="op" id="8052304">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052307">if</span>&nbsp;<span class="op" id="8052310">!</span><span class="ident" id="8052311"><a href="/expvar/expvar_test.go.html#8052273">ok</a></span>&nbsp;<span class="op" id="8052314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052318"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8052319">.</span><span class="ident" id="8052320">Error</span><span class="op" id="8052325">(</span><span class="string" id="8052326">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="8052365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052371">red</span>&nbsp;<span class="op" id="8052375">:=</span>&nbsp;<span class="ident" id="8052378"><a href="/expvar/expvar_test.go.html#8052270">m</a></span><span class="op" id="8052379">[</span><span class="string" id="8052380">&#34;red&#34;</span><span class="op" id="8052385">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052388">x</span><span class="op" id="8052389">,</span>&nbsp;<span class="ident" id="8052391"><a href="/expvar/expvar_test.go.html#8052273">ok</a></span>&nbsp;<span class="op" id="8052394">:=</span>&nbsp;<span class="ident" id="8052397"><a href="/expvar/expvar_test.go.html#8052371">red</a></span><span class="op" id="8052400">.</span><span class="op" id="8052401">(</span><span class="builtintype" id="8052402">float64</span><span class="op" id="8052409">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052412">if</span>&nbsp;<span class="op" id="8052415">!</span><span class="ident" id="8052416"><a href="/expvar/expvar_test.go.html#8052273">ok</a></span>&nbsp;<span class="op" id="8052419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052423"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8052424">.</span><span class="ident" id="8052425">Error</span><span class="op" id="8052430">(</span><span class="string" id="8052431">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="8052460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052466">if</span>&nbsp;<span class="ident" id="8052469"><a href="/expvar/expvar_test.go.html#8052388">x</a></span>&nbsp;<span class="op" id="8052471">!=</span>&nbsp;<span class="num" id="8052474">3</span>&nbsp;<span class="op" id="8052476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052480"><a href="/expvar/expvar_test.go.html#8051517">t</a></span><span class="op" id="8052481">.</span><span class="ident" id="8052482">Errorf</span><span class="op" id="8052488">(</span><span class="string" id="8052489">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="8052507">,</span>&nbsp;<span class="ident" id="8052509"><a href="/expvar/expvar_test.go.html#8052388">x</a></span><span class="op" id="8052510">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052513">}</span><br>
<span class="lineno"></span><span class="op" id="8052515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8052518">func</span>&nbsp;<span class="ident" id="8052523">TestFunc</span><span class="op" id="8052531">(</span><span class="ident" id="8052532">t</span>&nbsp;<span class="op" id="8052534">*</span><span class="ident" id="8052535"><a href="/expvar/expvar_test.go.html#8050007">testing</a></span><span class="op" id="8052542">.</span><span class="ident" id="8052543">T</span><span class="op" id="8052544">)</span>&nbsp;<span class="op" id="8052546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052549"><a href="/expvar/expvar_test.go.html#8050097">RemoveAll</a></span><span class="op" id="8052558">(</span><span class="op" id="8052559">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052562">var</span>&nbsp;<span class="ident" id="8052566">x</span>&nbsp;<span class="keyword" id="8052568">interface</span><span class="op" id="8052577">{</span><span class="op" id="8052578">}</span>&nbsp;<span class="op" id="8052580">=</span>&nbsp;<span class="op" id="8052582">[</span><span class="op" id="8052583">]</span><span class="builtintype" id="8052584">string</span><span class="op" id="8052590">{</span><span class="string" id="8052591">&#34;a&#34;</span><span class="op" id="8052594">,</span>&nbsp;<span class="string" id="8052596">&#34;b&#34;</span><span class="op" id="8052599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052602">f</span>&nbsp;<span class="op" id="8052604">:=</span>&nbsp;<span class="ident" id="8052607"><a href="/expvar/expvar.go.html#4852700">Func</a></span><span class="op" id="8052611">(</span><span class="keyword" id="8052612">func</span><span class="op" id="8052616">(</span><span class="op" id="8052617">)</span>&nbsp;<span class="keyword" id="8052619">interface</span><span class="op" id="8052628">{</span><span class="op" id="8052629">}</span>&nbsp;<span class="op" id="8052631">{</span>&nbsp;<span class="keyword" id="8052633">return</span>&nbsp;<span class="ident" id="8052640"><a href="/expvar/expvar_test.go.html#8052566">x</a></span>&nbsp;<span class="op" id="8052642">}</span><span class="op" id="8052643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052646">if</span>&nbsp;<span class="ident" id="8052649">s</span><span class="op" id="8052650">,</span>&nbsp;<span class="ident" id="8052652">exp</span>&nbsp;<span class="op" id="8052656">:=</span>&nbsp;<span class="ident" id="8052659"><a href="/expvar/expvar_test.go.html#8052602">f</a></span><span class="op" id="8052660">.</span><span class="ident" id="8052661">String</span><span class="op" id="8052667">(</span><span class="op" id="8052668">)</span><span class="op" id="8052669">,</span>&nbsp;<span class="string" id="8052671">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="8052682">;</span>&nbsp;<span class="ident" id="8052684"><a href="/expvar/expvar_test.go.html#8052649">s</a></span>&nbsp;<span class="op" id="8052686">!=</span>&nbsp;<span class="ident" id="8052689"><a href="/expvar/expvar_test.go.html#8052652">exp</a></span>&nbsp;<span class="op" id="8052693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052697"><a href="/expvar/expvar_test.go.html#8052532">t</a></span><span class="op" id="8052698">.</span><span class="ident" id="8052699">Errorf</span><span class="op" id="8052705">(</span><span class="string" id="8052706">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="8052732">,</span>&nbsp;<span class="ident" id="8052734"><a href="/expvar/expvar_test.go.html#8052649">s</a></span><span class="op" id="8052735">,</span>&nbsp;<span class="ident" id="8052737"><a href="/expvar/expvar_test.go.html#8052652">exp</a></span><span class="op" id="8052740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052743">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052747"><a href="/expvar/expvar_test.go.html#8052566">x</a></span>&nbsp;<span class="op" id="8052749">=</span>&nbsp;<span class="num" id="8052751">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052755">if</span>&nbsp;<span class="ident" id="8052758">s</span><span class="op" id="8052759">,</span>&nbsp;<span class="ident" id="8052761">exp</span>&nbsp;<span class="op" id="8052765">:=</span>&nbsp;<span class="ident" id="8052768"><a href="/expvar/expvar_test.go.html#8052602">f</a></span><span class="op" id="8052769">.</span><span class="ident" id="8052770">String</span><span class="op" id="8052776">(</span><span class="op" id="8052777">)</span><span class="op" id="8052778">,</span>&nbsp;<span class="string" id="8052780">`17`</span><span class="op" id="8052784">;</span>&nbsp;<span class="ident" id="8052786"><a href="/expvar/expvar_test.go.html#8052758">s</a></span>&nbsp;<span class="op" id="8052788">!=</span>&nbsp;<span class="ident" id="8052791"><a href="/expvar/expvar_test.go.html#8052761">exp</a></span>&nbsp;<span class="op" id="8052795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052799"><a href="/expvar/expvar_test.go.html#8052532">t</a></span><span class="op" id="8052800">.</span><span class="ident" id="8052801">Errorf</span><span class="op" id="8052807">(</span><span class="string" id="8052808">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="8052834">,</span>&nbsp;<span class="ident" id="8052836"><a href="/expvar/expvar_test.go.html#8052758">s</a></span><span class="op" id="8052837">,</span>&nbsp;<span class="ident" id="8052839"><a href="/expvar/expvar_test.go.html#8052761">exp</a></span><span class="op" id="8052842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052845">}</span><br>
<span class="lineno">145</span><span class="op" id="8052847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8052850">func</span>&nbsp;<span class="ident" id="8052855">TestHandler</span><span class="op" id="8052866">(</span><span class="ident" id="8052867">t</span>&nbsp;<span class="op" id="8052869">*</span><span class="ident" id="8052870"><a href="/expvar/expvar_test.go.html#8050007">testing</a></span><span class="op" id="8052877">.</span><span class="ident" id="8052878">T</span><span class="op" id="8052879">)</span>&nbsp;<span class="op" id="8052881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052884"><a href="/expvar/expvar_test.go.html#8050097">RemoveAll</a></span><span class="op" id="8052893">(</span><span class="op" id="8052894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052897">m</span>&nbsp;<span class="op" id="8052899">:=</span>&nbsp;<span class="ident" id="8052902"><a href="/expvar/expvar.go.html#4853720">NewMap</a></span><span class="op" id="8052908">(</span><span class="string" id="8052909">&#34;map1&#34;</span><span class="op" id="8052915">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052918"><a href="/expvar/expvar_test.go.html#8052897">m</a></span><span class="op" id="8052919">.</span><span class="ident" id="8052920">Add</span><span class="op" id="8052923">(</span><span class="string" id="8052924">&#34;a&#34;</span><span class="op" id="8052927">,</span>&nbsp;<span class="num" id="8052929">1</span><span class="op" id="8052930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052933"><a href="/expvar/expvar_test.go.html#8052897">m</a></span><span class="op" id="8052934">.</span><span class="ident" id="8052935">Add</span><span class="op" id="8052938">(</span><span class="string" id="8052939">&#34;z&#34;</span><span class="op" id="8052942">,</span>&nbsp;<span class="num" id="8052944">2</span><span class="op" id="8052945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052948">m2</span>&nbsp;<span class="op" id="8052951">:=</span>&nbsp;<span class="ident" id="8052954"><a href="/expvar/expvar.go.html#4853720">NewMap</a></span><span class="op" id="8052960">(</span><span class="string" id="8052961">&#34;map2&#34;</span><span class="op" id="8052967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8052970">for</span>&nbsp;<span class="ident" id="8052974">i</span>&nbsp;<span class="op" id="8052976">:=</span>&nbsp;<span class="num" id="8052979">0</span><span class="op" id="8052980">;</span>&nbsp;<span class="ident" id="8052982"><a href="/expvar/expvar_test.go.html#8052974">i</a></span>&nbsp;<span class="op" id="8052984">&lt;</span>&nbsp;<span class="num" id="8052986">9</span><span class="op" id="8052987">;</span>&nbsp;<span class="ident" id="8052989"><a href="/expvar/expvar_test.go.html#8052974">i</a></span><span class="op" id="8052990">++</span>&nbsp;<span class="op" id="8052993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052997"><a href="/expvar/expvar_test.go.html#8052948">m2</a></span><span class="op" id="8052999">.</span><span class="ident" id="8053000">Add</span><span class="op" id="8053003">(</span><span class="ident" id="8053004"><a href="/expvar/expvar_test.go.html#8049996">strconv</a></span><span class="op" id="8053011">.</span><span class="ident" id="8053012">Itoa</span><span class="op" id="8053016">(</span><span class="ident" id="8053017"><a href="/expvar/expvar_test.go.html#8052974">i</a></span><span class="op" id="8053018">)</span><span class="op" id="8053019">,</span>&nbsp;<span class="ident" id="8053021">int64</span><span class="op" id="8053026">(</span><span class="ident" id="8053027"><a href="/expvar/expvar_test.go.html#8052974">i</a></span><span class="op" id="8053028">)</span><span class="op" id="8053029">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053035">rr</span>&nbsp;<span class="op" id="8053038">:=</span>&nbsp;<span class="ident" id="8053041"><a href="/expvar/expvar_test.go.html#8049975">httptest</a></span><span class="op" id="8053049">.</span><span class="ident" id="8053050">NewRecorder</span><span class="op" id="8053061">(</span><span class="op" id="8053062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053065"><a href="/expvar/expvar_test.go.html#8053035">rr</a></span><span class="op" id="8053067">.</span><span class="ident" id="8053068">Body</span>&nbsp;<span class="op" id="8053073">=</span>&nbsp;<span class="builtinfunc" id="8053075">new</span><span class="op" id="8053078">(</span><span class="ident" id="8053079"><a href="/expvar/expvar_test.go.html#8049949">bytes</a></span><span class="op" id="8053084">.</span><span class="ident" id="8053085">Buffer</span><span class="op" id="8053091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053094"><a href="/expvar/expvar.go.html#4854173">expvarHandler</a></span><span class="op" id="8053107">(</span><span class="ident" id="8053108"><a href="/expvar/expvar_test.go.html#8053035">rr</a></span><span class="op" id="8053110">,</span>&nbsp;<span class="ident" id="8053112">nil</span><span class="op" id="8053115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053118">want</span>&nbsp;<span class="op" id="8053123">:=</span>&nbsp;<span class="string" id="8053126">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8053241">if</span>&nbsp;<span class="ident" id="8053244">got</span>&nbsp;<span class="op" id="8053248">:=</span>&nbsp;<span class="ident" id="8053251"><a href="/expvar/expvar_test.go.html#8053035">rr</a></span><span class="op" id="8053253">.</span><span class="ident" id="8053254">Body</span><span class="op" id="8053258">.</span><span class="ident" id="8053259">String</span><span class="op" id="8053265">(</span><span class="op" id="8053266">)</span><span class="op" id="8053267">;</span>&nbsp;<span class="ident" id="8053269"><a href="/expvar/expvar_test.go.html#8053244">got</a></span>&nbsp;<span class="op" id="8053273">!=</span>&nbsp;<span class="ident" id="8053276"><a href="/expvar/expvar_test.go.html#8053118">want</a></span>&nbsp;<span class="op" id="8053281">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053285"><a href="/expvar/expvar_test.go.html#8052867">t</a></span><span class="op" id="8053286">.</span><span class="ident" id="8053287">Errorf</span><span class="op" id="8053293">(</span><span class="string" id="8053294">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="8053330">,</span>&nbsp;<span class="ident" id="8053332"><a href="/expvar/expvar_test.go.html#8053244">got</a></span><span class="op" id="8053335">,</span>&nbsp;<span class="ident" id="8053337"><a href="/expvar/expvar_test.go.html#8053118">want</a></span><span class="op" id="8053341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053344">}</span><br>
<span class="lineno"></span><span class="op" id="8053346">}</span>
</div>
</body>
</html>
