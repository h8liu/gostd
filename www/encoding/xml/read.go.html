<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6432323">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6432379">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6432433">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6432484">package</span>&nbsp;<span class="ident" id="6432492">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6432497">import</span>&nbsp;<span class="op" id="6432504">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432507">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432516">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432528">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432538">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432545">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432556">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6432567">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6432577">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6432580">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="6432664">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="6432728">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="6432797">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6432817">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="6432880">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6432904">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="6432970">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="6433035">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6433101">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6433115">//</span><br>
<span class="lineno"></span><span class="comment" id="6433118">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="6433184">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="6433253">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6433319">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="6433335">//</span><br>
<span class="lineno"></span><span class="comment" id="6433338">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="6433410">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6433486">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="6433550">//</span><br>
<span class="lineno"></span><span class="comment" id="6433553">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6433620">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="6433693">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="6433760">//</span><br>
<span class="lineno"></span><span class="comment" id="6433763">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="6433828">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6433886">//</span><br>
<span class="lineno">45</span><span class="comment" id="6433889">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6433951">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="6434017">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6434088">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6434114">//</span><br>
<span class="lineno">50</span><span class="comment" id="6434117">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6434181">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6434252">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6434325">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6434386">//</span><br>
<span class="lineno">55</span><span class="comment" id="6434389">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6434453">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6434525">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6434582">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6434650">//</span><br>
<span class="lineno">60</span><span class="comment" id="6434653">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6434722">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6434790">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6434857">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6434900">//</span><br>
<span class="lineno">65</span><span class="comment" id="6434903">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6434971">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6435038">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6435112">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6435184">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="6435253">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6435298">//</span><br>
<span class="lineno"></span><span class="comment" id="6435301">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6435369">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6435434">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="6435501">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6435547">//</span><br>
<span class="lineno"></span><span class="comment" id="6435550">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6435620">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6435696">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="6435747">//</span><br>
<span class="lineno"></span><span class="comment" id="6435750">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6435823">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6435894">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6435955">//</span><br>
<span class="lineno">85</span><span class="comment" id="6435958">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6436026">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6436071">//</span><br>
<span class="lineno"></span><span class="comment" id="6436074">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="6436137">//</span><br>
<span class="lineno">90</span><span class="comment" id="6436140">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6436209">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6436276">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="6436318">//</span><br>
<span class="lineno"></span><span class="comment" id="6436321">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="6436390">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6436427">//</span><br>
<span class="lineno"></span><span class="comment" id="6436430">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6436501">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6436566">//</span><br>
<span class="lineno">100</span><span class="comment" id="6436569">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6436634">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6436696">//</span><br>
<span class="lineno"></span><span class="comment" id="6436699">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6436768">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="6436830">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6436898">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="6436911">//</span><br>
<span class="lineno"></span><span class="comment" id="6436914">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6436979">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="6436996">//</span><br>
<span class="lineno"></span><span class="comment" id="6436999">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="6437068">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6437144">//</span><br>
<span class="lineno"></span><span class="keyword" id="6437147">func</span>&nbsp;<span class="ident" id="6437152">Unmarshal</span><span class="op" id="6437161">(</span><span class="ident" id="6437162">data</span>&nbsp;<span class="op" id="6437167">[</span><span class="op" id="6437168">]</span><span class="builtintype" id="6437169">byte</span><span class="op" id="6437173">,</span>&nbsp;<span class="ident" id="6437175">v</span>&nbsp;<span class="keyword" id="6437177">interface</span><span class="op" id="6437186">{</span><span class="op" id="6437187">}</span><span class="op" id="6437188">)</span>&nbsp;<span class="builtintype" id="6437190">error</span>&nbsp;<span class="op" id="6437196">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437199">return</span>&nbsp;<span class="ident" id="6437206">NewDecoder</span><span class="op" id="6437216">(</span><span class="ident" id="6437217">bytes</span><span class="op" id="6437222">.</span><span class="ident" id="6437223">NewReader</span><span class="op" id="6437232">(</span><span class="ident" id="6437233">data</span><span class="op" id="6437237">)</span><span class="op" id="6437238">)</span><span class="op" id="6437239">.</span><span class="ident" id="6437240">Decode</span><span class="op" id="6437246">(</span><span class="ident" id="6437247">v</span><span class="op" id="6437248">)</span><br>
<span class="lineno"></span><span class="op" id="6437250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6437253">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="6437317">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="6437354">func</span>&nbsp;<span class="op" id="6437359">(</span><span class="ident" id="6437360">d</span>&nbsp;<span class="op" id="6437362">*</span><span class="ident" id="6437363">Decoder</span><span class="op" id="6437370">)</span>&nbsp;<span class="ident" id="6437372">Decode</span><span class="op" id="6437378">(</span><span class="ident" id="6437379">v</span>&nbsp;<span class="keyword" id="6437381">interface</span><span class="op" id="6437390">{</span><span class="op" id="6437391">}</span><span class="op" id="6437392">)</span>&nbsp;<span class="builtintype" id="6437394">error</span>&nbsp;<span class="op" id="6437400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437403">return</span>&nbsp;<span class="ident" id="6437410">d</span><span class="op" id="6437411">.</span><span class="ident" id="6437412">DecodeElement</span><span class="op" id="6437425">(</span><span class="ident" id="6437426">v</span><span class="op" id="6437427">,</span>&nbsp;<span class="ident" id="6437429">nil</span><span class="op" id="6437432">)</span><br>
<span class="lineno"></span><span class="op" id="6437434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6437437">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="6437500">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6437556">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="6437619">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6437678">func</span>&nbsp;<span class="op" id="6437683">(</span><span class="ident" id="6437684">d</span>&nbsp;<span class="op" id="6437686">*</span><span class="ident" id="6437687">Decoder</span><span class="op" id="6437694">)</span>&nbsp;<span class="ident" id="6437696">DecodeElement</span><span class="op" id="6437709">(</span><span class="ident" id="6437710">v</span>&nbsp;<span class="keyword" id="6437712">interface</span><span class="op" id="6437721">{</span><span class="op" id="6437722">}</span><span class="op" id="6437723">,</span>&nbsp;<span class="ident" id="6437725">start</span>&nbsp;<span class="op" id="6437731">*</span><span class="ident" id="6437732">StartElement</span><span class="op" id="6437744">)</span>&nbsp;<span class="builtintype" id="6437746">error</span>&nbsp;<span class="op" id="6437752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6437755">val</span>&nbsp;<span class="op" id="6437759">:=</span>&nbsp;<span class="ident" id="6437762">reflect</span><span class="op" id="6437769">.</span><span class="ident" id="6437770">ValueOf</span><span class="op" id="6437777">(</span><span class="ident" id="6437778">v</span><span class="op" id="6437779">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437782">if</span>&nbsp;<span class="ident" id="6437785">val</span><span class="op" id="6437788">.</span><span class="ident" id="6437789">Kind</span><span class="op" id="6437793">(</span><span class="op" id="6437794">)</span>&nbsp;<span class="op" id="6437796">!=</span>&nbsp;<span class="ident" id="6437799">reflect</span><span class="op" id="6437806">.</span><span class="ident" id="6437807">Ptr</span>&nbsp;<span class="op" id="6437811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437815">return</span>&nbsp;<span class="ident" id="6437822">errors</span><span class="op" id="6437828">.</span><span class="ident" id="6437829">New</span><span class="op" id="6437832">(</span><span class="string" id="6437833">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="6437866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6437869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6437872">return</span>&nbsp;<span class="ident" id="6437879">d</span><span class="op" id="6437880">.</span><span class="ident" id="6437881">unmarshal</span><span class="op" id="6437890">(</span><span class="ident" id="6437891">val</span><span class="op" id="6437894">.</span><span class="ident" id="6437895">Elem</span><span class="op" id="6437899">(</span><span class="op" id="6437900">)</span><span class="op" id="6437901">,</span>&nbsp;<span class="ident" id="6437903">start</span><span class="op" id="6437908">)</span><br>
<span class="lineno"></span><span class="op" id="6437910">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="6437913">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="6437984">type</span>&nbsp;<span class="ident" id="6437989">UnmarshalError</span>&nbsp;<span class="builtintype" id="6438004">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6438012">func</span>&nbsp;<span class="op" id="6438017">(</span><span class="ident" id="6438018">e</span>&nbsp;<span class="ident" id="6438020">UnmarshalError</span><span class="op" id="6438034">)</span>&nbsp;<span class="ident" id="6438036">Error</span><span class="op" id="6438041">(</span><span class="op" id="6438042">)</span>&nbsp;<span class="builtintype" id="6438044">string</span>&nbsp;<span class="op" id="6438051">{</span>&nbsp;<span class="keyword" id="6438053">return</span>&nbsp;<span class="builtintype" id="6438060">string</span><span class="op" id="6438066">(</span><span class="ident" id="6438067">e</span><span class="op" id="6438068">)</span>&nbsp;<span class="op" id="6438070">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="6438073">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6438147">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6438192">//</span><br>
<span class="lineno"></span><span class="comment" id="6438195">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="6438240">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6438283">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6438348">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6438371">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6438425">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="6438484">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6438544">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6438602">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6438635">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6438695">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="6438730">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="6438770">type</span>&nbsp;<span class="ident" id="6438775">Unmarshaler</span>&nbsp;<span class="keyword" id="6438787">interface</span>&nbsp;<span class="op" id="6438797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6438800">UnmarshalXML</span><span class="op" id="6438812">(</span><span class="ident" id="6438813">d</span>&nbsp;<span class="op" id="6438815">*</span><span class="ident" id="6438816">Decoder</span><span class="op" id="6438823">,</span>&nbsp;<span class="ident" id="6438825">start</span>&nbsp;<span class="ident" id="6438831">StartElement</span><span class="op" id="6438843">)</span>&nbsp;<span class="builtintype" id="6438845">error</span><br>
<span class="lineno"></span><span class="op" id="6438851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6438854">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6438932">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6438979">//</span><br>
<span class="lineno"></span><span class="comment" id="6438982">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="6439034">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="6439099">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6439122">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6439182">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6439217">type</span>&nbsp;<span class="ident" id="6439222">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="6439238">interface</span>&nbsp;<span class="op" id="6439248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439251">UnmarshalXMLAttr</span><span class="op" id="6439267">(</span><span class="ident" id="6439268">attr</span>&nbsp;<span class="ident" id="6439273">Attr</span><span class="op" id="6439277">)</span>&nbsp;<span class="builtintype" id="6439279">error</span><br>
<span class="lineno">170</span><span class="op" id="6439285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6439288">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6439376">func</span>&nbsp;<span class="ident" id="6439381">receiverType</span><span class="op" id="6439393">(</span><span class="ident" id="6439394">val</span>&nbsp;<span class="keyword" id="6439398">interface</span><span class="op" id="6439407">{</span><span class="op" id="6439408">}</span><span class="op" id="6439409">)</span>&nbsp;<span class="builtintype" id="6439411">string</span>&nbsp;<span class="op" id="6439418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439421">t</span>&nbsp;<span class="op" id="6439423">:=</span>&nbsp;<span class="ident" id="6439426">reflect</span><span class="op" id="6439433">.</span><span class="ident" id="6439434">TypeOf</span><span class="op" id="6439440">(</span><span class="ident" id="6439441">val</span><span class="op" id="6439444">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439447">if</span>&nbsp;<span class="ident" id="6439450">t</span><span class="op" id="6439451">.</span><span class="ident" id="6439452">Name</span><span class="op" id="6439456">(</span><span class="op" id="6439457">)</span>&nbsp;<span class="op" id="6439459">!=</span>&nbsp;<span class="string" id="6439462">&#34;&#34;</span>&nbsp;<span class="op" id="6439465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439469">return</span>&nbsp;<span class="ident" id="6439476">t</span><span class="op" id="6439477">.</span><span class="ident" id="6439478">String</span><span class="op" id="6439484">(</span><span class="op" id="6439485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439491">return</span>&nbsp;<span class="string" id="6439498">&#34;(&#34;</span>&nbsp;<span class="op" id="6439502">+</span>&nbsp;<span class="ident" id="6439504">t</span><span class="op" id="6439505">.</span><span class="ident" id="6439506">String</span><span class="op" id="6439512">(</span><span class="op" id="6439513">)</span>&nbsp;<span class="op" id="6439515">+</span>&nbsp;<span class="string" id="6439517">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="6439521">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6439524">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6439588">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6439632">func</span>&nbsp;<span class="op" id="6439637">(</span><span class="ident" id="6439638">p</span>&nbsp;<span class="op" id="6439640">*</span><span class="ident" id="6439641">Decoder</span><span class="op" id="6439648">)</span>&nbsp;<span class="ident" id="6439650">unmarshalInterface</span><span class="op" id="6439668">(</span><span class="ident" id="6439669">val</span>&nbsp;<span class="ident" id="6439673">Unmarshaler</span><span class="op" id="6439684">,</span>&nbsp;<span class="ident" id="6439686">start</span>&nbsp;<span class="op" id="6439692">*</span><span class="ident" id="6439693">StartElement</span><span class="op" id="6439705">)</span>&nbsp;<span class="builtintype" id="6439707">error</span>&nbsp;<span class="op" id="6439713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6439716">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439785">p</span><span class="op" id="6439786">.</span><span class="ident" id="6439787">pushEOF</span><span class="op" id="6439794">(</span><span class="op" id="6439795">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439799">p</span><span class="op" id="6439800">.</span><span class="ident" id="6439801">unmarshalDepth</span><span class="op" id="6439815">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439819">err</span>&nbsp;<span class="op" id="6439823">:=</span>&nbsp;<span class="ident" id="6439826">val</span><span class="op" id="6439829">.</span><span class="ident" id="6439830">UnmarshalXML</span><span class="op" id="6439842">(</span><span class="ident" id="6439843">p</span><span class="op" id="6439844">,</span>&nbsp;<span class="op" id="6439846">*</span><span class="ident" id="6439847">start</span><span class="op" id="6439852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439855">p</span><span class="op" id="6439856">.</span><span class="ident" id="6439857">unmarshalDepth</span><span class="op" id="6439871">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439875">if</span>&nbsp;<span class="ident" id="6439878">err</span>&nbsp;<span class="op" id="6439882">!=</span>&nbsp;<span class="ident" id="6439885">nil</span>&nbsp;<span class="op" id="6439889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6439893">p</span><span class="op" id="6439894">.</span><span class="ident" id="6439895">popEOF</span><span class="op" id="6439901">(</span><span class="op" id="6439902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439906">return</span>&nbsp;<span class="ident" id="6439913">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6439918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439922">if</span>&nbsp;<span class="op" id="6439925">!</span><span class="ident" id="6439926">p</span><span class="op" id="6439927">.</span><span class="ident" id="6439928">popEOF</span><span class="op" id="6439934">(</span><span class="op" id="6439935">)</span>&nbsp;<span class="op" id="6439937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6439941">return</span>&nbsp;<span class="ident" id="6439948">fmt</span><span class="op" id="6439951">.</span><span class="ident" id="6439952">Errorf</span><span class="op" id="6439958">(</span><span class="string" id="6439959">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="6440017">,</span>&nbsp;<span class="ident" id="6440019">receiverType</span><span class="op" id="6440031">(</span><span class="ident" id="6440032">val</span><span class="op" id="6440035">)</span><span class="op" id="6440036">,</span>&nbsp;<span class="ident" id="6440038">start</span><span class="op" id="6440043">.</span><span class="ident" id="6440044">Name</span><span class="op" id="6440048">.</span><span class="ident" id="6440049">Local</span><span class="op" id="6440054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440061">return</span>&nbsp;<span class="ident" id="6440068">nil</span><br>
<span class="lineno">200</span><span class="op" id="6440072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6440075">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6440143">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="6440207">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="6440245">func</span>&nbsp;<span class="op" id="6440250">(</span><span class="ident" id="6440251">p</span>&nbsp;<span class="op" id="6440253">*</span><span class="ident" id="6440254">Decoder</span><span class="op" id="6440261">)</span>&nbsp;<span class="ident" id="6440263">unmarshalTextInterface</span><span class="op" id="6440285">(</span><span class="ident" id="6440286">val</span>&nbsp;<span class="ident" id="6440290">encoding</span><span class="op" id="6440298">.</span><span class="ident" id="6440299">TextUnmarshaler</span><span class="op" id="6440314">,</span>&nbsp;<span class="ident" id="6440316">start</span>&nbsp;<span class="op" id="6440322">*</span><span class="ident" id="6440323">StartElement</span><span class="op" id="6440335">)</span>&nbsp;<span class="builtintype" id="6440337">error</span>&nbsp;<span class="op" id="6440343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440346">var</span>&nbsp;<span class="ident" id="6440350">buf</span>&nbsp;<span class="op" id="6440354">[</span><span class="op" id="6440355">]</span><span class="builtintype" id="6440356">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440362">depth</span>&nbsp;<span class="op" id="6440368">:=</span>&nbsp;<span class="num" id="6440371">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440374">for</span>&nbsp;<span class="ident" id="6440378">depth</span>&nbsp;<span class="op" id="6440384">&gt;</span>&nbsp;<span class="num" id="6440386">0</span>&nbsp;<span class="op" id="6440388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440392">t</span><span class="op" id="6440393">,</span>&nbsp;<span class="ident" id="6440395">err</span>&nbsp;<span class="op" id="6440399">:=</span>&nbsp;<span class="ident" id="6440402">p</span><span class="op" id="6440403">.</span><span class="ident" id="6440404">Token</span><span class="op" id="6440409">(</span><span class="op" id="6440410">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440414">if</span>&nbsp;<span class="ident" id="6440417">err</span>&nbsp;<span class="op" id="6440421">!=</span>&nbsp;<span class="ident" id="6440424">nil</span>&nbsp;<span class="op" id="6440428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440433">return</span>&nbsp;<span class="ident" id="6440440">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440450">switch</span>&nbsp;<span class="ident" id="6440457">t</span>&nbsp;<span class="op" id="6440459">:=</span>&nbsp;<span class="ident" id="6440462">t</span><span class="op" id="6440463">.</span><span class="op" id="6440464">(</span><span class="keyword" id="6440465">type</span><span class="op" id="6440469">)</span>&nbsp;<span class="op" id="6440471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440475">case</span>&nbsp;<span class="ident" id="6440480">CharData</span><span class="op" id="6440488">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440493">if</span>&nbsp;<span class="ident" id="6440496">depth</span>&nbsp;<span class="op" id="6440502">==</span>&nbsp;<span class="num" id="6440505">1</span>&nbsp;<span class="op" id="6440507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440513">buf</span>&nbsp;<span class="op" id="6440517">=</span>&nbsp;<span class="builtinfunc" id="6440519">append</span><span class="op" id="6440525">(</span><span class="ident" id="6440526">buf</span><span class="op" id="6440529">,</span>&nbsp;<span class="ident" id="6440531">t</span><span class="op" id="6440532">...</span><span class="op" id="6440535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440544">case</span>&nbsp;<span class="ident" id="6440549">StartElement</span><span class="op" id="6440561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440566">depth</span><span class="op" id="6440571">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440576">case</span>&nbsp;<span class="ident" id="6440581">EndElement</span><span class="op" id="6440591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440596">depth</span><span class="op" id="6440601">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440612">return</span>&nbsp;<span class="ident" id="6440619">val</span><span class="op" id="6440622">.</span><span class="ident" id="6440623">UnmarshalText</span><span class="op" id="6440636">(</span><span class="ident" id="6440637">buf</span><span class="op" id="6440640">)</span><br>
<span class="lineno">225</span><span class="op" id="6440642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6440645">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6440706">func</span>&nbsp;<span class="op" id="6440711">(</span><span class="ident" id="6440712">p</span>&nbsp;<span class="op" id="6440714">*</span><span class="ident" id="6440715">Decoder</span><span class="op" id="6440722">)</span>&nbsp;<span class="ident" id="6440724">unmarshalAttr</span><span class="op" id="6440737">(</span><span class="ident" id="6440738">val</span>&nbsp;<span class="ident" id="6440742">reflect</span><span class="op" id="6440749">.</span><span class="ident" id="6440750">Value</span><span class="op" id="6440755">,</span>&nbsp;<span class="ident" id="6440757">attr</span>&nbsp;<span class="ident" id="6440762">Attr</span><span class="op" id="6440766">)</span>&nbsp;<span class="builtintype" id="6440768">error</span>&nbsp;<span class="op" id="6440774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440777">if</span>&nbsp;<span class="ident" id="6440780">val</span><span class="op" id="6440783">.</span><span class="ident" id="6440784">Kind</span><span class="op" id="6440788">(</span><span class="op" id="6440789">)</span>&nbsp;<span class="op" id="6440791">==</span>&nbsp;<span class="ident" id="6440794">reflect</span><span class="op" id="6440801">.</span><span class="ident" id="6440802">Ptr</span>&nbsp;<span class="op" id="6440806">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440810">if</span>&nbsp;<span class="ident" id="6440813">val</span><span class="op" id="6440816">.</span><span class="ident" id="6440817">IsNil</span><span class="op" id="6440822">(</span><span class="op" id="6440823">)</span>&nbsp;<span class="op" id="6440825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440830">val</span><span class="op" id="6440833">.</span><span class="ident" id="6440834">Set</span><span class="op" id="6440837">(</span><span class="ident" id="6440838">reflect</span><span class="op" id="6440845">.</span><span class="ident" id="6440846">New</span><span class="op" id="6440849">(</span><span class="ident" id="6440850">val</span><span class="op" id="6440853">.</span><span class="ident" id="6440854">Type</span><span class="op" id="6440858">(</span><span class="op" id="6440859">)</span><span class="op" id="6440860">.</span><span class="ident" id="6440861">Elem</span><span class="op" id="6440865">(</span><span class="op" id="6440866">)</span><span class="op" id="6440867">)</span><span class="op" id="6440868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6440876">val</span>&nbsp;<span class="op" id="6440880">=</span>&nbsp;<span class="ident" id="6440882">val</span><span class="op" id="6440885">.</span><span class="ident" id="6440886">Elem</span><span class="op" id="6440890">(</span><span class="op" id="6440891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6440894">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6440898">if</span>&nbsp;<span class="ident" id="6440901">val</span><span class="op" id="6440904">.</span><span class="ident" id="6440905">CanInterface</span><span class="op" id="6440917">(</span><span class="op" id="6440918">)</span>&nbsp;<span class="op" id="6440920">&amp;&amp;</span>&nbsp;<span class="ident" id="6440923">val</span><span class="op" id="6440926">.</span><span class="ident" id="6440927">Type</span><span class="op" id="6440931">(</span><span class="op" id="6440932">)</span><span class="op" id="6440933">.</span><span class="ident" id="6440934">Implements</span><span class="op" id="6440944">(</span><span class="ident" id="6440945">unmarshalerAttrType</span><span class="op" id="6440964">)</span>&nbsp;<span class="op" id="6440966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6440970">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441027">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441091">return</span>&nbsp;<span class="ident" id="6441098">val</span><span class="op" id="6441101">.</span><span class="ident" id="6441102">Interface</span><span class="op" id="6441111">(</span><span class="op" id="6441112">)</span><span class="op" id="6441113">.</span><span class="op" id="6441114">(</span><span class="ident" id="6441115">UnmarshalerAttr</span><span class="op" id="6441130">)</span><span class="op" id="6441131">.</span><span class="ident" id="6441132">UnmarshalXMLAttr</span><span class="op" id="6441148">(</span><span class="ident" id="6441149">attr</span><span class="op" id="6441153">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441159">if</span>&nbsp;<span class="ident" id="6441162">val</span><span class="op" id="6441165">.</span><span class="ident" id="6441166">CanAddr</span><span class="op" id="6441173">(</span><span class="op" id="6441174">)</span>&nbsp;<span class="op" id="6441176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441180">pv</span>&nbsp;<span class="op" id="6441183">:=</span>&nbsp;<span class="ident" id="6441186">val</span><span class="op" id="6441189">.</span><span class="ident" id="6441190">Addr</span><span class="op" id="6441194">(</span><span class="op" id="6441195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441199">if</span>&nbsp;<span class="ident" id="6441202">pv</span><span class="op" id="6441204">.</span><span class="ident" id="6441205">CanInterface</span><span class="op" id="6441217">(</span><span class="op" id="6441218">)</span>&nbsp;<span class="op" id="6441220">&amp;&amp;</span>&nbsp;<span class="ident" id="6441223">pv</span><span class="op" id="6441225">.</span><span class="ident" id="6441226">Type</span><span class="op" id="6441230">(</span><span class="op" id="6441231">)</span><span class="op" id="6441232">.</span><span class="ident" id="6441233">Implements</span><span class="op" id="6441243">(</span><span class="ident" id="6441244">unmarshalerAttrType</span><span class="op" id="6441263">)</span>&nbsp;<span class="op" id="6441265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441270">return</span>&nbsp;<span class="ident" id="6441277">pv</span><span class="op" id="6441279">.</span><span class="ident" id="6441280">Interface</span><span class="op" id="6441289">(</span><span class="op" id="6441290">)</span><span class="op" id="6441291">.</span><span class="op" id="6441292">(</span><span class="ident" id="6441293">UnmarshalerAttr</span><span class="op" id="6441308">)</span><span class="op" id="6441309">.</span><span class="ident" id="6441310">UnmarshalXMLAttr</span><span class="op" id="6441326">(</span><span class="ident" id="6441327">attr</span><span class="op" id="6441331">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441342">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441400">if</span>&nbsp;<span class="ident" id="6441403">val</span><span class="op" id="6441406">.</span><span class="ident" id="6441407">CanInterface</span><span class="op" id="6441419">(</span><span class="op" id="6441420">)</span>&nbsp;<span class="op" id="6441422">&amp;&amp;</span>&nbsp;<span class="ident" id="6441425">val</span><span class="op" id="6441428">.</span><span class="ident" id="6441429">Type</span><span class="op" id="6441433">(</span><span class="op" id="6441434">)</span><span class="op" id="6441435">.</span><span class="ident" id="6441436">Implements</span><span class="op" id="6441446">(</span><span class="ident" id="6441447">textUnmarshalerType</span><span class="op" id="6441466">)</span>&nbsp;<span class="op" id="6441468">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441472">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6441529">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441593">return</span>&nbsp;<span class="ident" id="6441600">val</span><span class="op" id="6441603">.</span><span class="ident" id="6441604">Interface</span><span class="op" id="6441613">(</span><span class="op" id="6441614">)</span><span class="op" id="6441615">.</span><span class="op" id="6441616">(</span><span class="ident" id="6441617">encoding</span><span class="op" id="6441625">.</span><span class="ident" id="6441626">TextUnmarshaler</span><span class="op" id="6441641">)</span><span class="op" id="6441642">.</span><span class="ident" id="6441643">UnmarshalText</span><span class="op" id="6441656">(</span><span class="op" id="6441657">[</span><span class="op" id="6441658">]</span><span class="builtintype" id="6441659">byte</span><span class="op" id="6441663">(</span><span class="ident" id="6441664">attr</span><span class="op" id="6441668">.</span><span class="ident" id="6441669">Value</span><span class="op" id="6441674">)</span><span class="op" id="6441675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441681">if</span>&nbsp;<span class="ident" id="6441684">val</span><span class="op" id="6441687">.</span><span class="ident" id="6441688">CanAddr</span><span class="op" id="6441695">(</span><span class="op" id="6441696">)</span>&nbsp;<span class="op" id="6441698">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441702">pv</span>&nbsp;<span class="op" id="6441705">:=</span>&nbsp;<span class="ident" id="6441708">val</span><span class="op" id="6441711">.</span><span class="ident" id="6441712">Addr</span><span class="op" id="6441716">(</span><span class="op" id="6441717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441721">if</span>&nbsp;<span class="ident" id="6441724">pv</span><span class="op" id="6441726">.</span><span class="ident" id="6441727">CanInterface</span><span class="op" id="6441739">(</span><span class="op" id="6441740">)</span>&nbsp;<span class="op" id="6441742">&amp;&amp;</span>&nbsp;<span class="ident" id="6441745">pv</span><span class="op" id="6441747">.</span><span class="ident" id="6441748">Type</span><span class="op" id="6441752">(</span><span class="op" id="6441753">)</span><span class="op" id="6441754">.</span><span class="ident" id="6441755">Implements</span><span class="op" id="6441765">(</span><span class="ident" id="6441766">textUnmarshalerType</span><span class="op" id="6441785">)</span>&nbsp;<span class="op" id="6441787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441792">return</span>&nbsp;<span class="ident" id="6441799">pv</span><span class="op" id="6441801">.</span><span class="ident" id="6441802">Interface</span><span class="op" id="6441811">(</span><span class="op" id="6441812">)</span><span class="op" id="6441813">.</span><span class="op" id="6441814">(</span><span class="ident" id="6441815">encoding</span><span class="op" id="6441823">.</span><span class="ident" id="6441824">TextUnmarshaler</span><span class="op" id="6441839">)</span><span class="op" id="6441840">.</span><span class="ident" id="6441841">UnmarshalText</span><span class="op" id="6441854">(</span><span class="op" id="6441855">[</span><span class="op" id="6441856">]</span><span class="builtintype" id="6441857">byte</span><span class="op" id="6441861">(</span><span class="ident" id="6441862">attr</span><span class="op" id="6441866">.</span><span class="ident" id="6441867">Value</span><span class="op" id="6441872">)</span><span class="op" id="6441873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6441880">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441884">copyValue</span><span class="op" id="6441893">(</span><span class="ident" id="6441894">val</span><span class="op" id="6441897">,</span>&nbsp;<span class="op" id="6441899">[</span><span class="op" id="6441900">]</span><span class="builtintype" id="6441901">byte</span><span class="op" id="6441905">(</span><span class="ident" id="6441906">attr</span><span class="op" id="6441910">.</span><span class="ident" id="6441911">Value</span><span class="op" id="6441916">)</span><span class="op" id="6441917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6441920">return</span>&nbsp;<span class="ident" id="6441927">nil</span><br>
<span class="lineno"></span><span class="op" id="6441931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="6441934">var</span>&nbsp;<span class="op" id="6441938">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6441941">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441961">=</span>&nbsp;<span class="ident" id="6441963">reflect</span><span class="op" id="6441970">.</span><span class="ident" id="6441971">TypeOf</span><span class="op" id="6441977">(</span><span class="op" id="6441978">(</span><span class="op" id="6441979">*</span><span class="ident" id="6441980">Unmarshaler</span><span class="op" id="6441991">)</span><span class="op" id="6441992">(</span><span class="ident" id="6441993">nil</span><span class="op" id="6441996">)</span><span class="op" id="6441997">)</span><span class="op" id="6441998">.</span><span class="ident" id="6441999">Elem</span><span class="op" id="6442003">(</span><span class="op" id="6442004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442007">unmarshalerAttrType</span>&nbsp;<span class="op" id="6442027">=</span>&nbsp;<span class="ident" id="6442029">reflect</span><span class="op" id="6442036">.</span><span class="ident" id="6442037">TypeOf</span><span class="op" id="6442043">(</span><span class="op" id="6442044">(</span><span class="op" id="6442045">*</span><span class="ident" id="6442046">UnmarshalerAttr</span><span class="op" id="6442061">)</span><span class="op" id="6442062">(</span><span class="ident" id="6442063">nil</span><span class="op" id="6442066">)</span><span class="op" id="6442067">)</span><span class="op" id="6442068">.</span><span class="ident" id="6442069">Elem</span><span class="op" id="6442073">(</span><span class="op" id="6442074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442077">textUnmarshalerType</span>&nbsp;<span class="op" id="6442097">=</span>&nbsp;<span class="ident" id="6442099">reflect</span><span class="op" id="6442106">.</span><span class="ident" id="6442107">TypeOf</span><span class="op" id="6442113">(</span><span class="op" id="6442114">(</span><span class="op" id="6442115">*</span><span class="ident" id="6442116">encoding</span><span class="op" id="6442124">.</span><span class="ident" id="6442125">TextUnmarshaler</span><span class="op" id="6442140">)</span><span class="op" id="6442141">(</span><span class="ident" id="6442142">nil</span><span class="op" id="6442145">)</span><span class="op" id="6442146">)</span><span class="op" id="6442147">.</span><span class="ident" id="6442148">Elem</span><span class="op" id="6442152">(</span><span class="op" id="6442153">)</span><br>
<span class="lineno"></span><span class="op" id="6442155">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="6442158">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6442202">func</span>&nbsp;<span class="op" id="6442207">(</span><span class="ident" id="6442208">p</span>&nbsp;<span class="op" id="6442210">*</span><span class="ident" id="6442211">Decoder</span><span class="op" id="6442218">)</span>&nbsp;<span class="ident" id="6442220">unmarshal</span><span class="op" id="6442229">(</span><span class="ident" id="6442230">val</span>&nbsp;<span class="ident" id="6442234">reflect</span><span class="op" id="6442241">.</span><span class="ident" id="6442242">Value</span><span class="op" id="6442247">,</span>&nbsp;<span class="ident" id="6442249">start</span>&nbsp;<span class="op" id="6442255">*</span><span class="ident" id="6442256">StartElement</span><span class="op" id="6442268">)</span>&nbsp;<span class="builtintype" id="6442270">error</span>&nbsp;<span class="op" id="6442276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442279">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442317">if</span>&nbsp;<span class="ident" id="6442320">start</span>&nbsp;<span class="op" id="6442326">==</span>&nbsp;<span class="ident" id="6442329">nil</span>&nbsp;<span class="op" id="6442333">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442337">for</span>&nbsp;<span class="op" id="6442341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442346">tok</span><span class="op" id="6442349">,</span>&nbsp;<span class="ident" id="6442351">err</span>&nbsp;<span class="op" id="6442355">:=</span>&nbsp;<span class="ident" id="6442358">p</span><span class="op" id="6442359">.</span><span class="ident" id="6442360">Token</span><span class="op" id="6442365">(</span><span class="op" id="6442366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442371">if</span>&nbsp;<span class="ident" id="6442374">err</span>&nbsp;<span class="op" id="6442378">!=</span>&nbsp;<span class="ident" id="6442381">nil</span>&nbsp;<span class="op" id="6442385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442391">return</span>&nbsp;<span class="ident" id="6442398">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442405">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442410">if</span>&nbsp;<span class="ident" id="6442413">t</span><span class="op" id="6442414">,</span>&nbsp;<span class="ident" id="6442416">ok</span>&nbsp;<span class="op" id="6442419">:=</span>&nbsp;<span class="ident" id="6442422">tok</span><span class="op" id="6442425">.</span><span class="op" id="6442426">(</span><span class="ident" id="6442427">StartElement</span><span class="op" id="6442439">)</span><span class="op" id="6442440">;</span>&nbsp;<span class="ident" id="6442442">ok</span>&nbsp;<span class="op" id="6442445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442451">start</span>&nbsp;<span class="op" id="6442457">=</span>&nbsp;<span class="op" id="6442459">&amp;</span><span class="ident" id="6442460">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442466">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442479">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442486">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442548">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442574">if</span>&nbsp;<span class="ident" id="6442577">val</span><span class="op" id="6442580">.</span><span class="ident" id="6442581">Kind</span><span class="op" id="6442585">(</span><span class="op" id="6442586">)</span>&nbsp;<span class="op" id="6442588">==</span>&nbsp;<span class="ident" id="6442591">reflect</span><span class="op" id="6442598">.</span><span class="ident" id="6442599">Interface</span>&nbsp;<span class="op" id="6442609">&amp;&amp;</span>&nbsp;<span class="op" id="6442612">!</span><span class="ident" id="6442613">val</span><span class="op" id="6442616">.</span><span class="ident" id="6442617">IsNil</span><span class="op" id="6442622">(</span><span class="op" id="6442623">)</span>&nbsp;<span class="op" id="6442625">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442629">e</span>&nbsp;<span class="op" id="6442631">:=</span>&nbsp;<span class="ident" id="6442634">val</span><span class="op" id="6442637">.</span><span class="ident" id="6442638">Elem</span><span class="op" id="6442642">(</span><span class="op" id="6442643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442647">if</span>&nbsp;<span class="ident" id="6442650">e</span><span class="op" id="6442651">.</span><span class="ident" id="6442652">Kind</span><span class="op" id="6442656">(</span><span class="op" id="6442657">)</span>&nbsp;<span class="op" id="6442659">==</span>&nbsp;<span class="ident" id="6442662">reflect</span><span class="op" id="6442669">.</span><span class="ident" id="6442670">Ptr</span>&nbsp;<span class="op" id="6442674">&amp;&amp;</span>&nbsp;<span class="op" id="6442677">!</span><span class="ident" id="6442678">e</span><span class="op" id="6442679">.</span><span class="ident" id="6442680">IsNil</span><span class="op" id="6442685">(</span><span class="op" id="6442686">)</span>&nbsp;<span class="op" id="6442688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442693">val</span>&nbsp;<span class="op" id="6442697">=</span>&nbsp;<span class="ident" id="6442699">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442706">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442710">if</span>&nbsp;<span class="ident" id="6442713">val</span><span class="op" id="6442716">.</span><span class="ident" id="6442717">Kind</span><span class="op" id="6442721">(</span><span class="op" id="6442722">)</span>&nbsp;<span class="op" id="6442724">==</span>&nbsp;<span class="ident" id="6442727">reflect</span><span class="op" id="6442734">.</span><span class="ident" id="6442735">Ptr</span>&nbsp;<span class="op" id="6442739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442743">if</span>&nbsp;<span class="ident" id="6442746">val</span><span class="op" id="6442749">.</span><span class="ident" id="6442750">IsNil</span><span class="op" id="6442755">(</span><span class="op" id="6442756">)</span>&nbsp;<span class="op" id="6442758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442763">val</span><span class="op" id="6442766">.</span><span class="ident" id="6442767">Set</span><span class="op" id="6442770">(</span><span class="ident" id="6442771">reflect</span><span class="op" id="6442778">.</span><span class="ident" id="6442779">New</span><span class="op" id="6442782">(</span><span class="ident" id="6442783">val</span><span class="op" id="6442786">.</span><span class="ident" id="6442787">Type</span><span class="op" id="6442791">(</span><span class="op" id="6442792">)</span><span class="op" id="6442793">.</span><span class="ident" id="6442794">Elem</span><span class="op" id="6442798">(</span><span class="op" id="6442799">)</span><span class="op" id="6442800">)</span><span class="op" id="6442801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442805">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6442809">val</span>&nbsp;<span class="op" id="6442813">=</span>&nbsp;<span class="ident" id="6442815">val</span><span class="op" id="6442818">.</span><span class="ident" id="6442819">Elem</span><span class="op" id="6442823">(</span><span class="op" id="6442824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6442827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6442831">if</span>&nbsp;<span class="ident" id="6442834">val</span><span class="op" id="6442837">.</span><span class="ident" id="6442838">CanInterface</span><span class="op" id="6442850">(</span><span class="op" id="6442851">)</span>&nbsp;<span class="op" id="6442853">&amp;&amp;</span>&nbsp;<span class="ident" id="6442856">val</span><span class="op" id="6442859">.</span><span class="ident" id="6442860">Type</span><span class="op" id="6442864">(</span><span class="op" id="6442865">)</span><span class="op" id="6442866">.</span><span class="ident" id="6442867">Implements</span><span class="op" id="6442877">(</span><span class="ident" id="6442878">unmarshalerType</span><span class="op" id="6442893">)</span>&nbsp;<span class="op" id="6442895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442899">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6442956">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443020">return</span>&nbsp;<span class="ident" id="6443027">p</span><span class="op" id="6443028">.</span><span class="ident" id="6443029">unmarshalInterface</span><span class="op" id="6443047">(</span><span class="ident" id="6443048">val</span><span class="op" id="6443051">.</span><span class="ident" id="6443052">Interface</span><span class="op" id="6443061">(</span><span class="op" id="6443062">)</span><span class="op" id="6443063">.</span><span class="op" id="6443064">(</span><span class="ident" id="6443065">Unmarshaler</span><span class="op" id="6443076">)</span><span class="op" id="6443077">,</span>&nbsp;<span class="ident" id="6443079">start</span><span class="op" id="6443084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443091">if</span>&nbsp;<span class="ident" id="6443094">val</span><span class="op" id="6443097">.</span><span class="ident" id="6443098">CanAddr</span><span class="op" id="6443105">(</span><span class="op" id="6443106">)</span>&nbsp;<span class="op" id="6443108">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443112">pv</span>&nbsp;<span class="op" id="6443115">:=</span>&nbsp;<span class="ident" id="6443118">val</span><span class="op" id="6443121">.</span><span class="ident" id="6443122">Addr</span><span class="op" id="6443126">(</span><span class="op" id="6443127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443131">if</span>&nbsp;<span class="ident" id="6443134">pv</span><span class="op" id="6443136">.</span><span class="ident" id="6443137">CanInterface</span><span class="op" id="6443149">(</span><span class="op" id="6443150">)</span>&nbsp;<span class="op" id="6443152">&amp;&amp;</span>&nbsp;<span class="ident" id="6443155">pv</span><span class="op" id="6443157">.</span><span class="ident" id="6443158">Type</span><span class="op" id="6443162">(</span><span class="op" id="6443163">)</span><span class="op" id="6443164">.</span><span class="ident" id="6443165">Implements</span><span class="op" id="6443175">(</span><span class="ident" id="6443176">unmarshalerType</span><span class="op" id="6443191">)</span>&nbsp;<span class="op" id="6443193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443198">return</span>&nbsp;<span class="ident" id="6443205">p</span><span class="op" id="6443206">.</span><span class="ident" id="6443207">unmarshalInterface</span><span class="op" id="6443225">(</span><span class="ident" id="6443226">pv</span><span class="op" id="6443228">.</span><span class="ident" id="6443229">Interface</span><span class="op" id="6443238">(</span><span class="op" id="6443239">)</span><span class="op" id="6443240">.</span><span class="op" id="6443241">(</span><span class="ident" id="6443242">Unmarshaler</span><span class="op" id="6443253">)</span><span class="op" id="6443254">,</span>&nbsp;<span class="ident" id="6443256">start</span><span class="op" id="6443261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443268">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443272">if</span>&nbsp;<span class="ident" id="6443275">val</span><span class="op" id="6443278">.</span><span class="ident" id="6443279">CanInterface</span><span class="op" id="6443291">(</span><span class="op" id="6443292">)</span>&nbsp;<span class="op" id="6443294">&amp;&amp;</span>&nbsp;<span class="ident" id="6443297">val</span><span class="op" id="6443300">.</span><span class="ident" id="6443301">Type</span><span class="op" id="6443305">(</span><span class="op" id="6443306">)</span><span class="op" id="6443307">.</span><span class="ident" id="6443308">Implements</span><span class="op" id="6443318">(</span><span class="ident" id="6443319">textUnmarshalerType</span><span class="op" id="6443338">)</span>&nbsp;<span class="op" id="6443340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443344">return</span>&nbsp;<span class="ident" id="6443351">p</span><span class="op" id="6443352">.</span><span class="ident" id="6443353">unmarshalTextInterface</span><span class="op" id="6443375">(</span><span class="ident" id="6443376">val</span><span class="op" id="6443379">.</span><span class="ident" id="6443380">Interface</span><span class="op" id="6443389">(</span><span class="op" id="6443390">)</span><span class="op" id="6443391">.</span><span class="op" id="6443392">(</span><span class="ident" id="6443393">encoding</span><span class="op" id="6443401">.</span><span class="ident" id="6443402">TextUnmarshaler</span><span class="op" id="6443417">)</span><span class="op" id="6443418">,</span>&nbsp;<span class="ident" id="6443420">start</span><span class="op" id="6443425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443432">if</span>&nbsp;<span class="ident" id="6443435">val</span><span class="op" id="6443438">.</span><span class="ident" id="6443439">CanAddr</span><span class="op" id="6443446">(</span><span class="op" id="6443447">)</span>&nbsp;<span class="op" id="6443449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443453">pv</span>&nbsp;<span class="op" id="6443456">:=</span>&nbsp;<span class="ident" id="6443459">val</span><span class="op" id="6443462">.</span><span class="ident" id="6443463">Addr</span><span class="op" id="6443467">(</span><span class="op" id="6443468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443472">if</span>&nbsp;<span class="ident" id="6443475">pv</span><span class="op" id="6443477">.</span><span class="ident" id="6443478">CanInterface</span><span class="op" id="6443490">(</span><span class="op" id="6443491">)</span>&nbsp;<span class="op" id="6443493">&amp;&amp;</span>&nbsp;<span class="ident" id="6443496">pv</span><span class="op" id="6443498">.</span><span class="ident" id="6443499">Type</span><span class="op" id="6443503">(</span><span class="op" id="6443504">)</span><span class="op" id="6443505">.</span><span class="ident" id="6443506">Implements</span><span class="op" id="6443516">(</span><span class="ident" id="6443517">textUnmarshalerType</span><span class="op" id="6443536">)</span>&nbsp;<span class="op" id="6443538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443543">return</span>&nbsp;<span class="ident" id="6443550">p</span><span class="op" id="6443551">.</span><span class="ident" id="6443552">unmarshalTextInterface</span><span class="op" id="6443574">(</span><span class="ident" id="6443575">pv</span><span class="op" id="6443577">.</span><span class="ident" id="6443578">Interface</span><span class="op" id="6443587">(</span><span class="op" id="6443588">)</span><span class="op" id="6443589">.</span><span class="op" id="6443590">(</span><span class="ident" id="6443591">encoding</span><span class="op" id="6443599">.</span><span class="ident" id="6443600">TextUnmarshaler</span><span class="op" id="6443615">)</span><span class="op" id="6443616">,</span>&nbsp;<span class="ident" id="6443618">start</span><span class="op" id="6443623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443627">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443634">var</span>&nbsp;<span class="op" id="6443638">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443642">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443655">[</span><span class="op" id="6443656">]</span><span class="builtintype" id="6443657">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443664">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443677">reflect</span><span class="op" id="6443684">.</span><span class="ident" id="6443685">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443693">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443706">[</span><span class="op" id="6443707">]</span><span class="builtintype" id="6443708">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443715">saveComment</span>&nbsp;&nbsp;<span class="ident" id="6443728">reflect</span><span class="op" id="6443735">.</span><span class="ident" id="6443736">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443744">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443757">reflect</span><span class="op" id="6443764">.</span><span class="ident" id="6443765">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443773">saveXMLIndex</span>&nbsp;<span class="builtintype" id="6443786">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443792">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="6443805">[</span><span class="op" id="6443806">]</span><span class="builtintype" id="6443807">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443814">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443827">reflect</span><span class="op" id="6443834">.</span><span class="ident" id="6443835">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443843">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443856">reflect</span><span class="op" id="6443863">.</span><span class="ident" id="6443864">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443872">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443885">*</span><span class="ident" id="6443886">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6443897">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6443910">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6443917">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443921">switch</span>&nbsp;<span class="ident" id="6443928">v</span>&nbsp;<span class="op" id="6443930">:=</span>&nbsp;<span class="ident" id="6443933">val</span><span class="op" id="6443936">;</span>&nbsp;<span class="ident" id="6443938">v</span><span class="op" id="6443939">.</span><span class="ident" id="6443940">Kind</span><span class="op" id="6443944">(</span><span class="op" id="6443945">)</span>&nbsp;<span class="op" id="6443947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443950">default</span><span class="op" id="6443957">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6443961">return</span>&nbsp;<span class="ident" id="6443968">errors</span><span class="op" id="6443974">.</span><span class="ident" id="6443975">New</span><span class="op" id="6443978">(</span><span class="string" id="6443979">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="6443995">+</span>&nbsp;<span class="ident" id="6443997">v</span><span class="op" id="6443998">.</span><span class="ident" id="6443999">Type</span><span class="op" id="6444003">(</span><span class="op" id="6444004">)</span><span class="op" id="6444005">.</span><span class="ident" id="6444006">String</span><span class="op" id="6444012">(</span><span class="op" id="6444013">)</span><span class="op" id="6444014">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444018">case</span>&nbsp;<span class="ident" id="6444023">reflect</span><span class="op" id="6444030">.</span><span class="ident" id="6444031">Interface</span><span class="op" id="6444040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444044">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444101">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444156">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444194">return</span>&nbsp;<span class="ident" id="6444201">p</span><span class="op" id="6444202">.</span><span class="ident" id="6444203">Skip</span><span class="op" id="6444207">(</span><span class="op" id="6444208">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444212">case</span>&nbsp;<span class="ident" id="6444217">reflect</span><span class="op" id="6444224">.</span><span class="ident" id="6444225">Slice</span><span class="op" id="6444230">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444234">typ</span>&nbsp;<span class="op" id="6444238">:=</span>&nbsp;<span class="ident" id="6444241">v</span><span class="op" id="6444242">.</span><span class="ident" id="6444243">Type</span><span class="op" id="6444247">(</span><span class="op" id="6444248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444252">if</span>&nbsp;<span class="ident" id="6444255">typ</span><span class="op" id="6444258">.</span><span class="ident" id="6444259">Elem</span><span class="op" id="6444263">(</span><span class="op" id="6444264">)</span><span class="op" id="6444265">.</span><span class="ident" id="6444266">Kind</span><span class="op" id="6444270">(</span><span class="op" id="6444271">)</span>&nbsp;<span class="op" id="6444273">==</span>&nbsp;<span class="ident" id="6444276">reflect</span><span class="op" id="6444283">.</span><span class="ident" id="6444284">Uint8</span>&nbsp;<span class="op" id="6444290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444295">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444308">saveData</span>&nbsp;<span class="op" id="6444317">=</span>&nbsp;<span class="ident" id="6444319">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444324">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444337">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444367">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444384">n</span>&nbsp;<span class="op" id="6444386">:=</span>&nbsp;<span class="ident" id="6444389">v</span><span class="op" id="6444390">.</span><span class="ident" id="6444391">Len</span><span class="op" id="6444394">(</span><span class="op" id="6444395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444399">if</span>&nbsp;<span class="ident" id="6444402">n</span>&nbsp;<span class="op" id="6444404">&gt;=</span>&nbsp;<span class="ident" id="6444407">v</span><span class="op" id="6444408">.</span><span class="ident" id="6444409">Cap</span><span class="op" id="6444412">(</span><span class="op" id="6444413">)</span>&nbsp;<span class="op" id="6444415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444420">ncap</span>&nbsp;<span class="op" id="6444425">:=</span>&nbsp;<span class="num" id="6444428">2</span>&nbsp;<span class="op" id="6444430">*</span>&nbsp;<span class="ident" id="6444432">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444437">if</span>&nbsp;<span class="ident" id="6444440">ncap</span>&nbsp;<span class="op" id="6444445">&lt;</span>&nbsp;<span class="num" id="6444447">4</span>&nbsp;<span class="op" id="6444449">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444455">ncap</span>&nbsp;<span class="op" id="6444460">=</span>&nbsp;<span class="num" id="6444462">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6444472">new</span>&nbsp;<span class="op" id="6444476">:=</span>&nbsp;<span class="ident" id="6444479">reflect</span><span class="op" id="6444486">.</span><span class="ident" id="6444487">MakeSlice</span><span class="op" id="6444496">(</span><span class="ident" id="6444497">typ</span><span class="op" id="6444500">,</span>&nbsp;<span class="ident" id="6444502">n</span><span class="op" id="6444503">,</span>&nbsp;<span class="ident" id="6444505">ncap</span><span class="op" id="6444509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444514">reflect</span><span class="op" id="6444521">.</span><span class="ident" id="6444522">Copy</span><span class="op" id="6444526">(</span><span class="builtinfunc" id="6444527">new</span><span class="op" id="6444530">,</span>&nbsp;<span class="ident" id="6444532">v</span><span class="op" id="6444533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444538">v</span><span class="op" id="6444539">.</span><span class="ident" id="6444540">Set</span><span class="op" id="6444543">(</span><span class="builtinfunc" id="6444544">new</span><span class="op" id="6444547">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444555">v</span><span class="op" id="6444556">.</span><span class="ident" id="6444557">SetLen</span><span class="op" id="6444563">(</span><span class="ident" id="6444564">n</span>&nbsp;<span class="op" id="6444566">+</span>&nbsp;<span class="num" id="6444568">1</span><span class="op" id="6444569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6444574">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444613">if</span>&nbsp;<span class="ident" id="6444616">err</span>&nbsp;<span class="op" id="6444620">:=</span>&nbsp;<span class="ident" id="6444623">p</span><span class="op" id="6444624">.</span><span class="ident" id="6444625">unmarshal</span><span class="op" id="6444634">(</span><span class="ident" id="6444635">v</span><span class="op" id="6444636">.</span><span class="ident" id="6444637">Index</span><span class="op" id="6444642">(</span><span class="ident" id="6444643">n</span><span class="op" id="6444644">)</span><span class="op" id="6444645">,</span>&nbsp;<span class="ident" id="6444647">start</span><span class="op" id="6444652">)</span><span class="op" id="6444653">;</span>&nbsp;<span class="ident" id="6444655">err</span>&nbsp;<span class="op" id="6444659">!=</span>&nbsp;<span class="ident" id="6444662">nil</span>&nbsp;<span class="op" id="6444666">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444671">v</span><span class="op" id="6444672">.</span><span class="ident" id="6444673">SetLen</span><span class="op" id="6444679">(</span><span class="ident" id="6444680">n</span><span class="op" id="6444681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444686">return</span>&nbsp;<span class="ident" id="6444693">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6444699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444703">return</span>&nbsp;<span class="ident" id="6444710">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444716">case</span>&nbsp;<span class="ident" id="6444721">reflect</span><span class="op" id="6444728">.</span><span class="ident" id="6444729">Bool</span><span class="op" id="6444733">,</span>&nbsp;<span class="ident" id="6444735">reflect</span><span class="op" id="6444742">.</span><span class="ident" id="6444743">Float32</span><span class="op" id="6444750">,</span>&nbsp;<span class="ident" id="6444752">reflect</span><span class="op" id="6444759">.</span><span class="ident" id="6444760">Float64</span><span class="op" id="6444767">,</span>&nbsp;<span class="ident" id="6444769">reflect</span><span class="op" id="6444776">.</span><span class="ident" id="6444777">Int</span><span class="op" id="6444780">,</span>&nbsp;<span class="ident" id="6444782">reflect</span><span class="op" id="6444789">.</span><span class="ident" id="6444790">Int8</span><span class="op" id="6444794">,</span>&nbsp;<span class="ident" id="6444796">reflect</span><span class="op" id="6444803">.</span><span class="ident" id="6444804">Int16</span><span class="op" id="6444809">,</span>&nbsp;<span class="ident" id="6444811">reflect</span><span class="op" id="6444818">.</span><span class="ident" id="6444819">Int32</span><span class="op" id="6444824">,</span>&nbsp;<span class="ident" id="6444826">reflect</span><span class="op" id="6444833">.</span><span class="ident" id="6444834">Int64</span><span class="op" id="6444839">,</span>&nbsp;<span class="ident" id="6444841">reflect</span><span class="op" id="6444848">.</span><span class="ident" id="6444849">Uint</span><span class="op" id="6444853">,</span>&nbsp;<span class="ident" id="6444855">reflect</span><span class="op" id="6444862">.</span><span class="ident" id="6444863">Uint8</span><span class="op" id="6444868">,</span>&nbsp;<span class="ident" id="6444870">reflect</span><span class="op" id="6444877">.</span><span class="ident" id="6444878">Uint16</span><span class="op" id="6444884">,</span>&nbsp;<span class="ident" id="6444886">reflect</span><span class="op" id="6444893">.</span><span class="ident" id="6444894">Uint32</span><span class="op" id="6444900">,</span>&nbsp;<span class="ident" id="6444902">reflect</span><span class="op" id="6444909">.</span><span class="ident" id="6444910">Uint64</span><span class="op" id="6444916">,</span>&nbsp;<span class="ident" id="6444918">reflect</span><span class="op" id="6444925">.</span><span class="ident" id="6444926">Uintptr</span><span class="op" id="6444933">,</span>&nbsp;<span class="ident" id="6444935">reflect</span><span class="op" id="6444942">.</span><span class="ident" id="6444943">String</span><span class="op" id="6444949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444953">saveData</span>&nbsp;<span class="op" id="6444962">=</span>&nbsp;<span class="ident" id="6444964">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444968">case</span>&nbsp;<span class="ident" id="6444973">reflect</span><span class="op" id="6444980">.</span><span class="ident" id="6444981">Struct</span><span class="op" id="6444987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6444991">typ</span>&nbsp;<span class="op" id="6444995">:=</span>&nbsp;<span class="ident" id="6444998">v</span><span class="op" id="6444999">.</span><span class="ident" id="6445000">Type</span><span class="op" id="6445004">(</span><span class="op" id="6445005">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445009">if</span>&nbsp;<span class="ident" id="6445012">typ</span>&nbsp;<span class="op" id="6445016">==</span>&nbsp;<span class="ident" id="6445019">nameType</span>&nbsp;<span class="op" id="6445028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445033">v</span><span class="op" id="6445034">.</span><span class="ident" id="6445035">Set</span><span class="op" id="6445038">(</span><span class="ident" id="6445039">reflect</span><span class="op" id="6445046">.</span><span class="ident" id="6445047">ValueOf</span><span class="op" id="6445054">(</span><span class="ident" id="6445055">start</span><span class="op" id="6445060">.</span><span class="ident" id="6445061">Name</span><span class="op" id="6445065">)</span><span class="op" id="6445066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445071">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445084">sv</span>&nbsp;<span class="op" id="6445087">=</span>&nbsp;<span class="ident" id="6445089">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445093">tinfo</span><span class="op" id="6445098">,</span>&nbsp;<span class="ident" id="6445100">err</span>&nbsp;<span class="op" id="6445104">=</span>&nbsp;<span class="ident" id="6445106">getTypeInfo</span><span class="op" id="6445117">(</span><span class="ident" id="6445118">typ</span><span class="op" id="6445121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445125">if</span>&nbsp;<span class="ident" id="6445128">err</span>&nbsp;<span class="op" id="6445132">!=</span>&nbsp;<span class="ident" id="6445135">nil</span>&nbsp;<span class="op" id="6445139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445144">return</span>&nbsp;<span class="ident" id="6445151">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445157">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445162">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445201">if</span>&nbsp;<span class="ident" id="6445204">tinfo</span><span class="op" id="6445209">.</span><span class="ident" id="6445210">xmlname</span>&nbsp;<span class="op" id="6445218">!=</span>&nbsp;<span class="ident" id="6445221">nil</span>&nbsp;<span class="op" id="6445225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445230">finfo</span>&nbsp;<span class="op" id="6445236">:=</span>&nbsp;<span class="ident" id="6445239">tinfo</span><span class="op" id="6445244">.</span><span class="ident" id="6445245">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445256">if</span>&nbsp;<span class="ident" id="6445259">finfo</span><span class="op" id="6445264">.</span><span class="ident" id="6445265">name</span>&nbsp;<span class="op" id="6445270">!=</span>&nbsp;<span class="string" id="6445273">&#34;&#34;</span>&nbsp;<span class="op" id="6445276">&amp;&amp;</span>&nbsp;<span class="ident" id="6445279">finfo</span><span class="op" id="6445284">.</span><span class="ident" id="6445285">name</span>&nbsp;<span class="op" id="6445290">!=</span>&nbsp;<span class="ident" id="6445293">start</span><span class="op" id="6445298">.</span><span class="ident" id="6445299">Name</span><span class="op" id="6445303">.</span><span class="ident" id="6445304">Local</span>&nbsp;<span class="op" id="6445310">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445316">return</span>&nbsp;<span class="ident" id="6445323">UnmarshalError</span><span class="op" id="6445337">(</span><span class="string" id="6445338">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6445364">+</span>&nbsp;<span class="ident" id="6445366">finfo</span><span class="op" id="6445371">.</span><span class="ident" id="6445372">name</span>&nbsp;<span class="op" id="6445377">+</span>&nbsp;<span class="string" id="6445379">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6445394">+</span>&nbsp;<span class="ident" id="6445396">start</span><span class="op" id="6445401">.</span><span class="ident" id="6445402">Name</span><span class="op" id="6445406">.</span><span class="ident" id="6445407">Local</span>&nbsp;<span class="op" id="6445413">+</span>&nbsp;<span class="string" id="6445415">&#34;&gt;&#34;</span><span class="op" id="6445418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445428">if</span>&nbsp;<span class="ident" id="6445431">finfo</span><span class="op" id="6445436">.</span><span class="ident" id="6445437">xmlns</span>&nbsp;<span class="op" id="6445443">!=</span>&nbsp;<span class="string" id="6445446">&#34;&#34;</span>&nbsp;<span class="op" id="6445449">&amp;&amp;</span>&nbsp;<span class="ident" id="6445452">finfo</span><span class="op" id="6445457">.</span><span class="ident" id="6445458">xmlns</span>&nbsp;<span class="op" id="6445464">!=</span>&nbsp;<span class="ident" id="6445467">start</span><span class="op" id="6445472">.</span><span class="ident" id="6445473">Name</span><span class="op" id="6445477">.</span><span class="ident" id="6445478">Space</span>&nbsp;<span class="op" id="6445484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445490">e</span>&nbsp;<span class="op" id="6445492">:=</span>&nbsp;<span class="string" id="6445495">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6445516">+</span>&nbsp;<span class="ident" id="6445518">finfo</span><span class="op" id="6445523">.</span><span class="ident" id="6445524">name</span>&nbsp;<span class="op" id="6445529">+</span>&nbsp;<span class="string" id="6445531">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="6445550">+</span>&nbsp;<span class="ident" id="6445552">finfo</span><span class="op" id="6445557">.</span><span class="ident" id="6445558">xmlns</span>&nbsp;<span class="op" id="6445564">+</span>&nbsp;<span class="string" id="6445566">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445583">if</span>&nbsp;<span class="ident" id="6445586">start</span><span class="op" id="6445591">.</span><span class="ident" id="6445592">Name</span><span class="op" id="6445596">.</span><span class="ident" id="6445597">Space</span>&nbsp;<span class="op" id="6445603">==</span>&nbsp;<span class="string" id="6445606">&#34;&#34;</span>&nbsp;<span class="op" id="6445609">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445616">e</span>&nbsp;<span class="op" id="6445618">+=</span>&nbsp;<span class="string" id="6445621">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445641">}</span>&nbsp;<span class="keyword" id="6445643">else</span>&nbsp;<span class="op" id="6445648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445655">e</span>&nbsp;<span class="op" id="6445657">+=</span>&nbsp;<span class="ident" id="6445660">start</span><span class="op" id="6445665">.</span><span class="ident" id="6445666">Name</span><span class="op" id="6445670">.</span><span class="ident" id="6445671">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445687">return</span>&nbsp;<span class="ident" id="6445694">UnmarshalError</span><span class="op" id="6445708">(</span><span class="ident" id="6445709">e</span><span class="op" id="6445710">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445720">fv</span>&nbsp;<span class="op" id="6445723">:=</span>&nbsp;<span class="ident" id="6445726">finfo</span><span class="op" id="6445731">.</span><span class="ident" id="6445732">value</span><span class="op" id="6445737">(</span><span class="ident" id="6445738">sv</span><span class="op" id="6445740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445745">if</span>&nbsp;<span class="ident" id="6445748">_</span><span class="op" id="6445749">,</span>&nbsp;<span class="ident" id="6445751">ok</span>&nbsp;<span class="op" id="6445754">:=</span>&nbsp;<span class="ident" id="6445757">fv</span><span class="op" id="6445759">.</span><span class="ident" id="6445760">Interface</span><span class="op" id="6445769">(</span><span class="op" id="6445770">)</span><span class="op" id="6445771">.</span><span class="op" id="6445772">(</span><span class="ident" id="6445773">Name</span><span class="op" id="6445777">)</span><span class="op" id="6445778">;</span>&nbsp;<span class="ident" id="6445780">ok</span>&nbsp;<span class="op" id="6445783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445789">fv</span><span class="op" id="6445791">.</span><span class="ident" id="6445792">Set</span><span class="op" id="6445795">(</span><span class="ident" id="6445796">reflect</span><span class="op" id="6445803">.</span><span class="ident" id="6445804">ValueOf</span><span class="op" id="6445811">(</span><span class="ident" id="6445812">start</span><span class="op" id="6445817">.</span><span class="ident" id="6445818">Name</span><span class="op" id="6445822">)</span><span class="op" id="6445823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445828">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6445832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445837">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6445861">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445934">for</span>&nbsp;<span class="ident" id="6445938">i</span>&nbsp;<span class="op" id="6445940">:=</span>&nbsp;<span class="keyword" id="6445943">range</span>&nbsp;<span class="ident" id="6445949">tinfo</span><span class="op" id="6445954">.</span><span class="ident" id="6445955">fields</span>&nbsp;<span class="op" id="6445962">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6445967">finfo</span>&nbsp;<span class="op" id="6445973">:=</span>&nbsp;<span class="op" id="6445976">&amp;</span><span class="ident" id="6445977">tinfo</span><span class="op" id="6445982">.</span><span class="ident" id="6445983">fields</span><span class="op" id="6445989">[</span><span class="ident" id="6445990">i</span><span class="op" id="6445991">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6445996">switch</span>&nbsp;<span class="ident" id="6446003">finfo</span><span class="op" id="6446008">.</span><span class="ident" id="6446009">flags</span>&nbsp;<span class="op" id="6446015">&amp;</span>&nbsp;<span class="ident" id="6446017">fMode</span>&nbsp;<span class="op" id="6446023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446028">case</span>&nbsp;<span class="ident" id="6446033">fAttr</span><span class="op" id="6446038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446044">strv</span>&nbsp;<span class="op" id="6446049">:=</span>&nbsp;<span class="ident" id="6446052">finfo</span><span class="op" id="6446057">.</span><span class="ident" id="6446058">value</span><span class="op" id="6446063">(</span><span class="ident" id="6446064">sv</span><span class="op" id="6446066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6446072">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446099">for</span>&nbsp;<span class="ident" id="6446103">_</span><span class="op" id="6446104">,</span>&nbsp;<span class="ident" id="6446106">a</span>&nbsp;<span class="op" id="6446108">:=</span>&nbsp;<span class="keyword" id="6446111">range</span>&nbsp;<span class="ident" id="6446117">start</span><span class="op" id="6446122">.</span><span class="ident" id="6446123">Attr</span>&nbsp;<span class="op" id="6446128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446135">if</span>&nbsp;<span class="ident" id="6446138">a</span><span class="op" id="6446139">.</span><span class="ident" id="6446140">Name</span><span class="op" id="6446144">.</span><span class="ident" id="6446145">Local</span>&nbsp;<span class="op" id="6446151">==</span>&nbsp;<span class="ident" id="6446154">finfo</span><span class="op" id="6446159">.</span><span class="ident" id="6446160">name</span>&nbsp;<span class="op" id="6446165">&amp;&amp;</span>&nbsp;<span class="op" id="6446168">(</span><span class="ident" id="6446169">finfo</span><span class="op" id="6446174">.</span><span class="ident" id="6446175">xmlns</span>&nbsp;<span class="op" id="6446181">==</span>&nbsp;<span class="string" id="6446184">&#34;&#34;</span>&nbsp;<span class="op" id="6446187">||</span>&nbsp;<span class="ident" id="6446190">finfo</span><span class="op" id="6446195">.</span><span class="ident" id="6446196">xmlns</span>&nbsp;<span class="op" id="6446202">==</span>&nbsp;<span class="ident" id="6446205">a</span><span class="op" id="6446206">.</span><span class="ident" id="6446207">Name</span><span class="op" id="6446211">.</span><span class="ident" id="6446212">Space</span><span class="op" id="6446217">)</span>&nbsp;<span class="op" id="6446219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446227">if</span>&nbsp;<span class="ident" id="6446230">err</span>&nbsp;<span class="op" id="6446234">:=</span>&nbsp;<span class="ident" id="6446237">p</span><span class="op" id="6446238">.</span><span class="ident" id="6446239">unmarshalAttr</span><span class="op" id="6446252">(</span><span class="ident" id="6446253">strv</span><span class="op" id="6446257">,</span>&nbsp;<span class="ident" id="6446259">a</span><span class="op" id="6446260">)</span><span class="op" id="6446261">;</span>&nbsp;<span class="ident" id="6446263">err</span>&nbsp;<span class="op" id="6446267">!=</span>&nbsp;<span class="ident" id="6446270">nil</span>&nbsp;<span class="op" id="6446274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446283">return</span>&nbsp;<span class="ident" id="6446290">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446300">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446308">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446331">case</span>&nbsp;<span class="ident" id="6446336">fCharData</span><span class="op" id="6446345">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446351">if</span>&nbsp;<span class="op" id="6446354">!</span><span class="ident" id="6446355">saveData</span><span class="op" id="6446363">.</span><span class="ident" id="6446364">IsValid</span><span class="op" id="6446371">(</span><span class="op" id="6446372">)</span>&nbsp;<span class="op" id="6446374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446381">saveData</span>&nbsp;<span class="op" id="6446390">=</span>&nbsp;<span class="ident" id="6446392">finfo</span><span class="op" id="6446397">.</span><span class="ident" id="6446398">value</span><span class="op" id="6446403">(</span><span class="ident" id="6446404">sv</span><span class="op" id="6446406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446418">case</span>&nbsp;<span class="ident" id="6446423">fComment</span><span class="op" id="6446431">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446437">if</span>&nbsp;<span class="op" id="6446440">!</span><span class="ident" id="6446441">saveComment</span><span class="op" id="6446452">.</span><span class="ident" id="6446453">IsValid</span><span class="op" id="6446460">(</span><span class="op" id="6446461">)</span>&nbsp;<span class="op" id="6446463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446470">saveComment</span>&nbsp;<span class="op" id="6446482">=</span>&nbsp;<span class="ident" id="6446484">finfo</span><span class="op" id="6446489">.</span><span class="ident" id="6446490">value</span><span class="op" id="6446495">(</span><span class="ident" id="6446496">sv</span><span class="op" id="6446498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446510">case</span>&nbsp;<span class="ident" id="6446515">fAny</span><span class="op" id="6446519">,</span>&nbsp;<span class="ident" id="6446521">fAny</span>&nbsp;<span class="op" id="6446526">|</span>&nbsp;<span class="ident" id="6446528">fElement</span><span class="op" id="6446536">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446542">if</span>&nbsp;<span class="op" id="6446545">!</span><span class="ident" id="6446546">saveAny</span><span class="op" id="6446553">.</span><span class="ident" id="6446554">IsValid</span><span class="op" id="6446561">(</span><span class="op" id="6446562">)</span>&nbsp;<span class="op" id="6446564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446571">saveAny</span>&nbsp;<span class="op" id="6446579">=</span>&nbsp;<span class="ident" id="6446581">finfo</span><span class="op" id="6446586">.</span><span class="ident" id="6446587">value</span><span class="op" id="6446592">(</span><span class="ident" id="6446593">sv</span><span class="op" id="6446595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446607">case</span>&nbsp;<span class="ident" id="6446612">fInnerXml</span><span class="op" id="6446621">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446627">if</span>&nbsp;<span class="op" id="6446630">!</span><span class="ident" id="6446631">saveXML</span><span class="op" id="6446638">.</span><span class="ident" id="6446639">IsValid</span><span class="op" id="6446646">(</span><span class="op" id="6446647">)</span>&nbsp;<span class="op" id="6446649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446656">saveXML</span>&nbsp;<span class="op" id="6446664">=</span>&nbsp;<span class="ident" id="6446666">finfo</span><span class="op" id="6446671">.</span><span class="ident" id="6446672">value</span><span class="op" id="6446677">(</span><span class="ident" id="6446678">sv</span><span class="op" id="6446680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446687">if</span>&nbsp;<span class="ident" id="6446690">p</span><span class="op" id="6446691">.</span><span class="ident" id="6446692">saved</span>&nbsp;<span class="op" id="6446698">==</span>&nbsp;<span class="ident" id="6446701">nil</span>&nbsp;<span class="op" id="6446705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446713">saveXMLIndex</span>&nbsp;<span class="op" id="6446726">=</span>&nbsp;<span class="num" id="6446728">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446736">p</span><span class="op" id="6446737">.</span><span class="ident" id="6446738">saved</span>&nbsp;<span class="op" id="6446744">=</span>&nbsp;<span class="builtinfunc" id="6446746">new</span><span class="op" id="6446749">(</span><span class="ident" id="6446750">bytes</span><span class="op" id="6446755">.</span><span class="ident" id="6446756">Buffer</span><span class="op" id="6446762">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446769">}</span>&nbsp;<span class="keyword" id="6446771">else</span>&nbsp;<span class="op" id="6446776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446784">saveXMLIndex</span>&nbsp;<span class="op" id="6446797">=</span>&nbsp;<span class="ident" id="6446799">p</span><span class="op" id="6446800">.</span><span class="ident" id="6446801">savedOffset</span><span class="op" id="6446812">(</span><span class="op" id="6446813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446831">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6446842">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6446864">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="6446903">Loop</span><span class="op" id="6446907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446910">for</span>&nbsp;<span class="op" id="6446914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446918">var</span>&nbsp;<span class="ident" id="6446922">savedOffset</span>&nbsp;<span class="builtintype" id="6446934">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6446940">if</span>&nbsp;<span class="ident" id="6446943">saveXML</span><span class="op" id="6446950">.</span><span class="ident" id="6446951">IsValid</span><span class="op" id="6446958">(</span><span class="op" id="6446959">)</span>&nbsp;<span class="op" id="6446961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6446966">savedOffset</span>&nbsp;<span class="op" id="6446978">=</span>&nbsp;<span class="ident" id="6446980">p</span><span class="op" id="6446981">.</span><span class="ident" id="6446982">savedOffset</span><span class="op" id="6446993">(</span><span class="op" id="6446994">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6446998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447002">tok</span><span class="op" id="6447005">,</span>&nbsp;<span class="ident" id="6447007">err</span>&nbsp;<span class="op" id="6447011">:=</span>&nbsp;<span class="ident" id="6447014">p</span><span class="op" id="6447015">.</span><span class="ident" id="6447016">Token</span><span class="op" id="6447021">(</span><span class="op" id="6447022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447026">if</span>&nbsp;<span class="ident" id="6447029">err</span>&nbsp;<span class="op" id="6447033">!=</span>&nbsp;<span class="ident" id="6447036">nil</span>&nbsp;<span class="op" id="6447040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447045">return</span>&nbsp;<span class="ident" id="6447052">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447058">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447062">switch</span>&nbsp;<span class="ident" id="6447069">t</span>&nbsp;<span class="op" id="6447071">:=</span>&nbsp;<span class="ident" id="6447074">tok</span><span class="op" id="6447077">.</span><span class="op" id="6447078">(</span><span class="keyword" id="6447079">type</span><span class="op" id="6447083">)</span>&nbsp;<span class="op" id="6447085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447089">case</span>&nbsp;<span class="ident" id="6447094">StartElement</span><span class="op" id="6447106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447111">consumed</span>&nbsp;<span class="op" id="6447120">:=</span>&nbsp;<span class="ident" id="6447123">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447132">if</span>&nbsp;<span class="ident" id="6447135">sv</span><span class="op" id="6447137">.</span><span class="ident" id="6447138">IsValid</span><span class="op" id="6447145">(</span><span class="op" id="6447146">)</span>&nbsp;<span class="op" id="6447148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447154">consumed</span><span class="op" id="6447162">,</span>&nbsp;<span class="ident" id="6447164">err</span>&nbsp;<span class="op" id="6447168">=</span>&nbsp;<span class="ident" id="6447170">p</span><span class="op" id="6447171">.</span><span class="ident" id="6447172">unmarshalPath</span><span class="op" id="6447185">(</span><span class="ident" id="6447186">tinfo</span><span class="op" id="6447191">,</span>&nbsp;<span class="ident" id="6447193">sv</span><span class="op" id="6447195">,</span>&nbsp;<span class="ident" id="6447197">nil</span><span class="op" id="6447200">,</span>&nbsp;<span class="op" id="6447202">&amp;</span><span class="ident" id="6447203">t</span><span class="op" id="6447204">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447210">if</span>&nbsp;<span class="ident" id="6447213">err</span>&nbsp;<span class="op" id="6447217">!=</span>&nbsp;<span class="ident" id="6447220">nil</span>&nbsp;<span class="op" id="6447224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447231">return</span>&nbsp;<span class="ident" id="6447238">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447252">if</span>&nbsp;<span class="op" id="6447255">!</span><span class="ident" id="6447256">consumed</span>&nbsp;<span class="op" id="6447265">&amp;&amp;</span>&nbsp;<span class="ident" id="6447268">saveAny</span><span class="op" id="6447275">.</span><span class="ident" id="6447276">IsValid</span><span class="op" id="6447283">(</span><span class="op" id="6447284">)</span>&nbsp;<span class="op" id="6447286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447293">consumed</span>&nbsp;<span class="op" id="6447302">=</span>&nbsp;<span class="ident" id="6447304">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447314">if</span>&nbsp;<span class="ident" id="6447317">err</span>&nbsp;<span class="op" id="6447321">:=</span>&nbsp;<span class="ident" id="6447324">p</span><span class="op" id="6447325">.</span><span class="ident" id="6447326">unmarshal</span><span class="op" id="6447335">(</span><span class="ident" id="6447336">saveAny</span><span class="op" id="6447343">,</span>&nbsp;<span class="op" id="6447345">&amp;</span><span class="ident" id="6447346">t</span><span class="op" id="6447347">)</span><span class="op" id="6447348">;</span>&nbsp;<span class="ident" id="6447350">err</span>&nbsp;<span class="op" id="6447354">!=</span>&nbsp;<span class="ident" id="6447357">nil</span>&nbsp;<span class="op" id="6447361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447369">return</span>&nbsp;<span class="ident" id="6447376">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447396">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447401">if</span>&nbsp;<span class="op" id="6447404">!</span><span class="ident" id="6447405">consumed</span>&nbsp;<span class="op" id="6447414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447420">if</span>&nbsp;<span class="ident" id="6447423">err</span>&nbsp;<span class="op" id="6447427">:=</span>&nbsp;<span class="ident" id="6447430">p</span><span class="op" id="6447431">.</span><span class="ident" id="6447432">Skip</span><span class="op" id="6447436">(</span><span class="op" id="6447437">)</span><span class="op" id="6447438">;</span>&nbsp;<span class="ident" id="6447440">err</span>&nbsp;<span class="op" id="6447444">!=</span>&nbsp;<span class="ident" id="6447447">nil</span>&nbsp;<span class="op" id="6447451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447458">return</span>&nbsp;<span class="ident" id="6447465">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447478">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447483">case</span>&nbsp;<span class="ident" id="6447488">EndElement</span><span class="op" id="6447498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447503">if</span>&nbsp;<span class="ident" id="6447506">saveXML</span><span class="op" id="6447513">.</span><span class="ident" id="6447514">IsValid</span><span class="op" id="6447521">(</span><span class="op" id="6447522">)</span>&nbsp;<span class="op" id="6447524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447530">saveXMLData</span>&nbsp;<span class="op" id="6447542">=</span>&nbsp;<span class="ident" id="6447544">p</span><span class="op" id="6447545">.</span><span class="ident" id="6447546">saved</span><span class="op" id="6447551">.</span><span class="ident" id="6447552">Bytes</span><span class="op" id="6447557">(</span><span class="op" id="6447558">)</span><span class="op" id="6447559">[</span><span class="ident" id="6447560">saveXMLIndex</span><span class="op" id="6447572">:</span><span class="ident" id="6447573">savedOffset</span><span class="op" id="6447584">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447590">if</span>&nbsp;<span class="ident" id="6447593">saveXMLIndex</span>&nbsp;<span class="op" id="6447606">==</span>&nbsp;<span class="num" id="6447609">0</span>&nbsp;<span class="op" id="6447611">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447618">p</span><span class="op" id="6447619">.</span><span class="ident" id="6447620">saved</span>&nbsp;<span class="op" id="6447626">=</span>&nbsp;<span class="ident" id="6447628">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447646">break</span>&nbsp;<span class="ident" id="6447652">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447660">case</span>&nbsp;<span class="ident" id="6447665">CharData</span><span class="op" id="6447673">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447678">if</span>&nbsp;<span class="ident" id="6447681">saveData</span><span class="op" id="6447689">.</span><span class="ident" id="6447690">IsValid</span><span class="op" id="6447697">(</span><span class="op" id="6447698">)</span>&nbsp;<span class="op" id="6447700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447706">data</span>&nbsp;<span class="op" id="6447711">=</span>&nbsp;<span class="builtinfunc" id="6447713">append</span><span class="op" id="6447719">(</span><span class="ident" id="6447720">data</span><span class="op" id="6447724">,</span>&nbsp;<span class="ident" id="6447726">t</span><span class="op" id="6447727">...</span><span class="op" id="6447730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447740">case</span>&nbsp;<span class="ident" id="6447745">Comment</span><span class="op" id="6447752">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447757">if</span>&nbsp;<span class="ident" id="6447760">saveComment</span><span class="op" id="6447771">.</span><span class="ident" id="6447772">IsValid</span><span class="op" id="6447779">(</span><span class="op" id="6447780">)</span>&nbsp;<span class="op" id="6447782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6447788">comment</span>&nbsp;<span class="op" id="6447796">=</span>&nbsp;<span class="builtinfunc" id="6447798">append</span><span class="op" id="6447804">(</span><span class="ident" id="6447805">comment</span><span class="op" id="6447812">,</span>&nbsp;<span class="ident" id="6447814">t</span><span class="op" id="6447815">...</span><span class="op" id="6447818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447827">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6447830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447834">if</span>&nbsp;<span class="ident" id="6447837">saveData</span><span class="op" id="6447845">.</span><span class="ident" id="6447846">IsValid</span><span class="op" id="6447853">(</span><span class="op" id="6447854">)</span>&nbsp;<span class="op" id="6447856">&amp;&amp;</span>&nbsp;<span class="ident" id="6447859">saveData</span><span class="op" id="6447867">.</span><span class="ident" id="6447868">CanInterface</span><span class="op" id="6447880">(</span><span class="op" id="6447881">)</span>&nbsp;<span class="op" id="6447883">&amp;&amp;</span>&nbsp;<span class="ident" id="6447886">saveData</span><span class="op" id="6447894">.</span><span class="ident" id="6447895">Type</span><span class="op" id="6447899">(</span><span class="op" id="6447900">)</span><span class="op" id="6447901">.</span><span class="ident" id="6447902">Implements</span><span class="op" id="6447912">(</span><span class="ident" id="6447913">textUnmarshalerType</span><span class="op" id="6447932">)</span>&nbsp;<span class="op" id="6447934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6447938">if</span>&nbsp;<span class="ident" id="6447941">err</span>&nbsp;<span class="op" id="6447945">:=</span>&nbsp;<span class="ident" id="6447948">saveData</span><span class="op" id="6447956">.</span><span class="ident" id="6447957">Interface</span><span class="op" id="6447966">(</span><span class="op" id="6447967">)</span><span class="op" id="6447968">.</span><span class="op" id="6447969">(</span><span class="ident" id="6447970">encoding</span><span class="op" id="6447978">.</span><span class="ident" id="6447979">TextUnmarshaler</span><span class="op" id="6447994">)</span><span class="op" id="6447995">.</span><span class="ident" id="6447996">UnmarshalText</span><span class="op" id="6448009">(</span><span class="ident" id="6448010">data</span><span class="op" id="6448014">)</span><span class="op" id="6448015">;</span>&nbsp;<span class="ident" id="6448017">err</span>&nbsp;<span class="op" id="6448021">!=</span>&nbsp;<span class="ident" id="6448024">nil</span>&nbsp;<span class="op" id="6448028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448033">return</span>&nbsp;<span class="ident" id="6448040">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448050">saveData</span>&nbsp;<span class="op" id="6448059">=</span>&nbsp;<span class="ident" id="6448061">reflect</span><span class="op" id="6448068">.</span><span class="ident" id="6448069">Value</span><span class="op" id="6448074">{</span><span class="op" id="6448075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448082">if</span>&nbsp;<span class="ident" id="6448085">saveData</span><span class="op" id="6448093">.</span><span class="ident" id="6448094">IsValid</span><span class="op" id="6448101">(</span><span class="op" id="6448102">)</span>&nbsp;<span class="op" id="6448104">&amp;&amp;</span>&nbsp;<span class="ident" id="6448107">saveData</span><span class="op" id="6448115">.</span><span class="ident" id="6448116">CanAddr</span><span class="op" id="6448123">(</span><span class="op" id="6448124">)</span>&nbsp;<span class="op" id="6448126">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448130">pv</span>&nbsp;<span class="op" id="6448133">:=</span>&nbsp;<span class="ident" id="6448136">saveData</span><span class="op" id="6448144">.</span><span class="ident" id="6448145">Addr</span><span class="op" id="6448149">(</span><span class="op" id="6448150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448154">if</span>&nbsp;<span class="ident" id="6448157">pv</span><span class="op" id="6448159">.</span><span class="ident" id="6448160">CanInterface</span><span class="op" id="6448172">(</span><span class="op" id="6448173">)</span>&nbsp;<span class="op" id="6448175">&amp;&amp;</span>&nbsp;<span class="ident" id="6448178">pv</span><span class="op" id="6448180">.</span><span class="ident" id="6448181">Type</span><span class="op" id="6448185">(</span><span class="op" id="6448186">)</span><span class="op" id="6448187">.</span><span class="ident" id="6448188">Implements</span><span class="op" id="6448198">(</span><span class="ident" id="6448199">textUnmarshalerType</span><span class="op" id="6448218">)</span>&nbsp;<span class="op" id="6448220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448225">if</span>&nbsp;<span class="ident" id="6448228">err</span>&nbsp;<span class="op" id="6448232">:=</span>&nbsp;<span class="ident" id="6448235">pv</span><span class="op" id="6448237">.</span><span class="ident" id="6448238">Interface</span><span class="op" id="6448247">(</span><span class="op" id="6448248">)</span><span class="op" id="6448249">.</span><span class="op" id="6448250">(</span><span class="ident" id="6448251">encoding</span><span class="op" id="6448259">.</span><span class="ident" id="6448260">TextUnmarshaler</span><span class="op" id="6448275">)</span><span class="op" id="6448276">.</span><span class="ident" id="6448277">UnmarshalText</span><span class="op" id="6448290">(</span><span class="ident" id="6448291">data</span><span class="op" id="6448295">)</span><span class="op" id="6448296">;</span>&nbsp;<span class="ident" id="6448298">err</span>&nbsp;<span class="op" id="6448302">!=</span>&nbsp;<span class="ident" id="6448305">nil</span>&nbsp;<span class="op" id="6448309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448315">return</span>&nbsp;<span class="ident" id="6448322">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448329">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448334">saveData</span>&nbsp;<span class="op" id="6448343">=</span>&nbsp;<span class="ident" id="6448345">reflect</span><span class="op" id="6448352">.</span><span class="ident" id="6448353">Value</span><span class="op" id="6448358">{</span><span class="op" id="6448359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448370">if</span>&nbsp;<span class="ident" id="6448373">err</span>&nbsp;<span class="op" id="6448377">:=</span>&nbsp;<span class="ident" id="6448380">copyValue</span><span class="op" id="6448389">(</span><span class="ident" id="6448390">saveData</span><span class="op" id="6448398">,</span>&nbsp;<span class="ident" id="6448400">data</span><span class="op" id="6448404">)</span><span class="op" id="6448405">;</span>&nbsp;<span class="ident" id="6448407">err</span>&nbsp;<span class="op" id="6448411">!=</span>&nbsp;<span class="ident" id="6448414">nil</span>&nbsp;<span class="op" id="6448418">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448422">return</span>&nbsp;<span class="ident" id="6448429">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448438">switch</span>&nbsp;<span class="ident" id="6448445">t</span>&nbsp;<span class="op" id="6448447">:=</span>&nbsp;<span class="ident" id="6448450">saveComment</span><span class="op" id="6448461">;</span>&nbsp;<span class="ident" id="6448463">t</span><span class="op" id="6448464">.</span><span class="ident" id="6448465">Kind</span><span class="op" id="6448469">(</span><span class="op" id="6448470">)</span>&nbsp;<span class="op" id="6448472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448475">case</span>&nbsp;<span class="ident" id="6448480">reflect</span><span class="op" id="6448487">.</span><span class="ident" id="6448488">String</span><span class="op" id="6448494">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448498">t</span><span class="op" id="6448499">.</span><span class="ident" id="6448500">SetString</span><span class="op" id="6448509">(</span><span class="builtintype" id="6448510">string</span><span class="op" id="6448516">(</span><span class="ident" id="6448517">comment</span><span class="op" id="6448524">)</span><span class="op" id="6448525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448528">case</span>&nbsp;<span class="ident" id="6448533">reflect</span><span class="op" id="6448540">.</span><span class="ident" id="6448541">Slice</span><span class="op" id="6448546">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448550">t</span><span class="op" id="6448551">.</span><span class="ident" id="6448552">Set</span><span class="op" id="6448555">(</span><span class="ident" id="6448556">reflect</span><span class="op" id="6448563">.</span><span class="ident" id="6448564">ValueOf</span><span class="op" id="6448571">(</span><span class="ident" id="6448572">comment</span><span class="op" id="6448579">)</span><span class="op" id="6448580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448587">switch</span>&nbsp;<span class="ident" id="6448594">t</span>&nbsp;<span class="op" id="6448596">:=</span>&nbsp;<span class="ident" id="6448599">saveXML</span><span class="op" id="6448606">;</span>&nbsp;<span class="ident" id="6448608">t</span><span class="op" id="6448609">.</span><span class="ident" id="6448610">Kind</span><span class="op" id="6448614">(</span><span class="op" id="6448615">)</span>&nbsp;<span class="op" id="6448617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448620">case</span>&nbsp;<span class="ident" id="6448625">reflect</span><span class="op" id="6448632">.</span><span class="ident" id="6448633">String</span><span class="op" id="6448639">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448643">t</span><span class="op" id="6448644">.</span><span class="ident" id="6448645">SetString</span><span class="op" id="6448654">(</span><span class="builtintype" id="6448655">string</span><span class="op" id="6448661">(</span><span class="ident" id="6448662">saveXMLData</span><span class="op" id="6448673">)</span><span class="op" id="6448674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448677">case</span>&nbsp;<span class="ident" id="6448682">reflect</span><span class="op" id="6448689">.</span><span class="ident" id="6448690">Slice</span><span class="op" id="6448695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448699">t</span><span class="op" id="6448700">.</span><span class="ident" id="6448701">Set</span><span class="op" id="6448704">(</span><span class="ident" id="6448705">reflect</span><span class="op" id="6448712">.</span><span class="ident" id="6448713">ValueOf</span><span class="op" id="6448720">(</span><span class="ident" id="6448721">saveXMLData</span><span class="op" id="6448732">)</span><span class="op" id="6448733">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448740">return</span>&nbsp;<span class="ident" id="6448747">nil</span><br>
<span class="lineno"></span><span class="op" id="6448751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6448754">func</span>&nbsp;<span class="ident" id="6448759">copyValue</span><span class="op" id="6448768">(</span><span class="ident" id="6448769">dst</span>&nbsp;<span class="ident" id="6448773">reflect</span><span class="op" id="6448780">.</span><span class="ident" id="6448781">Value</span><span class="op" id="6448786">,</span>&nbsp;<span class="ident" id="6448788">src</span>&nbsp;<span class="op" id="6448792">[</span><span class="op" id="6448793">]</span><span class="builtintype" id="6448794">byte</span><span class="op" id="6448798">)</span>&nbsp;<span class="op" id="6448800">(</span><span class="ident" id="6448801">err</span>&nbsp;<span class="builtintype" id="6448805">error</span><span class="op" id="6448810">)</span>&nbsp;<span class="op" id="6448812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448815">dst0</span>&nbsp;<span class="op" id="6448820">:=</span>&nbsp;<span class="ident" id="6448823">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448829">if</span>&nbsp;<span class="ident" id="6448832">dst</span><span class="op" id="6448835">.</span><span class="ident" id="6448836">Kind</span><span class="op" id="6448840">(</span><span class="op" id="6448841">)</span>&nbsp;<span class="op" id="6448843">==</span>&nbsp;<span class="ident" id="6448846">reflect</span><span class="op" id="6448853">.</span><span class="ident" id="6448854">Ptr</span>&nbsp;<span class="op" id="6448858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448862">if</span>&nbsp;<span class="ident" id="6448865">dst</span><span class="op" id="6448868">.</span><span class="ident" id="6448869">IsNil</span><span class="op" id="6448874">(</span><span class="op" id="6448875">)</span>&nbsp;<span class="op" id="6448877">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448882">dst</span><span class="op" id="6448885">.</span><span class="ident" id="6448886">Set</span><span class="op" id="6448889">(</span><span class="ident" id="6448890">reflect</span><span class="op" id="6448897">.</span><span class="ident" id="6448898">New</span><span class="op" id="6448901">(</span><span class="ident" id="6448902">dst</span><span class="op" id="6448905">.</span><span class="ident" id="6448906">Type</span><span class="op" id="6448910">(</span><span class="op" id="6448911">)</span><span class="op" id="6448912">.</span><span class="ident" id="6448913">Elem</span><span class="op" id="6448917">(</span><span class="op" id="6448918">)</span><span class="op" id="6448919">)</span><span class="op" id="6448920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6448928">dst</span>&nbsp;<span class="op" id="6448932">=</span>&nbsp;<span class="ident" id="6448934">dst</span><span class="op" id="6448937">.</span><span class="ident" id="6448938">Elem</span><span class="op" id="6448942">(</span><span class="op" id="6448943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6448946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6448950">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448977">switch</span>&nbsp;<span class="ident" id="6448984">dst</span><span class="op" id="6448987">.</span><span class="ident" id="6448988">Kind</span><span class="op" id="6448992">(</span><span class="op" id="6448993">)</span>&nbsp;<span class="op" id="6448995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6448998">case</span>&nbsp;<span class="ident" id="6449003">reflect</span><span class="op" id="6449010">.</span><span class="ident" id="6449011">Invalid</span><span class="op" id="6449018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449022">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449046">default</span><span class="op" id="6449053">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449057">return</span>&nbsp;<span class="ident" id="6449064">errors</span><span class="op" id="6449070">.</span><span class="ident" id="6449071">New</span><span class="op" id="6449074">(</span><span class="string" id="6449075">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="6449100">+</span>&nbsp;<span class="ident" id="6449102">dst0</span><span class="op" id="6449106">.</span><span class="ident" id="6449107">Type</span><span class="op" id="6449111">(</span><span class="op" id="6449112">)</span><span class="op" id="6449113">.</span><span class="ident" id="6449114">String</span><span class="op" id="6449120">(</span><span class="op" id="6449121">)</span><span class="op" id="6449122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449125">case</span>&nbsp;<span class="ident" id="6449130">reflect</span><span class="op" id="6449137">.</span><span class="ident" id="6449138">Int</span><span class="op" id="6449141">,</span>&nbsp;<span class="ident" id="6449143">reflect</span><span class="op" id="6449150">.</span><span class="ident" id="6449151">Int8</span><span class="op" id="6449155">,</span>&nbsp;<span class="ident" id="6449157">reflect</span><span class="op" id="6449164">.</span><span class="ident" id="6449165">Int16</span><span class="op" id="6449170">,</span>&nbsp;<span class="ident" id="6449172">reflect</span><span class="op" id="6449179">.</span><span class="ident" id="6449180">Int32</span><span class="op" id="6449185">,</span>&nbsp;<span class="ident" id="6449187">reflect</span><span class="op" id="6449194">.</span><span class="ident" id="6449195">Int64</span><span class="op" id="6449200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449204">itmp</span><span class="op" id="6449208">,</span>&nbsp;<span class="ident" id="6449210">err</span>&nbsp;<span class="op" id="6449214">:=</span>&nbsp;<span class="ident" id="6449217">strconv</span><span class="op" id="6449224">.</span><span class="ident" id="6449225">ParseInt</span><span class="op" id="6449233">(</span><span class="builtintype" id="6449234">string</span><span class="op" id="6449240">(</span><span class="ident" id="6449241">src</span><span class="op" id="6449244">)</span><span class="op" id="6449245">,</span>&nbsp;<span class="num" id="6449247">10</span><span class="op" id="6449249">,</span>&nbsp;<span class="ident" id="6449251">dst</span><span class="op" id="6449254">.</span><span class="ident" id="6449255">Type</span><span class="op" id="6449259">(</span><span class="op" id="6449260">)</span><span class="op" id="6449261">.</span><span class="ident" id="6449262">Bits</span><span class="op" id="6449266">(</span><span class="op" id="6449267">)</span><span class="op" id="6449268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449272">if</span>&nbsp;<span class="ident" id="6449275">err</span>&nbsp;<span class="op" id="6449279">!=</span>&nbsp;<span class="ident" id="6449282">nil</span>&nbsp;<span class="op" id="6449286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449291">return</span>&nbsp;<span class="ident" id="6449298">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449308">dst</span><span class="op" id="6449311">.</span><span class="ident" id="6449312">SetInt</span><span class="op" id="6449318">(</span><span class="ident" id="6449319">itmp</span><span class="op" id="6449323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449326">case</span>&nbsp;<span class="ident" id="6449331">reflect</span><span class="op" id="6449338">.</span><span class="ident" id="6449339">Uint</span><span class="op" id="6449343">,</span>&nbsp;<span class="ident" id="6449345">reflect</span><span class="op" id="6449352">.</span><span class="ident" id="6449353">Uint8</span><span class="op" id="6449358">,</span>&nbsp;<span class="ident" id="6449360">reflect</span><span class="op" id="6449367">.</span><span class="ident" id="6449368">Uint16</span><span class="op" id="6449374">,</span>&nbsp;<span class="ident" id="6449376">reflect</span><span class="op" id="6449383">.</span><span class="ident" id="6449384">Uint32</span><span class="op" id="6449390">,</span>&nbsp;<span class="ident" id="6449392">reflect</span><span class="op" id="6449399">.</span><span class="ident" id="6449400">Uint64</span><span class="op" id="6449406">,</span>&nbsp;<span class="ident" id="6449408">reflect</span><span class="op" id="6449415">.</span><span class="ident" id="6449416">Uintptr</span><span class="op" id="6449423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449427">utmp</span><span class="op" id="6449431">,</span>&nbsp;<span class="ident" id="6449433">err</span>&nbsp;<span class="op" id="6449437">:=</span>&nbsp;<span class="ident" id="6449440">strconv</span><span class="op" id="6449447">.</span><span class="ident" id="6449448">ParseUint</span><span class="op" id="6449457">(</span><span class="builtintype" id="6449458">string</span><span class="op" id="6449464">(</span><span class="ident" id="6449465">src</span><span class="op" id="6449468">)</span><span class="op" id="6449469">,</span>&nbsp;<span class="num" id="6449471">10</span><span class="op" id="6449473">,</span>&nbsp;<span class="ident" id="6449475">dst</span><span class="op" id="6449478">.</span><span class="ident" id="6449479">Type</span><span class="op" id="6449483">(</span><span class="op" id="6449484">)</span><span class="op" id="6449485">.</span><span class="ident" id="6449486">Bits</span><span class="op" id="6449490">(</span><span class="op" id="6449491">)</span><span class="op" id="6449492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449496">if</span>&nbsp;<span class="ident" id="6449499">err</span>&nbsp;<span class="op" id="6449503">!=</span>&nbsp;<span class="ident" id="6449506">nil</span>&nbsp;<span class="op" id="6449510">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449515">return</span>&nbsp;<span class="ident" id="6449522">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449532">dst</span><span class="op" id="6449535">.</span><span class="ident" id="6449536">SetUint</span><span class="op" id="6449543">(</span><span class="ident" id="6449544">utmp</span><span class="op" id="6449548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449551">case</span>&nbsp;<span class="ident" id="6449556">reflect</span><span class="op" id="6449563">.</span><span class="ident" id="6449564">Float32</span><span class="op" id="6449571">,</span>&nbsp;<span class="ident" id="6449573">reflect</span><span class="op" id="6449580">.</span><span class="ident" id="6449581">Float64</span><span class="op" id="6449588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449592">ftmp</span><span class="op" id="6449596">,</span>&nbsp;<span class="ident" id="6449598">err</span>&nbsp;<span class="op" id="6449602">:=</span>&nbsp;<span class="ident" id="6449605">strconv</span><span class="op" id="6449612">.</span><span class="ident" id="6449613">ParseFloat</span><span class="op" id="6449623">(</span><span class="builtintype" id="6449624">string</span><span class="op" id="6449630">(</span><span class="ident" id="6449631">src</span><span class="op" id="6449634">)</span><span class="op" id="6449635">,</span>&nbsp;<span class="ident" id="6449637">dst</span><span class="op" id="6449640">.</span><span class="ident" id="6449641">Type</span><span class="op" id="6449645">(</span><span class="op" id="6449646">)</span><span class="op" id="6449647">.</span><span class="ident" id="6449648">Bits</span><span class="op" id="6449652">(</span><span class="op" id="6449653">)</span><span class="op" id="6449654">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449658">if</span>&nbsp;<span class="ident" id="6449661">err</span>&nbsp;<span class="op" id="6449665">!=</span>&nbsp;<span class="ident" id="6449668">nil</span>&nbsp;<span class="op" id="6449672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449677">return</span>&nbsp;<span class="ident" id="6449684">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449694">dst</span><span class="op" id="6449697">.</span><span class="ident" id="6449698">SetFloat</span><span class="op" id="6449706">(</span><span class="ident" id="6449707">ftmp</span><span class="op" id="6449711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449714">case</span>&nbsp;<span class="ident" id="6449719">reflect</span><span class="op" id="6449726">.</span><span class="ident" id="6449727">Bool</span><span class="op" id="6449731">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449735">value</span><span class="op" id="6449740">,</span>&nbsp;<span class="ident" id="6449742">err</span>&nbsp;<span class="op" id="6449746">:=</span>&nbsp;<span class="ident" id="6449749">strconv</span><span class="op" id="6449756">.</span><span class="ident" id="6449757">ParseBool</span><span class="op" id="6449766">(</span><span class="ident" id="6449767">strings</span><span class="op" id="6449774">.</span><span class="ident" id="6449775">TrimSpace</span><span class="op" id="6449784">(</span><span class="builtintype" id="6449785">string</span><span class="op" id="6449791">(</span><span class="ident" id="6449792">src</span><span class="op" id="6449795">)</span><span class="op" id="6449796">)</span><span class="op" id="6449797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449801">if</span>&nbsp;<span class="ident" id="6449804">err</span>&nbsp;<span class="op" id="6449808">!=</span>&nbsp;<span class="ident" id="6449811">nil</span>&nbsp;<span class="op" id="6449815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449820">return</span>&nbsp;<span class="ident" id="6449827">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6449833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449837">dst</span><span class="op" id="6449840">.</span><span class="ident" id="6449841">SetBool</span><span class="op" id="6449848">(</span><span class="ident" id="6449849">value</span><span class="op" id="6449854">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449857">case</span>&nbsp;<span class="ident" id="6449862">reflect</span><span class="op" id="6449869">.</span><span class="ident" id="6449870">String</span><span class="op" id="6449876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449880">dst</span><span class="op" id="6449883">.</span><span class="ident" id="6449884">SetString</span><span class="op" id="6449893">(</span><span class="builtintype" id="6449894">string</span><span class="op" id="6449900">(</span><span class="ident" id="6449901">src</span><span class="op" id="6449904">)</span><span class="op" id="6449905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449908">case</span>&nbsp;<span class="ident" id="6449913">reflect</span><span class="op" id="6449920">.</span><span class="ident" id="6449921">Slice</span><span class="op" id="6449926">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6449930">if</span>&nbsp;<span class="builtinfunc" id="6449933">len</span><span class="op" id="6449936">(</span><span class="ident" id="6449937">src</span><span class="op" id="6449940">)</span>&nbsp;<span class="op" id="6449942">==</span>&nbsp;<span class="num" id="6449945">0</span>&nbsp;<span class="op" id="6449947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6449952">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6449983">src</span>&nbsp;<span class="op" id="6449987">=</span>&nbsp;<span class="op" id="6449989">[</span><span class="op" id="6449990">]</span><span class="builtintype" id="6449991">byte</span><span class="op" id="6449995">{</span><span class="op" id="6449996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450004">dst</span><span class="op" id="6450007">.</span><span class="ident" id="6450008">SetBytes</span><span class="op" id="6450016">(</span><span class="ident" id="6450017">src</span><span class="op" id="6450020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450026">return</span>&nbsp;<span class="ident" id="6450033">nil</span><br>
<span class="lineno">605</span><span class="op" id="6450037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6450040">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="6450104">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="6450143">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="6450212">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6450279">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6450346">func</span>&nbsp;<span class="op" id="6450351">(</span><span class="ident" id="6450352">p</span>&nbsp;<span class="op" id="6450354">*</span><span class="ident" id="6450355">Decoder</span><span class="op" id="6450362">)</span>&nbsp;<span class="ident" id="6450364">unmarshalPath</span><span class="op" id="6450377">(</span><span class="ident" id="6450378">tinfo</span>&nbsp;<span class="op" id="6450384">*</span><span class="ident" id="6450385">typeInfo</span><span class="op" id="6450393">,</span>&nbsp;<span class="ident" id="6450395">sv</span>&nbsp;<span class="ident" id="6450398">reflect</span><span class="op" id="6450405">.</span><span class="ident" id="6450406">Value</span><span class="op" id="6450411">,</span>&nbsp;<span class="ident" id="6450413">parents</span>&nbsp;<span class="op" id="6450421">[</span><span class="op" id="6450422">]</span><span class="builtintype" id="6450423">string</span><span class="op" id="6450429">,</span>&nbsp;<span class="ident" id="6450431">start</span>&nbsp;<span class="op" id="6450437">*</span><span class="ident" id="6450438">StartElement</span><span class="op" id="6450450">)</span>&nbsp;<span class="op" id="6450452">(</span><span class="ident" id="6450453">consumed</span>&nbsp;<span class="builtintype" id="6450462">bool</span><span class="op" id="6450466">,</span>&nbsp;<span class="ident" id="6450468">err</span>&nbsp;<span class="builtintype" id="6450472">error</span><span class="op" id="6450477">)</span>&nbsp;<span class="op" id="6450479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450482">recurse</span>&nbsp;<span class="op" id="6450490">:=</span>&nbsp;<span class="ident" id="6450493">false</span><br>
<span class="lineno"></span><span class="ident" id="6450499">Loop</span><span class="op" id="6450503">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450506">for</span>&nbsp;<span class="ident" id="6450510">i</span>&nbsp;<span class="op" id="6450512">:=</span>&nbsp;<span class="keyword" id="6450515">range</span>&nbsp;<span class="ident" id="6450521">tinfo</span><span class="op" id="6450526">.</span><span class="ident" id="6450527">fields</span>&nbsp;<span class="op" id="6450534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6450538">finfo</span>&nbsp;<span class="op" id="6450544">:=</span>&nbsp;<span class="op" id="6450547">&amp;</span><span class="ident" id="6450548">tinfo</span><span class="op" id="6450553">.</span><span class="ident" id="6450554">fields</span><span class="op" id="6450560">[</span><span class="ident" id="6450561">i</span><span class="op" id="6450562">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450566">if</span>&nbsp;<span class="ident" id="6450569">finfo</span><span class="op" id="6450574">.</span><span class="ident" id="6450575">flags</span><span class="op" id="6450580">&amp;</span><span class="ident" id="6450581">fElement</span>&nbsp;<span class="op" id="6450590">==</span>&nbsp;<span class="num" id="6450593">0</span>&nbsp;<span class="op" id="6450595">||</span>&nbsp;<span class="builtinfunc" id="6450598">len</span><span class="op" id="6450601">(</span><span class="ident" id="6450602">finfo</span><span class="op" id="6450607">.</span><span class="ident" id="6450608">parents</span><span class="op" id="6450615">)</span>&nbsp;<span class="op" id="6450617">&lt;</span>&nbsp;<span class="builtinfunc" id="6450619">len</span><span class="op" id="6450622">(</span><span class="ident" id="6450623">parents</span><span class="op" id="6450630">)</span>&nbsp;<span class="op" id="6450632">||</span>&nbsp;<span class="ident" id="6450635">finfo</span><span class="op" id="6450640">.</span><span class="ident" id="6450641">xmlns</span>&nbsp;<span class="op" id="6450647">!=</span>&nbsp;<span class="string" id="6450650">&#34;&#34;</span>&nbsp;<span class="op" id="6450653">&amp;&amp;</span>&nbsp;<span class="ident" id="6450656">finfo</span><span class="op" id="6450661">.</span><span class="ident" id="6450662">xmlns</span>&nbsp;<span class="op" id="6450668">!=</span>&nbsp;<span class="ident" id="6450671">start</span><span class="op" id="6450676">.</span><span class="ident" id="6450677">Name</span><span class="op" id="6450681">.</span><span class="ident" id="6450682">Space</span>&nbsp;<span class="op" id="6450688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450693">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450704">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450708">for</span>&nbsp;<span class="ident" id="6450712">j</span>&nbsp;<span class="op" id="6450714">:=</span>&nbsp;<span class="keyword" id="6450717">range</span>&nbsp;<span class="ident" id="6450723">parents</span>&nbsp;<span class="op" id="6450731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450736">if</span>&nbsp;<span class="ident" id="6450739">parents</span><span class="op" id="6450746">[</span><span class="ident" id="6450747">j</span><span class="op" id="6450748">]</span>&nbsp;<span class="op" id="6450750">!=</span>&nbsp;<span class="ident" id="6450753">finfo</span><span class="op" id="6450758">.</span><span class="ident" id="6450759">parents</span><span class="op" id="6450766">[</span><span class="ident" id="6450767">j</span><span class="op" id="6450768">]</span>&nbsp;<span class="op" id="6450770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450776">continue</span>&nbsp;<span class="ident" id="6450785">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450797">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450801">if</span>&nbsp;<span class="builtinfunc" id="6450804">len</span><span class="op" id="6450807">(</span><span class="ident" id="6450808">finfo</span><span class="op" id="6450813">.</span><span class="ident" id="6450814">parents</span><span class="op" id="6450821">)</span>&nbsp;<span class="op" id="6450823">==</span>&nbsp;<span class="builtinfunc" id="6450826">len</span><span class="op" id="6450829">(</span><span class="ident" id="6450830">parents</span><span class="op" id="6450837">)</span>&nbsp;<span class="op" id="6450839">&amp;&amp;</span>&nbsp;<span class="ident" id="6450842">finfo</span><span class="op" id="6450847">.</span><span class="ident" id="6450848">name</span>&nbsp;<span class="op" id="6450853">==</span>&nbsp;<span class="ident" id="6450856">start</span><span class="op" id="6450861">.</span><span class="ident" id="6450862">Name</span><span class="op" id="6450866">.</span><span class="ident" id="6450867">Local</span>&nbsp;<span class="op" id="6450873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6450878">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450927">return</span>&nbsp;<span class="ident" id="6450934">true</span><span class="op" id="6450938">,</span>&nbsp;<span class="ident" id="6450940">p</span><span class="op" id="6450941">.</span><span class="ident" id="6450942">unmarshal</span><span class="op" id="6450951">(</span><span class="ident" id="6450952">finfo</span><span class="op" id="6450957">.</span><span class="ident" id="6450958">value</span><span class="op" id="6450963">(</span><span class="ident" id="6450964">sv</span><span class="op" id="6450966">)</span><span class="op" id="6450967">,</span>&nbsp;<span class="ident" id="6450969">start</span><span class="op" id="6450974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6450978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6450982">if</span>&nbsp;<span class="builtinfunc" id="6450985">len</span><span class="op" id="6450988">(</span><span class="ident" id="6450989">finfo</span><span class="op" id="6450994">.</span><span class="ident" id="6450995">parents</span><span class="op" id="6451002">)</span>&nbsp;<span class="op" id="6451004">&gt;</span>&nbsp;<span class="builtinfunc" id="6451006">len</span><span class="op" id="6451009">(</span><span class="ident" id="6451010">parents</span><span class="op" id="6451017">)</span>&nbsp;<span class="op" id="6451019">&amp;&amp;</span>&nbsp;<span class="ident" id="6451022">finfo</span><span class="op" id="6451027">.</span><span class="ident" id="6451028">parents</span><span class="op" id="6451035">[</span><span class="builtinfunc" id="6451036">len</span><span class="op" id="6451039">(</span><span class="ident" id="6451040">parents</span><span class="op" id="6451047">)</span><span class="op" id="6451048">]</span>&nbsp;<span class="op" id="6451050">==</span>&nbsp;<span class="ident" id="6451053">start</span><span class="op" id="6451058">.</span><span class="ident" id="6451059">Name</span><span class="op" id="6451063">.</span><span class="ident" id="6451064">Local</span>&nbsp;<span class="op" id="6451070">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451075">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451128">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451184">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451225">recurse</span>&nbsp;<span class="op" id="6451233">=</span>&nbsp;<span class="ident" id="6451235">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451244">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451292">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451325">parents</span>&nbsp;<span class="op" id="6451333">=</span>&nbsp;<span class="ident" id="6451335">finfo</span><span class="op" id="6451340">.</span><span class="ident" id="6451341">parents</span><span class="op" id="6451348">[</span><span class="op" id="6451349">:</span><span class="builtinfunc" id="6451350">len</span><span class="op" id="6451353">(</span><span class="ident" id="6451354">parents</span><span class="op" id="6451361">)</span><span class="op" id="6451362">+</span><span class="num" id="6451363">1</span><span class="op" id="6451364">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451369">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451377">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451383">if</span>&nbsp;<span class="op" id="6451386">!</span><span class="ident" id="6451387">recurse</span>&nbsp;<span class="op" id="6451395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451399">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451443">return</span>&nbsp;<span class="ident" id="6451450">false</span><span class="op" id="6451455">,</span>&nbsp;<span class="ident" id="6451457">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451462">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451465">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451527">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6451588">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451636">for</span>&nbsp;<span class="op" id="6451640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451644">var</span>&nbsp;<span class="ident" id="6451648">tok</span>&nbsp;<span class="ident" id="6451652">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451660">tok</span><span class="op" id="6451663">,</span>&nbsp;<span class="ident" id="6451665">err</span>&nbsp;<span class="op" id="6451669">=</span>&nbsp;<span class="ident" id="6451671">p</span><span class="op" id="6451672">.</span><span class="ident" id="6451673">Token</span><span class="op" id="6451678">(</span><span class="op" id="6451679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451683">if</span>&nbsp;<span class="ident" id="6451686">err</span>&nbsp;<span class="op" id="6451690">!=</span>&nbsp;<span class="ident" id="6451693">nil</span>&nbsp;<span class="op" id="6451697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451702">return</span>&nbsp;<span class="ident" id="6451709">true</span><span class="op" id="6451713">,</span>&nbsp;<span class="ident" id="6451715">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451725">switch</span>&nbsp;<span class="ident" id="6451732">t</span>&nbsp;<span class="op" id="6451734">:=</span>&nbsp;<span class="ident" id="6451737">tok</span><span class="op" id="6451740">.</span><span class="op" id="6451741">(</span><span class="keyword" id="6451742">type</span><span class="op" id="6451746">)</span>&nbsp;<span class="op" id="6451748">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451752">case</span>&nbsp;<span class="ident" id="6451757">StartElement</span><span class="op" id="6451769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6451774">consumed2</span><span class="op" id="6451783">,</span>&nbsp;<span class="ident" id="6451785">err</span>&nbsp;<span class="op" id="6451789">:=</span>&nbsp;<span class="ident" id="6451792">p</span><span class="op" id="6451793">.</span><span class="ident" id="6451794">unmarshalPath</span><span class="op" id="6451807">(</span><span class="ident" id="6451808">tinfo</span><span class="op" id="6451813">,</span>&nbsp;<span class="ident" id="6451815">sv</span><span class="op" id="6451817">,</span>&nbsp;<span class="ident" id="6451819">parents</span><span class="op" id="6451826">,</span>&nbsp;<span class="op" id="6451828">&amp;</span><span class="ident" id="6451829">t</span><span class="op" id="6451830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451835">if</span>&nbsp;<span class="ident" id="6451838">err</span>&nbsp;<span class="op" id="6451842">!=</span>&nbsp;<span class="ident" id="6451845">nil</span>&nbsp;<span class="op" id="6451849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451855">return</span>&nbsp;<span class="ident" id="6451862">true</span><span class="op" id="6451866">,</span>&nbsp;<span class="ident" id="6451868">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451875">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451880">if</span>&nbsp;<span class="op" id="6451883">!</span><span class="ident" id="6451884">consumed2</span>&nbsp;<span class="op" id="6451894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451900">if</span>&nbsp;<span class="ident" id="6451903">err</span>&nbsp;<span class="op" id="6451907">:=</span>&nbsp;<span class="ident" id="6451910">p</span><span class="op" id="6451911">.</span><span class="ident" id="6451912">Skip</span><span class="op" id="6451916">(</span><span class="op" id="6451917">)</span><span class="op" id="6451918">;</span>&nbsp;<span class="ident" id="6451920">err</span>&nbsp;<span class="op" id="6451924">!=</span>&nbsp;<span class="ident" id="6451927">nil</span>&nbsp;<span class="op" id="6451931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451938">return</span>&nbsp;<span class="ident" id="6451945">true</span><span class="op" id="6451949">,</span>&nbsp;<span class="ident" id="6451951">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6451964">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451968">case</span>&nbsp;<span class="ident" id="6451973">EndElement</span><span class="op" id="6451983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6451988">return</span>&nbsp;<span class="ident" id="6451995">true</span><span class="op" id="6451999">,</span>&nbsp;<span class="ident" id="6452001">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452010">}</span><br>
<span class="lineno"></span><span class="op" id="6452012">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6452015">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6452074">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="6452134">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6452202">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="6452229">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6452293">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="6452359">func</span>&nbsp;<span class="op" id="6452364">(</span><span class="ident" id="6452365">d</span>&nbsp;<span class="op" id="6452367">*</span><span class="ident" id="6452368">Decoder</span><span class="op" id="6452375">)</span>&nbsp;<span class="ident" id="6452377">Skip</span><span class="op" id="6452381">(</span><span class="op" id="6452382">)</span>&nbsp;<span class="builtintype" id="6452384">error</span>&nbsp;<span class="op" id="6452390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452393">for</span>&nbsp;<span class="op" id="6452397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6452401">tok</span><span class="op" id="6452404">,</span>&nbsp;<span class="ident" id="6452406">err</span>&nbsp;<span class="op" id="6452410">:=</span>&nbsp;<span class="ident" id="6452413">d</span><span class="op" id="6452414">.</span><span class="ident" id="6452415">Token</span><span class="op" id="6452420">(</span><span class="op" id="6452421">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452425">if</span>&nbsp;<span class="ident" id="6452428">err</span>&nbsp;<span class="op" id="6452432">!=</span>&nbsp;<span class="ident" id="6452435">nil</span>&nbsp;<span class="op" id="6452439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452444">return</span>&nbsp;<span class="ident" id="6452451">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452461">switch</span>&nbsp;<span class="ident" id="6452468">tok</span><span class="op" id="6452471">.</span><span class="op" id="6452472">(</span><span class="keyword" id="6452473">type</span><span class="op" id="6452477">)</span>&nbsp;<span class="op" id="6452479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452483">case</span>&nbsp;<span class="ident" id="6452488">StartElement</span><span class="op" id="6452500">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452505">if</span>&nbsp;<span class="ident" id="6452508">err</span>&nbsp;<span class="op" id="6452512">:=</span>&nbsp;<span class="ident" id="6452515">d</span><span class="op" id="6452516">.</span><span class="ident" id="6452517">Skip</span><span class="op" id="6452521">(</span><span class="op" id="6452522">)</span><span class="op" id="6452523">;</span>&nbsp;<span class="ident" id="6452525">err</span>&nbsp;<span class="op" id="6452529">!=</span>&nbsp;<span class="ident" id="6452532">nil</span>&nbsp;<span class="op" id="6452536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452542">return</span>&nbsp;<span class="ident" id="6452549">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452560">case</span>&nbsp;<span class="ident" id="6452565">EndElement</span><span class="op" id="6452575">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6452580">return</span>&nbsp;<span class="ident" id="6452587">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6452596">}</span><br>
<span class="lineno"></span><span class="op" id="6452598">}</span>
</div>
</body>
</html>
