<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8399288">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8399343">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8399397">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8399448">package</span>&nbsp;<span class="ident" id="8399456">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8399464">import</span>&nbsp;<span class="op" id="8399471">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399474">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399483">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399490">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399500">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399512">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399518">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399529">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8399539">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8399542">var</span>&nbsp;<span class="ident" id="8399546">fset</span>&nbsp;<span class="op" id="8399551">=</span>&nbsp;<span class="ident" id="8399553">token</span><span class="op" id="8399558">.</span><span class="ident" id="8399559">NewFileSet</span><span class="op" id="8399569">(</span><span class="op" id="8399570">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8399573">var</span>&nbsp;<span class="ident" id="8399577">validFiles</span>&nbsp;<span class="op" id="8399588">=</span>&nbsp;<span class="op" id="8399590">[</span><span class="op" id="8399591">]</span><span class="builtintype" id="8399592">string</span><span class="op" id="8399598">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399601">&#34;parser.go&#34;</span><span class="op" id="8399612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399615">&#34;parser_test.go&#34;</span><span class="op" id="8399631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399634">&#34;error_test.go&#34;</span><span class="op" id="8399649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8399652">&#34;short_test.go&#34;</span><span class="op" id="8399667">,</span><br>
<span class="lineno"></span><span class="op" id="8399669">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8399672">func</span>&nbsp;<span class="ident" id="8399677">TestParse</span><span class="op" id="8399686">(</span><span class="ident" id="8399687">t</span>&nbsp;<span class="op" id="8399689">*</span><span class="ident" id="8399690">testing</span><span class="op" id="8399697">.</span><span class="ident" id="8399698">T</span><span class="op" id="8399699">)</span>&nbsp;<span class="op" id="8399701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8399704">for</span>&nbsp;<span class="ident" id="8399708">_</span><span class="op" id="8399709">,</span>&nbsp;<span class="ident" id="8399711">filename</span>&nbsp;<span class="op" id="8399720">:=</span>&nbsp;<span class="keyword" id="8399723">range</span>&nbsp;<span class="ident" id="8399729">validFiles</span>&nbsp;<span class="op" id="8399740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8399744">_</span><span class="op" id="8399745">,</span>&nbsp;<span class="ident" id="8399747">err</span>&nbsp;<span class="op" id="8399751">:=</span>&nbsp;<span class="ident" id="8399754">ParseFile</span><span class="op" id="8399763">(</span><span class="ident" id="8399764">fset</span><span class="op" id="8399768">,</span>&nbsp;<span class="ident" id="8399770">filename</span><span class="op" id="8399778">,</span>&nbsp;<span class="ident" id="8399780">nil</span><span class="op" id="8399783">,</span>&nbsp;<span class="ident" id="8399785">DeclarationErrors</span><span class="op" id="8399802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8399806">if</span>&nbsp;<span class="ident" id="8399809">err</span>&nbsp;<span class="op" id="8399813">!=</span>&nbsp;<span class="ident" id="8399816">nil</span>&nbsp;<span class="op" id="8399820">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8399825">t</span><span class="op" id="8399826">.</span><span class="ident" id="8399827">Fatalf</span><span class="op" id="8399833">(</span><span class="string" id="8399834">&#34;ParseFile(%s):&nbsp;%v&#34;</span><span class="op" id="8399853">,</span>&nbsp;<span class="ident" id="8399855">filename</span><span class="op" id="8399863">,</span>&nbsp;<span class="ident" id="8399865">err</span><span class="op" id="8399868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8399872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8399875">}</span><br>
<span class="lineno"></span><span class="op" id="8399877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8399880">func</span>&nbsp;<span class="ident" id="8399885">nameFilter</span><span class="op" id="8399895">(</span><span class="ident" id="8399896">filename</span>&nbsp;<span class="builtintype" id="8399905">string</span><span class="op" id="8399911">)</span>&nbsp;<span class="builtintype" id="8399913">bool</span>&nbsp;<span class="op" id="8399918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8399921">switch</span>&nbsp;<span class="ident" id="8399928">filename</span>&nbsp;<span class="op" id="8399937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8399940">case</span>&nbsp;<span class="string" id="8399945">&#34;parser.go&#34;</span><span class="op" id="8399956">,</span>&nbsp;<span class="string" id="8399958">&#34;interface.go&#34;</span><span class="op" id="8399972">,</span>&nbsp;<span class="string" id="8399974">&#34;parser_test.go&#34;</span><span class="op" id="8399990">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8399994">return</span>&nbsp;<span class="builtintype" id="8400001">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400007">case</span>&nbsp;<span class="string" id="8400012">&#34;parser.go.orig&#34;</span><span class="op" id="8400028">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400032">return</span>&nbsp;<span class="builtintype" id="8400039">true</span>&nbsp;<span class="comment" id="8400044">//&nbsp;permit&nbsp;but&nbsp;should&nbsp;be&nbsp;ignored&nbsp;by&nbsp;ParseDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400092">return</span>&nbsp;<span class="builtintype" id="8400099">false</span><br>
<span class="lineno"></span><span class="op" id="8400105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="8400108">func</span>&nbsp;<span class="ident" id="8400113">dirFilter</span><span class="op" id="8400122">(</span><span class="ident" id="8400123">f</span>&nbsp;<span class="ident" id="8400125">os</span><span class="op" id="8400127">.</span><span class="ident" id="8400128">FileInfo</span><span class="op" id="8400136">)</span>&nbsp;<span class="builtintype" id="8400138">bool</span>&nbsp;<span class="op" id="8400143">{</span>&nbsp;<span class="keyword" id="8400145">return</span>&nbsp;<span class="ident" id="8400152">nameFilter</span><span class="op" id="8400162">(</span><span class="ident" id="8400163">f</span><span class="op" id="8400164">.</span><span class="ident" id="8400165">Name</span><span class="op" id="8400169">(</span><span class="op" id="8400170">)</span><span class="op" id="8400171">)</span>&nbsp;<span class="op" id="8400173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8400176">func</span>&nbsp;<span class="ident" id="8400181">TestParseDir</span><span class="op" id="8400193">(</span><span class="ident" id="8400194">t</span>&nbsp;<span class="op" id="8400196">*</span><span class="ident" id="8400197">testing</span><span class="op" id="8400204">.</span><span class="ident" id="8400205">T</span><span class="op" id="8400206">)</span>&nbsp;<span class="op" id="8400208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400211">path</span>&nbsp;<span class="op" id="8400216">:=</span>&nbsp;<span class="string" id="8400219">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400224">pkgs</span><span class="op" id="8400228">,</span>&nbsp;<span class="ident" id="8400230">err</span>&nbsp;<span class="op" id="8400234">:=</span>&nbsp;<span class="ident" id="8400237">ParseDir</span><span class="op" id="8400245">(</span><span class="ident" id="8400246">fset</span><span class="op" id="8400250">,</span>&nbsp;<span class="ident" id="8400252">path</span><span class="op" id="8400256">,</span>&nbsp;<span class="ident" id="8400258">dirFilter</span><span class="op" id="8400267">,</span>&nbsp;<span class="num" id="8400269">0</span><span class="op" id="8400270">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400273">if</span>&nbsp;<span class="ident" id="8400276">err</span>&nbsp;<span class="op" id="8400280">!=</span>&nbsp;<span class="ident" id="8400283">nil</span>&nbsp;<span class="op" id="8400287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400291">t</span><span class="op" id="8400292">.</span><span class="ident" id="8400293">Fatalf</span><span class="op" id="8400299">(</span><span class="string" id="8400300">&#34;ParseDir(%s):&nbsp;%v&#34;</span><span class="op" id="8400318">,</span>&nbsp;<span class="ident" id="8400320">path</span><span class="op" id="8400324">,</span>&nbsp;<span class="ident" id="8400326">err</span><span class="op" id="8400329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400335">if</span>&nbsp;<span class="ident" id="8400338">n</span>&nbsp;<span class="op" id="8400340">:=</span>&nbsp;<span class="builtinfunc" id="8400343">len</span><span class="op" id="8400346">(</span><span class="ident" id="8400347">pkgs</span><span class="op" id="8400351">)</span><span class="op" id="8400352">;</span>&nbsp;<span class="ident" id="8400354">n</span>&nbsp;<span class="op" id="8400356">!=</span>&nbsp;<span class="num" id="8400359">1</span>&nbsp;<span class="op" id="8400361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400365">t</span><span class="op" id="8400366">.</span><span class="ident" id="8400367">Errorf</span><span class="op" id="8400373">(</span><span class="string" id="8400374">&#34;got&nbsp;%d&nbsp;packages;&nbsp;want&nbsp;1&#34;</span><span class="op" id="8400399">,</span>&nbsp;<span class="ident" id="8400401">n</span><span class="op" id="8400402">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400408">pkg</span>&nbsp;<span class="op" id="8400412">:=</span>&nbsp;<span class="ident" id="8400415">pkgs</span><span class="op" id="8400419">[</span><span class="string" id="8400420">&#34;parser&#34;</span><span class="op" id="8400428">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400431">if</span>&nbsp;<span class="ident" id="8400434">pkg</span>&nbsp;<span class="op" id="8400438">==</span>&nbsp;<span class="ident" id="8400441">nil</span>&nbsp;<span class="op" id="8400445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400449">t</span><span class="op" id="8400450">.</span><span class="ident" id="8400451">Errorf</span><span class="op" id="8400457">(</span><span class="string" id="8400458">`package&nbsp;&#34;parser&#34;&nbsp;not&nbsp;found`</span><span class="op" id="8400486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400490">return</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400501">if</span>&nbsp;<span class="ident" id="8400504">n</span>&nbsp;<span class="op" id="8400506">:=</span>&nbsp;<span class="builtinfunc" id="8400509">len</span><span class="op" id="8400512">(</span><span class="ident" id="8400513">pkg</span><span class="op" id="8400516">.</span><span class="ident" id="8400517">Files</span><span class="op" id="8400522">)</span><span class="op" id="8400523">;</span>&nbsp;<span class="ident" id="8400525">n</span>&nbsp;<span class="op" id="8400527">!=</span>&nbsp;<span class="num" id="8400530">3</span>&nbsp;<span class="op" id="8400532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400536">t</span><span class="op" id="8400537">.</span><span class="ident" id="8400538">Errorf</span><span class="op" id="8400544">(</span><span class="string" id="8400545">&#34;got&nbsp;%d&nbsp;package&nbsp;files;&nbsp;want&nbsp;3&#34;</span><span class="op" id="8400575">,</span>&nbsp;<span class="ident" id="8400577">n</span><span class="op" id="8400578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400584">for</span>&nbsp;<span class="ident" id="8400588">filename</span>&nbsp;<span class="op" id="8400597">:=</span>&nbsp;<span class="keyword" id="8400600">range</span>&nbsp;<span class="ident" id="8400606">pkg</span><span class="op" id="8400609">.</span><span class="ident" id="8400610">Files</span>&nbsp;<span class="op" id="8400616">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400620">if</span>&nbsp;<span class="op" id="8400623">!</span><span class="ident" id="8400624">nameFilter</span><span class="op" id="8400634">(</span><span class="ident" id="8400635">filename</span><span class="op" id="8400643">)</span>&nbsp;<span class="op" id="8400645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400650">t</span><span class="op" id="8400651">.</span><span class="ident" id="8400652">Errorf</span><span class="op" id="8400658">(</span><span class="string" id="8400659">&#34;unexpected&nbsp;package&nbsp;file:&nbsp;%s&#34;</span><span class="op" id="8400688">,</span>&nbsp;<span class="ident" id="8400690">filename</span><span class="op" id="8400698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400705">}</span><br>
<span class="lineno"></span><span class="op" id="8400707">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8400710">func</span>&nbsp;<span class="ident" id="8400715">TestParseExpr</span><span class="op" id="8400728">(</span><span class="ident" id="8400729">t</span>&nbsp;<span class="op" id="8400731">*</span><span class="ident" id="8400732">testing</span><span class="op" id="8400739">.</span><span class="ident" id="8400740">T</span><span class="op" id="8400741">)</span>&nbsp;<span class="op" id="8400743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8400746">//&nbsp;just&nbsp;kicking&nbsp;the&nbsp;tires:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8400774">//&nbsp;a&nbsp;valid&nbsp;arithmetic&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400808">src</span>&nbsp;<span class="op" id="8400812">:=</span>&nbsp;<span class="string" id="8400815">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400824">x</span><span class="op" id="8400825">,</span>&nbsp;<span class="ident" id="8400827">err</span>&nbsp;<span class="op" id="8400831">:=</span>&nbsp;<span class="ident" id="8400834">ParseExpr</span><span class="op" id="8400843">(</span><span class="ident" id="8400844">src</span><span class="op" id="8400847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400850">if</span>&nbsp;<span class="ident" id="8400853">err</span>&nbsp;<span class="op" id="8400857">!=</span>&nbsp;<span class="ident" id="8400860">nil</span>&nbsp;<span class="op" id="8400864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400868">t</span><span class="op" id="8400869">.</span><span class="ident" id="8400870">Errorf</span><span class="op" id="8400876">(</span><span class="string" id="8400877">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8400896">,</span>&nbsp;<span class="ident" id="8400898">src</span><span class="op" id="8400901">,</span>&nbsp;<span class="ident" id="8400903">err</span><span class="op" id="8400906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8400909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8400912">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8400929">if</span>&nbsp;<span class="ident" id="8400932">_</span><span class="op" id="8400933">,</span>&nbsp;<span class="ident" id="8400935">ok</span>&nbsp;<span class="op" id="8400938">:=</span>&nbsp;<span class="ident" id="8400941">x</span><span class="op" id="8400942">.</span><span class="op" id="8400943">(</span><span class="op" id="8400944">*</span><span class="ident" id="8400945">ast</span><span class="op" id="8400948">.</span><span class="ident" id="8400949">BinaryExpr</span><span class="op" id="8400959">)</span><span class="op" id="8400960">;</span>&nbsp;<span class="op" id="8400962">!</span><span class="ident" id="8400963">ok</span>&nbsp;<span class="op" id="8400966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8400970">t</span><span class="op" id="8400971">.</span><span class="ident" id="8400972">Errorf</span><span class="op" id="8400978">(</span><span class="string" id="8400979">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.BinaryExpr&#34;</span><span class="op" id="8401024">,</span>&nbsp;<span class="ident" id="8401026">src</span><span class="op" id="8401029">,</span>&nbsp;<span class="ident" id="8401031">x</span><span class="op" id="8401032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8401039">//&nbsp;a&nbsp;valid&nbsp;type&nbsp;expression</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401067">src</span>&nbsp;<span class="op" id="8401071">=</span>&nbsp;<span class="string" id="8401073">&#34;struct{x&nbsp;*int}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401091">x</span><span class="op" id="8401092">,</span>&nbsp;<span class="ident" id="8401094">err</span>&nbsp;<span class="op" id="8401098">=</span>&nbsp;<span class="ident" id="8401100">ParseExpr</span><span class="op" id="8401109">(</span><span class="ident" id="8401110">src</span><span class="op" id="8401113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401116">if</span>&nbsp;<span class="ident" id="8401119">err</span>&nbsp;<span class="op" id="8401123">!=</span>&nbsp;<span class="ident" id="8401126">nil</span>&nbsp;<span class="op" id="8401130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401134">t</span><span class="op" id="8401135">.</span><span class="ident" id="8401136">Errorf</span><span class="op" id="8401142">(</span><span class="string" id="8401143">&#34;ParseExpr(%q):&nbsp;%v&#34;</span><span class="op" id="8401162">,</span>&nbsp;<span class="ident" id="8401164">src</span><span class="op" id="8401167">,</span>&nbsp;<span class="ident" id="8401169">err</span><span class="op" id="8401172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401175">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8401178">//&nbsp;sanity&nbsp;check</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401195">if</span>&nbsp;<span class="ident" id="8401198">_</span><span class="op" id="8401199">,</span>&nbsp;<span class="ident" id="8401201">ok</span>&nbsp;<span class="op" id="8401204">:=</span>&nbsp;<span class="ident" id="8401207">x</span><span class="op" id="8401208">.</span><span class="op" id="8401209">(</span><span class="op" id="8401210">*</span><span class="ident" id="8401211">ast</span><span class="op" id="8401214">.</span><span class="ident" id="8401215">StructType</span><span class="op" id="8401225">)</span><span class="op" id="8401226">;</span>&nbsp;<span class="op" id="8401228">!</span><span class="ident" id="8401229">ok</span>&nbsp;<span class="op" id="8401232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401236">t</span><span class="op" id="8401237">.</span><span class="ident" id="8401238">Errorf</span><span class="op" id="8401244">(</span><span class="string" id="8401245">&#34;ParseExpr(%q):&nbsp;got&nbsp;%T,&nbsp;want&nbsp;*ast.StructType&#34;</span><span class="op" id="8401290">,</span>&nbsp;<span class="ident" id="8401292">src</span><span class="op" id="8401295">,</span>&nbsp;<span class="ident" id="8401297">x</span><span class="op" id="8401298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8401305">//&nbsp;an&nbsp;invalid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401331">src</span>&nbsp;<span class="op" id="8401335">=</span>&nbsp;<span class="string" id="8401337">&#34;a&nbsp;+&nbsp;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401346">if</span>&nbsp;<span class="ident" id="8401349">_</span><span class="op" id="8401350">,</span>&nbsp;<span class="ident" id="8401352">err</span>&nbsp;<span class="op" id="8401356">:=</span>&nbsp;<span class="ident" id="8401359">ParseExpr</span><span class="op" id="8401368">(</span><span class="ident" id="8401369">src</span><span class="op" id="8401372">)</span><span class="op" id="8401373">;</span>&nbsp;<span class="ident" id="8401375">err</span>&nbsp;<span class="op" id="8401379">==</span>&nbsp;<span class="ident" id="8401382">nil</span>&nbsp;<span class="op" id="8401386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401390">t</span><span class="op" id="8401391">.</span><span class="ident" id="8401392">Errorf</span><span class="op" id="8401398">(</span><span class="string" id="8401399">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8401428">,</span>&nbsp;<span class="ident" id="8401430">src</span><span class="op" id="8401433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401436">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8401440">//&nbsp;a&nbsp;valid&nbsp;expression&nbsp;followed&nbsp;by&nbsp;extra&nbsp;tokens&nbsp;is&nbsp;invalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401499">src</span>&nbsp;<span class="op" id="8401503">=</span>&nbsp;<span class="string" id="8401505">&#34;a[i]&nbsp;:=&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401518">if</span>&nbsp;<span class="ident" id="8401521">_</span><span class="op" id="8401522">,</span>&nbsp;<span class="ident" id="8401524">err</span>&nbsp;<span class="op" id="8401528">:=</span>&nbsp;<span class="ident" id="8401531">ParseExpr</span><span class="op" id="8401540">(</span><span class="ident" id="8401541">src</span><span class="op" id="8401544">)</span><span class="op" id="8401545">;</span>&nbsp;<span class="ident" id="8401547">err</span>&nbsp;<span class="op" id="8401551">==</span>&nbsp;<span class="ident" id="8401554">nil</span>&nbsp;<span class="op" id="8401558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401562">t</span><span class="op" id="8401563">.</span><span class="ident" id="8401564">Errorf</span><span class="op" id="8401570">(</span><span class="string" id="8401571">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8401600">,</span>&nbsp;<span class="ident" id="8401602">src</span><span class="op" id="8401605">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8401612">//&nbsp;a&nbsp;semicolon&nbsp;is&nbsp;not&nbsp;permitted&nbsp;unless&nbsp;automatically&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401675">src</span>&nbsp;<span class="op" id="8401679">=</span>&nbsp;<span class="string" id="8401681">&#34;a&nbsp;+&nbsp;b\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401692">if</span>&nbsp;<span class="ident" id="8401695">_</span><span class="op" id="8401696">,</span>&nbsp;<span class="ident" id="8401698">err</span>&nbsp;<span class="op" id="8401702">:=</span>&nbsp;<span class="ident" id="8401705">ParseExpr</span><span class="op" id="8401714">(</span><span class="ident" id="8401715">src</span><span class="op" id="8401718">)</span><span class="op" id="8401719">;</span>&nbsp;<span class="ident" id="8401721">err</span>&nbsp;<span class="op" id="8401725">!=</span>&nbsp;<span class="ident" id="8401728">nil</span>&nbsp;<span class="op" id="8401732">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401736">t</span><span class="op" id="8401737">.</span><span class="ident" id="8401738">Errorf</span><span class="op" id="8401744">(</span><span class="string" id="8401745">&#34;ParseExpr(%q):&nbsp;got&nbsp;error&nbsp;%s&#34;</span><span class="op" id="8401774">,</span>&nbsp;<span class="ident" id="8401776">src</span><span class="op" id="8401779">,</span>&nbsp;<span class="ident" id="8401781">err</span><span class="op" id="8401784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401790">src</span>&nbsp;<span class="op" id="8401794">=</span>&nbsp;<span class="string" id="8401796">&#34;a&nbsp;+&nbsp;b;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401806">if</span>&nbsp;<span class="ident" id="8401809">_</span><span class="op" id="8401810">,</span>&nbsp;<span class="ident" id="8401812">err</span>&nbsp;<span class="op" id="8401816">:=</span>&nbsp;<span class="ident" id="8401819">ParseExpr</span><span class="op" id="8401828">(</span><span class="ident" id="8401829">src</span><span class="op" id="8401832">)</span><span class="op" id="8401833">;</span>&nbsp;<span class="ident" id="8401835">err</span>&nbsp;<span class="op" id="8401839">==</span>&nbsp;<span class="ident" id="8401842">nil</span>&nbsp;<span class="op" id="8401846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8401850">t</span><span class="op" id="8401851">.</span><span class="ident" id="8401852">Errorf</span><span class="op" id="8401858">(</span><span class="string" id="8401859">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8401888">,</span>&nbsp;<span class="ident" id="8401890">src</span><span class="op" id="8401893">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8401896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8401900">//&nbsp;various&nbsp;other&nbsp;stuff&nbsp;following&nbsp;a&nbsp;valid&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401953">const</span>&nbsp;<span class="ident" id="8401959">validExpr</span>&nbsp;<span class="op" id="8401969">=</span>&nbsp;<span class="string" id="8401971">&#34;a&nbsp;+&nbsp;b&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8401980">const</span>&nbsp;<span class="ident" id="8401986">anything</span>&nbsp;<span class="op" id="8401995">=</span>&nbsp;<span class="string" id="8401997">&#34;dh3*#D)#_&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402010">for</span>&nbsp;<span class="ident" id="8402014">_</span><span class="op" id="8402015">,</span>&nbsp;<span class="ident" id="8402017">c</span>&nbsp;<span class="op" id="8402019">:=</span>&nbsp;<span class="keyword" id="8402022">range</span>&nbsp;<span class="string" id="8402028">&#34;!)]};,&#34;</span>&nbsp;<span class="op" id="8402037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402041">src</span>&nbsp;<span class="op" id="8402045">:=</span>&nbsp;<span class="ident" id="8402048">validExpr</span>&nbsp;<span class="op" id="8402058">+</span>&nbsp;<span class="builtintype" id="8402060">string</span><span class="op" id="8402066">(</span><span class="ident" id="8402067">c</span><span class="op" id="8402068">)</span>&nbsp;<span class="op" id="8402070">+</span>&nbsp;<span class="ident" id="8402072">anything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402083">if</span>&nbsp;<span class="ident" id="8402086">_</span><span class="op" id="8402087">,</span>&nbsp;<span class="ident" id="8402089">err</span>&nbsp;<span class="op" id="8402093">:=</span>&nbsp;<span class="ident" id="8402096">ParseExpr</span><span class="op" id="8402105">(</span><span class="ident" id="8402106">src</span><span class="op" id="8402109">)</span><span class="op" id="8402110">;</span>&nbsp;<span class="ident" id="8402112">err</span>&nbsp;<span class="op" id="8402116">==</span>&nbsp;<span class="ident" id="8402119">nil</span>&nbsp;<span class="op" id="8402123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402128">t</span><span class="op" id="8402129">.</span><span class="ident" id="8402130">Errorf</span><span class="op" id="8402136">(</span><span class="string" id="8402137">&#34;ParseExpr(%q):&nbsp;got&nbsp;no&nbsp;error&#34;</span><span class="op" id="8402166">,</span>&nbsp;<span class="ident" id="8402168">src</span><span class="op" id="8402171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402175">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8402182">//&nbsp;ParseExpr&nbsp;must&nbsp;not&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402211">for</span>&nbsp;<span class="ident" id="8402215">_</span><span class="op" id="8402216">,</span>&nbsp;<span class="ident" id="8402218">src</span>&nbsp;<span class="op" id="8402222">:=</span>&nbsp;<span class="keyword" id="8402225">range</span>&nbsp;<span class="ident" id="8402231">valids</span>&nbsp;<span class="op" id="8402238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402242">ParseExpr</span><span class="op" id="8402251">(</span><span class="ident" id="8402252">src</span><span class="op" id="8402255">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402258">}</span><br>
<span class="lineno"></span><span class="op" id="8402260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8402263">func</span>&nbsp;<span class="ident" id="8402268">TestColonEqualsScope</span><span class="op" id="8402288">(</span><span class="ident" id="8402289">t</span>&nbsp;<span class="op" id="8402291">*</span><span class="ident" id="8402292">testing</span><span class="op" id="8402299">.</span><span class="ident" id="8402300">T</span><span class="op" id="8402301">)</span>&nbsp;<span class="op" id="8402303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402306">f</span><span class="op" id="8402307">,</span>&nbsp;<span class="ident" id="8402309">err</span>&nbsp;<span class="op" id="8402313">:=</span>&nbsp;<span class="ident" id="8402316">ParseFile</span><span class="op" id="8402325">(</span><span class="ident" id="8402326">fset</span><span class="op" id="8402330">,</span>&nbsp;<span class="string" id="8402332">&#34;&#34;</span><span class="op" id="8402334">,</span>&nbsp;<span class="string" id="8402336">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;x,&nbsp;y,&nbsp;z&nbsp;:=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8402380">,</span>&nbsp;<span class="num" id="8402382">0</span><span class="op" id="8402383">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402386">if</span>&nbsp;<span class="ident" id="8402389">err</span>&nbsp;<span class="op" id="8402393">!=</span>&nbsp;<span class="ident" id="8402396">nil</span>&nbsp;<span class="op" id="8402400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402404">t</span><span class="op" id="8402405">.</span><span class="ident" id="8402406">Fatal</span><span class="op" id="8402411">(</span><span class="ident" id="8402412">err</span><span class="op" id="8402415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8402422">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402473">as</span>&nbsp;<span class="op" id="8402476">:=</span>&nbsp;<span class="ident" id="8402479">f</span><span class="op" id="8402480">.</span><span class="ident" id="8402481">Decls</span><span class="op" id="8402486">[</span><span class="num" id="8402487">0</span><span class="op" id="8402488">]</span><span class="op" id="8402489">.</span><span class="op" id="8402490">(</span><span class="op" id="8402491">*</span><span class="ident" id="8402492">ast</span><span class="op" id="8402495">.</span><span class="ident" id="8402496">FuncDecl</span><span class="op" id="8402504">)</span><span class="op" id="8402505">.</span><span class="ident" id="8402506">Body</span><span class="op" id="8402510">.</span><span class="ident" id="8402511">List</span><span class="op" id="8402515">[</span><span class="num" id="8402516">0</span><span class="op" id="8402517">]</span><span class="op" id="8402518">.</span><span class="op" id="8402519">(</span><span class="op" id="8402520">*</span><span class="ident" id="8402521">ast</span><span class="op" id="8402524">.</span><span class="ident" id="8402525">AssignStmt</span><span class="op" id="8402535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402538">for</span>&nbsp;<span class="ident" id="8402542">_</span><span class="op" id="8402543">,</span>&nbsp;<span class="ident" id="8402545">v</span>&nbsp;<span class="op" id="8402547">:=</span>&nbsp;<span class="keyword" id="8402550">range</span>&nbsp;<span class="ident" id="8402556">as</span><span class="op" id="8402558">.</span><span class="ident" id="8402559">Rhs</span>&nbsp;<span class="op" id="8402563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402567">id</span>&nbsp;<span class="op" id="8402570">:=</span>&nbsp;<span class="ident" id="8402573">v</span><span class="op" id="8402574">.</span><span class="op" id="8402575">(</span><span class="op" id="8402576">*</span><span class="ident" id="8402577">ast</span><span class="op" id="8402580">.</span><span class="ident" id="8402581">Ident</span><span class="op" id="8402586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402590">if</span>&nbsp;<span class="ident" id="8402593">id</span><span class="op" id="8402595">.</span><span class="ident" id="8402596">Obj</span>&nbsp;<span class="op" id="8402600">!=</span>&nbsp;<span class="ident" id="8402603">nil</span>&nbsp;<span class="op" id="8402607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402612">t</span><span class="op" id="8402613">.</span><span class="ident" id="8402614">Errorf</span><span class="op" id="8402620">(</span><span class="string" id="8402621">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8402649">,</span>&nbsp;<span class="ident" id="8402651">id</span><span class="op" id="8402653">.</span><span class="ident" id="8402654">Name</span><span class="op" id="8402658">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402668">for</span>&nbsp;<span class="ident" id="8402672">_</span><span class="op" id="8402673">,</span>&nbsp;<span class="ident" id="8402675">v</span>&nbsp;<span class="op" id="8402677">:=</span>&nbsp;<span class="keyword" id="8402680">range</span>&nbsp;<span class="ident" id="8402686">as</span><span class="op" id="8402688">.</span><span class="ident" id="8402689">Lhs</span>&nbsp;<span class="op" id="8402693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402697">id</span>&nbsp;<span class="op" id="8402700">:=</span>&nbsp;<span class="ident" id="8402703">v</span><span class="op" id="8402704">.</span><span class="op" id="8402705">(</span><span class="op" id="8402706">*</span><span class="ident" id="8402707">ast</span><span class="op" id="8402710">.</span><span class="ident" id="8402711">Ident</span><span class="op" id="8402716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402720">if</span>&nbsp;<span class="ident" id="8402723">id</span><span class="op" id="8402725">.</span><span class="ident" id="8402726">Obj</span>&nbsp;<span class="op" id="8402730">==</span>&nbsp;<span class="ident" id="8402733">nil</span>&nbsp;<span class="op" id="8402737">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402742">t</span><span class="op" id="8402743">.</span><span class="ident" id="8402744">Errorf</span><span class="op" id="8402750">(</span><span class="string" id="8402751">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8402785">,</span>&nbsp;<span class="ident" id="8402787">id</span><span class="op" id="8402789">.</span><span class="ident" id="8402790">Name</span><span class="op" id="8402794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402801">}</span><br>
<span class="lineno"></span><span class="op" id="8402803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="8402806">func</span>&nbsp;<span class="ident" id="8402811">TestVarScope</span><span class="op" id="8402823">(</span><span class="ident" id="8402824">t</span>&nbsp;<span class="op" id="8402826">*</span><span class="ident" id="8402827">testing</span><span class="op" id="8402834">.</span><span class="ident" id="8402835">T</span><span class="op" id="8402836">)</span>&nbsp;<span class="op" id="8402838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402841">f</span><span class="op" id="8402842">,</span>&nbsp;<span class="ident" id="8402844">err</span>&nbsp;<span class="op" id="8402848">:=</span>&nbsp;<span class="ident" id="8402851">ParseFile</span><span class="op" id="8402860">(</span><span class="ident" id="8402861">fset</span><span class="op" id="8402865">,</span>&nbsp;<span class="string" id="8402867">&#34;&#34;</span><span class="op" id="8402869">,</span>&nbsp;<span class="string" id="8402871">`package&nbsp;p;&nbsp;func&nbsp;f()&nbsp;{&nbsp;var&nbsp;x,&nbsp;y,&nbsp;z&nbsp;=&nbsp;x,&nbsp;y,&nbsp;z&nbsp;}`</span><span class="op" id="8402918">,</span>&nbsp;<span class="num" id="8402920">0</span><span class="op" id="8402921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8402924">if</span>&nbsp;<span class="ident" id="8402927">err</span>&nbsp;<span class="op" id="8402931">!=</span>&nbsp;<span class="ident" id="8402934">nil</span>&nbsp;<span class="op" id="8402938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8402942">t</span><span class="op" id="8402943">.</span><span class="ident" id="8402944">Fatal</span><span class="op" id="8402949">(</span><span class="ident" id="8402950">err</span><span class="op" id="8402953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8402956">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8402960">//&nbsp;RHS&nbsp;refers&nbsp;to&nbsp;undefined&nbsp;globals;&nbsp;LHS&nbsp;does&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403011">as</span>&nbsp;<span class="op" id="8403014">:=</span>&nbsp;<span class="ident" id="8403017">f</span><span class="op" id="8403018">.</span><span class="ident" id="8403019">Decls</span><span class="op" id="8403024">[</span><span class="num" id="8403025">0</span><span class="op" id="8403026">]</span><span class="op" id="8403027">.</span><span class="op" id="8403028">(</span><span class="op" id="8403029">*</span><span class="ident" id="8403030">ast</span><span class="op" id="8403033">.</span><span class="ident" id="8403034">FuncDecl</span><span class="op" id="8403042">)</span><span class="op" id="8403043">.</span><span class="ident" id="8403044">Body</span><span class="op" id="8403048">.</span><span class="ident" id="8403049">List</span><span class="op" id="8403053">[</span><span class="num" id="8403054">0</span><span class="op" id="8403055">]</span><span class="op" id="8403056">.</span><span class="op" id="8403057">(</span><span class="op" id="8403058">*</span><span class="ident" id="8403059">ast</span><span class="op" id="8403062">.</span><span class="ident" id="8403063">DeclStmt</span><span class="op" id="8403071">)</span><span class="op" id="8403072">.</span><span class="ident" id="8403073">Decl</span><span class="op" id="8403077">.</span><span class="op" id="8403078">(</span><span class="op" id="8403079">*</span><span class="ident" id="8403080">ast</span><span class="op" id="8403083">.</span><span class="ident" id="8403084">GenDecl</span><span class="op" id="8403091">)</span><span class="op" id="8403092">.</span><span class="ident" id="8403093">Specs</span><span class="op" id="8403098">[</span><span class="num" id="8403099">0</span><span class="op" id="8403100">]</span><span class="op" id="8403101">.</span><span class="op" id="8403102">(</span><span class="op" id="8403103">*</span><span class="ident" id="8403104">ast</span><span class="op" id="8403107">.</span><span class="ident" id="8403108">ValueSpec</span><span class="op" id="8403117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403120">for</span>&nbsp;<span class="ident" id="8403124">_</span><span class="op" id="8403125">,</span>&nbsp;<span class="ident" id="8403127">v</span>&nbsp;<span class="op" id="8403129">:=</span>&nbsp;<span class="keyword" id="8403132">range</span>&nbsp;<span class="ident" id="8403138">as</span><span class="op" id="8403140">.</span><span class="ident" id="8403141">Values</span>&nbsp;<span class="op" id="8403148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403152">id</span>&nbsp;<span class="op" id="8403155">:=</span>&nbsp;<span class="ident" id="8403158">v</span><span class="op" id="8403159">.</span><span class="op" id="8403160">(</span><span class="op" id="8403161">*</span><span class="ident" id="8403162">ast</span><span class="op" id="8403165">.</span><span class="ident" id="8403166">Ident</span><span class="op" id="8403171">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403175">if</span>&nbsp;<span class="ident" id="8403178">id</span><span class="op" id="8403180">.</span><span class="ident" id="8403181">Obj</span>&nbsp;<span class="op" id="8403185">!=</span>&nbsp;<span class="ident" id="8403188">nil</span>&nbsp;<span class="op" id="8403192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403197">t</span><span class="op" id="8403198">.</span><span class="ident" id="8403199">Errorf</span><span class="op" id="8403205">(</span><span class="string" id="8403206">&#34;rhs&nbsp;%s&nbsp;has&nbsp;Obj,&nbsp;should&nbsp;not&#34;</span><span class="op" id="8403234">,</span>&nbsp;<span class="ident" id="8403236">id</span><span class="op" id="8403238">.</span><span class="ident" id="8403239">Name</span><span class="op" id="8403243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403253">for</span>&nbsp;<span class="ident" id="8403257">_</span><span class="op" id="8403258">,</span>&nbsp;<span class="ident" id="8403260">id</span>&nbsp;<span class="op" id="8403263">:=</span>&nbsp;<span class="keyword" id="8403266">range</span>&nbsp;<span class="ident" id="8403272">as</span><span class="op" id="8403274">.</span><span class="ident" id="8403275">Names</span>&nbsp;<span class="op" id="8403281">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403285">if</span>&nbsp;<span class="ident" id="8403288">id</span><span class="op" id="8403290">.</span><span class="ident" id="8403291">Obj</span>&nbsp;<span class="op" id="8403295">==</span>&nbsp;<span class="ident" id="8403298">nil</span>&nbsp;<span class="op" id="8403302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403307">t</span><span class="op" id="8403308">.</span><span class="ident" id="8403309">Errorf</span><span class="op" id="8403315">(</span><span class="string" id="8403316">&#34;lhs&nbsp;%s&nbsp;does&nbsp;not&nbsp;have&nbsp;Obj,&nbsp;should&#34;</span><span class="op" id="8403350">,</span>&nbsp;<span class="ident" id="8403352">id</span><span class="op" id="8403354">.</span><span class="ident" id="8403355">Name</span><span class="op" id="8403359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403366">}</span><br>
<span class="lineno"></span><span class="op" id="8403368">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="8403371">func</span>&nbsp;<span class="ident" id="8403376">TestObjects</span><span class="op" id="8403387">(</span><span class="ident" id="8403388">t</span>&nbsp;<span class="op" id="8403390">*</span><span class="ident" id="8403391">testing</span><span class="op" id="8403398">.</span><span class="ident" id="8403399">T</span><span class="op" id="8403400">)</span>&nbsp;<span class="op" id="8403402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403405">const</span>&nbsp;<span class="ident" id="8403411">src</span>&nbsp;<span class="op" id="8403415">=</span>&nbsp;<span class="string" id="8403417">`<br>
<span class="lineno"></span>package&nbsp;p<br>
<span class="lineno"></span>import&nbsp;fmt&nbsp;&#34;fmt&#34;<br>
<span class="lineno">180</span>const&nbsp;pi&nbsp;=&nbsp;3.14<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct{}<br>
<span class="lineno"></span>var&nbsp;x&nbsp;int<br>
<span class="lineno"></span>func&nbsp;f()&nbsp;{&nbsp;L:&nbsp;}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403508">f</span><span class="op" id="8403509">,</span>&nbsp;<span class="ident" id="8403511">err</span>&nbsp;<span class="op" id="8403515">:=</span>&nbsp;<span class="ident" id="8403518">ParseFile</span><span class="op" id="8403527">(</span><span class="ident" id="8403528">fset</span><span class="op" id="8403532">,</span>&nbsp;<span class="string" id="8403534">&#34;&#34;</span><span class="op" id="8403536">,</span>&nbsp;<span class="ident" id="8403538">src</span><span class="op" id="8403541">,</span>&nbsp;<span class="num" id="8403543">0</span><span class="op" id="8403544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403547">if</span>&nbsp;<span class="ident" id="8403550">err</span>&nbsp;<span class="op" id="8403554">!=</span>&nbsp;<span class="ident" id="8403557">nil</span>&nbsp;<span class="op" id="8403561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403565">t</span><span class="op" id="8403566">.</span><span class="ident" id="8403567">Fatal</span><span class="op" id="8403572">(</span><span class="ident" id="8403573">err</span><span class="op" id="8403576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403579">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403583">objects</span>&nbsp;<span class="op" id="8403591">:=</span>&nbsp;<span class="keyword" id="8403594">map</span><span class="op" id="8403597">[</span><span class="builtintype" id="8403598">string</span><span class="op" id="8403604">]</span><span class="ident" id="8403605">ast</span><span class="op" id="8403608">.</span><span class="ident" id="8403609">ObjKind</span><span class="op" id="8403616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403620">&#34;p&#34;</span><span class="op" id="8403623">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8403627">ast</span><span class="op" id="8403630">.</span><span class="ident" id="8403631">Bad</span><span class="op" id="8403634">,</span>&nbsp;<span class="comment" id="8403636">//&nbsp;not&nbsp;in&nbsp;a&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403656">&#34;fmt&#34;</span><span class="op" id="8403661">:</span>&nbsp;<span class="ident" id="8403663">ast</span><span class="op" id="8403666">.</span><span class="ident" id="8403667">Bad</span><span class="op" id="8403670">,</span>&nbsp;<span class="comment" id="8403672">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403694">&#34;pi&#34;</span><span class="op" id="8403698">:</span>&nbsp;&nbsp;<span class="ident" id="8403701">ast</span><span class="op" id="8403704">.</span><span class="ident" id="8403705">Con</span><span class="op" id="8403708">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403712">&#34;T&#34;</span><span class="op" id="8403715">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8403719">ast</span><span class="op" id="8403722">.</span><span class="ident" id="8403723">Typ</span><span class="op" id="8403726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403730">&#34;x&#34;</span><span class="op" id="8403733">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8403737">ast</span><span class="op" id="8403740">.</span><span class="ident" id="8403741">Var</span><span class="op" id="8403744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403748">&#34;int&#34;</span><span class="op" id="8403753">:</span>&nbsp;<span class="ident" id="8403755">ast</span><span class="op" id="8403758">.</span><span class="ident" id="8403759">Bad</span><span class="op" id="8403762">,</span>&nbsp;<span class="comment" id="8403764">//&nbsp;not&nbsp;resolved&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403786">&#34;f&#34;</span><span class="op" id="8403789">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8403793">ast</span><span class="op" id="8403796">.</span><span class="ident" id="8403797">Fun</span><span class="op" id="8403800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8403804">&#34;L&#34;</span><span class="op" id="8403807">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8403811">ast</span><span class="op" id="8403814">.</span><span class="ident" id="8403815">Lbl</span><span class="op" id="8403818">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8403821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403825">ast</span><span class="op" id="8403828">.</span><span class="ident" id="8403829">Inspect</span><span class="op" id="8403836">(</span><span class="ident" id="8403837">f</span><span class="op" id="8403838">,</span>&nbsp;<span class="keyword" id="8403840">func</span><span class="op" id="8403844">(</span><span class="ident" id="8403845">n</span>&nbsp;<span class="ident" id="8403847">ast</span><span class="op" id="8403850">.</span><span class="ident" id="8403851">Node</span><span class="op" id="8403855">)</span>&nbsp;<span class="builtintype" id="8403857">bool</span>&nbsp;<span class="op" id="8403862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403866">if</span>&nbsp;<span class="ident" id="8403869">ident</span><span class="op" id="8403874">,</span>&nbsp;<span class="ident" id="8403876">ok</span>&nbsp;<span class="op" id="8403879">:=</span>&nbsp;<span class="ident" id="8403882">n</span><span class="op" id="8403883">.</span><span class="op" id="8403884">(</span><span class="op" id="8403885">*</span><span class="ident" id="8403886">ast</span><span class="op" id="8403889">.</span><span class="ident" id="8403890">Ident</span><span class="op" id="8403895">)</span><span class="op" id="8403896">;</span>&nbsp;<span class="ident" id="8403898">ok</span>&nbsp;<span class="op" id="8403901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403906">obj</span>&nbsp;<span class="op" id="8403910">:=</span>&nbsp;<span class="ident" id="8403913">ident</span><span class="op" id="8403918">.</span><span class="ident" id="8403919">Obj</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403926">if</span>&nbsp;<span class="ident" id="8403929">obj</span>&nbsp;<span class="op" id="8403933">==</span>&nbsp;<span class="ident" id="8403936">nil</span>&nbsp;<span class="op" id="8403940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8403946">if</span>&nbsp;<span class="ident" id="8403949">objects</span><span class="op" id="8403956">[</span><span class="ident" id="8403957">ident</span><span class="op" id="8403962">.</span><span class="ident" id="8403963">Name</span><span class="op" id="8403967">]</span>&nbsp;<span class="op" id="8403969">!=</span>&nbsp;<span class="ident" id="8403972">ast</span><span class="op" id="8403975">.</span><span class="ident" id="8403976">Bad</span>&nbsp;<span class="op" id="8403980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8403987">t</span><span class="op" id="8403988">.</span><span class="ident" id="8403989">Errorf</span><span class="op" id="8403995">(</span><span class="string" id="8403996">&#34;no&nbsp;object&nbsp;for&nbsp;%s&#34;</span><span class="op" id="8404014">,</span>&nbsp;<span class="ident" id="8404016">ident</span><span class="op" id="8404021">.</span><span class="ident" id="8404022">Name</span><span class="op" id="8404026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404038">return</span>&nbsp;<span class="builtintype" id="8404045">true</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404058">if</span>&nbsp;<span class="ident" id="8404061">obj</span><span class="op" id="8404064">.</span><span class="ident" id="8404065">Name</span>&nbsp;<span class="op" id="8404070">!=</span>&nbsp;<span class="ident" id="8404073">ident</span><span class="op" id="8404078">.</span><span class="ident" id="8404079">Name</span>&nbsp;<span class="op" id="8404084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404090">t</span><span class="op" id="8404091">.</span><span class="ident" id="8404092">Errorf</span><span class="op" id="8404098">(</span><span class="string" id="8404099">&#34;names&nbsp;don&#39;t&nbsp;match:&nbsp;obj.Name&nbsp;=&nbsp;%s,&nbsp;ident.Name&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8404150">,</span>&nbsp;<span class="ident" id="8404152">obj</span><span class="op" id="8404155">.</span><span class="ident" id="8404156">Name</span><span class="op" id="8404160">,</span>&nbsp;<span class="ident" id="8404162">ident</span><span class="op" id="8404167">.</span><span class="ident" id="8404168">Name</span><span class="op" id="8404172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404182">kind</span>&nbsp;<span class="op" id="8404187">:=</span>&nbsp;<span class="ident" id="8404190">objects</span><span class="op" id="8404197">[</span><span class="ident" id="8404198">ident</span><span class="op" id="8404203">.</span><span class="ident" id="8404204">Name</span><span class="op" id="8404208">]</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404213">if</span>&nbsp;<span class="ident" id="8404216">obj</span><span class="op" id="8404219">.</span><span class="ident" id="8404220">Kind</span>&nbsp;<span class="op" id="8404225">!=</span>&nbsp;<span class="ident" id="8404228">kind</span>&nbsp;<span class="op" id="8404233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404239">t</span><span class="op" id="8404240">.</span><span class="ident" id="8404241">Errorf</span><span class="op" id="8404247">(</span><span class="string" id="8404248">&#34;%s:&nbsp;obj.Kind&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="8404276">,</span>&nbsp;<span class="ident" id="8404278">ident</span><span class="op" id="8404283">.</span><span class="ident" id="8404284">Name</span><span class="op" id="8404288">,</span>&nbsp;<span class="ident" id="8404290">obj</span><span class="op" id="8404293">.</span><span class="ident" id="8404294">Kind</span><span class="op" id="8404298">,</span>&nbsp;<span class="ident" id="8404300">kind</span><span class="op" id="8404304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404317">return</span>&nbsp;<span class="builtintype" id="8404324">true</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404330">}</span><span class="op" id="8404331">)</span><br>
<span class="lineno"></span><span class="op" id="8404333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8404336">func</span>&nbsp;<span class="ident" id="8404341">TestUnresolved</span><span class="op" id="8404355">(</span><span class="ident" id="8404356">t</span>&nbsp;<span class="op" id="8404358">*</span><span class="ident" id="8404359">testing</span><span class="op" id="8404366">.</span><span class="ident" id="8404367">T</span><span class="op" id="8404368">)</span>&nbsp;<span class="op" id="8404370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404373">f</span><span class="op" id="8404374">,</span>&nbsp;<span class="ident" id="8404376">err</span>&nbsp;<span class="op" id="8404380">:=</span>&nbsp;<span class="ident" id="8404383">ParseFile</span><span class="op" id="8404392">(</span><span class="ident" id="8404393">fset</span><span class="op" id="8404397">,</span>&nbsp;<span class="string" id="8404399">&#34;&#34;</span><span class="op" id="8404401">,</span>&nbsp;<span class="string" id="8404403">`<br>
<span class="lineno">225</span>package&nbsp;p<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1a(int)<br>
<span class="lineno"></span>func&nbsp;f2a(byte,&nbsp;int,&nbsp;float)<br>
<span class="lineno"></span>func&nbsp;f3a(a,&nbsp;b&nbsp;int,&nbsp;c&nbsp;float)<br>
<span class="lineno">230</span>func&nbsp;f4a(...complex)<br>
<span class="lineno"></span>func&nbsp;f5a(a&nbsp;s1a,&nbsp;b&nbsp;...complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>func&nbsp;f1b(*int)<br>
<span class="lineno"></span>func&nbsp;f2b([]byte,&nbsp;(int),&nbsp;*float)<br>
<span class="lineno">235</span>func&nbsp;f3b(a,&nbsp;b&nbsp;*int,&nbsp;c&nbsp;[]float)<br>
<span class="lineno"></span>func&nbsp;f4b(...*complex)<br>
<span class="lineno"></span>func&nbsp;f5b(a&nbsp;s1a,&nbsp;b&nbsp;...[]complex)<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1a&nbsp;struct&nbsp;{&nbsp;int&nbsp;}<br>
<span class="lineno">240</span>type&nbsp;s2a&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;s1a&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s3a&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;int;&nbsp;c&nbsp;float&nbsp;}<br>
<span class="lineno"></span>//<br>
<span class="lineno"></span>type&nbsp;s1b&nbsp;struct&nbsp;{&nbsp;*int&nbsp;}<br>
<span class="lineno"></span>type&nbsp;s2b&nbsp;struct&nbsp;{&nbsp;byte;&nbsp;int;&nbsp;*float&nbsp;}<br>
<span class="lineno">245</span>type&nbsp;s3b&nbsp;struct&nbsp;{&nbsp;a,&nbsp;b&nbsp;*s3b;&nbsp;c&nbsp;[]float&nbsp;}<br>
<span class="lineno"></span>`</span><span class="op" id="8404881">,</span>&nbsp;<span class="num" id="8404883">0</span><span class="op" id="8404884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8404887">if</span>&nbsp;<span class="ident" id="8404890">err</span>&nbsp;<span class="op" id="8404894">!=</span>&nbsp;<span class="ident" id="8404897">nil</span>&nbsp;<span class="op" id="8404901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404905">t</span><span class="op" id="8404906">.</span><span class="ident" id="8404907">Fatal</span><span class="op" id="8404912">(</span><span class="ident" id="8404913">err</span><span class="op" id="8404916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8404919">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8404923">want</span>&nbsp;<span class="op" id="8404928">:=</span>&nbsp;<span class="string" id="8404931">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8404938">+</span>&nbsp;<span class="comment" id="8404940">//&nbsp;f1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8404949">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8404967">+</span>&nbsp;<span class="comment" id="8404969">//&nbsp;f2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8404978">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8404991">+</span>&nbsp;<span class="comment" id="8404993">//&nbsp;f3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405002">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8405013">+</span>&nbsp;<span class="comment" id="8405015">//&nbsp;f4a</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405024">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8405035">+</span>&nbsp;<span class="comment" id="8405037">//&nbsp;f5a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405046">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405051">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8405058">+</span>&nbsp;<span class="comment" id="8405060">//&nbsp;f1b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405069">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8405087">+</span>&nbsp;<span class="comment" id="8405089">//&nbsp;f2b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405098">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8405111">+</span>&nbsp;<span class="comment" id="8405113">//&nbsp;f3b</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405122">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8405133">+</span>&nbsp;<span class="comment" id="8405135">//&nbsp;f4b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405144">&#34;complex&nbsp;&#34;</span>&nbsp;<span class="op" id="8405155">+</span>&nbsp;<span class="comment" id="8405157">//&nbsp;f5b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405166">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405171">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8405178">+</span>&nbsp;<span class="comment" id="8405180">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405189">&#34;byte&nbsp;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8405201">+</span>&nbsp;<span class="comment" id="8405203">//&nbsp;s2a</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405212">&#34;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8405225">+</span>&nbsp;<span class="comment" id="8405227">//&nbsp;s3a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405236">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405241">&#34;int&nbsp;&#34;</span>&nbsp;<span class="op" id="8405248">+</span>&nbsp;<span class="comment" id="8405250">//&nbsp;s1a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405259">&#34;byte&nbsp;int&nbsp;float&nbsp;&#34;</span>&nbsp;<span class="op" id="8405277">+</span>&nbsp;<span class="comment" id="8405279">//&nbsp;s2a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405288">&#34;float&nbsp;&#34;</span>&nbsp;<span class="comment" id="8405297">//&nbsp;s3a</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405306">//&nbsp;collect&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8405341">var</span>&nbsp;<span class="ident" id="8405345">buf</span>&nbsp;<span class="ident" id="8405349">bytes</span><span class="op" id="8405354">.</span><span class="ident" id="8405355">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8405363">for</span>&nbsp;<span class="ident" id="8405367">_</span><span class="op" id="8405368">,</span>&nbsp;<span class="ident" id="8405370">u</span>&nbsp;<span class="op" id="8405372">:=</span>&nbsp;<span class="keyword" id="8405375">range</span>&nbsp;<span class="ident" id="8405381">f</span><span class="op" id="8405382">.</span><span class="ident" id="8405383">Unresolved</span>&nbsp;<span class="op" id="8405394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8405398">buf</span><span class="op" id="8405401">.</span><span class="ident" id="8405402">WriteString</span><span class="op" id="8405413">(</span><span class="ident" id="8405414">u</span><span class="op" id="8405415">.</span><span class="ident" id="8405416">Name</span><span class="op" id="8405420">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8405424">buf</span><span class="op" id="8405427">.</span><span class="ident" id="8405428">WriteByte</span><span class="op" id="8405437">(</span><span class="string" id="8405438">&#39;&nbsp;&#39;</span><span class="op" id="8405441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8405444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8405447">got</span>&nbsp;<span class="op" id="8405451">:=</span>&nbsp;<span class="ident" id="8405454">buf</span><span class="op" id="8405457">.</span><span class="ident" id="8405458">String</span><span class="op" id="8405464">(</span><span class="op" id="8405465">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8405469">if</span>&nbsp;<span class="ident" id="8405472">got</span>&nbsp;<span class="op" id="8405476">!=</span>&nbsp;<span class="ident" id="8405479">want</span>&nbsp;<span class="op" id="8405484">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8405488">t</span><span class="op" id="8405489">.</span><span class="ident" id="8405490">Errorf</span><span class="op" id="8405496">(</span><span class="string" id="8405497">&#34;\ngot:&nbsp;&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="8405519">,</span>&nbsp;<span class="ident" id="8405521">got</span><span class="op" id="8405524">,</span>&nbsp;<span class="ident" id="8405526">want</span><span class="op" id="8405530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8405533">}</span><br>
<span class="lineno"></span><span class="op" id="8405535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8405538">var</span>&nbsp;<span class="ident" id="8405542">imports</span>&nbsp;<span class="op" id="8405550">=</span>&nbsp;<span class="keyword" id="8405552">map</span><span class="op" id="8405555">[</span><span class="builtintype" id="8405556">string</span><span class="op" id="8405562">]</span><span class="builtintype" id="8405563">bool</span><span class="op" id="8405567">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405570">`&#34;a&#34;`</span><span class="op" id="8405575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405584">true</span><span class="op" id="8405588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405591">&#34;`a`&#34;</span><span class="op" id="8405596">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405605">true</span><span class="op" id="8405609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405612">`&#34;a/b&#34;`</span><span class="op" id="8405619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405626">true</span><span class="op" id="8405630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405633">`&#34;a.b&#34;`</span><span class="op" id="8405640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405647">true</span><span class="op" id="8405651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405654">`&#34;m\x61th&#34;`</span><span class="op" id="8405665">:</span>&nbsp;&nbsp;<span class="builtintype" id="8405668">true</span><span class="op" id="8405672">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405675">`&#34;greek/&#34;`</span><span class="op" id="8405689">:</span>&nbsp;<span class="builtintype" id="8405691">true</span><span class="op" id="8405695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405698">`&#34;&#34;`</span><span class="op" id="8405702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405712">false</span><span class="op" id="8405717">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405721">//&nbsp;Each&nbsp;of&nbsp;these&nbsp;pairs&nbsp;tests&nbsp;both&nbsp;``&nbsp;vs&nbsp;&#34;&#34;&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405773">//&nbsp;and&nbsp;also&nbsp;use&nbsp;of&nbsp;invalid&nbsp;characters&nbsp;spelled&nbsp;out&nbsp;as</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405827">//&nbsp;escape&nbsp;sequences&nbsp;and&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405870">//&nbsp;For&nbsp;example&nbsp;`&#34;\x00&#34;`&nbsp;tests&nbsp;import&nbsp;&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8405915">//&nbsp;while&nbsp;&#34;`\x00`&#34;&nbsp;tests&nbsp;import&nbsp;`&lt;actual-NUL-byte&gt;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405968">`&#34;\x00&#34;`</span><span class="op" id="8405976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8405982">false</span><span class="op" id="8405987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8405990">&#34;`\x00`&#34;</span><span class="op" id="8405998">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406004">false</span><span class="op" id="8406009">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406012">`&#34;\x7f&#34;`</span><span class="op" id="8406020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406026">false</span><span class="op" id="8406031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406034">&#34;`\x7f`&#34;</span><span class="op" id="8406042">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406048">false</span><span class="op" id="8406053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406056">`&#34;a!&#34;`</span><span class="op" id="8406062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406070">false</span><span class="op" id="8406075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406078">&#34;`a!`&#34;</span><span class="op" id="8406084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406092">false</span><span class="op" id="8406097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406100">`&#34;a&nbsp;b&#34;`</span><span class="op" id="8406107">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406114">false</span><span class="op" id="8406119">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406122">&#34;`a&nbsp;b`&#34;</span><span class="op" id="8406129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406136">false</span><span class="op" id="8406141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406144">`&#34;a\\b&#34;`</span><span class="op" id="8406152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406158">false</span><span class="op" id="8406163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406166">&#34;`a\\b`&#34;</span><span class="op" id="8406174">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406180">false</span><span class="op" id="8406185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406188">&#34;\&#34;`a`\&#34;&#34;</span><span class="op" id="8406197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406202">false</span><span class="op" id="8406207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406210">&#34;`\&#34;a\&#34;`&#34;</span><span class="op" id="8406219">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406224">false</span><span class="op" id="8406229">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406232">`&#34;\x80\x80&#34;`</span><span class="op" id="8406244">:</span>&nbsp;<span class="builtintype" id="8406246">false</span><span class="op" id="8406251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406254">&#34;`\x80\x80`&#34;</span><span class="op" id="8406266">:</span>&nbsp;<span class="builtintype" id="8406268">false</span><span class="op" id="8406273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406276">`&#34;\xFFFD&#34;`</span><span class="op" id="8406286">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406290">false</span><span class="op" id="8406295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8406298">&#34;`\xFFFD`&#34;</span><span class="op" id="8406308">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8406312">false</span><span class="op" id="8406317">,</span><br>
<span class="lineno"></span><span class="op" id="8406319">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="8406322">func</span>&nbsp;<span class="ident" id="8406327">TestImports</span><span class="op" id="8406338">(</span><span class="ident" id="8406339">t</span>&nbsp;<span class="op" id="8406341">*</span><span class="ident" id="8406342">testing</span><span class="op" id="8406349">.</span><span class="ident" id="8406350">T</span><span class="op" id="8406351">)</span>&nbsp;<span class="op" id="8406353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8406356">for</span>&nbsp;<span class="ident" id="8406360">path</span><span class="op" id="8406364">,</span>&nbsp;<span class="ident" id="8406366">isValid</span>&nbsp;<span class="op" id="8406374">:=</span>&nbsp;<span class="keyword" id="8406377">range</span>&nbsp;<span class="ident" id="8406383">imports</span>&nbsp;<span class="op" id="8406391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8406395">src</span>&nbsp;<span class="op" id="8406399">:=</span>&nbsp;<span class="ident" id="8406402">fmt</span><span class="op" id="8406405">.</span><span class="ident" id="8406406">Sprintf</span><span class="op" id="8406413">(</span><span class="string" id="8406414">&#34;package&nbsp;p;&nbsp;import&nbsp;%s&#34;</span><span class="op" id="8406436">,</span>&nbsp;<span class="ident" id="8406438">path</span><span class="op" id="8406442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8406446">_</span><span class="op" id="8406447">,</span>&nbsp;<span class="ident" id="8406449">err</span>&nbsp;<span class="op" id="8406453">:=</span>&nbsp;<span class="ident" id="8406456">ParseFile</span><span class="op" id="8406465">(</span><span class="ident" id="8406466">fset</span><span class="op" id="8406470">,</span>&nbsp;<span class="string" id="8406472">&#34;&#34;</span><span class="op" id="8406474">,</span>&nbsp;<span class="ident" id="8406476">src</span><span class="op" id="8406479">,</span>&nbsp;<span class="num" id="8406481">0</span><span class="op" id="8406482">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8406486">switch</span>&nbsp;<span class="op" id="8406493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8406497">case</span>&nbsp;<span class="ident" id="8406502">err</span>&nbsp;<span class="op" id="8406506">!=</span>&nbsp;<span class="ident" id="8406509">nil</span>&nbsp;<span class="op" id="8406513">&amp;&amp;</span>&nbsp;<span class="ident" id="8406516">isValid</span><span class="op" id="8406523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8406528">t</span><span class="op" id="8406529">.</span><span class="ident" id="8406530">Errorf</span><span class="op" id="8406536">(</span><span class="string" id="8406537">&#34;ParseFile(%s):&nbsp;got&nbsp;%v;&nbsp;expected&nbsp;no&nbsp;error&#34;</span><span class="op" id="8406579">,</span>&nbsp;<span class="ident" id="8406581">src</span><span class="op" id="8406584">,</span>&nbsp;<span class="ident" id="8406586">err</span><span class="op" id="8406589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8406593">case</span>&nbsp;<span class="ident" id="8406598">err</span>&nbsp;<span class="op" id="8406602">==</span>&nbsp;<span class="ident" id="8406605">nil</span>&nbsp;<span class="op" id="8406609">&amp;&amp;</span>&nbsp;<span class="op" id="8406612">!</span><span class="ident" id="8406613">isValid</span><span class="op" id="8406620">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8406625">t</span><span class="op" id="8406626">.</span><span class="ident" id="8406627">Errorf</span><span class="op" id="8406633">(</span><span class="string" id="8406634">&#34;ParseFile(%s):&nbsp;got&nbsp;no&nbsp;error;&nbsp;expected&nbsp;one&#34;</span><span class="op" id="8406677">,</span>&nbsp;<span class="ident" id="8406679">src</span><span class="op" id="8406682">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8406686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8406689">}</span><br>
<span class="lineno"></span><span class="op" id="8406691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8406694">func</span>&nbsp;<span class="ident" id="8406699">TestCommentGroups</span><span class="op" id="8406716">(</span><span class="ident" id="8406717">t</span>&nbsp;<span class="op" id="8406719">*</span><span class="ident" id="8406720">testing</span><span class="op" id="8406727">.</span><span class="ident" id="8406728">T</span><span class="op" id="8406729">)</span>&nbsp;<span class="op" id="8406731">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8406734">f</span><span class="op" id="8406735">,</span>&nbsp;<span class="ident" id="8406737">err</span>&nbsp;<span class="op" id="8406741">:=</span>&nbsp;<span class="ident" id="8406744">ParseFile</span><span class="op" id="8406753">(</span><span class="ident" id="8406754">fset</span><span class="op" id="8406758">,</span>&nbsp;<span class="string" id="8406760">&#34;&#34;</span><span class="op" id="8406762">,</span>&nbsp;<span class="string" id="8406764">`<br>
<span class="lineno"></span>package&nbsp;p&nbsp;/*&nbsp;1a&nbsp;*/&nbsp;/*&nbsp;1b&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;1c&nbsp;*/&nbsp;//&nbsp;1d<br>
<span class="lineno"></span>/*&nbsp;2a<br>
<span class="lineno"></span>*/<br>
<span class="lineno"></span>//&nbsp;2b<br>
<span class="lineno">335</span>const&nbsp;pi&nbsp;=&nbsp;3.1415<br>
<span class="lineno"></span>/*&nbsp;3a&nbsp;*/&nbsp;//&nbsp;3b<br>
<span class="lineno"></span>/*&nbsp;3c&nbsp;*/&nbsp;const&nbsp;e&nbsp;=&nbsp;2.7182<br>
<span class="lineno"></span><br>
<span class="lineno"></span>//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139<br>
<span class="lineno">340</span>func&nbsp;ExampleCount()&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;cheese&#34;,&nbsp;&#34;e&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Println(strings.Count(&#34;five&#34;,&nbsp;&#34;&#34;))&nbsp;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;Output:<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;3<br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;5<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8407076">,</span>&nbsp;<span class="ident" id="8407078">ParseComments</span><span class="op" id="8407091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407094">if</span>&nbsp;<span class="ident" id="8407097">err</span>&nbsp;<span class="op" id="8407101">!=</span>&nbsp;<span class="ident" id="8407104">nil</span>&nbsp;<span class="op" id="8407108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407112">t</span><span class="op" id="8407113">.</span><span class="ident" id="8407114">Fatal</span><span class="op" id="8407119">(</span><span class="ident" id="8407120">err</span><span class="op" id="8407123">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407129">expected</span>&nbsp;<span class="op" id="8407138">:=</span>&nbsp;<span class="op" id="8407141">[</span><span class="op" id="8407142">]</span><span class="op" id="8407143">[</span><span class="op" id="8407144">]</span><span class="builtintype" id="8407145">string</span><span class="op" id="8407151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407155">{</span><span class="string" id="8407156">&#34;/*&nbsp;1a&nbsp;*/&#34;</span><span class="op" id="8407166">,</span>&nbsp;<span class="string" id="8407168">&#34;/*&nbsp;1b&nbsp;*/&#34;</span><span class="op" id="8407178">,</span>&nbsp;<span class="string" id="8407180">&#34;/*&nbsp;1c&nbsp;*/&#34;</span><span class="op" id="8407190">,</span>&nbsp;<span class="string" id="8407192">&#34;//&nbsp;1d&#34;</span><span class="op" id="8407199">}</span><span class="op" id="8407200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407204">{</span><span class="string" id="8407205">&#34;/*&nbsp;2a\n*/&#34;</span><span class="op" id="8407216">,</span>&nbsp;<span class="string" id="8407218">&#34;//&nbsp;2b&#34;</span><span class="op" id="8407225">}</span><span class="op" id="8407226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407230">{</span><span class="string" id="8407231">&#34;/*&nbsp;3a&nbsp;*/&#34;</span><span class="op" id="8407241">,</span>&nbsp;<span class="string" id="8407243">&#34;//&nbsp;3b&#34;</span><span class="op" id="8407250">,</span>&nbsp;<span class="string" id="8407252">&#34;/*&nbsp;3c&nbsp;*/&#34;</span><span class="op" id="8407262">}</span><span class="op" id="8407263">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407267">{</span><span class="string" id="8407268">&#34;//&nbsp;Example&nbsp;from&nbsp;issue&nbsp;3139&#34;</span><span class="op" id="8407296">}</span><span class="op" id="8407297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407301">{</span><span class="string" id="8407302">&#34;//&nbsp;before&nbsp;&amp;&nbsp;after&nbsp;each&nbsp;rune&#34;</span><span class="op" id="8407331">}</span><span class="op" id="8407332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407336">{</span><span class="string" id="8407337">&#34;//&nbsp;Output:&#34;</span><span class="op" id="8407349">,</span>&nbsp;<span class="string" id="8407351">&#34;//&nbsp;3&#34;</span><span class="op" id="8407357">,</span>&nbsp;<span class="string" id="8407359">&#34;//&nbsp;5&#34;</span><span class="op" id="8407365">}</span><span class="op" id="8407366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407372">if</span>&nbsp;<span class="builtinfunc" id="8407375">len</span><span class="op" id="8407378">(</span><span class="ident" id="8407379">f</span><span class="op" id="8407380">.</span><span class="ident" id="8407381">Comments</span><span class="op" id="8407389">)</span>&nbsp;<span class="op" id="8407391">!=</span>&nbsp;<span class="builtinfunc" id="8407394">len</span><span class="op" id="8407397">(</span><span class="ident" id="8407398">expected</span><span class="op" id="8407406">)</span>&nbsp;<span class="op" id="8407408">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407412">t</span><span class="op" id="8407413">.</span><span class="ident" id="8407414">Fatalf</span><span class="op" id="8407420">(</span><span class="string" id="8407421">&#34;got&nbsp;%d&nbsp;comment&nbsp;groups;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8407457">,</span>&nbsp;<span class="builtinfunc" id="8407459">len</span><span class="op" id="8407462">(</span><span class="ident" id="8407463">f</span><span class="op" id="8407464">.</span><span class="ident" id="8407465">Comments</span><span class="op" id="8407473">)</span><span class="op" id="8407474">,</span>&nbsp;<span class="builtinfunc" id="8407476">len</span><span class="op" id="8407479">(</span><span class="ident" id="8407480">expected</span><span class="op" id="8407488">)</span><span class="op" id="8407489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407495">for</span>&nbsp;<span class="ident" id="8407499">i</span><span class="op" id="8407500">,</span>&nbsp;<span class="ident" id="8407502">exp</span>&nbsp;<span class="op" id="8407506">:=</span>&nbsp;<span class="keyword" id="8407509">range</span>&nbsp;<span class="ident" id="8407515">expected</span>&nbsp;<span class="op" id="8407524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407528">got</span>&nbsp;<span class="op" id="8407532">:=</span>&nbsp;<span class="ident" id="8407535">f</span><span class="op" id="8407536">.</span><span class="ident" id="8407537">Comments</span><span class="op" id="8407545">[</span><span class="ident" id="8407546">i</span><span class="op" id="8407547">]</span><span class="op" id="8407548">.</span><span class="ident" id="8407549">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407556">if</span>&nbsp;<span class="builtinfunc" id="8407559">len</span><span class="op" id="8407562">(</span><span class="ident" id="8407563">got</span><span class="op" id="8407566">)</span>&nbsp;<span class="op" id="8407568">!=</span>&nbsp;<span class="builtinfunc" id="8407571">len</span><span class="op" id="8407574">(</span><span class="ident" id="8407575">exp</span><span class="op" id="8407578">)</span>&nbsp;<span class="op" id="8407580">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407585">t</span><span class="op" id="8407586">.</span><span class="ident" id="8407587">Errorf</span><span class="op" id="8407593">(</span><span class="string" id="8407594">&#34;got&nbsp;%d&nbsp;comments&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8407636">,</span>&nbsp;<span class="builtinfunc" id="8407638">len</span><span class="op" id="8407641">(</span><span class="ident" id="8407642">got</span><span class="op" id="8407645">)</span><span class="op" id="8407646">,</span>&nbsp;<span class="ident" id="8407648">i</span><span class="op" id="8407649">,</span>&nbsp;<span class="builtinfunc" id="8407651">len</span><span class="op" id="8407654">(</span><span class="ident" id="8407655">exp</span><span class="op" id="8407658">)</span><span class="op" id="8407659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407664">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407679">for</span>&nbsp;<span class="ident" id="8407683">j</span><span class="op" id="8407684">,</span>&nbsp;<span class="ident" id="8407686">exp</span>&nbsp;<span class="op" id="8407690">:=</span>&nbsp;<span class="keyword" id="8407693">range</span>&nbsp;<span class="ident" id="8407699">exp</span>&nbsp;<span class="op" id="8407703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407708">got</span>&nbsp;<span class="op" id="8407712">:=</span>&nbsp;<span class="ident" id="8407715">got</span><span class="op" id="8407718">[</span><span class="ident" id="8407719">j</span><span class="op" id="8407720">]</span><span class="op" id="8407721">.</span><span class="ident" id="8407722">Text</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407730">if</span>&nbsp;<span class="ident" id="8407733">got</span>&nbsp;<span class="op" id="8407737">!=</span>&nbsp;<span class="ident" id="8407740">exp</span>&nbsp;<span class="op" id="8407744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407750">t</span><span class="op" id="8407751">.</span><span class="ident" id="8407752">Errorf</span><span class="op" id="8407758">(</span><span class="string" id="8407759">&#34;got&nbsp;%q&nbsp;in&nbsp;group&nbsp;%d;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8407792">,</span>&nbsp;<span class="ident" id="8407794">got</span><span class="op" id="8407797">,</span>&nbsp;<span class="ident" id="8407799">i</span><span class="op" id="8407800">,</span>&nbsp;<span class="ident" id="8407802">exp</span><span class="op" id="8407805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8407817">}</span><br>
<span class="lineno">375</span><span class="op" id="8407819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8407822">func</span>&nbsp;<span class="ident" id="8407827">getField</span><span class="op" id="8407835">(</span><span class="ident" id="8407836">file</span>&nbsp;<span class="op" id="8407841">*</span><span class="ident" id="8407842">ast</span><span class="op" id="8407845">.</span><span class="ident" id="8407846">File</span><span class="op" id="8407850">,</span>&nbsp;<span class="ident" id="8407852">fieldname</span>&nbsp;<span class="builtintype" id="8407862">string</span><span class="op" id="8407868">)</span>&nbsp;<span class="op" id="8407870">*</span><span class="ident" id="8407871">ast</span><span class="op" id="8407874">.</span><span class="ident" id="8407875">Field</span>&nbsp;<span class="op" id="8407881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8407884">parts</span>&nbsp;<span class="op" id="8407890">:=</span>&nbsp;<span class="ident" id="8407893">strings</span><span class="op" id="8407900">.</span><span class="ident" id="8407901">Split</span><span class="op" id="8407906">(</span><span class="ident" id="8407907">fieldname</span><span class="op" id="8407916">,</span>&nbsp;<span class="string" id="8407918">&#34;.&#34;</span><span class="op" id="8407921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407924">for</span>&nbsp;<span class="ident" id="8407928">_</span><span class="op" id="8407929">,</span>&nbsp;<span class="ident" id="8407931">d</span>&nbsp;<span class="op" id="8407933">:=</span>&nbsp;<span class="keyword" id="8407936">range</span>&nbsp;<span class="ident" id="8407942">file</span><span class="op" id="8407946">.</span><span class="ident" id="8407947">Decls</span>&nbsp;<span class="op" id="8407953">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8407957">if</span>&nbsp;<span class="ident" id="8407960">d</span><span class="op" id="8407961">,</span>&nbsp;<span class="ident" id="8407963">ok</span>&nbsp;<span class="op" id="8407966">:=</span>&nbsp;<span class="ident" id="8407969">d</span><span class="op" id="8407970">.</span><span class="op" id="8407971">(</span><span class="op" id="8407972">*</span><span class="ident" id="8407973">ast</span><span class="op" id="8407976">.</span><span class="ident" id="8407977">GenDecl</span><span class="op" id="8407984">)</span><span class="op" id="8407985">;</span>&nbsp;<span class="ident" id="8407987">ok</span>&nbsp;<span class="op" id="8407990">&amp;&amp;</span>&nbsp;<span class="ident" id="8407993">d</span><span class="op" id="8407994">.</span><span class="ident" id="8407995">Tok</span>&nbsp;<span class="op" id="8407999">==</span>&nbsp;<span class="ident" id="8408002">token</span><span class="op" id="8408007">.</span><span class="ident" id="8408008">TYPE</span>&nbsp;<span class="op" id="8408013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408018">for</span>&nbsp;<span class="ident" id="8408022">_</span><span class="op" id="8408023">,</span>&nbsp;<span class="ident" id="8408025">s</span>&nbsp;<span class="op" id="8408027">:=</span>&nbsp;<span class="keyword" id="8408030">range</span>&nbsp;<span class="ident" id="8408036">d</span><span class="op" id="8408037">.</span><span class="ident" id="8408038">Specs</span>&nbsp;<span class="op" id="8408044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408050">if</span>&nbsp;<span class="ident" id="8408053">s</span><span class="op" id="8408054">,</span>&nbsp;<span class="ident" id="8408056">ok</span>&nbsp;<span class="op" id="8408059">:=</span>&nbsp;<span class="ident" id="8408062">s</span><span class="op" id="8408063">.</span><span class="op" id="8408064">(</span><span class="op" id="8408065">*</span><span class="ident" id="8408066">ast</span><span class="op" id="8408069">.</span><span class="ident" id="8408070">TypeSpec</span><span class="op" id="8408078">)</span><span class="op" id="8408079">;</span>&nbsp;<span class="ident" id="8408081">ok</span>&nbsp;<span class="op" id="8408084">&amp;&amp;</span>&nbsp;<span class="ident" id="8408087">s</span><span class="op" id="8408088">.</span><span class="ident" id="8408089">Name</span><span class="op" id="8408093">.</span><span class="ident" id="8408094">Name</span>&nbsp;<span class="op" id="8408099">==</span>&nbsp;<span class="ident" id="8408102">parts</span><span class="op" id="8408107">[</span><span class="num" id="8408108">0</span><span class="op" id="8408109">]</span>&nbsp;<span class="op" id="8408111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408118">if</span>&nbsp;<span class="ident" id="8408121">s</span><span class="op" id="8408122">,</span>&nbsp;<span class="ident" id="8408124">ok</span>&nbsp;<span class="op" id="8408127">:=</span>&nbsp;<span class="ident" id="8408130">s</span><span class="op" id="8408131">.</span><span class="ident" id="8408132">Type</span><span class="op" id="8408136">.</span><span class="op" id="8408137">(</span><span class="op" id="8408138">*</span><span class="ident" id="8408139">ast</span><span class="op" id="8408142">.</span><span class="ident" id="8408143">StructType</span><span class="op" id="8408153">)</span><span class="op" id="8408154">;</span>&nbsp;<span class="ident" id="8408156">ok</span>&nbsp;<span class="op" id="8408159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408167">for</span>&nbsp;<span class="ident" id="8408171">_</span><span class="op" id="8408172">,</span>&nbsp;<span class="ident" id="8408174">f</span>&nbsp;<span class="op" id="8408176">:=</span>&nbsp;<span class="keyword" id="8408179">range</span>&nbsp;<span class="ident" id="8408185">s</span><span class="op" id="8408186">.</span><span class="ident" id="8408187">Fields</span><span class="op" id="8408193">.</span><span class="ident" id="8408194">List</span>&nbsp;<span class="op" id="8408199">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408208">for</span>&nbsp;<span class="ident" id="8408212">_</span><span class="op" id="8408213">,</span>&nbsp;<span class="ident" id="8408215">name</span>&nbsp;<span class="op" id="8408220">:=</span>&nbsp;<span class="keyword" id="8408223">range</span>&nbsp;<span class="ident" id="8408229">f</span><span class="op" id="8408230">.</span><span class="ident" id="8408231">Names</span>&nbsp;<span class="op" id="8408237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408247">if</span>&nbsp;<span class="ident" id="8408250">name</span><span class="op" id="8408254">.</span><span class="ident" id="8408255">Name</span>&nbsp;<span class="op" id="8408260">==</span>&nbsp;<span class="ident" id="8408263">parts</span><span class="op" id="8408268">[</span><span class="num" id="8408269">1</span><span class="op" id="8408270">]</span>&nbsp;<span class="op" id="8408272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408283">return</span>&nbsp;<span class="ident" id="8408290">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408309">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408339">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408345">return</span>&nbsp;<span class="ident" id="8408352">nil</span><br>
<span class="lineno"></span><span class="op" id="8408356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8408359">//&nbsp;Don&#39;t&nbsp;use&nbsp;ast.CommentGroup.Text()&nbsp;-&nbsp;we&nbsp;want&nbsp;to&nbsp;see&nbsp;exact&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">400</span><span class="keyword" id="8408433">func</span>&nbsp;<span class="ident" id="8408438">commentText</span><span class="op" id="8408449">(</span><span class="ident" id="8408450">c</span>&nbsp;<span class="op" id="8408452">*</span><span class="ident" id="8408453">ast</span><span class="op" id="8408456">.</span><span class="ident" id="8408457">CommentGroup</span><span class="op" id="8408469">)</span>&nbsp;<span class="builtintype" id="8408471">string</span>&nbsp;<span class="op" id="8408478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408481">var</span>&nbsp;<span class="ident" id="8408485">buf</span>&nbsp;<span class="ident" id="8408489">bytes</span><span class="op" id="8408494">.</span><span class="ident" id="8408495">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408503">if</span>&nbsp;<span class="ident" id="8408506">c</span>&nbsp;<span class="op" id="8408508">!=</span>&nbsp;<span class="ident" id="8408511">nil</span>&nbsp;<span class="op" id="8408515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408519">for</span>&nbsp;<span class="ident" id="8408523">_</span><span class="op" id="8408524">,</span>&nbsp;<span class="ident" id="8408526">c</span>&nbsp;<span class="op" id="8408528">:=</span>&nbsp;<span class="keyword" id="8408531">range</span>&nbsp;<span class="ident" id="8408537">c</span><span class="op" id="8408538">.</span><span class="ident" id="8408539">List</span>&nbsp;<span class="op" id="8408544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8408549">buf</span><span class="op" id="8408552">.</span><span class="ident" id="8408553">WriteString</span><span class="op" id="8408564">(</span><span class="ident" id="8408565">c</span><span class="op" id="8408566">.</span><span class="ident" id="8408567">Text</span><span class="op" id="8408571">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408581">return</span>&nbsp;<span class="ident" id="8408588">buf</span><span class="op" id="8408591">.</span><span class="ident" id="8408592">String</span><span class="op" id="8408598">(</span><span class="op" id="8408599">)</span><br>
<span class="lineno"></span><span class="op" id="8408601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8408604">func</span>&nbsp;<span class="ident" id="8408609">checkFieldComments</span><span class="op" id="8408627">(</span><span class="ident" id="8408628">t</span>&nbsp;<span class="op" id="8408630">*</span><span class="ident" id="8408631">testing</span><span class="op" id="8408638">.</span><span class="ident" id="8408639">T</span><span class="op" id="8408640">,</span>&nbsp;<span class="ident" id="8408642">file</span>&nbsp;<span class="op" id="8408647">*</span><span class="ident" id="8408648">ast</span><span class="op" id="8408651">.</span><span class="ident" id="8408652">File</span><span class="op" id="8408656">,</span>&nbsp;<span class="ident" id="8408658">fieldname</span><span class="op" id="8408667">,</span>&nbsp;<span class="ident" id="8408669">lead</span><span class="op" id="8408673">,</span>&nbsp;<span class="ident" id="8408675">line</span>&nbsp;<span class="builtintype" id="8408680">string</span><span class="op" id="8408686">)</span>&nbsp;<span class="op" id="8408688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8408691">f</span>&nbsp;<span class="op" id="8408693">:=</span>&nbsp;<span class="ident" id="8408696">getField</span><span class="op" id="8408704">(</span><span class="ident" id="8408705">file</span><span class="op" id="8408709">,</span>&nbsp;<span class="ident" id="8408711">fieldname</span><span class="op" id="8408720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408723">if</span>&nbsp;<span class="ident" id="8408726">f</span>&nbsp;<span class="op" id="8408728">==</span>&nbsp;<span class="ident" id="8408731">nil</span>&nbsp;<span class="op" id="8408735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8408739">t</span><span class="op" id="8408740">.</span><span class="ident" id="8408741">Fatalf</span><span class="op" id="8408747">(</span><span class="string" id="8408748">&#34;field&nbsp;not&nbsp;found:&nbsp;%s&#34;</span><span class="op" id="8408769">,</span>&nbsp;<span class="ident" id="8408771">fieldname</span><span class="op" id="8408780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408783">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408786">if</span>&nbsp;<span class="ident" id="8408789">got</span>&nbsp;<span class="op" id="8408793">:=</span>&nbsp;<span class="ident" id="8408796">commentText</span><span class="op" id="8408807">(</span><span class="ident" id="8408808">f</span><span class="op" id="8408809">.</span><span class="ident" id="8408810">Doc</span><span class="op" id="8408813">)</span><span class="op" id="8408814">;</span>&nbsp;<span class="ident" id="8408816">got</span>&nbsp;<span class="op" id="8408820">!=</span>&nbsp;<span class="ident" id="8408823">lead</span>&nbsp;<span class="op" id="8408828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8408832">t</span><span class="op" id="8408833">.</span><span class="ident" id="8408834">Errorf</span><span class="op" id="8408840">(</span><span class="string" id="8408841">&#34;got&nbsp;lead&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8408875">,</span>&nbsp;<span class="ident" id="8408877">got</span><span class="op" id="8408880">,</span>&nbsp;<span class="ident" id="8408882">lead</span><span class="op" id="8408886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8408892">if</span>&nbsp;<span class="ident" id="8408895">got</span>&nbsp;<span class="op" id="8408899">:=</span>&nbsp;<span class="ident" id="8408902">commentText</span><span class="op" id="8408913">(</span><span class="ident" id="8408914">f</span><span class="op" id="8408915">.</span><span class="ident" id="8408916">Comment</span><span class="op" id="8408923">)</span><span class="op" id="8408924">;</span>&nbsp;<span class="ident" id="8408926">got</span>&nbsp;<span class="op" id="8408930">!=</span>&nbsp;<span class="ident" id="8408933">line</span>&nbsp;<span class="op" id="8408938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8408942">t</span><span class="op" id="8408943">.</span><span class="ident" id="8408944">Errorf</span><span class="op" id="8408950">(</span><span class="string" id="8408951">&#34;got&nbsp;line&nbsp;comment&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8408985">,</span>&nbsp;<span class="ident" id="8408987">got</span><span class="op" id="8408990">,</span>&nbsp;<span class="ident" id="8408992">line</span><span class="op" id="8408996">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8408999">}</span><br>
<span class="lineno"></span><span class="op" id="8409001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8409004">func</span>&nbsp;<span class="ident" id="8409009">TestLeadAndLineComments</span><span class="op" id="8409032">(</span><span class="ident" id="8409033">t</span>&nbsp;<span class="op" id="8409035">*</span><span class="ident" id="8409036">testing</span><span class="op" id="8409043">.</span><span class="ident" id="8409044">T</span><span class="op" id="8409045">)</span>&nbsp;<span class="op" id="8409047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409050">f</span><span class="op" id="8409051">,</span>&nbsp;<span class="ident" id="8409053">err</span>&nbsp;<span class="op" id="8409057">:=</span>&nbsp;<span class="ident" id="8409060">ParseFile</span><span class="op" id="8409069">(</span><span class="ident" id="8409070">fset</span><span class="op" id="8409074">,</span>&nbsp;<span class="string" id="8409076">&#34;&#34;</span><span class="op" id="8409078">,</span>&nbsp;<span class="string" id="8409080">`<br>
<span class="lineno">425</span>package&nbsp;p<br>
<span class="lineno"></span>type&nbsp;T&nbsp;struct&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*/<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF1&nbsp;int&nbsp;&nbsp;/*&nbsp;F1&nbsp;*/&nbsp;//&nbsp;line&nbsp;comment<br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;F2&nbsp;lead<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspF2&nbsp;int&nbsp;&nbsp;//&nbsp;F2&nbsp;line&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;f3&nbsp;lead&nbsp;comment<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspf3&nbsp;int&nbsp;&nbsp;//&nbsp;f3&nbsp;line&nbsp;comment<br>
<span class="lineno">435</span>}<br>
<span class="lineno"></span>`</span><span class="op" id="8409272">,</span>&nbsp;<span class="ident" id="8409274">ParseComments</span><span class="op" id="8409287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8409290">if</span>&nbsp;<span class="ident" id="8409293">err</span>&nbsp;<span class="op" id="8409297">!=</span>&nbsp;<span class="ident" id="8409300">nil</span>&nbsp;<span class="op" id="8409304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409308">t</span><span class="op" id="8409309">.</span><span class="ident" id="8409310">Fatal</span><span class="op" id="8409315">(</span><span class="ident" id="8409316">err</span><span class="op" id="8409319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8409322">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409325">checkFieldComments</span><span class="op" id="8409343">(</span><span class="ident" id="8409344">t</span><span class="op" id="8409345">,</span>&nbsp;<span class="ident" id="8409347">f</span><span class="op" id="8409348">,</span>&nbsp;<span class="string" id="8409350">&#34;T.F1&#34;</span><span class="op" id="8409356">,</span>&nbsp;<span class="string" id="8409358">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8409383">,</span>&nbsp;<span class="string" id="8409385">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8409410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409413">checkFieldComments</span><span class="op" id="8409431">(</span><span class="ident" id="8409432">t</span><span class="op" id="8409433">,</span>&nbsp;<span class="ident" id="8409435">f</span><span class="op" id="8409436">,</span>&nbsp;<span class="string" id="8409438">&#34;T.F2&#34;</span><span class="op" id="8409444">,</span>&nbsp;<span class="string" id="8409446">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8409468">,</span>&nbsp;<span class="string" id="8409470">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8409490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409493">checkFieldComments</span><span class="op" id="8409511">(</span><span class="ident" id="8409512">t</span><span class="op" id="8409513">,</span>&nbsp;<span class="ident" id="8409515">f</span><span class="op" id="8409516">,</span>&nbsp;<span class="string" id="8409518">&#34;T.f3&#34;</span><span class="op" id="8409524">,</span>&nbsp;<span class="string" id="8409526">&#34;//&nbsp;f3&nbsp;lead&nbsp;comment&#34;</span><span class="op" id="8409546">,</span>&nbsp;<span class="string" id="8409548">&#34;//&nbsp;f3&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8409568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409571">ast</span><span class="op" id="8409574">.</span><span class="ident" id="8409575">FileExports</span><span class="op" id="8409586">(</span><span class="ident" id="8409587">f</span><span class="op" id="8409588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409591">checkFieldComments</span><span class="op" id="8409609">(</span><span class="ident" id="8409610">t</span><span class="op" id="8409611">,</span>&nbsp;<span class="ident" id="8409613">f</span><span class="op" id="8409614">,</span>&nbsp;<span class="string" id="8409616">&#34;T.F1&#34;</span><span class="op" id="8409622">,</span>&nbsp;<span class="string" id="8409624">&#34;/*&nbsp;F1&nbsp;lead&nbsp;comment&nbsp;*///&#34;</span><span class="op" id="8409649">,</span>&nbsp;<span class="string" id="8409651">&#34;/*&nbsp;F1&nbsp;*///&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8409676">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409679">checkFieldComments</span><span class="op" id="8409697">(</span><span class="ident" id="8409698">t</span><span class="op" id="8409699">,</span>&nbsp;<span class="ident" id="8409701">f</span><span class="op" id="8409702">,</span>&nbsp;<span class="string" id="8409704">&#34;T.F2&#34;</span><span class="op" id="8409710">,</span>&nbsp;<span class="string" id="8409712">&#34;//&nbsp;F2&nbsp;lead//&nbsp;comment&#34;</span><span class="op" id="8409734">,</span>&nbsp;<span class="string" id="8409736">&#34;//&nbsp;F2&nbsp;line&nbsp;comment&#34;</span><span class="op" id="8409756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8409759">if</span>&nbsp;<span class="ident" id="8409762">getField</span><span class="op" id="8409770">(</span><span class="ident" id="8409771">f</span><span class="op" id="8409772">,</span>&nbsp;<span class="string" id="8409774">&#34;T.f3&#34;</span><span class="op" id="8409780">)</span>&nbsp;<span class="op" id="8409782">!=</span>&nbsp;<span class="ident" id="8409785">nil</span>&nbsp;<span class="op" id="8409789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8409793">t</span><span class="op" id="8409794">.</span><span class="ident" id="8409795">Error</span><span class="op" id="8409800">(</span><span class="string" id="8409801">&#34;not&nbsp;expected&nbsp;to&nbsp;find&nbsp;T.f3&#34;</span><span class="op" id="8409828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8409831">}</span><br>
<span class="lineno"></span><span class="op" id="8409833">}</span>
</div>
</body>
</html>
