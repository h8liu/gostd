<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2155863">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2155918">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2155972">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2156023">package</span>&nbsp;<span class="ident" id="2156031">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2156040">import</span>&nbsp;<span class="string" id="2156047">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2156057">//&nbsp;The&nbsp;code&nbsp;in&nbsp;this&nbsp;file&nbsp;implements&nbsp;stack&nbsp;trace&nbsp;walking&nbsp;for&nbsp;all&nbsp;architectures.</span><br>
<span class="lineno">10</span><span class="comment" id="2156136">//&nbsp;The&nbsp;most&nbsp;important&nbsp;fact&nbsp;about&nbsp;a&nbsp;given&nbsp;architecture&nbsp;is&nbsp;whether&nbsp;it&nbsp;uses&nbsp;a&nbsp;link&nbsp;register.</span><br>
<span class="lineno"></span><span class="comment" id="2156226">//&nbsp;On&nbsp;systems&nbsp;with&nbsp;link&nbsp;registers,&nbsp;the&nbsp;prologue&nbsp;for&nbsp;a&nbsp;non-leaf&nbsp;function&nbsp;stores&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2156309">//&nbsp;incoming&nbsp;value&nbsp;of&nbsp;LR&nbsp;at&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;newly&nbsp;allocated&nbsp;stack&nbsp;frame.</span><br>
<span class="lineno"></span><span class="comment" id="2156383">//&nbsp;On&nbsp;systems&nbsp;without&nbsp;link&nbsp;registers,&nbsp;the&nbsp;architecture&nbsp;pushes&nbsp;a&nbsp;return&nbsp;PC&nbsp;during</span><br>
<span class="lineno"></span><span class="comment" id="2156464">//&nbsp;the&nbsp;call&nbsp;instruction,&nbsp;so&nbsp;the&nbsp;return&nbsp;PC&nbsp;ends&nbsp;up&nbsp;above&nbsp;the&nbsp;stack&nbsp;frame.</span><br>
<span class="lineno">15</span><span class="comment" id="2156537">//&nbsp;In&nbsp;this&nbsp;file,&nbsp;the&nbsp;return&nbsp;PC&nbsp;is&nbsp;always&nbsp;called&nbsp;LR,&nbsp;no&nbsp;matter&nbsp;how&nbsp;it&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2156617">//</span><br>
<span class="lineno"></span><span class="comment" id="2156620">//&nbsp;To&nbsp;date,&nbsp;the&nbsp;opposite&nbsp;of&nbsp;a&nbsp;link&nbsp;register&nbsp;architecture&nbsp;is&nbsp;an&nbsp;x86&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="comment" id="2156701">//&nbsp;This&nbsp;code&nbsp;may&nbsp;need&nbsp;to&nbsp;change&nbsp;if&nbsp;some&nbsp;other&nbsp;kind&nbsp;of&nbsp;non-link-register</span><br>
<span class="lineno"></span><span class="comment" id="2156773">//&nbsp;architecture&nbsp;comes&nbsp;along.</span><br>
<span class="lineno">20</span><span class="comment" id="2156802">//</span><br>
<span class="lineno"></span><span class="comment" id="2156805">//&nbsp;The&nbsp;other&nbsp;important&nbsp;fact&nbsp;is&nbsp;the&nbsp;size&nbsp;of&nbsp;a&nbsp;pointer:&nbsp;on&nbsp;32-bit&nbsp;systems&nbsp;the&nbsp;LR</span><br>
<span class="lineno"></span><span class="comment" id="2156884">//&nbsp;takes&nbsp;up&nbsp;only&nbsp;4&nbsp;bytes&nbsp;on&nbsp;the&nbsp;stack,&nbsp;while&nbsp;on&nbsp;64-bit&nbsp;systems&nbsp;it&nbsp;takes&nbsp;up&nbsp;8&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="2156968">//&nbsp;Typically&nbsp;this&nbsp;is&nbsp;ptrSize.</span><br>
<span class="lineno"></span><span class="comment" id="2156998">//</span><br>
<span class="lineno">25</span><span class="comment" id="2157001">//&nbsp;As&nbsp;an&nbsp;exception,&nbsp;amd64p32&nbsp;has&nbsp;ptrSize&nbsp;==&nbsp;4&nbsp;but&nbsp;the&nbsp;CALL&nbsp;instruction&nbsp;still</span><br>
<span class="lineno"></span><span class="comment" id="2157078">//&nbsp;stores&nbsp;an&nbsp;8-byte&nbsp;return&nbsp;PC&nbsp;onto&nbsp;the&nbsp;stack.&nbsp;To&nbsp;accommodate&nbsp;this,&nbsp;we&nbsp;use&nbsp;regSize</span><br>
<span class="lineno"></span><span class="comment" id="2157160">//&nbsp;as&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;architecture-pushed&nbsp;return&nbsp;PC.</span><br>
<span class="lineno"></span><span class="comment" id="2157213">//</span><br>
<span class="lineno"></span><span class="comment" id="2157216">//&nbsp;usesLR&nbsp;is&nbsp;defined&nbsp;below.&nbsp;ptrSize&nbsp;and&nbsp;regSize&nbsp;are&nbsp;defined&nbsp;in&nbsp;stubs.go.</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2157290">const</span>&nbsp;<span class="ident" id="2157296">usesLR</span>&nbsp;<span class="op" id="2157303">=</span>&nbsp;<span class="ident" id="2157305"><a href="/runtime/extern.go.html#1926883">GOARCH</a></span>&nbsp;<span class="op" id="2157312">!=</span>&nbsp;<span class="string" id="2157315">&#34;amd64&#34;</span>&nbsp;<span class="op" id="2157323">&amp;&amp;</span>&nbsp;<span class="ident" id="2157326"><a href="/runtime/extern.go.html#1926883">GOARCH</a></span>&nbsp;<span class="op" id="2157333">!=</span>&nbsp;<span class="string" id="2157336">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2157347">&amp;&amp;</span>&nbsp;<span class="ident" id="2157350"><a href="/runtime/extern.go.html#1926883">GOARCH</a></span>&nbsp;<span class="op" id="2157357">!=</span>&nbsp;<span class="string" id="2157360">&#34;386&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2157367">var</span>&nbsp;<span class="op" id="2157371">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2157374">//&nbsp;initialized&nbsp;in&nbsp;tracebackinit</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157407">deferprocPC</span>&nbsp;<span class="builtintype" id="2157419">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157428">goexitPC</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2157440">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157449">jmpdeferPC</span>&nbsp;&nbsp;<span class="builtintype" id="2157461">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157470">mcallPC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2157482">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157491">morestackPC</span>&nbsp;<span class="builtintype" id="2157503">uintptr</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157512">mstartPC</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2157524">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157533">newprocPC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2157545">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157554">rt0_goPC</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2157566">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157575">sigpanicPC</span>&nbsp;&nbsp;<span class="builtintype" id="2157587">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157597">externalthreadhandlerp</span>&nbsp;<span class="builtintype" id="2157620">uintptr</span>&nbsp;<span class="comment" id="2157628">//&nbsp;initialized&nbsp;elsewhere</span><br>
<span class="lineno"></span><span class="op" id="2157653">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2157656">func</span>&nbsp;<span class="ident" id="2157661">tracebackinit</span><span class="op" id="2157674">(</span><span class="op" id="2157675">)</span>&nbsp;<span class="op" id="2157677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2157680">//&nbsp;Go&nbsp;variable&nbsp;initialization&nbsp;happens&nbsp;late&nbsp;during&nbsp;runtime&nbsp;startup.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2157748">//&nbsp;Instead&nbsp;of&nbsp;initializing&nbsp;the&nbsp;variables&nbsp;above&nbsp;in&nbsp;the&nbsp;declarations,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2157817">//&nbsp;schedinit&nbsp;calls&nbsp;this&nbsp;function&nbsp;so&nbsp;that&nbsp;the&nbsp;variables&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2157877">//&nbsp;initialized&nbsp;and&nbsp;available&nbsp;earlier&nbsp;in&nbsp;the&nbsp;startup&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157940"><a href="/runtime/traceback.go.html#2157407">deferprocPC</a></span>&nbsp;<span class="op" id="2157952">=</span>&nbsp;<span class="ident" id="2157954"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2157960">(</span><span class="ident" id="2157961"><a href="/runtime/panic.go.html#2045728">deferproc</a></span><span class="op" id="2157970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157973"><a href="/runtime/traceback.go.html#2157428">goexitPC</a></span>&nbsp;<span class="op" id="2157982">=</span>&nbsp;<span class="ident" id="2157984"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2157990">(</span><span class="ident" id="2157991"><a href="/runtime/stubs.go.html#2137746">goexit</a></span><span class="op" id="2157997">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158000"><a href="/runtime/traceback.go.html#2157449">jmpdeferPC</a></span>&nbsp;<span class="op" id="2158011">=</span>&nbsp;<span class="ident" id="2158013"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158019">(</span><span class="ident" id="2158020"><a href="/runtime/stubs.go.html#2136902">jmpdefer</a></span><span class="op" id="2158028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158031"><a href="/runtime/traceback.go.html#2157470">mcallPC</a></span>&nbsp;<span class="op" id="2158039">=</span>&nbsp;<span class="ident" id="2158041"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158047">(</span><span class="ident" id="2158048"><a href="/runtime/stubs.go.html#2132746">mcall</a></span><span class="op" id="2158053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158056"><a href="/runtime/traceback.go.html#2157491">morestackPC</a></span>&nbsp;<span class="op" id="2158068">=</span>&nbsp;<span class="ident" id="2158070"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158076">(</span><span class="ident" id="2158077"><a href="/runtime/stubs.go.html#2139895">morestack</a></span><span class="op" id="2158086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158089"><a href="/runtime/traceback.go.html#2157512">mstartPC</a></span>&nbsp;<span class="op" id="2158098">=</span>&nbsp;<span class="ident" id="2158100"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158106">(</span><span class="ident" id="2158107"><a href="/runtime/stubs.go.html#2139912">mstart</a></span><span class="op" id="2158113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158116"><a href="/runtime/traceback.go.html#2157533">newprocPC</a></span>&nbsp;<span class="op" id="2158126">=</span>&nbsp;<span class="ident" id="2158128"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158134">(</span><span class="ident" id="2158135"><a href="/runtime/stubs.go.html#2139880">newproc</a></span><span class="op" id="2158142">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158145"><a href="/runtime/traceback.go.html#2157554">rt0_goPC</a></span>&nbsp;<span class="op" id="2158154">=</span>&nbsp;<span class="ident" id="2158156"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158162">(</span><span class="ident" id="2158163"><a href="/runtime/stubs.go.html#2139926">rt0_go</a></span><span class="op" id="2158169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158172"><a href="/runtime/traceback.go.html#2157575">sigpanicPC</a></span>&nbsp;<span class="op" id="2158183">=</span>&nbsp;<span class="ident" id="2158185"><a href="/runtime/proc.go.html#2068560">funcPC</a></span><span class="op" id="2158191">(</span><span class="ident" id="2158192"><a href="/runtime/sigpanic_unix.go.html#2101011">sigpanic</a></span><span class="op" id="2158200">)</span><br>
<span class="lineno"></span><span class="op" id="2158202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2158205">//&nbsp;Traceback&nbsp;over&nbsp;the&nbsp;deferred&nbsp;function&nbsp;calls.</span><br>
<span class="lineno">65</span><span class="comment" id="2158252">//&nbsp;Report&nbsp;them&nbsp;like&nbsp;calls&nbsp;that&nbsp;have&nbsp;been&nbsp;invoked&nbsp;but&nbsp;not&nbsp;started&nbsp;executing&nbsp;yet.</span><br>
<span class="lineno"></span><span class="keyword" id="2158332">func</span>&nbsp;<span class="ident" id="2158337">tracebackdefers</span><span class="op" id="2158352">(</span><span class="ident" id="2158353">gp</span>&nbsp;<span class="op" id="2158356">*</span><span class="ident" id="2158357"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2158358">,</span>&nbsp;<span class="ident" id="2158360">callback</span>&nbsp;<span class="keyword" id="2158369">func</span><span class="op" id="2158373">(</span><span class="op" id="2158374">*</span><span class="ident" id="2158375"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><span class="op" id="2158383">,</span>&nbsp;<span class="ident" id="2158385"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2158391">.</span><span class="ident" id="2158392">Pointer</span><span class="op" id="2158399">)</span>&nbsp;<span class="builtintype" id="2158401">bool</span><span class="op" id="2158405">,</span>&nbsp;<span class="ident" id="2158407">v</span>&nbsp;<span class="ident" id="2158409"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2158415">.</span><span class="ident" id="2158416">Pointer</span><span class="op" id="2158423">)</span>&nbsp;<span class="op" id="2158425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158428">var</span>&nbsp;<span class="ident" id="2158432">frame</span>&nbsp;<span class="ident" id="2158438"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158448">for</span>&nbsp;<span class="ident" id="2158452">d</span>&nbsp;<span class="op" id="2158454">:=</span>&nbsp;<span class="ident" id="2158457"><a href="/runtime/traceback.go.html#2158353">gp</a></span><span class="op" id="2158459">.</span><span class="ident" id="2158460">_defer</span><span class="op" id="2158466">;</span>&nbsp;<span class="ident" id="2158468"><a href="/runtime/traceback.go.html#2158452">d</a></span>&nbsp;<span class="op" id="2158470">!=</span>&nbsp;<span class="ident" id="2158473">nil</span><span class="op" id="2158476">;</span>&nbsp;<span class="ident" id="2158478"><a href="/runtime/traceback.go.html#2158452">d</a></span>&nbsp;<span class="op" id="2158480">=</span>&nbsp;<span class="ident" id="2158482"><a href="/runtime/traceback.go.html#2158452">d</a></span><span class="op" id="2158483">.</span><span class="ident" id="2158484">link</span>&nbsp;<span class="op" id="2158489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158493">fn</span>&nbsp;<span class="op" id="2158496">:=</span>&nbsp;<span class="ident" id="2158499"><a href="/runtime/traceback.go.html#2158452">d</a></span><span class="op" id="2158500">.</span><span class="ident" id="2158501">fn</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158506">if</span>&nbsp;<span class="ident" id="2158509"><a href="/runtime/traceback.go.html#2158493">fn</a></span>&nbsp;<span class="op" id="2158512">==</span>&nbsp;<span class="ident" id="2158515">nil</span>&nbsp;<span class="op" id="2158519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2158524">//&nbsp;Defer&nbsp;of&nbsp;nil&nbsp;function.&nbsp;Args&nbsp;don&#39;t&nbsp;matter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158572"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158577">.</span><span class="ident" id="2158578">pc</span>&nbsp;<span class="op" id="2158581">=</span>&nbsp;<span class="num" id="2158583">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158588"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158593">.</span><span class="ident" id="2158594">fn</span>&nbsp;<span class="op" id="2158597">=</span>&nbsp;<span class="ident" id="2158599">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158606"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158611">.</span><span class="ident" id="2158612">argp</span>&nbsp;<span class="op" id="2158617">=</span>&nbsp;<span class="num" id="2158619">0</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158624"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158629">.</span><span class="ident" id="2158630">arglen</span>&nbsp;<span class="op" id="2158637">=</span>&nbsp;<span class="num" id="2158639">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158644"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158649">.</span><span class="ident" id="2158650">argmap</span>&nbsp;<span class="op" id="2158657">=</span>&nbsp;<span class="ident" id="2158659">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2158665">}</span>&nbsp;<span class="keyword" id="2158667">else</span>&nbsp;<span class="op" id="2158672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158677"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158682">.</span><span class="ident" id="2158683">pc</span>&nbsp;<span class="op" id="2158686">=</span>&nbsp;<span class="builtintype" id="2158688">uintptr</span><span class="op" id="2158695">(</span><span class="ident" id="2158696"><a href="/runtime/traceback.go.html#2158493">fn</a></span><span class="op" id="2158698">.</span><span class="ident" id="2158699">fn</span><span class="op" id="2158701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158706">f</span>&nbsp;<span class="op" id="2158708">:=</span>&nbsp;<span class="ident" id="2158711"><a href="/runtime/symtab.go.html#2146128">findfunc</a></span><span class="op" id="2158719">(</span><span class="ident" id="2158720"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158725">.</span><span class="ident" id="2158726">pc</span><span class="op" id="2158728">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158733">if</span>&nbsp;<span class="ident" id="2158736"><a href="/runtime/traceback.go.html#2158706">f</a></span>&nbsp;<span class="op" id="2158738">==</span>&nbsp;<span class="ident" id="2158741">nil</span>&nbsp;<span class="op" id="2158745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2158751">print</span><span class="op" id="2158756">(</span><span class="string" id="2158757">&#34;runtime:&nbsp;unknown&nbsp;pc&nbsp;in&nbsp;defer&nbsp;&#34;</span><span class="op" id="2158788">,</span>&nbsp;<span class="ident" id="2158790"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2158793">(</span><span class="ident" id="2158794"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158799">.</span><span class="ident" id="2158800">pc</span><span class="op" id="2158802">)</span><span class="op" id="2158803">,</span>&nbsp;<span class="string" id="2158805">&#34;\n&#34;</span><span class="op" id="2158809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158815"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2158822">(</span><span class="string" id="2158823">&#34;unknown&nbsp;pc&#34;</span><span class="op" id="2158835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2158840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158845"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158850">.</span><span class="ident" id="2158851">fn</span>&nbsp;<span class="op" id="2158854">=</span>&nbsp;<span class="ident" id="2158856"><a href="/runtime/traceback.go.html#2158706">f</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158861"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158866">.</span><span class="ident" id="2158867">argp</span>&nbsp;<span class="op" id="2158872">=</span>&nbsp;<span class="builtintype" id="2158874">uintptr</span><span class="op" id="2158881">(</span><span class="ident" id="2158882"><a href="/runtime/panic.go.html#2048341">deferArgs</a></span><span class="op" id="2158891">(</span><span class="ident" id="2158892"><a href="/runtime/traceback.go.html#2158452">d</a></span><span class="op" id="2158893">)</span><span class="op" id="2158894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158899"><a href="/runtime/traceback.go.html#2171218">setArgInfo</a></span><span class="op" id="2158909">(</span><span class="op" id="2158910">&amp;</span><span class="ident" id="2158911"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158916">,</span>&nbsp;<span class="ident" id="2158918"><a href="/runtime/traceback.go.html#2158706">f</a></span><span class="op" id="2158919">,</span>&nbsp;<span class="builtintype" id="2158921">true</span><span class="op" id="2158925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2158929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158933"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158938">.</span><span class="ident" id="2158939">continpc</span>&nbsp;<span class="op" id="2158948">=</span>&nbsp;<span class="ident" id="2158950"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2158955">.</span><span class="ident" id="2158956">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2158961">if</span>&nbsp;<span class="op" id="2158964">!</span><span class="ident" id="2158965"><a href="/runtime/traceback.go.html#2158360">callback</a></span><span class="op" id="2158973">(</span><span class="op" id="2158974">(</span><span class="op" id="2158975">*</span><span class="ident" id="2158976"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><span class="op" id="2158984">)</span><span class="op" id="2158985">(</span><span class="ident" id="2158986"><a href="/runtime/stubs.go.html#2136422">noescape</a></span><span class="op" id="2158994">(</span><span class="ident" id="2158995"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2159001">.</span><span class="ident" id="2159002">Pointer</span><span class="op" id="2159009">(</span><span class="op" id="2159010">&amp;</span><span class="ident" id="2159011"><a href="/runtime/traceback.go.html#2158432">frame</a></span><span class="op" id="2159016">)</span><span class="op" id="2159017">)</span><span class="op" id="2159018">)</span><span class="op" id="2159019">,</span>&nbsp;<span class="ident" id="2159021"><a href="/runtime/traceback.go.html#2158407">v</a></span><span class="op" id="2159022">)</span>&nbsp;<span class="op" id="2159024">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159029">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159041">}</span><br>
<span class="lineno"></span><span class="op" id="2159043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="2159046">//&nbsp;Generic&nbsp;traceback.&nbsp;&nbsp;Handles&nbsp;runtime&nbsp;stack&nbsp;prints&nbsp;(pcbuf&nbsp;==&nbsp;nil),</span><br>
<span class="lineno"></span><span class="comment" id="2159114">//&nbsp;the&nbsp;runtime.Callers&nbsp;function&nbsp;(pcbuf&nbsp;!=&nbsp;nil),&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;garbage</span><br>
<span class="lineno"></span><span class="comment" id="2159185">//&nbsp;collector&nbsp;(callback&nbsp;!=&nbsp;nil).&nbsp;&nbsp;A&nbsp;little&nbsp;clunky&nbsp;to&nbsp;merge&nbsp;these,&nbsp;but&nbsp;avoids</span><br>
<span class="lineno"></span><span class="comment" id="2159261">//&nbsp;duplicating&nbsp;the&nbsp;code&nbsp;and&nbsp;all&nbsp;its&nbsp;subtlety.</span><br>
<span class="lineno"></span><span class="keyword" id="2159307">func</span>&nbsp;<span class="ident" id="2159312">gentraceback</span><span class="op" id="2159324">(</span><span class="ident" id="2159325">pc0</span>&nbsp;<span class="builtintype" id="2159329">uintptr</span><span class="op" id="2159336">,</span>&nbsp;<span class="ident" id="2159338">sp0</span>&nbsp;<span class="builtintype" id="2159342">uintptr</span><span class="op" id="2159349">,</span>&nbsp;<span class="ident" id="2159351">lr0</span>&nbsp;<span class="builtintype" id="2159355">uintptr</span><span class="op" id="2159362">,</span>&nbsp;<span class="ident" id="2159364">gp</span>&nbsp;<span class="op" id="2159367">*</span><span class="ident" id="2159368"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2159369">,</span>&nbsp;<span class="ident" id="2159371">skip</span>&nbsp;<span class="builtintype" id="2159376">int</span><span class="op" id="2159379">,</span>&nbsp;<span class="ident" id="2159381">pcbuf</span>&nbsp;<span class="op" id="2159387">*</span><span class="builtintype" id="2159388">uintptr</span><span class="op" id="2159395">,</span>&nbsp;<span class="ident" id="2159397">max</span>&nbsp;<span class="builtintype" id="2159401">int</span><span class="op" id="2159404">,</span>&nbsp;<span class="ident" id="2159406">callback</span>&nbsp;<span class="keyword" id="2159415">func</span><span class="op" id="2159419">(</span><span class="op" id="2159420">*</span><span class="ident" id="2159421"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><span class="op" id="2159429">,</span>&nbsp;<span class="ident" id="2159431"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2159437">.</span><span class="ident" id="2159438">Pointer</span><span class="op" id="2159445">)</span>&nbsp;<span class="builtintype" id="2159447">bool</span><span class="op" id="2159451">,</span>&nbsp;<span class="ident" id="2159453">v</span>&nbsp;<span class="ident" id="2159455"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2159461">.</span><span class="ident" id="2159462">Pointer</span><span class="op" id="2159469">,</span>&nbsp;<span class="ident" id="2159471">flags</span>&nbsp;<span class="builtintype" id="2159477">uint</span><span class="op" id="2159481">)</span>&nbsp;<span class="builtintype" id="2159483">int</span>&nbsp;<span class="op" id="2159487">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159490">if</span>&nbsp;<span class="ident" id="2159493"><a href="/runtime/traceback.go.html#2157428">goexitPC</a></span>&nbsp;<span class="op" id="2159502">==</span>&nbsp;<span class="num" id="2159505">0</span>&nbsp;<span class="op" id="2159507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159511"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2159518">(</span><span class="string" id="2159519">&#34;gentraceback&nbsp;before&nbsp;goexitPC&nbsp;initialization&#34;</span><span class="op" id="2159564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159570">g</span>&nbsp;<span class="op" id="2159572">:=</span>&nbsp;<span class="ident" id="2159575"><a href="/runtime/stubs.go.html#2132021">getg</a></span><span class="op" id="2159579">(</span><span class="op" id="2159580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159583">if</span>&nbsp;<span class="ident" id="2159586"><a href="/runtime/traceback.go.html#2159570">g</a></span>&nbsp;<span class="op" id="2159588">==</span>&nbsp;<span class="ident" id="2159591"><a href="/runtime/traceback.go.html#2159364">gp</a></span>&nbsp;<span class="op" id="2159594">&amp;&amp;</span>&nbsp;<span class="ident" id="2159597"><a href="/runtime/traceback.go.html#2159570">g</a></span>&nbsp;<span class="op" id="2159599">==</span>&nbsp;<span class="ident" id="2159602"><a href="/runtime/traceback.go.html#2159570">g</a></span><span class="op" id="2159603">.</span><span class="ident" id="2159604">m</span><span class="op" id="2159605">.</span><span class="ident" id="2159606">curg</span>&nbsp;<span class="op" id="2159611">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159615">//&nbsp;The&nbsp;starting&nbsp;sp&nbsp;has&nbsp;been&nbsp;passed&nbsp;in&nbsp;as&nbsp;a&nbsp;uintptr,&nbsp;and&nbsp;the&nbsp;caller&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159688">//&nbsp;have&nbsp;other&nbsp;uintptr-typed&nbsp;stack&nbsp;references&nbsp;as&nbsp;well.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159744">//&nbsp;If&nbsp;during&nbsp;one&nbsp;of&nbsp;the&nbsp;calls&nbsp;that&nbsp;got&nbsp;us&nbsp;here&nbsp;or&nbsp;during&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159814">//&nbsp;callbacks&nbsp;below&nbsp;the&nbsp;stack&nbsp;must&nbsp;be&nbsp;grown,&nbsp;all&nbsp;these&nbsp;uintptr&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159889">//&nbsp;to&nbsp;the&nbsp;stack&nbsp;will&nbsp;not&nbsp;be&nbsp;updated,&nbsp;and&nbsp;gentraceback&nbsp;will&nbsp;continue</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2159959">//&nbsp;to&nbsp;inspect&nbsp;the&nbsp;old&nbsp;stack&nbsp;memory,&nbsp;which&nbsp;may&nbsp;no&nbsp;longer&nbsp;be&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160027">//&nbsp;Even&nbsp;if&nbsp;all&nbsp;the&nbsp;variables&nbsp;were&nbsp;updated&nbsp;correctly,&nbsp;it&nbsp;is&nbsp;not&nbsp;clear&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160103">//&nbsp;we&nbsp;want&nbsp;to&nbsp;expose&nbsp;a&nbsp;traceback&nbsp;that&nbsp;begins&nbsp;on&nbsp;one&nbsp;stack&nbsp;and&nbsp;ends</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160172">//&nbsp;on&nbsp;another&nbsp;stack.&nbsp;That&nbsp;could&nbsp;confuse&nbsp;callers&nbsp;quite&nbsp;a&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160235">//&nbsp;Instead,&nbsp;we&nbsp;require&nbsp;that&nbsp;gentraceback&nbsp;and&nbsp;any&nbsp;other&nbsp;function&nbsp;that</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160306">//&nbsp;accepts&nbsp;an&nbsp;sp&nbsp;for&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;(typically&nbsp;obtained&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160374">//&nbsp;calling&nbsp;getcallersp)&nbsp;must&nbsp;not&nbsp;run&nbsp;on&nbsp;that&nbsp;goroutine&#39;s&nbsp;stack&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2160443">//&nbsp;instead&nbsp;on&nbsp;the&nbsp;g0&nbsp;stack.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160473"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2160480">(</span><span class="string" id="2160481">&#34;gentraceback&nbsp;cannot&nbsp;trace&nbsp;user&nbsp;goroutine&nbsp;on&nbsp;its&nbsp;own&nbsp;stack&#34;</span><span class="op" id="2160540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160543">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160546">gotraceback</span>&nbsp;<span class="op" id="2160558">:=</span>&nbsp;<span class="ident" id="2160561"><a href="/runtime/stubs.go.html#2139804">gotraceback</a></span><span class="op" id="2160572">(</span><span class="ident" id="2160573">nil</span><span class="op" id="2160576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160579">if</span>&nbsp;<span class="ident" id="2160582"><a href="/runtime/traceback.go.html#2159325">pc0</a></span>&nbsp;<span class="op" id="2160586">==</span>&nbsp;<span class="op" id="2160589">^</span><span class="builtintype" id="2160590">uintptr</span><span class="op" id="2160597">(</span><span class="num" id="2160598">0</span><span class="op" id="2160599">)</span>&nbsp;<span class="op" id="2160601">&amp;&amp;</span>&nbsp;<span class="ident" id="2160604"><a href="/runtime/traceback.go.html#2159338">sp0</a></span>&nbsp;<span class="op" id="2160608">==</span>&nbsp;<span class="op" id="2160611">^</span><span class="builtintype" id="2160612">uintptr</span><span class="op" id="2160619">(</span><span class="num" id="2160620">0</span><span class="op" id="2160621">)</span>&nbsp;<span class="op" id="2160623">{</span>&nbsp;<span class="comment" id="2160625">//&nbsp;Signal&nbsp;to&nbsp;fetch&nbsp;saved&nbsp;values&nbsp;from&nbsp;gp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160668">if</span>&nbsp;<span class="ident" id="2160671"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2160673">.</span><span class="ident" id="2160674">syscallsp</span>&nbsp;<span class="op" id="2160684">!=</span>&nbsp;<span class="num" id="2160687">0</span>&nbsp;<span class="op" id="2160689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160694"><a href="/runtime/traceback.go.html#2159325">pc0</a></span>&nbsp;<span class="op" id="2160698">=</span>&nbsp;<span class="ident" id="2160700"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2160702">.</span><span class="ident" id="2160703">syscallpc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160716"><a href="/runtime/traceback.go.html#2159338">sp0</a></span>&nbsp;<span class="op" id="2160720">=</span>&nbsp;<span class="ident" id="2160722"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2160724">.</span><span class="ident" id="2160725">syscallsp</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160738">if</span>&nbsp;<span class="ident" id="2160741"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2160748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160754"><a href="/runtime/traceback.go.html#2159351">lr0</a></span>&nbsp;<span class="op" id="2160758">=</span>&nbsp;<span class="num" id="2160760">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160769">}</span>&nbsp;<span class="keyword" id="2160771">else</span>&nbsp;<span class="op" id="2160776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160781"><a href="/runtime/traceback.go.html#2159325">pc0</a></span>&nbsp;<span class="op" id="2160785">=</span>&nbsp;<span class="ident" id="2160787"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2160789">.</span><span class="ident" id="2160790">sched</span><span class="op" id="2160795">.</span><span class="ident" id="2160796">pc</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160802"><a href="/runtime/traceback.go.html#2159338">sp0</a></span>&nbsp;<span class="op" id="2160806">=</span>&nbsp;<span class="ident" id="2160808"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2160810">.</span><span class="ident" id="2160811">sched</span><span class="op" id="2160816">.</span><span class="ident" id="2160817">sp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160823">if</span>&nbsp;<span class="ident" id="2160826"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2160833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160839"><a href="/runtime/traceback.go.html#2159351">lr0</a></span>&nbsp;<span class="op" id="2160843">=</span>&nbsp;<span class="ident" id="2160845"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2160847">.</span><span class="ident" id="2160848">sched</span><span class="op" id="2160853">.</span><span class="ident" id="2160854">lr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160864">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160871">nprint</span>&nbsp;<span class="op" id="2160878">:=</span>&nbsp;<span class="num" id="2160881">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160884">var</span>&nbsp;<span class="ident" id="2160888">frame</span>&nbsp;<span class="ident" id="2160894"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160904"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2160909">.</span><span class="ident" id="2160910">pc</span>&nbsp;<span class="op" id="2160913">=</span>&nbsp;<span class="ident" id="2160915"><a href="/runtime/traceback.go.html#2159325">pc0</a></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160920"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2160925">.</span><span class="ident" id="2160926">sp</span>&nbsp;<span class="op" id="2160929">=</span>&nbsp;<span class="ident" id="2160931"><a href="/runtime/traceback.go.html#2159338">sp0</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160936">if</span>&nbsp;<span class="ident" id="2160939"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2160946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160950"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2160955">.</span><span class="ident" id="2160956">lr</span>&nbsp;<span class="op" id="2160959">=</span>&nbsp;<span class="ident" id="2160961"><a href="/runtime/traceback.go.html#2159351">lr0</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160969">waspanic</span>&nbsp;<span class="op" id="2160978">:=</span>&nbsp;<span class="builtintype" id="2160981">false</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160988">wasnewproc</span>&nbsp;<span class="op" id="2160999">:=</span>&nbsp;<span class="builtintype" id="2161002">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161009">printing</span>&nbsp;<span class="op" id="2161018">:=</span>&nbsp;<span class="ident" id="2161021"><a href="/runtime/traceback.go.html#2159381">pcbuf</a></span>&nbsp;<span class="op" id="2161027">==</span>&nbsp;<span class="ident" id="2161030">nil</span>&nbsp;<span class="op" id="2161034">&amp;&amp;</span>&nbsp;<span class="ident" id="2161037"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2161046">==</span>&nbsp;<span class="ident" id="2161049">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161054">_defer</span>&nbsp;<span class="op" id="2161061">:=</span>&nbsp;<span class="ident" id="2161064"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2161066">.</span><span class="ident" id="2161067">_defer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161076">for</span>&nbsp;<span class="ident" id="2161080"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2161087">!=</span>&nbsp;<span class="ident" id="2161090">nil</span>&nbsp;<span class="op" id="2161094">&amp;&amp;</span>&nbsp;<span class="builtintype" id="2161097">uintptr</span><span class="op" id="2161104">(</span><span class="ident" id="2161105"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2161111">.</span><span class="ident" id="2161112">argp</span><span class="op" id="2161116">)</span>&nbsp;<span class="op" id="2161118">==</span>&nbsp;<span class="ident" id="2161121"><a href="/runtime/stubs.go.html#2139836">_NoArgs</a></span>&nbsp;<span class="op" id="2161129">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161133"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2161140">=</span>&nbsp;<span class="ident" id="2161142"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2161148">.</span><span class="ident" id="2161149">link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161159">//&nbsp;If&nbsp;the&nbsp;PC&nbsp;is&nbsp;zero,&nbsp;it&#39;s&nbsp;likely&nbsp;a&nbsp;nil&nbsp;function&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161215">//&nbsp;Start&nbsp;in&nbsp;the&nbsp;caller&#39;s&nbsp;frame.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161248">if</span>&nbsp;<span class="ident" id="2161251"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161256">.</span><span class="ident" id="2161257">pc</span>&nbsp;<span class="op" id="2161260">==</span>&nbsp;<span class="num" id="2161263">0</span>&nbsp;<span class="op" id="2161265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161269">if</span>&nbsp;<span class="ident" id="2161272"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2161279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161284"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161289">.</span><span class="ident" id="2161290">pc</span>&nbsp;<span class="op" id="2161293">=</span>&nbsp;<span class="op" id="2161295">*</span><span class="op" id="2161296">(</span><span class="op" id="2161297">*</span><span class="builtintype" id="2161298">uintptr</span><span class="op" id="2161305">)</span><span class="op" id="2161306">(</span><span class="ident" id="2161307"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2161313">.</span><span class="ident" id="2161314">Pointer</span><span class="op" id="2161321">(</span><span class="ident" id="2161322"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161327">.</span><span class="ident" id="2161328">sp</span><span class="op" id="2161330">)</span><span class="op" id="2161331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161336"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161341">.</span><span class="ident" id="2161342">lr</span>&nbsp;<span class="op" id="2161345">=</span>&nbsp;<span class="num" id="2161347">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161351">}</span>&nbsp;<span class="keyword" id="2161353">else</span>&nbsp;<span class="op" id="2161358">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161363"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161368">.</span><span class="ident" id="2161369">pc</span>&nbsp;<span class="op" id="2161372">=</span>&nbsp;<span class="builtintype" id="2161374">uintptr</span><span class="op" id="2161381">(</span><span class="op" id="2161382">*</span><span class="op" id="2161383">(</span><span class="op" id="2161384">*</span><span class="ident" id="2161385"><a href="/runtime/arch_amd64.go.html#1873765">uintreg</a></span><span class="op" id="2161392">)</span><span class="op" id="2161393">(</span><span class="ident" id="2161394"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2161400">.</span><span class="ident" id="2161401">Pointer</span><span class="op" id="2161408">(</span><span class="ident" id="2161409"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161414">.</span><span class="ident" id="2161415">sp</span><span class="op" id="2161417">)</span><span class="op" id="2161418">)</span><span class="op" id="2161419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161424"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161429">.</span><span class="ident" id="2161430">sp</span>&nbsp;<span class="op" id="2161433">+=</span>&nbsp;<span class="ident" id="2161436"><a href="/runtime/stubs.go.html#2131599">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161453">f</span>&nbsp;<span class="op" id="2161455">:=</span>&nbsp;<span class="ident" id="2161458"><a href="/runtime/symtab.go.html#2146128">findfunc</a></span><span class="op" id="2161466">(</span><span class="ident" id="2161467"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161472">.</span><span class="ident" id="2161473">pc</span><span class="op" id="2161475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161478">if</span>&nbsp;<span class="ident" id="2161481"><a href="/runtime/traceback.go.html#2161453">f</a></span>&nbsp;<span class="op" id="2161483">==</span>&nbsp;<span class="ident" id="2161486">nil</span>&nbsp;<span class="op" id="2161490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161494">if</span>&nbsp;<span class="ident" id="2161497"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2161506">!=</span>&nbsp;<span class="ident" id="2161509">nil</span>&nbsp;<span class="op" id="2161513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2161518">print</span><span class="op" id="2161523">(</span><span class="string" id="2161524">&#34;runtime:&nbsp;unknown&nbsp;pc&nbsp;&#34;</span><span class="op" id="2161546">,</span>&nbsp;<span class="ident" id="2161548"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2161551">(</span><span class="ident" id="2161552"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161557">.</span><span class="ident" id="2161558">pc</span><span class="op" id="2161560">)</span><span class="op" id="2161561">,</span>&nbsp;<span class="string" id="2161563">&#34;\n&#34;</span><span class="op" id="2161567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161572"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2161579">(</span><span class="string" id="2161580">&#34;unknown&nbsp;pc&#34;</span><span class="op" id="2161592">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161600">return</span>&nbsp;<span class="num" id="2161607">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161613"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2161618">.</span><span class="ident" id="2161619">fn</span>&nbsp;<span class="op" id="2161622">=</span>&nbsp;<span class="ident" id="2161624"><a href="/runtime/traceback.go.html#2161453">f</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161628">n</span>&nbsp;<span class="op" id="2161630">:=</span>&nbsp;<span class="num" id="2161633">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161636">for</span>&nbsp;<span class="ident" id="2161640"><a href="/runtime/traceback.go.html#2161628">n</a></span>&nbsp;<span class="op" id="2161642">&lt;</span>&nbsp;<span class="ident" id="2161644"><a href="/runtime/traceback.go.html#2159397">max</a></span>&nbsp;<span class="op" id="2161648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161652">//&nbsp;Typically:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161668">//&nbsp;&nbsp;&nbsp;&nbsppc&nbsp;is&nbsp;the&nbsp;PC&nbsp;of&nbsp;the&nbsp;running&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161711">//&nbsp;&nbsp;&nbsp;&nbspsp&nbsp;is&nbsp;the&nbsp;stack&nbsp;pointer&nbsp;at&nbsp;that&nbsp;program&nbsp;counter.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161765">//&nbsp;&nbsp;&nbsp;&nbspfp&nbsp;is&nbsp;the&nbsp;frame&nbsp;pointer&nbsp;(caller&#39;s&nbsp;stack&nbsp;pointer)&nbsp;at&nbsp;that&nbsp;program&nbsp;counter,&nbsp;or&nbsp;nil&nbsp;if&nbsp;unknown.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161863">//&nbsp;&nbsp;&nbsp;&nbspstk&nbsp;is&nbsp;the&nbsp;stack&nbsp;containing&nbsp;sp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2161900">//&nbsp;&nbsp;&nbsp;&nbspThe&nbsp;caller&#39;s&nbsp;program&nbsp;counter&nbsp;is&nbsp;lr,&nbsp;unless&nbsp;lr&nbsp;is&nbsp;zero,&nbsp;in&nbsp;which&nbsp;case&nbsp;it&nbsp;is&nbsp;*(uintptr*)sp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161995"><a href="/runtime/traceback.go.html#2161453">f</a></span>&nbsp;<span class="op" id="2161997">=</span>&nbsp;<span class="ident" id="2161999"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162004">.</span><span class="ident" id="2162005">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162011">//&nbsp;Found&nbsp;an&nbsp;actual&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162042">//&nbsp;Derive&nbsp;frame&nbsp;pointer&nbsp;and&nbsp;link&nbsp;register.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162087">if</span>&nbsp;<span class="ident" id="2162090"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162095">.</span><span class="ident" id="2162096">fp</span>&nbsp;<span class="op" id="2162099">==</span>&nbsp;<span class="num" id="2162102">0</span>&nbsp;<span class="op" id="2162104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162109"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162114">.</span><span class="ident" id="2162115">fp</span>&nbsp;<span class="op" id="2162118">=</span>&nbsp;<span class="ident" id="2162120"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162125">.</span><span class="ident" id="2162126">sp</span>&nbsp;<span class="op" id="2162129">+</span>&nbsp;<span class="builtintype" id="2162131">uintptr</span><span class="op" id="2162138">(</span><span class="ident" id="2162139"><a href="/runtime/symtab.go.html#2148261">funcspdelta</a></span><span class="op" id="2162150">(</span><span class="ident" id="2162151"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2162152">,</span>&nbsp;<span class="ident" id="2162154"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162159">.</span><span class="ident" id="2162160">pc</span><span class="op" id="2162162">)</span><span class="op" id="2162163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162168">if</span>&nbsp;<span class="op" id="2162171">!</span><span class="ident" id="2162172"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2162179">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162185">//&nbsp;On&nbsp;x86,&nbsp;call&nbsp;instruction&nbsp;pushes&nbsp;return&nbsp;PC&nbsp;before&nbsp;entering&nbsp;new&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162264"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162269">.</span><span class="ident" id="2162270">fp</span>&nbsp;<span class="op" id="2162273">+=</span>&nbsp;<span class="ident" id="2162276"><a href="/runtime/stubs.go.html#2131599">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162295">var</span>&nbsp;<span class="ident" id="2162299">flr</span>&nbsp;<span class="op" id="2162303">*</span><span class="ident" id="2162304"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2182639">_func</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162312">if</span>&nbsp;<span class="ident" id="2162315"><a href="/runtime/traceback.go.html#2177025">topofstack</a></span><span class="op" id="2162325">(</span><span class="ident" id="2162326"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2162327">)</span>&nbsp;<span class="op" id="2162329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162334"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162339">.</span><span class="ident" id="2162340">lr</span>&nbsp;<span class="op" id="2162343">=</span>&nbsp;<span class="num" id="2162345">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162350"><a href="/runtime/traceback.go.html#2162299">flr</a></span>&nbsp;<span class="op" id="2162354">=</span>&nbsp;<span class="ident" id="2162356">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162362">}</span>&nbsp;<span class="keyword" id="2162364">else</span>&nbsp;<span class="keyword" id="2162369">if</span>&nbsp;<span class="ident" id="2162372"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2162379">&amp;&amp;</span>&nbsp;<span class="ident" id="2162382"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2162383">.</span><span class="ident" id="2162384">entry</span>&nbsp;<span class="op" id="2162390">==</span>&nbsp;<span class="ident" id="2162393"><a href="/runtime/traceback.go.html#2157449">jmpdeferPC</a></span>&nbsp;<span class="op" id="2162404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162409">//&nbsp;jmpdefer&nbsp;modifies&nbsp;SP/LR/PC&nbsp;non-atomically.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162458">//&nbsp;If&nbsp;a&nbsp;profiling&nbsp;interrupt&nbsp;arrives&nbsp;during&nbsp;jmpdefer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162514">//&nbsp;the&nbsp;stack&nbsp;unwind&nbsp;may&nbsp;see&nbsp;a&nbsp;mismatched&nbsp;register&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162571">//&nbsp;and&nbsp;get&nbsp;confused.&nbsp;Stop&nbsp;if&nbsp;we&nbsp;see&nbsp;PC&nbsp;within&nbsp;jmpdefer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162629">//&nbsp;to&nbsp;avoid&nbsp;that&nbsp;confusion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2162660">//&nbsp;See&nbsp;golang.org/issue/8153.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162693">if</span>&nbsp;<span class="ident" id="2162696"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2162705">!=</span>&nbsp;<span class="ident" id="2162708">nil</span>&nbsp;<span class="op" id="2162712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162718"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2162725">(</span><span class="string" id="2162726">&#34;traceback_arm:&nbsp;found&nbsp;jmpdefer&nbsp;when&nbsp;tracing&nbsp;with&nbsp;callback&#34;</span><span class="op" id="2162784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162794"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162799">.</span><span class="ident" id="2162800">lr</span>&nbsp;<span class="op" id="2162803">=</span>&nbsp;<span class="num" id="2162805">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162809">}</span>&nbsp;<span class="keyword" id="2162811">else</span>&nbsp;<span class="op" id="2162816">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162821">if</span>&nbsp;<span class="ident" id="2162824"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2162831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162837">if</span>&nbsp;<span class="ident" id="2162840"><a href="/runtime/traceback.go.html#2161628">n</a></span>&nbsp;<span class="op" id="2162842">==</span>&nbsp;<span class="num" id="2162845">0</span>&nbsp;<span class="op" id="2162847">&amp;&amp;</span>&nbsp;<span class="ident" id="2162850"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162855">.</span><span class="ident" id="2162856">sp</span>&nbsp;<span class="op" id="2162859">&lt;</span>&nbsp;<span class="ident" id="2162861"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162866">.</span><span class="ident" id="2162867">fp</span>&nbsp;<span class="op" id="2162870">||</span>&nbsp;<span class="ident" id="2162873"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162878">.</span><span class="ident" id="2162879">lr</span>&nbsp;<span class="op" id="2162882">==</span>&nbsp;<span class="num" id="2162885">0</span>&nbsp;<span class="op" id="2162887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162894"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162899">.</span><span class="ident" id="2162900">lr</span>&nbsp;<span class="op" id="2162903">=</span>&nbsp;<span class="op" id="2162905">*</span><span class="op" id="2162906">(</span><span class="op" id="2162907">*</span><span class="builtintype" id="2162908">uintptr</span><span class="op" id="2162915">)</span><span class="op" id="2162916">(</span><span class="ident" id="2162917"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2162923">.</span><span class="ident" id="2162924">Pointer</span><span class="op" id="2162931">(</span><span class="ident" id="2162932"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162937">.</span><span class="ident" id="2162938">sp</span><span class="op" id="2162940">)</span><span class="op" id="2162941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162952">}</span>&nbsp;<span class="keyword" id="2162954">else</span>&nbsp;<span class="op" id="2162959">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162965">if</span>&nbsp;<span class="ident" id="2162968"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162973">.</span><span class="ident" id="2162974">lr</span>&nbsp;<span class="op" id="2162977">==</span>&nbsp;<span class="num" id="2162980">0</span>&nbsp;<span class="op" id="2162982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162989"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2162994">.</span><span class="ident" id="2162995">lr</span>&nbsp;<span class="op" id="2162998">=</span>&nbsp;<span class="builtintype" id="2163000">uintptr</span><span class="op" id="2163007">(</span><span class="op" id="2163008">*</span><span class="op" id="2163009">(</span><span class="op" id="2163010">*</span><span class="ident" id="2163011"><a href="/runtime/arch_amd64.go.html#1873765">uintreg</a></span><span class="op" id="2163018">)</span><span class="op" id="2163019">(</span><span class="ident" id="2163020"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2163026">.</span><span class="ident" id="2163027">Pointer</span><span class="op" id="2163034">(</span><span class="ident" id="2163035"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2163040">.</span><span class="ident" id="2163041">fp</span>&nbsp;<span class="op" id="2163044">-</span>&nbsp;<span class="ident" id="2163046"><a href="/runtime/stubs.go.html#2131599">regSize</a></span><span class="op" id="2163053">)</span><span class="op" id="2163054">)</span><span class="op" id="2163055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2163071"><a href="/runtime/traceback.go.html#2162299">flr</a></span>&nbsp;<span class="op" id="2163075">=</span>&nbsp;<span class="ident" id="2163077"><a href="/runtime/symtab.go.html#2146128">findfunc</a></span><span class="op" id="2163085">(</span><span class="ident" id="2163086"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2163091">.</span><span class="ident" id="2163092">lr</span><span class="op" id="2163094">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163099">if</span>&nbsp;<span class="ident" id="2163102"><a href="/runtime/traceback.go.html#2162299">flr</a></span>&nbsp;<span class="op" id="2163106">==</span>&nbsp;<span class="ident" id="2163109">nil</span>&nbsp;<span class="op" id="2163113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163119">//&nbsp;This&nbsp;happens&nbsp;if&nbsp;you&nbsp;get&nbsp;a&nbsp;profiling&nbsp;interrupt&nbsp;at&nbsp;just&nbsp;the&nbsp;wrong&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163196">//&nbsp;In&nbsp;that&nbsp;context&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163245">//&nbsp;But&nbsp;if&nbsp;callback&nbsp;is&nbsp;set,&nbsp;we&#39;re&nbsp;doing&nbsp;a&nbsp;garbage&nbsp;collection&nbsp;and&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163318">//&nbsp;get&nbsp;everything,&nbsp;so&nbsp;crash&nbsp;loudly.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163358">if</span>&nbsp;<span class="ident" id="2163361"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2163370">!=</span>&nbsp;<span class="ident" id="2163373">nil</span>&nbsp;<span class="op" id="2163377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2163384">print</span><span class="op" id="2163389">(</span><span class="string" id="2163390">&#34;runtime:&nbsp;unexpected&nbsp;return&nbsp;pc&nbsp;for&nbsp;&#34;</span><span class="op" id="2163426">,</span>&nbsp;<span class="ident" id="2163428"><a href="/runtime/symtab.go.html#2147632">gofuncname</a></span><span class="op" id="2163438">(</span><span class="ident" id="2163439"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2163440">)</span><span class="op" id="2163441">,</span>&nbsp;<span class="string" id="2163443">&#34;&nbsp;called&nbsp;from&nbsp;&#34;</span><span class="op" id="2163458">,</span>&nbsp;<span class="ident" id="2163460"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2163463">(</span><span class="ident" id="2163464"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2163469">.</span><span class="ident" id="2163470">lr</span><span class="op" id="2163472">)</span><span class="op" id="2163473">,</span>&nbsp;<span class="string" id="2163475">&#34;\n&#34;</span><span class="op" id="2163479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2163486"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2163493">(</span><span class="string" id="2163494">&#34;unknown&nbsp;caller&nbsp;pc&#34;</span><span class="op" id="2163513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163524">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2163533"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2163538">.</span><span class="ident" id="2163539">varp</span>&nbsp;<span class="op" id="2163544">=</span>&nbsp;<span class="ident" id="2163546"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2163551">.</span><span class="ident" id="2163552">fp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163557">if</span>&nbsp;<span class="op" id="2163560">!</span><span class="ident" id="2163561"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2163568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163573">//&nbsp;On&nbsp;x86,&nbsp;call&nbsp;instruction&nbsp;pushes&nbsp;return&nbsp;PC&nbsp;before&nbsp;entering&nbsp;new&nbsp;function.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2163651"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2163656">.</span><span class="ident" id="2163657">varp</span>&nbsp;<span class="op" id="2163662">-=</span>&nbsp;<span class="ident" id="2163665"><a href="/runtime/stubs.go.html#2131599">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163680">//&nbsp;Derive&nbsp;size&nbsp;of&nbsp;arguments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163711">//&nbsp;Most&nbsp;functions&nbsp;have&nbsp;a&nbsp;fixed-size&nbsp;argument&nbsp;block,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163765">//&nbsp;so&nbsp;we&nbsp;can&nbsp;use&nbsp;metadata&nbsp;about&nbsp;the&nbsp;function&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163815">//&nbsp;Not&nbsp;all,&nbsp;though:&nbsp;there&nbsp;are&nbsp;some&nbsp;variadic&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163871">//&nbsp;in&nbsp;package&nbsp;runtime&nbsp;and&nbsp;reflect,&nbsp;and&nbsp;for&nbsp;those&nbsp;we&nbsp;use&nbsp;call-specific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2163943">//&nbsp;metadata&nbsp;recorded&nbsp;by&nbsp;f&#39;s&nbsp;caller.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163981">if</span>&nbsp;<span class="ident" id="2163984"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2163993">!=</span>&nbsp;<span class="ident" id="2163996">nil</span>&nbsp;<span class="op" id="2164000">||</span>&nbsp;<span class="ident" id="2164003"><a href="/runtime/traceback.go.html#2161009">printing</a></span>&nbsp;<span class="op" id="2164012">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2164017"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164022">.</span><span class="ident" id="2164023">argp</span>&nbsp;<span class="op" id="2164028">=</span>&nbsp;<span class="ident" id="2164030"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164035">.</span><span class="ident" id="2164036">fp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2164042">if</span>&nbsp;<span class="ident" id="2164045"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2164052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2164058"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164063">.</span><span class="ident" id="2164064">argp</span>&nbsp;<span class="op" id="2164069">+=</span>&nbsp;<span class="ident" id="2164072"><a href="/runtime/stubs.go.html#2131510">ptrSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2164083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2164088"><a href="/runtime/traceback.go.html#2171218">setArgInfo</a></span><span class="op" id="2164098">(</span><span class="op" id="2164099">&amp;</span><span class="ident" id="2164100"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164105">,</span>&nbsp;<span class="ident" id="2164107"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2164108">,</span>&nbsp;<span class="ident" id="2164110"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2164119">!=</span>&nbsp;<span class="ident" id="2164122">nil</span><span class="op" id="2164125">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2164129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164134">//&nbsp;Determine&nbsp;function&nbsp;SP&nbsp;where&nbsp;deferproc&nbsp;would&nbsp;find&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2164203">var</span>&nbsp;<span class="ident" id="2164207">sparg</span>&nbsp;<span class="builtintype" id="2164213">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2164223">if</span>&nbsp;<span class="ident" id="2164226"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2164233">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164238">//&nbsp;On&nbsp;link&nbsp;register&nbsp;architectures,&nbsp;that&#39;s&nbsp;the&nbsp;standard&nbsp;bottom-of-stack&nbsp;plus&nbsp;1&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164324">//&nbsp;for&nbsp;the&nbsp;saved&nbsp;LR.&nbsp;If&nbsp;the&nbsp;previous&nbsp;frame&nbsp;was&nbsp;a&nbsp;direct&nbsp;call&nbsp;to&nbsp;newproc/deferproc,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164410">//&nbsp;however,&nbsp;the&nbsp;SP&nbsp;is&nbsp;three&nbsp;words&nbsp;lower&nbsp;than&nbsp;normal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164466">//&nbsp;If&nbsp;the&nbsp;function&nbsp;has&nbsp;no&nbsp;frame&nbsp;at&nbsp;all&nbsp;-&nbsp;perhaps&nbsp;it&nbsp;just&nbsp;started,&nbsp;or&nbsp;perhaps</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164546">//&nbsp;it&nbsp;is&nbsp;a&nbsp;leaf&nbsp;with&nbsp;no&nbsp;local&nbsp;variables&nbsp;-&nbsp;then&nbsp;we&nbsp;cannot&nbsp;possibly&nbsp;find&nbsp;its</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164624">//&nbsp;SP&nbsp;in&nbsp;a&nbsp;defer,&nbsp;and&nbsp;we&nbsp;might&nbsp;confuse&nbsp;its&nbsp;SP&nbsp;for&nbsp;its&nbsp;caller&#39;s&nbsp;SP,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164697">//&nbsp;leave&nbsp;sparg=0&nbsp;in&nbsp;that&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2164731">if</span>&nbsp;<span class="ident" id="2164734"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164739">.</span><span class="ident" id="2164740">fp</span>&nbsp;<span class="op" id="2164743">!=</span>&nbsp;<span class="ident" id="2164746"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164751">.</span><span class="ident" id="2164752">sp</span>&nbsp;<span class="op" id="2164755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2164761"><a href="/runtime/traceback.go.html#2164207">sparg</a></span>&nbsp;<span class="op" id="2164767">=</span>&nbsp;<span class="ident" id="2164769"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2164774">.</span><span class="ident" id="2164775">sp</span>&nbsp;<span class="op" id="2164778">+</span>&nbsp;<span class="ident" id="2164780"><a href="/runtime/stubs.go.html#2131599">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2164792">if</span>&nbsp;<span class="ident" id="2164795"><a href="/runtime/traceback.go.html#2160988">wasnewproc</a></span>&nbsp;<span class="op" id="2164806">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2164813"><a href="/runtime/traceback.go.html#2164207">sparg</a></span>&nbsp;<span class="op" id="2164819">+=</span>&nbsp;<span class="num" id="2164822">3</span>&nbsp;<span class="op" id="2164824">*</span>&nbsp;<span class="ident" id="2164826"><a href="/runtime/stubs.go.html#2131599">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2164838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2164843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2164847">}</span>&nbsp;<span class="keyword" id="2164849">else</span>&nbsp;<span class="op" id="2164854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164859">//&nbsp;On&nbsp;x86&nbsp;that&#39;s&nbsp;the&nbsp;standard&nbsp;bottom-of-stack,&nbsp;so&nbsp;SP&nbsp;exactly.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2164924">//&nbsp;If&nbsp;the&nbsp;previous&nbsp;frame&nbsp;was&nbsp;a&nbsp;direct&nbsp;call&nbsp;to&nbsp;newproc/deferproc,&nbsp;however,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165001">//&nbsp;the&nbsp;SP&nbsp;is&nbsp;two&nbsp;words&nbsp;lower&nbsp;than&nbsp;normal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2165046"><a href="/runtime/traceback.go.html#2164207">sparg</a></span>&nbsp;<span class="op" id="2165052">=</span>&nbsp;<span class="ident" id="2165054"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2165059">.</span><span class="ident" id="2165060">sp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2165066">if</span>&nbsp;<span class="ident" id="2165069"><a href="/runtime/traceback.go.html#2160988">wasnewproc</a></span>&nbsp;<span class="op" id="2165080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2165086"><a href="/runtime/traceback.go.html#2164207">sparg</a></span>&nbsp;<span class="op" id="2165092">+=</span>&nbsp;<span class="num" id="2165095">2</span>&nbsp;<span class="op" id="2165097">*</span>&nbsp;<span class="ident" id="2165099"><a href="/runtime/stubs.go.html#2131510">ptrSize</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2165110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2165114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165119">//&nbsp;Determine&nbsp;frame&#39;s&nbsp;&#39;continuation&nbsp;PC&#39;,&nbsp;where&nbsp;it&nbsp;can&nbsp;continue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165184">//&nbsp;Normally&nbsp;this&nbsp;is&nbsp;the&nbsp;return&nbsp;address&nbsp;on&nbsp;the&nbsp;stack,&nbsp;but&nbsp;if&nbsp;sigpanic</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165255">//&nbsp;is&nbsp;immediately&nbsp;below&nbsp;this&nbsp;function&nbsp;on&nbsp;the&nbsp;stack,&nbsp;then&nbsp;the&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165324">//&nbsp;stopped&nbsp;executing&nbsp;due&nbsp;to&nbsp;a&nbsp;trap,&nbsp;and&nbsp;frame.pc&nbsp;is&nbsp;probably&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165391">//&nbsp;a&nbsp;safe&nbsp;point&nbsp;for&nbsp;looking&nbsp;up&nbsp;liveness&nbsp;information.&nbsp;In&nbsp;this&nbsp;panicking&nbsp;case,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165470">//&nbsp;the&nbsp;function&nbsp;either&nbsp;doesn&#39;t&nbsp;return&nbsp;at&nbsp;all&nbsp;(if&nbsp;it&nbsp;has&nbsp;no&nbsp;defers&nbsp;or&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165548">//&nbsp;defers&nbsp;do&nbsp;not&nbsp;recover)&nbsp;or&nbsp;it&nbsp;returns&nbsp;from&nbsp;one&nbsp;of&nbsp;the&nbsp;calls&nbsp;to</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165615">//&nbsp;deferproc&nbsp;a&nbsp;second&nbsp;time&nbsp;(if&nbsp;the&nbsp;corresponding&nbsp;deferred&nbsp;func&nbsp;recovers).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165691">//&nbsp;It&nbsp;suffices&nbsp;to&nbsp;assume&nbsp;that&nbsp;the&nbsp;most&nbsp;recent&nbsp;deferproc&nbsp;is&nbsp;the&nbsp;one&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2165765">//&nbsp;returns;&nbsp;everything&nbsp;live&nbsp;at&nbsp;earlier&nbsp;deferprocs&nbsp;is&nbsp;still&nbsp;live&nbsp;at&nbsp;that&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2165844"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2165849">.</span><span class="ident" id="2165850">continpc</span>&nbsp;<span class="op" id="2165859">=</span>&nbsp;<span class="ident" id="2165861"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2165866">.</span><span class="ident" id="2165867">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2165872">if</span>&nbsp;<span class="ident" id="2165875"><a href="/runtime/traceback.go.html#2160969">waspanic</a></span>&nbsp;<span class="op" id="2165884">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2165889">if</span>&nbsp;<span class="ident" id="2165892"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2165899">!=</span>&nbsp;<span class="ident" id="2165902">nil</span>&nbsp;<span class="op" id="2165906">&amp;&amp;</span>&nbsp;<span class="ident" id="2165909"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2165915">.</span><span class="ident" id="2165916">argp</span>&nbsp;<span class="op" id="2165921">==</span>&nbsp;<span class="ident" id="2165924"><a href="/runtime/traceback.go.html#2164207">sparg</a></span>&nbsp;<span class="op" id="2165930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2165936"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2165941">.</span><span class="ident" id="2165942">continpc</span>&nbsp;<span class="op" id="2165951">=</span>&nbsp;<span class="ident" id="2165953"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2165959">.</span><span class="ident" id="2165960">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2165966">}</span>&nbsp;<span class="keyword" id="2165968">else</span>&nbsp;<span class="op" id="2165973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2165979"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2165984">.</span><span class="ident" id="2165985">continpc</span>&nbsp;<span class="op" id="2165994">=</span>&nbsp;<span class="num" id="2165996">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166001">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2166010">//&nbsp;Unwind&nbsp;our&nbsp;local&nbsp;defer&nbsp;stack&nbsp;past&nbsp;this&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166061">for</span>&nbsp;<span class="ident" id="2166065"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2166072">!=</span>&nbsp;<span class="ident" id="2166075">nil</span>&nbsp;<span class="op" id="2166079">&amp;&amp;</span>&nbsp;<span class="op" id="2166082">(</span><span class="ident" id="2166083"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2166089">.</span><span class="ident" id="2166090">argp</span>&nbsp;<span class="op" id="2166095">==</span>&nbsp;<span class="ident" id="2166098"><a href="/runtime/traceback.go.html#2164207">sparg</a></span>&nbsp;<span class="op" id="2166104">||</span>&nbsp;<span class="ident" id="2166107"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2166113">.</span><span class="ident" id="2166114">argp</span>&nbsp;<span class="op" id="2166119">==</span>&nbsp;<span class="ident" id="2166122"><a href="/runtime/stubs.go.html#2139836">_NoArgs</a></span><span class="op" id="2166129">)</span>&nbsp;<span class="op" id="2166131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2166136"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2166143">=</span>&nbsp;<span class="ident" id="2166145"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2166151">.</span><span class="ident" id="2166152">link</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166164">if</span>&nbsp;<span class="ident" id="2166167"><a href="/runtime/traceback.go.html#2159371">skip</a></span>&nbsp;<span class="op" id="2166172">&gt;</span>&nbsp;<span class="num" id="2166174">0</span>&nbsp;<span class="op" id="2166176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2166181"><a href="/runtime/traceback.go.html#2159371">skip</a></span><span class="op" id="2166185">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166191">goto</span>&nbsp;<span class="ident" id="2166196">skipped</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166211">if</span>&nbsp;<span class="ident" id="2166214"><a href="/runtime/traceback.go.html#2159381">pcbuf</a></span>&nbsp;<span class="op" id="2166220">!=</span>&nbsp;<span class="ident" id="2166223">nil</span>&nbsp;<span class="op" id="2166227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166232">(</span><span class="op" id="2166233">*</span><span class="op" id="2166234">[</span><span class="num" id="2166235">1</span>&nbsp;<span class="op" id="2166237">&lt;&lt;</span>&nbsp;<span class="num" id="2166240">20</span><span class="op" id="2166242">]</span><span class="builtintype" id="2166243">uintptr</span><span class="op" id="2166250">)</span><span class="op" id="2166251">(</span><span class="ident" id="2166252"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2166258">.</span><span class="ident" id="2166259">Pointer</span><span class="op" id="2166266">(</span><span class="ident" id="2166267"><a href="/runtime/traceback.go.html#2159381">pcbuf</a></span><span class="op" id="2166272">)</span><span class="op" id="2166273">)</span><span class="op" id="2166274">[</span><span class="ident" id="2166275"><a href="/runtime/traceback.go.html#2161628">n</a></span><span class="op" id="2166276">]</span>&nbsp;<span class="op" id="2166278">=</span>&nbsp;<span class="ident" id="2166280"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2166285">.</span><span class="ident" id="2166286">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166291">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166295">if</span>&nbsp;<span class="ident" id="2166298"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2166307">!=</span>&nbsp;<span class="ident" id="2166310">nil</span>&nbsp;<span class="op" id="2166314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166319">if</span>&nbsp;<span class="op" id="2166322">!</span><span class="ident" id="2166323"><a href="/runtime/traceback.go.html#2159406">callback</a></span><span class="op" id="2166331">(</span><span class="op" id="2166332">(</span><span class="op" id="2166333">*</span><span class="ident" id="2166334"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><span class="op" id="2166342">)</span><span class="op" id="2166343">(</span><span class="ident" id="2166344"><a href="/runtime/stubs.go.html#2136422">noescape</a></span><span class="op" id="2166352">(</span><span class="ident" id="2166353"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2166359">.</span><span class="ident" id="2166360">Pointer</span><span class="op" id="2166367">(</span><span class="op" id="2166368">&amp;</span><span class="ident" id="2166369"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2166374">)</span><span class="op" id="2166375">)</span><span class="op" id="2166376">)</span><span class="op" id="2166377">,</span>&nbsp;<span class="ident" id="2166379"><a href="/runtime/traceback.go.html#2159453">v</a></span><span class="op" id="2166380">)</span>&nbsp;<span class="op" id="2166382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166388">return</span>&nbsp;<span class="ident" id="2166395"><a href="/runtime/traceback.go.html#2161628">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166404">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166408">if</span>&nbsp;<span class="ident" id="2166411"><a href="/runtime/traceback.go.html#2161009">printing</a></span>&nbsp;<span class="op" id="2166420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166425">if</span>&nbsp;<span class="op" id="2166428">(</span><span class="ident" id="2166429"><a href="/runtime/traceback.go.html#2159471">flags</a></span><span class="op" id="2166434">&amp;</span><span class="ident" id="2166435"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184194">_TraceRuntimeFrames</a></span><span class="op" id="2166454">)</span>&nbsp;<span class="op" id="2166456">!=</span>&nbsp;<span class="num" id="2166459">0</span>&nbsp;<span class="op" id="2166461">||</span>&nbsp;<span class="ident" id="2166464"><a href="/runtime/traceback.go.html#2174094">showframe</a></span><span class="op" id="2166473">(</span><span class="ident" id="2166474"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2166475">,</span>&nbsp;<span class="ident" id="2166477"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2166479">)</span>&nbsp;<span class="op" id="2166481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2166487">//&nbsp;Print&nbsp;during&nbsp;crash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2166514">//&nbsp;&nbsp;&nbsp;&nbspmain(0x1,&nbsp;0x2,&nbsp;0x3)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2166541">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp/home/rsc/go/src/runtime/x.go:23&nbsp;+0xf</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2166587">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2166594">tracepc</span>&nbsp;<span class="op" id="2166602">:=</span>&nbsp;<span class="ident" id="2166605"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2166610">.</span><span class="ident" id="2166611">pc</span>&nbsp;<span class="comment" id="2166614">//&nbsp;back&nbsp;up&nbsp;to&nbsp;CALL&nbsp;instruction&nbsp;for&nbsp;funcline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166663">if</span>&nbsp;<span class="op" id="2166666">(</span><span class="ident" id="2166667"><a href="/runtime/traceback.go.html#2161628">n</a></span>&nbsp;<span class="op" id="2166669">&gt;</span>&nbsp;<span class="num" id="2166671">0</span>&nbsp;<span class="op" id="2166673">||</span>&nbsp;<span class="ident" id="2166676"><a href="/runtime/traceback.go.html#2159471">flags</a></span><span class="op" id="2166681">&amp;</span><span class="ident" id="2166682"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184224">_TraceTrap</a></span>&nbsp;<span class="op" id="2166693">==</span>&nbsp;<span class="num" id="2166696">0</span><span class="op" id="2166697">)</span>&nbsp;<span class="op" id="2166699">&amp;&amp;</span>&nbsp;<span class="ident" id="2166702"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2166707">.</span><span class="ident" id="2166708">pc</span>&nbsp;<span class="op" id="2166711">&gt;</span>&nbsp;<span class="ident" id="2166713"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2166714">.</span><span class="ident" id="2166715">entry</span>&nbsp;<span class="op" id="2166721">&amp;&amp;</span>&nbsp;<span class="op" id="2166724">!</span><span class="ident" id="2166725"><a href="/runtime/traceback.go.html#2160969">waspanic</a></span>&nbsp;<span class="op" id="2166734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2166741"><a href="/runtime/traceback.go.html#2166594">tracepc</a></span><span class="op" id="2166748">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166755">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2166761">print</span><span class="op" id="2166766">(</span><span class="ident" id="2166767"><a href="/runtime/symtab.go.html#2147632">gofuncname</a></span><span class="op" id="2166777">(</span><span class="ident" id="2166778"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2166779">)</span><span class="op" id="2166780">,</span>&nbsp;<span class="string" id="2166782">&#34;(&#34;</span><span class="op" id="2166785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2166791">argp</span>&nbsp;<span class="op" id="2166796">:=</span>&nbsp;<span class="op" id="2166799">(</span><span class="op" id="2166800">*</span><span class="op" id="2166801">[</span><span class="num" id="2166802">100</span><span class="op" id="2166805">]</span><span class="builtintype" id="2166806">uintptr</span><span class="op" id="2166813">)</span><span class="op" id="2166814">(</span><span class="ident" id="2166815"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2166821">.</span><span class="ident" id="2166822">Pointer</span><span class="op" id="2166829">(</span><span class="ident" id="2166830"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2166835">.</span><span class="ident" id="2166836">argp</span><span class="op" id="2166840">)</span><span class="op" id="2166841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166847">for</span>&nbsp;<span class="ident" id="2166851">i</span>&nbsp;<span class="op" id="2166853">:=</span>&nbsp;<span class="builtintype" id="2166856">uintptr</span><span class="op" id="2166863">(</span><span class="num" id="2166864">0</span><span class="op" id="2166865">)</span><span class="op" id="2166866">;</span>&nbsp;<span class="ident" id="2166868"><a href="/runtime/traceback.go.html#2166851">i</a></span>&nbsp;<span class="op" id="2166870">&lt;</span>&nbsp;<span class="ident" id="2166872"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2166877">.</span><span class="ident" id="2166878">arglen</span><span class="op" id="2166884">/</span><span class="ident" id="2166885"><a href="/runtime/stubs.go.html#2131510">ptrSize</a></span><span class="op" id="2166892">;</span>&nbsp;<span class="ident" id="2166894"><a href="/runtime/traceback.go.html#2166851">i</a></span><span class="op" id="2166895">++</span>&nbsp;<span class="op" id="2166898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166905">if</span>&nbsp;<span class="ident" id="2166908"><a href="/runtime/traceback.go.html#2166851">i</a></span>&nbsp;<span class="op" id="2166910">&gt;=</span>&nbsp;<span class="num" id="2166913">10</span>&nbsp;<span class="op" id="2166916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2166924">print</span><span class="op" id="2166929">(</span><span class="string" id="2166930">&#34;,&nbsp;...&#34;</span><span class="op" id="2166937">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166945">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2166963">if</span>&nbsp;<span class="ident" id="2166966"><a href="/runtime/traceback.go.html#2166851">i</a></span>&nbsp;<span class="op" id="2166968">!=</span>&nbsp;<span class="num" id="2166971">0</span>&nbsp;<span class="op" id="2166973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2166981">print</span><span class="op" id="2166986">(</span><span class="string" id="2166987">&#34;,&nbsp;&#34;</span><span class="op" id="2166991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2166998">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2167005">print</span><span class="op" id="2167010">(</span><span class="ident" id="2167011"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2167014">(</span><span class="ident" id="2167015"><a href="/runtime/traceback.go.html#2166791">argp</a></span><span class="op" id="2167019">[</span><span class="ident" id="2167020"><a href="/runtime/traceback.go.html#2166851">i</a></span><span class="op" id="2167021">]</span><span class="op" id="2167022">)</span><span class="op" id="2167023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2167035">print</span><span class="op" id="2167040">(</span><span class="string" id="2167041">&#34;)\n&#34;</span><span class="op" id="2167046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167052">var</span>&nbsp;<span class="ident" id="2167056">file</span>&nbsp;<span class="builtintype" id="2167061">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167072">line</span>&nbsp;<span class="op" id="2167077">:=</span>&nbsp;<span class="ident" id="2167080"><a href="/runtime/symtab.go.html#2148151">funcline</a></span><span class="op" id="2167088">(</span><span class="ident" id="2167089"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2167090">,</span>&nbsp;<span class="ident" id="2167092"><a href="/runtime/traceback.go.html#2166594">tracepc</a></span><span class="op" id="2167099">,</span>&nbsp;<span class="op" id="2167101">&amp;</span><span class="ident" id="2167102"><a href="/runtime/traceback.go.html#2167056">file</a></span><span class="op" id="2167106">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2167112">print</span><span class="op" id="2167117">(</span><span class="string" id="2167118">&#34;\t&#34;</span><span class="op" id="2167122">,</span>&nbsp;<span class="ident" id="2167124"><a href="/runtime/traceback.go.html#2167056">file</a></span><span class="op" id="2167128">,</span>&nbsp;<span class="string" id="2167130">&#34;:&#34;</span><span class="op" id="2167133">,</span>&nbsp;<span class="ident" id="2167135"><a href="/runtime/traceback.go.html#2167072">line</a></span><span class="op" id="2167139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167145">if</span>&nbsp;<span class="ident" id="2167148"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167153">.</span><span class="ident" id="2167154">pc</span>&nbsp;<span class="op" id="2167157">&gt;</span>&nbsp;<span class="ident" id="2167159"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2167160">.</span><span class="ident" id="2167161">entry</span>&nbsp;<span class="op" id="2167167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2167174">print</span><span class="op" id="2167179">(</span><span class="string" id="2167180">&#34;&nbsp;+&#34;</span><span class="op" id="2167184">,</span>&nbsp;<span class="ident" id="2167186"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2167189">(</span><span class="ident" id="2167190"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167195">.</span><span class="ident" id="2167196">pc</span><span class="op" id="2167198">-</span><span class="ident" id="2167199"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2167200">.</span><span class="ident" id="2167201">entry</span><span class="op" id="2167206">)</span><span class="op" id="2167207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167219">if</span>&nbsp;<span class="ident" id="2167222"><a href="/runtime/traceback.go.html#2159570">g</a></span><span class="op" id="2167223">.</span><span class="ident" id="2167224">m</span><span class="op" id="2167225">.</span><span class="ident" id="2167226">throwing</span>&nbsp;<span class="op" id="2167235">&gt;</span>&nbsp;<span class="num" id="2167237">0</span>&nbsp;<span class="op" id="2167239">&amp;&amp;</span>&nbsp;<span class="ident" id="2167242"><a href="/runtime/traceback.go.html#2159364">gp</a></span>&nbsp;<span class="op" id="2167245">==</span>&nbsp;<span class="ident" id="2167248"><a href="/runtime/traceback.go.html#2159570">g</a></span><span class="op" id="2167249">.</span><span class="ident" id="2167250">m</span><span class="op" id="2167251">.</span><span class="ident" id="2167252">curg</span>&nbsp;<span class="op" id="2167257">||</span>&nbsp;<span class="ident" id="2167260"><a href="/runtime/traceback.go.html#2160546">gotraceback</a></span>&nbsp;<span class="op" id="2167272">&gt;=</span>&nbsp;<span class="num" id="2167275">2</span>&nbsp;<span class="op" id="2167277">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2167284">print</span><span class="op" id="2167289">(</span><span class="string" id="2167290">&#34;&nbsp;fp=&#34;</span><span class="op" id="2167296">,</span>&nbsp;<span class="ident" id="2167298"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2167301">(</span><span class="ident" id="2167302"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167307">.</span><span class="ident" id="2167308">fp</span><span class="op" id="2167310">)</span><span class="op" id="2167311">,</span>&nbsp;<span class="string" id="2167313">&#34;&nbsp;sp=&#34;</span><span class="op" id="2167319">,</span>&nbsp;<span class="ident" id="2167321"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2167324">(</span><span class="ident" id="2167325"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167330">.</span><span class="ident" id="2167331">sp</span><span class="op" id="2167333">)</span><span class="op" id="2167334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2167346">print</span><span class="op" id="2167351">(</span><span class="string" id="2167352">&#34;\n&#34;</span><span class="op" id="2167356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167362"><a href="/runtime/traceback.go.html#2160871">nprint</a></span><span class="op" id="2167368">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167374">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167382"><a href="/runtime/traceback.go.html#2161628">n</a></span><span class="op" id="2167383">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167388">skipped</span><span class="op" id="2167395">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167399"><a href="/runtime/traceback.go.html#2160969">waspanic</a></span>&nbsp;<span class="op" id="2167408">=</span>&nbsp;<span class="ident" id="2167410"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2167411">.</span><span class="ident" id="2167412">entry</span>&nbsp;<span class="op" id="2167418">==</span>&nbsp;<span class="ident" id="2167421"><a href="/runtime/traceback.go.html#2157575">sigpanicPC</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167434"><a href="/runtime/traceback.go.html#2160988">wasnewproc</a></span>&nbsp;<span class="op" id="2167445">=</span>&nbsp;<span class="ident" id="2167447"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2167448">.</span><span class="ident" id="2167449">entry</span>&nbsp;<span class="op" id="2167455">==</span>&nbsp;<span class="ident" id="2167458"><a href="/runtime/traceback.go.html#2157533">newprocPC</a></span>&nbsp;<span class="op" id="2167468">||</span>&nbsp;<span class="ident" id="2167471"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2167472">.</span><span class="ident" id="2167473">entry</span>&nbsp;<span class="op" id="2167479">==</span>&nbsp;<span class="ident" id="2167482"><a href="/runtime/traceback.go.html#2157407">deferprocPC</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2167497">//&nbsp;Do&nbsp;not&nbsp;unwind&nbsp;past&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167546">if</span>&nbsp;<span class="ident" id="2167549"><a href="/runtime/traceback.go.html#2162299">flr</a></span>&nbsp;<span class="op" id="2167553">==</span>&nbsp;<span class="ident" id="2167556">nil</span>&nbsp;<span class="op" id="2167560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167565">break</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2167578">//&nbsp;Unwind&nbsp;to&nbsp;next&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167605"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167610">.</span><span class="ident" id="2167611">fn</span>&nbsp;<span class="op" id="2167614">=</span>&nbsp;<span class="ident" id="2167616"><a href="/runtime/traceback.go.html#2162299">flr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167622"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167627">.</span><span class="ident" id="2167628">pc</span>&nbsp;<span class="op" id="2167631">=</span>&nbsp;<span class="ident" id="2167633"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167638">.</span><span class="ident" id="2167639">lr</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167644"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167649">.</span><span class="ident" id="2167650">lr</span>&nbsp;<span class="op" id="2167653">=</span>&nbsp;<span class="num" id="2167655">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167659"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167664">.</span><span class="ident" id="2167665">sp</span>&nbsp;<span class="op" id="2167668">=</span>&nbsp;<span class="ident" id="2167670"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167675">.</span><span class="ident" id="2167676">fp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167681"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167686">.</span><span class="ident" id="2167687">fp</span>&nbsp;<span class="op" id="2167690">=</span>&nbsp;<span class="num" id="2167692">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167696"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167701">.</span><span class="ident" id="2167702">argmap</span>&nbsp;<span class="op" id="2167709">=</span>&nbsp;<span class="ident" id="2167711">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2167718">//&nbsp;On&nbsp;link&nbsp;register&nbsp;architectures,&nbsp;sighandler&nbsp;saves&nbsp;the&nbsp;LR&nbsp;on&nbsp;stack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2167788">//&nbsp;before&nbsp;faking&nbsp;a&nbsp;call&nbsp;to&nbsp;sigpanic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167827">if</span>&nbsp;<span class="ident" id="2167830"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2167837">&amp;&amp;</span>&nbsp;<span class="ident" id="2167840"><a href="/runtime/traceback.go.html#2160969">waspanic</a></span>&nbsp;<span class="op" id="2167849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167854">x</span>&nbsp;<span class="op" id="2167856">:=</span>&nbsp;<span class="op" id="2167859">*</span><span class="op" id="2167860">(</span><span class="op" id="2167861">*</span><span class="builtintype" id="2167862">uintptr</span><span class="op" id="2167869">)</span><span class="op" id="2167870">(</span><span class="ident" id="2167871"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2167877">.</span><span class="ident" id="2167878">Pointer</span><span class="op" id="2167885">(</span><span class="ident" id="2167886"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167891">.</span><span class="ident" id="2167892">sp</span><span class="op" id="2167894">)</span><span class="op" id="2167895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167900"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167905">.</span><span class="ident" id="2167906">sp</span>&nbsp;<span class="op" id="2167909">+=</span>&nbsp;<span class="ident" id="2167912"><a href="/runtime/stubs.go.html#2131510">ptrSize</a></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167923"><a href="/runtime/traceback.go.html#2161453">f</a></span>&nbsp;<span class="op" id="2167925">=</span>&nbsp;<span class="ident" id="2167927"><a href="/runtime/symtab.go.html#2146128">findfunc</a></span><span class="op" id="2167935">(</span><span class="ident" id="2167936"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167941">.</span><span class="ident" id="2167942">pc</span><span class="op" id="2167944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167949"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167954">.</span><span class="ident" id="2167955">fn</span>&nbsp;<span class="op" id="2167958">=</span>&nbsp;<span class="ident" id="2167960"><a href="/runtime/traceback.go.html#2161453">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2167965">if</span>&nbsp;<span class="ident" id="2167968"><a href="/runtime/traceback.go.html#2161453">f</a></span>&nbsp;<span class="op" id="2167970">==</span>&nbsp;<span class="ident" id="2167973">nil</span>&nbsp;<span class="op" id="2167977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2167983"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2167988">.</span><span class="ident" id="2167989">pc</span>&nbsp;<span class="op" id="2167992">=</span>&nbsp;<span class="ident" id="2167994"><a href="/runtime/traceback.go.html#2167854">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2167999">}</span>&nbsp;<span class="keyword" id="2168001">else</span>&nbsp;<span class="keyword" id="2168006">if</span>&nbsp;<span class="ident" id="2168009"><a href="/runtime/traceback.go.html#2161453">f</a></span><span class="op" id="2168010">.</span><span class="ident" id="2168011">frame</span>&nbsp;<span class="op" id="2168017">==</span>&nbsp;<span class="num" id="2168020">0</span>&nbsp;<span class="op" id="2168022">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2168028"><a href="/runtime/traceback.go.html#2160888">frame</a></span><span class="op" id="2168033">.</span><span class="ident" id="2168034">lr</span>&nbsp;<span class="op" id="2168037">=</span>&nbsp;<span class="ident" id="2168039"><a href="/runtime/traceback.go.html#2167854">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2168044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2168048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2168051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2168055">if</span>&nbsp;<span class="ident" id="2168058"><a href="/runtime/traceback.go.html#2159381">pcbuf</a></span>&nbsp;<span class="op" id="2168064">==</span>&nbsp;<span class="ident" id="2168067">nil</span>&nbsp;<span class="op" id="2168071">&amp;&amp;</span>&nbsp;<span class="ident" id="2168074"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2168083">==</span>&nbsp;<span class="ident" id="2168086">nil</span>&nbsp;<span class="op" id="2168090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2168094"><a href="/runtime/traceback.go.html#2161628">n</a></span>&nbsp;<span class="op" id="2168096">=</span>&nbsp;<span class="ident" id="2168098"><a href="/runtime/traceback.go.html#2160871">nprint</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2168106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168110">//&nbsp;If&nbsp;callback&nbsp;!=&nbsp;nil,&nbsp;we&#39;re&nbsp;being&nbsp;called&nbsp;to&nbsp;gather&nbsp;stack&nbsp;information&nbsp;during</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168188">//&nbsp;garbage&nbsp;collection&nbsp;or&nbsp;stack&nbsp;growth.&nbsp;In&nbsp;that&nbsp;context,&nbsp;require&nbsp;that&nbsp;we&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168266">//&nbsp;up&nbsp;the&nbsp;entire&nbsp;defer&nbsp;stack.&nbsp;If&nbsp;not,&nbsp;then&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;somewhere&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168343">//&nbsp;garbage&nbsp;collection&nbsp;or&nbsp;stack&nbsp;growth&nbsp;may&nbsp;not&nbsp;have&nbsp;seen&nbsp;the&nbsp;correct&nbsp;picture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168420">//&nbsp;of&nbsp;the&nbsp;stack.&nbsp;Crash&nbsp;now&nbsp;instead&nbsp;of&nbsp;silently&nbsp;executing&nbsp;the&nbsp;garbage&nbsp;collection</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168501">//&nbsp;or&nbsp;stack&nbsp;copy&nbsp;incorrectly&nbsp;and&nbsp;setting&nbsp;up&nbsp;for&nbsp;a&nbsp;mysterious&nbsp;crash&nbsp;later.</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168576">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168580">//&nbsp;Note&nbsp;that&nbsp;panic&nbsp;!=&nbsp;nil&nbsp;is&nbsp;okay&nbsp;here:&nbsp;there&nbsp;can&nbsp;be&nbsp;leftover&nbsp;panics,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168651">//&nbsp;because&nbsp;the&nbsp;defers&nbsp;on&nbsp;the&nbsp;panic&nbsp;stack&nbsp;do&nbsp;not&nbsp;nest&nbsp;in&nbsp;frame&nbsp;order&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168723">//&nbsp;they&nbsp;do&nbsp;on&nbsp;the&nbsp;defer&nbsp;stack.&nbsp;If&nbsp;you&nbsp;have:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168768">//</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168772">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;1&nbsp;defers&nbsp;d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168794">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;2&nbsp;defers&nbsp;d2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168816">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;3&nbsp;defers&nbsp;d3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168838">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;4&nbsp;panics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168857">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;4&#39;s&nbsp;panic&nbsp;starts&nbsp;running&nbsp;defers</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168899">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;5,&nbsp;running&nbsp;d3,&nbsp;defers&nbsp;d4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168934">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;5&nbsp;panics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168953">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;5&#39;s&nbsp;panic&nbsp;starts&nbsp;running&nbsp;defers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2168995">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;6,&nbsp;running&nbsp;d4,&nbsp;garbage&nbsp;collects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169037">//&nbsp;&nbsp;&nbsp;&nbspframe&nbsp;6,&nbsp;running&nbsp;d2,&nbsp;garbage&nbsp;collects</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169079">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169083">//&nbsp;During&nbsp;the&nbsp;execution&nbsp;of&nbsp;d4,&nbsp;the&nbsp;panic&nbsp;stack&nbsp;is&nbsp;d4&nbsp;-&gt;&nbsp;d3,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169150">//&nbsp;is&nbsp;nested&nbsp;properly,&nbsp;and&nbsp;we&#39;ll&nbsp;treat&nbsp;frame&nbsp;3&nbsp;as&nbsp;resumable,&nbsp;because&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169223">//&nbsp;can&nbsp;find&nbsp;d3.&nbsp;(And&nbsp;in&nbsp;fact&nbsp;frame&nbsp;3&nbsp;is&nbsp;resumable.&nbsp;If&nbsp;d4&nbsp;recovers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169290">//&nbsp;and&nbsp;frame&nbsp;5&nbsp;continues&nbsp;running,&nbsp;d3,&nbsp;d3&nbsp;can&nbsp;recover&nbsp;and&nbsp;we&#39;ll</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169354">//&nbsp;resume&nbsp;execution&nbsp;in&nbsp;(returning&nbsp;from)&nbsp;frame&nbsp;3.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169405">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169409">//&nbsp;During&nbsp;the&nbsp;execution&nbsp;of&nbsp;d2,&nbsp;however,&nbsp;the&nbsp;panic&nbsp;stack&nbsp;is&nbsp;d2&nbsp;-&gt;&nbsp;d3,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169479">//&nbsp;which&nbsp;is&nbsp;inverted.&nbsp;The&nbsp;scan&nbsp;will&nbsp;match&nbsp;d2&nbsp;to&nbsp;frame&nbsp;2&nbsp;but&nbsp;having</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169547">//&nbsp;d2&nbsp;on&nbsp;the&nbsp;stack&nbsp;until&nbsp;then&nbsp;means&nbsp;it&nbsp;will&nbsp;not&nbsp;match&nbsp;d3&nbsp;to&nbsp;frame&nbsp;3.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169617">//&nbsp;This&nbsp;is&nbsp;okay:&nbsp;if&nbsp;we&#39;re&nbsp;running&nbsp;d2,&nbsp;then&nbsp;all&nbsp;the&nbsp;defers&nbsp;after&nbsp;d2&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169690">//&nbsp;completed&nbsp;and&nbsp;their&nbsp;corresponding&nbsp;frames&nbsp;are&nbsp;dead.&nbsp;Not&nbsp;finding&nbsp;d3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169760">//&nbsp;for&nbsp;frame&nbsp;3&nbsp;means&nbsp;we&#39;ll&nbsp;set&nbsp;frame&nbsp;3&#39;s&nbsp;continpc&nbsp;==&nbsp;0,&nbsp;which&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169834">//&nbsp;(frame&nbsp;3&nbsp;is&nbsp;dead).&nbsp;At&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;walk&nbsp;the&nbsp;panic&nbsp;stack&nbsp;can&nbsp;thus</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169905">//&nbsp;contain&nbsp;defers&nbsp;(d3&nbsp;in&nbsp;this&nbsp;case)&nbsp;for&nbsp;dead&nbsp;frames.&nbsp;The&nbsp;inversion&nbsp;here</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2169978">//&nbsp;always&nbsp;indicates&nbsp;a&nbsp;dead&nbsp;frame,&nbsp;and&nbsp;the&nbsp;effect&nbsp;of&nbsp;the&nbsp;inversion&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170052">//&nbsp;scan&nbsp;is&nbsp;to&nbsp;hide&nbsp;those&nbsp;dead&nbsp;frames,&nbsp;so&nbsp;the&nbsp;scan&nbsp;is&nbsp;still&nbsp;okay:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170118">//&nbsp;what&#39;s&nbsp;left&nbsp;on&nbsp;the&nbsp;panic&nbsp;stack&nbsp;are&nbsp;exactly&nbsp;(and&nbsp;only)&nbsp;the&nbsp;dead&nbsp;frames.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170193">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170197">//&nbsp;We&nbsp;require&nbsp;callback&nbsp;!=&nbsp;nil&nbsp;here&nbsp;because&nbsp;only&nbsp;when&nbsp;callback&nbsp;!=&nbsp;nil</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170267">//&nbsp;do&nbsp;we&nbsp;know&nbsp;that&nbsp;gentraceback&nbsp;is&nbsp;being&nbsp;called&nbsp;in&nbsp;a&nbsp;&#34;must&nbsp;be&nbsp;correct&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170339">//&nbsp;context&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;&#34;best&nbsp;effort&#34;&nbsp;context.&nbsp;The&nbsp;tracebacks&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170410">//&nbsp;callbacks&nbsp;only&nbsp;happen&nbsp;when&nbsp;everything&nbsp;is&nbsp;stopped&nbsp;nicely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170471">//&nbsp;At&nbsp;other&nbsp;times,&nbsp;such&nbsp;as&nbsp;when&nbsp;gathering&nbsp;a&nbsp;stack&nbsp;for&nbsp;a&nbsp;profiling&nbsp;signal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170545">//&nbsp;or&nbsp;when&nbsp;printing&nbsp;a&nbsp;traceback&nbsp;during&nbsp;a&nbsp;crash,&nbsp;everything&nbsp;may&nbsp;not&nbsp;be</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170616">//&nbsp;stopped&nbsp;nicely,&nbsp;and&nbsp;the&nbsp;stack&nbsp;walk&nbsp;may&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;complete.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170684">//&nbsp;It&#39;s&nbsp;okay&nbsp;in&nbsp;those&nbsp;situations&nbsp;not&nbsp;to&nbsp;use&nbsp;up&nbsp;the&nbsp;entire&nbsp;defer&nbsp;stack:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2170756">//&nbsp;incomplete&nbsp;information&nbsp;then&nbsp;is&nbsp;still&nbsp;better&nbsp;than&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170818">if</span>&nbsp;<span class="ident" id="2170821"><a href="/runtime/traceback.go.html#2159406">callback</a></span>&nbsp;<span class="op" id="2170830">!=</span>&nbsp;<span class="ident" id="2170833">nil</span>&nbsp;<span class="op" id="2170837">&amp;&amp;</span>&nbsp;<span class="ident" id="2170840"><a href="/runtime/traceback.go.html#2161628">n</a></span>&nbsp;<span class="op" id="2170842">&lt;</span>&nbsp;<span class="ident" id="2170844"><a href="/runtime/traceback.go.html#2159397">max</a></span>&nbsp;<span class="op" id="2170848">&amp;&amp;</span>&nbsp;<span class="ident" id="2170851"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2170858">!=</span>&nbsp;<span class="ident" id="2170861">nil</span>&nbsp;<span class="op" id="2170865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2170869">if</span>&nbsp;<span class="ident" id="2170872"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2170879">!=</span>&nbsp;<span class="ident" id="2170882">nil</span>&nbsp;<span class="op" id="2170886">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2170891">print</span><span class="op" id="2170896">(</span><span class="string" id="2170897">&#34;runtime:&nbsp;g&#34;</span><span class="op" id="2170909">,</span>&nbsp;<span class="ident" id="2170911"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2170913">.</span><span class="ident" id="2170914">goid</span><span class="op" id="2170918">,</span>&nbsp;<span class="string" id="2170920">&#34;:&nbsp;leftover&nbsp;defer&nbsp;argp=&#34;</span><span class="op" id="2170944">,</span>&nbsp;<span class="ident" id="2170946"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2170949">(</span><span class="ident" id="2170950"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2170956">.</span><span class="ident" id="2170957">argp</span><span class="op" id="2170961">)</span><span class="op" id="2170962">,</span>&nbsp;<span class="string" id="2170964">&#34;&nbsp;pc=&#34;</span><span class="op" id="2170970">,</span>&nbsp;<span class="ident" id="2170972"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2170975">(</span><span class="ident" id="2170976"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2170982">.</span><span class="ident" id="2170983">pc</span><span class="op" id="2170985">)</span><span class="op" id="2170986">,</span>&nbsp;<span class="string" id="2170988">&#34;\n&#34;</span><span class="op" id="2170992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2170996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171000">for</span>&nbsp;<span class="ident" id="2171004"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2171011">=</span>&nbsp;<span class="ident" id="2171013"><a href="/runtime/traceback.go.html#2159364">gp</a></span><span class="op" id="2171015">.</span><span class="ident" id="2171016">_defer</span><span class="op" id="2171022">;</span>&nbsp;<span class="ident" id="2171024"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2171031">!=</span>&nbsp;<span class="ident" id="2171034">nil</span><span class="op" id="2171037">;</span>&nbsp;<span class="ident" id="2171039"><a href="/runtime/traceback.go.html#2161054">_defer</a></span>&nbsp;<span class="op" id="2171046">=</span>&nbsp;<span class="ident" id="2171048"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2171054">.</span><span class="ident" id="2171055">link</span>&nbsp;<span class="op" id="2171060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2171065">print</span><span class="op" id="2171070">(</span><span class="string" id="2171071">&#34;\tdefer&nbsp;&#34;</span><span class="op" id="2171081">,</span>&nbsp;<span class="ident" id="2171083"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2171089">,</span>&nbsp;<span class="string" id="2171091">&#34;&nbsp;argp=&#34;</span><span class="op" id="2171099">,</span>&nbsp;<span class="ident" id="2171101"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2171104">(</span><span class="ident" id="2171105"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2171111">.</span><span class="ident" id="2171112">argp</span><span class="op" id="2171116">)</span><span class="op" id="2171117">,</span>&nbsp;<span class="string" id="2171119">&#34;&nbsp;pc=&#34;</span><span class="op" id="2171125">,</span>&nbsp;<span class="ident" id="2171127"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2171130">(</span><span class="ident" id="2171131"><a href="/runtime/traceback.go.html#2161054">_defer</a></span><span class="op" id="2171137">.</span><span class="ident" id="2171138">pc</span><span class="op" id="2171140">)</span><span class="op" id="2171141">,</span>&nbsp;<span class="string" id="2171143">&#34;\n&#34;</span><span class="op" id="2171147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171151">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171155"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2171162">(</span><span class="string" id="2171163">&#34;traceback&nbsp;has&nbsp;leftover&nbsp;defers&#34;</span><span class="op" id="2171194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171201">return</span>&nbsp;<span class="ident" id="2171208"><a href="/runtime/traceback.go.html#2161628">n</a></span><br>
<span class="lineno"></span><span class="op" id="2171210">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="2171213">func</span>&nbsp;<span class="ident" id="2171218">setArgInfo</span><span class="op" id="2171228">(</span><span class="ident" id="2171229">frame</span>&nbsp;<span class="op" id="2171235">*</span><span class="ident" id="2171236"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184027">stkframe</a></span><span class="op" id="2171244">,</span>&nbsp;<span class="ident" id="2171246">f</span>&nbsp;<span class="op" id="2171248">*</span><span class="ident" id="2171249"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2182639">_func</a></span><span class="op" id="2171254">,</span>&nbsp;<span class="ident" id="2171256">needArgMap</span>&nbsp;<span class="builtintype" id="2171267">bool</span><span class="op" id="2171271">)</span>&nbsp;<span class="op" id="2171273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171276"><a href="/runtime/traceback.go.html#2171229">frame</a></span><span class="op" id="2171281">.</span><span class="ident" id="2171282">arglen</span>&nbsp;<span class="op" id="2171289">=</span>&nbsp;<span class="builtintype" id="2171291">uintptr</span><span class="op" id="2171298">(</span><span class="ident" id="2171299"><a href="/runtime/traceback.go.html#2171246">f</a></span><span class="op" id="2171300">.</span><span class="ident" id="2171301">args</span><span class="op" id="2171305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171308">if</span>&nbsp;<span class="ident" id="2171311"><a href="/runtime/traceback.go.html#2171256">needArgMap</a></span>&nbsp;<span class="op" id="2171322">&amp;&amp;</span>&nbsp;<span class="ident" id="2171325"><a href="/runtime/traceback.go.html#2171246">f</a></span><span class="op" id="2171326">.</span><span class="ident" id="2171327">args</span>&nbsp;<span class="op" id="2171332">==</span>&nbsp;<span class="ident" id="2171335"><a href="/runtime/symtab.go.html#2142806">_ArgsSizeUnknown</a></span>&nbsp;<span class="op" id="2171352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2171356">//&nbsp;Extract&nbsp;argument&nbsp;bitmaps&nbsp;for&nbsp;reflect&nbsp;stubs&nbsp;from&nbsp;the&nbsp;calls&nbsp;they&nbsp;made&nbsp;to&nbsp;reflect.</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171441">switch</span>&nbsp;<span class="ident" id="2171448"><a href="/runtime/symtab.go.html#2147632">gofuncname</a></span><span class="op" id="2171458">(</span><span class="ident" id="2171459"><a href="/runtime/traceback.go.html#2171246">f</a></span><span class="op" id="2171460">)</span>&nbsp;<span class="op" id="2171462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171466">case</span>&nbsp;<span class="string" id="2171471">&#34;reflect.makeFuncStub&#34;</span><span class="op" id="2171493">,</span>&nbsp;<span class="string" id="2171495">&#34;reflect.methodValueCall&#34;</span><span class="op" id="2171520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171525">arg0</span>&nbsp;<span class="op" id="2171530">:=</span>&nbsp;<span class="ident" id="2171533"><a href="/runtime/traceback.go.html#2171229">frame</a></span><span class="op" id="2171538">.</span><span class="ident" id="2171539">sp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171545">if</span>&nbsp;<span class="ident" id="2171548"><a href="/runtime/traceback.go.html#2157296">usesLR</a></span>&nbsp;<span class="op" id="2171555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171561"><a href="/runtime/traceback.go.html#2171525">arg0</a></span>&nbsp;<span class="op" id="2171566">+=</span>&nbsp;<span class="ident" id="2171569"><a href="/runtime/stubs.go.html#2131510">ptrSize</a></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171585">fn</span>&nbsp;<span class="op" id="2171588">:=</span>&nbsp;<span class="op" id="2171591">*</span><span class="op" id="2171592">(</span><span class="op" id="2171593">*</span><span class="op" id="2171594">*</span><span class="op" id="2171595">[</span><span class="num" id="2171596">2</span><span class="op" id="2171597">]</span><span class="builtintype" id="2171598">uintptr</span><span class="op" id="2171605">)</span><span class="op" id="2171606">(</span><span class="ident" id="2171607"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2171613">.</span><span class="ident" id="2171614">Pointer</span><span class="op" id="2171621">(</span><span class="ident" id="2171622"><a href="/runtime/traceback.go.html#2171525">arg0</a></span><span class="op" id="2171626">)</span><span class="op" id="2171627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171632">if</span>&nbsp;<span class="ident" id="2171635"><a href="/runtime/traceback.go.html#2171585">fn</a></span><span class="op" id="2171637">[</span><span class="num" id="2171638">0</span><span class="op" id="2171639">]</span>&nbsp;<span class="op" id="2171641">!=</span>&nbsp;<span class="ident" id="2171644"><a href="/runtime/traceback.go.html#2171246">f</a></span><span class="op" id="2171645">.</span><span class="ident" id="2171646">entry</span>&nbsp;<span class="op" id="2171652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2171658">print</span><span class="op" id="2171663">(</span><span class="string" id="2171664">&#34;runtime:&nbsp;confused&nbsp;by&nbsp;&#34;</span><span class="op" id="2171687">,</span>&nbsp;<span class="ident" id="2171689"><a href="/runtime/symtab.go.html#2147632">gofuncname</a></span><span class="op" id="2171699">(</span><span class="ident" id="2171700"><a href="/runtime/traceback.go.html#2171246">f</a></span><span class="op" id="2171701">)</span><span class="op" id="2171702">,</span>&nbsp;<span class="string" id="2171704">&#34;\n&#34;</span><span class="op" id="2171708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171714"><a href="/runtime/panic.go.html#2057429">gothrow</a></span><span class="op" id="2171721">(</span><span class="string" id="2171722">&#34;reflect&nbsp;mismatch&#34;</span><span class="op" id="2171740">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171750">bv</span>&nbsp;<span class="op" id="2171753">:=</span>&nbsp;<span class="op" id="2171756">(</span><span class="op" id="2171757">*</span><span class="ident" id="2171758"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2188539">bitvector</a></span><span class="op" id="2171767">)</span><span class="op" id="2171768">(</span><span class="ident" id="2171769"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2171775">.</span><span class="ident" id="2171776">Pointer</span><span class="op" id="2171783">(</span><span class="ident" id="2171784"><a href="/runtime/traceback.go.html#2171585">fn</a></span><span class="op" id="2171786">[</span><span class="num" id="2171787">1</span><span class="op" id="2171788">]</span><span class="op" id="2171789">)</span><span class="op" id="2171790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171795"><a href="/runtime/traceback.go.html#2171229">frame</a></span><span class="op" id="2171800">.</span><span class="ident" id="2171801">arglen</span>&nbsp;<span class="op" id="2171808">=</span>&nbsp;<span class="builtintype" id="2171810">uintptr</span><span class="op" id="2171817">(</span><span class="ident" id="2171818"><a href="/runtime/traceback.go.html#2171750">bv</a></span><span class="op" id="2171820">.</span><span class="ident" id="2171821">n</span>&nbsp;<span class="op" id="2171823">/</span>&nbsp;<span class="num" id="2171825">2</span>&nbsp;<span class="op" id="2171827">*</span>&nbsp;<span class="ident" id="2171829"><a href="/runtime/stubs.go.html#2131510">ptrSize</a></span><span class="op" id="2171836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171841"><a href="/runtime/traceback.go.html#2171229">frame</a></span><span class="op" id="2171846">.</span><span class="ident" id="2171847">argmap</span>&nbsp;<span class="op" id="2171854">=</span>&nbsp;<span class="ident" id="2171856"><a href="/runtime/traceback.go.html#2171750">bv</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171861">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2171864">}</span><br>
<span class="lineno"></span><span class="op" id="2171866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2171869">func</span>&nbsp;<span class="ident" id="2171874">printcreatedby</span><span class="op" id="2171888">(</span><span class="ident" id="2171889">gp</span>&nbsp;<span class="op" id="2171892">*</span><span class="ident" id="2171893"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2171894">)</span>&nbsp;<span class="op" id="2171896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2171899">//&nbsp;Show&nbsp;what&nbsp;created&nbsp;goroutine,&nbsp;except&nbsp;main&nbsp;goroutine&nbsp;(goid&nbsp;1).</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171964">pc</span>&nbsp;<span class="op" id="2171967">:=</span>&nbsp;<span class="ident" id="2171970"><a href="/runtime/traceback.go.html#2171889">gp</a></span><span class="op" id="2171972">.</span><span class="ident" id="2171973">gopc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2171979">f</span>&nbsp;<span class="op" id="2171981">:=</span>&nbsp;<span class="ident" id="2171984"><a href="/runtime/symtab.go.html#2146128">findfunc</a></span><span class="op" id="2171992">(</span><span class="ident" id="2171993"><a href="/runtime/traceback.go.html#2171964">pc</a></span><span class="op" id="2171995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2171998">if</span>&nbsp;<span class="ident" id="2172001"><a href="/runtime/traceback.go.html#2171979">f</a></span>&nbsp;<span class="op" id="2172003">!=</span>&nbsp;<span class="ident" id="2172006">nil</span>&nbsp;<span class="op" id="2172010">&amp;&amp;</span>&nbsp;<span class="ident" id="2172013"><a href="/runtime/traceback.go.html#2174094">showframe</a></span><span class="op" id="2172022">(</span><span class="ident" id="2172023"><a href="/runtime/traceback.go.html#2171979">f</a></span><span class="op" id="2172024">,</span>&nbsp;<span class="ident" id="2172026"><a href="/runtime/traceback.go.html#2171889">gp</a></span><span class="op" id="2172028">)</span>&nbsp;<span class="op" id="2172030">&amp;&amp;</span>&nbsp;<span class="ident" id="2172033"><a href="/runtime/traceback.go.html#2171889">gp</a></span><span class="op" id="2172035">.</span><span class="ident" id="2172036">goid</span>&nbsp;<span class="op" id="2172041">!=</span>&nbsp;<span class="num" id="2172044">1</span>&nbsp;<span class="op" id="2172046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2172050">print</span><span class="op" id="2172055">(</span><span class="string" id="2172056">&#34;created&nbsp;by&nbsp;&#34;</span><span class="op" id="2172069">,</span>&nbsp;<span class="ident" id="2172071"><a href="/runtime/symtab.go.html#2147632">gofuncname</a></span><span class="op" id="2172081">(</span><span class="ident" id="2172082"><a href="/runtime/traceback.go.html#2171979">f</a></span><span class="op" id="2172083">)</span><span class="op" id="2172084">,</span>&nbsp;<span class="string" id="2172086">&#34;\n&#34;</span><span class="op" id="2172090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2172094">tracepc</span>&nbsp;<span class="op" id="2172102">:=</span>&nbsp;<span class="ident" id="2172105"><a href="/runtime/traceback.go.html#2171964">pc</a></span>&nbsp;<span class="comment" id="2172108">//&nbsp;back&nbsp;up&nbsp;to&nbsp;CALL&nbsp;instruction&nbsp;for&nbsp;funcline.</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2172155">if</span>&nbsp;<span class="ident" id="2172158"><a href="/runtime/traceback.go.html#2171964">pc</a></span>&nbsp;<span class="op" id="2172161">&gt;</span>&nbsp;<span class="ident" id="2172163"><a href="/runtime/traceback.go.html#2171979">f</a></span><span class="op" id="2172164">.</span><span class="ident" id="2172165">entry</span>&nbsp;<span class="op" id="2172171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2172176"><a href="/runtime/traceback.go.html#2172094">tracepc</a></span>&nbsp;<span class="op" id="2172184">-=</span>&nbsp;<span class="ident" id="2172187"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184918">_PCQuantum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2172200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2172204">var</span>&nbsp;<span class="ident" id="2172208">file</span>&nbsp;<span class="builtintype" id="2172213">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2172222">line</span>&nbsp;<span class="op" id="2172227">:=</span>&nbsp;<span class="ident" id="2172230"><a href="/runtime/symtab.go.html#2148151">funcline</a></span><span class="op" id="2172238">(</span><span class="ident" id="2172239"><a href="/runtime/traceback.go.html#2171979">f</a></span><span class="op" id="2172240">,</span>&nbsp;<span class="ident" id="2172242"><a href="/runtime/traceback.go.html#2172094">tracepc</a></span><span class="op" id="2172249">,</span>&nbsp;<span class="op" id="2172251">&amp;</span><span class="ident" id="2172252"><a href="/runtime/traceback.go.html#2172208">file</a></span><span class="op" id="2172256">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2172260">print</span><span class="op" id="2172265">(</span><span class="string" id="2172266">&#34;\t&#34;</span><span class="op" id="2172270">,</span>&nbsp;<span class="ident" id="2172272"><a href="/runtime/traceback.go.html#2172208">file</a></span><span class="op" id="2172276">,</span>&nbsp;<span class="string" id="2172278">&#34;:&#34;</span><span class="op" id="2172281">,</span>&nbsp;<span class="ident" id="2172283"><a href="/runtime/traceback.go.html#2172222">line</a></span><span class="op" id="2172287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2172291">if</span>&nbsp;<span class="ident" id="2172294"><a href="/runtime/traceback.go.html#2171964">pc</a></span>&nbsp;<span class="op" id="2172297">&gt;</span>&nbsp;<span class="ident" id="2172299"><a href="/runtime/traceback.go.html#2171979">f</a></span><span class="op" id="2172300">.</span><span class="ident" id="2172301">entry</span>&nbsp;<span class="op" id="2172307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2172312">print</span><span class="op" id="2172317">(</span><span class="string" id="2172318">&#34;&nbsp;+&#34;</span><span class="op" id="2172322">,</span>&nbsp;<span class="ident" id="2172324"><a href="/runtime/print1.go.html#2057919">hex</a></span><span class="op" id="2172327">(</span><span class="ident" id="2172328"><a href="/runtime/traceback.go.html#2171964">pc</a></span><span class="op" id="2172330">-</span><span class="ident" id="2172331"><a href="/runtime/traceback.go.html#2171979">f</a></span><span class="op" id="2172332">.</span><span class="ident" id="2172333">entry</span><span class="op" id="2172338">)</span><span class="op" id="2172339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2172343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2172347">print</span><span class="op" id="2172352">(</span><span class="string" id="2172353">&#34;\n&#34;</span><span class="op" id="2172357">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2172360">}</span><br>
<span class="lineno"></span><span class="op" id="2172362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2172365">func</span>&nbsp;<span class="ident" id="2172370">traceback</span><span class="op" id="2172379">(</span><span class="ident" id="2172380">pc</span>&nbsp;<span class="builtintype" id="2172383">uintptr</span><span class="op" id="2172390">,</span>&nbsp;<span class="ident" id="2172392">sp</span>&nbsp;<span class="builtintype" id="2172395">uintptr</span><span class="op" id="2172402">,</span>&nbsp;<span class="ident" id="2172404">lr</span>&nbsp;<span class="builtintype" id="2172407">uintptr</span><span class="op" id="2172414">,</span>&nbsp;<span class="ident" id="2172416">gp</span>&nbsp;<span class="op" id="2172419">*</span><span class="ident" id="2172420"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2172421">)</span>&nbsp;<span class="op" id="2172423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2172426"><a href="/runtime/traceback.go.html#2172983">traceback1</a></span><span class="op" id="2172436">(</span><span class="ident" id="2172437"><a href="/runtime/traceback.go.html#2172380">pc</a></span><span class="op" id="2172439">,</span>&nbsp;<span class="ident" id="2172441"><a href="/runtime/traceback.go.html#2172392">sp</a></span><span class="op" id="2172443">,</span>&nbsp;<span class="ident" id="2172445"><a href="/runtime/traceback.go.html#2172404">lr</a></span><span class="op" id="2172447">,</span>&nbsp;<span class="ident" id="2172449"><a href="/runtime/traceback.go.html#2172416">gp</a></span><span class="op" id="2172451">,</span>&nbsp;<span class="num" id="2172453">0</span><span class="op" id="2172454">)</span><br>
<span class="lineno">495</span><span class="op" id="2172456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2172459">//&nbsp;tracebacktrap&nbsp;is&nbsp;like&nbsp;traceback&nbsp;but&nbsp;expects&nbsp;that&nbsp;the&nbsp;PC&nbsp;and&nbsp;SP&nbsp;were&nbsp;obtained</span><br>
<span class="lineno"></span><span class="comment" id="2172539">//&nbsp;from&nbsp;a&nbsp;trap,&nbsp;not&nbsp;from&nbsp;gp-&gt;sched&nbsp;or&nbsp;gp-&gt;syscallpc/gp-&gt;syscallsp&nbsp;or&nbsp;getcallerpc/getcallersp.</span><br>
<span class="lineno"></span><span class="comment" id="2172633">//&nbsp;Because&nbsp;they&nbsp;are&nbsp;from&nbsp;a&nbsp;trap&nbsp;instead&nbsp;of&nbsp;from&nbsp;a&nbsp;saved&nbsp;pair,</span><br>
<span class="lineno">500</span><span class="comment" id="2172695">//&nbsp;the&nbsp;initial&nbsp;PC&nbsp;must&nbsp;not&nbsp;be&nbsp;rewound&nbsp;to&nbsp;the&nbsp;previous&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="2172762">//&nbsp;(All&nbsp;the&nbsp;saved&nbsp;pairs&nbsp;record&nbsp;a&nbsp;PC&nbsp;that&nbsp;is&nbsp;a&nbsp;return&nbsp;address,&nbsp;so&nbsp;we</span><br>
<span class="lineno"></span><span class="comment" id="2172830">//&nbsp;rewind&nbsp;it&nbsp;into&nbsp;the&nbsp;CALL&nbsp;instruction.)</span><br>
<span class="lineno"></span><span class="keyword" id="2172871">func</span>&nbsp;<span class="ident" id="2172876">tracebacktrap</span><span class="op" id="2172889">(</span><span class="ident" id="2172890">pc</span>&nbsp;<span class="builtintype" id="2172893">uintptr</span><span class="op" id="2172900">,</span>&nbsp;<span class="ident" id="2172902">sp</span>&nbsp;<span class="builtintype" id="2172905">uintptr</span><span class="op" id="2172912">,</span>&nbsp;<span class="ident" id="2172914">lr</span>&nbsp;<span class="builtintype" id="2172917">uintptr</span><span class="op" id="2172924">,</span>&nbsp;<span class="ident" id="2172926">gp</span>&nbsp;<span class="op" id="2172929">*</span><span class="ident" id="2172930"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2172931">)</span>&nbsp;<span class="op" id="2172933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2172936"><a href="/runtime/traceback.go.html#2172983">traceback1</a></span><span class="op" id="2172946">(</span><span class="ident" id="2172947"><a href="/runtime/traceback.go.html#2172890">pc</a></span><span class="op" id="2172949">,</span>&nbsp;<span class="ident" id="2172951"><a href="/runtime/traceback.go.html#2172902">sp</a></span><span class="op" id="2172953">,</span>&nbsp;<span class="ident" id="2172955"><a href="/runtime/traceback.go.html#2172914">lr</a></span><span class="op" id="2172957">,</span>&nbsp;<span class="ident" id="2172959"><a href="/runtime/traceback.go.html#2172926">gp</a></span><span class="op" id="2172961">,</span>&nbsp;<span class="ident" id="2172963"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184224">_TraceTrap</a></span><span class="op" id="2172973">)</span><br>
<span class="lineno">505</span><span class="op" id="2172975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2172978">func</span>&nbsp;<span class="ident" id="2172983">traceback1</span><span class="op" id="2172993">(</span><span class="ident" id="2172994">pc</span>&nbsp;<span class="builtintype" id="2172997">uintptr</span><span class="op" id="2173004">,</span>&nbsp;<span class="ident" id="2173006">sp</span>&nbsp;<span class="builtintype" id="2173009">uintptr</span><span class="op" id="2173016">,</span>&nbsp;<span class="ident" id="2173018">lr</span>&nbsp;<span class="builtintype" id="2173021">uintptr</span><span class="op" id="2173028">,</span>&nbsp;<span class="ident" id="2173030">gp</span>&nbsp;<span class="op" id="2173033">*</span><span class="ident" id="2173034"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2173035">,</span>&nbsp;<span class="ident" id="2173037">flags</span>&nbsp;<span class="builtintype" id="2173043">uint</span><span class="op" id="2173047">)</span>&nbsp;<span class="op" id="2173049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2173052">var</span>&nbsp;<span class="ident" id="2173056">n</span>&nbsp;<span class="builtintype" id="2173058">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2173063">if</span>&nbsp;<span class="ident" id="2173066"><a href="/runtime/stubs.go.html#2132100">readgstatus</a></span><span class="op" id="2173077">(</span><span class="ident" id="2173078"><a href="/runtime/traceback.go.html#2173030">gp</a></span><span class="op" id="2173080">)</span><span class="op" id="2173081">&amp;^</span><span class="ident" id="2173083"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span>&nbsp;<span class="op" id="2173090">==</span>&nbsp;<span class="ident" id="2173093"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178916">_Gsyscall</a></span>&nbsp;<span class="op" id="2173103">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2173107">//&nbsp;Override&nbsp;registers&nbsp;if&nbsp;blocked&nbsp;in&nbsp;system&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173158"><a href="/runtime/traceback.go.html#2172994">pc</a></span>&nbsp;<span class="op" id="2173161">=</span>&nbsp;<span class="ident" id="2173163"><a href="/runtime/traceback.go.html#2173030">gp</a></span><span class="op" id="2173165">.</span><span class="ident" id="2173166">syscallpc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173178"><a href="/runtime/traceback.go.html#2173006">sp</a></span>&nbsp;<span class="op" id="2173181">=</span>&nbsp;<span class="ident" id="2173183"><a href="/runtime/traceback.go.html#2173030">gp</a></span><span class="op" id="2173185">.</span><span class="ident" id="2173186">syscallsp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173198"><a href="/runtime/traceback.go.html#2173037">flags</a></span>&nbsp;<span class="op" id="2173204">&amp;^=</span>&nbsp;<span class="ident" id="2173208"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184224">_TraceTrap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2173220">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2173223">//&nbsp;Print&nbsp;traceback.&nbsp;By&nbsp;default,&nbsp;omits&nbsp;runtime&nbsp;frames.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2173278">//&nbsp;If&nbsp;that&nbsp;means&nbsp;we&nbsp;print&nbsp;nothing&nbsp;at&nbsp;all,&nbsp;repeat&nbsp;forcing&nbsp;all&nbsp;frames&nbsp;printed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173356"><a href="/runtime/traceback.go.html#2173056">n</a></span>&nbsp;<span class="op" id="2173358">=</span>&nbsp;<span class="ident" id="2173360"><a href="/runtime/traceback.go.html#2159312">gentraceback</a></span><span class="op" id="2173372">(</span><span class="ident" id="2173373"><a href="/runtime/traceback.go.html#2172994">pc</a></span><span class="op" id="2173375">,</span>&nbsp;<span class="ident" id="2173377"><a href="/runtime/traceback.go.html#2173006">sp</a></span><span class="op" id="2173379">,</span>&nbsp;<span class="ident" id="2173381"><a href="/runtime/traceback.go.html#2173018">lr</a></span><span class="op" id="2173383">,</span>&nbsp;<span class="ident" id="2173385"><a href="/runtime/traceback.go.html#2173030">gp</a></span><span class="op" id="2173387">,</span>&nbsp;<span class="num" id="2173389">0</span><span class="op" id="2173390">,</span>&nbsp;<span class="ident" id="2173392">nil</span><span class="op" id="2173395">,</span>&nbsp;<span class="ident" id="2173397"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184245">_TracebackMaxFrames</a></span><span class="op" id="2173416">,</span>&nbsp;<span class="ident" id="2173418">nil</span><span class="op" id="2173421">,</span>&nbsp;<span class="ident" id="2173423">nil</span><span class="op" id="2173426">,</span>&nbsp;<span class="ident" id="2173428"><a href="/runtime/traceback.go.html#2173037">flags</a></span><span class="op" id="2173433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2173436">if</span>&nbsp;<span class="ident" id="2173439"><a href="/runtime/traceback.go.html#2173056">n</a></span>&nbsp;<span class="op" id="2173441">==</span>&nbsp;<span class="num" id="2173444">0</span>&nbsp;<span class="op" id="2173446">&amp;&amp;</span>&nbsp;<span class="op" id="2173449">(</span><span class="ident" id="2173450"><a href="/runtime/traceback.go.html#2173037">flags</a></span><span class="op" id="2173455">&amp;</span><span class="ident" id="2173456"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184194">_TraceRuntimeFrames</a></span><span class="op" id="2173475">)</span>&nbsp;<span class="op" id="2173477">==</span>&nbsp;<span class="num" id="2173480">0</span>&nbsp;<span class="op" id="2173482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173486"><a href="/runtime/traceback.go.html#2173056">n</a></span>&nbsp;<span class="op" id="2173488">=</span>&nbsp;<span class="ident" id="2173490"><a href="/runtime/traceback.go.html#2159312">gentraceback</a></span><span class="op" id="2173502">(</span><span class="ident" id="2173503"><a href="/runtime/traceback.go.html#2172994">pc</a></span><span class="op" id="2173505">,</span>&nbsp;<span class="ident" id="2173507"><a href="/runtime/traceback.go.html#2173006">sp</a></span><span class="op" id="2173509">,</span>&nbsp;<span class="ident" id="2173511"><a href="/runtime/traceback.go.html#2173018">lr</a></span><span class="op" id="2173513">,</span>&nbsp;<span class="ident" id="2173515"><a href="/runtime/traceback.go.html#2173030">gp</a></span><span class="op" id="2173517">,</span>&nbsp;<span class="num" id="2173519">0</span><span class="op" id="2173520">,</span>&nbsp;<span class="ident" id="2173522">nil</span><span class="op" id="2173525">,</span>&nbsp;<span class="ident" id="2173527"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184245">_TracebackMaxFrames</a></span><span class="op" id="2173546">,</span>&nbsp;<span class="ident" id="2173548">nil</span><span class="op" id="2173551">,</span>&nbsp;<span class="ident" id="2173553">nil</span><span class="op" id="2173556">,</span>&nbsp;<span class="ident" id="2173558"><a href="/runtime/traceback.go.html#2173037">flags</a></span><span class="op" id="2173563">|</span><span class="ident" id="2173564"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184194">_TraceRuntimeFrames</a></span><span class="op" id="2173583">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2173586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2173589">if</span>&nbsp;<span class="ident" id="2173592"><a href="/runtime/traceback.go.html#2173056">n</a></span>&nbsp;<span class="op" id="2173594">==</span>&nbsp;<span class="ident" id="2173597"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2184245">_TracebackMaxFrames</a></span>&nbsp;<span class="op" id="2173617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2173621">print</span><span class="op" id="2173626">(</span><span class="string" id="2173627">&#34;...additional&nbsp;frames&nbsp;elided...\n&#34;</span><span class="op" id="2173661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2173664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173667"><a href="/runtime/traceback.go.html#2171874">printcreatedby</a></span><span class="op" id="2173681">(</span><span class="ident" id="2173682"><a href="/runtime/traceback.go.html#2173030">gp</a></span><span class="op" id="2173684">)</span><br>
<span class="lineno">525</span><span class="op" id="2173686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2173689">func</span>&nbsp;<span class="ident" id="2173694">callers</span><span class="op" id="2173701">(</span><span class="ident" id="2173702">skip</span>&nbsp;<span class="builtintype" id="2173707">int</span><span class="op" id="2173710">,</span>&nbsp;<span class="ident" id="2173712">pcbuf</span>&nbsp;<span class="op" id="2173718">*</span><span class="builtintype" id="2173719">uintptr</span><span class="op" id="2173726">,</span>&nbsp;<span class="ident" id="2173728">m</span>&nbsp;<span class="builtintype" id="2173730">int</span><span class="op" id="2173733">)</span>&nbsp;<span class="builtintype" id="2173735">int</span>&nbsp;<span class="op" id="2173739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173742">sp</span>&nbsp;<span class="op" id="2173745">:=</span>&nbsp;<span class="ident" id="2173748"><a href="/runtime/stubs.go.html#2139560">getcallersp</a></span><span class="op" id="2173759">(</span><span class="ident" id="2173760"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2173766">.</span><span class="ident" id="2173767">Pointer</span><span class="op" id="2173774">(</span><span class="op" id="2173775">&amp;</span><span class="ident" id="2173776"><a href="/runtime/traceback.go.html#2173702">skip</a></span><span class="op" id="2173780">)</span><span class="op" id="2173781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173784">pc</span>&nbsp;<span class="op" id="2173787">:=</span>&nbsp;<span class="builtintype" id="2173790">uintptr</span><span class="op" id="2173797">(</span><span class="ident" id="2173798"><a href="/runtime/stubs.go.html#2139499">getcallerpc</a></span><span class="op" id="2173809">(</span><span class="ident" id="2173810"><a href="/runtime/traceback.go.html#2156047">unsafe</a></span><span class="op" id="2173816">.</span><span class="ident" id="2173817">Pointer</span><span class="op" id="2173824">(</span><span class="op" id="2173825">&amp;</span><span class="ident" id="2173826"><a href="/runtime/traceback.go.html#2173702">skip</a></span><span class="op" id="2173830">)</span><span class="op" id="2173831">)</span><span class="op" id="2173832">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2173835">var</span>&nbsp;<span class="ident" id="2173839">n</span>&nbsp;<span class="builtintype" id="2173841">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173846"><a href="/runtime/stubs.go.html#2134137">onM</a></span><span class="op" id="2173849">(</span><span class="keyword" id="2173850">func</span><span class="op" id="2173854">(</span><span class="op" id="2173855">)</span>&nbsp;<span class="op" id="2173857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2173861"><a href="/runtime/traceback.go.html#2173839">n</a></span>&nbsp;<span class="op" id="2173863">=</span>&nbsp;<span class="ident" id="2173865"><a href="/runtime/traceback.go.html#2159312">gentraceback</a></span><span class="op" id="2173877">(</span><span class="ident" id="2173878"><a href="/runtime/traceback.go.html#2173784">pc</a></span><span class="op" id="2173880">,</span>&nbsp;<span class="ident" id="2173882"><a href="/runtime/traceback.go.html#2173742">sp</a></span><span class="op" id="2173884">,</span>&nbsp;<span class="num" id="2173886">0</span><span class="op" id="2173887">,</span>&nbsp;<span class="ident" id="2173889"><a href="/runtime/stubs.go.html#2132021">getg</a></span><span class="op" id="2173893">(</span><span class="op" id="2173894">)</span><span class="op" id="2173895">,</span>&nbsp;<span class="ident" id="2173897"><a href="/runtime/traceback.go.html#2173702">skip</a></span><span class="op" id="2173901">,</span>&nbsp;<span class="ident" id="2173903"><a href="/runtime/traceback.go.html#2173712">pcbuf</a></span><span class="op" id="2173908">,</span>&nbsp;<span class="ident" id="2173910"><a href="/runtime/traceback.go.html#2173728">m</a></span><span class="op" id="2173911">,</span>&nbsp;<span class="ident" id="2173913">nil</span><span class="op" id="2173916">,</span>&nbsp;<span class="ident" id="2173918">nil</span><span class="op" id="2173921">,</span>&nbsp;<span class="num" id="2173923">0</span><span class="op" id="2173924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2173927">}</span><span class="op" id="2173928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2173931">return</span>&nbsp;<span class="ident" id="2173938"><a href="/runtime/traceback.go.html#2173839">n</a></span><br>
<span class="lineno">535</span><span class="op" id="2173940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2173943">func</span>&nbsp;<span class="ident" id="2173948">gcallers</span><span class="op" id="2173956">(</span><span class="ident" id="2173957">gp</span>&nbsp;<span class="op" id="2173960">*</span><span class="ident" id="2173961"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2173962">,</span>&nbsp;<span class="ident" id="2173964">skip</span>&nbsp;<span class="builtintype" id="2173969">int</span><span class="op" id="2173972">,</span>&nbsp;<span class="ident" id="2173974">pcbuf</span>&nbsp;<span class="op" id="2173980">*</span><span class="builtintype" id="2173981">uintptr</span><span class="op" id="2173988">,</span>&nbsp;<span class="ident" id="2173990">m</span>&nbsp;<span class="builtintype" id="2173992">int</span><span class="op" id="2173995">)</span>&nbsp;<span class="builtintype" id="2173997">int</span>&nbsp;<span class="op" id="2174001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174004">return</span>&nbsp;<span class="ident" id="2174011"><a href="/runtime/traceback.go.html#2159312">gentraceback</a></span><span class="op" id="2174023">(</span><span class="op" id="2174024">^</span><span class="builtintype" id="2174025">uintptr</span><span class="op" id="2174032">(</span><span class="num" id="2174033">0</span><span class="op" id="2174034">)</span><span class="op" id="2174035">,</span>&nbsp;<span class="op" id="2174037">^</span><span class="builtintype" id="2174038">uintptr</span><span class="op" id="2174045">(</span><span class="num" id="2174046">0</span><span class="op" id="2174047">)</span><span class="op" id="2174048">,</span>&nbsp;<span class="num" id="2174050">0</span><span class="op" id="2174051">,</span>&nbsp;<span class="ident" id="2174053"><a href="/runtime/traceback.go.html#2173957">gp</a></span><span class="op" id="2174055">,</span>&nbsp;<span class="ident" id="2174057"><a href="/runtime/traceback.go.html#2173964">skip</a></span><span class="op" id="2174061">,</span>&nbsp;<span class="ident" id="2174063"><a href="/runtime/traceback.go.html#2173974">pcbuf</a></span><span class="op" id="2174068">,</span>&nbsp;<span class="ident" id="2174070"><a href="/runtime/traceback.go.html#2173990">m</a></span><span class="op" id="2174071">,</span>&nbsp;<span class="ident" id="2174073">nil</span><span class="op" id="2174076">,</span>&nbsp;<span class="ident" id="2174078">nil</span><span class="op" id="2174081">,</span>&nbsp;<span class="num" id="2174083">0</span><span class="op" id="2174084">)</span><br>
<span class="lineno"></span><span class="op" id="2174086">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span><span class="keyword" id="2174089">func</span>&nbsp;<span class="ident" id="2174094">showframe</span><span class="op" id="2174103">(</span><span class="ident" id="2174104">f</span>&nbsp;<span class="op" id="2174106">*</span><span class="ident" id="2174107"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2182639">_func</a></span><span class="op" id="2174112">,</span>&nbsp;<span class="ident" id="2174114">gp</span>&nbsp;<span class="op" id="2174117">*</span><span class="ident" id="2174118"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2174119">)</span>&nbsp;<span class="builtintype" id="2174121">bool</span>&nbsp;<span class="op" id="2174126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2174129">g</span>&nbsp;<span class="op" id="2174131">:=</span>&nbsp;<span class="ident" id="2174134"><a href="/runtime/stubs.go.html#2132021">getg</a></span><span class="op" id="2174138">(</span><span class="op" id="2174139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174142">if</span>&nbsp;<span class="ident" id="2174145"><a href="/runtime/traceback.go.html#2174129">g</a></span><span class="op" id="2174146">.</span><span class="ident" id="2174147">m</span><span class="op" id="2174148">.</span><span class="ident" id="2174149">throwing</span>&nbsp;<span class="op" id="2174158">&gt;</span>&nbsp;<span class="num" id="2174160">0</span>&nbsp;<span class="op" id="2174162">&amp;&amp;</span>&nbsp;<span class="ident" id="2174165"><a href="/runtime/traceback.go.html#2174114">gp</a></span>&nbsp;<span class="op" id="2174168">!=</span>&nbsp;<span class="ident" id="2174171">nil</span>&nbsp;<span class="op" id="2174175">&amp;&amp;</span>&nbsp;<span class="op" id="2174178">(</span><span class="ident" id="2174179"><a href="/runtime/traceback.go.html#2174114">gp</a></span>&nbsp;<span class="op" id="2174182">==</span>&nbsp;<span class="ident" id="2174185"><a href="/runtime/traceback.go.html#2174129">g</a></span><span class="op" id="2174186">.</span><span class="ident" id="2174187">m</span><span class="op" id="2174188">.</span><span class="ident" id="2174189">curg</span>&nbsp;<span class="op" id="2174194">||</span>&nbsp;<span class="ident" id="2174197"><a href="/runtime/traceback.go.html#2174114">gp</a></span>&nbsp;<span class="op" id="2174200">==</span>&nbsp;<span class="ident" id="2174203"><a href="/runtime/traceback.go.html#2174129">g</a></span><span class="op" id="2174204">.</span><span class="ident" id="2174205">m</span><span class="op" id="2174206">.</span><span class="ident" id="2174207">caughtsig</span><span class="op" id="2174216">)</span>&nbsp;<span class="op" id="2174218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174222">return</span>&nbsp;<span class="builtintype" id="2174229">true</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2174235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2174238">traceback</span>&nbsp;<span class="op" id="2174248">:=</span>&nbsp;<span class="ident" id="2174251"><a href="/runtime/stubs.go.html#2139804">gotraceback</a></span><span class="op" id="2174262">(</span><span class="ident" id="2174263">nil</span><span class="op" id="2174266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2174269">name</span>&nbsp;<span class="op" id="2174274">:=</span>&nbsp;<span class="ident" id="2174277"><a href="/runtime/stubs.go.html#2137710">gostringnocopy</a></span><span class="op" id="2174291">(</span><span class="ident" id="2174292"><a href="/runtime/symtab.go.html#2147493">funcname</a></span><span class="op" id="2174300">(</span><span class="ident" id="2174301"><a href="/runtime/traceback.go.html#2174104">f</a></span><span class="op" id="2174302">)</span><span class="op" id="2174303">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2174307">//&nbsp;Special&nbsp;case:&nbsp;always&nbsp;show&nbsp;runtime.panic&nbsp;frame,&nbsp;so&nbsp;that&nbsp;we&nbsp;can</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2174373">//&nbsp;see&nbsp;where&nbsp;a&nbsp;panic&nbsp;started&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;a&nbsp;stack&nbsp;trace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2174435">//&nbsp;See&nbsp;golang.org/issue/5832.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174466">if</span>&nbsp;<span class="ident" id="2174469"><a href="/runtime/traceback.go.html#2174269">name</a></span>&nbsp;<span class="op" id="2174474">==</span>&nbsp;<span class="string" id="2174477">&#34;runtime.panic&#34;</span>&nbsp;<span class="op" id="2174493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174497">return</span>&nbsp;<span class="builtintype" id="2174504">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2174510">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174514">return</span>&nbsp;<span class="ident" id="2174521"><a href="/runtime/traceback.go.html#2174238">traceback</a></span>&nbsp;<span class="op" id="2174531">&gt;</span>&nbsp;<span class="num" id="2174533">1</span>&nbsp;<span class="op" id="2174535">||</span>&nbsp;<span class="ident" id="2174538"><a href="/runtime/traceback.go.html#2174104">f</a></span>&nbsp;<span class="op" id="2174540">!=</span>&nbsp;<span class="ident" id="2174543">nil</span>&nbsp;<span class="op" id="2174547">&amp;&amp;</span>&nbsp;<span class="ident" id="2174550"><a href="/runtime/string.go.html#2131103">contains</a></span><span class="op" id="2174558">(</span><span class="ident" id="2174559"><a href="/runtime/traceback.go.html#2174269">name</a></span><span class="op" id="2174563">,</span>&nbsp;<span class="string" id="2174565">&#34;.&#34;</span><span class="op" id="2174568">)</span>&nbsp;<span class="op" id="2174570">&amp;&amp;</span>&nbsp;<span class="op" id="2174573">(</span><span class="op" id="2174574">!</span><span class="ident" id="2174575"><a href="/runtime/string.go.html#2131165">hasprefix</a></span><span class="op" id="2174584">(</span><span class="ident" id="2174585"><a href="/runtime/traceback.go.html#2174269">name</a></span><span class="op" id="2174589">,</span>&nbsp;<span class="string" id="2174591">&#34;runtime.&#34;</span><span class="op" id="2174601">)</span>&nbsp;<span class="op" id="2174603">||</span>&nbsp;<span class="ident" id="2174606"><a href="/runtime/traceback.go.html#2174773">isExportedRuntime</a></span><span class="op" id="2174623">(</span><span class="ident" id="2174624"><a href="/runtime/traceback.go.html#2174269">name</a></span><span class="op" id="2174628">)</span><span class="op" id="2174629">)</span><br>
<span class="lineno"></span><span class="op" id="2174631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2174634">//&nbsp;isExportedRuntime&nbsp;reports&nbsp;whether&nbsp;name&nbsp;is&nbsp;an&nbsp;exported&nbsp;runtime&nbsp;function.</span><br>
<span class="lineno">560</span><span class="comment" id="2174709">//&nbsp;It&nbsp;is&nbsp;only&nbsp;for&nbsp;runtime&nbsp;functions,&nbsp;so&nbsp;ASCII&nbsp;A-Z&nbsp;is&nbsp;fine.</span><br>
<span class="lineno"></span><span class="keyword" id="2174768">func</span>&nbsp;<span class="ident" id="2174773">isExportedRuntime</span><span class="op" id="2174790">(</span><span class="ident" id="2174791">name</span>&nbsp;<span class="builtintype" id="2174796">string</span><span class="op" id="2174802">)</span>&nbsp;<span class="builtintype" id="2174804">bool</span>&nbsp;<span class="op" id="2174809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174812">const</span>&nbsp;<span class="ident" id="2174818">n</span>&nbsp;<span class="op" id="2174820">=</span>&nbsp;<span class="builtinfunc" id="2174822">len</span><span class="op" id="2174825">(</span><span class="string" id="2174826">&#34;runtime.&#34;</span><span class="op" id="2174836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2174839">return</span>&nbsp;<span class="builtinfunc" id="2174846">len</span><span class="op" id="2174849">(</span><span class="ident" id="2174850"><a href="/runtime/traceback.go.html#2174791">name</a></span><span class="op" id="2174854">)</span>&nbsp;<span class="op" id="2174856">&gt;</span>&nbsp;<span class="ident" id="2174858"><a href="/runtime/traceback.go.html#2174818">n</a></span>&nbsp;<span class="op" id="2174860">&amp;&amp;</span>&nbsp;<span class="ident" id="2174863"><a href="/runtime/traceback.go.html#2174791">name</a></span><span class="op" id="2174867">[</span><span class="op" id="2174868">:</span><span class="ident" id="2174869"><a href="/runtime/traceback.go.html#2174818">n</a></span><span class="op" id="2174870">]</span>&nbsp;<span class="op" id="2174872">==</span>&nbsp;<span class="string" id="2174875">&#34;runtime.&#34;</span>&nbsp;<span class="op" id="2174886">&amp;&amp;</span>&nbsp;<span class="string" id="2174889">&#39;A&#39;</span>&nbsp;<span class="op" id="2174893">&lt;=</span>&nbsp;<span class="ident" id="2174896"><a href="/runtime/traceback.go.html#2174791">name</a></span><span class="op" id="2174900">[</span><span class="ident" id="2174901"><a href="/runtime/traceback.go.html#2174818">n</a></span><span class="op" id="2174902">]</span>&nbsp;<span class="op" id="2174904">&amp;&amp;</span>&nbsp;<span class="ident" id="2174907"><a href="/runtime/traceback.go.html#2174791">name</a></span><span class="op" id="2174911">[</span><span class="ident" id="2174912"><a href="/runtime/traceback.go.html#2174818">n</a></span><span class="op" id="2174913">]</span>&nbsp;<span class="op" id="2174915">&lt;=</span>&nbsp;<span class="string" id="2174918">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2174922">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span><span class="keyword" id="2174925">var</span>&nbsp;<span class="ident" id="2174929">gStatusStrings</span>&nbsp;<span class="op" id="2174944">=</span>&nbsp;<span class="op" id="2174946">[</span><span class="op" id="2174947">...</span><span class="op" id="2174950">]</span><span class="builtintype" id="2174951">string</span><span class="op" id="2174957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2174960"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178858">_Gidle</a></span><span class="op" id="2174966">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2174973">&#34;idle&#34;</span><span class="op" id="2174979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2174982"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178875">_Grunnable</a></span><span class="op" id="2174992">:</span>&nbsp;&nbsp;<span class="string" id="2174995">&#34;runnable&#34;</span><span class="op" id="2175005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175008"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178896">_Grunning</a></span><span class="op" id="2175017">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="2175021">&#34;running&#34;</span><span class="op" id="2175030">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175033"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178916">_Gsyscall</a></span><span class="op" id="2175042">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="2175046">&#34;syscall&#34;</span><span class="op" id="2175055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175058"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178936">_Gwaiting</a></span><span class="op" id="2175067">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="2175071">&#34;waiting&#34;</span><span class="op" id="2175080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175083"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178984">_Gdead</a></span><span class="op" id="2175089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2175096">&#34;dead&#34;</span><span class="op" id="2175102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175105"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179001">_Genqueue</a></span><span class="op" id="2175114">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="2175118">&#34;enqueue&#34;</span><span class="op" id="2175127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175130"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179021">_Gcopystack</a></span><span class="op" id="2175141">:</span>&nbsp;<span class="string" id="2175143">&#34;copystack&#34;</span><span class="op" id="2175154">,</span><br>
<span class="lineno">575</span><span class="op" id="2175156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2175159">var</span>&nbsp;<span class="ident" id="2175163">gScanStatusStrings</span>&nbsp;<span class="op" id="2175182">=</span>&nbsp;<span class="op" id="2175184">[</span><span class="op" id="2175185">...</span><span class="op" id="2175188">]</span><span class="builtintype" id="2175189">string</span><span class="op" id="2175195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2175198">0</span><span class="op" id="2175199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2175210">&#34;scan&#34;</span><span class="op" id="2175216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175219"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178875">_Grunnable</a></span><span class="op" id="2175229">:</span>&nbsp;<span class="string" id="2175231">&#34;scanrunnable&#34;</span><span class="op" id="2175245">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175248"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178896">_Grunning</a></span><span class="op" id="2175257">:</span>&nbsp;&nbsp;<span class="string" id="2175260">&#34;scanrunning&#34;</span><span class="op" id="2175273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175276"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178916">_Gsyscall</a></span><span class="op" id="2175285">:</span>&nbsp;&nbsp;<span class="string" id="2175288">&#34;scansyscall&#34;</span><span class="op" id="2175301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175304"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178936">_Gwaiting</a></span><span class="op" id="2175313">:</span>&nbsp;&nbsp;<span class="string" id="2175316">&#34;scanwaiting&#34;</span><span class="op" id="2175329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175332"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178984">_Gdead</a></span><span class="op" id="2175338">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2175344">&#34;scandead&#34;</span><span class="op" id="2175354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175357"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179001">_Genqueue</a></span><span class="op" id="2175366">:</span>&nbsp;&nbsp;<span class="string" id="2175369">&#34;scanenqueue&#34;</span><span class="op" id="2175382">,</span><br>
<span class="lineno">585</span><span class="op" id="2175384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2175387">func</span>&nbsp;<span class="ident" id="2175392">goroutineheader</span><span class="op" id="2175407">(</span><span class="ident" id="2175408">gp</span>&nbsp;<span class="op" id="2175411">*</span><span class="ident" id="2175412"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2175413">)</span>&nbsp;<span class="op" id="2175415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175418">gpstatus</span>&nbsp;<span class="op" id="2175427">:=</span>&nbsp;<span class="ident" id="2175430"><a href="/runtime/stubs.go.html#2132100">readgstatus</a></span><span class="op" id="2175441">(</span><span class="ident" id="2175442"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2175444">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2175448">//&nbsp;Basic&nbsp;string&nbsp;status</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2175472">var</span>&nbsp;<span class="ident" id="2175476">status</span>&nbsp;<span class="builtintype" id="2175483">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2175491">if</span>&nbsp;<span class="num" id="2175494">0</span>&nbsp;<span class="op" id="2175496">&lt;=</span>&nbsp;<span class="ident" id="2175499"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2175508">&amp;&amp;</span>&nbsp;<span class="ident" id="2175511"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2175520">&lt;</span>&nbsp;<span class="builtintype" id="2175522">uint32</span><span class="op" id="2175528">(</span><span class="builtinfunc" id="2175529">len</span><span class="op" id="2175532">(</span><span class="ident" id="2175533"><a href="/runtime/traceback.go.html#2174929">gStatusStrings</a></span><span class="op" id="2175547">)</span><span class="op" id="2175548">)</span>&nbsp;<span class="op" id="2175550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175554"><a href="/runtime/traceback.go.html#2175476">status</a></span>&nbsp;<span class="op" id="2175561">=</span>&nbsp;<span class="ident" id="2175563"><a href="/runtime/traceback.go.html#2174929">gStatusStrings</a></span><span class="op" id="2175577">[</span><span class="ident" id="2175578"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span><span class="op" id="2175586">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2175589">}</span>&nbsp;<span class="keyword" id="2175591">else</span>&nbsp;<span class="keyword" id="2175596">if</span>&nbsp;<span class="ident" id="2175599"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span><span class="op" id="2175607">&amp;</span><span class="ident" id="2175608"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span>&nbsp;<span class="op" id="2175615">!=</span>&nbsp;<span class="num" id="2175618">0</span>&nbsp;<span class="op" id="2175620">&amp;&amp;</span>&nbsp;<span class="num" id="2175623">0</span>&nbsp;<span class="op" id="2175625">&lt;=</span>&nbsp;<span class="ident" id="2175628"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span><span class="op" id="2175636">&amp;^</span><span class="ident" id="2175638"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span>&nbsp;<span class="op" id="2175645">&amp;&amp;</span>&nbsp;<span class="ident" id="2175648"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span><span class="op" id="2175656">&amp;^</span><span class="ident" id="2175658"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span>&nbsp;<span class="op" id="2175665">&lt;</span>&nbsp;<span class="builtintype" id="2175667">uint32</span><span class="op" id="2175673">(</span><span class="builtinfunc" id="2175674">len</span><span class="op" id="2175677">(</span><span class="ident" id="2175678"><a href="/runtime/traceback.go.html#2174929">gStatusStrings</a></span><span class="op" id="2175692">)</span><span class="op" id="2175693">)</span>&nbsp;<span class="op" id="2175695">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175699"><a href="/runtime/traceback.go.html#2175476">status</a></span>&nbsp;<span class="op" id="2175706">=</span>&nbsp;<span class="ident" id="2175708"><a href="/runtime/traceback.go.html#2174929">gStatusStrings</a></span><span class="op" id="2175722">[</span><span class="ident" id="2175723"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span><span class="op" id="2175731">&amp;^</span><span class="ident" id="2175733"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span><span class="op" id="2175739">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2175742">}</span>&nbsp;<span class="keyword" id="2175744">else</span>&nbsp;<span class="op" id="2175749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175753"><a href="/runtime/traceback.go.html#2175476">status</a></span>&nbsp;<span class="op" id="2175760">=</span>&nbsp;<span class="string" id="2175762">&#34;???&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2175769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2175773">//&nbsp;Override.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2175787">if</span>&nbsp;<span class="op" id="2175790">(</span><span class="ident" id="2175791"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2175800">==</span>&nbsp;<span class="ident" id="2175803"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178936">_Gwaiting</a></span>&nbsp;<span class="op" id="2175813">||</span>&nbsp;<span class="ident" id="2175816"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2175825">==</span>&nbsp;<span class="ident" id="2175828"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179145">_Gscanwaiting</a></span><span class="op" id="2175841">)</span>&nbsp;<span class="op" id="2175843">&amp;&amp;</span>&nbsp;<span class="ident" id="2175846"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2175848">.</span><span class="ident" id="2175849">waitreason</span>&nbsp;<span class="op" id="2175860">!=</span>&nbsp;<span class="string" id="2175863">&#34;&#34;</span>&nbsp;<span class="op" id="2175866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175870"><a href="/runtime/traceback.go.html#2175476">status</a></span>&nbsp;<span class="op" id="2175877">=</span>&nbsp;<span class="ident" id="2175879"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2175881">.</span><span class="ident" id="2175882">waitreason</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2175894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2175898">//&nbsp;approx&nbsp;time&nbsp;the&nbsp;G&nbsp;is&nbsp;blocked,&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2175943">var</span>&nbsp;<span class="ident" id="2175947">waitfor</span>&nbsp;<span class="ident" id="2175955">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2175962"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2175971">&amp;^=</span>&nbsp;<span class="ident" id="2175975"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span>&nbsp;<span class="comment" id="2175982">//&nbsp;drop&nbsp;the&nbsp;scan&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176004">if</span>&nbsp;<span class="op" id="2176007">(</span><span class="ident" id="2176008"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2176017">==</span>&nbsp;<span class="ident" id="2176020"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178936">_Gwaiting</a></span>&nbsp;<span class="op" id="2176030">||</span>&nbsp;<span class="ident" id="2176033"><a href="/runtime/traceback.go.html#2175418">gpstatus</a></span>&nbsp;<span class="op" id="2176042">==</span>&nbsp;<span class="ident" id="2176045"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178916">_Gsyscall</a></span><span class="op" id="2176054">)</span>&nbsp;<span class="op" id="2176056">&amp;&amp;</span>&nbsp;<span class="ident" id="2176059"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2176061">.</span><span class="ident" id="2176062">waitsince</span>&nbsp;<span class="op" id="2176072">!=</span>&nbsp;<span class="num" id="2176075">0</span>&nbsp;<span class="op" id="2176077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176081"><a href="/runtime/traceback.go.html#2175947">waitfor</a></span>&nbsp;<span class="op" id="2176089">=</span>&nbsp;<span class="op" id="2176091">(</span><span class="ident" id="2176092"><a href="/runtime/stubs.go.html#2137038">nanotime</a></span><span class="op" id="2176100">(</span><span class="op" id="2176101">)</span>&nbsp;<span class="op" id="2176103">-</span>&nbsp;<span class="ident" id="2176105"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2176107">.</span><span class="ident" id="2176108">waitsince</span><span class="op" id="2176117">)</span>&nbsp;<span class="op" id="2176119">/</span>&nbsp;<span class="num" id="2176121">60e9</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176130">print</span><span class="op" id="2176135">(</span><span class="string" id="2176136">&#34;goroutine&nbsp;&#34;</span><span class="op" id="2176148">,</span>&nbsp;<span class="ident" id="2176150"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2176152">.</span><span class="ident" id="2176153">goid</span><span class="op" id="2176157">,</span>&nbsp;<span class="string" id="2176159">&#34;&nbsp;[&#34;</span><span class="op" id="2176163">,</span>&nbsp;<span class="ident" id="2176165"><a href="/runtime/traceback.go.html#2175476">status</a></span><span class="op" id="2176171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176174">if</span>&nbsp;<span class="ident" id="2176177"><a href="/runtime/traceback.go.html#2175947">waitfor</a></span>&nbsp;<span class="op" id="2176185">&gt;=</span>&nbsp;<span class="num" id="2176188">1</span>&nbsp;<span class="op" id="2176190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176194">print</span><span class="op" id="2176199">(</span><span class="string" id="2176200">&#34;,&nbsp;&#34;</span><span class="op" id="2176204">,</span>&nbsp;<span class="ident" id="2176206"><a href="/runtime/traceback.go.html#2175947">waitfor</a></span><span class="op" id="2176213">,</span>&nbsp;<span class="string" id="2176215">&#34;&nbsp;minutes&#34;</span><span class="op" id="2176225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176228">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176231">if</span>&nbsp;<span class="ident" id="2176234"><a href="/runtime/traceback.go.html#2175408">gp</a></span><span class="op" id="2176236">.</span><span class="ident" id="2176237">lockedm</span>&nbsp;<span class="op" id="2176245">!=</span>&nbsp;<span class="ident" id="2176248">nil</span>&nbsp;<span class="op" id="2176252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176256">print</span><span class="op" id="2176261">(</span><span class="string" id="2176262">&#34;,&nbsp;locked&nbsp;to&nbsp;thread&#34;</span><span class="op" id="2176282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176288">print</span><span class="op" id="2176293">(</span><span class="string" id="2176294">&#34;]:\n&#34;</span><span class="op" id="2176300">)</span><br>
<span class="lineno"></span><span class="op" id="2176302">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span><span class="keyword" id="2176305">func</span>&nbsp;<span class="ident" id="2176310">tracebackothers</span><span class="op" id="2176325">(</span><span class="ident" id="2176326">me</span>&nbsp;<span class="op" id="2176329">*</span><span class="ident" id="2176330"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2180373">g</a></span><span class="op" id="2176331">)</span>&nbsp;<span class="op" id="2176333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176336">level</span>&nbsp;<span class="op" id="2176342">:=</span>&nbsp;<span class="ident" id="2176345"><a href="/runtime/stubs.go.html#2139804">gotraceback</a></span><span class="op" id="2176356">(</span><span class="ident" id="2176357">nil</span><span class="op" id="2176360">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2176364">//&nbsp;Show&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;first,&nbsp;if&nbsp;we&nbsp;haven&#39;t&nbsp;already.</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176425">g</span>&nbsp;<span class="op" id="2176427">:=</span>&nbsp;<span class="ident" id="2176430"><a href="/runtime/stubs.go.html#2132021">getg</a></span><span class="op" id="2176434">(</span><span class="op" id="2176435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176438">gp</span>&nbsp;<span class="op" id="2176441">:=</span>&nbsp;<span class="ident" id="2176444"><a href="/runtime/traceback.go.html#2176425">g</a></span><span class="op" id="2176445">.</span><span class="ident" id="2176446">m</span><span class="op" id="2176447">.</span><span class="ident" id="2176448">curg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176454">if</span>&nbsp;<span class="ident" id="2176457"><a href="/runtime/traceback.go.html#2176438">gp</a></span>&nbsp;<span class="op" id="2176460">!=</span>&nbsp;<span class="ident" id="2176463">nil</span>&nbsp;<span class="op" id="2176467">&amp;&amp;</span>&nbsp;<span class="ident" id="2176470"><a href="/runtime/traceback.go.html#2176438">gp</a></span>&nbsp;<span class="op" id="2176473">!=</span>&nbsp;<span class="ident" id="2176476"><a href="/runtime/traceback.go.html#2176326">me</a></span>&nbsp;<span class="op" id="2176479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176483">print</span><span class="op" id="2176488">(</span><span class="string" id="2176489">&#34;\n&#34;</span><span class="op" id="2176493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176497"><a href="/runtime/traceback.go.html#2175392">goroutineheader</a></span><span class="op" id="2176512">(</span><span class="ident" id="2176513"><a href="/runtime/traceback.go.html#2176438">gp</a></span><span class="op" id="2176515">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176519"><a href="/runtime/traceback.go.html#2172370">traceback</a></span><span class="op" id="2176528">(</span><span class="op" id="2176529">^</span><span class="builtintype" id="2176530">uintptr</span><span class="op" id="2176537">(</span><span class="num" id="2176538">0</span><span class="op" id="2176539">)</span><span class="op" id="2176540">,</span>&nbsp;<span class="op" id="2176542">^</span><span class="builtintype" id="2176543">uintptr</span><span class="op" id="2176550">(</span><span class="num" id="2176551">0</span><span class="op" id="2176552">)</span><span class="op" id="2176553">,</span>&nbsp;<span class="num" id="2176555">0</span><span class="op" id="2176556">,</span>&nbsp;<span class="ident" id="2176558"><a href="/runtime/traceback.go.html#2176438">gp</a></span><span class="op" id="2176560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176567"><a href="/runtime/lock_futex.go.html#1978439">lock</a></span><span class="op" id="2176571">(</span><span class="op" id="2176572">&amp;</span><span class="ident" id="2176573"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2196731">allglock</a></span><span class="op" id="2176581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176584">for</span>&nbsp;<span class="ident" id="2176588">_</span><span class="op" id="2176589">,</span>&nbsp;<span class="ident" id="2176591">gp</span>&nbsp;<span class="op" id="2176594">:=</span>&nbsp;<span class="keyword" id="2176597">range</span>&nbsp;<span class="ident" id="2176603"><a href="/runtime/mprof.go.html#2026632">allgs</a></span>&nbsp;<span class="op" id="2176609">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176613">if</span>&nbsp;<span class="ident" id="2176616"><a href="/runtime/traceback.go.html#2176591">gp</a></span>&nbsp;<span class="op" id="2176619">==</span>&nbsp;<span class="ident" id="2176622"><a href="/runtime/traceback.go.html#2176326">me</a></span>&nbsp;<span class="op" id="2176625">||</span>&nbsp;<span class="ident" id="2176628"><a href="/runtime/traceback.go.html#2176591">gp</a></span>&nbsp;<span class="op" id="2176631">==</span>&nbsp;<span class="ident" id="2176634"><a href="/runtime/traceback.go.html#2176425">g</a></span><span class="op" id="2176635">.</span><span class="ident" id="2176636">m</span><span class="op" id="2176637">.</span><span class="ident" id="2176638">curg</span>&nbsp;<span class="op" id="2176643">||</span>&nbsp;<span class="ident" id="2176646"><a href="/runtime/stubs.go.html#2132100">readgstatus</a></span><span class="op" id="2176657">(</span><span class="ident" id="2176658"><a href="/runtime/traceback.go.html#2176591">gp</a></span><span class="op" id="2176660">)</span>&nbsp;<span class="op" id="2176662">==</span>&nbsp;<span class="ident" id="2176665"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178984">_Gdead</a></span>&nbsp;<span class="op" id="2176672">||</span>&nbsp;<span class="ident" id="2176675"><a href="/runtime/traceback.go.html#2176591">gp</a></span><span class="op" id="2176677">.</span><span class="ident" id="2176678">issystem</span>&nbsp;<span class="op" id="2176687">&amp;&amp;</span>&nbsp;<span class="ident" id="2176690"><a href="/runtime/traceback.go.html#2176336">level</a></span>&nbsp;<span class="op" id="2176696">&lt;</span>&nbsp;<span class="num" id="2176698">2</span>&nbsp;<span class="op" id="2176700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176705">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176720">print</span><span class="op" id="2176725">(</span><span class="string" id="2176726">&#34;\n&#34;</span><span class="op" id="2176730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176734"><a href="/runtime/traceback.go.html#2175392">goroutineheader</a></span><span class="op" id="2176749">(</span><span class="ident" id="2176750"><a href="/runtime/traceback.go.html#2176591">gp</a></span><span class="op" id="2176752">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2176756">if</span>&nbsp;<span class="ident" id="2176759"><a href="/runtime/stubs.go.html#2132100">readgstatus</a></span><span class="op" id="2176770">(</span><span class="ident" id="2176771"><a href="/runtime/traceback.go.html#2176591">gp</a></span><span class="op" id="2176773">)</span><span class="op" id="2176774">&amp;^</span><span class="ident" id="2176776"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2179043">_Gscan</a></span>&nbsp;<span class="op" id="2176783">==</span>&nbsp;<span class="ident" id="2176786"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2178896">_Grunning</a></span>&nbsp;<span class="op" id="2176796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2176801">print</span><span class="op" id="2176806">(</span><span class="string" id="2176807">&#34;\tgoroutine&nbsp;running&nbsp;on&nbsp;other&nbsp;thread;&nbsp;stack&nbsp;unavailable\n&#34;</span><span class="op" id="2176865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176870"><a href="/runtime/traceback.go.html#2171874">printcreatedby</a></span><span class="op" id="2176884">(</span><span class="ident" id="2176885"><a href="/runtime/traceback.go.html#2176591">gp</a></span><span class="op" id="2176887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176891">}</span>&nbsp;<span class="keyword" id="2176893">else</span>&nbsp;<span class="op" id="2176898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176903"><a href="/runtime/traceback.go.html#2172370">traceback</a></span><span class="op" id="2176912">(</span><span class="op" id="2176913">^</span><span class="builtintype" id="2176914">uintptr</span><span class="op" id="2176921">(</span><span class="num" id="2176922">0</span><span class="op" id="2176923">)</span><span class="op" id="2176924">,</span>&nbsp;<span class="op" id="2176926">^</span><span class="builtintype" id="2176927">uintptr</span><span class="op" id="2176934">(</span><span class="num" id="2176935">0</span><span class="op" id="2176936">)</span><span class="op" id="2176937">,</span>&nbsp;<span class="num" id="2176939">0</span><span class="op" id="2176940">,</span>&nbsp;<span class="ident" id="2176942"><a href="/runtime/traceback.go.html#2176591">gp</a></span><span class="op" id="2176944">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2176951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2176954"><a href="/runtime/lock_futex.go.html#1979731">unlock</a></span><span class="op" id="2176960">(</span><span class="op" id="2176961">&amp;</span><span class="ident" id="2176962"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2196731">allglock</a></span><span class="op" id="2176970">)</span><br>
<span class="lineno"></span><span class="op" id="2176972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="comment" id="2176975">//&nbsp;Does&nbsp;f&nbsp;mark&nbsp;the&nbsp;top&nbsp;of&nbsp;a&nbsp;goroutine&nbsp;stack?</span><br>
<span class="lineno"></span><span class="keyword" id="2177020">func</span>&nbsp;<span class="ident" id="2177025">topofstack</span><span class="op" id="2177035">(</span><span class="ident" id="2177036">f</span>&nbsp;<span class="op" id="2177038">*</span><span class="ident" id="2177039"><a href="/runtime/zruntime_defs_linux_amd64.go.html#2182639">_func</a></span><span class="op" id="2177044">)</span>&nbsp;<span class="builtintype" id="2177046">bool</span>&nbsp;<span class="op" id="2177051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2177054">pc</span>&nbsp;<span class="op" id="2177057">:=</span>&nbsp;<span class="ident" id="2177060"><a href="/runtime/traceback.go.html#2177036">f</a></span><span class="op" id="2177061">.</span><span class="ident" id="2177062">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2177069">return</span>&nbsp;<span class="ident" id="2177076"><a href="/runtime/traceback.go.html#2177054">pc</a></span>&nbsp;<span class="op" id="2177079">==</span>&nbsp;<span class="ident" id="2177082"><a href="/runtime/traceback.go.html#2157428">goexitPC</a></span>&nbsp;<span class="op" id="2177091">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2177096"><a href="/runtime/traceback.go.html#2177054">pc</a></span>&nbsp;<span class="op" id="2177099">==</span>&nbsp;<span class="ident" id="2177102"><a href="/runtime/traceback.go.html#2157512">mstartPC</a></span>&nbsp;<span class="op" id="2177111">||</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2177116"><a href="/runtime/traceback.go.html#2177054">pc</a></span>&nbsp;<span class="op" id="2177119">==</span>&nbsp;<span class="ident" id="2177122"><a href="/runtime/traceback.go.html#2157470">mcallPC</a></span>&nbsp;<span class="op" id="2177130">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2177135"><a href="/runtime/traceback.go.html#2177054">pc</a></span>&nbsp;<span class="op" id="2177138">==</span>&nbsp;<span class="ident" id="2177141"><a href="/runtime/traceback.go.html#2157491">morestackPC</a></span>&nbsp;<span class="op" id="2177153">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2177158"><a href="/runtime/traceback.go.html#2177054">pc</a></span>&nbsp;<span class="op" id="2177161">==</span>&nbsp;<span class="ident" id="2177164"><a href="/runtime/traceback.go.html#2157554">rt0_goPC</a></span>&nbsp;<span class="op" id="2177173">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2177178"><a href="/runtime/traceback.go.html#2157597">externalthreadhandlerp</a></span>&nbsp;<span class="op" id="2177201">!=</span>&nbsp;<span class="num" id="2177204">0</span>&nbsp;<span class="op" id="2177206">&amp;&amp;</span>&nbsp;<span class="ident" id="2177209"><a href="/runtime/traceback.go.html#2177054">pc</a></span>&nbsp;<span class="op" id="2177212">==</span>&nbsp;<span class="ident" id="2177215"><a href="/runtime/traceback.go.html#2157597">externalthreadhandlerp</a></span><br>
<span class="lineno"></span><span class="op" id="2177238">}</span>
</div>
</body>
</html>
