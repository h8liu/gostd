<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8259618">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8259673">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8259727">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8259778">package</span>&nbsp;<span class="ident" id="8259786">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259794">import</span>&nbsp;<span class="op" id="8259801">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259804">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259813">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259826">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259838">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259851">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8259862">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8259872">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8259875">const</span>&nbsp;<span class="ident" id="8259881">testfile</span>&nbsp;<span class="op" id="8259890">=</span>&nbsp;<span class="string" id="8259892">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259910">func</span>&nbsp;<span class="ident" id="8259915">diff</span><span class="op" id="8259919">(</span><span class="ident" id="8259920">t</span>&nbsp;<span class="op" id="8259922">*</span><span class="ident" id="8259923">testing</span><span class="op" id="8259930">.</span><span class="ident" id="8259931">T</span><span class="op" id="8259932">,</span>&nbsp;<span class="ident" id="8259934">dst</span><span class="op" id="8259937">,</span>&nbsp;<span class="ident" id="8259939">src</span>&nbsp;<span class="op" id="8259943">[</span><span class="op" id="8259944">]</span><span class="builtintype" id="8259945">byte</span><span class="op" id="8259949">)</span>&nbsp;<span class="op" id="8259951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259954">line</span>&nbsp;<span class="op" id="8259959">:=</span>&nbsp;<span class="num" id="8259962">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259965">offs</span>&nbsp;<span class="op" id="8259970">:=</span>&nbsp;<span class="num" id="8259973">0</span>&nbsp;<span class="comment" id="8259975">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259991">for</span>&nbsp;<span class="ident" id="8259995">i</span>&nbsp;<span class="op" id="8259997">:=</span>&nbsp;<span class="num" id="8260000">0</span><span class="op" id="8260001">;</span>&nbsp;<span class="ident" id="8260003">i</span>&nbsp;<span class="op" id="8260005">&lt;</span>&nbsp;<span class="builtinfunc" id="8260007">len</span><span class="op" id="8260010">(</span><span class="ident" id="8260011">dst</span><span class="op" id="8260014">)</span>&nbsp;<span class="op" id="8260016">&amp;&amp;</span>&nbsp;<span class="ident" id="8260019">i</span>&nbsp;<span class="op" id="8260021">&lt;</span>&nbsp;<span class="builtinfunc" id="8260023">len</span><span class="op" id="8260026">(</span><span class="ident" id="8260027">src</span><span class="op" id="8260030">)</span><span class="op" id="8260031">;</span>&nbsp;<span class="ident" id="8260033">i</span><span class="op" id="8260034">++</span>&nbsp;<span class="op" id="8260037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260041">d</span>&nbsp;<span class="op" id="8260043">:=</span>&nbsp;<span class="ident" id="8260046">dst</span><span class="op" id="8260049">[</span><span class="ident" id="8260050">i</span><span class="op" id="8260051">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260055">s</span>&nbsp;<span class="op" id="8260057">:=</span>&nbsp;<span class="ident" id="8260060">src</span><span class="op" id="8260063">[</span><span class="ident" id="8260064">i</span><span class="op" id="8260065">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260069">if</span>&nbsp;<span class="ident" id="8260072">d</span>&nbsp;<span class="op" id="8260074">!=</span>&nbsp;<span class="ident" id="8260077">s</span>&nbsp;<span class="op" id="8260079">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260084">t</span><span class="op" id="8260085">.</span><span class="ident" id="8260086">Errorf</span><span class="op" id="8260092">(</span><span class="string" id="8260093">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="8260107">,</span>&nbsp;<span class="ident" id="8260109">line</span><span class="op" id="8260113">,</span>&nbsp;<span class="ident" id="8260115">dst</span><span class="op" id="8260118">[</span><span class="ident" id="8260119">offs</span><span class="op" id="8260123">:</span><span class="ident" id="8260124">i</span><span class="op" id="8260125">+</span><span class="num" id="8260126">1</span><span class="op" id="8260127">]</span><span class="op" id="8260128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260133">t</span><span class="op" id="8260134">.</span><span class="ident" id="8260135">Errorf</span><span class="op" id="8260141">(</span><span class="string" id="8260142">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="8260156">,</span>&nbsp;<span class="ident" id="8260158">line</span><span class="op" id="8260162">,</span>&nbsp;<span class="ident" id="8260164">src</span><span class="op" id="8260167">[</span><span class="ident" id="8260168">offs</span><span class="op" id="8260172">:</span><span class="ident" id="8260173">i</span><span class="op" id="8260174">+</span><span class="num" id="8260175">1</span><span class="op" id="8260176">]</span><span class="op" id="8260177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260182">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260195">if</span>&nbsp;<span class="ident" id="8260198">s</span>&nbsp;<span class="op" id="8260200">==</span>&nbsp;<span class="string" id="8260203">&#39;\n&#39;</span>&nbsp;<span class="op" id="8260208">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260213">line</span><span class="op" id="8260217">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260223">offs</span>&nbsp;<span class="op" id="8260228">=</span>&nbsp;<span class="ident" id="8260230">i</span>&nbsp;<span class="op" id="8260232">+</span>&nbsp;<span class="num" id="8260234">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260244">if</span>&nbsp;<span class="builtinfunc" id="8260247">len</span><span class="op" id="8260250">(</span><span class="ident" id="8260251">dst</span><span class="op" id="8260254">)</span>&nbsp;<span class="op" id="8260256">!=</span>&nbsp;<span class="builtinfunc" id="8260259">len</span><span class="op" id="8260262">(</span><span class="ident" id="8260263">src</span><span class="op" id="8260266">)</span>&nbsp;<span class="op" id="8260268">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260272">t</span><span class="op" id="8260273">.</span><span class="ident" id="8260274">Errorf</span><span class="op" id="8260280">(</span><span class="string" id="8260281">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="8260321">,</span>&nbsp;<span class="builtinfunc" id="8260323">len</span><span class="op" id="8260326">(</span><span class="ident" id="8260327">dst</span><span class="op" id="8260330">)</span><span class="op" id="8260331">,</span>&nbsp;<span class="builtinfunc" id="8260333">len</span><span class="op" id="8260336">(</span><span class="ident" id="8260337">src</span><span class="op" id="8260340">)</span><span class="op" id="8260341">,</span>&nbsp;<span class="ident" id="8260343">src</span><span class="op" id="8260346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260349">}</span><br>
<span class="lineno"></span><span class="op" id="8260351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8260354">func</span>&nbsp;<span class="ident" id="8260359">TestNode</span><span class="op" id="8260367">(</span><span class="ident" id="8260368">t</span>&nbsp;<span class="op" id="8260370">*</span><span class="ident" id="8260371">testing</span><span class="op" id="8260378">.</span><span class="ident" id="8260379">T</span><span class="op" id="8260380">)</span>&nbsp;<span class="op" id="8260382">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260385">src</span><span class="op" id="8260388">,</span>&nbsp;<span class="ident" id="8260390">err</span>&nbsp;<span class="op" id="8260394">:=</span>&nbsp;<span class="ident" id="8260397">ioutil</span><span class="op" id="8260403">.</span><span class="ident" id="8260404">ReadFile</span><span class="op" id="8260412">(</span><span class="ident" id="8260413">testfile</span><span class="op" id="8260421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260424">if</span>&nbsp;<span class="ident" id="8260427">err</span>&nbsp;<span class="op" id="8260431">!=</span>&nbsp;<span class="ident" id="8260434">nil</span>&nbsp;<span class="op" id="8260438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260442">t</span><span class="op" id="8260443">.</span><span class="ident" id="8260444">Fatal</span><span class="op" id="8260449">(</span><span class="ident" id="8260450">err</span><span class="op" id="8260453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260460">fset</span>&nbsp;<span class="op" id="8260465">:=</span>&nbsp;<span class="ident" id="8260468">token</span><span class="op" id="8260473">.</span><span class="ident" id="8260474">NewFileSet</span><span class="op" id="8260484">(</span><span class="op" id="8260485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260488">file</span><span class="op" id="8260492">,</span>&nbsp;<span class="ident" id="8260494">err</span>&nbsp;<span class="op" id="8260498">:=</span>&nbsp;<span class="ident" id="8260501">parser</span><span class="op" id="8260507">.</span><span class="ident" id="8260508">ParseFile</span><span class="op" id="8260517">(</span><span class="ident" id="8260518">fset</span><span class="op" id="8260522">,</span>&nbsp;<span class="ident" id="8260524">testfile</span><span class="op" id="8260532">,</span>&nbsp;<span class="ident" id="8260534">src</span><span class="op" id="8260537">,</span>&nbsp;<span class="ident" id="8260539">parser</span><span class="op" id="8260545">.</span><span class="ident" id="8260546">ParseComments</span><span class="op" id="8260559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260562">if</span>&nbsp;<span class="ident" id="8260565">err</span>&nbsp;<span class="op" id="8260569">!=</span>&nbsp;<span class="ident" id="8260572">nil</span>&nbsp;<span class="op" id="8260576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260580">t</span><span class="op" id="8260581">.</span><span class="ident" id="8260582">Fatal</span><span class="op" id="8260587">(</span><span class="ident" id="8260588">err</span><span class="op" id="8260591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260594">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260598">var</span>&nbsp;<span class="ident" id="8260602">buf</span>&nbsp;<span class="ident" id="8260606">bytes</span><span class="op" id="8260611">.</span><span class="ident" id="8260612">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260621">if</span>&nbsp;<span class="ident" id="8260624">err</span>&nbsp;<span class="op" id="8260628">=</span>&nbsp;<span class="ident" id="8260630">Node</span><span class="op" id="8260634">(</span><span class="op" id="8260635">&amp;</span><span class="ident" id="8260636">buf</span><span class="op" id="8260639">,</span>&nbsp;<span class="ident" id="8260641">fset</span><span class="op" id="8260645">,</span>&nbsp;<span class="ident" id="8260647">file</span><span class="op" id="8260651">)</span><span class="op" id="8260652">;</span>&nbsp;<span class="ident" id="8260654">err</span>&nbsp;<span class="op" id="8260658">!=</span>&nbsp;<span class="ident" id="8260661">nil</span>&nbsp;<span class="op" id="8260665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260669">t</span><span class="op" id="8260670">.</span><span class="ident" id="8260671">Fatal</span><span class="op" id="8260676">(</span><span class="string" id="8260677">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="8260691">,</span>&nbsp;<span class="ident" id="8260693">err</span><span class="op" id="8260696">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260703">diff</span><span class="op" id="8260707">(</span><span class="ident" id="8260708">t</span><span class="op" id="8260709">,</span>&nbsp;<span class="ident" id="8260711">buf</span><span class="op" id="8260714">.</span><span class="ident" id="8260715">Bytes</span><span class="op" id="8260720">(</span><span class="op" id="8260721">)</span><span class="op" id="8260722">,</span>&nbsp;<span class="ident" id="8260724">src</span><span class="op" id="8260727">)</span><br>
<span class="lineno"></span><span class="op" id="8260729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8260732">func</span>&nbsp;<span class="ident" id="8260737">TestSource</span><span class="op" id="8260747">(</span><span class="ident" id="8260748">t</span>&nbsp;<span class="op" id="8260750">*</span><span class="ident" id="8260751">testing</span><span class="op" id="8260758">.</span><span class="ident" id="8260759">T</span><span class="op" id="8260760">)</span>&nbsp;<span class="op" id="8260762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260765">src</span><span class="op" id="8260768">,</span>&nbsp;<span class="ident" id="8260770">err</span>&nbsp;<span class="op" id="8260774">:=</span>&nbsp;<span class="ident" id="8260777">ioutil</span><span class="op" id="8260783">.</span><span class="ident" id="8260784">ReadFile</span><span class="op" id="8260792">(</span><span class="ident" id="8260793">testfile</span><span class="op" id="8260801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260804">if</span>&nbsp;<span class="ident" id="8260807">err</span>&nbsp;<span class="op" id="8260811">!=</span>&nbsp;<span class="ident" id="8260814">nil</span>&nbsp;<span class="op" id="8260818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260822">t</span><span class="op" id="8260823">.</span><span class="ident" id="8260824">Fatal</span><span class="op" id="8260829">(</span><span class="ident" id="8260830">err</span><span class="op" id="8260833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260836">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260840">res</span><span class="op" id="8260843">,</span>&nbsp;<span class="ident" id="8260845">err</span>&nbsp;<span class="op" id="8260849">:=</span>&nbsp;<span class="ident" id="8260852">Source</span><span class="op" id="8260858">(</span><span class="ident" id="8260859">src</span><span class="op" id="8260862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260865">if</span>&nbsp;<span class="ident" id="8260868">err</span>&nbsp;<span class="op" id="8260872">!=</span>&nbsp;<span class="ident" id="8260875">nil</span>&nbsp;<span class="op" id="8260879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260883">t</span><span class="op" id="8260884">.</span><span class="ident" id="8260885">Fatal</span><span class="op" id="8260890">(</span><span class="string" id="8260891">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="8260907">,</span>&nbsp;<span class="ident" id="8260909">err</span><span class="op" id="8260912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260915">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260919">diff</span><span class="op" id="8260923">(</span><span class="ident" id="8260924">t</span><span class="op" id="8260925">,</span>&nbsp;<span class="ident" id="8260927">res</span><span class="op" id="8260930">,</span>&nbsp;<span class="ident" id="8260932">src</span><span class="op" id="8260935">)</span><br>
<span class="lineno"></span><span class="op" id="8260937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8260940">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="8261014">var</span>&nbsp;<span class="ident" id="8261018">tests</span>&nbsp;<span class="op" id="8261024">=</span>&nbsp;<span class="op" id="8261026">[</span><span class="op" id="8261027">]</span><span class="builtintype" id="8261028">string</span><span class="op" id="8261034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261037">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261059">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="8261079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261082">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="8261093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261096">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="8261126">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261130">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261150">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="8261158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261161">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="8261197">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261201">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261245">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="8261265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261268">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8261294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261297">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8261333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261336">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="8261380">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261383">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="8261440">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8261446">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261490">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="8261551">,</span>&nbsp;<span class="comment" id="8261553">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261600">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261613">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="8261635">,</span>&nbsp;<span class="comment" id="8261637">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261654">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261677">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="8261691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8261694">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="8261708">,</span><br>
<span class="lineno"></span><span class="op" id="8261710">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="8261713">func</span>&nbsp;<span class="ident" id="8261718">String</span><span class="op" id="8261724">(</span><span class="ident" id="8261725">s</span>&nbsp;<span class="builtintype" id="8261727">string</span><span class="op" id="8261733">)</span>&nbsp;<span class="op" id="8261735">(</span><span class="builtintype" id="8261736">string</span><span class="op" id="8261742">,</span>&nbsp;<span class="builtintype" id="8261744">error</span><span class="op" id="8261749">)</span>&nbsp;<span class="op" id="8261751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261754">res</span><span class="op" id="8261757">,</span>&nbsp;<span class="ident" id="8261759">err</span>&nbsp;<span class="op" id="8261763">:=</span>&nbsp;<span class="ident" id="8261766">Source</span><span class="op" id="8261772">(</span><span class="op" id="8261773">[</span><span class="op" id="8261774">]</span><span class="builtintype" id="8261775">byte</span><span class="op" id="8261779">(</span><span class="ident" id="8261780">s</span><span class="op" id="8261781">)</span><span class="op" id="8261782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261785">if</span>&nbsp;<span class="ident" id="8261788">err</span>&nbsp;<span class="op" id="8261792">!=</span>&nbsp;<span class="ident" id="8261795">nil</span>&nbsp;<span class="op" id="8261799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261803">return</span>&nbsp;<span class="string" id="8261810">&#34;&#34;</span><span class="op" id="8261812">,</span>&nbsp;<span class="ident" id="8261814">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261822">return</span>&nbsp;<span class="builtintype" id="8261829">string</span><span class="op" id="8261835">(</span><span class="ident" id="8261836">res</span><span class="op" id="8261839">)</span><span class="op" id="8261840">,</span>&nbsp;<span class="ident" id="8261842">nil</span><br>
<span class="lineno"></span><span class="op" id="8261846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8261849">func</span>&nbsp;<span class="ident" id="8261854">TestPartial</span><span class="op" id="8261865">(</span><span class="ident" id="8261866">t</span>&nbsp;<span class="op" id="8261868">*</span><span class="ident" id="8261869">testing</span><span class="op" id="8261876">.</span><span class="ident" id="8261877">T</span><span class="op" id="8261878">)</span>&nbsp;<span class="op" id="8261880">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261883">for</span>&nbsp;<span class="ident" id="8261887">_</span><span class="op" id="8261888">,</span>&nbsp;<span class="ident" id="8261890">src</span>&nbsp;<span class="op" id="8261894">:=</span>&nbsp;<span class="keyword" id="8261897">range</span>&nbsp;<span class="ident" id="8261903">tests</span>&nbsp;<span class="op" id="8261909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8261913">if</span>&nbsp;<span class="ident" id="8261916">strings</span><span class="op" id="8261923">.</span><span class="ident" id="8261924">HasPrefix</span><span class="op" id="8261933">(</span><span class="ident" id="8261934">src</span><span class="op" id="8261937">,</span>&nbsp;<span class="string" id="8261939">&#34;ERROR&#34;</span><span class="op" id="8261946">)</span>&nbsp;<span class="op" id="8261948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8261953">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8261981">src</span>&nbsp;<span class="op" id="8261985">=</span>&nbsp;<span class="ident" id="8261987">src</span><span class="op" id="8261990">[</span><span class="num" id="8261991">5</span><span class="op" id="8261992">:</span><span class="op" id="8261993">]</span>&nbsp;<span class="comment" id="8261995">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262021">res</span><span class="op" id="8262024">,</span>&nbsp;<span class="ident" id="8262026">err</span>&nbsp;<span class="op" id="8262030">:=</span>&nbsp;<span class="ident" id="8262033">String</span><span class="op" id="8262039">(</span><span class="ident" id="8262040">src</span><span class="op" id="8262043">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262048">if</span>&nbsp;<span class="ident" id="8262051">err</span>&nbsp;<span class="op" id="8262055">==</span>&nbsp;<span class="ident" id="8262058">nil</span>&nbsp;<span class="op" id="8262062">&amp;&amp;</span>&nbsp;<span class="ident" id="8262065">res</span>&nbsp;<span class="op" id="8262069">==</span>&nbsp;<span class="ident" id="8262072">src</span>&nbsp;<span class="op" id="8262076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262082">t</span><span class="op" id="8262083">.</span><span class="ident" id="8262084">Errorf</span><span class="op" id="8262090">(</span><span class="string" id="8262091">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="8262143">,</span>&nbsp;<span class="ident" id="8262145">src</span><span class="op" id="8262148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262157">}</span>&nbsp;<span class="keyword" id="8262159">else</span>&nbsp;<span class="op" id="8262164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8262169">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262200">res</span><span class="op" id="8262203">,</span>&nbsp;<span class="ident" id="8262205">err</span>&nbsp;<span class="op" id="8262209">:=</span>&nbsp;<span class="ident" id="8262212">String</span><span class="op" id="8262218">(</span><span class="ident" id="8262219">src</span><span class="op" id="8262222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262227">if</span>&nbsp;<span class="ident" id="8262230">err</span>&nbsp;<span class="op" id="8262234">!=</span>&nbsp;<span class="ident" id="8262237">nil</span>&nbsp;<span class="op" id="8262241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262247">t</span><span class="op" id="8262248">.</span><span class="ident" id="8262249">Errorf</span><span class="op" id="8262255">(</span><span class="string" id="8262256">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="8262285">,</span>&nbsp;<span class="ident" id="8262287">err</span><span class="op" id="8262290">,</span>&nbsp;<span class="ident" id="8262292">src</span><span class="op" id="8262295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262300">}</span>&nbsp;<span class="keyword" id="8262302">else</span>&nbsp;<span class="keyword" id="8262307">if</span>&nbsp;<span class="ident" id="8262310">res</span>&nbsp;<span class="op" id="8262314">!=</span>&nbsp;<span class="ident" id="8262317">src</span>&nbsp;<span class="op" id="8262321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262327">t</span><span class="op" id="8262328">.</span><span class="ident" id="8262329">Errorf</span><span class="op" id="8262335">(</span><span class="string" id="8262336">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="8262383">,</span>&nbsp;<span class="ident" id="8262385">src</span><span class="op" id="8262388">,</span>&nbsp;<span class="ident" id="8262390">res</span><span class="op" id="8262393">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262405">}</span><br>
<span class="lineno"></span><span class="op" id="8262407">}</span>
</div>
</body>
</html>
