<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8395449">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8395505">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8395559">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8395610">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8395667">package</span>&nbsp;<span class="ident" id="8395675">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8395680">import</span>&nbsp;<span class="op" id="8395687">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8395690">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8395696">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8395707">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8395718">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8395729">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8395736">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8395739">type</span>&nbsp;<span class="ident" id="8395744">testInterface</span>&nbsp;<span class="keyword" id="8395758">struct</span>&nbsp;<span class="op" id="8395765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395768">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8395781">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395789">local</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8395802">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395810">remote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8395823">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395831">setupCmds</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8395844">[</span><span class="op" id="8395845">]</span><span class="op" id="8395846">*</span><span class="ident" id="8395847">exec</span><span class="op" id="8395851">.</span><span class="ident" id="8395852">Cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8395857">teardownCmds</span>&nbsp;<span class="op" id="8395870">[</span><span class="op" id="8395871">]</span><span class="op" id="8395872">*</span><span class="ident" id="8395873">exec</span><span class="op" id="8395877">.</span><span class="ident" id="8395878">Cmd</span><br>
<span class="lineno"></span><span class="op" id="8395882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8395885">func</span>&nbsp;<span class="op" id="8395890">(</span><span class="ident" id="8395891">ti</span>&nbsp;<span class="op" id="8395894">*</span><span class="ident" id="8395895">testInterface</span><span class="op" id="8395908">)</span>&nbsp;<span class="ident" id="8395910">setup</span><span class="op" id="8395915">(</span><span class="op" id="8395916">)</span>&nbsp;<span class="builtintype" id="8395918">error</span>&nbsp;<span class="op" id="8395924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395927">for</span>&nbsp;<span class="ident" id="8395931">_</span><span class="op" id="8395932">,</span>&nbsp;<span class="ident" id="8395934">cmd</span>&nbsp;<span class="op" id="8395938">:=</span>&nbsp;<span class="keyword" id="8395941">range</span>&nbsp;<span class="ident" id="8395947">ti</span><span class="op" id="8395949">.</span><span class="ident" id="8395950">setupCmds</span>&nbsp;<span class="op" id="8395960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8395964">if</span>&nbsp;<span class="ident" id="8395967">err</span>&nbsp;<span class="op" id="8395971">:=</span>&nbsp;<span class="ident" id="8395974">cmd</span><span class="op" id="8395977">.</span><span class="ident" id="8395978">Run</span><span class="op" id="8395981">(</span><span class="op" id="8395982">)</span><span class="op" id="8395983">;</span>&nbsp;<span class="ident" id="8395985">err</span>&nbsp;<span class="op" id="8395989">!=</span>&nbsp;<span class="ident" id="8395992">nil</span>&nbsp;<span class="op" id="8395996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396001">return</span>&nbsp;<span class="ident" id="8396008">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396014">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396020">return</span>&nbsp;<span class="ident" id="8396027">nil</span><br>
<span class="lineno"></span><span class="op" id="8396031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8396034">func</span>&nbsp;<span class="op" id="8396039">(</span><span class="ident" id="8396040">ti</span>&nbsp;<span class="op" id="8396043">*</span><span class="ident" id="8396044">testInterface</span><span class="op" id="8396057">)</span>&nbsp;<span class="ident" id="8396059">teardown</span><span class="op" id="8396067">(</span><span class="op" id="8396068">)</span>&nbsp;<span class="builtintype" id="8396070">error</span>&nbsp;<span class="op" id="8396076">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396079">for</span>&nbsp;<span class="ident" id="8396083">_</span><span class="op" id="8396084">,</span>&nbsp;<span class="ident" id="8396086">cmd</span>&nbsp;<span class="op" id="8396090">:=</span>&nbsp;<span class="keyword" id="8396093">range</span>&nbsp;<span class="ident" id="8396099">ti</span><span class="op" id="8396101">.</span><span class="ident" id="8396102">teardownCmds</span>&nbsp;<span class="op" id="8396115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396119">if</span>&nbsp;<span class="ident" id="8396122">err</span>&nbsp;<span class="op" id="8396126">:=</span>&nbsp;<span class="ident" id="8396129">cmd</span><span class="op" id="8396132">.</span><span class="ident" id="8396133">Run</span><span class="op" id="8396136">(</span><span class="op" id="8396137">)</span><span class="op" id="8396138">;</span>&nbsp;<span class="ident" id="8396140">err</span>&nbsp;<span class="op" id="8396144">!=</span>&nbsp;<span class="ident" id="8396147">nil</span>&nbsp;<span class="op" id="8396151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396156">return</span>&nbsp;<span class="ident" id="8396163">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396172">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396175">return</span>&nbsp;<span class="ident" id="8396182">nil</span><br>
<span class="lineno"></span><span class="op" id="8396186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8396189">func</span>&nbsp;<span class="ident" id="8396194">TestPointToPointInterface</span><span class="op" id="8396219">(</span><span class="ident" id="8396220">t</span>&nbsp;<span class="op" id="8396222">*</span><span class="ident" id="8396223">testing</span><span class="op" id="8396230">.</span><span class="ident" id="8396231">T</span><span class="op" id="8396232">)</span>&nbsp;<span class="op" id="8396234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396237">if</span>&nbsp;<span class="ident" id="8396240">testing</span><span class="op" id="8396247">.</span><span class="ident" id="8396248">Short</span><span class="op" id="8396253">(</span><span class="op" id="8396254">)</span>&nbsp;<span class="op" id="8396256">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396260">t</span><span class="op" id="8396261">.</span><span class="ident" id="8396262">Skip</span><span class="op" id="8396266">(</span><span class="string" id="8396267">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8396296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396302">switch</span>&nbsp;<span class="op" id="8396309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396312">case</span>&nbsp;<span class="ident" id="8396317">runtime</span><span class="op" id="8396324">.</span><span class="ident" id="8396325">GOOS</span>&nbsp;<span class="op" id="8396330">==</span>&nbsp;<span class="string" id="8396333">&#34;darwin&#34;</span><span class="op" id="8396341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396345">t</span><span class="op" id="8396346">.</span><span class="ident" id="8396347">Skipf</span><span class="op" id="8396352">(</span><span class="string" id="8396353">&#34;skipping&nbsp;read&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="8396379">,</span>&nbsp;<span class="ident" id="8396381">runtime</span><span class="op" id="8396388">.</span><span class="ident" id="8396389">GOOS</span><span class="op" id="8396393">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396399">if</span>&nbsp;<span class="ident" id="8396402">os</span><span class="op" id="8396404">.</span><span class="ident" id="8396405">Getuid</span><span class="op" id="8396411">(</span><span class="op" id="8396412">)</span>&nbsp;<span class="op" id="8396414">!=</span>&nbsp;<span class="num" id="8396417">0</span>&nbsp;<span class="op" id="8396419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396423">t</span><span class="op" id="8396424">.</span><span class="ident" id="8396425">Skip</span><span class="op" id="8396429">(</span><span class="string" id="8396430">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8396459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396466">local</span><span class="op" id="8396471">,</span>&nbsp;<span class="ident" id="8396473">remote</span>&nbsp;<span class="op" id="8396480">:=</span>&nbsp;<span class="string" id="8396483">&#34;169.254.0.1&#34;</span><span class="op" id="8396496">,</span>&nbsp;<span class="string" id="8396498">&#34;169.254.0.254&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396515">ip</span>&nbsp;<span class="op" id="8396518">:=</span>&nbsp;<span class="ident" id="8396521">ParseIP</span><span class="op" id="8396528">(</span><span class="ident" id="8396529">remote</span><span class="op" id="8396535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396538">for</span>&nbsp;<span class="ident" id="8396542">i</span>&nbsp;<span class="op" id="8396544">:=</span>&nbsp;<span class="num" id="8396547">0</span><span class="op" id="8396548">;</span>&nbsp;<span class="ident" id="8396550">i</span>&nbsp;<span class="op" id="8396552">&lt;</span>&nbsp;<span class="num" id="8396554">3</span><span class="op" id="8396555">;</span>&nbsp;<span class="ident" id="8396557">i</span><span class="op" id="8396558">++</span>&nbsp;<span class="op" id="8396561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396565">ti</span>&nbsp;<span class="op" id="8396568">:=</span>&nbsp;<span class="op" id="8396571">&amp;</span><span class="ident" id="8396572">testInterface</span><span class="op" id="8396585">{</span><span class="op" id="8396586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396590">if</span>&nbsp;<span class="ident" id="8396593">err</span>&nbsp;<span class="op" id="8396597">:=</span>&nbsp;<span class="ident" id="8396600">ti</span><span class="op" id="8396602">.</span><span class="ident" id="8396603">setPointToPoint</span><span class="op" id="8396618">(</span><span class="num" id="8396619">5963</span><span class="op" id="8396623">+</span><span class="ident" id="8396624">i</span><span class="op" id="8396625">,</span>&nbsp;<span class="ident" id="8396627">local</span><span class="op" id="8396632">,</span>&nbsp;<span class="ident" id="8396634">remote</span><span class="op" id="8396640">)</span><span class="op" id="8396641">;</span>&nbsp;<span class="ident" id="8396643">err</span>&nbsp;<span class="op" id="8396647">!=</span>&nbsp;<span class="ident" id="8396650">nil</span>&nbsp;<span class="op" id="8396654">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396659">t</span><span class="op" id="8396660">.</span><span class="ident" id="8396661">Skipf</span><span class="op" id="8396666">(</span><span class="string" id="8396667">&#34;test&nbsp;requries&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="8396703">,</span>&nbsp;<span class="ident" id="8396705">err</span><span class="op" id="8396708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396716">if</span>&nbsp;<span class="ident" id="8396719">err</span>&nbsp;<span class="op" id="8396723">:=</span>&nbsp;<span class="ident" id="8396726">ti</span><span class="op" id="8396728">.</span><span class="ident" id="8396729">setup</span><span class="op" id="8396734">(</span><span class="op" id="8396735">)</span><span class="op" id="8396736">;</span>&nbsp;<span class="ident" id="8396738">err</span>&nbsp;<span class="op" id="8396742">!=</span>&nbsp;<span class="ident" id="8396745">nil</span>&nbsp;<span class="op" id="8396749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396754">t</span><span class="op" id="8396755">.</span><span class="ident" id="8396756">Fatalf</span><span class="op" id="8396762">(</span><span class="string" id="8396763">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8396795">,</span>&nbsp;<span class="ident" id="8396797">err</span><span class="op" id="8396800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396804">}</span>&nbsp;<span class="keyword" id="8396806">else</span>&nbsp;<span class="op" id="8396811">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396816">time</span><span class="op" id="8396820">.</span><span class="ident" id="8396821">Sleep</span><span class="op" id="8396826">(</span><span class="num" id="8396827">3</span>&nbsp;<span class="op" id="8396829">*</span>&nbsp;<span class="ident" id="8396831">time</span><span class="op" id="8396835">.</span><span class="ident" id="8396836">Millisecond</span><span class="op" id="8396847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396855">ift</span><span class="op" id="8396858">,</span>&nbsp;<span class="ident" id="8396860">err</span>&nbsp;<span class="op" id="8396864">:=</span>&nbsp;<span class="ident" id="8396867">Interfaces</span><span class="op" id="8396877">(</span><span class="op" id="8396878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396882">if</span>&nbsp;<span class="ident" id="8396885">err</span>&nbsp;<span class="op" id="8396889">!=</span>&nbsp;<span class="ident" id="8396892">nil</span>&nbsp;<span class="op" id="8396896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396901">ti</span><span class="op" id="8396903">.</span><span class="ident" id="8396904">teardown</span><span class="op" id="8396912">(</span><span class="op" id="8396913">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8396918">t</span><span class="op" id="8396919">.</span><span class="ident" id="8396920">Fatalf</span><span class="op" id="8396926">(</span><span class="string" id="8396927">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8396950">,</span>&nbsp;<span class="ident" id="8396952">err</span><span class="op" id="8396955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8396959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396963">for</span>&nbsp;<span class="ident" id="8396967">_</span><span class="op" id="8396968">,</span>&nbsp;<span class="ident" id="8396970">ifi</span>&nbsp;<span class="op" id="8396974">:=</span>&nbsp;<span class="keyword" id="8396977">range</span>&nbsp;<span class="ident" id="8396983">ift</span>&nbsp;<span class="op" id="8396987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8396992">if</span>&nbsp;<span class="ident" id="8396995">ti</span><span class="op" id="8396997">.</span><span class="ident" id="8396998">name</span>&nbsp;<span class="op" id="8397003">==</span>&nbsp;<span class="ident" id="8397006">ifi</span><span class="op" id="8397009">.</span><span class="ident" id="8397010">Name</span>&nbsp;<span class="op" id="8397015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397021">ifat</span><span class="op" id="8397025">,</span>&nbsp;<span class="ident" id="8397027">err</span>&nbsp;<span class="op" id="8397031">:=</span>&nbsp;<span class="ident" id="8397034">ifi</span><span class="op" id="8397037">.</span><span class="ident" id="8397038">Addrs</span><span class="op" id="8397043">(</span><span class="op" id="8397044">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397050">if</span>&nbsp;<span class="ident" id="8397053">err</span>&nbsp;<span class="op" id="8397057">!=</span>&nbsp;<span class="ident" id="8397060">nil</span>&nbsp;<span class="op" id="8397064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397071">ti</span><span class="op" id="8397073">.</span><span class="ident" id="8397074">teardown</span><span class="op" id="8397082">(</span><span class="op" id="8397083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397090">t</span><span class="op" id="8397091">.</span><span class="ident" id="8397092">Fatalf</span><span class="op" id="8397098">(</span><span class="string" id="8397099">&#34;Interface.Addrs&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8397127">,</span>&nbsp;<span class="ident" id="8397129">err</span><span class="op" id="8397132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397144">for</span>&nbsp;<span class="ident" id="8397148">_</span><span class="op" id="8397149">,</span>&nbsp;<span class="ident" id="8397151">ifa</span>&nbsp;<span class="op" id="8397155">:=</span>&nbsp;<span class="keyword" id="8397158">range</span>&nbsp;<span class="ident" id="8397164">ifat</span>&nbsp;<span class="op" id="8397169">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397176">if</span>&nbsp;<span class="ident" id="8397179">ip</span><span class="op" id="8397181">.</span><span class="ident" id="8397182">Equal</span><span class="op" id="8397187">(</span><span class="ident" id="8397188">ifa</span><span class="op" id="8397191">.</span><span class="op" id="8397192">(</span><span class="op" id="8397193">*</span><span class="ident" id="8397194">IPNet</span><span class="op" id="8397199">)</span><span class="op" id="8397200">.</span><span class="ident" id="8397201">IP</span><span class="op" id="8397203">)</span>&nbsp;<span class="op" id="8397205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397213">ti</span><span class="op" id="8397215">.</span><span class="ident" id="8397216">teardown</span><span class="op" id="8397224">(</span><span class="op" id="8397225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397233">t</span><span class="op" id="8397234">.</span><span class="ident" id="8397235">Fatalf</span><span class="op" id="8397241">(</span><span class="string" id="8397242">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8397259">,</span>&nbsp;<span class="ident" id="8397261">ip</span><span class="op" id="8397263">,</span>&nbsp;<span class="ident" id="8397265">local</span><span class="op" id="8397270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397283">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397296">if</span>&nbsp;<span class="ident" id="8397299">err</span>&nbsp;<span class="op" id="8397303">:=</span>&nbsp;<span class="ident" id="8397306">ti</span><span class="op" id="8397308">.</span><span class="ident" id="8397309">teardown</span><span class="op" id="8397317">(</span><span class="op" id="8397318">)</span><span class="op" id="8397319">;</span>&nbsp;<span class="ident" id="8397321">err</span>&nbsp;<span class="op" id="8397325">!=</span>&nbsp;<span class="ident" id="8397328">nil</span>&nbsp;<span class="op" id="8397332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397337">t</span><span class="op" id="8397338">.</span><span class="ident" id="8397339">Fatalf</span><span class="op" id="8397345">(</span><span class="string" id="8397346">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8397381">,</span>&nbsp;<span class="ident" id="8397383">err</span><span class="op" id="8397386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397390">}</span>&nbsp;<span class="keyword" id="8397392">else</span>&nbsp;<span class="op" id="8397397">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397402">time</span><span class="op" id="8397406">.</span><span class="ident" id="8397407">Sleep</span><span class="op" id="8397412">(</span><span class="num" id="8397413">3</span>&nbsp;<span class="op" id="8397415">*</span>&nbsp;<span class="ident" id="8397417">time</span><span class="op" id="8397421">.</span><span class="ident" id="8397422">Millisecond</span><span class="op" id="8397433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397440">}</span><br>
<span class="lineno"></span><span class="op" id="8397442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="8397445">func</span>&nbsp;<span class="ident" id="8397450">TestInterfaceArrivalAndDeparture</span><span class="op" id="8397482">(</span><span class="ident" id="8397483">t</span>&nbsp;<span class="op" id="8397485">*</span><span class="ident" id="8397486">testing</span><span class="op" id="8397493">.</span><span class="ident" id="8397494">T</span><span class="op" id="8397495">)</span>&nbsp;<span class="op" id="8397497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397500">if</span>&nbsp;<span class="ident" id="8397503">testing</span><span class="op" id="8397510">.</span><span class="ident" id="8397511">Short</span><span class="op" id="8397516">(</span><span class="op" id="8397517">)</span>&nbsp;<span class="op" id="8397519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397523">t</span><span class="op" id="8397524">.</span><span class="ident" id="8397525">Skip</span><span class="op" id="8397529">(</span><span class="string" id="8397530">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8397559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397565">if</span>&nbsp;<span class="ident" id="8397568">os</span><span class="op" id="8397570">.</span><span class="ident" id="8397571">Getuid</span><span class="op" id="8397577">(</span><span class="op" id="8397578">)</span>&nbsp;<span class="op" id="8397580">!=</span>&nbsp;<span class="num" id="8397583">0</span>&nbsp;<span class="op" id="8397585">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397589">t</span><span class="op" id="8397590">.</span><span class="ident" id="8397591">Skip</span><span class="op" id="8397595">(</span><span class="string" id="8397596">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="8397625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397632">for</span>&nbsp;<span class="ident" id="8397636">i</span>&nbsp;<span class="op" id="8397638">:=</span>&nbsp;<span class="num" id="8397641">0</span><span class="op" id="8397642">;</span>&nbsp;<span class="ident" id="8397644">i</span>&nbsp;<span class="op" id="8397646">&lt;</span>&nbsp;<span class="num" id="8397648">3</span><span class="op" id="8397649">;</span>&nbsp;<span class="ident" id="8397651">i</span><span class="op" id="8397652">++</span>&nbsp;<span class="op" id="8397655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397659">ift1</span><span class="op" id="8397663">,</span>&nbsp;<span class="ident" id="8397665">err</span>&nbsp;<span class="op" id="8397669">:=</span>&nbsp;<span class="ident" id="8397672">Interfaces</span><span class="op" id="8397682">(</span><span class="op" id="8397683">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397687">if</span>&nbsp;<span class="ident" id="8397690">err</span>&nbsp;<span class="op" id="8397694">!=</span>&nbsp;<span class="ident" id="8397697">nil</span>&nbsp;<span class="op" id="8397701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397706">t</span><span class="op" id="8397707">.</span><span class="ident" id="8397708">Fatalf</span><span class="op" id="8397714">(</span><span class="string" id="8397715">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8397738">,</span>&nbsp;<span class="ident" id="8397740">err</span><span class="op" id="8397743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397751">ti</span>&nbsp;<span class="op" id="8397754">:=</span>&nbsp;<span class="op" id="8397757">&amp;</span><span class="ident" id="8397758">testInterface</span><span class="op" id="8397771">{</span><span class="op" id="8397772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397776">if</span>&nbsp;<span class="ident" id="8397779">err</span>&nbsp;<span class="op" id="8397783">:=</span>&nbsp;<span class="ident" id="8397786">ti</span><span class="op" id="8397788">.</span><span class="ident" id="8397789">setBroadcast</span><span class="op" id="8397801">(</span><span class="num" id="8397802">5682</span>&nbsp;<span class="op" id="8397807">+</span>&nbsp;<span class="ident" id="8397809">i</span><span class="op" id="8397810">)</span><span class="op" id="8397811">;</span>&nbsp;<span class="ident" id="8397813">err</span>&nbsp;<span class="op" id="8397817">!=</span>&nbsp;<span class="ident" id="8397820">nil</span>&nbsp;<span class="op" id="8397824">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397829">t</span><span class="op" id="8397830">.</span><span class="ident" id="8397831">Skipf</span><span class="op" id="8397836">(</span><span class="string" id="8397837">&#34;test&nbsp;requires&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="8397873">,</span>&nbsp;<span class="ident" id="8397875">err</span><span class="op" id="8397878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8397886">if</span>&nbsp;<span class="ident" id="8397889">err</span>&nbsp;<span class="op" id="8397893">:=</span>&nbsp;<span class="ident" id="8397896">ti</span><span class="op" id="8397898">.</span><span class="ident" id="8397899">setup</span><span class="op" id="8397904">(</span><span class="op" id="8397905">)</span><span class="op" id="8397906">;</span>&nbsp;<span class="ident" id="8397908">err</span>&nbsp;<span class="op" id="8397912">!=</span>&nbsp;<span class="ident" id="8397915">nil</span>&nbsp;<span class="op" id="8397919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397924">t</span><span class="op" id="8397925">.</span><span class="ident" id="8397926">Fatalf</span><span class="op" id="8397932">(</span><span class="string" id="8397933">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8397965">,</span>&nbsp;<span class="ident" id="8397967">err</span><span class="op" id="8397970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8397974">}</span>&nbsp;<span class="keyword" id="8397976">else</span>&nbsp;<span class="op" id="8397981">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8397986">time</span><span class="op" id="8397990">.</span><span class="ident" id="8397991">Sleep</span><span class="op" id="8397996">(</span><span class="num" id="8397997">3</span>&nbsp;<span class="op" id="8397999">*</span>&nbsp;<span class="ident" id="8398001">time</span><span class="op" id="8398005">.</span><span class="ident" id="8398006">Millisecond</span><span class="op" id="8398017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398025">ift2</span><span class="op" id="8398029">,</span>&nbsp;<span class="ident" id="8398031">err</span>&nbsp;<span class="op" id="8398035">:=</span>&nbsp;<span class="ident" id="8398038">Interfaces</span><span class="op" id="8398048">(</span><span class="op" id="8398049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398053">if</span>&nbsp;<span class="ident" id="8398056">err</span>&nbsp;<span class="op" id="8398060">!=</span>&nbsp;<span class="ident" id="8398063">nil</span>&nbsp;<span class="op" id="8398067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398072">ti</span><span class="op" id="8398074">.</span><span class="ident" id="8398075">teardown</span><span class="op" id="8398083">(</span><span class="op" id="8398084">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398089">t</span><span class="op" id="8398090">.</span><span class="ident" id="8398091">Fatalf</span><span class="op" id="8398097">(</span><span class="string" id="8398098">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8398121">,</span>&nbsp;<span class="ident" id="8398123">err</span><span class="op" id="8398126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398134">if</span>&nbsp;<span class="builtinfunc" id="8398137">len</span><span class="op" id="8398140">(</span><span class="ident" id="8398141">ift2</span><span class="op" id="8398145">)</span>&nbsp;<span class="op" id="8398147">&lt;=</span>&nbsp;<span class="builtinfunc" id="8398150">len</span><span class="op" id="8398153">(</span><span class="ident" id="8398154">ift1</span><span class="op" id="8398158">)</span>&nbsp;<span class="op" id="8398160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398165">for</span>&nbsp;<span class="ident" id="8398169">_</span><span class="op" id="8398170">,</span>&nbsp;<span class="ident" id="8398172">ifi</span>&nbsp;<span class="op" id="8398176">:=</span>&nbsp;<span class="keyword" id="8398179">range</span>&nbsp;<span class="ident" id="8398185">ift1</span>&nbsp;<span class="op" id="8398190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398196">t</span><span class="op" id="8398197">.</span><span class="ident" id="8398198">Logf</span><span class="op" id="8398202">(</span><span class="string" id="8398203">&#34;before:&nbsp;%v&#34;</span><span class="op" id="8398215">,</span>&nbsp;<span class="ident" id="8398217">ifi</span><span class="op" id="8398220">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398230">for</span>&nbsp;<span class="ident" id="8398234">_</span><span class="op" id="8398235">,</span>&nbsp;<span class="ident" id="8398237">ifi</span>&nbsp;<span class="op" id="8398241">:=</span>&nbsp;<span class="keyword" id="8398244">range</span>&nbsp;<span class="ident" id="8398250">ift2</span>&nbsp;<span class="op" id="8398255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398261">t</span><span class="op" id="8398262">.</span><span class="ident" id="8398263">Logf</span><span class="op" id="8398267">(</span><span class="string" id="8398268">&#34;after:&nbsp;%v&#34;</span><span class="op" id="8398279">,</span>&nbsp;<span class="ident" id="8398281">ifi</span><span class="op" id="8398284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398294">ti</span><span class="op" id="8398296">.</span><span class="ident" id="8398297">teardown</span><span class="op" id="8398305">(</span><span class="op" id="8398306">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398311">t</span><span class="op" id="8398312">.</span><span class="ident" id="8398313">Fatalf</span><span class="op" id="8398319">(</span><span class="string" id="8398320">&#34;got&nbsp;%v;&nbsp;want&nbsp;gt&nbsp;%v&#34;</span><span class="op" id="8398340">,</span>&nbsp;<span class="builtinfunc" id="8398342">len</span><span class="op" id="8398345">(</span><span class="ident" id="8398346">ift2</span><span class="op" id="8398350">)</span><span class="op" id="8398351">,</span>&nbsp;<span class="builtinfunc" id="8398353">len</span><span class="op" id="8398356">(</span><span class="ident" id="8398357">ift1</span><span class="op" id="8398361">)</span><span class="op" id="8398362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398370">if</span>&nbsp;<span class="ident" id="8398373">err</span>&nbsp;<span class="op" id="8398377">:=</span>&nbsp;<span class="ident" id="8398380">ti</span><span class="op" id="8398382">.</span><span class="ident" id="8398383">teardown</span><span class="op" id="8398391">(</span><span class="op" id="8398392">)</span><span class="op" id="8398393">;</span>&nbsp;<span class="ident" id="8398395">err</span>&nbsp;<span class="op" id="8398399">!=</span>&nbsp;<span class="ident" id="8398402">nil</span>&nbsp;<span class="op" id="8398406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398411">t</span><span class="op" id="8398412">.</span><span class="ident" id="8398413">Fatalf</span><span class="op" id="8398419">(</span><span class="string" id="8398420">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8398455">,</span>&nbsp;<span class="ident" id="8398457">err</span><span class="op" id="8398460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398464">}</span>&nbsp;<span class="keyword" id="8398466">else</span>&nbsp;<span class="op" id="8398471">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398476">time</span><span class="op" id="8398480">.</span><span class="ident" id="8398481">Sleep</span><span class="op" id="8398486">(</span><span class="num" id="8398487">3</span>&nbsp;<span class="op" id="8398489">*</span>&nbsp;<span class="ident" id="8398491">time</span><span class="op" id="8398495">.</span><span class="ident" id="8398496">Millisecond</span><span class="op" id="8398507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398515">ift3</span><span class="op" id="8398519">,</span>&nbsp;<span class="ident" id="8398521">err</span>&nbsp;<span class="op" id="8398525">:=</span>&nbsp;<span class="ident" id="8398528">Interfaces</span><span class="op" id="8398538">(</span><span class="op" id="8398539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398543">if</span>&nbsp;<span class="ident" id="8398546">err</span>&nbsp;<span class="op" id="8398550">!=</span>&nbsp;<span class="ident" id="8398553">nil</span>&nbsp;<span class="op" id="8398557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398562">t</span><span class="op" id="8398563">.</span><span class="ident" id="8398564">Fatalf</span><span class="op" id="8398570">(</span><span class="string" id="8398571">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8398594">,</span>&nbsp;<span class="ident" id="8398596">err</span><span class="op" id="8398599">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398607">if</span>&nbsp;<span class="builtinfunc" id="8398610">len</span><span class="op" id="8398613">(</span><span class="ident" id="8398614">ift3</span><span class="op" id="8398618">)</span>&nbsp;<span class="op" id="8398620">&gt;=</span>&nbsp;<span class="builtinfunc" id="8398623">len</span><span class="op" id="8398626">(</span><span class="ident" id="8398627">ift2</span><span class="op" id="8398631">)</span>&nbsp;<span class="op" id="8398633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398638">for</span>&nbsp;<span class="ident" id="8398642">_</span><span class="op" id="8398643">,</span>&nbsp;<span class="ident" id="8398645">ifi</span>&nbsp;<span class="op" id="8398649">:=</span>&nbsp;<span class="keyword" id="8398652">range</span>&nbsp;<span class="ident" id="8398658">ift2</span>&nbsp;<span class="op" id="8398663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398669">t</span><span class="op" id="8398670">.</span><span class="ident" id="8398671">Logf</span><span class="op" id="8398675">(</span><span class="string" id="8398676">&#34;before:&nbsp;%v&#34;</span><span class="op" id="8398688">,</span>&nbsp;<span class="ident" id="8398690">ifi</span><span class="op" id="8398693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398698">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8398703">for</span>&nbsp;<span class="ident" id="8398707">_</span><span class="op" id="8398708">,</span>&nbsp;<span class="ident" id="8398710">ifi</span>&nbsp;<span class="op" id="8398714">:=</span>&nbsp;<span class="keyword" id="8398717">range</span>&nbsp;<span class="ident" id="8398723">ift3</span>&nbsp;<span class="op" id="8398728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398734">t</span><span class="op" id="8398735">.</span><span class="ident" id="8398736">Logf</span><span class="op" id="8398740">(</span><span class="string" id="8398741">&#34;after:&nbsp;%v&#34;</span><span class="op" id="8398752">,</span>&nbsp;<span class="ident" id="8398754">ifi</span><span class="op" id="8398757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8398767">t</span><span class="op" id="8398768">.</span><span class="ident" id="8398769">Fatalf</span><span class="op" id="8398775">(</span><span class="string" id="8398776">&#34;got&nbsp;%v;&nbsp;want&nbsp;lt&nbsp;%v&#34;</span><span class="op" id="8398796">,</span>&nbsp;<span class="builtinfunc" id="8398798">len</span><span class="op" id="8398801">(</span><span class="ident" id="8398802">ift3</span><span class="op" id="8398806">)</span><span class="op" id="8398807">,</span>&nbsp;<span class="builtinfunc" id="8398809">len</span><span class="op" id="8398812">(</span><span class="ident" id="8398813">ift2</span><span class="op" id="8398817">)</span><span class="op" id="8398818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398822">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8398825">}</span><br>
<span class="lineno"></span><span class="op" id="8398827">}</span>
</div>
</body>
</html>
