<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5855063">package</span>&nbsp;<span class="ident" id="5855071">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855078">import</span>&nbsp;<span class="op" id="5855085">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5855088">&#34;bytes&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5855098">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span><span class="op" id="5855116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855119">type</span>&nbsp;<span class="ident" id="5855124">writer</span>&nbsp;<span class="keyword" id="5855131">struct</span>&nbsp;<span class="op" id="5855138">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855141">buf</span>&nbsp;<span class="op" id="5855145">*</span><span class="ident" id="5855146">bytes</span><span class="op" id="5855151">.</span><span class="ident" id="5855152">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5855159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855162">func</span>&nbsp;<span class="ident" id="5855167">newWriter</span><span class="op" id="5855176">(</span><span class="op" id="5855177">)</span>&nbsp;<span class="op" id="5855179">*</span><span class="ident" id="5855180">writer</span>&nbsp;<span class="op" id="5855187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855190">ret</span>&nbsp;<span class="op" id="5855194">:=</span>&nbsp;<span class="builtinfunc" id="5855197">new</span><span class="op" id="5855200">(</span><span class="ident" id="5855201">writer</span><span class="op" id="5855207">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855210">ret</span><span class="op" id="5855213">.</span><span class="ident" id="5855214">buf</span>&nbsp;<span class="op" id="5855218">=</span>&nbsp;<span class="builtinfunc" id="5855220">new</span><span class="op" id="5855223">(</span><span class="ident" id="5855224">bytes</span><span class="op" id="5855229">.</span><span class="ident" id="5855230">Buffer</span><span class="op" id="5855236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855239">return</span>&nbsp;<span class="ident" id="5855246">ret</span><br>
<span class="lineno"></span><span class="op" id="5855250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855253">func</span>&nbsp;<span class="op" id="5855258">(</span><span class="ident" id="5855259">w</span>&nbsp;<span class="op" id="5855261">*</span><span class="ident" id="5855262">writer</span><span class="op" id="5855268">)</span>&nbsp;<span class="ident" id="5855270">writeU32</span><span class="op" id="5855278">(</span><span class="ident" id="5855279">u</span>&nbsp;<span class="builtintype" id="5855281">uint32</span><span class="op" id="5855287">)</span>&nbsp;<span class="op" id="5855289">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855292">var</span>&nbsp;<span class="ident" id="5855296">b</span>&nbsp;<span class="op" id="5855298">[</span><span class="num" id="5855299">4</span><span class="op" id="5855300">]</span><span class="builtintype" id="5855301">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855307">binary</span><span class="op" id="5855313">.</span><span class="ident" id="5855314">LittleEndian</span><span class="op" id="5855326">.</span><span class="ident" id="5855327">PutUint32</span><span class="op" id="5855336">(</span><span class="ident" id="5855337">b</span><span class="op" id="5855338">[</span><span class="op" id="5855339">:</span><span class="op" id="5855340">]</span><span class="op" id="5855341">,</span>&nbsp;<span class="ident" id="5855343">u</span><span class="op" id="5855344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855347">_</span><span class="op" id="5855348">,</span>&nbsp;<span class="ident" id="5855350">e</span>&nbsp;<span class="op" id="5855352">:=</span>&nbsp;<span class="ident" id="5855355">w</span><span class="op" id="5855356">.</span><span class="ident" id="5855357">buf</span><span class="op" id="5855360">.</span><span class="ident" id="5855361">Write</span><span class="op" id="5855366">(</span><span class="ident" id="5855367">b</span><span class="op" id="5855368">[</span><span class="op" id="5855369">:</span><span class="op" id="5855370">]</span><span class="op" id="5855371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855374">if</span>&nbsp;<span class="ident" id="5855377">e</span>&nbsp;<span class="op" id="5855379">!=</span>&nbsp;<span class="ident" id="5855382">nil</span>&nbsp;<span class="op" id="5855386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5855390">panic</span><span class="op" id="5855395">(</span><span class="string" id="5855396">&#34;buf&nbsp;write&#34;</span><span class="op" id="5855407">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855410">}</span><br>
<span class="lineno"></span><span class="op" id="5855412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855415">func</span>&nbsp;<span class="op" id="5855420">(</span><span class="ident" id="5855421">w</span>&nbsp;<span class="op" id="5855423">*</span><span class="ident" id="5855424">writer</span><span class="op" id="5855430">)</span>&nbsp;<span class="ident" id="5855432">writeBareFunc</span><span class="op" id="5855445">(</span><span class="ident" id="5855446">f</span>&nbsp;<span class="op" id="5855448">*</span><span class="ident" id="5855449">Func</span><span class="op" id="5855453">)</span>&nbsp;<span class="op" id="5855455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855458">if</span>&nbsp;<span class="builtinfunc" id="5855461">len</span><span class="op" id="5855464">(</span><span class="ident" id="5855465">f</span><span class="op" id="5855466">.</span><span class="ident" id="5855467">links</span><span class="op" id="5855472">)</span>&nbsp;<span class="op" id="5855474">!=</span>&nbsp;<span class="num" id="5855477">0</span>&nbsp;<span class="op" id="5855479">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5855483">panic</span><span class="op" id="5855488">(</span><span class="string" id="5855489">&#34;not&nbsp;a&nbsp;bare&nbsp;function&#34;</span><span class="op" id="5855510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855517">for</span>&nbsp;<span class="ident" id="5855521">_</span><span class="op" id="5855522">,</span>&nbsp;<span class="ident" id="5855524">i</span>&nbsp;<span class="op" id="5855526">:=</span>&nbsp;<span class="keyword" id="5855529">range</span>&nbsp;<span class="ident" id="5855535">f</span><span class="op" id="5855536">.</span><span class="ident" id="5855537">insts</span>&nbsp;<span class="op" id="5855543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855547">w</span><span class="op" id="5855548">.</span><span class="ident" id="5855549">writeU32</span><span class="op" id="5855557">(</span><span class="ident" id="5855558">i</span><span class="op" id="5855559">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855562">}</span><br>
<span class="lineno"></span><span class="op" id="5855564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855567">func</span>&nbsp;<span class="op" id="5855572">(</span><span class="ident" id="5855573">w</span>&nbsp;<span class="op" id="5855575">*</span><span class="ident" id="5855576">writer</span><span class="op" id="5855582">)</span>&nbsp;<span class="ident" id="5855584">bytes</span><span class="op" id="5855589">(</span><span class="op" id="5855590">)</span>&nbsp;<span class="op" id="5855592">[</span><span class="op" id="5855593">]</span><span class="builtintype" id="5855594">byte</span>&nbsp;<span class="op" id="5855599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855602">return</span>&nbsp;<span class="ident" id="5855609">w</span><span class="op" id="5855610">.</span><span class="ident" id="5855611">buf</span><span class="op" id="5855614">.</span><span class="ident" id="5855615">Bytes</span><span class="op" id="5855620">(</span><span class="op" id="5855621">)</span><br>
<span class="lineno">40</span><span class="op" id="5855623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855626">func</span>&nbsp;<span class="ident" id="5855631">writeVar</span><span class="op" id="5855639">(</span><span class="ident" id="5855640">w</span>&nbsp;<span class="op" id="5855642">*</span><span class="ident" id="5855643">writer</span><span class="op" id="5855649">,</span>&nbsp;<span class="ident" id="5855651">v</span>&nbsp;<span class="op" id="5855653">*</span><span class="ident" id="5855654">Var</span><span class="op" id="5855657">)</span>&nbsp;<span class="op" id="5855659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855662">w</span><span class="op" id="5855663">.</span><span class="ident" id="5855664">buf</span><span class="op" id="5855667">.</span><span class="ident" id="5855668">Write</span><span class="op" id="5855673">(</span><span class="builtinfunc" id="5855674">make</span><span class="op" id="5855678">(</span><span class="op" id="5855679">[</span><span class="op" id="5855680">]</span><span class="builtintype" id="5855681">byte</span><span class="op" id="5855685">,</span>&nbsp;<span class="ident" id="5855687">v</span><span class="op" id="5855688">.</span><span class="ident" id="5855689">prePad</span><span class="op" id="5855695">)</span><span class="op" id="5855696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855699">w</span><span class="op" id="5855700">.</span><span class="ident" id="5855701">buf</span><span class="op" id="5855704">.</span><span class="ident" id="5855705">Write</span><span class="op" id="5855710">(</span><span class="ident" id="5855711">v</span><span class="op" id="5855712">.</span><span class="ident" id="5855713">buf</span><span class="op" id="5855716">.</span><span class="ident" id="5855717">Bytes</span><span class="op" id="5855722">(</span><span class="op" id="5855723">)</span><span class="op" id="5855724">)</span><br>
<span class="lineno">45</span><span class="op" id="5855726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855729">func</span>&nbsp;<span class="ident" id="5855734">writeFunc</span><span class="op" id="5855743">(</span><span class="ident" id="5855744">w</span>&nbsp;<span class="op" id="5855746">*</span><span class="ident" id="5855747">writer</span><span class="op" id="5855753">,</span>&nbsp;<span class="ident" id="5855755">p</span>&nbsp;<span class="op" id="5855757">*</span><span class="ident" id="5855758">Package</span><span class="op" id="5855765">,</span>&nbsp;<span class="ident" id="5855767">f</span>&nbsp;<span class="op" id="5855769">*</span><span class="ident" id="5855770">Func</span><span class="op" id="5855774">)</span>&nbsp;<span class="op" id="5855776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855779">cur</span>&nbsp;<span class="op" id="5855783">:=</span>&nbsp;<span class="num" id="5855786">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855789">var</span>&nbsp;<span class="ident" id="5855793">curLink</span>&nbsp;<span class="op" id="5855801">*</span><span class="ident" id="5855802">link</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855808">var</span>&nbsp;<span class="ident" id="5855812">curIndex</span>&nbsp;<span class="builtintype" id="5855821">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855826">updateCur</span>&nbsp;<span class="op" id="5855836">:=</span>&nbsp;<span class="keyword" id="5855839">func</span><span class="op" id="5855843">(</span><span class="op" id="5855844">)</span>&nbsp;<span class="op" id="5855846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855850">if</span>&nbsp;<span class="ident" id="5855853">cur</span>&nbsp;<span class="op" id="5855857">&lt;</span>&nbsp;<span class="builtinfunc" id="5855859">len</span><span class="op" id="5855862">(</span><span class="ident" id="5855863">f</span><span class="op" id="5855864">.</span><span class="ident" id="5855865">links</span><span class="op" id="5855870">)</span>&nbsp;<span class="op" id="5855872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855877">curLink</span>&nbsp;<span class="op" id="5855885">=</span>&nbsp;<span class="ident" id="5855887">f</span><span class="op" id="5855888">.</span><span class="ident" id="5855889">links</span><span class="op" id="5855894">[</span><span class="ident" id="5855895">cur</span><span class="op" id="5855898">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855903">curIndex</span>&nbsp;<span class="op" id="5855912">=</span>&nbsp;<span class="builtintype" id="5855914">int</span><span class="op" id="5855917">(</span><span class="ident" id="5855918">curLink</span><span class="op" id="5855925">.</span><span class="ident" id="5855926">offset</span>&nbsp;<span class="op" id="5855933">&gt;&gt;</span>&nbsp;<span class="num" id="5855936">2</span><span class="op" id="5855937">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855948">updateCur</span><span class="op" id="5855957">(</span><span class="op" id="5855958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855961">for</span>&nbsp;<span class="ident" id="5855965">i</span><span class="op" id="5855966">,</span>&nbsp;<span class="ident" id="5855968">inst</span>&nbsp;<span class="op" id="5855973">:=</span>&nbsp;<span class="keyword" id="5855976">range</span>&nbsp;<span class="ident" id="5855982">f</span><span class="op" id="5855983">.</span><span class="ident" id="5855984">insts</span>&nbsp;<span class="op" id="5855990">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855994">if</span>&nbsp;<span class="ident" id="5855997">curLink</span>&nbsp;<span class="op" id="5856005">!=</span>&nbsp;<span class="ident" id="5856008">nil</span>&nbsp;<span class="op" id="5856012">&amp;&amp;</span>&nbsp;<span class="ident" id="5856015">i</span>&nbsp;<span class="op" id="5856017">==</span>&nbsp;<span class="ident" id="5856020">curIndex</span>&nbsp;<span class="op" id="5856029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856034">fill</span>&nbsp;<span class="op" id="5856039">:=</span>&nbsp;<span class="ident" id="5856042">curLink</span><span class="op" id="5856049">.</span><span class="ident" id="5856050">offset</span>&nbsp;<span class="op" id="5856057">&amp;</span>&nbsp;<span class="num" id="5856059">0x3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856066">if</span>&nbsp;<span class="ident" id="5856069">fill</span>&nbsp;<span class="op" id="5856074">==</span>&nbsp;<span class="ident" id="5856077">FillLink</span>&nbsp;<span class="op" id="5856086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856092">if</span>&nbsp;<span class="op" id="5856095">(</span><span class="ident" id="5856096">inst</span>&nbsp;<span class="op" id="5856101">&gt;&gt;</span>&nbsp;<span class="num" id="5856104">31</span><span class="op" id="5856106">)</span>&nbsp;<span class="op" id="5856108">!=</span>&nbsp;<span class="num" id="5856111">0x1</span>&nbsp;<span class="op" id="5856115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5856122">panic</span><span class="op" id="5856127">(</span><span class="string" id="5856128">&#34;not&nbsp;a&nbsp;jump&#34;</span><span class="op" id="5856140">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856152">if</span>&nbsp;<span class="op" id="5856155">(</span><span class="ident" id="5856156">inst</span>&nbsp;<span class="op" id="5856161">&amp;</span>&nbsp;<span class="num" id="5856163">0x3fffffff</span><span class="op" id="5856173">)</span>&nbsp;<span class="op" id="5856175">!=</span>&nbsp;<span class="num" id="5856178">0</span>&nbsp;<span class="op" id="5856180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5856187">panic</span><span class="op" id="5856192">(</span><span class="string" id="5856193">&#34;already&nbsp;filled&#34;</span><span class="op" id="5856209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856222">pc</span>&nbsp;<span class="op" id="5856225">:=</span>&nbsp;<span class="ident" id="5856228">f</span><span class="op" id="5856229">.</span><span class="ident" id="5856230">addr</span>&nbsp;<span class="op" id="5856235">+</span>&nbsp;<span class="builtintype" id="5856237">uint32</span><span class="op" id="5856243">(</span><span class="ident" id="5856244">i</span><span class="op" id="5856245">)</span><span class="op" id="5856246">*</span><span class="num" id="5856247">4</span>&nbsp;<span class="op" id="5856249">+</span>&nbsp;<span class="num" id="5856251">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856257">target</span>&nbsp;<span class="op" id="5856264">:=</span>&nbsp;<span class="ident" id="5856267">p</span><span class="op" id="5856268">.</span><span class="ident" id="5856269">requires</span><span class="op" id="5856277">[</span><span class="ident" id="5856278">curLink</span><span class="op" id="5856285">.</span><span class="ident" id="5856286">pkg</span><span class="op" id="5856289">]</span><span class="op" id="5856290">.</span><span class="ident" id="5856291">Func</span><span class="op" id="5856295">(</span><span class="ident" id="5856296">curLink</span><span class="op" id="5856303">.</span><span class="ident" id="5856304">sym</span><span class="op" id="5856307">)</span><span class="op" id="5856308">.</span><span class="ident" id="5856309">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856318">inst</span>&nbsp;<span class="op" id="5856323">|=</span>&nbsp;<span class="op" id="5856326">(</span><span class="ident" id="5856327">target</span>&nbsp;<span class="op" id="5856334">-</span>&nbsp;<span class="ident" id="5856336">pc</span><span class="op" id="5856338">)</span>&nbsp;<span class="op" id="5856340">&gt;&gt;</span>&nbsp;<span class="num" id="5856343">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856348">}</span>&nbsp;<span class="keyword" id="5856350">else</span>&nbsp;<span class="keyword" id="5856355">if</span>&nbsp;<span class="ident" id="5856358">fill</span>&nbsp;<span class="op" id="5856363">==</span>&nbsp;<span class="ident" id="5856366">FillHigh</span>&nbsp;<span class="op" id="5856375">||</span>&nbsp;<span class="ident" id="5856378">fill</span>&nbsp;<span class="op" id="5856383">==</span>&nbsp;<span class="ident" id="5856386">FillLow</span>&nbsp;<span class="op" id="5856394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856400">if</span>&nbsp;<span class="op" id="5856403">(</span><span class="ident" id="5856404">inst</span>&nbsp;<span class="op" id="5856409">&amp;</span>&nbsp;<span class="num" id="5856411">0xffff</span><span class="op" id="5856417">)</span>&nbsp;<span class="op" id="5856419">!=</span>&nbsp;<span class="num" id="5856422">0</span>&nbsp;<span class="op" id="5856424">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5856431">panic</span><span class="op" id="5856436">(</span><span class="string" id="5856437">&#34;already&nbsp;filled&#34;</span><span class="op" id="5856453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856466">pkg</span>&nbsp;<span class="op" id="5856470">:=</span>&nbsp;<span class="ident" id="5856473">p</span><span class="op" id="5856474">.</span><span class="ident" id="5856475">requires</span><span class="op" id="5856483">[</span><span class="ident" id="5856484">curLink</span><span class="op" id="5856491">.</span><span class="ident" id="5856492">pkg</span><span class="op" id="5856495">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856501">sym</span>&nbsp;<span class="op" id="5856505">:=</span>&nbsp;<span class="ident" id="5856508">pkg</span><span class="op" id="5856511">.</span><span class="ident" id="5856512">symbols</span><span class="op" id="5856519">[</span><span class="ident" id="5856520">curLink</span><span class="op" id="5856527">.</span><span class="ident" id="5856528">sym</span><span class="op" id="5856531">]</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856537">var</span>&nbsp;<span class="ident" id="5856541">v</span>&nbsp;<span class="builtintype" id="5856543">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856554">switch</span>&nbsp;<span class="ident" id="5856561">sym</span><span class="op" id="5856564">.</span><span class="ident" id="5856565">Type</span>&nbsp;<span class="op" id="5856570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856576">case</span>&nbsp;<span class="ident" id="5856581">SymFunc</span><span class="op" id="5856588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856595">v</span>&nbsp;<span class="op" id="5856597">=</span>&nbsp;<span class="ident" id="5856599">pkg</span><span class="op" id="5856602">.</span><span class="ident" id="5856603">Func</span><span class="op" id="5856607">(</span><span class="ident" id="5856608">curLink</span><span class="op" id="5856615">.</span><span class="ident" id="5856616">sym</span><span class="op" id="5856619">)</span><span class="op" id="5856620">.</span><span class="ident" id="5856621">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856630">case</span>&nbsp;<span class="ident" id="5856635">SymVar</span><span class="op" id="5856641">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856648">v</span>&nbsp;<span class="op" id="5856650">=</span>&nbsp;<span class="ident" id="5856652">pkg</span><span class="op" id="5856655">.</span><span class="ident" id="5856656">Var</span><span class="op" id="5856659">(</span><span class="ident" id="5856660">curLink</span><span class="op" id="5856667">.</span><span class="ident" id="5856668">sym</span><span class="op" id="5856671">)</span><span class="op" id="5856672">.</span><span class="ident" id="5856673">addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856682">default</span><span class="op" id="5856689">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5856696">panic</span><span class="op" id="5856701">(</span><span class="string" id="5856702">&#34;bug&#34;</span><span class="op" id="5856707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856720">if</span>&nbsp;<span class="ident" id="5856723">fill</span>&nbsp;<span class="op" id="5856728">==</span>&nbsp;<span class="ident" id="5856731">FillHigh</span>&nbsp;<span class="op" id="5856740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856747">inst</span>&nbsp;<span class="op" id="5856752">|=</span>&nbsp;<span class="ident" id="5856755">v</span>&nbsp;<span class="op" id="5856757">&gt;&gt;</span>&nbsp;<span class="num" id="5856760">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856767">}</span>&nbsp;<span class="keyword" id="5856769">else</span>&nbsp;<span class="op" id="5856774">{</span>&nbsp;<span class="comment" id="5856776">//&nbsp;fillLow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856792">inst</span>&nbsp;<span class="op" id="5856797">|=</span>&nbsp;<span class="ident" id="5856800">v</span>&nbsp;<span class="op" id="5856802">&amp;</span>&nbsp;<span class="num" id="5856804">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856815">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856820">}</span>&nbsp;<span class="keyword" id="5856822">else</span>&nbsp;<span class="op" id="5856827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5856833">panic</span><span class="op" id="5856838">(</span><span class="string" id="5856839">&#34;invalid&nbsp;fill&#34;</span><span class="op" id="5856853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856864">cur</span><span class="op" id="5856867">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856873">updateCur</span><span class="op" id="5856882">(</span><span class="op" id="5856883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5856892">w</span><span class="op" id="5856893">.</span><span class="ident" id="5856894">writeU32</span><span class="op" id="5856902">(</span><span class="ident" id="5856903">inst</span><span class="op" id="5856907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856910">}</span><br>
<span class="lineno">105</span><span class="op" id="5856912">}</span>
</div>
</body>
</html>
