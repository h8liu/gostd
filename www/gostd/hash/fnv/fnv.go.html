<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4044643">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4044698">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4044752">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4044803">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="4044880">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="4044940">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="4044947">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="4045025">package</span>&nbsp;<span class="ident" id="4045033">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4045038">import</span>&nbsp;<span class="op" id="4045045">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4045048">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="4045055">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4045058">type</span>&nbsp;<span class="op" id="4045063">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045066">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="4045073">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045081">sum32a</span>&nbsp;<span class="builtintype" id="4045088">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045096">sum64</span>&nbsp;&nbsp;<span class="ident" id="4045103">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045111">sum64a</span>&nbsp;<span class="ident" id="4045118">uint64</span><br>
<span class="lineno">20</span><span class="op" id="4045125">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4045128">const</span>&nbsp;<span class="op" id="4045134">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045137">offset32</span>&nbsp;<span class="op" id="4045146">=</span>&nbsp;<span class="num" id="4045148">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045160">offset64</span>&nbsp;<span class="op" id="4045169">=</span>&nbsp;<span class="num" id="4045171">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045193">prime32</span>&nbsp;&nbsp;<span class="op" id="4045202">=</span>&nbsp;<span class="num" id="4045204">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045214">prime64</span>&nbsp;&nbsp;<span class="op" id="4045223">=</span>&nbsp;<span class="num" id="4045225">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="4045239">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4045242">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="4045289">func</span>&nbsp;<span class="ident" id="4045294">New32</span><span class="op" id="4045299">(</span><span class="op" id="4045300">)</span>&nbsp;<span class="ident" id="4045302">hash</span><span class="op" id="4045306">.</span><span class="ident" id="4045307">Hash32</span>&nbsp;<span class="op" id="4045314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045317">var</span>&nbsp;<span class="ident" id="4045321">s</span>&nbsp;<span class="ident" id="4045323">sum32</span>&nbsp;<span class="op" id="4045329">=</span>&nbsp;<span class="ident" id="4045331">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045341">return</span>&nbsp;<span class="op" id="4045348">&amp;</span><span class="ident" id="4045349">s</span><br>
<span class="lineno"></span><span class="op" id="4045351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4045354">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="4045403">func</span>&nbsp;<span class="ident" id="4045408">New32a</span><span class="op" id="4045414">(</span><span class="op" id="4045415">)</span>&nbsp;<span class="ident" id="4045417">hash</span><span class="op" id="4045421">.</span><span class="ident" id="4045422">Hash32</span>&nbsp;<span class="op" id="4045429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045432">var</span>&nbsp;<span class="ident" id="4045436">s</span>&nbsp;<span class="ident" id="4045438">sum32a</span>&nbsp;<span class="op" id="4045445">=</span>&nbsp;<span class="ident" id="4045447">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045457">return</span>&nbsp;<span class="op" id="4045464">&amp;</span><span class="ident" id="4045465">s</span><br>
<span class="lineno"></span><span class="op" id="4045467">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="4045470">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="4045517">func</span>&nbsp;<span class="ident" id="4045522">New64</span><span class="op" id="4045527">(</span><span class="op" id="4045528">)</span>&nbsp;<span class="ident" id="4045530">hash</span><span class="op" id="4045534">.</span><span class="ident" id="4045535">Hash64</span>&nbsp;<span class="op" id="4045542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045545">var</span>&nbsp;<span class="ident" id="4045549">s</span>&nbsp;<span class="ident" id="4045551">sum64</span>&nbsp;<span class="op" id="4045557">=</span>&nbsp;<span class="ident" id="4045559">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045569">return</span>&nbsp;<span class="op" id="4045576">&amp;</span><span class="ident" id="4045577">s</span><br>
<span class="lineno">45</span><span class="op" id="4045579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4045582">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="4045631">func</span>&nbsp;<span class="ident" id="4045636">New64a</span><span class="op" id="4045642">(</span><span class="op" id="4045643">)</span>&nbsp;<span class="ident" id="4045645">hash</span><span class="op" id="4045649">.</span><span class="ident" id="4045650">Hash64</span>&nbsp;<span class="op" id="4045657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045660">var</span>&nbsp;<span class="ident" id="4045664">s</span>&nbsp;<span class="ident" id="4045666">sum64a</span>&nbsp;<span class="op" id="4045673">=</span>&nbsp;<span class="ident" id="4045675">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4045685">return</span>&nbsp;<span class="op" id="4045692">&amp;</span><span class="ident" id="4045693">s</span><br>
<span class="lineno"></span><span class="op" id="4045695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4045698">func</span>&nbsp;<span class="op" id="4045703">(</span><span class="ident" id="4045704">s</span>&nbsp;<span class="op" id="4045706">*</span><span class="ident" id="4045707">sum32</span><span class="op" id="4045712">)</span>&nbsp;<span class="ident" id="4045714">Reset</span><span class="op" id="4045719">(</span><span class="op" id="4045720">)</span>&nbsp;&nbsp;<span class="op" id="4045723">{</span>&nbsp;<span class="op" id="4045725">*</span><span class="ident" id="4045726">s</span>&nbsp;<span class="op" id="4045728">=</span>&nbsp;<span class="ident" id="4045730">offset32</span>&nbsp;<span class="op" id="4045739">}</span><br>
<span class="lineno"></span><span class="keyword" id="4045741">func</span>&nbsp;<span class="op" id="4045746">(</span><span class="ident" id="4045747">s</span>&nbsp;<span class="op" id="4045749">*</span><span class="ident" id="4045750">sum32a</span><span class="op" id="4045756">)</span>&nbsp;<span class="ident" id="4045758">Reset</span><span class="op" id="4045763">(</span><span class="op" id="4045764">)</span>&nbsp;<span class="op" id="4045766">{</span>&nbsp;<span class="op" id="4045768">*</span><span class="ident" id="4045769">s</span>&nbsp;<span class="op" id="4045771">=</span>&nbsp;<span class="ident" id="4045773">offset32</span>&nbsp;<span class="op" id="4045782">}</span><br>
<span class="lineno">55</span><span class="keyword" id="4045784">func</span>&nbsp;<span class="op" id="4045789">(</span><span class="ident" id="4045790">s</span>&nbsp;<span class="op" id="4045792">*</span><span class="ident" id="4045793">sum64</span><span class="op" id="4045798">)</span>&nbsp;<span class="ident" id="4045800">Reset</span><span class="op" id="4045805">(</span><span class="op" id="4045806">)</span>&nbsp;&nbsp;<span class="op" id="4045809">{</span>&nbsp;<span class="op" id="4045811">*</span><span class="ident" id="4045812">s</span>&nbsp;<span class="op" id="4045814">=</span>&nbsp;<span class="ident" id="4045816">offset64</span>&nbsp;<span class="op" id="4045825">}</span><br>
<span class="lineno"></span><span class="keyword" id="4045827">func</span>&nbsp;<span class="op" id="4045832">(</span><span class="ident" id="4045833">s</span>&nbsp;<span class="op" id="4045835">*</span><span class="ident" id="4045836">sum64a</span><span class="op" id="4045842">)</span>&nbsp;<span class="ident" id="4045844">Reset</span><span class="op" id="4045849">(</span><span class="op" id="4045850">)</span>&nbsp;<span class="op" id="4045852">{</span>&nbsp;<span class="op" id="4045854">*</span><span class="ident" id="4045855">s</span>&nbsp;<span class="op" id="4045857">=</span>&nbsp;<span class="ident" id="4045859">offset64</span>&nbsp;<span class="op" id="4045868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4045871">func</span>&nbsp;<span class="op" id="4045876">(</span><span class="ident" id="4045877">s</span>&nbsp;<span class="op" id="4045879">*</span><span class="ident" id="4045880">sum32</span><span class="op" id="4045885">)</span>&nbsp;<span class="ident" id="4045887">Sum32</span><span class="op" id="4045892">(</span><span class="op" id="4045893">)</span>&nbsp;<span class="builtintype" id="4045895">uint32</span>&nbsp;&nbsp;<span class="op" id="4045903">{</span>&nbsp;<span class="keyword" id="4045905">return</span>&nbsp;<span class="builtintype" id="4045912">uint32</span><span class="op" id="4045918">(</span><span class="op" id="4045919">*</span><span class="ident" id="4045920">s</span><span class="op" id="4045921">)</span>&nbsp;<span class="op" id="4045923">}</span><br>
<span class="lineno"></span><span class="keyword" id="4045925">func</span>&nbsp;<span class="op" id="4045930">(</span><span class="ident" id="4045931">s</span>&nbsp;<span class="op" id="4045933">*</span><span class="ident" id="4045934">sum32a</span><span class="op" id="4045940">)</span>&nbsp;<span class="ident" id="4045942">Sum32</span><span class="op" id="4045947">(</span><span class="op" id="4045948">)</span>&nbsp;<span class="builtintype" id="4045950">uint32</span>&nbsp;<span class="op" id="4045957">{</span>&nbsp;<span class="keyword" id="4045959">return</span>&nbsp;<span class="builtintype" id="4045966">uint32</span><span class="op" id="4045972">(</span><span class="op" id="4045973">*</span><span class="ident" id="4045974">s</span><span class="op" id="4045975">)</span>&nbsp;<span class="op" id="4045977">}</span><br>
<span class="lineno">60</span><span class="keyword" id="4045979">func</span>&nbsp;<span class="op" id="4045984">(</span><span class="ident" id="4045985">s</span>&nbsp;<span class="op" id="4045987">*</span><span class="ident" id="4045988">sum64</span><span class="op" id="4045993">)</span>&nbsp;<span class="ident" id="4045995">Sum64</span><span class="op" id="4046000">(</span><span class="op" id="4046001">)</span>&nbsp;<span class="ident" id="4046003">uint64</span>&nbsp;&nbsp;<span class="op" id="4046011">{</span>&nbsp;<span class="keyword" id="4046013">return</span>&nbsp;<span class="ident" id="4046020">uint64</span><span class="op" id="4046026">(</span><span class="op" id="4046027">*</span><span class="ident" id="4046028">s</span><span class="op" id="4046029">)</span>&nbsp;<span class="op" id="4046031">}</span><br>
<span class="lineno"></span><span class="keyword" id="4046033">func</span>&nbsp;<span class="op" id="4046038">(</span><span class="ident" id="4046039">s</span>&nbsp;<span class="op" id="4046041">*</span><span class="ident" id="4046042">sum64a</span><span class="op" id="4046048">)</span>&nbsp;<span class="ident" id="4046050">Sum64</span><span class="op" id="4046055">(</span><span class="op" id="4046056">)</span>&nbsp;<span class="ident" id="4046058">uint64</span>&nbsp;<span class="op" id="4046065">{</span>&nbsp;<span class="keyword" id="4046067">return</span>&nbsp;<span class="ident" id="4046074">uint64</span><span class="op" id="4046080">(</span><span class="op" id="4046081">*</span><span class="ident" id="4046082">s</span><span class="op" id="4046083">)</span>&nbsp;<span class="op" id="4046085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4046088">func</span>&nbsp;<span class="op" id="4046093">(</span><span class="ident" id="4046094">s</span>&nbsp;<span class="op" id="4046096">*</span><span class="ident" id="4046097">sum32</span><span class="op" id="4046102">)</span>&nbsp;<span class="ident" id="4046104">Write</span><span class="op" id="4046109">(</span><span class="ident" id="4046110">data</span>&nbsp;<span class="op" id="4046115">[</span><span class="op" id="4046116">]</span><span class="builtintype" id="4046117">byte</span><span class="op" id="4046121">)</span>&nbsp;<span class="op" id="4046123">(</span><span class="builtintype" id="4046124">int</span><span class="op" id="4046127">,</span>&nbsp;<span class="builtintype" id="4046129">error</span><span class="op" id="4046134">)</span>&nbsp;<span class="op" id="4046136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046139">hash</span>&nbsp;<span class="op" id="4046144">:=</span>&nbsp;<span class="op" id="4046147">*</span><span class="ident" id="4046148">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046151">for</span>&nbsp;<span class="ident" id="4046155">_</span><span class="op" id="4046156">,</span>&nbsp;<span class="ident" id="4046158">c</span>&nbsp;<span class="op" id="4046160">:=</span>&nbsp;<span class="keyword" id="4046163">range</span>&nbsp;<span class="ident" id="4046169">data</span>&nbsp;<span class="op" id="4046174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046178">hash</span>&nbsp;<span class="op" id="4046183">*=</span>&nbsp;<span class="ident" id="4046186">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046196">hash</span>&nbsp;<span class="op" id="4046201">^=</span>&nbsp;<span class="ident" id="4046204">sum32</span><span class="op" id="4046209">(</span><span class="ident" id="4046210">c</span><span class="op" id="4046211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046217">*</span><span class="ident" id="4046218">s</span>&nbsp;<span class="op" id="4046220">=</span>&nbsp;<span class="ident" id="4046222">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046228">return</span>&nbsp;<span class="builtinfunc" id="4046235">len</span><span class="op" id="4046238">(</span><span class="ident" id="4046239">data</span><span class="op" id="4046243">)</span><span class="op" id="4046244">,</span>&nbsp;<span class="ident" id="4046246">nil</span><br>
<span class="lineno"></span><span class="op" id="4046250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4046253">func</span>&nbsp;<span class="op" id="4046258">(</span><span class="ident" id="4046259">s</span>&nbsp;<span class="op" id="4046261">*</span><span class="ident" id="4046262">sum32a</span><span class="op" id="4046268">)</span>&nbsp;<span class="ident" id="4046270">Write</span><span class="op" id="4046275">(</span><span class="ident" id="4046276">data</span>&nbsp;<span class="op" id="4046281">[</span><span class="op" id="4046282">]</span><span class="builtintype" id="4046283">byte</span><span class="op" id="4046287">)</span>&nbsp;<span class="op" id="4046289">(</span><span class="builtintype" id="4046290">int</span><span class="op" id="4046293">,</span>&nbsp;<span class="builtintype" id="4046295">error</span><span class="op" id="4046300">)</span>&nbsp;<span class="op" id="4046302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046305">hash</span>&nbsp;<span class="op" id="4046310">:=</span>&nbsp;<span class="op" id="4046313">*</span><span class="ident" id="4046314">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046317">for</span>&nbsp;<span class="ident" id="4046321">_</span><span class="op" id="4046322">,</span>&nbsp;<span class="ident" id="4046324">c</span>&nbsp;<span class="op" id="4046326">:=</span>&nbsp;<span class="keyword" id="4046329">range</span>&nbsp;<span class="ident" id="4046335">data</span>&nbsp;<span class="op" id="4046340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046344">hash</span>&nbsp;<span class="op" id="4046349">^=</span>&nbsp;<span class="ident" id="4046352">sum32a</span><span class="op" id="4046358">(</span><span class="ident" id="4046359">c</span><span class="op" id="4046360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046364">hash</span>&nbsp;<span class="op" id="4046369">*=</span>&nbsp;<span class="ident" id="4046372">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046384">*</span><span class="ident" id="4046385">s</span>&nbsp;<span class="op" id="4046387">=</span>&nbsp;<span class="ident" id="4046389">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046395">return</span>&nbsp;<span class="builtinfunc" id="4046402">len</span><span class="op" id="4046405">(</span><span class="ident" id="4046406">data</span><span class="op" id="4046410">)</span><span class="op" id="4046411">,</span>&nbsp;<span class="ident" id="4046413">nil</span><br>
<span class="lineno"></span><span class="op" id="4046417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4046420">func</span>&nbsp;<span class="op" id="4046425">(</span><span class="ident" id="4046426">s</span>&nbsp;<span class="op" id="4046428">*</span><span class="ident" id="4046429">sum64</span><span class="op" id="4046434">)</span>&nbsp;<span class="ident" id="4046436">Write</span><span class="op" id="4046441">(</span><span class="ident" id="4046442">data</span>&nbsp;<span class="op" id="4046447">[</span><span class="op" id="4046448">]</span><span class="builtintype" id="4046449">byte</span><span class="op" id="4046453">)</span>&nbsp;<span class="op" id="4046455">(</span><span class="builtintype" id="4046456">int</span><span class="op" id="4046459">,</span>&nbsp;<span class="builtintype" id="4046461">error</span><span class="op" id="4046466">)</span>&nbsp;<span class="op" id="4046468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046471">hash</span>&nbsp;<span class="op" id="4046476">:=</span>&nbsp;<span class="op" id="4046479">*</span><span class="ident" id="4046480">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046483">for</span>&nbsp;<span class="ident" id="4046487">_</span><span class="op" id="4046488">,</span>&nbsp;<span class="ident" id="4046490">c</span>&nbsp;<span class="op" id="4046492">:=</span>&nbsp;<span class="keyword" id="4046495">range</span>&nbsp;<span class="ident" id="4046501">data</span>&nbsp;<span class="op" id="4046506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046510">hash</span>&nbsp;<span class="op" id="4046515">*=</span>&nbsp;<span class="ident" id="4046518">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046528">hash</span>&nbsp;<span class="op" id="4046533">^=</span>&nbsp;<span class="ident" id="4046536">sum64</span><span class="op" id="4046541">(</span><span class="ident" id="4046542">c</span><span class="op" id="4046543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046549">*</span><span class="ident" id="4046550">s</span>&nbsp;<span class="op" id="4046552">=</span>&nbsp;<span class="ident" id="4046554">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046560">return</span>&nbsp;<span class="builtinfunc" id="4046567">len</span><span class="op" id="4046570">(</span><span class="ident" id="4046571">data</span><span class="op" id="4046575">)</span><span class="op" id="4046576">,</span>&nbsp;<span class="ident" id="4046578">nil</span><br>
<span class="lineno"></span><span class="op" id="4046582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4046585">func</span>&nbsp;<span class="op" id="4046590">(</span><span class="ident" id="4046591">s</span>&nbsp;<span class="op" id="4046593">*</span><span class="ident" id="4046594">sum64a</span><span class="op" id="4046600">)</span>&nbsp;<span class="ident" id="4046602">Write</span><span class="op" id="4046607">(</span><span class="ident" id="4046608">data</span>&nbsp;<span class="op" id="4046613">[</span><span class="op" id="4046614">]</span><span class="builtintype" id="4046615">byte</span><span class="op" id="4046619">)</span>&nbsp;<span class="op" id="4046621">(</span><span class="builtintype" id="4046622">int</span><span class="op" id="4046625">,</span>&nbsp;<span class="builtintype" id="4046627">error</span><span class="op" id="4046632">)</span>&nbsp;<span class="op" id="4046634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046637">hash</span>&nbsp;<span class="op" id="4046642">:=</span>&nbsp;<span class="op" id="4046645">*</span><span class="ident" id="4046646">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046649">for</span>&nbsp;<span class="ident" id="4046653">_</span><span class="op" id="4046654">,</span>&nbsp;<span class="ident" id="4046656">c</span>&nbsp;<span class="op" id="4046658">:=</span>&nbsp;<span class="keyword" id="4046661">range</span>&nbsp;<span class="ident" id="4046667">data</span>&nbsp;<span class="op" id="4046672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046676">hash</span>&nbsp;<span class="op" id="4046681">^=</span>&nbsp;<span class="ident" id="4046684">sum64a</span><span class="op" id="4046690">(</span><span class="ident" id="4046691">c</span><span class="op" id="4046692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046696">hash</span>&nbsp;<span class="op" id="4046701">*=</span>&nbsp;<span class="ident" id="4046704">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046716">*</span><span class="ident" id="4046717">s</span>&nbsp;<span class="op" id="4046719">=</span>&nbsp;<span class="ident" id="4046721">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046727">return</span>&nbsp;<span class="builtinfunc" id="4046734">len</span><span class="op" id="4046737">(</span><span class="ident" id="4046738">data</span><span class="op" id="4046742">)</span><span class="op" id="4046743">,</span>&nbsp;<span class="ident" id="4046745">nil</span><br>
<span class="lineno"></span><span class="op" id="4046749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4046752">func</span>&nbsp;<span class="op" id="4046757">(</span><span class="ident" id="4046758">s</span>&nbsp;<span class="op" id="4046760">*</span><span class="ident" id="4046761">sum32</span><span class="op" id="4046766">)</span>&nbsp;<span class="ident" id="4046768">Size</span><span class="op" id="4046772">(</span><span class="op" id="4046773">)</span>&nbsp;<span class="builtintype" id="4046775">int</span>&nbsp;&nbsp;<span class="op" id="4046780">{</span>&nbsp;<span class="keyword" id="4046782">return</span>&nbsp;<span class="num" id="4046789">4</span>&nbsp;<span class="op" id="4046791">}</span><br>
<span class="lineno"></span><span class="keyword" id="4046793">func</span>&nbsp;<span class="op" id="4046798">(</span><span class="ident" id="4046799">s</span>&nbsp;<span class="op" id="4046801">*</span><span class="ident" id="4046802">sum32a</span><span class="op" id="4046808">)</span>&nbsp;<span class="ident" id="4046810">Size</span><span class="op" id="4046814">(</span><span class="op" id="4046815">)</span>&nbsp;<span class="builtintype" id="4046817">int</span>&nbsp;<span class="op" id="4046821">{</span>&nbsp;<span class="keyword" id="4046823">return</span>&nbsp;<span class="num" id="4046830">4</span>&nbsp;<span class="op" id="4046832">}</span><br>
<span class="lineno">105</span><span class="keyword" id="4046834">func</span>&nbsp;<span class="op" id="4046839">(</span><span class="ident" id="4046840">s</span>&nbsp;<span class="op" id="4046842">*</span><span class="ident" id="4046843">sum64</span><span class="op" id="4046848">)</span>&nbsp;<span class="ident" id="4046850">Size</span><span class="op" id="4046854">(</span><span class="op" id="4046855">)</span>&nbsp;<span class="builtintype" id="4046857">int</span>&nbsp;&nbsp;<span class="op" id="4046862">{</span>&nbsp;<span class="keyword" id="4046864">return</span>&nbsp;<span class="num" id="4046871">8</span>&nbsp;<span class="op" id="4046873">}</span><br>
<span class="lineno"></span><span class="keyword" id="4046875">func</span>&nbsp;<span class="op" id="4046880">(</span><span class="ident" id="4046881">s</span>&nbsp;<span class="op" id="4046883">*</span><span class="ident" id="4046884">sum64a</span><span class="op" id="4046890">)</span>&nbsp;<span class="ident" id="4046892">Size</span><span class="op" id="4046896">(</span><span class="op" id="4046897">)</span>&nbsp;<span class="builtintype" id="4046899">int</span>&nbsp;<span class="op" id="4046903">{</span>&nbsp;<span class="keyword" id="4046905">return</span>&nbsp;<span class="num" id="4046912">8</span>&nbsp;<span class="op" id="4046914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4046917">func</span>&nbsp;<span class="op" id="4046922">(</span><span class="ident" id="4046923">s</span>&nbsp;<span class="op" id="4046925">*</span><span class="ident" id="4046926">sum32</span><span class="op" id="4046931">)</span>&nbsp;<span class="ident" id="4046933">BlockSize</span><span class="op" id="4046942">(</span><span class="op" id="4046943">)</span>&nbsp;<span class="builtintype" id="4046945">int</span>&nbsp;&nbsp;<span class="op" id="4046950">{</span>&nbsp;<span class="keyword" id="4046952">return</span>&nbsp;<span class="num" id="4046959">1</span>&nbsp;<span class="op" id="4046961">}</span><br>
<span class="lineno"></span><span class="keyword" id="4046963">func</span>&nbsp;<span class="op" id="4046968">(</span><span class="ident" id="4046969">s</span>&nbsp;<span class="op" id="4046971">*</span><span class="ident" id="4046972">sum32a</span><span class="op" id="4046978">)</span>&nbsp;<span class="ident" id="4046980">BlockSize</span><span class="op" id="4046989">(</span><span class="op" id="4046990">)</span>&nbsp;<span class="builtintype" id="4046992">int</span>&nbsp;<span class="op" id="4046996">{</span>&nbsp;<span class="keyword" id="4046998">return</span>&nbsp;<span class="num" id="4047005">1</span>&nbsp;<span class="op" id="4047007">}</span><br>
<span class="lineno">110</span><span class="keyword" id="4047009">func</span>&nbsp;<span class="op" id="4047014">(</span><span class="ident" id="4047015">s</span>&nbsp;<span class="op" id="4047017">*</span><span class="ident" id="4047018">sum64</span><span class="op" id="4047023">)</span>&nbsp;<span class="ident" id="4047025">BlockSize</span><span class="op" id="4047034">(</span><span class="op" id="4047035">)</span>&nbsp;<span class="builtintype" id="4047037">int</span>&nbsp;&nbsp;<span class="op" id="4047042">{</span>&nbsp;<span class="keyword" id="4047044">return</span>&nbsp;<span class="num" id="4047051">1</span>&nbsp;<span class="op" id="4047053">}</span><br>
<span class="lineno"></span><span class="keyword" id="4047055">func</span>&nbsp;<span class="op" id="4047060">(</span><span class="ident" id="4047061">s</span>&nbsp;<span class="op" id="4047063">*</span><span class="ident" id="4047064">sum64a</span><span class="op" id="4047070">)</span>&nbsp;<span class="ident" id="4047072">BlockSize</span><span class="op" id="4047081">(</span><span class="op" id="4047082">)</span>&nbsp;<span class="builtintype" id="4047084">int</span>&nbsp;<span class="op" id="4047088">{</span>&nbsp;<span class="keyword" id="4047090">return</span>&nbsp;<span class="num" id="4047097">1</span>&nbsp;<span class="op" id="4047099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4047102">func</span>&nbsp;<span class="op" id="4047107">(</span><span class="ident" id="4047108">s</span>&nbsp;<span class="op" id="4047110">*</span><span class="ident" id="4047111">sum32</span><span class="op" id="4047116">)</span>&nbsp;<span class="ident" id="4047118">Sum</span><span class="op" id="4047121">(</span><span class="ident" id="4047122">in</span>&nbsp;<span class="op" id="4047125">[</span><span class="op" id="4047126">]</span><span class="builtintype" id="4047127">byte</span><span class="op" id="4047131">)</span>&nbsp;<span class="op" id="4047133">[</span><span class="op" id="4047134">]</span><span class="builtintype" id="4047135">byte</span>&nbsp;<span class="op" id="4047140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047143">v</span>&nbsp;<span class="op" id="4047145">:=</span>&nbsp;<span class="builtintype" id="4047148">uint32</span><span class="op" id="4047154">(</span><span class="op" id="4047155">*</span><span class="ident" id="4047156">s</span><span class="op" id="4047157">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047160">return</span>&nbsp;<span class="builtinfunc" id="4047167">append</span><span class="op" id="4047173">(</span><span class="ident" id="4047174">in</span><span class="op" id="4047176">,</span>&nbsp;<span class="builtintype" id="4047178">byte</span><span class="op" id="4047182">(</span><span class="ident" id="4047183">v</span><span class="op" id="4047184">&gt;&gt;</span><span class="num" id="4047186">24</span><span class="op" id="4047188">)</span><span class="op" id="4047189">,</span>&nbsp;<span class="builtintype" id="4047191">byte</span><span class="op" id="4047195">(</span><span class="ident" id="4047196">v</span><span class="op" id="4047197">&gt;&gt;</span><span class="num" id="4047199">16</span><span class="op" id="4047201">)</span><span class="op" id="4047202">,</span>&nbsp;<span class="builtintype" id="4047204">byte</span><span class="op" id="4047208">(</span><span class="ident" id="4047209">v</span><span class="op" id="4047210">&gt;&gt;</span><span class="num" id="4047212">8</span><span class="op" id="4047213">)</span><span class="op" id="4047214">,</span>&nbsp;<span class="builtintype" id="4047216">byte</span><span class="op" id="4047220">(</span><span class="ident" id="4047221">v</span><span class="op" id="4047222">)</span><span class="op" id="4047223">)</span><br>
<span class="lineno"></span><span class="op" id="4047225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4047228">func</span>&nbsp;<span class="op" id="4047233">(</span><span class="ident" id="4047234">s</span>&nbsp;<span class="op" id="4047236">*</span><span class="ident" id="4047237">sum32a</span><span class="op" id="4047243">)</span>&nbsp;<span class="ident" id="4047245">Sum</span><span class="op" id="4047248">(</span><span class="ident" id="4047249">in</span>&nbsp;<span class="op" id="4047252">[</span><span class="op" id="4047253">]</span><span class="builtintype" id="4047254">byte</span><span class="op" id="4047258">)</span>&nbsp;<span class="op" id="4047260">[</span><span class="op" id="4047261">]</span><span class="builtintype" id="4047262">byte</span>&nbsp;<span class="op" id="4047267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047270">v</span>&nbsp;<span class="op" id="4047272">:=</span>&nbsp;<span class="builtintype" id="4047275">uint32</span><span class="op" id="4047281">(</span><span class="op" id="4047282">*</span><span class="ident" id="4047283">s</span><span class="op" id="4047284">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047287">return</span>&nbsp;<span class="builtinfunc" id="4047294">append</span><span class="op" id="4047300">(</span><span class="ident" id="4047301">in</span><span class="op" id="4047303">,</span>&nbsp;<span class="builtintype" id="4047305">byte</span><span class="op" id="4047309">(</span><span class="ident" id="4047310">v</span><span class="op" id="4047311">&gt;&gt;</span><span class="num" id="4047313">24</span><span class="op" id="4047315">)</span><span class="op" id="4047316">,</span>&nbsp;<span class="builtintype" id="4047318">byte</span><span class="op" id="4047322">(</span><span class="ident" id="4047323">v</span><span class="op" id="4047324">&gt;&gt;</span><span class="num" id="4047326">16</span><span class="op" id="4047328">)</span><span class="op" id="4047329">,</span>&nbsp;<span class="builtintype" id="4047331">byte</span><span class="op" id="4047335">(</span><span class="ident" id="4047336">v</span><span class="op" id="4047337">&gt;&gt;</span><span class="num" id="4047339">8</span><span class="op" id="4047340">)</span><span class="op" id="4047341">,</span>&nbsp;<span class="builtintype" id="4047343">byte</span><span class="op" id="4047347">(</span><span class="ident" id="4047348">v</span><span class="op" id="4047349">)</span><span class="op" id="4047350">)</span><br>
<span class="lineno"></span><span class="op" id="4047352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4047355">func</span>&nbsp;<span class="op" id="4047360">(</span><span class="ident" id="4047361">s</span>&nbsp;<span class="op" id="4047363">*</span><span class="ident" id="4047364">sum64</span><span class="op" id="4047369">)</span>&nbsp;<span class="ident" id="4047371">Sum</span><span class="op" id="4047374">(</span><span class="ident" id="4047375">in</span>&nbsp;<span class="op" id="4047378">[</span><span class="op" id="4047379">]</span><span class="builtintype" id="4047380">byte</span><span class="op" id="4047384">)</span>&nbsp;<span class="op" id="4047386">[</span><span class="op" id="4047387">]</span><span class="builtintype" id="4047388">byte</span>&nbsp;<span class="op" id="4047393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047396">v</span>&nbsp;<span class="op" id="4047398">:=</span>&nbsp;<span class="ident" id="4047401">uint64</span><span class="op" id="4047407">(</span><span class="op" id="4047408">*</span><span class="ident" id="4047409">s</span><span class="op" id="4047410">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047413">return</span>&nbsp;<span class="builtinfunc" id="4047420">append</span><span class="op" id="4047426">(</span><span class="ident" id="4047427">in</span><span class="op" id="4047429">,</span>&nbsp;<span class="builtintype" id="4047431">byte</span><span class="op" id="4047435">(</span><span class="ident" id="4047436">v</span><span class="op" id="4047437">&gt;&gt;</span><span class="num" id="4047439">56</span><span class="op" id="4047441">)</span><span class="op" id="4047442">,</span>&nbsp;<span class="builtintype" id="4047444">byte</span><span class="op" id="4047448">(</span><span class="ident" id="4047449">v</span><span class="op" id="4047450">&gt;&gt;</span><span class="num" id="4047452">48</span><span class="op" id="4047454">)</span><span class="op" id="4047455">,</span>&nbsp;<span class="builtintype" id="4047457">byte</span><span class="op" id="4047461">(</span><span class="ident" id="4047462">v</span><span class="op" id="4047463">&gt;&gt;</span><span class="num" id="4047465">40</span><span class="op" id="4047467">)</span><span class="op" id="4047468">,</span>&nbsp;<span class="builtintype" id="4047470">byte</span><span class="op" id="4047474">(</span><span class="ident" id="4047475">v</span><span class="op" id="4047476">&gt;&gt;</span><span class="num" id="4047478">32</span><span class="op" id="4047480">)</span><span class="op" id="4047481">,</span>&nbsp;<span class="builtintype" id="4047483">byte</span><span class="op" id="4047487">(</span><span class="ident" id="4047488">v</span><span class="op" id="4047489">&gt;&gt;</span><span class="num" id="4047491">24</span><span class="op" id="4047493">)</span><span class="op" id="4047494">,</span>&nbsp;<span class="builtintype" id="4047496">byte</span><span class="op" id="4047500">(</span><span class="ident" id="4047501">v</span><span class="op" id="4047502">&gt;&gt;</span><span class="num" id="4047504">16</span><span class="op" id="4047506">)</span><span class="op" id="4047507">,</span>&nbsp;<span class="builtintype" id="4047509">byte</span><span class="op" id="4047513">(</span><span class="ident" id="4047514">v</span><span class="op" id="4047515">&gt;&gt;</span><span class="num" id="4047517">8</span><span class="op" id="4047518">)</span><span class="op" id="4047519">,</span>&nbsp;<span class="builtintype" id="4047521">byte</span><span class="op" id="4047525">(</span><span class="ident" id="4047526">v</span><span class="op" id="4047527">)</span><span class="op" id="4047528">)</span><br>
<span class="lineno"></span><span class="op" id="4047530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4047533">func</span>&nbsp;<span class="op" id="4047538">(</span><span class="ident" id="4047539">s</span>&nbsp;<span class="op" id="4047541">*</span><span class="ident" id="4047542">sum64a</span><span class="op" id="4047548">)</span>&nbsp;<span class="ident" id="4047550">Sum</span><span class="op" id="4047553">(</span><span class="ident" id="4047554">in</span>&nbsp;<span class="op" id="4047557">[</span><span class="op" id="4047558">]</span><span class="builtintype" id="4047559">byte</span><span class="op" id="4047563">)</span>&nbsp;<span class="op" id="4047565">[</span><span class="op" id="4047566">]</span><span class="builtintype" id="4047567">byte</span>&nbsp;<span class="op" id="4047572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047575">v</span>&nbsp;<span class="op" id="4047577">:=</span>&nbsp;<span class="ident" id="4047580">uint64</span><span class="op" id="4047586">(</span><span class="op" id="4047587">*</span><span class="ident" id="4047588">s</span><span class="op" id="4047589">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047592">return</span>&nbsp;<span class="builtinfunc" id="4047599">append</span><span class="op" id="4047605">(</span><span class="ident" id="4047606">in</span><span class="op" id="4047608">,</span>&nbsp;<span class="builtintype" id="4047610">byte</span><span class="op" id="4047614">(</span><span class="ident" id="4047615">v</span><span class="op" id="4047616">&gt;&gt;</span><span class="num" id="4047618">56</span><span class="op" id="4047620">)</span><span class="op" id="4047621">,</span>&nbsp;<span class="builtintype" id="4047623">byte</span><span class="op" id="4047627">(</span><span class="ident" id="4047628">v</span><span class="op" id="4047629">&gt;&gt;</span><span class="num" id="4047631">48</span><span class="op" id="4047633">)</span><span class="op" id="4047634">,</span>&nbsp;<span class="builtintype" id="4047636">byte</span><span class="op" id="4047640">(</span><span class="ident" id="4047641">v</span><span class="op" id="4047642">&gt;&gt;</span><span class="num" id="4047644">40</span><span class="op" id="4047646">)</span><span class="op" id="4047647">,</span>&nbsp;<span class="builtintype" id="4047649">byte</span><span class="op" id="4047653">(</span><span class="ident" id="4047654">v</span><span class="op" id="4047655">&gt;&gt;</span><span class="num" id="4047657">32</span><span class="op" id="4047659">)</span><span class="op" id="4047660">,</span>&nbsp;<span class="builtintype" id="4047662">byte</span><span class="op" id="4047666">(</span><span class="ident" id="4047667">v</span><span class="op" id="4047668">&gt;&gt;</span><span class="num" id="4047670">24</span><span class="op" id="4047672">)</span><span class="op" id="4047673">,</span>&nbsp;<span class="builtintype" id="4047675">byte</span><span class="op" id="4047679">(</span><span class="ident" id="4047680">v</span><span class="op" id="4047681">&gt;&gt;</span><span class="num" id="4047683">16</span><span class="op" id="4047685">)</span><span class="op" id="4047686">,</span>&nbsp;<span class="builtintype" id="4047688">byte</span><span class="op" id="4047692">(</span><span class="ident" id="4047693">v</span><span class="op" id="4047694">&gt;&gt;</span><span class="num" id="4047696">8</span><span class="op" id="4047697">)</span><span class="op" id="4047698">,</span>&nbsp;<span class="builtintype" id="4047700">byte</span><span class="op" id="4047704">(</span><span class="ident" id="4047705">v</span><span class="op" id="4047706">)</span><span class="op" id="4047707">)</span><br>
<span class="lineno"></span><span class="op" id="4047709">}</span>
</div>
</body>
</html>
