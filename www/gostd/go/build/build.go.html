<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html" class="current">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5937584">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5937640">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5937694">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5937745">package</span>&nbsp;<span class="ident" id="5937753">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5937760">import</span>&nbsp;<span class="op" id="5937767">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937770">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937779">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937789">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937796">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937806">&#34;go/doc&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937816">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937829">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937841">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937847">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937860">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937867">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5937873">pathpkg</span>&nbsp;<span class="string" id="5937881">&#34;path&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937889">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937906">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937917">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937925">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937936">&#34;strings&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937947">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5937958">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5937973">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5937976">//&nbsp;A&nbsp;Context&nbsp;specifies&nbsp;the&nbsp;supporting&nbsp;context&nbsp;for&nbsp;a&nbsp;build.</span><br>
<span class="lineno">30</span><span class="keyword" id="5938035">type</span>&nbsp;<span class="ident" id="5938040">Context</span>&nbsp;<span class="keyword" id="5938048">struct</span>&nbsp;<span class="op" id="5938055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938058">GOARCH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5938070">string</span>&nbsp;<span class="comment" id="5938077">//&nbsp;target&nbsp;architecture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938101">GOOS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5938113">string</span>&nbsp;<span class="comment" id="5938120">//&nbsp;target&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938148">GOROOT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5938160">string</span>&nbsp;<span class="comment" id="5938167">//&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938179">GOPATH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5938191">string</span>&nbsp;<span class="comment" id="5938198">//&nbsp;Go&nbsp;path</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938210">CgoEnabled</span>&nbsp;&nbsp;<span class="builtintype" id="5938222">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5938229">//&nbsp;whether&nbsp;cgo&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938257">UseAllFiles</span>&nbsp;<span class="builtintype" id="5938269">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5938276">//&nbsp;use&nbsp;files&nbsp;regardless&nbsp;of&nbsp;+build&nbsp;lines,&nbsp;file&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938329">Compiler</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5938341">string</span>&nbsp;<span class="comment" id="5938348">//&nbsp;compiler&nbsp;to&nbsp;assume&nbsp;when&nbsp;computing&nbsp;target&nbsp;paths</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938400">//&nbsp;The&nbsp;build&nbsp;and&nbsp;release&nbsp;tags&nbsp;specify&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938457">//&nbsp;that&nbsp;should&nbsp;be&nbsp;considered&nbsp;satisfied&nbsp;when&nbsp;processing&nbsp;+build&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938527">//&nbsp;Clients&nbsp;creating&nbsp;a&nbsp;new&nbsp;context&nbsp;may&nbsp;customize&nbsp;BuildTags,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938593">//&nbsp;defaults&nbsp;to&nbsp;empty,&nbsp;but&nbsp;it&nbsp;is&nbsp;usually&nbsp;an&nbsp;error&nbsp;to&nbsp;customize&nbsp;ReleaseTags,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938669">//&nbsp;which&nbsp;defaults&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;releases&nbsp;the&nbsp;current&nbsp;release&nbsp;is&nbsp;compatible&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938755">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;BuildTags&nbsp;and&nbsp;ReleaseTags,&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938823">//&nbsp;consider&nbsp;the&nbsp;values&nbsp;of&nbsp;GOARCH&nbsp;and&nbsp;GOOS&nbsp;as&nbsp;satisfied&nbsp;tags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938885">BuildTags</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5938897">[</span><span class="op" id="5938898">]</span><span class="builtintype" id="5938899">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5938907">ReleaseTags</span>&nbsp;<span class="op" id="5938919">[</span><span class="op" id="5938920">]</span><span class="builtintype" id="5938921">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5938930">//&nbsp;The&nbsp;install&nbsp;suffix&nbsp;specifies&nbsp;a&nbsp;suffix&nbsp;to&nbsp;use&nbsp;in&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;installation</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939011">//&nbsp;directory.&nbsp;By&nbsp;default&nbsp;it&nbsp;is&nbsp;empty,&nbsp;but&nbsp;custom&nbsp;builds&nbsp;that&nbsp;need&nbsp;to&nbsp;keep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939086">//&nbsp;their&nbsp;outputs&nbsp;separate&nbsp;can&nbsp;set&nbsp;InstallSuffix&nbsp;to&nbsp;do&nbsp;so.&nbsp;For&nbsp;example,&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939163">//&nbsp;using&nbsp;the&nbsp;race&nbsp;detector,&nbsp;the&nbsp;go&nbsp;command&nbsp;uses&nbsp;InstallSuffix&nbsp;=&nbsp;&#34;race&#34;,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939239">//&nbsp;that&nbsp;on&nbsp;a&nbsp;Linux/386&nbsp;system,&nbsp;packages&nbsp;are&nbsp;written&nbsp;to&nbsp;a&nbsp;directory&nbsp;named</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939313">//&nbsp;&#34;linux_386_race&#34;&nbsp;instead&nbsp;of&nbsp;the&nbsp;usual&nbsp;&#34;linux_386&#34;.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5939368">InstallSuffix</span>&nbsp;<span class="builtintype" id="5939382">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939391">//&nbsp;By&nbsp;default,&nbsp;Import&nbsp;uses&nbsp;the&nbsp;operating&nbsp;system&#39;s&nbsp;file&nbsp;system&nbsp;calls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939460">//&nbsp;to&nbsp;read&nbsp;directories&nbsp;and&nbsp;files.&nbsp;&nbsp;To&nbsp;read&nbsp;from&nbsp;other&nbsp;sources,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939524">//&nbsp;callers&nbsp;can&nbsp;set&nbsp;the&nbsp;following&nbsp;functions.&nbsp;&nbsp;They&nbsp;all&nbsp;have&nbsp;default</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939592">//&nbsp;behaviors&nbsp;that&nbsp;use&nbsp;the&nbsp;local&nbsp;file&nbsp;system,&nbsp;so&nbsp;clients&nbsp;need&nbsp;only&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939663">//&nbsp;the&nbsp;functions&nbsp;whose&nbsp;behaviors&nbsp;they&nbsp;wish&nbsp;to&nbsp;change.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939719">//&nbsp;JoinPath&nbsp;joins&nbsp;the&nbsp;sequence&nbsp;of&nbsp;path&nbsp;fragments&nbsp;into&nbsp;a&nbsp;single&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939789">//&nbsp;If&nbsp;JoinPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.Join.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5939840">JoinPath</span>&nbsp;<span class="keyword" id="5939849">func</span><span class="op" id="5939853">(</span><span class="ident" id="5939854">elem</span>&nbsp;<span class="op" id="5939859">...</span><span class="builtintype" id="5939862">string</span><span class="op" id="5939868">)</span>&nbsp;<span class="builtintype" id="5939870">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939879">//&nbsp;SplitPathList&nbsp;splits&nbsp;the&nbsp;path&nbsp;list&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;individual&nbsp;paths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5939952">//&nbsp;If&nbsp;SplitPathList&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5940013">SplitPathList</span>&nbsp;<span class="keyword" id="5940027">func</span><span class="op" id="5940031">(</span><span class="ident" id="5940032">list</span>&nbsp;<span class="builtintype" id="5940037">string</span><span class="op" id="5940043">)</span>&nbsp;<span class="op" id="5940045">[</span><span class="op" id="5940046">]</span><span class="builtintype" id="5940047">string</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940056">//&nbsp;IsAbsPath&nbsp;reports&nbsp;whether&nbsp;path&nbsp;is&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940112">//&nbsp;If&nbsp;IsAbsPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5940165">IsAbsPath</span>&nbsp;<span class="keyword" id="5940175">func</span><span class="op" id="5940179">(</span><span class="ident" id="5940180">path</span>&nbsp;<span class="builtintype" id="5940185">string</span><span class="op" id="5940191">)</span>&nbsp;<span class="builtintype" id="5940193">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940200">//&nbsp;IsDir&nbsp;reports&nbsp;whether&nbsp;the&nbsp;path&nbsp;names&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940254">//&nbsp;If&nbsp;IsDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;calls&nbsp;os.Stat&nbsp;and&nbsp;uses&nbsp;the&nbsp;result&#39;s&nbsp;IsDir&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5940332">IsDir</span>&nbsp;<span class="keyword" id="5940338">func</span><span class="op" id="5940342">(</span><span class="ident" id="5940343">path</span>&nbsp;<span class="builtintype" id="5940348">string</span><span class="op" id="5940354">)</span>&nbsp;<span class="builtintype" id="5940356">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940363">//&nbsp;HasSubdir&nbsp;reports&nbsp;whether&nbsp;dir&nbsp;is&nbsp;a&nbsp;subdirectory&nbsp;of</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940418">//&nbsp;(perhaps&nbsp;multiple&nbsp;levels&nbsp;below)&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940460">//&nbsp;If&nbsp;so,&nbsp;HasSubdir&nbsp;sets&nbsp;rel&nbsp;to&nbsp;a&nbsp;slash-separated&nbsp;path&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940521">//&nbsp;can&nbsp;be&nbsp;joined&nbsp;to&nbsp;root&nbsp;to&nbsp;produce&nbsp;a&nbsp;path&nbsp;equivalent&nbsp;to&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940584">//&nbsp;If&nbsp;HasSubdir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;an&nbsp;implementation&nbsp;built&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940648">//&nbsp;filepath.EvalSymlinks.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5940675">HasSubdir</span>&nbsp;<span class="keyword" id="5940685">func</span><span class="op" id="5940689">(</span><span class="ident" id="5940690">root</span><span class="op" id="5940694">,</span>&nbsp;<span class="ident" id="5940696">dir</span>&nbsp;<span class="builtintype" id="5940700">string</span><span class="op" id="5940706">)</span>&nbsp;<span class="op" id="5940708">(</span><span class="ident" id="5940709">rel</span>&nbsp;<span class="builtintype" id="5940713">string</span><span class="op" id="5940719">,</span>&nbsp;<span class="ident" id="5940721">ok</span>&nbsp;<span class="builtintype" id="5940724">bool</span><span class="op" id="5940728">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940732">//&nbsp;ReadDir&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;os.FileInfo,&nbsp;sorted&nbsp;by&nbsp;Name,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940792">//&nbsp;describing&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940843">//&nbsp;If&nbsp;ReadDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5940894">ReadDir</span>&nbsp;<span class="keyword" id="5940902">func</span><span class="op" id="5940906">(</span><span class="ident" id="5940907">dir</span>&nbsp;<span class="builtintype" id="5940911">string</span><span class="op" id="5940917">)</span>&nbsp;<span class="op" id="5940919">(</span><span class="ident" id="5940920">fi</span>&nbsp;<span class="op" id="5940923">[</span><span class="op" id="5940924">]</span><span class="ident" id="5940925">os</span><span class="op" id="5940927">.</span><span class="ident" id="5940928">FileInfo</span><span class="op" id="5940936">,</span>&nbsp;<span class="ident" id="5940938">err</span>&nbsp;<span class="builtintype" id="5940942">error</span><span class="op" id="5940947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5940951">//&nbsp;OpenFile&nbsp;opens&nbsp;a&nbsp;file&nbsp;(not&nbsp;a&nbsp;directory)&nbsp;for&nbsp;reading.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5941008">//&nbsp;If&nbsp;OpenFile&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;os.Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5941053">OpenFile</span>&nbsp;<span class="keyword" id="5941062">func</span><span class="op" id="5941066">(</span><span class="ident" id="5941067">path</span>&nbsp;<span class="builtintype" id="5941072">string</span><span class="op" id="5941078">)</span>&nbsp;<span class="op" id="5941080">(</span><span class="ident" id="5941081">r</span>&nbsp;<span class="ident" id="5941083">io</span><span class="op" id="5941085">.</span><span class="ident" id="5941086">ReadCloser</span><span class="op" id="5941096">,</span>&nbsp;<span class="ident" id="5941098">err</span>&nbsp;<span class="builtintype" id="5941102">error</span><span class="op" id="5941107">)</span><br>
<span class="lineno">95</span><span class="op" id="5941109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5941112">//&nbsp;joinPath&nbsp;calls&nbsp;ctxt.JoinPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.Join.</span><br>
<span class="lineno"></span><span class="keyword" id="5941180">func</span>&nbsp;<span class="op" id="5941185">(</span><span class="ident" id="5941186">ctxt</span>&nbsp;<span class="op" id="5941191">*</span><span class="ident" id="5941192">Context</span><span class="op" id="5941199">)</span>&nbsp;<span class="ident" id="5941201">joinPath</span><span class="op" id="5941209">(</span><span class="ident" id="5941210">elem</span>&nbsp;<span class="op" id="5941215">...</span><span class="builtintype" id="5941218">string</span><span class="op" id="5941224">)</span>&nbsp;<span class="builtintype" id="5941226">string</span>&nbsp;<span class="op" id="5941233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941236">if</span>&nbsp;<span class="ident" id="5941239">f</span>&nbsp;<span class="op" id="5941241">:=</span>&nbsp;<span class="ident" id="5941244">ctxt</span><span class="op" id="5941248">.</span><span class="ident" id="5941249">JoinPath</span><span class="op" id="5941257">;</span>&nbsp;<span class="ident" id="5941259">f</span>&nbsp;<span class="op" id="5941261">!=</span>&nbsp;<span class="ident" id="5941264">nil</span>&nbsp;<span class="op" id="5941268">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941272">return</span>&nbsp;<span class="ident" id="5941279">f</span><span class="op" id="5941280">(</span><span class="ident" id="5941281">elem</span><span class="op" id="5941285">...</span><span class="op" id="5941288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5941291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941294">return</span>&nbsp;<span class="ident" id="5941301">filepath</span><span class="op" id="5941309">.</span><span class="ident" id="5941310">Join</span><span class="op" id="5941314">(</span><span class="ident" id="5941315">elem</span><span class="op" id="5941319">...</span><span class="op" id="5941322">)</span><br>
<span class="lineno"></span><span class="op" id="5941324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5941327">//&nbsp;splitPathList&nbsp;calls&nbsp;ctxt.SplitPathList&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span><span class="keyword" id="5941410">func</span>&nbsp;<span class="op" id="5941415">(</span><span class="ident" id="5941416">ctxt</span>&nbsp;<span class="op" id="5941421">*</span><span class="ident" id="5941422">Context</span><span class="op" id="5941429">)</span>&nbsp;<span class="ident" id="5941431">splitPathList</span><span class="op" id="5941444">(</span><span class="ident" id="5941445">s</span>&nbsp;<span class="builtintype" id="5941447">string</span><span class="op" id="5941453">)</span>&nbsp;<span class="op" id="5941455">[</span><span class="op" id="5941456">]</span><span class="builtintype" id="5941457">string</span>&nbsp;<span class="op" id="5941464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941467">if</span>&nbsp;<span class="ident" id="5941470">f</span>&nbsp;<span class="op" id="5941472">:=</span>&nbsp;<span class="ident" id="5941475">ctxt</span><span class="op" id="5941479">.</span><span class="ident" id="5941480">SplitPathList</span><span class="op" id="5941493">;</span>&nbsp;<span class="ident" id="5941495">f</span>&nbsp;<span class="op" id="5941497">!=</span>&nbsp;<span class="ident" id="5941500">nil</span>&nbsp;<span class="op" id="5941504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941508">return</span>&nbsp;<span class="ident" id="5941515">f</span><span class="op" id="5941516">(</span><span class="ident" id="5941517">s</span><span class="op" id="5941518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5941521">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941524">return</span>&nbsp;<span class="ident" id="5941531">filepath</span><span class="op" id="5941539">.</span><span class="ident" id="5941540">SplitList</span><span class="op" id="5941549">(</span><span class="ident" id="5941550">s</span><span class="op" id="5941551">)</span><br>
<span class="lineno"></span><span class="op" id="5941553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5941556">//&nbsp;isAbsPath&nbsp;calls&nbsp;ctxt.IsAbsSPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span><span class="keyword" id="5941628">func</span>&nbsp;<span class="op" id="5941633">(</span><span class="ident" id="5941634">ctxt</span>&nbsp;<span class="op" id="5941639">*</span><span class="ident" id="5941640">Context</span><span class="op" id="5941647">)</span>&nbsp;<span class="ident" id="5941649">isAbsPath</span><span class="op" id="5941658">(</span><span class="ident" id="5941659">path</span>&nbsp;<span class="builtintype" id="5941664">string</span><span class="op" id="5941670">)</span>&nbsp;<span class="builtintype" id="5941672">bool</span>&nbsp;<span class="op" id="5941677">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941680">if</span>&nbsp;<span class="ident" id="5941683">f</span>&nbsp;<span class="op" id="5941685">:=</span>&nbsp;<span class="ident" id="5941688">ctxt</span><span class="op" id="5941692">.</span><span class="ident" id="5941693">IsAbsPath</span><span class="op" id="5941702">;</span>&nbsp;<span class="ident" id="5941704">f</span>&nbsp;<span class="op" id="5941706">!=</span>&nbsp;<span class="ident" id="5941709">nil</span>&nbsp;<span class="op" id="5941713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941717">return</span>&nbsp;<span class="ident" id="5941724">f</span><span class="op" id="5941725">(</span><span class="ident" id="5941726">path</span><span class="op" id="5941730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5941733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941736">return</span>&nbsp;<span class="ident" id="5941743">filepath</span><span class="op" id="5941751">.</span><span class="ident" id="5941752">IsAbs</span><span class="op" id="5941757">(</span><span class="ident" id="5941758">path</span><span class="op" id="5941762">)</span><br>
<span class="lineno"></span><span class="op" id="5941764">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5941767">//&nbsp;isDir&nbsp;calls&nbsp;ctxt.IsDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses&nbsp;os.Stat.</span><br>
<span class="lineno"></span><span class="keyword" id="5941828">func</span>&nbsp;<span class="op" id="5941833">(</span><span class="ident" id="5941834">ctxt</span>&nbsp;<span class="op" id="5941839">*</span><span class="ident" id="5941840">Context</span><span class="op" id="5941847">)</span>&nbsp;<span class="ident" id="5941849">isDir</span><span class="op" id="5941854">(</span><span class="ident" id="5941855">path</span>&nbsp;<span class="builtintype" id="5941860">string</span><span class="op" id="5941866">)</span>&nbsp;<span class="builtintype" id="5941868">bool</span>&nbsp;<span class="op" id="5941873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941876">if</span>&nbsp;<span class="ident" id="5941879">f</span>&nbsp;<span class="op" id="5941881">:=</span>&nbsp;<span class="ident" id="5941884">ctxt</span><span class="op" id="5941888">.</span><span class="ident" id="5941889">IsDir</span><span class="op" id="5941894">;</span>&nbsp;<span class="ident" id="5941896">f</span>&nbsp;<span class="op" id="5941898">!=</span>&nbsp;<span class="ident" id="5941901">nil</span>&nbsp;<span class="op" id="5941905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941909">return</span>&nbsp;<span class="ident" id="5941916">f</span><span class="op" id="5941917">(</span><span class="ident" id="5941918">path</span><span class="op" id="5941922">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5941925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5941928">fi</span><span class="op" id="5941930">,</span>&nbsp;<span class="ident" id="5941932">err</span>&nbsp;<span class="op" id="5941936">:=</span>&nbsp;<span class="ident" id="5941939">os</span><span class="op" id="5941941">.</span><span class="ident" id="5941942">Stat</span><span class="op" id="5941946">(</span><span class="ident" id="5941947">path</span><span class="op" id="5941951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5941954">return</span>&nbsp;<span class="ident" id="5941961">err</span>&nbsp;<span class="op" id="5941965">==</span>&nbsp;<span class="ident" id="5941968">nil</span>&nbsp;<span class="op" id="5941972">&amp;&amp;</span>&nbsp;<span class="ident" id="5941975">fi</span><span class="op" id="5941977">.</span><span class="ident" id="5941978">IsDir</span><span class="op" id="5941983">(</span><span class="op" id="5941984">)</span><br>
<span class="lineno"></span><span class="op" id="5941986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5941989">//&nbsp;hasSubdir&nbsp;calls&nbsp;ctxt.HasSubdir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses</span><br>
<span class="lineno"></span><span class="comment" id="5942049">//&nbsp;the&nbsp;local&nbsp;file&nbsp;system&nbsp;to&nbsp;answer&nbsp;the&nbsp;question.</span><br>
<span class="lineno"></span><span class="keyword" id="5942098">func</span>&nbsp;<span class="op" id="5942103">(</span><span class="ident" id="5942104">ctxt</span>&nbsp;<span class="op" id="5942109">*</span><span class="ident" id="5942110">Context</span><span class="op" id="5942117">)</span>&nbsp;<span class="ident" id="5942119">hasSubdir</span><span class="op" id="5942128">(</span><span class="ident" id="5942129">root</span><span class="op" id="5942133">,</span>&nbsp;<span class="ident" id="5942135">dir</span>&nbsp;<span class="builtintype" id="5942139">string</span><span class="op" id="5942145">)</span>&nbsp;<span class="op" id="5942147">(</span><span class="ident" id="5942148">rel</span>&nbsp;<span class="builtintype" id="5942152">string</span><span class="op" id="5942158">,</span>&nbsp;<span class="ident" id="5942160">ok</span>&nbsp;<span class="builtintype" id="5942163">bool</span><span class="op" id="5942167">)</span>&nbsp;<span class="op" id="5942169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942172">if</span>&nbsp;<span class="ident" id="5942175">f</span>&nbsp;<span class="op" id="5942177">:=</span>&nbsp;<span class="ident" id="5942180">ctxt</span><span class="op" id="5942184">.</span><span class="ident" id="5942185">HasSubdir</span><span class="op" id="5942194">;</span>&nbsp;<span class="ident" id="5942196">f</span>&nbsp;<span class="op" id="5942198">!=</span>&nbsp;<span class="ident" id="5942201">nil</span>&nbsp;<span class="op" id="5942205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942209">return</span>&nbsp;<span class="ident" id="5942216">f</span><span class="op" id="5942217">(</span><span class="ident" id="5942218">root</span><span class="op" id="5942222">,</span>&nbsp;<span class="ident" id="5942224">dir</span><span class="op" id="5942227">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5942230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5942234">//&nbsp;Try&nbsp;using&nbsp;paths&nbsp;we&nbsp;received.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942267">if</span>&nbsp;<span class="ident" id="5942270">rel</span><span class="op" id="5942273">,</span>&nbsp;<span class="ident" id="5942275">ok</span>&nbsp;<span class="op" id="5942278">=</span>&nbsp;<span class="ident" id="5942280">hasSubdir</span><span class="op" id="5942289">(</span><span class="ident" id="5942290">root</span><span class="op" id="5942294">,</span>&nbsp;<span class="ident" id="5942296">dir</span><span class="op" id="5942299">)</span><span class="op" id="5942300">;</span>&nbsp;<span class="ident" id="5942302">ok</span>&nbsp;<span class="op" id="5942305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942309">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5942317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5942321">//&nbsp;Try&nbsp;expanding&nbsp;symlinks&nbsp;and&nbsp;comparing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5942362">//&nbsp;expanded&nbsp;against&nbsp;unexpanded&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5942398">//&nbsp;expanded&nbsp;against&nbsp;expanded.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5942429">rootSym</span><span class="op" id="5942436">,</span>&nbsp;<span class="ident" id="5942438">_</span>&nbsp;<span class="op" id="5942440">:=</span>&nbsp;<span class="ident" id="5942443">filepath</span><span class="op" id="5942451">.</span><span class="ident" id="5942452">EvalSymlinks</span><span class="op" id="5942464">(</span><span class="ident" id="5942465">root</span><span class="op" id="5942469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5942472">dirSym</span><span class="op" id="5942478">,</span>&nbsp;<span class="ident" id="5942480">_</span>&nbsp;<span class="op" id="5942482">:=</span>&nbsp;<span class="ident" id="5942485">filepath</span><span class="op" id="5942493">.</span><span class="ident" id="5942494">EvalSymlinks</span><span class="op" id="5942506">(</span><span class="ident" id="5942507">dir</span><span class="op" id="5942510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942514">if</span>&nbsp;<span class="ident" id="5942517">rel</span><span class="op" id="5942520">,</span>&nbsp;<span class="ident" id="5942522">ok</span>&nbsp;<span class="op" id="5942525">=</span>&nbsp;<span class="ident" id="5942527">hasSubdir</span><span class="op" id="5942536">(</span><span class="ident" id="5942537">rootSym</span><span class="op" id="5942544">,</span>&nbsp;<span class="ident" id="5942546">dir</span><span class="op" id="5942549">)</span><span class="op" id="5942550">;</span>&nbsp;<span class="ident" id="5942552">ok</span>&nbsp;<span class="op" id="5942555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942559">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5942567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942570">if</span>&nbsp;<span class="ident" id="5942573">rel</span><span class="op" id="5942576">,</span>&nbsp;<span class="ident" id="5942578">ok</span>&nbsp;<span class="op" id="5942581">=</span>&nbsp;<span class="ident" id="5942583">hasSubdir</span><span class="op" id="5942592">(</span><span class="ident" id="5942593">root</span><span class="op" id="5942597">,</span>&nbsp;<span class="ident" id="5942599">dirSym</span><span class="op" id="5942605">)</span><span class="op" id="5942606">;</span>&nbsp;<span class="ident" id="5942608">ok</span>&nbsp;<span class="op" id="5942611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942615">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5942623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942626">return</span>&nbsp;<span class="ident" id="5942633">hasSubdir</span><span class="op" id="5942642">(</span><span class="ident" id="5942643">rootSym</span><span class="op" id="5942650">,</span>&nbsp;<span class="ident" id="5942652">dirSym</span><span class="op" id="5942658">)</span><br>
<span class="lineno">155</span><span class="op" id="5942660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5942663">func</span>&nbsp;<span class="ident" id="5942668">hasSubdir</span><span class="op" id="5942677">(</span><span class="ident" id="5942678">root</span><span class="op" id="5942682">,</span>&nbsp;<span class="ident" id="5942684">dir</span>&nbsp;<span class="builtintype" id="5942688">string</span><span class="op" id="5942694">)</span>&nbsp;<span class="op" id="5942696">(</span><span class="ident" id="5942697">rel</span>&nbsp;<span class="builtintype" id="5942701">string</span><span class="op" id="5942707">,</span>&nbsp;<span class="ident" id="5942709">ok</span>&nbsp;<span class="builtintype" id="5942712">bool</span><span class="op" id="5942716">)</span>&nbsp;<span class="op" id="5942718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942721">const</span>&nbsp;<span class="ident" id="5942727">sep</span>&nbsp;<span class="op" id="5942731">=</span>&nbsp;<span class="builtintype" id="5942733">string</span><span class="op" id="5942739">(</span><span class="ident" id="5942740">filepath</span><span class="op" id="5942748">.</span><span class="ident" id="5942749">Separator</span><span class="op" id="5942758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5942761">root</span>&nbsp;<span class="op" id="5942766">=</span>&nbsp;<span class="ident" id="5942768">filepath</span><span class="op" id="5942776">.</span><span class="ident" id="5942777">Clean</span><span class="op" id="5942782">(</span><span class="ident" id="5942783">root</span><span class="op" id="5942787">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942790">if</span>&nbsp;<span class="op" id="5942793">!</span><span class="ident" id="5942794">strings</span><span class="op" id="5942801">.</span><span class="ident" id="5942802">HasSuffix</span><span class="op" id="5942811">(</span><span class="ident" id="5942812">root</span><span class="op" id="5942816">,</span>&nbsp;<span class="ident" id="5942818">sep</span><span class="op" id="5942821">)</span>&nbsp;<span class="op" id="5942823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5942827">root</span>&nbsp;<span class="op" id="5942832">+=</span>&nbsp;<span class="ident" id="5942835">sep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5942840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5942843">dir</span>&nbsp;<span class="op" id="5942847">=</span>&nbsp;<span class="ident" id="5942849">filepath</span><span class="op" id="5942857">.</span><span class="ident" id="5942858">Clean</span><span class="op" id="5942863">(</span><span class="ident" id="5942864">dir</span><span class="op" id="5942867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942870">if</span>&nbsp;<span class="op" id="5942873">!</span><span class="ident" id="5942874">strings</span><span class="op" id="5942881">.</span><span class="ident" id="5942882">HasPrefix</span><span class="op" id="5942891">(</span><span class="ident" id="5942892">dir</span><span class="op" id="5942895">,</span>&nbsp;<span class="ident" id="5942897">root</span><span class="op" id="5942901">)</span>&nbsp;<span class="op" id="5942903">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942907">return</span>&nbsp;<span class="string" id="5942914">&#34;&#34;</span><span class="op" id="5942916">,</span>&nbsp;<span class="builtintype" id="5942918">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5942925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5942928">return</span>&nbsp;<span class="ident" id="5942935">filepath</span><span class="op" id="5942943">.</span><span class="ident" id="5942944">ToSlash</span><span class="op" id="5942951">(</span><span class="ident" id="5942952">dir</span><span class="op" id="5942955">[</span><span class="builtinfunc" id="5942956">len</span><span class="op" id="5942959">(</span><span class="ident" id="5942960">root</span><span class="op" id="5942964">)</span><span class="op" id="5942965">:</span><span class="op" id="5942966">]</span><span class="op" id="5942967">)</span><span class="op" id="5942968">,</span>&nbsp;<span class="builtintype" id="5942970">true</span><br>
<span class="lineno"></span><span class="op" id="5942975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="5942978">//&nbsp;readDir&nbsp;calls&nbsp;ctxt.ReadDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno"></span><span class="keyword" id="5943045">func</span>&nbsp;<span class="op" id="5943050">(</span><span class="ident" id="5943051">ctxt</span>&nbsp;<span class="op" id="5943056">*</span><span class="ident" id="5943057">Context</span><span class="op" id="5943064">)</span>&nbsp;<span class="ident" id="5943066">readDir</span><span class="op" id="5943073">(</span><span class="ident" id="5943074">path</span>&nbsp;<span class="builtintype" id="5943079">string</span><span class="op" id="5943085">)</span>&nbsp;<span class="op" id="5943087">(</span><span class="op" id="5943088">[</span><span class="op" id="5943089">]</span><span class="ident" id="5943090">os</span><span class="op" id="5943092">.</span><span class="ident" id="5943093">FileInfo</span><span class="op" id="5943101">,</span>&nbsp;<span class="builtintype" id="5943103">error</span><span class="op" id="5943108">)</span>&nbsp;<span class="op" id="5943110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943113">if</span>&nbsp;<span class="ident" id="5943116">f</span>&nbsp;<span class="op" id="5943118">:=</span>&nbsp;<span class="ident" id="5943121">ctxt</span><span class="op" id="5943125">.</span><span class="ident" id="5943126">ReadDir</span><span class="op" id="5943133">;</span>&nbsp;<span class="ident" id="5943135">f</span>&nbsp;<span class="op" id="5943137">!=</span>&nbsp;<span class="ident" id="5943140">nil</span>&nbsp;<span class="op" id="5943144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943148">return</span>&nbsp;<span class="ident" id="5943155">f</span><span class="op" id="5943156">(</span><span class="ident" id="5943157">path</span><span class="op" id="5943161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5943164">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943167">return</span>&nbsp;<span class="ident" id="5943174">ioutil</span><span class="op" id="5943180">.</span><span class="ident" id="5943181">ReadDir</span><span class="op" id="5943188">(</span><span class="ident" id="5943189">path</span><span class="op" id="5943193">)</span><br>
<span class="lineno"></span><span class="op" id="5943195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5943198">//&nbsp;openFile&nbsp;calls&nbsp;ctxt.OpenFile&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;os.Open.</span><br>
<span class="lineno"></span><span class="keyword" id="5943260">func</span>&nbsp;<span class="op" id="5943265">(</span><span class="ident" id="5943266">ctxt</span>&nbsp;<span class="op" id="5943271">*</span><span class="ident" id="5943272">Context</span><span class="op" id="5943279">)</span>&nbsp;<span class="ident" id="5943281">openFile</span><span class="op" id="5943289">(</span><span class="ident" id="5943290">path</span>&nbsp;<span class="builtintype" id="5943295">string</span><span class="op" id="5943301">)</span>&nbsp;<span class="op" id="5943303">(</span><span class="ident" id="5943304">io</span><span class="op" id="5943306">.</span><span class="ident" id="5943307">ReadCloser</span><span class="op" id="5943317">,</span>&nbsp;<span class="builtintype" id="5943319">error</span><span class="op" id="5943324">)</span>&nbsp;<span class="op" id="5943326">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943329">if</span>&nbsp;<span class="ident" id="5943332">fn</span>&nbsp;<span class="op" id="5943335">:=</span>&nbsp;<span class="ident" id="5943338">ctxt</span><span class="op" id="5943342">.</span><span class="ident" id="5943343">OpenFile</span><span class="op" id="5943351">;</span>&nbsp;<span class="ident" id="5943353">fn</span>&nbsp;<span class="op" id="5943356">!=</span>&nbsp;<span class="ident" id="5943359">nil</span>&nbsp;<span class="op" id="5943363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943367">return</span>&nbsp;<span class="ident" id="5943374">fn</span><span class="op" id="5943376">(</span><span class="ident" id="5943377">path</span><span class="op" id="5943381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5943384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5943388">f</span><span class="op" id="5943389">,</span>&nbsp;<span class="ident" id="5943391">err</span>&nbsp;<span class="op" id="5943395">:=</span>&nbsp;<span class="ident" id="5943398">os</span><span class="op" id="5943400">.</span><span class="ident" id="5943401">Open</span><span class="op" id="5943405">(</span><span class="ident" id="5943406">path</span><span class="op" id="5943410">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943413">if</span>&nbsp;<span class="ident" id="5943416">err</span>&nbsp;<span class="op" id="5943420">!=</span>&nbsp;<span class="ident" id="5943423">nil</span>&nbsp;<span class="op" id="5943427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943431">return</span>&nbsp;<span class="ident" id="5943438">nil</span><span class="op" id="5943441">,</span>&nbsp;<span class="ident" id="5943443">err</span>&nbsp;<span class="comment" id="5943447">//&nbsp;nil&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5943465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943468">return</span>&nbsp;<span class="ident" id="5943475">f</span><span class="op" id="5943476">,</span>&nbsp;<span class="ident" id="5943478">nil</span><br>
<span class="lineno"></span><span class="op" id="5943482">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5943485">//&nbsp;isFile&nbsp;determines&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;file&nbsp;by&nbsp;trying&nbsp;to&nbsp;open&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5943551">//&nbsp;It&nbsp;reuses&nbsp;openFile&nbsp;instead&nbsp;of&nbsp;adding&nbsp;another&nbsp;function&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5943615">//&nbsp;list&nbsp;in&nbsp;Context.</span><br>
<span class="lineno"></span><span class="keyword" id="5943635">func</span>&nbsp;<span class="op" id="5943640">(</span><span class="ident" id="5943641">ctxt</span>&nbsp;<span class="op" id="5943646">*</span><span class="ident" id="5943647">Context</span><span class="op" id="5943654">)</span>&nbsp;<span class="ident" id="5943656">isFile</span><span class="op" id="5943662">(</span><span class="ident" id="5943663">path</span>&nbsp;<span class="builtintype" id="5943668">string</span><span class="op" id="5943674">)</span>&nbsp;<span class="builtintype" id="5943676">bool</span>&nbsp;<span class="op" id="5943681">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5943684">f</span><span class="op" id="5943685">,</span>&nbsp;<span class="ident" id="5943687">err</span>&nbsp;<span class="op" id="5943691">:=</span>&nbsp;<span class="ident" id="5943694">ctxt</span><span class="op" id="5943698">.</span><span class="ident" id="5943699">openFile</span><span class="op" id="5943707">(</span><span class="ident" id="5943708">path</span><span class="op" id="5943712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943715">if</span>&nbsp;<span class="ident" id="5943718">err</span>&nbsp;<span class="op" id="5943722">!=</span>&nbsp;<span class="ident" id="5943725">nil</span>&nbsp;<span class="op" id="5943729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943733">return</span>&nbsp;<span class="builtintype" id="5943740">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5943747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5943750">f</span><span class="op" id="5943751">.</span><span class="ident" id="5943752">Close</span><span class="op" id="5943757">(</span><span class="op" id="5943758">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943761">return</span>&nbsp;<span class="builtintype" id="5943768">true</span><br>
<span class="lineno"></span><span class="op" id="5943773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5943776">//&nbsp;gopath&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;path&nbsp;directories.</span><br>
<span class="lineno"></span><span class="keyword" id="5943827">func</span>&nbsp;<span class="op" id="5943832">(</span><span class="ident" id="5943833">ctxt</span>&nbsp;<span class="op" id="5943838">*</span><span class="ident" id="5943839">Context</span><span class="op" id="5943846">)</span>&nbsp;<span class="ident" id="5943848">gopath</span><span class="op" id="5943854">(</span><span class="op" id="5943855">)</span>&nbsp;<span class="op" id="5943857">[</span><span class="op" id="5943858">]</span><span class="builtintype" id="5943859">string</span>&nbsp;<span class="op" id="5943866">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943869">var</span>&nbsp;<span class="ident" id="5943873">all</span>&nbsp;<span class="op" id="5943877">[</span><span class="op" id="5943878">]</span><span class="builtintype" id="5943879">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943887">for</span>&nbsp;<span class="ident" id="5943891">_</span><span class="op" id="5943892">,</span>&nbsp;<span class="ident" id="5943894">p</span>&nbsp;<span class="op" id="5943896">:=</span>&nbsp;<span class="keyword" id="5943899">range</span>&nbsp;<span class="ident" id="5943905">ctxt</span><span class="op" id="5943909">.</span><span class="ident" id="5943910">splitPathList</span><span class="op" id="5943923">(</span><span class="ident" id="5943924">ctxt</span><span class="op" id="5943928">.</span><span class="ident" id="5943929">GOPATH</span><span class="op" id="5943935">)</span>&nbsp;<span class="op" id="5943937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5943941">if</span>&nbsp;<span class="ident" id="5943944">p</span>&nbsp;<span class="op" id="5943946">==</span>&nbsp;<span class="string" id="5943949">&#34;&#34;</span>&nbsp;<span class="op" id="5943952">||</span>&nbsp;<span class="ident" id="5943955">p</span>&nbsp;<span class="op" id="5943957">==</span>&nbsp;<span class="ident" id="5943960">ctxt</span><span class="op" id="5943964">.</span><span class="ident" id="5943965">GOROOT</span>&nbsp;<span class="op" id="5943972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5943977">//&nbsp;Empty&nbsp;paths&nbsp;are&nbsp;uninteresting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944014">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;the&nbsp;GOROOT,&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944058">//&nbsp;People&nbsp;sometimes&nbsp;set&nbsp;GOPATH=$GOROOT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944101">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this&nbsp;common&nbsp;mistake.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5944151">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5944162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5944166">if</span>&nbsp;<span class="ident" id="5944169">strings</span><span class="op" id="5944176">.</span><span class="ident" id="5944177">HasPrefix</span><span class="op" id="5944186">(</span><span class="ident" id="5944187">p</span><span class="op" id="5944188">,</span>&nbsp;<span class="string" id="5944190">&#34;~&#34;</span><span class="op" id="5944193">)</span>&nbsp;<span class="op" id="5944195">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944200">//&nbsp;Path&nbsp;segments&nbsp;starting&nbsp;with&nbsp;~&nbsp;on&nbsp;Unix&nbsp;are&nbsp;almost&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944262">//&nbsp;users&nbsp;who&nbsp;have&nbsp;incorrectly&nbsp;quoted&nbsp;~&nbsp;while&nbsp;setting&nbsp;GOPATH,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944326">//&nbsp;preventing&nbsp;it&nbsp;from&nbsp;expanding&nbsp;to&nbsp;$HOME.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944371">//&nbsp;The&nbsp;situation&nbsp;is&nbsp;made&nbsp;more&nbsp;confusing&nbsp;by&nbsp;the&nbsp;fact&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944431">//&nbsp;bash&nbsp;allows&nbsp;quoted&nbsp;~&nbsp;in&nbsp;$PATH&nbsp;(most&nbsp;shells&nbsp;do&nbsp;not).</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944489">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this,&nbsp;and&nbsp;do&nbsp;not&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944556">//&nbsp;It&nbsp;does&nbsp;not&nbsp;exist,&nbsp;and&nbsp;printing&nbsp;errors&nbsp;about&nbsp;it&nbsp;confuses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944619">//&nbsp;those&nbsp;users&nbsp;even&nbsp;more,&nbsp;because&nbsp;they&nbsp;think&nbsp;&#34;sure&nbsp;~&nbsp;exists!&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944685">//&nbsp;The&nbsp;go&nbsp;command&nbsp;diagnoses&nbsp;this&nbsp;situation&nbsp;and&nbsp;prints&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944744">//&nbsp;useful&nbsp;error.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944764">//&nbsp;On&nbsp;Windows,&nbsp;~&nbsp;is&nbsp;used&nbsp;in&nbsp;short&nbsp;names,&nbsp;such&nbsp;as&nbsp;c:\progra~1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5944828">//&nbsp;for&nbsp;c:\program&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5944856">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5944867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5944871">all</span>&nbsp;<span class="op" id="5944875">=</span>&nbsp;<span class="builtinfunc" id="5944877">append</span><span class="op" id="5944883">(</span><span class="ident" id="5944884">all</span><span class="op" id="5944887">,</span>&nbsp;<span class="ident" id="5944889">p</span><span class="op" id="5944890">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5944893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5944896">return</span>&nbsp;<span class="ident" id="5944903">all</span><br>
<span class="lineno"></span><span class="op" id="5944907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5944910">//&nbsp;SrcDirs&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;package&nbsp;source&nbsp;root&nbsp;directories.</span><br>
<span class="lineno">235</span><span class="comment" id="5944972">//&nbsp;It&nbsp;draws&nbsp;from&nbsp;the&nbsp;current&nbsp;Go&nbsp;root&nbsp;and&nbsp;Go&nbsp;path&nbsp;but&nbsp;omits&nbsp;directories</span><br>
<span class="lineno"></span><span class="comment" id="5945043">//&nbsp;that&nbsp;do&nbsp;not&nbsp;exist.</span><br>
<span class="lineno"></span><span class="keyword" id="5945065">func</span>&nbsp;<span class="op" id="5945070">(</span><span class="ident" id="5945071">ctxt</span>&nbsp;<span class="op" id="5945076">*</span><span class="ident" id="5945077">Context</span><span class="op" id="5945084">)</span>&nbsp;<span class="ident" id="5945086">SrcDirs</span><span class="op" id="5945093">(</span><span class="op" id="5945094">)</span>&nbsp;<span class="op" id="5945096">[</span><span class="op" id="5945097">]</span><span class="builtintype" id="5945098">string</span>&nbsp;<span class="op" id="5945105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5945108">var</span>&nbsp;<span class="ident" id="5945112">all</span>&nbsp;<span class="op" id="5945116">[</span><span class="op" id="5945117">]</span><span class="builtintype" id="5945118">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5945126">if</span>&nbsp;<span class="ident" id="5945129">ctxt</span><span class="op" id="5945133">.</span><span class="ident" id="5945134">GOROOT</span>&nbsp;<span class="op" id="5945141">!=</span>&nbsp;<span class="string" id="5945144">&#34;&#34;</span>&nbsp;<span class="op" id="5945147">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5945151">dir</span>&nbsp;<span class="op" id="5945155">:=</span>&nbsp;<span class="ident" id="5945158">ctxt</span><span class="op" id="5945162">.</span><span class="ident" id="5945163">joinPath</span><span class="op" id="5945171">(</span><span class="ident" id="5945172">ctxt</span><span class="op" id="5945176">.</span><span class="ident" id="5945177">GOROOT</span><span class="op" id="5945183">,</span>&nbsp;<span class="string" id="5945185">&#34;src&#34;</span><span class="op" id="5945190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5945194">if</span>&nbsp;<span class="ident" id="5945197">ctxt</span><span class="op" id="5945201">.</span><span class="ident" id="5945202">isDir</span><span class="op" id="5945207">(</span><span class="ident" id="5945208">dir</span><span class="op" id="5945211">)</span>&nbsp;<span class="op" id="5945213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5945218">all</span>&nbsp;<span class="op" id="5945222">=</span>&nbsp;<span class="builtinfunc" id="5945224">append</span><span class="op" id="5945230">(</span><span class="ident" id="5945231">all</span><span class="op" id="5945234">,</span>&nbsp;<span class="ident" id="5945236">dir</span><span class="op" id="5945239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5945243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5945246">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5945249">for</span>&nbsp;<span class="ident" id="5945253">_</span><span class="op" id="5945254">,</span>&nbsp;<span class="ident" id="5945256">p</span>&nbsp;<span class="op" id="5945258">:=</span>&nbsp;<span class="keyword" id="5945261">range</span>&nbsp;<span class="ident" id="5945267">ctxt</span><span class="op" id="5945271">.</span><span class="ident" id="5945272">gopath</span><span class="op" id="5945278">(</span><span class="op" id="5945279">)</span>&nbsp;<span class="op" id="5945281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5945285">dir</span>&nbsp;<span class="op" id="5945289">:=</span>&nbsp;<span class="ident" id="5945292">ctxt</span><span class="op" id="5945296">.</span><span class="ident" id="5945297">joinPath</span><span class="op" id="5945305">(</span><span class="ident" id="5945306">p</span><span class="op" id="5945307">,</span>&nbsp;<span class="string" id="5945309">&#34;src&#34;</span><span class="op" id="5945314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5945318">if</span>&nbsp;<span class="ident" id="5945321">ctxt</span><span class="op" id="5945325">.</span><span class="ident" id="5945326">isDir</span><span class="op" id="5945331">(</span><span class="ident" id="5945332">dir</span><span class="op" id="5945335">)</span>&nbsp;<span class="op" id="5945337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5945342">all</span>&nbsp;<span class="op" id="5945346">=</span>&nbsp;<span class="builtinfunc" id="5945348">append</span><span class="op" id="5945354">(</span><span class="ident" id="5945355">all</span><span class="op" id="5945358">,</span>&nbsp;<span class="ident" id="5945360">dir</span><span class="op" id="5945363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5945367">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5945370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5945373">return</span>&nbsp;<span class="ident" id="5945380">all</span><br>
<span class="lineno"></span><span class="op" id="5945384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5945387">//&nbsp;Default&nbsp;is&nbsp;the&nbsp;default&nbsp;Context&nbsp;for&nbsp;builds.</span><br>
<span class="lineno">255</span><span class="comment" id="5945433">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;GOARCH,&nbsp;GOOS,&nbsp;GOROOT,&nbsp;and&nbsp;GOPATH&nbsp;environment&nbsp;variables</span><br>
<span class="lineno"></span><span class="comment" id="5945503">//&nbsp;if&nbsp;set,&nbsp;or&nbsp;else&nbsp;the&nbsp;compiled&nbsp;code&#39;s&nbsp;GOARCH,&nbsp;GOOS,&nbsp;and&nbsp;GOROOT.</span><br>
<span class="lineno"></span><span class="keyword" id="5945568">var</span>&nbsp;<span class="ident" id="5945572">Default</span>&nbsp;<span class="ident" id="5945580">Context</span>&nbsp;<span class="op" id="5945588">=</span>&nbsp;<span class="ident" id="5945590">defaultContext</span><span class="op" id="5945604">(</span><span class="op" id="5945605">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5945608">var</span>&nbsp;<span class="ident" id="5945612">cgoEnabled</span>&nbsp;<span class="op" id="5945623">=</span>&nbsp;<span class="keyword" id="5945625">map</span><span class="op" id="5945628">[</span><span class="builtintype" id="5945629">string</span><span class="op" id="5945635">]</span><span class="builtintype" id="5945636">bool</span><span class="op" id="5945640">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945643">&#34;darwin/386&#34;</span><span class="op" id="5945655">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945662">true</span><span class="op" id="5945666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945669">&#34;darwin/amd64&#34;</span><span class="op" id="5945683">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945688">true</span><span class="op" id="5945692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945695">&#34;dragonfly/386&#34;</span><span class="op" id="5945710">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945714">true</span><span class="op" id="5945718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945721">&#34;dragonfly/amd64&#34;</span><span class="op" id="5945738">:</span>&nbsp;<span class="builtintype" id="5945740">true</span><span class="op" id="5945744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945747">&#34;freebsd/386&#34;</span><span class="op" id="5945760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945766">true</span><span class="op" id="5945770">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945773">&#34;freebsd/amd64&#34;</span><span class="op" id="5945788">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945792">true</span><span class="op" id="5945796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945799">&#34;freebsd/arm&#34;</span><span class="op" id="5945812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945818">true</span><span class="op" id="5945822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945825">&#34;linux/386&#34;</span><span class="op" id="5945836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945844">true</span><span class="op" id="5945848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945851">&#34;linux/amd64&#34;</span><span class="op" id="5945864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945870">true</span><span class="op" id="5945874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945877">&#34;linux/arm&#34;</span><span class="op" id="5945888">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945896">true</span><span class="op" id="5945900">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945903">&#34;android/386&#34;</span><span class="op" id="5945916">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945922">true</span><span class="op" id="5945926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945929">&#34;android/amd64&#34;</span><span class="op" id="5945944">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945948">true</span><span class="op" id="5945952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945955">&#34;android/arm&#34;</span><span class="op" id="5945968">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5945974">true</span><span class="op" id="5945978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5945981">&#34;netbsd/386&#34;</span><span class="op" id="5945993">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946000">true</span><span class="op" id="5946004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5946007">&#34;netbsd/amd64&#34;</span><span class="op" id="5946021">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946026">true</span><span class="op" id="5946030">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5946033">&#34;netbsd/arm&#34;</span><span class="op" id="5946045">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946052">true</span><span class="op" id="5946056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5946059">&#34;openbsd/386&#34;</span><span class="op" id="5946072">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946078">true</span><span class="op" id="5946082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5946085">&#34;openbsd/amd64&#34;</span><span class="op" id="5946100">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946104">true</span><span class="op" id="5946108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5946111">&#34;windows/386&#34;</span><span class="op" id="5946124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946130">true</span><span class="op" id="5946134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5946137">&#34;windows/amd64&#34;</span><span class="op" id="5946152">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5946156">true</span><span class="op" id="5946160">,</span><br>
<span class="lineno">280</span><span class="op" id="5946162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5946165">func</span>&nbsp;<span class="ident" id="5946170">defaultContext</span><span class="op" id="5946184">(</span><span class="op" id="5946185">)</span>&nbsp;<span class="ident" id="5946187">Context</span>&nbsp;<span class="op" id="5946195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5946198">var</span>&nbsp;<span class="ident" id="5946202">c</span>&nbsp;<span class="ident" id="5946204">Context</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946214">c</span><span class="op" id="5946215">.</span><span class="ident" id="5946216">GOARCH</span>&nbsp;<span class="op" id="5946223">=</span>&nbsp;<span class="ident" id="5946225">envOr</span><span class="op" id="5946230">(</span><span class="string" id="5946231">&#34;GOARCH&#34;</span><span class="op" id="5946239">,</span>&nbsp;<span class="ident" id="5946241">runtime</span><span class="op" id="5946248">.</span><span class="ident" id="5946249">GOARCH</span><span class="op" id="5946255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946258">c</span><span class="op" id="5946259">.</span><span class="ident" id="5946260">GOOS</span>&nbsp;<span class="op" id="5946265">=</span>&nbsp;<span class="ident" id="5946267">envOr</span><span class="op" id="5946272">(</span><span class="string" id="5946273">&#34;GOOS&#34;</span><span class="op" id="5946279">,</span>&nbsp;<span class="ident" id="5946281">runtime</span><span class="op" id="5946288">.</span><span class="ident" id="5946289">GOOS</span><span class="op" id="5946293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946296">c</span><span class="op" id="5946297">.</span><span class="ident" id="5946298">GOROOT</span>&nbsp;<span class="op" id="5946305">=</span>&nbsp;<span class="ident" id="5946307">runtime</span><span class="op" id="5946314">.</span><span class="ident" id="5946315">GOROOT</span><span class="op" id="5946321">(</span><span class="op" id="5946322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946325">c</span><span class="op" id="5946326">.</span><span class="ident" id="5946327">GOPATH</span>&nbsp;<span class="op" id="5946334">=</span>&nbsp;<span class="ident" id="5946336">envOr</span><span class="op" id="5946341">(</span><span class="string" id="5946342">&#34;GOPATH&#34;</span><span class="op" id="5946350">,</span>&nbsp;<span class="string" id="5946352">&#34;&#34;</span><span class="op" id="5946354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946357">c</span><span class="op" id="5946358">.</span><span class="ident" id="5946359">Compiler</span>&nbsp;<span class="op" id="5946368">=</span>&nbsp;<span class="ident" id="5946370">runtime</span><span class="op" id="5946377">.</span><span class="ident" id="5946378">Compiler</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946389">//&nbsp;Each&nbsp;major&nbsp;Go&nbsp;release&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.x&nbsp;series&nbsp;should&nbsp;add&nbsp;a&nbsp;tag&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946459">//&nbsp;Old&nbsp;tags&nbsp;should&nbsp;not&nbsp;be&nbsp;removed.&nbsp;That&nbsp;is,&nbsp;the&nbsp;go1.x&nbsp;tag&nbsp;is&nbsp;present</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946529">//&nbsp;in&nbsp;all&nbsp;releases&nbsp;&gt;=&nbsp;Go&nbsp;1.x.&nbsp;Code&nbsp;that&nbsp;requires&nbsp;Go&nbsp;1.x&nbsp;or&nbsp;later&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946602">//&nbsp;say&nbsp;&#34;+build&nbsp;go1.x&#34;,&nbsp;and&nbsp;code&nbsp;that&nbsp;should&nbsp;only&nbsp;be&nbsp;built&nbsp;before&nbsp;Go&nbsp;1.x</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946675">//&nbsp;(perhaps&nbsp;it&nbsp;is&nbsp;the&nbsp;stub&nbsp;to&nbsp;use&nbsp;in&nbsp;that&nbsp;case)&nbsp;should&nbsp;say&nbsp;&#34;+build&nbsp;!go1.x&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946752">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946756">//&nbsp;When&nbsp;we&nbsp;reach&nbsp;Go&nbsp;1.5&nbsp;the&nbsp;line&nbsp;will&nbsp;read</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946800">//&nbsp;&nbsp;&nbsp;&nbsp;c.ReleaseTags&nbsp;=&nbsp;[]string{&#34;go1.1&#34;,&nbsp;&#34;go1.2&#34;,&nbsp;&#34;go1.3&#34;,&nbsp;&#34;go1.4&#34;,&nbsp;&#34;go1.5&#34;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5946874">//&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946889">c</span><span class="op" id="5946890">.</span><span class="ident" id="5946891">ReleaseTags</span>&nbsp;<span class="op" id="5946903">=</span>&nbsp;<span class="op" id="5946905">[</span><span class="op" id="5946906">]</span><span class="builtintype" id="5946907">string</span><span class="op" id="5946913">{</span><span class="string" id="5946914">&#34;go1.1&#34;</span><span class="op" id="5946921">,</span>&nbsp;<span class="string" id="5946923">&#34;go1.2&#34;</span><span class="op" id="5946930">,</span>&nbsp;<span class="string" id="5946932">&#34;go1.3&#34;</span><span class="op" id="5946939">,</span>&nbsp;<span class="string" id="5946941">&#34;go1.4&#34;</span><span class="op" id="5946948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5946952">switch</span>&nbsp;<span class="ident" id="5946959">os</span><span class="op" id="5946961">.</span><span class="ident" id="5946962">Getenv</span><span class="op" id="5946968">(</span><span class="string" id="5946969">&#34;CGO_ENABLED&#34;</span><span class="op" id="5946982">)</span>&nbsp;<span class="op" id="5946984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5946987">case</span>&nbsp;<span class="string" id="5946992">&#34;1&#34;</span><span class="op" id="5946995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5946999">c</span><span class="op" id="5947000">.</span><span class="ident" id="5947001">CgoEnabled</span>&nbsp;<span class="op" id="5947012">=</span>&nbsp;<span class="builtintype" id="5947014">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947020">case</span>&nbsp;<span class="string" id="5947025">&#34;0&#34;</span><span class="op" id="5947028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5947032">c</span><span class="op" id="5947033">.</span><span class="ident" id="5947034">CgoEnabled</span>&nbsp;<span class="op" id="5947045">=</span>&nbsp;<span class="builtintype" id="5947047">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947054">default</span><span class="op" id="5947061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947065">//&nbsp;cgo&nbsp;must&nbsp;be&nbsp;explicitly&nbsp;enabled&nbsp;for&nbsp;cross&nbsp;compilation&nbsp;builds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947130">if</span>&nbsp;<span class="ident" id="5947133">runtime</span><span class="op" id="5947140">.</span><span class="ident" id="5947141">GOARCH</span>&nbsp;<span class="op" id="5947148">==</span>&nbsp;<span class="ident" id="5947151">c</span><span class="op" id="5947152">.</span><span class="ident" id="5947153">GOARCH</span>&nbsp;<span class="op" id="5947160">&amp;&amp;</span>&nbsp;<span class="ident" id="5947163">runtime</span><span class="op" id="5947170">.</span><span class="ident" id="5947171">GOOS</span>&nbsp;<span class="op" id="5947176">==</span>&nbsp;<span class="ident" id="5947179">c</span><span class="op" id="5947180">.</span><span class="ident" id="5947181">GOOS</span>&nbsp;<span class="op" id="5947186">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5947191">c</span><span class="op" id="5947192">.</span><span class="ident" id="5947193">CgoEnabled</span>&nbsp;<span class="op" id="5947204">=</span>&nbsp;<span class="ident" id="5947206">cgoEnabled</span><span class="op" id="5947216">[</span><span class="ident" id="5947217">c</span><span class="op" id="5947218">.</span><span class="ident" id="5947219">GOOS</span><span class="op" id="5947223">+</span><span class="string" id="5947224">&#34;/&#34;</span><span class="op" id="5947227">+</span><span class="ident" id="5947228">c</span><span class="op" id="5947229">.</span><span class="ident" id="5947230">GOARCH</span><span class="op" id="5947236">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947241">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5947249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5947253">c</span><span class="op" id="5947254">.</span><span class="ident" id="5947255">CgoEnabled</span>&nbsp;<span class="op" id="5947266">=</span>&nbsp;<span class="builtintype" id="5947268">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5947275">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947279">return</span>&nbsp;<span class="ident" id="5947286">c</span><br>
<span class="lineno"></span><span class="op" id="5947288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5947291">func</span>&nbsp;<span class="ident" id="5947296">envOr</span><span class="op" id="5947301">(</span><span class="ident" id="5947302">name</span><span class="op" id="5947306">,</span>&nbsp;<span class="ident" id="5947308">def</span>&nbsp;<span class="builtintype" id="5947312">string</span><span class="op" id="5947318">)</span>&nbsp;<span class="builtintype" id="5947320">string</span>&nbsp;<span class="op" id="5947327">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5947330">s</span>&nbsp;<span class="op" id="5947332">:=</span>&nbsp;<span class="ident" id="5947335">os</span><span class="op" id="5947337">.</span><span class="ident" id="5947338">Getenv</span><span class="op" id="5947344">(</span><span class="ident" id="5947345">name</span><span class="op" id="5947349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947352">if</span>&nbsp;<span class="ident" id="5947355">s</span>&nbsp;<span class="op" id="5947357">==</span>&nbsp;<span class="string" id="5947360">&#34;&#34;</span>&nbsp;<span class="op" id="5947363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947367">return</span>&nbsp;<span class="ident" id="5947374">def</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5947379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5947382">return</span>&nbsp;<span class="ident" id="5947389">s</span><br>
<span class="lineno">325</span><span class="op" id="5947391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5947394">//&nbsp;An&nbsp;ImportMode&nbsp;controls&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;Import&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="5947455">type</span>&nbsp;<span class="ident" id="5947460">ImportMode</span>&nbsp;<span class="builtintype" id="5947471">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="5947477">const</span>&nbsp;<span class="op" id="5947483">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947486">//&nbsp;If&nbsp;FindOnly&nbsp;is&nbsp;set,&nbsp;Import&nbsp;stops&nbsp;after&nbsp;locating&nbsp;the&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947552">//&nbsp;that&nbsp;should&nbsp;contain&nbsp;the&nbsp;sources&nbsp;for&nbsp;a&nbsp;package.&nbsp;&nbsp;It&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947616">//&nbsp;read&nbsp;any&nbsp;files&nbsp;in&nbsp;the&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5947653">FindOnly</span>&nbsp;<span class="ident" id="5947662">ImportMode</span>&nbsp;<span class="op" id="5947673">=</span>&nbsp;<span class="num" id="5947675">1</span>&nbsp;<span class="op" id="5947677">&lt;&lt;</span>&nbsp;<span class="ident" id="5947680">iota</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947687">//&nbsp;If&nbsp;AllowBinary&nbsp;is&nbsp;set,&nbsp;Import&nbsp;can&nbsp;be&nbsp;satisfied&nbsp;by&nbsp;a&nbsp;compiled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947752">//&nbsp;package&nbsp;object&nbsp;without&nbsp;corresponding&nbsp;sources.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5947802">AllowBinary</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947816">//&nbsp;If&nbsp;ImportComment&nbsp;is&nbsp;set,&nbsp;parse&nbsp;import&nbsp;comments&nbsp;on&nbsp;package&nbsp;statements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947890">//&nbsp;Import&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;finds&nbsp;a&nbsp;comment&nbsp;it&nbsp;cannot&nbsp;understand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5947961">//&nbsp;or&nbsp;finds&nbsp;conflicting&nbsp;comments&nbsp;in&nbsp;multiple&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5948021">//&nbsp;See&nbsp;golang.org/s/go14customimport&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948081">ImportComment</span><br>
<span class="lineno">345</span><span class="op" id="5948095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5948098">//&nbsp;A&nbsp;Package&nbsp;describes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5948158">type</span>&nbsp;<span class="ident" id="5948163">Package</span>&nbsp;<span class="keyword" id="5948171">struct</span>&nbsp;<span class="op" id="5948178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948181">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948195">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948204">//&nbsp;directory&nbsp;containing&nbsp;package&nbsp;sources</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948245">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948259">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948268">//&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948285">ImportComment</span>&nbsp;<span class="builtintype" id="5948299">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948308">//&nbsp;path&nbsp;in&nbsp;import&nbsp;comment&nbsp;on&nbsp;package&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948356">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948370">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948379">//&nbsp;documentation&nbsp;synopsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948406">ImportPath</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948420">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948429">//&nbsp;import&nbsp;path&nbsp;of&nbsp;package&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948472">Root</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948486">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948495">//&nbsp;root&nbsp;of&nbsp;Go&nbsp;tree&nbsp;where&nbsp;this&nbsp;package&nbsp;lives</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948540">SrcRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948554">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948563">//&nbsp;package&nbsp;source&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948613">PkgRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948627">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948636">//&nbsp;package&nbsp;install&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948687">BinDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948701">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948710">//&nbsp;command&nbsp;install&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948756">Goroot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948770">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5948779">//&nbsp;package&nbsp;found&nbsp;in&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948808">PkgObj</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948822">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948831">//&nbsp;installed&nbsp;.a&nbsp;file</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948853">AllTags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5948867">[</span><span class="op" id="5948868">]</span><span class="builtintype" id="5948869">string</span>&nbsp;<span class="comment" id="5948876">//&nbsp;tags&nbsp;that&nbsp;can&nbsp;influence&nbsp;file&nbsp;selection&nbsp;in&nbsp;this&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5948937">ConflictDir</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5948951">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5948960">//&nbsp;this&nbsp;directory&nbsp;shadows&nbsp;Dir&nbsp;in&nbsp;$GOPATH</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5949003">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949020">GoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949035">[</span><span class="op" id="5949036">]</span><span class="builtintype" id="5949037">string</span>&nbsp;<span class="comment" id="5949044">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;(excluding&nbsp;CgoFiles,&nbsp;TestGoFiles,&nbsp;XTestGoFiles)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949113">CgoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949128">[</span><span class="op" id="5949129">]</span><span class="builtintype" id="5949130">string</span>&nbsp;<span class="comment" id="5949137">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;that&nbsp;import&nbsp;&#34;C&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949174">IgnoredGoFiles</span>&nbsp;<span class="op" id="5949189">[</span><span class="op" id="5949190">]</span><span class="builtintype" id="5949191">string</span>&nbsp;<span class="comment" id="5949198">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;ignored&nbsp;for&nbsp;this&nbsp;build</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949242">CFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949257">[</span><span class="op" id="5949258">]</span><span class="builtintype" id="5949259">string</span>&nbsp;<span class="comment" id="5949266">//&nbsp;.c&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949286">CXXFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949301">[</span><span class="op" id="5949302">]</span><span class="builtintype" id="5949303">string</span>&nbsp;<span class="comment" id="5949310">//&nbsp;.cc,&nbsp;.cpp&nbsp;and&nbsp;.cxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949346">MFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949361">[</span><span class="op" id="5949362">]</span><span class="builtintype" id="5949363">string</span>&nbsp;<span class="comment" id="5949370">//&nbsp;.m&nbsp;(Objective-C)&nbsp;source&nbsp;files</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949404">HFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949419">[</span><span class="op" id="5949420">]</span><span class="builtintype" id="5949421">string</span>&nbsp;<span class="comment" id="5949428">//&nbsp;.h,&nbsp;.hh,&nbsp;.hpp&nbsp;and&nbsp;.hxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949468">SFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949483">[</span><span class="op" id="5949484">]</span><span class="builtintype" id="5949485">string</span>&nbsp;<span class="comment" id="5949492">//&nbsp;.s&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949512">SwigFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949527">[</span><span class="op" id="5949528">]</span><span class="builtintype" id="5949529">string</span>&nbsp;<span class="comment" id="5949536">//&nbsp;.swig&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949552">SwigCXXFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5949567">[</span><span class="op" id="5949568">]</span><span class="builtintype" id="5949569">string</span>&nbsp;<span class="comment" id="5949576">//&nbsp;.swigcxx&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949595">SysoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949610">[</span><span class="op" id="5949611">]</span><span class="builtintype" id="5949612">string</span>&nbsp;<span class="comment" id="5949619">//&nbsp;.syso&nbsp;system&nbsp;object&nbsp;files&nbsp;to&nbsp;add&nbsp;to&nbsp;archive</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5949668">//&nbsp;Cgo&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949687">CgoCFLAGS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5949700">[</span><span class="op" id="5949701">]</span><span class="builtintype" id="5949702">string</span>&nbsp;<span class="comment" id="5949709">//&nbsp;Cgo&nbsp;CFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949735">CgoCPPFLAGS</span>&nbsp;&nbsp;<span class="op" id="5949748">[</span><span class="op" id="5949749">]</span><span class="builtintype" id="5949750">string</span>&nbsp;<span class="comment" id="5949757">//&nbsp;Cgo&nbsp;CPPFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949785">CgoCXXFLAGS</span>&nbsp;&nbsp;<span class="op" id="5949798">[</span><span class="op" id="5949799">]</span><span class="builtintype" id="5949800">string</span>&nbsp;<span class="comment" id="5949807">//&nbsp;Cgo&nbsp;CXXFLAGS&nbsp;directives</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949835">CgoLDFLAGS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5949848">[</span><span class="op" id="5949849">]</span><span class="builtintype" id="5949850">string</span>&nbsp;<span class="comment" id="5949857">//&nbsp;Cgo&nbsp;LDFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949884">CgoPkgConfig</span>&nbsp;<span class="op" id="5949897">[</span><span class="op" id="5949898">]</span><span class="builtintype" id="5949899">string</span>&nbsp;<span class="comment" id="5949906">//&nbsp;Cgo&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5949937">//&nbsp;Dependency&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5949964">Imports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5949974">[</span><span class="op" id="5949975">]</span><span class="builtintype" id="5949976">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5950002">//&nbsp;imports&nbsp;from&nbsp;GoFiles,&nbsp;CgoFiles</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950037">ImportPos</span>&nbsp;<span class="keyword" id="5950047">map</span><span class="op" id="5950050">[</span><span class="builtintype" id="5950051">string</span><span class="op" id="5950057">]</span><span class="op" id="5950058">[</span><span class="op" id="5950059">]</span><span class="ident" id="5950060">token</span><span class="op" id="5950065">.</span><span class="ident" id="5950066">Position</span>&nbsp;<span class="comment" id="5950075">//&nbsp;line&nbsp;information&nbsp;for&nbsp;Imports</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5950109">//&nbsp;Test&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950130">TestGoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5950145">[</span><span class="op" id="5950146">]</span><span class="builtintype" id="5950147">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5950173">//&nbsp;_test.go&nbsp;files&nbsp;in&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950203">TestImports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5950218">[</span><span class="op" id="5950219">]</span><span class="builtintype" id="5950220">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5950246">//&nbsp;imports&nbsp;from&nbsp;TestGoFiles</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950275">TestImportPos</span>&nbsp;&nbsp;<span class="keyword" id="5950290">map</span><span class="op" id="5950293">[</span><span class="builtintype" id="5950294">string</span><span class="op" id="5950300">]</span><span class="op" id="5950301">[</span><span class="op" id="5950302">]</span><span class="ident" id="5950303">token</span><span class="op" id="5950308">.</span><span class="ident" id="5950309">Position</span>&nbsp;<span class="comment" id="5950318">//&nbsp;line&nbsp;information&nbsp;for&nbsp;TestImports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950355">XTestGoFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5950370">[</span><span class="op" id="5950371">]</span><span class="builtintype" id="5950372">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5950398">//&nbsp;_test.go&nbsp;files&nbsp;outside&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950433">XTestImports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5950448">[</span><span class="op" id="5950449">]</span><span class="builtintype" id="5950450">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5950476">//&nbsp;imports&nbsp;from&nbsp;XTestGoFiles</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5950506">XTestImportPos</span>&nbsp;<span class="keyword" id="5950521">map</span><span class="op" id="5950524">[</span><span class="builtintype" id="5950525">string</span><span class="op" id="5950531">]</span><span class="op" id="5950532">[</span><span class="op" id="5950533">]</span><span class="ident" id="5950534">token</span><span class="op" id="5950539">.</span><span class="ident" id="5950540">Position</span>&nbsp;<span class="comment" id="5950549">//&nbsp;line&nbsp;information&nbsp;for&nbsp;XTestImports</span><br>
<span class="lineno"></span><span class="op" id="5950586">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="comment" id="5950589">//&nbsp;IsCommand&nbsp;reports&nbsp;whether&nbsp;the&nbsp;package&nbsp;is&nbsp;considered&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5950646">//&nbsp;command&nbsp;to&nbsp;be&nbsp;installed&nbsp;(not&nbsp;just&nbsp;a&nbsp;library).</span><br>
<span class="lineno"></span><span class="comment" id="5950695">//&nbsp;Packages&nbsp;named&nbsp;&#34;main&#34;&nbsp;are&nbsp;treated&nbsp;as&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="5950745">func</span>&nbsp;<span class="op" id="5950750">(</span><span class="ident" id="5950751">p</span>&nbsp;<span class="op" id="5950753">*</span><span class="ident" id="5950754">Package</span><span class="op" id="5950761">)</span>&nbsp;<span class="ident" id="5950763">IsCommand</span><span class="op" id="5950772">(</span><span class="op" id="5950773">)</span>&nbsp;<span class="builtintype" id="5950775">bool</span>&nbsp;<span class="op" id="5950780">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5950783">return</span>&nbsp;<span class="ident" id="5950790">p</span><span class="op" id="5950791">.</span><span class="ident" id="5950792">Name</span>&nbsp;<span class="op" id="5950797">==</span>&nbsp;<span class="string" id="5950800">&#34;main&#34;</span><br>
<span class="lineno"></span><span class="op" id="5950807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5950810">//&nbsp;ImportDir&nbsp;is&nbsp;like&nbsp;Import&nbsp;but&nbsp;processes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5950876">//&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno">405</span><span class="keyword" id="5950900">func</span>&nbsp;<span class="op" id="5950905">(</span><span class="ident" id="5950906">ctxt</span>&nbsp;<span class="op" id="5950911">*</span><span class="ident" id="5950912">Context</span><span class="op" id="5950919">)</span>&nbsp;<span class="ident" id="5950921">ImportDir</span><span class="op" id="5950930">(</span><span class="ident" id="5950931">dir</span>&nbsp;<span class="builtintype" id="5950935">string</span><span class="op" id="5950941">,</span>&nbsp;<span class="ident" id="5950943">mode</span>&nbsp;<span class="ident" id="5950948">ImportMode</span><span class="op" id="5950958">)</span>&nbsp;<span class="op" id="5950960">(</span><span class="op" id="5950961">*</span><span class="ident" id="5950962">Package</span><span class="op" id="5950969">,</span>&nbsp;<span class="builtintype" id="5950971">error</span><span class="op" id="5950976">)</span>&nbsp;<span class="op" id="5950978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5950981">return</span>&nbsp;<span class="ident" id="5950988">ctxt</span><span class="op" id="5950992">.</span><span class="ident" id="5950993">Import</span><span class="op" id="5950999">(</span><span class="string" id="5951000">&#34;.&#34;</span><span class="op" id="5951003">,</span>&nbsp;<span class="ident" id="5951005">dir</span><span class="op" id="5951008">,</span>&nbsp;<span class="ident" id="5951010">mode</span><span class="op" id="5951014">)</span><br>
<span class="lineno"></span><span class="op" id="5951016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5951019">//&nbsp;NoGoError&nbsp;is&nbsp;the&nbsp;error&nbsp;used&nbsp;by&nbsp;Import&nbsp;to&nbsp;describe&nbsp;a&nbsp;directory</span><br>
<span class="lineno">410</span><span class="comment" id="5951084">//&nbsp;containing&nbsp;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files.&nbsp;(It&nbsp;may&nbsp;still&nbsp;contain</span><br>
<span class="lineno"></span><span class="comment" id="5951150">//&nbsp;test&nbsp;files,&nbsp;files&nbsp;hidden&nbsp;by&nbsp;build&nbsp;tags,&nbsp;and&nbsp;so&nbsp;on.)</span><br>
<span class="lineno"></span><span class="keyword" id="5951205">type</span>&nbsp;<span class="ident" id="5951210">NoGoError</span>&nbsp;<span class="keyword" id="5951220">struct</span>&nbsp;<span class="op" id="5951227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951230">Dir</span>&nbsp;<span class="builtintype" id="5951234">string</span><br>
<span class="lineno"></span><span class="op" id="5951241">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="keyword" id="5951244">func</span>&nbsp;<span class="op" id="5951249">(</span><span class="ident" id="5951250">e</span>&nbsp;<span class="op" id="5951252">*</span><span class="ident" id="5951253">NoGoError</span><span class="op" id="5951262">)</span>&nbsp;<span class="ident" id="5951264">Error</span><span class="op" id="5951269">(</span><span class="op" id="5951270">)</span>&nbsp;<span class="builtintype" id="5951272">string</span>&nbsp;<span class="op" id="5951279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951282">return</span>&nbsp;<span class="string" id="5951289">&#34;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="5951324">+</span>&nbsp;<span class="ident" id="5951326">e</span><span class="op" id="5951327">.</span><span class="ident" id="5951328">Dir</span><br>
<span class="lineno"></span><span class="op" id="5951332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="5951335">//&nbsp;MultiplePackageError&nbsp;describes&nbsp;a&nbsp;directory&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="5951392">//&nbsp;multiple&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;for&nbsp;multiple&nbsp;packages.</span><br>
<span class="lineno"></span><span class="keyword" id="5951453">type</span>&nbsp;<span class="ident" id="5951458">MultiplePackageError</span>&nbsp;<span class="keyword" id="5951479">struct</span>&nbsp;<span class="op" id="5951486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951489">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5951498">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5951507">//&nbsp;directory&nbsp;containing&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951538">Packages</span>&nbsp;<span class="op" id="5951547">[</span><span class="op" id="5951548">]</span><span class="builtintype" id="5951549">string</span>&nbsp;<span class="comment" id="5951556">//&nbsp;package&nbsp;names&nbsp;found</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951580">Files</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951589">[</span><span class="op" id="5951590">]</span><span class="builtintype" id="5951591">string</span>&nbsp;<span class="comment" id="5951598">//&nbsp;corresponding&nbsp;files:&nbsp;Files[i]&nbsp;declares&nbsp;package&nbsp;Packages[i]</span><br>
<span class="lineno"></span><span class="op" id="5951660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5951663">func</span>&nbsp;<span class="op" id="5951668">(</span><span class="ident" id="5951669">e</span>&nbsp;<span class="op" id="5951671">*</span><span class="ident" id="5951672">MultiplePackageError</span><span class="op" id="5951692">)</span>&nbsp;<span class="ident" id="5951694">Error</span><span class="op" id="5951699">(</span><span class="op" id="5951700">)</span>&nbsp;<span class="builtintype" id="5951702">string</span>&nbsp;<span class="op" id="5951709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5951712">//&nbsp;Error&nbsp;string&nbsp;limited&nbsp;to&nbsp;two&nbsp;entries&nbsp;for&nbsp;compatibility.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951771">return</span>&nbsp;<span class="ident" id="5951778">fmt</span><span class="op" id="5951781">.</span><span class="ident" id="5951782">Sprintf</span><span class="op" id="5951789">(</span><span class="string" id="5951790">&#34;found&nbsp;packages&nbsp;%s&nbsp;(%s)&nbsp;and&nbsp;%s&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="5951832">,</span>&nbsp;<span class="ident" id="5951834">e</span><span class="op" id="5951835">.</span><span class="ident" id="5951836">Packages</span><span class="op" id="5951844">[</span><span class="num" id="5951845">0</span><span class="op" id="5951846">]</span><span class="op" id="5951847">,</span>&nbsp;<span class="ident" id="5951849">e</span><span class="op" id="5951850">.</span><span class="ident" id="5951851">Files</span><span class="op" id="5951856">[</span><span class="num" id="5951857">0</span><span class="op" id="5951858">]</span><span class="op" id="5951859">,</span>&nbsp;<span class="ident" id="5951861">e</span><span class="op" id="5951862">.</span><span class="ident" id="5951863">Packages</span><span class="op" id="5951871">[</span><span class="num" id="5951872">1</span><span class="op" id="5951873">]</span><span class="op" id="5951874">,</span>&nbsp;<span class="ident" id="5951876">e</span><span class="op" id="5951877">.</span><span class="ident" id="5951878">Files</span><span class="op" id="5951883">[</span><span class="num" id="5951884">1</span><span class="op" id="5951885">]</span><span class="op" id="5951886">,</span>&nbsp;<span class="ident" id="5951888">e</span><span class="op" id="5951889">.</span><span class="ident" id="5951890">Dir</span><span class="op" id="5951893">)</span><br>
<span class="lineno"></span><span class="op" id="5951895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5951898">func</span>&nbsp;<span class="ident" id="5951903">nameExt</span><span class="op" id="5951910">(</span><span class="ident" id="5951911">name</span>&nbsp;<span class="builtintype" id="5951916">string</span><span class="op" id="5951922">)</span>&nbsp;<span class="builtintype" id="5951924">string</span>&nbsp;<span class="op" id="5951931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951934">i</span>&nbsp;<span class="op" id="5951936">:=</span>&nbsp;<span class="ident" id="5951939">strings</span><span class="op" id="5951946">.</span><span class="ident" id="5951947">LastIndex</span><span class="op" id="5951956">(</span><span class="ident" id="5951957">name</span><span class="op" id="5951961">,</span>&nbsp;<span class="string" id="5951963">&#34;.&#34;</span><span class="op" id="5951966">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951969">if</span>&nbsp;<span class="ident" id="5951972">i</span>&nbsp;<span class="op" id="5951974">&lt;</span>&nbsp;<span class="num" id="5951976">0</span>&nbsp;<span class="op" id="5951978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951982">return</span>&nbsp;<span class="string" id="5951989">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951996">return</span>&nbsp;<span class="ident" id="5952003">name</span><span class="op" id="5952007">[</span><span class="ident" id="5952008">i</span><span class="op" id="5952009">:</span><span class="op" id="5952010">]</span><br>
<span class="lineno"></span><span class="op" id="5952012">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5952015">//&nbsp;Import&nbsp;returns&nbsp;details&nbsp;about&nbsp;the&nbsp;Go&nbsp;package&nbsp;named&nbsp;by&nbsp;the&nbsp;import&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="5952088">//&nbsp;interpreting&nbsp;local&nbsp;import&nbsp;paths&nbsp;relative&nbsp;to&nbsp;the&nbsp;srcDir&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="5952157">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;a&nbsp;local&nbsp;import&nbsp;path&nbsp;naming&nbsp;a&nbsp;package&nbsp;that&nbsp;can&nbsp;be&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5952233">//&nbsp;using&nbsp;a&nbsp;standard&nbsp;import&nbsp;path,&nbsp;the&nbsp;returned&nbsp;package&nbsp;will&nbsp;set&nbsp;p.ImportPath</span><br>
<span class="lineno">445</span><span class="comment" id="5952309">//&nbsp;to&nbsp;that&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="5952326">//</span><br>
<span class="lineno"></span><span class="comment" id="5952329">//&nbsp;In&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;package,&nbsp;.go,&nbsp;.c,&nbsp;.h,&nbsp;and&nbsp;.s&nbsp;files&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5952403">//&nbsp;considered&nbsp;part&nbsp;of&nbsp;the&nbsp;package&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span><span class="comment" id="5952449">//</span><br>
<span class="lineno">450</span><span class="comment" id="5952452">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;.go&nbsp;files&nbsp;in&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span><span class="comment" id="5952492">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;files&nbsp;starting&nbsp;with&nbsp;_&nbsp;or&nbsp;.&nbsp;(likely&nbsp;editor&nbsp;temporary&nbsp;files)</span><br>
<span class="lineno"></span><span class="comment" id="5952556">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;files&nbsp;with&nbsp;build&nbsp;constraints&nbsp;not&nbsp;satisfied&nbsp;by&nbsp;the&nbsp;context</span><br>
<span class="lineno"></span><span class="comment" id="5952619">//</span><br>
<span class="lineno"></span><span class="comment" id="5952622">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;Import&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;and&nbsp;a&nbsp;non-nil</span><br>
<span class="lineno">455</span><span class="comment" id="5952690">//&nbsp;*Package&nbsp;containing&nbsp;partial&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="5952734">//</span><br>
<span class="lineno"></span><span class="keyword" id="5952737">func</span>&nbsp;<span class="op" id="5952742">(</span><span class="ident" id="5952743">ctxt</span>&nbsp;<span class="op" id="5952748">*</span><span class="ident" id="5952749">Context</span><span class="op" id="5952756">)</span>&nbsp;<span class="ident" id="5952758">Import</span><span class="op" id="5952764">(</span><span class="ident" id="5952765">path</span>&nbsp;<span class="builtintype" id="5952770">string</span><span class="op" id="5952776">,</span>&nbsp;<span class="ident" id="5952778">srcDir</span>&nbsp;<span class="builtintype" id="5952785">string</span><span class="op" id="5952791">,</span>&nbsp;<span class="ident" id="5952793">mode</span>&nbsp;<span class="ident" id="5952798">ImportMode</span><span class="op" id="5952808">)</span>&nbsp;<span class="op" id="5952810">(</span><span class="op" id="5952811">*</span><span class="ident" id="5952812">Package</span><span class="op" id="5952819">,</span>&nbsp;<span class="builtintype" id="5952821">error</span><span class="op" id="5952826">)</span>&nbsp;<span class="op" id="5952828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5952831">p</span>&nbsp;<span class="op" id="5952833">:=</span>&nbsp;<span class="op" id="5952836">&amp;</span><span class="ident" id="5952837">Package</span><span class="op" id="5952844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5952848">ImportPath</span><span class="op" id="5952858">:</span>&nbsp;<span class="ident" id="5952860">path</span><span class="op" id="5952864">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5952867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5952870">if</span>&nbsp;<span class="ident" id="5952873">path</span>&nbsp;<span class="op" id="5952878">==</span>&nbsp;<span class="string" id="5952881">&#34;&#34;</span>&nbsp;<span class="op" id="5952884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5952888">return</span>&nbsp;<span class="ident" id="5952895">p</span><span class="op" id="5952896">,</span>&nbsp;<span class="ident" id="5952898">fmt</span><span class="op" id="5952901">.</span><span class="ident" id="5952902">Errorf</span><span class="op" id="5952908">(</span><span class="string" id="5952909">&#34;import&nbsp;%q:&nbsp;invalid&nbsp;import&nbsp;path&#34;</span><span class="op" id="5952941">,</span>&nbsp;<span class="ident" id="5952943">path</span><span class="op" id="5952947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5952950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5952954">var</span>&nbsp;<span class="ident" id="5952958">pkga</span>&nbsp;<span class="builtintype" id="5952963">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5952971">var</span>&nbsp;<span class="ident" id="5952975">pkgerr</span>&nbsp;<span class="builtintype" id="5952982">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5952989">switch</span>&nbsp;<span class="ident" id="5952996">ctxt</span><span class="op" id="5953000">.</span><span class="ident" id="5953001">Compiler</span>&nbsp;<span class="op" id="5953010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953013">case</span>&nbsp;<span class="string" id="5953018">&#34;gccgo&#34;</span><span class="op" id="5953025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953029">dir</span><span class="op" id="5953032">,</span>&nbsp;<span class="ident" id="5953034">elem</span>&nbsp;<span class="op" id="5953039">:=</span>&nbsp;<span class="ident" id="5953042">pathpkg</span><span class="op" id="5953049">.</span><span class="ident" id="5953050">Split</span><span class="op" id="5953055">(</span><span class="ident" id="5953056">p</span><span class="op" id="5953057">.</span><span class="ident" id="5953058">ImportPath</span><span class="op" id="5953068">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953072">pkga</span>&nbsp;<span class="op" id="5953077">=</span>&nbsp;<span class="string" id="5953079">&#34;pkg/gccgo_&#34;</span>&nbsp;<span class="op" id="5953092">+</span>&nbsp;<span class="ident" id="5953094">ctxt</span><span class="op" id="5953098">.</span><span class="ident" id="5953099">GOOS</span>&nbsp;<span class="op" id="5953104">+</span>&nbsp;<span class="string" id="5953106">&#34;_&#34;</span>&nbsp;<span class="op" id="5953110">+</span>&nbsp;<span class="ident" id="5953112">ctxt</span><span class="op" id="5953116">.</span><span class="ident" id="5953117">GOARCH</span>&nbsp;<span class="op" id="5953124">+</span>&nbsp;<span class="string" id="5953126">&#34;/&#34;</span>&nbsp;<span class="op" id="5953130">+</span>&nbsp;<span class="ident" id="5953132">dir</span>&nbsp;<span class="op" id="5953136">+</span>&nbsp;<span class="string" id="5953138">&#34;lib&#34;</span>&nbsp;<span class="op" id="5953144">+</span>&nbsp;<span class="ident" id="5953146">elem</span>&nbsp;<span class="op" id="5953151">+</span>&nbsp;<span class="string" id="5953153">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953159">case</span>&nbsp;<span class="string" id="5953164">&#34;gc&#34;</span><span class="op" id="5953168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953172">suffix</span>&nbsp;<span class="op" id="5953179">:=</span>&nbsp;<span class="string" id="5953182">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953187">if</span>&nbsp;<span class="ident" id="5953190">ctxt</span><span class="op" id="5953194">.</span><span class="ident" id="5953195">InstallSuffix</span>&nbsp;<span class="op" id="5953209">!=</span>&nbsp;<span class="string" id="5953212">&#34;&#34;</span>&nbsp;<span class="op" id="5953215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953220">suffix</span>&nbsp;<span class="op" id="5953227">=</span>&nbsp;<span class="string" id="5953229">&#34;_&#34;</span>&nbsp;<span class="op" id="5953233">+</span>&nbsp;<span class="ident" id="5953235">ctxt</span><span class="op" id="5953239">.</span><span class="ident" id="5953240">InstallSuffix</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953260">pkga</span>&nbsp;<span class="op" id="5953265">=</span>&nbsp;<span class="string" id="5953267">&#34;pkg/&#34;</span>&nbsp;<span class="op" id="5953274">+</span>&nbsp;<span class="ident" id="5953276">ctxt</span><span class="op" id="5953280">.</span><span class="ident" id="5953281">GOOS</span>&nbsp;<span class="op" id="5953286">+</span>&nbsp;<span class="string" id="5953288">&#34;_&#34;</span>&nbsp;<span class="op" id="5953292">+</span>&nbsp;<span class="ident" id="5953294">ctxt</span><span class="op" id="5953298">.</span><span class="ident" id="5953299">GOARCH</span>&nbsp;<span class="op" id="5953306">+</span>&nbsp;<span class="ident" id="5953308">suffix</span>&nbsp;<span class="op" id="5953315">+</span>&nbsp;<span class="string" id="5953317">&#34;/&#34;</span>&nbsp;<span class="op" id="5953321">+</span>&nbsp;<span class="ident" id="5953323">p</span><span class="op" id="5953324">.</span><span class="ident" id="5953325">ImportPath</span>&nbsp;<span class="op" id="5953336">+</span>&nbsp;<span class="string" id="5953338">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953344">default</span><span class="op" id="5953351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953355">//&nbsp;Save&nbsp;error&nbsp;for&nbsp;end&nbsp;of&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953392">pkgerr</span>&nbsp;<span class="op" id="5953399">=</span>&nbsp;<span class="ident" id="5953401">fmt</span><span class="op" id="5953404">.</span><span class="ident" id="5953405">Errorf</span><span class="op" id="5953411">(</span><span class="string" id="5953412">&#34;import&nbsp;%q:&nbsp;unknown&nbsp;compiler&nbsp;%q&#34;</span><span class="op" id="5953444">,</span>&nbsp;<span class="ident" id="5953446">path</span><span class="op" id="5953450">,</span>&nbsp;<span class="ident" id="5953452">ctxt</span><span class="op" id="5953456">.</span><span class="ident" id="5953457">Compiler</span><span class="op" id="5953465">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953472">binaryOnly</span>&nbsp;<span class="op" id="5953483">:=</span>&nbsp;<span class="builtintype" id="5953486">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953493">if</span>&nbsp;<span class="ident" id="5953496">IsLocalImport</span><span class="op" id="5953509">(</span><span class="ident" id="5953510">path</span><span class="op" id="5953514">)</span>&nbsp;<span class="op" id="5953516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953520">pkga</span>&nbsp;<span class="op" id="5953525">=</span>&nbsp;<span class="string" id="5953527">&#34;&#34;</span>&nbsp;<span class="comment" id="5953530">//&nbsp;local&nbsp;imports&nbsp;have&nbsp;no&nbsp;installed&nbsp;path</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953572">if</span>&nbsp;<span class="ident" id="5953575">srcDir</span>&nbsp;<span class="op" id="5953582">==</span>&nbsp;<span class="string" id="5953585">&#34;&#34;</span>&nbsp;<span class="op" id="5953588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953593">return</span>&nbsp;<span class="ident" id="5953600">p</span><span class="op" id="5953601">,</span>&nbsp;<span class="ident" id="5953603">fmt</span><span class="op" id="5953606">.</span><span class="ident" id="5953607">Errorf</span><span class="op" id="5953613">(</span><span class="string" id="5953614">&#34;import&nbsp;%q:&nbsp;import&nbsp;relative&nbsp;to&nbsp;unknown&nbsp;directory&#34;</span><span class="op" id="5953663">,</span>&nbsp;<span class="ident" id="5953665">path</span><span class="op" id="5953669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953677">if</span>&nbsp;<span class="op" id="5953680">!</span><span class="ident" id="5953681">ctxt</span><span class="op" id="5953685">.</span><span class="ident" id="5953686">isAbsPath</span><span class="op" id="5953695">(</span><span class="ident" id="5953696">path</span><span class="op" id="5953700">)</span>&nbsp;<span class="op" id="5953702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953707">p</span><span class="op" id="5953708">.</span><span class="ident" id="5953709">Dir</span>&nbsp;<span class="op" id="5953713">=</span>&nbsp;<span class="ident" id="5953715">ctxt</span><span class="op" id="5953719">.</span><span class="ident" id="5953720">joinPath</span><span class="op" id="5953728">(</span><span class="ident" id="5953729">srcDir</span><span class="op" id="5953735">,</span>&nbsp;<span class="ident" id="5953737">path</span><span class="op" id="5953741">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953749">//&nbsp;Determine&nbsp;canonical&nbsp;import&nbsp;path,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953795">if</span>&nbsp;<span class="ident" id="5953798">ctxt</span><span class="op" id="5953802">.</span><span class="ident" id="5953803">GOROOT</span>&nbsp;<span class="op" id="5953810">!=</span>&nbsp;<span class="string" id="5953813">&#34;&#34;</span>&nbsp;<span class="op" id="5953816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953821">root</span>&nbsp;<span class="op" id="5953826">:=</span>&nbsp;<span class="ident" id="5953829">ctxt</span><span class="op" id="5953833">.</span><span class="ident" id="5953834">joinPath</span><span class="op" id="5953842">(</span><span class="ident" id="5953843">ctxt</span><span class="op" id="5953847">.</span><span class="ident" id="5953848">GOROOT</span><span class="op" id="5953854">,</span>&nbsp;<span class="string" id="5953856">&#34;src&#34;</span><span class="op" id="5953861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953866">if</span>&nbsp;<span class="ident" id="5953869">sub</span><span class="op" id="5953872">,</span>&nbsp;<span class="ident" id="5953874">ok</span>&nbsp;<span class="op" id="5953877">:=</span>&nbsp;<span class="ident" id="5953880">ctxt</span><span class="op" id="5953884">.</span><span class="ident" id="5953885">hasSubdir</span><span class="op" id="5953894">(</span><span class="ident" id="5953895">root</span><span class="op" id="5953899">,</span>&nbsp;<span class="ident" id="5953901">p</span><span class="op" id="5953902">.</span><span class="ident" id="5953903">Dir</span><span class="op" id="5953906">)</span><span class="op" id="5953907">;</span>&nbsp;<span class="ident" id="5953909">ok</span>&nbsp;<span class="op" id="5953912">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953918">p</span><span class="op" id="5953919">.</span><span class="ident" id="5953920">Goroot</span>&nbsp;<span class="op" id="5953927">=</span>&nbsp;<span class="builtintype" id="5953929">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953938">p</span><span class="op" id="5953939">.</span><span class="ident" id="5953940">ImportPath</span>&nbsp;<span class="op" id="5953951">=</span>&nbsp;<span class="ident" id="5953953">sub</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953961">p</span><span class="op" id="5953962">.</span><span class="ident" id="5953963">Root</span>&nbsp;<span class="op" id="5953968">=</span>&nbsp;<span class="ident" id="5953970">ctxt</span><span class="op" id="5953974">.</span><span class="ident" id="5953975">GOROOT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953986">goto</span>&nbsp;<span class="ident" id="5953991">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954000">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954008">all</span>&nbsp;<span class="op" id="5954012">:=</span>&nbsp;<span class="ident" id="5954015">ctxt</span><span class="op" id="5954019">.</span><span class="ident" id="5954020">gopath</span><span class="op" id="5954026">(</span><span class="op" id="5954027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954031">for</span>&nbsp;<span class="ident" id="5954035">i</span><span class="op" id="5954036">,</span>&nbsp;<span class="ident" id="5954038">root</span>&nbsp;<span class="op" id="5954043">:=</span>&nbsp;<span class="keyword" id="5954046">range</span>&nbsp;<span class="ident" id="5954052">all</span>&nbsp;<span class="op" id="5954056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954061">rootsrc</span>&nbsp;<span class="op" id="5954069">:=</span>&nbsp;<span class="ident" id="5954072">ctxt</span><span class="op" id="5954076">.</span><span class="ident" id="5954077">joinPath</span><span class="op" id="5954085">(</span><span class="ident" id="5954086">root</span><span class="op" id="5954090">,</span>&nbsp;<span class="string" id="5954092">&#34;src&#34;</span><span class="op" id="5954097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954102">if</span>&nbsp;<span class="ident" id="5954105">sub</span><span class="op" id="5954108">,</span>&nbsp;<span class="ident" id="5954110">ok</span>&nbsp;<span class="op" id="5954113">:=</span>&nbsp;<span class="ident" id="5954116">ctxt</span><span class="op" id="5954120">.</span><span class="ident" id="5954121">hasSubdir</span><span class="op" id="5954130">(</span><span class="ident" id="5954131">rootsrc</span><span class="op" id="5954138">,</span>&nbsp;<span class="ident" id="5954140">p</span><span class="op" id="5954141">.</span><span class="ident" id="5954142">Dir</span><span class="op" id="5954145">)</span><span class="op" id="5954146">;</span>&nbsp;<span class="ident" id="5954148">ok</span>&nbsp;<span class="op" id="5954151">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954157">//&nbsp;We&nbsp;found&nbsp;a&nbsp;potential&nbsp;import&nbsp;path&nbsp;for&nbsp;dir,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954206">//&nbsp;but&nbsp;check&nbsp;that&nbsp;using&nbsp;it&nbsp;wouldn&#39;t&nbsp;find&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954261">//&nbsp;else&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954280">if</span>&nbsp;<span class="ident" id="5954283">ctxt</span><span class="op" id="5954287">.</span><span class="ident" id="5954288">GOROOT</span>&nbsp;<span class="op" id="5954295">!=</span>&nbsp;<span class="string" id="5954298">&#34;&#34;</span>&nbsp;<span class="op" id="5954301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954308">if</span>&nbsp;<span class="ident" id="5954311">dir</span>&nbsp;<span class="op" id="5954315">:=</span>&nbsp;<span class="ident" id="5954318">ctxt</span><span class="op" id="5954322">.</span><span class="ident" id="5954323">joinPath</span><span class="op" id="5954331">(</span><span class="ident" id="5954332">ctxt</span><span class="op" id="5954336">.</span><span class="ident" id="5954337">GOROOT</span><span class="op" id="5954343">,</span>&nbsp;<span class="string" id="5954345">&#34;src&#34;</span><span class="op" id="5954350">,</span>&nbsp;<span class="ident" id="5954352">sub</span><span class="op" id="5954355">)</span><span class="op" id="5954356">;</span>&nbsp;<span class="ident" id="5954358">ctxt</span><span class="op" id="5954362">.</span><span class="ident" id="5954363">isDir</span><span class="op" id="5954368">(</span><span class="ident" id="5954369">dir</span><span class="op" id="5954372">)</span>&nbsp;<span class="op" id="5954374">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954382">p</span><span class="op" id="5954383">.</span><span class="ident" id="5954384">ConflictDir</span>&nbsp;<span class="op" id="5954396">=</span>&nbsp;<span class="ident" id="5954398">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954408">goto</span>&nbsp;<span class="ident" id="5954413">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954436">for</span>&nbsp;<span class="ident" id="5954440">_</span><span class="op" id="5954441">,</span>&nbsp;<span class="ident" id="5954443">earlyRoot</span>&nbsp;<span class="op" id="5954453">:=</span>&nbsp;<span class="keyword" id="5954456">range</span>&nbsp;<span class="ident" id="5954462">all</span><span class="op" id="5954465">[</span><span class="op" id="5954466">:</span><span class="ident" id="5954467">i</span><span class="op" id="5954468">]</span>&nbsp;<span class="op" id="5954470">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954477">if</span>&nbsp;<span class="ident" id="5954480">dir</span>&nbsp;<span class="op" id="5954484">:=</span>&nbsp;<span class="ident" id="5954487">ctxt</span><span class="op" id="5954491">.</span><span class="ident" id="5954492">joinPath</span><span class="op" id="5954500">(</span><span class="ident" id="5954501">earlyRoot</span><span class="op" id="5954510">,</span>&nbsp;<span class="string" id="5954512">&#34;src&#34;</span><span class="op" id="5954517">,</span>&nbsp;<span class="ident" id="5954519">sub</span><span class="op" id="5954522">)</span><span class="op" id="5954523">;</span>&nbsp;<span class="ident" id="5954525">ctxt</span><span class="op" id="5954529">.</span><span class="ident" id="5954530">isDir</span><span class="op" id="5954535">(</span><span class="ident" id="5954536">dir</span><span class="op" id="5954539">)</span>&nbsp;<span class="op" id="5954541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954549">p</span><span class="op" id="5954550">.</span><span class="ident" id="5954551">ConflictDir</span>&nbsp;<span class="op" id="5954563">=</span>&nbsp;<span class="ident" id="5954565">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954575">goto</span>&nbsp;<span class="ident" id="5954580">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954597">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954604">//&nbsp;sub&nbsp;would&nbsp;not&nbsp;name&nbsp;some&nbsp;other&nbsp;directory&nbsp;instead&nbsp;of&nbsp;this&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954672">//&nbsp;Record&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954690">p</span><span class="op" id="5954691">.</span><span class="ident" id="5954692">ImportPath</span>&nbsp;<span class="op" id="5954703">=</span>&nbsp;<span class="ident" id="5954705">sub</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954713">p</span><span class="op" id="5954714">.</span><span class="ident" id="5954715">Root</span>&nbsp;<span class="op" id="5954720">=</span>&nbsp;<span class="ident" id="5954722">root</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954731">goto</span>&nbsp;<span class="ident" id="5954736">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954753">//&nbsp;It&#39;s&nbsp;okay&nbsp;that&nbsp;we&nbsp;didn&#39;t&nbsp;find&nbsp;a&nbsp;root&nbsp;containing&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954811">//&nbsp;Keep&nbsp;going&nbsp;with&nbsp;the&nbsp;information&nbsp;we&nbsp;have.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954856">}</span>&nbsp;<span class="keyword" id="5954858">else</span>&nbsp;<span class="op" id="5954863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954867">if</span>&nbsp;<span class="ident" id="5954870">strings</span><span class="op" id="5954877">.</span><span class="ident" id="5954878">HasPrefix</span><span class="op" id="5954887">(</span><span class="ident" id="5954888">path</span><span class="op" id="5954892">,</span>&nbsp;<span class="string" id="5954894">&#34;/&#34;</span><span class="op" id="5954897">)</span>&nbsp;<span class="op" id="5954899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954904">return</span>&nbsp;<span class="ident" id="5954911">p</span><span class="op" id="5954912">,</span>&nbsp;<span class="ident" id="5954914">fmt</span><span class="op" id="5954917">.</span><span class="ident" id="5954918">Errorf</span><span class="op" id="5954924">(</span><span class="string" id="5954925">&#34;import&nbsp;%q:&nbsp;cannot&nbsp;import&nbsp;absolute&nbsp;path&#34;</span><span class="op" id="5954965">,</span>&nbsp;<span class="ident" id="5954967">path</span><span class="op" id="5954971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5954980">//&nbsp;tried&nbsp;records&nbsp;the&nbsp;location&nbsp;of&nbsp;unsuccessful&nbsp;package&nbsp;lookups</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955044">var</span>&nbsp;<span class="ident" id="5955048">tried</span>&nbsp;<span class="keyword" id="5955054">struct</span>&nbsp;<span class="op" id="5955061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955066">goroot</span>&nbsp;<span class="builtintype" id="5955073">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955083">gopath</span>&nbsp;<span class="op" id="5955090">[</span><span class="op" id="5955091">]</span><span class="builtintype" id="5955092">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955101">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5955106">//&nbsp;Determine&nbsp;directory&nbsp;from&nbsp;import&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955149">if</span>&nbsp;<span class="ident" id="5955152">ctxt</span><span class="op" id="5955156">.</span><span class="ident" id="5955157">GOROOT</span>&nbsp;<span class="op" id="5955164">!=</span>&nbsp;<span class="string" id="5955167">&#34;&#34;</span>&nbsp;<span class="op" id="5955170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955175">dir</span>&nbsp;<span class="op" id="5955179">:=</span>&nbsp;<span class="ident" id="5955182">ctxt</span><span class="op" id="5955186">.</span><span class="ident" id="5955187">joinPath</span><span class="op" id="5955195">(</span><span class="ident" id="5955196">ctxt</span><span class="op" id="5955200">.</span><span class="ident" id="5955201">GOROOT</span><span class="op" id="5955207">,</span>&nbsp;<span class="string" id="5955209">&#34;src&#34;</span><span class="op" id="5955214">,</span>&nbsp;<span class="ident" id="5955216">path</span><span class="op" id="5955220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955225">isDir</span>&nbsp;<span class="op" id="5955231">:=</span>&nbsp;<span class="ident" id="5955234">ctxt</span><span class="op" id="5955238">.</span><span class="ident" id="5955239">isDir</span><span class="op" id="5955244">(</span><span class="ident" id="5955245">dir</span><span class="op" id="5955248">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955253">binaryOnly</span>&nbsp;<span class="op" id="5955264">=</span>&nbsp;<span class="op" id="5955266">!</span><span class="ident" id="5955267">isDir</span>&nbsp;<span class="op" id="5955273">&amp;&amp;</span>&nbsp;<span class="ident" id="5955276">mode</span><span class="op" id="5955280">&amp;</span><span class="ident" id="5955281">AllowBinary</span>&nbsp;<span class="op" id="5955293">!=</span>&nbsp;<span class="num" id="5955296">0</span>&nbsp;<span class="op" id="5955298">&amp;&amp;</span>&nbsp;<span class="ident" id="5955301">pkga</span>&nbsp;<span class="op" id="5955306">!=</span>&nbsp;<span class="string" id="5955309">&#34;&#34;</span>&nbsp;<span class="op" id="5955312">&amp;&amp;</span>&nbsp;<span class="ident" id="5955315">ctxt</span><span class="op" id="5955319">.</span><span class="ident" id="5955320">isFile</span><span class="op" id="5955326">(</span><span class="ident" id="5955327">ctxt</span><span class="op" id="5955331">.</span><span class="ident" id="5955332">joinPath</span><span class="op" id="5955340">(</span><span class="ident" id="5955341">ctxt</span><span class="op" id="5955345">.</span><span class="ident" id="5955346">GOROOT</span><span class="op" id="5955352">,</span>&nbsp;<span class="ident" id="5955354">pkga</span><span class="op" id="5955358">)</span><span class="op" id="5955359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955364">if</span>&nbsp;<span class="ident" id="5955367">isDir</span>&nbsp;<span class="op" id="5955373">||</span>&nbsp;<span class="ident" id="5955376">binaryOnly</span>&nbsp;<span class="op" id="5955387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955393">p</span><span class="op" id="5955394">.</span><span class="ident" id="5955395">Dir</span>&nbsp;<span class="op" id="5955399">=</span>&nbsp;<span class="ident" id="5955401">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955409">p</span><span class="op" id="5955410">.</span><span class="ident" id="5955411">Goroot</span>&nbsp;<span class="op" id="5955418">=</span>&nbsp;<span class="builtintype" id="5955420">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955429">p</span><span class="op" id="5955430">.</span><span class="ident" id="5955431">Root</span>&nbsp;<span class="op" id="5955436">=</span>&nbsp;<span class="ident" id="5955438">ctxt</span><span class="op" id="5955442">.</span><span class="ident" id="5955443">GOROOT</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955454">goto</span>&nbsp;<span class="ident" id="5955459">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955473">tried</span><span class="op" id="5955478">.</span><span class="ident" id="5955479">goroot</span>&nbsp;<span class="op" id="5955486">=</span>&nbsp;<span class="ident" id="5955488">dir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955498">for</span>&nbsp;<span class="ident" id="5955502">_</span><span class="op" id="5955503">,</span>&nbsp;<span class="ident" id="5955505">root</span>&nbsp;<span class="op" id="5955510">:=</span>&nbsp;<span class="keyword" id="5955513">range</span>&nbsp;<span class="ident" id="5955519">ctxt</span><span class="op" id="5955523">.</span><span class="ident" id="5955524">gopath</span><span class="op" id="5955530">(</span><span class="op" id="5955531">)</span>&nbsp;<span class="op" id="5955533">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955538">dir</span>&nbsp;<span class="op" id="5955542">:=</span>&nbsp;<span class="ident" id="5955545">ctxt</span><span class="op" id="5955549">.</span><span class="ident" id="5955550">joinPath</span><span class="op" id="5955558">(</span><span class="ident" id="5955559">root</span><span class="op" id="5955563">,</span>&nbsp;<span class="string" id="5955565">&#34;src&#34;</span><span class="op" id="5955570">,</span>&nbsp;<span class="ident" id="5955572">path</span><span class="op" id="5955576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955581">isDir</span>&nbsp;<span class="op" id="5955587">:=</span>&nbsp;<span class="ident" id="5955590">ctxt</span><span class="op" id="5955594">.</span><span class="ident" id="5955595">isDir</span><span class="op" id="5955600">(</span><span class="ident" id="5955601">dir</span><span class="op" id="5955604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955609">binaryOnly</span>&nbsp;<span class="op" id="5955620">=</span>&nbsp;<span class="op" id="5955622">!</span><span class="ident" id="5955623">isDir</span>&nbsp;<span class="op" id="5955629">&amp;&amp;</span>&nbsp;<span class="ident" id="5955632">mode</span><span class="op" id="5955636">&amp;</span><span class="ident" id="5955637">AllowBinary</span>&nbsp;<span class="op" id="5955649">!=</span>&nbsp;<span class="num" id="5955652">0</span>&nbsp;<span class="op" id="5955654">&amp;&amp;</span>&nbsp;<span class="ident" id="5955657">pkga</span>&nbsp;<span class="op" id="5955662">!=</span>&nbsp;<span class="string" id="5955665">&#34;&#34;</span>&nbsp;<span class="op" id="5955668">&amp;&amp;</span>&nbsp;<span class="ident" id="5955671">ctxt</span><span class="op" id="5955675">.</span><span class="ident" id="5955676">isFile</span><span class="op" id="5955682">(</span><span class="ident" id="5955683">ctxt</span><span class="op" id="5955687">.</span><span class="ident" id="5955688">joinPath</span><span class="op" id="5955696">(</span><span class="ident" id="5955697">root</span><span class="op" id="5955701">,</span>&nbsp;<span class="ident" id="5955703">pkga</span><span class="op" id="5955707">)</span><span class="op" id="5955708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955713">if</span>&nbsp;<span class="ident" id="5955716">isDir</span>&nbsp;<span class="op" id="5955722">||</span>&nbsp;<span class="ident" id="5955725">binaryOnly</span>&nbsp;<span class="op" id="5955736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955742">p</span><span class="op" id="5955743">.</span><span class="ident" id="5955744">Dir</span>&nbsp;<span class="op" id="5955748">=</span>&nbsp;<span class="ident" id="5955750">dir</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955758">p</span><span class="op" id="5955759">.</span><span class="ident" id="5955760">Root</span>&nbsp;<span class="op" id="5955765">=</span>&nbsp;<span class="ident" id="5955767">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955776">goto</span>&nbsp;<span class="ident" id="5955781">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955795">tried</span><span class="op" id="5955800">.</span><span class="ident" id="5955801">gopath</span>&nbsp;<span class="op" id="5955808">=</span>&nbsp;<span class="builtinfunc" id="5955810">append</span><span class="op" id="5955816">(</span><span class="ident" id="5955817">tried</span><span class="op" id="5955822">.</span><span class="ident" id="5955823">gopath</span><span class="op" id="5955829">,</span>&nbsp;<span class="ident" id="5955831">dir</span><span class="op" id="5955834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955838">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5955843">//&nbsp;package&nbsp;was&nbsp;not&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955870">var</span>&nbsp;<span class="ident" id="5955874">paths</span>&nbsp;<span class="op" id="5955880">[</span><span class="op" id="5955881">]</span><span class="builtintype" id="5955882">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955891">if</span>&nbsp;<span class="ident" id="5955894">tried</span><span class="op" id="5955899">.</span><span class="ident" id="5955900">goroot</span>&nbsp;<span class="op" id="5955907">!=</span>&nbsp;<span class="string" id="5955910">&#34;&#34;</span>&nbsp;<span class="op" id="5955913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955918">paths</span>&nbsp;<span class="op" id="5955924">=</span>&nbsp;<span class="builtinfunc" id="5955926">append</span><span class="op" id="5955932">(</span><span class="ident" id="5955933">paths</span><span class="op" id="5955938">,</span>&nbsp;<span class="ident" id="5955940">fmt</span><span class="op" id="5955943">.</span><span class="ident" id="5955944">Sprintf</span><span class="op" id="5955951">(</span><span class="string" id="5955952">&#34;\t%s&nbsp;(from&nbsp;$GOROOT)&#34;</span><span class="op" id="5955973">,</span>&nbsp;<span class="ident" id="5955975">tried</span><span class="op" id="5955980">.</span><span class="ident" id="5955981">goroot</span><span class="op" id="5955987">)</span><span class="op" id="5955988">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955992">}</span>&nbsp;<span class="keyword" id="5955994">else</span>&nbsp;<span class="op" id="5955999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956004">paths</span>&nbsp;<span class="op" id="5956010">=</span>&nbsp;<span class="builtinfunc" id="5956012">append</span><span class="op" id="5956018">(</span><span class="ident" id="5956019">paths</span><span class="op" id="5956024">,</span>&nbsp;<span class="string" id="5956026">&#34;\t($GOROOT&nbsp;not&nbsp;set)&#34;</span><span class="op" id="5956047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956055">var</span>&nbsp;<span class="ident" id="5956059">i</span>&nbsp;<span class="builtintype" id="5956061">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956067">var</span>&nbsp;<span class="ident" id="5956071">format</span>&nbsp;<span class="op" id="5956078">=</span>&nbsp;<span class="string" id="5956080">&#34;\t%s&nbsp;(from&nbsp;$GOPATH)&#34;</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956104">for</span>&nbsp;<span class="op" id="5956108">;</span>&nbsp;<span class="ident" id="5956110">i</span>&nbsp;<span class="op" id="5956112">&lt;</span>&nbsp;<span class="builtinfunc" id="5956114">len</span><span class="op" id="5956117">(</span><span class="ident" id="5956118">tried</span><span class="op" id="5956123">.</span><span class="ident" id="5956124">gopath</span><span class="op" id="5956130">)</span><span class="op" id="5956131">;</span>&nbsp;<span class="ident" id="5956133">i</span><span class="op" id="5956134">++</span>&nbsp;<span class="op" id="5956137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956142">if</span>&nbsp;<span class="ident" id="5956145">i</span>&nbsp;<span class="op" id="5956147">&gt;</span>&nbsp;<span class="num" id="5956149">0</span>&nbsp;<span class="op" id="5956151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956157">format</span>&nbsp;<span class="op" id="5956164">=</span>&nbsp;<span class="string" id="5956166">&#34;\t%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956181">paths</span>&nbsp;<span class="op" id="5956187">=</span>&nbsp;<span class="builtinfunc" id="5956189">append</span><span class="op" id="5956195">(</span><span class="ident" id="5956196">paths</span><span class="op" id="5956201">,</span>&nbsp;<span class="ident" id="5956203">fmt</span><span class="op" id="5956206">.</span><span class="ident" id="5956207">Sprintf</span><span class="op" id="5956214">(</span><span class="ident" id="5956215">format</span><span class="op" id="5956221">,</span>&nbsp;<span class="ident" id="5956223">tried</span><span class="op" id="5956228">.</span><span class="ident" id="5956229">gopath</span><span class="op" id="5956235">[</span><span class="ident" id="5956236">i</span><span class="op" id="5956237">]</span><span class="op" id="5956238">)</span><span class="op" id="5956239">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956247">if</span>&nbsp;<span class="ident" id="5956250">i</span>&nbsp;<span class="op" id="5956252">==</span>&nbsp;<span class="num" id="5956255">0</span>&nbsp;<span class="op" id="5956257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956262">paths</span>&nbsp;<span class="op" id="5956268">=</span>&nbsp;<span class="builtinfunc" id="5956270">append</span><span class="op" id="5956276">(</span><span class="ident" id="5956277">paths</span><span class="op" id="5956282">,</span>&nbsp;<span class="string" id="5956284">&#34;\t($GOPATH&nbsp;not&nbsp;set)&#34;</span><span class="op" id="5956305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956313">return</span>&nbsp;<span class="ident" id="5956320">p</span><span class="op" id="5956321">,</span>&nbsp;<span class="ident" id="5956323">fmt</span><span class="op" id="5956326">.</span><span class="ident" id="5956327">Errorf</span><span class="op" id="5956333">(</span><span class="string" id="5956334">&#34;cannot&nbsp;find&nbsp;package&nbsp;%q&nbsp;in&nbsp;any&nbsp;of:\n%s&#34;</span><span class="op" id="5956373">,</span>&nbsp;<span class="ident" id="5956375">path</span><span class="op" id="5956379">,</span>&nbsp;<span class="ident" id="5956381">strings</span><span class="op" id="5956388">.</span><span class="ident" id="5956389">Join</span><span class="op" id="5956393">(</span><span class="ident" id="5956394">paths</span><span class="op" id="5956399">,</span>&nbsp;<span class="string" id="5956401">&#34;\n&#34;</span><span class="op" id="5956405">)</span><span class="op" id="5956406">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5956412">Found</span><span class="op" id="5956417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956420">if</span>&nbsp;<span class="ident" id="5956423">p</span><span class="op" id="5956424">.</span><span class="ident" id="5956425">Root</span>&nbsp;<span class="op" id="5956430">!=</span>&nbsp;<span class="string" id="5956433">&#34;&#34;</span>&nbsp;<span class="op" id="5956436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956440">p</span><span class="op" id="5956441">.</span><span class="ident" id="5956442">SrcRoot</span>&nbsp;<span class="op" id="5956450">=</span>&nbsp;<span class="ident" id="5956452">ctxt</span><span class="op" id="5956456">.</span><span class="ident" id="5956457">joinPath</span><span class="op" id="5956465">(</span><span class="ident" id="5956466">p</span><span class="op" id="5956467">.</span><span class="ident" id="5956468">Root</span><span class="op" id="5956472">,</span>&nbsp;<span class="string" id="5956474">&#34;src&#34;</span><span class="op" id="5956479">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956483">p</span><span class="op" id="5956484">.</span><span class="ident" id="5956485">PkgRoot</span>&nbsp;<span class="op" id="5956493">=</span>&nbsp;<span class="ident" id="5956495">ctxt</span><span class="op" id="5956499">.</span><span class="ident" id="5956500">joinPath</span><span class="op" id="5956508">(</span><span class="ident" id="5956509">p</span><span class="op" id="5956510">.</span><span class="ident" id="5956511">Root</span><span class="op" id="5956515">,</span>&nbsp;<span class="string" id="5956517">&#34;pkg&#34;</span><span class="op" id="5956522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956526">p</span><span class="op" id="5956527">.</span><span class="ident" id="5956528">BinDir</span>&nbsp;<span class="op" id="5956535">=</span>&nbsp;<span class="ident" id="5956537">ctxt</span><span class="op" id="5956541">.</span><span class="ident" id="5956542">joinPath</span><span class="op" id="5956550">(</span><span class="ident" id="5956551">p</span><span class="op" id="5956552">.</span><span class="ident" id="5956553">Root</span><span class="op" id="5956557">,</span>&nbsp;<span class="string" id="5956559">&#34;bin&#34;</span><span class="op" id="5956564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956568">if</span>&nbsp;<span class="ident" id="5956571">pkga</span>&nbsp;<span class="op" id="5956576">!=</span>&nbsp;<span class="string" id="5956579">&#34;&#34;</span>&nbsp;<span class="op" id="5956582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956587">p</span><span class="op" id="5956588">.</span><span class="ident" id="5956589">PkgObj</span>&nbsp;<span class="op" id="5956596">=</span>&nbsp;<span class="ident" id="5956598">ctxt</span><span class="op" id="5956602">.</span><span class="ident" id="5956603">joinPath</span><span class="op" id="5956611">(</span><span class="ident" id="5956612">p</span><span class="op" id="5956613">.</span><span class="ident" id="5956614">Root</span><span class="op" id="5956618">,</span>&nbsp;<span class="ident" id="5956620">pkga</span><span class="op" id="5956624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956628">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956635">if</span>&nbsp;<span class="ident" id="5956638">mode</span><span class="op" id="5956642">&amp;</span><span class="ident" id="5956643">FindOnly</span>&nbsp;<span class="op" id="5956652">!=</span>&nbsp;<span class="num" id="5956655">0</span>&nbsp;<span class="op" id="5956657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956661">return</span>&nbsp;<span class="ident" id="5956668">p</span><span class="op" id="5956669">,</span>&nbsp;<span class="ident" id="5956671">pkgerr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956679">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956682">if</span>&nbsp;<span class="ident" id="5956685">binaryOnly</span>&nbsp;<span class="op" id="5956696">&amp;&amp;</span>&nbsp;<span class="op" id="5956699">(</span><span class="ident" id="5956700">mode</span><span class="op" id="5956704">&amp;</span><span class="ident" id="5956705">AllowBinary</span><span class="op" id="5956716">)</span>&nbsp;<span class="op" id="5956718">!=</span>&nbsp;<span class="num" id="5956721">0</span>&nbsp;<span class="op" id="5956723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956727">return</span>&nbsp;<span class="ident" id="5956734">p</span><span class="op" id="5956735">,</span>&nbsp;<span class="ident" id="5956737">pkgerr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956749">dirs</span><span class="op" id="5956753">,</span>&nbsp;<span class="ident" id="5956755">err</span>&nbsp;<span class="op" id="5956759">:=</span>&nbsp;<span class="ident" id="5956762">ctxt</span><span class="op" id="5956766">.</span><span class="ident" id="5956767">readDir</span><span class="op" id="5956774">(</span><span class="ident" id="5956775">p</span><span class="op" id="5956776">.</span><span class="ident" id="5956777">Dir</span><span class="op" id="5956780">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956783">if</span>&nbsp;<span class="ident" id="5956786">err</span>&nbsp;<span class="op" id="5956790">!=</span>&nbsp;<span class="ident" id="5956793">nil</span>&nbsp;<span class="op" id="5956797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956801">return</span>&nbsp;<span class="ident" id="5956808">p</span><span class="op" id="5956809">,</span>&nbsp;<span class="ident" id="5956811">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956820">var</span>&nbsp;<span class="ident" id="5956824">Sfiles</span>&nbsp;<span class="op" id="5956831">[</span><span class="op" id="5956832">]</span><span class="builtintype" id="5956833">string</span>&nbsp;<span class="comment" id="5956840">//&nbsp;files&nbsp;with&nbsp;&#34;.S&#34;&nbsp;(capital&nbsp;S)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956872">var</span>&nbsp;<span class="ident" id="5956876">firstFile</span><span class="op" id="5956885">,</span>&nbsp;<span class="ident" id="5956887">firstCommentFile</span>&nbsp;<span class="builtintype" id="5956904">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956912">imported</span>&nbsp;<span class="op" id="5956921">:=</span>&nbsp;<span class="builtinfunc" id="5956924">make</span><span class="op" id="5956928">(</span><span class="keyword" id="5956929">map</span><span class="op" id="5956932">[</span><span class="builtintype" id="5956933">string</span><span class="op" id="5956939">]</span><span class="op" id="5956940">[</span><span class="op" id="5956941">]</span><span class="ident" id="5956942">token</span><span class="op" id="5956947">.</span><span class="ident" id="5956948">Position</span><span class="op" id="5956956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956959">testImported</span>&nbsp;<span class="op" id="5956972">:=</span>&nbsp;<span class="builtinfunc" id="5956975">make</span><span class="op" id="5956979">(</span><span class="keyword" id="5956980">map</span><span class="op" id="5956983">[</span><span class="builtintype" id="5956984">string</span><span class="op" id="5956990">]</span><span class="op" id="5956991">[</span><span class="op" id="5956992">]</span><span class="ident" id="5956993">token</span><span class="op" id="5956998">.</span><span class="ident" id="5956999">Position</span><span class="op" id="5957007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957010">xTestImported</span>&nbsp;<span class="op" id="5957024">:=</span>&nbsp;<span class="builtinfunc" id="5957027">make</span><span class="op" id="5957031">(</span><span class="keyword" id="5957032">map</span><span class="op" id="5957035">[</span><span class="builtintype" id="5957036">string</span><span class="op" id="5957042">]</span><span class="op" id="5957043">[</span><span class="op" id="5957044">]</span><span class="ident" id="5957045">token</span><span class="op" id="5957050">.</span><span class="ident" id="5957051">Position</span><span class="op" id="5957059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957062">allTags</span>&nbsp;<span class="op" id="5957070">:=</span>&nbsp;<span class="builtinfunc" id="5957073">make</span><span class="op" id="5957077">(</span><span class="keyword" id="5957078">map</span><span class="op" id="5957081">[</span><span class="builtintype" id="5957082">string</span><span class="op" id="5957088">]</span><span class="builtintype" id="5957089">bool</span><span class="op" id="5957093">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957096">fset</span>&nbsp;<span class="op" id="5957101">:=</span>&nbsp;<span class="ident" id="5957104">token</span><span class="op" id="5957109">.</span><span class="ident" id="5957110">NewFileSet</span><span class="op" id="5957120">(</span><span class="op" id="5957121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957124">for</span>&nbsp;<span class="ident" id="5957128">_</span><span class="op" id="5957129">,</span>&nbsp;<span class="ident" id="5957131">d</span>&nbsp;<span class="op" id="5957133">:=</span>&nbsp;<span class="keyword" id="5957136">range</span>&nbsp;<span class="ident" id="5957142">dirs</span>&nbsp;<span class="op" id="5957147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957151">if</span>&nbsp;<span class="ident" id="5957154">d</span><span class="op" id="5957155">.</span><span class="ident" id="5957156">IsDir</span><span class="op" id="5957161">(</span><span class="op" id="5957162">)</span>&nbsp;<span class="op" id="5957164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957169">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5957180">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957185">name</span>&nbsp;<span class="op" id="5957190">:=</span>&nbsp;<span class="ident" id="5957193">d</span><span class="op" id="5957194">.</span><span class="ident" id="5957195">Name</span><span class="op" id="5957199">(</span><span class="op" id="5957200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957204">ext</span>&nbsp;<span class="op" id="5957208">:=</span>&nbsp;<span class="ident" id="5957211">nameExt</span><span class="op" id="5957218">(</span><span class="ident" id="5957219">name</span><span class="op" id="5957223">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957228">match</span><span class="op" id="5957233">,</span>&nbsp;<span class="ident" id="5957235">data</span><span class="op" id="5957239">,</span>&nbsp;<span class="ident" id="5957241">filename</span><span class="op" id="5957249">,</span>&nbsp;<span class="ident" id="5957251">err</span>&nbsp;<span class="op" id="5957255">:=</span>&nbsp;<span class="ident" id="5957258">ctxt</span><span class="op" id="5957262">.</span><span class="ident" id="5957263">matchFile</span><span class="op" id="5957272">(</span><span class="ident" id="5957273">p</span><span class="op" id="5957274">.</span><span class="ident" id="5957275">Dir</span><span class="op" id="5957278">,</span>&nbsp;<span class="ident" id="5957280">name</span><span class="op" id="5957284">,</span>&nbsp;<span class="builtintype" id="5957286">true</span><span class="op" id="5957290">,</span>&nbsp;<span class="ident" id="5957292">allTags</span><span class="op" id="5957299">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957303">if</span>&nbsp;<span class="ident" id="5957306">err</span>&nbsp;<span class="op" id="5957310">!=</span>&nbsp;<span class="ident" id="5957313">nil</span>&nbsp;<span class="op" id="5957317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957322">return</span>&nbsp;<span class="ident" id="5957329">p</span><span class="op" id="5957330">,</span>&nbsp;<span class="ident" id="5957332">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5957338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957342">if</span>&nbsp;<span class="op" id="5957345">!</span><span class="ident" id="5957346">match</span>&nbsp;<span class="op" id="5957352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957357">if</span>&nbsp;<span class="ident" id="5957360">ext</span>&nbsp;<span class="op" id="5957364">==</span>&nbsp;<span class="string" id="5957367">&#34;.go&#34;</span>&nbsp;<span class="op" id="5957373">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957379">p</span><span class="op" id="5957380">.</span><span class="ident" id="5957381">IgnoredGoFiles</span>&nbsp;<span class="op" id="5957396">=</span>&nbsp;<span class="builtinfunc" id="5957398">append</span><span class="op" id="5957404">(</span><span class="ident" id="5957405">p</span><span class="op" id="5957406">.</span><span class="ident" id="5957407">IgnoredGoFiles</span><span class="op" id="5957421">,</span>&nbsp;<span class="ident" id="5957423">name</span><span class="op" id="5957427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5957432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957437">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5957448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5957453">//&nbsp;Going&nbsp;to&nbsp;save&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;non-Go&nbsp;files,&nbsp;can&nbsp;stop&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957516">switch</span>&nbsp;<span class="ident" id="5957523">ext</span>&nbsp;<span class="op" id="5957527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957531">case</span>&nbsp;<span class="string" id="5957536">&#34;.c&#34;</span><span class="op" id="5957540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957545">p</span><span class="op" id="5957546">.</span><span class="ident" id="5957547">CFiles</span>&nbsp;<span class="op" id="5957554">=</span>&nbsp;<span class="builtinfunc" id="5957556">append</span><span class="op" id="5957562">(</span><span class="ident" id="5957563">p</span><span class="op" id="5957564">.</span><span class="ident" id="5957565">CFiles</span><span class="op" id="5957571">,</span>&nbsp;<span class="ident" id="5957573">name</span><span class="op" id="5957577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957582">continue</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957593">case</span>&nbsp;<span class="string" id="5957598">&#34;.cc&#34;</span><span class="op" id="5957603">,</span>&nbsp;<span class="string" id="5957605">&#34;.cpp&#34;</span><span class="op" id="5957611">,</span>&nbsp;<span class="string" id="5957613">&#34;.cxx&#34;</span><span class="op" id="5957619">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957624">p</span><span class="op" id="5957625">.</span><span class="ident" id="5957626">CXXFiles</span>&nbsp;<span class="op" id="5957635">=</span>&nbsp;<span class="builtinfunc" id="5957637">append</span><span class="op" id="5957643">(</span><span class="ident" id="5957644">p</span><span class="op" id="5957645">.</span><span class="ident" id="5957646">CXXFiles</span><span class="op" id="5957654">,</span>&nbsp;<span class="ident" id="5957656">name</span><span class="op" id="5957660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957665">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957676">case</span>&nbsp;<span class="string" id="5957681">&#34;.m&#34;</span><span class="op" id="5957685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957690">p</span><span class="op" id="5957691">.</span><span class="ident" id="5957692">MFiles</span>&nbsp;<span class="op" id="5957699">=</span>&nbsp;<span class="builtinfunc" id="5957701">append</span><span class="op" id="5957707">(</span><span class="ident" id="5957708">p</span><span class="op" id="5957709">.</span><span class="ident" id="5957710">MFiles</span><span class="op" id="5957716">,</span>&nbsp;<span class="ident" id="5957718">name</span><span class="op" id="5957722">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957727">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957738">case</span>&nbsp;<span class="string" id="5957743">&#34;.h&#34;</span><span class="op" id="5957747">,</span>&nbsp;<span class="string" id="5957749">&#34;.hh&#34;</span><span class="op" id="5957754">,</span>&nbsp;<span class="string" id="5957756">&#34;.hpp&#34;</span><span class="op" id="5957762">,</span>&nbsp;<span class="string" id="5957764">&#34;.hxx&#34;</span><span class="op" id="5957770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957775">p</span><span class="op" id="5957776">.</span><span class="ident" id="5957777">HFiles</span>&nbsp;<span class="op" id="5957784">=</span>&nbsp;<span class="builtinfunc" id="5957786">append</span><span class="op" id="5957792">(</span><span class="ident" id="5957793">p</span><span class="op" id="5957794">.</span><span class="ident" id="5957795">HFiles</span><span class="op" id="5957801">,</span>&nbsp;<span class="ident" id="5957803">name</span><span class="op" id="5957807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957812">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957823">case</span>&nbsp;<span class="string" id="5957828">&#34;.s&#34;</span><span class="op" id="5957832">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957837">p</span><span class="op" id="5957838">.</span><span class="ident" id="5957839">SFiles</span>&nbsp;<span class="op" id="5957846">=</span>&nbsp;<span class="builtinfunc" id="5957848">append</span><span class="op" id="5957854">(</span><span class="ident" id="5957855">p</span><span class="op" id="5957856">.</span><span class="ident" id="5957857">SFiles</span><span class="op" id="5957863">,</span>&nbsp;<span class="ident" id="5957865">name</span><span class="op" id="5957869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957874">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957885">case</span>&nbsp;<span class="string" id="5957890">&#34;.S&#34;</span><span class="op" id="5957894">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957899">Sfiles</span>&nbsp;<span class="op" id="5957906">=</span>&nbsp;<span class="builtinfunc" id="5957908">append</span><span class="op" id="5957914">(</span><span class="ident" id="5957915">Sfiles</span><span class="op" id="5957921">,</span>&nbsp;<span class="ident" id="5957923">name</span><span class="op" id="5957927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957932">continue</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5957943">case</span>&nbsp;<span class="string" id="5957948">&#34;.swig&#34;</span><span class="op" id="5957955">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5957960">p</span><span class="op" id="5957961">.</span><span class="ident" id="5957962">SwigFiles</span>&nbsp;<span class="op" id="5957972">=</span>&nbsp;<span class="builtinfunc" id="5957974">append</span><span class="op" id="5957980">(</span><span class="ident" id="5957981">p</span><span class="op" id="5957982">.</span><span class="ident" id="5957983">SwigFiles</span><span class="op" id="5957992">,</span>&nbsp;<span class="ident" id="5957994">name</span><span class="op" id="5957998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958003">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958014">case</span>&nbsp;<span class="string" id="5958019">&#34;.swigcxx&#34;</span><span class="op" id="5958029">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958034">p</span><span class="op" id="5958035">.</span><span class="ident" id="5958036">SwigCXXFiles</span>&nbsp;<span class="op" id="5958049">=</span>&nbsp;<span class="builtinfunc" id="5958051">append</span><span class="op" id="5958057">(</span><span class="ident" id="5958058">p</span><span class="op" id="5958059">.</span><span class="ident" id="5958060">SwigCXXFiles</span><span class="op" id="5958072">,</span>&nbsp;<span class="ident" id="5958074">name</span><span class="op" id="5958078">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958083">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958094">case</span>&nbsp;<span class="string" id="5958099">&#34;.syso&#34;</span><span class="op" id="5958106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5958111">//&nbsp;binary&nbsp;objects&nbsp;to&nbsp;add&nbsp;to&nbsp;package&nbsp;archive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5958158">//&nbsp;Likely&nbsp;of&nbsp;the&nbsp;form&nbsp;foo_windows.syso,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5958205">//&nbsp;the&nbsp;name&nbsp;was&nbsp;vetted&nbsp;above&nbsp;with&nbsp;goodOSArchFile.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958258">p</span><span class="op" id="5958259">.</span><span class="ident" id="5958260">SysoFiles</span>&nbsp;<span class="op" id="5958270">=</span>&nbsp;<span class="builtinfunc" id="5958272">append</span><span class="op" id="5958278">(</span><span class="ident" id="5958279">p</span><span class="op" id="5958280">.</span><span class="ident" id="5958281">SysoFiles</span><span class="op" id="5958290">,</span>&nbsp;<span class="ident" id="5958292">name</span><span class="op" id="5958296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958301">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5958312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958317">pf</span><span class="op" id="5958319">,</span>&nbsp;<span class="ident" id="5958321">err</span>&nbsp;<span class="op" id="5958325">:=</span>&nbsp;<span class="ident" id="5958328">parser</span><span class="op" id="5958334">.</span><span class="ident" id="5958335">ParseFile</span><span class="op" id="5958344">(</span><span class="ident" id="5958345">fset</span><span class="op" id="5958349">,</span>&nbsp;<span class="ident" id="5958351">filename</span><span class="op" id="5958359">,</span>&nbsp;<span class="ident" id="5958361">data</span><span class="op" id="5958365">,</span>&nbsp;<span class="ident" id="5958367">parser</span><span class="op" id="5958373">.</span><span class="ident" id="5958374">ImportsOnly</span><span class="op" id="5958385">|</span><span class="ident" id="5958386">parser</span><span class="op" id="5958392">.</span><span class="ident" id="5958393">ParseComments</span><span class="op" id="5958406">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958410">if</span>&nbsp;<span class="ident" id="5958413">err</span>&nbsp;<span class="op" id="5958417">!=</span>&nbsp;<span class="ident" id="5958420">nil</span>&nbsp;<span class="op" id="5958424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958429">return</span>&nbsp;<span class="ident" id="5958436">p</span><span class="op" id="5958437">,</span>&nbsp;<span class="ident" id="5958439">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5958445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958450">pkg</span>&nbsp;<span class="op" id="5958454">:=</span>&nbsp;<span class="ident" id="5958457">pf</span><span class="op" id="5958459">.</span><span class="ident" id="5958460">Name</span><span class="op" id="5958464">.</span><span class="ident" id="5958465">Name</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958472">if</span>&nbsp;<span class="ident" id="5958475">pkg</span>&nbsp;<span class="op" id="5958479">==</span>&nbsp;<span class="string" id="5958482">&#34;documentation&#34;</span>&nbsp;<span class="op" id="5958498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958503">p</span><span class="op" id="5958504">.</span><span class="ident" id="5958505">IgnoredGoFiles</span>&nbsp;<span class="op" id="5958520">=</span>&nbsp;<span class="builtinfunc" id="5958522">append</span><span class="op" id="5958528">(</span><span class="ident" id="5958529">p</span><span class="op" id="5958530">.</span><span class="ident" id="5958531">IgnoredGoFiles</span><span class="op" id="5958545">,</span>&nbsp;<span class="ident" id="5958547">name</span><span class="op" id="5958551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958556">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5958567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958572">isTest</span>&nbsp;<span class="op" id="5958579">:=</span>&nbsp;<span class="ident" id="5958582">strings</span><span class="op" id="5958589">.</span><span class="ident" id="5958590">HasSuffix</span><span class="op" id="5958599">(</span><span class="ident" id="5958600">name</span><span class="op" id="5958604">,</span>&nbsp;<span class="string" id="5958606">&#34;_test.go&#34;</span><span class="op" id="5958616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958620">isXTest</span>&nbsp;<span class="op" id="5958628">:=</span>&nbsp;<span class="builtintype" id="5958631">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958639">if</span>&nbsp;<span class="ident" id="5958642">isTest</span>&nbsp;<span class="op" id="5958649">&amp;&amp;</span>&nbsp;<span class="ident" id="5958652">strings</span><span class="op" id="5958659">.</span><span class="ident" id="5958660">HasSuffix</span><span class="op" id="5958669">(</span><span class="ident" id="5958670">pkg</span><span class="op" id="5958673">,</span>&nbsp;<span class="string" id="5958675">&#34;_test&#34;</span><span class="op" id="5958682">)</span>&nbsp;<span class="op" id="5958684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958689">isXTest</span>&nbsp;<span class="op" id="5958697">=</span>&nbsp;<span class="builtintype" id="5958699">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958707">pkg</span>&nbsp;<span class="op" id="5958711">=</span>&nbsp;<span class="ident" id="5958713">pkg</span><span class="op" id="5958716">[</span><span class="op" id="5958717">:</span><span class="builtinfunc" id="5958718">len</span><span class="op" id="5958721">(</span><span class="ident" id="5958722">pkg</span><span class="op" id="5958725">)</span><span class="op" id="5958726">-</span><span class="builtinfunc" id="5958727">len</span><span class="op" id="5958730">(</span><span class="string" id="5958731">&#34;_test&#34;</span><span class="op" id="5958738">)</span><span class="op" id="5958739">]</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5958743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958748">if</span>&nbsp;<span class="ident" id="5958751">p</span><span class="op" id="5958752">.</span><span class="ident" id="5958753">Name</span>&nbsp;<span class="op" id="5958758">==</span>&nbsp;<span class="string" id="5958761">&#34;&#34;</span>&nbsp;<span class="op" id="5958764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958769">p</span><span class="op" id="5958770">.</span><span class="ident" id="5958771">Name</span>&nbsp;<span class="op" id="5958776">=</span>&nbsp;<span class="ident" id="5958778">pkg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958785">firstFile</span>&nbsp;<span class="op" id="5958795">=</span>&nbsp;<span class="ident" id="5958797">name</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5958804">}</span>&nbsp;<span class="keyword" id="5958806">else</span>&nbsp;<span class="keyword" id="5958811">if</span>&nbsp;<span class="ident" id="5958814">pkg</span>&nbsp;<span class="op" id="5958818">!=</span>&nbsp;<span class="ident" id="5958821">p</span><span class="op" id="5958822">.</span><span class="ident" id="5958823">Name</span>&nbsp;<span class="op" id="5958828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958833">return</span>&nbsp;<span class="ident" id="5958840">p</span><span class="op" id="5958841">,</span>&nbsp;<span class="op" id="5958843">&amp;</span><span class="ident" id="5958844">MultiplePackageError</span><span class="op" id="5958864">{</span><span class="ident" id="5958865">p</span><span class="op" id="5958866">.</span><span class="ident" id="5958867">Dir</span><span class="op" id="5958870">,</span>&nbsp;<span class="op" id="5958872">[</span><span class="op" id="5958873">]</span><span class="builtintype" id="5958874">string</span><span class="op" id="5958880">{</span><span class="ident" id="5958881">firstFile</span><span class="op" id="5958890">,</span>&nbsp;<span class="ident" id="5958892">name</span><span class="op" id="5958896">}</span><span class="op" id="5958897">,</span>&nbsp;<span class="op" id="5958899">[</span><span class="op" id="5958900">]</span><span class="builtintype" id="5958901">string</span><span class="op" id="5958907">{</span><span class="ident" id="5958908">p</span><span class="op" id="5958909">.</span><span class="ident" id="5958910">Name</span><span class="op" id="5958914">,</span>&nbsp;<span class="ident" id="5958916">pkg</span><span class="op" id="5958919">}</span><span class="op" id="5958920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5958924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5958928">if</span>&nbsp;<span class="ident" id="5958931">pf</span><span class="op" id="5958933">.</span><span class="ident" id="5958934">Doc</span>&nbsp;<span class="op" id="5958938">!=</span>&nbsp;<span class="ident" id="5958941">nil</span>&nbsp;<span class="op" id="5958945">&amp;&amp;</span>&nbsp;<span class="ident" id="5958948">p</span><span class="op" id="5958949">.</span><span class="ident" id="5958950">Doc</span>&nbsp;<span class="op" id="5958954">==</span>&nbsp;<span class="string" id="5958957">&#34;&#34;</span>&nbsp;<span class="op" id="5958960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5958965">p</span><span class="op" id="5958966">.</span><span class="ident" id="5958967">Doc</span>&nbsp;<span class="op" id="5958971">=</span>&nbsp;<span class="ident" id="5958973">doc</span><span class="op" id="5958976">.</span><span class="ident" id="5958977">Synopsis</span><span class="op" id="5958985">(</span><span class="ident" id="5958986">pf</span><span class="op" id="5958988">.</span><span class="ident" id="5958989">Doc</span><span class="op" id="5958992">.</span><span class="ident" id="5958993">Text</span><span class="op" id="5958997">(</span><span class="op" id="5958998">)</span><span class="op" id="5958999">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959008">if</span>&nbsp;<span class="ident" id="5959011">mode</span><span class="op" id="5959015">&amp;</span><span class="ident" id="5959016">ImportComment</span>&nbsp;<span class="op" id="5959030">!=</span>&nbsp;<span class="num" id="5959033">0</span>&nbsp;<span class="op" id="5959035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959040">qcom</span><span class="op" id="5959044">,</span>&nbsp;<span class="ident" id="5959046">line</span>&nbsp;<span class="op" id="5959051">:=</span>&nbsp;<span class="ident" id="5959054">findImportComment</span><span class="op" id="5959071">(</span><span class="ident" id="5959072">data</span><span class="op" id="5959076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959081">if</span>&nbsp;<span class="ident" id="5959084">line</span>&nbsp;<span class="op" id="5959089">!=</span>&nbsp;<span class="num" id="5959092">0</span>&nbsp;<span class="op" id="5959094">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959100">com</span><span class="op" id="5959103">,</span>&nbsp;<span class="ident" id="5959105">err</span>&nbsp;<span class="op" id="5959109">:=</span>&nbsp;<span class="ident" id="5959112">strconv</span><span class="op" id="5959119">.</span><span class="ident" id="5959120">Unquote</span><span class="op" id="5959127">(</span><span class="ident" id="5959128">qcom</span><span class="op" id="5959132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959138">if</span>&nbsp;<span class="ident" id="5959141">err</span>&nbsp;<span class="op" id="5959145">!=</span>&nbsp;<span class="ident" id="5959148">nil</span>&nbsp;<span class="op" id="5959152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959159">return</span>&nbsp;<span class="ident" id="5959166">p</span><span class="op" id="5959167">,</span>&nbsp;<span class="ident" id="5959169">fmt</span><span class="op" id="5959172">.</span><span class="ident" id="5959173">Errorf</span><span class="op" id="5959179">(</span><span class="string" id="5959180">&#34;%s:%d:&nbsp;cannot&nbsp;parse&nbsp;import&nbsp;comment&#34;</span><span class="op" id="5959216">,</span>&nbsp;<span class="ident" id="5959218">filename</span><span class="op" id="5959226">,</span>&nbsp;<span class="ident" id="5959228">line</span><span class="op" id="5959232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959244">if</span>&nbsp;<span class="ident" id="5959247">p</span><span class="op" id="5959248">.</span><span class="ident" id="5959249">ImportComment</span>&nbsp;<span class="op" id="5959263">==</span>&nbsp;<span class="string" id="5959266">&#34;&#34;</span>&nbsp;<span class="op" id="5959269">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959276">p</span><span class="op" id="5959277">.</span><span class="ident" id="5959278">ImportComment</span>&nbsp;<span class="op" id="5959292">=</span>&nbsp;<span class="ident" id="5959294">com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959303">firstCommentFile</span>&nbsp;<span class="op" id="5959320">=</span>&nbsp;<span class="ident" id="5959322">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959331">}</span>&nbsp;<span class="keyword" id="5959333">else</span>&nbsp;<span class="keyword" id="5959338">if</span>&nbsp;<span class="ident" id="5959341">p</span><span class="op" id="5959342">.</span><span class="ident" id="5959343">ImportComment</span>&nbsp;<span class="op" id="5959357">!=</span>&nbsp;<span class="ident" id="5959360">com</span>&nbsp;<span class="op" id="5959364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959371">return</span>&nbsp;<span class="ident" id="5959378">p</span><span class="op" id="5959379">,</span>&nbsp;<span class="ident" id="5959381">fmt</span><span class="op" id="5959384">.</span><span class="ident" id="5959385">Errorf</span><span class="op" id="5959391">(</span><span class="string" id="5959392">&#34;found&nbsp;import&nbsp;comments&nbsp;%q&nbsp;(%s)&nbsp;and&nbsp;%q&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="5959441">,</span>&nbsp;<span class="ident" id="5959443">p</span><span class="op" id="5959444">.</span><span class="ident" id="5959445">ImportComment</span><span class="op" id="5959458">,</span>&nbsp;<span class="ident" id="5959460">firstCommentFile</span><span class="op" id="5959476">,</span>&nbsp;<span class="ident" id="5959478">com</span><span class="op" id="5959481">,</span>&nbsp;<span class="ident" id="5959483">name</span><span class="op" id="5959487">,</span>&nbsp;<span class="ident" id="5959489">p</span><span class="op" id="5959490">.</span><span class="ident" id="5959491">Dir</span><span class="op" id="5959494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959500">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5959514">//&nbsp;Record&nbsp;imports&nbsp;and&nbsp;information&nbsp;about&nbsp;cgo.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959561">isCgo</span>&nbsp;<span class="op" id="5959567">:=</span>&nbsp;<span class="builtintype" id="5959570">false</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959578">for</span>&nbsp;<span class="ident" id="5959582">_</span><span class="op" id="5959583">,</span>&nbsp;<span class="ident" id="5959585">decl</span>&nbsp;<span class="op" id="5959590">:=</span>&nbsp;<span class="keyword" id="5959593">range</span>&nbsp;<span class="ident" id="5959599">pf</span><span class="op" id="5959601">.</span><span class="ident" id="5959602">Decls</span>&nbsp;<span class="op" id="5959608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959613">d</span><span class="op" id="5959614">,</span>&nbsp;<span class="ident" id="5959616">ok</span>&nbsp;<span class="op" id="5959619">:=</span>&nbsp;<span class="ident" id="5959622">decl</span><span class="op" id="5959626">.</span><span class="op" id="5959627">(</span><span class="op" id="5959628">*</span><span class="ident" id="5959629">ast</span><span class="op" id="5959632">.</span><span class="ident" id="5959633">GenDecl</span><span class="op" id="5959640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959645">if</span>&nbsp;<span class="op" id="5959648">!</span><span class="ident" id="5959649">ok</span>&nbsp;<span class="op" id="5959652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959658">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959670">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959675">for</span>&nbsp;<span class="ident" id="5959679">_</span><span class="op" id="5959680">,</span>&nbsp;<span class="ident" id="5959682">dspec</span>&nbsp;<span class="op" id="5959688">:=</span>&nbsp;<span class="keyword" id="5959691">range</span>&nbsp;<span class="ident" id="5959697">d</span><span class="op" id="5959698">.</span><span class="ident" id="5959699">Specs</span>&nbsp;<span class="op" id="5959705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959711">spec</span><span class="op" id="5959715">,</span>&nbsp;<span class="ident" id="5959717">ok</span>&nbsp;<span class="op" id="5959720">:=</span>&nbsp;<span class="ident" id="5959723">dspec</span><span class="op" id="5959728">.</span><span class="op" id="5959729">(</span><span class="op" id="5959730">*</span><span class="ident" id="5959731">ast</span><span class="op" id="5959734">.</span><span class="ident" id="5959735">ImportSpec</span><span class="op" id="5959745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959751">if</span>&nbsp;<span class="op" id="5959754">!</span><span class="ident" id="5959755">ok</span>&nbsp;<span class="op" id="5959758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959765">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959778">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959784">quoted</span>&nbsp;<span class="op" id="5959791">:=</span>&nbsp;<span class="ident" id="5959794">spec</span><span class="op" id="5959798">.</span><span class="ident" id="5959799">Path</span><span class="op" id="5959803">.</span><span class="ident" id="5959804">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959814">path</span><span class="op" id="5959818">,</span>&nbsp;<span class="ident" id="5959820">err</span>&nbsp;<span class="op" id="5959824">:=</span>&nbsp;<span class="ident" id="5959827">strconv</span><span class="op" id="5959834">.</span><span class="ident" id="5959835">Unquote</span><span class="op" id="5959842">(</span><span class="ident" id="5959843">quoted</span><span class="op" id="5959849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959855">if</span>&nbsp;<span class="ident" id="5959858">err</span>&nbsp;<span class="op" id="5959862">!=</span>&nbsp;<span class="ident" id="5959865">nil</span>&nbsp;<span class="op" id="5959869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959876">log</span><span class="op" id="5959879">.</span><span class="ident" id="5959880">Panicf</span><span class="op" id="5959886">(</span><span class="string" id="5959887">&#34;%s:&nbsp;parser&nbsp;returned&nbsp;invalid&nbsp;quoted&nbsp;string:&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="5959936">,</span>&nbsp;<span class="ident" id="5959938">filename</span><span class="op" id="5959946">,</span>&nbsp;<span class="ident" id="5959948">quoted</span><span class="op" id="5959954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5959960">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5959966">if</span>&nbsp;<span class="ident" id="5959969">isXTest</span>&nbsp;<span class="op" id="5959977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5959984">xTestImported</span><span class="op" id="5959997">[</span><span class="ident" id="5959998">path</span><span class="op" id="5960002">]</span>&nbsp;<span class="op" id="5960004">=</span>&nbsp;<span class="builtinfunc" id="5960006">append</span><span class="op" id="5960012">(</span><span class="ident" id="5960013">xTestImported</span><span class="op" id="5960026">[</span><span class="ident" id="5960027">path</span><span class="op" id="5960031">]</span><span class="op" id="5960032">,</span>&nbsp;<span class="ident" id="5960034">fset</span><span class="op" id="5960038">.</span><span class="ident" id="5960039">Position</span><span class="op" id="5960047">(</span><span class="ident" id="5960048">spec</span><span class="op" id="5960052">.</span><span class="ident" id="5960053">Pos</span><span class="op" id="5960056">(</span><span class="op" id="5960057">)</span><span class="op" id="5960058">)</span><span class="op" id="5960059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960065">}</span>&nbsp;<span class="keyword" id="5960067">else</span>&nbsp;<span class="keyword" id="5960072">if</span>&nbsp;<span class="ident" id="5960075">isTest</span>&nbsp;<span class="op" id="5960082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960089">testImported</span><span class="op" id="5960101">[</span><span class="ident" id="5960102">path</span><span class="op" id="5960106">]</span>&nbsp;<span class="op" id="5960108">=</span>&nbsp;<span class="builtinfunc" id="5960110">append</span><span class="op" id="5960116">(</span><span class="ident" id="5960117">testImported</span><span class="op" id="5960129">[</span><span class="ident" id="5960130">path</span><span class="op" id="5960134">]</span><span class="op" id="5960135">,</span>&nbsp;<span class="ident" id="5960137">fset</span><span class="op" id="5960141">.</span><span class="ident" id="5960142">Position</span><span class="op" id="5960150">(</span><span class="ident" id="5960151">spec</span><span class="op" id="5960155">.</span><span class="ident" id="5960156">Pos</span><span class="op" id="5960159">(</span><span class="op" id="5960160">)</span><span class="op" id="5960161">)</span><span class="op" id="5960162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960168">}</span>&nbsp;<span class="keyword" id="5960170">else</span>&nbsp;<span class="op" id="5960175">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960182">imported</span><span class="op" id="5960190">[</span><span class="ident" id="5960191">path</span><span class="op" id="5960195">]</span>&nbsp;<span class="op" id="5960197">=</span>&nbsp;<span class="builtinfunc" id="5960199">append</span><span class="op" id="5960205">(</span><span class="ident" id="5960206">imported</span><span class="op" id="5960214">[</span><span class="ident" id="5960215">path</span><span class="op" id="5960219">]</span><span class="op" id="5960220">,</span>&nbsp;<span class="ident" id="5960222">fset</span><span class="op" id="5960226">.</span><span class="ident" id="5960227">Position</span><span class="op" id="5960235">(</span><span class="ident" id="5960236">spec</span><span class="op" id="5960240">.</span><span class="ident" id="5960241">Pos</span><span class="op" id="5960244">(</span><span class="op" id="5960245">)</span><span class="op" id="5960246">)</span><span class="op" id="5960247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960259">if</span>&nbsp;<span class="ident" id="5960262">path</span>&nbsp;<span class="op" id="5960267">==</span>&nbsp;<span class="string" id="5960270">&#34;C&#34;</span>&nbsp;<span class="op" id="5960274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960281">if</span>&nbsp;<span class="ident" id="5960284">isTest</span>&nbsp;<span class="op" id="5960291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960299">return</span>&nbsp;<span class="ident" id="5960306">p</span><span class="op" id="5960307">,</span>&nbsp;<span class="ident" id="5960309">fmt</span><span class="op" id="5960312">.</span><span class="ident" id="5960313">Errorf</span><span class="op" id="5960319">(</span><span class="string" id="5960320">&#34;use&nbsp;of&nbsp;cgo&nbsp;in&nbsp;test&nbsp;%s&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5960357">,</span>&nbsp;<span class="ident" id="5960359">filename</span><span class="op" id="5960367">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960381">cg</span>&nbsp;<span class="op" id="5960384">:=</span>&nbsp;<span class="ident" id="5960387">spec</span><span class="op" id="5960391">.</span><span class="ident" id="5960392">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960401">if</span>&nbsp;<span class="ident" id="5960404">cg</span>&nbsp;<span class="op" id="5960407">==</span>&nbsp;<span class="ident" id="5960410">nil</span>&nbsp;<span class="op" id="5960414">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5960417">len</span><span class="op" id="5960420">(</span><span class="ident" id="5960421">d</span><span class="op" id="5960422">.</span><span class="ident" id="5960423">Specs</span><span class="op" id="5960428">)</span>&nbsp;<span class="op" id="5960430">==</span>&nbsp;<span class="num" id="5960433">1</span>&nbsp;<span class="op" id="5960435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960443">cg</span>&nbsp;<span class="op" id="5960446">=</span>&nbsp;<span class="ident" id="5960448">d</span><span class="op" id="5960449">.</span><span class="ident" id="5960450">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960459">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960466">if</span>&nbsp;<span class="ident" id="5960469">cg</span>&nbsp;<span class="op" id="5960472">!=</span>&nbsp;<span class="ident" id="5960475">nil</span>&nbsp;<span class="op" id="5960479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960487">if</span>&nbsp;<span class="ident" id="5960490">err</span>&nbsp;<span class="op" id="5960494">:=</span>&nbsp;<span class="ident" id="5960497">ctxt</span><span class="op" id="5960501">.</span><span class="ident" id="5960502">saveCgo</span><span class="op" id="5960509">(</span><span class="ident" id="5960510">filename</span><span class="op" id="5960518">,</span>&nbsp;<span class="ident" id="5960520">p</span><span class="op" id="5960521">,</span>&nbsp;<span class="ident" id="5960523">cg</span><span class="op" id="5960525">)</span><span class="op" id="5960526">;</span>&nbsp;<span class="ident" id="5960528">err</span>&nbsp;<span class="op" id="5960532">!=</span>&nbsp;<span class="ident" id="5960535">nil</span>&nbsp;<span class="op" id="5960539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960548">return</span>&nbsp;<span class="ident" id="5960555">p</span><span class="op" id="5960556">,</span>&nbsp;<span class="ident" id="5960558">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960575">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960582">isCgo</span>&nbsp;<span class="op" id="5960588">=</span>&nbsp;<span class="builtintype" id="5960590">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960612">if</span>&nbsp;<span class="ident" id="5960615">isCgo</span>&nbsp;<span class="op" id="5960621">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960626">allTags</span><span class="op" id="5960633">[</span><span class="string" id="5960634">&#34;cgo&#34;</span><span class="op" id="5960639">]</span>&nbsp;<span class="op" id="5960641">=</span>&nbsp;<span class="builtintype" id="5960643">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960651">if</span>&nbsp;<span class="ident" id="5960654">ctxt</span><span class="op" id="5960658">.</span><span class="ident" id="5960659">CgoEnabled</span>&nbsp;<span class="op" id="5960670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960676">p</span><span class="op" id="5960677">.</span><span class="ident" id="5960678">CgoFiles</span>&nbsp;<span class="op" id="5960687">=</span>&nbsp;<span class="builtinfunc" id="5960689">append</span><span class="op" id="5960695">(</span><span class="ident" id="5960696">p</span><span class="op" id="5960697">.</span><span class="ident" id="5960698">CgoFiles</span><span class="op" id="5960706">,</span>&nbsp;<span class="ident" id="5960708">name</span><span class="op" id="5960712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960717">}</span>&nbsp;<span class="keyword" id="5960719">else</span>&nbsp;<span class="op" id="5960724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960730">p</span><span class="op" id="5960731">.</span><span class="ident" id="5960732">IgnoredGoFiles</span>&nbsp;<span class="op" id="5960747">=</span>&nbsp;<span class="builtinfunc" id="5960749">append</span><span class="op" id="5960755">(</span><span class="ident" id="5960756">p</span><span class="op" id="5960757">.</span><span class="ident" id="5960758">IgnoredGoFiles</span><span class="op" id="5960772">,</span>&nbsp;<span class="ident" id="5960774">name</span><span class="op" id="5960778">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960787">}</span>&nbsp;<span class="keyword" id="5960789">else</span>&nbsp;<span class="keyword" id="5960794">if</span>&nbsp;<span class="ident" id="5960797">isXTest</span>&nbsp;<span class="op" id="5960805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960810">p</span><span class="op" id="5960811">.</span><span class="ident" id="5960812">XTestGoFiles</span>&nbsp;<span class="op" id="5960825">=</span>&nbsp;<span class="builtinfunc" id="5960827">append</span><span class="op" id="5960833">(</span><span class="ident" id="5960834">p</span><span class="op" id="5960835">.</span><span class="ident" id="5960836">XTestGoFiles</span><span class="op" id="5960848">,</span>&nbsp;<span class="ident" id="5960850">name</span><span class="op" id="5960854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960858">}</span>&nbsp;<span class="keyword" id="5960860">else</span>&nbsp;<span class="keyword" id="5960865">if</span>&nbsp;<span class="ident" id="5960868">isTest</span>&nbsp;<span class="op" id="5960875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960880">p</span><span class="op" id="5960881">.</span><span class="ident" id="5960882">TestGoFiles</span>&nbsp;<span class="op" id="5960894">=</span>&nbsp;<span class="builtinfunc" id="5960896">append</span><span class="op" id="5960902">(</span><span class="ident" id="5960903">p</span><span class="op" id="5960904">.</span><span class="ident" id="5960905">TestGoFiles</span><span class="op" id="5960916">,</span>&nbsp;<span class="ident" id="5960918">name</span><span class="op" id="5960922">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960926">}</span>&nbsp;<span class="keyword" id="5960928">else</span>&nbsp;<span class="op" id="5960933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5960938">p</span><span class="op" id="5960939">.</span><span class="ident" id="5960940">GoFiles</span>&nbsp;<span class="op" id="5960948">=</span>&nbsp;<span class="builtinfunc" id="5960950">append</span><span class="op" id="5960956">(</span><span class="ident" id="5960957">p</span><span class="op" id="5960958">.</span><span class="ident" id="5960959">GoFiles</span><span class="op" id="5960966">,</span>&nbsp;<span class="ident" id="5960968">name</span><span class="op" id="5960972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5960979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5960982">if</span>&nbsp;<span class="builtinfunc" id="5960985">len</span><span class="op" id="5960988">(</span><span class="ident" id="5960989">p</span><span class="op" id="5960990">.</span><span class="ident" id="5960991">GoFiles</span><span class="op" id="5960998">)</span><span class="op" id="5960999">+</span><span class="builtinfunc" id="5961000">len</span><span class="op" id="5961003">(</span><span class="ident" id="5961004">p</span><span class="op" id="5961005">.</span><span class="ident" id="5961006">CgoFiles</span><span class="op" id="5961014">)</span><span class="op" id="5961015">+</span><span class="builtinfunc" id="5961016">len</span><span class="op" id="5961019">(</span><span class="ident" id="5961020">p</span><span class="op" id="5961021">.</span><span class="ident" id="5961022">TestGoFiles</span><span class="op" id="5961033">)</span><span class="op" id="5961034">+</span><span class="builtinfunc" id="5961035">len</span><span class="op" id="5961038">(</span><span class="ident" id="5961039">p</span><span class="op" id="5961040">.</span><span class="ident" id="5961041">XTestGoFiles</span><span class="op" id="5961053">)</span>&nbsp;<span class="op" id="5961055">==</span>&nbsp;<span class="num" id="5961058">0</span>&nbsp;<span class="op" id="5961060">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961064">return</span>&nbsp;<span class="ident" id="5961071">p</span><span class="op" id="5961072">,</span>&nbsp;<span class="op" id="5961074">&amp;</span><span class="ident" id="5961075">NoGoError</span><span class="op" id="5961084">{</span><span class="ident" id="5961085">p</span><span class="op" id="5961086">.</span><span class="ident" id="5961087">Dir</span><span class="op" id="5961090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5961093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961097">for</span>&nbsp;<span class="ident" id="5961101">tag</span>&nbsp;<span class="op" id="5961105">:=</span>&nbsp;<span class="keyword" id="5961108">range</span>&nbsp;<span class="ident" id="5961114">allTags</span>&nbsp;<span class="op" id="5961122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961126">p</span><span class="op" id="5961127">.</span><span class="ident" id="5961128">AllTags</span>&nbsp;<span class="op" id="5961136">=</span>&nbsp;<span class="builtinfunc" id="5961138">append</span><span class="op" id="5961144">(</span><span class="ident" id="5961145">p</span><span class="op" id="5961146">.</span><span class="ident" id="5961147">AllTags</span><span class="op" id="5961154">,</span>&nbsp;<span class="ident" id="5961156">tag</span><span class="op" id="5961159">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5961162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961165">sort</span><span class="op" id="5961169">.</span><span class="ident" id="5961170">Strings</span><span class="op" id="5961177">(</span><span class="ident" id="5961178">p</span><span class="op" id="5961179">.</span><span class="ident" id="5961180">AllTags</span><span class="op" id="5961187">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961191">p</span><span class="op" id="5961192">.</span><span class="ident" id="5961193">Imports</span><span class="op" id="5961200">,</span>&nbsp;<span class="ident" id="5961202">p</span><span class="op" id="5961203">.</span><span class="ident" id="5961204">ImportPos</span>&nbsp;<span class="op" id="5961214">=</span>&nbsp;<span class="ident" id="5961216">cleanImports</span><span class="op" id="5961228">(</span><span class="ident" id="5961229">imported</span><span class="op" id="5961237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961240">p</span><span class="op" id="5961241">.</span><span class="ident" id="5961242">TestImports</span><span class="op" id="5961253">,</span>&nbsp;<span class="ident" id="5961255">p</span><span class="op" id="5961256">.</span><span class="ident" id="5961257">TestImportPos</span>&nbsp;<span class="op" id="5961271">=</span>&nbsp;<span class="ident" id="5961273">cleanImports</span><span class="op" id="5961285">(</span><span class="ident" id="5961286">testImported</span><span class="op" id="5961298">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961301">p</span><span class="op" id="5961302">.</span><span class="ident" id="5961303">XTestImports</span><span class="op" id="5961315">,</span>&nbsp;<span class="ident" id="5961317">p</span><span class="op" id="5961318">.</span><span class="ident" id="5961319">XTestImportPos</span>&nbsp;<span class="op" id="5961334">=</span>&nbsp;<span class="ident" id="5961336">cleanImports</span><span class="op" id="5961348">(</span><span class="ident" id="5961349">xTestImported</span><span class="op" id="5961362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961366">//&nbsp;add&nbsp;the&nbsp;.S&nbsp;files&nbsp;only&nbsp;if&nbsp;we&nbsp;are&nbsp;using&nbsp;cgo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961412">//&nbsp;(which&nbsp;means&nbsp;gcc&nbsp;will&nbsp;compile&nbsp;them).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961453">//&nbsp;The&nbsp;standard&nbsp;assemblers&nbsp;expect&nbsp;.s&nbsp;files.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961498">if</span>&nbsp;<span class="builtinfunc" id="5961501">len</span><span class="op" id="5961504">(</span><span class="ident" id="5961505">p</span><span class="op" id="5961506">.</span><span class="ident" id="5961507">CgoFiles</span><span class="op" id="5961515">)</span>&nbsp;<span class="op" id="5961517">&gt;</span>&nbsp;<span class="num" id="5961519">0</span>&nbsp;<span class="op" id="5961521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961525">p</span><span class="op" id="5961526">.</span><span class="ident" id="5961527">SFiles</span>&nbsp;<span class="op" id="5961534">=</span>&nbsp;<span class="builtinfunc" id="5961536">append</span><span class="op" id="5961542">(</span><span class="ident" id="5961543">p</span><span class="op" id="5961544">.</span><span class="ident" id="5961545">SFiles</span><span class="op" id="5961551">,</span>&nbsp;<span class="ident" id="5961553">Sfiles</span><span class="op" id="5961559">...</span><span class="op" id="5961562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961566">sort</span><span class="op" id="5961570">.</span><span class="ident" id="5961571">Strings</span><span class="op" id="5961578">(</span><span class="ident" id="5961579">p</span><span class="op" id="5961580">.</span><span class="ident" id="5961581">SFiles</span><span class="op" id="5961587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5961590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961594">return</span>&nbsp;<span class="ident" id="5961601">p</span><span class="op" id="5961602">,</span>&nbsp;<span class="ident" id="5961604">pkgerr</span><br>
<span class="lineno"></span><span class="op" id="5961611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5961614">func</span>&nbsp;<span class="ident" id="5961619">findImportComment</span><span class="op" id="5961636">(</span><span class="ident" id="5961637">data</span>&nbsp;<span class="op" id="5961642">[</span><span class="op" id="5961643">]</span><span class="builtintype" id="5961644">byte</span><span class="op" id="5961648">)</span>&nbsp;<span class="op" id="5961650">(</span><span class="ident" id="5961651">s</span>&nbsp;<span class="builtintype" id="5961653">string</span><span class="op" id="5961659">,</span>&nbsp;<span class="ident" id="5961661">line</span>&nbsp;<span class="builtintype" id="5961666">int</span><span class="op" id="5961669">)</span>&nbsp;<span class="op" id="5961671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961674">//&nbsp;expect&nbsp;keyword&nbsp;package</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961701">word</span><span class="op" id="5961705">,</span>&nbsp;<span class="ident" id="5961707">data</span>&nbsp;<span class="op" id="5961712">:=</span>&nbsp;<span class="ident" id="5961715">parseWord</span><span class="op" id="5961724">(</span><span class="ident" id="5961725">data</span><span class="op" id="5961729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961732">if</span>&nbsp;<span class="builtintype" id="5961735">string</span><span class="op" id="5961741">(</span><span class="ident" id="5961742">word</span><span class="op" id="5961746">)</span>&nbsp;<span class="op" id="5961748">!=</span>&nbsp;<span class="string" id="5961751">&#34;package&#34;</span>&nbsp;<span class="op" id="5961761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961765">return</span>&nbsp;<span class="string" id="5961772">&#34;&#34;</span><span class="op" id="5961774">,</span>&nbsp;<span class="num" id="5961776">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5961779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961783">//&nbsp;expect&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5961807">_</span><span class="op" id="5961808">,</span>&nbsp;<span class="ident" id="5961810">data</span>&nbsp;<span class="op" id="5961815">=</span>&nbsp;<span class="ident" id="5961817">parseWord</span><span class="op" id="5961826">(</span><span class="ident" id="5961827">data</span><span class="op" id="5961831">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961835">//&nbsp;now&nbsp;ready&nbsp;for&nbsp;import&nbsp;comment,&nbsp;a&nbsp;//&nbsp;or&nbsp;/*&nbsp;*/&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5961891">//&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;on&nbsp;the&nbsp;current&nbsp;line.</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5961937">for</span>&nbsp;<span class="builtinfunc" id="5961941">len</span><span class="op" id="5961944">(</span><span class="ident" id="5961945">data</span><span class="op" id="5961949">)</span>&nbsp;<span class="op" id="5961951">&gt;</span>&nbsp;<span class="num" id="5961953">0</span>&nbsp;<span class="op" id="5961955">&amp;&amp;</span>&nbsp;<span class="op" id="5961958">(</span><span class="ident" id="5961959">data</span><span class="op" id="5961963">[</span><span class="num" id="5961964">0</span><span class="op" id="5961965">]</span>&nbsp;<span class="op" id="5961967">==</span>&nbsp;<span class="string" id="5961970">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5961974">||</span>&nbsp;<span class="ident" id="5961977">data</span><span class="op" id="5961981">[</span><span class="num" id="5961982">0</span><span class="op" id="5961983">]</span>&nbsp;<span class="op" id="5961985">==</span>&nbsp;<span class="string" id="5961988">&#39;\t&#39;</span>&nbsp;<span class="op" id="5961993">||</span>&nbsp;<span class="ident" id="5961996">data</span><span class="op" id="5962000">[</span><span class="num" id="5962001">0</span><span class="op" id="5962002">]</span>&nbsp;<span class="op" id="5962004">==</span>&nbsp;<span class="string" id="5962007">&#39;\r&#39;</span><span class="op" id="5962011">)</span>&nbsp;<span class="op" id="5962013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962017">data</span>&nbsp;<span class="op" id="5962022">=</span>&nbsp;<span class="ident" id="5962024">data</span><span class="op" id="5962028">[</span><span class="num" id="5962029">1</span><span class="op" id="5962030">:</span><span class="op" id="5962031">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962038">var</span>&nbsp;<span class="ident" id="5962042">comment</span>&nbsp;<span class="op" id="5962050">[</span><span class="op" id="5962051">]</span><span class="builtintype" id="5962052">byte</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962058">switch</span>&nbsp;<span class="op" id="5962065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962068">case</span>&nbsp;<span class="ident" id="5962073">bytes</span><span class="op" id="5962078">.</span><span class="ident" id="5962079">HasPrefix</span><span class="op" id="5962088">(</span><span class="ident" id="5962089">data</span><span class="op" id="5962093">,</span>&nbsp;<span class="ident" id="5962095">slashSlash</span><span class="op" id="5962105">)</span><span class="op" id="5962106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962110">i</span>&nbsp;<span class="op" id="5962112">:=</span>&nbsp;<span class="ident" id="5962115">bytes</span><span class="op" id="5962120">.</span><span class="ident" id="5962121">Index</span><span class="op" id="5962126">(</span><span class="ident" id="5962127">data</span><span class="op" id="5962131">,</span>&nbsp;<span class="ident" id="5962133">newline</span><span class="op" id="5962140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962144">if</span>&nbsp;<span class="ident" id="5962147">i</span>&nbsp;<span class="op" id="5962149">&lt;</span>&nbsp;<span class="num" id="5962151">0</span>&nbsp;<span class="op" id="5962153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962158">i</span>&nbsp;<span class="op" id="5962160">=</span>&nbsp;<span class="builtinfunc" id="5962162">len</span><span class="op" id="5962165">(</span><span class="ident" id="5962166">data</span><span class="op" id="5962170">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962178">comment</span>&nbsp;<span class="op" id="5962186">=</span>&nbsp;<span class="ident" id="5962188">data</span><span class="op" id="5962192">[</span><span class="num" id="5962193">2</span><span class="op" id="5962194">:</span><span class="ident" id="5962195">i</span><span class="op" id="5962196">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962199">case</span>&nbsp;<span class="ident" id="5962204">bytes</span><span class="op" id="5962209">.</span><span class="ident" id="5962210">HasPrefix</span><span class="op" id="5962219">(</span><span class="ident" id="5962220">data</span><span class="op" id="5962224">,</span>&nbsp;<span class="ident" id="5962226">slashStar</span><span class="op" id="5962235">)</span><span class="op" id="5962236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962240">data</span>&nbsp;<span class="op" id="5962245">=</span>&nbsp;<span class="ident" id="5962247">data</span><span class="op" id="5962251">[</span><span class="num" id="5962252">2</span><span class="op" id="5962253">:</span><span class="op" id="5962254">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962258">i</span>&nbsp;<span class="op" id="5962260">:=</span>&nbsp;<span class="ident" id="5962263">bytes</span><span class="op" id="5962268">.</span><span class="ident" id="5962269">Index</span><span class="op" id="5962274">(</span><span class="ident" id="5962275">data</span><span class="op" id="5962279">,</span>&nbsp;<span class="ident" id="5962281">starSlash</span><span class="op" id="5962290">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962294">if</span>&nbsp;<span class="ident" id="5962297">i</span>&nbsp;<span class="op" id="5962299">&lt;</span>&nbsp;<span class="num" id="5962301">0</span>&nbsp;<span class="op" id="5962303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5962308">//&nbsp;malformed&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962332">return</span>&nbsp;<span class="string" id="5962339">&#34;&#34;</span><span class="op" id="5962341">,</span>&nbsp;<span class="num" id="5962343">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962351">comment</span>&nbsp;<span class="op" id="5962359">=</span>&nbsp;<span class="ident" id="5962361">data</span><span class="op" id="5962365">[</span><span class="op" id="5962366">:</span><span class="ident" id="5962367">i</span><span class="op" id="5962368">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962372">if</span>&nbsp;<span class="ident" id="5962375">bytes</span><span class="op" id="5962380">.</span><span class="ident" id="5962381">Contains</span><span class="op" id="5962389">(</span><span class="ident" id="5962390">comment</span><span class="op" id="5962397">,</span>&nbsp;<span class="ident" id="5962399">newline</span><span class="op" id="5962406">)</span>&nbsp;<span class="op" id="5962408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962413">return</span>&nbsp;<span class="string" id="5962420">&#34;&#34;</span><span class="op" id="5962422">,</span>&nbsp;<span class="num" id="5962424">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962434">comment</span>&nbsp;<span class="op" id="5962442">=</span>&nbsp;<span class="ident" id="5962444">bytes</span><span class="op" id="5962449">.</span><span class="ident" id="5962450">TrimSpace</span><span class="op" id="5962459">(</span><span class="ident" id="5962460">comment</span><span class="op" id="5962467">)</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5962471">//&nbsp;split&nbsp;comment&nbsp;into&nbsp;`import`,&nbsp;`&#34;pkg&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962512">word</span><span class="op" id="5962516">,</span>&nbsp;<span class="ident" id="5962518">arg</span>&nbsp;<span class="op" id="5962522">:=</span>&nbsp;<span class="ident" id="5962525">parseWord</span><span class="op" id="5962534">(</span><span class="ident" id="5962535">comment</span><span class="op" id="5962542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962545">if</span>&nbsp;<span class="builtintype" id="5962548">string</span><span class="op" id="5962554">(</span><span class="ident" id="5962555">word</span><span class="op" id="5962559">)</span>&nbsp;<span class="op" id="5962561">!=</span>&nbsp;<span class="string" id="5962564">&#34;import&#34;</span>&nbsp;<span class="op" id="5962573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962577">return</span>&nbsp;<span class="string" id="5962584">&#34;&#34;</span><span class="op" id="5962586">,</span>&nbsp;<span class="num" id="5962588">0</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962595">line</span>&nbsp;<span class="op" id="5962600">=</span>&nbsp;<span class="num" id="5962602">1</span>&nbsp;<span class="op" id="5962604">+</span>&nbsp;<span class="ident" id="5962606">bytes</span><span class="op" id="5962611">.</span><span class="ident" id="5962612">Count</span><span class="op" id="5962617">(</span><span class="ident" id="5962618">data</span><span class="op" id="5962622">[</span><span class="op" id="5962623">:</span><span class="builtinfunc" id="5962624">cap</span><span class="op" id="5962627">(</span><span class="ident" id="5962628">data</span><span class="op" id="5962632">)</span><span class="op" id="5962633">-</span><span class="builtinfunc" id="5962634">cap</span><span class="op" id="5962637">(</span><span class="ident" id="5962638">arg</span><span class="op" id="5962641">)</span><span class="op" id="5962642">]</span><span class="op" id="5962643">,</span>&nbsp;<span class="ident" id="5962645">newline</span><span class="op" id="5962652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962655">return</span>&nbsp;<span class="ident" id="5962662">strings</span><span class="op" id="5962669">.</span><span class="ident" id="5962670">TrimSpace</span><span class="op" id="5962679">(</span><span class="builtintype" id="5962680">string</span><span class="op" id="5962686">(</span><span class="ident" id="5962687">arg</span><span class="op" id="5962690">)</span><span class="op" id="5962691">)</span><span class="op" id="5962692">,</span>&nbsp;<span class="ident" id="5962694">line</span><br>
<span class="lineno"></span><span class="op" id="5962699">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="5962702">var</span>&nbsp;<span class="op" id="5962706">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962709">slashSlash</span>&nbsp;<span class="op" id="5962720">=</span>&nbsp;<span class="op" id="5962722">[</span><span class="op" id="5962723">]</span><span class="builtintype" id="5962724">byte</span><span class="op" id="5962728">(</span><span class="string" id="5962729">&#34;//&#34;</span><span class="op" id="5962733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962736">slashStar</span>&nbsp;&nbsp;<span class="op" id="5962747">=</span>&nbsp;<span class="op" id="5962749">[</span><span class="op" id="5962750">]</span><span class="builtintype" id="5962751">byte</span><span class="op" id="5962755">(</span><span class="string" id="5962756">&#34;/*&#34;</span><span class="op" id="5962760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962763">starSlash</span>&nbsp;&nbsp;<span class="op" id="5962774">=</span>&nbsp;<span class="op" id="5962776">[</span><span class="op" id="5962777">]</span><span class="builtintype" id="5962778">byte</span><span class="op" id="5962782">(</span><span class="string" id="5962783">&#34;*/&#34;</span><span class="op" id="5962787">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5962790">newline</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5962801">=</span>&nbsp;<span class="op" id="5962803">[</span><span class="op" id="5962804">]</span><span class="builtintype" id="5962805">byte</span><span class="op" id="5962809">(</span><span class="string" id="5962810">&#34;\n&#34;</span><span class="op" id="5962814">)</span><br>
<span class="lineno"></span><span class="op" id="5962816">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5962819">//&nbsp;skipSpaceOrComment&nbsp;returns&nbsp;data&nbsp;with&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="5962899">func</span>&nbsp;<span class="ident" id="5962904">skipSpaceOrComment</span><span class="op" id="5962922">(</span><span class="ident" id="5962923">data</span>&nbsp;<span class="op" id="5962928">[</span><span class="op" id="5962929">]</span><span class="builtintype" id="5962930">byte</span><span class="op" id="5962934">)</span>&nbsp;<span class="op" id="5962936">[</span><span class="op" id="5962937">]</span><span class="builtintype" id="5962938">byte</span>&nbsp;<span class="op" id="5962943">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962946">for</span>&nbsp;<span class="builtinfunc" id="5962950">len</span><span class="op" id="5962953">(</span><span class="ident" id="5962954">data</span><span class="op" id="5962958">)</span>&nbsp;<span class="op" id="5962960">&gt;</span>&nbsp;<span class="num" id="5962962">0</span>&nbsp;<span class="op" id="5962964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962968">switch</span>&nbsp;<span class="ident" id="5962975">data</span><span class="op" id="5962979">[</span><span class="num" id="5962980">0</span><span class="op" id="5962981">]</span>&nbsp;<span class="op" id="5962983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5962987">case</span>&nbsp;<span class="string" id="5962992">&#39;&nbsp;&#39;</span><span class="op" id="5962995">,</span>&nbsp;<span class="string" id="5962997">&#39;\t&#39;</span><span class="op" id="5963001">,</span>&nbsp;<span class="string" id="5963003">&#39;\r&#39;</span><span class="op" id="5963007">,</span>&nbsp;<span class="string" id="5963009">&#39;\n&#39;</span><span class="op" id="5963013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963018">data</span>&nbsp;<span class="op" id="5963023">=</span>&nbsp;<span class="ident" id="5963025">data</span><span class="op" id="5963029">[</span><span class="num" id="5963030">1</span><span class="op" id="5963031">:</span><span class="op" id="5963032">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963037">continue</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963048">case</span>&nbsp;<span class="string" id="5963053">&#39;/&#39;</span><span class="op" id="5963056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963061">if</span>&nbsp;<span class="ident" id="5963064">bytes</span><span class="op" id="5963069">.</span><span class="ident" id="5963070">HasPrefix</span><span class="op" id="5963079">(</span><span class="ident" id="5963080">data</span><span class="op" id="5963084">,</span>&nbsp;<span class="ident" id="5963086">slashSlash</span><span class="op" id="5963096">)</span>&nbsp;<span class="op" id="5963098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963104">i</span>&nbsp;<span class="op" id="5963106">:=</span>&nbsp;<span class="ident" id="5963109">bytes</span><span class="op" id="5963114">.</span><span class="ident" id="5963115">Index</span><span class="op" id="5963120">(</span><span class="ident" id="5963121">data</span><span class="op" id="5963125">,</span>&nbsp;<span class="ident" id="5963127">newline</span><span class="op" id="5963134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963140">if</span>&nbsp;<span class="ident" id="5963143">i</span>&nbsp;<span class="op" id="5963145">&lt;</span>&nbsp;<span class="num" id="5963147">0</span>&nbsp;<span class="op" id="5963149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963156">return</span>&nbsp;<span class="ident" id="5963163">nil</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963177">data</span>&nbsp;<span class="op" id="5963182">=</span>&nbsp;<span class="ident" id="5963184">data</span><span class="op" id="5963188">[</span><span class="ident" id="5963189">i</span><span class="op" id="5963190">+</span><span class="num" id="5963191">1</span><span class="op" id="5963192">:</span><span class="op" id="5963193">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963199">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963216">if</span>&nbsp;<span class="ident" id="5963219">bytes</span><span class="op" id="5963224">.</span><span class="ident" id="5963225">HasPrefix</span><span class="op" id="5963234">(</span><span class="ident" id="5963235">data</span><span class="op" id="5963239">,</span>&nbsp;<span class="ident" id="5963241">slashStar</span><span class="op" id="5963250">)</span>&nbsp;<span class="op" id="5963252">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963258">data</span>&nbsp;<span class="op" id="5963263">=</span>&nbsp;<span class="ident" id="5963265">data</span><span class="op" id="5963269">[</span><span class="num" id="5963270">2</span><span class="op" id="5963271">:</span><span class="op" id="5963272">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963278">i</span>&nbsp;<span class="op" id="5963280">:=</span>&nbsp;<span class="ident" id="5963283">bytes</span><span class="op" id="5963288">.</span><span class="ident" id="5963289">Index</span><span class="op" id="5963294">(</span><span class="ident" id="5963295">data</span><span class="op" id="5963299">,</span>&nbsp;<span class="ident" id="5963301">starSlash</span><span class="op" id="5963310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963316">if</span>&nbsp;<span class="ident" id="5963319">i</span>&nbsp;<span class="op" id="5963321">&lt;</span>&nbsp;<span class="num" id="5963323">0</span>&nbsp;<span class="op" id="5963325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963332">return</span>&nbsp;<span class="ident" id="5963339">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963347">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963353">data</span>&nbsp;<span class="op" id="5963358">=</span>&nbsp;<span class="ident" id="5963360">data</span><span class="op" id="5963364">[</span><span class="ident" id="5963365">i</span><span class="op" id="5963366">+</span><span class="num" id="5963367">2</span><span class="op" id="5963368">:</span><span class="op" id="5963369">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963375">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963395">break</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963405">return</span>&nbsp;<span class="ident" id="5963412">data</span><br>
<span class="lineno"></span><span class="op" id="5963417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5963420">//&nbsp;parseWord&nbsp;skips&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;in&nbsp;data</span><br>
<span class="lineno">880</span><span class="comment" id="5963478">//&nbsp;and&nbsp;then&nbsp;parses&nbsp;the&nbsp;beginning&nbsp;of&nbsp;data&nbsp;as&nbsp;an&nbsp;identifier&nbsp;or&nbsp;keyword,</span><br>
<span class="lineno"></span><span class="comment" id="5963548">//&nbsp;returning&nbsp;that&nbsp;word&nbsp;and&nbsp;what&nbsp;remains&nbsp;after&nbsp;the&nbsp;word.</span><br>
<span class="lineno"></span><span class="keyword" id="5963604">func</span>&nbsp;<span class="ident" id="5963609">parseWord</span><span class="op" id="5963618">(</span><span class="ident" id="5963619">data</span>&nbsp;<span class="op" id="5963624">[</span><span class="op" id="5963625">]</span><span class="builtintype" id="5963626">byte</span><span class="op" id="5963630">)</span>&nbsp;<span class="op" id="5963632">(</span><span class="ident" id="5963633">word</span><span class="op" id="5963637">,</span>&nbsp;<span class="ident" id="5963639">rest</span>&nbsp;<span class="op" id="5963644">[</span><span class="op" id="5963645">]</span><span class="builtintype" id="5963646">byte</span><span class="op" id="5963650">)</span>&nbsp;<span class="op" id="5963652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963655">data</span>&nbsp;<span class="op" id="5963660">=</span>&nbsp;<span class="ident" id="5963662">skipSpaceOrComment</span><span class="op" id="5963680">(</span><span class="ident" id="5963681">data</span><span class="op" id="5963685">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5963689">//&nbsp;Parse&nbsp;past&nbsp;leading&nbsp;word&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963729">rest</span>&nbsp;<span class="op" id="5963734">=</span>&nbsp;<span class="ident" id="5963736">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963742">for</span>&nbsp;<span class="op" id="5963746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963750">r</span><span class="op" id="5963751">,</span>&nbsp;<span class="ident" id="5963753">size</span>&nbsp;<span class="op" id="5963758">:=</span>&nbsp;<span class="ident" id="5963761">utf8</span><span class="op" id="5963765">.</span><span class="ident" id="5963766">DecodeRune</span><span class="op" id="5963776">(</span><span class="ident" id="5963777">rest</span><span class="op" id="5963781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963785">if</span>&nbsp;<span class="ident" id="5963788">unicode</span><span class="op" id="5963795">.</span><span class="ident" id="5963796">IsLetter</span><span class="op" id="5963804">(</span><span class="ident" id="5963805">r</span><span class="op" id="5963806">)</span>&nbsp;<span class="op" id="5963808">||</span>&nbsp;<span class="string" id="5963811">&#39;0&#39;</span>&nbsp;<span class="op" id="5963815">&lt;=</span>&nbsp;<span class="ident" id="5963818">r</span>&nbsp;<span class="op" id="5963820">&amp;&amp;</span>&nbsp;<span class="ident" id="5963823">r</span>&nbsp;<span class="op" id="5963825">&lt;=</span>&nbsp;<span class="string" id="5963828">&#39;9&#39;</span>&nbsp;<span class="op" id="5963832">||</span>&nbsp;<span class="ident" id="5963835">r</span>&nbsp;<span class="op" id="5963837">==</span>&nbsp;<span class="string" id="5963840">&#39;_&#39;</span>&nbsp;<span class="op" id="5963844">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963849">rest</span>&nbsp;<span class="op" id="5963854">=</span>&nbsp;<span class="ident" id="5963856">rest</span><span class="op" id="5963860">[</span><span class="ident" id="5963861">size</span><span class="op" id="5963865">:</span><span class="op" id="5963866">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963871">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963886">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963893">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5963897">word</span>&nbsp;<span class="op" id="5963902">=</span>&nbsp;<span class="ident" id="5963904">data</span><span class="op" id="5963908">[</span><span class="op" id="5963909">:</span><span class="builtinfunc" id="5963910">len</span><span class="op" id="5963913">(</span><span class="ident" id="5963914">data</span><span class="op" id="5963918">)</span><span class="op" id="5963919">-</span><span class="builtinfunc" id="5963920">len</span><span class="op" id="5963923">(</span><span class="ident" id="5963924">rest</span><span class="op" id="5963928">)</span><span class="op" id="5963929">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963932">if</span>&nbsp;<span class="builtinfunc" id="5963935">len</span><span class="op" id="5963938">(</span><span class="ident" id="5963939">word</span><span class="op" id="5963943">)</span>&nbsp;<span class="op" id="5963945">==</span>&nbsp;<span class="num" id="5963948">0</span>&nbsp;<span class="op" id="5963950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963954">return</span>&nbsp;<span class="ident" id="5963961">nil</span><span class="op" id="5963964">,</span>&nbsp;<span class="ident" id="5963966">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5963971">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5963975">return</span>&nbsp;<span class="ident" id="5963982">word</span><span class="op" id="5963986">,</span>&nbsp;<span class="ident" id="5963988">rest</span><br>
<span class="lineno"></span><span class="op" id="5963993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5963996">//&nbsp;MatchFile&nbsp;reports&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno">905</span><span class="comment" id="5964077">//&nbsp;matches&nbsp;the&nbsp;context&nbsp;and&nbsp;would&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;Package&nbsp;created&nbsp;by&nbsp;ImportDir</span><br>
<span class="lineno"></span><span class="comment" id="5964156">//&nbsp;of&nbsp;that&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="5964178">//</span><br>
<span class="lineno"></span><span class="comment" id="5964181">//&nbsp;MatchFile&nbsp;considers&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;and&nbsp;may&nbsp;use&nbsp;ctxt.OpenFile&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5964254">//&nbsp;read&nbsp;some&nbsp;or&nbsp;all&nbsp;of&nbsp;the&nbsp;file&#39;s&nbsp;content.</span><br>
<span class="lineno">910</span><span class="keyword" id="5964297">func</span>&nbsp;<span class="op" id="5964302">(</span><span class="ident" id="5964303">ctxt</span>&nbsp;<span class="op" id="5964308">*</span><span class="ident" id="5964309">Context</span><span class="op" id="5964316">)</span>&nbsp;<span class="ident" id="5964318">MatchFile</span><span class="op" id="5964327">(</span><span class="ident" id="5964328">dir</span><span class="op" id="5964331">,</span>&nbsp;<span class="ident" id="5964333">name</span>&nbsp;<span class="builtintype" id="5964338">string</span><span class="op" id="5964344">)</span>&nbsp;<span class="op" id="5964346">(</span><span class="ident" id="5964347">match</span>&nbsp;<span class="builtintype" id="5964353">bool</span><span class="op" id="5964357">,</span>&nbsp;<span class="ident" id="5964359">err</span>&nbsp;<span class="builtintype" id="5964363">error</span><span class="op" id="5964368">)</span>&nbsp;<span class="op" id="5964370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5964373">match</span><span class="op" id="5964378">,</span>&nbsp;<span class="ident" id="5964380">_</span><span class="op" id="5964381">,</span>&nbsp;<span class="ident" id="5964383">_</span><span class="op" id="5964384">,</span>&nbsp;<span class="ident" id="5964386">err</span>&nbsp;<span class="op" id="5964390">=</span>&nbsp;<span class="ident" id="5964392">ctxt</span><span class="op" id="5964396">.</span><span class="ident" id="5964397">matchFile</span><span class="op" id="5964406">(</span><span class="ident" id="5964407">dir</span><span class="op" id="5964410">,</span>&nbsp;<span class="ident" id="5964412">name</span><span class="op" id="5964416">,</span>&nbsp;<span class="builtintype" id="5964418">false</span><span class="op" id="5964423">,</span>&nbsp;<span class="ident" id="5964425">nil</span><span class="op" id="5964428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5964431">return</span><br>
<span class="lineno"></span><span class="op" id="5964438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="comment" id="5964441">//&nbsp;matchFile&nbsp;determines&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="5964525">//&nbsp;should&nbsp;be&nbsp;included&nbsp;in&nbsp;the&nbsp;package&nbsp;being&nbsp;constructed.</span><br>
<span class="lineno"></span><span class="comment" id="5964581">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5964624">//&nbsp;If&nbsp;returnImports&nbsp;is&nbsp;true&nbsp;and&nbsp;name&nbsp;denotes&nbsp;a&nbsp;Go&nbsp;program,&nbsp;matchFile&nbsp;reads</span><br>
<span class="lineno"></span><span class="comment" id="5964699">//&nbsp;until&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;imports&nbsp;(and&nbsp;returns&nbsp;that&nbsp;data)&nbsp;even&nbsp;though&nbsp;it&nbsp;only</span><br>
<span class="lineno">920</span><span class="comment" id="5964775">//&nbsp;considers&nbsp;text&nbsp;until&nbsp;the&nbsp;first&nbsp;non-comment.</span><br>
<span class="lineno"></span><span class="comment" id="5964822">//&nbsp;If&nbsp;allTags&nbsp;is&nbsp;non-nil,&nbsp;matchFile&nbsp;records&nbsp;any&nbsp;encountered&nbsp;build&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="5964892">//&nbsp;by&nbsp;setting&nbsp;allTags[tag]&nbsp;=&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5964927">func</span>&nbsp;<span class="op" id="5964932">(</span><span class="ident" id="5964933">ctxt</span>&nbsp;<span class="op" id="5964938">*</span><span class="ident" id="5964939">Context</span><span class="op" id="5964946">)</span>&nbsp;<span class="ident" id="5964948">matchFile</span><span class="op" id="5964957">(</span><span class="ident" id="5964958">dir</span><span class="op" id="5964961">,</span>&nbsp;<span class="ident" id="5964963">name</span>&nbsp;<span class="builtintype" id="5964968">string</span><span class="op" id="5964974">,</span>&nbsp;<span class="ident" id="5964976">returnImports</span>&nbsp;<span class="builtintype" id="5964990">bool</span><span class="op" id="5964994">,</span>&nbsp;<span class="ident" id="5964996">allTags</span>&nbsp;<span class="keyword" id="5965004">map</span><span class="op" id="5965007">[</span><span class="builtintype" id="5965008">string</span><span class="op" id="5965014">]</span><span class="builtintype" id="5965015">bool</span><span class="op" id="5965019">)</span>&nbsp;<span class="op" id="5965021">(</span><span class="ident" id="5965022">match</span>&nbsp;<span class="builtintype" id="5965028">bool</span><span class="op" id="5965032">,</span>&nbsp;<span class="ident" id="5965034">data</span>&nbsp;<span class="op" id="5965039">[</span><span class="op" id="5965040">]</span><span class="builtintype" id="5965041">byte</span><span class="op" id="5965045">,</span>&nbsp;<span class="ident" id="5965047">filename</span>&nbsp;<span class="builtintype" id="5965056">string</span><span class="op" id="5965062">,</span>&nbsp;<span class="ident" id="5965064">err</span>&nbsp;<span class="builtintype" id="5965068">error</span><span class="op" id="5965073">)</span>&nbsp;<span class="op" id="5965075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965078">if</span>&nbsp;<span class="ident" id="5965081">strings</span><span class="op" id="5965088">.</span><span class="ident" id="5965089">HasPrefix</span><span class="op" id="5965098">(</span><span class="ident" id="5965099">name</span><span class="op" id="5965103">,</span>&nbsp;<span class="string" id="5965105">&#34;_&#34;</span><span class="op" id="5965108">)</span>&nbsp;<span class="op" id="5965110">||</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965115">strings</span><span class="op" id="5965122">.</span><span class="ident" id="5965123">HasPrefix</span><span class="op" id="5965132">(</span><span class="ident" id="5965133">name</span><span class="op" id="5965137">,</span>&nbsp;<span class="string" id="5965139">&#34;.&#34;</span><span class="op" id="5965142">)</span>&nbsp;<span class="op" id="5965144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965148">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965160">i</span>&nbsp;<span class="op" id="5965162">:=</span>&nbsp;<span class="ident" id="5965165">strings</span><span class="op" id="5965172">.</span><span class="ident" id="5965173">LastIndex</span><span class="op" id="5965182">(</span><span class="ident" id="5965183">name</span><span class="op" id="5965187">,</span>&nbsp;<span class="string" id="5965189">&#34;.&#34;</span><span class="op" id="5965192">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965195">if</span>&nbsp;<span class="ident" id="5965198">i</span>&nbsp;<span class="op" id="5965200">&lt;</span>&nbsp;<span class="num" id="5965202">0</span>&nbsp;<span class="op" id="5965204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965208">i</span>&nbsp;<span class="op" id="5965210">=</span>&nbsp;<span class="builtinfunc" id="5965212">len</span><span class="op" id="5965215">(</span><span class="ident" id="5965216">name</span><span class="op" id="5965220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965226">ext</span>&nbsp;<span class="op" id="5965230">:=</span>&nbsp;<span class="ident" id="5965233">name</span><span class="op" id="5965237">[</span><span class="ident" id="5965238">i</span><span class="op" id="5965239">:</span><span class="op" id="5965240">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965244">if</span>&nbsp;<span class="op" id="5965247">!</span><span class="ident" id="5965248">ctxt</span><span class="op" id="5965252">.</span><span class="ident" id="5965253">goodOSArchFile</span><span class="op" id="5965267">(</span><span class="ident" id="5965268">name</span><span class="op" id="5965272">,</span>&nbsp;<span class="ident" id="5965274">allTags</span><span class="op" id="5965281">)</span>&nbsp;<span class="op" id="5965283">&amp;&amp;</span>&nbsp;<span class="op" id="5965286">!</span><span class="ident" id="5965287">ctxt</span><span class="op" id="5965291">.</span><span class="ident" id="5965292">UseAllFiles</span>&nbsp;<span class="op" id="5965304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965308">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965320">switch</span>&nbsp;<span class="ident" id="5965327">ext</span>&nbsp;<span class="op" id="5965331">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965334">case</span>&nbsp;<span class="string" id="5965339">&#34;.go&#34;</span><span class="op" id="5965344">,</span>&nbsp;<span class="string" id="5965346">&#34;.c&#34;</span><span class="op" id="5965350">,</span>&nbsp;<span class="string" id="5965352">&#34;.cc&#34;</span><span class="op" id="5965357">,</span>&nbsp;<span class="string" id="5965359">&#34;.cxx&#34;</span><span class="op" id="5965365">,</span>&nbsp;<span class="string" id="5965367">&#34;.cpp&#34;</span><span class="op" id="5965373">,</span>&nbsp;<span class="string" id="5965375">&#34;.m&#34;</span><span class="op" id="5965379">,</span>&nbsp;<span class="string" id="5965381">&#34;.s&#34;</span><span class="op" id="5965385">,</span>&nbsp;<span class="string" id="5965387">&#34;.h&#34;</span><span class="op" id="5965391">,</span>&nbsp;<span class="string" id="5965393">&#34;.hh&#34;</span><span class="op" id="5965398">,</span>&nbsp;<span class="string" id="5965400">&#34;.hpp&#34;</span><span class="op" id="5965406">,</span>&nbsp;<span class="string" id="5965408">&#34;.hxx&#34;</span><span class="op" id="5965414">,</span>&nbsp;<span class="string" id="5965416">&#34;.S&#34;</span><span class="op" id="5965420">,</span>&nbsp;<span class="string" id="5965422">&#34;.swig&#34;</span><span class="op" id="5965429">,</span>&nbsp;<span class="string" id="5965431">&#34;.swigcxx&#34;</span><span class="op" id="5965441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5965445">//&nbsp;tentatively&nbsp;okay&nbsp;-&nbsp;read&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965486">case</span>&nbsp;<span class="string" id="5965491">&#34;.syso&#34;</span><span class="op" id="5965498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5965502">//&nbsp;binary,&nbsp;no&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965526">match</span>&nbsp;<span class="op" id="5965532">=</span>&nbsp;<span class="builtintype" id="5965534">true</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965541">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965549">default</span><span class="op" id="5965556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5965560">//&nbsp;skip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965570">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965578">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965582">filename</span>&nbsp;<span class="op" id="5965591">=</span>&nbsp;<span class="ident" id="5965593">ctxt</span><span class="op" id="5965597">.</span><span class="ident" id="5965598">joinPath</span><span class="op" id="5965606">(</span><span class="ident" id="5965607">dir</span><span class="op" id="5965610">,</span>&nbsp;<span class="ident" id="5965612">name</span><span class="op" id="5965616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965619">f</span><span class="op" id="5965620">,</span>&nbsp;<span class="ident" id="5965622">err</span>&nbsp;<span class="op" id="5965626">:=</span>&nbsp;<span class="ident" id="5965629">ctxt</span><span class="op" id="5965633">.</span><span class="ident" id="5965634">openFile</span><span class="op" id="5965642">(</span><span class="ident" id="5965643">filename</span><span class="op" id="5965651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965654">if</span>&nbsp;<span class="ident" id="5965657">err</span>&nbsp;<span class="op" id="5965661">!=</span>&nbsp;<span class="ident" id="5965664">nil</span>&nbsp;<span class="op" id="5965668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965672">return</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965684">if</span>&nbsp;<span class="ident" id="5965687">strings</span><span class="op" id="5965694">.</span><span class="ident" id="5965695">HasSuffix</span><span class="op" id="5965704">(</span><span class="ident" id="5965705">filename</span><span class="op" id="5965713">,</span>&nbsp;<span class="string" id="5965715">&#34;.go&#34;</span><span class="op" id="5965720">)</span>&nbsp;<span class="op" id="5965722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965726">data</span><span class="op" id="5965730">,</span>&nbsp;<span class="ident" id="5965732">err</span>&nbsp;<span class="op" id="5965736">=</span>&nbsp;<span class="ident" id="5965738">readImports</span><span class="op" id="5965749">(</span><span class="ident" id="5965750">f</span><span class="op" id="5965751">,</span>&nbsp;<span class="builtintype" id="5965753">false</span><span class="op" id="5965758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965761">}</span>&nbsp;<span class="keyword" id="5965763">else</span>&nbsp;<span class="op" id="5965768">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965772">data</span><span class="op" id="5965776">,</span>&nbsp;<span class="ident" id="5965778">err</span>&nbsp;<span class="op" id="5965782">=</span>&nbsp;<span class="ident" id="5965784">readComments</span><span class="op" id="5965796">(</span><span class="ident" id="5965797">f</span><span class="op" id="5965798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965804">f</span><span class="op" id="5965805">.</span><span class="ident" id="5965806">Close</span><span class="op" id="5965811">(</span><span class="op" id="5965812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965815">if</span>&nbsp;<span class="ident" id="5965818">err</span>&nbsp;<span class="op" id="5965822">!=</span>&nbsp;<span class="ident" id="5965825">nil</span>&nbsp;<span class="op" id="5965829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5965833">err</span>&nbsp;<span class="op" id="5965837">=</span>&nbsp;<span class="ident" id="5965839">fmt</span><span class="op" id="5965842">.</span><span class="ident" id="5965843">Errorf</span><span class="op" id="5965849">(</span><span class="string" id="5965850">&#34;read&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="5965863">,</span>&nbsp;<span class="ident" id="5965865">filename</span><span class="op" id="5965873">,</span>&nbsp;<span class="ident" id="5965875">err</span><span class="op" id="5965878">)</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965882">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5965890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5965894">//&nbsp;Look&nbsp;for&nbsp;+build&nbsp;comments&nbsp;to&nbsp;accept&nbsp;or&nbsp;reject&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5965953">if</span>&nbsp;<span class="op" id="5965956">!</span><span class="ident" id="5965957">ctxt</span><span class="op" id="5965961">.</span><span class="ident" id="5965962">shouldBuild</span><span class="op" id="5965973">(</span><span class="ident" id="5965974">data</span><span class="op" id="5965978">,</span>&nbsp;<span class="ident" id="5965980">allTags</span><span class="op" id="5965987">)</span>&nbsp;<span class="op" id="5965989">&amp;&amp;</span>&nbsp;<span class="op" id="5965992">!</span><span class="ident" id="5965993">ctxt</span><span class="op" id="5965997">.</span><span class="ident" id="5965998">UseAllFiles</span>&nbsp;<span class="op" id="5966010">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5966014">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5966022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5966026">match</span>&nbsp;<span class="op" id="5966032">=</span>&nbsp;<span class="builtintype" id="5966034">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5966040">return</span><br>
<span class="lineno">975</span><span class="op" id="5966047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5966050">func</span>&nbsp;<span class="ident" id="5966055">cleanImports</span><span class="op" id="5966067">(</span><span class="ident" id="5966068">m</span>&nbsp;<span class="keyword" id="5966070">map</span><span class="op" id="5966073">[</span><span class="builtintype" id="5966074">string</span><span class="op" id="5966080">]</span><span class="op" id="5966081">[</span><span class="op" id="5966082">]</span><span class="ident" id="5966083">token</span><span class="op" id="5966088">.</span><span class="ident" id="5966089">Position</span><span class="op" id="5966097">)</span>&nbsp;<span class="op" id="5966099">(</span><span class="op" id="5966100">[</span><span class="op" id="5966101">]</span><span class="builtintype" id="5966102">string</span><span class="op" id="5966108">,</span>&nbsp;<span class="keyword" id="5966110">map</span><span class="op" id="5966113">[</span><span class="builtintype" id="5966114">string</span><span class="op" id="5966120">]</span><span class="op" id="5966121">[</span><span class="op" id="5966122">]</span><span class="ident" id="5966123">token</span><span class="op" id="5966128">.</span><span class="ident" id="5966129">Position</span><span class="op" id="5966137">)</span>&nbsp;<span class="op" id="5966139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5966142">all</span>&nbsp;<span class="op" id="5966146">:=</span>&nbsp;<span class="builtinfunc" id="5966149">make</span><span class="op" id="5966153">(</span><span class="op" id="5966154">[</span><span class="op" id="5966155">]</span><span class="builtintype" id="5966156">string</span><span class="op" id="5966162">,</span>&nbsp;<span class="num" id="5966164">0</span><span class="op" id="5966165">,</span>&nbsp;<span class="builtinfunc" id="5966167">len</span><span class="op" id="5966170">(</span><span class="ident" id="5966171">m</span><span class="op" id="5966172">)</span><span class="op" id="5966173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5966176">for</span>&nbsp;<span class="ident" id="5966180">path</span>&nbsp;<span class="op" id="5966185">:=</span>&nbsp;<span class="keyword" id="5966188">range</span>&nbsp;<span class="ident" id="5966194">m</span>&nbsp;<span class="op" id="5966196">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5966200">all</span>&nbsp;<span class="op" id="5966204">=</span>&nbsp;<span class="builtinfunc" id="5966206">append</span><span class="op" id="5966212">(</span><span class="ident" id="5966213">all</span><span class="op" id="5966216">,</span>&nbsp;<span class="ident" id="5966218">path</span><span class="op" id="5966222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5966225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5966228">sort</span><span class="op" id="5966232">.</span><span class="ident" id="5966233">Strings</span><span class="op" id="5966240">(</span><span class="ident" id="5966241">all</span><span class="op" id="5966244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5966247">return</span>&nbsp;<span class="ident" id="5966254">all</span><span class="op" id="5966257">,</span>&nbsp;<span class="ident" id="5966259">m</span><br>
<span class="lineno"></span><span class="op" id="5966261">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="5966264">//&nbsp;Import&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.Import.</span><br>
<span class="lineno"></span><span class="keyword" id="5966307">func</span>&nbsp;<span class="ident" id="5966312">Import</span><span class="op" id="5966318">(</span><span class="ident" id="5966319">path</span><span class="op" id="5966323">,</span>&nbsp;<span class="ident" id="5966325">srcDir</span>&nbsp;<span class="builtintype" id="5966332">string</span><span class="op" id="5966338">,</span>&nbsp;<span class="ident" id="5966340">mode</span>&nbsp;<span class="ident" id="5966345">ImportMode</span><span class="op" id="5966355">)</span>&nbsp;<span class="op" id="5966357">(</span><span class="op" id="5966358">*</span><span class="ident" id="5966359">Package</span><span class="op" id="5966366">,</span>&nbsp;<span class="builtintype" id="5966368">error</span><span class="op" id="5966373">)</span>&nbsp;<span class="op" id="5966375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5966378">return</span>&nbsp;<span class="ident" id="5966385">Default</span><span class="op" id="5966392">.</span><span class="ident" id="5966393">Import</span><span class="op" id="5966399">(</span><span class="ident" id="5966400">path</span><span class="op" id="5966404">,</span>&nbsp;<span class="ident" id="5966406">srcDir</span><span class="op" id="5966412">,</span>&nbsp;<span class="ident" id="5966414">mode</span><span class="op" id="5966418">)</span><br>
<span class="lineno"></span><span class="op" id="5966420">}</span><br>
<span class="lineno">990</span><br>
<span class="lineno"></span><span class="comment" id="5966423">//&nbsp;ImportDir&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.ImportDir.</span><br>
<span class="lineno"></span><span class="keyword" id="5966472">func</span>&nbsp;<span class="ident" id="5966477">ImportDir</span><span class="op" id="5966486">(</span><span class="ident" id="5966487">dir</span>&nbsp;<span class="builtintype" id="5966491">string</span><span class="op" id="5966497">,</span>&nbsp;<span class="ident" id="5966499">mode</span>&nbsp;<span class="ident" id="5966504">ImportMode</span><span class="op" id="5966514">)</span>&nbsp;<span class="op" id="5966516">(</span><span class="op" id="5966517">*</span><span class="ident" id="5966518">Package</span><span class="op" id="5966525">,</span>&nbsp;<span class="builtintype" id="5966527">error</span><span class="op" id="5966532">)</span>&nbsp;<span class="op" id="5966534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5966537">return</span>&nbsp;<span class="ident" id="5966544">Default</span><span class="op" id="5966551">.</span><span class="ident" id="5966552">ImportDir</span><span class="op" id="5966561">(</span><span class="ident" id="5966562">dir</span><span class="op" id="5966565">,</span>&nbsp;<span class="ident" id="5966567">mode</span><span class="op" id="5966571">)</span><br>
<span class="lineno"></span><span class="op" id="5966573">}</span><br>
<span class="lineno">995</span><br>
<span class="lineno"></span><span class="keyword" id="5966576">var</span>&nbsp;<span class="ident" id="5966580">slashslash</span>&nbsp;<span class="op" id="5966591">=</span>&nbsp;<span class="op" id="5966593">[</span><span class="op" id="5966594">]</span><span class="builtintype" id="5966595">byte</span><span class="op" id="5966599">(</span><span class="string" id="5966600">&#34;//&#34;</span><span class="op" id="5966604">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5966607">//&nbsp;shouldBuild&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;use&nbsp;this&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="5966667">//&nbsp;The&nbsp;rule&nbsp;is&nbsp;that&nbsp;in&nbsp;the&nbsp;file&#39;s&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments</span><br>
<span class="lineno">1000</span><span class="comment" id="5966728">//&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="5966787">//&nbsp;(to&nbsp;avoid&nbsp;including&nbsp;a&nbsp;Go&nbsp;package&nbsp;clause&nbsp;doc&nbsp;comment),</span><br>
<span class="lineno"></span><span class="comment" id="5966844">//&nbsp;lines&nbsp;beginning&nbsp;with&nbsp;&#39;//&nbsp;+build&#39;&nbsp;are&nbsp;taken&nbsp;as&nbsp;build&nbsp;directives.</span><br>
<span class="lineno"></span><span class="comment" id="5966911">//</span><br>
<span class="lineno"></span><span class="comment" id="5966914">//&nbsp;The&nbsp;file&nbsp;is&nbsp;accepted&nbsp;only&nbsp;if&nbsp;each&nbsp;such&nbsp;line&nbsp;lists&nbsp;something</span><br>
<span class="lineno">1005</span><span class="comment" id="5966977">//&nbsp;matching&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="5967013">//</span><br>
<span class="lineno"></span><span class="comment" id="5967016">//&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;+build&nbsp;windows&nbsp;linux</span><br>
<span class="lineno"></span><span class="comment" id="5967043">//</span><br>
<span class="lineno"></span><span class="comment" id="5967046">//&nbsp;marks&nbsp;the&nbsp;file&nbsp;as&nbsp;applicable&nbsp;only&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Linux.</span><br>
<span class="lineno">1010</span><span class="comment" id="5967105">//</span><br>
<span class="lineno"></span><span class="keyword" id="5967108">func</span>&nbsp;<span class="op" id="5967113">(</span><span class="ident" id="5967114">ctxt</span>&nbsp;<span class="op" id="5967119">*</span><span class="ident" id="5967120">Context</span><span class="op" id="5967127">)</span>&nbsp;<span class="ident" id="5967129">shouldBuild</span><span class="op" id="5967140">(</span><span class="ident" id="5967141">content</span>&nbsp;<span class="op" id="5967149">[</span><span class="op" id="5967150">]</span><span class="builtintype" id="5967151">byte</span><span class="op" id="5967155">,</span>&nbsp;<span class="ident" id="5967157">allTags</span>&nbsp;<span class="keyword" id="5967165">map</span><span class="op" id="5967168">[</span><span class="builtintype" id="5967169">string</span><span class="op" id="5967175">]</span><span class="builtintype" id="5967176">bool</span><span class="op" id="5967180">)</span>&nbsp;<span class="builtintype" id="5967182">bool</span>&nbsp;<span class="op" id="5967187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5967190">//&nbsp;Pass&nbsp;1.&nbsp;Identify&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments&nbsp;and&nbsp;blank&nbsp;lines,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5967255">//&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967299">end</span>&nbsp;<span class="op" id="5967303">:=</span>&nbsp;<span class="num" id="5967306">0</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967309">p</span>&nbsp;<span class="op" id="5967311">:=</span>&nbsp;<span class="ident" id="5967314">content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967323">for</span>&nbsp;<span class="builtinfunc" id="5967327">len</span><span class="op" id="5967330">(</span><span class="ident" id="5967331">p</span><span class="op" id="5967332">)</span>&nbsp;<span class="op" id="5967334">&gt;</span>&nbsp;<span class="num" id="5967336">0</span>&nbsp;<span class="op" id="5967338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967342">line</span>&nbsp;<span class="op" id="5967347">:=</span>&nbsp;<span class="ident" id="5967350">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967354">if</span>&nbsp;<span class="ident" id="5967357">i</span>&nbsp;<span class="op" id="5967359">:=</span>&nbsp;<span class="ident" id="5967362">bytes</span><span class="op" id="5967367">.</span><span class="ident" id="5967368">IndexByte</span><span class="op" id="5967377">(</span><span class="ident" id="5967378">line</span><span class="op" id="5967382">,</span>&nbsp;<span class="string" id="5967384">&#39;\n&#39;</span><span class="op" id="5967388">)</span><span class="op" id="5967389">;</span>&nbsp;<span class="ident" id="5967391">i</span>&nbsp;<span class="op" id="5967393">&gt;=</span>&nbsp;<span class="num" id="5967396">0</span>&nbsp;<span class="op" id="5967398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967403">line</span><span class="op" id="5967407">,</span>&nbsp;<span class="ident" id="5967409">p</span>&nbsp;<span class="op" id="5967411">=</span>&nbsp;<span class="ident" id="5967413">line</span><span class="op" id="5967417">[</span><span class="op" id="5967418">:</span><span class="ident" id="5967419">i</span><span class="op" id="5967420">]</span><span class="op" id="5967421">,</span>&nbsp;<span class="ident" id="5967423">p</span><span class="op" id="5967424">[</span><span class="ident" id="5967425">i</span><span class="op" id="5967426">+</span><span class="num" id="5967427">1</span><span class="op" id="5967428">:</span><span class="op" id="5967429">]</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967433">}</span>&nbsp;<span class="keyword" id="5967435">else</span>&nbsp;<span class="op" id="5967440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967445">p</span>&nbsp;<span class="op" id="5967447">=</span>&nbsp;<span class="ident" id="5967449">p</span><span class="op" id="5967450">[</span><span class="builtinfunc" id="5967451">len</span><span class="op" id="5967454">(</span><span class="ident" id="5967455">p</span><span class="op" id="5967456">)</span><span class="op" id="5967457">:</span><span class="op" id="5967458">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967466">line</span>&nbsp;<span class="op" id="5967471">=</span>&nbsp;<span class="ident" id="5967473">bytes</span><span class="op" id="5967478">.</span><span class="ident" id="5967479">TrimSpace</span><span class="op" id="5967488">(</span><span class="ident" id="5967489">line</span><span class="op" id="5967493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967497">if</span>&nbsp;<span class="builtinfunc" id="5967500">len</span><span class="op" id="5967503">(</span><span class="ident" id="5967504">line</span><span class="op" id="5967508">)</span>&nbsp;<span class="op" id="5967510">==</span>&nbsp;<span class="num" id="5967513">0</span>&nbsp;<span class="op" id="5967515">{</span>&nbsp;<span class="comment" id="5967517">//&nbsp;Blank&nbsp;line</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967534">end</span>&nbsp;<span class="op" id="5967538">=</span>&nbsp;<span class="builtinfunc" id="5967540">len</span><span class="op" id="5967543">(</span><span class="ident" id="5967544">content</span><span class="op" id="5967551">)</span>&nbsp;<span class="op" id="5967553">-</span>&nbsp;<span class="builtinfunc" id="5967555">len</span><span class="op" id="5967558">(</span><span class="ident" id="5967559">p</span><span class="op" id="5967560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967565">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967580">if</span>&nbsp;<span class="op" id="5967583">!</span><span class="ident" id="5967584">bytes</span><span class="op" id="5967589">.</span><span class="ident" id="5967590">HasPrefix</span><span class="op" id="5967599">(</span><span class="ident" id="5967600">line</span><span class="op" id="5967604">,</span>&nbsp;<span class="ident" id="5967606">slashslash</span><span class="op" id="5967616">)</span>&nbsp;<span class="op" id="5967618">{</span>&nbsp;<span class="comment" id="5967620">//&nbsp;Not&nbsp;comment&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967643">break</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967657">content</span>&nbsp;<span class="op" id="5967665">=</span>&nbsp;<span class="ident" id="5967667">content</span><span class="op" id="5967674">[</span><span class="op" id="5967675">:</span><span class="ident" id="5967676">end</span><span class="op" id="5967679">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5967683">//&nbsp;Pass&nbsp;2.&nbsp;&nbsp;Process&nbsp;each&nbsp;line&nbsp;in&nbsp;the&nbsp;run.</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967726">p</span>&nbsp;<span class="op" id="5967728">=</span>&nbsp;<span class="ident" id="5967730">content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967739">allok</span>&nbsp;<span class="op" id="5967745">:=</span>&nbsp;<span class="builtintype" id="5967748">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967754">for</span>&nbsp;<span class="builtinfunc" id="5967758">len</span><span class="op" id="5967761">(</span><span class="ident" id="5967762">p</span><span class="op" id="5967763">)</span>&nbsp;<span class="op" id="5967765">&gt;</span>&nbsp;<span class="num" id="5967767">0</span>&nbsp;<span class="op" id="5967769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967773">line</span>&nbsp;<span class="op" id="5967778">:=</span>&nbsp;<span class="ident" id="5967781">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967785">if</span>&nbsp;<span class="ident" id="5967788">i</span>&nbsp;<span class="op" id="5967790">:=</span>&nbsp;<span class="ident" id="5967793">bytes</span><span class="op" id="5967798">.</span><span class="ident" id="5967799">IndexByte</span><span class="op" id="5967808">(</span><span class="ident" id="5967809">line</span><span class="op" id="5967813">,</span>&nbsp;<span class="string" id="5967815">&#39;\n&#39;</span><span class="op" id="5967819">)</span><span class="op" id="5967820">;</span>&nbsp;<span class="ident" id="5967822">i</span>&nbsp;<span class="op" id="5967824">&gt;=</span>&nbsp;<span class="num" id="5967827">0</span>&nbsp;<span class="op" id="5967829">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967834">line</span><span class="op" id="5967838">,</span>&nbsp;<span class="ident" id="5967840">p</span>&nbsp;<span class="op" id="5967842">=</span>&nbsp;<span class="ident" id="5967844">line</span><span class="op" id="5967848">[</span><span class="op" id="5967849">:</span><span class="ident" id="5967850">i</span><span class="op" id="5967851">]</span><span class="op" id="5967852">,</span>&nbsp;<span class="ident" id="5967854">p</span><span class="op" id="5967855">[</span><span class="ident" id="5967856">i</span><span class="op" id="5967857">+</span><span class="num" id="5967858">1</span><span class="op" id="5967859">:</span><span class="op" id="5967860">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967864">}</span>&nbsp;<span class="keyword" id="5967866">else</span>&nbsp;<span class="op" id="5967871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967876">p</span>&nbsp;<span class="op" id="5967878">=</span>&nbsp;<span class="ident" id="5967880">p</span><span class="op" id="5967881">[</span><span class="builtinfunc" id="5967882">len</span><span class="op" id="5967885">(</span><span class="ident" id="5967886">p</span><span class="op" id="5967887">)</span><span class="op" id="5967888">:</span><span class="op" id="5967889">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5967893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967897">line</span>&nbsp;<span class="op" id="5967902">=</span>&nbsp;<span class="ident" id="5967904">bytes</span><span class="op" id="5967909">.</span><span class="ident" id="5967910">TrimSpace</span><span class="op" id="5967919">(</span><span class="ident" id="5967920">line</span><span class="op" id="5967924">)</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5967928">if</span>&nbsp;<span class="ident" id="5967931">bytes</span><span class="op" id="5967936">.</span><span class="ident" id="5967937">HasPrefix</span><span class="op" id="5967946">(</span><span class="ident" id="5967947">line</span><span class="op" id="5967951">,</span>&nbsp;<span class="ident" id="5967953">slashslash</span><span class="op" id="5967963">)</span>&nbsp;<span class="op" id="5967965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5967970">line</span>&nbsp;<span class="op" id="5967975">=</span>&nbsp;<span class="ident" id="5967977">bytes</span><span class="op" id="5967982">.</span><span class="ident" id="5967983">TrimSpace</span><span class="op" id="5967992">(</span><span class="ident" id="5967993">line</span><span class="op" id="5967997">[</span><span class="builtinfunc" id="5967998">len</span><span class="op" id="5968001">(</span><span class="ident" id="5968002">slashslash</span><span class="op" id="5968012">)</span><span class="op" id="5968013">:</span><span class="op" id="5968014">]</span><span class="op" id="5968015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968020">if</span>&nbsp;<span class="builtinfunc" id="5968023">len</span><span class="op" id="5968026">(</span><span class="ident" id="5968027">line</span><span class="op" id="5968031">)</span>&nbsp;<span class="op" id="5968033">&gt;</span>&nbsp;<span class="num" id="5968035">0</span>&nbsp;<span class="op" id="5968037">&amp;&amp;</span>&nbsp;<span class="ident" id="5968040">line</span><span class="op" id="5968044">[</span><span class="num" id="5968045">0</span><span class="op" id="5968046">]</span>&nbsp;<span class="op" id="5968048">==</span>&nbsp;<span class="string" id="5968051">&#39;+&#39;</span>&nbsp;<span class="op" id="5968055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5968061">//&nbsp;Looks&nbsp;like&nbsp;a&nbsp;comment&nbsp;+line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968096">f</span>&nbsp;<span class="op" id="5968098">:=</span>&nbsp;<span class="ident" id="5968101">strings</span><span class="op" id="5968108">.</span><span class="ident" id="5968109">Fields</span><span class="op" id="5968115">(</span><span class="builtintype" id="5968116">string</span><span class="op" id="5968122">(</span><span class="ident" id="5968123">line</span><span class="op" id="5968127">)</span><span class="op" id="5968128">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968134">if</span>&nbsp;<span class="ident" id="5968137">f</span><span class="op" id="5968138">[</span><span class="num" id="5968139">0</span><span class="op" id="5968140">]</span>&nbsp;<span class="op" id="5968142">==</span>&nbsp;<span class="string" id="5968145">&#34;+build&#34;</span>&nbsp;<span class="op" id="5968154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968161">ok</span>&nbsp;<span class="op" id="5968164">:=</span>&nbsp;<span class="builtintype" id="5968167">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968178">for</span>&nbsp;<span class="ident" id="5968182">_</span><span class="op" id="5968183">,</span>&nbsp;<span class="ident" id="5968185">tok</span>&nbsp;<span class="op" id="5968189">:=</span>&nbsp;<span class="keyword" id="5968192">range</span>&nbsp;<span class="ident" id="5968198">f</span><span class="op" id="5968199">[</span><span class="num" id="5968200">1</span><span class="op" id="5968201">:</span><span class="op" id="5968202">]</span>&nbsp;<span class="op" id="5968204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968212">if</span>&nbsp;<span class="ident" id="5968215">ctxt</span><span class="op" id="5968219">.</span><span class="ident" id="5968220">match</span><span class="op" id="5968225">(</span><span class="ident" id="5968226">tok</span><span class="op" id="5968229">,</span>&nbsp;<span class="ident" id="5968231">allTags</span><span class="op" id="5968238">)</span>&nbsp;<span class="op" id="5968240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968249">ok</span>&nbsp;<span class="op" id="5968252">=</span>&nbsp;<span class="builtintype" id="5968254">true</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968279">if</span>&nbsp;<span class="op" id="5968282">!</span><span class="ident" id="5968283">ok</span>&nbsp;<span class="op" id="5968286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968294">allok</span>&nbsp;<span class="op" id="5968300">=</span>&nbsp;<span class="builtintype" id="5968302">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968313">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5968331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968335">return</span>&nbsp;<span class="ident" id="5968342">allok</span><br>
<span class="lineno"></span><span class="op" id="5968348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5968351">//&nbsp;saveCgo&nbsp;saves&nbsp;the&nbsp;information&nbsp;from&nbsp;the&nbsp;#cgo&nbsp;lines&nbsp;in&nbsp;the&nbsp;import&nbsp;&#34;C&#34;&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5968431">//&nbsp;These&nbsp;lines&nbsp;set&nbsp;CFLAGS,&nbsp;CPPFLAGS,&nbsp;CXXFLAGS&nbsp;and&nbsp;LDFLAGS&nbsp;and&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno">1070</span><span class="comment" id="5968515">//&nbsp;that&nbsp;affect&nbsp;the&nbsp;way&nbsp;cgo&#39;s&nbsp;C&nbsp;code&nbsp;is&nbsp;built.</span><br>
<span class="lineno"></span><span class="comment" id="5968561">//</span><br>
<span class="lineno"></span><span class="comment" id="5968564">//&nbsp;TODO(rsc):&nbsp;This&nbsp;duplicates&nbsp;code&nbsp;in&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="comment" id="5968607">//&nbsp;Once&nbsp;the&nbsp;dust&nbsp;settles,&nbsp;remove&nbsp;this&nbsp;code&nbsp;from&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="keyword" id="5968660">func</span>&nbsp;<span class="op" id="5968665">(</span><span class="ident" id="5968666">ctxt</span>&nbsp;<span class="op" id="5968671">*</span><span class="ident" id="5968672">Context</span><span class="op" id="5968679">)</span>&nbsp;<span class="ident" id="5968681">saveCgo</span><span class="op" id="5968688">(</span><span class="ident" id="5968689">filename</span>&nbsp;<span class="builtintype" id="5968698">string</span><span class="op" id="5968704">,</span>&nbsp;<span class="ident" id="5968706">di</span>&nbsp;<span class="op" id="5968709">*</span><span class="ident" id="5968710">Package</span><span class="op" id="5968717">,</span>&nbsp;<span class="ident" id="5968719">cg</span>&nbsp;<span class="op" id="5968722">*</span><span class="ident" id="5968723">ast</span><span class="op" id="5968726">.</span><span class="ident" id="5968727">CommentGroup</span><span class="op" id="5968739">)</span>&nbsp;<span class="builtintype" id="5968741">error</span>&nbsp;<span class="op" id="5968747">{</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968750">text</span>&nbsp;<span class="op" id="5968755">:=</span>&nbsp;<span class="ident" id="5968758">cg</span><span class="op" id="5968760">.</span><span class="ident" id="5968761">Text</span><span class="op" id="5968765">(</span><span class="op" id="5968766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968769">for</span>&nbsp;<span class="ident" id="5968773">_</span><span class="op" id="5968774">,</span>&nbsp;<span class="ident" id="5968776">line</span>&nbsp;<span class="op" id="5968781">:=</span>&nbsp;<span class="keyword" id="5968784">range</span>&nbsp;<span class="ident" id="5968790">strings</span><span class="op" id="5968797">.</span><span class="ident" id="5968798">Split</span><span class="op" id="5968803">(</span><span class="ident" id="5968804">text</span><span class="op" id="5968808">,</span>&nbsp;<span class="string" id="5968810">&#34;\n&#34;</span><span class="op" id="5968814">)</span>&nbsp;<span class="op" id="5968816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968820">orig</span>&nbsp;<span class="op" id="5968825">:=</span>&nbsp;<span class="ident" id="5968828">line</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5968836">//&nbsp;Line&nbsp;is</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5968849">//&nbsp;&nbsp;&nbsp;&nbsp;#cgo&nbsp;[GOOS/GOARCH...]&nbsp;LDFLAGS:&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5968891">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5968896">line</span>&nbsp;<span class="op" id="5968901">=</span>&nbsp;<span class="ident" id="5968903">strings</span><span class="op" id="5968910">.</span><span class="ident" id="5968911">TrimSpace</span><span class="op" id="5968920">(</span><span class="ident" id="5968921">line</span><span class="op" id="5968925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5968929">if</span>&nbsp;<span class="builtinfunc" id="5968932">len</span><span class="op" id="5968935">(</span><span class="ident" id="5968936">line</span><span class="op" id="5968940">)</span>&nbsp;<span class="op" id="5968942">&lt;</span>&nbsp;<span class="num" id="5968944">5</span>&nbsp;<span class="op" id="5968946">||</span>&nbsp;<span class="ident" id="5968949">line</span><span class="op" id="5968953">[</span><span class="op" id="5968954">:</span><span class="num" id="5968955">4</span><span class="op" id="5968956">]</span>&nbsp;<span class="op" id="5968958">!=</span>&nbsp;<span class="string" id="5968961">&#34;#cgo&#34;</span>&nbsp;<span class="op" id="5968968">||</span>&nbsp;<span class="op" id="5968971">(</span><span class="ident" id="5968972">line</span><span class="op" id="5968976">[</span><span class="num" id="5968977">4</span><span class="op" id="5968978">]</span>&nbsp;<span class="op" id="5968980">!=</span>&nbsp;<span class="string" id="5968983">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5968987">&amp;&amp;</span>&nbsp;<span class="ident" id="5968990">line</span><span class="op" id="5968994">[</span><span class="num" id="5968995">4</span><span class="op" id="5968996">]</span>&nbsp;<span class="op" id="5968998">!=</span>&nbsp;<span class="string" id="5969001">&#39;\t&#39;</span><span class="op" id="5969005">)</span>&nbsp;<span class="op" id="5969007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969012">continue</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5969028">//&nbsp;Split&nbsp;at&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969049">line</span>&nbsp;<span class="op" id="5969054">=</span>&nbsp;<span class="ident" id="5969056">strings</span><span class="op" id="5969063">.</span><span class="ident" id="5969064">TrimSpace</span><span class="op" id="5969073">(</span><span class="ident" id="5969074">line</span><span class="op" id="5969078">[</span><span class="num" id="5969079">4</span><span class="op" id="5969080">:</span><span class="op" id="5969081">]</span><span class="op" id="5969082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969086">i</span>&nbsp;<span class="op" id="5969088">:=</span>&nbsp;<span class="ident" id="5969091">strings</span><span class="op" id="5969098">.</span><span class="ident" id="5969099">Index</span><span class="op" id="5969104">(</span><span class="ident" id="5969105">line</span><span class="op" id="5969109">,</span>&nbsp;<span class="string" id="5969111">&#34;:&#34;</span><span class="op" id="5969114">)</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969118">if</span>&nbsp;<span class="ident" id="5969121">i</span>&nbsp;<span class="op" id="5969123">&lt;</span>&nbsp;<span class="num" id="5969125">0</span>&nbsp;<span class="op" id="5969127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969132">return</span>&nbsp;<span class="ident" id="5969139">fmt</span><span class="op" id="5969142">.</span><span class="ident" id="5969143">Errorf</span><span class="op" id="5969149">(</span><span class="string" id="5969150">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5969177">,</span>&nbsp;<span class="ident" id="5969179">filename</span><span class="op" id="5969187">,</span>&nbsp;<span class="ident" id="5969189">orig</span><span class="op" id="5969193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969201">line</span><span class="op" id="5969205">,</span>&nbsp;<span class="ident" id="5969207">argstr</span>&nbsp;<span class="op" id="5969214">:=</span>&nbsp;<span class="ident" id="5969217">line</span><span class="op" id="5969221">[</span><span class="op" id="5969222">:</span><span class="ident" id="5969223">i</span><span class="op" id="5969224">]</span><span class="op" id="5969225">,</span>&nbsp;<span class="ident" id="5969227">line</span><span class="op" id="5969231">[</span><span class="ident" id="5969232">i</span><span class="op" id="5969233">+</span><span class="num" id="5969234">1</span><span class="op" id="5969235">:</span><span class="op" id="5969236">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5969241">//&nbsp;Parse&nbsp;GOOS/GOARCH&nbsp;stuff.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969271">f</span>&nbsp;<span class="op" id="5969273">:=</span>&nbsp;<span class="ident" id="5969276">strings</span><span class="op" id="5969283">.</span><span class="ident" id="5969284">Fields</span><span class="op" id="5969290">(</span><span class="ident" id="5969291">line</span><span class="op" id="5969295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969299">if</span>&nbsp;<span class="builtinfunc" id="5969302">len</span><span class="op" id="5969305">(</span><span class="ident" id="5969306">f</span><span class="op" id="5969307">)</span>&nbsp;<span class="op" id="5969309">&lt;</span>&nbsp;<span class="num" id="5969311">1</span>&nbsp;<span class="op" id="5969313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969318">return</span>&nbsp;<span class="ident" id="5969325">fmt</span><span class="op" id="5969328">.</span><span class="ident" id="5969329">Errorf</span><span class="op" id="5969335">(</span><span class="string" id="5969336">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5969363">,</span>&nbsp;<span class="ident" id="5969365">filename</span><span class="op" id="5969373">,</span>&nbsp;<span class="ident" id="5969375">orig</span><span class="op" id="5969379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969383">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969388">cond</span><span class="op" id="5969392">,</span>&nbsp;<span class="ident" id="5969394">verb</span>&nbsp;<span class="op" id="5969399">:=</span>&nbsp;<span class="ident" id="5969402">f</span><span class="op" id="5969403">[</span><span class="op" id="5969404">:</span><span class="builtinfunc" id="5969405">len</span><span class="op" id="5969408">(</span><span class="ident" id="5969409">f</span><span class="op" id="5969410">)</span><span class="op" id="5969411">-</span><span class="num" id="5969412">1</span><span class="op" id="5969413">]</span><span class="op" id="5969414">,</span>&nbsp;<span class="ident" id="5969416">f</span><span class="op" id="5969417">[</span><span class="builtinfunc" id="5969418">len</span><span class="op" id="5969421">(</span><span class="ident" id="5969422">f</span><span class="op" id="5969423">)</span><span class="op" id="5969424">-</span><span class="num" id="5969425">1</span><span class="op" id="5969426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969430">if</span>&nbsp;<span class="builtinfunc" id="5969433">len</span><span class="op" id="5969436">(</span><span class="ident" id="5969437">cond</span><span class="op" id="5969441">)</span>&nbsp;<span class="op" id="5969443">&gt;</span>&nbsp;<span class="num" id="5969445">0</span>&nbsp;<span class="op" id="5969447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969452">ok</span>&nbsp;<span class="op" id="5969455">:=</span>&nbsp;<span class="builtintype" id="5969458">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969467">for</span>&nbsp;<span class="ident" id="5969471">_</span><span class="op" id="5969472">,</span>&nbsp;<span class="ident" id="5969474">c</span>&nbsp;<span class="op" id="5969476">:=</span>&nbsp;<span class="keyword" id="5969479">range</span>&nbsp;<span class="ident" id="5969485">cond</span>&nbsp;<span class="op" id="5969490">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969496">if</span>&nbsp;<span class="ident" id="5969499">ctxt</span><span class="op" id="5969503">.</span><span class="ident" id="5969504">match</span><span class="op" id="5969509">(</span><span class="ident" id="5969510">c</span><span class="op" id="5969511">,</span>&nbsp;<span class="ident" id="5969513">nil</span><span class="op" id="5969516">)</span>&nbsp;<span class="op" id="5969518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969525">ok</span>&nbsp;<span class="op" id="5969528">=</span>&nbsp;<span class="builtintype" id="5969530">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969540">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969555">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969560">if</span>&nbsp;<span class="op" id="5969563">!</span><span class="ident" id="5969564">ok</span>&nbsp;<span class="op" id="5969567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969573">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969594">args</span><span class="op" id="5969598">,</span>&nbsp;<span class="ident" id="5969600">err</span>&nbsp;<span class="op" id="5969604">:=</span>&nbsp;<span class="ident" id="5969607">splitQuoted</span><span class="op" id="5969618">(</span><span class="ident" id="5969619">argstr</span><span class="op" id="5969625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969629">if</span>&nbsp;<span class="ident" id="5969632">err</span>&nbsp;<span class="op" id="5969636">!=</span>&nbsp;<span class="ident" id="5969639">nil</span>&nbsp;<span class="op" id="5969643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969648">return</span>&nbsp;<span class="ident" id="5969655">fmt</span><span class="op" id="5969658">.</span><span class="ident" id="5969659">Errorf</span><span class="op" id="5969665">(</span><span class="string" id="5969666">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5969693">,</span>&nbsp;<span class="ident" id="5969695">filename</span><span class="op" id="5969703">,</span>&nbsp;<span class="ident" id="5969705">orig</span><span class="op" id="5969709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969717">for</span>&nbsp;<span class="ident" id="5969721">_</span><span class="op" id="5969722">,</span>&nbsp;<span class="ident" id="5969724">arg</span>&nbsp;<span class="op" id="5969728">:=</span>&nbsp;<span class="keyword" id="5969731">range</span>&nbsp;<span class="ident" id="5969737">args</span>&nbsp;<span class="op" id="5969742">{</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969747">if</span>&nbsp;<span class="op" id="5969750">!</span><span class="ident" id="5969751">safeCgoName</span><span class="op" id="5969762">(</span><span class="ident" id="5969763">arg</span><span class="op" id="5969766">)</span>&nbsp;<span class="op" id="5969768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969774">return</span>&nbsp;<span class="ident" id="5969781">fmt</span><span class="op" id="5969784">.</span><span class="ident" id="5969785">Errorf</span><span class="op" id="5969791">(</span><span class="string" id="5969792">&#34;%s:&nbsp;malformed&nbsp;#cgo&nbsp;argument:&nbsp;%s&#34;</span><span class="op" id="5969825">,</span>&nbsp;<span class="ident" id="5969827">filename</span><span class="op" id="5969835">,</span>&nbsp;<span class="ident" id="5969837">arg</span><span class="op" id="5969840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5969849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969854">switch</span>&nbsp;<span class="ident" id="5969861">verb</span>&nbsp;<span class="op" id="5969866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969870">case</span>&nbsp;<span class="string" id="5969875">&#34;CFLAGS&#34;</span><span class="op" id="5969883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969888">di</span><span class="op" id="5969890">.</span><span class="ident" id="5969891">CgoCFLAGS</span>&nbsp;<span class="op" id="5969901">=</span>&nbsp;<span class="builtinfunc" id="5969903">append</span><span class="op" id="5969909">(</span><span class="ident" id="5969910">di</span><span class="op" id="5969912">.</span><span class="ident" id="5969913">CgoCFLAGS</span><span class="op" id="5969922">,</span>&nbsp;<span class="ident" id="5969924">args</span><span class="op" id="5969928">...</span><span class="op" id="5969931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5969935">case</span>&nbsp;<span class="string" id="5969940">&#34;CPPFLAGS&#34;</span><span class="op" id="5969950">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5969955">di</span><span class="op" id="5969957">.</span><span class="ident" id="5969958">CgoCPPFLAGS</span>&nbsp;<span class="op" id="5969970">=</span>&nbsp;<span class="builtinfunc" id="5969972">append</span><span class="op" id="5969978">(</span><span class="ident" id="5969979">di</span><span class="op" id="5969981">.</span><span class="ident" id="5969982">CgoCPPFLAGS</span><span class="op" id="5969993">,</span>&nbsp;<span class="ident" id="5969995">args</span><span class="op" id="5969999">...</span><span class="op" id="5970002">)</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970006">case</span>&nbsp;<span class="string" id="5970011">&#34;CXXFLAGS&#34;</span><span class="op" id="5970021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5970026">di</span><span class="op" id="5970028">.</span><span class="ident" id="5970029">CgoCXXFLAGS</span>&nbsp;<span class="op" id="5970041">=</span>&nbsp;<span class="builtinfunc" id="5970043">append</span><span class="op" id="5970049">(</span><span class="ident" id="5970050">di</span><span class="op" id="5970052">.</span><span class="ident" id="5970053">CgoCXXFLAGS</span><span class="op" id="5970064">,</span>&nbsp;<span class="ident" id="5970066">args</span><span class="op" id="5970070">...</span><span class="op" id="5970073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970077">case</span>&nbsp;<span class="string" id="5970082">&#34;LDFLAGS&#34;</span><span class="op" id="5970091">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5970096">di</span><span class="op" id="5970098">.</span><span class="ident" id="5970099">CgoLDFLAGS</span>&nbsp;<span class="op" id="5970110">=</span>&nbsp;<span class="builtinfunc" id="5970112">append</span><span class="op" id="5970118">(</span><span class="ident" id="5970119">di</span><span class="op" id="5970121">.</span><span class="ident" id="5970122">CgoLDFLAGS</span><span class="op" id="5970132">,</span>&nbsp;<span class="ident" id="5970134">args</span><span class="op" id="5970138">...</span><span class="op" id="5970141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970145">case</span>&nbsp;<span class="string" id="5970150">&#34;pkg-config&#34;</span><span class="op" id="5970162">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5970167">di</span><span class="op" id="5970169">.</span><span class="ident" id="5970170">CgoPkgConfig</span>&nbsp;<span class="op" id="5970183">=</span>&nbsp;<span class="builtinfunc" id="5970185">append</span><span class="op" id="5970191">(</span><span class="ident" id="5970192">di</span><span class="op" id="5970194">.</span><span class="ident" id="5970195">CgoPkgConfig</span><span class="op" id="5970207">,</span>&nbsp;<span class="ident" id="5970209">args</span><span class="op" id="5970213">...</span><span class="op" id="5970216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970220">default</span><span class="op" id="5970227">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970232">return</span>&nbsp;<span class="ident" id="5970239">fmt</span><span class="op" id="5970242">.</span><span class="ident" id="5970243">Errorf</span><span class="op" id="5970249">(</span><span class="string" id="5970250">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;verb:&nbsp;%s&#34;</span><span class="op" id="5970277">,</span>&nbsp;<span class="ident" id="5970279">filename</span><span class="op" id="5970287">,</span>&nbsp;<span class="ident" id="5970289">orig</span><span class="op" id="5970293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5970297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5970300">}</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970303">return</span>&nbsp;<span class="ident" id="5970310">nil</span><br>
<span class="lineno"></span><span class="op" id="5970314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5970317">//&nbsp;NOTE:&nbsp;$&nbsp;is&nbsp;not&nbsp;safe&nbsp;for&nbsp;the&nbsp;shell,&nbsp;but&nbsp;it&nbsp;is&nbsp;allowed&nbsp;here&nbsp;because&nbsp;of&nbsp;linker&nbsp;options&nbsp;like&nbsp;-Wl,$ORIGIN.</span><br>
<span class="lineno"></span><span class="comment" id="5970422">//&nbsp;We&nbsp;never&nbsp;pass&nbsp;these&nbsp;arguments&nbsp;to&nbsp;a&nbsp;shell&nbsp;(just&nbsp;to&nbsp;programs&nbsp;we&nbsp;construct&nbsp;argv&nbsp;for),&nbsp;so&nbsp;this&nbsp;should&nbsp;be&nbsp;okay.</span><br>
<span class="lineno">1145</span><span class="comment" id="5970532">//&nbsp;See&nbsp;golang.org/issue/6038.</span><br>
<span class="lineno"></span><span class="keyword" id="5970562">var</span>&nbsp;<span class="ident" id="5970566">safeBytes</span>&nbsp;<span class="op" id="5970576">=</span>&nbsp;<span class="op" id="5970578">[</span><span class="op" id="5970579">]</span><span class="builtintype" id="5970580">byte</span><span class="op" id="5970584">(</span><span class="string" id="5970585">&#34;+-.,/0123456789=ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz:$&#34;</span><span class="op" id="5970658">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5970661">func</span>&nbsp;<span class="ident" id="5970666">safeCgoName</span><span class="op" id="5970677">(</span><span class="ident" id="5970678">s</span>&nbsp;<span class="builtintype" id="5970680">string</span><span class="op" id="5970686">)</span>&nbsp;<span class="builtintype" id="5970688">bool</span>&nbsp;<span class="op" id="5970693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970696">if</span>&nbsp;<span class="ident" id="5970699">s</span>&nbsp;<span class="op" id="5970701">==</span>&nbsp;<span class="string" id="5970704">&#34;&#34;</span>&nbsp;<span class="op" id="5970707">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970711">return</span>&nbsp;<span class="builtintype" id="5970718">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5970725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970728">for</span>&nbsp;<span class="ident" id="5970732">i</span>&nbsp;<span class="op" id="5970734">:=</span>&nbsp;<span class="num" id="5970737">0</span><span class="op" id="5970738">;</span>&nbsp;<span class="ident" id="5970740">i</span>&nbsp;<span class="op" id="5970742">&lt;</span>&nbsp;<span class="builtinfunc" id="5970744">len</span><span class="op" id="5970747">(</span><span class="ident" id="5970748">s</span><span class="op" id="5970749">)</span><span class="op" id="5970750">;</span>&nbsp;<span class="ident" id="5970752">i</span><span class="op" id="5970753">++</span>&nbsp;<span class="op" id="5970756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970760">if</span>&nbsp;<span class="ident" id="5970763">c</span>&nbsp;<span class="op" id="5970765">:=</span>&nbsp;<span class="ident" id="5970768">s</span><span class="op" id="5970769">[</span><span class="ident" id="5970770">i</span><span class="op" id="5970771">]</span><span class="op" id="5970772">;</span>&nbsp;<span class="ident" id="5970774">c</span>&nbsp;<span class="op" id="5970776">&lt;</span>&nbsp;<span class="num" id="5970778">0x80</span>&nbsp;<span class="op" id="5970783">&amp;&amp;</span>&nbsp;<span class="ident" id="5970786">bytes</span><span class="op" id="5970791">.</span><span class="ident" id="5970792">IndexByte</span><span class="op" id="5970801">(</span><span class="ident" id="5970802">safeBytes</span><span class="op" id="5970811">,</span>&nbsp;<span class="ident" id="5970813">c</span><span class="op" id="5970814">)</span>&nbsp;<span class="op" id="5970816">&lt;</span>&nbsp;<span class="num" id="5970818">0</span>&nbsp;<span class="op" id="5970820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970825">return</span>&nbsp;<span class="builtintype" id="5970832">false</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5970840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5970843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5970846">return</span>&nbsp;<span class="builtintype" id="5970853">true</span><br>
<span class="lineno"></span><span class="op" id="5970858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1160</span><span class="comment" id="5970861">//&nbsp;splitQuoted&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive</span><br>
<span class="lineno"></span><span class="comment" id="5970944">//&nbsp;white&nbsp;space&nbsp;characters&nbsp;while&nbsp;taking&nbsp;into&nbsp;account&nbsp;quotes&nbsp;and&nbsp;escaping,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5971021">//&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="comment" id="5971109">//&nbsp;Single&nbsp;quotes&nbsp;and&nbsp;double&nbsp;quotes&nbsp;are&nbsp;recognized&nbsp;to&nbsp;prevent&nbsp;splitting&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5971191">//&nbsp;quoted&nbsp;region,&nbsp;and&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;resulting&nbsp;substrings.&nbsp;If&nbsp;a&nbsp;quote&nbsp;in&nbsp;s</span><br>
<span class="lineno">1165</span><span class="comment" id="5971272">//&nbsp;isn&#39;t&nbsp;closed&nbsp;err&nbsp;will&nbsp;be&nbsp;set&nbsp;and&nbsp;r&nbsp;will&nbsp;have&nbsp;the&nbsp;unclosed&nbsp;argument&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5971349">//&nbsp;last&nbsp;element.&nbsp;&nbsp;The&nbsp;backslash&nbsp;is&nbsp;used&nbsp;for&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="5971403">//</span><br>
<span class="lineno"></span><span class="comment" id="5971406">//&nbsp;For&nbsp;example,&nbsp;the&nbsp;following&nbsp;string:</span><br>
<span class="lineno"></span><span class="comment" id="5971444">//</span><br>
<span class="lineno">1170</span><span class="comment" id="5971447">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;b:&#34;c&nbsp;d&#34;&nbsp;&#39;e&#39;&#39;f&#39;&nbsp;&nbsp;&#34;g\&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5971478">//</span><br>
<span class="lineno"></span><span class="comment" id="5971481">//&nbsp;Would&nbsp;be&nbsp;parsed&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="5971504">//</span><br>
<span class="lineno"></span><span class="comment" id="5971507">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]string{&#34;a&#34;,&nbsp;&#34;b:c&nbsp;d&#34;,&nbsp;&#34;ef&#34;,&nbsp;`g&#34;`}</span><br>
<span class="lineno">1175</span><span class="comment" id="5971549">//</span><br>
<span class="lineno"></span><span class="keyword" id="5971552">func</span>&nbsp;<span class="ident" id="5971557">splitQuoted</span><span class="op" id="5971568">(</span><span class="ident" id="5971569">s</span>&nbsp;<span class="builtintype" id="5971571">string</span><span class="op" id="5971577">)</span>&nbsp;<span class="op" id="5971579">(</span><span class="ident" id="5971580">r</span>&nbsp;<span class="op" id="5971582">[</span><span class="op" id="5971583">]</span><span class="builtintype" id="5971584">string</span><span class="op" id="5971590">,</span>&nbsp;<span class="ident" id="5971592">err</span>&nbsp;<span class="builtintype" id="5971596">error</span><span class="op" id="5971601">)</span>&nbsp;<span class="op" id="5971603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971606">var</span>&nbsp;<span class="ident" id="5971610">args</span>&nbsp;<span class="op" id="5971615">[</span><span class="op" id="5971616">]</span><span class="builtintype" id="5971617">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971625">arg</span>&nbsp;<span class="op" id="5971629">:=</span>&nbsp;<span class="builtinfunc" id="5971632">make</span><span class="op" id="5971636">(</span><span class="op" id="5971637">[</span><span class="op" id="5971638">]</span><span class="builtintype" id="5971639">rune</span><span class="op" id="5971643">,</span>&nbsp;<span class="builtinfunc" id="5971645">len</span><span class="op" id="5971648">(</span><span class="ident" id="5971649">s</span><span class="op" id="5971650">)</span><span class="op" id="5971651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971654">escaped</span>&nbsp;<span class="op" id="5971662">:=</span>&nbsp;<span class="builtintype" id="5971665">false</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971672">quoted</span>&nbsp;<span class="op" id="5971679">:=</span>&nbsp;<span class="builtintype" id="5971682">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971689">quote</span>&nbsp;<span class="op" id="5971695">:=</span>&nbsp;<span class="string" id="5971698">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971706">i</span>&nbsp;<span class="op" id="5971708">:=</span>&nbsp;<span class="num" id="5971711">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971714">for</span>&nbsp;<span class="ident" id="5971718">_</span><span class="op" id="5971719">,</span>&nbsp;<span class="builtintype" id="5971721">rune</span>&nbsp;<span class="op" id="5971726">:=</span>&nbsp;<span class="keyword" id="5971729">range</span>&nbsp;<span class="ident" id="5971735">s</span>&nbsp;<span class="op" id="5971737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971741">switch</span>&nbsp;<span class="op" id="5971748">{</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971752">case</span>&nbsp;<span class="ident" id="5971757">escaped</span><span class="op" id="5971764">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971769">escaped</span>&nbsp;<span class="op" id="5971777">=</span>&nbsp;<span class="builtintype" id="5971779">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971787">case</span>&nbsp;<span class="builtintype" id="5971792">rune</span>&nbsp;<span class="op" id="5971797">==</span>&nbsp;<span class="string" id="5971800">&#39;\\&#39;</span><span class="op" id="5971804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971809">escaped</span>&nbsp;<span class="op" id="5971817">=</span>&nbsp;<span class="builtintype" id="5971819">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971827">continue</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971838">case</span>&nbsp;<span class="ident" id="5971843">quote</span>&nbsp;<span class="op" id="5971849">!=</span>&nbsp;<span class="string" id="5971852">&#39;\x00&#39;</span><span class="op" id="5971858">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971863">if</span>&nbsp;<span class="builtintype" id="5971866">rune</span>&nbsp;<span class="op" id="5971871">==</span>&nbsp;<span class="ident" id="5971874">quote</span>&nbsp;<span class="op" id="5971880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971886">quote</span>&nbsp;<span class="op" id="5971892">=</span>&nbsp;<span class="string" id="5971894">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971905">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5971917">}</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971921">case</span>&nbsp;<span class="builtintype" id="5971926">rune</span>&nbsp;<span class="op" id="5971931">==</span>&nbsp;<span class="string" id="5971934">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5971938">||</span>&nbsp;<span class="builtintype" id="5971941">rune</span>&nbsp;<span class="op" id="5971946">==</span>&nbsp;<span class="string" id="5971949">&#39;\&#39;&#39;</span><span class="op" id="5971953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971958">quoted</span>&nbsp;<span class="op" id="5971965">=</span>&nbsp;<span class="builtintype" id="5971967">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5971975">quote</span>&nbsp;<span class="op" id="5971981">=</span>&nbsp;<span class="builtintype" id="5971983">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5971991">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972002">case</span>&nbsp;<span class="ident" id="5972007">unicode</span><span class="op" id="5972014">.</span><span class="ident" id="5972015">IsSpace</span><span class="op" id="5972022">(</span><span class="builtintype" id="5972023">rune</span><span class="op" id="5972027">)</span><span class="op" id="5972028">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972033">if</span>&nbsp;<span class="ident" id="5972036">quoted</span>&nbsp;<span class="op" id="5972043">||</span>&nbsp;<span class="ident" id="5972046">i</span>&nbsp;<span class="op" id="5972048">&gt;</span>&nbsp;<span class="num" id="5972050">0</span>&nbsp;<span class="op" id="5972052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972058">quoted</span>&nbsp;<span class="op" id="5972065">=</span>&nbsp;<span class="builtintype" id="5972067">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972077">args</span>&nbsp;<span class="op" id="5972082">=</span>&nbsp;<span class="builtinfunc" id="5972084">append</span><span class="op" id="5972090">(</span><span class="ident" id="5972091">args</span><span class="op" id="5972095">,</span>&nbsp;<span class="builtintype" id="5972097">string</span><span class="op" id="5972103">(</span><span class="ident" id="5972104">arg</span><span class="op" id="5972107">[</span><span class="op" id="5972108">:</span><span class="ident" id="5972109">i</span><span class="op" id="5972110">]</span><span class="op" id="5972111">)</span><span class="op" id="5972112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972118">i</span>&nbsp;<span class="op" id="5972120">=</span>&nbsp;<span class="num" id="5972122">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972127">}</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972132">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972147">arg</span><span class="op" id="5972150">[</span><span class="ident" id="5972151">i</span><span class="op" id="5972152">]</span>&nbsp;<span class="op" id="5972154">=</span>&nbsp;<span class="builtintype" id="5972156">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972163">i</span><span class="op" id="5972164">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972168">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972171">if</span>&nbsp;<span class="ident" id="5972174">quoted</span>&nbsp;<span class="op" id="5972181">||</span>&nbsp;<span class="ident" id="5972184">i</span>&nbsp;<span class="op" id="5972186">&gt;</span>&nbsp;<span class="num" id="5972188">0</span>&nbsp;<span class="op" id="5972190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972194">args</span>&nbsp;<span class="op" id="5972199">=</span>&nbsp;<span class="builtinfunc" id="5972201">append</span><span class="op" id="5972207">(</span><span class="ident" id="5972208">args</span><span class="op" id="5972212">,</span>&nbsp;<span class="builtintype" id="5972214">string</span><span class="op" id="5972220">(</span><span class="ident" id="5972221">arg</span><span class="op" id="5972224">[</span><span class="op" id="5972225">:</span><span class="ident" id="5972226">i</span><span class="op" id="5972227">]</span><span class="op" id="5972228">)</span><span class="op" id="5972229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972235">if</span>&nbsp;<span class="ident" id="5972238">quote</span>&nbsp;<span class="op" id="5972244">!=</span>&nbsp;<span class="num" id="5972247">0</span>&nbsp;<span class="op" id="5972249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972253">err</span>&nbsp;<span class="op" id="5972257">=</span>&nbsp;<span class="ident" id="5972259">errors</span><span class="op" id="5972265">.</span><span class="ident" id="5972266">New</span><span class="op" id="5972269">(</span><span class="string" id="5972270">&#34;unclosed&nbsp;quote&#34;</span><span class="op" id="5972286">)</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972289">}</span>&nbsp;<span class="keyword" id="5972291">else</span>&nbsp;<span class="keyword" id="5972296">if</span>&nbsp;<span class="ident" id="5972299">escaped</span>&nbsp;<span class="op" id="5972307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972311">err</span>&nbsp;<span class="op" id="5972315">=</span>&nbsp;<span class="ident" id="5972317">errors</span><span class="op" id="5972323">.</span><span class="ident" id="5972324">New</span><span class="op" id="5972327">(</span><span class="string" id="5972328">&#34;unfinished&nbsp;escaping&#34;</span><span class="op" id="5972349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972355">return</span>&nbsp;<span class="ident" id="5972362">args</span><span class="op" id="5972366">,</span>&nbsp;<span class="ident" id="5972368">err</span><br>
<span class="lineno"></span><span class="op" id="5972372">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="5972375">//&nbsp;match&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;name&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno"></span><span class="comment" id="5972420">//</span><br>
<span class="lineno"></span><span class="comment" id="5972423">//&nbsp;&nbsp;&nbsp;&nbsp;$GOOS</span><br>
<span class="lineno"></span><span class="comment" id="5972432">//&nbsp;&nbsp;&nbsp;&nbsp;$GOARCH</span><br>
<span class="lineno">1225</span><span class="comment" id="5972443">//&nbsp;&nbsp;&nbsp;&nbsp;cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;enabled)</span><br>
<span class="lineno"></span><span class="comment" id="5972470">//&nbsp;&nbsp;&nbsp;&nbsp;!cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;disabled)</span><br>
<span class="lineno"></span><span class="comment" id="5972499">//&nbsp;&nbsp;&nbsp;&nbsp;ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="5972516">//&nbsp;&nbsp;&nbsp;&nbsp;!ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="5972534">//&nbsp;&nbsp;&nbsp;&nbsp;tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno">1230</span><span class="comment" id="5972598">//&nbsp;&nbsp;&nbsp;&nbsp;!tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;not&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno"></span><span class="comment" id="5972667">//&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;any&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5972709">//</span><br>
<span class="lineno"></span><span class="keyword" id="5972712">func</span>&nbsp;<span class="op" id="5972717">(</span><span class="ident" id="5972718">ctxt</span>&nbsp;<span class="op" id="5972723">*</span><span class="ident" id="5972724">Context</span><span class="op" id="5972731">)</span>&nbsp;<span class="ident" id="5972733">match</span><span class="op" id="5972738">(</span><span class="ident" id="5972739">name</span>&nbsp;<span class="builtintype" id="5972744">string</span><span class="op" id="5972750">,</span>&nbsp;<span class="ident" id="5972752">allTags</span>&nbsp;<span class="keyword" id="5972760">map</span><span class="op" id="5972763">[</span><span class="builtintype" id="5972764">string</span><span class="op" id="5972770">]</span><span class="builtintype" id="5972771">bool</span><span class="op" id="5972775">)</span>&nbsp;<span class="builtintype" id="5972777">bool</span>&nbsp;<span class="op" id="5972782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972785">if</span>&nbsp;<span class="ident" id="5972788">name</span>&nbsp;<span class="op" id="5972793">==</span>&nbsp;<span class="string" id="5972796">&#34;&#34;</span>&nbsp;<span class="op" id="5972799">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972803">if</span>&nbsp;<span class="ident" id="5972806">allTags</span>&nbsp;<span class="op" id="5972814">!=</span>&nbsp;<span class="ident" id="5972817">nil</span>&nbsp;<span class="op" id="5972821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972826">allTags</span><span class="op" id="5972833">[</span><span class="ident" id="5972834">name</span><span class="op" id="5972838">]</span>&nbsp;<span class="op" id="5972840">=</span>&nbsp;<span class="builtintype" id="5972842">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972853">return</span>&nbsp;<span class="builtintype" id="5972860">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5972867">}</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5972870">if</span>&nbsp;<span class="ident" id="5972873">i</span>&nbsp;<span class="op" id="5972875">:=</span>&nbsp;<span class="ident" id="5972878">strings</span><span class="op" id="5972885">.</span><span class="ident" id="5972886">Index</span><span class="op" id="5972891">(</span><span class="ident" id="5972892">name</span><span class="op" id="5972896">,</span>&nbsp;<span class="string" id="5972898">&#34;,&#34;</span><span class="op" id="5972901">)</span><span class="op" id="5972902">;</span>&nbsp;<span class="ident" id="5972904">i</span>&nbsp;<span class="op" id="5972906">&gt;=</span>&nbsp;<span class="num" id="5972909">0</span>&nbsp;<span class="op" id="5972911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5972915">//&nbsp;comma-separated&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972941">ok1</span>&nbsp;<span class="op" id="5972945">:=</span>&nbsp;<span class="ident" id="5972948">ctxt</span><span class="op" id="5972952">.</span><span class="ident" id="5972953">match</span><span class="op" id="5972958">(</span><span class="ident" id="5972959">name</span><span class="op" id="5972963">[</span><span class="op" id="5972964">:</span><span class="ident" id="5972965">i</span><span class="op" id="5972966">]</span><span class="op" id="5972967">,</span>&nbsp;<span class="ident" id="5972969">allTags</span><span class="op" id="5972976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5972980">ok2</span>&nbsp;<span class="op" id="5972984">:=</span>&nbsp;<span class="ident" id="5972987">ctxt</span><span class="op" id="5972991">.</span><span class="ident" id="5972992">match</span><span class="op" id="5972997">(</span><span class="ident" id="5972998">name</span><span class="op" id="5973002">[</span><span class="ident" id="5973003">i</span><span class="op" id="5973004">+</span><span class="num" id="5973005">1</span><span class="op" id="5973006">:</span><span class="op" id="5973007">]</span><span class="op" id="5973008">,</span>&nbsp;<span class="ident" id="5973010">allTags</span><span class="op" id="5973017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973021">return</span>&nbsp;<span class="ident" id="5973028">ok1</span>&nbsp;<span class="op" id="5973032">&amp;&amp;</span>&nbsp;<span class="ident" id="5973035">ok2</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973043">if</span>&nbsp;<span class="ident" id="5973046">strings</span><span class="op" id="5973053">.</span><span class="ident" id="5973054">HasPrefix</span><span class="op" id="5973063">(</span><span class="ident" id="5973064">name</span><span class="op" id="5973068">,</span>&nbsp;<span class="string" id="5973070">&#34;!!&#34;</span><span class="op" id="5973074">)</span>&nbsp;<span class="op" id="5973076">{</span>&nbsp;<span class="comment" id="5973078">//&nbsp;bad&nbsp;syntax,&nbsp;reject&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973109">return</span>&nbsp;<span class="builtintype" id="5973116">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973126">if</span>&nbsp;<span class="ident" id="5973129">strings</span><span class="op" id="5973136">.</span><span class="ident" id="5973137">HasPrefix</span><span class="op" id="5973146">(</span><span class="ident" id="5973147">name</span><span class="op" id="5973151">,</span>&nbsp;<span class="string" id="5973153">&#34;!&#34;</span><span class="op" id="5973156">)</span>&nbsp;<span class="op" id="5973158">{</span>&nbsp;<span class="comment" id="5973160">//&nbsp;negation</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973174">return</span>&nbsp;<span class="builtinfunc" id="5973181">len</span><span class="op" id="5973184">(</span><span class="ident" id="5973185">name</span><span class="op" id="5973189">)</span>&nbsp;<span class="op" id="5973191">&gt;</span>&nbsp;<span class="num" id="5973193">1</span>&nbsp;<span class="op" id="5973195">&amp;&amp;</span>&nbsp;<span class="op" id="5973198">!</span><span class="ident" id="5973199">ctxt</span><span class="op" id="5973203">.</span><span class="ident" id="5973204">match</span><span class="op" id="5973209">(</span><span class="ident" id="5973210">name</span><span class="op" id="5973214">[</span><span class="num" id="5973215">1</span><span class="op" id="5973216">:</span><span class="op" id="5973217">]</span><span class="op" id="5973218">,</span>&nbsp;<span class="ident" id="5973220">allTags</span><span class="op" id="5973227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973234">if</span>&nbsp;<span class="ident" id="5973237">allTags</span>&nbsp;<span class="op" id="5973245">!=</span>&nbsp;<span class="ident" id="5973248">nil</span>&nbsp;<span class="op" id="5973252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5973256">allTags</span><span class="op" id="5973263">[</span><span class="ident" id="5973264">name</span><span class="op" id="5973268">]</span>&nbsp;<span class="op" id="5973270">=</span>&nbsp;<span class="builtintype" id="5973272">true</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5973282">//&nbsp;Tags&nbsp;must&nbsp;be&nbsp;letters,&nbsp;digits,&nbsp;underscores&nbsp;or&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5973337">//&nbsp;Unlike&nbsp;in&nbsp;Go&nbsp;identifiers,&nbsp;all&nbsp;digits&nbsp;are&nbsp;fine&nbsp;(e.g.,&nbsp;&#34;386&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973402">for</span>&nbsp;<span class="ident" id="5973406">_</span><span class="op" id="5973407">,</span>&nbsp;<span class="ident" id="5973409">c</span>&nbsp;<span class="op" id="5973411">:=</span>&nbsp;<span class="keyword" id="5973414">range</span>&nbsp;<span class="ident" id="5973420">name</span>&nbsp;<span class="op" id="5973425">{</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973429">if</span>&nbsp;<span class="op" id="5973432">!</span><span class="ident" id="5973433">unicode</span><span class="op" id="5973440">.</span><span class="ident" id="5973441">IsLetter</span><span class="op" id="5973449">(</span><span class="ident" id="5973450">c</span><span class="op" id="5973451">)</span>&nbsp;<span class="op" id="5973453">&amp;&amp;</span>&nbsp;<span class="op" id="5973456">!</span><span class="ident" id="5973457">unicode</span><span class="op" id="5973464">.</span><span class="ident" id="5973465">IsDigit</span><span class="op" id="5973472">(</span><span class="ident" id="5973473">c</span><span class="op" id="5973474">)</span>&nbsp;<span class="op" id="5973476">&amp;&amp;</span>&nbsp;<span class="ident" id="5973479">c</span>&nbsp;<span class="op" id="5973481">!=</span>&nbsp;<span class="string" id="5973484">&#39;_&#39;</span>&nbsp;<span class="op" id="5973488">&amp;&amp;</span>&nbsp;<span class="ident" id="5973491">c</span>&nbsp;<span class="op" id="5973493">!=</span>&nbsp;<span class="string" id="5973496">&#39;.&#39;</span>&nbsp;<span class="op" id="5973500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973505">return</span>&nbsp;<span class="builtintype" id="5973512">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5973527">//&nbsp;special&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973544">if</span>&nbsp;<span class="ident" id="5973547">ctxt</span><span class="op" id="5973551">.</span><span class="ident" id="5973552">CgoEnabled</span>&nbsp;<span class="op" id="5973563">&amp;&amp;</span>&nbsp;<span class="ident" id="5973566">name</span>&nbsp;<span class="op" id="5973571">==</span>&nbsp;<span class="string" id="5973574">&#34;cgo&#34;</span>&nbsp;<span class="op" id="5973580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973584">return</span>&nbsp;<span class="builtintype" id="5973591">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973600">if</span>&nbsp;<span class="ident" id="5973603">name</span>&nbsp;<span class="op" id="5973608">==</span>&nbsp;<span class="ident" id="5973611">ctxt</span><span class="op" id="5973615">.</span><span class="ident" id="5973616">GOOS</span>&nbsp;<span class="op" id="5973621">||</span>&nbsp;<span class="ident" id="5973624">name</span>&nbsp;<span class="op" id="5973629">==</span>&nbsp;<span class="ident" id="5973632">ctxt</span><span class="op" id="5973636">.</span><span class="ident" id="5973637">GOARCH</span>&nbsp;<span class="op" id="5973644">||</span>&nbsp;<span class="ident" id="5973647">name</span>&nbsp;<span class="op" id="5973652">==</span>&nbsp;<span class="ident" id="5973655">ctxt</span><span class="op" id="5973659">.</span><span class="ident" id="5973660">Compiler</span>&nbsp;<span class="op" id="5973669">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973673">return</span>&nbsp;<span class="builtintype" id="5973680">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973689">if</span>&nbsp;<span class="ident" id="5973692">ctxt</span><span class="op" id="5973696">.</span><span class="ident" id="5973697">GOOS</span>&nbsp;<span class="op" id="5973702">==</span>&nbsp;<span class="string" id="5973705">&#34;android&#34;</span>&nbsp;<span class="op" id="5973715">&amp;&amp;</span>&nbsp;<span class="ident" id="5973718">name</span>&nbsp;<span class="op" id="5973723">==</span>&nbsp;<span class="string" id="5973726">&#34;linux&#34;</span>&nbsp;<span class="op" id="5973734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973738">return</span>&nbsp;<span class="builtintype" id="5973745">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973751">}</span><br>
<span class="lineno">1275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5973755">//&nbsp;other&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973770">for</span>&nbsp;<span class="ident" id="5973774">_</span><span class="op" id="5973775">,</span>&nbsp;<span class="ident" id="5973777">tag</span>&nbsp;<span class="op" id="5973781">:=</span>&nbsp;<span class="keyword" id="5973784">range</span>&nbsp;<span class="ident" id="5973790">ctxt</span><span class="op" id="5973794">.</span><span class="ident" id="5973795">BuildTags</span>&nbsp;<span class="op" id="5973805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973809">if</span>&nbsp;<span class="ident" id="5973812">tag</span>&nbsp;<span class="op" id="5973816">==</span>&nbsp;<span class="ident" id="5973819">name</span>&nbsp;<span class="op" id="5973824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973829">return</span>&nbsp;<span class="builtintype" id="5973836">true</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973849">for</span>&nbsp;<span class="ident" id="5973853">_</span><span class="op" id="5973854">,</span>&nbsp;<span class="ident" id="5973856">tag</span>&nbsp;<span class="op" id="5973860">:=</span>&nbsp;<span class="keyword" id="5973863">range</span>&nbsp;<span class="ident" id="5973869">ctxt</span><span class="op" id="5973873">.</span><span class="ident" id="5973874">ReleaseTags</span>&nbsp;<span class="op" id="5973886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973890">if</span>&nbsp;<span class="ident" id="5973893">tag</span>&nbsp;<span class="op" id="5973897">==</span>&nbsp;<span class="ident" id="5973900">name</span>&nbsp;<span class="op" id="5973905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973910">return</span>&nbsp;<span class="builtintype" id="5973917">true</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5973927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5973931">return</span>&nbsp;<span class="builtintype" id="5973938">false</span><br>
<span class="lineno"></span><span class="op" id="5973944">}</span><br>
<span class="lineno">1290</span><br>
<span class="lineno"></span><span class="comment" id="5973947">//&nbsp;goodOSArchFile&nbsp;returns&nbsp;false&nbsp;if&nbsp;the&nbsp;name&nbsp;contains&nbsp;a&nbsp;$GOOS&nbsp;or&nbsp;$GOARCH</span><br>
<span class="lineno"></span><span class="comment" id="5974019">//&nbsp;suffix&nbsp;which&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;current&nbsp;system.</span><br>
<span class="lineno"></span><span class="comment" id="5974070">//&nbsp;The&nbsp;recognized&nbsp;name&nbsp;formats&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5974106">//</span><br>
<span class="lineno">1295</span><span class="comment" id="5974109">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS).*</span><br>
<span class="lineno"></span><span class="comment" id="5974131">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="5974155">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="5974187">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="5974214">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH)_test.*</span><br>
<span class="lineno">1300</span><span class="comment" id="5974243">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="5974280">//</span><br>
<span class="lineno"></span><span class="comment" id="5974283">//&nbsp;An&nbsp;exception:&nbsp;if&nbsp;GOOS=android,&nbsp;then&nbsp;files&nbsp;with&nbsp;GOOS=linux&nbsp;are&nbsp;also&nbsp;matched.</span><br>
<span class="lineno"></span><span class="keyword" id="5974362">func</span>&nbsp;<span class="op" id="5974367">(</span><span class="ident" id="5974368">ctxt</span>&nbsp;<span class="op" id="5974373">*</span><span class="ident" id="5974374">Context</span><span class="op" id="5974381">)</span>&nbsp;<span class="ident" id="5974383">goodOSArchFile</span><span class="op" id="5974397">(</span><span class="ident" id="5974398">name</span>&nbsp;<span class="builtintype" id="5974403">string</span><span class="op" id="5974409">,</span>&nbsp;<span class="ident" id="5974411">allTags</span>&nbsp;<span class="keyword" id="5974419">map</span><span class="op" id="5974422">[</span><span class="builtintype" id="5974423">string</span><span class="op" id="5974429">]</span><span class="builtintype" id="5974430">bool</span><span class="op" id="5974434">)</span>&nbsp;<span class="builtintype" id="5974436">bool</span>&nbsp;<span class="op" id="5974441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5974444">if</span>&nbsp;<span class="ident" id="5974447">dot</span>&nbsp;<span class="op" id="5974451">:=</span>&nbsp;<span class="ident" id="5974454">strings</span><span class="op" id="5974461">.</span><span class="ident" id="5974462">Index</span><span class="op" id="5974467">(</span><span class="ident" id="5974468">name</span><span class="op" id="5974472">,</span>&nbsp;<span class="string" id="5974474">&#34;.&#34;</span><span class="op" id="5974477">)</span><span class="op" id="5974478">;</span>&nbsp;<span class="ident" id="5974480">dot</span>&nbsp;<span class="op" id="5974484">!=</span>&nbsp;<span class="op" id="5974487">-</span><span class="num" id="5974488">1</span>&nbsp;<span class="op" id="5974490">{</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5974494">name</span>&nbsp;<span class="op" id="5974499">=</span>&nbsp;<span class="ident" id="5974501">name</span><span class="op" id="5974505">[</span><span class="op" id="5974506">:</span><span class="ident" id="5974507">dot</span><span class="op" id="5974510">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5974513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974517">//&nbsp;Before&nbsp;Go&nbsp;1.4,&nbsp;a&nbsp;file&nbsp;called&nbsp;&#34;linux.go&#34;&nbsp;would&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;having&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974593">//&nbsp;build&nbsp;tag&nbsp;&#34;linux&#34;&nbsp;in&nbsp;that&nbsp;file.&nbsp;For&nbsp;Go&nbsp;1.4&nbsp;and&nbsp;beyond,&nbsp;we&nbsp;require&nbsp;this</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974668">//&nbsp;auto-tagging&nbsp;to&nbsp;apply&nbsp;only&nbsp;to&nbsp;files&nbsp;with&nbsp;a&nbsp;non-empty&nbsp;prefix,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974736">//&nbsp;&#34;foo_linux.go&#34;&nbsp;is&nbsp;tagged&nbsp;but&nbsp;&#34;linux.go&#34;&nbsp;is&nbsp;not.&nbsp;This&nbsp;allows&nbsp;new&nbsp;operating</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974814">//&nbsp;sytems,&nbsp;such&nbsp;as&nbsp;android,&nbsp;to&nbsp;arrive&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;code&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974889">//&nbsp;innocuous&nbsp;source&nbsp;code&nbsp;in&nbsp;&#34;android.go&#34;.&nbsp;The&nbsp;easiest&nbsp;fix:&nbsp;cut&nbsp;everything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5974964">//&nbsp;in&nbsp;the&nbsp;name&nbsp;before&nbsp;the&nbsp;initial&nbsp;_.</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975002">i</span>&nbsp;<span class="op" id="5975004">:=</span>&nbsp;<span class="ident" id="5975007">strings</span><span class="op" id="5975014">.</span><span class="ident" id="5975015">Index</span><span class="op" id="5975020">(</span><span class="ident" id="5975021">name</span><span class="op" id="5975025">,</span>&nbsp;<span class="string" id="5975027">&#34;_&#34;</span><span class="op" id="5975030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975033">if</span>&nbsp;<span class="ident" id="5975036">i</span>&nbsp;<span class="op" id="5975038">&lt;</span>&nbsp;<span class="num" id="5975040">0</span>&nbsp;<span class="op" id="5975042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975046">return</span>&nbsp;<span class="builtintype" id="5975053">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975062">name</span>&nbsp;<span class="op" id="5975067">=</span>&nbsp;<span class="ident" id="5975069">name</span><span class="op" id="5975073">[</span><span class="ident" id="5975074">i</span><span class="op" id="5975075">:</span><span class="op" id="5975076">]</span>&nbsp;<span class="comment" id="5975078">//&nbsp;ignore&nbsp;everything&nbsp;before&nbsp;first&nbsp;_</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975116">l</span>&nbsp;<span class="op" id="5975118">:=</span>&nbsp;<span class="ident" id="5975121">strings</span><span class="op" id="5975128">.</span><span class="ident" id="5975129">Split</span><span class="op" id="5975134">(</span><span class="ident" id="5975135">name</span><span class="op" id="5975139">,</span>&nbsp;<span class="string" id="5975141">&#34;_&#34;</span><span class="op" id="5975144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975147">if</span>&nbsp;<span class="ident" id="5975150">n</span>&nbsp;<span class="op" id="5975152">:=</span>&nbsp;<span class="builtinfunc" id="5975155">len</span><span class="op" id="5975158">(</span><span class="ident" id="5975159">l</span><span class="op" id="5975160">)</span><span class="op" id="5975161">;</span>&nbsp;<span class="ident" id="5975163">n</span>&nbsp;<span class="op" id="5975165">&gt;</span>&nbsp;<span class="num" id="5975167">0</span>&nbsp;<span class="op" id="5975169">&amp;&amp;</span>&nbsp;<span class="ident" id="5975172">l</span><span class="op" id="5975173">[</span><span class="ident" id="5975174">n</span><span class="op" id="5975175">-</span><span class="num" id="5975176">1</span><span class="op" id="5975177">]</span>&nbsp;<span class="op" id="5975179">==</span>&nbsp;<span class="string" id="5975182">&#34;test&#34;</span>&nbsp;<span class="op" id="5975189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975193">l</span>&nbsp;<span class="op" id="5975195">=</span>&nbsp;<span class="ident" id="5975197">l</span><span class="op" id="5975198">[</span><span class="op" id="5975199">:</span><span class="ident" id="5975200">n</span><span class="op" id="5975201">-</span><span class="num" id="5975202">1</span><span class="op" id="5975203">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975206">}</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975209">n</span>&nbsp;<span class="op" id="5975211">:=</span>&nbsp;<span class="builtinfunc" id="5975214">len</span><span class="op" id="5975217">(</span><span class="ident" id="5975218">l</span><span class="op" id="5975219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975222">if</span>&nbsp;<span class="ident" id="5975225">n</span>&nbsp;<span class="op" id="5975227">&gt;=</span>&nbsp;<span class="num" id="5975230">2</span>&nbsp;<span class="op" id="5975232">&amp;&amp;</span>&nbsp;<span class="ident" id="5975235">knownOS</span><span class="op" id="5975242">[</span><span class="ident" id="5975243">l</span><span class="op" id="5975244">[</span><span class="ident" id="5975245">n</span><span class="op" id="5975246">-</span><span class="num" id="5975247">2</span><span class="op" id="5975248">]</span><span class="op" id="5975249">]</span>&nbsp;<span class="op" id="5975251">&amp;&amp;</span>&nbsp;<span class="ident" id="5975254">knownArch</span><span class="op" id="5975263">[</span><span class="ident" id="5975264">l</span><span class="op" id="5975265">[</span><span class="ident" id="5975266">n</span><span class="op" id="5975267">-</span><span class="num" id="5975268">1</span><span class="op" id="5975269">]</span><span class="op" id="5975270">]</span>&nbsp;<span class="op" id="5975272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975276">if</span>&nbsp;<span class="ident" id="5975279">allTags</span>&nbsp;<span class="op" id="5975287">!=</span>&nbsp;<span class="ident" id="5975290">nil</span>&nbsp;<span class="op" id="5975294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975299">allTags</span><span class="op" id="5975306">[</span><span class="ident" id="5975307">l</span><span class="op" id="5975308">[</span><span class="ident" id="5975309">n</span><span class="op" id="5975310">-</span><span class="num" id="5975311">2</span><span class="op" id="5975312">]</span><span class="op" id="5975313">]</span>&nbsp;<span class="op" id="5975315">=</span>&nbsp;<span class="builtintype" id="5975317">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975325">allTags</span><span class="op" id="5975332">[</span><span class="ident" id="5975333">l</span><span class="op" id="5975334">[</span><span class="ident" id="5975335">n</span><span class="op" id="5975336">-</span><span class="num" id="5975337">1</span><span class="op" id="5975338">]</span><span class="op" id="5975339">]</span>&nbsp;<span class="op" id="5975341">=</span>&nbsp;<span class="builtintype" id="5975343">true</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975354">if</span>&nbsp;<span class="ident" id="5975357">l</span><span class="op" id="5975358">[</span><span class="ident" id="5975359">n</span><span class="op" id="5975360">-</span><span class="num" id="5975361">1</span><span class="op" id="5975362">]</span>&nbsp;<span class="op" id="5975364">!=</span>&nbsp;<span class="ident" id="5975367">ctxt</span><span class="op" id="5975371">.</span><span class="ident" id="5975372">GOARCH</span>&nbsp;<span class="op" id="5975379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975384">return</span>&nbsp;<span class="builtintype" id="5975391">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975403">if</span>&nbsp;<span class="ident" id="5975406">ctxt</span><span class="op" id="5975410">.</span><span class="ident" id="5975411">GOOS</span>&nbsp;<span class="op" id="5975416">==</span>&nbsp;<span class="string" id="5975419">&#34;android&#34;</span>&nbsp;<span class="op" id="5975429">&amp;&amp;</span>&nbsp;<span class="ident" id="5975432">l</span><span class="op" id="5975433">[</span><span class="ident" id="5975434">n</span><span class="op" id="5975435">-</span><span class="num" id="5975436">2</span><span class="op" id="5975437">]</span>&nbsp;<span class="op" id="5975439">==</span>&nbsp;<span class="string" id="5975442">&#34;linux&#34;</span>&nbsp;<span class="op" id="5975450">{</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975455">return</span>&nbsp;<span class="builtintype" id="5975462">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975473">return</span>&nbsp;<span class="ident" id="5975480">l</span><span class="op" id="5975481">[</span><span class="ident" id="5975482">n</span><span class="op" id="5975483">-</span><span class="num" id="5975484">2</span><span class="op" id="5975485">]</span>&nbsp;<span class="op" id="5975487">==</span>&nbsp;<span class="ident" id="5975490">ctxt</span><span class="op" id="5975494">.</span><span class="ident" id="5975495">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975504">if</span>&nbsp;<span class="ident" id="5975507">n</span>&nbsp;<span class="op" id="5975509">&gt;=</span>&nbsp;<span class="num" id="5975512">1</span>&nbsp;<span class="op" id="5975514">&amp;&amp;</span>&nbsp;<span class="ident" id="5975517">knownOS</span><span class="op" id="5975524">[</span><span class="ident" id="5975525">l</span><span class="op" id="5975526">[</span><span class="ident" id="5975527">n</span><span class="op" id="5975528">-</span><span class="num" id="5975529">1</span><span class="op" id="5975530">]</span><span class="op" id="5975531">]</span>&nbsp;<span class="op" id="5975533">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975537">if</span>&nbsp;<span class="ident" id="5975540">allTags</span>&nbsp;<span class="op" id="5975548">!=</span>&nbsp;<span class="ident" id="5975551">nil</span>&nbsp;<span class="op" id="5975555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975560">allTags</span><span class="op" id="5975567">[</span><span class="ident" id="5975568">l</span><span class="op" id="5975569">[</span><span class="ident" id="5975570">n</span><span class="op" id="5975571">-</span><span class="num" id="5975572">1</span><span class="op" id="5975573">]</span><span class="op" id="5975574">]</span>&nbsp;<span class="op" id="5975576">=</span>&nbsp;<span class="builtintype" id="5975578">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975589">if</span>&nbsp;<span class="ident" id="5975592">ctxt</span><span class="op" id="5975596">.</span><span class="ident" id="5975597">GOOS</span>&nbsp;<span class="op" id="5975602">==</span>&nbsp;<span class="string" id="5975605">&#34;android&#34;</span>&nbsp;<span class="op" id="5975615">&amp;&amp;</span>&nbsp;<span class="ident" id="5975618">l</span><span class="op" id="5975619">[</span><span class="ident" id="5975620">n</span><span class="op" id="5975621">-</span><span class="num" id="5975622">1</span><span class="op" id="5975623">]</span>&nbsp;<span class="op" id="5975625">==</span>&nbsp;<span class="string" id="5975628">&#34;linux&#34;</span>&nbsp;<span class="op" id="5975636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975641">return</span>&nbsp;<span class="builtintype" id="5975648">true</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975659">return</span>&nbsp;<span class="ident" id="5975666">l</span><span class="op" id="5975667">[</span><span class="ident" id="5975668">n</span><span class="op" id="5975669">-</span><span class="num" id="5975670">1</span><span class="op" id="5975671">]</span>&nbsp;<span class="op" id="5975673">==</span>&nbsp;<span class="ident" id="5975676">ctxt</span><span class="op" id="5975680">.</span><span class="ident" id="5975681">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975690">if</span>&nbsp;<span class="ident" id="5975693">n</span>&nbsp;<span class="op" id="5975695">&gt;=</span>&nbsp;<span class="num" id="5975698">1</span>&nbsp;<span class="op" id="5975700">&amp;&amp;</span>&nbsp;<span class="ident" id="5975703">knownArch</span><span class="op" id="5975712">[</span><span class="ident" id="5975713">l</span><span class="op" id="5975714">[</span><span class="ident" id="5975715">n</span><span class="op" id="5975716">-</span><span class="num" id="5975717">1</span><span class="op" id="5975718">]</span><span class="op" id="5975719">]</span>&nbsp;<span class="op" id="5975721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975725">if</span>&nbsp;<span class="ident" id="5975728">allTags</span>&nbsp;<span class="op" id="5975736">!=</span>&nbsp;<span class="ident" id="5975739">nil</span>&nbsp;<span class="op" id="5975743">{</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975748">allTags</span><span class="op" id="5975755">[</span><span class="ident" id="5975756">l</span><span class="op" id="5975757">[</span><span class="ident" id="5975758">n</span><span class="op" id="5975759">-</span><span class="num" id="5975760">1</span><span class="op" id="5975761">]</span><span class="op" id="5975762">]</span>&nbsp;<span class="op" id="5975764">=</span>&nbsp;<span class="builtintype" id="5975766">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975777">return</span>&nbsp;<span class="ident" id="5975784">l</span><span class="op" id="5975785">[</span><span class="ident" id="5975786">n</span><span class="op" id="5975787">-</span><span class="num" id="5975788">1</span><span class="op" id="5975789">]</span>&nbsp;<span class="op" id="5975791">==</span>&nbsp;<span class="ident" id="5975794">ctxt</span><span class="op" id="5975798">.</span><span class="ident" id="5975799">GOARCH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975810">return</span>&nbsp;<span class="builtintype" id="5975817">true</span><br>
<span class="lineno">1355</span><span class="op" id="5975822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5975825">var</span>&nbsp;<span class="ident" id="5975829">knownOS</span>&nbsp;<span class="op" id="5975837">=</span>&nbsp;<span class="builtinfunc" id="5975839">make</span><span class="op" id="5975843">(</span><span class="keyword" id="5975844">map</span><span class="op" id="5975847">[</span><span class="builtintype" id="5975848">string</span><span class="op" id="5975854">]</span><span class="builtintype" id="5975855">bool</span><span class="op" id="5975859">)</span><br>
<span class="lineno"></span><span class="keyword" id="5975861">var</span>&nbsp;<span class="ident" id="5975865">knownArch</span>&nbsp;<span class="op" id="5975875">=</span>&nbsp;<span class="builtinfunc" id="5975877">make</span><span class="op" id="5975881">(</span><span class="keyword" id="5975882">map</span><span class="op" id="5975885">[</span><span class="builtintype" id="5975886">string</span><span class="op" id="5975892">]</span><span class="builtintype" id="5975893">bool</span><span class="op" id="5975897">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1360</span><span class="keyword" id="5975900">func</span>&nbsp;<span class="ident" id="5975905">init</span><span class="op" id="5975909">(</span><span class="op" id="5975910">)</span>&nbsp;<span class="op" id="5975912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975915">for</span>&nbsp;<span class="ident" id="5975919">_</span><span class="op" id="5975920">,</span>&nbsp;<span class="ident" id="5975922">v</span>&nbsp;<span class="op" id="5975924">:=</span>&nbsp;<span class="keyword" id="5975927">range</span>&nbsp;<span class="ident" id="5975933">strings</span><span class="op" id="5975940">.</span><span class="ident" id="5975941">Fields</span><span class="op" id="5975947">(</span><span class="ident" id="5975948">goosList</span><span class="op" id="5975956">)</span>&nbsp;<span class="op" id="5975958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5975962">knownOS</span><span class="op" id="5975969">[</span><span class="ident" id="5975970">v</span><span class="op" id="5975971">]</span>&nbsp;<span class="op" id="5975973">=</span>&nbsp;<span class="builtintype" id="5975975">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5975981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5975984">for</span>&nbsp;<span class="ident" id="5975988">_</span><span class="op" id="5975989">,</span>&nbsp;<span class="ident" id="5975991">v</span>&nbsp;<span class="op" id="5975993">:=</span>&nbsp;<span class="keyword" id="5975996">range</span>&nbsp;<span class="ident" id="5976002">strings</span><span class="op" id="5976009">.</span><span class="ident" id="5976010">Fields</span><span class="op" id="5976016">(</span><span class="ident" id="5976017">goarchList</span><span class="op" id="5976027">)</span>&nbsp;<span class="op" id="5976029">{</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976033">knownArch</span><span class="op" id="5976042">[</span><span class="ident" id="5976043">v</span><span class="op" id="5976044">]</span>&nbsp;<span class="op" id="5976046">=</span>&nbsp;<span class="builtintype" id="5976048">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976054">}</span><br>
<span class="lineno"></span><span class="op" id="5976056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5976059">//&nbsp;ToolDir&nbsp;is&nbsp;the&nbsp;directory&nbsp;containing&nbsp;build&nbsp;tools.</span><br>
<span class="lineno">1370</span><span class="keyword" id="5976111">var</span>&nbsp;<span class="ident" id="5976115">ToolDir</span>&nbsp;<span class="op" id="5976123">=</span>&nbsp;<span class="ident" id="5976125">filepath</span><span class="op" id="5976133">.</span><span class="ident" id="5976134">Join</span><span class="op" id="5976138">(</span><span class="ident" id="5976139">runtime</span><span class="op" id="5976146">.</span><span class="ident" id="5976147">GOROOT</span><span class="op" id="5976153">(</span><span class="op" id="5976154">)</span><span class="op" id="5976155">,</span>&nbsp;<span class="string" id="5976157">&#34;pkg/tool/&#34;</span><span class="op" id="5976168">+</span><span class="ident" id="5976169">runtime</span><span class="op" id="5976176">.</span><span class="ident" id="5976177">GOOS</span><span class="op" id="5976181">+</span><span class="string" id="5976182">&#34;_&#34;</span><span class="op" id="5976185">+</span><span class="ident" id="5976186">runtime</span><span class="op" id="5976193">.</span><span class="ident" id="5976194">GOARCH</span><span class="op" id="5976200">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5976203">//&nbsp;IsLocalImport&nbsp;reports&nbsp;whether&nbsp;the&nbsp;import&nbsp;path&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5976255">//&nbsp;a&nbsp;local&nbsp;import&nbsp;path,&nbsp;like&nbsp;&#34;.&#34;,&nbsp;&#34;..&#34;,&nbsp;&#34;./foo&#34;,&nbsp;or&nbsp;&#34;../foo&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5976317">func</span>&nbsp;<span class="ident" id="5976322">IsLocalImport</span><span class="op" id="5976335">(</span><span class="ident" id="5976336">path</span>&nbsp;<span class="builtintype" id="5976341">string</span><span class="op" id="5976347">)</span>&nbsp;<span class="builtintype" id="5976349">bool</span>&nbsp;<span class="op" id="5976354">{</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976357">return</span>&nbsp;<span class="ident" id="5976364">path</span>&nbsp;<span class="op" id="5976369">==</span>&nbsp;<span class="string" id="5976372">&#34;.&#34;</span>&nbsp;<span class="op" id="5976376">||</span>&nbsp;<span class="ident" id="5976379">path</span>&nbsp;<span class="op" id="5976384">==</span>&nbsp;<span class="string" id="5976387">&#34;..&#34;</span>&nbsp;<span class="op" id="5976392">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5976397">strings</span><span class="op" id="5976404">.</span><span class="ident" id="5976405">HasPrefix</span><span class="op" id="5976414">(</span><span class="ident" id="5976415">path</span><span class="op" id="5976419">,</span>&nbsp;<span class="string" id="5976421">&#34;./&#34;</span><span class="op" id="5976425">)</span>&nbsp;<span class="op" id="5976427">||</span>&nbsp;<span class="ident" id="5976430">strings</span><span class="op" id="5976437">.</span><span class="ident" id="5976438">HasPrefix</span><span class="op" id="5976447">(</span><span class="ident" id="5976448">path</span><span class="op" id="5976452">,</span>&nbsp;<span class="string" id="5976454">&#34;../&#34;</span><span class="op" id="5976459">)</span><br>
<span class="lineno"></span><span class="op" id="5976461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5976464">//&nbsp;ArchChar&nbsp;returns&nbsp;the&nbsp;architecture&nbsp;character&nbsp;for&nbsp;the&nbsp;given&nbsp;goarch.</span><br>
<span class="lineno">1380</span><span class="comment" id="5976533">//&nbsp;For&nbsp;example,&nbsp;ArchChar(&#34;amd64&#34;)&nbsp;returns&nbsp;&#34;6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5976580">func</span>&nbsp;<span class="ident" id="5976585">ArchChar</span><span class="op" id="5976593">(</span><span class="ident" id="5976594">goarch</span>&nbsp;<span class="builtintype" id="5976601">string</span><span class="op" id="5976607">)</span>&nbsp;<span class="op" id="5976609">(</span><span class="builtintype" id="5976610">string</span><span class="op" id="5976616">,</span>&nbsp;<span class="builtintype" id="5976618">error</span><span class="op" id="5976623">)</span>&nbsp;<span class="op" id="5976625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976628">switch</span>&nbsp;<span class="ident" id="5976635">goarch</span>&nbsp;<span class="op" id="5976642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976645">case</span>&nbsp;<span class="string" id="5976650">&#34;386&#34;</span><span class="op" id="5976655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976659">return</span>&nbsp;<span class="string" id="5976666">&#34;8&#34;</span><span class="op" id="5976669">,</span>&nbsp;<span class="ident" id="5976671">nil</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976676">case</span>&nbsp;<span class="string" id="5976681">&#34;amd64&#34;</span><span class="op" id="5976688">,</span>&nbsp;<span class="string" id="5976690">&#34;amd64p32&#34;</span><span class="op" id="5976700">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976704">return</span>&nbsp;<span class="string" id="5976711">&#34;6&#34;</span><span class="op" id="5976714">,</span>&nbsp;<span class="ident" id="5976716">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976721">case</span>&nbsp;<span class="string" id="5976726">&#34;arm&#34;</span><span class="op" id="5976731">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976735">return</span>&nbsp;<span class="string" id="5976742">&#34;5&#34;</span><span class="op" id="5976745">,</span>&nbsp;<span class="ident" id="5976747">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5976752">}</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5976755">return</span>&nbsp;<span class="string" id="5976762">&#34;&#34;</span><span class="op" id="5976764">,</span>&nbsp;<span class="ident" id="5976766">errors</span><span class="op" id="5976772">.</span><span class="ident" id="5976773">New</span><span class="op" id="5976776">(</span><span class="string" id="5976777">&#34;unsupported&nbsp;GOARCH&nbsp;&#34;</span>&nbsp;<span class="op" id="5976799">+</span>&nbsp;<span class="ident" id="5976801">goarch</span><span class="op" id="5976807">)</span><br>
<span class="lineno"></span><span class="op" id="5976809">}</span>
</div>
</body>
</html>
