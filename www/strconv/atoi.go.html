<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2114081">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2114136">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2114190">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2114241">package</span>&nbsp;<span class="ident" id="2114249">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2114258">import</span>&nbsp;<span class="string" id="2114265">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2114275">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="2114347">var</span>&nbsp;<span class="ident" id="2114351">ErrRange</span>&nbsp;<span class="op" id="2114360">=</span>&nbsp;<span class="ident" id="2114362">errors</span><span class="op" id="2114368">.</span><span class="ident" id="2114369">New</span><span class="op" id="2114372">(</span><span class="string" id="2114373">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2114393">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2114396">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2114484">var</span>&nbsp;<span class="ident" id="2114488">ErrSyntax</span>&nbsp;<span class="op" id="2114498">=</span>&nbsp;<span class="ident" id="2114500">errors</span><span class="op" id="2114506">.</span><span class="ident" id="2114507">New</span><span class="op" id="2114510">(</span><span class="string" id="2114511">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="2114527">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2114530">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2114573">type</span>&nbsp;<span class="ident" id="2114578">NumError</span>&nbsp;<span class="keyword" id="2114587">struct</span>&nbsp;<span class="op" id="2114594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2114597">Func</span>&nbsp;<span class="builtintype" id="2114602">string</span>&nbsp;<span class="comment" id="2114609">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2114679">Num</span>&nbsp;&nbsp;<span class="builtintype" id="2114684">string</span>&nbsp;<span class="comment" id="2114691">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2114705">Err</span>&nbsp;&nbsp;<span class="builtintype" id="2114710">error</span>&nbsp;&nbsp;<span class="comment" id="2114717">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="2114775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2114778">func</span>&nbsp;<span class="op" id="2114783">(</span><span class="ident" id="2114784">e</span>&nbsp;<span class="op" id="2114786">*</span><span class="ident" id="2114787">NumError</span><span class="op" id="2114795">)</span>&nbsp;<span class="ident" id="2114797">Error</span><span class="op" id="2114802">(</span><span class="op" id="2114803">)</span>&nbsp;<span class="builtintype" id="2114805">string</span>&nbsp;<span class="op" id="2114812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2114815">return</span>&nbsp;<span class="string" id="2114822">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="2114833">+</span>&nbsp;<span class="ident" id="2114835">e</span><span class="op" id="2114836">.</span><span class="ident" id="2114837">Func</span>&nbsp;<span class="op" id="2114842">+</span>&nbsp;<span class="string" id="2114844">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2114849">+</span>&nbsp;<span class="string" id="2114851">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="2114862">+</span>&nbsp;<span class="ident" id="2114864">Quote</span><span class="op" id="2114869">(</span><span class="ident" id="2114870">e</span><span class="op" id="2114871">.</span><span class="ident" id="2114872">Num</span><span class="op" id="2114875">)</span>&nbsp;<span class="op" id="2114877">+</span>&nbsp;<span class="string" id="2114879">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2114884">+</span>&nbsp;<span class="ident" id="2114886">e</span><span class="op" id="2114887">.</span><span class="ident" id="2114888">Err</span><span class="op" id="2114891">.</span><span class="ident" id="2114892">Error</span><span class="op" id="2114897">(</span><span class="op" id="2114898">)</span><br>
<span class="lineno"></span><span class="op" id="2114900">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2114903">func</span>&nbsp;<span class="ident" id="2114908">syntaxError</span><span class="op" id="2114919">(</span><span class="ident" id="2114920">fn</span><span class="op" id="2114922">,</span>&nbsp;<span class="ident" id="2114924">str</span>&nbsp;<span class="builtintype" id="2114928">string</span><span class="op" id="2114934">)</span>&nbsp;<span class="op" id="2114936">*</span><span class="ident" id="2114937">NumError</span>&nbsp;<span class="op" id="2114946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2114949">return</span>&nbsp;<span class="op" id="2114956">&amp;</span><span class="ident" id="2114957">NumError</span><span class="op" id="2114965">{</span><span class="ident" id="2114966">fn</span><span class="op" id="2114968">,</span>&nbsp;<span class="ident" id="2114970">str</span><span class="op" id="2114973">,</span>&nbsp;<span class="ident" id="2114975">ErrSyntax</span><span class="op" id="2114984">}</span><br>
<span class="lineno"></span><span class="op" id="2114986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2114989">func</span>&nbsp;<span class="ident" id="2114994">rangeError</span><span class="op" id="2115004">(</span><span class="ident" id="2115005">fn</span><span class="op" id="2115007">,</span>&nbsp;<span class="ident" id="2115009">str</span>&nbsp;<span class="builtintype" id="2115013">string</span><span class="op" id="2115019">)</span>&nbsp;<span class="op" id="2115021">*</span><span class="ident" id="2115022">NumError</span>&nbsp;<span class="op" id="2115031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115034">return</span>&nbsp;<span class="op" id="2115041">&amp;</span><span class="ident" id="2115042">NumError</span><span class="op" id="2115050">{</span><span class="ident" id="2115051">fn</span><span class="op" id="2115053">,</span>&nbsp;<span class="ident" id="2115055">str</span><span class="op" id="2115058">,</span>&nbsp;<span class="ident" id="2115060">ErrRange</span><span class="op" id="2115068">}</span><br>
<span class="lineno"></span><span class="op" id="2115070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2115073">const</span>&nbsp;<span class="ident" id="2115079">intSize</span>&nbsp;<span class="op" id="2115087">=</span>&nbsp;<span class="num" id="2115089">32</span>&nbsp;<span class="op" id="2115092">&lt;&lt;</span>&nbsp;<span class="op" id="2115095">(</span><span class="op" id="2115096">^</span><span class="builtintype" id="2115097">uint</span><span class="op" id="2115101">(</span><span class="num" id="2115102">0</span><span class="op" id="2115103">)</span>&nbsp;<span class="op" id="2115105">&gt;&gt;</span>&nbsp;<span class="num" id="2115108">63</span><span class="op" id="2115110">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2115113">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2115169">const</span>&nbsp;<span class="ident" id="2115175">IntSize</span>&nbsp;<span class="op" id="2115183">=</span>&nbsp;<span class="ident" id="2115185">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2115194">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="2115250">func</span>&nbsp;<span class="ident" id="2115255">cutoff64</span><span class="op" id="2115263">(</span><span class="ident" id="2115264">base</span>&nbsp;<span class="builtintype" id="2115269">int</span><span class="op" id="2115272">)</span>&nbsp;<span class="ident" id="2115274">uint64</span>&nbsp;<span class="op" id="2115281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115284">if</span>&nbsp;<span class="ident" id="2115287">base</span>&nbsp;<span class="op" id="2115292">&lt;</span>&nbsp;<span class="num" id="2115294">2</span>&nbsp;<span class="op" id="2115296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115300">return</span>&nbsp;<span class="num" id="2115307">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2115310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115313">return</span>&nbsp;<span class="op" id="2115320">(</span><span class="num" id="2115321">1</span><span class="op" id="2115322">&lt;&lt;</span><span class="num" id="2115324">64</span><span class="op" id="2115326">-</span><span class="num" id="2115327">1</span><span class="op" id="2115328">)</span><span class="op" id="2115329">/</span><span class="ident" id="2115330">uint64</span><span class="op" id="2115336">(</span><span class="ident" id="2115337">base</span><span class="op" id="2115341">)</span>&nbsp;<span class="op" id="2115343">+</span>&nbsp;<span class="num" id="2115345">1</span><br>
<span class="lineno">45</span><span class="op" id="2115347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2115350">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="2115406">func</span>&nbsp;<span class="ident" id="2115411">ParseUint</span><span class="op" id="2115420">(</span><span class="ident" id="2115421">s</span>&nbsp;<span class="builtintype" id="2115423">string</span><span class="op" id="2115429">,</span>&nbsp;<span class="ident" id="2115431">base</span>&nbsp;<span class="builtintype" id="2115436">int</span><span class="op" id="2115439">,</span>&nbsp;<span class="ident" id="2115441">bitSize</span>&nbsp;<span class="builtintype" id="2115449">int</span><span class="op" id="2115452">)</span>&nbsp;<span class="op" id="2115454">(</span><span class="ident" id="2115455">n</span>&nbsp;<span class="ident" id="2115457">uint64</span><span class="op" id="2115463">,</span>&nbsp;<span class="ident" id="2115465">err</span>&nbsp;<span class="builtintype" id="2115469">error</span><span class="op" id="2115474">)</span>&nbsp;<span class="op" id="2115476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115479">var</span>&nbsp;<span class="ident" id="2115483">cutoff</span><span class="op" id="2115489">,</span>&nbsp;<span class="ident" id="2115491">maxVal</span>&nbsp;<span class="ident" id="2115498">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115507">if</span>&nbsp;<span class="ident" id="2115510">bitSize</span>&nbsp;<span class="op" id="2115518">==</span>&nbsp;<span class="num" id="2115521">0</span>&nbsp;<span class="op" id="2115523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115527">bitSize</span>&nbsp;<span class="op" id="2115535">=</span>&nbsp;<span class="builtintype" id="2115537">int</span><span class="op" id="2115540">(</span><span class="ident" id="2115541">IntSize</span><span class="op" id="2115548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2115551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115555">s0</span>&nbsp;<span class="op" id="2115558">:=</span>&nbsp;<span class="ident" id="2115561">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115564">switch</span>&nbsp;<span class="op" id="2115571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115574">case</span>&nbsp;<span class="builtinfunc" id="2115579">len</span><span class="op" id="2115582">(</span><span class="ident" id="2115583">s</span><span class="op" id="2115584">)</span>&nbsp;<span class="op" id="2115586">&lt;</span>&nbsp;<span class="num" id="2115588">1</span><span class="op" id="2115589">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115593">err</span>&nbsp;<span class="op" id="2115597">=</span>&nbsp;<span class="ident" id="2115599">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115611">goto</span>&nbsp;<span class="ident" id="2115616">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115624">case</span>&nbsp;<span class="num" id="2115629">2</span>&nbsp;<span class="op" id="2115631">&lt;=</span>&nbsp;<span class="ident" id="2115634">base</span>&nbsp;<span class="op" id="2115639">&amp;&amp;</span>&nbsp;<span class="ident" id="2115642">base</span>&nbsp;<span class="op" id="2115647">&lt;=</span>&nbsp;<span class="num" id="2115650">36</span><span class="op" id="2115652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2115656">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115687">case</span>&nbsp;<span class="ident" id="2115692">base</span>&nbsp;<span class="op" id="2115697">==</span>&nbsp;<span class="num" id="2115700">0</span><span class="op" id="2115701">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2115705">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115738">switch</span>&nbsp;<span class="op" id="2115745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115749">case</span>&nbsp;<span class="ident" id="2115754">s</span><span class="op" id="2115755">[</span><span class="num" id="2115756">0</span><span class="op" id="2115757">]</span>&nbsp;<span class="op" id="2115759">==</span>&nbsp;<span class="string" id="2115762">&#39;0&#39;</span>&nbsp;<span class="op" id="2115766">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2115769">len</span><span class="op" id="2115772">(</span><span class="ident" id="2115773">s</span><span class="op" id="2115774">)</span>&nbsp;<span class="op" id="2115776">&gt;</span>&nbsp;<span class="num" id="2115778">1</span>&nbsp;<span class="op" id="2115780">&amp;&amp;</span>&nbsp;<span class="op" id="2115783">(</span><span class="ident" id="2115784">s</span><span class="op" id="2115785">[</span><span class="num" id="2115786">1</span><span class="op" id="2115787">]</span>&nbsp;<span class="op" id="2115789">==</span>&nbsp;<span class="string" id="2115792">&#39;x&#39;</span>&nbsp;<span class="op" id="2115796">||</span>&nbsp;<span class="ident" id="2115799">s</span><span class="op" id="2115800">[</span><span class="num" id="2115801">1</span><span class="op" id="2115802">]</span>&nbsp;<span class="op" id="2115804">==</span>&nbsp;<span class="string" id="2115807">&#39;X&#39;</span><span class="op" id="2115810">)</span><span class="op" id="2115811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115816">base</span>&nbsp;<span class="op" id="2115821">=</span>&nbsp;<span class="num" id="2115823">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115829">s</span>&nbsp;<span class="op" id="2115831">=</span>&nbsp;<span class="ident" id="2115833">s</span><span class="op" id="2115834">[</span><span class="num" id="2115835">2</span><span class="op" id="2115836">:</span><span class="op" id="2115837">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115842">if</span>&nbsp;<span class="builtinfunc" id="2115845">len</span><span class="op" id="2115848">(</span><span class="ident" id="2115849">s</span><span class="op" id="2115850">)</span>&nbsp;<span class="op" id="2115852">&lt;</span>&nbsp;<span class="num" id="2115854">1</span>&nbsp;<span class="op" id="2115856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115862">err</span>&nbsp;<span class="op" id="2115866">=</span>&nbsp;<span class="ident" id="2115868">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115882">goto</span>&nbsp;<span class="ident" id="2115887">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2115896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115900">case</span>&nbsp;<span class="ident" id="2115905">s</span><span class="op" id="2115906">[</span><span class="num" id="2115907">0</span><span class="op" id="2115908">]</span>&nbsp;<span class="op" id="2115910">==</span>&nbsp;<span class="string" id="2115913">&#39;0&#39;</span><span class="op" id="2115916">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115921">base</span>&nbsp;<span class="op" id="2115926">=</span>&nbsp;<span class="num" id="2115928">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115932">default</span><span class="op" id="2115939">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115944">base</span>&nbsp;<span class="op" id="2115949">=</span>&nbsp;<span class="num" id="2115951">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2115956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2115960">default</span><span class="op" id="2115967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2115971">err</span>&nbsp;<span class="op" id="2115975">=</span>&nbsp;<span class="ident" id="2115977">errors</span><span class="op" id="2115983">.</span><span class="ident" id="2115984">New</span><span class="op" id="2115987">(</span><span class="string" id="2115988">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="2116004">+</span>&nbsp;<span class="ident" id="2116006">Itoa</span><span class="op" id="2116010">(</span><span class="ident" id="2116011">base</span><span class="op" id="2116015">)</span><span class="op" id="2116016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116020">goto</span>&nbsp;<span class="ident" id="2116025">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2116032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116036">n</span>&nbsp;<span class="op" id="2116038">=</span>&nbsp;<span class="num" id="2116040">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116043">cutoff</span>&nbsp;<span class="op" id="2116050">=</span>&nbsp;<span class="ident" id="2116052">cutoff64</span><span class="op" id="2116060">(</span><span class="ident" id="2116061">base</span><span class="op" id="2116065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116068">maxVal</span>&nbsp;<span class="op" id="2116075">=</span>&nbsp;<span class="num" id="2116077">1</span><span class="op" id="2116078">&lt;&lt;</span><span class="builtintype" id="2116080">uint</span><span class="op" id="2116084">(</span><span class="ident" id="2116085">bitSize</span><span class="op" id="2116092">)</span>&nbsp;<span class="op" id="2116094">-</span>&nbsp;<span class="num" id="2116096">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116100">for</span>&nbsp;<span class="ident" id="2116104">i</span>&nbsp;<span class="op" id="2116106">:=</span>&nbsp;<span class="num" id="2116109">0</span><span class="op" id="2116110">;</span>&nbsp;<span class="ident" id="2116112">i</span>&nbsp;<span class="op" id="2116114">&lt;</span>&nbsp;<span class="builtinfunc" id="2116116">len</span><span class="op" id="2116119">(</span><span class="ident" id="2116120">s</span><span class="op" id="2116121">)</span><span class="op" id="2116122">;</span>&nbsp;<span class="ident" id="2116124">i</span><span class="op" id="2116125">++</span>&nbsp;<span class="op" id="2116128">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116132">var</span>&nbsp;<span class="ident" id="2116136">v</span>&nbsp;<span class="builtintype" id="2116138">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116145">d</span>&nbsp;<span class="op" id="2116147">:=</span>&nbsp;<span class="ident" id="2116150">s</span><span class="op" id="2116151">[</span><span class="ident" id="2116152">i</span><span class="op" id="2116153">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116157">switch</span>&nbsp;<span class="op" id="2116164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116168">case</span>&nbsp;<span class="string" id="2116173">&#39;0&#39;</span>&nbsp;<span class="op" id="2116177">&lt;=</span>&nbsp;<span class="ident" id="2116180">d</span>&nbsp;<span class="op" id="2116182">&amp;&amp;</span>&nbsp;<span class="ident" id="2116185">d</span>&nbsp;<span class="op" id="2116187">&lt;=</span>&nbsp;<span class="string" id="2116190">&#39;9&#39;</span><span class="op" id="2116193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116198">v</span>&nbsp;<span class="op" id="2116200">=</span>&nbsp;<span class="ident" id="2116202">d</span>&nbsp;<span class="op" id="2116204">-</span>&nbsp;<span class="string" id="2116206">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116212">case</span>&nbsp;<span class="string" id="2116217">&#39;a&#39;</span>&nbsp;<span class="op" id="2116221">&lt;=</span>&nbsp;<span class="ident" id="2116224">d</span>&nbsp;<span class="op" id="2116226">&amp;&amp;</span>&nbsp;<span class="ident" id="2116229">d</span>&nbsp;<span class="op" id="2116231">&lt;=</span>&nbsp;<span class="string" id="2116234">&#39;z&#39;</span><span class="op" id="2116237">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116242">v</span>&nbsp;<span class="op" id="2116244">=</span>&nbsp;<span class="ident" id="2116246">d</span>&nbsp;<span class="op" id="2116248">-</span>&nbsp;<span class="string" id="2116250">&#39;a&#39;</span>&nbsp;<span class="op" id="2116254">+</span>&nbsp;<span class="num" id="2116256">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116261">case</span>&nbsp;<span class="string" id="2116266">&#39;A&#39;</span>&nbsp;<span class="op" id="2116270">&lt;=</span>&nbsp;<span class="ident" id="2116273">d</span>&nbsp;<span class="op" id="2116275">&amp;&amp;</span>&nbsp;<span class="ident" id="2116278">d</span>&nbsp;<span class="op" id="2116280">&lt;=</span>&nbsp;<span class="string" id="2116283">&#39;Z&#39;</span><span class="op" id="2116286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116291">v</span>&nbsp;<span class="op" id="2116293">=</span>&nbsp;<span class="ident" id="2116295">d</span>&nbsp;<span class="op" id="2116297">-</span>&nbsp;<span class="string" id="2116299">&#39;A&#39;</span>&nbsp;<span class="op" id="2116303">+</span>&nbsp;<span class="num" id="2116305">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116310">default</span><span class="op" id="2116317">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116322">n</span>&nbsp;<span class="op" id="2116324">=</span>&nbsp;<span class="num" id="2116326">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116331">err</span>&nbsp;<span class="op" id="2116335">=</span>&nbsp;<span class="ident" id="2116337">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116350">goto</span>&nbsp;<span class="ident" id="2116355">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2116363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116367">if</span>&nbsp;<span class="builtintype" id="2116370">int</span><span class="op" id="2116373">(</span><span class="ident" id="2116374">v</span><span class="op" id="2116375">)</span>&nbsp;<span class="op" id="2116377">&gt;=</span>&nbsp;<span class="ident" id="2116380">base</span>&nbsp;<span class="op" id="2116385">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116390">n</span>&nbsp;<span class="op" id="2116392">=</span>&nbsp;<span class="num" id="2116394">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116399">err</span>&nbsp;<span class="op" id="2116403">=</span>&nbsp;<span class="ident" id="2116405">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116418">goto</span>&nbsp;<span class="ident" id="2116423">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2116431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116436">if</span>&nbsp;<span class="ident" id="2116439">n</span>&nbsp;<span class="op" id="2116441">&gt;=</span>&nbsp;<span class="ident" id="2116444">cutoff</span>&nbsp;<span class="op" id="2116451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2116456">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116479">n</span>&nbsp;<span class="op" id="2116481">=</span>&nbsp;<span class="num" id="2116483">1</span><span class="op" id="2116484">&lt;&lt;</span><span class="num" id="2116486">64</span>&nbsp;<span class="op" id="2116489">-</span>&nbsp;<span class="num" id="2116491">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116496">err</span>&nbsp;<span class="op" id="2116500">=</span>&nbsp;<span class="ident" id="2116502">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116514">goto</span>&nbsp;<span class="ident" id="2116519">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2116527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116531">n</span>&nbsp;<span class="op" id="2116533">*=</span>&nbsp;<span class="ident" id="2116536">uint64</span><span class="op" id="2116542">(</span><span class="ident" id="2116543">base</span><span class="op" id="2116547">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116552">n1</span>&nbsp;<span class="op" id="2116555">:=</span>&nbsp;<span class="ident" id="2116558">n</span>&nbsp;<span class="op" id="2116560">+</span>&nbsp;<span class="ident" id="2116562">uint64</span><span class="op" id="2116568">(</span><span class="ident" id="2116569">v</span><span class="op" id="2116570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116574">if</span>&nbsp;<span class="ident" id="2116577">n1</span>&nbsp;<span class="op" id="2116580">&lt;</span>&nbsp;<span class="ident" id="2116582">n</span>&nbsp;<span class="op" id="2116584">||</span>&nbsp;<span class="ident" id="2116587">n1</span>&nbsp;<span class="op" id="2116590">&gt;</span>&nbsp;<span class="ident" id="2116592">maxVal</span>&nbsp;<span class="op" id="2116599">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2116604">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116624">n</span>&nbsp;<span class="op" id="2116626">=</span>&nbsp;<span class="num" id="2116628">1</span><span class="op" id="2116629">&lt;&lt;</span><span class="num" id="2116631">64</span>&nbsp;<span class="op" id="2116634">-</span>&nbsp;<span class="num" id="2116636">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116641">err</span>&nbsp;<span class="op" id="2116645">=</span>&nbsp;<span class="ident" id="2116647">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116659">goto</span>&nbsp;<span class="ident" id="2116664">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2116672">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2116676">n</span>&nbsp;<span class="op" id="2116678">=</span>&nbsp;<span class="ident" id="2116680">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2116684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116688">return</span>&nbsp;<span class="ident" id="2116695">n</span><span class="op" id="2116696">,</span>&nbsp;<span class="ident" id="2116698">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="2116703">Error</span><span class="op" id="2116708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2116711">return</span>&nbsp;<span class="ident" id="2116718">n</span><span class="op" id="2116719">,</span>&nbsp;<span class="op" id="2116721">&amp;</span><span class="ident" id="2116722">NumError</span><span class="op" id="2116730">{</span><span class="string" id="2116731">&#34;ParseUint&#34;</span><span class="op" id="2116742">,</span>&nbsp;<span class="ident" id="2116744">s0</span><span class="op" id="2116746">,</span>&nbsp;<span class="ident" id="2116748">err</span><span class="op" id="2116751">}</span><br>
<span class="lineno"></span><span class="op" id="2116753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2116756">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="2116822">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2116887">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2116951">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2116982">//</span><br>
<span class="lineno"></span><span class="comment" id="2116985">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="2117036">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="2117102">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2117155">//</span><br>
<span class="lineno"></span><span class="comment" id="2117158">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2117223">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="2117286">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="2117346">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2117408">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2117472">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2117530">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="2117563">func</span>&nbsp;<span class="ident" id="2117568">ParseInt</span><span class="op" id="2117576">(</span><span class="ident" id="2117577">s</span>&nbsp;<span class="builtintype" id="2117579">string</span><span class="op" id="2117585">,</span>&nbsp;<span class="ident" id="2117587">base</span>&nbsp;<span class="builtintype" id="2117592">int</span><span class="op" id="2117595">,</span>&nbsp;<span class="ident" id="2117597">bitSize</span>&nbsp;<span class="builtintype" id="2117605">int</span><span class="op" id="2117608">)</span>&nbsp;<span class="op" id="2117610">(</span><span class="ident" id="2117611">i</span>&nbsp;<span class="ident" id="2117613">int64</span><span class="op" id="2117618">,</span>&nbsp;<span class="ident" id="2117620">err</span>&nbsp;<span class="builtintype" id="2117624">error</span><span class="op" id="2117629">)</span>&nbsp;<span class="op" id="2117631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2117634">const</span>&nbsp;<span class="ident" id="2117640">fnParseInt</span>&nbsp;<span class="op" id="2117651">=</span>&nbsp;<span class="string" id="2117653">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2117666">if</span>&nbsp;<span class="ident" id="2117669">bitSize</span>&nbsp;<span class="op" id="2117677">==</span>&nbsp;<span class="num" id="2117680">0</span>&nbsp;<span class="op" id="2117682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117686">bitSize</span>&nbsp;<span class="op" id="2117694">=</span>&nbsp;<span class="builtintype" id="2117696">int</span><span class="op" id="2117699">(</span><span class="ident" id="2117700">IntSize</span><span class="op" id="2117707">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2117710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2117714">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2117736">if</span>&nbsp;<span class="builtinfunc" id="2117739">len</span><span class="op" id="2117742">(</span><span class="ident" id="2117743">s</span><span class="op" id="2117744">)</span>&nbsp;<span class="op" id="2117746">==</span>&nbsp;<span class="num" id="2117749">0</span>&nbsp;<span class="op" id="2117751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2117755">return</span>&nbsp;<span class="num" id="2117762">0</span><span class="op" id="2117763">,</span>&nbsp;<span class="ident" id="2117765">syntaxError</span><span class="op" id="2117776">(</span><span class="ident" id="2117777">fnParseInt</span><span class="op" id="2117787">,</span>&nbsp;<span class="ident" id="2117789">s</span><span class="op" id="2117790">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2117793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2117797">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117824">s0</span>&nbsp;<span class="op" id="2117827">:=</span>&nbsp;<span class="ident" id="2117830">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117833">neg</span>&nbsp;<span class="op" id="2117837">:=</span>&nbsp;<span class="ident" id="2117840">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2117847">if</span>&nbsp;<span class="ident" id="2117850">s</span><span class="op" id="2117851">[</span><span class="num" id="2117852">0</span><span class="op" id="2117853">]</span>&nbsp;<span class="op" id="2117855">==</span>&nbsp;<span class="string" id="2117858">&#39;+&#39;</span>&nbsp;<span class="op" id="2117862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117866">s</span>&nbsp;<span class="op" id="2117868">=</span>&nbsp;<span class="ident" id="2117870">s</span><span class="op" id="2117871">[</span><span class="num" id="2117872">1</span><span class="op" id="2117873">:</span><span class="op" id="2117874">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2117877">}</span>&nbsp;<span class="keyword" id="2117879">else</span>&nbsp;<span class="keyword" id="2117884">if</span>&nbsp;<span class="ident" id="2117887">s</span><span class="op" id="2117888">[</span><span class="num" id="2117889">0</span><span class="op" id="2117890">]</span>&nbsp;<span class="op" id="2117892">==</span>&nbsp;<span class="string" id="2117895">&#39;-&#39;</span>&nbsp;<span class="op" id="2117899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117903">neg</span>&nbsp;<span class="op" id="2117907">=</span>&nbsp;<span class="ident" id="2117909">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117916">s</span>&nbsp;<span class="op" id="2117918">=</span>&nbsp;<span class="ident" id="2117920">s</span><span class="op" id="2117921">[</span><span class="num" id="2117922">1</span><span class="op" id="2117923">:</span><span class="op" id="2117924">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2117927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2117931">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2117969">var</span>&nbsp;<span class="ident" id="2117973">un</span>&nbsp;<span class="ident" id="2117976">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2117984">un</span><span class="op" id="2117986">,</span>&nbsp;<span class="ident" id="2117988">err</span>&nbsp;<span class="op" id="2117992">=</span>&nbsp;<span class="ident" id="2117994">ParseUint</span><span class="op" id="2118003">(</span><span class="ident" id="2118004">s</span><span class="op" id="2118005">,</span>&nbsp;<span class="ident" id="2118007">base</span><span class="op" id="2118011">,</span>&nbsp;<span class="ident" id="2118013">bitSize</span><span class="op" id="2118020">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118023">if</span>&nbsp;<span class="ident" id="2118026">err</span>&nbsp;<span class="op" id="2118030">!=</span>&nbsp;<span class="ident" id="2118033">nil</span>&nbsp;<span class="op" id="2118037">&amp;&amp;</span>&nbsp;<span class="ident" id="2118040">err</span><span class="op" id="2118043">.</span><span class="op" id="2118044">(</span><span class="op" id="2118045">*</span><span class="ident" id="2118046">NumError</span><span class="op" id="2118054">)</span><span class="op" id="2118055">.</span><span class="ident" id="2118056">Err</span>&nbsp;<span class="op" id="2118060">!=</span>&nbsp;<span class="ident" id="2118063">ErrRange</span>&nbsp;<span class="op" id="2118072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2118076">err</span><span class="op" id="2118079">.</span><span class="op" id="2118080">(</span><span class="op" id="2118081">*</span><span class="ident" id="2118082">NumError</span><span class="op" id="2118090">)</span><span class="op" id="2118091">.</span><span class="ident" id="2118092">Func</span>&nbsp;<span class="op" id="2118097">=</span>&nbsp;<span class="ident" id="2118099">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2118112">err</span><span class="op" id="2118115">.</span><span class="op" id="2118116">(</span><span class="op" id="2118117">*</span><span class="ident" id="2118118">NumError</span><span class="op" id="2118126">)</span><span class="op" id="2118127">.</span><span class="ident" id="2118128">Num</span>&nbsp;<span class="op" id="2118132">=</span>&nbsp;<span class="ident" id="2118134">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118139">return</span>&nbsp;<span class="num" id="2118146">0</span><span class="op" id="2118147">,</span>&nbsp;<span class="ident" id="2118149">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2118154">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2118157">cutoff</span>&nbsp;<span class="op" id="2118164">:=</span>&nbsp;<span class="ident" id="2118167">uint64</span><span class="op" id="2118173">(</span><span class="num" id="2118174">1</span>&nbsp;<span class="op" id="2118176">&lt;&lt;</span>&nbsp;<span class="builtintype" id="2118179">uint</span><span class="op" id="2118183">(</span><span class="ident" id="2118184">bitSize</span><span class="op" id="2118191">-</span><span class="num" id="2118192">1</span><span class="op" id="2118193">)</span><span class="op" id="2118194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118197">if</span>&nbsp;<span class="op" id="2118200">!</span><span class="ident" id="2118201">neg</span>&nbsp;<span class="op" id="2118205">&amp;&amp;</span>&nbsp;<span class="ident" id="2118208">un</span>&nbsp;<span class="op" id="2118211">&gt;=</span>&nbsp;<span class="ident" id="2118214">cutoff</span>&nbsp;<span class="op" id="2118221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118225">return</span>&nbsp;<span class="ident" id="2118232">int64</span><span class="op" id="2118237">(</span><span class="ident" id="2118238">cutoff</span>&nbsp;<span class="op" id="2118245">-</span>&nbsp;<span class="num" id="2118247">1</span><span class="op" id="2118248">)</span><span class="op" id="2118249">,</span>&nbsp;<span class="ident" id="2118251">rangeError</span><span class="op" id="2118261">(</span><span class="ident" id="2118262">fnParseInt</span><span class="op" id="2118272">,</span>&nbsp;<span class="ident" id="2118274">s0</span><span class="op" id="2118276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2118279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118282">if</span>&nbsp;<span class="ident" id="2118285">neg</span>&nbsp;<span class="op" id="2118289">&amp;&amp;</span>&nbsp;<span class="ident" id="2118292">un</span>&nbsp;<span class="op" id="2118295">&gt;</span>&nbsp;<span class="ident" id="2118297">cutoff</span>&nbsp;<span class="op" id="2118304">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118308">return</span>&nbsp;<span class="op" id="2118315">-</span><span class="ident" id="2118316">int64</span><span class="op" id="2118321">(</span><span class="ident" id="2118322">cutoff</span><span class="op" id="2118328">)</span><span class="op" id="2118329">,</span>&nbsp;<span class="ident" id="2118331">rangeError</span><span class="op" id="2118341">(</span><span class="ident" id="2118342">fnParseInt</span><span class="op" id="2118352">,</span>&nbsp;<span class="ident" id="2118354">s0</span><span class="op" id="2118356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2118359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2118362">n</span>&nbsp;<span class="op" id="2118364">:=</span>&nbsp;<span class="ident" id="2118367">int64</span><span class="op" id="2118372">(</span><span class="ident" id="2118373">un</span><span class="op" id="2118375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118378">if</span>&nbsp;<span class="ident" id="2118381">neg</span>&nbsp;<span class="op" id="2118385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2118389">n</span>&nbsp;<span class="op" id="2118391">=</span>&nbsp;<span class="op" id="2118393">-</span><span class="ident" id="2118394">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2118397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118400">return</span>&nbsp;<span class="ident" id="2118407">n</span><span class="op" id="2118408">,</span>&nbsp;<span class="ident" id="2118410">nil</span><br>
<span class="lineno"></span><span class="op" id="2118414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2118417">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="2118462">func</span>&nbsp;<span class="ident" id="2118467">Atoi</span><span class="op" id="2118471">(</span><span class="ident" id="2118472">s</span>&nbsp;<span class="builtintype" id="2118474">string</span><span class="op" id="2118480">)</span>&nbsp;<span class="op" id="2118482">(</span><span class="ident" id="2118483">i</span>&nbsp;<span class="builtintype" id="2118485">int</span><span class="op" id="2118488">,</span>&nbsp;<span class="ident" id="2118490">err</span>&nbsp;<span class="builtintype" id="2118494">error</span><span class="op" id="2118499">)</span>&nbsp;<span class="op" id="2118501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2118504">i64</span><span class="op" id="2118507">,</span>&nbsp;<span class="ident" id="2118509">err</span>&nbsp;<span class="op" id="2118513">:=</span>&nbsp;<span class="ident" id="2118516">ParseInt</span><span class="op" id="2118524">(</span><span class="ident" id="2118525">s</span><span class="op" id="2118526">,</span>&nbsp;<span class="num" id="2118528">10</span><span class="op" id="2118530">,</span>&nbsp;<span class="num" id="2118532">0</span><span class="op" id="2118533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2118536">return</span>&nbsp;<span class="builtintype" id="2118543">int</span><span class="op" id="2118546">(</span><span class="ident" id="2118547">i64</span><span class="op" id="2118550">)</span><span class="op" id="2118551">,</span>&nbsp;<span class="ident" id="2118553">err</span><br>
<span class="lineno"></span><span class="op" id="2118557">}</span>
</div>
</body>
</html>
