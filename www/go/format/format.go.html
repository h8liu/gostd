<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6356723">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6356778">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6356832">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6356883">//&nbsp;Package&nbsp;format&nbsp;implements&nbsp;standard&nbsp;formatting&nbsp;of&nbsp;Go&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="6356946">package</span>&nbsp;<span class="ident" id="6356954">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6356962">import</span>&nbsp;<span class="op" id="6356969">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6356972">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6356981">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6356988">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6356998">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6357011">&#34;go/printer&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6357025">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6357037">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6357043">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="6357053">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6357056">var</span>&nbsp;<span class="ident" id="6357060">config</span>&nbsp;<span class="op" id="6357067">=</span>&nbsp;<span class="ident" id="6357069"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6357076">.</span><span class="ident" id="6357077">Config</span><span class="op" id="6357083">{</span><span class="ident" id="6357084">Mode</span><span class="op" id="6357088">:</span>&nbsp;<span class="ident" id="6357090"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6357097">.</span><span class="ident" id="6357098">UseSpaces</span>&nbsp;<span class="op" id="6357108">|</span>&nbsp;<span class="ident" id="6357110"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6357117">.</span><span class="ident" id="6357118">TabIndent</span><span class="op" id="6357127">,</span>&nbsp;<span class="ident" id="6357129">Tabwidth</span><span class="op" id="6357137">:</span>&nbsp;<span class="num" id="6357139">8</span><span class="op" id="6357140">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6357143">const</span>&nbsp;<span class="ident" id="6357149">parserMode</span>&nbsp;<span class="op" id="6357160">=</span>&nbsp;<span class="ident" id="6357162"><a href="/go/format/format.go.html#6356998">parser</a></span><span class="op" id="6357168">.</span><span class="ident" id="6357169">ParseComments</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6357184">//&nbsp;Node&nbsp;formats&nbsp;node&nbsp;in&nbsp;canonical&nbsp;gofmt&nbsp;style&nbsp;and&nbsp;writes&nbsp;the&nbsp;result&nbsp;to&nbsp;dst.</span><br>
<span class="lineno"></span><span class="comment" id="6357260">//</span><br>
<span class="lineno">25</span><span class="comment" id="6357263">//&nbsp;The&nbsp;node&nbsp;type&nbsp;must&nbsp;be&nbsp;*ast.File,&nbsp;*printer.CommentedNode,&nbsp;[]ast.Decl,</span><br>
<span class="lineno"></span><span class="comment" id="6357335">//&nbsp;[]ast.Stmt,&nbsp;or&nbsp;assignment-compatible&nbsp;to&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,</span><br>
<span class="lineno"></span><span class="comment" id="6357408">//&nbsp;or&nbsp;ast.Stmt.&nbsp;Node&nbsp;does&nbsp;not&nbsp;modify&nbsp;node.&nbsp;Imports&nbsp;are&nbsp;not&nbsp;sorted&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6357478">//&nbsp;nodes&nbsp;representing&nbsp;partial&nbsp;source&nbsp;files&nbsp;(i.e.,&nbsp;if&nbsp;the&nbsp;node&nbsp;is&nbsp;not&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="6357550">//&nbsp;*ast.File&nbsp;or&nbsp;a&nbsp;*printer.CommentedNode&nbsp;not&nbsp;wrapping&nbsp;an&nbsp;*ast.File).</span><br>
<span class="lineno">30</span><span class="comment" id="6357619">//</span><br>
<span class="lineno"></span><span class="comment" id="6357622">//&nbsp;The&nbsp;function&nbsp;may&nbsp;return&nbsp;early&nbsp;(before&nbsp;the&nbsp;entire&nbsp;result&nbsp;is&nbsp;written)</span><br>
<span class="lineno"></span><span class="comment" id="6357693">//&nbsp;and&nbsp;return&nbsp;a&nbsp;formatting&nbsp;error,&nbsp;for&nbsp;instance&nbsp;due&nbsp;to&nbsp;an&nbsp;incorrect&nbsp;AST.</span><br>
<span class="lineno"></span><span class="comment" id="6357765">//</span><br>
<span class="lineno"></span><span class="keyword" id="6357768">func</span>&nbsp;<span class="ident" id="6357773">Node</span><span class="op" id="6357777">(</span><span class="ident" id="6357778">dst</span>&nbsp;<span class="ident" id="6357782"><a href="/go/format/format.go.html#6357037">io</a></span><span class="op" id="6357784">.</span><span class="ident" id="6357785">Writer</span><span class="op" id="6357791">,</span>&nbsp;<span class="ident" id="6357793">fset</span>&nbsp;<span class="op" id="6357798">*</span><span class="ident" id="6357799"><a href="/go/format/format.go.html#6357025">token</a></span><span class="op" id="6357804">.</span><span class="ident" id="6357805">FileSet</span><span class="op" id="6357812">,</span>&nbsp;<span class="ident" id="6357814">node</span>&nbsp;<span class="keyword" id="6357819">interface</span><span class="op" id="6357828">{</span><span class="op" id="6357829">}</span><span class="op" id="6357830">)</span>&nbsp;<span class="builtintype" id="6357832">error</span>&nbsp;<span class="op" id="6357838">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6357841">//&nbsp;Determine&nbsp;if&nbsp;we&nbsp;have&nbsp;a&nbsp;complete&nbsp;source&nbsp;file&nbsp;(file&nbsp;!=&nbsp;nil).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357904">var</span>&nbsp;<span class="ident" id="6357908">file</span>&nbsp;<span class="op" id="6357913">*</span><span class="ident" id="6357914"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6357917">.</span><span class="ident" id="6357918">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357924">var</span>&nbsp;<span class="ident" id="6357928">cnode</span>&nbsp;<span class="op" id="6357934">*</span><span class="ident" id="6357935"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6357942">.</span><span class="ident" id="6357943">CommentedNode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357958">switch</span>&nbsp;<span class="ident" id="6357965">n</span>&nbsp;<span class="op" id="6357967">:=</span>&nbsp;<span class="ident" id="6357970"><a href="/go/format/format.go.html#6357814">node</a></span><span class="op" id="6357974">.</span><span class="op" id="6357975">(</span><span class="keyword" id="6357976">type</span><span class="op" id="6357980">)</span>&nbsp;<span class="op" id="6357982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6357985">case</span>&nbsp;<span class="op" id="6357990">*</span><span class="ident" id="6357991"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6357994">.</span><span class="ident" id="6357995">File</span><span class="op" id="6357999">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358003"><a href="/go/format/format.go.html#6357908">file</a></span>&nbsp;<span class="op" id="6358008">=</span>&nbsp;<span class="ident" id="6358010"><a href="/go/format/format.go.html#6357965">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358013">case</span>&nbsp;<span class="op" id="6358018">*</span><span class="ident" id="6358019"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6358026">.</span><span class="ident" id="6358027">CommentedNode</span><span class="op" id="6358040">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358044">if</span>&nbsp;<span class="ident" id="6358047">f</span><span class="op" id="6358048">,</span>&nbsp;<span class="ident" id="6358050">ok</span>&nbsp;<span class="op" id="6358053">:=</span>&nbsp;<span class="ident" id="6358056"><a href="/go/format/format.go.html#6357965">n</a></span><span class="op" id="6358057">.</span><span class="ident" id="6358058">Node</span><span class="op" id="6358062">.</span><span class="op" id="6358063">(</span><span class="op" id="6358064">*</span><span class="ident" id="6358065"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6358068">.</span><span class="ident" id="6358069">File</span><span class="op" id="6358073">)</span><span class="op" id="6358074">;</span>&nbsp;<span class="ident" id="6358076"><a href="/go/format/format.go.html#6358050">ok</a></span>&nbsp;<span class="op" id="6358079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358084"><a href="/go/format/format.go.html#6357908">file</a></span>&nbsp;<span class="op" id="6358089">=</span>&nbsp;<span class="ident" id="6358091"><a href="/go/format/format.go.html#6358047">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358096"><a href="/go/format/format.go.html#6357928">cnode</a></span>&nbsp;<span class="op" id="6358102">=</span>&nbsp;<span class="ident" id="6358104"><a href="/go/format/format.go.html#6357965">n</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6358115">//&nbsp;Sort&nbsp;imports&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358146">if</span>&nbsp;<span class="ident" id="6358149"><a href="/go/format/format.go.html#6357908">file</a></span>&nbsp;<span class="op" id="6358154">!=</span>&nbsp;<span class="ident" id="6358157">nil</span>&nbsp;<span class="op" id="6358161">&amp;&amp;</span>&nbsp;<span class="ident" id="6358164"><a href="/go/format/format.go.html#6359735">hasUnsortedImports</a></span><span class="op" id="6358182">(</span><span class="ident" id="6358183"><a href="/go/format/format.go.html#6357908">file</a></span><span class="op" id="6358187">)</span>&nbsp;<span class="op" id="6358189">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6358193">//&nbsp;Make&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;AST&nbsp;because&nbsp;ast.SortImports&nbsp;is&nbsp;destructive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6358261">//&nbsp;TODO(gri)&nbsp;Do&nbsp;this&nbsp;more&nbsp;efficiently.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358302">var</span>&nbsp;<span class="ident" id="6358306">buf</span>&nbsp;<span class="ident" id="6358310"><a href="/go/format/format.go.html#6356972">bytes</a></span><span class="op" id="6358315">.</span><span class="ident" id="6358316">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358325">err</span>&nbsp;<span class="op" id="6358329">:=</span>&nbsp;<span class="ident" id="6358332"><a href="/go/format/format.go.html#6357060">config</a></span><span class="op" id="6358338">.</span><span class="ident" id="6358339">Fprint</span><span class="op" id="6358345">(</span><span class="op" id="6358346">&amp;</span><span class="ident" id="6358347"><a href="/go/format/format.go.html#6358306">buf</a></span><span class="op" id="6358350">,</span>&nbsp;<span class="ident" id="6358352"><a href="/go/format/format.go.html#6357793">fset</a></span><span class="op" id="6358356">,</span>&nbsp;<span class="ident" id="6358358"><a href="/go/format/format.go.html#6357908">file</a></span><span class="op" id="6358362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358366">if</span>&nbsp;<span class="ident" id="6358369"><a href="/go/format/format.go.html#6358325">err</a></span>&nbsp;<span class="op" id="6358373">!=</span>&nbsp;<span class="ident" id="6358376">nil</span>&nbsp;<span class="op" id="6358380">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358385">return</span>&nbsp;<span class="ident" id="6358392"><a href="/go/format/format.go.html#6358325">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358402"><a href="/go/format/format.go.html#6357908">file</a></span><span class="op" id="6358406">,</span>&nbsp;<span class="ident" id="6358408"><a href="/go/format/format.go.html#6358325">err</a></span>&nbsp;<span class="op" id="6358412">=</span>&nbsp;<span class="ident" id="6358414"><a href="/go/format/format.go.html#6356998">parser</a></span><span class="op" id="6358420">.</span><span class="ident" id="6358421">ParseFile</span><span class="op" id="6358430">(</span><span class="ident" id="6358431"><a href="/go/format/format.go.html#6357793">fset</a></span><span class="op" id="6358435">,</span>&nbsp;<span class="string" id="6358437">&#34;&#34;</span><span class="op" id="6358439">,</span>&nbsp;<span class="ident" id="6358441"><a href="/go/format/format.go.html#6358306">buf</a></span><span class="op" id="6358444">.</span><span class="ident" id="6358445">Bytes</span><span class="op" id="6358450">(</span><span class="op" id="6358451">)</span><span class="op" id="6358452">,</span>&nbsp;<span class="ident" id="6358454"><a href="/go/format/format.go.html#6357149">parserMode</a></span><span class="op" id="6358464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358468">if</span>&nbsp;<span class="ident" id="6358471"><a href="/go/format/format.go.html#6358325">err</a></span>&nbsp;<span class="op" id="6358475">!=</span>&nbsp;<span class="ident" id="6358478">nil</span>&nbsp;<span class="op" id="6358482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6358487">//&nbsp;We&nbsp;should&nbsp;never&nbsp;get&nbsp;here.&nbsp;If&nbsp;we&nbsp;do,&nbsp;provide&nbsp;good&nbsp;diagnostic.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358554">return</span>&nbsp;<span class="ident" id="6358561"><a href="/go/format/format.go.html#6356981">fmt</a></span><span class="op" id="6358564">.</span><span class="ident" id="6358565">Errorf</span><span class="op" id="6358571">(</span><span class="string" id="6358572">&#34;format.Node&nbsp;internal&nbsp;error&nbsp;(%s)&#34;</span><span class="op" id="6358605">,</span>&nbsp;<span class="ident" id="6358607"><a href="/go/format/format.go.html#6358325">err</a></span><span class="op" id="6358610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358618"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6358621">.</span><span class="ident" id="6358622">SortImports</span><span class="op" id="6358633">(</span><span class="ident" id="6358634"><a href="/go/format/format.go.html#6357793">fset</a></span><span class="op" id="6358638">,</span>&nbsp;<span class="ident" id="6358640"><a href="/go/format/format.go.html#6357908">file</a></span><span class="op" id="6358644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6358649">//&nbsp;Use&nbsp;new&nbsp;file&nbsp;with&nbsp;sorted&nbsp;imports.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358688"><a href="/go/format/format.go.html#6357814">node</a></span>&nbsp;<span class="op" id="6358693">=</span>&nbsp;<span class="ident" id="6358695"><a href="/go/format/format.go.html#6357908">file</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358702">if</span>&nbsp;<span class="ident" id="6358705"><a href="/go/format/format.go.html#6357928">cnode</a></span>&nbsp;<span class="op" id="6358711">!=</span>&nbsp;<span class="ident" id="6358714">nil</span>&nbsp;<span class="op" id="6358718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6358723"><a href="/go/format/format.go.html#6357814">node</a></span>&nbsp;<span class="op" id="6358728">=</span>&nbsp;<span class="op" id="6358730">&amp;</span><span class="ident" id="6358731"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6358738">.</span><span class="ident" id="6358739">CommentedNode</span><span class="op" id="6358752">{</span><span class="ident" id="6358753">Node</span><span class="op" id="6358757">:</span>&nbsp;<span class="ident" id="6358759"><a href="/go/format/format.go.html#6357908">file</a></span><span class="op" id="6358763">,</span>&nbsp;<span class="ident" id="6358765">Comments</span><span class="op" id="6358773">:</span>&nbsp;<span class="ident" id="6358775"><a href="/go/format/format.go.html#6357928">cnode</a></span><span class="op" id="6358780">.</span><span class="ident" id="6358781">Comments</span><span class="op" id="6358789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6358796">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6358800">return</span>&nbsp;<span class="ident" id="6358807"><a href="/go/format/format.go.html#6357060">config</a></span><span class="op" id="6358813">.</span><span class="ident" id="6358814">Fprint</span><span class="op" id="6358820">(</span><span class="ident" id="6358821"><a href="/go/format/format.go.html#6357778">dst</a></span><span class="op" id="6358824">,</span>&nbsp;<span class="ident" id="6358826"><a href="/go/format/format.go.html#6357793">fset</a></span><span class="op" id="6358830">,</span>&nbsp;<span class="ident" id="6358832"><a href="/go/format/format.go.html#6357814">node</a></span><span class="op" id="6358836">)</span><br>
<span class="lineno"></span><span class="op" id="6358838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6358841">//&nbsp;Source&nbsp;formats&nbsp;src&nbsp;in&nbsp;canonical&nbsp;gofmt&nbsp;style&nbsp;and&nbsp;returns&nbsp;the&nbsp;result</span><br>
<span class="lineno">75</span><span class="comment" id="6358911">//&nbsp;or&nbsp;an&nbsp;(I/O&nbsp;or&nbsp;syntax)&nbsp;error.&nbsp;src&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;syntactically</span><br>
<span class="lineno"></span><span class="comment" id="6358981">//&nbsp;correct&nbsp;Go&nbsp;source&nbsp;file,&nbsp;or&nbsp;a&nbsp;list&nbsp;of&nbsp;Go&nbsp;declarations&nbsp;or&nbsp;statements.</span><br>
<span class="lineno"></span><span class="comment" id="6359052">//</span><br>
<span class="lineno"></span><span class="comment" id="6359055">//&nbsp;If&nbsp;src&nbsp;is&nbsp;a&nbsp;partial&nbsp;source&nbsp;file,&nbsp;the&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space&nbsp;of&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="6359129">//&nbsp;is&nbsp;applied&nbsp;to&nbsp;the&nbsp;result&nbsp;(such&nbsp;that&nbsp;it&nbsp;has&nbsp;the&nbsp;same&nbsp;leading&nbsp;and&nbsp;trailing</span><br>
<span class="lineno">80</span><span class="comment" id="6359205">//&nbsp;space&nbsp;as&nbsp;src),&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;indented&nbsp;by&nbsp;the&nbsp;same&nbsp;amount&nbsp;as&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="6359282">//&nbsp;line&nbsp;of&nbsp;src&nbsp;containing&nbsp;code.&nbsp;Imports&nbsp;are&nbsp;not&nbsp;sorted&nbsp;for&nbsp;partial&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6359363">//</span><br>
<span class="lineno"></span><span class="keyword" id="6359366">func</span>&nbsp;<span class="ident" id="6359371">Source</span><span class="op" id="6359377">(</span><span class="ident" id="6359378">src</span>&nbsp;<span class="op" id="6359382">[</span><span class="op" id="6359383">]</span><span class="builtintype" id="6359384">byte</span><span class="op" id="6359388">)</span>&nbsp;<span class="op" id="6359390">(</span><span class="op" id="6359391">[</span><span class="op" id="6359392">]</span><span class="builtintype" id="6359393">byte</span><span class="op" id="6359397">,</span>&nbsp;<span class="builtintype" id="6359399">error</span><span class="op" id="6359404">)</span>&nbsp;<span class="op" id="6359406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359409">fset</span>&nbsp;<span class="op" id="6359414">:=</span>&nbsp;<span class="ident" id="6359417"><a href="/go/format/format.go.html#6357025">token</a></span><span class="op" id="6359422">.</span><span class="ident" id="6359423">NewFileSet</span><span class="op" id="6359433">(</span><span class="op" id="6359434">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359437">file</span><span class="op" id="6359441">,</span>&nbsp;<span class="ident" id="6359443">sourceAdj</span><span class="op" id="6359452">,</span>&nbsp;<span class="ident" id="6359454">indentAdj</span><span class="op" id="6359463">,</span>&nbsp;<span class="ident" id="6359465">err</span>&nbsp;<span class="op" id="6359469">:=</span>&nbsp;<span class="ident" id="6359472"><a href="/go/format/format.go.html#6360616">parse</a></span><span class="op" id="6359477">(</span><span class="ident" id="6359478"><a href="/go/format/format.go.html#6359409">fset</a></span><span class="op" id="6359482">,</span>&nbsp;<span class="string" id="6359484">&#34;&#34;</span><span class="op" id="6359486">,</span>&nbsp;<span class="ident" id="6359488"><a href="/go/format/format.go.html#6359378">src</a></span><span class="op" id="6359491">,</span>&nbsp;<span class="ident" id="6359493">true</span><span class="op" id="6359497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359500">if</span>&nbsp;<span class="ident" id="6359503"><a href="/go/format/format.go.html#6359465">err</a></span>&nbsp;<span class="op" id="6359507">!=</span>&nbsp;<span class="ident" id="6359510">nil</span>&nbsp;<span class="op" id="6359514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359518">return</span>&nbsp;<span class="ident" id="6359525">nil</span><span class="op" id="6359528">,</span>&nbsp;<span class="ident" id="6359530"><a href="/go/format/format.go.html#6359465">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359539">if</span>&nbsp;<span class="ident" id="6359542"><a href="/go/format/format.go.html#6359443">sourceAdj</a></span>&nbsp;<span class="op" id="6359552">==</span>&nbsp;<span class="ident" id="6359555">nil</span>&nbsp;<span class="op" id="6359559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359563">//&nbsp;Complete&nbsp;source&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359590">//&nbsp;TODO(gri)&nbsp;consider&nbsp;doing&nbsp;this&nbsp;always.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359633"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6359636">.</span><span class="ident" id="6359637">SortImports</span><span class="op" id="6359648">(</span><span class="ident" id="6359649"><a href="/go/format/format.go.html#6359409">fset</a></span><span class="op" id="6359653">,</span>&nbsp;<span class="ident" id="6359655"><a href="/go/format/format.go.html#6359437">file</a></span><span class="op" id="6359659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359662">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359666">return</span>&nbsp;<span class="ident" id="6359673"><a href="/go/format/format.go.html#6363104">format</a></span><span class="op" id="6359679">(</span><span class="ident" id="6359680"><a href="/go/format/format.go.html#6359409">fset</a></span><span class="op" id="6359684">,</span>&nbsp;<span class="ident" id="6359686"><a href="/go/format/format.go.html#6359437">file</a></span><span class="op" id="6359690">,</span>&nbsp;<span class="ident" id="6359692"><a href="/go/format/format.go.html#6359443">sourceAdj</a></span><span class="op" id="6359701">,</span>&nbsp;<span class="ident" id="6359703"><a href="/go/format/format.go.html#6359454">indentAdj</a></span><span class="op" id="6359712">,</span>&nbsp;<span class="ident" id="6359714"><a href="/go/format/format.go.html#6359378">src</a></span><span class="op" id="6359717">,</span>&nbsp;<span class="ident" id="6359719"><a href="/go/format/format.go.html#6357060">config</a></span><span class="op" id="6359725">)</span><br>
<span class="lineno"></span><span class="op" id="6359727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6359730">func</span>&nbsp;<span class="ident" id="6359735">hasUnsortedImports</span><span class="op" id="6359753">(</span><span class="ident" id="6359754">file</span>&nbsp;<span class="op" id="6359759">*</span><span class="ident" id="6359760"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6359763">.</span><span class="ident" id="6359764">File</span><span class="op" id="6359768">)</span>&nbsp;<span class="builtintype" id="6359770">bool</span>&nbsp;<span class="op" id="6359775">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359778">for</span>&nbsp;<span class="ident" id="6359782">_</span><span class="op" id="6359783">,</span>&nbsp;<span class="ident" id="6359785">d</span>&nbsp;<span class="op" id="6359787">:=</span>&nbsp;<span class="keyword" id="6359790">range</span>&nbsp;<span class="ident" id="6359796"><a href="/go/format/format.go.html#6359754">file</a></span><span class="op" id="6359800">.</span><span class="ident" id="6359801">Decls</span>&nbsp;<span class="op" id="6359807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6359811">d</span><span class="op" id="6359812">,</span>&nbsp;<span class="ident" id="6359814">ok</span>&nbsp;<span class="op" id="6359817">:=</span>&nbsp;<span class="ident" id="6359820"><a href="/go/format/format.go.html#6359785">d</a></span><span class="op" id="6359821">.</span><span class="op" id="6359822">(</span><span class="op" id="6359823">*</span><span class="ident" id="6359824"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6359827">.</span><span class="ident" id="6359828">GenDecl</span><span class="op" id="6359835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359839">if</span>&nbsp;<span class="op" id="6359842">!</span><span class="ident" id="6359843"><a href="/go/format/format.go.html#6359814">ok</a></span>&nbsp;<span class="op" id="6359846">||</span>&nbsp;<span class="ident" id="6359849"><a href="/go/format/format.go.html#6359811">d</a></span><span class="op" id="6359850">.</span><span class="ident" id="6359851">Tok</span>&nbsp;<span class="op" id="6359855">!=</span>&nbsp;<span class="ident" id="6359858"><a href="/go/format/format.go.html#6357025">token</a></span><span class="op" id="6359863">.</span><span class="ident" id="6359864">IMPORT</span>&nbsp;<span class="op" id="6359871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359876">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6359924">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359956">return</span>&nbsp;<span class="ident" id="6359963">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6359971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359975">if</span>&nbsp;<span class="ident" id="6359978"><a href="/go/format/format.go.html#6359811">d</a></span><span class="op" id="6359979">.</span><span class="ident" id="6359980">Lparen</span><span class="op" id="6359986">.</span><span class="ident" id="6359987">IsValid</span><span class="op" id="6359994">(</span><span class="op" id="6359995">)</span>&nbsp;<span class="op" id="6359997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6360002">//&nbsp;For&nbsp;now&nbsp;assume&nbsp;all&nbsp;grouped&nbsp;imports&nbsp;are&nbsp;unsorted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6360057">//&nbsp;TODO(gri)&nbsp;Should&nbsp;check&nbsp;if&nbsp;they&nbsp;are&nbsp;sorted&nbsp;already.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360114">return</span>&nbsp;<span class="ident" id="6360121">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6360132">//&nbsp;Ungrouped&nbsp;imports&nbsp;are&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6360177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6360180">return</span>&nbsp;<span class="ident" id="6360187">false</span><br>
<span class="lineno">115</span><span class="op" id="6360193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6360196">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6360276">//&nbsp;Support&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="6360297">//</span><br>
<span class="lineno">120</span><span class="comment" id="6360300">//&nbsp;The&nbsp;functions&nbsp;parse,&nbsp;format,&nbsp;and&nbsp;isSpace&nbsp;below&nbsp;are&nbsp;identical&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6360371">//&nbsp;respective&nbsp;functions&nbsp;in&nbsp;cmd/gofmt/gofmt.go&nbsp;-&nbsp;keep&nbsp;them&nbsp;in&nbsp;sync!</span><br>
<span class="lineno"></span><span class="comment" id="6360438">//</span><br>
<span class="lineno"></span><span class="comment" id="6360441">//&nbsp;TODO(gri)&nbsp;Factor&nbsp;out&nbsp;this&nbsp;functionality,&nbsp;eventually.</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="6360498">//&nbsp;parse&nbsp;parses&nbsp;src,&nbsp;which&nbsp;was&nbsp;read&nbsp;from&nbsp;the&nbsp;named&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="6360555">//&nbsp;as&nbsp;a&nbsp;Go&nbsp;source&nbsp;file,&nbsp;declaration,&nbsp;or&nbsp;statement&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="6360611">func</span>&nbsp;<span class="ident" id="6360616">parse</span><span class="op" id="6360621">(</span><span class="ident" id="6360622">fset</span>&nbsp;<span class="op" id="6360627">*</span><span class="ident" id="6360628"><a href="/go/format/format.go.html#6357025">token</a></span><span class="op" id="6360633">.</span><span class="ident" id="6360634">FileSet</span><span class="op" id="6360641">,</span>&nbsp;<span class="ident" id="6360643">filename</span>&nbsp;<span class="builtintype" id="6360652">string</span><span class="op" id="6360658">,</span>&nbsp;<span class="ident" id="6360660">src</span>&nbsp;<span class="op" id="6360664">[</span><span class="op" id="6360665">]</span><span class="builtintype" id="6360666">byte</span><span class="op" id="6360670">,</span>&nbsp;<span class="ident" id="6360672">fragmentOk</span>&nbsp;<span class="builtintype" id="6360683">bool</span><span class="op" id="6360687">)</span>&nbsp;<span class="op" id="6360689">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360692">file</span>&nbsp;<span class="op" id="6360697">*</span><span class="ident" id="6360698"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6360701">.</span><span class="ident" id="6360702">File</span><span class="op" id="6360706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360709">sourceAdj</span>&nbsp;<span class="keyword" id="6360719">func</span><span class="op" id="6360723">(</span><span class="ident" id="6360724">src</span>&nbsp;<span class="op" id="6360728">[</span><span class="op" id="6360729">]</span><span class="builtintype" id="6360730">byte</span><span class="op" id="6360734">,</span>&nbsp;<span class="ident" id="6360736">indent</span>&nbsp;<span class="builtintype" id="6360743">int</span><span class="op" id="6360746">)</span>&nbsp;<span class="op" id="6360748">[</span><span class="op" id="6360749">]</span><span class="builtintype" id="6360750">byte</span><span class="op" id="6360754">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360757">indentAdj</span>&nbsp;<span class="builtintype" id="6360767">int</span><span class="op" id="6360770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360773">err</span>&nbsp;<span class="builtintype" id="6360777">error</span><span class="op" id="6360782">,</span><br>
<span class="lineno"></span><span class="op" id="6360784">)</span>&nbsp;<span class="op" id="6360786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6360789">//&nbsp;Try&nbsp;as&nbsp;whole&nbsp;source&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6360819"><a href="/go/format/format.go.html#6360692">file</a></span><span class="op" id="6360823">,</span>&nbsp;<span class="ident" id="6360825"><a href="/go/format/format.go.html#6360773">err</a></span>&nbsp;<span class="op" id="6360829">=</span>&nbsp;<span class="ident" id="6360831"><a href="/go/format/format.go.html#6356998">parser</a></span><span class="op" id="6360837">.</span><span class="ident" id="6360838">ParseFile</span><span class="op" id="6360847">(</span><span class="ident" id="6360848"><a href="/go/format/format.go.html#6360622">fset</a></span><span class="op" id="6360852">,</span>&nbsp;<span class="ident" id="6360854"><a href="/go/format/format.go.html#6360643">filename</a></span><span class="op" id="6360862">,</span>&nbsp;<span class="ident" id="6360864"><a href="/go/format/format.go.html#6360660">src</a></span><span class="op" id="6360867">,</span>&nbsp;<span class="ident" id="6360869"><a href="/go/format/format.go.html#6357149">parserMode</a></span><span class="op" id="6360879">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6360882">//&nbsp;If&nbsp;there&#39;s&nbsp;no&nbsp;error,&nbsp;return.&nbsp;&nbsp;If&nbsp;the&nbsp;error&nbsp;is&nbsp;that&nbsp;the&nbsp;source&nbsp;file&nbsp;didn&#39;t&nbsp;begin&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6360973">//&nbsp;package&nbsp;line&nbsp;and&nbsp;source&nbsp;fragments&nbsp;are&nbsp;ok,&nbsp;fall&nbsp;through&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361035">//&nbsp;try&nbsp;as&nbsp;a&nbsp;source&nbsp;fragment.&nbsp;&nbsp;Stop&nbsp;and&nbsp;return&nbsp;on&nbsp;any&nbsp;other&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361102">if</span>&nbsp;<span class="ident" id="6361105"><a href="/go/format/format.go.html#6360773">err</a></span>&nbsp;<span class="op" id="6361109">==</span>&nbsp;<span class="ident" id="6361112">nil</span>&nbsp;<span class="op" id="6361116">||</span>&nbsp;<span class="op" id="6361119">!</span><span class="ident" id="6361120"><a href="/go/format/format.go.html#6360672">fragmentOk</a></span>&nbsp;<span class="op" id="6361131">||</span>&nbsp;<span class="op" id="6361134">!</span><span class="ident" id="6361135"><a href="/go/format/format.go.html#6357043">strings</a></span><span class="op" id="6361142">.</span><span class="ident" id="6361143">Contains</span><span class="op" id="6361151">(</span><span class="ident" id="6361152"><a href="/go/format/format.go.html#6360773">err</a></span><span class="op" id="6361155">.</span><span class="ident" id="6361156">Error</span><span class="op" id="6361161">(</span><span class="op" id="6361162">)</span><span class="op" id="6361163">,</span>&nbsp;<span class="string" id="6361165">&#34;expected&nbsp;&#39;package&#39;&#34;</span><span class="op" id="6361185">)</span>&nbsp;<span class="op" id="6361187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361191">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361203">//&nbsp;If&nbsp;this&nbsp;is&nbsp;a&nbsp;declaration&nbsp;list,&nbsp;make&nbsp;it&nbsp;a&nbsp;source&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361260">//&nbsp;by&nbsp;inserting&nbsp;a&nbsp;package&nbsp;clause.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361295">//&nbsp;Insert&nbsp;using&nbsp;a&nbsp;;,&nbsp;not&nbsp;a&nbsp;newline,&nbsp;so&nbsp;that&nbsp;the&nbsp;line&nbsp;numbers</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361357">//&nbsp;in&nbsp;psrc&nbsp;match&nbsp;the&nbsp;ones&nbsp;in&nbsp;src.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361392">psrc</span>&nbsp;<span class="op" id="6361397">:=</span>&nbsp;<span class="builtinfunc" id="6361400">append</span><span class="op" id="6361406">(</span><span class="op" id="6361407">[</span><span class="op" id="6361408">]</span><span class="builtintype" id="6361409">byte</span><span class="op" id="6361413">(</span><span class="string" id="6361414">&#34;package&nbsp;p;&#34;</span><span class="op" id="6361426">)</span><span class="op" id="6361427">,</span>&nbsp;<span class="ident" id="6361429"><a href="/go/format/format.go.html#6360660">src</a></span><span class="op" id="6361432">...</span><span class="op" id="6361435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361438"><a href="/go/format/format.go.html#6360692">file</a></span><span class="op" id="6361442">,</span>&nbsp;<span class="ident" id="6361444"><a href="/go/format/format.go.html#6360773">err</a></span>&nbsp;<span class="op" id="6361448">=</span>&nbsp;<span class="ident" id="6361450"><a href="/go/format/format.go.html#6356998">parser</a></span><span class="op" id="6361456">.</span><span class="ident" id="6361457">ParseFile</span><span class="op" id="6361466">(</span><span class="ident" id="6361467"><a href="/go/format/format.go.html#6360622">fset</a></span><span class="op" id="6361471">,</span>&nbsp;<span class="ident" id="6361473"><a href="/go/format/format.go.html#6360643">filename</a></span><span class="op" id="6361481">,</span>&nbsp;<span class="ident" id="6361483"><a href="/go/format/format.go.html#6361392">psrc</a></span><span class="op" id="6361487">,</span>&nbsp;<span class="ident" id="6361489"><a href="/go/format/format.go.html#6357149">parserMode</a></span><span class="op" id="6361499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361502">if</span>&nbsp;<span class="ident" id="6361505"><a href="/go/format/format.go.html#6360773">err</a></span>&nbsp;<span class="op" id="6361509">==</span>&nbsp;<span class="ident" id="6361512">nil</span>&nbsp;<span class="op" id="6361516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361520"><a href="/go/format/format.go.html#6360709">sourceAdj</a></span>&nbsp;<span class="op" id="6361530">=</span>&nbsp;<span class="keyword" id="6361532">func</span><span class="op" id="6361536">(</span><span class="ident" id="6361537">src</span>&nbsp;<span class="op" id="6361541">[</span><span class="op" id="6361542">]</span><span class="builtintype" id="6361543">byte</span><span class="op" id="6361547">,</span>&nbsp;<span class="ident" id="6361549">indent</span>&nbsp;<span class="builtintype" id="6361556">int</span><span class="op" id="6361559">)</span>&nbsp;<span class="op" id="6361561">[</span><span class="op" id="6361562">]</span><span class="builtintype" id="6361563">byte</span>&nbsp;<span class="op" id="6361568">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361573">//&nbsp;Remove&nbsp;the&nbsp;package&nbsp;clause.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361606">//&nbsp;Gofmt&nbsp;has&nbsp;turned&nbsp;the&nbsp;;&nbsp;into&nbsp;a&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6361646"><a href="/go/format/format.go.html#6361537">src</a></span>&nbsp;<span class="op" id="6361650">=</span>&nbsp;<span class="ident" id="6361652"><a href="/go/format/format.go.html#6361537">src</a></span><span class="op" id="6361655">[</span><span class="ident" id="6361656"><a href="/go/format/format.go.html#6361549">indent</a></span><span class="op" id="6361662">+</span><span class="builtinfunc" id="6361663">len</span><span class="op" id="6361666">(</span><span class="string" id="6361667">&#34;package&nbsp;p\n&#34;</span><span class="op" id="6361680">)</span><span class="op" id="6361681">:</span><span class="op" id="6361682">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361687">return</span>&nbsp;<span class="ident" id="6361694"><a href="/go/format/format.go.html#6356972">bytes</a></span><span class="op" id="6361699">.</span><span class="ident" id="6361700">TrimSpace</span><span class="op" id="6361709">(</span><span class="ident" id="6361710"><a href="/go/format/format.go.html#6361537">src</a></span><span class="op" id="6361713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361717">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361721">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361732">//&nbsp;If&nbsp;the&nbsp;error&nbsp;is&nbsp;that&nbsp;the&nbsp;source&nbsp;file&nbsp;didn&#39;t&nbsp;begin&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361793">//&nbsp;declaration,&nbsp;fall&nbsp;through&nbsp;to&nbsp;try&nbsp;as&nbsp;a&nbsp;statement&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361851">//&nbsp;Stop&nbsp;and&nbsp;return&nbsp;on&nbsp;any&nbsp;other&nbsp;error.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361891">if</span>&nbsp;<span class="op" id="6361894">!</span><span class="ident" id="6361895"><a href="/go/format/format.go.html#6357043">strings</a></span><span class="op" id="6361902">.</span><span class="ident" id="6361903">Contains</span><span class="op" id="6361911">(</span><span class="ident" id="6361912"><a href="/go/format/format.go.html#6360773">err</a></span><span class="op" id="6361915">.</span><span class="ident" id="6361916">Error</span><span class="op" id="6361921">(</span><span class="op" id="6361922">)</span><span class="op" id="6361923">,</span>&nbsp;<span class="string" id="6361925">&#34;expected&nbsp;declaration&#34;</span><span class="op" id="6361947">)</span>&nbsp;<span class="op" id="6361949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6361953">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6361961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6361965">//&nbsp;If&nbsp;this&nbsp;is&nbsp;a&nbsp;statement&nbsp;list,&nbsp;make&nbsp;it&nbsp;a&nbsp;source&nbsp;file</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362020">//&nbsp;by&nbsp;inserting&nbsp;a&nbsp;package&nbsp;clause&nbsp;and&nbsp;turning&nbsp;the&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362075">//&nbsp;into&nbsp;a&nbsp;function&nbsp;body.&nbsp;&nbsp;This&nbsp;handles&nbsp;expressions&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362132">//&nbsp;Insert&nbsp;using&nbsp;a&nbsp;;,&nbsp;not&nbsp;a&nbsp;newline,&nbsp;so&nbsp;that&nbsp;the&nbsp;line&nbsp;numbers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362194">//&nbsp;in&nbsp;fsrc&nbsp;match&nbsp;the&nbsp;ones&nbsp;in&nbsp;src.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362229">fsrc</span>&nbsp;<span class="op" id="6362234">:=</span>&nbsp;<span class="builtinfunc" id="6362237">append</span><span class="op" id="6362243">(</span><span class="builtinfunc" id="6362244">append</span><span class="op" id="6362250">(</span><span class="op" id="6362251">[</span><span class="op" id="6362252">]</span><span class="builtintype" id="6362253">byte</span><span class="op" id="6362257">(</span><span class="string" id="6362258">&#34;package&nbsp;p;&nbsp;func&nbsp;_()&nbsp;{&#34;</span><span class="op" id="6362281">)</span><span class="op" id="6362282">,</span>&nbsp;<span class="ident" id="6362284"><a href="/go/format/format.go.html#6360660">src</a></span><span class="op" id="6362287">...</span><span class="op" id="6362290">)</span><span class="op" id="6362291">,</span>&nbsp;<span class="string" id="6362293">&#39;\n&#39;</span><span class="op" id="6362297">,</span>&nbsp;<span class="string" id="6362299">&#39;}&#39;</span><span class="op" id="6362302">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362305"><a href="/go/format/format.go.html#6360692">file</a></span><span class="op" id="6362309">,</span>&nbsp;<span class="ident" id="6362311"><a href="/go/format/format.go.html#6360773">err</a></span>&nbsp;<span class="op" id="6362315">=</span>&nbsp;<span class="ident" id="6362317"><a href="/go/format/format.go.html#6356998">parser</a></span><span class="op" id="6362323">.</span><span class="ident" id="6362324">ParseFile</span><span class="op" id="6362333">(</span><span class="ident" id="6362334"><a href="/go/format/format.go.html#6360622">fset</a></span><span class="op" id="6362338">,</span>&nbsp;<span class="ident" id="6362340"><a href="/go/format/format.go.html#6360643">filename</a></span><span class="op" id="6362348">,</span>&nbsp;<span class="ident" id="6362350"><a href="/go/format/format.go.html#6362229">fsrc</a></span><span class="op" id="6362354">,</span>&nbsp;<span class="ident" id="6362356"><a href="/go/format/format.go.html#6357149">parserMode</a></span><span class="op" id="6362366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6362369">if</span>&nbsp;<span class="ident" id="6362372"><a href="/go/format/format.go.html#6360773">err</a></span>&nbsp;<span class="op" id="6362376">==</span>&nbsp;<span class="ident" id="6362379">nil</span>&nbsp;<span class="op" id="6362383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362387"><a href="/go/format/format.go.html#6360709">sourceAdj</a></span>&nbsp;<span class="op" id="6362397">=</span>&nbsp;<span class="keyword" id="6362399">func</span><span class="op" id="6362403">(</span><span class="ident" id="6362404">src</span>&nbsp;<span class="op" id="6362408">[</span><span class="op" id="6362409">]</span><span class="builtintype" id="6362410">byte</span><span class="op" id="6362414">,</span>&nbsp;<span class="ident" id="6362416">indent</span>&nbsp;<span class="builtintype" id="6362423">int</span><span class="op" id="6362426">)</span>&nbsp;<span class="op" id="6362428">[</span><span class="op" id="6362429">]</span><span class="builtintype" id="6362430">byte</span>&nbsp;<span class="op" id="6362435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362440">//&nbsp;Cap&nbsp;adjusted&nbsp;indent&nbsp;to&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6362475">if</span>&nbsp;<span class="ident" id="6362478"><a href="/go/format/format.go.html#6362416">indent</a></span>&nbsp;<span class="op" id="6362485">&lt;</span>&nbsp;<span class="num" id="6362487">0</span>&nbsp;<span class="op" id="6362489">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362495"><a href="/go/format/format.go.html#6362416">indent</a></span>&nbsp;<span class="op" id="6362502">=</span>&nbsp;<span class="num" id="6362504">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6362509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362514">//&nbsp;Remove&nbsp;the&nbsp;wrapping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362541">//&nbsp;Gofmt&nbsp;has&nbsp;turned&nbsp;the&nbsp;;&nbsp;into&nbsp;a&nbsp;\n\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362583">//&nbsp;There&nbsp;will&nbsp;be&nbsp;two&nbsp;non-blank&nbsp;lines&nbsp;with&nbsp;indent,&nbsp;hence&nbsp;2*indent.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362652"><a href="/go/format/format.go.html#6362404">src</a></span>&nbsp;<span class="op" id="6362656">=</span>&nbsp;<span class="ident" id="6362658"><a href="/go/format/format.go.html#6362404">src</a></span><span class="op" id="6362661">[</span><span class="num" id="6362662">2</span><span class="op" id="6362663">*</span><span class="ident" id="6362664"><a href="/go/format/format.go.html#6362416">indent</a></span><span class="op" id="6362670">+</span><span class="builtinfunc" id="6362671">len</span><span class="op" id="6362674">(</span><span class="string" id="6362675">&#34;package&nbsp;p\n\nfunc&nbsp;_()&nbsp;{&#34;</span><span class="op" id="6362700">)</span><span class="op" id="6362701">:</span><span class="op" id="6362702">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362707"><a href="/go/format/format.go.html#6362404">src</a></span>&nbsp;<span class="op" id="6362711">=</span>&nbsp;<span class="ident" id="6362713"><a href="/go/format/format.go.html#6362404">src</a></span><span class="op" id="6362716">[</span><span class="op" id="6362717">:</span><span class="builtinfunc" id="6362718">len</span><span class="op" id="6362721">(</span><span class="ident" id="6362722"><a href="/go/format/format.go.html#6362404">src</a></span><span class="op" id="6362725">)</span><span class="op" id="6362726">-</span><span class="op" id="6362727">(</span><span class="ident" id="6362728"><a href="/go/format/format.go.html#6362416">indent</a></span><span class="op" id="6362734">+</span><span class="builtinfunc" id="6362735">len</span><span class="op" id="6362738">(</span><span class="string" id="6362739">&#34;\n}\n&#34;</span><span class="op" id="6362746">)</span><span class="op" id="6362747">)</span><span class="op" id="6362748">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6362753">return</span>&nbsp;<span class="ident" id="6362760"><a href="/go/format/format.go.html#6356972">bytes</a></span><span class="op" id="6362765">.</span><span class="ident" id="6362766">TrimSpace</span><span class="op" id="6362775">(</span><span class="ident" id="6362776"><a href="/go/format/format.go.html#6362404">src</a></span><span class="op" id="6362779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6362783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362787">//&nbsp;Gofmt&nbsp;has&nbsp;also&nbsp;indented&nbsp;the&nbsp;function&nbsp;body&nbsp;one&nbsp;level.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362845">//&nbsp;Adjust&nbsp;that&nbsp;with&nbsp;indentAdj.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6362878"><a href="/go/format/format.go.html#6360757">indentAdj</a></span>&nbsp;<span class="op" id="6362888">=</span>&nbsp;<span class="op" id="6362890">-</span><span class="num" id="6362891">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6362894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6362898">//&nbsp;Succeeded,&nbsp;or&nbsp;out&nbsp;of&nbsp;options.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6362932">return</span><br>
<span class="lineno"></span><span class="op" id="6362939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6362942">//&nbsp;format&nbsp;formats&nbsp;the&nbsp;given&nbsp;package&nbsp;file&nbsp;originally&nbsp;obtained&nbsp;from&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="6363012">//&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;result&nbsp;based&nbsp;on&nbsp;the&nbsp;original&nbsp;source&nbsp;via&nbsp;sourceAdj</span><br>
<span class="lineno">195</span><span class="comment" id="6363081">//&nbsp;and&nbsp;indentAdj.</span><br>
<span class="lineno"></span><span class="keyword" id="6363099">func</span>&nbsp;<span class="ident" id="6363104">format</span><span class="op" id="6363110">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363113">fset</span>&nbsp;<span class="op" id="6363118">*</span><span class="ident" id="6363119"><a href="/go/format/format.go.html#6357025">token</a></span><span class="op" id="6363124">.</span><span class="ident" id="6363125">FileSet</span><span class="op" id="6363132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363135">file</span>&nbsp;<span class="op" id="6363140">*</span><span class="ident" id="6363141"><a href="/go/format/format.go.html#6356988">ast</a></span><span class="op" id="6363144">.</span><span class="ident" id="6363145">File</span><span class="op" id="6363149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363152">sourceAdj</span>&nbsp;<span class="keyword" id="6363162">func</span><span class="op" id="6363166">(</span><span class="ident" id="6363167">src</span>&nbsp;<span class="op" id="6363171">[</span><span class="op" id="6363172">]</span><span class="builtintype" id="6363173">byte</span><span class="op" id="6363177">,</span>&nbsp;<span class="ident" id="6363179">indent</span>&nbsp;<span class="builtintype" id="6363186">int</span><span class="op" id="6363189">)</span>&nbsp;<span class="op" id="6363191">[</span><span class="op" id="6363192">]</span><span class="builtintype" id="6363193">byte</span><span class="op" id="6363197">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363200">indentAdj</span>&nbsp;<span class="builtintype" id="6363210">int</span><span class="op" id="6363213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363216">src</span>&nbsp;<span class="op" id="6363220">[</span><span class="op" id="6363221">]</span><span class="builtintype" id="6363222">byte</span><span class="op" id="6363226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363229">cfg</span>&nbsp;<span class="ident" id="6363233"><a href="/go/format/format.go.html#6357011">printer</a></span><span class="op" id="6363240">.</span><span class="ident" id="6363241">Config</span><span class="op" id="6363247">,</span><br>
<span class="lineno"></span><span class="op" id="6363249">)</span>&nbsp;<span class="op" id="6363251">(</span><span class="op" id="6363252">[</span><span class="op" id="6363253">]</span><span class="builtintype" id="6363254">byte</span><span class="op" id="6363258">,</span>&nbsp;<span class="builtintype" id="6363260">error</span><span class="op" id="6363265">)</span>&nbsp;<span class="op" id="6363267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363270">if</span>&nbsp;<span class="ident" id="6363273"><a href="/go/format/format.go.html#6363152">sourceAdj</a></span>&nbsp;<span class="op" id="6363283">==</span>&nbsp;<span class="ident" id="6363286">nil</span>&nbsp;<span class="op" id="6363290">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6363294">//&nbsp;Complete&nbsp;source&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363321">var</span>&nbsp;<span class="ident" id="6363325">buf</span>&nbsp;<span class="ident" id="6363329"><a href="/go/format/format.go.html#6356972">bytes</a></span><span class="op" id="6363334">.</span><span class="ident" id="6363335">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363344">err</span>&nbsp;<span class="op" id="6363348">:=</span>&nbsp;<span class="ident" id="6363351"><a href="/go/format/format.go.html#6363229">cfg</a></span><span class="op" id="6363354">.</span><span class="ident" id="6363355">Fprint</span><span class="op" id="6363361">(</span><span class="op" id="6363362">&amp;</span><span class="ident" id="6363363"><a href="/go/format/format.go.html#6363325">buf</a></span><span class="op" id="6363366">,</span>&nbsp;<span class="ident" id="6363368"><a href="/go/format/format.go.html#6363113">fset</a></span><span class="op" id="6363372">,</span>&nbsp;<span class="ident" id="6363374"><a href="/go/format/format.go.html#6363135">file</a></span><span class="op" id="6363378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363382">if</span>&nbsp;<span class="ident" id="6363385"><a href="/go/format/format.go.html#6363344">err</a></span>&nbsp;<span class="op" id="6363389">!=</span>&nbsp;<span class="ident" id="6363392">nil</span>&nbsp;<span class="op" id="6363396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363401">return</span>&nbsp;<span class="ident" id="6363408">nil</span><span class="op" id="6363411">,</span>&nbsp;<span class="ident" id="6363413"><a href="/go/format/format.go.html#6363344">err</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6363419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363423">return</span>&nbsp;<span class="ident" id="6363430"><a href="/go/format/format.go.html#6363325">buf</a></span><span class="op" id="6363433">.</span><span class="ident" id="6363434">Bytes</span><span class="op" id="6363439">(</span><span class="op" id="6363440">)</span><span class="op" id="6363441">,</span>&nbsp;<span class="ident" id="6363443">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6363448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6363452">//&nbsp;Partial&nbsp;source&nbsp;file.</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6363477">//&nbsp;Determine&nbsp;and&nbsp;prepend&nbsp;leading&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363518">i</span><span class="op" id="6363519">,</span>&nbsp;<span class="ident" id="6363521">j</span>&nbsp;<span class="op" id="6363523">:=</span>&nbsp;<span class="num" id="6363526">0</span><span class="op" id="6363527">,</span>&nbsp;<span class="num" id="6363529">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363532">for</span>&nbsp;<span class="ident" id="6363536"><a href="/go/format/format.go.html#6363521">j</a></span>&nbsp;<span class="op" id="6363538">&lt;</span>&nbsp;<span class="builtinfunc" id="6363540">len</span><span class="op" id="6363543">(</span><span class="ident" id="6363544"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6363547">)</span>&nbsp;<span class="op" id="6363549">&amp;&amp;</span>&nbsp;<span class="ident" id="6363552"><a href="/go/format/format.go.html#6364514">isSpace</a></span><span class="op" id="6363559">(</span><span class="ident" id="6363560"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6363563">[</span><span class="ident" id="6363564"><a href="/go/format/format.go.html#6363521">j</a></span><span class="op" id="6363565">]</span><span class="op" id="6363566">)</span>&nbsp;<span class="op" id="6363568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363572">if</span>&nbsp;<span class="ident" id="6363575"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6363578">[</span><span class="ident" id="6363579"><a href="/go/format/format.go.html#6363521">j</a></span><span class="op" id="6363580">]</span>&nbsp;<span class="op" id="6363582">==</span>&nbsp;<span class="string" id="6363585">&#39;\n&#39;</span>&nbsp;<span class="op" id="6363590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363595"><a href="/go/format/format.go.html#6363518">i</a></span>&nbsp;<span class="op" id="6363597">=</span>&nbsp;<span class="ident" id="6363599"><a href="/go/format/format.go.html#6363521">j</a></span>&nbsp;<span class="op" id="6363601">+</span>&nbsp;<span class="num" id="6363603">1</span>&nbsp;<span class="comment" id="6363605">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;last&nbsp;line&nbsp;in&nbsp;leading&nbsp;space</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6363652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363656"><a href="/go/format/format.go.html#6363521">j</a></span><span class="op" id="6363657">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6363661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363664">var</span>&nbsp;<span class="ident" id="6363668">res</span>&nbsp;<span class="op" id="6363672">[</span><span class="op" id="6363673">]</span><span class="builtintype" id="6363674">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363680"><a href="/go/format/format.go.html#6363668">res</a></span>&nbsp;<span class="op" id="6363684">=</span>&nbsp;<span class="builtinfunc" id="6363686">append</span><span class="op" id="6363692">(</span><span class="ident" id="6363693"><a href="/go/format/format.go.html#6363668">res</a></span><span class="op" id="6363696">,</span>&nbsp;<span class="ident" id="6363698"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6363701">[</span><span class="op" id="6363702">:</span><span class="ident" id="6363703"><a href="/go/format/format.go.html#6363518">i</a></span><span class="op" id="6363704">]</span><span class="op" id="6363705">...</span><span class="op" id="6363708">)</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6363712">//&nbsp;Determine&nbsp;and&nbsp;prepend&nbsp;indentation&nbsp;of&nbsp;first&nbsp;code&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6363770">//&nbsp;Spaces&nbsp;are&nbsp;ignored&nbsp;unless&nbsp;there&nbsp;are&nbsp;no&nbsp;tabs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6363819">//&nbsp;in&nbsp;which&nbsp;case&nbsp;spaces&nbsp;count&nbsp;as&nbsp;one&nbsp;tab.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363862">indent</span>&nbsp;<span class="op" id="6363869">:=</span>&nbsp;<span class="num" id="6363872">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363875">hasSpace</span>&nbsp;<span class="op" id="6363884">:=</span>&nbsp;<span class="ident" id="6363887">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363894">for</span>&nbsp;<span class="ident" id="6363898">_</span><span class="op" id="6363899">,</span>&nbsp;<span class="ident" id="6363901">b</span>&nbsp;<span class="op" id="6363903">:=</span>&nbsp;<span class="keyword" id="6363906">range</span>&nbsp;<span class="ident" id="6363912"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6363915">[</span><span class="ident" id="6363916"><a href="/go/format/format.go.html#6363518">i</a></span><span class="op" id="6363917">:</span><span class="ident" id="6363918"><a href="/go/format/format.go.html#6363521">j</a></span><span class="op" id="6363919">]</span>&nbsp;<span class="op" id="6363921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363925">switch</span>&nbsp;<span class="ident" id="6363932"><a href="/go/format/format.go.html#6363901">b</a></span>&nbsp;<span class="op" id="6363934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363938">case</span>&nbsp;<span class="string" id="6363943">&#39;&nbsp;&#39;</span><span class="op" id="6363946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363951"><a href="/go/format/format.go.html#6363875">hasSpace</a></span>&nbsp;<span class="op" id="6363960">=</span>&nbsp;<span class="ident" id="6363962">true</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6363969">case</span>&nbsp;<span class="string" id="6363974">&#39;\t&#39;</span><span class="op" id="6363978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6363983"><a href="/go/format/format.go.html#6363862">indent</a></span><span class="op" id="6363989">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6363994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6363997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364000">if</span>&nbsp;<span class="ident" id="6364003"><a href="/go/format/format.go.html#6363862">indent</a></span>&nbsp;<span class="op" id="6364010">==</span>&nbsp;<span class="num" id="6364013">0</span>&nbsp;<span class="op" id="6364015">&amp;&amp;</span>&nbsp;<span class="ident" id="6364018"><a href="/go/format/format.go.html#6363875">hasSpace</a></span>&nbsp;<span class="op" id="6364027">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364031"><a href="/go/format/format.go.html#6363862">indent</a></span>&nbsp;<span class="op" id="6364038">=</span>&nbsp;<span class="num" id="6364040">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6364043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364046">for</span>&nbsp;<span class="ident" id="6364050">i</span>&nbsp;<span class="op" id="6364052">:=</span>&nbsp;<span class="num" id="6364055">0</span><span class="op" id="6364056">;</span>&nbsp;<span class="ident" id="6364058"><a href="/go/format/format.go.html#6364050">i</a></span>&nbsp;<span class="op" id="6364060">&lt;</span>&nbsp;<span class="ident" id="6364062"><a href="/go/format/format.go.html#6363862">indent</a></span><span class="op" id="6364068">;</span>&nbsp;<span class="ident" id="6364070"><a href="/go/format/format.go.html#6364050">i</a></span><span class="op" id="6364071">++</span>&nbsp;<span class="op" id="6364074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364078"><a href="/go/format/format.go.html#6363668">res</a></span>&nbsp;<span class="op" id="6364082">=</span>&nbsp;<span class="builtinfunc" id="6364084">append</span><span class="op" id="6364090">(</span><span class="ident" id="6364091"><a href="/go/format/format.go.html#6363668">res</a></span><span class="op" id="6364094">,</span>&nbsp;<span class="string" id="6364096">&#39;\t&#39;</span><span class="op" id="6364100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6364103">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6364107">//&nbsp;Format&nbsp;the&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6364130">//&nbsp;Write&nbsp;it&nbsp;without&nbsp;any&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364183"><a href="/go/format/format.go.html#6363229">cfg</a></span><span class="op" id="6364186">.</span><span class="ident" id="6364187">Indent</span>&nbsp;<span class="op" id="6364194">=</span>&nbsp;<span class="ident" id="6364196"><a href="/go/format/format.go.html#6363862">indent</a></span>&nbsp;<span class="op" id="6364203">+</span>&nbsp;<span class="ident" id="6364205"><a href="/go/format/format.go.html#6363200">indentAdj</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364216">var</span>&nbsp;<span class="ident" id="6364220">buf</span>&nbsp;<span class="ident" id="6364224"><a href="/go/format/format.go.html#6356972">bytes</a></span><span class="op" id="6364229">.</span><span class="ident" id="6364230">Buffer</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364238">err</span>&nbsp;<span class="op" id="6364242">:=</span>&nbsp;<span class="ident" id="6364245"><a href="/go/format/format.go.html#6363229">cfg</a></span><span class="op" id="6364248">.</span><span class="ident" id="6364249">Fprint</span><span class="op" id="6364255">(</span><span class="op" id="6364256">&amp;</span><span class="ident" id="6364257"><a href="/go/format/format.go.html#6364220">buf</a></span><span class="op" id="6364260">,</span>&nbsp;<span class="ident" id="6364262"><a href="/go/format/format.go.html#6363113">fset</a></span><span class="op" id="6364266">,</span>&nbsp;<span class="ident" id="6364268"><a href="/go/format/format.go.html#6363135">file</a></span><span class="op" id="6364272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364275">if</span>&nbsp;<span class="ident" id="6364278"><a href="/go/format/format.go.html#6364238">err</a></span>&nbsp;<span class="op" id="6364282">!=</span>&nbsp;<span class="ident" id="6364285">nil</span>&nbsp;<span class="op" id="6364289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364293">return</span>&nbsp;<span class="ident" id="6364300">nil</span><span class="op" id="6364303">,</span>&nbsp;<span class="ident" id="6364305"><a href="/go/format/format.go.html#6364238">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6364310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364313"><a href="/go/format/format.go.html#6363668">res</a></span>&nbsp;<span class="op" id="6364317">=</span>&nbsp;<span class="builtinfunc" id="6364319">append</span><span class="op" id="6364325">(</span><span class="ident" id="6364326"><a href="/go/format/format.go.html#6363668">res</a></span><span class="op" id="6364329">,</span>&nbsp;<span class="ident" id="6364331"><a href="/go/format/format.go.html#6363152">sourceAdj</a></span><span class="op" id="6364340">(</span><span class="ident" id="6364341"><a href="/go/format/format.go.html#6364220">buf</a></span><span class="op" id="6364344">.</span><span class="ident" id="6364345">Bytes</span><span class="op" id="6364350">(</span><span class="op" id="6364351">)</span><span class="op" id="6364352">,</span>&nbsp;<span class="ident" id="6364354"><a href="/go/format/format.go.html#6363229">cfg</a></span><span class="op" id="6364357">.</span><span class="ident" id="6364358">Indent</span><span class="op" id="6364364">)</span><span class="op" id="6364365">...</span><span class="op" id="6364368">)</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6364372">//&nbsp;Determine&nbsp;and&nbsp;append&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364413"><a href="/go/format/format.go.html#6363518">i</a></span>&nbsp;<span class="op" id="6364415">=</span>&nbsp;<span class="builtinfunc" id="6364417">len</span><span class="op" id="6364420">(</span><span class="ident" id="6364421"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6364424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364427">for</span>&nbsp;<span class="ident" id="6364431"><a href="/go/format/format.go.html#6363518">i</a></span>&nbsp;<span class="op" id="6364433">&gt;</span>&nbsp;<span class="num" id="6364435">0</span>&nbsp;<span class="op" id="6364437">&amp;&amp;</span>&nbsp;<span class="ident" id="6364440"><a href="/go/format/format.go.html#6364514">isSpace</a></span><span class="op" id="6364447">(</span><span class="ident" id="6364448"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6364451">[</span><span class="ident" id="6364452"><a href="/go/format/format.go.html#6363518">i</a></span><span class="op" id="6364453">-</span><span class="num" id="6364454">1</span><span class="op" id="6364455">]</span><span class="op" id="6364456">)</span>&nbsp;<span class="op" id="6364458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6364462"><a href="/go/format/format.go.html#6363518">i</a></span><span class="op" id="6364463">--</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6364467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364470">return</span>&nbsp;<span class="builtinfunc" id="6364477">append</span><span class="op" id="6364483">(</span><span class="ident" id="6364484"><a href="/go/format/format.go.html#6363668">res</a></span><span class="op" id="6364487">,</span>&nbsp;<span class="ident" id="6364489"><a href="/go/format/format.go.html#6363216">src</a></span><span class="op" id="6364492">[</span><span class="ident" id="6364493"><a href="/go/format/format.go.html#6363518">i</a></span><span class="op" id="6364494">:</span><span class="op" id="6364495">]</span><span class="op" id="6364496">...</span><span class="op" id="6364499">)</span><span class="op" id="6364500">,</span>&nbsp;<span class="ident" id="6364502">nil</span><br>
<span class="lineno"></span><span class="op" id="6364506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6364509">func</span>&nbsp;<span class="ident" id="6364514">isSpace</span><span class="op" id="6364521">(</span><span class="ident" id="6364522">b</span>&nbsp;<span class="builtintype" id="6364524">byte</span><span class="op" id="6364528">)</span>&nbsp;<span class="builtintype" id="6364530">bool</span>&nbsp;<span class="op" id="6364535">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6364538">return</span>&nbsp;<span class="ident" id="6364545"><a href="/go/format/format.go.html#6364522">b</a></span>&nbsp;<span class="op" id="6364547">==</span>&nbsp;<span class="string" id="6364550">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6364554">||</span>&nbsp;<span class="ident" id="6364557"><a href="/go/format/format.go.html#6364522">b</a></span>&nbsp;<span class="op" id="6364559">==</span>&nbsp;<span class="string" id="6364562">&#39;\t&#39;</span>&nbsp;<span class="op" id="6364567">||</span>&nbsp;<span class="ident" id="6364570"><a href="/go/format/format.go.html#6364522">b</a></span>&nbsp;<span class="op" id="6364572">==</span>&nbsp;<span class="string" id="6364575">&#39;\n&#39;</span>&nbsp;<span class="op" id="6364580">||</span>&nbsp;<span class="ident" id="6364583"><a href="/go/format/format.go.html#6364522">b</a></span>&nbsp;<span class="op" id="6364585">==</span>&nbsp;<span class="string" id="6364588">&#39;\r&#39;</span><br>
<span class="lineno"></span><span class="op" id="6364593">}</span>
</div>
</body>
</html>
