<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2156198">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2156253">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2156307">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2156358">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2156434">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2156508">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2156589">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2156660">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2156735">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2156806">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2156865">//</span><br>
<span class="lineno"></span><span class="comment" id="2156868">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2156944">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2157027">//</span><br>
<span class="lineno"></span><span class="comment" id="2157030">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2157098">//</span><br>
<span class="lineno"></span><span class="comment" id="2157101">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2157156">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2157175">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2157194">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2157199">//</span><br>
<span class="lineno"></span><span class="comment" id="2157202">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2157272">//</span><br>
<span class="lineno">25</span><span class="comment" id="2157275">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2157318">//</span><br>
<span class="lineno"></span><span class="comment" id="2157321">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2157389">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2157460">//</span><br>
<span class="lineno">30</span><span class="comment" id="2157463">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2157492">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2157525">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2157544">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2157563">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2157568">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2157626">//</span><br>
<span class="lineno"></span><span class="keyword" id="2157629">package</span>&nbsp;<span class="ident" id="2157637">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2157641">import</span>&nbsp;<span class="op" id="2157648">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2157651">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2157657">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2157667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2157670">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2157729">func</span>&nbsp;<span class="op" id="2157734">(</span><span class="ident" id="2157735">f</span>&nbsp;<span class="op" id="2157737">*</span><span class="ident" id="2157738">File</span><span class="op" id="2157742">)</span>&nbsp;<span class="ident" id="2157744">Name</span><span class="op" id="2157748">(</span><span class="op" id="2157749">)</span>&nbsp;<span class="builtintype" id="2157751">string</span>&nbsp;<span class="op" id="2157758">{</span>&nbsp;<span class="keyword" id="2157760">return</span>&nbsp;<span class="ident" id="2157767">f</span><span class="op" id="2157768">.</span><span class="ident" id="2157769">name</span>&nbsp;<span class="op" id="2157774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2157777">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2157853">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2157910">var</span>&nbsp;<span class="op" id="2157914">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157917">Stdin</span>&nbsp;&nbsp;<span class="op" id="2157924">=</span>&nbsp;<span class="ident" id="2157926">NewFile</span><span class="op" id="2157933">(</span><span class="builtintype" id="2157934">uintptr</span><span class="op" id="2157941">(</span><span class="ident" id="2157942">syscall</span><span class="op" id="2157949">.</span><span class="ident" id="2157950">Stdin</span><span class="op" id="2157955">)</span><span class="op" id="2157956">,</span>&nbsp;<span class="string" id="2157958">&#34;/dev/stdin&#34;</span><span class="op" id="2157970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2157973">Stdout</span>&nbsp;<span class="op" id="2157980">=</span>&nbsp;<span class="ident" id="2157982">NewFile</span><span class="op" id="2157989">(</span><span class="builtintype" id="2157990">uintptr</span><span class="op" id="2157997">(</span><span class="ident" id="2157998">syscall</span><span class="op" id="2158005">.</span><span class="ident" id="2158006">Stdout</span><span class="op" id="2158012">)</span><span class="op" id="2158013">,</span>&nbsp;<span class="string" id="2158015">&#34;/dev/stdout&#34;</span><span class="op" id="2158028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158031">Stderr</span>&nbsp;<span class="op" id="2158038">=</span>&nbsp;<span class="ident" id="2158040">NewFile</span><span class="op" id="2158047">(</span><span class="builtintype" id="2158048">uintptr</span><span class="op" id="2158055">(</span><span class="ident" id="2158056">syscall</span><span class="op" id="2158063">.</span><span class="ident" id="2158064">Stderr</span><span class="op" id="2158070">)</span><span class="op" id="2158071">,</span>&nbsp;<span class="string" id="2158073">&#34;/dev/stderr&#34;</span><span class="op" id="2158086">)</span><br>
<span class="lineno"></span><span class="op" id="2158088">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2158091">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2158163">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2158204">const</span>&nbsp;<span class="op" id="2158210">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158213">O_RDONLY</span>&nbsp;<span class="builtintype" id="2158222">int</span>&nbsp;<span class="op" id="2158226">=</span>&nbsp;<span class="ident" id="2158228">syscall</span><span class="op" id="2158235">.</span><span class="ident" id="2158236">O_RDONLY</span>&nbsp;<span class="comment" id="2158245">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158274">O_WRONLY</span>&nbsp;<span class="builtintype" id="2158283">int</span>&nbsp;<span class="op" id="2158287">=</span>&nbsp;<span class="ident" id="2158289">syscall</span><span class="op" id="2158296">.</span><span class="ident" id="2158297">O_WRONLY</span>&nbsp;<span class="comment" id="2158306">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158336">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2158345">int</span>&nbsp;<span class="op" id="2158349">=</span>&nbsp;<span class="ident" id="2158351">syscall</span><span class="op" id="2158358">.</span><span class="ident" id="2158359">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2158368">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158398">O_APPEND</span>&nbsp;<span class="builtintype" id="2158407">int</span>&nbsp;<span class="op" id="2158411">=</span>&nbsp;<span class="ident" id="2158413">syscall</span><span class="op" id="2158420">.</span><span class="ident" id="2158421">O_APPEND</span>&nbsp;<span class="comment" id="2158430">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158472">O_CREATE</span>&nbsp;<span class="builtintype" id="2158481">int</span>&nbsp;<span class="op" id="2158485">=</span>&nbsp;<span class="ident" id="2158487">syscall</span><span class="op" id="2158494">.</span><span class="ident" id="2158495">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2158504">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158542">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2158551">int</span>&nbsp;<span class="op" id="2158555">=</span>&nbsp;<span class="ident" id="2158557">syscall</span><span class="op" id="2158564">.</span><span class="ident" id="2158565">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2158574">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158618">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2158627">int</span>&nbsp;<span class="op" id="2158631">=</span>&nbsp;<span class="ident" id="2158633">syscall</span><span class="op" id="2158640">.</span><span class="ident" id="2158641">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2158650">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158680">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2158689">int</span>&nbsp;<span class="op" id="2158693">=</span>&nbsp;<span class="ident" id="2158695">syscall</span><span class="op" id="2158702">.</span><span class="ident" id="2158703">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2158712">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2158755">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2158758">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2158781">const</span>&nbsp;<span class="op" id="2158787">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158790">SEEK_SET</span>&nbsp;<span class="builtintype" id="2158799">int</span>&nbsp;<span class="op" id="2158803">=</span>&nbsp;<span class="num" id="2158805">0</span>&nbsp;<span class="comment" id="2158807">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158851">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2158860">int</span>&nbsp;<span class="op" id="2158864">=</span>&nbsp;<span class="num" id="2158866">1</span>&nbsp;<span class="comment" id="2158868">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2158908">SEEK_END</span>&nbsp;<span class="builtintype" id="2158917">int</span>&nbsp;<span class="op" id="2158921">=</span>&nbsp;<span class="num" id="2158923">2</span>&nbsp;<span class="comment" id="2158925">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2158953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2158956">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2159021">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2159066">type</span>&nbsp;<span class="ident" id="2159071">LinkError</span>&nbsp;<span class="keyword" id="2159081">struct</span>&nbsp;<span class="op" id="2159088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159091">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2159095">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159103">Old</span>&nbsp;<span class="builtintype" id="2159107">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159115">New</span>&nbsp;<span class="builtintype" id="2159119">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159127">Err</span>&nbsp;<span class="builtintype" id="2159131">error</span><br>
<span class="lineno"></span><span class="op" id="2159137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2159140">func</span>&nbsp;<span class="op" id="2159145">(</span><span class="ident" id="2159146">e</span>&nbsp;<span class="op" id="2159148">*</span><span class="ident" id="2159149">LinkError</span><span class="op" id="2159158">)</span>&nbsp;<span class="ident" id="2159160">Error</span><span class="op" id="2159165">(</span><span class="op" id="2159166">)</span>&nbsp;<span class="builtintype" id="2159168">string</span>&nbsp;<span class="op" id="2159175">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159178">return</span>&nbsp;<span class="ident" id="2159185">e</span><span class="op" id="2159186">.</span><span class="ident" id="2159187">Op</span>&nbsp;<span class="op" id="2159190">+</span>&nbsp;<span class="string" id="2159192">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2159196">+</span>&nbsp;<span class="ident" id="2159198">e</span><span class="op" id="2159199">.</span><span class="ident" id="2159200">Old</span>&nbsp;<span class="op" id="2159204">+</span>&nbsp;<span class="string" id="2159206">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2159210">+</span>&nbsp;<span class="ident" id="2159212">e</span><span class="op" id="2159213">.</span><span class="ident" id="2159214">New</span>&nbsp;<span class="op" id="2159218">+</span>&nbsp;<span class="string" id="2159220">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2159225">+</span>&nbsp;<span class="ident" id="2159227">e</span><span class="op" id="2159228">.</span><span class="ident" id="2159229">Err</span><span class="op" id="2159232">.</span><span class="ident" id="2159233">Error</span><span class="op" id="2159238">(</span><span class="op" id="2159239">)</span><br>
<span class="lineno"></span><span class="op" id="2159241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2159244">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2159292">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2159353">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2159412">func</span>&nbsp;<span class="op" id="2159417">(</span><span class="ident" id="2159418">f</span>&nbsp;<span class="op" id="2159420">*</span><span class="ident" id="2159421">File</span><span class="op" id="2159425">)</span>&nbsp;<span class="ident" id="2159427">Read</span><span class="op" id="2159431">(</span><span class="ident" id="2159432">b</span>&nbsp;<span class="op" id="2159434">[</span><span class="op" id="2159435">]</span><span class="builtintype" id="2159436">byte</span><span class="op" id="2159440">)</span>&nbsp;<span class="op" id="2159442">(</span><span class="ident" id="2159443">n</span>&nbsp;<span class="builtintype" id="2159445">int</span><span class="op" id="2159448">,</span>&nbsp;<span class="ident" id="2159450">err</span>&nbsp;<span class="builtintype" id="2159454">error</span><span class="op" id="2159459">)</span>&nbsp;<span class="op" id="2159461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159464">if</span>&nbsp;<span class="ident" id="2159467">f</span>&nbsp;<span class="op" id="2159469">==</span>&nbsp;<span class="ident" id="2159472">nil</span>&nbsp;<span class="op" id="2159476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159480">return</span>&nbsp;<span class="num" id="2159487">0</span><span class="op" id="2159488">,</span>&nbsp;<span class="ident" id="2159490">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159502">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159505">n</span><span class="op" id="2159506">,</span>&nbsp;<span class="ident" id="2159508">e</span>&nbsp;<span class="op" id="2159510">:=</span>&nbsp;<span class="ident" id="2159513">f</span><span class="op" id="2159514">.</span><span class="ident" id="2159515">read</span><span class="op" id="2159519">(</span><span class="ident" id="2159520">b</span><span class="op" id="2159521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159524">if</span>&nbsp;<span class="ident" id="2159527">n</span>&nbsp;<span class="op" id="2159529">&lt;</span>&nbsp;<span class="num" id="2159531">0</span>&nbsp;<span class="op" id="2159533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159537">n</span>&nbsp;<span class="op" id="2159539">=</span>&nbsp;<span class="num" id="2159541">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159547">if</span>&nbsp;<span class="ident" id="2159550">n</span>&nbsp;<span class="op" id="2159552">==</span>&nbsp;<span class="num" id="2159555">0</span>&nbsp;<span class="op" id="2159557">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2159560">len</span><span class="op" id="2159563">(</span><span class="ident" id="2159564">b</span><span class="op" id="2159565">)</span>&nbsp;<span class="op" id="2159567">&gt;</span>&nbsp;<span class="num" id="2159569">0</span>&nbsp;<span class="op" id="2159571">&amp;&amp;</span>&nbsp;<span class="ident" id="2159574">e</span>&nbsp;<span class="op" id="2159576">==</span>&nbsp;<span class="ident" id="2159579">nil</span>&nbsp;<span class="op" id="2159583">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159587">return</span>&nbsp;<span class="num" id="2159594">0</span><span class="op" id="2159595">,</span>&nbsp;<span class="ident" id="2159597">io</span><span class="op" id="2159599">.</span><span class="ident" id="2159600">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159608">if</span>&nbsp;<span class="ident" id="2159611">e</span>&nbsp;<span class="op" id="2159613">!=</span>&nbsp;<span class="ident" id="2159616">nil</span>&nbsp;<span class="op" id="2159620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2159624">err</span>&nbsp;<span class="op" id="2159628">=</span>&nbsp;<span class="op" id="2159630">&amp;</span><span class="ident" id="2159631">PathError</span><span class="op" id="2159640">{</span><span class="string" id="2159641">&#34;read&#34;</span><span class="op" id="2159647">,</span>&nbsp;<span class="ident" id="2159649">f</span><span class="op" id="2159650">.</span><span class="ident" id="2159651">name</span><span class="op" id="2159655">,</span>&nbsp;<span class="ident" id="2159657">e</span><span class="op" id="2159658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2159661">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159664">return</span>&nbsp;<span class="ident" id="2159671">n</span><span class="op" id="2159672">,</span>&nbsp;<span class="ident" id="2159674">err</span><br>
<span class="lineno"></span><span class="op" id="2159678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2159681">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2159753">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2159815">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2159873">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2159914">func</span>&nbsp;<span class="op" id="2159919">(</span><span class="ident" id="2159920">f</span>&nbsp;<span class="op" id="2159922">*</span><span class="ident" id="2159923">File</span><span class="op" id="2159927">)</span>&nbsp;<span class="ident" id="2159929">ReadAt</span><span class="op" id="2159935">(</span><span class="ident" id="2159936">b</span>&nbsp;<span class="op" id="2159938">[</span><span class="op" id="2159939">]</span><span class="builtintype" id="2159940">byte</span><span class="op" id="2159944">,</span>&nbsp;<span class="ident" id="2159946">off</span>&nbsp;<span class="ident" id="2159950">int64</span><span class="op" id="2159955">)</span>&nbsp;<span class="op" id="2159957">(</span><span class="ident" id="2159958">n</span>&nbsp;<span class="builtintype" id="2159960">int</span><span class="op" id="2159963">,</span>&nbsp;<span class="ident" id="2159965">err</span>&nbsp;<span class="builtintype" id="2159969">error</span><span class="op" id="2159974">)</span>&nbsp;<span class="op" id="2159976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159979">if</span>&nbsp;<span class="ident" id="2159982">f</span>&nbsp;<span class="op" id="2159984">==</span>&nbsp;<span class="ident" id="2159987">nil</span>&nbsp;<span class="op" id="2159991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2159995">return</span>&nbsp;<span class="num" id="2160002">0</span><span class="op" id="2160003">,</span>&nbsp;<span class="ident" id="2160005">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160020">for</span>&nbsp;<span class="builtinfunc" id="2160024">len</span><span class="op" id="2160027">(</span><span class="ident" id="2160028">b</span><span class="op" id="2160029">)</span>&nbsp;<span class="op" id="2160031">&gt;</span>&nbsp;<span class="num" id="2160033">0</span>&nbsp;<span class="op" id="2160035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160039">m</span><span class="op" id="2160040">,</span>&nbsp;<span class="ident" id="2160042">e</span>&nbsp;<span class="op" id="2160044">:=</span>&nbsp;<span class="ident" id="2160047">f</span><span class="op" id="2160048">.</span><span class="ident" id="2160049">pread</span><span class="op" id="2160054">(</span><span class="ident" id="2160055">b</span><span class="op" id="2160056">,</span>&nbsp;<span class="ident" id="2160058">off</span><span class="op" id="2160061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160065">if</span>&nbsp;<span class="ident" id="2160068">m</span>&nbsp;<span class="op" id="2160070">==</span>&nbsp;<span class="num" id="2160073">0</span>&nbsp;<span class="op" id="2160075">&amp;&amp;</span>&nbsp;<span class="ident" id="2160078">e</span>&nbsp;<span class="op" id="2160080">==</span>&nbsp;<span class="ident" id="2160083">nil</span>&nbsp;<span class="op" id="2160087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160092">return</span>&nbsp;<span class="ident" id="2160099">n</span><span class="op" id="2160100">,</span>&nbsp;<span class="ident" id="2160102">io</span><span class="op" id="2160104">.</span><span class="ident" id="2160105">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160115">if</span>&nbsp;<span class="ident" id="2160118">e</span>&nbsp;<span class="op" id="2160120">!=</span>&nbsp;<span class="ident" id="2160123">nil</span>&nbsp;<span class="op" id="2160127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160132">err</span>&nbsp;<span class="op" id="2160136">=</span>&nbsp;<span class="op" id="2160138">&amp;</span><span class="ident" id="2160139">PathError</span><span class="op" id="2160148">{</span><span class="string" id="2160149">&#34;read&#34;</span><span class="op" id="2160155">,</span>&nbsp;<span class="ident" id="2160157">f</span><span class="op" id="2160158">.</span><span class="ident" id="2160159">name</span><span class="op" id="2160163">,</span>&nbsp;<span class="ident" id="2160165">e</span><span class="op" id="2160166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160171">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160179">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160183">n</span>&nbsp;<span class="op" id="2160185">+=</span>&nbsp;<span class="ident" id="2160188">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160192">b</span>&nbsp;<span class="op" id="2160194">=</span>&nbsp;<span class="ident" id="2160196">b</span><span class="op" id="2160197">[</span><span class="ident" id="2160198">m</span><span class="op" id="2160199">:</span><span class="op" id="2160200">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160204">off</span>&nbsp;<span class="op" id="2160208">+=</span>&nbsp;<span class="ident" id="2160211">int64</span><span class="op" id="2160216">(</span><span class="ident" id="2160217">m</span><span class="op" id="2160218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160224">return</span><br>
<span class="lineno">130</span><span class="op" id="2160231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2160234">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2160276">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2160340">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2160391">func</span>&nbsp;<span class="op" id="2160396">(</span><span class="ident" id="2160397">f</span>&nbsp;<span class="op" id="2160399">*</span><span class="ident" id="2160400">File</span><span class="op" id="2160404">)</span>&nbsp;<span class="ident" id="2160406">Write</span><span class="op" id="2160411">(</span><span class="ident" id="2160412">b</span>&nbsp;<span class="op" id="2160414">[</span><span class="op" id="2160415">]</span><span class="builtintype" id="2160416">byte</span><span class="op" id="2160420">)</span>&nbsp;<span class="op" id="2160422">(</span><span class="ident" id="2160423">n</span>&nbsp;<span class="builtintype" id="2160425">int</span><span class="op" id="2160428">,</span>&nbsp;<span class="ident" id="2160430">err</span>&nbsp;<span class="builtintype" id="2160434">error</span><span class="op" id="2160439">)</span>&nbsp;<span class="op" id="2160441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160444">if</span>&nbsp;<span class="ident" id="2160447">f</span>&nbsp;<span class="op" id="2160449">==</span>&nbsp;<span class="ident" id="2160452">nil</span>&nbsp;<span class="op" id="2160456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160460">return</span>&nbsp;<span class="num" id="2160467">0</span><span class="op" id="2160468">,</span>&nbsp;<span class="ident" id="2160470">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160485">n</span><span class="op" id="2160486">,</span>&nbsp;<span class="ident" id="2160488">e</span>&nbsp;<span class="op" id="2160490">:=</span>&nbsp;<span class="ident" id="2160493">f</span><span class="op" id="2160494">.</span><span class="ident" id="2160495">write</span><span class="op" id="2160500">(</span><span class="ident" id="2160501">b</span><span class="op" id="2160502">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160505">if</span>&nbsp;<span class="ident" id="2160508">n</span>&nbsp;<span class="op" id="2160510">&lt;</span>&nbsp;<span class="num" id="2160512">0</span>&nbsp;<span class="op" id="2160514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160518">n</span>&nbsp;<span class="op" id="2160520">=</span>&nbsp;<span class="num" id="2160522">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160528">if</span>&nbsp;<span class="ident" id="2160531">n</span>&nbsp;<span class="op" id="2160533">!=</span>&nbsp;<span class="builtinfunc" id="2160536">len</span><span class="op" id="2160539">(</span><span class="ident" id="2160540">b</span><span class="op" id="2160541">)</span>&nbsp;<span class="op" id="2160543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160547">err</span>&nbsp;<span class="op" id="2160551">=</span>&nbsp;<span class="ident" id="2160553">io</span><span class="op" id="2160555">.</span><span class="ident" id="2160556">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160575">epipecheck</span><span class="op" id="2160585">(</span><span class="ident" id="2160586">f</span><span class="op" id="2160587">,</span>&nbsp;<span class="ident" id="2160589">e</span><span class="op" id="2160590">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160594">if</span>&nbsp;<span class="ident" id="2160597">e</span>&nbsp;<span class="op" id="2160599">!=</span>&nbsp;<span class="ident" id="2160602">nil</span>&nbsp;<span class="op" id="2160606">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160610">err</span>&nbsp;<span class="op" id="2160614">=</span>&nbsp;<span class="op" id="2160616">&amp;</span><span class="ident" id="2160617">PathError</span><span class="op" id="2160626">{</span><span class="string" id="2160627">&#34;write&#34;</span><span class="op" id="2160634">,</span>&nbsp;<span class="ident" id="2160636">f</span><span class="op" id="2160637">.</span><span class="ident" id="2160638">name</span><span class="op" id="2160642">,</span>&nbsp;<span class="ident" id="2160644">e</span><span class="op" id="2160645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160651">return</span>&nbsp;<span class="ident" id="2160658">n</span><span class="op" id="2160659">,</span>&nbsp;<span class="ident" id="2160661">err</span><br>
<span class="lineno"></span><span class="op" id="2160665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2160668">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2160740">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2160804">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2160857">func</span>&nbsp;<span class="op" id="2160862">(</span><span class="ident" id="2160863">f</span>&nbsp;<span class="op" id="2160865">*</span><span class="ident" id="2160866">File</span><span class="op" id="2160870">)</span>&nbsp;<span class="ident" id="2160872">WriteAt</span><span class="op" id="2160879">(</span><span class="ident" id="2160880">b</span>&nbsp;<span class="op" id="2160882">[</span><span class="op" id="2160883">]</span><span class="builtintype" id="2160884">byte</span><span class="op" id="2160888">,</span>&nbsp;<span class="ident" id="2160890">off</span>&nbsp;<span class="ident" id="2160894">int64</span><span class="op" id="2160899">)</span>&nbsp;<span class="op" id="2160901">(</span><span class="ident" id="2160902">n</span>&nbsp;<span class="builtintype" id="2160904">int</span><span class="op" id="2160907">,</span>&nbsp;<span class="ident" id="2160909">err</span>&nbsp;<span class="builtintype" id="2160913">error</span><span class="op" id="2160918">)</span>&nbsp;<span class="op" id="2160920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160923">if</span>&nbsp;<span class="ident" id="2160926">f</span>&nbsp;<span class="op" id="2160928">==</span>&nbsp;<span class="ident" id="2160931">nil</span>&nbsp;<span class="op" id="2160935">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160939">return</span>&nbsp;<span class="num" id="2160946">0</span><span class="op" id="2160947">,</span>&nbsp;<span class="ident" id="2160949">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2160961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2160964">for</span>&nbsp;<span class="builtinfunc" id="2160968">len</span><span class="op" id="2160971">(</span><span class="ident" id="2160972">b</span><span class="op" id="2160973">)</span>&nbsp;<span class="op" id="2160975">&gt;</span>&nbsp;<span class="num" id="2160977">0</span>&nbsp;<span class="op" id="2160979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2160983">m</span><span class="op" id="2160984">,</span>&nbsp;<span class="ident" id="2160986">e</span>&nbsp;<span class="op" id="2160988">:=</span>&nbsp;<span class="ident" id="2160991">f</span><span class="op" id="2160992">.</span><span class="ident" id="2160993">pwrite</span><span class="op" id="2160999">(</span><span class="ident" id="2161000">b</span><span class="op" id="2161001">,</span>&nbsp;<span class="ident" id="2161003">off</span><span class="op" id="2161006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161010">if</span>&nbsp;<span class="ident" id="2161013">e</span>&nbsp;<span class="op" id="2161015">!=</span>&nbsp;<span class="ident" id="2161018">nil</span>&nbsp;<span class="op" id="2161022">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161027">err</span>&nbsp;<span class="op" id="2161031">=</span>&nbsp;<span class="op" id="2161033">&amp;</span><span class="ident" id="2161034">PathError</span><span class="op" id="2161043">{</span><span class="string" id="2161044">&#34;write&#34;</span><span class="op" id="2161051">,</span>&nbsp;<span class="ident" id="2161053">f</span><span class="op" id="2161054">.</span><span class="ident" id="2161055">name</span><span class="op" id="2161059">,</span>&nbsp;<span class="ident" id="2161061">e</span><span class="op" id="2161062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161067">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161079">n</span>&nbsp;<span class="op" id="2161081">+=</span>&nbsp;<span class="ident" id="2161084">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161088">b</span>&nbsp;<span class="op" id="2161090">=</span>&nbsp;<span class="ident" id="2161092">b</span><span class="op" id="2161093">[</span><span class="ident" id="2161094">m</span><span class="op" id="2161095">:</span><span class="op" id="2161096">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161100">off</span>&nbsp;<span class="op" id="2161104">+=</span>&nbsp;<span class="ident" id="2161107">int64</span><span class="op" id="2161112">(</span><span class="ident" id="2161113">m</span><span class="op" id="2161114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161120">return</span><br>
<span class="lineno"></span><span class="op" id="2161127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2161130">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2161212">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2161288">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2161356">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2161407">func</span>&nbsp;<span class="op" id="2161412">(</span><span class="ident" id="2161413">f</span>&nbsp;<span class="op" id="2161415">*</span><span class="ident" id="2161416">File</span><span class="op" id="2161420">)</span>&nbsp;<span class="ident" id="2161422">Seek</span><span class="op" id="2161426">(</span><span class="ident" id="2161427">offset</span>&nbsp;<span class="ident" id="2161434">int64</span><span class="op" id="2161439">,</span>&nbsp;<span class="ident" id="2161441">whence</span>&nbsp;<span class="builtintype" id="2161448">int</span><span class="op" id="2161451">)</span>&nbsp;<span class="op" id="2161453">(</span><span class="ident" id="2161454">ret</span>&nbsp;<span class="ident" id="2161458">int64</span><span class="op" id="2161463">,</span>&nbsp;<span class="ident" id="2161465">err</span>&nbsp;<span class="builtintype" id="2161469">error</span><span class="op" id="2161474">)</span>&nbsp;<span class="op" id="2161476">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161479">if</span>&nbsp;<span class="ident" id="2161482">f</span>&nbsp;<span class="op" id="2161484">==</span>&nbsp;<span class="ident" id="2161487">nil</span>&nbsp;<span class="op" id="2161491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161495">return</span>&nbsp;<span class="num" id="2161502">0</span><span class="op" id="2161503">,</span>&nbsp;<span class="ident" id="2161505">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161520">r</span><span class="op" id="2161521">,</span>&nbsp;<span class="ident" id="2161523">e</span>&nbsp;<span class="op" id="2161525">:=</span>&nbsp;<span class="ident" id="2161528">f</span><span class="op" id="2161529">.</span><span class="ident" id="2161530">seek</span><span class="op" id="2161534">(</span><span class="ident" id="2161535">offset</span><span class="op" id="2161541">,</span>&nbsp;<span class="ident" id="2161543">whence</span><span class="op" id="2161549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161552">if</span>&nbsp;<span class="ident" id="2161555">e</span>&nbsp;<span class="op" id="2161557">==</span>&nbsp;<span class="ident" id="2161560">nil</span>&nbsp;<span class="op" id="2161564">&amp;&amp;</span>&nbsp;<span class="ident" id="2161567">f</span><span class="op" id="2161568">.</span><span class="ident" id="2161569">dirinfo</span>&nbsp;<span class="op" id="2161577">!=</span>&nbsp;<span class="ident" id="2161580">nil</span>&nbsp;<span class="op" id="2161584">&amp;&amp;</span>&nbsp;<span class="ident" id="2161587">r</span>&nbsp;<span class="op" id="2161589">!=</span>&nbsp;<span class="num" id="2161592">0</span>&nbsp;<span class="op" id="2161594">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2161598">e</span>&nbsp;<span class="op" id="2161600">=</span>&nbsp;<span class="ident" id="2161602">syscall</span><span class="op" id="2161609">.</span><span class="ident" id="2161610">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161621">if</span>&nbsp;<span class="ident" id="2161624">e</span>&nbsp;<span class="op" id="2161626">!=</span>&nbsp;<span class="ident" id="2161629">nil</span>&nbsp;<span class="op" id="2161633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161637">return</span>&nbsp;<span class="num" id="2161644">0</span><span class="op" id="2161645">,</span>&nbsp;<span class="op" id="2161647">&amp;</span><span class="ident" id="2161648">PathError</span><span class="op" id="2161657">{</span><span class="string" id="2161658">&#34;seek&#34;</span><span class="op" id="2161664">,</span>&nbsp;<span class="ident" id="2161666">f</span><span class="op" id="2161667">.</span><span class="ident" id="2161668">name</span><span class="op" id="2161672">,</span>&nbsp;<span class="ident" id="2161674">e</span><span class="op" id="2161675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161678">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161681">return</span>&nbsp;<span class="ident" id="2161688">r</span><span class="op" id="2161689">,</span>&nbsp;<span class="ident" id="2161691">nil</span><br>
<span class="lineno"></span><span class="op" id="2161695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2161698">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2161776">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2161797">func</span>&nbsp;<span class="op" id="2161802">(</span><span class="ident" id="2161803">f</span>&nbsp;<span class="op" id="2161805">*</span><span class="ident" id="2161806">File</span><span class="op" id="2161810">)</span>&nbsp;<span class="ident" id="2161812">WriteString</span><span class="op" id="2161823">(</span><span class="ident" id="2161824">s</span>&nbsp;<span class="builtintype" id="2161826">string</span><span class="op" id="2161832">)</span>&nbsp;<span class="op" id="2161834">(</span><span class="ident" id="2161835">ret</span>&nbsp;<span class="builtintype" id="2161839">int</span><span class="op" id="2161842">,</span>&nbsp;<span class="ident" id="2161844">err</span>&nbsp;<span class="builtintype" id="2161848">error</span><span class="op" id="2161853">)</span>&nbsp;<span class="op" id="2161855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161858">if</span>&nbsp;<span class="ident" id="2161861">f</span>&nbsp;<span class="op" id="2161863">==</span>&nbsp;<span class="ident" id="2161866">nil</span>&nbsp;<span class="op" id="2161870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161874">return</span>&nbsp;<span class="num" id="2161881">0</span><span class="op" id="2161882">,</span>&nbsp;<span class="ident" id="2161884">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2161896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2161899">return</span>&nbsp;<span class="ident" id="2161906">f</span><span class="op" id="2161907">.</span><span class="ident" id="2161908">Write</span><span class="op" id="2161913">(</span><span class="op" id="2161914">[</span><span class="op" id="2161915">]</span><span class="builtintype" id="2161916">byte</span><span class="op" id="2161920">(</span><span class="ident" id="2161921">s</span><span class="op" id="2161922">)</span><span class="op" id="2161923">)</span><br>
<span class="lineno">200</span><span class="op" id="2161925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2161928">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2162006">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2162062">func</span>&nbsp;<span class="ident" id="2162067">Mkdir</span><span class="op" id="2162072">(</span><span class="ident" id="2162073">name</span>&nbsp;<span class="builtintype" id="2162078">string</span><span class="op" id="2162084">,</span>&nbsp;<span class="ident" id="2162086">perm</span>&nbsp;<span class="ident" id="2162091">FileMode</span><span class="op" id="2162099">)</span>&nbsp;<span class="builtintype" id="2162101">error</span>&nbsp;<span class="op" id="2162107">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2162110">e</span>&nbsp;<span class="op" id="2162112">:=</span>&nbsp;<span class="ident" id="2162115">syscall</span><span class="op" id="2162122">.</span><span class="ident" id="2162123">Mkdir</span><span class="op" id="2162128">(</span><span class="ident" id="2162129">name</span><span class="op" id="2162133">,</span>&nbsp;<span class="ident" id="2162135">syscallMode</span><span class="op" id="2162146">(</span><span class="ident" id="2162147">perm</span><span class="op" id="2162151">)</span><span class="op" id="2162152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162155">if</span>&nbsp;<span class="ident" id="2162158">e</span>&nbsp;<span class="op" id="2162160">!=</span>&nbsp;<span class="ident" id="2162163">nil</span>&nbsp;<span class="op" id="2162167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162171">return</span>&nbsp;<span class="op" id="2162178">&amp;</span><span class="ident" id="2162179">PathError</span><span class="op" id="2162188">{</span><span class="string" id="2162189">&#34;mkdir&#34;</span><span class="op" id="2162196">,</span>&nbsp;<span class="ident" id="2162198">name</span><span class="op" id="2162202">,</span>&nbsp;<span class="ident" id="2162204">e</span><span class="op" id="2162205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162211">return</span>&nbsp;<span class="ident" id="2162218">nil</span><br>
<span class="lineno">210</span><span class="op" id="2162222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2162225">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2162296">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2162352">func</span>&nbsp;<span class="ident" id="2162357">Chdir</span><span class="op" id="2162362">(</span><span class="ident" id="2162363">dir</span>&nbsp;<span class="builtintype" id="2162367">string</span><span class="op" id="2162373">)</span>&nbsp;<span class="builtintype" id="2162375">error</span>&nbsp;<span class="op" id="2162381">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162384">if</span>&nbsp;<span class="ident" id="2162387">e</span>&nbsp;<span class="op" id="2162389">:=</span>&nbsp;<span class="ident" id="2162392">syscall</span><span class="op" id="2162399">.</span><span class="ident" id="2162400">Chdir</span><span class="op" id="2162405">(</span><span class="ident" id="2162406">dir</span><span class="op" id="2162409">)</span><span class="op" id="2162410">;</span>&nbsp;<span class="ident" id="2162412">e</span>&nbsp;<span class="op" id="2162414">!=</span>&nbsp;<span class="ident" id="2162417">nil</span>&nbsp;<span class="op" id="2162421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162425">return</span>&nbsp;<span class="op" id="2162432">&amp;</span><span class="ident" id="2162433">PathError</span><span class="op" id="2162442">{</span><span class="string" id="2162443">&#34;chdir&#34;</span><span class="op" id="2162450">,</span>&nbsp;<span class="ident" id="2162452">dir</span><span class="op" id="2162455">,</span>&nbsp;<span class="ident" id="2162457">e</span><span class="op" id="2162458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162464">return</span>&nbsp;<span class="ident" id="2162471">nil</span><br>
<span class="lineno"></span><span class="op" id="2162475">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2162478">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2162538">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2162568">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2162624">func</span>&nbsp;<span class="op" id="2162629">(</span><span class="ident" id="2162630">f</span>&nbsp;<span class="op" id="2162632">*</span><span class="ident" id="2162633">File</span><span class="op" id="2162637">)</span>&nbsp;<span class="ident" id="2162639">Chdir</span><span class="op" id="2162644">(</span><span class="op" id="2162645">)</span>&nbsp;<span class="builtintype" id="2162647">error</span>&nbsp;<span class="op" id="2162653">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162656">if</span>&nbsp;<span class="ident" id="2162659">f</span>&nbsp;<span class="op" id="2162661">==</span>&nbsp;<span class="ident" id="2162664">nil</span>&nbsp;<span class="op" id="2162668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162672">return</span>&nbsp;<span class="ident" id="2162679">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162694">if</span>&nbsp;<span class="ident" id="2162697">e</span>&nbsp;<span class="op" id="2162699">:=</span>&nbsp;<span class="ident" id="2162702">syscall</span><span class="op" id="2162709">.</span><span class="ident" id="2162710">Fchdir</span><span class="op" id="2162716">(</span><span class="ident" id="2162717">f</span><span class="op" id="2162718">.</span><span class="ident" id="2162719">fd</span><span class="op" id="2162721">)</span><span class="op" id="2162722">;</span>&nbsp;<span class="ident" id="2162724">e</span>&nbsp;<span class="op" id="2162726">!=</span>&nbsp;<span class="ident" id="2162729">nil</span>&nbsp;<span class="op" id="2162733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162737">return</span>&nbsp;<span class="op" id="2162744">&amp;</span><span class="ident" id="2162745">PathError</span><span class="op" id="2162754">{</span><span class="string" id="2162755">&#34;chdir&#34;</span><span class="op" id="2162762">,</span>&nbsp;<span class="ident" id="2162764">f</span><span class="op" id="2162765">.</span><span class="ident" id="2162766">name</span><span class="op" id="2162770">,</span>&nbsp;<span class="ident" id="2162772">e</span><span class="op" id="2162773">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2162776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2162779">return</span>&nbsp;<span class="ident" id="2162786">nil</span><br>
<span class="lineno"></span><span class="op" id="2162790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2162793">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2162862">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2162928">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2162961">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2163017">func</span>&nbsp;<span class="ident" id="2163022">Open</span><span class="op" id="2163026">(</span><span class="ident" id="2163027">name</span>&nbsp;<span class="builtintype" id="2163032">string</span><span class="op" id="2163038">)</span>&nbsp;<span class="op" id="2163040">(</span><span class="ident" id="2163041">file</span>&nbsp;<span class="op" id="2163046">*</span><span class="ident" id="2163047">File</span><span class="op" id="2163051">,</span>&nbsp;<span class="ident" id="2163053">err</span>&nbsp;<span class="builtintype" id="2163057">error</span><span class="op" id="2163062">)</span>&nbsp;<span class="op" id="2163064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163067">return</span>&nbsp;<span class="ident" id="2163074">OpenFile</span><span class="op" id="2163082">(</span><span class="ident" id="2163083">name</span><span class="op" id="2163087">,</span>&nbsp;<span class="ident" id="2163089">O_RDONLY</span><span class="op" id="2163097">,</span>&nbsp;<span class="num" id="2163099">0</span><span class="op" id="2163100">)</span><br>
<span class="lineno">240</span><span class="op" id="2163102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2163105">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2163175">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2163243">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2163312">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2163323">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2163379">func</span>&nbsp;<span class="ident" id="2163384">Create</span><span class="op" id="2163390">(</span><span class="ident" id="2163391">name</span>&nbsp;<span class="builtintype" id="2163396">string</span><span class="op" id="2163402">)</span>&nbsp;<span class="op" id="2163404">(</span><span class="ident" id="2163405">file</span>&nbsp;<span class="op" id="2163410">*</span><span class="ident" id="2163411">File</span><span class="op" id="2163415">,</span>&nbsp;<span class="ident" id="2163417">err</span>&nbsp;<span class="builtintype" id="2163421">error</span><span class="op" id="2163426">)</span>&nbsp;<span class="op" id="2163428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163431">return</span>&nbsp;<span class="ident" id="2163438">OpenFile</span><span class="op" id="2163446">(</span><span class="ident" id="2163447">name</span><span class="op" id="2163451">,</span>&nbsp;<span class="ident" id="2163453">O_RDWR</span><span class="op" id="2163459">|</span><span class="ident" id="2163460">O_CREATE</span><span class="op" id="2163468">|</span><span class="ident" id="2163469">O_TRUNC</span><span class="op" id="2163476">,</span>&nbsp;<span class="num" id="2163478">0666</span><span class="op" id="2163482">)</span><br>
<span class="lineno"></span><span class="op" id="2163484">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2163487">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2163520">var</span>&nbsp;<span class="ident" id="2163524">lstat</span>&nbsp;<span class="op" id="2163530">=</span>&nbsp;<span class="ident" id="2163532">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2163539">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2163611">func</span>&nbsp;<span class="ident" id="2163616">Rename</span><span class="op" id="2163622">(</span><span class="ident" id="2163623">oldpath</span><span class="op" id="2163630">,</span>&nbsp;<span class="ident" id="2163632">newpath</span>&nbsp;<span class="builtintype" id="2163640">string</span><span class="op" id="2163646">)</span>&nbsp;<span class="builtintype" id="2163648">error</span>&nbsp;<span class="op" id="2163654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163657">return</span>&nbsp;<span class="ident" id="2163664">rename</span><span class="op" id="2163670">(</span><span class="ident" id="2163671">oldpath</span><span class="op" id="2163678">,</span>&nbsp;<span class="ident" id="2163680">newpath</span><span class="op" id="2163687">)</span><br>
<span class="lineno"></span><span class="op" id="2163689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2163692">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2163764">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2163828">func</span>&nbsp;<span class="ident" id="2163833">fixCount</span><span class="op" id="2163841">(</span><span class="ident" id="2163842">n</span>&nbsp;<span class="builtintype" id="2163844">int</span><span class="op" id="2163847">,</span>&nbsp;<span class="ident" id="2163849">err</span>&nbsp;<span class="builtintype" id="2163853">error</span><span class="op" id="2163858">)</span>&nbsp;<span class="op" id="2163860">(</span><span class="builtintype" id="2163861">int</span><span class="op" id="2163864">,</span>&nbsp;<span class="builtintype" id="2163866">error</span><span class="op" id="2163871">)</span>&nbsp;<span class="op" id="2163873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163876">if</span>&nbsp;<span class="ident" id="2163879">n</span>&nbsp;<span class="op" id="2163881">&lt;</span>&nbsp;<span class="num" id="2163883">0</span>&nbsp;<span class="op" id="2163885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2163889">n</span>&nbsp;<span class="op" id="2163891">=</span>&nbsp;<span class="num" id="2163893">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2163896">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2163899">return</span>&nbsp;<span class="ident" id="2163906">n</span><span class="op" id="2163907">,</span>&nbsp;<span class="ident" id="2163909">err</span><br>
<span class="lineno"></span><span class="op" id="2163913">}</span>
</div>
</body>
</html>
