<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/exec</h2>
<ul>
<li><a href="/gostd/os/exec/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/exec/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/os/exec/lp_test.go.html">lp_test.go</a></li>
<li><a href="/gostd/os/exec/lp_unix.go.html" class="current">lp_unix.go</a></li>
<li><a href="/gostd/os/exec/lp_unix_test.go.html">lp_unix_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5659376">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5659432">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5659486">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5659537">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5659607">package</span>&nbsp;<span class="ident" id="5659615">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5659621">import</span>&nbsp;<span class="op" id="5659628">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5659631">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5659641">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5659647">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5659657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5659660">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5659750">var</span>&nbsp;<span class="ident" id="5659754">ErrNotFound</span>&nbsp;<span class="op" id="5659766">=</span>&nbsp;<span class="ident" id="5659768">errors</span><span class="op" id="5659774">.</span><span class="ident" id="5659775">New</span><span class="op" id="5659778">(</span><span class="string" id="5659779">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5659815">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5659818">func</span>&nbsp;<span class="ident" id="5659823">findExecutable</span><span class="op" id="5659837">(</span><span class="ident" id="5659838">file</span>&nbsp;<span class="builtintype" id="5659843">string</span><span class="op" id="5659849">)</span>&nbsp;<span class="builtintype" id="5659851">error</span>&nbsp;<span class="op" id="5659857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5659860">d</span><span class="op" id="5659861">,</span>&nbsp;<span class="ident" id="5659863">err</span>&nbsp;<span class="op" id="5659867">:=</span>&nbsp;<span class="ident" id="5659870">os</span><span class="op" id="5659872">.</span><span class="ident" id="5659873">Stat</span><span class="op" id="5659877">(</span><span class="ident" id="5659878">file</span><span class="op" id="5659882">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5659885">if</span>&nbsp;<span class="ident" id="5659888">err</span>&nbsp;<span class="op" id="5659892">!=</span>&nbsp;<span class="ident" id="5659895">nil</span>&nbsp;<span class="op" id="5659899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5659903">return</span>&nbsp;<span class="ident" id="5659910">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5659915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5659918">if</span>&nbsp;<span class="ident" id="5659921">m</span>&nbsp;<span class="op" id="5659923">:=</span>&nbsp;<span class="ident" id="5659926">d</span><span class="op" id="5659927">.</span><span class="ident" id="5659928">Mode</span><span class="op" id="5659932">(</span><span class="op" id="5659933">)</span><span class="op" id="5659934">;</span>&nbsp;<span class="op" id="5659936">!</span><span class="ident" id="5659937">m</span><span class="op" id="5659938">.</span><span class="ident" id="5659939">IsDir</span><span class="op" id="5659944">(</span><span class="op" id="5659945">)</span>&nbsp;<span class="op" id="5659947">&amp;&amp;</span>&nbsp;<span class="ident" id="5659950">m</span><span class="op" id="5659951">&amp;</span><span class="num" id="5659952">0111</span>&nbsp;<span class="op" id="5659957">!=</span>&nbsp;<span class="num" id="5659960">0</span>&nbsp;<span class="op" id="5659962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5659966">return</span>&nbsp;<span class="ident" id="5659973">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5659978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5659981">return</span>&nbsp;<span class="ident" id="5659988">os</span><span class="op" id="5659990">.</span><span class="ident" id="5659991">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5660005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5660008">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5660065">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5660127">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5660208">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5660291">func</span>&nbsp;<span class="ident" id="5660296">LookPath</span><span class="op" id="5660304">(</span><span class="ident" id="5660305">file</span>&nbsp;<span class="builtintype" id="5660310">string</span><span class="op" id="5660316">)</span>&nbsp;<span class="op" id="5660318">(</span><span class="builtintype" id="5660319">string</span><span class="op" id="5660325">,</span>&nbsp;<span class="builtintype" id="5660327">error</span><span class="op" id="5660332">)</span>&nbsp;<span class="op" id="5660334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5660337">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5660397">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5660459">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660510">if</span>&nbsp;<span class="ident" id="5660513">strings</span><span class="op" id="5660520">.</span><span class="ident" id="5660521">Contains</span><span class="op" id="5660529">(</span><span class="ident" id="5660530">file</span><span class="op" id="5660534">,</span>&nbsp;<span class="string" id="5660536">&#34;/&#34;</span><span class="op" id="5660539">)</span>&nbsp;<span class="op" id="5660541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5660545">err</span>&nbsp;<span class="op" id="5660549">:=</span>&nbsp;<span class="ident" id="5660552">findExecutable</span><span class="op" id="5660566">(</span><span class="ident" id="5660567">file</span><span class="op" id="5660571">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660575">if</span>&nbsp;<span class="ident" id="5660578">err</span>&nbsp;<span class="op" id="5660582">==</span>&nbsp;<span class="ident" id="5660585">nil</span>&nbsp;<span class="op" id="5660589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660594">return</span>&nbsp;<span class="ident" id="5660601">file</span><span class="op" id="5660605">,</span>&nbsp;<span class="ident" id="5660607">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5660613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660617">return</span>&nbsp;<span class="string" id="5660624">&#34;&#34;</span><span class="op" id="5660626">,</span>&nbsp;<span class="op" id="5660628">&amp;</span><span class="ident" id="5660629">Error</span><span class="op" id="5660634">{</span><span class="ident" id="5660635">file</span><span class="op" id="5660639">,</span>&nbsp;<span class="ident" id="5660641">err</span><span class="op" id="5660644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5660647">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5660650">pathenv</span>&nbsp;<span class="op" id="5660658">:=</span>&nbsp;<span class="ident" id="5660661">os</span><span class="op" id="5660663">.</span><span class="ident" id="5660664">Getenv</span><span class="op" id="5660670">(</span><span class="string" id="5660671">&#34;PATH&#34;</span><span class="op" id="5660677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660680">if</span>&nbsp;<span class="ident" id="5660683">pathenv</span>&nbsp;<span class="op" id="5660691">==</span>&nbsp;<span class="string" id="5660694">&#34;&#34;</span>&nbsp;<span class="op" id="5660697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660701">return</span>&nbsp;<span class="string" id="5660708">&#34;&#34;</span><span class="op" id="5660710">,</span>&nbsp;<span class="op" id="5660712">&amp;</span><span class="ident" id="5660713">Error</span><span class="op" id="5660718">{</span><span class="ident" id="5660719">file</span><span class="op" id="5660723">,</span>&nbsp;<span class="ident" id="5660725">ErrNotFound</span><span class="op" id="5660736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5660739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660742">for</span>&nbsp;<span class="ident" id="5660746">_</span><span class="op" id="5660747">,</span>&nbsp;<span class="ident" id="5660749">dir</span>&nbsp;<span class="op" id="5660753">:=</span>&nbsp;<span class="keyword" id="5660756">range</span>&nbsp;<span class="ident" id="5660762">strings</span><span class="op" id="5660769">.</span><span class="ident" id="5660770">Split</span><span class="op" id="5660775">(</span><span class="ident" id="5660776">pathenv</span><span class="op" id="5660783">,</span>&nbsp;<span class="string" id="5660785">&#34;:&#34;</span><span class="op" id="5660788">)</span>&nbsp;<span class="op" id="5660790">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660794">if</span>&nbsp;<span class="ident" id="5660797">dir</span>&nbsp;<span class="op" id="5660801">==</span>&nbsp;<span class="string" id="5660804">&#34;&#34;</span>&nbsp;<span class="op" id="5660807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5660812">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5660866">dir</span>&nbsp;<span class="op" id="5660870">=</span>&nbsp;<span class="string" id="5660872">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5660878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5660882">path</span>&nbsp;<span class="op" id="5660887">:=</span>&nbsp;<span class="ident" id="5660890">dir</span>&nbsp;<span class="op" id="5660894">+</span>&nbsp;<span class="string" id="5660896">&#34;/&#34;</span>&nbsp;<span class="op" id="5660900">+</span>&nbsp;<span class="ident" id="5660902">file</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660909">if</span>&nbsp;<span class="ident" id="5660912">err</span>&nbsp;<span class="op" id="5660916">:=</span>&nbsp;<span class="ident" id="5660919">findExecutable</span><span class="op" id="5660933">(</span><span class="ident" id="5660934">path</span><span class="op" id="5660938">)</span><span class="op" id="5660939">;</span>&nbsp;<span class="ident" id="5660941">err</span>&nbsp;<span class="op" id="5660945">==</span>&nbsp;<span class="ident" id="5660948">nil</span>&nbsp;<span class="op" id="5660952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660957">return</span>&nbsp;<span class="ident" id="5660964">path</span><span class="op" id="5660968">,</span>&nbsp;<span class="ident" id="5660970">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5660976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5660979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5660982">return</span>&nbsp;<span class="string" id="5660989">&#34;&#34;</span><span class="op" id="5660991">,</span>&nbsp;<span class="op" id="5660993">&amp;</span><span class="ident" id="5660994">Error</span><span class="op" id="5660999">{</span><span class="ident" id="5661000">file</span><span class="op" id="5661004">,</span>&nbsp;<span class="ident" id="5661006">ErrNotFound</span><span class="op" id="5661017">}</span><br>
<span class="lineno">60</span><span class="op" id="5661019">}</span>
</div>
</body>
</html>
