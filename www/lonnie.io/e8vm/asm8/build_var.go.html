<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5804350">package</span>&nbsp;<span class="ident" id="5804358">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5804364">import</span>&nbsp;<span class="op" id="5804371">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5804374">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5804397">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5804400">func</span>&nbsp;<span class="ident" id="5804405">varSize</span><span class="op" id="5804412">(</span><span class="ident" id="5804413">v</span>&nbsp;<span class="op" id="5804415">*</span><span class="ident" id="5804416">varDecl</span><span class="op" id="5804423">)</span>&nbsp;<span class="builtintype" id="5804425">int</span>&nbsp;<span class="op" id="5804429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804432">ret</span>&nbsp;<span class="op" id="5804436">:=</span>&nbsp;<span class="num" id="5804439">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804442">for</span>&nbsp;<span class="ident" id="5804446">_</span><span class="op" id="5804447">,</span>&nbsp;<span class="ident" id="5804449">stmt</span>&nbsp;<span class="op" id="5804454">:=</span>&nbsp;<span class="keyword" id="5804457">range</span>&nbsp;<span class="ident" id="5804463">v</span><span class="op" id="5804464">.</span><span class="ident" id="5804465">stmts</span>&nbsp;<span class="op" id="5804471">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804475">ret</span>&nbsp;<span class="op" id="5804479">+=</span>&nbsp;<span class="builtinfunc" id="5804482">len</span><span class="op" id="5804485">(</span><span class="ident" id="5804486">stmt</span><span class="op" id="5804490">.</span><span class="ident" id="5804491">data</span><span class="op" id="5804495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804502">return</span>&nbsp;<span class="ident" id="5804509">ret</span><br>
<span class="lineno"></span><span class="op" id="5804513">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5804516">func</span>&nbsp;<span class="ident" id="5804521">varAlign</span><span class="op" id="5804529">(</span><span class="ident" id="5804530">v</span>&nbsp;<span class="op" id="5804532">*</span><span class="ident" id="5804533">varDecl</span><span class="op" id="5804540">)</span>&nbsp;<span class="builtintype" id="5804542">uint32</span>&nbsp;<span class="op" id="5804549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804552">for</span>&nbsp;<span class="ident" id="5804556">_</span><span class="op" id="5804557">,</span>&nbsp;<span class="ident" id="5804559">stmt</span>&nbsp;<span class="op" id="5804564">:=</span>&nbsp;<span class="keyword" id="5804567">range</span>&nbsp;<span class="ident" id="5804573">v</span><span class="op" id="5804574">.</span><span class="ident" id="5804575">stmts</span>&nbsp;<span class="op" id="5804581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804585">if</span>&nbsp;<span class="ident" id="5804588">stmt</span><span class="op" id="5804592">.</span><span class="ident" id="5804593">align</span>&nbsp;<span class="op" id="5804599">==</span>&nbsp;<span class="num" id="5804602">4</span>&nbsp;<span class="op" id="5804604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804609">return</span>&nbsp;<span class="num" id="5804616">4</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804626">return</span>&nbsp;<span class="num" id="5804633">1</span><br>
<span class="lineno"></span><span class="op" id="5804635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5804638">func</span>&nbsp;<span class="ident" id="5804643">buildVar</span><span class="op" id="5804651">(</span><span class="ident" id="5804652">b</span>&nbsp;<span class="op" id="5804654">*</span><span class="ident" id="5804655">builder</span><span class="op" id="5804662">,</span>&nbsp;<span class="ident" id="5804664">v</span>&nbsp;<span class="op" id="5804666">*</span><span class="ident" id="5804667">varDecl</span><span class="op" id="5804674">)</span>&nbsp;<span class="op" id="5804676">*</span><span class="ident" id="5804677">link8</span><span class="op" id="5804682">.</span><span class="ident" id="5804683">Var</span>&nbsp;<span class="op" id="5804687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804690">if</span>&nbsp;<span class="ident" id="5804693">varSize</span><span class="op" id="5804700">(</span><span class="ident" id="5804701">v</span><span class="op" id="5804702">)</span>&nbsp;<span class="op" id="5804704">==</span>&nbsp;<span class="num" id="5804707">0</span>&nbsp;<span class="op" id="5804709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804713">b</span><span class="op" id="5804714">.</span><span class="ident" id="5804715">err</span><span class="op" id="5804718">(</span><span class="ident" id="5804719">v</span><span class="op" id="5804720">.</span><span class="ident" id="5804721">name</span><span class="op" id="5804725">.</span><span class="ident" id="5804726">Pos</span><span class="op" id="5804729">,</span>&nbsp;<span class="string" id="5804731">&#34;var&nbsp;%q&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="5804751">,</span>&nbsp;<span class="ident" id="5804753">v</span><span class="op" id="5804754">.</span><span class="ident" id="5804755">name</span><span class="op" id="5804759">.</span><span class="ident" id="5804760">Lit</span><span class="op" id="5804763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804767">return</span>&nbsp;<span class="ident" id="5804774">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804779">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804783">ret</span>&nbsp;<span class="op" id="5804787">:=</span>&nbsp;<span class="ident" id="5804790">link8</span><span class="op" id="5804795">.</span><span class="ident" id="5804796">NewVar</span><span class="op" id="5804802">(</span><span class="ident" id="5804803">varAlign</span><span class="op" id="5804811">(</span><span class="ident" id="5804812">v</span><span class="op" id="5804813">)</span><span class="op" id="5804814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804817">for</span>&nbsp;<span class="ident" id="5804821">_</span><span class="op" id="5804822">,</span>&nbsp;<span class="ident" id="5804824">stmt</span>&nbsp;<span class="op" id="5804829">:=</span>&nbsp;<span class="keyword" id="5804832">range</span>&nbsp;<span class="ident" id="5804838">v</span><span class="op" id="5804839">.</span><span class="ident" id="5804840">stmts</span>&nbsp;<span class="op" id="5804846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804850">n</span>&nbsp;<span class="op" id="5804852">:=</span>&nbsp;<span class="ident" id="5804855">ret</span><span class="op" id="5804858">.</span><span class="ident" id="5804859">Size</span><span class="op" id="5804863">(</span><span class="op" id="5804864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804868">if</span>&nbsp;<span class="ident" id="5804871">stmt</span><span class="op" id="5804875">.</span><span class="ident" id="5804876">align</span>&nbsp;<span class="op" id="5804882">==</span>&nbsp;<span class="num" id="5804885">4</span>&nbsp;<span class="op" id="5804887">&amp;&amp;</span>&nbsp;<span class="ident" id="5804890">n</span><span class="op" id="5804891">%</span><span class="num" id="5804892">4</span>&nbsp;<span class="op" id="5804894">!=</span>&nbsp;<span class="num" id="5804897">0</span>&nbsp;<span class="op" id="5804899">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804904">ret</span><span class="op" id="5804907">.</span><span class="ident" id="5804908">Pad</span><span class="op" id="5804911">(</span><span class="num" id="5804912">4</span>&nbsp;<span class="op" id="5804914">-</span>&nbsp;<span class="ident" id="5804916">n</span><span class="op" id="5804917">%</span><span class="num" id="5804918">4</span><span class="op" id="5804919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804928">ret</span><span class="op" id="5804931">.</span><span class="ident" id="5804932">Write</span><span class="op" id="5804937">(</span><span class="ident" id="5804938">stmt</span><span class="op" id="5804942">.</span><span class="ident" id="5804943">data</span><span class="op" id="5804947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5804950">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5804954">if</span>&nbsp;<span class="ident" id="5804957">ret</span><span class="op" id="5804960">.</span><span class="ident" id="5804961">TooLarge</span><span class="op" id="5804969">(</span><span class="op" id="5804970">)</span>&nbsp;<span class="op" id="5804972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804976">b</span><span class="op" id="5804977">.</span><span class="ident" id="5804978">err</span><span class="op" id="5804981">(</span><span class="ident" id="5804982">v</span><span class="op" id="5804983">.</span><span class="ident" id="5804984">name</span><span class="op" id="5804988">.</span><span class="ident" id="5804989">Pos</span><span class="op" id="5804992">,</span>&nbsp;<span class="string" id="5804994">&#34;var&nbsp;%q&nbsp;too&nbsp;large&#34;</span><span class="op" id="5805012">,</span>&nbsp;<span class="ident" id="5805014">v</span><span class="op" id="5805015">.</span><span class="ident" id="5805016">name</span><span class="op" id="5805020">.</span><span class="ident" id="5805021">Lit</span><span class="op" id="5805024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5805028">return</span>&nbsp;<span class="ident" id="5805035">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5805040">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5805044">return</span>&nbsp;<span class="ident" id="5805051">ret</span><br>
<span class="lineno"></span><span class="op" id="5805055">}</span>
</div>
</body>
</html>
