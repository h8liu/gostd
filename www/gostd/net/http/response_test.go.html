<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html" class="current">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7885777">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7885833">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7885887">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7885938">package</span>&nbsp;<span class="ident" id="7885946">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7885952">import</span>&nbsp;<span class="op" id="7885959">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7885962">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7885971">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7885980">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7885997">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886012">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886019">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886025">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886038">&#34;net/http/internal&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886059">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886070">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886081">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886091">&#34;strings&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886102">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7886112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886115">type</span>&nbsp;<span class="ident" id="7886120">respTest</span>&nbsp;<span class="keyword" id="7886129">struct</span>&nbsp;<span class="op" id="7886136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886139">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="7886144">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886152">Resp</span>&nbsp;<span class="ident" id="7886157">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886167">Body</span>&nbsp;<span class="builtintype" id="7886172">string</span><br>
<span class="lineno"></span><span class="op" id="7886179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886182">func</span>&nbsp;<span class="ident" id="7886187">dummyReq</span><span class="op" id="7886195">(</span><span class="ident" id="7886196">method</span>&nbsp;<span class="builtintype" id="7886203">string</span><span class="op" id="7886209">)</span>&nbsp;<span class="op" id="7886211">*</span><span class="ident" id="7886212">Request</span>&nbsp;<span class="op" id="7886220">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886223">return</span>&nbsp;<span class="op" id="7886230">&amp;</span><span class="ident" id="7886231">Request</span><span class="op" id="7886238">{</span><span class="ident" id="7886239">Method</span><span class="op" id="7886245">:</span>&nbsp;<span class="ident" id="7886247">method</span><span class="op" id="7886253">}</span><br>
<span class="lineno"></span><span class="op" id="7886255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886258">func</span>&nbsp;<span class="ident" id="7886263">dummyReq11</span><span class="op" id="7886273">(</span><span class="ident" id="7886274">method</span>&nbsp;<span class="builtintype" id="7886281">string</span><span class="op" id="7886287">)</span>&nbsp;<span class="op" id="7886289">*</span><span class="ident" id="7886290">Request</span>&nbsp;<span class="op" id="7886298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7886301">return</span>&nbsp;<span class="op" id="7886308">&amp;</span><span class="ident" id="7886309">Request</span><span class="op" id="7886316">{</span><span class="ident" id="7886317">Method</span><span class="op" id="7886323">:</span>&nbsp;<span class="ident" id="7886325">method</span><span class="op" id="7886331">,</span>&nbsp;<span class="ident" id="7886333">Proto</span><span class="op" id="7886338">:</span>&nbsp;<span class="string" id="7886340">&#34;HTTP/1.1&#34;</span><span class="op" id="7886350">,</span>&nbsp;<span class="ident" id="7886352">ProtoMajor</span><span class="op" id="7886362">:</span>&nbsp;<span class="num" id="7886364">1</span><span class="op" id="7886365">,</span>&nbsp;<span class="ident" id="7886367">ProtoMinor</span><span class="op" id="7886377">:</span>&nbsp;<span class="num" id="7886379">1</span><span class="op" id="7886380">}</span><br>
<span class="lineno">35</span><span class="op" id="7886382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7886385">var</span>&nbsp;<span class="ident" id="7886389">respTests</span>&nbsp;<span class="op" id="7886399">=</span>&nbsp;<span class="op" id="7886401">[</span><span class="op" id="7886402">]</span><span class="ident" id="7886403">respTest</span><span class="op" id="7886411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7886414">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886461">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886465">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7886487">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886492">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7886516">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886521">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7886528">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886533">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7886546">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886551">Response</span><span class="op" id="7886559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886564">Status</span><span class="op" id="7886570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886576">&#34;200&nbsp;OK&#34;</span><span class="op" id="7886584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886589">StatusCode</span><span class="op" id="7886599">:</span>&nbsp;<span class="num" id="7886601">200</span><span class="op" id="7886604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886609">Proto</span><span class="op" id="7886614">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886621">&#34;HTTP/1.0&#34;</span><span class="op" id="7886631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886636">ProtoMajor</span><span class="op" id="7886646">:</span>&nbsp;<span class="num" id="7886648">1</span><span class="op" id="7886649">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886654">ProtoMinor</span><span class="op" id="7886664">:</span>&nbsp;<span class="num" id="7886666">0</span><span class="op" id="7886667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886672">Request</span><span class="op" id="7886679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886684">dummyReq</span><span class="op" id="7886692">(</span><span class="string" id="7886693">&#34;GET&#34;</span><span class="op" id="7886698">)</span><span class="op" id="7886699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886704">Header</span><span class="op" id="7886710">:</span>&nbsp;<span class="ident" id="7886712">Header</span><span class="op" id="7886718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886724">&#34;Connection&#34;</span><span class="op" id="7886736">:</span>&nbsp;<span class="op" id="7886738">{</span><span class="string" id="7886739">&#34;close&#34;</span><span class="op" id="7886746">}</span><span class="op" id="7886747">,</span>&nbsp;<span class="comment" id="7886749">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886774">}</span><span class="op" id="7886775">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886780">Close</span><span class="op" id="7886785">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7886795">true</span><span class="op" id="7886799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886804">ContentLength</span><span class="op" id="7886817">:</span>&nbsp;<span class="op" id="7886819">-</span><span class="num" id="7886820">1</span><span class="op" id="7886821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886825">}</span><span class="op" id="7886826">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886831">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7886844">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886847">}</span><span class="op" id="7886848">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7886852">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;response&nbsp;without&nbsp;Content-Length&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7886910">//&nbsp;Connection&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7886934">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886938">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7886960">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886965">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7886972">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7886977">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7886990">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7886995">Response</span><span class="op" id="7887003">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887008">Status</span><span class="op" id="7887014">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887023">&#34;200&nbsp;OK&#34;</span><span class="op" id="7887031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887036">StatusCode</span><span class="op" id="7887046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7887051">200</span><span class="op" id="7887054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887059">Proto</span><span class="op" id="7887064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887074">&#34;HTTP/1.1&#34;</span><span class="op" id="7887084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887089">ProtoMajor</span><span class="op" id="7887099">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7887104">1</span><span class="op" id="7887105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887110">ProtoMinor</span><span class="op" id="7887120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7887125">1</span><span class="op" id="7887126">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887131">Header</span><span class="op" id="7887137">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887146">Header</span><span class="op" id="7887152">{</span><span class="op" id="7887153">}</span><span class="op" id="7887154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887159">Request</span><span class="op" id="7887166">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887174">dummyReq</span><span class="op" id="7887182">(</span><span class="string" id="7887183">&#34;GET&#34;</span><span class="op" id="7887188">)</span><span class="op" id="7887189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887194">Close</span><span class="op" id="7887199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7887209">true</span><span class="op" id="7887213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887218">ContentLength</span><span class="op" id="7887231">:</span>&nbsp;<span class="op" id="7887233">-</span><span class="num" id="7887234">1</span><span class="op" id="7887235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887239">}</span><span class="op" id="7887240">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887245">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7887258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887261">}</span><span class="op" id="7887262">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7887266">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;204&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887330">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7887360">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887365">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7887372">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887377">&#34;Body&nbsp;should&nbsp;not&nbsp;be&nbsp;read!\n&#34;</span><span class="op" id="7887405">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887410">Response</span><span class="op" id="7887418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887423">Status</span><span class="op" id="7887429">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887438">&#34;204&nbsp;No&nbsp;Content&#34;</span><span class="op" id="7887454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887459">StatusCode</span><span class="op" id="7887469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7887474">204</span><span class="op" id="7887477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887482">Proto</span><span class="op" id="7887487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887497">&#34;HTTP/1.1&#34;</span><span class="op" id="7887507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887512">ProtoMajor</span><span class="op" id="7887522">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7887527">1</span><span class="op" id="7887528">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887533">ProtoMinor</span><span class="op" id="7887543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7887548">1</span><span class="op" id="7887549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887554">Header</span><span class="op" id="7887560">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887569">Header</span><span class="op" id="7887575">{</span><span class="op" id="7887576">}</span><span class="op" id="7887577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887582">Request</span><span class="op" id="7887589">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887597">dummyReq</span><span class="op" id="7887605">(</span><span class="string" id="7887606">&#34;GET&#34;</span><span class="op" id="7887611">)</span><span class="op" id="7887612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887617">Close</span><span class="op" id="7887622">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7887632">false</span><span class="op" id="7887637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887642">ContentLength</span><span class="op" id="7887655">:</span>&nbsp;<span class="num" id="7887657">0</span><span class="op" id="7887658">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887662">}</span><span class="op" id="7887663">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887668">&#34;&#34;</span><span class="op" id="7887670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887673">}</span><span class="op" id="7887674">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7887678">//&nbsp;Unchunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7887722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887726">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7887748">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887753">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7887778">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887783">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7887807">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887812">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7887819">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887824">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7887837">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887842">Response</span><span class="op" id="7887850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887855">Status</span><span class="op" id="7887861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887867">&#34;200&nbsp;OK&#34;</span><span class="op" id="7887875">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887880">StatusCode</span><span class="op" id="7887890">:</span>&nbsp;<span class="num" id="7887892">200</span><span class="op" id="7887895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887900">Proto</span><span class="op" id="7887905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7887912">&#34;HTTP/1.0&#34;</span><span class="op" id="7887922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887927">ProtoMajor</span><span class="op" id="7887937">:</span>&nbsp;<span class="num" id="7887939">1</span><span class="op" id="7887940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887945">ProtoMinor</span><span class="op" id="7887955">:</span>&nbsp;<span class="num" id="7887957">0</span><span class="op" id="7887958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887963">Request</span><span class="op" id="7887970">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887975">dummyReq</span><span class="op" id="7887983">(</span><span class="string" id="7887984">&#34;GET&#34;</span><span class="op" id="7887989">)</span><span class="op" id="7887990">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7887995">Header</span><span class="op" id="7888001">:</span>&nbsp;<span class="ident" id="7888003">Header</span><span class="op" id="7888009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888015">&#34;Connection&#34;</span><span class="op" id="7888027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888033">{</span><span class="string" id="7888034">&#34;close&#34;</span><span class="op" id="7888041">}</span><span class="op" id="7888042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888048">&#34;Content-Length&#34;</span><span class="op" id="7888064">:</span>&nbsp;<span class="op" id="7888066">{</span><span class="string" id="7888067">&#34;10&#34;</span><span class="op" id="7888071">}</span><span class="op" id="7888072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888077">}</span><span class="op" id="7888078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888083">Close</span><span class="op" id="7888088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7888098">true</span><span class="op" id="7888102">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888107">ContentLength</span><span class="op" id="7888120">:</span>&nbsp;<span class="num" id="7888122">10</span><span class="op" id="7888124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888128">}</span><span class="op" id="7888129">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888134">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7888147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888150">}</span><span class="op" id="7888151">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7888155">//&nbsp;Chunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888204">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7888226">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888231">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7888264">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888269">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7888276">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888281">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7888290">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888295">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7888313">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888318">&#34;09\r\n&#34;</span>&nbsp;<span class="op" id="7888327">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888332">&#34;continued\r\n&#34;</span>&nbsp;<span class="op" id="7888348">+</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888353">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7888361">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888366">&#34;\r\n&#34;</span><span class="op" id="7888372">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888377">Response</span><span class="op" id="7888385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888390">Status</span><span class="op" id="7888396">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888408">&#34;200&nbsp;OK&#34;</span><span class="op" id="7888416">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888421">StatusCode</span><span class="op" id="7888431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7888439">200</span><span class="op" id="7888442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888447">Proto</span><span class="op" id="7888452">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888465">&#34;HTTP/1.1&#34;</span><span class="op" id="7888475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888480">ProtoMajor</span><span class="op" id="7888490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7888498">1</span><span class="op" id="7888499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888504">ProtoMinor</span><span class="op" id="7888514">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7888522">1</span><span class="op" id="7888523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888528">Request</span><span class="op" id="7888535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888546">dummyReq</span><span class="op" id="7888554">(</span><span class="string" id="7888555">&#34;GET&#34;</span><span class="op" id="7888560">)</span><span class="op" id="7888561">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888566">Header</span><span class="op" id="7888572">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888584">Header</span><span class="op" id="7888590">{</span><span class="op" id="7888591">}</span><span class="op" id="7888592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888597">Close</span><span class="op" id="7888602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7888615">false</span><span class="op" id="7888620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888625">ContentLength</span><span class="op" id="7888638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888643">-</span><span class="num" id="7888644">1</span><span class="op" id="7888645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888650">TransferEncoding</span><span class="op" id="7888666">:</span>&nbsp;<span class="op" id="7888668">[</span><span class="op" id="7888669">]</span><span class="builtintype" id="7888670">string</span><span class="op" id="7888676">{</span><span class="string" id="7888677">&#34;chunked&#34;</span><span class="op" id="7888686">}</span><span class="op" id="7888687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888691">}</span><span class="op" id="7888692">,</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888697">&#34;Body&nbsp;here\ncontinued&#34;</span><span class="op" id="7888719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888722">}</span><span class="op" id="7888723">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7888727">//&nbsp;Chunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7888769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888773">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7888795">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888800">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7888833">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888838">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7888863">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888868">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7888875">+</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888880">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7888889">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888894">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7888912">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888917">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7888925">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888930">&#34;\r\n&#34;</span><span class="op" id="7888936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888941">Response</span><span class="op" id="7888949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888954">Status</span><span class="op" id="7888960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7888972">&#34;200&nbsp;OK&#34;</span><span class="op" id="7888980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7888985">StatusCode</span><span class="op" id="7888995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889003">200</span><span class="op" id="7889006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889011">Proto</span><span class="op" id="7889016">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889029">&#34;HTTP/1.1&#34;</span><span class="op" id="7889039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889044">ProtoMajor</span><span class="op" id="7889054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889062">1</span><span class="op" id="7889063">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889068">ProtoMinor</span><span class="op" id="7889078">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889086">1</span><span class="op" id="7889087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889092">Request</span><span class="op" id="7889099">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889110">dummyReq</span><span class="op" id="7889118">(</span><span class="string" id="7889119">&#34;GET&#34;</span><span class="op" id="7889124">)</span><span class="op" id="7889125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889130">Header</span><span class="op" id="7889136">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889148">Header</span><span class="op" id="7889154">{</span><span class="op" id="7889155">}</span><span class="op" id="7889156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889161">Close</span><span class="op" id="7889166">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7889179">false</span><span class="op" id="7889184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889189">ContentLength</span><span class="op" id="7889202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889207">-</span><span class="num" id="7889208">1</span><span class="op" id="7889209">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889214">TransferEncoding</span><span class="op" id="7889230">:</span>&nbsp;<span class="op" id="7889232">[</span><span class="op" id="7889233">]</span><span class="builtintype" id="7889234">string</span><span class="op" id="7889240">{</span><span class="string" id="7889241">&#34;chunked&#34;</span><span class="op" id="7889250">}</span><span class="op" id="7889251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889255">}</span><span class="op" id="7889256">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889261">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7889274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889277">}</span><span class="op" id="7889278">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7889282">//&nbsp;Chunked&nbsp;response&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889337">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7889359">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889364">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7889397">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889402">&#34;\r\n&#34;</span><span class="op" id="7889408">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889413">Response</span><span class="op" id="7889421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889426">Status</span><span class="op" id="7889432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889444">&#34;200&nbsp;OK&#34;</span><span class="op" id="7889452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889457">StatusCode</span><span class="op" id="7889467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889475">200</span><span class="op" id="7889478">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889483">Proto</span><span class="op" id="7889488">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889501">&#34;HTTP/1.1&#34;</span><span class="op" id="7889511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889516">ProtoMajor</span><span class="op" id="7889526">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889534">1</span><span class="op" id="7889535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889540">ProtoMinor</span><span class="op" id="7889550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889558">1</span><span class="op" id="7889559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889564">Request</span><span class="op" id="7889571">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889582">dummyReq</span><span class="op" id="7889590">(</span><span class="string" id="7889591">&#34;HEAD&#34;</span><span class="op" id="7889597">)</span><span class="op" id="7889598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889603">Header</span><span class="op" id="7889609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889621">Header</span><span class="op" id="7889627">{</span><span class="op" id="7889628">}</span><span class="op" id="7889629">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889634">TransferEncoding</span><span class="op" id="7889650">:</span>&nbsp;<span class="op" id="7889652">[</span><span class="op" id="7889653">]</span><span class="builtintype" id="7889654">string</span><span class="op" id="7889660">{</span><span class="string" id="7889661">&#34;chunked&#34;</span><span class="op" id="7889670">}</span><span class="op" id="7889671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889676">Close</span><span class="op" id="7889681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7889694">false</span><span class="op" id="7889699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889704">ContentLength</span><span class="op" id="7889717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889722">-</span><span class="num" id="7889723">1</span><span class="op" id="7889724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889728">}</span><span class="op" id="7889729">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889734">&#34;&#34;</span><span class="op" id="7889736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889739">}</span><span class="op" id="7889740">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7889744">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7889793">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889797">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7889819">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889824">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7889850">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889855">&#34;\r\n&#34;</span><span class="op" id="7889861">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889866">Response</span><span class="op" id="7889874">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889879">Status</span><span class="op" id="7889885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889897">&#34;200&nbsp;OK&#34;</span><span class="op" id="7889905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889910">StatusCode</span><span class="op" id="7889920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889928">200</span><span class="op" id="7889931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889936">Proto</span><span class="op" id="7889941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7889954">&#34;HTTP/1.0&#34;</span><span class="op" id="7889964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889969">ProtoMajor</span><span class="op" id="7889979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7889987">1</span><span class="op" id="7889988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7889993">ProtoMinor</span><span class="op" id="7890003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890011">0</span><span class="op" id="7890012">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890017">Request</span><span class="op" id="7890024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890035">dummyReq</span><span class="op" id="7890043">(</span><span class="string" id="7890044">&#34;HEAD&#34;</span><span class="op" id="7890050">)</span><span class="op" id="7890051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890056">Header</span><span class="op" id="7890062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890074">Header</span><span class="op" id="7890080">{</span><span class="string" id="7890081">&#34;Content-Length&#34;</span><span class="op" id="7890097">:</span>&nbsp;<span class="op" id="7890099">{</span><span class="string" id="7890100">&#34;256&#34;</span><span class="op" id="7890105">}</span><span class="op" id="7890106">}</span><span class="op" id="7890107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890112">TransferEncoding</span><span class="op" id="7890128">:</span>&nbsp;<span class="builtintype" id="7890130">nil</span><span class="op" id="7890133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890138">Close</span><span class="op" id="7890143">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7890156">true</span><span class="op" id="7890160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890165">ContentLength</span><span class="op" id="7890178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890183">256</span><span class="op" id="7890186">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890190">}</span><span class="op" id="7890191">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890196">&#34;&#34;</span><span class="op" id="7890198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890201">}</span><span class="op" id="7890202">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7890206">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request&nbsp;with&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890273">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7890295">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890300">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7890326">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890331">&#34;\r\n&#34;</span><span class="op" id="7890337">,</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890342">Response</span><span class="op" id="7890350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890355">Status</span><span class="op" id="7890361">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890373">&#34;200&nbsp;OK&#34;</span><span class="op" id="7890381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890386">StatusCode</span><span class="op" id="7890396">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890404">200</span><span class="op" id="7890407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890412">Proto</span><span class="op" id="7890417">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890430">&#34;HTTP/1.1&#34;</span><span class="op" id="7890440">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890445">ProtoMajor</span><span class="op" id="7890455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890463">1</span><span class="op" id="7890464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890469">ProtoMinor</span><span class="op" id="7890479">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890487">1</span><span class="op" id="7890488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890493">Request</span><span class="op" id="7890500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890511">dummyReq</span><span class="op" id="7890519">(</span><span class="string" id="7890520">&#34;HEAD&#34;</span><span class="op" id="7890526">)</span><span class="op" id="7890527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890532">Header</span><span class="op" id="7890538">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890550">Header</span><span class="op" id="7890556">{</span><span class="string" id="7890557">&#34;Content-Length&#34;</span><span class="op" id="7890573">:</span>&nbsp;<span class="op" id="7890575">{</span><span class="string" id="7890576">&#34;256&#34;</span><span class="op" id="7890581">}</span><span class="op" id="7890582">}</span><span class="op" id="7890583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890588">TransferEncoding</span><span class="op" id="7890604">:</span>&nbsp;<span class="builtintype" id="7890606">nil</span><span class="op" id="7890609">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890614">Close</span><span class="op" id="7890619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7890632">false</span><span class="op" id="7890637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890642">ContentLength</span><span class="op" id="7890655">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890660">256</span><span class="op" id="7890663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890667">}</span><span class="op" id="7890668">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890673">&#34;&#34;</span><span class="op" id="7890675">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890678">}</span><span class="op" id="7890679">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7890683">//&nbsp;No&nbsp;Content-Length&nbsp;or&nbsp;Chunked&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7890746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890750">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7890772">+</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890777">&#34;\r\n&#34;</span><span class="op" id="7890783">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890788">Response</span><span class="op" id="7890796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890801">Status</span><span class="op" id="7890807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890819">&#34;200&nbsp;OK&#34;</span><span class="op" id="7890827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890832">StatusCode</span><span class="op" id="7890842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890850">200</span><span class="op" id="7890853">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890858">Proto</span><span class="op" id="7890863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7890876">&#34;HTTP/1.0&#34;</span><span class="op" id="7890886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890891">ProtoMajor</span><span class="op" id="7890901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890909">1</span><span class="op" id="7890910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890915">ProtoMinor</span><span class="op" id="7890925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7890933">0</span><span class="op" id="7890934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890939">Request</span><span class="op" id="7890946">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890957">dummyReq</span><span class="op" id="7890965">(</span><span class="string" id="7890966">&#34;HEAD&#34;</span><span class="op" id="7890972">)</span><span class="op" id="7890973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890978">Header</span><span class="op" id="7890984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7890996">Header</span><span class="op" id="7891002">{</span><span class="op" id="7891003">}</span><span class="op" id="7891004">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891009">TransferEncoding</span><span class="op" id="7891025">:</span>&nbsp;<span class="builtintype" id="7891027">nil</span><span class="op" id="7891030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891035">Close</span><span class="op" id="7891040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7891053">true</span><span class="op" id="7891057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891062">ContentLength</span><span class="op" id="7891075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891080">-</span><span class="num" id="7891081">1</span><span class="op" id="7891082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891086">}</span><span class="op" id="7891087">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891092">&#34;&#34;</span><span class="op" id="7891094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891097">}</span><span class="op" id="7891098">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7891102">//&nbsp;explicit&nbsp;Content-Length&nbsp;of&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891136">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891140">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7891162">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891167">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7891191">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891196">&#34;\r\n&#34;</span><span class="op" id="7891202">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891207">Response</span><span class="op" id="7891215">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891220">Status</span><span class="op" id="7891226">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891232">&#34;200&nbsp;OK&#34;</span><span class="op" id="7891240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891245">StatusCode</span><span class="op" id="7891255">:</span>&nbsp;<span class="num" id="7891257">200</span><span class="op" id="7891260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891265">Proto</span><span class="op" id="7891270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891277">&#34;HTTP/1.1&#34;</span><span class="op" id="7891287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891292">ProtoMajor</span><span class="op" id="7891302">:</span>&nbsp;<span class="num" id="7891304">1</span><span class="op" id="7891305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891310">ProtoMinor</span><span class="op" id="7891320">:</span>&nbsp;<span class="num" id="7891322">1</span><span class="op" id="7891323">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891328">Request</span><span class="op" id="7891335">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891340">dummyReq</span><span class="op" id="7891348">(</span><span class="string" id="7891349">&#34;GET&#34;</span><span class="op" id="7891354">)</span><span class="op" id="7891355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891360">Header</span><span class="op" id="7891366">:</span>&nbsp;<span class="ident" id="7891368">Header</span><span class="op" id="7891374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891380">&#34;Content-Length&#34;</span><span class="op" id="7891396">:</span>&nbsp;<span class="op" id="7891398">{</span><span class="string" id="7891399">&#34;0&#34;</span><span class="op" id="7891402">}</span><span class="op" id="7891403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891408">}</span><span class="op" id="7891409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891414">Close</span><span class="op" id="7891419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7891429">false</span><span class="op" id="7891434">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891439">ContentLength</span><span class="op" id="7891452">:</span>&nbsp;<span class="num" id="7891454">0</span><span class="op" id="7891455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891459">}</span><span class="op" id="7891460">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891465">&#34;&#34;</span><span class="op" id="7891467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891470">}</span><span class="op" id="7891471">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7891475">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;but&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7891536">//&nbsp;(permitted&nbsp;by&nbsp;RFC&nbsp;2616)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891568">&#34;HTTP/1.0&nbsp;303&nbsp;\r\n\r\n&#34;</span><span class="op" id="7891591">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891595">Response</span><span class="op" id="7891603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891608">Status</span><span class="op" id="7891614">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891623">&#34;303&nbsp;&#34;</span><span class="op" id="7891629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891634">StatusCode</span><span class="op" id="7891644">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7891649">303</span><span class="op" id="7891652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891657">Proto</span><span class="op" id="7891662">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891672">&#34;HTTP/1.0&#34;</span><span class="op" id="7891682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891687">ProtoMajor</span><span class="op" id="7891697">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7891702">1</span><span class="op" id="7891703">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891708">ProtoMinor</span><span class="op" id="7891718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7891723">0</span><span class="op" id="7891724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891729">Request</span><span class="op" id="7891736">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891744">dummyReq</span><span class="op" id="7891752">(</span><span class="string" id="7891753">&#34;GET&#34;</span><span class="op" id="7891758">)</span><span class="op" id="7891759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891764">Header</span><span class="op" id="7891770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891779">Header</span><span class="op" id="7891785">{</span><span class="op" id="7891786">}</span><span class="op" id="7891787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891792">Close</span><span class="op" id="7891797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7891807">true</span><span class="op" id="7891811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7891816">ContentLength</span><span class="op" id="7891829">:</span>&nbsp;<span class="op" id="7891831">-</span><span class="num" id="7891832">1</span><span class="op" id="7891833">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891837">}</span><span class="op" id="7891838">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891843">&#34;&#34;</span><span class="op" id="7891845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891848">}</span><span class="op" id="7891849">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7891853">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;and&nbsp;no&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7891917">//&nbsp;(not&nbsp;permitted&nbsp;by&nbsp;RFC&nbsp;2616,&nbsp;but&nbsp;we&#39;ll&nbsp;accept&nbsp;it&nbsp;anyway)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7891977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7891981">&#34;HTTP/1.0&nbsp;303\r\n\r\n&#34;</span><span class="op" id="7892003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892007">Response</span><span class="op" id="7892015">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892020">Status</span><span class="op" id="7892026">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892035">&#34;303&nbsp;&#34;</span><span class="op" id="7892041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892046">StatusCode</span><span class="op" id="7892056">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7892061">303</span><span class="op" id="7892064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892069">Proto</span><span class="op" id="7892074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892084">&#34;HTTP/1.0&#34;</span><span class="op" id="7892094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892099">ProtoMajor</span><span class="op" id="7892109">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7892114">1</span><span class="op" id="7892115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892120">ProtoMinor</span><span class="op" id="7892130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7892135">0</span><span class="op" id="7892136">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892141">Request</span><span class="op" id="7892148">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892156">dummyReq</span><span class="op" id="7892164">(</span><span class="string" id="7892165">&#34;GET&#34;</span><span class="op" id="7892170">)</span><span class="op" id="7892171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892176">Header</span><span class="op" id="7892182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892191">Header</span><span class="op" id="7892197">{</span><span class="op" id="7892198">}</span><span class="op" id="7892199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892204">Close</span><span class="op" id="7892209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7892219">true</span><span class="op" id="7892223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892228">ContentLength</span><span class="op" id="7892241">:</span>&nbsp;<span class="op" id="7892243">-</span><span class="num" id="7892244">1</span><span class="op" id="7892245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892249">}</span><span class="op" id="7892250">,</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892255">&#34;&#34;</span><span class="op" id="7892257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892260">}</span><span class="op" id="7892261">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7892265">//&nbsp;golang.org/issue/4767:&nbsp;don&#39;t&nbsp;special-case&nbsp;multipart/byteranges&nbsp;responses</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892346">`HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content<br>
<span class="lineno"></span>Connection:&nbsp;close<br>
<span class="lineno"></span>Content-Type:&nbsp;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef<br>
<span class="lineno"></span><br>
<span class="lineno">340</span>some&nbsp;body`</span><span class="op" id="7892467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892471">Response</span><span class="op" id="7892479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892484">Status</span><span class="op" id="7892490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892496">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7892517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892522">StatusCode</span><span class="op" id="7892532">:</span>&nbsp;<span class="num" id="7892534">206</span><span class="op" id="7892537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892542">Proto</span><span class="op" id="7892547">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892554">&#34;HTTP/1.1&#34;</span><span class="op" id="7892564">,</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892569">ProtoMajor</span><span class="op" id="7892579">:</span>&nbsp;<span class="num" id="7892581">1</span><span class="op" id="7892582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892587">ProtoMinor</span><span class="op" id="7892597">:</span>&nbsp;<span class="num" id="7892599">1</span><span class="op" id="7892600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892605">Request</span><span class="op" id="7892612">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892617">dummyReq</span><span class="op" id="7892625">(</span><span class="string" id="7892626">&#34;GET&#34;</span><span class="op" id="7892631">)</span><span class="op" id="7892632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892637">Header</span><span class="op" id="7892643">:</span>&nbsp;<span class="ident" id="7892645">Header</span><span class="op" id="7892651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892657">&#34;Content-Type&#34;</span><span class="op" id="7892671">:</span>&nbsp;<span class="op" id="7892673">[</span><span class="op" id="7892674">]</span><span class="builtintype" id="7892675">string</span><span class="op" id="7892681">{</span><span class="string" id="7892682">&#34;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef&#34;</span><span class="op" id="7892731">}</span><span class="op" id="7892732">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892737">}</span><span class="op" id="7892738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892743">Close</span><span class="op" id="7892748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7892758">true</span><span class="op" id="7892762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892767">ContentLength</span><span class="op" id="7892780">:</span>&nbsp;<span class="op" id="7892782">-</span><span class="num" id="7892783">1</span><span class="op" id="7892784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892788">}</span><span class="op" id="7892789">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892794">&#34;some&nbsp;body&#34;</span><span class="op" id="7892805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892808">}</span><span class="op" id="7892809">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7892813">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length,&nbsp;Request&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7892875">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892879">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7892901">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892906">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7892930">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892935">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7892942">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892947">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7892960">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892965">Response</span><span class="op" id="7892973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7892978">Status</span><span class="op" id="7892984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7892990">&#34;200&nbsp;OK&#34;</span><span class="op" id="7892998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893003">StatusCode</span><span class="op" id="7893013">:</span>&nbsp;<span class="num" id="7893015">200</span><span class="op" id="7893018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893023">Proto</span><span class="op" id="7893028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893035">&#34;HTTP/1.0&#34;</span><span class="op" id="7893045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893050">ProtoMajor</span><span class="op" id="7893060">:</span>&nbsp;<span class="num" id="7893062">1</span><span class="op" id="7893063">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893068">ProtoMinor</span><span class="op" id="7893078">:</span>&nbsp;<span class="num" id="7893080">0</span><span class="op" id="7893081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893086">Header</span><span class="op" id="7893092">:</span>&nbsp;<span class="ident" id="7893094">Header</span><span class="op" id="7893100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893106">&#34;Connection&#34;</span><span class="op" id="7893118">:</span>&nbsp;<span class="op" id="7893120">{</span><span class="string" id="7893121">&#34;close&#34;</span><span class="op" id="7893128">}</span><span class="op" id="7893129">,</span>&nbsp;<span class="comment" id="7893131">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893156">}</span><span class="op" id="7893157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893162">Close</span><span class="op" id="7893167">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7893177">true</span><span class="op" id="7893181">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893186">ContentLength</span><span class="op" id="7893199">:</span>&nbsp;<span class="op" id="7893201">-</span><span class="num" id="7893202">1</span><span class="op" id="7893203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893207">}</span><span class="op" id="7893208">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893213">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7893226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893229">}</span><span class="op" id="7893230">,</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7893234">//&nbsp;206&nbsp;Partial&nbsp;Content.&nbsp;golang.org/issue/8923</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893285">&#34;HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7893320">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893325">&#34;Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8\r\n&#34;</span>&nbsp;<span class="op" id="7893371">+</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893376">&#34;Accept-Ranges:&nbsp;bytes\r\n&#34;</span>&nbsp;<span class="op" id="7893403">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893408">&#34;Content-Range:&nbsp;bytes&nbsp;0-5/1862\r\n&#34;</span>&nbsp;<span class="op" id="7893444">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893449">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7893477">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893482">&#34;foobar&#34;</span><span class="op" id="7893490">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893495">Response</span><span class="op" id="7893503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893508">Status</span><span class="op" id="7893514">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893520">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7893541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893546">StatusCode</span><span class="op" id="7893556">:</span>&nbsp;<span class="num" id="7893558">206</span><span class="op" id="7893561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893566">Proto</span><span class="op" id="7893571">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893578">&#34;HTTP/1.1&#34;</span><span class="op" id="7893588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893593">ProtoMajor</span><span class="op" id="7893603">:</span>&nbsp;<span class="num" id="7893605">1</span><span class="op" id="7893606">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893611">ProtoMinor</span><span class="op" id="7893621">:</span>&nbsp;<span class="num" id="7893623">1</span><span class="op" id="7893624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893629">Request</span><span class="op" id="7893636">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893641">dummyReq</span><span class="op" id="7893649">(</span><span class="string" id="7893650">&#34;GET&#34;</span><span class="op" id="7893655">)</span><span class="op" id="7893656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893661">Header</span><span class="op" id="7893667">:</span>&nbsp;<span class="ident" id="7893669">Header</span><span class="op" id="7893675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893681">&#34;Accept-Ranges&#34;</span><span class="op" id="7893696">:</span>&nbsp;&nbsp;<span class="op" id="7893699">[</span><span class="op" id="7893700">]</span><span class="builtintype" id="7893701">string</span><span class="op" id="7893707">{</span><span class="string" id="7893708">&#34;bytes&#34;</span><span class="op" id="7893715">}</span><span class="op" id="7893716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893722">&#34;Content-Length&#34;</span><span class="op" id="7893738">:</span>&nbsp;<span class="op" id="7893740">[</span><span class="op" id="7893741">]</span><span class="builtintype" id="7893742">string</span><span class="op" id="7893748">{</span><span class="string" id="7893749">&#34;6&#34;</span><span class="op" id="7893752">}</span><span class="op" id="7893753">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893759">&#34;Content-Type&#34;</span><span class="op" id="7893773">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7893777">[</span><span class="op" id="7893778">]</span><span class="builtintype" id="7893779">string</span><span class="op" id="7893785">{</span><span class="string" id="7893786">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="7893813">}</span><span class="op" id="7893814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893820">&#34;Content-Range&#34;</span><span class="op" id="7893835">:</span>&nbsp;&nbsp;<span class="op" id="7893838">[</span><span class="op" id="7893839">]</span><span class="builtintype" id="7893840">string</span><span class="op" id="7893846">{</span><span class="string" id="7893847">&#34;bytes&nbsp;0-5/1862&#34;</span><span class="op" id="7893863">}</span><span class="op" id="7893864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893869">}</span><span class="op" id="7893870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893875">ContentLength</span><span class="op" id="7893888">:</span>&nbsp;<span class="num" id="7893890">6</span><span class="op" id="7893891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893895">}</span><span class="op" id="7893896">,</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7893901">&#34;foobar&#34;</span><span class="op" id="7893909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7893912">}</span><span class="op" id="7893913">,</span><br>
<span class="lineno"></span><span class="op" id="7893915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7893918">func</span>&nbsp;<span class="ident" id="7893923">TestReadResponse</span><span class="op" id="7893939">(</span><span class="ident" id="7893940">t</span>&nbsp;<span class="op" id="7893942">*</span><span class="ident" id="7893943">testing</span><span class="op" id="7893950">.</span><span class="ident" id="7893951">T</span><span class="op" id="7893952">)</span>&nbsp;<span class="op" id="7893954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7893957">for</span>&nbsp;<span class="ident" id="7893961">i</span><span class="op" id="7893962">,</span>&nbsp;<span class="ident" id="7893964">tt</span>&nbsp;<span class="op" id="7893967">:=</span>&nbsp;<span class="keyword" id="7893970">range</span>&nbsp;<span class="ident" id="7893976">respTests</span>&nbsp;<span class="op" id="7893986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7893990">resp</span><span class="op" id="7893994">,</span>&nbsp;<span class="ident" id="7893996">err</span>&nbsp;<span class="op" id="7894000">:=</span>&nbsp;<span class="ident" id="7894003">ReadResponse</span><span class="op" id="7894015">(</span><span class="ident" id="7894016">bufio</span><span class="op" id="7894021">.</span><span class="ident" id="7894022">NewReader</span><span class="op" id="7894031">(</span><span class="ident" id="7894032">strings</span><span class="op" id="7894039">.</span><span class="ident" id="7894040">NewReader</span><span class="op" id="7894049">(</span><span class="ident" id="7894050">tt</span><span class="op" id="7894052">.</span><span class="ident" id="7894053">Raw</span><span class="op" id="7894056">)</span><span class="op" id="7894057">)</span><span class="op" id="7894058">,</span>&nbsp;<span class="ident" id="7894060">tt</span><span class="op" id="7894062">.</span><span class="ident" id="7894063">Resp</span><span class="op" id="7894067">.</span><span class="ident" id="7894068">Request</span><span class="op" id="7894075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894079">if</span>&nbsp;<span class="ident" id="7894082">err</span>&nbsp;<span class="op" id="7894086">!=</span>&nbsp;<span class="builtintype" id="7894089">nil</span>&nbsp;<span class="op" id="7894093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894098">t</span><span class="op" id="7894099">.</span><span class="ident" id="7894100">Errorf</span><span class="op" id="7894106">(</span><span class="string" id="7894107">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7894116">,</span>&nbsp;<span class="ident" id="7894118">i</span><span class="op" id="7894119">,</span>&nbsp;<span class="ident" id="7894121">err</span><span class="op" id="7894124">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894129">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894144">rbody</span>&nbsp;<span class="op" id="7894150">:=</span>&nbsp;<span class="ident" id="7894153">resp</span><span class="op" id="7894157">.</span><span class="ident" id="7894158">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894165">resp</span><span class="op" id="7894169">.</span><span class="ident" id="7894170">Body</span>&nbsp;<span class="op" id="7894175">=</span>&nbsp;<span class="builtintype" id="7894177">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894183">diff</span><span class="op" id="7894187">(</span><span class="ident" id="7894188">t</span><span class="op" id="7894189">,</span>&nbsp;<span class="ident" id="7894191">fmt</span><span class="op" id="7894194">.</span><span class="ident" id="7894195">Sprintf</span><span class="op" id="7894202">(</span><span class="string" id="7894203">&#34;#%d&nbsp;Response&#34;</span><span class="op" id="7894217">,</span>&nbsp;<span class="ident" id="7894219">i</span><span class="op" id="7894220">)</span><span class="op" id="7894221">,</span>&nbsp;<span class="ident" id="7894223">resp</span><span class="op" id="7894227">,</span>&nbsp;<span class="op" id="7894229">&amp;</span><span class="ident" id="7894230">tt</span><span class="op" id="7894232">.</span><span class="ident" id="7894233">Resp</span><span class="op" id="7894237">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894241">var</span>&nbsp;<span class="ident" id="7894245">bout</span>&nbsp;<span class="ident" id="7894250">bytes</span><span class="op" id="7894255">.</span><span class="ident" id="7894256">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894265">if</span>&nbsp;<span class="ident" id="7894268">rbody</span>&nbsp;<span class="op" id="7894274">!=</span>&nbsp;<span class="builtintype" id="7894277">nil</span>&nbsp;<span class="op" id="7894281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894286">_</span><span class="op" id="7894287">,</span>&nbsp;<span class="ident" id="7894289">err</span>&nbsp;<span class="op" id="7894293">=</span>&nbsp;<span class="ident" id="7894295">io</span><span class="op" id="7894297">.</span><span class="ident" id="7894298">Copy</span><span class="op" id="7894302">(</span><span class="op" id="7894303">&amp;</span><span class="ident" id="7894304">bout</span><span class="op" id="7894308">,</span>&nbsp;<span class="ident" id="7894310">rbody</span><span class="op" id="7894315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894320">if</span>&nbsp;<span class="ident" id="7894323">err</span>&nbsp;<span class="op" id="7894327">!=</span>&nbsp;<span class="builtintype" id="7894330">nil</span>&nbsp;<span class="op" id="7894334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894340">t</span><span class="op" id="7894341">.</span><span class="ident" id="7894342">Errorf</span><span class="op" id="7894348">(</span><span class="string" id="7894349">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7894358">,</span>&nbsp;<span class="ident" id="7894360">i</span><span class="op" id="7894361">,</span>&nbsp;<span class="ident" id="7894363">err</span><span class="op" id="7894366">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894372">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894389">rbody</span><span class="op" id="7894394">.</span><span class="ident" id="7894395">Close</span><span class="op" id="7894400">(</span><span class="op" id="7894401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894409">body</span>&nbsp;<span class="op" id="7894414">:=</span>&nbsp;<span class="ident" id="7894417">bout</span><span class="op" id="7894421">.</span><span class="ident" id="7894422">String</span><span class="op" id="7894428">(</span><span class="op" id="7894429">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894433">if</span>&nbsp;<span class="ident" id="7894436">body</span>&nbsp;<span class="op" id="7894441">!=</span>&nbsp;<span class="ident" id="7894444">tt</span><span class="op" id="7894446">.</span><span class="ident" id="7894447">Body</span>&nbsp;<span class="op" id="7894452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894457">t</span><span class="op" id="7894458">.</span><span class="ident" id="7894459">Errorf</span><span class="op" id="7894465">(</span><span class="string" id="7894466">&#34;#%d:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7894490">,</span>&nbsp;<span class="ident" id="7894492">i</span><span class="op" id="7894493">,</span>&nbsp;<span class="ident" id="7894495">body</span><span class="op" id="7894499">,</span>&nbsp;<span class="ident" id="7894501">tt</span><span class="op" id="7894503">.</span><span class="ident" id="7894504">Body</span><span class="op" id="7894508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894515">}</span><br>
<span class="lineno"></span><span class="op" id="7894517">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="7894520">func</span>&nbsp;<span class="ident" id="7894525">TestWriteResponse</span><span class="op" id="7894542">(</span><span class="ident" id="7894543">t</span>&nbsp;<span class="op" id="7894545">*</span><span class="ident" id="7894546">testing</span><span class="op" id="7894553">.</span><span class="ident" id="7894554">T</span><span class="op" id="7894555">)</span>&nbsp;<span class="op" id="7894557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894560">for</span>&nbsp;<span class="ident" id="7894564">i</span><span class="op" id="7894565">,</span>&nbsp;<span class="ident" id="7894567">tt</span>&nbsp;<span class="op" id="7894570">:=</span>&nbsp;<span class="keyword" id="7894573">range</span>&nbsp;<span class="ident" id="7894579">respTests</span>&nbsp;<span class="op" id="7894589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894593">resp</span><span class="op" id="7894597">,</span>&nbsp;<span class="ident" id="7894599">err</span>&nbsp;<span class="op" id="7894603">:=</span>&nbsp;<span class="ident" id="7894606">ReadResponse</span><span class="op" id="7894618">(</span><span class="ident" id="7894619">bufio</span><span class="op" id="7894624">.</span><span class="ident" id="7894625">NewReader</span><span class="op" id="7894634">(</span><span class="ident" id="7894635">strings</span><span class="op" id="7894642">.</span><span class="ident" id="7894643">NewReader</span><span class="op" id="7894652">(</span><span class="ident" id="7894653">tt</span><span class="op" id="7894655">.</span><span class="ident" id="7894656">Raw</span><span class="op" id="7894659">)</span><span class="op" id="7894660">)</span><span class="op" id="7894661">,</span>&nbsp;<span class="ident" id="7894663">tt</span><span class="op" id="7894665">.</span><span class="ident" id="7894666">Resp</span><span class="op" id="7894670">.</span><span class="ident" id="7894671">Request</span><span class="op" id="7894678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894682">if</span>&nbsp;<span class="ident" id="7894685">err</span>&nbsp;<span class="op" id="7894689">!=</span>&nbsp;<span class="builtintype" id="7894692">nil</span>&nbsp;<span class="op" id="7894696">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894701">t</span><span class="op" id="7894702">.</span><span class="ident" id="7894703">Errorf</span><span class="op" id="7894709">(</span><span class="string" id="7894710">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7894719">,</span>&nbsp;<span class="ident" id="7894721">i</span><span class="op" id="7894722">,</span>&nbsp;<span class="ident" id="7894724">err</span><span class="op" id="7894727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894732">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894747">err</span>&nbsp;<span class="op" id="7894751">=</span>&nbsp;<span class="ident" id="7894753">resp</span><span class="op" id="7894757">.</span><span class="ident" id="7894758">Write</span><span class="op" id="7894763">(</span><span class="ident" id="7894764">ioutil</span><span class="op" id="7894770">.</span><span class="ident" id="7894771">Discard</span><span class="op" id="7894778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894782">if</span>&nbsp;<span class="ident" id="7894785">err</span>&nbsp;<span class="op" id="7894789">!=</span>&nbsp;<span class="builtintype" id="7894792">nil</span>&nbsp;<span class="op" id="7894796">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894801">t</span><span class="op" id="7894802">.</span><span class="ident" id="7894803">Errorf</span><span class="op" id="7894809">(</span><span class="string" id="7894810">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7894819">,</span>&nbsp;<span class="ident" id="7894821">i</span><span class="op" id="7894822">,</span>&nbsp;<span class="ident" id="7894824">err</span><span class="op" id="7894827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7894832">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894846">}</span><br>
<span class="lineno"></span><span class="op" id="7894848">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7894851">var</span>&nbsp;<span class="ident" id="7894855">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7894886">=</span>&nbsp;<span class="op" id="7894888">[</span><span class="op" id="7894889">]</span><span class="keyword" id="7894890">struct</span>&nbsp;<span class="op" id="7894897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7894900">chunked</span><span class="op" id="7894907">,</span>&nbsp;<span class="ident" id="7894909">compressed</span>&nbsp;<span class="builtintype" id="7894920">bool</span><br>
<span class="lineno"></span><span class="op" id="7894925">}</span><span class="op" id="7894926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894929">{</span><span class="builtintype" id="7894930">false</span><span class="op" id="7894935">,</span>&nbsp;<span class="builtintype" id="7894937">false</span><span class="op" id="7894942">}</span><span class="op" id="7894943">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894946">{</span><span class="builtintype" id="7894947">true</span><span class="op" id="7894951">,</span>&nbsp;<span class="builtintype" id="7894953">false</span><span class="op" id="7894958">}</span><span class="op" id="7894959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7894962">{</span><span class="builtintype" id="7894963">true</span><span class="op" id="7894967">,</span>&nbsp;<span class="builtintype" id="7894969">true</span><span class="op" id="7894973">}</span><span class="op" id="7894974">,</span><br>
<span class="lineno"></span><span class="op" id="7894976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7894979">//&nbsp;TestReadResponseCloseInMiddle&nbsp;tests&nbsp;that&nbsp;closing&nbsp;a&nbsp;body&nbsp;after</span><br>
<span class="lineno">460</span><span class="comment" id="7895044">//&nbsp;reading&nbsp;only&nbsp;part&nbsp;of&nbsp;its&nbsp;contents&nbsp;advances&nbsp;the&nbsp;read&nbsp;to&nbsp;the&nbsp;end&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="7895113">//&nbsp;the&nbsp;request,&nbsp;right&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="7895162">func</span>&nbsp;<span class="ident" id="7895167">TestReadResponseCloseInMiddle</span><span class="op" id="7895196">(</span><span class="ident" id="7895197">t</span>&nbsp;<span class="op" id="7895199">*</span><span class="ident" id="7895200">testing</span><span class="op" id="7895207">.</span><span class="ident" id="7895208">T</span><span class="op" id="7895209">)</span>&nbsp;<span class="op" id="7895211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895214">for</span>&nbsp;<span class="ident" id="7895218">_</span><span class="op" id="7895219">,</span>&nbsp;<span class="ident" id="7895221">test</span>&nbsp;<span class="op" id="7895226">:=</span>&nbsp;<span class="keyword" id="7895229">range</span>&nbsp;<span class="ident" id="7895235">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7895266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895270">fatalf</span>&nbsp;<span class="op" id="7895277">:=</span>&nbsp;<span class="keyword" id="7895280">func</span><span class="op" id="7895284">(</span><span class="ident" id="7895285">format</span>&nbsp;<span class="builtintype" id="7895292">string</span><span class="op" id="7895298">,</span>&nbsp;<span class="ident" id="7895300">args</span>&nbsp;<span class="op" id="7895305">...</span><span class="keyword" id="7895308">interface</span><span class="op" id="7895317">{</span><span class="op" id="7895318">}</span><span class="op" id="7895319">)</span>&nbsp;<span class="op" id="7895321">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895326">args</span>&nbsp;<span class="op" id="7895331">=</span>&nbsp;<span class="builtinfunc" id="7895333">append</span><span class="op" id="7895339">(</span><span class="op" id="7895340">[</span><span class="op" id="7895341">]</span><span class="keyword" id="7895342">interface</span><span class="op" id="7895351">{</span><span class="op" id="7895352">}</span><span class="op" id="7895353">{</span><span class="ident" id="7895354">test</span><span class="op" id="7895358">.</span><span class="ident" id="7895359">chunked</span><span class="op" id="7895366">,</span>&nbsp;<span class="ident" id="7895368">test</span><span class="op" id="7895372">.</span><span class="ident" id="7895373">compressed</span><span class="op" id="7895383">}</span><span class="op" id="7895384">,</span>&nbsp;<span class="ident" id="7895386">args</span><span class="op" id="7895390">...</span><span class="op" id="7895393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895398">t</span><span class="op" id="7895399">.</span><span class="ident" id="7895400">Fatalf</span><span class="op" id="7895406">(</span><span class="string" id="7895407">&#34;on&nbsp;test&nbsp;chunked=%v,&nbsp;compressed=%v:&nbsp;&#34;</span><span class="op" id="7895444">+</span><span class="ident" id="7895445">format</span><span class="op" id="7895451">,</span>&nbsp;<span class="ident" id="7895453">args</span><span class="op" id="7895457">...</span><span class="op" id="7895460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895468">checkErr</span>&nbsp;<span class="op" id="7895477">:=</span>&nbsp;<span class="keyword" id="7895480">func</span><span class="op" id="7895484">(</span><span class="ident" id="7895485">err</span>&nbsp;<span class="builtintype" id="7895489">error</span><span class="op" id="7895494">,</span>&nbsp;<span class="ident" id="7895496">msg</span>&nbsp;<span class="builtintype" id="7895500">string</span><span class="op" id="7895506">)</span>&nbsp;<span class="op" id="7895508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895513">if</span>&nbsp;<span class="ident" id="7895516">err</span>&nbsp;<span class="op" id="7895520">==</span>&nbsp;<span class="builtintype" id="7895523">nil</span>&nbsp;<span class="op" id="7895527">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895533">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895548">fatalf</span><span class="op" id="7895554">(</span><span class="ident" id="7895555">msg</span><span class="op" id="7895558">+</span><span class="string" id="7895559">&#34;:&nbsp;%v&#34;</span><span class="op" id="7895565">,</span>&nbsp;<span class="ident" id="7895567">err</span><span class="op" id="7895570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895578">var</span>&nbsp;<span class="ident" id="7895582">buf</span>&nbsp;<span class="ident" id="7895586">bytes</span><span class="op" id="7895591">.</span><span class="ident" id="7895592">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895601">buf</span><span class="op" id="7895604">.</span><span class="ident" id="7895605">WriteString</span><span class="op" id="7895616">(</span><span class="string" id="7895617">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="7895638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895642">if</span>&nbsp;<span class="ident" id="7895645">test</span><span class="op" id="7895649">.</span><span class="ident" id="7895650">chunked</span>&nbsp;<span class="op" id="7895658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895663">buf</span><span class="op" id="7895666">.</span><span class="ident" id="7895667">WriteString</span><span class="op" id="7895678">(</span><span class="string" id="7895679">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="7895711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895715">}</span>&nbsp;<span class="keyword" id="7895717">else</span>&nbsp;<span class="op" id="7895722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895727">buf</span><span class="op" id="7895730">.</span><span class="ident" id="7895731">WriteString</span><span class="op" id="7895742">(</span><span class="string" id="7895743">&#34;Content-Length:&nbsp;1000000\r\n&#34;</span><span class="op" id="7895772">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895780">var</span>&nbsp;<span class="ident" id="7895784">wr</span>&nbsp;<span class="ident" id="7895787">io</span><span class="op" id="7895789">.</span><span class="ident" id="7895790">Writer</span>&nbsp;<span class="op" id="7895797">=</span>&nbsp;<span class="op" id="7895799">&amp;</span><span class="ident" id="7895800">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895806">if</span>&nbsp;<span class="ident" id="7895809">test</span><span class="op" id="7895813">.</span><span class="ident" id="7895814">chunked</span>&nbsp;<span class="op" id="7895822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895827">wr</span>&nbsp;<span class="op" id="7895830">=</span>&nbsp;<span class="ident" id="7895832">internal</span><span class="op" id="7895840">.</span><span class="ident" id="7895841">NewChunkedWriter</span><span class="op" id="7895857">(</span><span class="ident" id="7895858">wr</span><span class="op" id="7895860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895864">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7895868">if</span>&nbsp;<span class="ident" id="7895871">test</span><span class="op" id="7895875">.</span><span class="ident" id="7895876">compressed</span>&nbsp;<span class="op" id="7895887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895892">buf</span><span class="op" id="7895895">.</span><span class="ident" id="7895896">WriteString</span><span class="op" id="7895907">(</span><span class="string" id="7895908">&#34;Content-Encoding:&nbsp;gzip\r\n&#34;</span><span class="op" id="7895936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895941">wr</span>&nbsp;<span class="op" id="7895944">=</span>&nbsp;<span class="ident" id="7895946">gzip</span><span class="op" id="7895950">.</span><span class="ident" id="7895951">NewWriter</span><span class="op" id="7895960">(</span><span class="ident" id="7895961">wr</span><span class="op" id="7895963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7895967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895971">buf</span><span class="op" id="7895974">.</span><span class="ident" id="7895975">WriteString</span><span class="op" id="7895986">(</span><span class="string" id="7895987">&#34;\r\n&#34;</span><span class="op" id="7895993">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7895998">chunk</span>&nbsp;<span class="op" id="7896004">:=</span>&nbsp;<span class="ident" id="7896007">bytes</span><span class="op" id="7896012">.</span><span class="ident" id="7896013">Repeat</span><span class="op" id="7896019">(</span><span class="op" id="7896020">[</span><span class="op" id="7896021">]</span><span class="builtintype" id="7896022">byte</span><span class="op" id="7896026">{</span><span class="string" id="7896027">&#39;x&#39;</span><span class="op" id="7896030">}</span><span class="op" id="7896031">,</span>&nbsp;<span class="num" id="7896033">1000</span><span class="op" id="7896037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896041">for</span>&nbsp;<span class="ident" id="7896045">i</span>&nbsp;<span class="op" id="7896047">:=</span>&nbsp;<span class="num" id="7896050">0</span><span class="op" id="7896051">;</span>&nbsp;<span class="ident" id="7896053">i</span>&nbsp;<span class="op" id="7896055">&lt;</span>&nbsp;<span class="num" id="7896057">1000</span><span class="op" id="7896061">;</span>&nbsp;<span class="ident" id="7896063">i</span><span class="op" id="7896064">++</span>&nbsp;<span class="op" id="7896067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896072">if</span>&nbsp;<span class="ident" id="7896075">test</span><span class="op" id="7896079">.</span><span class="ident" id="7896080">compressed</span>&nbsp;<span class="op" id="7896091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7896097">//&nbsp;Otherwise&nbsp;this&nbsp;compresses&nbsp;too&nbsp;well.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896140">_</span><span class="op" id="7896141">,</span>&nbsp;<span class="ident" id="7896143">err</span>&nbsp;<span class="op" id="7896147">:=</span>&nbsp;<span class="ident" id="7896150">io</span><span class="op" id="7896152">.</span><span class="ident" id="7896153">ReadFull</span><span class="op" id="7896161">(</span><span class="ident" id="7896162">rand</span><span class="op" id="7896166">.</span><span class="ident" id="7896167">Reader</span><span class="op" id="7896173">,</span>&nbsp;<span class="ident" id="7896175">chunk</span><span class="op" id="7896180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896186">checkErr</span><span class="op" id="7896194">(</span><span class="ident" id="7896195">err</span><span class="op" id="7896198">,</span>&nbsp;<span class="string" id="7896200">&#34;rand.Reader&nbsp;ReadFull&#34;</span><span class="op" id="7896222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896232">wr</span><span class="op" id="7896234">.</span><span class="ident" id="7896235">Write</span><span class="op" id="7896240">(</span><span class="ident" id="7896241">chunk</span><span class="op" id="7896246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896250">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896254">if</span>&nbsp;<span class="ident" id="7896257">test</span><span class="op" id="7896261">.</span><span class="ident" id="7896262">compressed</span>&nbsp;<span class="op" id="7896273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896278">err</span>&nbsp;<span class="op" id="7896282">:=</span>&nbsp;<span class="ident" id="7896285">wr</span><span class="op" id="7896287">.</span><span class="op" id="7896288">(</span><span class="op" id="7896289">*</span><span class="ident" id="7896290">gzip</span><span class="op" id="7896294">.</span><span class="ident" id="7896295">Writer</span><span class="op" id="7896301">)</span><span class="op" id="7896302">.</span><span class="ident" id="7896303">Close</span><span class="op" id="7896308">(</span><span class="op" id="7896309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896314">checkErr</span><span class="op" id="7896322">(</span><span class="ident" id="7896323">err</span><span class="op" id="7896326">,</span>&nbsp;<span class="string" id="7896328">&#34;compressor&nbsp;close&#34;</span><span class="op" id="7896346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896354">if</span>&nbsp;<span class="ident" id="7896357">test</span><span class="op" id="7896361">.</span><span class="ident" id="7896362">chunked</span>&nbsp;<span class="op" id="7896370">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896375">buf</span><span class="op" id="7896378">.</span><span class="ident" id="7896379">WriteString</span><span class="op" id="7896390">(</span><span class="string" id="7896391">&#34;0\r\n\r\n&#34;</span><span class="op" id="7896402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896410">buf</span><span class="op" id="7896413">.</span><span class="ident" id="7896414">WriteString</span><span class="op" id="7896425">(</span><span class="string" id="7896426">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7896445">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896450">bufr</span>&nbsp;<span class="op" id="7896455">:=</span>&nbsp;<span class="ident" id="7896458">bufio</span><span class="op" id="7896463">.</span><span class="ident" id="7896464">NewReader</span><span class="op" id="7896473">(</span><span class="op" id="7896474">&amp;</span><span class="ident" id="7896475">buf</span><span class="op" id="7896478">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896482">resp</span><span class="op" id="7896486">,</span>&nbsp;<span class="ident" id="7896488">err</span>&nbsp;<span class="op" id="7896492">:=</span>&nbsp;<span class="ident" id="7896495">ReadResponse</span><span class="op" id="7896507">(</span><span class="ident" id="7896508">bufr</span><span class="op" id="7896512">,</span>&nbsp;<span class="ident" id="7896514">dummyReq</span><span class="op" id="7896522">(</span><span class="string" id="7896523">&#34;GET&#34;</span><span class="op" id="7896528">)</span><span class="op" id="7896529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896533">checkErr</span><span class="op" id="7896541">(</span><span class="ident" id="7896542">err</span><span class="op" id="7896545">,</span>&nbsp;<span class="string" id="7896547">&#34;ReadResponse&#34;</span><span class="op" id="7896561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896565">expectedLength</span>&nbsp;<span class="op" id="7896580">:=</span>&nbsp;<span class="ident" id="7896583">int64</span><span class="op" id="7896588">(</span><span class="op" id="7896589">-</span><span class="num" id="7896590">1</span><span class="op" id="7896591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896595">if</span>&nbsp;<span class="op" id="7896598">!</span><span class="ident" id="7896599">test</span><span class="op" id="7896603">.</span><span class="ident" id="7896604">chunked</span>&nbsp;<span class="op" id="7896612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896617">expectedLength</span>&nbsp;<span class="op" id="7896632">=</span>&nbsp;<span class="num" id="7896634">1000000</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896648">if</span>&nbsp;<span class="ident" id="7896651">resp</span><span class="op" id="7896655">.</span><span class="ident" id="7896656">ContentLength</span>&nbsp;<span class="op" id="7896670">!=</span>&nbsp;<span class="ident" id="7896673">expectedLength</span>&nbsp;<span class="op" id="7896688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896693">fatalf</span><span class="op" id="7896699">(</span><span class="string" id="7896700">&#34;expected&nbsp;response&nbsp;length&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7896737">,</span>&nbsp;<span class="ident" id="7896739">expectedLength</span><span class="op" id="7896753">,</span>&nbsp;<span class="ident" id="7896755">resp</span><span class="op" id="7896759">.</span><span class="ident" id="7896760">ContentLength</span><span class="op" id="7896773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896781">if</span>&nbsp;<span class="ident" id="7896784">resp</span><span class="op" id="7896788">.</span><span class="ident" id="7896789">Body</span>&nbsp;<span class="op" id="7896794">==</span>&nbsp;<span class="builtintype" id="7896797">nil</span>&nbsp;<span class="op" id="7896801">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896806">fatalf</span><span class="op" id="7896812">(</span><span class="string" id="7896813">&#34;nil&nbsp;body&#34;</span><span class="op" id="7896823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7896831">if</span>&nbsp;<span class="ident" id="7896834">test</span><span class="op" id="7896838">.</span><span class="ident" id="7896839">compressed</span>&nbsp;<span class="op" id="7896850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896855">gzReader</span><span class="op" id="7896863">,</span>&nbsp;<span class="ident" id="7896865">err</span>&nbsp;<span class="op" id="7896869">:=</span>&nbsp;<span class="ident" id="7896872">gzip</span><span class="op" id="7896876">.</span><span class="ident" id="7896877">NewReader</span><span class="op" id="7896886">(</span><span class="ident" id="7896887">resp</span><span class="op" id="7896891">.</span><span class="ident" id="7896892">Body</span><span class="op" id="7896896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896901">checkErr</span><span class="op" id="7896909">(</span><span class="ident" id="7896910">err</span><span class="op" id="7896913">,</span>&nbsp;<span class="string" id="7896915">&#34;gzip.NewReader&#34;</span><span class="op" id="7896931">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896936">resp</span><span class="op" id="7896940">.</span><span class="ident" id="7896941">Body</span>&nbsp;<span class="op" id="7896946">=</span>&nbsp;<span class="op" id="7896948">&amp;</span><span class="ident" id="7896949">readerAndCloser</span><span class="op" id="7896964">{</span><span class="ident" id="7896965">gzReader</span><span class="op" id="7896973">,</span>&nbsp;<span class="ident" id="7896975">resp</span><span class="op" id="7896979">.</span><span class="ident" id="7896980">Body</span><span class="op" id="7896984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7896988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7896993">rbuf</span>&nbsp;<span class="op" id="7896998">:=</span>&nbsp;<span class="builtinfunc" id="7897001">make</span><span class="op" id="7897005">(</span><span class="op" id="7897006">[</span><span class="op" id="7897007">]</span><span class="builtintype" id="7897008">byte</span><span class="op" id="7897012">,</span>&nbsp;<span class="num" id="7897014">2500</span><span class="op" id="7897018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897022">n</span><span class="op" id="7897023">,</span>&nbsp;<span class="ident" id="7897025">err</span>&nbsp;<span class="op" id="7897029">:=</span>&nbsp;<span class="ident" id="7897032">io</span><span class="op" id="7897034">.</span><span class="ident" id="7897035">ReadFull</span><span class="op" id="7897043">(</span><span class="ident" id="7897044">resp</span><span class="op" id="7897048">.</span><span class="ident" id="7897049">Body</span><span class="op" id="7897053">,</span>&nbsp;<span class="ident" id="7897055">rbuf</span><span class="op" id="7897059">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897063">checkErr</span><span class="op" id="7897071">(</span><span class="ident" id="7897072">err</span><span class="op" id="7897075">,</span>&nbsp;<span class="string" id="7897077">&#34;2500&nbsp;byte&nbsp;ReadFull&#34;</span><span class="op" id="7897097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7897101">if</span>&nbsp;<span class="ident" id="7897104">n</span>&nbsp;<span class="op" id="7897106">!=</span>&nbsp;<span class="num" id="7897109">2500</span>&nbsp;<span class="op" id="7897114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897119">fatalf</span><span class="op" id="7897125">(</span><span class="string" id="7897126">&#34;ReadFull&nbsp;only&nbsp;read&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="7897155">,</span>&nbsp;<span class="ident" id="7897157">n</span><span class="op" id="7897158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7897162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7897166">if</span>&nbsp;<span class="ident" id="7897169">test</span><span class="op" id="7897173">.</span><span class="ident" id="7897174">compressed</span>&nbsp;<span class="op" id="7897185">==</span>&nbsp;<span class="builtintype" id="7897188">false</span>&nbsp;<span class="op" id="7897194">&amp;&amp;</span>&nbsp;<span class="op" id="7897197">!</span><span class="ident" id="7897198">bytes</span><span class="op" id="7897203">.</span><span class="ident" id="7897204">Equal</span><span class="op" id="7897209">(</span><span class="ident" id="7897210">bytes</span><span class="op" id="7897215">.</span><span class="ident" id="7897216">Repeat</span><span class="op" id="7897222">(</span><span class="op" id="7897223">[</span><span class="op" id="7897224">]</span><span class="builtintype" id="7897225">byte</span><span class="op" id="7897229">{</span><span class="string" id="7897230">&#39;x&#39;</span><span class="op" id="7897233">}</span><span class="op" id="7897234">,</span>&nbsp;<span class="num" id="7897236">2500</span><span class="op" id="7897240">)</span><span class="op" id="7897241">,</span>&nbsp;<span class="ident" id="7897243">rbuf</span><span class="op" id="7897247">)</span>&nbsp;<span class="op" id="7897249">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897254">fatalf</span><span class="op" id="7897260">(</span><span class="string" id="7897261">&#34;ReadFull&nbsp;didn&#39;t&nbsp;read&nbsp;2500&nbsp;&#39;x&#39;;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7897300">,</span>&nbsp;<span class="builtintype" id="7897302">string</span><span class="op" id="7897308">(</span><span class="ident" id="7897309">rbuf</span><span class="op" id="7897313">)</span><span class="op" id="7897314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7897318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897322">resp</span><span class="op" id="7897326">.</span><span class="ident" id="7897327">Body</span><span class="op" id="7897331">.</span><span class="ident" id="7897332">Close</span><span class="op" id="7897337">(</span><span class="op" id="7897338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897343">rest</span><span class="op" id="7897347">,</span>&nbsp;<span class="ident" id="7897349">err</span>&nbsp;<span class="op" id="7897353">:=</span>&nbsp;<span class="ident" id="7897356">ioutil</span><span class="op" id="7897362">.</span><span class="ident" id="7897363">ReadAll</span><span class="op" id="7897370">(</span><span class="ident" id="7897371">bufr</span><span class="op" id="7897375">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897379">checkErr</span><span class="op" id="7897387">(</span><span class="ident" id="7897388">err</span><span class="op" id="7897391">,</span>&nbsp;<span class="string" id="7897393">&#34;ReadAll&nbsp;on&nbsp;remainder&#34;</span><span class="op" id="7897415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7897419">if</span>&nbsp;<span class="ident" id="7897422">e</span><span class="op" id="7897423">,</span>&nbsp;<span class="ident" id="7897425">g</span>&nbsp;<span class="op" id="7897427">:=</span>&nbsp;<span class="string" id="7897430">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7897449">,</span>&nbsp;<span class="builtintype" id="7897451">string</span><span class="op" id="7897457">(</span><span class="ident" id="7897458">rest</span><span class="op" id="7897462">)</span><span class="op" id="7897463">;</span>&nbsp;<span class="ident" id="7897465">e</span>&nbsp;<span class="op" id="7897467">!=</span>&nbsp;<span class="ident" id="7897470">g</span>&nbsp;<span class="op" id="7897472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897477">g</span>&nbsp;<span class="op" id="7897479">=</span>&nbsp;<span class="ident" id="7897481">regexp</span><span class="op" id="7897487">.</span><span class="ident" id="7897488">MustCompile</span><span class="op" id="7897499">(</span><span class="string" id="7897500">`(xx+)`</span><span class="op" id="7897507">)</span><span class="op" id="7897508">.</span><span class="ident" id="7897509">ReplaceAllStringFunc</span><span class="op" id="7897529">(</span><span class="ident" id="7897530">g</span><span class="op" id="7897531">,</span>&nbsp;<span class="keyword" id="7897533">func</span><span class="op" id="7897537">(</span><span class="ident" id="7897538">match</span>&nbsp;<span class="builtintype" id="7897544">string</span><span class="op" id="7897550">)</span>&nbsp;<span class="builtintype" id="7897552">string</span>&nbsp;<span class="op" id="7897559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7897565">return</span>&nbsp;<span class="ident" id="7897572">fmt</span><span class="op" id="7897575">.</span><span class="ident" id="7897576">Sprintf</span><span class="op" id="7897583">(</span><span class="string" id="7897584">&#34;x(repeated&nbsp;x%d)&#34;</span><span class="op" id="7897601">,</span>&nbsp;<span class="builtinfunc" id="7897603">len</span><span class="op" id="7897606">(</span><span class="ident" id="7897607">match</span><span class="op" id="7897612">)</span><span class="op" id="7897613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7897618">}</span><span class="op" id="7897619">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897624">fatalf</span><span class="op" id="7897630">(</span><span class="string" id="7897631">&#34;remainder&nbsp;=&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7897660">,</span>&nbsp;<span class="ident" id="7897662">g</span><span class="op" id="7897663">,</span>&nbsp;<span class="ident" id="7897665">e</span><span class="op" id="7897666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7897670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7897673">}</span><br>
<span class="lineno"></span><span class="op" id="7897675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="keyword" id="7897678">func</span>&nbsp;<span class="ident" id="7897683">diff</span><span class="op" id="7897687">(</span><span class="ident" id="7897688">t</span>&nbsp;<span class="op" id="7897690">*</span><span class="ident" id="7897691">testing</span><span class="op" id="7897698">.</span><span class="ident" id="7897699">T</span><span class="op" id="7897700">,</span>&nbsp;<span class="ident" id="7897702">prefix</span>&nbsp;<span class="builtintype" id="7897709">string</span><span class="op" id="7897715">,</span>&nbsp;<span class="ident" id="7897717">have</span><span class="op" id="7897721">,</span>&nbsp;<span class="ident" id="7897723">want</span>&nbsp;<span class="keyword" id="7897728">interface</span><span class="op" id="7897737">{</span><span class="op" id="7897738">}</span><span class="op" id="7897739">)</span>&nbsp;<span class="op" id="7897741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897744">hv</span>&nbsp;<span class="op" id="7897747">:=</span>&nbsp;<span class="ident" id="7897750">reflect</span><span class="op" id="7897757">.</span><span class="ident" id="7897758">ValueOf</span><span class="op" id="7897765">(</span><span class="ident" id="7897766">have</span><span class="op" id="7897770">)</span><span class="op" id="7897771">.</span><span class="ident" id="7897772">Elem</span><span class="op" id="7897776">(</span><span class="op" id="7897777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897780">wv</span>&nbsp;<span class="op" id="7897783">:=</span>&nbsp;<span class="ident" id="7897786">reflect</span><span class="op" id="7897793">.</span><span class="ident" id="7897794">ValueOf</span><span class="op" id="7897801">(</span><span class="ident" id="7897802">want</span><span class="op" id="7897806">)</span><span class="op" id="7897807">.</span><span class="ident" id="7897808">Elem</span><span class="op" id="7897812">(</span><span class="op" id="7897813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7897816">if</span>&nbsp;<span class="ident" id="7897819">hv</span><span class="op" id="7897821">.</span><span class="ident" id="7897822">Type</span><span class="op" id="7897826">(</span><span class="op" id="7897827">)</span>&nbsp;<span class="op" id="7897829">!=</span>&nbsp;<span class="ident" id="7897832">wv</span><span class="op" id="7897834">.</span><span class="ident" id="7897835">Type</span><span class="op" id="7897839">(</span><span class="op" id="7897840">)</span>&nbsp;<span class="op" id="7897842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897846">t</span><span class="op" id="7897847">.</span><span class="ident" id="7897848">Errorf</span><span class="op" id="7897854">(</span><span class="string" id="7897855">&#34;%s:&nbsp;type&nbsp;mismatch&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7897885">,</span>&nbsp;<span class="ident" id="7897887">prefix</span><span class="op" id="7897893">,</span>&nbsp;<span class="ident" id="7897895">hv</span><span class="op" id="7897897">.</span><span class="ident" id="7897898">Type</span><span class="op" id="7897902">(</span><span class="op" id="7897903">)</span><span class="op" id="7897904">,</span>&nbsp;<span class="ident" id="7897906">wv</span><span class="op" id="7897908">.</span><span class="ident" id="7897909">Type</span><span class="op" id="7897913">(</span><span class="op" id="7897914">)</span><span class="op" id="7897915">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7897918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7897921">for</span>&nbsp;<span class="ident" id="7897925">i</span>&nbsp;<span class="op" id="7897927">:=</span>&nbsp;<span class="num" id="7897930">0</span><span class="op" id="7897931">;</span>&nbsp;<span class="ident" id="7897933">i</span>&nbsp;<span class="op" id="7897935">&lt;</span>&nbsp;<span class="ident" id="7897937">hv</span><span class="op" id="7897939">.</span><span class="ident" id="7897940">NumField</span><span class="op" id="7897948">(</span><span class="op" id="7897949">)</span><span class="op" id="7897950">;</span>&nbsp;<span class="ident" id="7897952">i</span><span class="op" id="7897953">++</span>&nbsp;<span class="op" id="7897956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897960">hf</span>&nbsp;<span class="op" id="7897963">:=</span>&nbsp;<span class="ident" id="7897966">hv</span><span class="op" id="7897968">.</span><span class="ident" id="7897969">Field</span><span class="op" id="7897974">(</span><span class="ident" id="7897975">i</span><span class="op" id="7897976">)</span><span class="op" id="7897977">.</span><span class="ident" id="7897978">Interface</span><span class="op" id="7897987">(</span><span class="op" id="7897988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7897992">wf</span>&nbsp;<span class="op" id="7897995">:=</span>&nbsp;<span class="ident" id="7897998">wv</span><span class="op" id="7898000">.</span><span class="ident" id="7898001">Field</span><span class="op" id="7898006">(</span><span class="ident" id="7898007">i</span><span class="op" id="7898008">)</span><span class="op" id="7898009">.</span><span class="ident" id="7898010">Interface</span><span class="op" id="7898019">(</span><span class="op" id="7898020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898024">if</span>&nbsp;<span class="op" id="7898027">!</span><span class="ident" id="7898028">reflect</span><span class="op" id="7898035">.</span><span class="ident" id="7898036">DeepEqual</span><span class="op" id="7898045">(</span><span class="ident" id="7898046">hf</span><span class="op" id="7898048">,</span>&nbsp;<span class="ident" id="7898050">wf</span><span class="op" id="7898052">)</span>&nbsp;<span class="op" id="7898054">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898059">t</span><span class="op" id="7898060">.</span><span class="ident" id="7898061">Errorf</span><span class="op" id="7898067">(</span><span class="string" id="7898068">&#34;%s:&nbsp;%s&nbsp;=&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7898089">,</span>&nbsp;<span class="ident" id="7898091">prefix</span><span class="op" id="7898097">,</span>&nbsp;<span class="ident" id="7898099">hv</span><span class="op" id="7898101">.</span><span class="ident" id="7898102">Type</span><span class="op" id="7898106">(</span><span class="op" id="7898107">)</span><span class="op" id="7898108">.</span><span class="ident" id="7898109">Field</span><span class="op" id="7898114">(</span><span class="ident" id="7898115">i</span><span class="op" id="7898116">)</span><span class="op" id="7898117">.</span><span class="ident" id="7898118">Name</span><span class="op" id="7898122">,</span>&nbsp;<span class="ident" id="7898124">hf</span><span class="op" id="7898126">,</span>&nbsp;<span class="ident" id="7898128">wf</span><span class="op" id="7898130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898137">}</span><br>
<span class="lineno"></span><span class="op" id="7898139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7898142">type</span>&nbsp;<span class="ident" id="7898147">responseLocationTest</span>&nbsp;<span class="keyword" id="7898168">struct</span>&nbsp;<span class="op" id="7898175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898178">location</span>&nbsp;<span class="builtintype" id="7898187">string</span>&nbsp;<span class="comment" id="7898194">//&nbsp;Response&#39;s&nbsp;Location&nbsp;header&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898231">requrl</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7898240">string</span>&nbsp;<span class="comment" id="7898247">//&nbsp;Response.Request.URL&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898278">want</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7898287">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898295">wantErr</span>&nbsp;&nbsp;<span class="builtintype" id="7898304">error</span><br>
<span class="lineno">570</span><span class="op" id="7898310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7898313">var</span>&nbsp;<span class="ident" id="7898317">responseLocationTests</span>&nbsp;<span class="op" id="7898339">=</span>&nbsp;<span class="op" id="7898341">[</span><span class="op" id="7898342">]</span><span class="ident" id="7898343">responseLocationTest</span><span class="op" id="7898363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898366">{</span><span class="string" id="7898367">&#34;/foo&#34;</span><span class="op" id="7898373">,</span>&nbsp;<span class="string" id="7898375">&#34;http://bar.com/baz&#34;</span><span class="op" id="7898395">,</span>&nbsp;<span class="string" id="7898397">&#34;http://bar.com/foo&#34;</span><span class="op" id="7898417">,</span>&nbsp;<span class="builtintype" id="7898419">nil</span><span class="op" id="7898422">}</span><span class="op" id="7898423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898426">{</span><span class="string" id="7898427">&#34;http://foo.com/&#34;</span><span class="op" id="7898444">,</span>&nbsp;<span class="string" id="7898446">&#34;http://bar.com/baz&#34;</span><span class="op" id="7898466">,</span>&nbsp;<span class="string" id="7898468">&#34;http://foo.com/&#34;</span><span class="op" id="7898485">,</span>&nbsp;<span class="builtintype" id="7898487">nil</span><span class="op" id="7898490">}</span><span class="op" id="7898491">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898494">{</span><span class="string" id="7898495">&#34;&#34;</span><span class="op" id="7898497">,</span>&nbsp;<span class="string" id="7898499">&#34;http://bar.com/baz&#34;</span><span class="op" id="7898519">,</span>&nbsp;<span class="string" id="7898521">&#34;&#34;</span><span class="op" id="7898523">,</span>&nbsp;<span class="ident" id="7898525">ErrNoLocation</span><span class="op" id="7898538">}</span><span class="op" id="7898539">,</span><br>
<span class="lineno"></span><span class="op" id="7898541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7898544">func</span>&nbsp;<span class="ident" id="7898549">TestLocationResponse</span><span class="op" id="7898569">(</span><span class="ident" id="7898570">t</span>&nbsp;<span class="op" id="7898572">*</span><span class="ident" id="7898573">testing</span><span class="op" id="7898580">.</span><span class="ident" id="7898581">T</span><span class="op" id="7898582">)</span>&nbsp;<span class="op" id="7898584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898587">for</span>&nbsp;<span class="ident" id="7898591">i</span><span class="op" id="7898592">,</span>&nbsp;<span class="ident" id="7898594">tt</span>&nbsp;<span class="op" id="7898597">:=</span>&nbsp;<span class="keyword" id="7898600">range</span>&nbsp;<span class="ident" id="7898606">responseLocationTests</span>&nbsp;<span class="op" id="7898628">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898632">res</span>&nbsp;<span class="op" id="7898636">:=</span>&nbsp;<span class="builtinfunc" id="7898639">new</span><span class="op" id="7898642">(</span><span class="ident" id="7898643">Response</span><span class="op" id="7898651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898655">res</span><span class="op" id="7898658">.</span><span class="ident" id="7898659">Header</span>&nbsp;<span class="op" id="7898666">=</span>&nbsp;<span class="builtinfunc" id="7898668">make</span><span class="op" id="7898672">(</span><span class="ident" id="7898673">Header</span><span class="op" id="7898679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898683">res</span><span class="op" id="7898686">.</span><span class="ident" id="7898687">Header</span><span class="op" id="7898693">.</span><span class="ident" id="7898694">Set</span><span class="op" id="7898697">(</span><span class="string" id="7898698">&#34;Location&#34;</span><span class="op" id="7898708">,</span>&nbsp;<span class="ident" id="7898710">tt</span><span class="op" id="7898712">.</span><span class="ident" id="7898713">location</span><span class="op" id="7898721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898725">if</span>&nbsp;<span class="ident" id="7898728">tt</span><span class="op" id="7898730">.</span><span class="ident" id="7898731">requrl</span>&nbsp;<span class="op" id="7898738">!=</span>&nbsp;<span class="string" id="7898741">&#34;&#34;</span>&nbsp;<span class="op" id="7898744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898749">res</span><span class="op" id="7898752">.</span><span class="ident" id="7898753">Request</span>&nbsp;<span class="op" id="7898761">=</span>&nbsp;<span class="op" id="7898763">&amp;</span><span class="ident" id="7898764">Request</span><span class="op" id="7898771">{</span><span class="op" id="7898772">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898777">var</span>&nbsp;<span class="ident" id="7898781">err</span>&nbsp;<span class="builtintype" id="7898785">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898794">res</span><span class="op" id="7898797">.</span><span class="ident" id="7898798">Request</span><span class="op" id="7898805">.</span><span class="ident" id="7898806">URL</span><span class="op" id="7898809">,</span>&nbsp;<span class="ident" id="7898811">err</span>&nbsp;<span class="op" id="7898815">=</span>&nbsp;<span class="ident" id="7898817">url</span><span class="op" id="7898820">.</span><span class="ident" id="7898821">Parse</span><span class="op" id="7898826">(</span><span class="ident" id="7898827">tt</span><span class="op" id="7898829">.</span><span class="ident" id="7898830">requrl</span><span class="op" id="7898836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898841">if</span>&nbsp;<span class="ident" id="7898844">err</span>&nbsp;<span class="op" id="7898848">!=</span>&nbsp;<span class="builtintype" id="7898851">nil</span>&nbsp;<span class="op" id="7898855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898861">t</span><span class="op" id="7898862">.</span><span class="ident" id="7898863">Fatalf</span><span class="op" id="7898869">(</span><span class="string" id="7898870">&#34;bad&nbsp;test&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7898891">,</span>&nbsp;<span class="ident" id="7898893">tt</span><span class="op" id="7898895">.</span><span class="ident" id="7898896">requrl</span><span class="op" id="7898902">,</span>&nbsp;<span class="ident" id="7898904">err</span><span class="op" id="7898907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898912">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7898916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898921">got</span><span class="op" id="7898924">,</span>&nbsp;<span class="ident" id="7898926">err</span>&nbsp;<span class="op" id="7898930">:=</span>&nbsp;<span class="ident" id="7898933">res</span><span class="op" id="7898936">.</span><span class="ident" id="7898937">Location</span><span class="op" id="7898945">(</span><span class="op" id="7898946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898950">if</span>&nbsp;<span class="ident" id="7898953">tt</span><span class="op" id="7898955">.</span><span class="ident" id="7898956">wantErr</span>&nbsp;<span class="op" id="7898964">!=</span>&nbsp;<span class="builtintype" id="7898967">nil</span>&nbsp;<span class="op" id="7898971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7898976">if</span>&nbsp;<span class="ident" id="7898979">err</span>&nbsp;<span class="op" id="7898983">==</span>&nbsp;<span class="builtintype" id="7898986">nil</span>&nbsp;<span class="op" id="7898990">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7898996">t</span><span class="op" id="7898997">.</span><span class="ident" id="7898998">Errorf</span><span class="op" id="7899004">(</span><span class="string" id="7899005">&#34;%d.&nbsp;err=nil;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7899027">,</span>&nbsp;<span class="ident" id="7899029">i</span><span class="op" id="7899030">,</span>&nbsp;<span class="ident" id="7899032">tt</span><span class="op" id="7899034">.</span><span class="ident" id="7899035">wantErr</span><span class="op" id="7899042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899048">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899065">if</span>&nbsp;<span class="ident" id="7899068">g</span><span class="op" id="7899069">,</span>&nbsp;<span class="ident" id="7899071">e</span>&nbsp;<span class="op" id="7899073">:=</span>&nbsp;<span class="ident" id="7899076">err</span><span class="op" id="7899079">.</span><span class="ident" id="7899080">Error</span><span class="op" id="7899085">(</span><span class="op" id="7899086">)</span><span class="op" id="7899087">,</span>&nbsp;<span class="ident" id="7899089">tt</span><span class="op" id="7899091">.</span><span class="ident" id="7899092">wantErr</span><span class="op" id="7899099">.</span><span class="ident" id="7899100">Error</span><span class="op" id="7899105">(</span><span class="op" id="7899106">)</span><span class="op" id="7899107">;</span>&nbsp;<span class="ident" id="7899109">g</span>&nbsp;<span class="op" id="7899111">!=</span>&nbsp;<span class="ident" id="7899114">e</span>&nbsp;<span class="op" id="7899116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899122">t</span><span class="op" id="7899123">.</span><span class="ident" id="7899124">Errorf</span><span class="op" id="7899130">(</span><span class="string" id="7899131">&#34;%d.&nbsp;err=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7899152">,</span>&nbsp;<span class="ident" id="7899154">i</span><span class="op" id="7899155">,</span>&nbsp;<span class="ident" id="7899157">g</span><span class="op" id="7899158">,</span>&nbsp;<span class="ident" id="7899160">e</span><span class="op" id="7899161">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899167">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899184">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899199">if</span>&nbsp;<span class="ident" id="7899202">err</span>&nbsp;<span class="op" id="7899206">!=</span>&nbsp;<span class="builtintype" id="7899209">nil</span>&nbsp;<span class="op" id="7899213">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899218">t</span><span class="op" id="7899219">.</span><span class="ident" id="7899220">Errorf</span><span class="op" id="7899226">(</span><span class="string" id="7899227">&#34;%d.&nbsp;err=%q&#34;</span><span class="op" id="7899239">,</span>&nbsp;<span class="ident" id="7899241">i</span><span class="op" id="7899242">,</span>&nbsp;<span class="ident" id="7899244">err</span><span class="op" id="7899247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899252">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899267">if</span>&nbsp;<span class="ident" id="7899270">g</span><span class="op" id="7899271">,</span>&nbsp;<span class="ident" id="7899273">e</span>&nbsp;<span class="op" id="7899275">:=</span>&nbsp;<span class="ident" id="7899278">got</span><span class="op" id="7899281">.</span><span class="ident" id="7899282">String</span><span class="op" id="7899288">(</span><span class="op" id="7899289">)</span><span class="op" id="7899290">,</span>&nbsp;<span class="ident" id="7899292">tt</span><span class="op" id="7899294">.</span><span class="ident" id="7899295">want</span><span class="op" id="7899299">;</span>&nbsp;<span class="ident" id="7899301">g</span>&nbsp;<span class="op" id="7899303">!=</span>&nbsp;<span class="ident" id="7899306">e</span>&nbsp;<span class="op" id="7899308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899313">t</span><span class="op" id="7899314">.</span><span class="ident" id="7899315">Errorf</span><span class="op" id="7899321">(</span><span class="string" id="7899322">&#34;%d.&nbsp;Location=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7899348">,</span>&nbsp;<span class="ident" id="7899350">i</span><span class="op" id="7899351">,</span>&nbsp;<span class="ident" id="7899353">g</span><span class="op" id="7899354">,</span>&nbsp;<span class="ident" id="7899356">e</span><span class="op" id="7899357">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899364">}</span><br>
<span class="lineno"></span><span class="op" id="7899366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7899369">func</span>&nbsp;<span class="ident" id="7899374">TestResponseStatusStutter</span><span class="op" id="7899399">(</span><span class="ident" id="7899400">t</span>&nbsp;<span class="op" id="7899402">*</span><span class="ident" id="7899403">testing</span><span class="op" id="7899410">.</span><span class="ident" id="7899411">T</span><span class="op" id="7899412">)</span>&nbsp;<span class="op" id="7899414">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899417">r</span>&nbsp;<span class="op" id="7899419">:=</span>&nbsp;<span class="op" id="7899422">&amp;</span><span class="ident" id="7899423">Response</span><span class="op" id="7899431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899435">Status</span><span class="op" id="7899441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7899447">&#34;123&nbsp;some&nbsp;status&#34;</span><span class="op" id="7899464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899468">StatusCode</span><span class="op" id="7899478">:</span>&nbsp;<span class="num" id="7899480">123</span><span class="op" id="7899483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899487">ProtoMajor</span><span class="op" id="7899497">:</span>&nbsp;<span class="num" id="7899499">1</span><span class="op" id="7899500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899504">ProtoMinor</span><span class="op" id="7899514">:</span>&nbsp;<span class="num" id="7899516">3</span><span class="op" id="7899517">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899523">var</span>&nbsp;<span class="ident" id="7899527">buf</span>&nbsp;<span class="ident" id="7899531">bytes</span><span class="op" id="7899536">.</span><span class="ident" id="7899537">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899545">r</span><span class="op" id="7899546">.</span><span class="ident" id="7899547">Write</span><span class="op" id="7899552">(</span><span class="op" id="7899553">&amp;</span><span class="ident" id="7899554">buf</span><span class="op" id="7899557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899560">if</span>&nbsp;<span class="ident" id="7899563">strings</span><span class="op" id="7899570">.</span><span class="ident" id="7899571">Contains</span><span class="op" id="7899579">(</span><span class="ident" id="7899580">buf</span><span class="op" id="7899583">.</span><span class="ident" id="7899584">String</span><span class="op" id="7899590">(</span><span class="op" id="7899591">)</span><span class="op" id="7899592">,</span>&nbsp;<span class="string" id="7899594">&#34;123&nbsp;123&#34;</span><span class="op" id="7899603">)</span>&nbsp;<span class="op" id="7899605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899609">t</span><span class="op" id="7899610">.</span><span class="ident" id="7899611">Errorf</span><span class="op" id="7899617">(</span><span class="string" id="7899618">&#34;stutter&nbsp;in&nbsp;status:&nbsp;%s&#34;</span><span class="op" id="7899641">,</span>&nbsp;<span class="ident" id="7899643">buf</span><span class="op" id="7899646">.</span><span class="ident" id="7899647">String</span><span class="op" id="7899653">(</span><span class="op" id="7899654">)</span><span class="op" id="7899655">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899658">}</span><br>
<span class="lineno"></span><span class="op" id="7899660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7899663">func</span>&nbsp;<span class="ident" id="7899668">TestResponseContentLengthShortBody</span><span class="op" id="7899702">(</span><span class="ident" id="7899703">t</span>&nbsp;<span class="op" id="7899705">*</span><span class="ident" id="7899706">testing</span><span class="op" id="7899713">.</span><span class="ident" id="7899714">T</span><span class="op" id="7899715">)</span>&nbsp;<span class="op" id="7899717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899720">const</span>&nbsp;<span class="ident" id="7899726">shortBody</span>&nbsp;<span class="op" id="7899736">=</span>&nbsp;<span class="string" id="7899738">&#34;Short&nbsp;body,&nbsp;not&nbsp;123&nbsp;bytes.&#34;</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899768">br</span>&nbsp;<span class="op" id="7899771">:=</span>&nbsp;<span class="ident" id="7899774">bufio</span><span class="op" id="7899779">.</span><span class="ident" id="7899780">NewReader</span><span class="op" id="7899789">(</span><span class="ident" id="7899790">strings</span><span class="op" id="7899797">.</span><span class="ident" id="7899798">NewReader</span><span class="op" id="7899807">(</span><span class="string" id="7899808">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7899830">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7899834">&#34;Content-Length:&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7899860">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7899864">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7899871">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899875">shortBody</span><span class="op" id="7899884">)</span><span class="op" id="7899885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899888">res</span><span class="op" id="7899891">,</span>&nbsp;<span class="ident" id="7899893">err</span>&nbsp;<span class="op" id="7899897">:=</span>&nbsp;<span class="ident" id="7899900">ReadResponse</span><span class="op" id="7899912">(</span><span class="ident" id="7899913">br</span><span class="op" id="7899915">,</span>&nbsp;<span class="op" id="7899917">&amp;</span><span class="ident" id="7899918">Request</span><span class="op" id="7899925">{</span><span class="ident" id="7899926">Method</span><span class="op" id="7899932">:</span>&nbsp;<span class="string" id="7899934">&#34;GET&#34;</span><span class="op" id="7899939">}</span><span class="op" id="7899940">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899943">if</span>&nbsp;<span class="ident" id="7899946">err</span>&nbsp;<span class="op" id="7899950">!=</span>&nbsp;<span class="builtintype" id="7899953">nil</span>&nbsp;<span class="op" id="7899957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7899961">t</span><span class="op" id="7899962">.</span><span class="ident" id="7899963">Fatal</span><span class="op" id="7899968">(</span><span class="ident" id="7899969">err</span><span class="op" id="7899972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7899975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7899978">if</span>&nbsp;<span class="ident" id="7899981">res</span><span class="op" id="7899984">.</span><span class="ident" id="7899985">ContentLength</span>&nbsp;<span class="op" id="7899999">!=</span>&nbsp;<span class="num" id="7900002">123</span>&nbsp;<span class="op" id="7900006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900010">t</span><span class="op" id="7900011">.</span><span class="ident" id="7900012">Fatalf</span><span class="op" id="7900018">(</span><span class="string" id="7900019">&#34;Content-Length&nbsp;=&nbsp;%d;&nbsp;want&nbsp;123&#34;</span><span class="op" id="7900050">,</span>&nbsp;<span class="ident" id="7900052">res</span><span class="op" id="7900055">.</span><span class="ident" id="7900056">ContentLength</span><span class="op" id="7900069">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7900072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7900075">var</span>&nbsp;<span class="ident" id="7900079">buf</span>&nbsp;<span class="ident" id="7900083">bytes</span><span class="op" id="7900088">.</span><span class="ident" id="7900089">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900097">n</span><span class="op" id="7900098">,</span>&nbsp;<span class="ident" id="7900100">err</span>&nbsp;<span class="op" id="7900104">:=</span>&nbsp;<span class="ident" id="7900107">io</span><span class="op" id="7900109">.</span><span class="ident" id="7900110">Copy</span><span class="op" id="7900114">(</span><span class="op" id="7900115">&amp;</span><span class="ident" id="7900116">buf</span><span class="op" id="7900119">,</span>&nbsp;<span class="ident" id="7900121">res</span><span class="op" id="7900124">.</span><span class="ident" id="7900125">Body</span><span class="op" id="7900129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7900132">if</span>&nbsp;<span class="ident" id="7900135">n</span>&nbsp;<span class="op" id="7900137">!=</span>&nbsp;<span class="ident" id="7900140">int64</span><span class="op" id="7900145">(</span><span class="builtinfunc" id="7900146">len</span><span class="op" id="7900149">(</span><span class="ident" id="7900150">shortBody</span><span class="op" id="7900159">)</span><span class="op" id="7900160">)</span>&nbsp;<span class="op" id="7900162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900166">t</span><span class="op" id="7900167">.</span><span class="ident" id="7900168">Errorf</span><span class="op" id="7900174">(</span><span class="string" id="7900175">&#34;Copied&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d,&nbsp;len(%q)&#34;</span><span class="op" id="7900210">,</span>&nbsp;<span class="ident" id="7900212">n</span><span class="op" id="7900213">,</span>&nbsp;<span class="builtinfunc" id="7900215">len</span><span class="op" id="7900218">(</span><span class="ident" id="7900219">shortBody</span><span class="op" id="7900228">)</span><span class="op" id="7900229">,</span>&nbsp;<span class="ident" id="7900231">shortBody</span><span class="op" id="7900240">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7900243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7900246">if</span>&nbsp;<span class="ident" id="7900249">buf</span><span class="op" id="7900252">.</span><span class="ident" id="7900253">String</span><span class="op" id="7900259">(</span><span class="op" id="7900260">)</span>&nbsp;<span class="op" id="7900262">!=</span>&nbsp;<span class="ident" id="7900265">shortBody</span>&nbsp;<span class="op" id="7900275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900279">t</span><span class="op" id="7900280">.</span><span class="ident" id="7900281">Errorf</span><span class="op" id="7900287">(</span><span class="string" id="7900288">&#34;Read&nbsp;body&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7900311">,</span>&nbsp;<span class="ident" id="7900313">buf</span><span class="op" id="7900316">.</span><span class="ident" id="7900317">String</span><span class="op" id="7900323">(</span><span class="op" id="7900324">)</span><span class="op" id="7900325">,</span>&nbsp;<span class="ident" id="7900327">shortBody</span><span class="op" id="7900336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7900339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7900342">if</span>&nbsp;<span class="ident" id="7900345">err</span>&nbsp;<span class="op" id="7900349">!=</span>&nbsp;<span class="ident" id="7900352">io</span><span class="op" id="7900354">.</span><span class="ident" id="7900355">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7900372">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900376">t</span><span class="op" id="7900377">.</span><span class="ident" id="7900378">Errorf</span><span class="op" id="7900384">(</span><span class="string" id="7900385">&#34;io.Copy&nbsp;error&nbsp;=&nbsp;%#v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7900432">,</span>&nbsp;<span class="ident" id="7900434">err</span><span class="op" id="7900437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7900440">}</span><br>
<span class="lineno"></span><span class="op" id="7900442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7900445">func</span>&nbsp;<span class="ident" id="7900450">TestReadResponseUnexpectedEOF</span><span class="op" id="7900479">(</span><span class="ident" id="7900480">t</span>&nbsp;<span class="op" id="7900482">*</span><span class="ident" id="7900483">testing</span><span class="op" id="7900490">.</span><span class="ident" id="7900491">T</span><span class="op" id="7900492">)</span>&nbsp;<span class="op" id="7900494">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900497">br</span>&nbsp;<span class="op" id="7900500">:=</span>&nbsp;<span class="ident" id="7900503">bufio</span><span class="op" id="7900508">.</span><span class="ident" id="7900509">NewReader</span><span class="op" id="7900518">(</span><span class="ident" id="7900519">strings</span><span class="op" id="7900526">.</span><span class="ident" id="7900527">NewReader</span><span class="op" id="7900536">(</span><span class="string" id="7900537">&#34;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently\r\n&#34;</span>&nbsp;<span class="op" id="7900574">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7900578">&#34;Location:&nbsp;http://example.com&#34;</span><span class="op" id="7900608">)</span><span class="op" id="7900609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900612">_</span><span class="op" id="7900613">,</span>&nbsp;<span class="ident" id="7900615">err</span>&nbsp;<span class="op" id="7900619">:=</span>&nbsp;<span class="ident" id="7900622">ReadResponse</span><span class="op" id="7900634">(</span><span class="ident" id="7900635">br</span><span class="op" id="7900637">,</span>&nbsp;<span class="builtintype" id="7900639">nil</span><span class="op" id="7900642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7900645">if</span>&nbsp;<span class="ident" id="7900648">err</span>&nbsp;<span class="op" id="7900652">!=</span>&nbsp;<span class="ident" id="7900655">io</span><span class="op" id="7900657">.</span><span class="ident" id="7900658">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7900675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900679">t</span><span class="op" id="7900680">.</span><span class="ident" id="7900681">Errorf</span><span class="op" id="7900687">(</span><span class="string" id="7900688">&#34;ReadResponse&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7900733">,</span>&nbsp;<span class="ident" id="7900735">err</span><span class="op" id="7900738">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7900741">}</span><br>
<span class="lineno"></span><span class="op" id="7900743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7900746">func</span>&nbsp;<span class="ident" id="7900751">TestNeedsSniff</span><span class="op" id="7900765">(</span><span class="ident" id="7900766">t</span>&nbsp;<span class="op" id="7900768">*</span><span class="ident" id="7900769">testing</span><span class="op" id="7900776">.</span><span class="ident" id="7900777">T</span><span class="op" id="7900778">)</span>&nbsp;<span class="op" id="7900780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7900783">//&nbsp;needsSniff&nbsp;returns&nbsp;true&nbsp;with&nbsp;an&nbsp;empty&nbsp;response.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900835">r</span>&nbsp;<span class="op" id="7900837">:=</span>&nbsp;<span class="op" id="7900840">&amp;</span><span class="ident" id="7900841">response</span><span class="op" id="7900849">{</span><span class="op" id="7900850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7900853">if</span>&nbsp;<span class="ident" id="7900856">got</span><span class="op" id="7900859">,</span>&nbsp;<span class="ident" id="7900861">want</span>&nbsp;<span class="op" id="7900866">:=</span>&nbsp;<span class="ident" id="7900869">r</span><span class="op" id="7900870">.</span><span class="ident" id="7900871">needsSniff</span><span class="op" id="7900881">(</span><span class="op" id="7900882">)</span><span class="op" id="7900883">,</span>&nbsp;<span class="builtintype" id="7900885">true</span><span class="op" id="7900889">;</span>&nbsp;<span class="ident" id="7900891">got</span>&nbsp;<span class="op" id="7900895">!=</span>&nbsp;<span class="ident" id="7900898">want</span>&nbsp;<span class="op" id="7900903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7900907">t</span><span class="op" id="7900908">.</span><span class="ident" id="7900909">Errorf</span><span class="op" id="7900915">(</span><span class="string" id="7900916">&#34;needsSniff&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7900942">,</span>&nbsp;<span class="ident" id="7900944">got</span><span class="op" id="7900947">,</span>&nbsp;<span class="ident" id="7900949">want</span><span class="op" id="7900953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7900956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7900959">//&nbsp;needsSniff&nbsp;returns&nbsp;false&nbsp;when&nbsp;Content-Type&nbsp;=&nbsp;nil.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7901013">r</span><span class="op" id="7901014">.</span><span class="ident" id="7901015">handlerHeader</span>&nbsp;<span class="op" id="7901029">=</span>&nbsp;<span class="ident" id="7901031">Header</span><span class="op" id="7901037">{</span><span class="string" id="7901038">&#34;Content-Type&#34;</span><span class="op" id="7901052">:</span>&nbsp;<span class="builtintype" id="7901054">nil</span><span class="op" id="7901057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7901060">if</span>&nbsp;<span class="ident" id="7901063">got</span><span class="op" id="7901066">,</span>&nbsp;<span class="ident" id="7901068">want</span>&nbsp;<span class="op" id="7901073">:=</span>&nbsp;<span class="ident" id="7901076">r</span><span class="op" id="7901077">.</span><span class="ident" id="7901078">needsSniff</span><span class="op" id="7901088">(</span><span class="op" id="7901089">)</span><span class="op" id="7901090">,</span>&nbsp;<span class="builtintype" id="7901092">false</span><span class="op" id="7901097">;</span>&nbsp;<span class="ident" id="7901099">got</span>&nbsp;<span class="op" id="7901103">!=</span>&nbsp;<span class="ident" id="7901106">want</span>&nbsp;<span class="op" id="7901111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7901115">t</span><span class="op" id="7901116">.</span><span class="ident" id="7901117">Errorf</span><span class="op" id="7901123">(</span><span class="string" id="7901124">&#34;needsSniff&nbsp;empty&nbsp;Content-Type&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7901169">,</span>&nbsp;<span class="ident" id="7901171">got</span><span class="op" id="7901174">,</span>&nbsp;<span class="ident" id="7901176">want</span><span class="op" id="7901180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7901183">}</span><br>
<span class="lineno"></span><span class="op" id="7901185">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
