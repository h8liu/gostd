<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7007241">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7007296">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7007350">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7007401">package</span>&nbsp;<span class="ident" id="7007409">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007415">import</span>&nbsp;<span class="op" id="7007422">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7007425">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7007435">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7007442">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7007450">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7007460">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007463">const</span>&nbsp;<span class="op" id="7007469">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007472">numTestSamples</span>&nbsp;<span class="op" id="7007487">=</span>&nbsp;<span class="num" id="7007489">10000</span><br>
<span class="lineno"></span><span class="op" id="7007495">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007498">type</span>&nbsp;<span class="ident" id="7007503">statsResults</span>&nbsp;<span class="keyword" id="7007516">struct</span>&nbsp;<span class="op" id="7007523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007526">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7007538">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007547">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7007559">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007568">closeEnough</span>&nbsp;<span class="builtintype" id="7007580">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007589">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7007601">float64</span><br>
<span class="lineno"></span><span class="op" id="7007609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7007612">func</span>&nbsp;<span class="ident" id="7007617">max</span><span class="op" id="7007620">(</span><span class="ident" id="7007621">a</span><span class="op" id="7007622">,</span>&nbsp;<span class="ident" id="7007624">b</span>&nbsp;<span class="builtintype" id="7007626">float64</span><span class="op" id="7007633">)</span>&nbsp;<span class="builtintype" id="7007635">float64</span>&nbsp;<span class="op" id="7007643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007646">if</span>&nbsp;<span class="ident" id="7007649">a</span>&nbsp;<span class="op" id="7007651">&gt;</span>&nbsp;<span class="ident" id="7007653">b</span>&nbsp;<span class="op" id="7007655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007659">return</span>&nbsp;<span class="ident" id="7007666">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007672">return</span>&nbsp;<span class="ident" id="7007679">b</span><br>
<span class="lineno">30</span><span class="op" id="7007681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007684">func</span>&nbsp;<span class="ident" id="7007689">nearEqual</span><span class="op" id="7007698">(</span><span class="ident" id="7007699">a</span><span class="op" id="7007700">,</span>&nbsp;<span class="ident" id="7007702">b</span><span class="op" id="7007703">,</span>&nbsp;<span class="ident" id="7007705">closeEnough</span><span class="op" id="7007716">,</span>&nbsp;<span class="ident" id="7007718">maxError</span>&nbsp;<span class="builtintype" id="7007727">float64</span><span class="op" id="7007734">)</span>&nbsp;<span class="builtintype" id="7007736">bool</span>&nbsp;<span class="op" id="7007741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007744">absDiff</span>&nbsp;<span class="op" id="7007752">:=</span>&nbsp;<span class="ident" id="7007755">math</span><span class="op" id="7007759">.</span><span class="ident" id="7007760">Abs</span><span class="op" id="7007763">(</span><span class="ident" id="7007764">a</span>&nbsp;<span class="op" id="7007766">-</span>&nbsp;<span class="ident" id="7007768">b</span><span class="op" id="7007769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007772">if</span>&nbsp;<span class="ident" id="7007775">absDiff</span>&nbsp;<span class="op" id="7007783">&lt;</span>&nbsp;<span class="ident" id="7007785">closeEnough</span>&nbsp;<span class="op" id="7007797">{</span>&nbsp;<span class="comment" id="7007799">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007869">return</span>&nbsp;<span class="ident" id="7007876">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007885">return</span>&nbsp;<span class="ident" id="7007892">absDiff</span><span class="op" id="7007899">/</span><span class="ident" id="7007900">max</span><span class="op" id="7007903">(</span><span class="ident" id="7007904">math</span><span class="op" id="7007908">.</span><span class="ident" id="7007909">Abs</span><span class="op" id="7007912">(</span><span class="ident" id="7007913">a</span><span class="op" id="7007914">)</span><span class="op" id="7007915">,</span>&nbsp;<span class="ident" id="7007917">math</span><span class="op" id="7007921">.</span><span class="ident" id="7007922">Abs</span><span class="op" id="7007925">(</span><span class="ident" id="7007926">b</span><span class="op" id="7007927">)</span><span class="op" id="7007928">)</span>&nbsp;<span class="op" id="7007930">&lt;</span>&nbsp;<span class="ident" id="7007932">maxError</span><br>
<span class="lineno"></span><span class="op" id="7007941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7007944">var</span>&nbsp;<span class="ident" id="7007948">testSeeds</span>&nbsp;<span class="op" id="7007958">=</span>&nbsp;<span class="op" id="7007960">[</span><span class="op" id="7007961">]</span><span class="ident" id="7007962">int64</span><span class="op" id="7007967">{</span><span class="num" id="7007968">1</span><span class="op" id="7007969">,</span>&nbsp;<span class="num" id="7007971">1754801282</span><span class="op" id="7007981">,</span>&nbsp;<span class="num" id="7007983">1698661970</span><span class="op" id="7007993">,</span>&nbsp;<span class="num" id="7007995">1550503961</span><span class="op" id="7008005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7008008">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7008082">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7008115">func</span>&nbsp;<span class="op" id="7008120">(</span><span class="ident" id="7008121">this</span>&nbsp;<span class="op" id="7008126">*</span><span class="ident" id="7008127">statsResults</span><span class="op" id="7008139">)</span>&nbsp;<span class="ident" id="7008141">checkSimilarDistribution</span><span class="op" id="7008165">(</span><span class="ident" id="7008166">expected</span>&nbsp;<span class="op" id="7008175">*</span><span class="ident" id="7008176">statsResults</span><span class="op" id="7008188">)</span>&nbsp;<span class="builtintype" id="7008190">error</span>&nbsp;<span class="op" id="7008196">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008199">if</span>&nbsp;<span class="op" id="7008202">!</span><span class="ident" id="7008203">nearEqual</span><span class="op" id="7008212">(</span><span class="ident" id="7008213">this</span><span class="op" id="7008217">.</span><span class="ident" id="7008218">mean</span><span class="op" id="7008222">,</span>&nbsp;<span class="ident" id="7008224">expected</span><span class="op" id="7008232">.</span><span class="ident" id="7008233">mean</span><span class="op" id="7008237">,</span>&nbsp;<span class="ident" id="7008239">expected</span><span class="op" id="7008247">.</span><span class="ident" id="7008248">closeEnough</span><span class="op" id="7008259">,</span>&nbsp;<span class="ident" id="7008261">expected</span><span class="op" id="7008269">.</span><span class="ident" id="7008270">maxError</span><span class="op" id="7008278">)</span>&nbsp;<span class="op" id="7008280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008284">s</span>&nbsp;<span class="op" id="7008286">:=</span>&nbsp;<span class="ident" id="7008289">fmt</span><span class="op" id="7008292">.</span><span class="ident" id="7008293">Sprintf</span><span class="op" id="7008300">(</span><span class="string" id="7008301">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7008339">,</span>&nbsp;<span class="ident" id="7008341">this</span><span class="op" id="7008345">.</span><span class="ident" id="7008346">mean</span><span class="op" id="7008350">,</span>&nbsp;<span class="ident" id="7008352">expected</span><span class="op" id="7008360">.</span><span class="ident" id="7008361">mean</span><span class="op" id="7008365">,</span>&nbsp;<span class="ident" id="7008367">expected</span><span class="op" id="7008375">.</span><span class="ident" id="7008376">closeEnough</span><span class="op" id="7008387">,</span>&nbsp;<span class="ident" id="7008389">expected</span><span class="op" id="7008397">.</span><span class="ident" id="7008398">maxError</span><span class="op" id="7008406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008410">fmt</span><span class="op" id="7008413">.</span><span class="ident" id="7008414">Println</span><span class="op" id="7008421">(</span><span class="ident" id="7008422">s</span><span class="op" id="7008423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008427">return</span>&nbsp;<span class="ident" id="7008434">errors</span><span class="op" id="7008440">.</span><span class="ident" id="7008441">New</span><span class="op" id="7008444">(</span><span class="ident" id="7008445">s</span><span class="op" id="7008446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7008449">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008452">if</span>&nbsp;<span class="op" id="7008455">!</span><span class="ident" id="7008456">nearEqual</span><span class="op" id="7008465">(</span><span class="ident" id="7008466">this</span><span class="op" id="7008470">.</span><span class="ident" id="7008471">stddev</span><span class="op" id="7008477">,</span>&nbsp;<span class="ident" id="7008479">expected</span><span class="op" id="7008487">.</span><span class="ident" id="7008488">stddev</span><span class="op" id="7008494">,</span>&nbsp;<span class="num" id="7008496">0</span><span class="op" id="7008497">,</span>&nbsp;<span class="ident" id="7008499">expected</span><span class="op" id="7008507">.</span><span class="ident" id="7008508">maxError</span><span class="op" id="7008516">)</span>&nbsp;<span class="op" id="7008518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008522">s</span>&nbsp;<span class="op" id="7008524">:=</span>&nbsp;<span class="ident" id="7008527">fmt</span><span class="op" id="7008530">.</span><span class="ident" id="7008531">Sprintf</span><span class="op" id="7008538">(</span><span class="string" id="7008539">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7008579">,</span>&nbsp;<span class="ident" id="7008581">this</span><span class="op" id="7008585">.</span><span class="ident" id="7008586">stddev</span><span class="op" id="7008592">,</span>&nbsp;<span class="ident" id="7008594">expected</span><span class="op" id="7008602">.</span><span class="ident" id="7008603">stddev</span><span class="op" id="7008609">,</span>&nbsp;<span class="ident" id="7008611">expected</span><span class="op" id="7008619">.</span><span class="ident" id="7008620">closeEnough</span><span class="op" id="7008631">,</span>&nbsp;<span class="ident" id="7008633">expected</span><span class="op" id="7008641">.</span><span class="ident" id="7008642">maxError</span><span class="op" id="7008650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008654">fmt</span><span class="op" id="7008657">.</span><span class="ident" id="7008658">Println</span><span class="op" id="7008665">(</span><span class="ident" id="7008666">s</span><span class="op" id="7008667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008671">return</span>&nbsp;<span class="ident" id="7008678">errors</span><span class="op" id="7008684">.</span><span class="ident" id="7008685">New</span><span class="op" id="7008688">(</span><span class="ident" id="7008689">s</span><span class="op" id="7008690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7008693">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008696">return</span>&nbsp;<span class="ident" id="7008703">nil</span><br>
<span class="lineno"></span><span class="op" id="7008707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7008710">func</span>&nbsp;<span class="ident" id="7008715">getStatsResults</span><span class="op" id="7008730">(</span><span class="ident" id="7008731">samples</span>&nbsp;<span class="op" id="7008739">[</span><span class="op" id="7008740">]</span><span class="builtintype" id="7008741">float64</span><span class="op" id="7008748">)</span>&nbsp;<span class="op" id="7008750">*</span><span class="ident" id="7008751">statsResults</span>&nbsp;<span class="op" id="7008764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008767">res</span>&nbsp;<span class="op" id="7008771">:=</span>&nbsp;<span class="builtinfunc" id="7008774">new</span><span class="op" id="7008777">(</span><span class="ident" id="7008778">statsResults</span><span class="op" id="7008790">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008793">var</span>&nbsp;<span class="ident" id="7008797">sum</span><span class="op" id="7008800">,</span>&nbsp;<span class="ident" id="7008802">squaresum</span>&nbsp;<span class="builtintype" id="7008812">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008821">for</span>&nbsp;<span class="ident" id="7008825">_</span><span class="op" id="7008826">,</span>&nbsp;<span class="ident" id="7008828">s</span>&nbsp;<span class="op" id="7008830">:=</span>&nbsp;<span class="keyword" id="7008833">range</span>&nbsp;<span class="ident" id="7008839">samples</span>&nbsp;<span class="op" id="7008847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008851">sum</span>&nbsp;<span class="op" id="7008855">+=</span>&nbsp;<span class="ident" id="7008858">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008862">squaresum</span>&nbsp;<span class="op" id="7008872">+=</span>&nbsp;<span class="ident" id="7008875">s</span>&nbsp;<span class="op" id="7008877">*</span>&nbsp;<span class="ident" id="7008879">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7008882">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008885">res</span><span class="op" id="7008888">.</span><span class="ident" id="7008889">mean</span>&nbsp;<span class="op" id="7008894">=</span>&nbsp;<span class="ident" id="7008896">sum</span>&nbsp;<span class="op" id="7008900">/</span>&nbsp;<span class="builtintype" id="7008902">float64</span><span class="op" id="7008909">(</span><span class="builtinfunc" id="7008910">len</span><span class="op" id="7008913">(</span><span class="ident" id="7008914">samples</span><span class="op" id="7008921">)</span><span class="op" id="7008922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008925">res</span><span class="op" id="7008928">.</span><span class="ident" id="7008929">stddev</span>&nbsp;<span class="op" id="7008936">=</span>&nbsp;<span class="ident" id="7008938">math</span><span class="op" id="7008942">.</span><span class="ident" id="7008943">Sqrt</span><span class="op" id="7008947">(</span><span class="ident" id="7008948">squaresum</span><span class="op" id="7008957">/</span><span class="builtintype" id="7008958">float64</span><span class="op" id="7008965">(</span><span class="builtinfunc" id="7008966">len</span><span class="op" id="7008969">(</span><span class="ident" id="7008970">samples</span><span class="op" id="7008977">)</span><span class="op" id="7008978">)</span>&nbsp;<span class="op" id="7008980">-</span>&nbsp;<span class="ident" id="7008982">res</span><span class="op" id="7008985">.</span><span class="ident" id="7008986">mean</span><span class="op" id="7008990">*</span><span class="ident" id="7008991">res</span><span class="op" id="7008994">.</span><span class="ident" id="7008995">mean</span><span class="op" id="7008999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009002">return</span>&nbsp;<span class="ident" id="7009009">res</span><br>
<span class="lineno"></span><span class="op" id="7009013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7009016">func</span>&nbsp;<span class="ident" id="7009021">checkSampleDistribution</span><span class="op" id="7009044">(</span><span class="ident" id="7009045">t</span>&nbsp;<span class="op" id="7009047">*</span><span class="ident" id="7009048">testing</span><span class="op" id="7009055">.</span><span class="ident" id="7009056">T</span><span class="op" id="7009057">,</span>&nbsp;<span class="ident" id="7009059">samples</span>&nbsp;<span class="op" id="7009067">[</span><span class="op" id="7009068">]</span><span class="builtintype" id="7009069">float64</span><span class="op" id="7009076">,</span>&nbsp;<span class="ident" id="7009078">expected</span>&nbsp;<span class="op" id="7009087">*</span><span class="ident" id="7009088">statsResults</span><span class="op" id="7009100">)</span>&nbsp;<span class="op" id="7009102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009105">actual</span>&nbsp;<span class="op" id="7009112">:=</span>&nbsp;<span class="ident" id="7009115">getStatsResults</span><span class="op" id="7009130">(</span><span class="ident" id="7009131">samples</span><span class="op" id="7009138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009141">err</span>&nbsp;<span class="op" id="7009145">:=</span>&nbsp;<span class="ident" id="7009148">actual</span><span class="op" id="7009154">.</span><span class="ident" id="7009155">checkSimilarDistribution</span><span class="op" id="7009179">(</span><span class="ident" id="7009180">expected</span><span class="op" id="7009188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009191">if</span>&nbsp;<span class="ident" id="7009194">err</span>&nbsp;<span class="op" id="7009198">!=</span>&nbsp;<span class="ident" id="7009201">nil</span>&nbsp;<span class="op" id="7009205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009209">t</span><span class="op" id="7009210">.</span><span class="ident" id="7009211">Errorf</span><span class="op" id="7009217">(</span><span class="ident" id="7009218">err</span><span class="op" id="7009221">.</span><span class="ident" id="7009222">Error</span><span class="op" id="7009227">(</span><span class="op" id="7009228">)</span><span class="op" id="7009229">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7009232">}</span><br>
<span class="lineno"></span><span class="op" id="7009234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7009237">func</span>&nbsp;<span class="ident" id="7009242">checkSampleSliceDistributions</span><span class="op" id="7009271">(</span><span class="ident" id="7009272">t</span>&nbsp;<span class="op" id="7009274">*</span><span class="ident" id="7009275">testing</span><span class="op" id="7009282">.</span><span class="ident" id="7009283">T</span><span class="op" id="7009284">,</span>&nbsp;<span class="ident" id="7009286">samples</span>&nbsp;<span class="op" id="7009294">[</span><span class="op" id="7009295">]</span><span class="builtintype" id="7009296">float64</span><span class="op" id="7009303">,</span>&nbsp;<span class="ident" id="7009305">nslices</span>&nbsp;<span class="builtintype" id="7009313">int</span><span class="op" id="7009316">,</span>&nbsp;<span class="ident" id="7009318">expected</span>&nbsp;<span class="op" id="7009327">*</span><span class="ident" id="7009328">statsResults</span><span class="op" id="7009340">)</span>&nbsp;<span class="op" id="7009342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009345">chunk</span>&nbsp;<span class="op" id="7009351">:=</span>&nbsp;<span class="builtinfunc" id="7009354">len</span><span class="op" id="7009357">(</span><span class="ident" id="7009358">samples</span><span class="op" id="7009365">)</span>&nbsp;<span class="op" id="7009367">/</span>&nbsp;<span class="ident" id="7009369">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009378">for</span>&nbsp;<span class="ident" id="7009382">i</span>&nbsp;<span class="op" id="7009384">:=</span>&nbsp;<span class="num" id="7009387">0</span><span class="op" id="7009388">;</span>&nbsp;<span class="ident" id="7009390">i</span>&nbsp;<span class="op" id="7009392">&lt;</span>&nbsp;<span class="ident" id="7009394">nslices</span><span class="op" id="7009401">;</span>&nbsp;<span class="ident" id="7009403">i</span><span class="op" id="7009404">++</span>&nbsp;<span class="op" id="7009407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009411">low</span>&nbsp;<span class="op" id="7009415">:=</span>&nbsp;<span class="ident" id="7009418">i</span>&nbsp;<span class="op" id="7009420">*</span>&nbsp;<span class="ident" id="7009422">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009430">var</span>&nbsp;<span class="ident" id="7009434">high</span>&nbsp;<span class="builtintype" id="7009439">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009445">if</span>&nbsp;<span class="ident" id="7009448">i</span>&nbsp;<span class="op" id="7009450">==</span>&nbsp;<span class="ident" id="7009453">nslices</span><span class="op" id="7009460">-</span><span class="num" id="7009461">1</span>&nbsp;<span class="op" id="7009463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009468">high</span>&nbsp;<span class="op" id="7009473">=</span>&nbsp;<span class="builtinfunc" id="7009475">len</span><span class="op" id="7009478">(</span><span class="ident" id="7009479">samples</span><span class="op" id="7009486">)</span>&nbsp;<span class="op" id="7009488">-</span>&nbsp;<span class="num" id="7009490">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7009494">}</span>&nbsp;<span class="keyword" id="7009496">else</span>&nbsp;<span class="op" id="7009501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009506">high</span>&nbsp;<span class="op" id="7009511">=</span>&nbsp;<span class="op" id="7009513">(</span><span class="ident" id="7009514">i</span>&nbsp;<span class="op" id="7009516">+</span>&nbsp;<span class="num" id="7009518">1</span><span class="op" id="7009519">)</span>&nbsp;<span class="op" id="7009521">*</span>&nbsp;<span class="ident" id="7009523">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7009531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009535">checkSampleDistribution</span><span class="op" id="7009558">(</span><span class="ident" id="7009559">t</span><span class="op" id="7009560">,</span>&nbsp;<span class="ident" id="7009562">samples</span><span class="op" id="7009569">[</span><span class="ident" id="7009570">low</span><span class="op" id="7009573">:</span><span class="ident" id="7009574">high</span><span class="op" id="7009578">]</span><span class="op" id="7009579">,</span>&nbsp;<span class="ident" id="7009581">expected</span><span class="op" id="7009589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7009592">}</span><br>
<span class="lineno">90</span><span class="op" id="7009594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7009597">//</span><br>
<span class="lineno"></span><span class="comment" id="7009600">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7009629">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7009633">func</span>&nbsp;<span class="ident" id="7009638">generateNormalSamples</span><span class="op" id="7009659">(</span><span class="ident" id="7009660">nsamples</span>&nbsp;<span class="builtintype" id="7009669">int</span><span class="op" id="7009672">,</span>&nbsp;<span class="ident" id="7009674">mean</span><span class="op" id="7009678">,</span>&nbsp;<span class="ident" id="7009680">stddev</span>&nbsp;<span class="builtintype" id="7009687">float64</span><span class="op" id="7009694">,</span>&nbsp;<span class="ident" id="7009696">seed</span>&nbsp;<span class="ident" id="7009701">int64</span><span class="op" id="7009706">)</span>&nbsp;<span class="op" id="7009708">[</span><span class="op" id="7009709">]</span><span class="builtintype" id="7009710">float64</span>&nbsp;<span class="op" id="7009718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009721">r</span>&nbsp;<span class="op" id="7009723">:=</span>&nbsp;<span class="ident" id="7009726">New</span><span class="op" id="7009729">(</span><span class="ident" id="7009730">NewSource</span><span class="op" id="7009739">(</span><span class="ident" id="7009740">seed</span><span class="op" id="7009744">)</span><span class="op" id="7009745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009748">samples</span>&nbsp;<span class="op" id="7009756">:=</span>&nbsp;<span class="builtinfunc" id="7009759">make</span><span class="op" id="7009763">(</span><span class="op" id="7009764">[</span><span class="op" id="7009765">]</span><span class="builtintype" id="7009766">float64</span><span class="op" id="7009773">,</span>&nbsp;<span class="ident" id="7009775">nsamples</span><span class="op" id="7009783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009786">for</span>&nbsp;<span class="ident" id="7009790">i</span>&nbsp;<span class="op" id="7009792">:=</span>&nbsp;<span class="keyword" id="7009795">range</span>&nbsp;<span class="ident" id="7009801">samples</span>&nbsp;<span class="op" id="7009809">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009813">samples</span><span class="op" id="7009820">[</span><span class="ident" id="7009821">i</span><span class="op" id="7009822">]</span>&nbsp;<span class="op" id="7009824">=</span>&nbsp;<span class="ident" id="7009826">r</span><span class="op" id="7009827">.</span><span class="ident" id="7009828">NormFloat64</span><span class="op" id="7009839">(</span><span class="op" id="7009840">)</span><span class="op" id="7009841">*</span><span class="ident" id="7009842">stddev</span>&nbsp;<span class="op" id="7009849">+</span>&nbsp;<span class="ident" id="7009851">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7009857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7009860">return</span>&nbsp;<span class="ident" id="7009867">samples</span><br>
<span class="lineno"></span><span class="op" id="7009875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7009878">func</span>&nbsp;<span class="ident" id="7009883">testNormalDistribution</span><span class="op" id="7009905">(</span><span class="ident" id="7009906">t</span>&nbsp;<span class="op" id="7009908">*</span><span class="ident" id="7009909">testing</span><span class="op" id="7009916">.</span><span class="ident" id="7009917">T</span><span class="op" id="7009918">,</span>&nbsp;<span class="ident" id="7009920">nsamples</span>&nbsp;<span class="builtintype" id="7009929">int</span><span class="op" id="7009932">,</span>&nbsp;<span class="ident" id="7009934">mean</span><span class="op" id="7009938">,</span>&nbsp;<span class="ident" id="7009940">stddev</span>&nbsp;<span class="builtintype" id="7009947">float64</span><span class="op" id="7009954">,</span>&nbsp;<span class="ident" id="7009956">seed</span>&nbsp;<span class="ident" id="7009961">int64</span><span class="op" id="7009966">)</span>&nbsp;<span class="op" id="7009968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7009971">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010068">samples</span>&nbsp;<span class="op" id="7010076">:=</span>&nbsp;<span class="ident" id="7010079">generateNormalSamples</span><span class="op" id="7010100">(</span><span class="ident" id="7010101">nsamples</span><span class="op" id="7010109">,</span>&nbsp;<span class="ident" id="7010111">mean</span><span class="op" id="7010115">,</span>&nbsp;<span class="ident" id="7010117">stddev</span><span class="op" id="7010123">,</span>&nbsp;<span class="ident" id="7010125">seed</span><span class="op" id="7010129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010132">errorScale</span>&nbsp;<span class="op" id="7010143">:=</span>&nbsp;<span class="ident" id="7010146">max</span><span class="op" id="7010149">(</span><span class="num" id="7010150">1.0</span><span class="op" id="7010153">,</span>&nbsp;<span class="ident" id="7010155">stddev</span><span class="op" id="7010161">)</span>&nbsp;<span class="comment" id="7010163">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010192">expected</span>&nbsp;<span class="op" id="7010201">:=</span>&nbsp;<span class="op" id="7010204">&amp;</span><span class="ident" id="7010205">statsResults</span><span class="op" id="7010217">{</span><span class="ident" id="7010218">mean</span><span class="op" id="7010222">,</span>&nbsp;<span class="ident" id="7010224">stddev</span><span class="op" id="7010230">,</span>&nbsp;<span class="num" id="7010232">0.10</span>&nbsp;<span class="op" id="7010237">*</span>&nbsp;<span class="ident" id="7010239">errorScale</span><span class="op" id="7010249">,</span>&nbsp;<span class="num" id="7010251">0.08</span>&nbsp;<span class="op" id="7010256">*</span>&nbsp;<span class="ident" id="7010258">errorScale</span><span class="op" id="7010268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7010272">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010341">checkSampleDistribution</span><span class="op" id="7010364">(</span><span class="ident" id="7010365">t</span><span class="op" id="7010366">,</span>&nbsp;<span class="ident" id="7010368">samples</span><span class="op" id="7010375">,</span>&nbsp;<span class="ident" id="7010377">expected</span><span class="op" id="7010385">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7010389">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010464">checkSampleSliceDistributions</span><span class="op" id="7010493">(</span><span class="ident" id="7010494">t</span><span class="op" id="7010495">,</span>&nbsp;<span class="ident" id="7010497">samples</span><span class="op" id="7010504">,</span>&nbsp;<span class="num" id="7010506">2</span><span class="op" id="7010507">,</span>&nbsp;<span class="ident" id="7010509">expected</span><span class="op" id="7010517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7010521">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010595">checkSampleSliceDistributions</span><span class="op" id="7010624">(</span><span class="ident" id="7010625">t</span><span class="op" id="7010626">,</span>&nbsp;<span class="ident" id="7010628">samples</span><span class="op" id="7010635">,</span>&nbsp;<span class="num" id="7010637">7</span><span class="op" id="7010638">,</span>&nbsp;<span class="ident" id="7010640">expected</span><span class="op" id="7010648">)</span><br>
<span class="lineno">120</span><span class="op" id="7010650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7010653">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7010670">func</span>&nbsp;<span class="ident" id="7010675">TestStandardNormalValues</span><span class="op" id="7010699">(</span><span class="ident" id="7010700">t</span>&nbsp;<span class="op" id="7010702">*</span><span class="ident" id="7010703">testing</span><span class="op" id="7010710">.</span><span class="ident" id="7010711">T</span><span class="op" id="7010712">)</span>&nbsp;<span class="op" id="7010714">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7010717">for</span>&nbsp;<span class="ident" id="7010721">_</span><span class="op" id="7010722">,</span>&nbsp;<span class="ident" id="7010724">seed</span>&nbsp;<span class="op" id="7010729">:=</span>&nbsp;<span class="keyword" id="7010732">range</span>&nbsp;<span class="ident" id="7010738">testSeeds</span>&nbsp;<span class="op" id="7010748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010752">testNormalDistribution</span><span class="op" id="7010774">(</span><span class="ident" id="7010775">t</span><span class="op" id="7010776">,</span>&nbsp;<span class="ident" id="7010778">numTestSamples</span><span class="op" id="7010792">,</span>&nbsp;<span class="num" id="7010794">0</span><span class="op" id="7010795">,</span>&nbsp;<span class="num" id="7010797">1</span><span class="op" id="7010798">,</span>&nbsp;<span class="ident" id="7010800">seed</span><span class="op" id="7010804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7010807">}</span><br>
<span class="lineno"></span><span class="op" id="7010809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7010812">func</span>&nbsp;<span class="ident" id="7010817">TestNonStandardNormalValues</span><span class="op" id="7010844">(</span><span class="ident" id="7010845">t</span>&nbsp;<span class="op" id="7010847">*</span><span class="ident" id="7010848">testing</span><span class="op" id="7010855">.</span><span class="ident" id="7010856">T</span><span class="op" id="7010857">)</span>&nbsp;<span class="op" id="7010859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010862">sdmax</span>&nbsp;<span class="op" id="7010868">:=</span>&nbsp;<span class="num" id="7010871">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010879">mmax</span>&nbsp;<span class="op" id="7010884">:=</span>&nbsp;<span class="num" id="7010887">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7010895">if</span>&nbsp;<span class="ident" id="7010898">testing</span><span class="op" id="7010905">.</span><span class="ident" id="7010906">Short</span><span class="op" id="7010911">(</span><span class="op" id="7010912">)</span>&nbsp;<span class="op" id="7010914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010918">sdmax</span>&nbsp;<span class="op" id="7010924">=</span>&nbsp;<span class="num" id="7010926">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010930">mmax</span>&nbsp;<span class="op" id="7010935">=</span>&nbsp;<span class="num" id="7010937">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7010940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7010943">for</span>&nbsp;<span class="ident" id="7010947">sd</span>&nbsp;<span class="op" id="7010950">:=</span>&nbsp;<span class="num" id="7010953">0.5</span><span class="op" id="7010956">;</span>&nbsp;<span class="ident" id="7010958">sd</span>&nbsp;<span class="op" id="7010961">&lt;</span>&nbsp;<span class="ident" id="7010963">sdmax</span><span class="op" id="7010968">;</span>&nbsp;<span class="ident" id="7010970">sd</span>&nbsp;<span class="op" id="7010973">*=</span>&nbsp;<span class="num" id="7010976">2</span>&nbsp;<span class="op" id="7010978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7010982">for</span>&nbsp;<span class="ident" id="7010986">m</span>&nbsp;<span class="op" id="7010988">:=</span>&nbsp;<span class="num" id="7010991">0.5</span><span class="op" id="7010994">;</span>&nbsp;<span class="ident" id="7010996">m</span>&nbsp;<span class="op" id="7010998">&lt;</span>&nbsp;<span class="ident" id="7011000">mmax</span><span class="op" id="7011004">;</span>&nbsp;<span class="ident" id="7011006">m</span>&nbsp;<span class="op" id="7011008">*=</span>&nbsp;<span class="num" id="7011011">2</span>&nbsp;<span class="op" id="7011013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011018">for</span>&nbsp;<span class="ident" id="7011022">_</span><span class="op" id="7011023">,</span>&nbsp;<span class="ident" id="7011025">seed</span>&nbsp;<span class="op" id="7011030">:=</span>&nbsp;<span class="keyword" id="7011033">range</span>&nbsp;<span class="ident" id="7011039">testSeeds</span>&nbsp;<span class="op" id="7011049">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011055">testNormalDistribution</span><span class="op" id="7011077">(</span><span class="ident" id="7011078">t</span><span class="op" id="7011079">,</span>&nbsp;<span class="ident" id="7011081">numTestSamples</span><span class="op" id="7011095">,</span>&nbsp;<span class="ident" id="7011097">m</span><span class="op" id="7011098">,</span>&nbsp;<span class="ident" id="7011100">sd</span><span class="op" id="7011102">,</span>&nbsp;<span class="ident" id="7011104">seed</span><span class="op" id="7011108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011114">if</span>&nbsp;<span class="ident" id="7011117">testing</span><span class="op" id="7011124">.</span><span class="ident" id="7011125">Short</span><span class="op" id="7011130">(</span><span class="op" id="7011131">)</span>&nbsp;<span class="op" id="7011133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011140">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7011150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7011155">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7011159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7011162">}</span><br>
<span class="lineno"></span><span class="op" id="7011164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7011167">//</span><br>
<span class="lineno">150</span><span class="comment" id="7011170">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7011204">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7011208">func</span>&nbsp;<span class="ident" id="7011213">generateExponentialSamples</span><span class="op" id="7011239">(</span><span class="ident" id="7011240">nsamples</span>&nbsp;<span class="builtintype" id="7011249">int</span><span class="op" id="7011252">,</span>&nbsp;<span class="ident" id="7011254">rate</span>&nbsp;<span class="builtintype" id="7011259">float64</span><span class="op" id="7011266">,</span>&nbsp;<span class="ident" id="7011268">seed</span>&nbsp;<span class="ident" id="7011273">int64</span><span class="op" id="7011278">)</span>&nbsp;<span class="op" id="7011280">[</span><span class="op" id="7011281">]</span><span class="builtintype" id="7011282">float64</span>&nbsp;<span class="op" id="7011290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011293">r</span>&nbsp;<span class="op" id="7011295">:=</span>&nbsp;<span class="ident" id="7011298">New</span><span class="op" id="7011301">(</span><span class="ident" id="7011302">NewSource</span><span class="op" id="7011311">(</span><span class="ident" id="7011312">seed</span><span class="op" id="7011316">)</span><span class="op" id="7011317">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011320">samples</span>&nbsp;<span class="op" id="7011328">:=</span>&nbsp;<span class="builtinfunc" id="7011331">make</span><span class="op" id="7011335">(</span><span class="op" id="7011336">[</span><span class="op" id="7011337">]</span><span class="builtintype" id="7011338">float64</span><span class="op" id="7011345">,</span>&nbsp;<span class="ident" id="7011347">nsamples</span><span class="op" id="7011355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011358">for</span>&nbsp;<span class="ident" id="7011362">i</span>&nbsp;<span class="op" id="7011364">:=</span>&nbsp;<span class="keyword" id="7011367">range</span>&nbsp;<span class="ident" id="7011373">samples</span>&nbsp;<span class="op" id="7011381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011385">samples</span><span class="op" id="7011392">[</span><span class="ident" id="7011393">i</span><span class="op" id="7011394">]</span>&nbsp;<span class="op" id="7011396">=</span>&nbsp;<span class="ident" id="7011398">r</span><span class="op" id="7011399">.</span><span class="ident" id="7011400">ExpFloat64</span><span class="op" id="7011410">(</span><span class="op" id="7011411">)</span>&nbsp;<span class="op" id="7011413">/</span>&nbsp;<span class="ident" id="7011415">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7011421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011424">return</span>&nbsp;<span class="ident" id="7011431">samples</span><br>
<span class="lineno">160</span><span class="op" id="7011439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7011442">func</span>&nbsp;<span class="ident" id="7011447">testExponentialDistribution</span><span class="op" id="7011474">(</span><span class="ident" id="7011475">t</span>&nbsp;<span class="op" id="7011477">*</span><span class="ident" id="7011478">testing</span><span class="op" id="7011485">.</span><span class="ident" id="7011486">T</span><span class="op" id="7011487">,</span>&nbsp;<span class="ident" id="7011489">nsamples</span>&nbsp;<span class="builtintype" id="7011498">int</span><span class="op" id="7011501">,</span>&nbsp;<span class="ident" id="7011503">rate</span>&nbsp;<span class="builtintype" id="7011508">float64</span><span class="op" id="7011515">,</span>&nbsp;<span class="ident" id="7011517">seed</span>&nbsp;<span class="ident" id="7011522">int64</span><span class="op" id="7011527">)</span>&nbsp;<span class="op" id="7011529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7011532">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011611">mean</span>&nbsp;<span class="op" id="7011616">:=</span>&nbsp;<span class="num" id="7011619">1</span>&nbsp;<span class="op" id="7011621">/</span>&nbsp;<span class="ident" id="7011623">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011629">stddev</span>&nbsp;<span class="op" id="7011636">:=</span>&nbsp;<span class="ident" id="7011639">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011646">samples</span>&nbsp;<span class="op" id="7011654">:=</span>&nbsp;<span class="ident" id="7011657">generateExponentialSamples</span><span class="op" id="7011683">(</span><span class="ident" id="7011684">nsamples</span><span class="op" id="7011692">,</span>&nbsp;<span class="ident" id="7011694">rate</span><span class="op" id="7011698">,</span>&nbsp;<span class="ident" id="7011700">seed</span><span class="op" id="7011704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011707">errorScale</span>&nbsp;<span class="op" id="7011718">:=</span>&nbsp;<span class="ident" id="7011721">max</span><span class="op" id="7011724">(</span><span class="num" id="7011725">1.0</span><span class="op" id="7011728">,</span>&nbsp;<span class="num" id="7011730">1</span><span class="op" id="7011731">/</span><span class="ident" id="7011732">rate</span><span class="op" id="7011736">)</span>&nbsp;<span class="comment" id="7011738">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011784">expected</span>&nbsp;<span class="op" id="7011793">:=</span>&nbsp;<span class="op" id="7011796">&amp;</span><span class="ident" id="7011797">statsResults</span><span class="op" id="7011809">{</span><span class="ident" id="7011810">mean</span><span class="op" id="7011814">,</span>&nbsp;<span class="ident" id="7011816">stddev</span><span class="op" id="7011822">,</span>&nbsp;<span class="num" id="7011824">0.10</span>&nbsp;<span class="op" id="7011829">*</span>&nbsp;<span class="ident" id="7011831">errorScale</span><span class="op" id="7011841">,</span>&nbsp;<span class="num" id="7011843">0.20</span>&nbsp;<span class="op" id="7011848">*</span>&nbsp;<span class="ident" id="7011850">errorScale</span><span class="op" id="7011860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7011864">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011933">checkSampleDistribution</span><span class="op" id="7011956">(</span><span class="ident" id="7011957">t</span><span class="op" id="7011958">,</span>&nbsp;<span class="ident" id="7011960">samples</span><span class="op" id="7011967">,</span>&nbsp;<span class="ident" id="7011969">expected</span><span class="op" id="7011977">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7011981">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012056">checkSampleSliceDistributions</span><span class="op" id="7012085">(</span><span class="ident" id="7012086">t</span><span class="op" id="7012087">,</span>&nbsp;<span class="ident" id="7012089">samples</span><span class="op" id="7012096">,</span>&nbsp;<span class="num" id="7012098">2</span><span class="op" id="7012099">,</span>&nbsp;<span class="ident" id="7012101">expected</span><span class="op" id="7012109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7012113">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012187">checkSampleSliceDistributions</span><span class="op" id="7012216">(</span><span class="ident" id="7012217">t</span><span class="op" id="7012218">,</span>&nbsp;<span class="ident" id="7012220">samples</span><span class="op" id="7012227">,</span>&nbsp;<span class="num" id="7012229">7</span><span class="op" id="7012230">,</span>&nbsp;<span class="ident" id="7012232">expected</span><span class="op" id="7012240">)</span><br>
<span class="lineno">180</span><span class="op" id="7012242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7012245">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7012262">func</span>&nbsp;<span class="ident" id="7012267">TestStandardExponentialValues</span><span class="op" id="7012296">(</span><span class="ident" id="7012297">t</span>&nbsp;<span class="op" id="7012299">*</span><span class="ident" id="7012300">testing</span><span class="op" id="7012307">.</span><span class="ident" id="7012308">T</span><span class="op" id="7012309">)</span>&nbsp;<span class="op" id="7012311">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012314">for</span>&nbsp;<span class="ident" id="7012318">_</span><span class="op" id="7012319">,</span>&nbsp;<span class="ident" id="7012321">seed</span>&nbsp;<span class="op" id="7012326">:=</span>&nbsp;<span class="keyword" id="7012329">range</span>&nbsp;<span class="ident" id="7012335">testSeeds</span>&nbsp;<span class="op" id="7012345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012349">testExponentialDistribution</span><span class="op" id="7012376">(</span><span class="ident" id="7012377">t</span><span class="op" id="7012378">,</span>&nbsp;<span class="ident" id="7012380">numTestSamples</span><span class="op" id="7012394">,</span>&nbsp;<span class="num" id="7012396">1</span><span class="op" id="7012397">,</span>&nbsp;<span class="ident" id="7012399">seed</span><span class="op" id="7012403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7012406">}</span><br>
<span class="lineno"></span><span class="op" id="7012408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7012411">func</span>&nbsp;<span class="ident" id="7012416">TestNonStandardExponentialValues</span><span class="op" id="7012448">(</span><span class="ident" id="7012449">t</span>&nbsp;<span class="op" id="7012451">*</span><span class="ident" id="7012452">testing</span><span class="op" id="7012459">.</span><span class="ident" id="7012460">T</span><span class="op" id="7012461">)</span>&nbsp;<span class="op" id="7012463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012466">for</span>&nbsp;<span class="ident" id="7012470">rate</span>&nbsp;<span class="op" id="7012475">:=</span>&nbsp;<span class="num" id="7012478">0.05</span><span class="op" id="7012482">;</span>&nbsp;<span class="ident" id="7012484">rate</span>&nbsp;<span class="op" id="7012489">&lt;</span>&nbsp;<span class="num" id="7012491">10</span><span class="op" id="7012493">;</span>&nbsp;<span class="ident" id="7012495">rate</span>&nbsp;<span class="op" id="7012500">*=</span>&nbsp;<span class="num" id="7012503">2</span>&nbsp;<span class="op" id="7012505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012509">for</span>&nbsp;<span class="ident" id="7012513">_</span><span class="op" id="7012514">,</span>&nbsp;<span class="ident" id="7012516">seed</span>&nbsp;<span class="op" id="7012521">:=</span>&nbsp;<span class="keyword" id="7012524">range</span>&nbsp;<span class="ident" id="7012530">testSeeds</span>&nbsp;<span class="op" id="7012540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012545">testExponentialDistribution</span><span class="op" id="7012572">(</span><span class="ident" id="7012573">t</span><span class="op" id="7012574">,</span>&nbsp;<span class="ident" id="7012576">numTestSamples</span><span class="op" id="7012590">,</span>&nbsp;<span class="ident" id="7012592">rate</span><span class="op" id="7012596">,</span>&nbsp;<span class="ident" id="7012598">seed</span><span class="op" id="7012602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012607">if</span>&nbsp;<span class="ident" id="7012610">testing</span><span class="op" id="7012617">.</span><span class="ident" id="7012618">Short</span><span class="op" id="7012623">(</span><span class="op" id="7012624">)</span>&nbsp;<span class="op" id="7012626">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012632">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7012641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7012645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7012648">}</span><br>
<span class="lineno"></span><span class="op" id="7012650">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7012653">//</span><br>
<span class="lineno"></span><span class="comment" id="7012656">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7012682">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7012686">func</span>&nbsp;<span class="ident" id="7012691">initNorm</span><span class="op" id="7012699">(</span><span class="op" id="7012700">)</span>&nbsp;<span class="op" id="7012702">(</span><span class="ident" id="7012703">testKn</span>&nbsp;<span class="op" id="7012710">[</span><span class="op" id="7012711">]</span><span class="builtintype" id="7012712">uint32</span><span class="op" id="7012718">,</span>&nbsp;<span class="ident" id="7012720">testWn</span><span class="op" id="7012726">,</span>&nbsp;<span class="ident" id="7012728">testFn</span>&nbsp;<span class="op" id="7012735">[</span><span class="op" id="7012736">]</span><span class="builtintype" id="7012737">float32</span><span class="op" id="7012744">)</span>&nbsp;<span class="op" id="7012746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012749">const</span>&nbsp;<span class="ident" id="7012755">m1</span>&nbsp;<span class="op" id="7012758">=</span>&nbsp;<span class="num" id="7012760">1</span>&nbsp;<span class="op" id="7012762">&lt;&lt;</span>&nbsp;<span class="num" id="7012765">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012769">var</span>&nbsp;<span class="op" id="7012773">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012777">dn</span>&nbsp;<span class="builtintype" id="7012780">float64</span>&nbsp;<span class="op" id="7012788">=</span>&nbsp;<span class="ident" id="7012790">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012795">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7012806">=</span>&nbsp;<span class="ident" id="7012808">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012813">vn</span>&nbsp;<span class="builtintype" id="7012816">float64</span>&nbsp;<span class="op" id="7012824">=</span>&nbsp;<span class="num" id="7012826">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7012847">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012851">testKn</span>&nbsp;<span class="op" id="7012858">=</span>&nbsp;<span class="builtinfunc" id="7012860">make</span><span class="op" id="7012864">(</span><span class="op" id="7012865">[</span><span class="op" id="7012866">]</span><span class="builtintype" id="7012867">uint32</span><span class="op" id="7012873">,</span>&nbsp;<span class="num" id="7012875">128</span><span class="op" id="7012878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012881">testWn</span>&nbsp;<span class="op" id="7012888">=</span>&nbsp;<span class="builtinfunc" id="7012890">make</span><span class="op" id="7012894">(</span><span class="op" id="7012895">[</span><span class="op" id="7012896">]</span><span class="builtintype" id="7012897">float32</span><span class="op" id="7012904">,</span>&nbsp;<span class="num" id="7012906">128</span><span class="op" id="7012909">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012912">testFn</span>&nbsp;<span class="op" id="7012919">=</span>&nbsp;<span class="builtinfunc" id="7012921">make</span><span class="op" id="7012925">(</span><span class="op" id="7012926">[</span><span class="op" id="7012927">]</span><span class="builtintype" id="7012928">float32</span><span class="op" id="7012935">,</span>&nbsp;<span class="num" id="7012937">128</span><span class="op" id="7012940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012944">q</span>&nbsp;<span class="op" id="7012946">:=</span>&nbsp;<span class="ident" id="7012949">vn</span>&nbsp;<span class="op" id="7012952">/</span>&nbsp;<span class="ident" id="7012954">math</span><span class="op" id="7012958">.</span><span class="ident" id="7012959">Exp</span><span class="op" id="7012962">(</span><span class="op" id="7012963">-</span><span class="num" id="7012964">0.5</span><span class="op" id="7012967">*</span><span class="ident" id="7012968">dn</span><span class="op" id="7012970">*</span><span class="ident" id="7012971">dn</span><span class="op" id="7012973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012976">testKn</span><span class="op" id="7012982">[</span><span class="num" id="7012983">0</span><span class="op" id="7012984">]</span>&nbsp;<span class="op" id="7012986">=</span>&nbsp;<span class="builtintype" id="7012988">uint32</span><span class="op" id="7012994">(</span><span class="op" id="7012995">(</span><span class="ident" id="7012996">dn</span>&nbsp;<span class="op" id="7012999">/</span>&nbsp;<span class="ident" id="7013001">q</span><span class="op" id="7013002">)</span>&nbsp;<span class="op" id="7013004">*</span>&nbsp;<span class="ident" id="7013006">m1</span><span class="op" id="7013008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013011">testKn</span><span class="op" id="7013017">[</span><span class="num" id="7013018">1</span><span class="op" id="7013019">]</span>&nbsp;<span class="op" id="7013021">=</span>&nbsp;<span class="num" id="7013023">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013026">testWn</span><span class="op" id="7013032">[</span><span class="num" id="7013033">0</span><span class="op" id="7013034">]</span>&nbsp;<span class="op" id="7013036">=</span>&nbsp;<span class="builtintype" id="7013038">float32</span><span class="op" id="7013045">(</span><span class="ident" id="7013046">q</span>&nbsp;<span class="op" id="7013048">/</span>&nbsp;<span class="ident" id="7013050">m1</span><span class="op" id="7013052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013055">testWn</span><span class="op" id="7013061">[</span><span class="num" id="7013062">127</span><span class="op" id="7013065">]</span>&nbsp;<span class="op" id="7013067">=</span>&nbsp;<span class="builtintype" id="7013069">float32</span><span class="op" id="7013076">(</span><span class="ident" id="7013077">dn</span>&nbsp;<span class="op" id="7013080">/</span>&nbsp;<span class="ident" id="7013082">m1</span><span class="op" id="7013084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013087">testFn</span><span class="op" id="7013093">[</span><span class="num" id="7013094">0</span><span class="op" id="7013095">]</span>&nbsp;<span class="op" id="7013097">=</span>&nbsp;<span class="num" id="7013099">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013104">testFn</span><span class="op" id="7013110">[</span><span class="num" id="7013111">127</span><span class="op" id="7013114">]</span>&nbsp;<span class="op" id="7013116">=</span>&nbsp;<span class="builtintype" id="7013118">float32</span><span class="op" id="7013125">(</span><span class="ident" id="7013126">math</span><span class="op" id="7013130">.</span><span class="ident" id="7013131">Exp</span><span class="op" id="7013134">(</span><span class="op" id="7013135">-</span><span class="num" id="7013136">0.5</span>&nbsp;<span class="op" id="7013140">*</span>&nbsp;<span class="ident" id="7013142">dn</span>&nbsp;<span class="op" id="7013145">*</span>&nbsp;<span class="ident" id="7013147">dn</span><span class="op" id="7013149">)</span><span class="op" id="7013150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013153">for</span>&nbsp;<span class="ident" id="7013157">i</span>&nbsp;<span class="op" id="7013159">:=</span>&nbsp;<span class="num" id="7013162">126</span><span class="op" id="7013165">;</span>&nbsp;<span class="ident" id="7013167">i</span>&nbsp;<span class="op" id="7013169">&gt;=</span>&nbsp;<span class="num" id="7013172">1</span><span class="op" id="7013173">;</span>&nbsp;<span class="ident" id="7013175">i</span><span class="op" id="7013176">--</span>&nbsp;<span class="op" id="7013179">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013183">dn</span>&nbsp;<span class="op" id="7013186">=</span>&nbsp;<span class="ident" id="7013188">math</span><span class="op" id="7013192">.</span><span class="ident" id="7013193">Sqrt</span><span class="op" id="7013197">(</span><span class="op" id="7013198">-</span><span class="num" id="7013199">2.0</span>&nbsp;<span class="op" id="7013203">*</span>&nbsp;<span class="ident" id="7013205">math</span><span class="op" id="7013209">.</span><span class="ident" id="7013210">Log</span><span class="op" id="7013213">(</span><span class="ident" id="7013214">vn</span><span class="op" id="7013216">/</span><span class="ident" id="7013217">dn</span><span class="op" id="7013219">+</span><span class="ident" id="7013220">math</span><span class="op" id="7013224">.</span><span class="ident" id="7013225">Exp</span><span class="op" id="7013228">(</span><span class="op" id="7013229">-</span><span class="num" id="7013230">0.5</span><span class="op" id="7013233">*</span><span class="ident" id="7013234">dn</span><span class="op" id="7013236">*</span><span class="ident" id="7013237">dn</span><span class="op" id="7013239">)</span><span class="op" id="7013240">)</span><span class="op" id="7013241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013245">testKn</span><span class="op" id="7013251">[</span><span class="ident" id="7013252">i</span><span class="op" id="7013253">+</span><span class="num" id="7013254">1</span><span class="op" id="7013255">]</span>&nbsp;<span class="op" id="7013257">=</span>&nbsp;<span class="builtintype" id="7013259">uint32</span><span class="op" id="7013265">(</span><span class="op" id="7013266">(</span><span class="ident" id="7013267">dn</span>&nbsp;<span class="op" id="7013270">/</span>&nbsp;<span class="ident" id="7013272">tn</span><span class="op" id="7013274">)</span>&nbsp;<span class="op" id="7013276">*</span>&nbsp;<span class="ident" id="7013278">m1</span><span class="op" id="7013280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013284">tn</span>&nbsp;<span class="op" id="7013287">=</span>&nbsp;<span class="ident" id="7013289">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013294">testFn</span><span class="op" id="7013300">[</span><span class="ident" id="7013301">i</span><span class="op" id="7013302">]</span>&nbsp;<span class="op" id="7013304">=</span>&nbsp;<span class="builtintype" id="7013306">float32</span><span class="op" id="7013313">(</span><span class="ident" id="7013314">math</span><span class="op" id="7013318">.</span><span class="ident" id="7013319">Exp</span><span class="op" id="7013322">(</span><span class="op" id="7013323">-</span><span class="num" id="7013324">0.5</span>&nbsp;<span class="op" id="7013328">*</span>&nbsp;<span class="ident" id="7013330">dn</span>&nbsp;<span class="op" id="7013333">*</span>&nbsp;<span class="ident" id="7013335">dn</span><span class="op" id="7013337">)</span><span class="op" id="7013338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013342">testWn</span><span class="op" id="7013348">[</span><span class="ident" id="7013349">i</span><span class="op" id="7013350">]</span>&nbsp;<span class="op" id="7013352">=</span>&nbsp;<span class="builtintype" id="7013354">float32</span><span class="op" id="7013361">(</span><span class="ident" id="7013362">dn</span>&nbsp;<span class="op" id="7013365">/</span>&nbsp;<span class="ident" id="7013367">m1</span><span class="op" id="7013369">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013375">return</span><br>
<span class="lineno"></span><span class="op" id="7013382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7013385">func</span>&nbsp;<span class="ident" id="7013390">initExp</span><span class="op" id="7013397">(</span><span class="op" id="7013398">)</span>&nbsp;<span class="op" id="7013400">(</span><span class="ident" id="7013401">testKe</span>&nbsp;<span class="op" id="7013408">[</span><span class="op" id="7013409">]</span><span class="builtintype" id="7013410">uint32</span><span class="op" id="7013416">,</span>&nbsp;<span class="ident" id="7013418">testWe</span><span class="op" id="7013424">,</span>&nbsp;<span class="ident" id="7013426">testFe</span>&nbsp;<span class="op" id="7013433">[</span><span class="op" id="7013434">]</span><span class="builtintype" id="7013435">float32</span><span class="op" id="7013442">)</span>&nbsp;<span class="op" id="7013444">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013447">const</span>&nbsp;<span class="ident" id="7013453">m2</span>&nbsp;<span class="op" id="7013456">=</span>&nbsp;<span class="num" id="7013458">1</span>&nbsp;<span class="op" id="7013460">&lt;&lt;</span>&nbsp;<span class="num" id="7013463">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013467">var</span>&nbsp;<span class="op" id="7013471">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013475">de</span>&nbsp;<span class="builtintype" id="7013478">float64</span>&nbsp;<span class="op" id="7013486">=</span>&nbsp;<span class="ident" id="7013488">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013493">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7013504">=</span>&nbsp;<span class="ident" id="7013506">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013511">ve</span>&nbsp;<span class="builtintype" id="7013514">float64</span>&nbsp;<span class="op" id="7013522">=</span>&nbsp;<span class="num" id="7013524">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013550">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013554">testKe</span>&nbsp;<span class="op" id="7013561">=</span>&nbsp;<span class="builtinfunc" id="7013563">make</span><span class="op" id="7013567">(</span><span class="op" id="7013568">[</span><span class="op" id="7013569">]</span><span class="builtintype" id="7013570">uint32</span><span class="op" id="7013576">,</span>&nbsp;<span class="num" id="7013578">256</span><span class="op" id="7013581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013584">testWe</span>&nbsp;<span class="op" id="7013591">=</span>&nbsp;<span class="builtinfunc" id="7013593">make</span><span class="op" id="7013597">(</span><span class="op" id="7013598">[</span><span class="op" id="7013599">]</span><span class="builtintype" id="7013600">float32</span><span class="op" id="7013607">,</span>&nbsp;<span class="num" id="7013609">256</span><span class="op" id="7013612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013615">testFe</span>&nbsp;<span class="op" id="7013622">=</span>&nbsp;<span class="builtinfunc" id="7013624">make</span><span class="op" id="7013628">(</span><span class="op" id="7013629">[</span><span class="op" id="7013630">]</span><span class="builtintype" id="7013631">float32</span><span class="op" id="7013638">,</span>&nbsp;<span class="num" id="7013640">256</span><span class="op" id="7013643">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013647">q</span>&nbsp;<span class="op" id="7013649">:=</span>&nbsp;<span class="ident" id="7013652">ve</span>&nbsp;<span class="op" id="7013655">/</span>&nbsp;<span class="ident" id="7013657">math</span><span class="op" id="7013661">.</span><span class="ident" id="7013662">Exp</span><span class="op" id="7013665">(</span><span class="op" id="7013666">-</span><span class="ident" id="7013667">de</span><span class="op" id="7013669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013672">testKe</span><span class="op" id="7013678">[</span><span class="num" id="7013679">0</span><span class="op" id="7013680">]</span>&nbsp;<span class="op" id="7013682">=</span>&nbsp;<span class="builtintype" id="7013684">uint32</span><span class="op" id="7013690">(</span><span class="op" id="7013691">(</span><span class="ident" id="7013692">de</span>&nbsp;<span class="op" id="7013695">/</span>&nbsp;<span class="ident" id="7013697">q</span><span class="op" id="7013698">)</span>&nbsp;<span class="op" id="7013700">*</span>&nbsp;<span class="ident" id="7013702">m2</span><span class="op" id="7013704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013707">testKe</span><span class="op" id="7013713">[</span><span class="num" id="7013714">1</span><span class="op" id="7013715">]</span>&nbsp;<span class="op" id="7013717">=</span>&nbsp;<span class="num" id="7013719">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013722">testWe</span><span class="op" id="7013728">[</span><span class="num" id="7013729">0</span><span class="op" id="7013730">]</span>&nbsp;<span class="op" id="7013732">=</span>&nbsp;<span class="builtintype" id="7013734">float32</span><span class="op" id="7013741">(</span><span class="ident" id="7013742">q</span>&nbsp;<span class="op" id="7013744">/</span>&nbsp;<span class="ident" id="7013746">m2</span><span class="op" id="7013748">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013751">testWe</span><span class="op" id="7013757">[</span><span class="num" id="7013758">255</span><span class="op" id="7013761">]</span>&nbsp;<span class="op" id="7013763">=</span>&nbsp;<span class="builtintype" id="7013765">float32</span><span class="op" id="7013772">(</span><span class="ident" id="7013773">de</span>&nbsp;<span class="op" id="7013776">/</span>&nbsp;<span class="ident" id="7013778">m2</span><span class="op" id="7013780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013783">testFe</span><span class="op" id="7013789">[</span><span class="num" id="7013790">0</span><span class="op" id="7013791">]</span>&nbsp;<span class="op" id="7013793">=</span>&nbsp;<span class="num" id="7013795">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013800">testFe</span><span class="op" id="7013806">[</span><span class="num" id="7013807">255</span><span class="op" id="7013810">]</span>&nbsp;<span class="op" id="7013812">=</span>&nbsp;<span class="builtintype" id="7013814">float32</span><span class="op" id="7013821">(</span><span class="ident" id="7013822">math</span><span class="op" id="7013826">.</span><span class="ident" id="7013827">Exp</span><span class="op" id="7013830">(</span><span class="op" id="7013831">-</span><span class="ident" id="7013832">de</span><span class="op" id="7013834">)</span><span class="op" id="7013835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013838">for</span>&nbsp;<span class="ident" id="7013842">i</span>&nbsp;<span class="op" id="7013844">:=</span>&nbsp;<span class="num" id="7013847">254</span><span class="op" id="7013850">;</span>&nbsp;<span class="ident" id="7013852">i</span>&nbsp;<span class="op" id="7013854">&gt;=</span>&nbsp;<span class="num" id="7013857">1</span><span class="op" id="7013858">;</span>&nbsp;<span class="ident" id="7013860">i</span><span class="op" id="7013861">--</span>&nbsp;<span class="op" id="7013864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013868">de</span>&nbsp;<span class="op" id="7013871">=</span>&nbsp;<span class="op" id="7013873">-</span><span class="ident" id="7013874">math</span><span class="op" id="7013878">.</span><span class="ident" id="7013879">Log</span><span class="op" id="7013882">(</span><span class="ident" id="7013883">ve</span><span class="op" id="7013885">/</span><span class="ident" id="7013886">de</span>&nbsp;<span class="op" id="7013889">+</span>&nbsp;<span class="ident" id="7013891">math</span><span class="op" id="7013895">.</span><span class="ident" id="7013896">Exp</span><span class="op" id="7013899">(</span><span class="op" id="7013900">-</span><span class="ident" id="7013901">de</span><span class="op" id="7013903">)</span><span class="op" id="7013904">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013908">testKe</span><span class="op" id="7013914">[</span><span class="ident" id="7013915">i</span><span class="op" id="7013916">+</span><span class="num" id="7013917">1</span><span class="op" id="7013918">]</span>&nbsp;<span class="op" id="7013920">=</span>&nbsp;<span class="builtintype" id="7013922">uint32</span><span class="op" id="7013928">(</span><span class="op" id="7013929">(</span><span class="ident" id="7013930">de</span>&nbsp;<span class="op" id="7013933">/</span>&nbsp;<span class="ident" id="7013935">te</span><span class="op" id="7013937">)</span>&nbsp;<span class="op" id="7013939">*</span>&nbsp;<span class="ident" id="7013941">m2</span><span class="op" id="7013943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013947">te</span>&nbsp;<span class="op" id="7013950">=</span>&nbsp;<span class="ident" id="7013952">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013957">testFe</span><span class="op" id="7013963">[</span><span class="ident" id="7013964">i</span><span class="op" id="7013965">]</span>&nbsp;<span class="op" id="7013967">=</span>&nbsp;<span class="builtintype" id="7013969">float32</span><span class="op" id="7013976">(</span><span class="ident" id="7013977">math</span><span class="op" id="7013981">.</span><span class="ident" id="7013982">Exp</span><span class="op" id="7013985">(</span><span class="op" id="7013986">-</span><span class="ident" id="7013987">de</span><span class="op" id="7013989">)</span><span class="op" id="7013990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013994">testWe</span><span class="op" id="7014000">[</span><span class="ident" id="7014001">i</span><span class="op" id="7014002">]</span>&nbsp;<span class="op" id="7014004">=</span>&nbsp;<span class="builtintype" id="7014006">float32</span><span class="op" id="7014013">(</span><span class="ident" id="7014014">de</span>&nbsp;<span class="op" id="7014017">/</span>&nbsp;<span class="ident" id="7014019">m2</span><span class="op" id="7014021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014024">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014027">return</span><br>
<span class="lineno"></span><span class="op" id="7014034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7014037">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7014105">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7014169">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7014187">func</span>&nbsp;<span class="ident" id="7014192">compareUint32Slices</span><span class="op" id="7014211">(</span><span class="ident" id="7014212">s1</span><span class="op" id="7014214">,</span>&nbsp;<span class="ident" id="7014216">s2</span>&nbsp;<span class="op" id="7014219">[</span><span class="op" id="7014220">]</span><span class="builtintype" id="7014221">uint32</span><span class="op" id="7014227">)</span>&nbsp;<span class="builtintype" id="7014229">int</span>&nbsp;<span class="op" id="7014233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014236">if</span>&nbsp;<span class="builtinfunc" id="7014239">len</span><span class="op" id="7014242">(</span><span class="ident" id="7014243">s1</span><span class="op" id="7014245">)</span>&nbsp;<span class="op" id="7014247">!=</span>&nbsp;<span class="builtinfunc" id="7014250">len</span><span class="op" id="7014253">(</span><span class="ident" id="7014254">s2</span><span class="op" id="7014256">)</span>&nbsp;<span class="op" id="7014258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014262">if</span>&nbsp;<span class="builtinfunc" id="7014265">len</span><span class="op" id="7014268">(</span><span class="ident" id="7014269">s1</span><span class="op" id="7014271">)</span>&nbsp;<span class="op" id="7014273">&gt;</span>&nbsp;<span class="builtinfunc" id="7014275">len</span><span class="op" id="7014278">(</span><span class="ident" id="7014279">s2</span><span class="op" id="7014281">)</span>&nbsp;<span class="op" id="7014283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014288">return</span>&nbsp;<span class="builtinfunc" id="7014295">len</span><span class="op" id="7014298">(</span><span class="ident" id="7014299">s2</span><span class="op" id="7014301">)</span>&nbsp;<span class="op" id="7014303">+</span>&nbsp;<span class="num" id="7014305">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014313">return</span>&nbsp;<span class="builtinfunc" id="7014320">len</span><span class="op" id="7014323">(</span><span class="ident" id="7014324">s1</span><span class="op" id="7014326">)</span>&nbsp;<span class="op" id="7014328">+</span>&nbsp;<span class="num" id="7014330">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014336">for</span>&nbsp;<span class="ident" id="7014340">i</span>&nbsp;<span class="op" id="7014342">:=</span>&nbsp;<span class="keyword" id="7014345">range</span>&nbsp;<span class="ident" id="7014351">s1</span>&nbsp;<span class="op" id="7014354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014358">if</span>&nbsp;<span class="ident" id="7014361">s1</span><span class="op" id="7014363">[</span><span class="ident" id="7014364">i</span><span class="op" id="7014365">]</span>&nbsp;<span class="op" id="7014367">!=</span>&nbsp;<span class="ident" id="7014370">s2</span><span class="op" id="7014372">[</span><span class="ident" id="7014373">i</span><span class="op" id="7014374">]</span>&nbsp;<span class="op" id="7014376">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014381">return</span>&nbsp;<span class="ident" id="7014388">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014398">return</span>&nbsp;<span class="op" id="7014405">-</span><span class="num" id="7014406">1</span><br>
<span class="lineno"></span><span class="op" id="7014408">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7014411">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7014480">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7014544">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7014562">func</span>&nbsp;<span class="ident" id="7014567">compareFloat32Slices</span><span class="op" id="7014587">(</span><span class="ident" id="7014588">s1</span><span class="op" id="7014590">,</span>&nbsp;<span class="ident" id="7014592">s2</span>&nbsp;<span class="op" id="7014595">[</span><span class="op" id="7014596">]</span><span class="builtintype" id="7014597">float32</span><span class="op" id="7014604">)</span>&nbsp;<span class="builtintype" id="7014606">int</span>&nbsp;<span class="op" id="7014610">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014613">if</span>&nbsp;<span class="builtinfunc" id="7014616">len</span><span class="op" id="7014619">(</span><span class="ident" id="7014620">s1</span><span class="op" id="7014622">)</span>&nbsp;<span class="op" id="7014624">!=</span>&nbsp;<span class="builtinfunc" id="7014627">len</span><span class="op" id="7014630">(</span><span class="ident" id="7014631">s2</span><span class="op" id="7014633">)</span>&nbsp;<span class="op" id="7014635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014639">if</span>&nbsp;<span class="builtinfunc" id="7014642">len</span><span class="op" id="7014645">(</span><span class="ident" id="7014646">s1</span><span class="op" id="7014648">)</span>&nbsp;<span class="op" id="7014650">&gt;</span>&nbsp;<span class="builtinfunc" id="7014652">len</span><span class="op" id="7014655">(</span><span class="ident" id="7014656">s2</span><span class="op" id="7014658">)</span>&nbsp;<span class="op" id="7014660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014665">return</span>&nbsp;<span class="builtinfunc" id="7014672">len</span><span class="op" id="7014675">(</span><span class="ident" id="7014676">s2</span><span class="op" id="7014678">)</span>&nbsp;<span class="op" id="7014680">+</span>&nbsp;<span class="num" id="7014682">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014690">return</span>&nbsp;<span class="builtinfunc" id="7014697">len</span><span class="op" id="7014700">(</span><span class="ident" id="7014701">s1</span><span class="op" id="7014703">)</span>&nbsp;<span class="op" id="7014705">+</span>&nbsp;<span class="num" id="7014707">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014713">for</span>&nbsp;<span class="ident" id="7014717">i</span>&nbsp;<span class="op" id="7014719">:=</span>&nbsp;<span class="keyword" id="7014722">range</span>&nbsp;<span class="ident" id="7014728">s1</span>&nbsp;<span class="op" id="7014731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014735">if</span>&nbsp;<span class="op" id="7014738">!</span><span class="ident" id="7014739">nearEqual</span><span class="op" id="7014748">(</span><span class="builtintype" id="7014749">float64</span><span class="op" id="7014756">(</span><span class="ident" id="7014757">s1</span><span class="op" id="7014759">[</span><span class="ident" id="7014760">i</span><span class="op" id="7014761">]</span><span class="op" id="7014762">)</span><span class="op" id="7014763">,</span>&nbsp;<span class="builtintype" id="7014765">float64</span><span class="op" id="7014772">(</span><span class="ident" id="7014773">s2</span><span class="op" id="7014775">[</span><span class="ident" id="7014776">i</span><span class="op" id="7014777">]</span><span class="op" id="7014778">)</span><span class="op" id="7014779">,</span>&nbsp;<span class="num" id="7014781">0</span><span class="op" id="7014782">,</span>&nbsp;<span class="num" id="7014784">1e-7</span><span class="op" id="7014788">)</span>&nbsp;<span class="op" id="7014790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014795">return</span>&nbsp;<span class="ident" id="7014802">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014806">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7014809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014812">return</span>&nbsp;<span class="op" id="7014819">-</span><span class="num" id="7014820">1</span><br>
<span class="lineno"></span><span class="op" id="7014822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7014825">func</span>&nbsp;<span class="ident" id="7014830">TestNormTables</span><span class="op" id="7014844">(</span><span class="ident" id="7014845">t</span>&nbsp;<span class="op" id="7014847">*</span><span class="ident" id="7014848">testing</span><span class="op" id="7014855">.</span><span class="ident" id="7014856">T</span><span class="op" id="7014857">)</span>&nbsp;<span class="op" id="7014859">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7014862">testKn</span><span class="op" id="7014868">,</span>&nbsp;<span class="ident" id="7014870">testWn</span><span class="op" id="7014876">,</span>&nbsp;<span class="ident" id="7014878">testFn</span>&nbsp;<span class="op" id="7014885">:=</span>&nbsp;<span class="ident" id="7014888">initNorm</span><span class="op" id="7014896">(</span><span class="op" id="7014897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7014900">if</span>&nbsp;<span class="ident" id="7014903">i</span>&nbsp;<span class="op" id="7014905">:=</span>&nbsp;<span class="ident" id="7014908">compareUint32Slices</span><span class="op" id="7014927">(</span><span class="ident" id="7014928">kn</span><span class="op" id="7014930">[</span><span class="num" id="7014931">0</span><span class="op" id="7014932">:</span><span class="op" id="7014933">]</span><span class="op" id="7014934">,</span>&nbsp;<span class="ident" id="7014936">testKn</span><span class="op" id="7014942">)</span><span class="op" id="7014943">;</span>&nbsp;<span class="ident" id="7014945">i</span>&nbsp;<span class="op" id="7014947">&gt;=</span>&nbsp;<span class="num" id="7014950">0</span>&nbsp;<span class="op" id="7014952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7014956">t</span><span class="op" id="7014957">.</span><span class="ident" id="7014958">Errorf</span><span class="op" id="7014964">(</span><span class="string" id="7014965">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7015001">,</span>&nbsp;<span class="ident" id="7015003">i</span><span class="op" id="7015004">,</span>&nbsp;<span class="ident" id="7015006">kn</span><span class="op" id="7015008">[</span><span class="ident" id="7015009">i</span><span class="op" id="7015010">]</span><span class="op" id="7015011">,</span>&nbsp;<span class="ident" id="7015013">testKn</span><span class="op" id="7015019">[</span><span class="ident" id="7015020">i</span><span class="op" id="7015021">]</span><span class="op" id="7015022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015028">if</span>&nbsp;<span class="ident" id="7015031">i</span>&nbsp;<span class="op" id="7015033">:=</span>&nbsp;<span class="ident" id="7015036">compareFloat32Slices</span><span class="op" id="7015056">(</span><span class="ident" id="7015057">wn</span><span class="op" id="7015059">[</span><span class="num" id="7015060">0</span><span class="op" id="7015061">:</span><span class="op" id="7015062">]</span><span class="op" id="7015063">,</span>&nbsp;<span class="ident" id="7015065">testWn</span><span class="op" id="7015071">)</span><span class="op" id="7015072">;</span>&nbsp;<span class="ident" id="7015074">i</span>&nbsp;<span class="op" id="7015076">&gt;=</span>&nbsp;<span class="num" id="7015079">0</span>&nbsp;<span class="op" id="7015081">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015085">t</span><span class="op" id="7015086">.</span><span class="ident" id="7015087">Errorf</span><span class="op" id="7015093">(</span><span class="string" id="7015094">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7015130">,</span>&nbsp;<span class="ident" id="7015132">i</span><span class="op" id="7015133">,</span>&nbsp;<span class="ident" id="7015135">wn</span><span class="op" id="7015137">[</span><span class="ident" id="7015138">i</span><span class="op" id="7015139">]</span><span class="op" id="7015140">,</span>&nbsp;<span class="ident" id="7015142">testWn</span><span class="op" id="7015148">[</span><span class="ident" id="7015149">i</span><span class="op" id="7015150">]</span><span class="op" id="7015151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015157">if</span>&nbsp;<span class="ident" id="7015160">i</span>&nbsp;<span class="op" id="7015162">:=</span>&nbsp;<span class="ident" id="7015165">compareFloat32Slices</span><span class="op" id="7015185">(</span><span class="ident" id="7015186">fn</span><span class="op" id="7015188">[</span><span class="num" id="7015189">0</span><span class="op" id="7015190">:</span><span class="op" id="7015191">]</span><span class="op" id="7015192">,</span>&nbsp;<span class="ident" id="7015194">testFn</span><span class="op" id="7015200">)</span><span class="op" id="7015201">;</span>&nbsp;<span class="ident" id="7015203">i</span>&nbsp;<span class="op" id="7015205">&gt;=</span>&nbsp;<span class="num" id="7015208">0</span>&nbsp;<span class="op" id="7015210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015214">t</span><span class="op" id="7015215">.</span><span class="ident" id="7015216">Errorf</span><span class="op" id="7015222">(</span><span class="string" id="7015223">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7015259">,</span>&nbsp;<span class="ident" id="7015261">i</span><span class="op" id="7015262">,</span>&nbsp;<span class="ident" id="7015264">fn</span><span class="op" id="7015266">[</span><span class="ident" id="7015267">i</span><span class="op" id="7015268">]</span><span class="op" id="7015269">,</span>&nbsp;<span class="ident" id="7015271">testFn</span><span class="op" id="7015277">[</span><span class="ident" id="7015278">i</span><span class="op" id="7015279">]</span><span class="op" id="7015280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015283">}</span><br>
<span class="lineno">310</span><span class="op" id="7015285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7015288">func</span>&nbsp;<span class="ident" id="7015293">TestExpTables</span><span class="op" id="7015306">(</span><span class="ident" id="7015307">t</span>&nbsp;<span class="op" id="7015309">*</span><span class="ident" id="7015310">testing</span><span class="op" id="7015317">.</span><span class="ident" id="7015318">T</span><span class="op" id="7015319">)</span>&nbsp;<span class="op" id="7015321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015324">testKe</span><span class="op" id="7015330">,</span>&nbsp;<span class="ident" id="7015332">testWe</span><span class="op" id="7015338">,</span>&nbsp;<span class="ident" id="7015340">testFe</span>&nbsp;<span class="op" id="7015347">:=</span>&nbsp;<span class="ident" id="7015350">initExp</span><span class="op" id="7015357">(</span><span class="op" id="7015358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015361">if</span>&nbsp;<span class="ident" id="7015364">i</span>&nbsp;<span class="op" id="7015366">:=</span>&nbsp;<span class="ident" id="7015369">compareUint32Slices</span><span class="op" id="7015388">(</span><span class="ident" id="7015389">ke</span><span class="op" id="7015391">[</span><span class="num" id="7015392">0</span><span class="op" id="7015393">:</span><span class="op" id="7015394">]</span><span class="op" id="7015395">,</span>&nbsp;<span class="ident" id="7015397">testKe</span><span class="op" id="7015403">)</span><span class="op" id="7015404">;</span>&nbsp;<span class="ident" id="7015406">i</span>&nbsp;<span class="op" id="7015408">&gt;=</span>&nbsp;<span class="num" id="7015411">0</span>&nbsp;<span class="op" id="7015413">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015417">t</span><span class="op" id="7015418">.</span><span class="ident" id="7015419">Errorf</span><span class="op" id="7015425">(</span><span class="string" id="7015426">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7015462">,</span>&nbsp;<span class="ident" id="7015464">i</span><span class="op" id="7015465">,</span>&nbsp;<span class="ident" id="7015467">ke</span><span class="op" id="7015469">[</span><span class="ident" id="7015470">i</span><span class="op" id="7015471">]</span><span class="op" id="7015472">,</span>&nbsp;<span class="ident" id="7015474">testKe</span><span class="op" id="7015480">[</span><span class="ident" id="7015481">i</span><span class="op" id="7015482">]</span><span class="op" id="7015483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015489">if</span>&nbsp;<span class="ident" id="7015492">i</span>&nbsp;<span class="op" id="7015494">:=</span>&nbsp;<span class="ident" id="7015497">compareFloat32Slices</span><span class="op" id="7015517">(</span><span class="ident" id="7015518">we</span><span class="op" id="7015520">[</span><span class="num" id="7015521">0</span><span class="op" id="7015522">:</span><span class="op" id="7015523">]</span><span class="op" id="7015524">,</span>&nbsp;<span class="ident" id="7015526">testWe</span><span class="op" id="7015532">)</span><span class="op" id="7015533">;</span>&nbsp;<span class="ident" id="7015535">i</span>&nbsp;<span class="op" id="7015537">&gt;=</span>&nbsp;<span class="num" id="7015540">0</span>&nbsp;<span class="op" id="7015542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015546">t</span><span class="op" id="7015547">.</span><span class="ident" id="7015548">Errorf</span><span class="op" id="7015554">(</span><span class="string" id="7015555">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7015591">,</span>&nbsp;<span class="ident" id="7015593">i</span><span class="op" id="7015594">,</span>&nbsp;<span class="ident" id="7015596">we</span><span class="op" id="7015598">[</span><span class="ident" id="7015599">i</span><span class="op" id="7015600">]</span><span class="op" id="7015601">,</span>&nbsp;<span class="ident" id="7015603">testWe</span><span class="op" id="7015609">[</span><span class="ident" id="7015610">i</span><span class="op" id="7015611">]</span><span class="op" id="7015612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015615">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015618">if</span>&nbsp;<span class="ident" id="7015621">i</span>&nbsp;<span class="op" id="7015623">:=</span>&nbsp;<span class="ident" id="7015626">compareFloat32Slices</span><span class="op" id="7015646">(</span><span class="ident" id="7015647">fe</span><span class="op" id="7015649">[</span><span class="num" id="7015650">0</span><span class="op" id="7015651">:</span><span class="op" id="7015652">]</span><span class="op" id="7015653">,</span>&nbsp;<span class="ident" id="7015655">testFe</span><span class="op" id="7015661">)</span><span class="op" id="7015662">;</span>&nbsp;<span class="ident" id="7015664">i</span>&nbsp;<span class="op" id="7015666">&gt;=</span>&nbsp;<span class="num" id="7015669">0</span>&nbsp;<span class="op" id="7015671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015675">t</span><span class="op" id="7015676">.</span><span class="ident" id="7015677">Errorf</span><span class="op" id="7015683">(</span><span class="string" id="7015684">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7015720">,</span>&nbsp;<span class="ident" id="7015722">i</span><span class="op" id="7015723">,</span>&nbsp;<span class="ident" id="7015725">fe</span><span class="op" id="7015727">[</span><span class="ident" id="7015728">i</span><span class="op" id="7015729">]</span><span class="op" id="7015730">,</span>&nbsp;<span class="ident" id="7015732">testFe</span><span class="op" id="7015738">[</span><span class="ident" id="7015739">i</span><span class="op" id="7015740">]</span><span class="op" id="7015741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7015744">}</span><br>
<span class="lineno"></span><span class="op" id="7015746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7015749">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7015821">func</span>&nbsp;<span class="ident" id="7015826">TestFloat32</span><span class="op" id="7015837">(</span><span class="ident" id="7015838">t</span>&nbsp;<span class="op" id="7015840">*</span><span class="ident" id="7015841">testing</span><span class="op" id="7015848">.</span><span class="ident" id="7015849">T</span><span class="op" id="7015850">)</span>&nbsp;<span class="op" id="7015852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015855">r</span>&nbsp;<span class="op" id="7015857">:=</span>&nbsp;<span class="ident" id="7015860">New</span><span class="op" id="7015863">(</span><span class="ident" id="7015864">NewSource</span><span class="op" id="7015873">(</span><span class="num" id="7015874">1</span><span class="op" id="7015875">)</span><span class="op" id="7015876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015879">for</span>&nbsp;<span class="ident" id="7015883">ct</span>&nbsp;<span class="op" id="7015886">:=</span>&nbsp;<span class="num" id="7015889">0</span><span class="op" id="7015890">;</span>&nbsp;<span class="ident" id="7015892">ct</span>&nbsp;<span class="op" id="7015895">&lt;</span>&nbsp;<span class="num" id="7015897">10e6</span><span class="op" id="7015901">;</span>&nbsp;<span class="ident" id="7015903">ct</span><span class="op" id="7015905">++</span>&nbsp;<span class="op" id="7015908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015912">f</span>&nbsp;<span class="op" id="7015914">:=</span>&nbsp;<span class="ident" id="7015917">r</span><span class="op" id="7015918">.</span><span class="ident" id="7015919">Float32</span><span class="op" id="7015926">(</span><span class="op" id="7015927">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7015931">if</span>&nbsp;<span class="ident" id="7015934">f</span>&nbsp;<span class="op" id="7015936">&gt;=</span>&nbsp;<span class="num" id="7015939">1</span>&nbsp;<span class="op" id="7015941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7015946">t</span><span class="op" id="7015947">.</span><span class="ident" id="7015948">Fatal</span><span class="op" id="7015953">(</span><span class="string" id="7015954">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7015995">,</span>&nbsp;<span class="ident" id="7015997">ct</span><span class="op" id="7015999">,</span>&nbsp;<span class="string" id="7016001">&#34;f:&#34;</span><span class="op" id="7016005">,</span>&nbsp;<span class="ident" id="7016007">f</span><span class="op" id="7016008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016015">}</span><br>
<span class="lineno"></span><span class="op" id="7016017">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7016020">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016035">func</span>&nbsp;<span class="ident" id="7016040">BenchmarkInt63Threadsafe</span><span class="op" id="7016064">(</span><span class="ident" id="7016065">b</span>&nbsp;<span class="op" id="7016067">*</span><span class="ident" id="7016068">testing</span><span class="op" id="7016075">.</span><span class="ident" id="7016076">B</span><span class="op" id="7016077">)</span>&nbsp;<span class="op" id="7016079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016082">for</span>&nbsp;<span class="ident" id="7016086">n</span>&nbsp;<span class="op" id="7016088">:=</span>&nbsp;<span class="ident" id="7016091">b</span><span class="op" id="7016092">.</span><span class="ident" id="7016093">N</span><span class="op" id="7016094">;</span>&nbsp;<span class="ident" id="7016096">n</span>&nbsp;<span class="op" id="7016098">&gt;</span>&nbsp;<span class="num" id="7016100">0</span><span class="op" id="7016101">;</span>&nbsp;<span class="ident" id="7016103">n</span><span class="op" id="7016104">--</span>&nbsp;<span class="op" id="7016107">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016111">Int63</span><span class="op" id="7016116">(</span><span class="op" id="7016117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016120">}</span><br>
<span class="lineno"></span><span class="op" id="7016122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016125">func</span>&nbsp;<span class="ident" id="7016130">BenchmarkInt63Unthreadsafe</span><span class="op" id="7016156">(</span><span class="ident" id="7016157">b</span>&nbsp;<span class="op" id="7016159">*</span><span class="ident" id="7016160">testing</span><span class="op" id="7016167">.</span><span class="ident" id="7016168">B</span><span class="op" id="7016169">)</span>&nbsp;<span class="op" id="7016171">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016174">r</span>&nbsp;<span class="op" id="7016176">:=</span>&nbsp;<span class="ident" id="7016179">New</span><span class="op" id="7016182">(</span><span class="ident" id="7016183">NewSource</span><span class="op" id="7016192">(</span><span class="num" id="7016193">1</span><span class="op" id="7016194">)</span><span class="op" id="7016195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016198">for</span>&nbsp;<span class="ident" id="7016202">n</span>&nbsp;<span class="op" id="7016204">:=</span>&nbsp;<span class="ident" id="7016207">b</span><span class="op" id="7016208">.</span><span class="ident" id="7016209">N</span><span class="op" id="7016210">;</span>&nbsp;<span class="ident" id="7016212">n</span>&nbsp;<span class="op" id="7016214">&gt;</span>&nbsp;<span class="num" id="7016216">0</span><span class="op" id="7016217">;</span>&nbsp;<span class="ident" id="7016219">n</span><span class="op" id="7016220">--</span>&nbsp;<span class="op" id="7016223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016227">r</span><span class="op" id="7016228">.</span><span class="ident" id="7016229">Int63</span><span class="op" id="7016234">(</span><span class="op" id="7016235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016238">}</span><br>
<span class="lineno"></span><span class="op" id="7016240">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7016243">func</span>&nbsp;<span class="ident" id="7016248">BenchmarkIntn1000</span><span class="op" id="7016265">(</span><span class="ident" id="7016266">b</span>&nbsp;<span class="op" id="7016268">*</span><span class="ident" id="7016269">testing</span><span class="op" id="7016276">.</span><span class="ident" id="7016277">B</span><span class="op" id="7016278">)</span>&nbsp;<span class="op" id="7016280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016283">r</span>&nbsp;<span class="op" id="7016285">:=</span>&nbsp;<span class="ident" id="7016288">New</span><span class="op" id="7016291">(</span><span class="ident" id="7016292">NewSource</span><span class="op" id="7016301">(</span><span class="num" id="7016302">1</span><span class="op" id="7016303">)</span><span class="op" id="7016304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016307">for</span>&nbsp;<span class="ident" id="7016311">n</span>&nbsp;<span class="op" id="7016313">:=</span>&nbsp;<span class="ident" id="7016316">b</span><span class="op" id="7016317">.</span><span class="ident" id="7016318">N</span><span class="op" id="7016319">;</span>&nbsp;<span class="ident" id="7016321">n</span>&nbsp;<span class="op" id="7016323">&gt;</span>&nbsp;<span class="num" id="7016325">0</span><span class="op" id="7016326">;</span>&nbsp;<span class="ident" id="7016328">n</span><span class="op" id="7016329">--</span>&nbsp;<span class="op" id="7016332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016336">r</span><span class="op" id="7016337">.</span><span class="ident" id="7016338">Intn</span><span class="op" id="7016342">(</span><span class="num" id="7016343">1000</span><span class="op" id="7016347">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016350">}</span><br>
<span class="lineno"></span><span class="op" id="7016352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016355">func</span>&nbsp;<span class="ident" id="7016360">BenchmarkInt63n1000</span><span class="op" id="7016379">(</span><span class="ident" id="7016380">b</span>&nbsp;<span class="op" id="7016382">*</span><span class="ident" id="7016383">testing</span><span class="op" id="7016390">.</span><span class="ident" id="7016391">B</span><span class="op" id="7016392">)</span>&nbsp;<span class="op" id="7016394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016397">r</span>&nbsp;<span class="op" id="7016399">:=</span>&nbsp;<span class="ident" id="7016402">New</span><span class="op" id="7016405">(</span><span class="ident" id="7016406">NewSource</span><span class="op" id="7016415">(</span><span class="num" id="7016416">1</span><span class="op" id="7016417">)</span><span class="op" id="7016418">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016421">for</span>&nbsp;<span class="ident" id="7016425">n</span>&nbsp;<span class="op" id="7016427">:=</span>&nbsp;<span class="ident" id="7016430">b</span><span class="op" id="7016431">.</span><span class="ident" id="7016432">N</span><span class="op" id="7016433">;</span>&nbsp;<span class="ident" id="7016435">n</span>&nbsp;<span class="op" id="7016437">&gt;</span>&nbsp;<span class="num" id="7016439">0</span><span class="op" id="7016440">;</span>&nbsp;<span class="ident" id="7016442">n</span><span class="op" id="7016443">--</span>&nbsp;<span class="op" id="7016446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016450">r</span><span class="op" id="7016451">.</span><span class="ident" id="7016452">Int63n</span><span class="op" id="7016458">(</span><span class="num" id="7016459">1000</span><span class="op" id="7016463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016466">}</span><br>
<span class="lineno"></span><span class="op" id="7016468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7016471">func</span>&nbsp;<span class="ident" id="7016476">BenchmarkInt31n1000</span><span class="op" id="7016495">(</span><span class="ident" id="7016496">b</span>&nbsp;<span class="op" id="7016498">*</span><span class="ident" id="7016499">testing</span><span class="op" id="7016506">.</span><span class="ident" id="7016507">B</span><span class="op" id="7016508">)</span>&nbsp;<span class="op" id="7016510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016513">r</span>&nbsp;<span class="op" id="7016515">:=</span>&nbsp;<span class="ident" id="7016518">New</span><span class="op" id="7016521">(</span><span class="ident" id="7016522">NewSource</span><span class="op" id="7016531">(</span><span class="num" id="7016532">1</span><span class="op" id="7016533">)</span><span class="op" id="7016534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016537">for</span>&nbsp;<span class="ident" id="7016541">n</span>&nbsp;<span class="op" id="7016543">:=</span>&nbsp;<span class="ident" id="7016546">b</span><span class="op" id="7016547">.</span><span class="ident" id="7016548">N</span><span class="op" id="7016549">;</span>&nbsp;<span class="ident" id="7016551">n</span>&nbsp;<span class="op" id="7016553">&gt;</span>&nbsp;<span class="num" id="7016555">0</span><span class="op" id="7016556">;</span>&nbsp;<span class="ident" id="7016558">n</span><span class="op" id="7016559">--</span>&nbsp;<span class="op" id="7016562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016566">r</span><span class="op" id="7016567">.</span><span class="ident" id="7016568">Int31n</span><span class="op" id="7016574">(</span><span class="num" id="7016575">1000</span><span class="op" id="7016579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016582">}</span><br>
<span class="lineno">370</span><span class="op" id="7016584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016587">func</span>&nbsp;<span class="ident" id="7016592">BenchmarkFloat32</span><span class="op" id="7016608">(</span><span class="ident" id="7016609">b</span>&nbsp;<span class="op" id="7016611">*</span><span class="ident" id="7016612">testing</span><span class="op" id="7016619">.</span><span class="ident" id="7016620">B</span><span class="op" id="7016621">)</span>&nbsp;<span class="op" id="7016623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016626">r</span>&nbsp;<span class="op" id="7016628">:=</span>&nbsp;<span class="ident" id="7016631">New</span><span class="op" id="7016634">(</span><span class="ident" id="7016635">NewSource</span><span class="op" id="7016644">(</span><span class="num" id="7016645">1</span><span class="op" id="7016646">)</span><span class="op" id="7016647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016650">for</span>&nbsp;<span class="ident" id="7016654">n</span>&nbsp;<span class="op" id="7016656">:=</span>&nbsp;<span class="ident" id="7016659">b</span><span class="op" id="7016660">.</span><span class="ident" id="7016661">N</span><span class="op" id="7016662">;</span>&nbsp;<span class="ident" id="7016664">n</span>&nbsp;<span class="op" id="7016666">&gt;</span>&nbsp;<span class="num" id="7016668">0</span><span class="op" id="7016669">;</span>&nbsp;<span class="ident" id="7016671">n</span><span class="op" id="7016672">--</span>&nbsp;<span class="op" id="7016675">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016679">r</span><span class="op" id="7016680">.</span><span class="ident" id="7016681">Float32</span><span class="op" id="7016688">(</span><span class="op" id="7016689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016692">}</span><br>
<span class="lineno"></span><span class="op" id="7016694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016697">func</span>&nbsp;<span class="ident" id="7016702">BenchmarkFloat64</span><span class="op" id="7016718">(</span><span class="ident" id="7016719">b</span>&nbsp;<span class="op" id="7016721">*</span><span class="ident" id="7016722">testing</span><span class="op" id="7016729">.</span><span class="ident" id="7016730">B</span><span class="op" id="7016731">)</span>&nbsp;<span class="op" id="7016733">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016736">r</span>&nbsp;<span class="op" id="7016738">:=</span>&nbsp;<span class="ident" id="7016741">New</span><span class="op" id="7016744">(</span><span class="ident" id="7016745">NewSource</span><span class="op" id="7016754">(</span><span class="num" id="7016755">1</span><span class="op" id="7016756">)</span><span class="op" id="7016757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016760">for</span>&nbsp;<span class="ident" id="7016764">n</span>&nbsp;<span class="op" id="7016766">:=</span>&nbsp;<span class="ident" id="7016769">b</span><span class="op" id="7016770">.</span><span class="ident" id="7016771">N</span><span class="op" id="7016772">;</span>&nbsp;<span class="ident" id="7016774">n</span>&nbsp;<span class="op" id="7016776">&gt;</span>&nbsp;<span class="num" id="7016778">0</span><span class="op" id="7016779">;</span>&nbsp;<span class="ident" id="7016781">n</span><span class="op" id="7016782">--</span>&nbsp;<span class="op" id="7016785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016789">r</span><span class="op" id="7016790">.</span><span class="ident" id="7016791">Float64</span><span class="op" id="7016798">(</span><span class="op" id="7016799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016802">}</span><br>
<span class="lineno"></span><span class="op" id="7016804">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7016807">func</span>&nbsp;<span class="ident" id="7016812">BenchmarkPerm3</span><span class="op" id="7016826">(</span><span class="ident" id="7016827">b</span>&nbsp;<span class="op" id="7016829">*</span><span class="ident" id="7016830">testing</span><span class="op" id="7016837">.</span><span class="ident" id="7016838">B</span><span class="op" id="7016839">)</span>&nbsp;<span class="op" id="7016841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016844">r</span>&nbsp;<span class="op" id="7016846">:=</span>&nbsp;<span class="ident" id="7016849">New</span><span class="op" id="7016852">(</span><span class="ident" id="7016853">NewSource</span><span class="op" id="7016862">(</span><span class="num" id="7016863">1</span><span class="op" id="7016864">)</span><span class="op" id="7016865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016868">for</span>&nbsp;<span class="ident" id="7016872">n</span>&nbsp;<span class="op" id="7016874">:=</span>&nbsp;<span class="ident" id="7016877">b</span><span class="op" id="7016878">.</span><span class="ident" id="7016879">N</span><span class="op" id="7016880">;</span>&nbsp;<span class="ident" id="7016882">n</span>&nbsp;<span class="op" id="7016884">&gt;</span>&nbsp;<span class="num" id="7016886">0</span><span class="op" id="7016887">;</span>&nbsp;<span class="ident" id="7016889">n</span><span class="op" id="7016890">--</span>&nbsp;<span class="op" id="7016893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016897">r</span><span class="op" id="7016898">.</span><span class="ident" id="7016899">Perm</span><span class="op" id="7016903">(</span><span class="num" id="7016904">3</span><span class="op" id="7016905">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016908">}</span><br>
<span class="lineno"></span><span class="op" id="7016910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016913">func</span>&nbsp;<span class="ident" id="7016918">BenchmarkPerm30</span><span class="op" id="7016933">(</span><span class="ident" id="7016934">b</span>&nbsp;<span class="op" id="7016936">*</span><span class="ident" id="7016937">testing</span><span class="op" id="7016944">.</span><span class="ident" id="7016945">B</span><span class="op" id="7016946">)</span>&nbsp;<span class="op" id="7016948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016951">r</span>&nbsp;<span class="op" id="7016953">:=</span>&nbsp;<span class="ident" id="7016956">New</span><span class="op" id="7016959">(</span><span class="ident" id="7016960">NewSource</span><span class="op" id="7016969">(</span><span class="num" id="7016970">1</span><span class="op" id="7016971">)</span><span class="op" id="7016972">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7016975">for</span>&nbsp;<span class="ident" id="7016979">n</span>&nbsp;<span class="op" id="7016981">:=</span>&nbsp;<span class="ident" id="7016984">b</span><span class="op" id="7016985">.</span><span class="ident" id="7016986">N</span><span class="op" id="7016987">;</span>&nbsp;<span class="ident" id="7016989">n</span>&nbsp;<span class="op" id="7016991">&gt;</span>&nbsp;<span class="num" id="7016993">0</span><span class="op" id="7016994">;</span>&nbsp;<span class="ident" id="7016996">n</span><span class="op" id="7016997">--</span>&nbsp;<span class="op" id="7017000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017004">r</span><span class="op" id="7017005">.</span><span class="ident" id="7017006">Perm</span><span class="op" id="7017010">(</span><span class="num" id="7017011">30</span><span class="op" id="7017013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017016">}</span><br>
<span class="lineno"></span><span class="op" id="7017018">}</span>
</div>
</body>
</html>
