<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2603196">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2603251">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2603305">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2603356">//&nbsp;Package&nbsp;time&nbsp;provides&nbsp;functionality&nbsp;for&nbsp;measuring&nbsp;and&nbsp;displaying&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2603430">//</span><br>
<span class="lineno"></span><span class="comment" id="2603433">//&nbsp;The&nbsp;calendrical&nbsp;calculations&nbsp;always&nbsp;assume&nbsp;a&nbsp;Gregorian&nbsp;calendar.</span><br>
<span class="lineno"></span><span class="keyword" id="2603501">package</span>&nbsp;<span class="ident" id="2603509">time</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2603515">import</span>&nbsp;<span class="string" id="2603522">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2603532">//&nbsp;A&nbsp;Time&nbsp;represents&nbsp;an&nbsp;instant&nbsp;in&nbsp;time&nbsp;with&nbsp;nanosecond&nbsp;precision.</span><br>
<span class="lineno"></span><span class="comment" id="2603599">//</span><br>
<span class="lineno"></span><span class="comment" id="2603602">//&nbsp;Programs&nbsp;using&nbsp;times&nbsp;should&nbsp;typically&nbsp;store&nbsp;and&nbsp;pass&nbsp;them&nbsp;as&nbsp;values,</span><br>
<span class="lineno">15</span><span class="comment" id="2603674">//&nbsp;not&nbsp;pointers.&nbsp;&nbsp;That&nbsp;is,&nbsp;time&nbsp;variables&nbsp;and&nbsp;struct&nbsp;fields&nbsp;should&nbsp;be&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2603747">//&nbsp;type&nbsp;time.Time,&nbsp;not&nbsp;*time.Time.&nbsp;&nbsp;A&nbsp;Time&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="2603811">//&nbsp;multiple&nbsp;goroutines&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="comment" id="2603850">//</span><br>
<span class="lineno"></span><span class="comment" id="2603853">//&nbsp;Time&nbsp;instants&nbsp;can&nbsp;be&nbsp;compared&nbsp;using&nbsp;the&nbsp;Before,&nbsp;After,&nbsp;and&nbsp;Equal&nbsp;methods.</span><br>
<span class="lineno">20</span><span class="comment" id="2603930">//&nbsp;The&nbsp;Sub&nbsp;method&nbsp;subtracts&nbsp;two&nbsp;instants,&nbsp;producing&nbsp;a&nbsp;Duration.</span><br>
<span class="lineno"></span><span class="comment" id="2603994">//&nbsp;The&nbsp;Add&nbsp;method&nbsp;adds&nbsp;a&nbsp;Time&nbsp;and&nbsp;a&nbsp;Duration,&nbsp;producing&nbsp;a&nbsp;Time.</span><br>
<span class="lineno"></span><span class="comment" id="2604058">//</span><br>
<span class="lineno"></span><span class="comment" id="2604061">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;Time&nbsp;is&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2604138">//&nbsp;As&nbsp;this&nbsp;time&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;come&nbsp;up&nbsp;in&nbsp;practice,&nbsp;the&nbsp;IsZero&nbsp;method&nbsp;gives</span><br>
<span class="lineno">25</span><span class="comment" id="2604214">//&nbsp;a&nbsp;simple&nbsp;way&nbsp;of&nbsp;detecting&nbsp;a&nbsp;time&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;initialized&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2604292">//</span><br>
<span class="lineno"></span><span class="comment" id="2604295">//&nbsp;Each&nbsp;Time&nbsp;has&nbsp;associated&nbsp;with&nbsp;it&nbsp;a&nbsp;Location,&nbsp;consulted&nbsp;when&nbsp;computing&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2604372">//&nbsp;presentation&nbsp;form&nbsp;of&nbsp;the&nbsp;time,&nbsp;such&nbsp;as&nbsp;in&nbsp;the&nbsp;Format,&nbsp;Hour,&nbsp;and&nbsp;Year&nbsp;methods.</span><br>
<span class="lineno"></span><span class="comment" id="2604453">//&nbsp;The&nbsp;methods&nbsp;Local,&nbsp;UTC,&nbsp;and&nbsp;In&nbsp;return&nbsp;a&nbsp;Time&nbsp;with&nbsp;a&nbsp;specific&nbsp;location.</span><br>
<span class="lineno">30</span><span class="comment" id="2604527">//&nbsp;Changing&nbsp;the&nbsp;location&nbsp;in&nbsp;this&nbsp;way&nbsp;changes&nbsp;only&nbsp;the&nbsp;presentation;&nbsp;it&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2604607">//&nbsp;change&nbsp;the&nbsp;instant&nbsp;in&nbsp;time&nbsp;being&nbsp;denoted&nbsp;and&nbsp;therefore&nbsp;does&nbsp;not&nbsp;affect&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2604685">//&nbsp;computations&nbsp;described&nbsp;in&nbsp;earlier&nbsp;paragraphs.</span><br>
<span class="lineno"></span><span class="comment" id="2604734">//</span><br>
<span class="lineno"></span><span class="comment" id="2604737">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Go&nbsp;==&nbsp;operator&nbsp;compares&nbsp;not&nbsp;just&nbsp;the&nbsp;time&nbsp;instant&nbsp;but&nbsp;also&nbsp;the</span><br>
<span class="lineno">35</span><span class="comment" id="2604817">//&nbsp;Location.&nbsp;Therefore,&nbsp;Time&nbsp;values&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;as&nbsp;map&nbsp;or&nbsp;database&nbsp;keys</span><br>
<span class="lineno"></span><span class="comment" id="2604896">//&nbsp;without&nbsp;first&nbsp;guaranteeing&nbsp;that&nbsp;the&nbsp;identical&nbsp;Location&nbsp;has&nbsp;been&nbsp;set&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2604975">//&nbsp;values,&nbsp;which&nbsp;can&nbsp;be&nbsp;achieved&nbsp;through&nbsp;use&nbsp;of&nbsp;the&nbsp;UTC&nbsp;or&nbsp;Local&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="2605048">//</span><br>
<span class="lineno"></span><span class="keyword" id="2605051">type</span>&nbsp;<span class="ident" id="2605056">Time</span>&nbsp;<span class="keyword" id="2605061">struct</span>&nbsp;<span class="op" id="2605068">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605071">//&nbsp;sec&nbsp;gives&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed&nbsp;since</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605121">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605157">sec</span>&nbsp;<span class="ident" id="2605161">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605169">//&nbsp;nsec&nbsp;specifies&nbsp;a&nbsp;non-negative&nbsp;nanosecond</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605214">//&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;named&nbsp;by&nbsp;Seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605261">//&nbsp;It&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605305">nsec</span>&nbsp;<span class="builtintype" id="2605310">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605318">//&nbsp;loc&nbsp;specifies&nbsp;the&nbsp;Location&nbsp;that&nbsp;should&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605372">//&nbsp;determine&nbsp;the&nbsp;minute,&nbsp;hour,&nbsp;month,&nbsp;day,&nbsp;and&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605425">//&nbsp;that&nbsp;correspond&nbsp;to&nbsp;this&nbsp;Time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605459">//&nbsp;Only&nbsp;the&nbsp;zero&nbsp;Time&nbsp;has&nbsp;a&nbsp;nil&nbsp;Location.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605502">//&nbsp;In&nbsp;that&nbsp;case&nbsp;it&nbsp;is&nbsp;interpreted&nbsp;to&nbsp;mean&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605550">loc</span>&nbsp;<span class="op" id="2605554">*</span><span class="ident" id="2605555">Location</span><br>
<span class="lineno">55</span><span class="op" id="2605564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2605567">//&nbsp;After&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;after&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2605623">func</span>&nbsp;<span class="op" id="2605628">(</span><span class="ident" id="2605629">t</span>&nbsp;<span class="ident" id="2605631">Time</span><span class="op" id="2605635">)</span>&nbsp;<span class="ident" id="2605637">After</span><span class="op" id="2605642">(</span><span class="ident" id="2605643">u</span>&nbsp;<span class="ident" id="2605645">Time</span><span class="op" id="2605649">)</span>&nbsp;<span class="builtintype" id="2605651">bool</span>&nbsp;<span class="op" id="2605656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605659">return</span>&nbsp;<span class="ident" id="2605666">t</span><span class="op" id="2605667">.</span><span class="ident" id="2605668">sec</span>&nbsp;<span class="op" id="2605672">&gt;</span>&nbsp;<span class="ident" id="2605674">u</span><span class="op" id="2605675">.</span><span class="ident" id="2605676">sec</span>&nbsp;<span class="op" id="2605680">||</span>&nbsp;<span class="ident" id="2605683">t</span><span class="op" id="2605684">.</span><span class="ident" id="2605685">sec</span>&nbsp;<span class="op" id="2605689">==</span>&nbsp;<span class="ident" id="2605692">u</span><span class="op" id="2605693">.</span><span class="ident" id="2605694">sec</span>&nbsp;<span class="op" id="2605698">&amp;&amp;</span>&nbsp;<span class="ident" id="2605701">t</span><span class="op" id="2605702">.</span><span class="ident" id="2605703">nsec</span>&nbsp;<span class="op" id="2605708">&gt;</span>&nbsp;<span class="ident" id="2605710">u</span><span class="op" id="2605711">.</span><span class="ident" id="2605712">nsec</span><br>
<span class="lineno">60</span><span class="op" id="2605717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2605720">//&nbsp;Before&nbsp;reports&nbsp;whether&nbsp;the&nbsp;time&nbsp;instant&nbsp;t&nbsp;is&nbsp;before&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="2605778">func</span>&nbsp;<span class="op" id="2605783">(</span><span class="ident" id="2605784">t</span>&nbsp;<span class="ident" id="2605786">Time</span><span class="op" id="2605790">)</span>&nbsp;<span class="ident" id="2605792">Before</span><span class="op" id="2605798">(</span><span class="ident" id="2605799">u</span>&nbsp;<span class="ident" id="2605801">Time</span><span class="op" id="2605805">)</span>&nbsp;<span class="builtintype" id="2605807">bool</span>&nbsp;<span class="op" id="2605812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2605815">return</span>&nbsp;<span class="ident" id="2605822">t</span><span class="op" id="2605823">.</span><span class="ident" id="2605824">sec</span>&nbsp;<span class="op" id="2605828">&lt;</span>&nbsp;<span class="ident" id="2605830">u</span><span class="op" id="2605831">.</span><span class="ident" id="2605832">sec</span>&nbsp;<span class="op" id="2605836">||</span>&nbsp;<span class="ident" id="2605839">t</span><span class="op" id="2605840">.</span><span class="ident" id="2605841">sec</span>&nbsp;<span class="op" id="2605845">==</span>&nbsp;<span class="ident" id="2605848">u</span><span class="op" id="2605849">.</span><span class="ident" id="2605850">sec</span>&nbsp;<span class="op" id="2605854">&amp;&amp;</span>&nbsp;<span class="ident" id="2605857">t</span><span class="op" id="2605858">.</span><span class="ident" id="2605859">nsec</span>&nbsp;<span class="op" id="2605864">&lt;</span>&nbsp;<span class="ident" id="2605866">u</span><span class="op" id="2605867">.</span><span class="ident" id="2605868">nsec</span><br>
<span class="lineno">65</span><span class="op" id="2605873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2605876">//&nbsp;Equal&nbsp;reports&nbsp;whether&nbsp;t&nbsp;and&nbsp;u&nbsp;represent&nbsp;the&nbsp;same&nbsp;time&nbsp;instant.</span><br>
<span class="lineno"></span><span class="comment" id="2605942">//&nbsp;Two&nbsp;times&nbsp;can&nbsp;be&nbsp;equal&nbsp;even&nbsp;if&nbsp;they&nbsp;are&nbsp;in&nbsp;different&nbsp;locations.</span><br>
<span class="lineno"></span><span class="comment" id="2606009">//&nbsp;For&nbsp;example,&nbsp;6:00&nbsp;+0200&nbsp;CEST&nbsp;and&nbsp;4:00&nbsp;UTC&nbsp;are&nbsp;Equal.</span><br>
<span class="lineno">70</span><span class="comment" id="2606065">//&nbsp;This&nbsp;comparison&nbsp;is&nbsp;different&nbsp;from&nbsp;using&nbsp;t&nbsp;==&nbsp;u,&nbsp;which&nbsp;also&nbsp;compares</span><br>
<span class="lineno"></span><span class="comment" id="2606136">//&nbsp;the&nbsp;locations.</span><br>
<span class="lineno"></span><span class="keyword" id="2606154">func</span>&nbsp;<span class="op" id="2606159">(</span><span class="ident" id="2606160">t</span>&nbsp;<span class="ident" id="2606162">Time</span><span class="op" id="2606166">)</span>&nbsp;<span class="ident" id="2606168">Equal</span><span class="op" id="2606173">(</span><span class="ident" id="2606174">u</span>&nbsp;<span class="ident" id="2606176">Time</span><span class="op" id="2606180">)</span>&nbsp;<span class="builtintype" id="2606182">bool</span>&nbsp;<span class="op" id="2606187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2606190">return</span>&nbsp;<span class="ident" id="2606197">t</span><span class="op" id="2606198">.</span><span class="ident" id="2606199">sec</span>&nbsp;<span class="op" id="2606203">==</span>&nbsp;<span class="ident" id="2606206">u</span><span class="op" id="2606207">.</span><span class="ident" id="2606208">sec</span>&nbsp;<span class="op" id="2606212">&amp;&amp;</span>&nbsp;<span class="ident" id="2606215">t</span><span class="op" id="2606216">.</span><span class="ident" id="2606217">nsec</span>&nbsp;<span class="op" id="2606222">==</span>&nbsp;<span class="ident" id="2606225">u</span><span class="op" id="2606226">.</span><span class="ident" id="2606227">nsec</span><br>
<span class="lineno"></span><span class="op" id="2606232">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="2606235">//&nbsp;A&nbsp;Month&nbsp;specifies&nbsp;a&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;(January&nbsp;=&nbsp;1,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2606296">type</span>&nbsp;<span class="ident" id="2606301">Month</span>&nbsp;<span class="builtintype" id="2606307">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2606312">const</span>&nbsp;<span class="op" id="2606318">(</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606321">January</span>&nbsp;<span class="ident" id="2606329">Month</span>&nbsp;<span class="op" id="2606335">=</span>&nbsp;<span class="num" id="2606337">1</span>&nbsp;<span class="op" id="2606339">+</span>&nbsp;<span class="ident" id="2606341">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606347">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606357">March</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606364">April</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606371">May</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606376">June</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606382">July</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606388">August</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606396">September</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606407">October</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606416">November</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606426">December</span><br>
<span class="lineno"></span><span class="op" id="2606435">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2606438">var</span>&nbsp;<span class="ident" id="2606442">months</span>&nbsp;<span class="op" id="2606449">=</span>&nbsp;<span class="op" id="2606451">[</span><span class="op" id="2606452">...</span><span class="op" id="2606455">]</span><span class="builtintype" id="2606456">string</span><span class="op" id="2606462">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606465">&#34;January&#34;</span><span class="op" id="2606474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606477">&#34;February&#34;</span><span class="op" id="2606487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606490">&#34;March&#34;</span><span class="op" id="2606497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606500">&#34;April&#34;</span><span class="op" id="2606507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606510">&#34;May&#34;</span><span class="op" id="2606515">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606518">&#34;June&#34;</span><span class="op" id="2606524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606527">&#34;July&#34;</span><span class="op" id="2606533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606536">&#34;August&#34;</span><span class="op" id="2606544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606547">&#34;September&#34;</span><span class="op" id="2606558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606561">&#34;October&#34;</span><span class="op" id="2606570">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606573">&#34;November&#34;</span><span class="op" id="2606583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606586">&#34;December&#34;</span><span class="op" id="2606596">,</span><br>
<span class="lineno"></span><span class="op" id="2606598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2606601">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;month&nbsp;(&#34;January&#34;,&nbsp;&#34;February&#34;,&nbsp;...).</span><br>
<span class="lineno">110</span><span class="keyword" id="2606679">func</span>&nbsp;<span class="op" id="2606684">(</span><span class="ident" id="2606685">m</span>&nbsp;<span class="ident" id="2606687">Month</span><span class="op" id="2606692">)</span>&nbsp;<span class="ident" id="2606694">String</span><span class="op" id="2606700">(</span><span class="op" id="2606701">)</span>&nbsp;<span class="builtintype" id="2606703">string</span>&nbsp;<span class="op" id="2606710">{</span>&nbsp;<span class="keyword" id="2606712">return</span>&nbsp;<span class="ident" id="2606719">months</span><span class="op" id="2606725">[</span><span class="ident" id="2606726">m</span><span class="op" id="2606727">-</span><span class="num" id="2606728">1</span><span class="op" id="2606729">]</span>&nbsp;<span class="op" id="2606731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2606734">//&nbsp;A&nbsp;Weekday&nbsp;specifies&nbsp;a&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;(Sunday&nbsp;=&nbsp;0,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2606794">type</span>&nbsp;<span class="ident" id="2606799">Weekday</span>&nbsp;<span class="builtintype" id="2606807">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="2606812">const</span>&nbsp;<span class="op" id="2606818">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606821">Sunday</span>&nbsp;<span class="ident" id="2606828">Weekday</span>&nbsp;<span class="op" id="2606836">=</span>&nbsp;<span class="ident" id="2606838">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606844">Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606852">Tuesday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606861">Wednesday</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606872">Thursday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606882">Friday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606890">Saturday</span><br>
<span class="lineno"></span><span class="op" id="2606899">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2606902">var</span>&nbsp;<span class="ident" id="2606906">days</span>&nbsp;<span class="op" id="2606911">=</span>&nbsp;<span class="op" id="2606913">[</span><span class="op" id="2606914">...</span><span class="op" id="2606917">]</span><span class="builtintype" id="2606918">string</span><span class="op" id="2606924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606927">&#34;Sunday&#34;</span><span class="op" id="2606935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606938">&#34;Monday&#34;</span><span class="op" id="2606946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606949">&#34;Tuesday&#34;</span><span class="op" id="2606958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606961">&#34;Wednesday&#34;</span><span class="op" id="2606972">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606975">&#34;Thursday&#34;</span><span class="op" id="2606985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606988">&#34;Friday&#34;</span><span class="op" id="2606996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2606999">&#34;Saturday&#34;</span><span class="op" id="2607009">,</span><br>
<span class="lineno"></span><span class="op" id="2607011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="2607014">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;English&nbsp;name&nbsp;of&nbsp;the&nbsp;day&nbsp;(&#34;Sunday&#34;,&nbsp;&#34;Monday&#34;,&nbsp;...).</span><br>
<span class="lineno"></span><span class="keyword" id="2607087">func</span>&nbsp;<span class="op" id="2607092">(</span><span class="ident" id="2607093">d</span>&nbsp;<span class="ident" id="2607095">Weekday</span><span class="op" id="2607102">)</span>&nbsp;<span class="ident" id="2607104">String</span><span class="op" id="2607110">(</span><span class="op" id="2607111">)</span>&nbsp;<span class="builtintype" id="2607113">string</span>&nbsp;<span class="op" id="2607120">{</span>&nbsp;<span class="keyword" id="2607122">return</span>&nbsp;<span class="ident" id="2607129">days</span><span class="op" id="2607133">[</span><span class="ident" id="2607134">d</span><span class="op" id="2607135">]</span>&nbsp;<span class="op" id="2607137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607140">//&nbsp;Computations&nbsp;on&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="2607165">//</span><br>
<span class="lineno">140</span><span class="comment" id="2607168">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;a&nbsp;Time&nbsp;is&nbsp;defined&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2607214">//&nbsp;&nbsp;&nbsp;&nbspJanuary&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00.000000000&nbsp;UTC</span><br>
<span class="lineno"></span><span class="comment" id="2607259">//&nbsp;which&nbsp;(1)&nbsp;looks&nbsp;like&nbsp;a&nbsp;zero,&nbsp;or&nbsp;as&nbsp;close&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;in&nbsp;a&nbsp;date</span><br>
<span class="lineno"></span><span class="comment" id="2607328">//&nbsp;(1-1-1&nbsp;00:00:00&nbsp;UTC),&nbsp;(2)&nbsp;is&nbsp;unlikely&nbsp;enough&nbsp;to&nbsp;arise&nbsp;in&nbsp;practice&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2607400">//&nbsp;be&nbsp;a&nbsp;suitable&nbsp;&#34;not&nbsp;set&#34;&nbsp;sentinel,&nbsp;unlike&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;and&nbsp;(3)&nbsp;has&nbsp;a</span><br>
<span class="lineno">145</span><span class="comment" id="2607470">//&nbsp;non-negative&nbsp;year&nbsp;even&nbsp;in&nbsp;time&nbsp;zones&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;unlike&nbsp;1-1-0</span><br>
<span class="lineno"></span><span class="comment" id="2607536">//&nbsp;00:00:00&nbsp;UTC,&nbsp;which&nbsp;would&nbsp;be&nbsp;12-31-(-1)&nbsp;19:00:00&nbsp;in&nbsp;New&nbsp;York.</span><br>
<span class="lineno"></span><span class="comment" id="2607601">//</span><br>
<span class="lineno"></span><span class="comment" id="2607604">//&nbsp;The&nbsp;zero&nbsp;Time&nbsp;value&nbsp;does&nbsp;not&nbsp;force&nbsp;a&nbsp;specific&nbsp;epoch&nbsp;for&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2607672">//&nbsp;representation.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;use&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;internally,&nbsp;we</span><br>
<span class="lineno">150</span><span class="comment" id="2607742">//&nbsp;could&nbsp;define&nbsp;that&nbsp;to&nbsp;distinguish&nbsp;a&nbsp;zero&nbsp;value&nbsp;from&nbsp;Jan&nbsp;1&nbsp;1970,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2607813">//&nbsp;time&nbsp;would&nbsp;be&nbsp;represented&nbsp;by&nbsp;sec=-1,&nbsp;nsec=1e9.&nbsp;&nbsp;However,&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="2607881">//&nbsp;suggest&nbsp;a&nbsp;representation,&nbsp;namely&nbsp;using&nbsp;1-1-1&nbsp;00:00:00&nbsp;UTC&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2607949">//&nbsp;epoch,&nbsp;and&nbsp;that&#39;s&nbsp;what&nbsp;we&nbsp;do.</span><br>
<span class="lineno"></span><span class="comment" id="2607982">//</span><br>
<span class="lineno">155</span><span class="comment" id="2607985">//&nbsp;The&nbsp;Add&nbsp;and&nbsp;Sub&nbsp;computations&nbsp;are&nbsp;oblivious&nbsp;to&nbsp;the&nbsp;choice&nbsp;of&nbsp;epoch.</span><br>
<span class="lineno"></span><span class="comment" id="2608055">//</span><br>
<span class="lineno"></span><span class="comment" id="2608058">//&nbsp;The&nbsp;presentation&nbsp;computations&nbsp;-&nbsp;year,&nbsp;month,&nbsp;minute,&nbsp;and&nbsp;so&nbsp;on&nbsp;-&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2608130">//&nbsp;rely&nbsp;heavily&nbsp;on&nbsp;division&nbsp;and&nbsp;modulus&nbsp;by&nbsp;positive&nbsp;constants.&nbsp;&nbsp;For</span><br>
<span class="lineno"></span><span class="comment" id="2608198">//&nbsp;calendrical&nbsp;calculations&nbsp;we&nbsp;want&nbsp;these&nbsp;divisions&nbsp;to&nbsp;round&nbsp;down,&nbsp;even</span><br>
<span class="lineno">160</span><span class="comment" id="2608270">//&nbsp;for&nbsp;negative&nbsp;values,&nbsp;so&nbsp;that&nbsp;the&nbsp;remainder&nbsp;is&nbsp;always&nbsp;positive,&nbsp;but</span><br>
<span class="lineno"></span><span class="comment" id="2608340">//&nbsp;Go&#39;s&nbsp;division&nbsp;(like&nbsp;most&nbsp;hardware&nbsp;division&nbsp;instructions)&nbsp;rounds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2608410">//&nbsp;zero.&nbsp;&nbsp;We&nbsp;can&nbsp;still&nbsp;do&nbsp;those&nbsp;computations&nbsp;and&nbsp;then&nbsp;adjust&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="2608482">//&nbsp;for&nbsp;a&nbsp;negative&nbsp;numerator,&nbsp;but&nbsp;it&#39;s&nbsp;annoying&nbsp;to&nbsp;write&nbsp;the&nbsp;adjustment</span><br>
<span class="lineno"></span><span class="comment" id="2608553">//&nbsp;over&nbsp;and&nbsp;over.&nbsp;&nbsp;Instead,&nbsp;we&nbsp;can&nbsp;change&nbsp;to&nbsp;a&nbsp;different&nbsp;epoch&nbsp;so&nbsp;long</span><br>
<span class="lineno">165</span><span class="comment" id="2608624">//&nbsp;ago&nbsp;that&nbsp;all&nbsp;the&nbsp;times&nbsp;we&nbsp;care&nbsp;about&nbsp;will&nbsp;be&nbsp;positive,&nbsp;and&nbsp;then&nbsp;round</span><br>
<span class="lineno"></span><span class="comment" id="2608697">//&nbsp;to&nbsp;zero&nbsp;and&nbsp;round&nbsp;down&nbsp;coincide.&nbsp;&nbsp;These&nbsp;presentation&nbsp;routines&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="2608770">//&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;zone&nbsp;offset,&nbsp;so&nbsp;adding&nbsp;the&nbsp;translation&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2608835">//&nbsp;alternate&nbsp;epoch&nbsp;is&nbsp;cheap.&nbsp;&nbsp;For&nbsp;example,&nbsp;having&nbsp;a&nbsp;non-negative&nbsp;time&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="2608907">//&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">170</span><span class="comment" id="2608934">//</span><br>
<span class="lineno"></span><span class="comment" id="2608937">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2608953">//</span><br>
<span class="lineno"></span><span class="comment" id="2608956">//&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2608970">//</span><br>
<span class="lineno">175</span><span class="comment" id="2608973">//&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;=&nbsp;t&nbsp;%&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2608989">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;sec&nbsp;&lt;&nbsp;0&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2609005">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspsec&nbsp;+=&nbsp;60</span><br>
<span class="lineno"></span><span class="comment" id="2609019">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2609024">//</span><br>
<span class="lineno">180</span><span class="comment" id="2609027">//&nbsp;everywhere.</span><br>
<span class="lineno"></span><span class="comment" id="2609042">//</span><br>
<span class="lineno"></span><span class="comment" id="2609045">//&nbsp;The&nbsp;calendar&nbsp;runs&nbsp;on&nbsp;an&nbsp;exact&nbsp;400&nbsp;year&nbsp;cycle:&nbsp;a&nbsp;400-year&nbsp;calendar</span><br>
<span class="lineno"></span><span class="comment" id="2609114">//&nbsp;printed&nbsp;for&nbsp;1970-2469&nbsp;will&nbsp;apply&nbsp;as&nbsp;well&nbsp;to&nbsp;2470-2869.&nbsp;&nbsp;Even&nbsp;the&nbsp;days</span><br>
<span class="lineno"></span><span class="comment" id="2609187">//&nbsp;of&nbsp;the&nbsp;week&nbsp;match&nbsp;up.&nbsp;&nbsp;It&nbsp;simplifies&nbsp;the&nbsp;computations&nbsp;to&nbsp;choose&nbsp;the</span><br>
<span class="lineno">185</span><span class="comment" id="2609258">//&nbsp;cycle&nbsp;boundaries&nbsp;so&nbsp;that&nbsp;the&nbsp;exceptional&nbsp;years&nbsp;are&nbsp;always&nbsp;delayed&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="2609330">//&nbsp;long&nbsp;as&nbsp;possible.&nbsp;&nbsp;That&nbsp;means&nbsp;choosing&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2609402">//&nbsp;that&nbsp;the&nbsp;first&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;4th&nbsp;year,&nbsp;the&nbsp;first&nbsp;missed&nbsp;leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2609474">//&nbsp;is&nbsp;the&nbsp;100th&nbsp;year,&nbsp;and&nbsp;the&nbsp;missed&nbsp;missed&nbsp;leap&nbsp;year&nbsp;is&nbsp;the&nbsp;400th&nbsp;year.</span><br>
<span class="lineno"></span><span class="comment" id="2609547">//&nbsp;So&nbsp;we&#39;d&nbsp;prefer&nbsp;instead&nbsp;to&nbsp;print&nbsp;a&nbsp;calendar&nbsp;for&nbsp;2001-2400&nbsp;and&nbsp;reuse&nbsp;it</span><br>
<span class="lineno">190</span><span class="comment" id="2609620">//&nbsp;for&nbsp;2401-2800.</span><br>
<span class="lineno"></span><span class="comment" id="2609638">//</span><br>
<span class="lineno"></span><span class="comment" id="2609641">//&nbsp;Finally,&nbsp;it&#39;s&nbsp;convenient&nbsp;if&nbsp;the&nbsp;delta&nbsp;between&nbsp;the&nbsp;Unix&nbsp;epoch&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2609709">//&nbsp;long-ago&nbsp;epoch&nbsp;is&nbsp;representable&nbsp;by&nbsp;an&nbsp;int64&nbsp;constant.</span><br>
<span class="lineno"></span><span class="comment" id="2609766">//</span><br>
<span class="lineno">195</span><span class="comment" id="2609769">//&nbsp;These&nbsp;three&nbsp;considerations—choose&nbsp;an&nbsp;epoch&nbsp;as&nbsp;early&nbsp;as&nbsp;possible,&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2609844">//&nbsp;uses&nbsp;a&nbsp;year&nbsp;equal&nbsp;to&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;that&nbsp;is&nbsp;no&nbsp;more&nbsp;than&nbsp;2⁶³&nbsp;seconds</span><br>
<span class="lineno"></span><span class="comment" id="2609919">//&nbsp;earlier&nbsp;than&nbsp;1970—bring&nbsp;us&nbsp;to&nbsp;the&nbsp;year&nbsp;-292277022399.&nbsp;&nbsp;We&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2609991">//&nbsp;this&nbsp;year&nbsp;as&nbsp;the&nbsp;absolute&nbsp;zero&nbsp;year,&nbsp;and&nbsp;to&nbsp;times&nbsp;measured&nbsp;as&nbsp;a&nbsp;uint64</span><br>
<span class="lineno"></span><span class="comment" id="2610065">//&nbsp;seconds&nbsp;since&nbsp;this&nbsp;year&nbsp;as&nbsp;absolute&nbsp;times.</span><br>
<span class="lineno">200</span><span class="comment" id="2610111">//</span><br>
<span class="lineno"></span><span class="comment" id="2610114">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1—the&nbsp;representation</span><br>
<span class="lineno"></span><span class="comment" id="2610190">//&nbsp;used&nbsp;for&nbsp;Time&#39;s&nbsp;sec&nbsp;field—are&nbsp;called&nbsp;internal&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2610248">//</span><br>
<span class="lineno"></span><span class="comment" id="2610251">//&nbsp;Times&nbsp;measured&nbsp;as&nbsp;an&nbsp;int64&nbsp;seconds&nbsp;since&nbsp;the&nbsp;year&nbsp;1970&nbsp;are&nbsp;called&nbsp;Unix</span><br>
<span class="lineno">205</span><span class="comment" id="2610325">//&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2610335">//</span><br>
<span class="lineno"></span><span class="comment" id="2610338">//&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;just&nbsp;use&nbsp;the&nbsp;year&nbsp;1&nbsp;as&nbsp;the&nbsp;absolute&nbsp;epoch,&nbsp;defining</span><br>
<span class="lineno"></span><span class="comment" id="2610411">//&nbsp;that&nbsp;the&nbsp;routines&nbsp;are&nbsp;only&nbsp;valid&nbsp;for&nbsp;years&nbsp;&gt;=&nbsp;1.&nbsp;&nbsp;However,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2610477">//&nbsp;routines&nbsp;would&nbsp;then&nbsp;be&nbsp;invalid&nbsp;when&nbsp;displaying&nbsp;the&nbsp;epoch&nbsp;in&nbsp;time&nbsp;zones</span><br>
<span class="lineno">210</span><span class="comment" id="2610551">//&nbsp;west&nbsp;of&nbsp;UTC,&nbsp;since&nbsp;it&nbsp;is&nbsp;year&nbsp;0.&nbsp;&nbsp;It&nbsp;doesn&#39;t&nbsp;seem&nbsp;tenable&nbsp;to&nbsp;say&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2610624">//&nbsp;printing&nbsp;the&nbsp;zero&nbsp;time&nbsp;correctly&nbsp;isn&#39;t&nbsp;supported&nbsp;in&nbsp;half&nbsp;the&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2610693">//&nbsp;zones.&nbsp;&nbsp;By&nbsp;comparison,&nbsp;it&#39;s&nbsp;reasonable&nbsp;to&nbsp;mishandle&nbsp;some&nbsp;times&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2610762">//&nbsp;the&nbsp;year&nbsp;-292277022399.</span><br>
<span class="lineno"></span><span class="comment" id="2610789">//</span><br>
<span class="lineno">215</span><span class="comment" id="2610792">//&nbsp;All&nbsp;this&nbsp;is&nbsp;opaque&nbsp;to&nbsp;clients&nbsp;of&nbsp;the&nbsp;API&nbsp;and&nbsp;can&nbsp;be&nbsp;changed&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2610860">//&nbsp;better&nbsp;implementation&nbsp;presents&nbsp;itself.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2610903">const</span>&nbsp;<span class="op" id="2610909">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2610912">//&nbsp;The&nbsp;unsigned&nbsp;zero&nbsp;year&nbsp;for&nbsp;internal&nbsp;calculations.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2610966">//&nbsp;Must&nbsp;be&nbsp;1&nbsp;mod&nbsp;400,&nbsp;and&nbsp;times&nbsp;before&nbsp;it&nbsp;will&nbsp;not&nbsp;compute&nbsp;correctly,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611037">//&nbsp;but&nbsp;otherwise&nbsp;can&nbsp;be&nbsp;changed&nbsp;at&nbsp;will.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611079">absoluteZeroYear</span>&nbsp;<span class="op" id="2611096">=</span>&nbsp;<span class="op" id="2611098">-</span><span class="num" id="2611099">292277022399</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611114">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Time.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611145">//&nbsp;Assumed&nbsp;by&nbsp;the&nbsp;unixToInternal&nbsp;computation&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611198">internalYear</span>&nbsp;<span class="op" id="2611211">=</span>&nbsp;<span class="num" id="2611213">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611217">//&nbsp;The&nbsp;year&nbsp;of&nbsp;the&nbsp;zero&nbsp;Unix&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611253">unixYear</span>&nbsp;<span class="op" id="2611262">=</span>&nbsp;<span class="num" id="2611264">1970</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611271">//&nbsp;Offsets&nbsp;to&nbsp;convert&nbsp;between&nbsp;internal&nbsp;and&nbsp;absolute&nbsp;or&nbsp;Unix&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611339">absoluteToInternal</span>&nbsp;<span class="ident" id="2611358">int64</span>&nbsp;<span class="op" id="2611364">=</span>&nbsp;<span class="op" id="2611366">(</span><span class="ident" id="2611367">absoluteZeroYear</span>&nbsp;<span class="op" id="2611384">-</span>&nbsp;<span class="ident" id="2611386">internalYear</span><span class="op" id="2611398">)</span>&nbsp;<span class="op" id="2611400">*</span>&nbsp;<span class="num" id="2611402">365.2425</span>&nbsp;<span class="op" id="2611411">*</span>&nbsp;<span class="ident" id="2611413">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611428">internalToAbsolute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2611453">=</span>&nbsp;<span class="op" id="2611455">-</span><span class="ident" id="2611456">absoluteToInternal</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611477">unixToInternal</span>&nbsp;<span class="ident" id="2611492">int64</span>&nbsp;<span class="op" id="2611498">=</span>&nbsp;<span class="op" id="2611500">(</span><span class="num" id="2611501">1969</span><span class="op" id="2611505">*</span><span class="num" id="2611506">365</span>&nbsp;<span class="op" id="2611510">+</span>&nbsp;<span class="num" id="2611512">1969</span><span class="op" id="2611516">/</span><span class="num" id="2611517">4</span>&nbsp;<span class="op" id="2611519">-</span>&nbsp;<span class="num" id="2611521">1969</span><span class="op" id="2611525">/</span><span class="num" id="2611526">100</span>&nbsp;<span class="op" id="2611530">+</span>&nbsp;<span class="num" id="2611532">1969</span><span class="op" id="2611536">/</span><span class="num" id="2611537">400</span><span class="op" id="2611540">)</span>&nbsp;<span class="op" id="2611542">*</span>&nbsp;<span class="ident" id="2611544">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611559">internalToUnix</span>&nbsp;<span class="ident" id="2611574">int64</span>&nbsp;<span class="op" id="2611580">=</span>&nbsp;<span class="op" id="2611582">-</span><span class="ident" id="2611583">unixToInternal</span><br>
<span class="lineno"></span><span class="op" id="2611598">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2611601">//&nbsp;IsZero&nbsp;reports&nbsp;whether&nbsp;t&nbsp;represents&nbsp;the&nbsp;zero&nbsp;time&nbsp;instant,</span><br>
<span class="lineno">240</span><span class="comment" id="2611663">//&nbsp;January&nbsp;1,&nbsp;year&nbsp;1,&nbsp;00:00:00&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2611699">func</span>&nbsp;<span class="op" id="2611704">(</span><span class="ident" id="2611705">t</span>&nbsp;<span class="ident" id="2611707">Time</span><span class="op" id="2611711">)</span>&nbsp;<span class="ident" id="2611713">IsZero</span><span class="op" id="2611719">(</span><span class="op" id="2611720">)</span>&nbsp;<span class="builtintype" id="2611722">bool</span>&nbsp;<span class="op" id="2611727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611730">return</span>&nbsp;<span class="ident" id="2611737">t</span><span class="op" id="2611738">.</span><span class="ident" id="2611739">sec</span>&nbsp;<span class="op" id="2611743">==</span>&nbsp;<span class="num" id="2611746">0</span>&nbsp;<span class="op" id="2611748">&amp;&amp;</span>&nbsp;<span class="ident" id="2611751">t</span><span class="op" id="2611752">.</span><span class="ident" id="2611753">nsec</span>&nbsp;<span class="op" id="2611758">==</span>&nbsp;<span class="num" id="2611761">0</span><br>
<span class="lineno"></span><span class="op" id="2611763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2611766">//&nbsp;abs&nbsp;returns&nbsp;the&nbsp;time&nbsp;t&nbsp;as&nbsp;an&nbsp;absolute&nbsp;time,&nbsp;adjusted&nbsp;by&nbsp;the&nbsp;zone&nbsp;offset.</span><br>
<span class="lineno"></span><span class="comment" id="2611842">//&nbsp;It&nbsp;is&nbsp;called&nbsp;when&nbsp;computing&nbsp;a&nbsp;presentation&nbsp;property&nbsp;like&nbsp;Month&nbsp;or&nbsp;Hour.</span><br>
<span class="lineno"></span><span class="keyword" id="2611917">func</span>&nbsp;<span class="op" id="2611922">(</span><span class="ident" id="2611923">t</span>&nbsp;<span class="ident" id="2611925">Time</span><span class="op" id="2611929">)</span>&nbsp;<span class="ident" id="2611931">abs</span><span class="op" id="2611934">(</span><span class="op" id="2611935">)</span>&nbsp;<span class="ident" id="2611937">uint64</span>&nbsp;<span class="op" id="2611944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611947">l</span>&nbsp;<span class="op" id="2611949">:=</span>&nbsp;<span class="ident" id="2611952">t</span><span class="op" id="2611953">.</span><span class="ident" id="2611954">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611959">//&nbsp;Avoid&nbsp;function&nbsp;calls&nbsp;when&nbsp;possible.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611999">if</span>&nbsp;<span class="ident" id="2612002">l</span>&nbsp;<span class="op" id="2612004">==</span>&nbsp;<span class="ident" id="2612007">nil</span>&nbsp;<span class="op" id="2612011">||</span>&nbsp;<span class="ident" id="2612014">l</span>&nbsp;<span class="op" id="2612016">==</span>&nbsp;<span class="op" id="2612019">&amp;</span><span class="ident" id="2612020">localLoc</span>&nbsp;<span class="op" id="2612029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612033">l</span>&nbsp;<span class="op" id="2612035">=</span>&nbsp;<span class="ident" id="2612037">l</span><span class="op" id="2612038">.</span><span class="ident" id="2612039">get</span><span class="op" id="2612042">(</span><span class="op" id="2612043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612049">sec</span>&nbsp;<span class="op" id="2612053">:=</span>&nbsp;<span class="ident" id="2612056">t</span><span class="op" id="2612057">.</span><span class="ident" id="2612058">sec</span>&nbsp;<span class="op" id="2612062">+</span>&nbsp;<span class="ident" id="2612064">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612080">if</span>&nbsp;<span class="ident" id="2612083">l</span>&nbsp;<span class="op" id="2612085">!=</span>&nbsp;<span class="op" id="2612088">&amp;</span><span class="ident" id="2612089">utcLoc</span>&nbsp;<span class="op" id="2612096">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612100">if</span>&nbsp;<span class="ident" id="2612103">l</span><span class="op" id="2612104">.</span><span class="ident" id="2612105">cacheZone</span>&nbsp;<span class="op" id="2612115">!=</span>&nbsp;<span class="ident" id="2612118">nil</span>&nbsp;<span class="op" id="2612122">&amp;&amp;</span>&nbsp;<span class="ident" id="2612125">l</span><span class="op" id="2612126">.</span><span class="ident" id="2612127">cacheStart</span>&nbsp;<span class="op" id="2612138">&lt;=</span>&nbsp;<span class="ident" id="2612141">sec</span>&nbsp;<span class="op" id="2612145">&amp;&amp;</span>&nbsp;<span class="ident" id="2612148">sec</span>&nbsp;<span class="op" id="2612152">&lt;</span>&nbsp;<span class="ident" id="2612154">l</span><span class="op" id="2612155">.</span><span class="ident" id="2612156">cacheEnd</span>&nbsp;<span class="op" id="2612165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612170">sec</span>&nbsp;<span class="op" id="2612174">+=</span>&nbsp;<span class="ident" id="2612177">int64</span><span class="op" id="2612182">(</span><span class="ident" id="2612183">l</span><span class="op" id="2612184">.</span><span class="ident" id="2612185">cacheZone</span><span class="op" id="2612194">.</span><span class="ident" id="2612195">offset</span><span class="op" id="2612201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612205">}</span>&nbsp;<span class="keyword" id="2612207">else</span>&nbsp;<span class="op" id="2612212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612217">_</span><span class="op" id="2612218">,</span>&nbsp;<span class="ident" id="2612220">offset</span><span class="op" id="2612226">,</span>&nbsp;<span class="ident" id="2612228">_</span><span class="op" id="2612229">,</span>&nbsp;<span class="ident" id="2612231">_</span><span class="op" id="2612232">,</span>&nbsp;<span class="ident" id="2612234">_</span>&nbsp;<span class="op" id="2612236">:=</span>&nbsp;<span class="ident" id="2612239">l</span><span class="op" id="2612240">.</span><span class="ident" id="2612241">lookup</span><span class="op" id="2612247">(</span><span class="ident" id="2612248">sec</span><span class="op" id="2612251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612256">sec</span>&nbsp;<span class="op" id="2612260">+=</span>&nbsp;<span class="ident" id="2612263">int64</span><span class="op" id="2612268">(</span><span class="ident" id="2612269">offset</span><span class="op" id="2612275">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612285">return</span>&nbsp;<span class="ident" id="2612292">uint64</span><span class="op" id="2612298">(</span><span class="ident" id="2612299">sec</span>&nbsp;<span class="op" id="2612303">+</span>&nbsp;<span class="op" id="2612305">(</span><span class="ident" id="2612306">unixToInternal</span>&nbsp;<span class="op" id="2612321">+</span>&nbsp;<span class="ident" id="2612323">internalToAbsolute</span><span class="op" id="2612341">)</span><span class="op" id="2612342">)</span><br>
<span class="lineno"></span><span class="op" id="2612344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="2612347">//&nbsp;locabs&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;Zone&nbsp;and&nbsp;abs&nbsp;methods,</span><br>
<span class="lineno"></span><span class="comment" id="2612403">//&nbsp;extracting&nbsp;both&nbsp;return&nbsp;values&nbsp;from&nbsp;a&nbsp;single&nbsp;zone&nbsp;lookup.</span><br>
<span class="lineno"></span><span class="keyword" id="2612463">func</span>&nbsp;<span class="op" id="2612468">(</span><span class="ident" id="2612469">t</span>&nbsp;<span class="ident" id="2612471">Time</span><span class="op" id="2612475">)</span>&nbsp;<span class="ident" id="2612477">locabs</span><span class="op" id="2612483">(</span><span class="op" id="2612484">)</span>&nbsp;<span class="op" id="2612486">(</span><span class="ident" id="2612487">name</span>&nbsp;<span class="builtintype" id="2612492">string</span><span class="op" id="2612498">,</span>&nbsp;<span class="ident" id="2612500">offset</span>&nbsp;<span class="builtintype" id="2612507">int</span><span class="op" id="2612510">,</span>&nbsp;<span class="ident" id="2612512">abs</span>&nbsp;<span class="ident" id="2612516">uint64</span><span class="op" id="2612522">)</span>&nbsp;<span class="op" id="2612524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612527">l</span>&nbsp;<span class="op" id="2612529">:=</span>&nbsp;<span class="ident" id="2612532">t</span><span class="op" id="2612533">.</span><span class="ident" id="2612534">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612539">if</span>&nbsp;<span class="ident" id="2612542">l</span>&nbsp;<span class="op" id="2612544">==</span>&nbsp;<span class="ident" id="2612547">nil</span>&nbsp;<span class="op" id="2612551">||</span>&nbsp;<span class="ident" id="2612554">l</span>&nbsp;<span class="op" id="2612556">==</span>&nbsp;<span class="op" id="2612559">&amp;</span><span class="ident" id="2612560">localLoc</span>&nbsp;<span class="op" id="2612569">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612573">l</span>&nbsp;<span class="op" id="2612575">=</span>&nbsp;<span class="ident" id="2612577">l</span><span class="op" id="2612578">.</span><span class="ident" id="2612579">get</span><span class="op" id="2612582">(</span><span class="op" id="2612583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612589">//&nbsp;Avoid&nbsp;function&nbsp;call&nbsp;if&nbsp;we&nbsp;hit&nbsp;the&nbsp;local&nbsp;time&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612645">sec</span>&nbsp;<span class="op" id="2612649">:=</span>&nbsp;<span class="ident" id="2612652">t</span><span class="op" id="2612653">.</span><span class="ident" id="2612654">sec</span>&nbsp;<span class="op" id="2612658">+</span>&nbsp;<span class="ident" id="2612660">internalToUnix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612676">if</span>&nbsp;<span class="ident" id="2612679">l</span>&nbsp;<span class="op" id="2612681">!=</span>&nbsp;<span class="op" id="2612684">&amp;</span><span class="ident" id="2612685">utcLoc</span>&nbsp;<span class="op" id="2612692">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612696">if</span>&nbsp;<span class="ident" id="2612699">l</span><span class="op" id="2612700">.</span><span class="ident" id="2612701">cacheZone</span>&nbsp;<span class="op" id="2612711">!=</span>&nbsp;<span class="ident" id="2612714">nil</span>&nbsp;<span class="op" id="2612718">&amp;&amp;</span>&nbsp;<span class="ident" id="2612721">l</span><span class="op" id="2612722">.</span><span class="ident" id="2612723">cacheStart</span>&nbsp;<span class="op" id="2612734">&lt;=</span>&nbsp;<span class="ident" id="2612737">sec</span>&nbsp;<span class="op" id="2612741">&amp;&amp;</span>&nbsp;<span class="ident" id="2612744">sec</span>&nbsp;<span class="op" id="2612748">&lt;</span>&nbsp;<span class="ident" id="2612750">l</span><span class="op" id="2612751">.</span><span class="ident" id="2612752">cacheEnd</span>&nbsp;<span class="op" id="2612761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612766">name</span>&nbsp;<span class="op" id="2612771">=</span>&nbsp;<span class="ident" id="2612773">l</span><span class="op" id="2612774">.</span><span class="ident" id="2612775">cacheZone</span><span class="op" id="2612784">.</span><span class="ident" id="2612785">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612793">offset</span>&nbsp;<span class="op" id="2612800">=</span>&nbsp;<span class="ident" id="2612802">l</span><span class="op" id="2612803">.</span><span class="ident" id="2612804">cacheZone</span><span class="op" id="2612813">.</span><span class="ident" id="2612814">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612823">}</span>&nbsp;<span class="keyword" id="2612825">else</span>&nbsp;<span class="op" id="2612830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612835">name</span><span class="op" id="2612839">,</span>&nbsp;<span class="ident" id="2612841">offset</span><span class="op" id="2612847">,</span>&nbsp;<span class="ident" id="2612849">_</span><span class="op" id="2612850">,</span>&nbsp;<span class="ident" id="2612852">_</span><span class="op" id="2612853">,</span>&nbsp;<span class="ident" id="2612855">_</span>&nbsp;<span class="op" id="2612857">=</span>&nbsp;<span class="ident" id="2612859">l</span><span class="op" id="2612860">.</span><span class="ident" id="2612861">lookup</span><span class="op" id="2612867">(</span><span class="ident" id="2612868">sec</span><span class="op" id="2612871">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612879">sec</span>&nbsp;<span class="op" id="2612883">+=</span>&nbsp;<span class="ident" id="2612886">int64</span><span class="op" id="2612891">(</span><span class="ident" id="2612892">offset</span><span class="op" id="2612898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612901">}</span>&nbsp;<span class="keyword" id="2612903">else</span>&nbsp;<span class="op" id="2612908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612912">name</span>&nbsp;<span class="op" id="2612917">=</span>&nbsp;<span class="string" id="2612919">&#34;UTC&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612926">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612929">abs</span>&nbsp;<span class="op" id="2612933">=</span>&nbsp;<span class="ident" id="2612935">uint64</span><span class="op" id="2612941">(</span><span class="ident" id="2612942">sec</span>&nbsp;<span class="op" id="2612946">+</span>&nbsp;<span class="op" id="2612948">(</span><span class="ident" id="2612949">unixToInternal</span>&nbsp;<span class="op" id="2612964">+</span>&nbsp;<span class="ident" id="2612966">internalToAbsolute</span><span class="op" id="2612984">)</span><span class="op" id="2612985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612988">return</span><br>
<span class="lineno"></span><span class="op" id="2612995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2612998">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;year,&nbsp;month,&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno">290</span><span class="keyword" id="2613058">func</span>&nbsp;<span class="op" id="2613063">(</span><span class="ident" id="2613064">t</span>&nbsp;<span class="ident" id="2613066">Time</span><span class="op" id="2613070">)</span>&nbsp;<span class="ident" id="2613072">Date</span><span class="op" id="2613076">(</span><span class="op" id="2613077">)</span>&nbsp;<span class="op" id="2613079">(</span><span class="ident" id="2613080">year</span>&nbsp;<span class="builtintype" id="2613085">int</span><span class="op" id="2613088">,</span>&nbsp;<span class="ident" id="2613090">month</span>&nbsp;<span class="ident" id="2613096">Month</span><span class="op" id="2613101">,</span>&nbsp;<span class="ident" id="2613103">day</span>&nbsp;<span class="builtintype" id="2613107">int</span><span class="op" id="2613110">)</span>&nbsp;<span class="op" id="2613112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613115">year</span><span class="op" id="2613119">,</span>&nbsp;<span class="ident" id="2613121">month</span><span class="op" id="2613126">,</span>&nbsp;<span class="ident" id="2613128">day</span><span class="op" id="2613131">,</span>&nbsp;<span class="ident" id="2613133">_</span>&nbsp;<span class="op" id="2613135">=</span>&nbsp;<span class="ident" id="2613137">t</span><span class="op" id="2613138">.</span><span class="ident" id="2613139">date</span><span class="op" id="2613143">(</span><span class="builtintype" id="2613144">true</span><span class="op" id="2613148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613151">return</span><br>
<span class="lineno"></span><span class="op" id="2613158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="comment" id="2613161">//&nbsp;Year&nbsp;returns&nbsp;the&nbsp;year&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2613205">func</span>&nbsp;<span class="op" id="2613210">(</span><span class="ident" id="2613211">t</span>&nbsp;<span class="ident" id="2613213">Time</span><span class="op" id="2613217">)</span>&nbsp;<span class="ident" id="2613219">Year</span><span class="op" id="2613223">(</span><span class="op" id="2613224">)</span>&nbsp;<span class="builtintype" id="2613226">int</span>&nbsp;<span class="op" id="2613230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613233">year</span><span class="op" id="2613237">,</span>&nbsp;<span class="ident" id="2613239">_</span><span class="op" id="2613240">,</span>&nbsp;<span class="ident" id="2613242">_</span><span class="op" id="2613243">,</span>&nbsp;<span class="ident" id="2613245">_</span>&nbsp;<span class="op" id="2613247">:=</span>&nbsp;<span class="ident" id="2613250">t</span><span class="op" id="2613251">.</span><span class="ident" id="2613252">date</span><span class="op" id="2613256">(</span><span class="builtintype" id="2613257">false</span><span class="op" id="2613262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613265">return</span>&nbsp;<span class="ident" id="2613272">year</span><br>
<span class="lineno"></span><span class="op" id="2613277">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="2613280">//&nbsp;Month&nbsp;returns&nbsp;the&nbsp;month&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2613335">func</span>&nbsp;<span class="op" id="2613340">(</span><span class="ident" id="2613341">t</span>&nbsp;<span class="ident" id="2613343">Time</span><span class="op" id="2613347">)</span>&nbsp;<span class="ident" id="2613349">Month</span><span class="op" id="2613354">(</span><span class="op" id="2613355">)</span>&nbsp;<span class="ident" id="2613357">Month</span>&nbsp;<span class="op" id="2613363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613366">_</span><span class="op" id="2613367">,</span>&nbsp;<span class="ident" id="2613369">month</span><span class="op" id="2613374">,</span>&nbsp;<span class="ident" id="2613376">_</span><span class="op" id="2613377">,</span>&nbsp;<span class="ident" id="2613379">_</span>&nbsp;<span class="op" id="2613381">:=</span>&nbsp;<span class="ident" id="2613384">t</span><span class="op" id="2613385">.</span><span class="ident" id="2613386">date</span><span class="op" id="2613390">(</span><span class="builtintype" id="2613391">true</span><span class="op" id="2613395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613398">return</span>&nbsp;<span class="ident" id="2613405">month</span><br>
<span class="lineno">305</span><span class="op" id="2613411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2613414">//&nbsp;Day&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;month&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2613466">func</span>&nbsp;<span class="op" id="2613471">(</span><span class="ident" id="2613472">t</span>&nbsp;<span class="ident" id="2613474">Time</span><span class="op" id="2613478">)</span>&nbsp;<span class="ident" id="2613480">Day</span><span class="op" id="2613483">(</span><span class="op" id="2613484">)</span>&nbsp;<span class="builtintype" id="2613486">int</span>&nbsp;<span class="op" id="2613490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613493">_</span><span class="op" id="2613494">,</span>&nbsp;<span class="ident" id="2613496">_</span><span class="op" id="2613497">,</span>&nbsp;<span class="ident" id="2613499">day</span><span class="op" id="2613502">,</span>&nbsp;<span class="ident" id="2613504">_</span>&nbsp;<span class="op" id="2613506">:=</span>&nbsp;<span class="ident" id="2613509">t</span><span class="op" id="2613510">.</span><span class="ident" id="2613511">date</span><span class="op" id="2613515">(</span><span class="builtintype" id="2613516">true</span><span class="op" id="2613520">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613523">return</span>&nbsp;<span class="ident" id="2613530">day</span><br>
<span class="lineno"></span><span class="op" id="2613534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2613537">//&nbsp;Weekday&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;week&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="2613592">func</span>&nbsp;<span class="op" id="2613597">(</span><span class="ident" id="2613598">t</span>&nbsp;<span class="ident" id="2613600">Time</span><span class="op" id="2613604">)</span>&nbsp;<span class="ident" id="2613606">Weekday</span><span class="op" id="2613613">(</span><span class="op" id="2613614">)</span>&nbsp;<span class="ident" id="2613616">Weekday</span>&nbsp;<span class="op" id="2613624">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613627">return</span>&nbsp;<span class="ident" id="2613634">absWeekday</span><span class="op" id="2613644">(</span><span class="ident" id="2613645">t</span><span class="op" id="2613646">.</span><span class="ident" id="2613647">abs</span><span class="op" id="2613650">(</span><span class="op" id="2613651">)</span><span class="op" id="2613652">)</span><br>
<span class="lineno"></span><span class="op" id="2613654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2613657">//&nbsp;absWeekday&nbsp;is&nbsp;like&nbsp;Weekday&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2613721">func</span>&nbsp;<span class="ident" id="2613726">absWeekday</span><span class="op" id="2613736">(</span><span class="ident" id="2613737">abs</span>&nbsp;<span class="ident" id="2613741">uint64</span><span class="op" id="2613747">)</span>&nbsp;<span class="ident" id="2613749">Weekday</span>&nbsp;<span class="op" id="2613757">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2613760">//&nbsp;January&nbsp;1&nbsp;of&nbsp;the&nbsp;absolute&nbsp;year,&nbsp;like&nbsp;January&nbsp;1&nbsp;of&nbsp;2001,&nbsp;was&nbsp;a&nbsp;Monday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613834">sec</span>&nbsp;<span class="op" id="2613838">:=</span>&nbsp;<span class="op" id="2613841">(</span><span class="ident" id="2613842">abs</span>&nbsp;<span class="op" id="2613846">+</span>&nbsp;<span class="ident" id="2613848">uint64</span><span class="op" id="2613854">(</span><span class="ident" id="2613855">Monday</span><span class="op" id="2613861">)</span><span class="op" id="2613862">*</span><span class="ident" id="2613863">secondsPerDay</span><span class="op" id="2613876">)</span>&nbsp;<span class="op" id="2613878">%</span>&nbsp;<span class="ident" id="2613880">secondsPerWeek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613896">return</span>&nbsp;<span class="ident" id="2613903">Weekday</span><span class="op" id="2613910">(</span><span class="builtintype" id="2613911">int</span><span class="op" id="2613914">(</span><span class="ident" id="2613915">sec</span><span class="op" id="2613918">)</span>&nbsp;<span class="op" id="2613920">/</span>&nbsp;<span class="ident" id="2613922">secondsPerDay</span><span class="op" id="2613935">)</span><br>
<span class="lineno"></span><span class="op" id="2613937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="2613940">//&nbsp;ISOWeek&nbsp;returns&nbsp;the&nbsp;ISO&nbsp;8601&nbsp;year&nbsp;and&nbsp;week&nbsp;number&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="comment" id="2614012">//&nbsp;Week&nbsp;ranges&nbsp;from&nbsp;1&nbsp;to&nbsp;53.&nbsp;Jan&nbsp;01&nbsp;to&nbsp;Jan&nbsp;03&nbsp;of&nbsp;year&nbsp;n&nbsp;might&nbsp;belong&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2614084">//&nbsp;week&nbsp;52&nbsp;or&nbsp;53&nbsp;of&nbsp;year&nbsp;n-1,&nbsp;and&nbsp;Dec&nbsp;29&nbsp;to&nbsp;Dec&nbsp;31&nbsp;might&nbsp;belong&nbsp;to&nbsp;week&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2614158">//&nbsp;of&nbsp;year&nbsp;n+1.</span><br>
<span class="lineno"></span><span class="keyword" id="2614174">func</span>&nbsp;<span class="op" id="2614179">(</span><span class="ident" id="2614180">t</span>&nbsp;<span class="ident" id="2614182">Time</span><span class="op" id="2614186">)</span>&nbsp;<span class="ident" id="2614188">ISOWeek</span><span class="op" id="2614195">(</span><span class="op" id="2614196">)</span>&nbsp;<span class="op" id="2614198">(</span><span class="ident" id="2614199">year</span><span class="op" id="2614203">,</span>&nbsp;<span class="ident" id="2614205">week</span>&nbsp;<span class="builtintype" id="2614210">int</span><span class="op" id="2614213">)</span>&nbsp;<span class="op" id="2614215">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614218">year</span><span class="op" id="2614222">,</span>&nbsp;<span class="ident" id="2614224">month</span><span class="op" id="2614229">,</span>&nbsp;<span class="ident" id="2614231">day</span><span class="op" id="2614234">,</span>&nbsp;<span class="ident" id="2614236">yday</span>&nbsp;<span class="op" id="2614241">:=</span>&nbsp;<span class="ident" id="2614244">t</span><span class="op" id="2614245">.</span><span class="ident" id="2614246">date</span><span class="op" id="2614250">(</span><span class="builtintype" id="2614251">true</span><span class="op" id="2614255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614258">wday</span>&nbsp;<span class="op" id="2614263">:=</span>&nbsp;<span class="builtintype" id="2614266">int</span><span class="op" id="2614269">(</span><span class="ident" id="2614270">t</span><span class="op" id="2614271">.</span><span class="ident" id="2614272">Weekday</span><span class="op" id="2614279">(</span><span class="op" id="2614280">)</span><span class="op" id="2614281">+</span><span class="num" id="2614282">6</span><span class="op" id="2614283">)</span>&nbsp;<span class="op" id="2614285">%</span>&nbsp;<span class="num" id="2614287">7</span>&nbsp;<span class="comment" id="2614289">//&nbsp;weekday&nbsp;but&nbsp;Monday&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614317">const</span>&nbsp;<span class="op" id="2614323">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614327">Mon</span>&nbsp;<span class="builtintype" id="2614331">int</span>&nbsp;<span class="op" id="2614335">=</span>&nbsp;<span class="ident" id="2614337">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614344">Tue</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614350">Wed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614356">Thu</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614362">Fri</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614368">Sat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614374">Sun</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614379">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614383">//&nbsp;Calculate&nbsp;week&nbsp;as&nbsp;number&nbsp;of&nbsp;Mondays&nbsp;in&nbsp;year&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614437">//&nbsp;and&nbsp;including&nbsp;today,&nbsp;plus&nbsp;1&nbsp;because&nbsp;the&nbsp;first&nbsp;week&nbsp;is&nbsp;week&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614503">//&nbsp;Putting&nbsp;the&nbsp;+&nbsp;1&nbsp;inside&nbsp;the&nbsp;numerator&nbsp;as&nbsp;a&nbsp;+&nbsp;7&nbsp;keeps&nbsp;the</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614563">//&nbsp;numerator&nbsp;from&nbsp;being&nbsp;negative,&nbsp;which&nbsp;would&nbsp;cause&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614622">//&nbsp;round&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614645">week</span>&nbsp;<span class="op" id="2614650">=</span>&nbsp;<span class="op" id="2614652">(</span><span class="ident" id="2614653">yday</span>&nbsp;<span class="op" id="2614658">-</span>&nbsp;<span class="ident" id="2614660">wday</span>&nbsp;<span class="op" id="2614665">+</span>&nbsp;<span class="num" id="2614667">7</span><span class="op" id="2614668">)</span>&nbsp;<span class="op" id="2614670">/</span>&nbsp;<span class="num" id="2614672">7</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614676">//&nbsp;The&nbsp;week&nbsp;number&nbsp;is&nbsp;now&nbsp;correct&nbsp;under&nbsp;the&nbsp;assumption</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614732">//&nbsp;that&nbsp;the&nbsp;first&nbsp;Monday&nbsp;of&nbsp;the&nbsp;year&nbsp;is&nbsp;in&nbsp;week&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614784">//&nbsp;If&nbsp;Jan&nbsp;1&nbsp;is&nbsp;a&nbsp;Tuesday,&nbsp;Wednesday,&nbsp;or&nbsp;Thursday,&nbsp;the&nbsp;first&nbsp;Monday</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614852">//&nbsp;is&nbsp;actually&nbsp;in&nbsp;week&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614879">jan1wday</span>&nbsp;<span class="op" id="2614888">:=</span>&nbsp;<span class="op" id="2614891">(</span><span class="ident" id="2614892">wday</span>&nbsp;<span class="op" id="2614897">-</span>&nbsp;<span class="ident" id="2614899">yday</span>&nbsp;<span class="op" id="2614904">+</span>&nbsp;<span class="num" id="2614906">7</span><span class="op" id="2614907">*</span><span class="num" id="2614908">53</span><span class="op" id="2614910">)</span>&nbsp;<span class="op" id="2614912">%</span>&nbsp;<span class="num" id="2614914">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614917">if</span>&nbsp;<span class="ident" id="2614920">Tue</span>&nbsp;<span class="op" id="2614924">&lt;=</span>&nbsp;<span class="ident" id="2614927">jan1wday</span>&nbsp;<span class="op" id="2614936">&amp;&amp;</span>&nbsp;<span class="ident" id="2614939">jan1wday</span>&nbsp;<span class="op" id="2614948">&lt;=</span>&nbsp;<span class="ident" id="2614951">Thu</span>&nbsp;<span class="op" id="2614955">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614959">week</span><span class="op" id="2614963">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614971">//&nbsp;If&nbsp;the&nbsp;week&nbsp;number&nbsp;is&nbsp;still&nbsp;0,&nbsp;we&#39;re&nbsp;in&nbsp;early&nbsp;January&nbsp;but&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615036">//&nbsp;the&nbsp;last&nbsp;week&nbsp;of&nbsp;last&nbsp;year.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615068">if</span>&nbsp;<span class="ident" id="2615071">week</span>&nbsp;<span class="op" id="2615076">==</span>&nbsp;<span class="num" id="2615079">0</span>&nbsp;<span class="op" id="2615081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615085">year</span><span class="op" id="2615089">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615094">week</span>&nbsp;<span class="op" id="2615099">=</span>&nbsp;<span class="num" id="2615101">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615106">//&nbsp;A&nbsp;year&nbsp;has&nbsp;53&nbsp;weeks&nbsp;when&nbsp;Jan&nbsp;1&nbsp;or&nbsp;Dec&nbsp;31&nbsp;is&nbsp;a&nbsp;Thursday,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615167">//&nbsp;meaning&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Friday</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615215">//&nbsp;or&nbsp;it&nbsp;was&nbsp;a&nbsp;leap&nbsp;year&nbsp;and&nbsp;Jan&nbsp;1&nbsp;of&nbsp;the&nbsp;next&nbsp;year&nbsp;is&nbsp;a&nbsp;Saturday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615284">if</span>&nbsp;<span class="ident" id="2615287">jan1wday</span>&nbsp;<span class="op" id="2615296">==</span>&nbsp;<span class="ident" id="2615299">Fri</span>&nbsp;<span class="op" id="2615303">||</span>&nbsp;<span class="op" id="2615306">(</span><span class="ident" id="2615307">jan1wday</span>&nbsp;<span class="op" id="2615316">==</span>&nbsp;<span class="ident" id="2615319">Sat</span>&nbsp;<span class="op" id="2615323">&amp;&amp;</span>&nbsp;<span class="ident" id="2615326">isLeap</span><span class="op" id="2615332">(</span><span class="ident" id="2615333">year</span><span class="op" id="2615337">)</span><span class="op" id="2615338">)</span>&nbsp;<span class="op" id="2615340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615345">week</span><span class="op" id="2615349">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615357">}</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615361">//&nbsp;December&nbsp;29&nbsp;to&nbsp;31&nbsp;are&nbsp;in&nbsp;week&nbsp;1&nbsp;of&nbsp;next&nbsp;year&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615413">//&nbsp;they&nbsp;are&nbsp;after&nbsp;the&nbsp;last&nbsp;Thursday&nbsp;of&nbsp;the&nbsp;year&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615466">//&nbsp;December&nbsp;31&nbsp;is&nbsp;a&nbsp;Monday,&nbsp;Tuesday,&nbsp;or&nbsp;Wednesday.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615518">if</span>&nbsp;<span class="ident" id="2615521">month</span>&nbsp;<span class="op" id="2615527">==</span>&nbsp;<span class="ident" id="2615530">December</span>&nbsp;<span class="op" id="2615539">&amp;&amp;</span>&nbsp;<span class="ident" id="2615542">day</span>&nbsp;<span class="op" id="2615546">&gt;=</span>&nbsp;<span class="num" id="2615549">29</span>&nbsp;<span class="op" id="2615552">&amp;&amp;</span>&nbsp;<span class="ident" id="2615555">wday</span>&nbsp;<span class="op" id="2615560">&lt;</span>&nbsp;<span class="ident" id="2615562">Thu</span>&nbsp;<span class="op" id="2615566">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615570">if</span>&nbsp;<span class="ident" id="2615573">dec31wday</span>&nbsp;<span class="op" id="2615583">:=</span>&nbsp;<span class="op" id="2615586">(</span><span class="ident" id="2615587">wday</span>&nbsp;<span class="op" id="2615592">+</span>&nbsp;<span class="num" id="2615594">31</span>&nbsp;<span class="op" id="2615597">-</span>&nbsp;<span class="ident" id="2615599">day</span><span class="op" id="2615602">)</span>&nbsp;<span class="op" id="2615604">%</span>&nbsp;<span class="num" id="2615606">7</span><span class="op" id="2615607">;</span>&nbsp;<span class="ident" id="2615609">Mon</span>&nbsp;<span class="op" id="2615613">&lt;=</span>&nbsp;<span class="ident" id="2615616">dec31wday</span>&nbsp;<span class="op" id="2615626">&amp;&amp;</span>&nbsp;<span class="ident" id="2615629">dec31wday</span>&nbsp;<span class="op" id="2615639">&lt;=</span>&nbsp;<span class="ident" id="2615642">Wed</span>&nbsp;<span class="op" id="2615646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615651">year</span><span class="op" id="2615655">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615661">week</span>&nbsp;<span class="op" id="2615666">=</span>&nbsp;<span class="num" id="2615668">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615675">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615679">return</span><br>
<span class="lineno"></span><span class="op" id="2615686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615689">//&nbsp;Clock&nbsp;returns&nbsp;the&nbsp;hour,&nbsp;minute,&nbsp;and&nbsp;second&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t.</span><br>
<span class="lineno">385</span><span class="keyword" id="2615766">func</span>&nbsp;<span class="op" id="2615771">(</span><span class="ident" id="2615772">t</span>&nbsp;<span class="ident" id="2615774">Time</span><span class="op" id="2615778">)</span>&nbsp;<span class="ident" id="2615780">Clock</span><span class="op" id="2615785">(</span><span class="op" id="2615786">)</span>&nbsp;<span class="op" id="2615788">(</span><span class="ident" id="2615789">hour</span><span class="op" id="2615793">,</span>&nbsp;<span class="ident" id="2615795">min</span><span class="op" id="2615798">,</span>&nbsp;<span class="ident" id="2615800">sec</span>&nbsp;<span class="builtintype" id="2615804">int</span><span class="op" id="2615807">)</span>&nbsp;<span class="op" id="2615809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615812">return</span>&nbsp;<span class="ident" id="2615819">absClock</span><span class="op" id="2615827">(</span><span class="ident" id="2615828">t</span><span class="op" id="2615829">.</span><span class="ident" id="2615830">abs</span><span class="op" id="2615833">(</span><span class="op" id="2615834">)</span><span class="op" id="2615835">)</span><br>
<span class="lineno"></span><span class="op" id="2615837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2615840">//&nbsp;absClock&nbsp;is&nbsp;like&nbsp;clock&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno">390</span><span class="keyword" id="2615900">func</span>&nbsp;<span class="ident" id="2615905">absClock</span><span class="op" id="2615913">(</span><span class="ident" id="2615914">abs</span>&nbsp;<span class="ident" id="2615918">uint64</span><span class="op" id="2615924">)</span>&nbsp;<span class="op" id="2615926">(</span><span class="ident" id="2615927">hour</span><span class="op" id="2615931">,</span>&nbsp;<span class="ident" id="2615933">min</span><span class="op" id="2615936">,</span>&nbsp;<span class="ident" id="2615938">sec</span>&nbsp;<span class="builtintype" id="2615942">int</span><span class="op" id="2615945">)</span>&nbsp;<span class="op" id="2615947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615950">sec</span>&nbsp;<span class="op" id="2615954">=</span>&nbsp;<span class="builtintype" id="2615956">int</span><span class="op" id="2615959">(</span><span class="ident" id="2615960">abs</span>&nbsp;<span class="op" id="2615964">%</span>&nbsp;<span class="ident" id="2615966">secondsPerDay</span><span class="op" id="2615979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615982">hour</span>&nbsp;<span class="op" id="2615987">=</span>&nbsp;<span class="ident" id="2615989">sec</span>&nbsp;<span class="op" id="2615993">/</span>&nbsp;<span class="ident" id="2615995">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616011">sec</span>&nbsp;<span class="op" id="2616015">-=</span>&nbsp;<span class="ident" id="2616018">hour</span>&nbsp;<span class="op" id="2616023">*</span>&nbsp;<span class="ident" id="2616025">secondsPerHour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616041">min</span>&nbsp;<span class="op" id="2616045">=</span>&nbsp;<span class="ident" id="2616047">sec</span>&nbsp;<span class="op" id="2616051">/</span>&nbsp;<span class="ident" id="2616053">secondsPerMinute</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616071">sec</span>&nbsp;<span class="op" id="2616075">-=</span>&nbsp;<span class="ident" id="2616078">min</span>&nbsp;<span class="op" id="2616082">*</span>&nbsp;<span class="ident" id="2616084">secondsPerMinute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616102">return</span><br>
<span class="lineno"></span><span class="op" id="2616109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616112">//&nbsp;Hour&nbsp;returns&nbsp;the&nbsp;hour&nbsp;within&nbsp;the&nbsp;day&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;23].</span><br>
<span class="lineno">400</span><span class="keyword" id="2616190">func</span>&nbsp;<span class="op" id="2616195">(</span><span class="ident" id="2616196">t</span>&nbsp;<span class="ident" id="2616198">Time</span><span class="op" id="2616202">)</span>&nbsp;<span class="ident" id="2616204">Hour</span><span class="op" id="2616208">(</span><span class="op" id="2616209">)</span>&nbsp;<span class="builtintype" id="2616211">int</span>&nbsp;<span class="op" id="2616215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616218">return</span>&nbsp;<span class="builtintype" id="2616225">int</span><span class="op" id="2616228">(</span><span class="ident" id="2616229">t</span><span class="op" id="2616230">.</span><span class="ident" id="2616231">abs</span><span class="op" id="2616234">(</span><span class="op" id="2616235">)</span><span class="op" id="2616236">%</span><span class="ident" id="2616237">secondsPerDay</span><span class="op" id="2616250">)</span>&nbsp;<span class="op" id="2616252">/</span>&nbsp;<span class="ident" id="2616254">secondsPerHour</span><br>
<span class="lineno"></span><span class="op" id="2616269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616272">//&nbsp;Minute&nbsp;returns&nbsp;the&nbsp;minute&nbsp;offset&nbsp;within&nbsp;the&nbsp;hour&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">405</span><span class="keyword" id="2616362">func</span>&nbsp;<span class="op" id="2616367">(</span><span class="ident" id="2616368">t</span>&nbsp;<span class="ident" id="2616370">Time</span><span class="op" id="2616374">)</span>&nbsp;<span class="ident" id="2616376">Minute</span><span class="op" id="2616382">(</span><span class="op" id="2616383">)</span>&nbsp;<span class="builtintype" id="2616385">int</span>&nbsp;<span class="op" id="2616389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616392">return</span>&nbsp;<span class="builtintype" id="2616399">int</span><span class="op" id="2616402">(</span><span class="ident" id="2616403">t</span><span class="op" id="2616404">.</span><span class="ident" id="2616405">abs</span><span class="op" id="2616408">(</span><span class="op" id="2616409">)</span><span class="op" id="2616410">%</span><span class="ident" id="2616411">secondsPerHour</span><span class="op" id="2616425">)</span>&nbsp;<span class="op" id="2616427">/</span>&nbsp;<span class="ident" id="2616429">secondsPerMinute</span><br>
<span class="lineno"></span><span class="op" id="2616446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616449">//&nbsp;Second&nbsp;returns&nbsp;the&nbsp;second&nbsp;offset&nbsp;within&nbsp;the&nbsp;minute&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;59].</span><br>
<span class="lineno">410</span><span class="keyword" id="2616541">func</span>&nbsp;<span class="op" id="2616546">(</span><span class="ident" id="2616547">t</span>&nbsp;<span class="ident" id="2616549">Time</span><span class="op" id="2616553">)</span>&nbsp;<span class="ident" id="2616555">Second</span><span class="op" id="2616561">(</span><span class="op" id="2616562">)</span>&nbsp;<span class="builtintype" id="2616564">int</span>&nbsp;<span class="op" id="2616568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616571">return</span>&nbsp;<span class="builtintype" id="2616578">int</span><span class="op" id="2616581">(</span><span class="ident" id="2616582">t</span><span class="op" id="2616583">.</span><span class="ident" id="2616584">abs</span><span class="op" id="2616587">(</span><span class="op" id="2616588">)</span>&nbsp;<span class="op" id="2616590">%</span>&nbsp;<span class="ident" id="2616592">secondsPerMinute</span><span class="op" id="2616608">)</span><br>
<span class="lineno"></span><span class="op" id="2616610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616613">//&nbsp;Nanosecond&nbsp;returns&nbsp;the&nbsp;nanosecond&nbsp;offset&nbsp;within&nbsp;the&nbsp;second&nbsp;specified&nbsp;by&nbsp;t,</span><br>
<span class="lineno">415</span><span class="comment" id="2616691">//&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2616723">func</span>&nbsp;<span class="op" id="2616728">(</span><span class="ident" id="2616729">t</span>&nbsp;<span class="ident" id="2616731">Time</span><span class="op" id="2616735">)</span>&nbsp;<span class="ident" id="2616737">Nanosecond</span><span class="op" id="2616747">(</span><span class="op" id="2616748">)</span>&nbsp;<span class="builtintype" id="2616750">int</span>&nbsp;<span class="op" id="2616754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616757">return</span>&nbsp;<span class="builtintype" id="2616764">int</span><span class="op" id="2616767">(</span><span class="ident" id="2616768">t</span><span class="op" id="2616769">.</span><span class="ident" id="2616770">nsec</span><span class="op" id="2616774">)</span><br>
<span class="lineno"></span><span class="op" id="2616776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="2616779">//&nbsp;YearDay&nbsp;returns&nbsp;the&nbsp;day&nbsp;of&nbsp;the&nbsp;year&nbsp;specified&nbsp;by&nbsp;t,&nbsp;in&nbsp;the&nbsp;range&nbsp;[1,365]&nbsp;for&nbsp;non-leap&nbsp;years,</span><br>
<span class="lineno"></span><span class="comment" id="2616875">//&nbsp;and&nbsp;[1,366]&nbsp;in&nbsp;leap&nbsp;years.</span><br>
<span class="lineno"></span><span class="keyword" id="2616905">func</span>&nbsp;<span class="op" id="2616910">(</span><span class="ident" id="2616911">t</span>&nbsp;<span class="ident" id="2616913">Time</span><span class="op" id="2616917">)</span>&nbsp;<span class="ident" id="2616919">YearDay</span><span class="op" id="2616926">(</span><span class="op" id="2616927">)</span>&nbsp;<span class="builtintype" id="2616929">int</span>&nbsp;<span class="op" id="2616933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616936">_</span><span class="op" id="2616937">,</span>&nbsp;<span class="ident" id="2616939">_</span><span class="op" id="2616940">,</span>&nbsp;<span class="ident" id="2616942">_</span><span class="op" id="2616943">,</span>&nbsp;<span class="ident" id="2616945">yday</span>&nbsp;<span class="op" id="2616950">:=</span>&nbsp;<span class="ident" id="2616953">t</span><span class="op" id="2616954">.</span><span class="ident" id="2616955">date</span><span class="op" id="2616959">(</span><span class="builtintype" id="2616960">false</span><span class="op" id="2616965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616968">return</span>&nbsp;<span class="ident" id="2616975">yday</span>&nbsp;<span class="op" id="2616980">+</span>&nbsp;<span class="num" id="2616982">1</span><br>
<span class="lineno">425</span><span class="op" id="2616984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2616987">//&nbsp;A&nbsp;Duration&nbsp;represents&nbsp;the&nbsp;elapsed&nbsp;time&nbsp;between&nbsp;two&nbsp;instants</span><br>
<span class="lineno"></span><span class="comment" id="2617050">//&nbsp;as&nbsp;an&nbsp;int64&nbsp;nanosecond&nbsp;count.&nbsp;&nbsp;The&nbsp;representation&nbsp;limits&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2617114">//&nbsp;largest&nbsp;representable&nbsp;duration&nbsp;to&nbsp;approximately&nbsp;290&nbsp;years.</span><br>
<span class="lineno">430</span><span class="keyword" id="2617176">type</span>&nbsp;<span class="ident" id="2617181">Duration</span>&nbsp;<span class="ident" id="2617190">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2617197">const</span>&nbsp;<span class="op" id="2617203">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617206">minDuration</span>&nbsp;<span class="ident" id="2617218">Duration</span>&nbsp;<span class="op" id="2617227">=</span>&nbsp;<span class="op" id="2617229">-</span><span class="num" id="2617230">1</span>&nbsp;<span class="op" id="2617232">&lt;&lt;</span>&nbsp;<span class="num" id="2617235">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617239">maxDuration</span>&nbsp;<span class="ident" id="2617251">Duration</span>&nbsp;<span class="op" id="2617260">=</span>&nbsp;<span class="num" id="2617262">1</span><span class="op" id="2617263">&lt;&lt;</span><span class="num" id="2617265">63</span>&nbsp;<span class="op" id="2617268">-</span>&nbsp;<span class="num" id="2617270">1</span><br>
<span class="lineno">435</span><span class="op" id="2617272">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2617275">//&nbsp;Common&nbsp;durations.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;definition&nbsp;for&nbsp;units&nbsp;of&nbsp;Day&nbsp;or&nbsp;larger</span><br>
<span class="lineno"></span><span class="comment" id="2617347">//&nbsp;to&nbsp;avoid&nbsp;confusion&nbsp;across&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;zone&nbsp;transitions.</span><br>
<span class="lineno"></span><span class="comment" id="2617416">//</span><br>
<span class="lineno">440</span><span class="comment" id="2617419">//&nbsp;To&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;units&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;divide:</span><br>
<span class="lineno"></span><span class="comment" id="2617474">//&nbsp;&nbsp;&nbsp;&nbspsecond&nbsp;:=&nbsp;time.Second</span><br>
<span class="lineno"></span><span class="comment" id="2617499">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(int64(second/time.Millisecond))&nbsp;//&nbsp;prints&nbsp;1000</span><br>
<span class="lineno"></span><span class="comment" id="2617559">//</span><br>
<span class="lineno"></span><span class="comment" id="2617562">//&nbsp;To&nbsp;convert&nbsp;an&nbsp;integer&nbsp;number&nbsp;of&nbsp;units&nbsp;to&nbsp;a&nbsp;Duration,&nbsp;multiply:</span><br>
<span class="lineno">445</span><span class="comment" id="2617628">//&nbsp;&nbsp;&nbsp;&nbspseconds&nbsp;:=&nbsp;10</span><br>
<span class="lineno"></span><span class="comment" id="2617645">//&nbsp;&nbsp;&nbsp;&nbspfmt.Print(time.Duration(seconds)*time.Second)&nbsp;//&nbsp;prints&nbsp;10s</span><br>
<span class="lineno"></span><span class="comment" id="2617708">//</span><br>
<span class="lineno"></span><span class="keyword" id="2617711">const</span>&nbsp;<span class="op" id="2617717">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617720">Nanosecond</span>&nbsp;&nbsp;<span class="ident" id="2617732">Duration</span>&nbsp;<span class="op" id="2617741">=</span>&nbsp;<span class="num" id="2617743">1</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617746">Microsecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2617767">=</span>&nbsp;<span class="num" id="2617769">1000</span>&nbsp;<span class="op" id="2617774">*</span>&nbsp;<span class="ident" id="2617776">Nanosecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617788">Millisecond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2617809">=</span>&nbsp;<span class="num" id="2617811">1000</span>&nbsp;<span class="op" id="2617816">*</span>&nbsp;<span class="ident" id="2617818">Microsecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617831">Second</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2617852">=</span>&nbsp;<span class="num" id="2617854">1000</span>&nbsp;<span class="op" id="2617859">*</span>&nbsp;<span class="ident" id="2617861">Millisecond</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617874">Minute</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2617895">=</span>&nbsp;<span class="num" id="2617897">60</span>&nbsp;<span class="op" id="2617900">*</span>&nbsp;<span class="ident" id="2617902">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617910">Hour</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2617931">=</span>&nbsp;<span class="num" id="2617933">60</span>&nbsp;<span class="op" id="2617936">*</span>&nbsp;<span class="ident" id="2617938">Minute</span><br>
<span class="lineno">455</span><span class="op" id="2617945">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2617948">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;string&nbsp;representing&nbsp;the&nbsp;duration&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;72h3m0.5s&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2618026">//&nbsp;Leading&nbsp;zero&nbsp;units&nbsp;are&nbsp;omitted.&nbsp;&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;durations&nbsp;less&nbsp;than&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="2618105">//&nbsp;second&nbsp;format&nbsp;use&nbsp;a&nbsp;smaller&nbsp;unit&nbsp;(milli-,&nbsp;micro-,&nbsp;or&nbsp;nanoseconds)&nbsp;to&nbsp;ensure</span><br>
<span class="lineno">460</span><span class="comment" id="2618184">//&nbsp;that&nbsp;the&nbsp;leading&nbsp;digit&nbsp;is&nbsp;non-zero.&nbsp;&nbsp;The&nbsp;zero&nbsp;duration&nbsp;formats&nbsp;as&nbsp;0,</span><br>
<span class="lineno"></span><span class="comment" id="2618256">//&nbsp;with&nbsp;no&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="2618273">func</span>&nbsp;<span class="op" id="2618278">(</span><span class="ident" id="2618279">d</span>&nbsp;<span class="ident" id="2618281">Duration</span><span class="op" id="2618289">)</span>&nbsp;<span class="ident" id="2618291">String</span><span class="op" id="2618297">(</span><span class="op" id="2618298">)</span>&nbsp;<span class="builtintype" id="2618300">string</span>&nbsp;<span class="op" id="2618307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618310">//&nbsp;Largest&nbsp;time&nbsp;is&nbsp;2540400h10m10.000000000s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618355">var</span>&nbsp;<span class="ident" id="2618359">buf</span>&nbsp;<span class="op" id="2618363">[</span><span class="num" id="2618364">32</span><span class="op" id="2618366">]</span><span class="builtintype" id="2618367">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618373">w</span>&nbsp;<span class="op" id="2618375">:=</span>&nbsp;<span class="builtinfunc" id="2618378">len</span><span class="op" id="2618381">(</span><span class="ident" id="2618382">buf</span><span class="op" id="2618385">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618389">u</span>&nbsp;<span class="op" id="2618391">:=</span>&nbsp;<span class="ident" id="2618394">uint64</span><span class="op" id="2618400">(</span><span class="ident" id="2618401">d</span><span class="op" id="2618402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618405">neg</span>&nbsp;<span class="op" id="2618409">:=</span>&nbsp;<span class="ident" id="2618412">d</span>&nbsp;<span class="op" id="2618414">&lt;</span>&nbsp;<span class="num" id="2618416">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618419">if</span>&nbsp;<span class="ident" id="2618422">neg</span>&nbsp;<span class="op" id="2618426">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618430">u</span>&nbsp;<span class="op" id="2618432">=</span>&nbsp;<span class="op" id="2618434">-</span><span class="ident" id="2618435">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2618438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618442">if</span>&nbsp;<span class="ident" id="2618445">u</span>&nbsp;<span class="op" id="2618447">&lt;</span>&nbsp;<span class="ident" id="2618449">uint64</span><span class="op" id="2618455">(</span><span class="ident" id="2618456">Second</span><span class="op" id="2618462">)</span>&nbsp;<span class="op" id="2618464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618468">//&nbsp;Special&nbsp;case:&nbsp;if&nbsp;duration&nbsp;is&nbsp;smaller&nbsp;than&nbsp;a&nbsp;second,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618525">//&nbsp;use&nbsp;smaller&nbsp;units,&nbsp;like&nbsp;1.2ms</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618560">var</span>&nbsp;<span class="ident" id="2618564">prec</span>&nbsp;<span class="builtintype" id="2618569">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618575">w</span><span class="op" id="2618576">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618581">buf</span><span class="op" id="2618584">[</span><span class="ident" id="2618585">w</span><span class="op" id="2618586">]</span>&nbsp;<span class="op" id="2618588">=</span>&nbsp;<span class="string" id="2618590">&#39;s&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618596">w</span><span class="op" id="2618597">--</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618602">switch</span>&nbsp;<span class="op" id="2618609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618613">case</span>&nbsp;<span class="ident" id="2618618">u</span>&nbsp;<span class="op" id="2618620">==</span>&nbsp;<span class="num" id="2618623">0</span><span class="op" id="2618624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618629">return</span>&nbsp;<span class="string" id="2618636">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618642">case</span>&nbsp;<span class="ident" id="2618647">u</span>&nbsp;<span class="op" id="2618649">&lt;</span>&nbsp;<span class="ident" id="2618651">uint64</span><span class="op" id="2618657">(</span><span class="ident" id="2618658">Microsecond</span><span class="op" id="2618669">)</span><span class="op" id="2618670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618675">//&nbsp;print&nbsp;nanoseconds</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618699">prec</span>&nbsp;<span class="op" id="2618704">=</span>&nbsp;<span class="num" id="2618706">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618711">buf</span><span class="op" id="2618714">[</span><span class="ident" id="2618715">w</span><span class="op" id="2618716">]</span>&nbsp;<span class="op" id="2618718">=</span>&nbsp;<span class="string" id="2618720">&#39;n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618726">case</span>&nbsp;<span class="ident" id="2618731">u</span>&nbsp;<span class="op" id="2618733">&lt;</span>&nbsp;<span class="ident" id="2618735">uint64</span><span class="op" id="2618741">(</span><span class="ident" id="2618742">Millisecond</span><span class="op" id="2618753">)</span><span class="op" id="2618754">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618759">//&nbsp;print&nbsp;microseconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618784">prec</span>&nbsp;<span class="op" id="2618789">=</span>&nbsp;<span class="num" id="2618791">3</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618796">//&nbsp;U+00B5&nbsp;&#39;µ&#39;&nbsp;micro&nbsp;sign&nbsp;==&nbsp;0xC2&nbsp;0xB5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618838">w</span><span class="op" id="2618839">--</span>&nbsp;<span class="comment" id="2618842">//&nbsp;Need&nbsp;room&nbsp;for&nbsp;two&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2618873">copy</span><span class="op" id="2618877">(</span><span class="ident" id="2618878">buf</span><span class="op" id="2618881">[</span><span class="ident" id="2618882">w</span><span class="op" id="2618883">:</span><span class="op" id="2618884">]</span><span class="op" id="2618885">,</span>&nbsp;<span class="string" id="2618887">&#34;µ&#34;</span><span class="op" id="2618891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618895">default</span><span class="op" id="2618902">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618907">//&nbsp;print&nbsp;milliseconds</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618932">prec</span>&nbsp;<span class="op" id="2618937">=</span>&nbsp;<span class="num" id="2618939">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618944">buf</span><span class="op" id="2618947">[</span><span class="ident" id="2618948">w</span><span class="op" id="2618949">]</span>&nbsp;<span class="op" id="2618951">=</span>&nbsp;<span class="string" id="2618953">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2618959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618963">w</span><span class="op" id="2618964">,</span>&nbsp;<span class="ident" id="2618966">u</span>&nbsp;<span class="op" id="2618968">=</span>&nbsp;<span class="ident" id="2618970">fmtFrac</span><span class="op" id="2618977">(</span><span class="ident" id="2618978">buf</span><span class="op" id="2618981">[</span><span class="op" id="2618982">:</span><span class="ident" id="2618983">w</span><span class="op" id="2618984">]</span><span class="op" id="2618985">,</span>&nbsp;<span class="ident" id="2618987">u</span><span class="op" id="2618988">,</span>&nbsp;<span class="ident" id="2618990">prec</span><span class="op" id="2618994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618998">w</span>&nbsp;<span class="op" id="2619000">=</span>&nbsp;<span class="ident" id="2619002">fmtInt</span><span class="op" id="2619008">(</span><span class="ident" id="2619009">buf</span><span class="op" id="2619012">[</span><span class="op" id="2619013">:</span><span class="ident" id="2619014">w</span><span class="op" id="2619015">]</span><span class="op" id="2619016">,</span>&nbsp;<span class="ident" id="2619018">u</span><span class="op" id="2619019">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619022">}</span>&nbsp;<span class="keyword" id="2619024">else</span>&nbsp;<span class="op" id="2619029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619033">w</span><span class="op" id="2619034">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619039">buf</span><span class="op" id="2619042">[</span><span class="ident" id="2619043">w</span><span class="op" id="2619044">]</span>&nbsp;<span class="op" id="2619046">=</span>&nbsp;<span class="string" id="2619048">&#39;s&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619055">w</span><span class="op" id="2619056">,</span>&nbsp;<span class="ident" id="2619058">u</span>&nbsp;<span class="op" id="2619060">=</span>&nbsp;<span class="ident" id="2619062">fmtFrac</span><span class="op" id="2619069">(</span><span class="ident" id="2619070">buf</span><span class="op" id="2619073">[</span><span class="op" id="2619074">:</span><span class="ident" id="2619075">w</span><span class="op" id="2619076">]</span><span class="op" id="2619077">,</span>&nbsp;<span class="ident" id="2619079">u</span><span class="op" id="2619080">,</span>&nbsp;<span class="num" id="2619082">9</span><span class="op" id="2619083">)</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619088">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619118">w</span>&nbsp;<span class="op" id="2619120">=</span>&nbsp;<span class="ident" id="2619122">fmtInt</span><span class="op" id="2619128">(</span><span class="ident" id="2619129">buf</span><span class="op" id="2619132">[</span><span class="op" id="2619133">:</span><span class="ident" id="2619134">w</span><span class="op" id="2619135">]</span><span class="op" id="2619136">,</span>&nbsp;<span class="ident" id="2619138">u</span><span class="op" id="2619139">%</span><span class="num" id="2619140">60</span><span class="op" id="2619142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619146">u</span>&nbsp;<span class="op" id="2619148">/=</span>&nbsp;<span class="num" id="2619151">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619157">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619187">if</span>&nbsp;<span class="ident" id="2619190">u</span>&nbsp;<span class="op" id="2619192">&gt;</span>&nbsp;<span class="num" id="2619194">0</span>&nbsp;<span class="op" id="2619196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619201">w</span><span class="op" id="2619202">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619208">buf</span><span class="op" id="2619211">[</span><span class="ident" id="2619212">w</span><span class="op" id="2619213">]</span>&nbsp;<span class="op" id="2619215">=</span>&nbsp;<span class="string" id="2619217">&#39;m&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619224">w</span>&nbsp;<span class="op" id="2619226">=</span>&nbsp;<span class="ident" id="2619228">fmtInt</span><span class="op" id="2619234">(</span><span class="ident" id="2619235">buf</span><span class="op" id="2619238">[</span><span class="op" id="2619239">:</span><span class="ident" id="2619240">w</span><span class="op" id="2619241">]</span><span class="op" id="2619242">,</span>&nbsp;<span class="ident" id="2619244">u</span><span class="op" id="2619245">%</span><span class="num" id="2619246">60</span><span class="op" id="2619248">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619253">u</span>&nbsp;<span class="op" id="2619255">/=</span>&nbsp;<span class="num" id="2619258">60</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619265">//&nbsp;u&nbsp;is&nbsp;now&nbsp;integer&nbsp;hours</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619294">//&nbsp;Stop&nbsp;at&nbsp;hours&nbsp;because&nbsp;days&nbsp;can&nbsp;be&nbsp;different&nbsp;lengths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619353">if</span>&nbsp;<span class="ident" id="2619356">u</span>&nbsp;<span class="op" id="2619358">&gt;</span>&nbsp;<span class="num" id="2619360">0</span>&nbsp;<span class="op" id="2619362">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619368">w</span><span class="op" id="2619369">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619376">buf</span><span class="op" id="2619379">[</span><span class="ident" id="2619380">w</span><span class="op" id="2619381">]</span>&nbsp;<span class="op" id="2619383">=</span>&nbsp;<span class="string" id="2619385">&#39;h&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619393">w</span>&nbsp;<span class="op" id="2619395">=</span>&nbsp;<span class="ident" id="2619397">fmtInt</span><span class="op" id="2619403">(</span><span class="ident" id="2619404">buf</span><span class="op" id="2619407">[</span><span class="op" id="2619408">:</span><span class="ident" id="2619409">w</span><span class="op" id="2619410">]</span><span class="op" id="2619411">,</span>&nbsp;<span class="ident" id="2619413">u</span><span class="op" id="2619414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619423">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619430">if</span>&nbsp;<span class="ident" id="2619433">neg</span>&nbsp;<span class="op" id="2619437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619441">w</span><span class="op" id="2619442">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619447">buf</span><span class="op" id="2619450">[</span><span class="ident" id="2619451">w</span><span class="op" id="2619452">]</span>&nbsp;<span class="op" id="2619454">=</span>&nbsp;<span class="string" id="2619456">&#39;-&#39;</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619465">return</span>&nbsp;<span class="builtintype" id="2619472">string</span><span class="op" id="2619478">(</span><span class="ident" id="2619479">buf</span><span class="op" id="2619482">[</span><span class="ident" id="2619483">w</span><span class="op" id="2619484">:</span><span class="op" id="2619485">]</span><span class="op" id="2619486">)</span><br>
<span class="lineno"></span><span class="op" id="2619488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="2619491">//&nbsp;fmtFrac&nbsp;formats&nbsp;the&nbsp;fraction&nbsp;of&nbsp;v/10**prec&nbsp;(e.g.,&nbsp;&#34;.12345&#34;)&nbsp;into&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2619563">//&nbsp;tail&nbsp;of&nbsp;buf,&nbsp;omitting&nbsp;trailing&nbsp;zeros.&nbsp;&nbsp;it&nbsp;omits&nbsp;the&nbsp;decimal</span><br>
<span class="lineno"></span><span class="comment" id="2619626">//&nbsp;point&nbsp;too&nbsp;when&nbsp;the&nbsp;fraction&nbsp;is&nbsp;0.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2619695">//&nbsp;output&nbsp;bytes&nbsp;begin&nbsp;and&nbsp;the&nbsp;value&nbsp;v/10**prec.</span><br>
<span class="lineno"></span><span class="keyword" id="2619743">func</span>&nbsp;<span class="ident" id="2619748">fmtFrac</span><span class="op" id="2619755">(</span><span class="ident" id="2619756">buf</span>&nbsp;<span class="op" id="2619760">[</span><span class="op" id="2619761">]</span><span class="builtintype" id="2619762">byte</span><span class="op" id="2619766">,</span>&nbsp;<span class="ident" id="2619768">v</span>&nbsp;<span class="ident" id="2619770">uint64</span><span class="op" id="2619776">,</span>&nbsp;<span class="ident" id="2619778">prec</span>&nbsp;<span class="builtintype" id="2619783">int</span><span class="op" id="2619786">)</span>&nbsp;<span class="op" id="2619788">(</span><span class="ident" id="2619789">nw</span>&nbsp;<span class="builtintype" id="2619792">int</span><span class="op" id="2619795">,</span>&nbsp;<span class="ident" id="2619797">nv</span>&nbsp;<span class="ident" id="2619800">uint64</span><span class="op" id="2619806">)</span>&nbsp;<span class="op" id="2619808">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619811">//&nbsp;Omit&nbsp;trailing&nbsp;zeros&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619870">w</span>&nbsp;<span class="op" id="2619872">:=</span>&nbsp;<span class="builtinfunc" id="2619875">len</span><span class="op" id="2619878">(</span><span class="ident" id="2619879">buf</span><span class="op" id="2619882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2619885">print</span>&nbsp;<span class="op" id="2619891">:=</span>&nbsp;<span class="builtintype" id="2619894">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619901">for</span>&nbsp;<span class="ident" id="2619905">i</span>&nbsp;<span class="op" id="2619907">:=</span>&nbsp;<span class="num" id="2619910">0</span><span class="op" id="2619911">;</span>&nbsp;<span class="ident" id="2619913">i</span>&nbsp;<span class="op" id="2619915">&lt;</span>&nbsp;<span class="ident" id="2619917">prec</span><span class="op" id="2619921">;</span>&nbsp;<span class="ident" id="2619923">i</span><span class="op" id="2619924">++</span>&nbsp;<span class="op" id="2619927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619931">digit</span>&nbsp;<span class="op" id="2619937">:=</span>&nbsp;<span class="ident" id="2619940">v</span>&nbsp;<span class="op" id="2619942">%</span>&nbsp;<span class="num" id="2619944">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2619949">print</span>&nbsp;<span class="op" id="2619955">=</span>&nbsp;<span class="builtinfunc" id="2619957">print</span>&nbsp;<span class="op" id="2619963">||</span>&nbsp;<span class="ident" id="2619966">digit</span>&nbsp;<span class="op" id="2619972">!=</span>&nbsp;<span class="num" id="2619975">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619979">if</span>&nbsp;<span class="builtinfunc" id="2619982">print</span>&nbsp;<span class="op" id="2619988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619993">w</span><span class="op" id="2619994">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620000">buf</span><span class="op" id="2620003">[</span><span class="ident" id="2620004">w</span><span class="op" id="2620005">]</span>&nbsp;<span class="op" id="2620007">=</span>&nbsp;<span class="builtintype" id="2620009">byte</span><span class="op" id="2620013">(</span><span class="ident" id="2620014">digit</span><span class="op" id="2620019">)</span>&nbsp;<span class="op" id="2620021">+</span>&nbsp;<span class="string" id="2620023">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620029">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620033">v</span>&nbsp;<span class="op" id="2620035">/=</span>&nbsp;<span class="num" id="2620038">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620045">if</span>&nbsp;<span class="builtinfunc" id="2620048">print</span>&nbsp;<span class="op" id="2620054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620058">w</span><span class="op" id="2620059">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620064">buf</span><span class="op" id="2620067">[</span><span class="ident" id="2620068">w</span><span class="op" id="2620069">]</span>&nbsp;<span class="op" id="2620071">=</span>&nbsp;<span class="string" id="2620073">&#39;.&#39;</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620081">return</span>&nbsp;<span class="ident" id="2620088">w</span><span class="op" id="2620089">,</span>&nbsp;<span class="ident" id="2620091">v</span><br>
<span class="lineno"></span><span class="op" id="2620093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620096">//&nbsp;fmtInt&nbsp;formats&nbsp;v&nbsp;into&nbsp;the&nbsp;tail&nbsp;of&nbsp;buf.</span><br>
<span class="lineno">560</span><span class="comment" id="2620138">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;where&nbsp;the&nbsp;output&nbsp;begins.</span><br>
<span class="lineno"></span><span class="keyword" id="2620187">func</span>&nbsp;<span class="ident" id="2620192">fmtInt</span><span class="op" id="2620198">(</span><span class="ident" id="2620199">buf</span>&nbsp;<span class="op" id="2620203">[</span><span class="op" id="2620204">]</span><span class="builtintype" id="2620205">byte</span><span class="op" id="2620209">,</span>&nbsp;<span class="ident" id="2620211">v</span>&nbsp;<span class="ident" id="2620213">uint64</span><span class="op" id="2620219">)</span>&nbsp;<span class="builtintype" id="2620221">int</span>&nbsp;<span class="op" id="2620225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620228">w</span>&nbsp;<span class="op" id="2620230">:=</span>&nbsp;<span class="builtinfunc" id="2620233">len</span><span class="op" id="2620236">(</span><span class="ident" id="2620237">buf</span><span class="op" id="2620240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620243">if</span>&nbsp;<span class="ident" id="2620246">v</span>&nbsp;<span class="op" id="2620248">==</span>&nbsp;<span class="num" id="2620251">0</span>&nbsp;<span class="op" id="2620253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620257">w</span><span class="op" id="2620258">--</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620263">buf</span><span class="op" id="2620266">[</span><span class="ident" id="2620267">w</span><span class="op" id="2620268">]</span>&nbsp;<span class="op" id="2620270">=</span>&nbsp;<span class="string" id="2620272">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620277">}</span>&nbsp;<span class="keyword" id="2620279">else</span>&nbsp;<span class="op" id="2620284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620288">for</span>&nbsp;<span class="ident" id="2620292">v</span>&nbsp;<span class="op" id="2620294">&gt;</span>&nbsp;<span class="num" id="2620296">0</span>&nbsp;<span class="op" id="2620298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620303">w</span><span class="op" id="2620304">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620310">buf</span><span class="op" id="2620313">[</span><span class="ident" id="2620314">w</span><span class="op" id="2620315">]</span>&nbsp;<span class="op" id="2620317">=</span>&nbsp;<span class="builtintype" id="2620319">byte</span><span class="op" id="2620323">(</span><span class="ident" id="2620324">v</span><span class="op" id="2620325">%</span><span class="num" id="2620326">10</span><span class="op" id="2620328">)</span>&nbsp;<span class="op" id="2620330">+</span>&nbsp;<span class="string" id="2620332">&#39;0&#39;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620339">v</span>&nbsp;<span class="op" id="2620341">/=</span>&nbsp;<span class="num" id="2620344">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620355">return</span>&nbsp;<span class="ident" id="2620362">w</span><br>
<span class="lineno"></span><span class="op" id="2620364">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="2620367">//&nbsp;Nanoseconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;an&nbsp;integer&nbsp;nanosecond&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2620435">func</span>&nbsp;<span class="op" id="2620440">(</span><span class="ident" id="2620441">d</span>&nbsp;<span class="ident" id="2620443">Duration</span><span class="op" id="2620451">)</span>&nbsp;<span class="ident" id="2620453">Nanoseconds</span><span class="op" id="2620464">(</span><span class="op" id="2620465">)</span>&nbsp;<span class="ident" id="2620467">int64</span>&nbsp;<span class="op" id="2620473">{</span>&nbsp;<span class="keyword" id="2620475">return</span>&nbsp;<span class="ident" id="2620482">int64</span><span class="op" id="2620487">(</span><span class="ident" id="2620488">d</span><span class="op" id="2620489">)</span>&nbsp;<span class="op" id="2620491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620494">//&nbsp;These&nbsp;methods&nbsp;return&nbsp;float64&nbsp;because&nbsp;the&nbsp;dominant</span><br>
<span class="lineno">580</span><span class="comment" id="2620547">//&nbsp;use&nbsp;case&nbsp;is&nbsp;for&nbsp;printing&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;like&nbsp;1.5s,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2620614">//&nbsp;a&nbsp;truncation&nbsp;to&nbsp;integer&nbsp;would&nbsp;make&nbsp;them&nbsp;not&nbsp;useful&nbsp;in&nbsp;those&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2620684">//&nbsp;Splitting&nbsp;the&nbsp;integer&nbsp;and&nbsp;fraction&nbsp;ourselves&nbsp;guarantees&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2620748">//&nbsp;converting&nbsp;the&nbsp;returned&nbsp;float64&nbsp;to&nbsp;an&nbsp;integer&nbsp;rounds&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="2620813">//&nbsp;way&nbsp;that&nbsp;a&nbsp;pure&nbsp;integer&nbsp;conversion&nbsp;would&nbsp;have,&nbsp;even&nbsp;in&nbsp;cases</span><br>
<span class="lineno">585</span><span class="comment" id="2620877">//&nbsp;where,&nbsp;say,&nbsp;float64(d.Nanoseconds())/1e9&nbsp;would&nbsp;have&nbsp;rounded</span><br>
<span class="lineno"></span><span class="comment" id="2620940">//&nbsp;differently.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620957">//&nbsp;Seconds&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;seconds.</span><br>
<span class="lineno"></span><span class="keyword" id="2621028">func</span>&nbsp;<span class="op" id="2621033">(</span><span class="ident" id="2621034">d</span>&nbsp;<span class="ident" id="2621036">Duration</span><span class="op" id="2621044">)</span>&nbsp;<span class="ident" id="2621046">Seconds</span><span class="op" id="2621053">(</span><span class="op" id="2621054">)</span>&nbsp;<span class="builtintype" id="2621056">float64</span>&nbsp;<span class="op" id="2621064">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621067">sec</span>&nbsp;<span class="op" id="2621071">:=</span>&nbsp;<span class="ident" id="2621074">d</span>&nbsp;<span class="op" id="2621076">/</span>&nbsp;<span class="ident" id="2621078">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621086">nsec</span>&nbsp;<span class="op" id="2621091">:=</span>&nbsp;<span class="ident" id="2621094">d</span>&nbsp;<span class="op" id="2621096">%</span>&nbsp;<span class="ident" id="2621098">Second</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621106">return</span>&nbsp;<span class="builtintype" id="2621113">float64</span><span class="op" id="2621120">(</span><span class="ident" id="2621121">sec</span><span class="op" id="2621124">)</span>&nbsp;<span class="op" id="2621126">+</span>&nbsp;<span class="builtintype" id="2621128">float64</span><span class="op" id="2621135">(</span><span class="ident" id="2621136">nsec</span><span class="op" id="2621140">)</span><span class="op" id="2621141">*</span><span class="num" id="2621142">1e-9</span><br>
<span class="lineno"></span><span class="op" id="2621147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="2621150">//&nbsp;Minutes&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;minutes.</span><br>
<span class="lineno"></span><span class="keyword" id="2621221">func</span>&nbsp;<span class="op" id="2621226">(</span><span class="ident" id="2621227">d</span>&nbsp;<span class="ident" id="2621229">Duration</span><span class="op" id="2621237">)</span>&nbsp;<span class="ident" id="2621239">Minutes</span><span class="op" id="2621246">(</span><span class="op" id="2621247">)</span>&nbsp;<span class="builtintype" id="2621249">float64</span>&nbsp;<span class="op" id="2621257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621260">min</span>&nbsp;<span class="op" id="2621264">:=</span>&nbsp;<span class="ident" id="2621267">d</span>&nbsp;<span class="op" id="2621269">/</span>&nbsp;<span class="ident" id="2621271">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621279">nsec</span>&nbsp;<span class="op" id="2621284">:=</span>&nbsp;<span class="ident" id="2621287">d</span>&nbsp;<span class="op" id="2621289">%</span>&nbsp;<span class="ident" id="2621291">Minute</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621299">return</span>&nbsp;<span class="builtintype" id="2621306">float64</span><span class="op" id="2621313">(</span><span class="ident" id="2621314">min</span><span class="op" id="2621317">)</span>&nbsp;<span class="op" id="2621319">+</span>&nbsp;<span class="builtintype" id="2621321">float64</span><span class="op" id="2621328">(</span><span class="ident" id="2621329">nsec</span><span class="op" id="2621333">)</span><span class="op" id="2621334">*</span><span class="op" id="2621335">(</span><span class="num" id="2621336">1e-9</span><span class="op" id="2621340">/</span><span class="num" id="2621341">60</span><span class="op" id="2621343">)</span><br>
<span class="lineno">600</span><span class="op" id="2621345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2621348">//&nbsp;Hours&nbsp;returns&nbsp;the&nbsp;duration&nbsp;as&nbsp;a&nbsp;floating&nbsp;point&nbsp;number&nbsp;of&nbsp;hours.</span><br>
<span class="lineno"></span><span class="keyword" id="2621415">func</span>&nbsp;<span class="op" id="2621420">(</span><span class="ident" id="2621421">d</span>&nbsp;<span class="ident" id="2621423">Duration</span><span class="op" id="2621431">)</span>&nbsp;<span class="ident" id="2621433">Hours</span><span class="op" id="2621438">(</span><span class="op" id="2621439">)</span>&nbsp;<span class="builtintype" id="2621441">float64</span>&nbsp;<span class="op" id="2621449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621452">hour</span>&nbsp;<span class="op" id="2621457">:=</span>&nbsp;<span class="ident" id="2621460">d</span>&nbsp;<span class="op" id="2621462">/</span>&nbsp;<span class="ident" id="2621464">Hour</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621470">nsec</span>&nbsp;<span class="op" id="2621475">:=</span>&nbsp;<span class="ident" id="2621478">d</span>&nbsp;<span class="op" id="2621480">%</span>&nbsp;<span class="ident" id="2621482">Hour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621488">return</span>&nbsp;<span class="builtintype" id="2621495">float64</span><span class="op" id="2621502">(</span><span class="ident" id="2621503">hour</span><span class="op" id="2621507">)</span>&nbsp;<span class="op" id="2621509">+</span>&nbsp;<span class="builtintype" id="2621511">float64</span><span class="op" id="2621518">(</span><span class="ident" id="2621519">nsec</span><span class="op" id="2621523">)</span><span class="op" id="2621524">*</span><span class="op" id="2621525">(</span><span class="num" id="2621526">1e-9</span><span class="op" id="2621530">/</span><span class="num" id="2621531">60</span><span class="op" id="2621533">/</span><span class="num" id="2621534">60</span><span class="op" id="2621536">)</span><br>
<span class="lineno"></span><span class="op" id="2621538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2621541">//&nbsp;Add&nbsp;returns&nbsp;the&nbsp;time&nbsp;t+d.</span><br>
<span class="lineno">610</span><span class="keyword" id="2621570">func</span>&nbsp;<span class="op" id="2621575">(</span><span class="ident" id="2621576">t</span>&nbsp;<span class="ident" id="2621578">Time</span><span class="op" id="2621582">)</span>&nbsp;<span class="ident" id="2621584">Add</span><span class="op" id="2621587">(</span><span class="ident" id="2621588">d</span>&nbsp;<span class="ident" id="2621590">Duration</span><span class="op" id="2621598">)</span>&nbsp;<span class="ident" id="2621600">Time</span>&nbsp;<span class="op" id="2621605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621608">t</span><span class="op" id="2621609">.</span><span class="ident" id="2621610">sec</span>&nbsp;<span class="op" id="2621614">+=</span>&nbsp;<span class="ident" id="2621617">int64</span><span class="op" id="2621622">(</span><span class="ident" id="2621623">d</span>&nbsp;<span class="op" id="2621625">/</span>&nbsp;<span class="num" id="2621627">1e9</span><span class="op" id="2621630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621633">nsec</span>&nbsp;<span class="op" id="2621638">:=</span>&nbsp;<span class="builtintype" id="2621641">int32</span><span class="op" id="2621646">(</span><span class="ident" id="2621647">t</span><span class="op" id="2621648">.</span><span class="ident" id="2621649">nsec</span><span class="op" id="2621653">)</span>&nbsp;<span class="op" id="2621655">+</span>&nbsp;<span class="builtintype" id="2621657">int32</span><span class="op" id="2621662">(</span><span class="ident" id="2621663">d</span><span class="op" id="2621664">%</span><span class="num" id="2621665">1e9</span><span class="op" id="2621668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621671">if</span>&nbsp;<span class="ident" id="2621674">nsec</span>&nbsp;<span class="op" id="2621679">&gt;=</span>&nbsp;<span class="num" id="2621682">1e9</span>&nbsp;<span class="op" id="2621686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621690">t</span><span class="op" id="2621691">.</span><span class="ident" id="2621692">sec</span><span class="op" id="2621695">++</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621700">nsec</span>&nbsp;<span class="op" id="2621705">-=</span>&nbsp;<span class="num" id="2621708">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621713">}</span>&nbsp;<span class="keyword" id="2621715">else</span>&nbsp;<span class="keyword" id="2621720">if</span>&nbsp;<span class="ident" id="2621723">nsec</span>&nbsp;<span class="op" id="2621728">&lt;</span>&nbsp;<span class="num" id="2621730">0</span>&nbsp;<span class="op" id="2621732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621736">t</span><span class="op" id="2621737">.</span><span class="ident" id="2621738">sec</span><span class="op" id="2621741">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621746">nsec</span>&nbsp;<span class="op" id="2621751">+=</span>&nbsp;<span class="num" id="2621754">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621759">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621762">t</span><span class="op" id="2621763">.</span><span class="ident" id="2621764">nsec</span>&nbsp;<span class="op" id="2621769">=</span>&nbsp;<span class="ident" id="2621771">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621777">return</span>&nbsp;<span class="ident" id="2621784">t</span><br>
<span class="lineno"></span><span class="op" id="2621786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2621789">//&nbsp;Sub&nbsp;returns&nbsp;the&nbsp;duration&nbsp;t-u.&nbsp;If&nbsp;the&nbsp;result&nbsp;exceeds&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)</span><br>
<span class="lineno">625</span><span class="comment" id="2621869">//&nbsp;value&nbsp;that&nbsp;can&nbsp;be&nbsp;stored&nbsp;in&nbsp;a&nbsp;Duration,&nbsp;the&nbsp;maximum&nbsp;(or&nbsp;minimum)&nbsp;duration</span><br>
<span class="lineno"></span><span class="comment" id="2621946">//&nbsp;will&nbsp;be&nbsp;returned.</span><br>
<span class="lineno"></span><span class="comment" id="2621967">//&nbsp;To&nbsp;compute&nbsp;t-d&nbsp;for&nbsp;a&nbsp;duration&nbsp;d,&nbsp;use&nbsp;t.Add(-d).</span><br>
<span class="lineno"></span><span class="keyword" id="2622018">func</span>&nbsp;<span class="op" id="2622023">(</span><span class="ident" id="2622024">t</span>&nbsp;<span class="ident" id="2622026">Time</span><span class="op" id="2622030">)</span>&nbsp;<span class="ident" id="2622032">Sub</span><span class="op" id="2622035">(</span><span class="ident" id="2622036">u</span>&nbsp;<span class="ident" id="2622038">Time</span><span class="op" id="2622042">)</span>&nbsp;<span class="ident" id="2622044">Duration</span>&nbsp;<span class="op" id="2622053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622056">d</span>&nbsp;<span class="op" id="2622058">:=</span>&nbsp;<span class="ident" id="2622061">Duration</span><span class="op" id="2622069">(</span><span class="ident" id="2622070">t</span><span class="op" id="2622071">.</span><span class="ident" id="2622072">sec</span><span class="op" id="2622075">-</span><span class="ident" id="2622076">u</span><span class="op" id="2622077">.</span><span class="ident" id="2622078">sec</span><span class="op" id="2622081">)</span><span class="op" id="2622082">*</span><span class="ident" id="2622083">Second</span>&nbsp;<span class="op" id="2622090">+</span>&nbsp;<span class="ident" id="2622092">Duration</span><span class="op" id="2622100">(</span><span class="builtintype" id="2622101">int32</span><span class="op" id="2622106">(</span><span class="ident" id="2622107">t</span><span class="op" id="2622108">.</span><span class="ident" id="2622109">nsec</span><span class="op" id="2622113">)</span><span class="op" id="2622114">-</span><span class="builtintype" id="2622115">int32</span><span class="op" id="2622120">(</span><span class="ident" id="2622121">u</span><span class="op" id="2622122">.</span><span class="ident" id="2622123">nsec</span><span class="op" id="2622127">)</span><span class="op" id="2622128">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2622131">//&nbsp;Check&nbsp;for&nbsp;overflow&nbsp;or&nbsp;underflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622168">switch</span>&nbsp;<span class="op" id="2622175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622178">case</span>&nbsp;<span class="ident" id="2622183">u</span><span class="op" id="2622184">.</span><span class="ident" id="2622185">Add</span><span class="op" id="2622188">(</span><span class="ident" id="2622189">d</span><span class="op" id="2622190">)</span><span class="op" id="2622191">.</span><span class="ident" id="2622192">Equal</span><span class="op" id="2622197">(</span><span class="ident" id="2622198">t</span><span class="op" id="2622199">)</span><span class="op" id="2622200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622204">return</span>&nbsp;<span class="ident" id="2622211">d</span>&nbsp;<span class="comment" id="2622213">//&nbsp;d&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622230">case</span>&nbsp;<span class="ident" id="2622235">t</span><span class="op" id="2622236">.</span><span class="ident" id="2622237">Before</span><span class="op" id="2622243">(</span><span class="ident" id="2622244">u</span><span class="op" id="2622245">)</span><span class="op" id="2622246">:</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622250">return</span>&nbsp;<span class="ident" id="2622257">minDuration</span>&nbsp;<span class="comment" id="2622269">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;negative&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622304">default</span><span class="op" id="2622311">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622315">return</span>&nbsp;<span class="ident" id="2622322">maxDuration</span>&nbsp;<span class="comment" id="2622334">//&nbsp;t&nbsp;-&nbsp;u&nbsp;is&nbsp;positive&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622369">}</span><br>
<span class="lineno"></span><span class="op" id="2622371">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2622374">//&nbsp;Since&nbsp;returns&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2622417">//&nbsp;It&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;time.Now().Sub(t).</span><br>
<span class="lineno"></span><span class="keyword" id="2622459">func</span>&nbsp;<span class="ident" id="2622464">Since</span><span class="op" id="2622469">(</span><span class="ident" id="2622470">t</span>&nbsp;<span class="ident" id="2622472">Time</span><span class="op" id="2622476">)</span>&nbsp;<span class="ident" id="2622478">Duration</span>&nbsp;<span class="op" id="2622487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622490">return</span>&nbsp;<span class="ident" id="2622497">Now</span><span class="op" id="2622500">(</span><span class="op" id="2622501">)</span><span class="op" id="2622502">.</span><span class="ident" id="2622503">Sub</span><span class="op" id="2622506">(</span><span class="ident" id="2622507">t</span><span class="op" id="2622508">)</span><br>
<span class="lineno">645</span><span class="op" id="2622510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2622513">//&nbsp;AddDate&nbsp;returns&nbsp;the&nbsp;time&nbsp;corresponding&nbsp;to&nbsp;adding&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2622569">//&nbsp;given&nbsp;number&nbsp;of&nbsp;years,&nbsp;months,&nbsp;and&nbsp;days&nbsp;to&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2622618">//&nbsp;For&nbsp;example,&nbsp;AddDate(-1,&nbsp;2,&nbsp;3)&nbsp;applied&nbsp;to&nbsp;January&nbsp;1,&nbsp;2011</span><br>
<span class="lineno">650</span><span class="comment" id="2622679">//&nbsp;returns&nbsp;March&nbsp;4,&nbsp;2010.</span><br>
<span class="lineno"></span><span class="comment" id="2622705">//</span><br>
<span class="lineno"></span><span class="comment" id="2622708">//&nbsp;AddDate&nbsp;normalizes&nbsp;its&nbsp;result&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;that&nbsp;Date&nbsp;does,</span><br>
<span class="lineno"></span><span class="comment" id="2622773">//&nbsp;so,&nbsp;for&nbsp;example,&nbsp;adding&nbsp;one&nbsp;month&nbsp;to&nbsp;October&nbsp;31&nbsp;yields</span><br>
<span class="lineno"></span><span class="comment" id="2622831">//&nbsp;December&nbsp;1,&nbsp;the&nbsp;normalized&nbsp;form&nbsp;for&nbsp;November&nbsp;31.</span><br>
<span class="lineno">655</span><span class="keyword" id="2622883">func</span>&nbsp;<span class="op" id="2622888">(</span><span class="ident" id="2622889">t</span>&nbsp;<span class="ident" id="2622891">Time</span><span class="op" id="2622895">)</span>&nbsp;<span class="ident" id="2622897">AddDate</span><span class="op" id="2622904">(</span><span class="ident" id="2622905">years</span>&nbsp;<span class="builtintype" id="2622911">int</span><span class="op" id="2622914">,</span>&nbsp;<span class="ident" id="2622916">months</span>&nbsp;<span class="builtintype" id="2622923">int</span><span class="op" id="2622926">,</span>&nbsp;<span class="ident" id="2622928">days</span>&nbsp;<span class="builtintype" id="2622933">int</span><span class="op" id="2622936">)</span>&nbsp;<span class="ident" id="2622938">Time</span>&nbsp;<span class="op" id="2622943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622946">year</span><span class="op" id="2622950">,</span>&nbsp;<span class="ident" id="2622952">month</span><span class="op" id="2622957">,</span>&nbsp;<span class="ident" id="2622959">day</span>&nbsp;<span class="op" id="2622963">:=</span>&nbsp;<span class="ident" id="2622966">t</span><span class="op" id="2622967">.</span><span class="ident" id="2622968">Date</span><span class="op" id="2622972">(</span><span class="op" id="2622973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622976">hour</span><span class="op" id="2622980">,</span>&nbsp;<span class="ident" id="2622982">min</span><span class="op" id="2622985">,</span>&nbsp;<span class="ident" id="2622987">sec</span>&nbsp;<span class="op" id="2622991">:=</span>&nbsp;<span class="ident" id="2622994">t</span><span class="op" id="2622995">.</span><span class="ident" id="2622996">Clock</span><span class="op" id="2623001">(</span><span class="op" id="2623002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623005">return</span>&nbsp;<span class="ident" id="2623012">Date</span><span class="op" id="2623016">(</span><span class="ident" id="2623017">year</span><span class="op" id="2623021">+</span><span class="ident" id="2623022">years</span><span class="op" id="2623027">,</span>&nbsp;<span class="ident" id="2623029">month</span><span class="op" id="2623034">+</span><span class="ident" id="2623035">Month</span><span class="op" id="2623040">(</span><span class="ident" id="2623041">months</span><span class="op" id="2623047">)</span><span class="op" id="2623048">,</span>&nbsp;<span class="ident" id="2623050">day</span><span class="op" id="2623053">+</span><span class="ident" id="2623054">days</span><span class="op" id="2623058">,</span>&nbsp;<span class="ident" id="2623060">hour</span><span class="op" id="2623064">,</span>&nbsp;<span class="ident" id="2623066">min</span><span class="op" id="2623069">,</span>&nbsp;<span class="ident" id="2623071">sec</span><span class="op" id="2623074">,</span>&nbsp;<span class="builtintype" id="2623076">int</span><span class="op" id="2623079">(</span><span class="ident" id="2623080">t</span><span class="op" id="2623081">.</span><span class="ident" id="2623082">nsec</span><span class="op" id="2623086">)</span><span class="op" id="2623087">,</span>&nbsp;<span class="ident" id="2623089">t</span><span class="op" id="2623090">.</span><span class="ident" id="2623091">loc</span><span class="op" id="2623094">)</span><br>
<span class="lineno"></span><span class="op" id="2623096">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="keyword" id="2623099">const</span>&nbsp;<span class="op" id="2623105">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623108">secondsPerMinute</span>&nbsp;<span class="op" id="2623125">=</span>&nbsp;<span class="num" id="2623127">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623131">secondsPerHour</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2623148">=</span>&nbsp;<span class="num" id="2623150">60</span>&nbsp;<span class="op" id="2623153">*</span>&nbsp;<span class="num" id="2623155">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623159">secondsPerDay</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2623176">=</span>&nbsp;<span class="num" id="2623178">24</span>&nbsp;<span class="op" id="2623181">*</span>&nbsp;<span class="ident" id="2623183">secondsPerHour</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623199">secondsPerWeek</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2623216">=</span>&nbsp;<span class="num" id="2623218">7</span>&nbsp;<span class="op" id="2623220">*</span>&nbsp;<span class="ident" id="2623222">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623237">daysPer400Years</span>&nbsp;&nbsp;<span class="op" id="2623254">=</span>&nbsp;<span class="num" id="2623256">365</span><span class="op" id="2623259">*</span><span class="num" id="2623260">400</span>&nbsp;<span class="op" id="2623264">+</span>&nbsp;<span class="num" id="2623266">97</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623270">daysPer100Years</span>&nbsp;&nbsp;<span class="op" id="2623287">=</span>&nbsp;<span class="num" id="2623289">365</span><span class="op" id="2623292">*</span><span class="num" id="2623293">100</span>&nbsp;<span class="op" id="2623297">+</span>&nbsp;<span class="num" id="2623299">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623303">daysPer4Years</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2623320">=</span>&nbsp;<span class="num" id="2623322">365</span><span class="op" id="2623325">*</span><span class="num" id="2623326">4</span>&nbsp;<span class="op" id="2623328">+</span>&nbsp;<span class="num" id="2623330">1</span><br>
<span class="lineno"></span><span class="op" id="2623332">)</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="2623335">//&nbsp;date&nbsp;computes&nbsp;the&nbsp;year,&nbsp;day&nbsp;of&nbsp;year,&nbsp;and&nbsp;when&nbsp;full=true,</span><br>
<span class="lineno"></span><span class="comment" id="2623395">//&nbsp;the&nbsp;month&nbsp;and&nbsp;day&nbsp;in&nbsp;which&nbsp;t&nbsp;occurs.</span><br>
<span class="lineno"></span><span class="keyword" id="2623435">func</span>&nbsp;<span class="op" id="2623440">(</span><span class="ident" id="2623441">t</span>&nbsp;<span class="ident" id="2623443">Time</span><span class="op" id="2623447">)</span>&nbsp;<span class="ident" id="2623449">date</span><span class="op" id="2623453">(</span><span class="ident" id="2623454">full</span>&nbsp;<span class="builtintype" id="2623459">bool</span><span class="op" id="2623463">)</span>&nbsp;<span class="op" id="2623465">(</span><span class="ident" id="2623466">year</span>&nbsp;<span class="builtintype" id="2623471">int</span><span class="op" id="2623474">,</span>&nbsp;<span class="ident" id="2623476">month</span>&nbsp;<span class="ident" id="2623482">Month</span><span class="op" id="2623487">,</span>&nbsp;<span class="ident" id="2623489">day</span>&nbsp;<span class="builtintype" id="2623493">int</span><span class="op" id="2623496">,</span>&nbsp;<span class="ident" id="2623498">yday</span>&nbsp;<span class="builtintype" id="2623503">int</span><span class="op" id="2623506">)</span>&nbsp;<span class="op" id="2623508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623511">return</span>&nbsp;<span class="ident" id="2623518">absDate</span><span class="op" id="2623525">(</span><span class="ident" id="2623526">t</span><span class="op" id="2623527">.</span><span class="ident" id="2623528">abs</span><span class="op" id="2623531">(</span><span class="op" id="2623532">)</span><span class="op" id="2623533">,</span>&nbsp;<span class="ident" id="2623535">full</span><span class="op" id="2623539">)</span><br>
<span class="lineno">675</span><span class="op" id="2623541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2623544">//&nbsp;absDate&nbsp;is&nbsp;like&nbsp;date&nbsp;but&nbsp;operates&nbsp;on&nbsp;an&nbsp;absolute&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2623602">func</span>&nbsp;<span class="ident" id="2623607">absDate</span><span class="op" id="2623614">(</span><span class="ident" id="2623615">abs</span>&nbsp;<span class="ident" id="2623619">uint64</span><span class="op" id="2623625">,</span>&nbsp;<span class="ident" id="2623627">full</span>&nbsp;<span class="builtintype" id="2623632">bool</span><span class="op" id="2623636">)</span>&nbsp;<span class="op" id="2623638">(</span><span class="ident" id="2623639">year</span>&nbsp;<span class="builtintype" id="2623644">int</span><span class="op" id="2623647">,</span>&nbsp;<span class="ident" id="2623649">month</span>&nbsp;<span class="ident" id="2623655">Month</span><span class="op" id="2623660">,</span>&nbsp;<span class="ident" id="2623662">day</span>&nbsp;<span class="builtintype" id="2623666">int</span><span class="op" id="2623669">,</span>&nbsp;<span class="ident" id="2623671">yday</span>&nbsp;<span class="builtintype" id="2623676">int</span><span class="op" id="2623679">)</span>&nbsp;<span class="op" id="2623681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623684">//&nbsp;Split&nbsp;into&nbsp;time&nbsp;and&nbsp;day.</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623713">d</span>&nbsp;<span class="op" id="2623715">:=</span>&nbsp;<span class="ident" id="2623718">abs</span>&nbsp;<span class="op" id="2623722">/</span>&nbsp;<span class="ident" id="2623724">secondsPerDay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623740">//&nbsp;Account&nbsp;for&nbsp;400&nbsp;year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623773">n</span>&nbsp;<span class="op" id="2623775">:=</span>&nbsp;<span class="ident" id="2623778">d</span>&nbsp;<span class="op" id="2623780">/</span>&nbsp;<span class="ident" id="2623782">daysPer400Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623799">y</span>&nbsp;<span class="op" id="2623801">:=</span>&nbsp;<span class="num" id="2623804">400</span>&nbsp;<span class="op" id="2623808">*</span>&nbsp;<span class="ident" id="2623810">n</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623813">d</span>&nbsp;<span class="op" id="2623815">-=</span>&nbsp;<span class="ident" id="2623818">daysPer400Years</span>&nbsp;<span class="op" id="2623834">*</span>&nbsp;<span class="ident" id="2623836">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623840">//&nbsp;Cut&nbsp;off&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623869">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;one&nbsp;extra&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623932">//&nbsp;of&nbsp;that&nbsp;year,&nbsp;day&nbsp;/&nbsp;daysPer100Years&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623996">//&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624043">n</span>&nbsp;<span class="op" id="2624045">=</span>&nbsp;<span class="ident" id="2624047">d</span>&nbsp;<span class="op" id="2624049">/</span>&nbsp;<span class="ident" id="2624051">daysPer100Years</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624068">n</span>&nbsp;<span class="op" id="2624070">-=</span>&nbsp;<span class="ident" id="2624073">n</span>&nbsp;<span class="op" id="2624075">&gt;&gt;</span>&nbsp;<span class="num" id="2624078">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624081">y</span>&nbsp;<span class="op" id="2624083">+=</span>&nbsp;<span class="num" id="2624086">100</span>&nbsp;<span class="op" id="2624090">*</span>&nbsp;<span class="ident" id="2624092">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624095">d</span>&nbsp;<span class="op" id="2624097">-=</span>&nbsp;<span class="ident" id="2624100">daysPer100Years</span>&nbsp;<span class="op" id="2624116">*</span>&nbsp;<span class="ident" id="2624118">n</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624122">//&nbsp;Cut&nbsp;off&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624149">//&nbsp;The&nbsp;last&nbsp;cycle&nbsp;has&nbsp;a&nbsp;missing&nbsp;leap&nbsp;year,&nbsp;which&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624208">//&nbsp;affect&nbsp;the&nbsp;computation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624236">n</span>&nbsp;<span class="op" id="2624238">=</span>&nbsp;<span class="ident" id="2624240">d</span>&nbsp;<span class="op" id="2624242">/</span>&nbsp;<span class="ident" id="2624244">daysPer4Years</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624259">y</span>&nbsp;<span class="op" id="2624261">+=</span>&nbsp;<span class="num" id="2624264">4</span>&nbsp;<span class="op" id="2624266">*</span>&nbsp;<span class="ident" id="2624268">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624271">d</span>&nbsp;<span class="op" id="2624273">-=</span>&nbsp;<span class="ident" id="2624276">daysPer4Years</span>&nbsp;<span class="op" id="2624290">*</span>&nbsp;<span class="ident" id="2624292">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624296">//&nbsp;Cut&nbsp;off&nbsp;years&nbsp;within&nbsp;a&nbsp;4-year&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624337">//&nbsp;The&nbsp;last&nbsp;year&nbsp;is&nbsp;a&nbsp;leap&nbsp;year,&nbsp;so&nbsp;on&nbsp;the&nbsp;last&nbsp;day&nbsp;of&nbsp;that&nbsp;year,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624404">//&nbsp;day&nbsp;/&nbsp;365&nbsp;will&nbsp;be&nbsp;4&nbsp;instead&nbsp;of&nbsp;3.&nbsp;&nbsp;Cut&nbsp;it&nbsp;back&nbsp;down&nbsp;to&nbsp;3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624465">//&nbsp;by&nbsp;subtracting&nbsp;n&gt;&gt;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624490">n</span>&nbsp;<span class="op" id="2624492">=</span>&nbsp;<span class="ident" id="2624494">d</span>&nbsp;<span class="op" id="2624496">/</span>&nbsp;<span class="num" id="2624498">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624503">n</span>&nbsp;<span class="op" id="2624505">-=</span>&nbsp;<span class="ident" id="2624508">n</span>&nbsp;<span class="op" id="2624510">&gt;&gt;</span>&nbsp;<span class="num" id="2624513">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624516">y</span>&nbsp;<span class="op" id="2624518">+=</span>&nbsp;<span class="ident" id="2624521">n</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624524">d</span>&nbsp;<span class="op" id="2624526">-=</span>&nbsp;<span class="num" id="2624529">365</span>&nbsp;<span class="op" id="2624533">*</span>&nbsp;<span class="ident" id="2624535">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624539">year</span>&nbsp;<span class="op" id="2624544">=</span>&nbsp;<span class="builtintype" id="2624546">int</span><span class="op" id="2624549">(</span><span class="ident" id="2624550">int64</span><span class="op" id="2624555">(</span><span class="ident" id="2624556">y</span><span class="op" id="2624557">)</span>&nbsp;<span class="op" id="2624559">+</span>&nbsp;<span class="ident" id="2624561">absoluteZeroYear</span><span class="op" id="2624577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624580">yday</span>&nbsp;<span class="op" id="2624585">=</span>&nbsp;<span class="builtintype" id="2624587">int</span><span class="op" id="2624590">(</span><span class="ident" id="2624591">d</span><span class="op" id="2624592">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624596">if</span>&nbsp;<span class="op" id="2624599">!</span><span class="ident" id="2624600">full</span>&nbsp;<span class="op" id="2624605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624609">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624621">day</span>&nbsp;<span class="op" id="2624625">=</span>&nbsp;<span class="ident" id="2624627">yday</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624633">if</span>&nbsp;<span class="ident" id="2624636">isLeap</span><span class="op" id="2624642">(</span><span class="ident" id="2624643">year</span><span class="op" id="2624647">)</span>&nbsp;<span class="op" id="2624649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624653">//&nbsp;Leap&nbsp;year</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624668">switch</span>&nbsp;<span class="op" id="2624675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624679">case</span>&nbsp;<span class="ident" id="2624684">day</span>&nbsp;<span class="op" id="2624688">&gt;</span>&nbsp;<span class="num" id="2624690">31</span><span class="op" id="2624692">+</span><span class="num" id="2624693">29</span><span class="op" id="2624695">-</span><span class="num" id="2624696">1</span><span class="op" id="2624697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624702">//&nbsp;After&nbsp;leap&nbsp;day;&nbsp;pretend&nbsp;it&nbsp;wasn&#39;t&nbsp;there.</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624749">day</span><span class="op" id="2624752">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624757">case</span>&nbsp;<span class="ident" id="2624762">day</span>&nbsp;<span class="op" id="2624766">==</span>&nbsp;<span class="num" id="2624769">31</span><span class="op" id="2624771">+</span><span class="num" id="2624772">29</span><span class="op" id="2624774">-</span><span class="num" id="2624775">1</span><span class="op" id="2624776">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624781">//&nbsp;Leap&nbsp;day.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624797">month</span>&nbsp;<span class="op" id="2624803">=</span>&nbsp;<span class="ident" id="2624805">February</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624817">day</span>&nbsp;<span class="op" id="2624821">=</span>&nbsp;<span class="num" id="2624823">29</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624829">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624845">//&nbsp;Estimate&nbsp;month&nbsp;on&nbsp;assumption&nbsp;that&nbsp;every&nbsp;month&nbsp;has&nbsp;31&nbsp;days.</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624908">//&nbsp;The&nbsp;estimate&nbsp;may&nbsp;be&nbsp;too&nbsp;low&nbsp;by&nbsp;at&nbsp;most&nbsp;one&nbsp;month,&nbsp;so&nbsp;adjust.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624973">month</span>&nbsp;<span class="op" id="2624979">=</span>&nbsp;<span class="ident" id="2624981">Month</span><span class="op" id="2624986">(</span><span class="ident" id="2624987">day</span>&nbsp;<span class="op" id="2624991">/</span>&nbsp;<span class="num" id="2624993">31</span><span class="op" id="2624995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624998">end</span>&nbsp;<span class="op" id="2625002">:=</span>&nbsp;<span class="builtintype" id="2625005">int</span><span class="op" id="2625008">(</span><span class="ident" id="2625009">daysBefore</span><span class="op" id="2625019">[</span><span class="ident" id="2625020">month</span><span class="op" id="2625025">+</span><span class="num" id="2625026">1</span><span class="op" id="2625027">]</span><span class="op" id="2625028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625031">var</span>&nbsp;<span class="ident" id="2625035">begin</span>&nbsp;<span class="builtintype" id="2625041">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625046">if</span>&nbsp;<span class="ident" id="2625049">day</span>&nbsp;<span class="op" id="2625053">&gt;=</span>&nbsp;<span class="ident" id="2625056">end</span>&nbsp;<span class="op" id="2625060">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625064">month</span><span class="op" id="2625069">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625074">begin</span>&nbsp;<span class="op" id="2625080">=</span>&nbsp;<span class="ident" id="2625082">end</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625087">}</span>&nbsp;<span class="keyword" id="2625089">else</span>&nbsp;<span class="op" id="2625094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625098">begin</span>&nbsp;<span class="op" id="2625104">=</span>&nbsp;<span class="builtintype" id="2625106">int</span><span class="op" id="2625109">(</span><span class="ident" id="2625110">daysBefore</span><span class="op" id="2625120">[</span><span class="ident" id="2625121">month</span><span class="op" id="2625126">]</span><span class="op" id="2625127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625130">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625134">month</span><span class="op" id="2625139">++</span>&nbsp;<span class="comment" id="2625142">//&nbsp;because&nbsp;January&nbsp;is&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625167">day</span>&nbsp;<span class="op" id="2625171">=</span>&nbsp;<span class="ident" id="2625173">day</span>&nbsp;<span class="op" id="2625177">-</span>&nbsp;<span class="ident" id="2625179">begin</span>&nbsp;<span class="op" id="2625185">+</span>&nbsp;<span class="num" id="2625187">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625190">return</span><br>
<span class="lineno"></span><span class="op" id="2625197">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="comment" id="2625200">//&nbsp;daysBefore[m]&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;in&nbsp;a&nbsp;non-leap&nbsp;year</span><br>
<span class="lineno"></span><span class="comment" id="2625262">//&nbsp;before&nbsp;month&nbsp;m&nbsp;begins.&nbsp;&nbsp;There&nbsp;is&nbsp;an&nbsp;entry&nbsp;for&nbsp;m=12,&nbsp;counting</span><br>
<span class="lineno"></span><span class="comment" id="2625326">//&nbsp;the&nbsp;number&nbsp;of&nbsp;days&nbsp;before&nbsp;January&nbsp;of&nbsp;next&nbsp;year&nbsp;(365).</span><br>
<span class="lineno"></span><span class="keyword" id="2625383">var</span>&nbsp;<span class="ident" id="2625387">daysBefore</span>&nbsp;<span class="op" id="2625398">=</span>&nbsp;<span class="op" id="2625400">[</span><span class="op" id="2625401">...</span><span class="op" id="2625404">]</span><span class="builtintype" id="2625405">int32</span><span class="op" id="2625410">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625413">0</span><span class="op" id="2625414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625417">31</span><span class="op" id="2625419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625422">31</span>&nbsp;<span class="op" id="2625425">+</span>&nbsp;<span class="num" id="2625427">28</span><span class="op" id="2625429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625432">31</span>&nbsp;<span class="op" id="2625435">+</span>&nbsp;<span class="num" id="2625437">28</span>&nbsp;<span class="op" id="2625440">+</span>&nbsp;<span class="num" id="2625442">31</span><span class="op" id="2625444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625447">31</span>&nbsp;<span class="op" id="2625450">+</span>&nbsp;<span class="num" id="2625452">28</span>&nbsp;<span class="op" id="2625455">+</span>&nbsp;<span class="num" id="2625457">31</span>&nbsp;<span class="op" id="2625460">+</span>&nbsp;<span class="num" id="2625462">30</span><span class="op" id="2625464">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625467">31</span>&nbsp;<span class="op" id="2625470">+</span>&nbsp;<span class="num" id="2625472">28</span>&nbsp;<span class="op" id="2625475">+</span>&nbsp;<span class="num" id="2625477">31</span>&nbsp;<span class="op" id="2625480">+</span>&nbsp;<span class="num" id="2625482">30</span>&nbsp;<span class="op" id="2625485">+</span>&nbsp;<span class="num" id="2625487">31</span><span class="op" id="2625489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625492">31</span>&nbsp;<span class="op" id="2625495">+</span>&nbsp;<span class="num" id="2625497">28</span>&nbsp;<span class="op" id="2625500">+</span>&nbsp;<span class="num" id="2625502">31</span>&nbsp;<span class="op" id="2625505">+</span>&nbsp;<span class="num" id="2625507">30</span>&nbsp;<span class="op" id="2625510">+</span>&nbsp;<span class="num" id="2625512">31</span>&nbsp;<span class="op" id="2625515">+</span>&nbsp;<span class="num" id="2625517">30</span><span class="op" id="2625519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625522">31</span>&nbsp;<span class="op" id="2625525">+</span>&nbsp;<span class="num" id="2625527">28</span>&nbsp;<span class="op" id="2625530">+</span>&nbsp;<span class="num" id="2625532">31</span>&nbsp;<span class="op" id="2625535">+</span>&nbsp;<span class="num" id="2625537">30</span>&nbsp;<span class="op" id="2625540">+</span>&nbsp;<span class="num" id="2625542">31</span>&nbsp;<span class="op" id="2625545">+</span>&nbsp;<span class="num" id="2625547">30</span>&nbsp;<span class="op" id="2625550">+</span>&nbsp;<span class="num" id="2625552">31</span><span class="op" id="2625554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625557">31</span>&nbsp;<span class="op" id="2625560">+</span>&nbsp;<span class="num" id="2625562">28</span>&nbsp;<span class="op" id="2625565">+</span>&nbsp;<span class="num" id="2625567">31</span>&nbsp;<span class="op" id="2625570">+</span>&nbsp;<span class="num" id="2625572">30</span>&nbsp;<span class="op" id="2625575">+</span>&nbsp;<span class="num" id="2625577">31</span>&nbsp;<span class="op" id="2625580">+</span>&nbsp;<span class="num" id="2625582">30</span>&nbsp;<span class="op" id="2625585">+</span>&nbsp;<span class="num" id="2625587">31</span>&nbsp;<span class="op" id="2625590">+</span>&nbsp;<span class="num" id="2625592">31</span><span class="op" id="2625594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625597">31</span>&nbsp;<span class="op" id="2625600">+</span>&nbsp;<span class="num" id="2625602">28</span>&nbsp;<span class="op" id="2625605">+</span>&nbsp;<span class="num" id="2625607">31</span>&nbsp;<span class="op" id="2625610">+</span>&nbsp;<span class="num" id="2625612">30</span>&nbsp;<span class="op" id="2625615">+</span>&nbsp;<span class="num" id="2625617">31</span>&nbsp;<span class="op" id="2625620">+</span>&nbsp;<span class="num" id="2625622">30</span>&nbsp;<span class="op" id="2625625">+</span>&nbsp;<span class="num" id="2625627">31</span>&nbsp;<span class="op" id="2625630">+</span>&nbsp;<span class="num" id="2625632">31</span>&nbsp;<span class="op" id="2625635">+</span>&nbsp;<span class="num" id="2625637">30</span><span class="op" id="2625639">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625642">31</span>&nbsp;<span class="op" id="2625645">+</span>&nbsp;<span class="num" id="2625647">28</span>&nbsp;<span class="op" id="2625650">+</span>&nbsp;<span class="num" id="2625652">31</span>&nbsp;<span class="op" id="2625655">+</span>&nbsp;<span class="num" id="2625657">30</span>&nbsp;<span class="op" id="2625660">+</span>&nbsp;<span class="num" id="2625662">31</span>&nbsp;<span class="op" id="2625665">+</span>&nbsp;<span class="num" id="2625667">30</span>&nbsp;<span class="op" id="2625670">+</span>&nbsp;<span class="num" id="2625672">31</span>&nbsp;<span class="op" id="2625675">+</span>&nbsp;<span class="num" id="2625677">31</span>&nbsp;<span class="op" id="2625680">+</span>&nbsp;<span class="num" id="2625682">30</span>&nbsp;<span class="op" id="2625685">+</span>&nbsp;<span class="num" id="2625687">31</span><span class="op" id="2625689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625692">31</span>&nbsp;<span class="op" id="2625695">+</span>&nbsp;<span class="num" id="2625697">28</span>&nbsp;<span class="op" id="2625700">+</span>&nbsp;<span class="num" id="2625702">31</span>&nbsp;<span class="op" id="2625705">+</span>&nbsp;<span class="num" id="2625707">30</span>&nbsp;<span class="op" id="2625710">+</span>&nbsp;<span class="num" id="2625712">31</span>&nbsp;<span class="op" id="2625715">+</span>&nbsp;<span class="num" id="2625717">30</span>&nbsp;<span class="op" id="2625720">+</span>&nbsp;<span class="num" id="2625722">31</span>&nbsp;<span class="op" id="2625725">+</span>&nbsp;<span class="num" id="2625727">31</span>&nbsp;<span class="op" id="2625730">+</span>&nbsp;<span class="num" id="2625732">30</span>&nbsp;<span class="op" id="2625735">+</span>&nbsp;<span class="num" id="2625737">31</span>&nbsp;<span class="op" id="2625740">+</span>&nbsp;<span class="num" id="2625742">30</span><span class="op" id="2625744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="2625747">31</span>&nbsp;<span class="op" id="2625750">+</span>&nbsp;<span class="num" id="2625752">28</span>&nbsp;<span class="op" id="2625755">+</span>&nbsp;<span class="num" id="2625757">31</span>&nbsp;<span class="op" id="2625760">+</span>&nbsp;<span class="num" id="2625762">30</span>&nbsp;<span class="op" id="2625765">+</span>&nbsp;<span class="num" id="2625767">31</span>&nbsp;<span class="op" id="2625770">+</span>&nbsp;<span class="num" id="2625772">30</span>&nbsp;<span class="op" id="2625775">+</span>&nbsp;<span class="num" id="2625777">31</span>&nbsp;<span class="op" id="2625780">+</span>&nbsp;<span class="num" id="2625782">31</span>&nbsp;<span class="op" id="2625785">+</span>&nbsp;<span class="num" id="2625787">30</span>&nbsp;<span class="op" id="2625790">+</span>&nbsp;<span class="num" id="2625792">31</span>&nbsp;<span class="op" id="2625795">+</span>&nbsp;<span class="num" id="2625797">30</span>&nbsp;<span class="op" id="2625800">+</span>&nbsp;<span class="num" id="2625802">31</span><span class="op" id="2625804">,</span><br>
<span class="lineno"></span><span class="op" id="2625806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">770</span><span class="keyword" id="2625809">func</span>&nbsp;<span class="ident" id="2625814">daysIn</span><span class="op" id="2625820">(</span><span class="ident" id="2625821">m</span>&nbsp;<span class="ident" id="2625823">Month</span><span class="op" id="2625828">,</span>&nbsp;<span class="ident" id="2625830">year</span>&nbsp;<span class="builtintype" id="2625835">int</span><span class="op" id="2625838">)</span>&nbsp;<span class="builtintype" id="2625840">int</span>&nbsp;<span class="op" id="2625844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625847">if</span>&nbsp;<span class="ident" id="2625850">m</span>&nbsp;<span class="op" id="2625852">==</span>&nbsp;<span class="ident" id="2625855">February</span>&nbsp;<span class="op" id="2625864">&amp;&amp;</span>&nbsp;<span class="ident" id="2625867">isLeap</span><span class="op" id="2625873">(</span><span class="ident" id="2625874">year</span><span class="op" id="2625878">)</span>&nbsp;<span class="op" id="2625880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625884">return</span>&nbsp;<span class="num" id="2625891">29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625898">return</span>&nbsp;<span class="builtintype" id="2625905">int</span><span class="op" id="2625908">(</span><span class="ident" id="2625909">daysBefore</span><span class="op" id="2625919">[</span><span class="ident" id="2625920">m</span><span class="op" id="2625921">]</span>&nbsp;<span class="op" id="2625923">-</span>&nbsp;<span class="ident" id="2625925">daysBefore</span><span class="op" id="2625935">[</span><span class="ident" id="2625936">m</span><span class="op" id="2625937">-</span><span class="num" id="2625938">1</span><span class="op" id="2625939">]</span><span class="op" id="2625940">)</span><br>
<span class="lineno">775</span><span class="op" id="2625942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2625945">//&nbsp;Provided&nbsp;by&nbsp;package&nbsp;runtime.</span><br>
<span class="lineno"></span><span class="keyword" id="2625977">func</span>&nbsp;<span class="ident" id="2625982">now</span><span class="op" id="2625985">(</span><span class="op" id="2625986">)</span>&nbsp;<span class="op" id="2625988">(</span><span class="ident" id="2625989">sec</span>&nbsp;<span class="ident" id="2625993">int64</span><span class="op" id="2625998">,</span>&nbsp;<span class="ident" id="2626000">nsec</span>&nbsp;<span class="builtintype" id="2626005">int32</span><span class="op" id="2626010">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="comment" id="2626013">//&nbsp;Now&nbsp;returns&nbsp;the&nbsp;current&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2626052">func</span>&nbsp;<span class="ident" id="2626057">Now</span><span class="op" id="2626060">(</span><span class="op" id="2626061">)</span>&nbsp;<span class="ident" id="2626063">Time</span>&nbsp;<span class="op" id="2626068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626071">sec</span><span class="op" id="2626074">,</span>&nbsp;<span class="ident" id="2626076">nsec</span>&nbsp;<span class="op" id="2626081">:=</span>&nbsp;<span class="ident" id="2626084">now</span><span class="op" id="2626087">(</span><span class="op" id="2626088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626091">return</span>&nbsp;<span class="ident" id="2626098">Time</span><span class="op" id="2626102">{</span><span class="ident" id="2626103">sec</span>&nbsp;<span class="op" id="2626107">+</span>&nbsp;<span class="ident" id="2626109">unixToInternal</span><span class="op" id="2626123">,</span>&nbsp;<span class="ident" id="2626125">nsec</span><span class="op" id="2626129">,</span>&nbsp;<span class="ident" id="2626131">Local</span><span class="op" id="2626136">}</span><br>
<span class="lineno"></span><span class="op" id="2626138">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="comment" id="2626141">//&nbsp;UTC&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2626188">func</span>&nbsp;<span class="op" id="2626193">(</span><span class="ident" id="2626194">t</span>&nbsp;<span class="ident" id="2626196">Time</span><span class="op" id="2626200">)</span>&nbsp;<span class="ident" id="2626202">UTC</span><span class="op" id="2626205">(</span><span class="op" id="2626206">)</span>&nbsp;<span class="ident" id="2626208">Time</span>&nbsp;<span class="op" id="2626213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626216">t</span><span class="op" id="2626217">.</span><span class="ident" id="2626218">loc</span>&nbsp;<span class="op" id="2626222">=</span>&nbsp;<span class="ident" id="2626224">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626229">return</span>&nbsp;<span class="ident" id="2626236">t</span><br>
<span class="lineno">790</span><span class="op" id="2626238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2626241">//&nbsp;Local&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;set&nbsp;to&nbsp;local&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="2626297">func</span>&nbsp;<span class="op" id="2626302">(</span><span class="ident" id="2626303">t</span>&nbsp;<span class="ident" id="2626305">Time</span><span class="op" id="2626309">)</span>&nbsp;<span class="ident" id="2626311">Local</span><span class="op" id="2626316">(</span><span class="op" id="2626317">)</span>&nbsp;<span class="ident" id="2626319">Time</span>&nbsp;<span class="op" id="2626324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626327">t</span><span class="op" id="2626328">.</span><span class="ident" id="2626329">loc</span>&nbsp;<span class="op" id="2626333">=</span>&nbsp;<span class="ident" id="2626335">Local</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626342">return</span>&nbsp;<span class="ident" id="2626349">t</span><br>
<span class="lineno"></span><span class="op" id="2626351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2626354">//&nbsp;In&nbsp;returns&nbsp;t&nbsp;with&nbsp;the&nbsp;location&nbsp;information&nbsp;set&nbsp;to&nbsp;loc.</span><br>
<span class="lineno"></span><span class="comment" id="2626412">//</span><br>
<span class="lineno">800</span><span class="comment" id="2626415">//&nbsp;In&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2626443">func</span>&nbsp;<span class="op" id="2626448">(</span><span class="ident" id="2626449">t</span>&nbsp;<span class="ident" id="2626451">Time</span><span class="op" id="2626455">)</span>&nbsp;<span class="ident" id="2626457">In</span><span class="op" id="2626459">(</span><span class="ident" id="2626460">loc</span>&nbsp;<span class="op" id="2626464">*</span><span class="ident" id="2626465">Location</span><span class="op" id="2626473">)</span>&nbsp;<span class="ident" id="2626475">Time</span>&nbsp;<span class="op" id="2626480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626483">if</span>&nbsp;<span class="ident" id="2626486">loc</span>&nbsp;<span class="op" id="2626490">==</span>&nbsp;<span class="ident" id="2626493">nil</span>&nbsp;<span class="op" id="2626497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2626501">panic</span><span class="op" id="2626506">(</span><span class="string" id="2626507">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Time.In&#34;</span><span class="op" id="2626550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626553">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626556">t</span><span class="op" id="2626557">.</span><span class="ident" id="2626558">loc</span>&nbsp;<span class="op" id="2626562">=</span>&nbsp;<span class="ident" id="2626564">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626569">return</span>&nbsp;<span class="ident" id="2626576">t</span><br>
<span class="lineno"></span><span class="op" id="2626578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2626581">//&nbsp;Location&nbsp;returns&nbsp;the&nbsp;time&nbsp;zone&nbsp;information&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno">810</span><span class="keyword" id="2626646">func</span>&nbsp;<span class="op" id="2626651">(</span><span class="ident" id="2626652">t</span>&nbsp;<span class="ident" id="2626654">Time</span><span class="op" id="2626658">)</span>&nbsp;<span class="ident" id="2626660">Location</span><span class="op" id="2626668">(</span><span class="op" id="2626669">)</span>&nbsp;<span class="op" id="2626671">*</span><span class="ident" id="2626672">Location</span>&nbsp;<span class="op" id="2626681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626684">l</span>&nbsp;<span class="op" id="2626686">:=</span>&nbsp;<span class="ident" id="2626689">t</span><span class="op" id="2626690">.</span><span class="ident" id="2626691">loc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626696">if</span>&nbsp;<span class="ident" id="2626699">l</span>&nbsp;<span class="op" id="2626701">==</span>&nbsp;<span class="ident" id="2626704">nil</span>&nbsp;<span class="op" id="2626708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626712">l</span>&nbsp;<span class="op" id="2626714">=</span>&nbsp;<span class="ident" id="2626716">UTC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626721">}</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626724">return</span>&nbsp;<span class="ident" id="2626731">l</span><br>
<span class="lineno"></span><span class="op" id="2626733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2626736">//&nbsp;Zone&nbsp;computes&nbsp;the&nbsp;time&nbsp;zone&nbsp;in&nbsp;effect&nbsp;at&nbsp;time&nbsp;t,&nbsp;returning&nbsp;the&nbsp;abbreviated</span><br>
<span class="lineno"></span><span class="comment" id="2626814">//&nbsp;name&nbsp;of&nbsp;the&nbsp;zone&nbsp;(such&nbsp;as&nbsp;&#34;CET&#34;)&nbsp;and&nbsp;its&nbsp;offset&nbsp;in&nbsp;seconds&nbsp;east&nbsp;of&nbsp;UTC.</span><br>
<span class="lineno">820</span><span class="keyword" id="2626889">func</span>&nbsp;<span class="op" id="2626894">(</span><span class="ident" id="2626895">t</span>&nbsp;<span class="ident" id="2626897">Time</span><span class="op" id="2626901">)</span>&nbsp;<span class="ident" id="2626903">Zone</span><span class="op" id="2626907">(</span><span class="op" id="2626908">)</span>&nbsp;<span class="op" id="2626910">(</span><span class="ident" id="2626911">name</span>&nbsp;<span class="builtintype" id="2626916">string</span><span class="op" id="2626922">,</span>&nbsp;<span class="ident" id="2626924">offset</span>&nbsp;<span class="builtintype" id="2626931">int</span><span class="op" id="2626934">)</span>&nbsp;<span class="op" id="2626936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626939">name</span><span class="op" id="2626943">,</span>&nbsp;<span class="ident" id="2626945">offset</span><span class="op" id="2626951">,</span>&nbsp;<span class="ident" id="2626953">_</span><span class="op" id="2626954">,</span>&nbsp;<span class="ident" id="2626956">_</span><span class="op" id="2626957">,</span>&nbsp;<span class="ident" id="2626959">_</span>&nbsp;<span class="op" id="2626961">=</span>&nbsp;<span class="ident" id="2626963">t</span><span class="op" id="2626964">.</span><span class="ident" id="2626965">loc</span><span class="op" id="2626968">.</span><span class="ident" id="2626969">lookup</span><span class="op" id="2626975">(</span><span class="ident" id="2626976">t</span><span class="op" id="2626977">.</span><span class="ident" id="2626978">sec</span>&nbsp;<span class="op" id="2626982">+</span>&nbsp;<span class="ident" id="2626984">internalToUnix</span><span class="op" id="2626998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627001">return</span><br>
<span class="lineno"></span><span class="op" id="2627008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="2627011">//&nbsp;Unix&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;seconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2627075">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="keyword" id="2627105">func</span>&nbsp;<span class="op" id="2627110">(</span><span class="ident" id="2627111">t</span>&nbsp;<span class="ident" id="2627113">Time</span><span class="op" id="2627117">)</span>&nbsp;<span class="ident" id="2627119">Unix</span><span class="op" id="2627123">(</span><span class="op" id="2627124">)</span>&nbsp;<span class="ident" id="2627126">int64</span>&nbsp;<span class="op" id="2627132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627135">return</span>&nbsp;<span class="ident" id="2627142">t</span><span class="op" id="2627143">.</span><span class="ident" id="2627144">sec</span>&nbsp;<span class="op" id="2627148">+</span>&nbsp;<span class="ident" id="2627150">internalToUnix</span><br>
<span class="lineno"></span><span class="op" id="2627165">}</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span><span class="comment" id="2627168">//&nbsp;UnixNano&nbsp;returns&nbsp;t&nbsp;as&nbsp;a&nbsp;Unix&nbsp;time,&nbsp;the&nbsp;number&nbsp;of&nbsp;nanoseconds&nbsp;elapsed</span><br>
<span class="lineno"></span><span class="comment" id="2627240">//&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.&nbsp;The&nbsp;result&nbsp;is&nbsp;undefined&nbsp;if&nbsp;the&nbsp;Unix&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="2627311">//&nbsp;in&nbsp;nanoseconds&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;an&nbsp;int64.&nbsp;Note&nbsp;that&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="2627379">//&nbsp;means&nbsp;the&nbsp;result&nbsp;of&nbsp;calling&nbsp;UnixNano&nbsp;on&nbsp;the&nbsp;zero&nbsp;Time&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno">835</span><span class="keyword" id="2627450">func</span>&nbsp;<span class="op" id="2627455">(</span><span class="ident" id="2627456">t</span>&nbsp;<span class="ident" id="2627458">Time</span><span class="op" id="2627462">)</span>&nbsp;<span class="ident" id="2627464">UnixNano</span><span class="op" id="2627472">(</span><span class="op" id="2627473">)</span>&nbsp;<span class="ident" id="2627475">int64</span>&nbsp;<span class="op" id="2627481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627484">return</span>&nbsp;<span class="op" id="2627491">(</span><span class="ident" id="2627492">t</span><span class="op" id="2627493">.</span><span class="ident" id="2627494">sec</span><span class="op" id="2627497">+</span><span class="ident" id="2627498">internalToUnix</span><span class="op" id="2627512">)</span><span class="op" id="2627513">*</span><span class="num" id="2627514">1e9</span>&nbsp;<span class="op" id="2627518">+</span>&nbsp;<span class="ident" id="2627520">int64</span><span class="op" id="2627525">(</span><span class="ident" id="2627526">t</span><span class="op" id="2627527">.</span><span class="ident" id="2627528">nsec</span><span class="op" id="2627532">)</span><br>
<span class="lineno"></span><span class="op" id="2627534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2627537">const</span>&nbsp;<span class="ident" id="2627543">timeBinaryVersion</span>&nbsp;<span class="builtintype" id="2627561">byte</span>&nbsp;<span class="op" id="2627566">=</span>&nbsp;<span class="num" id="2627568">1</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="comment" id="2627571">//&nbsp;MarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryMarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2627639">func</span>&nbsp;<span class="op" id="2627644">(</span><span class="ident" id="2627645">t</span>&nbsp;<span class="ident" id="2627647">Time</span><span class="op" id="2627651">)</span>&nbsp;<span class="ident" id="2627653">MarshalBinary</span><span class="op" id="2627666">(</span><span class="op" id="2627667">)</span>&nbsp;<span class="op" id="2627669">(</span><span class="op" id="2627670">[</span><span class="op" id="2627671">]</span><span class="builtintype" id="2627672">byte</span><span class="op" id="2627676">,</span>&nbsp;<span class="builtintype" id="2627678">error</span><span class="op" id="2627683">)</span>&nbsp;<span class="op" id="2627685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627688">var</span>&nbsp;<span class="ident" id="2627692">offsetMin</span>&nbsp;<span class="builtintype" id="2627702">int16</span>&nbsp;<span class="comment" id="2627708">//&nbsp;minutes&nbsp;east&nbsp;of&nbsp;UTC.&nbsp;-1&nbsp;is&nbsp;UTC.</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627745">if</span>&nbsp;<span class="ident" id="2627748">t</span><span class="op" id="2627749">.</span><span class="ident" id="2627750">Location</span><span class="op" id="2627758">(</span><span class="op" id="2627759">)</span>&nbsp;<span class="op" id="2627761">==</span>&nbsp;<span class="op" id="2627764">&amp;</span><span class="ident" id="2627765">utcLoc</span>&nbsp;<span class="op" id="2627772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627776">offsetMin</span>&nbsp;<span class="op" id="2627786">=</span>&nbsp;<span class="op" id="2627788">-</span><span class="num" id="2627789">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627792">}</span>&nbsp;<span class="keyword" id="2627794">else</span>&nbsp;<span class="op" id="2627799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627803">_</span><span class="op" id="2627804">,</span>&nbsp;<span class="ident" id="2627806">offset</span>&nbsp;<span class="op" id="2627813">:=</span>&nbsp;<span class="ident" id="2627816">t</span><span class="op" id="2627817">.</span><span class="ident" id="2627818">Zone</span><span class="op" id="2627822">(</span><span class="op" id="2627823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627827">if</span>&nbsp;<span class="ident" id="2627830">offset</span><span class="op" id="2627836">%</span><span class="num" id="2627837">60</span>&nbsp;<span class="op" id="2627840">!=</span>&nbsp;<span class="num" id="2627843">0</span>&nbsp;<span class="op" id="2627845">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627850">return</span>&nbsp;<span class="ident" id="2627857">nil</span><span class="op" id="2627860">,</span>&nbsp;<span class="ident" id="2627862">errors</span><span class="op" id="2627868">.</span><span class="ident" id="2627869">New</span><span class="op" id="2627872">(</span><span class="string" id="2627873">&#34;Time.MarshalBinary:&nbsp;zone&nbsp;offset&nbsp;has&nbsp;fractional&nbsp;minute&#34;</span><span class="op" id="2627928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627936">offset</span>&nbsp;<span class="op" id="2627943">/=</span>&nbsp;<span class="num" id="2627946">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627951">if</span>&nbsp;<span class="ident" id="2627954">offset</span>&nbsp;<span class="op" id="2627961">&lt;</span>&nbsp;<span class="op" id="2627963">-</span><span class="num" id="2627964">32768</span>&nbsp;<span class="op" id="2627970">||</span>&nbsp;<span class="ident" id="2627973">offset</span>&nbsp;<span class="op" id="2627980">==</span>&nbsp;<span class="op" id="2627983">-</span><span class="num" id="2627984">1</span>&nbsp;<span class="op" id="2627986">||</span>&nbsp;<span class="ident" id="2627989">offset</span>&nbsp;<span class="op" id="2627996">&gt;</span>&nbsp;<span class="num" id="2627998">32767</span>&nbsp;<span class="op" id="2628004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628009">return</span>&nbsp;<span class="ident" id="2628016">nil</span><span class="op" id="2628019">,</span>&nbsp;<span class="ident" id="2628021">errors</span><span class="op" id="2628027">.</span><span class="ident" id="2628028">New</span><span class="op" id="2628031">(</span><span class="string" id="2628032">&#34;Time.MarshalBinary:&nbsp;unexpected&nbsp;zone&nbsp;offset&#34;</span><span class="op" id="2628076">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628084">offsetMin</span>&nbsp;<span class="op" id="2628094">=</span>&nbsp;<span class="builtintype" id="2628096">int16</span><span class="op" id="2628101">(</span><span class="ident" id="2628102">offset</span><span class="op" id="2628108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628115">enc</span>&nbsp;<span class="op" id="2628119">:=</span>&nbsp;<span class="op" id="2628122">[</span><span class="op" id="2628123">]</span><span class="builtintype" id="2628124">byte</span><span class="op" id="2628128">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628132">timeBinaryVersion</span><span class="op" id="2628149">,</span>&nbsp;<span class="comment" id="2628151">//&nbsp;byte&nbsp;0&nbsp;:&nbsp;version</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628173">byte</span><span class="op" id="2628177">(</span><span class="ident" id="2628178">t</span><span class="op" id="2628179">.</span><span class="ident" id="2628180">sec</span>&nbsp;<span class="op" id="2628184">&gt;&gt;</span>&nbsp;<span class="num" id="2628187">56</span><span class="op" id="2628189">)</span><span class="op" id="2628190">,</span>&nbsp;<span class="comment" id="2628192">//&nbsp;bytes&nbsp;1-8:&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628216">byte</span><span class="op" id="2628220">(</span><span class="ident" id="2628221">t</span><span class="op" id="2628222">.</span><span class="ident" id="2628223">sec</span>&nbsp;<span class="op" id="2628227">&gt;&gt;</span>&nbsp;<span class="num" id="2628230">48</span><span class="op" id="2628232">)</span><span class="op" id="2628233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628237">byte</span><span class="op" id="2628241">(</span><span class="ident" id="2628242">t</span><span class="op" id="2628243">.</span><span class="ident" id="2628244">sec</span>&nbsp;<span class="op" id="2628248">&gt;&gt;</span>&nbsp;<span class="num" id="2628251">40</span><span class="op" id="2628253">)</span><span class="op" id="2628254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628258">byte</span><span class="op" id="2628262">(</span><span class="ident" id="2628263">t</span><span class="op" id="2628264">.</span><span class="ident" id="2628265">sec</span>&nbsp;<span class="op" id="2628269">&gt;&gt;</span>&nbsp;<span class="num" id="2628272">32</span><span class="op" id="2628274">)</span><span class="op" id="2628275">,</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628279">byte</span><span class="op" id="2628283">(</span><span class="ident" id="2628284">t</span><span class="op" id="2628285">.</span><span class="ident" id="2628286">sec</span>&nbsp;<span class="op" id="2628290">&gt;&gt;</span>&nbsp;<span class="num" id="2628293">24</span><span class="op" id="2628295">)</span><span class="op" id="2628296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628300">byte</span><span class="op" id="2628304">(</span><span class="ident" id="2628305">t</span><span class="op" id="2628306">.</span><span class="ident" id="2628307">sec</span>&nbsp;<span class="op" id="2628311">&gt;&gt;</span>&nbsp;<span class="num" id="2628314">16</span><span class="op" id="2628316">)</span><span class="op" id="2628317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628321">byte</span><span class="op" id="2628325">(</span><span class="ident" id="2628326">t</span><span class="op" id="2628327">.</span><span class="ident" id="2628328">sec</span>&nbsp;<span class="op" id="2628332">&gt;&gt;</span>&nbsp;<span class="num" id="2628335">8</span><span class="op" id="2628336">)</span><span class="op" id="2628337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628341">byte</span><span class="op" id="2628345">(</span><span class="ident" id="2628346">t</span><span class="op" id="2628347">.</span><span class="ident" id="2628348">sec</span><span class="op" id="2628351">)</span><span class="op" id="2628352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628356">byte</span><span class="op" id="2628360">(</span><span class="ident" id="2628361">t</span><span class="op" id="2628362">.</span><span class="ident" id="2628363">nsec</span>&nbsp;<span class="op" id="2628368">&gt;&gt;</span>&nbsp;<span class="num" id="2628371">24</span><span class="op" id="2628373">)</span><span class="op" id="2628374">,</span>&nbsp;<span class="comment" id="2628376">//&nbsp;bytes&nbsp;9-12:&nbsp;nanoseconds</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628405">byte</span><span class="op" id="2628409">(</span><span class="ident" id="2628410">t</span><span class="op" id="2628411">.</span><span class="ident" id="2628412">nsec</span>&nbsp;<span class="op" id="2628417">&gt;&gt;</span>&nbsp;<span class="num" id="2628420">16</span><span class="op" id="2628422">)</span><span class="op" id="2628423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628427">byte</span><span class="op" id="2628431">(</span><span class="ident" id="2628432">t</span><span class="op" id="2628433">.</span><span class="ident" id="2628434">nsec</span>&nbsp;<span class="op" id="2628439">&gt;&gt;</span>&nbsp;<span class="num" id="2628442">8</span><span class="op" id="2628443">)</span><span class="op" id="2628444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628448">byte</span><span class="op" id="2628452">(</span><span class="ident" id="2628453">t</span><span class="op" id="2628454">.</span><span class="ident" id="2628455">nsec</span><span class="op" id="2628459">)</span><span class="op" id="2628460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628464">byte</span><span class="op" id="2628468">(</span><span class="ident" id="2628469">offsetMin</span>&nbsp;<span class="op" id="2628479">&gt;&gt;</span>&nbsp;<span class="num" id="2628482">8</span><span class="op" id="2628483">)</span><span class="op" id="2628484">,</span>&nbsp;<span class="comment" id="2628486">//&nbsp;bytes&nbsp;13-14:&nbsp;zone&nbsp;offset&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2628527">byte</span><span class="op" id="2628531">(</span><span class="ident" id="2628532">offsetMin</span><span class="op" id="2628541">)</span><span class="op" id="2628542">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628549">return</span>&nbsp;<span class="ident" id="2628556">enc</span><span class="op" id="2628559">,</span>&nbsp;<span class="ident" id="2628561">nil</span><br>
<span class="lineno"></span><span class="op" id="2628565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="comment" id="2628568">//&nbsp;UnmarshalBinary&nbsp;implements&nbsp;the&nbsp;encoding.BinaryUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2628640">func</span>&nbsp;<span class="op" id="2628645">(</span><span class="ident" id="2628646">t</span>&nbsp;<span class="op" id="2628648">*</span><span class="ident" id="2628649">Time</span><span class="op" id="2628653">)</span>&nbsp;<span class="ident" id="2628655">UnmarshalBinary</span><span class="op" id="2628670">(</span><span class="ident" id="2628671">data</span>&nbsp;<span class="op" id="2628676">[</span><span class="op" id="2628677">]</span><span class="builtintype" id="2628678">byte</span><span class="op" id="2628682">)</span>&nbsp;<span class="builtintype" id="2628684">error</span>&nbsp;<span class="op" id="2628690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628693">buf</span>&nbsp;<span class="op" id="2628697">:=</span>&nbsp;<span class="ident" id="2628700">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628706">if</span>&nbsp;<span class="builtinfunc" id="2628709">len</span><span class="op" id="2628712">(</span><span class="ident" id="2628713">buf</span><span class="op" id="2628716">)</span>&nbsp;<span class="op" id="2628718">==</span>&nbsp;<span class="num" id="2628721">0</span>&nbsp;<span class="op" id="2628723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628727">return</span>&nbsp;<span class="ident" id="2628734">errors</span><span class="op" id="2628740">.</span><span class="ident" id="2628741">New</span><span class="op" id="2628744">(</span><span class="string" id="2628745">&#34;Time.UnmarshalBinary:&nbsp;no&nbsp;data&#34;</span><span class="op" id="2628776">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628783">if</span>&nbsp;<span class="ident" id="2628786">buf</span><span class="op" id="2628789">[</span><span class="num" id="2628790">0</span><span class="op" id="2628791">]</span>&nbsp;<span class="op" id="2628793">!=</span>&nbsp;<span class="ident" id="2628796">timeBinaryVersion</span>&nbsp;<span class="op" id="2628814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628818">return</span>&nbsp;<span class="ident" id="2628825">errors</span><span class="op" id="2628831">.</span><span class="ident" id="2628832">New</span><span class="op" id="2628835">(</span><span class="string" id="2628836">&#34;Time.UnmarshalBinary:&nbsp;unsupported&nbsp;version&#34;</span><span class="op" id="2628879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628882">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628886">if</span>&nbsp;<span class="builtinfunc" id="2628889">len</span><span class="op" id="2628892">(</span><span class="ident" id="2628893">buf</span><span class="op" id="2628896">)</span>&nbsp;<span class="op" id="2628898">!=</span>&nbsp;<span class="comment" id="2628901">/*version*/</span>&nbsp;<span class="num" id="2628913">1</span><span class="op" id="2628914">+</span>&nbsp;<span class="comment" id="2628916">/*sec*/</span>&nbsp;<span class="num" id="2628924">8</span><span class="op" id="2628925">+</span>&nbsp;<span class="comment" id="2628927">/*nsec*/</span>&nbsp;<span class="num" id="2628936">4</span><span class="op" id="2628937">+</span>&nbsp;<span class="comment" id="2628939">/*zone&nbsp;offset*/</span>&nbsp;<span class="num" id="2628955">2</span>&nbsp;<span class="op" id="2628957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628961">return</span>&nbsp;<span class="ident" id="2628968">errors</span><span class="op" id="2628974">.</span><span class="ident" id="2628975">New</span><span class="op" id="2628978">(</span><span class="string" id="2628979">&#34;Time.UnmarshalBinary:&nbsp;invalid&nbsp;length&#34;</span><span class="op" id="2629017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629024">buf</span>&nbsp;<span class="op" id="2629028">=</span>&nbsp;<span class="ident" id="2629030">buf</span><span class="op" id="2629033">[</span><span class="num" id="2629034">1</span><span class="op" id="2629035">:</span><span class="op" id="2629036">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629039">t</span><span class="op" id="2629040">.</span><span class="ident" id="2629041">sec</span>&nbsp;<span class="op" id="2629045">=</span>&nbsp;<span class="ident" id="2629047">int64</span><span class="op" id="2629052">(</span><span class="ident" id="2629053">buf</span><span class="op" id="2629056">[</span><span class="num" id="2629057">7</span><span class="op" id="2629058">]</span><span class="op" id="2629059">)</span>&nbsp;<span class="op" id="2629061">|</span>&nbsp;<span class="ident" id="2629063">int64</span><span class="op" id="2629068">(</span><span class="ident" id="2629069">buf</span><span class="op" id="2629072">[</span><span class="num" id="2629073">6</span><span class="op" id="2629074">]</span><span class="op" id="2629075">)</span><span class="op" id="2629076">&lt;&lt;</span><span class="num" id="2629078">8</span>&nbsp;<span class="op" id="2629080">|</span>&nbsp;<span class="ident" id="2629082">int64</span><span class="op" id="2629087">(</span><span class="ident" id="2629088">buf</span><span class="op" id="2629091">[</span><span class="num" id="2629092">5</span><span class="op" id="2629093">]</span><span class="op" id="2629094">)</span><span class="op" id="2629095">&lt;&lt;</span><span class="num" id="2629097">16</span>&nbsp;<span class="op" id="2629100">|</span>&nbsp;<span class="ident" id="2629102">int64</span><span class="op" id="2629107">(</span><span class="ident" id="2629108">buf</span><span class="op" id="2629111">[</span><span class="num" id="2629112">4</span><span class="op" id="2629113">]</span><span class="op" id="2629114">)</span><span class="op" id="2629115">&lt;&lt;</span><span class="num" id="2629117">24</span>&nbsp;<span class="op" id="2629120">|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629124">int64</span><span class="op" id="2629129">(</span><span class="ident" id="2629130">buf</span><span class="op" id="2629133">[</span><span class="num" id="2629134">3</span><span class="op" id="2629135">]</span><span class="op" id="2629136">)</span><span class="op" id="2629137">&lt;&lt;</span><span class="num" id="2629139">32</span>&nbsp;<span class="op" id="2629142">|</span>&nbsp;<span class="ident" id="2629144">int64</span><span class="op" id="2629149">(</span><span class="ident" id="2629150">buf</span><span class="op" id="2629153">[</span><span class="num" id="2629154">2</span><span class="op" id="2629155">]</span><span class="op" id="2629156">)</span><span class="op" id="2629157">&lt;&lt;</span><span class="num" id="2629159">40</span>&nbsp;<span class="op" id="2629162">|</span>&nbsp;<span class="ident" id="2629164">int64</span><span class="op" id="2629169">(</span><span class="ident" id="2629170">buf</span><span class="op" id="2629173">[</span><span class="num" id="2629174">1</span><span class="op" id="2629175">]</span><span class="op" id="2629176">)</span><span class="op" id="2629177">&lt;&lt;</span><span class="num" id="2629179">48</span>&nbsp;<span class="op" id="2629182">|</span>&nbsp;<span class="ident" id="2629184">int64</span><span class="op" id="2629189">(</span><span class="ident" id="2629190">buf</span><span class="op" id="2629193">[</span><span class="num" id="2629194">0</span><span class="op" id="2629195">]</span><span class="op" id="2629196">)</span><span class="op" id="2629197">&lt;&lt;</span><span class="num" id="2629199">56</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629204">buf</span>&nbsp;<span class="op" id="2629208">=</span>&nbsp;<span class="ident" id="2629210">buf</span><span class="op" id="2629213">[</span><span class="num" id="2629214">8</span><span class="op" id="2629215">:</span><span class="op" id="2629216">]</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629219">t</span><span class="op" id="2629220">.</span><span class="ident" id="2629221">nsec</span>&nbsp;<span class="op" id="2629226">=</span>&nbsp;<span class="builtintype" id="2629228">int32</span><span class="op" id="2629233">(</span><span class="ident" id="2629234">buf</span><span class="op" id="2629237">[</span><span class="num" id="2629238">3</span><span class="op" id="2629239">]</span><span class="op" id="2629240">)</span>&nbsp;<span class="op" id="2629242">|</span>&nbsp;<span class="builtintype" id="2629244">int32</span><span class="op" id="2629249">(</span><span class="ident" id="2629250">buf</span><span class="op" id="2629253">[</span><span class="num" id="2629254">2</span><span class="op" id="2629255">]</span><span class="op" id="2629256">)</span><span class="op" id="2629257">&lt;&lt;</span><span class="num" id="2629259">8</span>&nbsp;<span class="op" id="2629261">|</span>&nbsp;<span class="builtintype" id="2629263">int32</span><span class="op" id="2629268">(</span><span class="ident" id="2629269">buf</span><span class="op" id="2629272">[</span><span class="num" id="2629273">1</span><span class="op" id="2629274">]</span><span class="op" id="2629275">)</span><span class="op" id="2629276">&lt;&lt;</span><span class="num" id="2629278">16</span>&nbsp;<span class="op" id="2629281">|</span>&nbsp;<span class="builtintype" id="2629283">int32</span><span class="op" id="2629288">(</span><span class="ident" id="2629289">buf</span><span class="op" id="2629292">[</span><span class="num" id="2629293">0</span><span class="op" id="2629294">]</span><span class="op" id="2629295">)</span><span class="op" id="2629296">&lt;&lt;</span><span class="num" id="2629298">24</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629303">buf</span>&nbsp;<span class="op" id="2629307">=</span>&nbsp;<span class="ident" id="2629309">buf</span><span class="op" id="2629312">[</span><span class="num" id="2629313">4</span><span class="op" id="2629314">:</span><span class="op" id="2629315">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629318">offset</span>&nbsp;<span class="op" id="2629325">:=</span>&nbsp;<span class="builtintype" id="2629328">int</span><span class="op" id="2629331">(</span><span class="builtintype" id="2629332">int16</span><span class="op" id="2629337">(</span><span class="ident" id="2629338">buf</span><span class="op" id="2629341">[</span><span class="num" id="2629342">1</span><span class="op" id="2629343">]</span><span class="op" id="2629344">)</span><span class="op" id="2629345">|</span><span class="builtintype" id="2629346">int16</span><span class="op" id="2629351">(</span><span class="ident" id="2629352">buf</span><span class="op" id="2629355">[</span><span class="num" id="2629356">0</span><span class="op" id="2629357">]</span><span class="op" id="2629358">)</span><span class="op" id="2629359">&lt;&lt;</span><span class="num" id="2629361">8</span><span class="op" id="2629362">)</span>&nbsp;<span class="op" id="2629364">*</span>&nbsp;<span class="num" id="2629366">60</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629371">if</span>&nbsp;<span class="ident" id="2629374">offset</span>&nbsp;<span class="op" id="2629381">==</span>&nbsp;<span class="op" id="2629384">-</span><span class="num" id="2629385">1</span><span class="op" id="2629386">*</span><span class="num" id="2629387">60</span>&nbsp;<span class="op" id="2629390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629394">t</span><span class="op" id="2629395">.</span><span class="ident" id="2629396">loc</span>&nbsp;<span class="op" id="2629400">=</span>&nbsp;<span class="op" id="2629402">&amp;</span><span class="ident" id="2629403">utcLoc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629411">}</span>&nbsp;<span class="keyword" id="2629413">else</span>&nbsp;<span class="keyword" id="2629418">if</span>&nbsp;<span class="ident" id="2629421">_</span><span class="op" id="2629422">,</span>&nbsp;<span class="ident" id="2629424">localoff</span><span class="op" id="2629432">,</span>&nbsp;<span class="ident" id="2629434">_</span><span class="op" id="2629435">,</span>&nbsp;<span class="ident" id="2629437">_</span><span class="op" id="2629438">,</span>&nbsp;<span class="ident" id="2629440">_</span>&nbsp;<span class="op" id="2629442">:=</span>&nbsp;<span class="ident" id="2629445">Local</span><span class="op" id="2629450">.</span><span class="ident" id="2629451">lookup</span><span class="op" id="2629457">(</span><span class="ident" id="2629458">t</span><span class="op" id="2629459">.</span><span class="ident" id="2629460">sec</span>&nbsp;<span class="op" id="2629464">+</span>&nbsp;<span class="ident" id="2629466">internalToUnix</span><span class="op" id="2629480">)</span><span class="op" id="2629481">;</span>&nbsp;<span class="ident" id="2629483">offset</span>&nbsp;<span class="op" id="2629490">==</span>&nbsp;<span class="ident" id="2629493">localoff</span>&nbsp;<span class="op" id="2629502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629506">t</span><span class="op" id="2629507">.</span><span class="ident" id="2629508">loc</span>&nbsp;<span class="op" id="2629512">=</span>&nbsp;<span class="ident" id="2629514">Local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629521">}</span>&nbsp;<span class="keyword" id="2629523">else</span>&nbsp;<span class="op" id="2629528">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629532">t</span><span class="op" id="2629533">.</span><span class="ident" id="2629534">loc</span>&nbsp;<span class="op" id="2629538">=</span>&nbsp;<span class="ident" id="2629540">FixedZone</span><span class="op" id="2629549">(</span><span class="string" id="2629550">&#34;&#34;</span><span class="op" id="2629552">,</span>&nbsp;<span class="ident" id="2629554">offset</span><span class="op" id="2629560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629567">return</span>&nbsp;<span class="ident" id="2629574">nil</span><br>
<span class="lineno"></span><span class="op" id="2629578">}</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="2629581">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;GobEncoder,&nbsp;GobDecoder,&nbsp;MarshalJSON,&nbsp;UnmarshalJSON&nbsp;in&nbsp;Go&nbsp;2.</span><br>
<span class="lineno"></span><span class="comment" id="2629662">//&nbsp;The&nbsp;same&nbsp;semantics&nbsp;will&nbsp;be&nbsp;provided&nbsp;by&nbsp;the&nbsp;generic&nbsp;MarshalBinary,&nbsp;MarshalText,</span><br>
<span class="lineno"></span><span class="comment" id="2629744">//&nbsp;UnmarshalBinary,&nbsp;UnmarshalText.</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span><span class="comment" id="2629780">//&nbsp;GobEncode&nbsp;implements&nbsp;the&nbsp;gob.GobEncoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2629834">func</span>&nbsp;<span class="op" id="2629839">(</span><span class="ident" id="2629840">t</span>&nbsp;<span class="ident" id="2629842">Time</span><span class="op" id="2629846">)</span>&nbsp;<span class="ident" id="2629848">GobEncode</span><span class="op" id="2629857">(</span><span class="op" id="2629858">)</span>&nbsp;<span class="op" id="2629860">(</span><span class="op" id="2629861">[</span><span class="op" id="2629862">]</span><span class="builtintype" id="2629863">byte</span><span class="op" id="2629867">,</span>&nbsp;<span class="builtintype" id="2629869">error</span><span class="op" id="2629874">)</span>&nbsp;<span class="op" id="2629876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629879">return</span>&nbsp;<span class="ident" id="2629886">t</span><span class="op" id="2629887">.</span><span class="ident" id="2629888">MarshalBinary</span><span class="op" id="2629901">(</span><span class="op" id="2629902">)</span><br>
<span class="lineno"></span><span class="op" id="2629904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span><span class="comment" id="2629907">//&nbsp;GobDecode&nbsp;implements&nbsp;the&nbsp;gob.GobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2629961">func</span>&nbsp;<span class="op" id="2629966">(</span><span class="ident" id="2629967">t</span>&nbsp;<span class="op" id="2629969">*</span><span class="ident" id="2629970">Time</span><span class="op" id="2629974">)</span>&nbsp;<span class="ident" id="2629976">GobDecode</span><span class="op" id="2629985">(</span><span class="ident" id="2629986">data</span>&nbsp;<span class="op" id="2629991">[</span><span class="op" id="2629992">]</span><span class="builtintype" id="2629993">byte</span><span class="op" id="2629997">)</span>&nbsp;<span class="builtintype" id="2629999">error</span>&nbsp;<span class="op" id="2630005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630008">return</span>&nbsp;<span class="ident" id="2630015">t</span><span class="op" id="2630016">.</span><span class="ident" id="2630017">UnmarshalBinary</span><span class="op" id="2630032">(</span><span class="ident" id="2630033">data</span><span class="op" id="2630037">)</span><br>
<span class="lineno"></span><span class="op" id="2630039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span><span class="comment" id="2630042">//&nbsp;MarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Marshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2630098">//&nbsp;The&nbsp;time&nbsp;is&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2630193">func</span>&nbsp;<span class="op" id="2630198">(</span><span class="ident" id="2630199">t</span>&nbsp;<span class="ident" id="2630201">Time</span><span class="op" id="2630205">)</span>&nbsp;<span class="ident" id="2630207">MarshalJSON</span><span class="op" id="2630218">(</span><span class="op" id="2630219">)</span>&nbsp;<span class="op" id="2630221">(</span><span class="op" id="2630222">[</span><span class="op" id="2630223">]</span><span class="builtintype" id="2630224">byte</span><span class="op" id="2630228">,</span>&nbsp;<span class="builtintype" id="2630230">error</span><span class="op" id="2630235">)</span>&nbsp;<span class="op" id="2630237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630240">if</span>&nbsp;<span class="ident" id="2630243">y</span>&nbsp;<span class="op" id="2630245">:=</span>&nbsp;<span class="ident" id="2630248">t</span><span class="op" id="2630249">.</span><span class="ident" id="2630250">Year</span><span class="op" id="2630254">(</span><span class="op" id="2630255">)</span><span class="op" id="2630256">;</span>&nbsp;<span class="ident" id="2630258">y</span>&nbsp;<span class="op" id="2630260">&lt;</span>&nbsp;<span class="num" id="2630262">0</span>&nbsp;<span class="op" id="2630264">||</span>&nbsp;<span class="ident" id="2630267">y</span>&nbsp;<span class="op" id="2630269">&gt;=</span>&nbsp;<span class="num" id="2630272">10000</span>&nbsp;<span class="op" id="2630278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630282">//&nbsp;RFC&nbsp;3339&nbsp;is&nbsp;clear&nbsp;that&nbsp;years&nbsp;are&nbsp;4&nbsp;digits&nbsp;exactly.</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630338">//&nbsp;See&nbsp;golang.org/issue/4556#c15&nbsp;for&nbsp;more&nbsp;discussion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630394">return</span>&nbsp;<span class="ident" id="2630401">nil</span><span class="op" id="2630404">,</span>&nbsp;<span class="ident" id="2630406">errors</span><span class="op" id="2630412">.</span><span class="ident" id="2630413">New</span><span class="op" id="2630416">(</span><span class="string" id="2630417">&#34;Time.MarshalJSON:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2630467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2630470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630473">return</span>&nbsp;<span class="op" id="2630480">[</span><span class="op" id="2630481">]</span><span class="builtintype" id="2630482">byte</span><span class="op" id="2630486">(</span><span class="ident" id="2630487">t</span><span class="op" id="2630488">.</span><span class="ident" id="2630489">Format</span><span class="op" id="2630495">(</span><span class="string" id="2630496">`&#34;`</span>&nbsp;<span class="op" id="2630500">+</span>&nbsp;<span class="ident" id="2630502">RFC3339Nano</span>&nbsp;<span class="op" id="2630514">+</span>&nbsp;<span class="string" id="2630516">`&#34;`</span><span class="op" id="2630519">)</span><span class="op" id="2630520">)</span><span class="op" id="2630521">,</span>&nbsp;<span class="ident" id="2630523">nil</span><br>
<span class="lineno"></span><span class="op" id="2630527">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="comment" id="2630530">//&nbsp;UnmarshalJSON&nbsp;implements&nbsp;the&nbsp;json.Unmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2630590">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;a&nbsp;quoted&nbsp;string&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="2630656">func</span>&nbsp;<span class="op" id="2630661">(</span><span class="ident" id="2630662">t</span>&nbsp;<span class="op" id="2630664">*</span><span class="ident" id="2630665">Time</span><span class="op" id="2630669">)</span>&nbsp;<span class="ident" id="2630671">UnmarshalJSON</span><span class="op" id="2630684">(</span><span class="ident" id="2630685">data</span>&nbsp;<span class="op" id="2630690">[</span><span class="op" id="2630691">]</span><span class="builtintype" id="2630692">byte</span><span class="op" id="2630696">)</span>&nbsp;<span class="op" id="2630698">(</span><span class="ident" id="2630699">err</span>&nbsp;<span class="builtintype" id="2630703">error</span><span class="op" id="2630708">)</span>&nbsp;<span class="op" id="2630710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2630713">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2630769">*</span><span class="ident" id="2630770">t</span><span class="op" id="2630771">,</span>&nbsp;<span class="ident" id="2630773">err</span>&nbsp;<span class="op" id="2630777">=</span>&nbsp;<span class="ident" id="2630779">Parse</span><span class="op" id="2630784">(</span><span class="string" id="2630785">`&#34;`</span><span class="op" id="2630788">+</span><span class="ident" id="2630789">RFC3339</span><span class="op" id="2630796">+</span><span class="string" id="2630797">`&#34;`</span><span class="op" id="2630800">,</span>&nbsp;<span class="builtintype" id="2630802">string</span><span class="op" id="2630808">(</span><span class="ident" id="2630809">data</span><span class="op" id="2630813">)</span><span class="op" id="2630814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630817">return</span><br>
<span class="lineno"></span><span class="op" id="2630824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630827">//&nbsp;MarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextMarshaler&nbsp;interface.</span><br>
<span class="lineno">950</span><span class="comment" id="2630891">//&nbsp;The&nbsp;time&nbsp;is&nbsp;formatted&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format,&nbsp;with&nbsp;sub-second&nbsp;precision&nbsp;added&nbsp;if&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2630980">func</span>&nbsp;<span class="op" id="2630985">(</span><span class="ident" id="2630986">t</span>&nbsp;<span class="ident" id="2630988">Time</span><span class="op" id="2630992">)</span>&nbsp;<span class="ident" id="2630994">MarshalText</span><span class="op" id="2631005">(</span><span class="op" id="2631006">)</span>&nbsp;<span class="op" id="2631008">(</span><span class="op" id="2631009">[</span><span class="op" id="2631010">]</span><span class="builtintype" id="2631011">byte</span><span class="op" id="2631015">,</span>&nbsp;<span class="builtintype" id="2631017">error</span><span class="op" id="2631022">)</span>&nbsp;<span class="op" id="2631024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631027">if</span>&nbsp;<span class="ident" id="2631030">y</span>&nbsp;<span class="op" id="2631032">:=</span>&nbsp;<span class="ident" id="2631035">t</span><span class="op" id="2631036">.</span><span class="ident" id="2631037">Year</span><span class="op" id="2631041">(</span><span class="op" id="2631042">)</span><span class="op" id="2631043">;</span>&nbsp;<span class="ident" id="2631045">y</span>&nbsp;<span class="op" id="2631047">&lt;</span>&nbsp;<span class="num" id="2631049">0</span>&nbsp;<span class="op" id="2631051">||</span>&nbsp;<span class="ident" id="2631054">y</span>&nbsp;<span class="op" id="2631056">&gt;=</span>&nbsp;<span class="num" id="2631059">10000</span>&nbsp;<span class="op" id="2631065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631069">return</span>&nbsp;<span class="ident" id="2631076">nil</span><span class="op" id="2631079">,</span>&nbsp;<span class="ident" id="2631081">errors</span><span class="op" id="2631087">.</span><span class="ident" id="2631088">New</span><span class="op" id="2631091">(</span><span class="string" id="2631092">&#34;Time.MarshalText:&nbsp;year&nbsp;outside&nbsp;of&nbsp;range&nbsp;[0,9999]&#34;</span><span class="op" id="2631142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631145">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631148">return</span>&nbsp;<span class="op" id="2631155">[</span><span class="op" id="2631156">]</span><span class="builtintype" id="2631157">byte</span><span class="op" id="2631161">(</span><span class="ident" id="2631162">t</span><span class="op" id="2631163">.</span><span class="ident" id="2631164">Format</span><span class="op" id="2631170">(</span><span class="ident" id="2631171">RFC3339Nano</span><span class="op" id="2631182">)</span><span class="op" id="2631183">)</span><span class="op" id="2631184">,</span>&nbsp;<span class="ident" id="2631186">nil</span><br>
<span class="lineno"></span><span class="op" id="2631190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2631193">//&nbsp;UnmarshalText&nbsp;implements&nbsp;the&nbsp;encoding.TextUnmarshaler&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="2631261">//&nbsp;The&nbsp;time&nbsp;is&nbsp;expected&nbsp;to&nbsp;be&nbsp;in&nbsp;RFC&nbsp;3339&nbsp;format.</span><br>
<span class="lineno">960</span><span class="keyword" id="2631311">func</span>&nbsp;<span class="op" id="2631316">(</span><span class="ident" id="2631317">t</span>&nbsp;<span class="op" id="2631319">*</span><span class="ident" id="2631320">Time</span><span class="op" id="2631324">)</span>&nbsp;<span class="ident" id="2631326">UnmarshalText</span><span class="op" id="2631339">(</span><span class="ident" id="2631340">data</span>&nbsp;<span class="op" id="2631345">[</span><span class="op" id="2631346">]</span><span class="builtintype" id="2631347">byte</span><span class="op" id="2631351">)</span>&nbsp;<span class="op" id="2631353">(</span><span class="ident" id="2631354">err</span>&nbsp;<span class="builtintype" id="2631358">error</span><span class="op" id="2631363">)</span>&nbsp;<span class="op" id="2631365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631368">//&nbsp;Fractional&nbsp;seconds&nbsp;are&nbsp;handled&nbsp;implicitly&nbsp;by&nbsp;Parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631424">*</span><span class="ident" id="2631425">t</span><span class="op" id="2631426">,</span>&nbsp;<span class="ident" id="2631428">err</span>&nbsp;<span class="op" id="2631432">=</span>&nbsp;<span class="ident" id="2631434">Parse</span><span class="op" id="2631439">(</span><span class="ident" id="2631440">RFC3339</span><span class="op" id="2631447">,</span>&nbsp;<span class="builtintype" id="2631449">string</span><span class="op" id="2631455">(</span><span class="ident" id="2631456">data</span><span class="op" id="2631460">)</span><span class="op" id="2631461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631464">return</span><br>
<span class="lineno"></span><span class="op" id="2631471">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="comment" id="2631474">//&nbsp;Unix&nbsp;returns&nbsp;the&nbsp;local&nbsp;Time&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;Unix&nbsp;time,</span><br>
<span class="lineno"></span><span class="comment" id="2631543">//&nbsp;sec&nbsp;seconds&nbsp;and&nbsp;nsec&nbsp;nanoseconds&nbsp;since&nbsp;January&nbsp;1,&nbsp;1970&nbsp;UTC.</span><br>
<span class="lineno"></span><span class="comment" id="2631606">//&nbsp;It&nbsp;is&nbsp;valid&nbsp;to&nbsp;pass&nbsp;nsec&nbsp;outside&nbsp;the&nbsp;range&nbsp;[0,&nbsp;999999999].</span><br>
<span class="lineno"></span><span class="keyword" id="2631668">func</span>&nbsp;<span class="ident" id="2631673">Unix</span><span class="op" id="2631677">(</span><span class="ident" id="2631678">sec</span>&nbsp;<span class="ident" id="2631682">int64</span><span class="op" id="2631687">,</span>&nbsp;<span class="ident" id="2631689">nsec</span>&nbsp;<span class="ident" id="2631694">int64</span><span class="op" id="2631699">)</span>&nbsp;<span class="ident" id="2631701">Time</span>&nbsp;<span class="op" id="2631706">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631709">if</span>&nbsp;<span class="ident" id="2631712">nsec</span>&nbsp;<span class="op" id="2631717">&lt;</span>&nbsp;<span class="num" id="2631719">0</span>&nbsp;<span class="op" id="2631721">||</span>&nbsp;<span class="ident" id="2631724">nsec</span>&nbsp;<span class="op" id="2631729">&gt;=</span>&nbsp;<span class="num" id="2631732">1e9</span>&nbsp;<span class="op" id="2631736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631740">n</span>&nbsp;<span class="op" id="2631742">:=</span>&nbsp;<span class="ident" id="2631745">nsec</span>&nbsp;<span class="op" id="2631750">/</span>&nbsp;<span class="num" id="2631752">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631758">sec</span>&nbsp;<span class="op" id="2631762">+=</span>&nbsp;<span class="ident" id="2631765">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631769">nsec</span>&nbsp;<span class="op" id="2631774">-=</span>&nbsp;<span class="ident" id="2631777">n</span>&nbsp;<span class="op" id="2631779">*</span>&nbsp;<span class="num" id="2631781">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631787">if</span>&nbsp;<span class="ident" id="2631790">nsec</span>&nbsp;<span class="op" id="2631795">&lt;</span>&nbsp;<span class="num" id="2631797">0</span>&nbsp;<span class="op" id="2631799">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631804">nsec</span>&nbsp;<span class="op" id="2631809">+=</span>&nbsp;<span class="num" id="2631812">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631819">sec</span><span class="op" id="2631822">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631833">return</span>&nbsp;<span class="ident" id="2631840">Time</span><span class="op" id="2631844">{</span><span class="ident" id="2631845">sec</span>&nbsp;<span class="op" id="2631849">+</span>&nbsp;<span class="ident" id="2631851">unixToInternal</span><span class="op" id="2631865">,</span>&nbsp;<span class="builtintype" id="2631867">int32</span><span class="op" id="2631872">(</span><span class="ident" id="2631873">nsec</span><span class="op" id="2631877">)</span><span class="op" id="2631878">,</span>&nbsp;<span class="ident" id="2631880">Local</span><span class="op" id="2631885">}</span><br>
<span class="lineno">980</span><span class="op" id="2631887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2631890">func</span>&nbsp;<span class="ident" id="2631895">isLeap</span><span class="op" id="2631901">(</span><span class="ident" id="2631902">year</span>&nbsp;<span class="builtintype" id="2631907">int</span><span class="op" id="2631910">)</span>&nbsp;<span class="builtintype" id="2631912">bool</span>&nbsp;<span class="op" id="2631917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631920">return</span>&nbsp;<span class="ident" id="2631927">year</span><span class="op" id="2631931">%</span><span class="num" id="2631932">4</span>&nbsp;<span class="op" id="2631934">==</span>&nbsp;<span class="num" id="2631937">0</span>&nbsp;<span class="op" id="2631939">&amp;&amp;</span>&nbsp;<span class="op" id="2631942">(</span><span class="ident" id="2631943">year</span><span class="op" id="2631947">%</span><span class="num" id="2631948">100</span>&nbsp;<span class="op" id="2631952">!=</span>&nbsp;<span class="num" id="2631955">0</span>&nbsp;<span class="op" id="2631957">||</span>&nbsp;<span class="ident" id="2631960">year</span><span class="op" id="2631964">%</span><span class="num" id="2631965">400</span>&nbsp;<span class="op" id="2631969">==</span>&nbsp;<span class="num" id="2631972">0</span><span class="op" id="2631973">)</span><br>
<span class="lineno"></span><span class="op" id="2631975">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="2631978">//&nbsp;norm&nbsp;returns&nbsp;nhi,&nbsp;nlo&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2632013">//&nbsp;&nbsp;&nbsp;&nbsphi&nbsp;*&nbsp;base&nbsp;+&nbsp;lo&nbsp;==&nbsp;nhi&nbsp;*&nbsp;base&nbsp;+&nbsp;nlo</span><br>
<span class="lineno"></span><span class="comment" id="2632051">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&lt;=&nbsp;nlo&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span><span class="keyword" id="2632070">func</span>&nbsp;<span class="ident" id="2632075">norm</span><span class="op" id="2632079">(</span><span class="ident" id="2632080">hi</span><span class="op" id="2632082">,</span>&nbsp;<span class="ident" id="2632084">lo</span><span class="op" id="2632086">,</span>&nbsp;<span class="ident" id="2632088">base</span>&nbsp;<span class="builtintype" id="2632093">int</span><span class="op" id="2632096">)</span>&nbsp;<span class="op" id="2632098">(</span><span class="ident" id="2632099">nhi</span><span class="op" id="2632102">,</span>&nbsp;<span class="ident" id="2632104">nlo</span>&nbsp;<span class="builtintype" id="2632108">int</span><span class="op" id="2632111">)</span>&nbsp;<span class="op" id="2632113">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632116">if</span>&nbsp;<span class="ident" id="2632119">lo</span>&nbsp;<span class="op" id="2632122">&lt;</span>&nbsp;<span class="num" id="2632124">0</span>&nbsp;<span class="op" id="2632126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632130">n</span>&nbsp;<span class="op" id="2632132">:=</span>&nbsp;<span class="op" id="2632135">(</span><span class="op" id="2632136">-</span><span class="ident" id="2632137">lo</span><span class="op" id="2632139">-</span><span class="num" id="2632140">1</span><span class="op" id="2632141">)</span><span class="op" id="2632142">/</span><span class="ident" id="2632143">base</span>&nbsp;<span class="op" id="2632148">+</span>&nbsp;<span class="num" id="2632150">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632154">hi</span>&nbsp;<span class="op" id="2632157">-=</span>&nbsp;<span class="ident" id="2632160">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632164">lo</span>&nbsp;<span class="op" id="2632167">+=</span>&nbsp;<span class="ident" id="2632170">n</span>&nbsp;<span class="op" id="2632172">*</span>&nbsp;<span class="ident" id="2632174">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632180">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632183">if</span>&nbsp;<span class="ident" id="2632186">lo</span>&nbsp;<span class="op" id="2632189">&gt;=</span>&nbsp;<span class="ident" id="2632192">base</span>&nbsp;<span class="op" id="2632197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632201">n</span>&nbsp;<span class="op" id="2632203">:=</span>&nbsp;<span class="ident" id="2632206">lo</span>&nbsp;<span class="op" id="2632209">/</span>&nbsp;<span class="ident" id="2632211">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632218">hi</span>&nbsp;<span class="op" id="2632221">+=</span>&nbsp;<span class="ident" id="2632224">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632228">lo</span>&nbsp;<span class="op" id="2632231">-=</span>&nbsp;<span class="ident" id="2632234">n</span>&nbsp;<span class="op" id="2632236">*</span>&nbsp;<span class="ident" id="2632238">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632244">}</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632247">return</span>&nbsp;<span class="ident" id="2632254">hi</span><span class="op" id="2632256">,</span>&nbsp;<span class="ident" id="2632258">lo</span><br>
<span class="lineno"></span><span class="op" id="2632261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2632264">//&nbsp;Date&nbsp;returns&nbsp;the&nbsp;Time&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2632306">//&nbsp;&nbsp;&nbsp;&nbspyyyy-mm-dd&nbsp;hh:mm:ss&nbsp;+&nbsp;nsec&nbsp;nanoseconds</span><br>
<span class="lineno">1005</span><span class="comment" id="2632348">//&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;zone&nbsp;for&nbsp;that&nbsp;time&nbsp;in&nbsp;the&nbsp;given&nbsp;location.</span><br>
<span class="lineno"></span><span class="comment" id="2632412">//</span><br>
<span class="lineno"></span><span class="comment" id="2632415">//&nbsp;The&nbsp;month,&nbsp;day,&nbsp;hour,&nbsp;min,&nbsp;sec,&nbsp;and&nbsp;nsec&nbsp;values&nbsp;may&nbsp;be&nbsp;outside</span><br>
<span class="lineno"></span><span class="comment" id="2632481">//&nbsp;their&nbsp;usual&nbsp;ranges&nbsp;and&nbsp;will&nbsp;be&nbsp;normalized&nbsp;during&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="comment" id="2632549">//&nbsp;For&nbsp;example,&nbsp;October&nbsp;32&nbsp;converts&nbsp;to&nbsp;November&nbsp;1.</span><br>
<span class="lineno">1010</span><span class="comment" id="2632600">//</span><br>
<span class="lineno"></span><span class="comment" id="2632603">//&nbsp;A&nbsp;daylight&nbsp;savings&nbsp;time&nbsp;transition&nbsp;skips&nbsp;or&nbsp;repeats&nbsp;times.</span><br>
<span class="lineno"></span><span class="comment" id="2632665">//&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;United&nbsp;States,&nbsp;March&nbsp;13,&nbsp;2011&nbsp;2:15am&nbsp;never&nbsp;occurred,</span><br>
<span class="lineno"></span><span class="comment" id="2632741">//&nbsp;while&nbsp;November&nbsp;6,&nbsp;2011&nbsp;1:15am&nbsp;occurred&nbsp;twice.&nbsp;&nbsp;In&nbsp;such&nbsp;cases,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2632810">//&nbsp;choice&nbsp;of&nbsp;time&nbsp;zone,&nbsp;and&nbsp;therefore&nbsp;the&nbsp;time,&nbsp;is&nbsp;not&nbsp;well-defined.</span><br>
<span class="lineno">1015</span><span class="comment" id="2632879">//&nbsp;Date&nbsp;returns&nbsp;a&nbsp;time&nbsp;that&nbsp;is&nbsp;correct&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;two&nbsp;zones&nbsp;involved</span><br>
<span class="lineno"></span><span class="comment" id="2632951">//&nbsp;in&nbsp;the&nbsp;transition,&nbsp;but&nbsp;it&nbsp;does&nbsp;not&nbsp;guarantee&nbsp;which.</span><br>
<span class="lineno"></span><span class="comment" id="2633006">//</span><br>
<span class="lineno"></span><span class="comment" id="2633009">//&nbsp;Date&nbsp;panics&nbsp;if&nbsp;loc&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2633039">func</span>&nbsp;<span class="ident" id="2633044">Date</span><span class="op" id="2633048">(</span><span class="ident" id="2633049">year</span>&nbsp;<span class="builtintype" id="2633054">int</span><span class="op" id="2633057">,</span>&nbsp;<span class="ident" id="2633059">month</span>&nbsp;<span class="ident" id="2633065">Month</span><span class="op" id="2633070">,</span>&nbsp;<span class="ident" id="2633072">day</span><span class="op" id="2633075">,</span>&nbsp;<span class="ident" id="2633077">hour</span><span class="op" id="2633081">,</span>&nbsp;<span class="ident" id="2633083">min</span><span class="op" id="2633086">,</span>&nbsp;<span class="ident" id="2633088">sec</span><span class="op" id="2633091">,</span>&nbsp;<span class="ident" id="2633093">nsec</span>&nbsp;<span class="builtintype" id="2633098">int</span><span class="op" id="2633101">,</span>&nbsp;<span class="ident" id="2633103">loc</span>&nbsp;<span class="op" id="2633107">*</span><span class="ident" id="2633108">Location</span><span class="op" id="2633116">)</span>&nbsp;<span class="ident" id="2633118">Time</span>&nbsp;<span class="op" id="2633123">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633126">if</span>&nbsp;<span class="ident" id="2633129">loc</span>&nbsp;<span class="op" id="2633133">==</span>&nbsp;<span class="ident" id="2633136">nil</span>&nbsp;<span class="op" id="2633140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2633144">panic</span><span class="op" id="2633149">(</span><span class="string" id="2633150">&#34;time:&nbsp;missing&nbsp;Location&nbsp;in&nbsp;call&nbsp;to&nbsp;Date&#34;</span><span class="op" id="2633190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633197">//&nbsp;Normalize&nbsp;month,&nbsp;overflowing&nbsp;into&nbsp;year.</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633241">m</span>&nbsp;<span class="op" id="2633243">:=</span>&nbsp;<span class="builtintype" id="2633246">int</span><span class="op" id="2633249">(</span><span class="ident" id="2633250">month</span><span class="op" id="2633255">)</span>&nbsp;<span class="op" id="2633257">-</span>&nbsp;<span class="num" id="2633259">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633262">year</span><span class="op" id="2633266">,</span>&nbsp;<span class="ident" id="2633268">m</span>&nbsp;<span class="op" id="2633270">=</span>&nbsp;<span class="ident" id="2633272">norm</span><span class="op" id="2633276">(</span><span class="ident" id="2633277">year</span><span class="op" id="2633281">,</span>&nbsp;<span class="ident" id="2633283">m</span><span class="op" id="2633284">,</span>&nbsp;<span class="num" id="2633286">12</span><span class="op" id="2633288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633291">month</span>&nbsp;<span class="op" id="2633297">=</span>&nbsp;<span class="ident" id="2633299">Month</span><span class="op" id="2633304">(</span><span class="ident" id="2633305">m</span><span class="op" id="2633306">)</span>&nbsp;<span class="op" id="2633308">+</span>&nbsp;<span class="num" id="2633310">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633314">//&nbsp;Normalize&nbsp;nsec,&nbsp;sec,&nbsp;min,&nbsp;hour,&nbsp;overflowing&nbsp;into&nbsp;day.</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633372">sec</span><span class="op" id="2633375">,</span>&nbsp;<span class="ident" id="2633377">nsec</span>&nbsp;<span class="op" id="2633382">=</span>&nbsp;<span class="ident" id="2633384">norm</span><span class="op" id="2633388">(</span><span class="ident" id="2633389">sec</span><span class="op" id="2633392">,</span>&nbsp;<span class="ident" id="2633394">nsec</span><span class="op" id="2633398">,</span>&nbsp;<span class="num" id="2633400">1e9</span><span class="op" id="2633403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633406">min</span><span class="op" id="2633409">,</span>&nbsp;<span class="ident" id="2633411">sec</span>&nbsp;<span class="op" id="2633415">=</span>&nbsp;<span class="ident" id="2633417">norm</span><span class="op" id="2633421">(</span><span class="ident" id="2633422">min</span><span class="op" id="2633425">,</span>&nbsp;<span class="ident" id="2633427">sec</span><span class="op" id="2633430">,</span>&nbsp;<span class="num" id="2633432">60</span><span class="op" id="2633434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633437">hour</span><span class="op" id="2633441">,</span>&nbsp;<span class="ident" id="2633443">min</span>&nbsp;<span class="op" id="2633447">=</span>&nbsp;<span class="ident" id="2633449">norm</span><span class="op" id="2633453">(</span><span class="ident" id="2633454">hour</span><span class="op" id="2633458">,</span>&nbsp;<span class="ident" id="2633460">min</span><span class="op" id="2633463">,</span>&nbsp;<span class="num" id="2633465">60</span><span class="op" id="2633467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633470">day</span><span class="op" id="2633473">,</span>&nbsp;<span class="ident" id="2633475">hour</span>&nbsp;<span class="op" id="2633480">=</span>&nbsp;<span class="ident" id="2633482">norm</span><span class="op" id="2633486">(</span><span class="ident" id="2633487">day</span><span class="op" id="2633490">,</span>&nbsp;<span class="ident" id="2633492">hour</span><span class="op" id="2633496">,</span>&nbsp;<span class="num" id="2633498">24</span><span class="op" id="2633500">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633504">y</span>&nbsp;<span class="op" id="2633506">:=</span>&nbsp;<span class="ident" id="2633509">uint64</span><span class="op" id="2633515">(</span><span class="ident" id="2633516">int64</span><span class="op" id="2633521">(</span><span class="ident" id="2633522">year</span><span class="op" id="2633526">)</span>&nbsp;<span class="op" id="2633528">-</span>&nbsp;<span class="ident" id="2633530">absoluteZeroYear</span><span class="op" id="2633546">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633550">//&nbsp;Compute&nbsp;days&nbsp;since&nbsp;the&nbsp;absolute&nbsp;epoch.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633594">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;from&nbsp;400-year&nbsp;cycles.</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633632">n</span>&nbsp;<span class="op" id="2633634">:=</span>&nbsp;<span class="ident" id="2633637">y</span>&nbsp;<span class="op" id="2633639">/</span>&nbsp;<span class="num" id="2633641">400</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633646">y</span>&nbsp;<span class="op" id="2633648">-=</span>&nbsp;<span class="num" id="2633651">400</span>&nbsp;<span class="op" id="2633655">*</span>&nbsp;<span class="ident" id="2633657">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633660">d</span>&nbsp;<span class="op" id="2633662">:=</span>&nbsp;<span class="ident" id="2633665">daysPer400Years</span>&nbsp;<span class="op" id="2633681">*</span>&nbsp;<span class="ident" id="2633683">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633687">//&nbsp;Add&nbsp;in&nbsp;100-year&nbsp;cycles.</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633715">n</span>&nbsp;<span class="op" id="2633717">=</span>&nbsp;<span class="ident" id="2633719">y</span>&nbsp;<span class="op" id="2633721">/</span>&nbsp;<span class="num" id="2633723">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633728">y</span>&nbsp;<span class="op" id="2633730">-=</span>&nbsp;<span class="num" id="2633733">100</span>&nbsp;<span class="op" id="2633737">*</span>&nbsp;<span class="ident" id="2633739">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633742">d</span>&nbsp;<span class="op" id="2633744">+=</span>&nbsp;<span class="ident" id="2633747">daysPer100Years</span>&nbsp;<span class="op" id="2633763">*</span>&nbsp;<span class="ident" id="2633765">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633769">//&nbsp;Add&nbsp;in&nbsp;4-year&nbsp;cycles.</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633795">n</span>&nbsp;<span class="op" id="2633797">=</span>&nbsp;<span class="ident" id="2633799">y</span>&nbsp;<span class="op" id="2633801">/</span>&nbsp;<span class="num" id="2633803">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633806">y</span>&nbsp;<span class="op" id="2633808">-=</span>&nbsp;<span class="num" id="2633811">4</span>&nbsp;<span class="op" id="2633813">*</span>&nbsp;<span class="ident" id="2633815">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633818">d</span>&nbsp;<span class="op" id="2633820">+=</span>&nbsp;<span class="ident" id="2633823">daysPer4Years</span>&nbsp;<span class="op" id="2633837">*</span>&nbsp;<span class="ident" id="2633839">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633843">//&nbsp;Add&nbsp;in&nbsp;non-leap&nbsp;years.</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633870">n</span>&nbsp;<span class="op" id="2633872">=</span>&nbsp;<span class="ident" id="2633874">y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633877">d</span>&nbsp;<span class="op" id="2633879">+=</span>&nbsp;<span class="num" id="2633882">365</span>&nbsp;<span class="op" id="2633886">*</span>&nbsp;<span class="ident" id="2633888">n</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633892">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;this&nbsp;month.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633927">d</span>&nbsp;<span class="op" id="2633929">+=</span>&nbsp;<span class="ident" id="2633932">uint64</span><span class="op" id="2633938">(</span><span class="ident" id="2633939">daysBefore</span><span class="op" id="2633949">[</span><span class="ident" id="2633950">month</span><span class="op" id="2633955">-</span><span class="num" id="2633956">1</span><span class="op" id="2633957">]</span><span class="op" id="2633958">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633961">if</span>&nbsp;<span class="ident" id="2633964">isLeap</span><span class="op" id="2633970">(</span><span class="ident" id="2633971">year</span><span class="op" id="2633975">)</span>&nbsp;<span class="op" id="2633977">&amp;&amp;</span>&nbsp;<span class="ident" id="2633980">month</span>&nbsp;<span class="op" id="2633986">&gt;=</span>&nbsp;<span class="ident" id="2633989">March</span>&nbsp;<span class="op" id="2633995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633999">d</span><span class="op" id="2634000">++</span>&nbsp;<span class="comment" id="2634003">//&nbsp;February&nbsp;29</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634023">//&nbsp;Add&nbsp;in&nbsp;days&nbsp;before&nbsp;today.</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634053">d</span>&nbsp;<span class="op" id="2634055">+=</span>&nbsp;<span class="ident" id="2634058">uint64</span><span class="op" id="2634064">(</span><span class="ident" id="2634065">day</span>&nbsp;<span class="op" id="2634069">-</span>&nbsp;<span class="num" id="2634071">1</span><span class="op" id="2634072">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634076">//&nbsp;Add&nbsp;in&nbsp;time&nbsp;elapsed&nbsp;today.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634107">abs</span>&nbsp;<span class="op" id="2634111">:=</span>&nbsp;<span class="ident" id="2634114">d</span>&nbsp;<span class="op" id="2634116">*</span>&nbsp;<span class="ident" id="2634118">secondsPerDay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634133">abs</span>&nbsp;<span class="op" id="2634137">+=</span>&nbsp;<span class="ident" id="2634140">uint64</span><span class="op" id="2634146">(</span><span class="ident" id="2634147">hour</span><span class="op" id="2634151">*</span><span class="ident" id="2634152">secondsPerHour</span>&nbsp;<span class="op" id="2634167">+</span>&nbsp;<span class="ident" id="2634169">min</span><span class="op" id="2634172">*</span><span class="ident" id="2634173">secondsPerMinute</span>&nbsp;<span class="op" id="2634190">+</span>&nbsp;<span class="ident" id="2634192">sec</span><span class="op" id="2634195">)</span><br>
<span class="lineno">1070</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634199">unix</span>&nbsp;<span class="op" id="2634204">:=</span>&nbsp;<span class="ident" id="2634207">int64</span><span class="op" id="2634212">(</span><span class="ident" id="2634213">abs</span><span class="op" id="2634216">)</span>&nbsp;<span class="op" id="2634218">+</span>&nbsp;<span class="op" id="2634220">(</span><span class="ident" id="2634221">absoluteToInternal</span>&nbsp;<span class="op" id="2634240">+</span>&nbsp;<span class="ident" id="2634242">internalToUnix</span><span class="op" id="2634256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634260">//&nbsp;Look&nbsp;for&nbsp;zone&nbsp;offset&nbsp;for&nbsp;t,&nbsp;so&nbsp;we&nbsp;can&nbsp;adjust&nbsp;to&nbsp;UTC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634317">//&nbsp;The&nbsp;lookup&nbsp;function&nbsp;expects&nbsp;UTC,&nbsp;so&nbsp;we&nbsp;pass&nbsp;t&nbsp;in&nbsp;the</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634374">//&nbsp;hope&nbsp;that&nbsp;it&nbsp;will&nbsp;not&nbsp;be&nbsp;too&nbsp;close&nbsp;to&nbsp;a&nbsp;zone&nbsp;transition,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634435">//&nbsp;and&nbsp;then&nbsp;adjust&nbsp;if&nbsp;it&nbsp;is.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634465">_</span><span class="op" id="2634466">,</span>&nbsp;<span class="ident" id="2634468">offset</span><span class="op" id="2634474">,</span>&nbsp;<span class="ident" id="2634476">_</span><span class="op" id="2634477">,</span>&nbsp;<span class="ident" id="2634479">start</span><span class="op" id="2634484">,</span>&nbsp;<span class="ident" id="2634486">end</span>&nbsp;<span class="op" id="2634490">:=</span>&nbsp;<span class="ident" id="2634493">loc</span><span class="op" id="2634496">.</span><span class="ident" id="2634497">lookup</span><span class="op" id="2634503">(</span><span class="ident" id="2634504">unix</span><span class="op" id="2634508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634511">if</span>&nbsp;<span class="ident" id="2634514">offset</span>&nbsp;<span class="op" id="2634521">!=</span>&nbsp;<span class="num" id="2634524">0</span>&nbsp;<span class="op" id="2634526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634530">switch</span>&nbsp;<span class="ident" id="2634537">utc</span>&nbsp;<span class="op" id="2634541">:=</span>&nbsp;<span class="ident" id="2634544">unix</span>&nbsp;<span class="op" id="2634549">-</span>&nbsp;<span class="ident" id="2634551">int64</span><span class="op" id="2634556">(</span><span class="ident" id="2634557">offset</span><span class="op" id="2634563">)</span><span class="op" id="2634564">;</span>&nbsp;<span class="op" id="2634566">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634570">case</span>&nbsp;<span class="ident" id="2634575">utc</span>&nbsp;<span class="op" id="2634579">&lt;</span>&nbsp;<span class="ident" id="2634581">start</span><span class="op" id="2634586">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634591">_</span><span class="op" id="2634592">,</span>&nbsp;<span class="ident" id="2634594">offset</span><span class="op" id="2634600">,</span>&nbsp;<span class="ident" id="2634602">_</span><span class="op" id="2634603">,</span>&nbsp;<span class="ident" id="2634605">_</span><span class="op" id="2634606">,</span>&nbsp;<span class="ident" id="2634608">_</span>&nbsp;<span class="op" id="2634610">=</span>&nbsp;<span class="ident" id="2634612">loc</span><span class="op" id="2634615">.</span><span class="ident" id="2634616">lookup</span><span class="op" id="2634622">(</span><span class="ident" id="2634623">start</span>&nbsp;<span class="op" id="2634629">-</span>&nbsp;<span class="num" id="2634631">1</span><span class="op" id="2634632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634636">case</span>&nbsp;<span class="ident" id="2634641">utc</span>&nbsp;<span class="op" id="2634645">&gt;=</span>&nbsp;<span class="ident" id="2634648">end</span><span class="op" id="2634651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634656">_</span><span class="op" id="2634657">,</span>&nbsp;<span class="ident" id="2634659">offset</span><span class="op" id="2634665">,</span>&nbsp;<span class="ident" id="2634667">_</span><span class="op" id="2634668">,</span>&nbsp;<span class="ident" id="2634670">_</span><span class="op" id="2634671">,</span>&nbsp;<span class="ident" id="2634673">_</span>&nbsp;<span class="op" id="2634675">=</span>&nbsp;<span class="ident" id="2634677">loc</span><span class="op" id="2634680">.</span><span class="ident" id="2634681">lookup</span><span class="op" id="2634687">(</span><span class="ident" id="2634688">end</span><span class="op" id="2634691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634695">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634699">unix</span>&nbsp;<span class="op" id="2634704">-=</span>&nbsp;<span class="ident" id="2634707">int64</span><span class="op" id="2634712">(</span><span class="ident" id="2634713">offset</span><span class="op" id="2634719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634726">return</span>&nbsp;<span class="ident" id="2634733">Time</span><span class="op" id="2634737">{</span><span class="ident" id="2634738">unix</span>&nbsp;<span class="op" id="2634743">+</span>&nbsp;<span class="ident" id="2634745">unixToInternal</span><span class="op" id="2634759">,</span>&nbsp;<span class="builtintype" id="2634761">int32</span><span class="op" id="2634766">(</span><span class="ident" id="2634767">nsec</span><span class="op" id="2634771">)</span><span class="op" id="2634772">,</span>&nbsp;<span class="ident" id="2634774">loc</span><span class="op" id="2634777">}</span><br>
<span class="lineno"></span><span class="op" id="2634779">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="2634782">//&nbsp;Truncate&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;down&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2634874">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Truncate&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2634918">func</span>&nbsp;<span class="op" id="2634923">(</span><span class="ident" id="2634924">t</span>&nbsp;<span class="ident" id="2634926">Time</span><span class="op" id="2634930">)</span>&nbsp;<span class="ident" id="2634932">Truncate</span><span class="op" id="2634940">(</span><span class="ident" id="2634941">d</span>&nbsp;<span class="ident" id="2634943">Duration</span><span class="op" id="2634951">)</span>&nbsp;<span class="ident" id="2634953">Time</span>&nbsp;<span class="op" id="2634958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634961">if</span>&nbsp;<span class="ident" id="2634964">d</span>&nbsp;<span class="op" id="2634966">&lt;=</span>&nbsp;<span class="num" id="2634969">0</span>&nbsp;<span class="op" id="2634971">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634975">return</span>&nbsp;<span class="ident" id="2634982">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634988">_</span><span class="op" id="2634989">,</span>&nbsp;<span class="ident" id="2634991">r</span>&nbsp;<span class="op" id="2634993">:=</span>&nbsp;<span class="ident" id="2634996">div</span><span class="op" id="2634999">(</span><span class="ident" id="2635000">t</span><span class="op" id="2635001">,</span>&nbsp;<span class="ident" id="2635003">d</span><span class="op" id="2635004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635007">return</span>&nbsp;<span class="ident" id="2635014">t</span><span class="op" id="2635015">.</span><span class="ident" id="2635016">Add</span><span class="op" id="2635019">(</span><span class="op" id="2635020">-</span><span class="ident" id="2635021">r</span><span class="op" id="2635022">)</span><br>
<span class="lineno"></span><span class="op" id="2635024">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="2635027">//&nbsp;Round&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;t&nbsp;to&nbsp;the&nbsp;nearest&nbsp;multiple&nbsp;of&nbsp;d&nbsp;(since&nbsp;the&nbsp;zero&nbsp;time).</span><br>
<span class="lineno"></span><span class="comment" id="2635121">//&nbsp;The&nbsp;rounding&nbsp;behavior&nbsp;for&nbsp;halfway&nbsp;values&nbsp;is&nbsp;to&nbsp;round&nbsp;up.</span><br>
<span class="lineno"></span><span class="comment" id="2635181">//&nbsp;If&nbsp;d&nbsp;&lt;=&nbsp;0,&nbsp;Round&nbsp;returns&nbsp;t&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="keyword" id="2635222">func</span>&nbsp;<span class="op" id="2635227">(</span><span class="ident" id="2635228">t</span>&nbsp;<span class="ident" id="2635230">Time</span><span class="op" id="2635234">)</span>&nbsp;<span class="ident" id="2635236">Round</span><span class="op" id="2635241">(</span><span class="ident" id="2635242">d</span>&nbsp;<span class="ident" id="2635244">Duration</span><span class="op" id="2635252">)</span>&nbsp;<span class="ident" id="2635254">Time</span>&nbsp;<span class="op" id="2635259">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635262">if</span>&nbsp;<span class="ident" id="2635265">d</span>&nbsp;<span class="op" id="2635267">&lt;=</span>&nbsp;<span class="num" id="2635270">0</span>&nbsp;<span class="op" id="2635272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635276">return</span>&nbsp;<span class="ident" id="2635283">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635289">_</span><span class="op" id="2635290">,</span>&nbsp;<span class="ident" id="2635292">r</span>&nbsp;<span class="op" id="2635294">:=</span>&nbsp;<span class="ident" id="2635297">div</span><span class="op" id="2635300">(</span><span class="ident" id="2635301">t</span><span class="op" id="2635302">,</span>&nbsp;<span class="ident" id="2635304">d</span><span class="op" id="2635305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635308">if</span>&nbsp;<span class="ident" id="2635311">r</span><span class="op" id="2635312">+</span><span class="ident" id="2635313">r</span>&nbsp;<span class="op" id="2635315">&lt;</span>&nbsp;<span class="ident" id="2635317">d</span>&nbsp;<span class="op" id="2635319">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635323">return</span>&nbsp;<span class="ident" id="2635330">t</span><span class="op" id="2635331">.</span><span class="ident" id="2635332">Add</span><span class="op" id="2635335">(</span><span class="op" id="2635336">-</span><span class="ident" id="2635337">r</span><span class="op" id="2635338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635344">return</span>&nbsp;<span class="ident" id="2635351">t</span><span class="op" id="2635352">.</span><span class="ident" id="2635353">Add</span><span class="op" id="2635356">(</span><span class="ident" id="2635357">d</span>&nbsp;<span class="op" id="2635359">-</span>&nbsp;<span class="ident" id="2635361">r</span><span class="op" id="2635362">)</span><br>
<span class="lineno"></span><span class="op" id="2635364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span><span class="comment" id="2635367">//&nbsp;div&nbsp;divides&nbsp;t&nbsp;by&nbsp;d&nbsp;and&nbsp;returns&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;and&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="2635436">//&nbsp;We&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;quotient&nbsp;parity&nbsp;anymore&nbsp;(round&nbsp;half&nbsp;up&nbsp;instead&nbsp;of&nbsp;round&nbsp;to&nbsp;even)</span><br>
<span class="lineno"></span><span class="comment" id="2635521">//&nbsp;but&nbsp;it&#39;s&nbsp;still&nbsp;here&nbsp;in&nbsp;case&nbsp;we&nbsp;change&nbsp;our&nbsp;minds.</span><br>
<span class="lineno"></span><span class="keyword" id="2635573">func</span>&nbsp;<span class="ident" id="2635578">div</span><span class="op" id="2635581">(</span><span class="ident" id="2635582">t</span>&nbsp;<span class="ident" id="2635584">Time</span><span class="op" id="2635588">,</span>&nbsp;<span class="ident" id="2635590">d</span>&nbsp;<span class="ident" id="2635592">Duration</span><span class="op" id="2635600">)</span>&nbsp;<span class="op" id="2635602">(</span><span class="ident" id="2635603">qmod2</span>&nbsp;<span class="builtintype" id="2635609">int</span><span class="op" id="2635612">,</span>&nbsp;<span class="ident" id="2635614">r</span>&nbsp;<span class="ident" id="2635616">Duration</span><span class="op" id="2635624">)</span>&nbsp;<span class="op" id="2635626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635629">neg</span>&nbsp;<span class="op" id="2635633">:=</span>&nbsp;<span class="builtintype" id="2635636">false</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635643">nsec</span>&nbsp;<span class="op" id="2635648">:=</span>&nbsp;<span class="builtintype" id="2635651">int32</span><span class="op" id="2635656">(</span><span class="ident" id="2635657">t</span><span class="op" id="2635658">.</span><span class="ident" id="2635659">nsec</span><span class="op" id="2635663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635666">if</span>&nbsp;<span class="ident" id="2635669">t</span><span class="op" id="2635670">.</span><span class="ident" id="2635671">sec</span>&nbsp;<span class="op" id="2635675">&lt;</span>&nbsp;<span class="num" id="2635677">0</span>&nbsp;<span class="op" id="2635679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2635683">//&nbsp;Operate&nbsp;on&nbsp;absolute&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635715">neg</span>&nbsp;<span class="op" id="2635719">=</span>&nbsp;<span class="builtintype" id="2635721">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635728">t</span><span class="op" id="2635729">.</span><span class="ident" id="2635730">sec</span>&nbsp;<span class="op" id="2635734">=</span>&nbsp;<span class="op" id="2635736">-</span><span class="ident" id="2635737">t</span><span class="op" id="2635738">.</span><span class="ident" id="2635739">sec</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635745">nsec</span>&nbsp;<span class="op" id="2635750">=</span>&nbsp;<span class="op" id="2635752">-</span><span class="ident" id="2635753">nsec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635760">if</span>&nbsp;<span class="ident" id="2635763">nsec</span>&nbsp;<span class="op" id="2635768">&lt;</span>&nbsp;<span class="num" id="2635770">0</span>&nbsp;<span class="op" id="2635772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635777">nsec</span>&nbsp;<span class="op" id="2635782">+=</span>&nbsp;<span class="num" id="2635785">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635792">t</span><span class="op" id="2635793">.</span><span class="ident" id="2635794">sec</span><span class="op" id="2635797">--</span>&nbsp;<span class="comment" id="2635800">//&nbsp;t.sec&nbsp;&gt;=&nbsp;1&nbsp;before&nbsp;the&nbsp;--&nbsp;so&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635838">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635845">switch</span>&nbsp;<span class="op" id="2635852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2635855">//&nbsp;Special&nbsp;case:&nbsp;2d&nbsp;divides&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635894">case</span>&nbsp;<span class="ident" id="2635899">d</span>&nbsp;<span class="op" id="2635901">&lt;</span>&nbsp;<span class="ident" id="2635903">Second</span>&nbsp;<span class="op" id="2635910">&amp;&amp;</span>&nbsp;<span class="ident" id="2635913">Second</span><span class="op" id="2635919">%</span><span class="op" id="2635920">(</span><span class="ident" id="2635921">d</span><span class="op" id="2635922">+</span><span class="ident" id="2635923">d</span><span class="op" id="2635924">)</span>&nbsp;<span class="op" id="2635926">==</span>&nbsp;<span class="num" id="2635929">0</span><span class="op" id="2635930">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635934">qmod2</span>&nbsp;<span class="op" id="2635940">=</span>&nbsp;<span class="builtintype" id="2635942">int</span><span class="op" id="2635945">(</span><span class="ident" id="2635946">nsec</span><span class="op" id="2635950">/</span><span class="builtintype" id="2635951">int32</span><span class="op" id="2635956">(</span><span class="ident" id="2635957">d</span><span class="op" id="2635958">)</span><span class="op" id="2635959">)</span>&nbsp;<span class="op" id="2635961">&amp;</span>&nbsp;<span class="num" id="2635963">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635967">r</span>&nbsp;<span class="op" id="2635969">=</span>&nbsp;<span class="ident" id="2635971">Duration</span><span class="op" id="2635979">(</span><span class="ident" id="2635980">nsec</span>&nbsp;<span class="op" id="2635985">%</span>&nbsp;<span class="builtintype" id="2635987">int32</span><span class="op" id="2635992">(</span><span class="ident" id="2635993">d</span><span class="op" id="2635994">)</span><span class="op" id="2635995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2635999">//&nbsp;Special&nbsp;case:&nbsp;d&nbsp;is&nbsp;a&nbsp;multiple&nbsp;of&nbsp;1&nbsp;second.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636046">case</span>&nbsp;<span class="ident" id="2636051">d</span><span class="op" id="2636052">%</span><span class="ident" id="2636053">Second</span>&nbsp;<span class="op" id="2636060">==</span>&nbsp;<span class="num" id="2636063">0</span><span class="op" id="2636064">:</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636068">d1</span>&nbsp;<span class="op" id="2636071">:=</span>&nbsp;<span class="ident" id="2636074">int64</span><span class="op" id="2636079">(</span><span class="ident" id="2636080">d</span>&nbsp;<span class="op" id="2636082">/</span>&nbsp;<span class="ident" id="2636084">Second</span><span class="op" id="2636090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636094">qmod2</span>&nbsp;<span class="op" id="2636100">=</span>&nbsp;<span class="builtintype" id="2636102">int</span><span class="op" id="2636105">(</span><span class="ident" id="2636106">t</span><span class="op" id="2636107">.</span><span class="ident" id="2636108">sec</span><span class="op" id="2636111">/</span><span class="ident" id="2636112">d1</span><span class="op" id="2636114">)</span>&nbsp;<span class="op" id="2636116">&amp;</span>&nbsp;<span class="num" id="2636118">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636122">r</span>&nbsp;<span class="op" id="2636124">=</span>&nbsp;<span class="ident" id="2636126">Duration</span><span class="op" id="2636134">(</span><span class="ident" id="2636135">t</span><span class="op" id="2636136">.</span><span class="ident" id="2636137">sec</span><span class="op" id="2636140">%</span><span class="ident" id="2636141">d1</span><span class="op" id="2636143">)</span><span class="op" id="2636144">*</span><span class="ident" id="2636145">Second</span>&nbsp;<span class="op" id="2636152">+</span>&nbsp;<span class="ident" id="2636154">Duration</span><span class="op" id="2636162">(</span><span class="ident" id="2636163">nsec</span><span class="op" id="2636167">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636171">//&nbsp;General&nbsp;case.</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636189">//&nbsp;This&nbsp;could&nbsp;be&nbsp;faster&nbsp;if&nbsp;more&nbsp;cleverness&nbsp;were&nbsp;applied,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636247">//&nbsp;but&nbsp;it&#39;s&nbsp;really&nbsp;only&nbsp;here&nbsp;to&nbsp;avoid&nbsp;special&nbsp;case&nbsp;restrictions&nbsp;in&nbsp;the&nbsp;API.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636324">//&nbsp;No&nbsp;one&nbsp;will&nbsp;care&nbsp;about&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636364">default</span><span class="op" id="2636371">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636375">//&nbsp;Compute&nbsp;nanoseconds&nbsp;as&nbsp;128-bit&nbsp;number.</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636419">sec</span>&nbsp;<span class="op" id="2636423">:=</span>&nbsp;<span class="ident" id="2636426">uint64</span><span class="op" id="2636432">(</span><span class="ident" id="2636433">t</span><span class="op" id="2636434">.</span><span class="ident" id="2636435">sec</span><span class="op" id="2636438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636442">tmp</span>&nbsp;<span class="op" id="2636446">:=</span>&nbsp;<span class="op" id="2636449">(</span><span class="ident" id="2636450">sec</span>&nbsp;<span class="op" id="2636454">&gt;&gt;</span>&nbsp;<span class="num" id="2636457">32</span><span class="op" id="2636459">)</span>&nbsp;<span class="op" id="2636461">*</span>&nbsp;<span class="num" id="2636463">1e9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636469">u1</span>&nbsp;<span class="op" id="2636472">:=</span>&nbsp;<span class="ident" id="2636475">tmp</span>&nbsp;<span class="op" id="2636479">&gt;&gt;</span>&nbsp;<span class="num" id="2636482">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636487">u0</span>&nbsp;<span class="op" id="2636490">:=</span>&nbsp;<span class="ident" id="2636493">tmp</span>&nbsp;<span class="op" id="2636497">&lt;&lt;</span>&nbsp;<span class="num" id="2636500">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636505">tmp</span>&nbsp;<span class="op" id="2636509">=</span>&nbsp;<span class="ident" id="2636511">uint64</span><span class="op" id="2636517">(</span><span class="ident" id="2636518">sec</span><span class="op" id="2636521">&amp;</span><span class="num" id="2636522">0xFFFFFFFF</span><span class="op" id="2636532">)</span>&nbsp;<span class="op" id="2636534">*</span>&nbsp;<span class="num" id="2636536">1e9</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636542">u0x</span><span class="op" id="2636545">,</span>&nbsp;<span class="ident" id="2636547">u0</span>&nbsp;<span class="op" id="2636550">:=</span>&nbsp;<span class="ident" id="2636553">u0</span><span class="op" id="2636555">,</span>&nbsp;<span class="ident" id="2636557">u0</span><span class="op" id="2636559">+</span><span class="ident" id="2636560">tmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636566">if</span>&nbsp;<span class="ident" id="2636569">u0</span>&nbsp;<span class="op" id="2636572">&lt;</span>&nbsp;<span class="ident" id="2636574">u0x</span>&nbsp;<span class="op" id="2636578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636583">u1</span><span class="op" id="2636585">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636594">u0x</span><span class="op" id="2636597">,</span>&nbsp;<span class="ident" id="2636599">u0</span>&nbsp;<span class="op" id="2636602">=</span>&nbsp;<span class="ident" id="2636604">u0</span><span class="op" id="2636606">,</span>&nbsp;<span class="ident" id="2636608">u0</span><span class="op" id="2636610">+</span><span class="ident" id="2636611">uint64</span><span class="op" id="2636617">(</span><span class="ident" id="2636618">nsec</span><span class="op" id="2636622">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636626">if</span>&nbsp;<span class="ident" id="2636629">u0</span>&nbsp;<span class="op" id="2636632">&lt;</span>&nbsp;<span class="ident" id="2636634">u0x</span>&nbsp;<span class="op" id="2636638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636643">u1</span><span class="op" id="2636645">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636655">//&nbsp;Compute&nbsp;remainder&nbsp;by&nbsp;subtracting&nbsp;r&lt;&lt;k&nbsp;for&nbsp;decreasing&nbsp;k.</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636716">//&nbsp;Quotient&nbsp;parity&nbsp;is&nbsp;whether&nbsp;we&nbsp;subtract&nbsp;on&nbsp;last&nbsp;round.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636775">d1</span>&nbsp;<span class="op" id="2636778">:=</span>&nbsp;<span class="ident" id="2636781">uint64</span><span class="op" id="2636787">(</span><span class="ident" id="2636788">d</span><span class="op" id="2636789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636793">for</span>&nbsp;<span class="ident" id="2636797">d1</span><span class="op" id="2636799">&gt;&gt;</span><span class="num" id="2636801">63</span>&nbsp;<span class="op" id="2636804">!=</span>&nbsp;<span class="num" id="2636807">1</span>&nbsp;<span class="op" id="2636809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636814">d1</span>&nbsp;<span class="op" id="2636817">&lt;&lt;=</span>&nbsp;<span class="num" id="2636821">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636825">}</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636829">d0</span>&nbsp;<span class="op" id="2636832">:=</span>&nbsp;<span class="ident" id="2636835">uint64</span><span class="op" id="2636841">(</span><span class="num" id="2636842">0</span><span class="op" id="2636843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636847">for</span>&nbsp;<span class="op" id="2636851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636856">qmod2</span>&nbsp;<span class="op" id="2636862">=</span>&nbsp;<span class="num" id="2636864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636869">if</span>&nbsp;<span class="ident" id="2636872">u1</span>&nbsp;<span class="op" id="2636875">&gt;</span>&nbsp;<span class="ident" id="2636877">d1</span>&nbsp;<span class="op" id="2636880">||</span>&nbsp;<span class="ident" id="2636883">u1</span>&nbsp;<span class="op" id="2636886">==</span>&nbsp;<span class="ident" id="2636889">d1</span>&nbsp;<span class="op" id="2636892">&amp;&amp;</span>&nbsp;<span class="ident" id="2636895">u0</span>&nbsp;<span class="op" id="2636898">&gt;=</span>&nbsp;<span class="ident" id="2636901">d0</span>&nbsp;<span class="op" id="2636904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636910">//&nbsp;subtract</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636926">qmod2</span>&nbsp;<span class="op" id="2636932">=</span>&nbsp;<span class="num" id="2636934">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636940">u0x</span><span class="op" id="2636943">,</span>&nbsp;<span class="ident" id="2636945">u0</span>&nbsp;<span class="op" id="2636948">=</span>&nbsp;<span class="ident" id="2636950">u0</span><span class="op" id="2636952">,</span>&nbsp;<span class="ident" id="2636954">u0</span><span class="op" id="2636956">-</span><span class="ident" id="2636957">d0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636964">if</span>&nbsp;<span class="ident" id="2636967">u0</span>&nbsp;<span class="op" id="2636970">&gt;</span>&nbsp;<span class="ident" id="2636972">u0x</span>&nbsp;<span class="op" id="2636976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636983">u1</span><span class="op" id="2636985">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636992">}</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636998">u1</span>&nbsp;<span class="op" id="2637001">-=</span>&nbsp;<span class="ident" id="2637004">d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637015">if</span>&nbsp;<span class="ident" id="2637018">d1</span>&nbsp;<span class="op" id="2637021">==</span>&nbsp;<span class="num" id="2637024">0</span>&nbsp;<span class="op" id="2637026">&amp;&amp;</span>&nbsp;<span class="ident" id="2637029">d0</span>&nbsp;<span class="op" id="2637032">==</span>&nbsp;<span class="ident" id="2637035">uint64</span><span class="op" id="2637041">(</span><span class="ident" id="2637042">d</span><span class="op" id="2637043">)</span>&nbsp;<span class="op" id="2637045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637051">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637060">}</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637065">d0</span>&nbsp;<span class="op" id="2637068">&gt;&gt;=</span>&nbsp;<span class="num" id="2637072">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637077">d0</span>&nbsp;<span class="op" id="2637080">|=</span>&nbsp;<span class="op" id="2637083">(</span><span class="ident" id="2637084">d1</span>&nbsp;<span class="op" id="2637087">&amp;</span>&nbsp;<span class="num" id="2637089">1</span><span class="op" id="2637090">)</span>&nbsp;<span class="op" id="2637092">&lt;&lt;</span>&nbsp;<span class="num" id="2637095">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637101">d1</span>&nbsp;<span class="op" id="2637104">&gt;&gt;=</span>&nbsp;<span class="num" id="2637108">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637116">r</span>&nbsp;<span class="op" id="2637118">=</span>&nbsp;<span class="ident" id="2637120">Duration</span><span class="op" id="2637128">(</span><span class="ident" id="2637129">u0</span><span class="op" id="2637131">)</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637138">if</span>&nbsp;<span class="ident" id="2637141">neg</span>&nbsp;<span class="op" id="2637145">&amp;&amp;</span>&nbsp;<span class="ident" id="2637148">r</span>&nbsp;<span class="op" id="2637150">!=</span>&nbsp;<span class="num" id="2637153">0</span>&nbsp;<span class="op" id="2637155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637159">//&nbsp;If&nbsp;input&nbsp;was&nbsp;negative&nbsp;and&nbsp;not&nbsp;an&nbsp;exact&nbsp;multiple&nbsp;of&nbsp;d,&nbsp;we&nbsp;computed&nbsp;q,&nbsp;r&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637245">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637263">//&nbsp;But&nbsp;the&nbsp;right&nbsp;answers&nbsp;are&nbsp;given&nbsp;by&nbsp;-(q-1),&nbsp;d-r:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637316">//&nbsp;&nbsp;&nbsp;&nbspq*d&nbsp;+&nbsp;r&nbsp;=&nbsp;-t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637334">//&nbsp;&nbsp;&nbsp;&nbsp-q*d&nbsp;-&nbsp;r&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2637352">//&nbsp;&nbsp;&nbsp;&nbsp-(q-1)*d&nbsp;+&nbsp;(d&nbsp;-&nbsp;r)&nbsp;=&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637380">qmod2</span>&nbsp;<span class="op" id="2637386">^=</span>&nbsp;<span class="num" id="2637389">1</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637393">r</span>&nbsp;<span class="op" id="2637395">=</span>&nbsp;<span class="ident" id="2637397">d</span>&nbsp;<span class="op" id="2637399">-</span>&nbsp;<span class="ident" id="2637401">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637407">return</span><br>
<span class="lineno"></span><span class="op" id="2637414">}</span>
</div>
</body>
</html>
