<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html" class="current">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3357699">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3357754">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3357808">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3357859">package</span>&nbsp;<span class="ident" id="3357867">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3357876">import</span>&nbsp;<span class="op" id="3357883">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3357886">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3357893">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3357905">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3357911">&#34;sort&#34;</span><br>
<span class="lineno"></span><span class="op" id="3357918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3357921">//&nbsp;In&nbsp;an&nbsp;ErrorList,&nbsp;an&nbsp;error&nbsp;is&nbsp;represented&nbsp;by&nbsp;an&nbsp;*Error.</span><br>
<span class="lineno">15</span><span class="comment" id="3357979">//&nbsp;The&nbsp;position&nbsp;Pos,&nbsp;if&nbsp;valid,&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3358037">//&nbsp;the&nbsp;offending&nbsp;token,&nbsp;and&nbsp;the&nbsp;error&nbsp;condition&nbsp;is&nbsp;described</span><br>
<span class="lineno"></span><span class="comment" id="3358098">//&nbsp;by&nbsp;Msg.</span><br>
<span class="lineno"></span><span class="comment" id="3358109">//</span><br>
<span class="lineno"></span><span class="keyword" id="3358112">type</span>&nbsp;<span class="ident" id="3358117">Error</span>&nbsp;<span class="keyword" id="3358123">struct</span>&nbsp;<span class="op" id="3358130">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358133">Pos</span>&nbsp;<span class="ident" id="3358137">token</span><span class="op" id="3358142">.</span><span class="ident" id="3358143">Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3358153">Msg</span>&nbsp;<span class="builtintype" id="3358157">string</span><br>
<span class="lineno"></span><span class="op" id="3358164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358167">//&nbsp;Error&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">25</span><span class="keyword" id="3358208">func</span>&nbsp;<span class="op" id="3358213">(</span><span class="ident" id="3358214">e</span>&nbsp;<span class="ident" id="3358216">Error</span><span class="op" id="3358221">)</span>&nbsp;<span class="ident" id="3358223">Error</span><span class="op" id="3358228">(</span><span class="op" id="3358229">)</span>&nbsp;<span class="builtintype" id="3358231">string</span>&nbsp;<span class="op" id="3358238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358241">if</span>&nbsp;<span class="ident" id="3358244">e</span><span class="op" id="3358245">.</span><span class="ident" id="3358246">Pos</span><span class="op" id="3358249">.</span><span class="ident" id="3358250">Filename</span>&nbsp;<span class="op" id="3358259">!=</span>&nbsp;<span class="string" id="3358262">&#34;&#34;</span>&nbsp;<span class="op" id="3358265">||</span>&nbsp;<span class="ident" id="3358268">e</span><span class="op" id="3358269">.</span><span class="ident" id="3358270">Pos</span><span class="op" id="3358273">.</span><span class="ident" id="3358274">IsValid</span><span class="op" id="3358281">(</span><span class="op" id="3358282">)</span>&nbsp;<span class="op" id="3358284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3358288">//&nbsp;don&#39;t&nbsp;print&nbsp;&#34;&lt;unknown&nbsp;position&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3358326">//&nbsp;TODO(gri)&nbsp;reconsider&nbsp;the&nbsp;semantics&nbsp;of&nbsp;Position.IsValid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358386">return</span>&nbsp;<span class="ident" id="3358393">e</span><span class="op" id="3358394">.</span><span class="ident" id="3358395">Pos</span><span class="op" id="3358398">.</span><span class="ident" id="3358399">String</span><span class="op" id="3358405">(</span><span class="op" id="3358406">)</span>&nbsp;<span class="op" id="3358408">+</span>&nbsp;<span class="string" id="3358410">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3358415">+</span>&nbsp;<span class="ident" id="3358417">e</span><span class="op" id="3358418">.</span><span class="ident" id="3358419">Msg</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3358427">return</span>&nbsp;<span class="ident" id="3358434">e</span><span class="op" id="3358435">.</span><span class="ident" id="3358436">Msg</span><br>
<span class="lineno"></span><span class="op" id="3358440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358443">//&nbsp;ErrorList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;*Errors.</span><br>
<span class="lineno">35</span><span class="comment" id="3358478">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;an&nbsp;ErrorList&nbsp;is&nbsp;an&nbsp;empty&nbsp;ErrorList&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="3358549">//</span><br>
<span class="lineno"></span><span class="keyword" id="3358552">type</span>&nbsp;<span class="ident" id="3358557">ErrorList</span>&nbsp;<span class="op" id="3358567">[</span><span class="op" id="3358568">]</span><span class="op" id="3358569">*</span><span class="ident" id="3358570">Error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358577">//&nbsp;Add&nbsp;adds&nbsp;an&nbsp;Error&nbsp;with&nbsp;given&nbsp;position&nbsp;and&nbsp;error&nbsp;message&nbsp;to&nbsp;an&nbsp;ErrorList.</span><br>
<span class="lineno">40</span><span class="keyword" id="3358653">func</span>&nbsp;<span class="op" id="3358658">(</span><span class="ident" id="3358659">p</span>&nbsp;<span class="op" id="3358661">*</span><span class="ident" id="3358662">ErrorList</span><span class="op" id="3358671">)</span>&nbsp;<span class="ident" id="3358673">Add</span><span class="op" id="3358676">(</span><span class="ident" id="3358677">pos</span>&nbsp;<span class="ident" id="3358681">token</span><span class="op" id="3358686">.</span><span class="ident" id="3358687">Position</span><span class="op" id="3358695">,</span>&nbsp;<span class="ident" id="3358697">msg</span>&nbsp;<span class="builtintype" id="3358701">string</span><span class="op" id="3358707">)</span>&nbsp;<span class="op" id="3358709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358712">*</span><span class="ident" id="3358713">p</span>&nbsp;<span class="op" id="3358715">=</span>&nbsp;<span class="builtinfunc" id="3358717">append</span><span class="op" id="3358723">(</span><span class="op" id="3358724">*</span><span class="ident" id="3358725">p</span><span class="op" id="3358726">,</span>&nbsp;<span class="op" id="3358728">&amp;</span><span class="ident" id="3358729">Error</span><span class="op" id="3358734">{</span><span class="ident" id="3358735">pos</span><span class="op" id="3358738">,</span>&nbsp;<span class="ident" id="3358740">msg</span><span class="op" id="3358743">}</span><span class="op" id="3358744">)</span><br>
<span class="lineno"></span><span class="op" id="3358746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358749">//&nbsp;Reset&nbsp;resets&nbsp;an&nbsp;ErrorList&nbsp;to&nbsp;no&nbsp;errors.</span><br>
<span class="lineno">45</span><span class="keyword" id="3358792">func</span>&nbsp;<span class="op" id="3358797">(</span><span class="ident" id="3358798">p</span>&nbsp;<span class="op" id="3358800">*</span><span class="ident" id="3358801">ErrorList</span><span class="op" id="3358810">)</span>&nbsp;<span class="ident" id="3358812">Reset</span><span class="op" id="3358817">(</span><span class="op" id="3358818">)</span>&nbsp;<span class="op" id="3358820">{</span>&nbsp;<span class="op" id="3358822">*</span><span class="ident" id="3358823">p</span>&nbsp;<span class="op" id="3358825">=</span>&nbsp;<span class="op" id="3358827">(</span><span class="op" id="3358828">*</span><span class="ident" id="3358829">p</span><span class="op" id="3358830">)</span><span class="op" id="3358831">[</span><span class="num" id="3358832">0</span><span class="op" id="3358833">:</span><span class="num" id="3358834">0</span><span class="op" id="3358835">]</span>&nbsp;<span class="op" id="3358837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358840">//&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;sort&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3358884">func</span>&nbsp;<span class="op" id="3358889">(</span><span class="ident" id="3358890">p</span>&nbsp;<span class="ident" id="3358892">ErrorList</span><span class="op" id="3358901">)</span>&nbsp;<span class="ident" id="3358903">Len</span><span class="op" id="3358906">(</span><span class="op" id="3358907">)</span>&nbsp;<span class="builtintype" id="3358909">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3358918">{</span>&nbsp;<span class="keyword" id="3358920">return</span>&nbsp;<span class="builtinfunc" id="3358927">len</span><span class="op" id="3358930">(</span><span class="ident" id="3358931">p</span><span class="op" id="3358932">)</span>&nbsp;<span class="op" id="3358934">}</span><br>
<span class="lineno"></span><span class="keyword" id="3358936">func</span>&nbsp;<span class="op" id="3358941">(</span><span class="ident" id="3358942">p</span>&nbsp;<span class="ident" id="3358944">ErrorList</span><span class="op" id="3358953">)</span>&nbsp;<span class="ident" id="3358955">Swap</span><span class="op" id="3358959">(</span><span class="ident" id="3358960">i</span><span class="op" id="3358961">,</span>&nbsp;<span class="ident" id="3358963">j</span>&nbsp;<span class="builtintype" id="3358965">int</span><span class="op" id="3358968">)</span>&nbsp;<span class="op" id="3358970">{</span>&nbsp;<span class="ident" id="3358972">p</span><span class="op" id="3358973">[</span><span class="ident" id="3358974">i</span><span class="op" id="3358975">]</span><span class="op" id="3358976">,</span>&nbsp;<span class="ident" id="3358978">p</span><span class="op" id="3358979">[</span><span class="ident" id="3358980">j</span><span class="op" id="3358981">]</span>&nbsp;<span class="op" id="3358983">=</span>&nbsp;<span class="ident" id="3358985">p</span><span class="op" id="3358986">[</span><span class="ident" id="3358987">j</span><span class="op" id="3358988">]</span><span class="op" id="3358989">,</span>&nbsp;<span class="ident" id="3358991">p</span><span class="op" id="3358992">[</span><span class="ident" id="3358993">i</span><span class="op" id="3358994">]</span>&nbsp;<span class="op" id="3358996">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3358999">func</span>&nbsp;<span class="op" id="3359004">(</span><span class="ident" id="3359005">p</span>&nbsp;<span class="ident" id="3359007">ErrorList</span><span class="op" id="3359016">)</span>&nbsp;<span class="ident" id="3359018">Less</span><span class="op" id="3359022">(</span><span class="ident" id="3359023">i</span><span class="op" id="3359024">,</span>&nbsp;<span class="ident" id="3359026">j</span>&nbsp;<span class="builtintype" id="3359028">int</span><span class="op" id="3359031">)</span>&nbsp;<span class="builtintype" id="3359033">bool</span>&nbsp;<span class="op" id="3359038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359041">e</span>&nbsp;<span class="op" id="3359043">:=</span>&nbsp;<span class="op" id="3359046">&amp;</span><span class="ident" id="3359047">p</span><span class="op" id="3359048">[</span><span class="ident" id="3359049">i</span><span class="op" id="3359050">]</span><span class="op" id="3359051">.</span><span class="ident" id="3359052">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359057">f</span>&nbsp;<span class="op" id="3359059">:=</span>&nbsp;<span class="op" id="3359062">&amp;</span><span class="ident" id="3359063">p</span><span class="op" id="3359064">[</span><span class="ident" id="3359065">j</span><span class="op" id="3359066">]</span><span class="op" id="3359067">.</span><span class="ident" id="3359068">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3359073">//&nbsp;Note&nbsp;that&nbsp;it&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;simply&nbsp;compare&nbsp;file&nbsp;offsets&nbsp;because</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3359147">//&nbsp;the&nbsp;offsets&nbsp;do&nbsp;not&nbsp;reflect&nbsp;modified&nbsp;line&nbsp;information&nbsp;(through&nbsp;//line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3359220">//&nbsp;comments).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359235">if</span>&nbsp;<span class="ident" id="3359238">e</span><span class="op" id="3359239">.</span><span class="ident" id="3359240">Filename</span>&nbsp;<span class="op" id="3359249">&lt;</span>&nbsp;<span class="ident" id="3359251">f</span><span class="op" id="3359252">.</span><span class="ident" id="3359253">Filename</span>&nbsp;<span class="op" id="3359262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359266">return</span>&nbsp;<span class="builtintype" id="3359273">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359279">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359282">if</span>&nbsp;<span class="ident" id="3359285">e</span><span class="op" id="3359286">.</span><span class="ident" id="3359287">Filename</span>&nbsp;<span class="op" id="3359296">==</span>&nbsp;<span class="ident" id="3359299">f</span><span class="op" id="3359300">.</span><span class="ident" id="3359301">Filename</span>&nbsp;<span class="op" id="3359310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359314">if</span>&nbsp;<span class="ident" id="3359317">e</span><span class="op" id="3359318">.</span><span class="ident" id="3359319">Line</span>&nbsp;<span class="op" id="3359324">&lt;</span>&nbsp;<span class="ident" id="3359326">f</span><span class="op" id="3359327">.</span><span class="ident" id="3359328">Line</span>&nbsp;<span class="op" id="3359333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359338">return</span>&nbsp;<span class="builtintype" id="3359345">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359356">if</span>&nbsp;<span class="ident" id="3359359">e</span><span class="op" id="3359360">.</span><span class="ident" id="3359361">Line</span>&nbsp;<span class="op" id="3359366">==</span>&nbsp;<span class="ident" id="3359369">f</span><span class="op" id="3359370">.</span><span class="ident" id="3359371">Line</span>&nbsp;<span class="op" id="3359376">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359381">return</span>&nbsp;<span class="ident" id="3359388">e</span><span class="op" id="3359389">.</span><span class="ident" id="3359390">Column</span>&nbsp;<span class="op" id="3359397">&lt;</span>&nbsp;<span class="ident" id="3359399">f</span><span class="op" id="3359400">.</span><span class="ident" id="3359401">Column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359416">return</span>&nbsp;<span class="builtintype" id="3359423">false</span><br>
<span class="lineno"></span><span class="op" id="3359429">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="3359432">//&nbsp;Sort&nbsp;sorts&nbsp;an&nbsp;ErrorList.&nbsp;*Error&nbsp;entries&nbsp;are&nbsp;sorted&nbsp;by&nbsp;position,</span><br>
<span class="lineno"></span><span class="comment" id="3359499">//&nbsp;other&nbsp;errors&nbsp;are&nbsp;sorted&nbsp;by&nbsp;error&nbsp;message,&nbsp;and&nbsp;before&nbsp;any&nbsp;*Error</span><br>
<span class="lineno"></span><span class="comment" id="3359566">//&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="3359576">//</span><br>
<span class="lineno">75</span><span class="keyword" id="3359579">func</span>&nbsp;<span class="op" id="3359584">(</span><span class="ident" id="3359585">p</span>&nbsp;<span class="ident" id="3359587">ErrorList</span><span class="op" id="3359596">)</span>&nbsp;<span class="ident" id="3359598">Sort</span><span class="op" id="3359602">(</span><span class="op" id="3359603">)</span>&nbsp;<span class="op" id="3359605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359608">sort</span><span class="op" id="3359612">.</span><span class="ident" id="3359613">Sort</span><span class="op" id="3359617">(</span><span class="ident" id="3359618">p</span><span class="op" id="3359619">)</span><br>
<span class="lineno"></span><span class="op" id="3359621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3359624">//&nbsp;RemoveMultiples&nbsp;sorts&nbsp;an&nbsp;ErrorList&nbsp;and&nbsp;removes&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;error&nbsp;per&nbsp;line.</span><br>
<span class="lineno">80</span><span class="keyword" id="3359708">func</span>&nbsp;<span class="op" id="3359713">(</span><span class="ident" id="3359714">p</span>&nbsp;<span class="op" id="3359716">*</span><span class="ident" id="3359717">ErrorList</span><span class="op" id="3359726">)</span>&nbsp;<span class="ident" id="3359728">RemoveMultiples</span><span class="op" id="3359743">(</span><span class="op" id="3359744">)</span>&nbsp;<span class="op" id="3359746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359749">sort</span><span class="op" id="3359753">.</span><span class="ident" id="3359754">Sort</span><span class="op" id="3359758">(</span><span class="ident" id="3359759">p</span><span class="op" id="3359760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359763">var</span>&nbsp;<span class="ident" id="3359767">last</span>&nbsp;<span class="ident" id="3359772">token</span><span class="op" id="3359777">.</span><span class="ident" id="3359778">Position</span>&nbsp;<span class="comment" id="3359787">//&nbsp;initial&nbsp;last.Line&nbsp;is&nbsp;!=&nbsp;any&nbsp;legal&nbsp;error&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359836">i</span>&nbsp;<span class="op" id="3359838">:=</span>&nbsp;<span class="num" id="3359841">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359844">for</span>&nbsp;<span class="ident" id="3359848">_</span><span class="op" id="3359849">,</span>&nbsp;<span class="ident" id="3359851">e</span>&nbsp;<span class="op" id="3359853">:=</span>&nbsp;<span class="keyword" id="3359856">range</span>&nbsp;<span class="op" id="3359862">*</span><span class="ident" id="3359863">p</span>&nbsp;<span class="op" id="3359865">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3359869">if</span>&nbsp;<span class="ident" id="3359872">e</span><span class="op" id="3359873">.</span><span class="ident" id="3359874">Pos</span><span class="op" id="3359877">.</span><span class="ident" id="3359878">Filename</span>&nbsp;<span class="op" id="3359887">!=</span>&nbsp;<span class="ident" id="3359890">last</span><span class="op" id="3359894">.</span><span class="ident" id="3359895">Filename</span>&nbsp;<span class="op" id="3359904">||</span>&nbsp;<span class="ident" id="3359907">e</span><span class="op" id="3359908">.</span><span class="ident" id="3359909">Pos</span><span class="op" id="3359912">.</span><span class="ident" id="3359913">Line</span>&nbsp;<span class="op" id="3359918">!=</span>&nbsp;<span class="ident" id="3359921">last</span><span class="op" id="3359925">.</span><span class="ident" id="3359926">Line</span>&nbsp;<span class="op" id="3359931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359936">last</span>&nbsp;<span class="op" id="3359941">=</span>&nbsp;<span class="ident" id="3359943">e</span><span class="op" id="3359944">.</span><span class="ident" id="3359945">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359952">(</span><span class="op" id="3359953">*</span><span class="ident" id="3359954">p</span><span class="op" id="3359955">)</span><span class="op" id="3359956">[</span><span class="ident" id="3359957">i</span><span class="op" id="3359958">]</span>&nbsp;<span class="op" id="3359960">=</span>&nbsp;<span class="ident" id="3359962">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3359967">i</span><span class="op" id="3359968">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359973">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359979">(</span><span class="op" id="3359980">*</span><span class="ident" id="3359981">p</span><span class="op" id="3359982">)</span>&nbsp;<span class="op" id="3359984">=</span>&nbsp;<span class="op" id="3359986">(</span><span class="op" id="3359987">*</span><span class="ident" id="3359988">p</span><span class="op" id="3359989">)</span><span class="op" id="3359990">[</span><span class="num" id="3359991">0</span><span class="op" id="3359992">:</span><span class="ident" id="3359993">i</span><span class="op" id="3359994">]</span><br>
<span class="lineno"></span><span class="op" id="3359996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3359999">//&nbsp;An&nbsp;ErrorList&nbsp;implements&nbsp;the&nbsp;error&nbsp;interface.</span><br>
<span class="lineno">95</span><span class="keyword" id="3360047">func</span>&nbsp;<span class="op" id="3360052">(</span><span class="ident" id="3360053">p</span>&nbsp;<span class="ident" id="3360055">ErrorList</span><span class="op" id="3360064">)</span>&nbsp;<span class="ident" id="3360066">Error</span><span class="op" id="3360071">(</span><span class="op" id="3360072">)</span>&nbsp;<span class="builtintype" id="3360074">string</span>&nbsp;<span class="op" id="3360081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360084">switch</span>&nbsp;<span class="builtinfunc" id="3360091">len</span><span class="op" id="3360094">(</span><span class="ident" id="3360095">p</span><span class="op" id="3360096">)</span>&nbsp;<span class="op" id="3360098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360101">case</span>&nbsp;<span class="num" id="3360106">0</span><span class="op" id="3360107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360111">return</span>&nbsp;<span class="string" id="3360118">&#34;no&nbsp;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360131">case</span>&nbsp;<span class="num" id="3360136">1</span><span class="op" id="3360137">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360141">return</span>&nbsp;<span class="ident" id="3360148">p</span><span class="op" id="3360149">[</span><span class="num" id="3360150">0</span><span class="op" id="3360151">]</span><span class="op" id="3360152">.</span><span class="ident" id="3360153">Error</span><span class="op" id="3360158">(</span><span class="op" id="3360159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360165">return</span>&nbsp;<span class="ident" id="3360172">fmt</span><span class="op" id="3360175">.</span><span class="ident" id="3360176">Sprintf</span><span class="op" id="3360183">(</span><span class="string" id="3360184">&#34;%s&nbsp;(and&nbsp;%d&nbsp;more&nbsp;errors)&#34;</span><span class="op" id="3360209">,</span>&nbsp;<span class="ident" id="3360211">p</span><span class="op" id="3360212">[</span><span class="num" id="3360213">0</span><span class="op" id="3360214">]</span><span class="op" id="3360215">,</span>&nbsp;<span class="builtinfunc" id="3360217">len</span><span class="op" id="3360220">(</span><span class="ident" id="3360221">p</span><span class="op" id="3360222">)</span><span class="op" id="3360223">-</span><span class="num" id="3360224">1</span><span class="op" id="3360225">)</span><br>
<span class="lineno"></span><span class="op" id="3360227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3360230">//&nbsp;Err&nbsp;returns&nbsp;an&nbsp;error&nbsp;equivalent&nbsp;to&nbsp;this&nbsp;error&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="3360285">//&nbsp;If&nbsp;the&nbsp;list&nbsp;is&nbsp;empty,&nbsp;Err&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3360327">func</span>&nbsp;<span class="op" id="3360332">(</span><span class="ident" id="3360333">p</span>&nbsp;<span class="ident" id="3360335">ErrorList</span><span class="op" id="3360344">)</span>&nbsp;<span class="ident" id="3360346">Err</span><span class="op" id="3360349">(</span><span class="op" id="3360350">)</span>&nbsp;<span class="builtintype" id="3360352">error</span>&nbsp;<span class="op" id="3360358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360361">if</span>&nbsp;<span class="builtinfunc" id="3360364">len</span><span class="op" id="3360367">(</span><span class="ident" id="3360368">p</span><span class="op" id="3360369">)</span>&nbsp;<span class="op" id="3360371">==</span>&nbsp;<span class="num" id="3360374">0</span>&nbsp;<span class="op" id="3360376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360380">return</span>&nbsp;<span class="ident" id="3360387">nil</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360395">return</span>&nbsp;<span class="ident" id="3360402">p</span><br>
<span class="lineno"></span><span class="op" id="3360404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3360407">//&nbsp;PrintError&nbsp;is&nbsp;a&nbsp;utility&nbsp;function&nbsp;that&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;errors&nbsp;to&nbsp;w,</span><br>
<span class="lineno">115</span><span class="comment" id="3360478">//&nbsp;one&nbsp;error&nbsp;per&nbsp;line,&nbsp;if&nbsp;the&nbsp;err&nbsp;parameter&nbsp;is&nbsp;an&nbsp;ErrorList.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="3360549">//&nbsp;it&nbsp;prints&nbsp;the&nbsp;err&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3360578">//</span><br>
<span class="lineno"></span><span class="keyword" id="3360581">func</span>&nbsp;<span class="ident" id="3360586">PrintError</span><span class="op" id="3360596">(</span><span class="ident" id="3360597">w</span>&nbsp;<span class="ident" id="3360599">io</span><span class="op" id="3360601">.</span><span class="ident" id="3360602">Writer</span><span class="op" id="3360608">,</span>&nbsp;<span class="ident" id="3360610">err</span>&nbsp;<span class="builtintype" id="3360614">error</span><span class="op" id="3360619">)</span>&nbsp;<span class="op" id="3360621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360624">if</span>&nbsp;<span class="ident" id="3360627">list</span><span class="op" id="3360631">,</span>&nbsp;<span class="ident" id="3360633">ok</span>&nbsp;<span class="op" id="3360636">:=</span>&nbsp;<span class="ident" id="3360639">err</span><span class="op" id="3360642">.</span><span class="op" id="3360643">(</span><span class="ident" id="3360644">ErrorList</span><span class="op" id="3360653">)</span><span class="op" id="3360654">;</span>&nbsp;<span class="ident" id="3360656">ok</span>&nbsp;<span class="op" id="3360659">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3360663">for</span>&nbsp;<span class="ident" id="3360667">_</span><span class="op" id="3360668">,</span>&nbsp;<span class="ident" id="3360670">e</span>&nbsp;<span class="op" id="3360672">:=</span>&nbsp;<span class="keyword" id="3360675">range</span>&nbsp;<span class="ident" id="3360681">list</span>&nbsp;<span class="op" id="3360686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3360691">fmt</span><span class="op" id="3360694">.</span><span class="ident" id="3360695">Fprintf</span><span class="op" id="3360702">(</span><span class="ident" id="3360703">w</span><span class="op" id="3360704">,</span>&nbsp;<span class="string" id="3360706">&#34;%s\n&#34;</span><span class="op" id="3360712">,</span>&nbsp;<span class="ident" id="3360714">e</span><span class="op" id="3360715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360722">}</span>&nbsp;<span class="keyword" id="3360724">else</span>&nbsp;<span class="keyword" id="3360729">if</span>&nbsp;<span class="ident" id="3360732">err</span>&nbsp;<span class="op" id="3360736">!=</span>&nbsp;<span class="ident" id="3360739">nil</span>&nbsp;<span class="op" id="3360743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3360747">fmt</span><span class="op" id="3360750">.</span><span class="ident" id="3360751">Fprintf</span><span class="op" id="3360758">(</span><span class="ident" id="3360759">w</span><span class="op" id="3360760">,</span>&nbsp;<span class="string" id="3360762">&#34;%s\n&#34;</span><span class="op" id="3360768">,</span>&nbsp;<span class="ident" id="3360770">err</span><span class="op" id="3360773">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3360776">}</span><br>
<span class="lineno"></span><span class="op" id="3360778">}</span>
</div>
</body>
</html>
