<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html" class="current">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8235239">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8235295">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8235349">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8235400">package</span>&nbsp;<span class="ident" id="8235408">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8235414">import</span>&nbsp;<span class="op" id="8235421">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235424">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235433">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235444">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235455">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8235462">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8235465">var</span>&nbsp;<span class="ident" id="8235469">headerWriteTests</span>&nbsp;<span class="op" id="8235486">=</span>&nbsp;<span class="op" id="8235488">[</span><span class="op" id="8235489">]</span><span class="keyword" id="8235490">struct</span>&nbsp;<span class="op" id="8235497">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235500">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235509">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235517">exclude</span>&nbsp;&nbsp;<span class="keyword" id="8235526">map</span><span class="op" id="8235529">[</span><span class="builtintype" id="8235530">string</span><span class="op" id="8235536">]</span><span class="builtintype" id="8235537">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235543">expected</span>&nbsp;<span class="builtintype" id="8235552">string</span><br>
<span class="lineno"></span><span class="op" id="8235559">}</span><span class="op" id="8235560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235563">{</span><span class="ident" id="8235564">Header</span><span class="op" id="8235570">{</span><span class="op" id="8235571">}</span><span class="op" id="8235572">,</span>&nbsp;<span class="ident" id="8235574">nil</span><span class="op" id="8235577">,</span>&nbsp;<span class="string" id="8235579">&#34;&#34;</span><span class="op" id="8235581">}</span><span class="op" id="8235582">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235589">Header</span><span class="op" id="8235595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235600">&#34;Content-Type&#34;</span><span class="op" id="8235614">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8235618">{</span><span class="string" id="8235619">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="8235645">}</span><span class="op" id="8235646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235651">&#34;Content-Length&#34;</span><span class="op" id="8235667">:</span>&nbsp;<span class="op" id="8235669">{</span><span class="string" id="8235670">&#34;0&#34;</span><span class="op" id="8235673">}</span><span class="op" id="8235674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235678">}</span><span class="op" id="8235679">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235683">nil</span><span class="op" id="8235686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235690">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="8235755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235758">}</span><span class="op" id="8235759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235766">Header</span><span class="op" id="8235772">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235777">&#34;Content-Length&#34;</span><span class="op" id="8235793">:</span>&nbsp;<span class="op" id="8235795">{</span><span class="string" id="8235796">&#34;0&#34;</span><span class="op" id="8235799">,</span>&nbsp;<span class="string" id="8235801">&#34;1&#34;</span><span class="op" id="8235804">,</span>&nbsp;<span class="string" id="8235806">&#34;2&#34;</span><span class="op" id="8235809">}</span><span class="op" id="8235810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235814">}</span><span class="op" id="8235815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235819">nil</span><span class="op" id="8235822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235826">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="8235891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235894">}</span><span class="op" id="8235895">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8235902">Header</span><span class="op" id="8235908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235913">&#34;Expires&#34;</span><span class="op" id="8235922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8235933">{</span><span class="string" id="8235934">&#34;-1&#34;</span><span class="op" id="8235938">}</span><span class="op" id="8235939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235944">&#34;Content-Length&#34;</span><span class="op" id="8235960">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8235964">{</span><span class="string" id="8235965">&#34;0&#34;</span><span class="op" id="8235968">}</span><span class="op" id="8235969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8235974">&#34;Content-Encoding&#34;</span><span class="op" id="8235992">:</span>&nbsp;<span class="op" id="8235994">{</span><span class="string" id="8235995">&#34;gzip&#34;</span><span class="op" id="8236001">}</span><span class="op" id="8236002">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236006">}</span><span class="op" id="8236007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8236011">map</span><span class="op" id="8236014">[</span><span class="builtintype" id="8236015">string</span><span class="op" id="8236021">]</span><span class="builtintype" id="8236022">bool</span><span class="op" id="8236026">{</span><span class="string" id="8236027">&#34;Content-Length&#34;</span><span class="op" id="8236043">:</span>&nbsp;<span class="builtintype" id="8236045">true</span><span class="op" id="8236049">}</span><span class="op" id="8236050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236054">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8236097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236100">}</span><span class="op" id="8236101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236104">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8236108">Header</span><span class="op" id="8236114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236119">&#34;Expires&#34;</span><span class="op" id="8236128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236139">{</span><span class="string" id="8236140">&#34;-1&#34;</span><span class="op" id="8236144">}</span><span class="op" id="8236145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236150">&#34;Content-Length&#34;</span><span class="op" id="8236166">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8236170">{</span><span class="string" id="8236171">&#34;0&#34;</span><span class="op" id="8236174">,</span>&nbsp;<span class="string" id="8236176">&#34;1&#34;</span><span class="op" id="8236179">,</span>&nbsp;<span class="string" id="8236181">&#34;2&#34;</span><span class="op" id="8236184">}</span><span class="op" id="8236185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236190">&#34;Content-Encoding&#34;</span><span class="op" id="8236208">:</span>&nbsp;<span class="op" id="8236210">{</span><span class="string" id="8236211">&#34;gzip&#34;</span><span class="op" id="8236217">}</span><span class="op" id="8236218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236222">}</span><span class="op" id="8236223">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8236227">map</span><span class="op" id="8236230">[</span><span class="builtintype" id="8236231">string</span><span class="op" id="8236237">]</span><span class="builtintype" id="8236238">bool</span><span class="op" id="8236242">{</span><span class="string" id="8236243">&#34;Content-Length&#34;</span><span class="op" id="8236259">:</span>&nbsp;<span class="builtintype" id="8236261">true</span><span class="op" id="8236265">}</span><span class="op" id="8236266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236270">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8236313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236316">}</span><span class="op" id="8236317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8236324">Header</span><span class="op" id="8236330">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236335">&#34;Expires&#34;</span><span class="op" id="8236344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236355">{</span><span class="string" id="8236356">&#34;-1&#34;</span><span class="op" id="8236360">}</span><span class="op" id="8236361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236366">&#34;Content-Length&#34;</span><span class="op" id="8236382">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8236386">{</span><span class="string" id="8236387">&#34;0&#34;</span><span class="op" id="8236390">}</span><span class="op" id="8236391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236396">&#34;Content-Encoding&#34;</span><span class="op" id="8236414">:</span>&nbsp;<span class="op" id="8236416">{</span><span class="string" id="8236417">&#34;gzip&#34;</span><span class="op" id="8236423">}</span><span class="op" id="8236424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236428">}</span><span class="op" id="8236429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8236433">map</span><span class="op" id="8236436">[</span><span class="builtintype" id="8236437">string</span><span class="op" id="8236443">]</span><span class="builtintype" id="8236444">bool</span><span class="op" id="8236448">{</span><span class="string" id="8236449">&#34;Content-Length&#34;</span><span class="op" id="8236465">:</span>&nbsp;<span class="builtintype" id="8236467">true</span><span class="op" id="8236471">,</span>&nbsp;<span class="string" id="8236473">&#34;Expires&#34;</span><span class="op" id="8236482">:</span>&nbsp;<span class="builtintype" id="8236484">true</span><span class="op" id="8236488">,</span>&nbsp;<span class="string" id="8236490">&#34;Content-Encoding&#34;</span><span class="op" id="8236508">:</span>&nbsp;<span class="builtintype" id="8236510">true</span><span class="op" id="8236514">}</span><span class="op" id="8236515">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236519">&#34;&#34;</span><span class="op" id="8236521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236524">}</span><span class="op" id="8236525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8236532">Header</span><span class="op" id="8236538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236543">&#34;Nil&#34;</span><span class="op" id="8236548">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8236559">nil</span><span class="op" id="8236562">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236567">&#34;Empty&#34;</span><span class="op" id="8236574">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236583">{</span><span class="op" id="8236584">}</span><span class="op" id="8236585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236590">&#34;Blank&#34;</span><span class="op" id="8236597">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236606">{</span><span class="string" id="8236607">&#34;&#34;</span><span class="op" id="8236609">}</span><span class="op" id="8236610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236615">&#34;Double-Blank&#34;</span><span class="op" id="8236629">:</span>&nbsp;<span class="op" id="8236631">{</span><span class="string" id="8236632">&#34;&#34;</span><span class="op" id="8236634">,</span>&nbsp;<span class="string" id="8236636">&#34;&#34;</span><span class="op" id="8236638">}</span><span class="op" id="8236639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236643">}</span><span class="op" id="8236644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8236648">nil</span><span class="op" id="8236651">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236655">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="8236704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236707">}</span><span class="op" id="8236708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8236711">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8236781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8236785">Header</span><span class="op" id="8236791">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236796">&#34;k1&#34;</span><span class="op" id="8236800">:</span>&nbsp;<span class="op" id="8236802">{</span><span class="string" id="8236803">&#34;1a&#34;</span><span class="op" id="8236807">,</span>&nbsp;<span class="string" id="8236809">&#34;1b&#34;</span><span class="op" id="8236813">}</span><span class="op" id="8236814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236819">&#34;k2&#34;</span><span class="op" id="8236823">:</span>&nbsp;<span class="op" id="8236825">{</span><span class="string" id="8236826">&#34;2a&#34;</span><span class="op" id="8236830">,</span>&nbsp;<span class="string" id="8236832">&#34;2b&#34;</span><span class="op" id="8236836">}</span><span class="op" id="8236837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236842">&#34;k3&#34;</span><span class="op" id="8236846">:</span>&nbsp;<span class="op" id="8236848">{</span><span class="string" id="8236849">&#34;3a&#34;</span><span class="op" id="8236853">,</span>&nbsp;<span class="string" id="8236855">&#34;3b&#34;</span><span class="op" id="8236859">}</span><span class="op" id="8236860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236865">&#34;k4&#34;</span><span class="op" id="8236869">:</span>&nbsp;<span class="op" id="8236871">{</span><span class="string" id="8236872">&#34;4a&#34;</span><span class="op" id="8236876">,</span>&nbsp;<span class="string" id="8236878">&#34;4b&#34;</span><span class="op" id="8236882">}</span><span class="op" id="8236883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236888">&#34;k5&#34;</span><span class="op" id="8236892">:</span>&nbsp;<span class="op" id="8236894">{</span><span class="string" id="8236895">&#34;5a&#34;</span><span class="op" id="8236899">,</span>&nbsp;<span class="string" id="8236901">&#34;5b&#34;</span><span class="op" id="8236905">}</span><span class="op" id="8236906">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236911">&#34;k6&#34;</span><span class="op" id="8236915">:</span>&nbsp;<span class="op" id="8236917">{</span><span class="string" id="8236918">&#34;6a&#34;</span><span class="op" id="8236922">,</span>&nbsp;<span class="string" id="8236924">&#34;6b&#34;</span><span class="op" id="8236928">}</span><span class="op" id="8236929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236934">&#34;k7&#34;</span><span class="op" id="8236938">:</span>&nbsp;<span class="op" id="8236940">{</span><span class="string" id="8236941">&#34;7a&#34;</span><span class="op" id="8236945">,</span>&nbsp;<span class="string" id="8236947">&#34;7b&#34;</span><span class="op" id="8236951">}</span><span class="op" id="8236952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236957">&#34;k8&#34;</span><span class="op" id="8236961">:</span>&nbsp;<span class="op" id="8236963">{</span><span class="string" id="8236964">&#34;8a&#34;</span><span class="op" id="8236968">,</span>&nbsp;<span class="string" id="8236970">&#34;8b&#34;</span><span class="op" id="8236974">}</span><span class="op" id="8236975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8236980">&#34;k9&#34;</span><span class="op" id="8236984">:</span>&nbsp;<span class="op" id="8236986">{</span><span class="string" id="8236987">&#34;9a&#34;</span><span class="op" id="8236991">,</span>&nbsp;<span class="string" id="8236993">&#34;9b&#34;</span><span class="op" id="8236997">}</span><span class="op" id="8236998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237002">}</span><span class="op" id="8237003">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8237007">map</span><span class="op" id="8237010">[</span><span class="builtintype" id="8237011">string</span><span class="op" id="8237017">]</span><span class="builtintype" id="8237018">bool</span><span class="op" id="8237022">{</span><span class="string" id="8237023">&#34;k5&#34;</span><span class="op" id="8237027">:</span>&nbsp;<span class="builtintype" id="8237029">true</span><span class="op" id="8237033">}</span><span class="op" id="8237034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8237038">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="8237101">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8237106">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="8237149">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8237154">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="8237216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237219">}</span><span class="op" id="8237220">,</span><br>
<span class="lineno">90</span><span class="op" id="8237222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8237225">func</span>&nbsp;<span class="ident" id="8237230">TestHeaderWrite</span><span class="op" id="8237245">(</span><span class="ident" id="8237246">t</span>&nbsp;<span class="op" id="8237248">*</span><span class="ident" id="8237249">testing</span><span class="op" id="8237256">.</span><span class="ident" id="8237257">T</span><span class="op" id="8237258">)</span>&nbsp;<span class="op" id="8237260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8237263">var</span>&nbsp;<span class="ident" id="8237267">buf</span>&nbsp;<span class="ident" id="8237271">bytes</span><span class="op" id="8237276">.</span><span class="ident" id="8237277">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8237285">for</span>&nbsp;<span class="ident" id="8237289">i</span><span class="op" id="8237290">,</span>&nbsp;<span class="ident" id="8237292">test</span>&nbsp;<span class="op" id="8237297">:=</span>&nbsp;<span class="keyword" id="8237300">range</span>&nbsp;<span class="ident" id="8237306">headerWriteTests</span>&nbsp;<span class="op" id="8237323">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237327">test</span><span class="op" id="8237331">.</span><span class="ident" id="8237332">h</span><span class="op" id="8237333">.</span><span class="ident" id="8237334">WriteSubset</span><span class="op" id="8237345">(</span><span class="op" id="8237346">&amp;</span><span class="ident" id="8237347">buf</span><span class="op" id="8237350">,</span>&nbsp;<span class="ident" id="8237352">test</span><span class="op" id="8237356">.</span><span class="ident" id="8237357">exclude</span><span class="op" id="8237364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8237368">if</span>&nbsp;<span class="ident" id="8237371">buf</span><span class="op" id="8237374">.</span><span class="ident" id="8237375">String</span><span class="op" id="8237381">(</span><span class="op" id="8237382">)</span>&nbsp;<span class="op" id="8237384">!=</span>&nbsp;<span class="ident" id="8237387">test</span><span class="op" id="8237391">.</span><span class="ident" id="8237392">expected</span>&nbsp;<span class="op" id="8237401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237406">t</span><span class="op" id="8237407">.</span><span class="ident" id="8237408">Errorf</span><span class="op" id="8237414">(</span><span class="string" id="8237415">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="8237441">,</span>&nbsp;<span class="ident" id="8237443">i</span><span class="op" id="8237444">,</span>&nbsp;<span class="ident" id="8237446">buf</span><span class="op" id="8237449">.</span><span class="ident" id="8237450">String</span><span class="op" id="8237456">(</span><span class="op" id="8237457">)</span><span class="op" id="8237458">,</span>&nbsp;<span class="ident" id="8237460">test</span><span class="op" id="8237464">.</span><span class="ident" id="8237465">expected</span><span class="op" id="8237473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237481">buf</span><span class="op" id="8237484">.</span><span class="ident" id="8237485">Reset</span><span class="op" id="8237490">(</span><span class="op" id="8237491">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237494">}</span><br>
<span class="lineno"></span><span class="op" id="8237496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8237499">var</span>&nbsp;<span class="ident" id="8237503">parseTimeTests</span>&nbsp;<span class="op" id="8237518">=</span>&nbsp;<span class="op" id="8237520">[</span><span class="op" id="8237521">]</span><span class="keyword" id="8237522">struct</span>&nbsp;<span class="op" id="8237529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237532">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8237536">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237544">err</span>&nbsp;<span class="builtintype" id="8237548">bool</span><br>
<span class="lineno"></span><span class="op" id="8237553">}</span><span class="op" id="8237554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237557">{</span><span class="ident" id="8237558">Header</span><span class="op" id="8237564">{</span><span class="string" id="8237565">&#34;Date&#34;</span><span class="op" id="8237571">:</span>&nbsp;<span class="op" id="8237573">{</span><span class="string" id="8237574">&#34;&#34;</span><span class="op" id="8237576">}</span><span class="op" id="8237577">}</span><span class="op" id="8237578">,</span>&nbsp;<span class="builtintype" id="8237580">true</span><span class="op" id="8237584">}</span><span class="op" id="8237585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237588">{</span><span class="ident" id="8237589">Header</span><span class="op" id="8237595">{</span><span class="string" id="8237596">&#34;Date&#34;</span><span class="op" id="8237602">:</span>&nbsp;<span class="op" id="8237604">{</span><span class="string" id="8237605">&#34;invalid&#34;</span><span class="op" id="8237614">}</span><span class="op" id="8237615">}</span><span class="op" id="8237616">,</span>&nbsp;<span class="builtintype" id="8237618">true</span><span class="op" id="8237622">}</span><span class="op" id="8237623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237626">{</span><span class="ident" id="8237627">Header</span><span class="op" id="8237633">{</span><span class="string" id="8237634">&#34;Date&#34;</span><span class="op" id="8237640">:</span>&nbsp;<span class="op" id="8237642">{</span><span class="string" id="8237643">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="8237670">}</span><span class="op" id="8237671">}</span><span class="op" id="8237672">,</span>&nbsp;<span class="builtintype" id="8237674">true</span><span class="op" id="8237678">}</span><span class="op" id="8237679">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237682">{</span><span class="ident" id="8237683">Header</span><span class="op" id="8237689">{</span><span class="string" id="8237690">&#34;Date&#34;</span><span class="op" id="8237696">:</span>&nbsp;<span class="op" id="8237698">{</span><span class="string" id="8237699">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8237730">}</span><span class="op" id="8237731">}</span><span class="op" id="8237732">,</span>&nbsp;<span class="builtintype" id="8237734">false</span><span class="op" id="8237739">}</span><span class="op" id="8237740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237743">{</span><span class="ident" id="8237744">Header</span><span class="op" id="8237750">{</span><span class="string" id="8237751">&#34;Date&#34;</span><span class="op" id="8237757">:</span>&nbsp;<span class="op" id="8237759">{</span><span class="string" id="8237760">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8237792">}</span><span class="op" id="8237793">}</span><span class="op" id="8237794">,</span>&nbsp;<span class="builtintype" id="8237796">false</span><span class="op" id="8237801">}</span><span class="op" id="8237802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8237805">{</span><span class="ident" id="8237806">Header</span><span class="op" id="8237812">{</span><span class="string" id="8237813">&#34;Date&#34;</span><span class="op" id="8237819">:</span>&nbsp;<span class="op" id="8237821">{</span><span class="string" id="8237822">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="8237848">}</span><span class="op" id="8237849">}</span><span class="op" id="8237850">,</span>&nbsp;<span class="builtintype" id="8237852">false</span><span class="op" id="8237857">}</span><span class="op" id="8237858">,</span><br>
<span class="lineno"></span><span class="op" id="8237860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="8237863">func</span>&nbsp;<span class="ident" id="8237868">TestParseTime</span><span class="op" id="8237881">(</span><span class="ident" id="8237882">t</span>&nbsp;<span class="op" id="8237884">*</span><span class="ident" id="8237885">testing</span><span class="op" id="8237892">.</span><span class="ident" id="8237893">T</span><span class="op" id="8237894">)</span>&nbsp;<span class="op" id="8237896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237899">expect</span>&nbsp;<span class="op" id="8237906">:=</span>&nbsp;<span class="ident" id="8237909">time</span><span class="op" id="8237913">.</span><span class="ident" id="8237914">Date</span><span class="op" id="8237918">(</span><span class="num" id="8237919">1994</span><span class="op" id="8237923">,</span>&nbsp;<span class="num" id="8237925">11</span><span class="op" id="8237927">,</span>&nbsp;<span class="num" id="8237929">6</span><span class="op" id="8237930">,</span>&nbsp;<span class="num" id="8237932">8</span><span class="op" id="8237933">,</span>&nbsp;<span class="num" id="8237935">49</span><span class="op" id="8237937">,</span>&nbsp;<span class="num" id="8237939">37</span><span class="op" id="8237941">,</span>&nbsp;<span class="num" id="8237943">0</span><span class="op" id="8237944">,</span>&nbsp;<span class="ident" id="8237946">time</span><span class="op" id="8237950">.</span><span class="ident" id="8237951">UTC</span><span class="op" id="8237954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8237957">for</span>&nbsp;<span class="ident" id="8237961">i</span><span class="op" id="8237962">,</span>&nbsp;<span class="ident" id="8237964">test</span>&nbsp;<span class="op" id="8237969">:=</span>&nbsp;<span class="keyword" id="8237972">range</span>&nbsp;<span class="ident" id="8237978">parseTimeTests</span>&nbsp;<span class="op" id="8237993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8237997">d</span><span class="op" id="8237998">,</span>&nbsp;<span class="ident" id="8238000">err</span>&nbsp;<span class="op" id="8238004">:=</span>&nbsp;<span class="ident" id="8238007">ParseTime</span><span class="op" id="8238016">(</span><span class="ident" id="8238017">test</span><span class="op" id="8238021">.</span><span class="ident" id="8238022">h</span><span class="op" id="8238023">.</span><span class="ident" id="8238024">Get</span><span class="op" id="8238027">(</span><span class="string" id="8238028">&#34;Date&#34;</span><span class="op" id="8238034">)</span><span class="op" id="8238035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8238039">if</span>&nbsp;<span class="ident" id="8238042">err</span>&nbsp;<span class="op" id="8238046">!=</span>&nbsp;<span class="ident" id="8238049">nil</span>&nbsp;<span class="op" id="8238053">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8238058">if</span>&nbsp;<span class="op" id="8238061">!</span><span class="ident" id="8238062">test</span><span class="op" id="8238066">.</span><span class="ident" id="8238067">err</span>&nbsp;<span class="op" id="8238071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8238077">t</span><span class="op" id="8238078">.</span><span class="ident" id="8238079">Errorf</span><span class="op" id="8238085">(</span><span class="string" id="8238086">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="8238106">,</span>&nbsp;<span class="ident" id="8238108">i</span><span class="op" id="8238109">,</span>&nbsp;<span class="ident" id="8238111">err</span><span class="op" id="8238114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8238124">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238135">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8238139">if</span>&nbsp;<span class="ident" id="8238142">test</span><span class="op" id="8238146">.</span><span class="ident" id="8238147">err</span>&nbsp;<span class="op" id="8238151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8238156">t</span><span class="op" id="8238157">.</span><span class="ident" id="8238158">Errorf</span><span class="op" id="8238164">(</span><span class="string" id="8238165">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="8238185">,</span>&nbsp;<span class="ident" id="8238187">i</span><span class="op" id="8238188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8238193">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8238208">if</span>&nbsp;<span class="op" id="8238211">!</span><span class="ident" id="8238212">expect</span><span class="op" id="8238218">.</span><span class="ident" id="8238219">Equal</span><span class="op" id="8238224">(</span><span class="ident" id="8238225">d</span><span class="op" id="8238226">)</span>&nbsp;<span class="op" id="8238228">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8238233">t</span><span class="op" id="8238234">.</span><span class="ident" id="8238235">Errorf</span><span class="op" id="8238241">(</span><span class="string" id="8238242">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8238268">,</span>&nbsp;<span class="ident" id="8238270">i</span><span class="op" id="8238271">,</span>&nbsp;<span class="ident" id="8238273">d</span><span class="op" id="8238274">,</span>&nbsp;<span class="ident" id="8238276">expect</span><span class="op" id="8238282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238289">}</span><br>
<span class="lineno"></span><span class="op" id="8238291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8238294">type</span>&nbsp;<span class="ident" id="8238299">hasTokenTest</span>&nbsp;<span class="keyword" id="8238312">struct</span>&nbsp;<span class="op" id="8238319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8238322">header</span>&nbsp;<span class="builtintype" id="8238329">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8238337">token</span>&nbsp;&nbsp;<span class="builtintype" id="8238344">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8238352">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8238359">bool</span><br>
<span class="lineno"></span><span class="op" id="8238364">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8238367">var</span>&nbsp;<span class="ident" id="8238371">hasTokenTests</span>&nbsp;<span class="op" id="8238385">=</span>&nbsp;<span class="op" id="8238387">[</span><span class="op" id="8238388">]</span><span class="ident" id="8238389">hasTokenTest</span><span class="op" id="8238401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238404">{</span><span class="string" id="8238405">&#34;&#34;</span><span class="op" id="8238407">,</span>&nbsp;<span class="string" id="8238409">&#34;&#34;</span><span class="op" id="8238411">,</span>&nbsp;<span class="builtintype" id="8238413">false</span><span class="op" id="8238418">}</span><span class="op" id="8238419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238422">{</span><span class="string" id="8238423">&#34;&#34;</span><span class="op" id="8238425">,</span>&nbsp;<span class="string" id="8238427">&#34;foo&#34;</span><span class="op" id="8238432">,</span>&nbsp;<span class="builtintype" id="8238434">false</span><span class="op" id="8238439">}</span><span class="op" id="8238440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238443">{</span><span class="string" id="8238444">&#34;foo&#34;</span><span class="op" id="8238449">,</span>&nbsp;<span class="string" id="8238451">&#34;foo&#34;</span><span class="op" id="8238456">,</span>&nbsp;<span class="builtintype" id="8238458">true</span><span class="op" id="8238462">}</span><span class="op" id="8238463">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238466">{</span><span class="string" id="8238467">&#34;foo&nbsp;&#34;</span><span class="op" id="8238473">,</span>&nbsp;<span class="string" id="8238475">&#34;foo&#34;</span><span class="op" id="8238480">,</span>&nbsp;<span class="builtintype" id="8238482">true</span><span class="op" id="8238486">}</span><span class="op" id="8238487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238490">{</span><span class="string" id="8238491">&#34;&nbsp;foo&#34;</span><span class="op" id="8238497">,</span>&nbsp;<span class="string" id="8238499">&#34;foo&#34;</span><span class="op" id="8238504">,</span>&nbsp;<span class="builtintype" id="8238506">true</span><span class="op" id="8238510">}</span><span class="op" id="8238511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238514">{</span><span class="string" id="8238515">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="8238522">,</span>&nbsp;<span class="string" id="8238524">&#34;foo&#34;</span><span class="op" id="8238529">,</span>&nbsp;<span class="builtintype" id="8238531">true</span><span class="op" id="8238535">}</span><span class="op" id="8238536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238539">{</span><span class="string" id="8238540">&#34;foo,bar&#34;</span><span class="op" id="8238549">,</span>&nbsp;<span class="string" id="8238551">&#34;foo&#34;</span><span class="op" id="8238556">,</span>&nbsp;<span class="builtintype" id="8238558">true</span><span class="op" id="8238562">}</span><span class="op" id="8238563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238566">{</span><span class="string" id="8238567">&#34;bar,foo&#34;</span><span class="op" id="8238576">,</span>&nbsp;<span class="string" id="8238578">&#34;foo&#34;</span><span class="op" id="8238583">,</span>&nbsp;<span class="builtintype" id="8238585">true</span><span class="op" id="8238589">}</span><span class="op" id="8238590">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238593">{</span><span class="string" id="8238594">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="8238604">,</span>&nbsp;<span class="string" id="8238606">&#34;foo&#34;</span><span class="op" id="8238611">,</span>&nbsp;<span class="builtintype" id="8238613">true</span><span class="op" id="8238617">}</span><span class="op" id="8238618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238621">{</span><span class="string" id="8238622">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8238636">,</span>&nbsp;<span class="string" id="8238638">&#34;foo&#34;</span><span class="op" id="8238643">,</span>&nbsp;<span class="builtintype" id="8238645">true</span><span class="op" id="8238649">}</span><span class="op" id="8238650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238653">{</span><span class="string" id="8238654">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="8238668">,</span>&nbsp;<span class="string" id="8238670">&#34;foo&#34;</span><span class="op" id="8238675">,</span>&nbsp;<span class="builtintype" id="8238677">true</span><span class="op" id="8238681">}</span><span class="op" id="8238682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238685">{</span><span class="string" id="8238686">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8238700">,</span>&nbsp;<span class="string" id="8238702">&#34;foo&#34;</span><span class="op" id="8238707">,</span>&nbsp;<span class="builtintype" id="8238709">true</span><span class="op" id="8238713">}</span><span class="op" id="8238714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238717">{</span><span class="string" id="8238718">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="8238733">,</span>&nbsp;<span class="string" id="8238735">&#34;foo&#34;</span><span class="op" id="8238740">,</span>&nbsp;<span class="builtintype" id="8238742">true</span><span class="op" id="8238746">}</span><span class="op" id="8238747">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238750">{</span><span class="string" id="8238751">&#34;FOO&#34;</span><span class="op" id="8238756">,</span>&nbsp;<span class="string" id="8238758">&#34;foo&#34;</span><span class="op" id="8238763">,</span>&nbsp;<span class="builtintype" id="8238765">true</span><span class="op" id="8238769">}</span><span class="op" id="8238770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238773">{</span><span class="string" id="8238774">&#34;FOO&nbsp;&#34;</span><span class="op" id="8238780">,</span>&nbsp;<span class="string" id="8238782">&#34;foo&#34;</span><span class="op" id="8238787">,</span>&nbsp;<span class="builtintype" id="8238789">true</span><span class="op" id="8238793">}</span><span class="op" id="8238794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238797">{</span><span class="string" id="8238798">&#34;&nbsp;FOO&#34;</span><span class="op" id="8238804">,</span>&nbsp;<span class="string" id="8238806">&#34;foo&#34;</span><span class="op" id="8238811">,</span>&nbsp;<span class="builtintype" id="8238813">true</span><span class="op" id="8238817">}</span><span class="op" id="8238818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238821">{</span><span class="string" id="8238822">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="8238829">,</span>&nbsp;<span class="string" id="8238831">&#34;foo&#34;</span><span class="op" id="8238836">,</span>&nbsp;<span class="builtintype" id="8238838">true</span><span class="op" id="8238842">}</span><span class="op" id="8238843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238846">{</span><span class="string" id="8238847">&#34;FOO,BAR&#34;</span><span class="op" id="8238856">,</span>&nbsp;<span class="string" id="8238858">&#34;foo&#34;</span><span class="op" id="8238863">,</span>&nbsp;<span class="builtintype" id="8238865">true</span><span class="op" id="8238869">}</span><span class="op" id="8238870">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238873">{</span><span class="string" id="8238874">&#34;BAR,FOO&#34;</span><span class="op" id="8238883">,</span>&nbsp;<span class="string" id="8238885">&#34;foo&#34;</span><span class="op" id="8238890">,</span>&nbsp;<span class="builtintype" id="8238892">true</span><span class="op" id="8238896">}</span><span class="op" id="8238897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238900">{</span><span class="string" id="8238901">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="8238911">,</span>&nbsp;<span class="string" id="8238913">&#34;foo&#34;</span><span class="op" id="8238918">,</span>&nbsp;<span class="builtintype" id="8238920">true</span><span class="op" id="8238924">}</span><span class="op" id="8238925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238928">{</span><span class="string" id="8238929">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="8238943">,</span>&nbsp;<span class="string" id="8238945">&#34;foo&#34;</span><span class="op" id="8238950">,</span>&nbsp;<span class="builtintype" id="8238952">true</span><span class="op" id="8238956">}</span><span class="op" id="8238957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238960">{</span><span class="string" id="8238961">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="8238975">,</span>&nbsp;<span class="string" id="8238977">&#34;foo&#34;</span><span class="op" id="8238982">,</span>&nbsp;<span class="builtintype" id="8238984">true</span><span class="op" id="8238988">}</span><span class="op" id="8238989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8238992">{</span><span class="string" id="8238993">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="8239007">,</span>&nbsp;<span class="string" id="8239009">&#34;foo&#34;</span><span class="op" id="8239014">,</span>&nbsp;<span class="builtintype" id="8239016">true</span><span class="op" id="8239020">}</span><span class="op" id="8239021">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239024">{</span><span class="string" id="8239025">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="8239040">,</span>&nbsp;<span class="string" id="8239042">&#34;foo&#34;</span><span class="op" id="8239047">,</span>&nbsp;<span class="builtintype" id="8239049">true</span><span class="op" id="8239053">}</span><span class="op" id="8239054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239057">{</span><span class="string" id="8239058">&#34;foobar&#34;</span><span class="op" id="8239066">,</span>&nbsp;<span class="string" id="8239068">&#34;foo&#34;</span><span class="op" id="8239073">,</span>&nbsp;<span class="builtintype" id="8239075">false</span><span class="op" id="8239080">}</span><span class="op" id="8239081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239084">{</span><span class="string" id="8239085">&#34;barfoo&nbsp;&#34;</span><span class="op" id="8239094">,</span>&nbsp;<span class="string" id="8239096">&#34;foo&#34;</span><span class="op" id="8239101">,</span>&nbsp;<span class="builtintype" id="8239103">false</span><span class="op" id="8239108">}</span><span class="op" id="8239109">,</span><br>
<span class="lineno"></span><span class="op" id="8239111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8239114">func</span>&nbsp;<span class="ident" id="8239119">TestHasToken</span><span class="op" id="8239131">(</span><span class="ident" id="8239132">t</span>&nbsp;<span class="op" id="8239134">*</span><span class="ident" id="8239135">testing</span><span class="op" id="8239142">.</span><span class="ident" id="8239143">T</span><span class="op" id="8239144">)</span>&nbsp;<span class="op" id="8239146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8239149">for</span>&nbsp;<span class="ident" id="8239153">_</span><span class="op" id="8239154">,</span>&nbsp;<span class="ident" id="8239156">tt</span>&nbsp;<span class="op" id="8239159">:=</span>&nbsp;<span class="keyword" id="8239162">range</span>&nbsp;<span class="ident" id="8239168">hasTokenTests</span>&nbsp;<span class="op" id="8239182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8239186">if</span>&nbsp;<span class="ident" id="8239189">hasToken</span><span class="op" id="8239197">(</span><span class="ident" id="8239198">tt</span><span class="op" id="8239200">.</span><span class="ident" id="8239201">header</span><span class="op" id="8239207">,</span>&nbsp;<span class="ident" id="8239209">tt</span><span class="op" id="8239211">.</span><span class="ident" id="8239212">token</span><span class="op" id="8239217">)</span>&nbsp;<span class="op" id="8239219">!=</span>&nbsp;<span class="ident" id="8239222">tt</span><span class="op" id="8239224">.</span><span class="ident" id="8239225">want</span>&nbsp;<span class="op" id="8239230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239235">t</span><span class="op" id="8239236">.</span><span class="ident" id="8239237">Errorf</span><span class="op" id="8239243">(</span><span class="string" id="8239244">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8239276">,</span>&nbsp;<span class="ident" id="8239278">tt</span><span class="op" id="8239280">.</span><span class="ident" id="8239281">header</span><span class="op" id="8239287">,</span>&nbsp;<span class="ident" id="8239289">tt</span><span class="op" id="8239291">.</span><span class="ident" id="8239292">token</span><span class="op" id="8239297">,</span>&nbsp;<span class="op" id="8239299">!</span><span class="ident" id="8239300">tt</span><span class="op" id="8239302">.</span><span class="ident" id="8239303">want</span><span class="op" id="8239307">,</span>&nbsp;<span class="ident" id="8239309">tt</span><span class="op" id="8239311">.</span><span class="ident" id="8239312">want</span><span class="op" id="8239316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239320">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239323">}</span><br>
<span class="lineno"></span><span class="op" id="8239325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8239328">var</span>&nbsp;<span class="ident" id="8239332">testHeader</span>&nbsp;<span class="op" id="8239343">=</span>&nbsp;<span class="ident" id="8239345">Header</span><span class="op" id="8239351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8239354">&#34;Content-Length&#34;</span><span class="op" id="8239370">:</span>&nbsp;<span class="op" id="8239372">{</span><span class="string" id="8239373">&#34;123&#34;</span><span class="op" id="8239378">}</span><span class="op" id="8239379">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8239382">&#34;Content-Type&#34;</span><span class="op" id="8239396">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8239400">{</span><span class="string" id="8239401">&#34;text/plain&#34;</span><span class="op" id="8239413">}</span><span class="op" id="8239414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8239417">&#34;Date&#34;</span><span class="op" id="8239423">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239435">{</span><span class="string" id="8239436">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="8239462">}</span><span class="op" id="8239463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8239466">&#34;Server&#34;</span><span class="op" id="8239474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239484">{</span><span class="ident" id="8239485">DefaultUserAgent</span><span class="op" id="8239501">}</span><span class="op" id="8239502">,</span><br>
<span class="lineno"></span><span class="op" id="8239504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="8239507">var</span>&nbsp;<span class="ident" id="8239511">buf</span>&nbsp;<span class="ident" id="8239515">bytes</span><span class="op" id="8239520">.</span><span class="ident" id="8239521">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8239529">func</span>&nbsp;<span class="ident" id="8239534">BenchmarkHeaderWriteSubset</span><span class="op" id="8239560">(</span><span class="ident" id="8239561">b</span>&nbsp;<span class="op" id="8239563">*</span><span class="ident" id="8239564">testing</span><span class="op" id="8239571">.</span><span class="ident" id="8239572">B</span><span class="op" id="8239573">)</span>&nbsp;<span class="op" id="8239575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239578">b</span><span class="op" id="8239579">.</span><span class="ident" id="8239580">ReportAllocs</span><span class="op" id="8239592">(</span><span class="op" id="8239593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8239596">for</span>&nbsp;<span class="ident" id="8239600">i</span>&nbsp;<span class="op" id="8239602">:=</span>&nbsp;<span class="num" id="8239605">0</span><span class="op" id="8239606">;</span>&nbsp;<span class="ident" id="8239608">i</span>&nbsp;<span class="op" id="8239610">&lt;</span>&nbsp;<span class="ident" id="8239612">b</span><span class="op" id="8239613">.</span><span class="ident" id="8239614">N</span><span class="op" id="8239615">;</span>&nbsp;<span class="ident" id="8239617">i</span><span class="op" id="8239618">++</span>&nbsp;<span class="op" id="8239621">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239625">buf</span><span class="op" id="8239628">.</span><span class="ident" id="8239629">Reset</span><span class="op" id="8239634">(</span><span class="op" id="8239635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239639">testHeader</span><span class="op" id="8239649">.</span><span class="ident" id="8239650">WriteSubset</span><span class="op" id="8239661">(</span><span class="op" id="8239662">&amp;</span><span class="ident" id="8239663">buf</span><span class="op" id="8239666">,</span>&nbsp;<span class="ident" id="8239668">nil</span><span class="op" id="8239671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239674">}</span><br>
<span class="lineno"></span><span class="op" id="8239676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="8239679">func</span>&nbsp;<span class="ident" id="8239684">TestHeaderWriteSubsetAllocs</span><span class="op" id="8239711">(</span><span class="ident" id="8239712">t</span>&nbsp;<span class="op" id="8239714">*</span><span class="ident" id="8239715">testing</span><span class="op" id="8239722">.</span><span class="ident" id="8239723">T</span><span class="op" id="8239724">)</span>&nbsp;<span class="op" id="8239726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8239729">if</span>&nbsp;<span class="ident" id="8239732">testing</span><span class="op" id="8239739">.</span><span class="ident" id="8239740">Short</span><span class="op" id="8239745">(</span><span class="op" id="8239746">)</span>&nbsp;<span class="op" id="8239748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239752">t</span><span class="op" id="8239753">.</span><span class="ident" id="8239754">Skip</span><span class="op" id="8239758">(</span><span class="string" id="8239759">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8239794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8239800">if</span>&nbsp;<span class="ident" id="8239803">raceEnabled</span>&nbsp;<span class="op" id="8239815">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239819">t</span><span class="op" id="8239820">.</span><span class="ident" id="8239821">Skip</span><span class="op" id="8239825">(</span><span class="string" id="8239826">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="8239861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8239867">if</span>&nbsp;<span class="ident" id="8239870">runtime</span><span class="op" id="8239877">.</span><span class="ident" id="8239878">GOMAXPROCS</span><span class="op" id="8239888">(</span><span class="num" id="8239889">0</span><span class="op" id="8239890">)</span>&nbsp;<span class="op" id="8239892">&gt;</span>&nbsp;<span class="num" id="8239894">1</span>&nbsp;<span class="op" id="8239896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239900">t</span><span class="op" id="8239901">.</span><span class="ident" id="8239902">Skip</span><span class="op" id="8239906">(</span><span class="string" id="8239907">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8239931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8239934">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239937">n</span>&nbsp;<span class="op" id="8239939">:=</span>&nbsp;<span class="ident" id="8239942">testing</span><span class="op" id="8239949">.</span><span class="ident" id="8239950">AllocsPerRun</span><span class="op" id="8239962">(</span><span class="num" id="8239963">100</span><span class="op" id="8239966">,</span>&nbsp;<span class="keyword" id="8239968">func</span><span class="op" id="8239972">(</span><span class="op" id="8239973">)</span>&nbsp;<span class="op" id="8239975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239979">buf</span><span class="op" id="8239982">.</span><span class="ident" id="8239983">Reset</span><span class="op" id="8239988">(</span><span class="op" id="8239989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8239993">testHeader</span><span class="op" id="8240003">.</span><span class="ident" id="8240004">WriteSubset</span><span class="op" id="8240015">(</span><span class="op" id="8240016">&amp;</span><span class="ident" id="8240017">buf</span><span class="op" id="8240020">,</span>&nbsp;<span class="ident" id="8240022">nil</span><span class="op" id="8240025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8240028">}</span><span class="op" id="8240029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8240032">if</span>&nbsp;<span class="ident" id="8240035">n</span>&nbsp;<span class="op" id="8240037">&gt;</span>&nbsp;<span class="num" id="8240039">0</span>&nbsp;<span class="op" id="8240041">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8240045">t</span><span class="op" id="8240046">.</span><span class="ident" id="8240047">Errorf</span><span class="op" id="8240053">(</span><span class="string" id="8240054">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="8240075">,</span>&nbsp;<span class="ident" id="8240077">n</span><span class="op" id="8240078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8240081">}</span><br>
<span class="lineno"></span><span class="op" id="8240083">}</span>
</div>
</body>
</html>
